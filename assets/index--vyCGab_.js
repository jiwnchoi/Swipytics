var Rde=Object.defineProperty;var _9=e=>{throw TypeError(e)};var Ode=(e,t,n)=>t in e?Rde(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Dde=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ie=(e,t,n)=>Ode(e,typeof t!="symbol"?t+"":t,n),o$=(e,t,n)=>t.has(e)||_9("Cannot "+n);var j=(e,t,n)=>(o$(e,t,"read from private field"),n?n.call(e):t.get(e)),Fe=(e,t,n)=>t.has(e)?_9("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),pe=(e,t,n,r)=>(o$(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),je=(e,t,n)=>(o$(e,t,"access private method"),n);var kb=(e,t,n,r)=>({set _(i){pe(e,t,i,n)},get _(){return j(e,t,r)}});var qut=Dde((Oct,n8)=>{function yq(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Li=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ul(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vq={exports:{}},VC={},bq={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv=Symbol.for("react.element"),Nde=Symbol.for("react.portal"),Lde=Symbol.for("react.fragment"),Ide=Symbol.for("react.strict_mode"),zde=Symbol.for("react.profiler"),Bde=Symbol.for("react.provider"),jde=Symbol.for("react.context"),Ude=Symbol.for("react.forward_ref"),Vde=Symbol.for("react.suspense"),Wde=Symbol.for("react.memo"),Hde=Symbol.for("react.lazy"),$9=Symbol.iterator;function qde(e){return e===null||typeof e!="object"?null:(e=$9&&e[$9]||e["@@iterator"],typeof e=="function"?e:null)}var xq={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wq=Object.assign,Sq={};function Zg(e,t,n){this.props=e,this.context=t,this.refs=Sq,this.updater=n||xq}Zg.prototype.isReactComponent={};Zg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cq(){}Cq.prototype=Zg.prototype;function $F(e,t,n){this.props=e,this.context=t,this.refs=Sq,this.updater=n||xq}var AF=$F.prototype=new Cq;AF.constructor=$F;wq(AF,Zg.prototype);AF.isPureReactComponent=!0;var A9=Array.isArray,kq=Object.prototype.hasOwnProperty,TF={current:null},Eq={key:!0,ref:!0,__self:!0,__source:!0};function _q(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)kq.call(t,r)&&!Eq.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:rv,type:e,key:o,ref:s,props:i,_owner:TF.current}}function Gde(e,t){return{$$typeof:rv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function PF(e){return typeof e=="object"&&e!==null&&e.$$typeof===rv}function Yde(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var T9=/\/+/g;function s$(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yde(""+e.key):t.toString(36)}function Kx(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case rv:case Nde:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+s$(s,0):r,A9(i)?(n="",e!=null&&(n=e.replace(T9,"$&/")+"/"),Kx(i,t,n,"",function(u){return u})):i!=null&&(PF(i)&&(i=Gde(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(T9,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",A9(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+s$(o,a);s+=Kx(o,t,n,l,i)}else if(l=qde(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+s$(o,a++),s+=Kx(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Eb(e,t,n){if(e==null)return e;var r=[],i=0;return Kx(e,r,"","",function(o){return t.call(n,o,i++)}),r}function Xde(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Zr={current:null},Qx={transition:null},Kde={ReactCurrentDispatcher:Zr,ReactCurrentBatchConfig:Qx,ReactCurrentOwner:TF};function $q(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Eb,forEach:function(e,t,n){Eb(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Eb(e,function(){t++}),t},toArray:function(e){return Eb(e,function(t){return t})||[]},only:function(e){if(!PF(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=Zg;ze.Fragment=Lde;ze.Profiler=zde;ze.PureComponent=$F;ze.StrictMode=Ide;ze.Suspense=Vde;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kde;ze.act=$q;ze.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=wq({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=TF.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)kq.call(t,l)&&!Eq.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:rv,type:e.type,key:i,ref:o,props:r,_owner:s}};ze.createContext=function(e){return e={$$typeof:jde,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Bde,_context:e},e.Consumer=e};ze.createElement=_q;ze.createFactory=function(e){var t=_q.bind(null,e);return t.type=e,t};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:Ude,render:e}};ze.isValidElement=PF;ze.lazy=function(e){return{$$typeof:Hde,_payload:{_status:-1,_result:e},_init:Xde}};ze.memo=function(e,t){return{$$typeof:Wde,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=Qx.transition;Qx.transition={};try{e()}finally{Qx.transition=t}};ze.unstable_act=$q;ze.useCallback=function(e,t){return Zr.current.useCallback(e,t)};ze.useContext=function(e){return Zr.current.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e){return Zr.current.useDeferredValue(e)};ze.useEffect=function(e,t){return Zr.current.useEffect(e,t)};ze.useId=function(){return Zr.current.useId()};ze.useImperativeHandle=function(e,t,n){return Zr.current.useImperativeHandle(e,t,n)};ze.useInsertionEffect=function(e,t){return Zr.current.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return Zr.current.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return Zr.current.useMemo(e,t)};ze.useReducer=function(e,t,n){return Zr.current.useReducer(e,t,n)};ze.useRef=function(e){return Zr.current.useRef(e)};ze.useState=function(e){return Zr.current.useState(e)};ze.useSyncExternalStore=function(e,t,n){return Zr.current.useSyncExternalStore(e,t,n)};ze.useTransition=function(){return Zr.current.useTransition()};ze.version="18.3.1";bq.exports=ze;var F=bq.exports;const Vi=Ul(F),P9=yq({__proto__:null,default:Vi},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qde=F,Jde=Symbol.for("react.element"),Zde=Symbol.for("react.fragment"),ehe=Object.prototype.hasOwnProperty,the=Qde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nhe={key:!0,ref:!0,__self:!0,__source:!0};function Aq(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)ehe.call(t,r)&&!nhe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Jde,type:e,key:o,ref:s,props:i,_owner:the.current}}VC.Fragment=Zde;VC.jsx=Aq;VC.jsxs=Aq;vq.exports=VC;var $=vq.exports;function rhe(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tq=Symbol("Comlink.proxy"),ihe=Symbol("Comlink.endpoint"),Pq=Symbol("Comlink.releaseProxy"),a$=Symbol("Comlink.finalizer"),Jx=Symbol("Comlink.thrown"),Fq=e=>typeof e=="object"&&e!==null||typeof e=="function",ohe={canHandle:e=>Fq(e)&&e[Tq],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Rq(e,t),[n,[n]]},deserialize(e){return e.start(),Dq(e)}},she={canHandle:e=>Fq(e)&&Jx in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Mq=new Map([["proxy",ohe],["throw",she]]);function ahe(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function Rq(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(i){if(!i||!i.data)return;if(!ahe(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:o,type:s,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(yf);let u;try{const c=a.slice(0,-1).reduce((d,h)=>d[h],e),f=a.reduce((d,h)=>d[h],e);switch(s){case"GET":u=f;break;case"SET":c[a.slice(-1)[0]]=yf(i.data.value),u=!0;break;case"APPLY":u=f.apply(c,l);break;case"CONSTRUCT":{const d=new f(...l);u=hhe(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;Rq(e,h),u=dhe(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[Jx]:0}}Promise.resolve(u).catch(c=>({value:c,[Jx]:0})).then(c=>{const[f,d]=nw(c);t.postMessage(Object.assign(Object.assign({},f),{id:o}),d),s==="RELEASE"&&(t.removeEventListener("message",r),Oq(t),a$ in e&&typeof e[a$]=="function"&&e[a$]())}).catch(c=>{const[f,d]=nw({value:new TypeError("Unserializable return value"),[Jx]:0});t.postMessage(Object.assign(Object.assign({},f),{id:o}),d)})}),t.start&&t.start()}function lhe(e){return e.constructor.name==="MessagePort"}function Oq(e){lhe(e)&&e.close()}function Dq(e,t){return iA(e,[],t)}function _b(e){if(e)throw new Error("Proxy has been released and is not useable")}function Nq(e){return Oh(e,{type:"RELEASE"}).then(()=>{Oq(e)})}const ew=new WeakMap,tw="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(ew.get(e)||0)-1;ew.set(e,t),t===0&&Nq(e)});function uhe(e,t){const n=(ew.get(t)||0)+1;ew.set(t,n),tw&&tw.register(e,t,e)}function che(e){tw&&tw.unregister(e)}function iA(e,t=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(o,s){if(_b(r),s===Pq)return()=>{che(i),Nq(e),r=!0};if(s==="then"){if(t.length===0)return{then:()=>i};const a=Oh(e,{type:"GET",path:t.map(l=>l.toString())}).then(yf);return a.then.bind(a)}return iA(e,[...t,s])},set(o,s,a){_b(r);const[l,u]=nw(a);return Oh(e,{type:"SET",path:[...t,s].map(c=>c.toString()),value:l},u).then(yf)},apply(o,s,a){_b(r);const l=t[t.length-1];if(l===ihe)return Oh(e,{type:"ENDPOINT"}).then(yf);if(l==="bind")return iA(e,t.slice(0,-1));const[u,c]=F9(a);return Oh(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},c).then(yf)},construct(o,s){_b(r);const[a,l]=F9(s);return Oh(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:a},l).then(yf)}});return uhe(i,e),i}function fhe(e){return Array.prototype.concat.apply([],e)}function F9(e){const t=e.map(nw);return[t.map(n=>n[0]),fhe(t.map(n=>n[1]))]}const Lq=new WeakMap;function dhe(e,t){return Lq.set(e,t),e}function hhe(e){return Object.assign(e,{[Tq]:!0})}function nw(e){for(const[t,n]of Mq)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},Lq.get(e)||[]]}function yf(e){switch(e.type){case"HANDLER":return Mq.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Oh(e,t,n){return new Promise(r=>{const i=phe();e.addEventListener("message",function o(s){!s.data||!s.data.id||s.data.id!==i||(e.removeEventListener("message",o),r(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)})}function phe(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function ghe(e){return new Worker("/Swipytics/assets/pyodide-worker-xTS2ssw1.js",{type:"module",name:e==null?void 0:e.name})}let vo=null,gr=null;const mhe=async(e,t)=>{if(!vo||!gr)throw new Error("pyodide isn't loaded yet");return await gr.runPython(e,t)},yhe=async(e,t)=>{if(!vo||!gr)throw new Error("pyodide isn't loaded yet");return gr.callPythonFunction(e,t)},vhe=async(e,t)=>{if(!vo||!gr)throw new Error("pyodide isn't loaded yet");return gr.writeFile(e,t)},bhe=async e=>{if(!vo||!gr)throw new Error("pyodide isn't loaded yet");return gr.readFile(e)},xhe=async e=>(vo||(vo=new ghe({name:"pyodide-worker"}),gr=Dq(vo),await gr.initialize(e)),{runPython:mhe,callPythonFunction:yhe,writeFile:vhe,readFile:bhe,terminate:()=>{vo==null||vo.terminate(),vo=null,gr==null||gr[Pq](),gr=null},initialize:async t=>{if(!vo||!gr)throw new Error("pyodide isn't loaded yet");await gr.initialize(t)}});let sy;async function whe(e){const{packages:t}=e||{};return sy===void 0&&(sy=await She(t)),sy}const She=async e=>(sy=await xhe(e),sy),Ec=async()=>await whe({packages:["draco"]});async function Che({chart:e}){return await(await Ec()).callPythonFunction("appendChart",[e])}async function khe({chart:e}){return await(await fetch("/api/appendChart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chart:e})})).json()}const Ehe={pyodide:Che,server:khe};async function _he(){return await(await Ec()).callPythonFunction("appendNextChart",[])}async function $he(){return await(await fetch("/api/appendNextChart")).json()}const Ahe={server:$he,pyodide:_he};async function The({fieldNames:e}){return await(await Ec()).callPythonFunction("browseCharts",[e])}async function Phe({fieldNames:e}){return await(await fetch("/api/browseCharts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({field_names:e})})).json()}const Fhe={pyodide:The,server:Phe};async function Mhe({fieldNames:e}){return await(await Ec()).callPythonFunction("getCharts",[e])}async function Rhe({fieldNames:e}){return await(await fetch("/api/getCharts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({field_names:e})})).json()}const Ohe={pyodide:Mhe,server:Rhe};async function Dhe({session:e}){return await(await Ec()).callPythonFunction("loadSession",[e])}async function Nhe({session:e}){return await(await fetch("/api/loadSession",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}const Lhe={pyodide:Dhe,server:Nhe};async function Ihe({key:e,preferred:t}){await(await Ec()).callPythonFunction("setPreferred",[e,t])}async function zhe({key:e,preferred:t}){await fetch("/api/setPreferred",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:e,preferred:t})})}const Bhe={pyodide:Ihe,server:zhe};async function jhe({filename:e,fileBuffer:t}){await(await Ec()).writeFile(e,t)}async function Uhe({filename:e,fileBuffer:t}){const n=new Blob([t]),r=new FormData;r.append("file",n,e),await fetch("/api/writeFile",{method:"POST",body:r})}const Vhe={pyodide:jhe,server:Uhe},Whe={appendChart:Ehe,getCharts:Ohe,appendNextChart:Ahe,browseCharts:Fhe,loadSession:Lhe,writeFile:Vhe,setPreferred:Bhe};async function Hhe(e,t,n){return await Whe[t][e](n)}class qhe{constructor(){ie(this,"python","pyodide");ie(this,"serverConnectable",!1);ie(this,"pyodideLoaded",!1);ie(this,"emitter",rhe());this.initializeRouter()}async initializeRouter(){await Promise.all([this.loadPyodide(),this.checkServerConnection()])}async loadPyodide(){if(!this.pyodideLoaded)try{await Ec(),this.pyodideLoaded=!0,this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}catch(t){console.error("error while connecting pyodide:",t),this.pyodideLoaded=!1,this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}}async checkServerConnection(){try{const t=await fetch("/api");this.serverConnectable=t.ok,this.serverConnectable&&(this.python="server"),this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}catch(t){this.serverConnectable=!1,console.error("error while connecting server:",t),this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}}getPythonType(){return this.python}setPython(t){return t==="server"&&!this.serverConnectable?!1:(this.python=t,this.emitter.emit("loadingStatusChange",this.getLoadingStatus()),!0)}getLoadingStatus(){return{loadingPyodide:this.python==="pyodide"&&!this.pyodideLoaded,loadingServer:this.python==="server"&&!this.serverConnectable,loading:this.python==="pyodide"&&!this.pyodideLoaded||this.python==="server"&&!this.serverConnectable}}on(t,n){this.emitter.on(t,n)}off(t,n){this.emitter.off(t,n)}async call(t,n){if(this.getLoadingStatus().loading)return console.error("Router is not loaded yet"),null;try{return await Hhe(this.getPythonType(),t,n)}catch(r){return console.error("error while calling endpoint:",r),null}}async lazyCall(t,n){return new Promise(r=>{const i=()=>{this.getLoadingStatus().loading||(this.off("loadingStatusChange",i),r(this.call(t,n)))};this.on("loadingStatusChange",i),i()})}}const Di=new qhe;function M9(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const Iq=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),R9=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);R9&&parseFloat(R9[1]);const $b=globalThis,ch=globalThis.process||{};function Ghe(e){var r,i;if(typeof window<"u"&&((r=window.process)==null?void 0:r.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function FF(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||Ghe()}const zq="4.0.7";function Yhe(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch{return null}}class Xhe{constructor(t,n,r="sessionStorage"){this.storage=Yhe(r),this.id=t,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let t={};if(this.storage){const n=this.storage.getItem(this.id);t=n?JSON.parse(n):{}}return Object.assign(this.config,t),this}}function Khe(e){let t;return e<10?t=`${e.toFixed(2)}ms`:e<100?t=`${e.toFixed(1)}ms`:e<1e3?t=`${e.toFixed(0)}ms`:t=`${(e/1e3).toFixed(2)}s`,t}function Qhe(e,t=8){const n=Math.max(t-e.length,0);return`${" ".repeat(n)}${e}`}var rw;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(rw||(rw={}));const Jhe=10;function O9(e){return typeof e!="string"?e:(e=e.toUpperCase(),rw[e]||rw.WHITE)}function Zhe(e,t,n){return!FF&&typeof e=="string"&&(t&&(e=`\x1B[${O9(t)}m${e}\x1B[39m`),n&&(e=`\x1B[${O9(n)+Jhe}m${e}\x1B[49m`)),e}function epe(e,t=["constructor"]){const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=e;for(const o of r){const s=i[o];typeof s=="function"&&(t.find(a=>o===a)||(i[o]=s.bind(e)))}}function MF(e,t){if(!e)throw new Error("Assertion failed")}function fh(){var t,n,r;let e;if(FF()&&$b.performance)e=(n=(t=$b==null?void 0:$b.performance)==null?void 0:t.now)==null?void 0:n.call(t);else if("hrtime"in ch){const i=(r=ch==null?void 0:ch.hrtime)==null?void 0:r.call(ch);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const dh={debug:FF()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},tpe={enabled:!0,level:0};function hh(){}const D9={},N9={once:!0};let RF=class{constructor({id:t}={id:""}){this.VERSION=zq,this._startTs=fh(),this._deltaTs=fh(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new Xhe(`__probe-${this.id}__`,tpe),this.timeStamp(`${this.id} started`),epe(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((fh()-this._startTs).toPrecision(10))}getDelta(){return Number((fh()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,n){this._storage.setConfiguration({[t]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,n){if(!t)throw new Error(n||"Assertion failed")}warn(t){return this._getLogFunction(0,t,dh.warn,arguments,N9)}error(t){return this._getLogFunction(0,t,dh.error,arguments)}deprecated(t,n){return this.warn(`\`${t}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(t,n){return this.error(`\`${t}\` has been removed. Use \`${n}\` instead`)}probe(t,n){return this._getLogFunction(t,n,dh.log,arguments,{time:!0,once:!0})}log(t,n){return this._getLogFunction(t,n,dh.debug,arguments)}info(t,n){return this._getLogFunction(t,n,console.info,arguments)}once(t,n){return this._getLogFunction(t,n,dh.debug||dh.info,arguments,N9)}table(t,n,r){return n?this._getLogFunction(t,n,console.table||hh,r&&[r],{tag:rpe(n)}):hh}time(t,n){return this._getLogFunction(t,n,console.time?console.time:console.info)}timeEnd(t,n){return this._getLogFunction(t,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,n){return this._getLogFunction(t,n,console.timeStamp||hh)}group(t,n,r={collapsed:!1}){const i=L9({logLevel:t,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,n,r={}){return this.group(t,n,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||hh)}withGroup(t,n,r){this.group(t,n)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=Bq(t)}_getLogFunction(t,n,r,i,o){if(this._shouldLog(t)){o=L9({logLevel:t,message:n,args:i,opts:o}),r=r||o.method,MF(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=fh();const s=o.tag||o.message;if(o.once&&s)if(!D9[s])D9[s]=fh();else return hh;return n=npe(this.id,o.message,o),r.bind(console,n,...o.args)}return hh}};RF.VERSION=zq;function Bq(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return MF(Number.isFinite(t)&&t>=0),t}function L9(e){const{logLevel:t,message:n}=e;e.logLevel=Bq(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":n!==void 0&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return MF(i==="string"||i==="object"),Object.assign(e,{args:r},e.opts)}function npe(e,t,n){if(typeof t=="string"){const r=n.time?Qhe(Khe(n.total)):"";t=n.time?`${e}: ${r}  ${t}`:`${e}: ${t}`,t=Zhe(t,n.color,n.background)}return t}function rpe(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}function ipe(e,t){return jq(e||{},t)}function jq(e,t,n=0){if(n>3)return t;const r={...e};for(const[i,o]of Object.entries(t))o&&typeof o=="object"&&!Array.isArray(o)?r[i]=jq(r[i]||{},t[i],n+1):r[i]=t[i];return r}const ope="latest";function spe(){var e;return(e=globalThis._loadersgl_)!=null&&e.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version}const ape=spe();function rc(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const jf=typeof process!="object"||String(process)!=="[object process]"||process.browser,lpe=typeof window<"u"&&typeof window.orientation<"u",I9=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);I9&&parseFloat(I9[1]);class upe{constructor(t,n){ie(this,"name");ie(this,"workerThread");ie(this,"isRunning",!0);ie(this,"result");ie(this,"_resolve",()=>{});ie(this,"_reject",()=>{});this.name=t,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(t,n){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:n})}done(t){rc(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){rc(this.isRunning),this.isRunning=!1,this._reject(t)}}class l${terminate(){}}const u$=new Map;function cpe(e){rc(e.source&&!e.url||!e.source&&e.url);let t=u$.get(e.source||e.url);return t||(e.url&&(t=fpe(e.url),u$.set(e.url,t)),e.source&&(t=Uq(e.source),u$.set(e.source,t))),rc(t),t}function fpe(e){if(!e.startsWith("http"))return e;const t=dpe(e);return Uq(t)}function Uq(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function dpe(e){return`try {
  importScripts('${e}');
} catch (error) {
  console.error(error);
  throw error;
}`}function Vq(e,t=!0,n){const r=n||new Set;if(e){if(z9(e))r.add(e);else if(z9(e.buffer))r.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)Vq(e[i],t,r)}}return n===void 0?Array.from(r):[]}function z9(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const c$=()=>{};class oA{constructor(t){ie(this,"name");ie(this,"source");ie(this,"url");ie(this,"terminated",!1);ie(this,"worker");ie(this,"onMessage");ie(this,"onError");ie(this,"_loadableURL","");const{name:n,source:r,url:i}=t;rc(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=c$,this.onError=o=>console.log(o),this.worker=jf?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&jf||typeof l$<"u"&&!jf}destroy(){this.onMessage=c$,this.onError=c$,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,n){n=n||Vq(t),this.worker.postMessage(t,n)}_getErrorFromErrorEvent(t){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,t.message&&(n+=`${t.message} in `),t.lineno&&(n+=`:${t.lineno}:${t.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=cpe({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},t.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},t.onmessageerror=n=>console.error(n),t}_createNodeWorker(){let t;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new l$(r,{eval:!1})}else if(this.source)t=new l$(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",n=>{this.onMessage(n)}),t.on("error",n=>{this.onError(n)}),t.on("exit",n=>{}),t}}class hpe{constructor(t){ie(this,"name","unnamed");ie(this,"source");ie(this,"url");ie(this,"maxConcurrency",1);ie(this,"maxMobileConcurrency",1);ie(this,"onDebug",()=>{});ie(this,"reuseWorkers",!0);ie(this,"props",{});ie(this,"jobQueue",[]);ie(this,"idleQueue",[]);ie(this,"count",0);ie(this,"isDestroyed",!1);this.source=t.source,this.url=t.url,this.setProps(t)}static isSupported(){return oA.isSupported()}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,n=(i,o,s)=>i.done(s),r=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:n,onError:r,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:t,backlog:this.jobQueue.length});const r=new upe(n.name,t);t.onMessage=i=>n.onMessage(r,i.type,i.payload),t.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!jf||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new oA({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return lpe?this.maxMobileConcurrency:this.maxConcurrency}}const ppe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},xu=class xu{constructor(t){ie(this,"props");ie(this,"workerPools",new Map);this.props={...ppe},this.setProps(t),this.workerPools=new Map}static isSupported(){return oA.isSupported()}static getWorkerFarm(t={}){return xu._workerFarm=xu._workerFarm||new xu({}),xu._workerFarm.setProps(t),xu._workerFarm}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:n,source:r,url:i}=t;let o=this.workerPools.get(n);return o||(o=new hpe({name:n,source:r,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};ie(xu,"_workerFarm");let iw=xu;function gpe(e,t={}){const n=t[e.id]||{},r=jf?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let i=n.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(jf?i=`modules/${e.module}/dist/${r}`:i=`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!i){let o=e.version;o==="latest"&&(o=ope);const s=o?`@${o}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${s}/dist/${r}`}return rc(i),i}function mpe(e,t=ape){rc(e,"no worker provided");const n=e.version;return!(!t||!n)}function ype(e,t){return!iw.isSupported()||!jf&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function vpe(e,t,n,r,i){const o=e.id,s=gpe(e,n),l=iw.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const u=await l.startJob("process-on-worker",bpe.bind(null,i));return u.postMessage("process",{input:t,options:n,context:r}),await(await u.result).result}async function bpe(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(new Error(r.error));break;case"process":const{id:i,input:o,options:s}=r;try{const a=await e(o,s);t.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function xpe(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function wpe(...e){return Spe(e)}function Spe(e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),n=t.reduce((o,s)=>o+s.byteLength,0),r=new Uint8Array(n);let i=0;for(const o of t)r.set(o,i),i+=o.byteLength;return r.buffer}async function Cpe(e){const t=[];for await(const n of e)t.push(n);return wpe(...t)}let kpe="";const B9={};function Epe(e){for(const t in B9)if(e.startsWith(t)){const n=B9[t];e=e.replace(t,n)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e=`${kpe}${e}`),e}const _pe="4.2.1",$pe={dataType:null,batchType:null,name:"JSON",id:"json",module:"json",version:_pe,extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:j9,parse:async e=>j9(new TextDecoder().decode(e)),options:{}};function j9(e){return JSON.parse(e)}function Ape(e){return e&&typeof e=="object"&&e.isBuffer}function Wq(e){if(Ape(e))return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function Hq(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function Tpe(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}const Ppe=e=>typeof e=="boolean",ay=e=>typeof e=="function",iv=e=>e!==null&&typeof e=="object",U9=e=>iv(e)&&e.constructor==={}.constructor,Fpe=e=>!!e&&typeof e[Symbol.iterator]=="function",Mpe=e=>e&&typeof e[Symbol.asyncIterator]=="function",Nd=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,em=e=>typeof Blob<"u"&&e instanceof Blob,Rpe=e=>e&&typeof e=="object"&&e.isBuffer,Ope=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||iv(e)&&ay(e.tee)&&ay(e.cancel)&&ay(e.getReader),Dpe=e=>iv(e)&&ay(e.read)&&ay(e.pipe)&&Ppe(e.readable),qq=e=>Ope(e)||Dpe(e);class Npe extends Error{constructor(n,r){super(n);ie(this,"reason");ie(this,"url");ie(this,"response");this.reason=r.reason,this.url=r.url,this.response=r.response}}const Lpe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Ipe=/^([-\w.]+\/[-\w.+]+)/;function V9(e,t){return e.toLowerCase()===t.toLowerCase()}function zpe(e){const t=Ipe.exec(e);return t?t[1]:e}function W9(e){const t=Lpe.exec(e);return t?t[1]:""}const Gq=/\?.*/;function Bpe(e){const t=e.match(Gq);return t&&t[0]}function OF(e){return e.replace(Gq,"")}function jpe(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}function WC(e){return Nd(e)?e.url:em(e)?e.name||"":typeof e=="string"?e:""}function DF(e){if(Nd(e)){const t=e,n=t.headers.get("content-type")||"",r=OF(t.url);return zpe(n)||W9(r)}return em(e)?e.type||"":typeof e=="string"?W9(e):""}function Upe(e){return Nd(e)?e.headers["content-length"]||-1:em(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}async function Yq(e){if(Nd(e))return e;const t={},n=Upe(e);n>=0&&(t["content-length"]=String(n));const r=WC(e),i=DF(e);i&&(t["content-type"]=i);const o=await Hpe(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:r}),s}async function Vpe(e){if(!e.ok)throw await Wpe(e)}async function Wpe(e){const t=jpe(e.url);let n=`Failed to fetch resource (${e.status}) ${e.statusText}: ${t}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:e.statusText,url:e.url,response:e};try{const i=e.headers.get("Content-Type");r.reason=i!=null&&i.includes("application/json")?await e.json():e.text()}catch{}return new Npe(n,r)}async function Hpe(e){if(typeof e=="string")return`data:,${e.slice(0,5)}`;if(e instanceof Blob){const n=e.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=o=>{var s;return r((s=o==null?void 0:o.target)==null?void 0:s.result)},i.readAsDataURL(n)})}if(e instanceof ArrayBuffer){const n=e.slice(0,5);return`data:base64,${qpe(n)}`}return null}function qpe(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}function Gpe(e){return!Ype(e)&&!Xpe(e)}function Ype(e){return e.startsWith("http:")||e.startsWith("https:")}function Xpe(e){return e.startsWith("data:")}async function sA(e,t){var n,r;if(typeof e=="string"){const i=Epe(e);return Gpe(i)&&(n=globalThis.loaders)!=null&&n.fetchNode?(r=globalThis.loaders)==null?void 0:r.fetchNode(i,t):await fetch(i,t)}return await Yq(e)}const H9=new RF({id:"loaders.gl"});class Kpe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class Qpe{constructor(){ie(this,"console");this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const Xq={fetch:null,mimeType:void 0,nothrow:!1,log:new Qpe,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Iq,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Jpe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Kq(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function Qq(){const e=Kq();return e.globalOptions=e.globalOptions||{...Xq},e.globalOptions}function Zpe(e,t,n,r){return n=n||[],n=Array.isArray(n)?n:[n],ege(e,n),nge(t,e,r)}function ege(e,t){q9(e,null,Xq,Jpe,t);for(const n of t){const r=e&&e[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};q9(r,n.id,i,o,t)}}function q9(e,t,n,r,i){const o=t||"Top level",s=t?`${t}.`:"";for(const a in e){const l=!t&&iv(e[a]),u=a==="baseUri"&&!t,c=a==="workerUrl"&&t;if(!(a in n)&&!u&&!c){if(a in r)H9.warn(`${o} loader option '${s}${a}' no longer supported, use '${r[a]}'`)();else if(!l){const f=tge(a,i);H9.warn(`${o} loader option '${s}${a}' not recognized. ${f}`)()}}}}function tge(e,t){const n=e.toLowerCase();let r="";for(const i of t)for(const o in i.options){if(e===o)return`Did you mean '${i.id}.${o}'?`;const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||`Did you mean '${i.id}.${o}'?`)}return r}function nge(e,t,n){const i={...e.options||{}};return rge(i,n),i.log===null&&(i.log=new Kpe),G9(i,Qq()),G9(i,t),i}function G9(e,t){for(const n in t)if(n in t){const r=t[n];U9(r)&&U9(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function rge(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function Jq(e){return e?(Array.isArray(e)&&(e=e[0]),Array.isArray(e==null?void 0:e.extensions)):!1}function Zq(e){M9(e,"null loader"),M9(Jq(e),"invalid loader");let t;return Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e!=null&&e.parseTextSync||e!=null&&e.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const ige=()=>{const e=Kq();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function oge(){return ige()}const sge=new RF({id:"loaders.gl"}),age=/\.([^.]+)$/;async function lge(e,t=[],n,r){if(!eG(e))return null;let i=Y9(e,t,{...n,nothrow:!0},r);if(i)return i;if(em(e)&&(e=await e.slice(0,10).arrayBuffer(),i=Y9(e,t,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(tG(e));return i}function Y9(e,t=[],n,r){if(!eG(e))return null;if(t&&!Array.isArray(t))return Zq(t);let i=[];t&&(i=i.concat(t)),n!=null&&n.ignoreRegisteredLoaders||i.push(...oge()),cge(i);const o=uge(e,i,n,r);if(!o&&!(n!=null&&n.nothrow))throw new Error(tG(e));return o}function uge(e,t,n,r){const i=WC(e),o=DF(e),s=OF(i)||(r==null?void 0:r.url);let a=null,l="";return n!=null&&n.mimeType&&(a=f$(t,n==null?void 0:n.mimeType),l=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),a=a||fge(t,s),l=l||(a?`matched url ${s}`:""),a=a||f$(t,o),l=l||(a?`matched MIME type ${o}`:""),a=a||hge(t,e),l=l||(a?`matched initial data ${nG(e)}`:""),n!=null&&n.fallbackMimeType&&(a=a||f$(t,n==null?void 0:n.fallbackMimeType),l=l||(a?`matched fallback MIME type ${o}`:"")),l&&sge.log(1,`selectLoader selected ${a==null?void 0:a.name}: ${l}.`),a}function eG(e){return!(e instanceof Response&&e.status===204)}function tG(e){const t=WC(e),n=DF(e);let r="No valid loader found (";r+=t?`${Hq(t)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const i=e?nG(e):"";return r+=i?` first bytes: "${i}"`:"first bytes: not available",r+=")",r}function cge(e){for(const t of e)Zq(t)}function fge(e,t){const n=t&&age.exec(t),r=n&&n[1];return r?dge(e,r):null}function dge(e,t){t=t.toLowerCase();for(const n of e)for(const r of n.extensions)if(r.toLowerCase()===t)return n;return null}function f$(e,t){var n;for(const r of e)if((n=r.mimeTypes)!=null&&n.some(i=>V9(t,i))||V9(t,`application/x.${r.id}`))return r;return null}function hge(e,t){if(!t)return null;for(const n of e)if(typeof t=="string"){if(pge(t,n))return n}else if(ArrayBuffer.isView(t)){if(X9(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer&&X9(t,0,n))return n;return null}function pge(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>e.startsWith(r))}function X9(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>gge(e,t,n,i))}function gge(e,t,n,r){if(r instanceof ArrayBuffer)return xpe(r,e,r.byteLength);switch(typeof r){case"function":return r(e);case"string":const i=aA(e,t,r.length);return r===i;default:return!1}}function nG(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?aA(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?aA(e,0,t):""}function aA(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}const mge=256*1024;function*yge(e,t){const n=(t==null?void 0:t.chunkSize)||mge;let r=0;const i=new TextEncoder;for(;r<e.length;){const o=Math.min(e.length-r,n),s=e.slice(r,r+o);r+=o,yield i.encode(s)}}const vge=256*1024;function*bge(e,t={}){const{chunkSize:n=vge}=t;let r=0;for(;r<e.byteLength;){const i=Math.min(e.byteLength-r,n),o=new ArrayBuffer(i),s=new Uint8Array(e,r,i);new Uint8Array(o).set(s),r+=i,yield o}}const xge=1024*1024;async function*wge(e,t){const n=(t==null?void 0:t.chunkSize)||xge;let r=0;for(;r<e.size;){const i=r+n,o=await e.slice(r,i).arrayBuffer();r=i,yield o}}function K9(e,t){return Iq?Sge(e,t):Cge(e)}async function*Sge(e,t){const n=e.getReader();let r;try{for(;;){const i=r||n.read();t!=null&&t._streamReadAhead&&(r=n.read());const{done:o,value:s}=await i;if(o)return;yield Wq(s)}}catch{n.releaseLock()}}async function*Cge(e,t){for await(const n of e)yield Wq(n)}function kge(e,t){if(typeof e=="string")return yge(e,t);if(e instanceof ArrayBuffer)return bge(e,t);if(em(e))return wge(e,t);if(qq(e))return K9(e,t);if(Nd(e))return K9(e.body,t);throw new Error("makeIterator")}const rG="Cannot convert supplied data type";function Ege(e,t,n){if(t.text&&typeof e=="string")return e;if(Rpe(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(e.byteOffset,e.byteOffset+i)),r}throw new Error(rG)}async function _ge(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||r)return Ege(e,t);if(em(e)&&(e=await Yq(e)),Nd(e)){const i=e;return await Vpe(i),t.binary?await i.arrayBuffer():await i.text()}if(qq(e)&&(e=kge(e,n)),Fpe(e)||Mpe(e))return Cpe(e);throw new Error(rG)}function $ge(e,t){const n=Qq(),r=e||n;return typeof r.fetch=="function"?r.fetch:iv(r.fetch)?i=>sA(i,r.fetch):t!=null&&t.fetch?t==null?void 0:t.fetch:sA}function Age(e,t,n){if(n)return n;const r={fetch:$ge(t,e),...e};if(r.url){const i=OF(r.url);r.baseUrl=i,r.queryString=Bpe(r.url),r.filename=Hq(i),r.baseUrl=Tpe(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function Tge(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const r=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function NF(e,t,n,r){t&&!Array.isArray(t)&&!Jq(t)&&(r=void 0,n=t,t=void 0),e=await e,n=n||{};const i=WC(e),s=Tge(t,r),a=await lge(e,s,n);return a?(n=Zpe(n,a,s,i),r=Age({url:i,_parse:NF,loaders:s},n,r||null),await Pge(a,e,n,r)):null}async function Pge(e,t,n,r){if(mpe(e),n=ipe(e.options,n),Nd(t)){const o=t,{ok:s,redirected:a,status:l,statusText:u,type:c,url:f}=o,d=Object.fromEntries(o.headers.entries());r.response={headers:d,ok:s,redirected:a,status:l,statusText:u,type:c,url:f}}t=await _ge(t,e,n);const i=e;if(i.parseTextSync&&typeof t=="string")return i.parseTextSync(t,n,r);if(ype(e,n))return await vpe(e,t,n,r,NF);if(i.parseText&&typeof t=="string")return await i.parseText(t,n,r);if(i.parse)return await i.parse(t,n,r);throw rc(!i.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}const Q9=100;class Fge{constructor(t,n){ie(this,"schema");ie(this,"options");ie(this,"shape");ie(this,"length",0);ie(this,"rows",null);ie(this,"cursor",0);ie(this,"_headers",[]);if(this.options=n,this.schema=t,!Array.isArray(t)){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="array-row-table",this.rows=this.rows||new Array(Q9),this.rows[this.length]=t,this.length++}addObjectRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="object-row-table",this.rows=this.rows||new Array(Q9),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;return t?(t=t.slice(0,this.length),this.rows=null,{shape:this.shape||"array-row-table",batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}function iG(e,t){if(!e)throw new Error("null row");const n={};if(t)for(let r=0;r<t.length;r++)n[t[r]]=e[r];else for(let r=0;r<e.length;r++){const i=`column-${r}`;n[i]=e[r]}return n}function oG(e,t){if(!e)throw new Error("null row");if(t){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=e[t[r]];return n}return Object.values(e)}function Mge(e){const t=[];for(let n=0;n<e.length;n++){const r=`column-${n}`;t.push(r)}return t}function Rge(e){return Object.keys(e)}const J9=100;class Oge{constructor(t,n){ie(this,"schema");ie(this,"options");ie(this,"length",0);ie(this,"objectRows",null);ie(this,"arrayRows",null);ie(this,"cursor",0);ie(this,"_headers",null);if(this.options=n,this.schema=t,t){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=Mge(t)),this.options.shape){case"object-row-table":const r=iG(t,this._headers);this.addObjectRow(r,n);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(J9),this.arrayRows[this.length]=t,this.length++;break}}addObjectRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=Rge(t)),this.options.shape){case"array-row-table":const r=oG(t,this._headers);this.addArrayRow(r,n);break;case"object-row-table":this.objectRows=this.objectRows||new Array(J9),this.objectRows[this.length]=t,this.length++;break}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}const Dge=100;class Nge{constructor(t,n){ie(this,"schema");ie(this,"length",0);ie(this,"allocated",0);ie(this,"columns",{});this.schema=t,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let n=0;for(const r in this.columns)this.columns[r][this.length]=t[n++];this.length++}addObjectRow(t){this._reallocateColumns();for(const n in t)this.columns[n][this.length]=t[n];this.length++}getBatch(){this._pruneColumns();const t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const r in this.schema){const i=this.schema[r];t[i.name]=this.columns[i.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:Dge,this.columns={};for(const t in this.schema){const n=this.schema[t],r=n.type||Float32Array,i=this.columns[n.index];if(i&&ArrayBuffer.isView(i)){const o=new r(this.allocated);o.set(i),this.columns[n.index]=o}else i?(i.length=this.allocated,this.columns[n.index]=i):this.columns[n.index]=new r(this.allocated)}}}_pruneColumns(){for(const[t,n]of Object.entries(this.columns))this.columns[t]=n.slice(0,this.length)}}const Lge={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},Ige="TableBatchBuilder",Uy=class Uy{constructor(t,n){ie(this,"schema");ie(this,"options");ie(this,"aggregator",null);ie(this,"batchCount",0);ie(this,"bytesUsed",0);ie(this,"isChunkComplete",!1);ie(this,"lastBatchEmittedMs",Date.now());ie(this,"totalLength",0);ie(this,"totalBytes",0);ie(this,"rowBytes",0);this.schema=t,this.options={...Lge,...n}}limitReached(){var t,n;return!!((t=this.options)!=null&&t.limit&&this.totalLength>=this.options.limit||(n=this.options)!=null&&n._limitMB&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),typeof t=="string"&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?t.length*8:Object.keys(t).length*8}_isFull(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;t!=null&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);const n=this.aggregator.getBatch();return n.count=this.batchCount,n.bytesUsed=this.bytesUsed,Object.assign(n,t),this.batchCount++,this.aggregator=null,n}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return Oge;case"columnar-table":return Nge;case"arrow-table":if(!Uy.ArrowBatch)throw new Error(Ige);return Uy.ArrowBatch;default:return Fge}}};ie(Uy,"ArrowBatch");let lA=Uy;class Z9 extends Array{enqueue(t){return this.push(t)}dequeue(){return this.shift()}}class zge{constructor(){ie(this,"_values");ie(this,"_settlers");ie(this,"_closed");this._values=new Z9,this._settlers=new Z9,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[Symbol.asyncIterator](){return this}enqueue(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");const n=this._settlers.dequeue();t instanceof Error?n.reject(t):n.resolve({value:t})}else this._values.enqueue(t)}next(){if(this._values.length>0){const t=this._values.dequeue();return t instanceof Error?Promise.reject(t):Promise.resolve({value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((t,n)=>{this._settlers.enqueue({resolve:t,reject:n})})}}/* @license
Papa Parse
v5.0.0-beta.0
https://github.com/mholt/PapaParse
License: MIT
*/const eL="\uFEFF",Ii={parse:Bge,unparse:jge,RECORD_SEP:"",UNIT_SEP:"",BYTE_ORDER_MARK:eL,BAD_DELIMITERS:["\r",`
`,'"',eL],WORKERS_SUPPORTED:!1,NODE_STREAM_INPUT:1,LocalChunkSize:1024*1024*10,RemoteChunkSize:1024*1024*5,DefaultDelimiter:",",Parser:uA,ParserHandle:aG,ChunkStreamer:sG,StringStreamer:Gp};function Bge(e,t,n){t=t||{};var r=t.dynamicTyping||!1;if(Ir(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=Ir(t.transform)?t.transform:!1,t.worker&&Ii.WORKERS_SUPPORTED){var i=newWorker();i.userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=Ir(t.step),t.chunk=Ir(t.chunk),t.complete=Ir(t.complete),t.error=Ir(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id});return}var o=null;return typeof e=="string"&&(o=new Gp(t)),o||(o=new n(t)),o.stream(e)}function jge(e,t){var n=!1,r=!0,i=",",o=`\r
`,s='"',a=s+s,l=!1,u=null;f();var c=new RegExp(Vy(s),"g");if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,l);if(typeof e[0]=="object")return h(u||d(e[0]),e,l)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:d(e.data[0])),!Array.isArray(e.data[0])&&typeof e.data[0]!="object"&&(e.data=[e.data])),h(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function f(){if(typeof t=="object"){if(typeof t.delimiter=="string"&&!Ii.BAD_DELIMITERS.filter(function(m){return t.delimiter.indexOf(m)!==-1}).length&&(i=t.delimiter),(typeof t.quotes=="boolean"||Array.isArray(t.quotes))&&(n=t.quotes),(typeof t.skipEmptyLines=="boolean"||typeof t.skipEmptyLines=="string")&&(l=t.skipEmptyLines),typeof t.newline=="string"&&(o=t.newline),typeof t.quoteChar=="string"&&(s=t.quoteChar),typeof t.header=="boolean"&&(r=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");u=t.columns}t.escapeChar!==void 0&&(a=t.escapeChar+s)}}function d(m){if(typeof m!="object")return[];var y=[];for(var v in m)y.push(v);return y}function h(m,y,v){var b="";typeof m=="string"&&(m=JSON.parse(m)),typeof y=="string"&&(y=JSON.parse(y));var x=Array.isArray(m)&&m.length>0,S=!Array.isArray(y[0]);if(x&&r){for(var C=0;C<m.length;C++)C>0&&(b+=i),b+=p(m[C],C);y.length>0&&(b+=o)}for(var w=0;w<y.length;w++){var k=x?m.length:y[w].length,E=!1,A=x?Object.keys(y[w]).length===0:y[w].length===0;if(v&&!x&&(E=v==="greedy"?y[w].join("").trim()==="":y[w].length===1&&y[w][0].length===0),v==="greedy"&&x){for(var P=[],L=0;L<k;L++){var M=S?m[L]:L;P.push(y[w][M])}E=P.join("").trim()===""}if(!E){for(var O=0;O<k;O++){O>0&&!A&&(b+=i);var _=x&&S?m[O]:O;b+=p(y[w][_],O)}w<y.length-1&&(!v||k>0&&!A)&&(b+=o)}}return b}function p(m,y){if(typeof m>"u"||m===null)return"";if(m.constructor===Date)return JSON.stringify(m).slice(1,25);m=m.toString().replace(c,a);var v=typeof n=="boolean"&&n||Array.isArray(n)&&n[y]||g(m,Ii.BAD_DELIMITERS)||m.indexOf(i)>-1||m.charAt(0)===" "||m.charAt(m.length-1)===" ";return v?s+m+s:m}function g(m,y){for(var v=0;v<y.length;v++)if(m.indexOf(y[v])>-1)return!0;return!1}}function sG(e){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},t.call(this,e),this.parseChunk=function(n,r){if(this.isFirstChunk&&Ir(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(n);i!==void 0&&(n=i)}this.isFirstChunk=!1;var o=this._partialLine+n;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!(this._handle.paused()||this._handle.aborted())){var a=s.meta.cursor;this._finished||(this._partialLine=o.substring(a-this._baseIndex),this._baseIndex=a),s&&s.data&&(this._rowCount+=s.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Ir(this._config.chunk)&&!r){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return;s=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),!this._completed&&l&&Ir(this._config.complete)&&(!s||!s.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!l&&(!s||!s.meta.paused)&&this._nextChunk(),s}},this._sendError=function(n){Ir(this._config.error)&&this._config.error(n)};function t(n){var r=LF(n);r.chunkSize=parseInt(r.chunkSize),!n.step&&!n.chunk&&(r.chunkSize=null),this._handle=new aG(r),this._handle.streamer=this,this._config=r}}function Gp(e){e=e||{},sG.call(this,e);var t;this.stream=function(n){return t=n,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var n=this._config.chunkSize,r=n?t.substr(0,n):t;return t=n?t.substr(n):"",this._finished=!t,this.parseChunk(r)}}}Gp.prototype=Object.create(Gp.prototype);Gp.prototype.constructor=Gp;function aG(e){var t=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,r=this,i=0,o=0,s,a,l=!1,u=!1,c,f=[],d={data:[],errors:[],meta:{}};if(Ir(e.step)){var h=e.step;e.step=function(k){if(d=k,m())g();else{if(g(),!d.data||d.data.length===0)return;i+=k.data.length,e.preview&&i>e.preview?a.abort():h(d,r)}}}this.parse=function(k,E,A){var P=e.quoteChar||'"';if(e.newline||(e.newline=C(k,P)),c=!1,e.delimiter)Ir(e.delimiter)&&(e.delimiter=e.delimiter(k),d.meta.delimiter=e.delimiter);else{var L=S(k,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);L.successful?e.delimiter=L.bestDelimiter:(c=!0,e.delimiter=Ii.DefaultDelimiter),d.meta.delimiter=e.delimiter}var M=LF(e);return e.preview&&e.header&&M.preview++,s=k,a=new uA(M),d=a.parse(s,E,A),g(),l?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,a.abort(),s=s.substr(a.getCharIndex())},this.resume=function(){l=!1,r.streamer.parseChunk(s,!0)},this.aborted=function(){return u},this.abort=function(){u=!0,a.abort(),d.meta.aborted=!0,Ir(e.complete)&&e.complete(d),s=""};function p(k){return e.skipEmptyLines==="greedy"?k.join("").trim()==="":k.length===1&&k[0].length===0}function g(){if(d&&c&&(w("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+Ii.DefaultDelimiter+"'"),c=!1),e.skipEmptyLines)for(var k=0;k<d.data.length;k++)p(d.data[k])&&d.data.splice(k--,1);return m()&&y(),x()}function m(){return e.header&&f.length===0}function y(){if(!d)return;function k(A){Ir(e.transformHeader)&&(A=e.transformHeader(A)),f.push(A)}if(Array.isArray(d.data[0])){for(var E=0;m()&&E<d.data.length;E++)d.data[E].forEach(k);d.data.splice(0,1)}else d.data.forEach(k)}function v(k){return e.dynamicTypingFunction&&e.dynamicTyping[k]===void 0&&(e.dynamicTyping[k]=e.dynamicTypingFunction(k)),(e.dynamicTyping[k]||e.dynamicTyping)===!0}function b(k,E){return v(k)?E==="true"||E==="TRUE"?!0:E==="false"||E==="FALSE"?!1:t.test(E)?parseFloat(E):n.test(E)?new Date(E):E===""?null:E:E}function x(){if(!d||!d.data||!e.header&&!e.dynamicTyping&&!e.transform)return d;function k(A,P){var L=e.header?{}:[],M;for(M=0;M<A.length;M++){var O=M,_=A[M];e.header&&(O=M>=f.length?"__parsed_extra":f[M]),e.transform&&(_=e.transform(_,O)),_=b(O,_),O==="__parsed_extra"?(L[O]=L[O]||[],L[O].push(_)):L[O]=_}return e.header&&(M>f.length?w("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+M,o+P):M<f.length&&w("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+M,o+P)),L}var E=1;return!d.data[0]||Array.isArray(d.data[0])?(d.data=d.data.map(k),E=d.data.length):d.data=k(d.data,0),e.header&&d.meta&&(d.meta.fields=f),o+=E,d}function S(k,E,A,P,L){var M,O,_;L=L||[",","	","|",";",Ii.RECORD_SEP,Ii.UNIT_SEP];for(var T=0;T<L.length;T++){var N=L[T],D=0,I=0,U=0;_=void 0;for(var V=new uA({comments:P,delimiter:N,newline:E,preview:10}).parse(k),se=0;se<V.data.length;se++){if(A&&p(V.data[se])){U++;continue}var Q=V.data[se].length;if(I+=Q,typeof _>"u"){_=0;continue}else Q>1&&(D+=Math.abs(Q-_),_=Q)}V.data.length>0&&(I/=V.data.length-U),(typeof O>"u"||D>O)&&I>1.99&&(O=D,M=N)}return e.delimiter=M,{successful:!!M,bestDelimiter:M}}function C(k,E){k=k.substr(0,1024*1024);var A=new RegExp(Vy(E)+"([^]*?)"+Vy(E),"gm");k=k.replace(A,"");var P=k.split("\r"),L=k.split(`
`),M=L.length>1&&L[0].length<P[0].length;if(P.length===1||M)return`
`;for(var O=0,_=0;_<P.length;_++)P[_][0]===`
`&&O++;return O>=P.length/2?`\r
`:"\r"}function w(k,E,A,P){d.errors.push({type:k,code:E,message:A,row:P})}}function Vy(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function uA(e){e=e||{};var t=e.delimiter,n=e.newline,r=e.comments,i=e.step,o=e.preview,s=e.fastMode,a;e.quoteChar===void 0?a='"':a=e.quoteChar;var l=a;if(e.escapeChar!==void 0&&(l=e.escapeChar),(typeof t!="string"||Ii.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),r===t)throw new Error("Comment character same as delimiter");r===!0?r="#":(typeof r!="string"||Ii.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),n!==`
`&&n!=="\r"&&n!==`\r
`&&(n=`
`);var u=0,c=!1;this.parse=function(f,d,h){if(typeof f!="string")throw new Error("Input must be a string");var p=f.length,g=t.length,m=n.length,y=r.length,v=Ir(i);u=0;var b=[],x=[],S=[],C=0;if(!f)return V();if(s||s!==!1&&f.indexOf(a)===-1){for(var w=f.split(n),k=0;k<w.length;k++){if(S=w[k],u+=S.length,k!==w.length-1)u+=n.length;else if(h)return V();if(!(r&&S.substr(0,y)===r)){if(v){if(b=[],N(S.split(t)),se(),c)return V()}else N(S.split(t));if(o&&k>=o)return b=b.slice(0,o),V(!0)}}return V()}for(var E=f.indexOf(t,u),A=f.indexOf(n,u),P=new RegExp(Vy(l)+Vy(a),"g"),L;;){if(f[u]===a){for(L=u,u++;;){if(L=f.indexOf(a,L+1),L===-1)return h||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),I();if(L===p-1){var M=f.substring(u,L).replace(P,a);return I(M)}if(a===l&&f[L+1]===l){L++;continue}if(!(a!==l&&L!==0&&f[L-1]===l)){var O=A===-1?E:Math.min(E,A),_=D(O);if(f[L+1+_]===t){if(S.push(f.substring(u,L).replace(P,a)),u=L+1+_+g,E=f.indexOf(t,u),A=f.indexOf(n,u),v&&(se(),c))return V();if(o&&b.length>=o)return V(!0);break}var T=D(A);if(f.substr(L+1+T,m)===n){if(S.push(f.substring(u,L).replace(P,a)),U(L+1+T+m),E=f.indexOf(t,u),v&&(se(),c))return V();if(o&&b.length>=o)return V(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),L++}}if(v&&(se(),c))return V();if(o&&b.length>=o)return V(!0);continue}if(r&&S.length===0&&f.substr(u,y)===r){if(A===-1)return V();u=A+m,A=f.indexOf(n,u),E=f.indexOf(t,u);continue}if(E!==-1&&(E<A||A===-1)){S.push(f.substring(u,E)),u=E+g,E=f.indexOf(t,u);continue}if(A!==-1){if(S.push(f.substring(u,A)),U(A+m),v&&(se(),c))return V();if(o&&b.length>=o)return V(!0);continue}break}return I();function N(Q){b.push(Q),C=u}function D(Q){var ye=0;if(Q!==-1){var Re=f.substring(L+1,Q);Re&&Re.trim()===""&&(ye=Re.length)}return ye}function I(Q){return h||(typeof Q>"u"&&(Q=f.substr(u)),S.push(Q),u=p,N(S),v&&se()),V()}function U(Q){u=Q,N(S),S=[],A=f.indexOf(n,u)}function V(Q,ye){var Re=ye||!1;return{data:Re?b[0]:b,errors:x,meta:{delimiter:t,linebreak:n,aborted:c,truncated:!!Q,cursor:C+(d||0)}}}function se(){i(V(void 0,!0)),b=[],x=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return u}}function LF(e){if(typeof e!="object"||e===null)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=LF(e[n]);return t}function Ir(e){return typeof e=="function"}const{ChunkStreamer:lG}=Ii;function ow(e){e=e||{},lG.call(this,e),this.textDecoder=new TextDecoder(this._config.encoding),this.stream=async function(t){this._input=t;try{for await(const n of t)this.parseChunk(this.getStringChunk(n));this._finished=!0,this.parseChunk("")}catch(n){this._sendError(n)}},this._nextChunk=function(){},this.getStringChunk=function(t){return typeof t=="string"?t:this.textDecoder.decode(t,{stream:!0})}}ow.prototype=Object.create(lG.prototype);ow.prototype.constructor=ow;const Uge="4.2.1",IF="object-row-table",zF={dataType:null,batchType:null,id:"csv",module:"csv",name:"CSV",version:Uge,extensions:["csv","tsv","dsv"],mimeTypes:["text/csv","text/tab-separated-values","text/dsv"],category:"table",parse:async(e,t)=>tL(new TextDecoder().decode(e),t),parseText:(e,t)=>tL(e,t),parseInBatches:Vge,options:{csv:{shape:IF,optimizeMemoryUsage:!1,header:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!0,delimitersToGuess:[",","	","|",";"]}}};async function tL(e,t){const n={...zF.options.csv,...t==null?void 0:t.csv},r=Wge(e),o=n.header==="auto"?uG(r):!!n.header,s={...n,header:o,download:!1,transformHeader:o?cG():void 0,error:f=>{throw new Error(f)}},a=Ii.parse(e,s),l=a.data,u=a.meta.fields||fG(n.columnPrefix,r.length),c=n.shape||IF;switch(c){case"object-row-table":return{shape:"object-row-table",data:l.map(f=>Array.isArray(f)?iG(f,u):f)};case"array-row-table":return{shape:"array-row-table",data:l.map(f=>Array.isArray(f)?f:oG(f,u))};default:throw new Error(c)}}function Vge(e,t){t={...t},t.batchSize==="auto"&&(t.batchSize=4e3);const n={...zF.options.csv,...t==null?void 0:t.csv},r=new zge;let i=!0,o=null,s=null,a=null;const l={...n,header:!1,download:!1,chunkSize:1024*1024*5,skipEmptyLines:!1,step(u){let c=u.data;if(n.skipEmptyLines&&c.flat().join("").trim()==="")return;const f=u.meta.cursor;if(i&&!o&&(n.header==="auto"?uG(c):!!n.header)){o=c.map(cG());return}i&&(i=!1,o||(o=fG(n.columnPrefix,c.length)),a=Hge(c,o)),n.optimizeMemoryUsage&&(c=JSON.parse(JSON.stringify(c)));const d=n.shape||IF;s=s||new lA(a,{shape:d,...t});try{s.addRow(c);const h=s&&s.getFullBatch({bytesUsed:f});h&&r.enqueue(h)}catch(h){r.enqueue(h)}},complete(u){try{const c=u.meta.cursor,f=s&&s.getFinalBatch({bytesUsed:c});f&&r.enqueue(f)}catch(c){r.enqueue(c)}r.close()}};return Ii.parse(e,l,ow),r}function uG(e){return e&&e.every(t=>typeof t=="string")}function Wge(e){return Ii.parse(e,{download:!1,dynamicTyping:!0,preview:1}).data[0]}function cG(){const e=new Set;return t=>{let n=t,r=1;for(;e.has(n);)n=`${t}.${r}`,r++;return e.add(n),n}}function fG(e,t=0){const n=[];for(let r=0;r<t;r++)n.push(`${e}${r+1}`);return n}function Hge(e,t){const n=t?{}:[];for(let r=0;r<e.length;r++){const i=t&&t[r]||r;switch(typeof e[r]){case"number":case"boolean":n[i]={name:String(i),index:r,type:Float32Array};break;case"string":default:n[i]={name:String(i),index:r,type:Array}}}return n}var nL={},d$={},h$=34,Mm=10,p$=13;function dG(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function qge(e,t){var n=dG(e);return function(r,i){return t(n(r),i,e)}}function rL(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ii(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Gge(e){return e<0?"-"+ii(-e,6):e>9999?"+"+ii(e,6):ii(e,4)}function Yge(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Gge(e.getUTCFullYear())+"-"+ii(e.getUTCMonth()+1,2)+"-"+ii(e.getUTCDate(),2)+(i?"T"+ii(t,2)+":"+ii(n,2)+":"+ii(r,2)+"."+ii(i,3)+"Z":r?"T"+ii(t,2)+":"+ii(n,2)+":"+ii(r,2)+"Z":n||t?"T"+ii(t,2)+":"+ii(n,2)+"Z":"")}function Xge(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(m,y){if(h)return h(m,y-1);p=m,h=d?qge(m,d):dG(m)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,m=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===Mm&&--p,f.charCodeAt(p-1)===p$&&--p;function x(){if(v)return d$;if(b)return b=!1,nL;var C,w=g,k;if(f.charCodeAt(w)===h$){for(;g++<p&&f.charCodeAt(g)!==h$||f.charCodeAt(++g)===h$;);return(C=g)>=p?v=!0:(k=f.charCodeAt(g++))===Mm?b=!0:k===p$&&(b=!0,f.charCodeAt(g)===Mm&&++g),f.slice(w+1,C-1).replace(/""/g,'"')}for(;g<p;){if((k=f.charCodeAt(C=g++))===Mm)b=!0;else if(k===p$)b=!0,f.charCodeAt(g)===Mm&&++g;else if(k!==n)continue;return f.slice(w,C)}return v=!0,f.slice(w,p)}for(;(y=x())!==d$;){for(var S=[];y!==nL&&y!==d$;)S.push(y),y=x();d&&(S=d(S,m++))==null||h.push(S)}return h}function o(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function s(f,d){return d==null&&(d=rL(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=rL(f)),o(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Yge(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}function Kge(e,t){const n={numeric:0,categorical:1,datetime:2,name:3};return n[e.type]-n[t.type]}function S0(e,t,n=[]){const r=[];if(e==null||t==null)return e!==t&&r.push({path:n.join("."),value:e}),r;if(typeof e!="object"||typeof t!="object")return e!==t&&r.push({path:n.join("."),value:e}),r;const i=new Set([...Object.keys(e),...Object.keys(t)]);for(const o of i){const s=[...n,o];if(!(o in t))r.push({path:s.join("."),value:e[o]});else if(!(o in e))r.push({path:s.join("."),value:void 0});else if(typeof e[o]=="object"&&e[o]!=null&&typeof t[o]=="object"&&t[o]!=null){const a=S0(e[o],t[o],s);r.push(...a)}else e[o]!==t[o]&&r.push({path:s.join("."),value:e[o]})}return r}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Qge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jge=Object.prototype.hasOwnProperty;function cA(e,t){return Jge.call(e,t)}function fA(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)cA(e,i)&&r.push(i);return r}function zi(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function dA(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function af(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function hG(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function hA(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(hA(e[t]))return!0}else if(typeof e=="object"){for(var r=fA(e),i=r.length,o=0;o<i;o++)if(hA(e[r[o]]))return!0}}return!1}function iL(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var pG=function(e){Qge(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,iL(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=iL(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),Kt=pG,Zge=zi,Lh={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=sw(n,this.path);r&&(r=zi(r));var i=Uf(n,{op:"remove",path:this.from}).removed;return Uf(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=sw(n,this.from);return Uf(n,{op:"add",path:this.path,value:zi(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Wy(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},eme={add:function(e,t,n){return dA(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Lh.move,copy:Lh.copy,test:Lh.test,_get:Lh._get};function sw(e,t){if(t=="")return e;var n={op:"_get",path:t};return Uf(e,n),n.value}function Uf(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):aw(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=sw(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Wy(e,t.value),s.test===!1)throw new Kt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Kt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=zi(e));var a=t.path||"",l=a.split("/"),u=e,c=1,f=l.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=aw;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=hG(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!dA(h))throw new Kt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);dA(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>u.length)throw new Kt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=eme[t.op].call(t,u,h,e);if(s.test===!1)throw new Kt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=Lh[t.op].call(t,u,h,e);if(s.test===!1)throw new Kt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&c<f&&(!u||typeof u!="object"))throw new Kt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function HC(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Kt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=zi(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Uf(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function tme(e,t,n){var r=Uf(e,t);if(r.test===!1)throw new Kt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function aw(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Kt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Lh[e.op]){if(typeof e.path!="string")throw new Kt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Kt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Kt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Kt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&hA(e.value))throw new Kt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Kt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Kt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=gG([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Kt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Kt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function gG(e,t,n){try{if(!Array.isArray(e))throw new Kt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)HC(zi(t),zi(e),n||!0);else{n=n||aw;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Kt)return i;throw i}}function Wy(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!Wy(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!Wy(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const nme=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Kt,_areEquals:Wy,applyOperation:Uf,applyPatch:HC,applyReducer:tme,deepClone:Zge,getValueByPointer:sw,validate:gG,validator:aw},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var BF=new WeakMap,rme=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),ime=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function ome(e){return BF.get(e)}function sme(e,t){return e.observers.get(t)}function ame(e,t){e.observers.delete(t.callback)}function lme(e,t){t.unobserve()}function ume(e,t){var n=[],r,i=ome(e);if(!i)i=new rme(e),BF.set(e,i);else{var o=sme(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=zi(e),t){r.callback=t,r.next=null;var s=function(){pA(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){pA(r),clearTimeout(r.next),ame(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new ime(t,r)),r}function pA(e,t){t===void 0&&(t=!1);var n=BF.get(e.object);jF(n.value,e.object,e.patches,"",t),e.patches.length&&HC(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function jF(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=fA(t),s=fA(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],c=e[u];if(cA(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[u];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?jF(c,f,n,r+"/"+af(u),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+af(u),value:zi(c)}),n.push({op:"replace",path:r+"/"+af(u),value:zi(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+af(u),value:zi(c)}),n.push({op:"remove",path:r+"/"+af(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!cA(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+af(u),value:zi(t[u])})}}}function cme(e,t,n){n===void 0&&(n=!1);var r=[];return jF(e,t,r,"",n),r}const fme=Object.freeze(Object.defineProperty({__proto__:null,compare:cme,generate:pA,observe:ume,unobserve:lme},Symbol.toStringTag,{value:"Module"}));Object.assign({},nme,fme,{JsonPatchError:pG,deepClone:zi,escapePathComponent:af,unescapePathComponent:hG});var dme=/("(?:[^\\"]|\\.)*")|[:,]/g,hme=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function s(a,l,u){var c,f,d,h,p,g,m,y,v,b,x,S;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,o),x===void 0)return x;if(m=i-l.length-u,x.length<=m&&(v=x.replace(dme,function(C,w){return w||C+" "}),v.length<=m))return v;if(o!=null&&(a=JSON.parse(x),o=void 0),typeof a=="object"&&a!==null){if(y=l+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",m=a.length;f<m;f++)d.push(s(a[f],y,f===m-1?0:1)||"null");else for(b="{",c="}",g=Object.keys(a),m=g.length;f<m;f++)h=g[f],p=JSON.stringify(h)+": ",S=s(a[h],y,p.length+(f===m-1?0:1)),S!==void 0&&d.push(p+S);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+l)}return x}(t,"",0)};const g$=Ul(hme);function $i(e,t,n){return e.fields=t||[],e.fname=n,e}function en(e){return e==null?null:e.fname}function xr(e){return e==null?null:e.fields}function mG(e){return e.length===1?pme(e[0]):gme(e)}const pme=e=>function(t){return t[e]},gme=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function G(e){throw Error(e)}function Da(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||G("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&G("Access path missing closing bracket: "+e),r&&G("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Oo(e,t,n){const r=Da(e);return e=r.length===1?r[0]:e,$i((n&&n.get||mG)(r),[e],t||e)}const ov=Oo("id"),kr=$i(e=>e,[],"identity"),wu=$i(()=>0,[],"zero"),tm=$i(()=>1,[],"one"),Do=$i(()=>!0,[],"true"),au=$i(()=>!1,[],"false");function mme(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const yG=0,sv=1,UF=2,vG=3,bG=4;function VF(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mme,r=e||yG;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=sv&&n(t||"error","ERROR",arguments),this},warn(){return r>=UF&&n(t||"warn","WARN",arguments),this},info(){return r>=vG&&n(t||"log","INFO",arguments),this},debug(){return r>=bG&&n(t||"log","DEBUG",arguments),this}}}var Y=Array.isArray;function ae(e){return e===Object(e)}const oL=e=>e!=="__proto__";function nm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=yme(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;rm(r,o,i[o],s)}return r},{})}function rm(e,t,n,r){if(!oL(t))return;let i,o;if(ae(n)&&!Y(n)){o=ae(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?rm(o,i,n[i]):oL(i)&&(o[i]=n[i])}else e[t]=n}function yme(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function qe(e){return e[e.length-1]}function vr(e){return e==null||e===""?null:+e}const xG=e=>t=>e*Math.exp(t),wG=e=>t=>Math.log(e*t),SG=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),CG=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,lw=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function qC(e,t,n,r){const i=n(e[0]),o=n(qe(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function kG(e,t){return qC(e,t,vr,kr)}function EG(e,t){var n=Math.sign(e[0]);return qC(e,t,wG(n),xG(n))}function _G(e,t,n){return qC(e,t,lw(n),lw(1/n))}function $G(e,t,n){return qC(e,t,SG(n),CG(n))}function GC(e,t,n,r,i){const o=r(e[0]),s=r(qe(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function WF(e,t,n){return GC(e,t,n,vr,kr)}function HF(e,t,n){const r=Math.sign(e[0]);return GC(e,t,n,wG(r),xG(r))}function uw(e,t,n,r){return GC(e,t,n,lw(r),lw(1/r))}function qF(e,t,n,r){return GC(e,t,n,SG(r),CG(r))}function AG(e){return 1+~~(new Date(e).getMonth()/3)}function TG(e){return 1+~~(new Date(e).getUTCMonth()/3)}function le(e){return e!=null?Y(e)?e:[e]:[]}function PG(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function De(e){return typeof e=="function"}const vme="descending";function GF(e,t,n){n=n||{},t=le(t)||[];const r=[],i=[],o={},s=n.comparator||bme;return le(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===vme?-1:1),i.push(a=De(a)?a:Oo(a,null,n)),(xr(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:$i(s(i,r),Object.keys(o))}const YC=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),bme=(e,t)=>e.length===1?xme(e[0],t[0]):wme(e,t,e.length),xme=(e,t)=>function(n,r){return YC(e(n),e(r))*t},wme=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=YC(o(r),o(i));return s*t[a]});function Er(e){return De(e)?e:()=>e}function YF(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Oe(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function $a(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function FG(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}const Sme=Object.prototype.hasOwnProperty;function fe(e,t){return Sme.call(e,t)}const Ab={};function im(e){let t={},n;function r(o){return fe(t,o)&&t[o]!==Ab}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===Ab&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=Ab),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==Ab&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function MG(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=qe(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=s?r:c<=s?i:o}function re(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Oe(r,n)}function Ih(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function _c(e){return typeof e=="boolean"}function Vu(e){return Object.prototype.toString.call(e)==="[object Date]"}function RG(e){return e&&De(e[Symbol.iterator])}function Je(e){return typeof e=="number"}function OG(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ue(e){return typeof e=="string"}function XF(e,t,n){e&&(e=t?le(e).map(a=>a.replace(/\\(.)/g,"$1")):le(e));const r=e&&e.length,i=n&&n.get||mG,o=a=>i(t?[a]:Da(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return $i(s,e,"key")}function DG(e,t){const n=e[0],r=qe(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Cme=1e4;function NG(e){e=+e||Cme;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>fe(t,s)||fe(n,s),get:s=>fe(t,s)?t[s]:fe(n,s)?o(s,n[s]):void 0,set:(s,a)=>fe(t,s)?t[s]=a:o(s,a)}}function LG(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function C0(e,t){let n="";for(;--t>=0;)n+=e;return n}function IG(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?C0(i,s)+o:r==="center"?C0(i,~~(s/2))+o+C0(i,Math.ceil(s/2)):o+C0(i,s)}function av(e){return e&&qe(e)-e[0]||0}function ne(e){return Y(e)?"["+e.map(ne)+"]":ae(e)||ue(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function KF(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const kme=e=>Je(e)||Vu(e)?e:Date.parse(e);function QF(e,t){return t=t||kme,e==null||e===""?null:t(e)}function JF(e){return e==null||e===""?null:e+""}function ks(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function zG(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function du(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function Eme(e){return e}function _me(e){if(e==null)return Eme;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;u<c;)f[u]=a[u],++u;return f}}function $me(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Ame(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return sL(e,n)})}:sL(e,t)}function sL(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=BG(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function BG(e,t){var n=_me(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&$me(f,p)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(a)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(t)}function Tme(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=u,t[c]=d)}),t.forEach(function(u){var c=a(u),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,p=i[f]){delete i[p.end];var m=p===h?h:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function a(u){var c=e.arcs[u<0?~u:u],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function Pme(e){return BG(e,Fme.apply(this,arguments))}function Fme(e,t,n){var r,i,o;if(arguments.length>1)r=Mme(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:Tme(e,r)}}function Mme(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function l(f){f.forEach(a)}function u(f){f.forEach(l)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function bl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rme(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function om(e){let t,n,r;e.length!==2?(t=bl,n=(a,l)=>bl(e(a),l),r=(a,l)=>e(a)-l):(t=e===bl||e===Rme?e:Ome,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function Ome(){return 0}function jG(e){return e===null?NaN:+e}function*Dme(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const UG=om(bl),ic=UG.right,Nme=UG.left;om(jG).center;function Lme(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function Ime(e,t){const n=Lme(e,t);return n&&Math.sqrt(n)}class qr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class aL extends Map{constructor(t,n=HG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(gA(this,t))}has(t){return super.has(gA(this,t))}set(t,n){return super.set(VG(this,t),n)}delete(t){return super.delete(WG(this,t))}}class cw extends Set{constructor(t,n=HG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(gA(this,t))}add(t){return super.add(VG(this,t))}delete(t){return super.delete(WG(this,t))}}function gA({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function VG({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function WG({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function HG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function zme(e,t){return Array.from(t,n=>e[n])}function Bme(e=bl){if(e===bl)return qG;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function qG(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const jme=Math.sqrt(50),Ume=Math.sqrt(10),Vme=Math.sqrt(2);function fw(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=jme?10:o>=Ume?5:o>=Vme?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?fw(e,t,n*2):[a,l,u]}function mA(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?fw(t,e,n):fw(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(i+u)/-s;else for(let u=0;u<a;++u)l[u]=(i+u)*s;return l}function yA(e,t,n){return t=+t,e=+e,n=+n,fw(e,t,n)[2]}function oc(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?yA(t,e,n):yA(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Vf(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function vA(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function GG(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?qG:Bme(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*f/l+d)),p=Math.min(r,Math.floor(t+(l-u)*f/l+d));GG(e,t,h,p,i)}const o=e[t];let s=n,a=r;for(Rm(e,n,t),i(e[r],o)>0&&Rm(e,n,r);s<a;){for(Rm(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?Rm(e,n,a):(++a,Rm(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Rm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function bA(e,t,n){if(e=Float64Array.from(Dme(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return vA(e);if(t>=1)return Vf(e);var r,i=(r-1)*t,o=Math.floor(i),s=Vf(GG(e,o).subarray(0,o+1)),a=vA(e.subarray(o+1));return s+(a-s)*(i-o)}}function YG(e,t,n=jG){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function Wme(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function XG(e,t){return bA(e,.5,t)}function*Hme(e){for(const t of e)yield*t}function KG(e){return Array.from(Hme(e))}function Bi(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function QG(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function qme(e,...t){e=new cw(e),t=t.map(Gme);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Gme(e){return e instanceof cw?e:new cw(e)}function Yme(...e){const t=new cw;for(const n of e)for(const r of n)t.add(r);return t}function Xme(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function dw(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Yp(e){return e=dw(Math.abs(e)),e?e[1]:NaN}function Kme(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function Qme(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Jme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ad(e){if(!(t=Jme.exec(e)))throw new Error("invalid format: "+e);var t;return new ZF({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ad.prototype=ZF.prototype;function ZF(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ZF.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zme(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var JG;function e0e(e,t){var n=dw(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(JG=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+dw(e,Math.max(0,t+o-1))[0]}function lL(e,t){var n=dw(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const uL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Xme,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>lL(e*100,t),r:lL,s:e0e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function cL(e){return e}var fL=Array.prototype.map,dL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ZG(e){var t=e.grouping===void 0||e.thousands===void 0?cL:Kme(fL.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?cL:Qme(fL.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=ad(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,S=f.type;S==="n"?(v=!0,S="g"):uL[S]||(b===void 0&&(b=12),x=!0,S="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",w=g==="$"?r:/[%p]/.test(S)?s:"",k=uL[S],E=/[defgprs%]/.test(S);b=b===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(P){var L=C,M=w,O,_,T;if(S==="c")M=k(P)+M,P="";else{P=+P;var N=P<0||1/P<0;if(P=isNaN(P)?l:k(Math.abs(P),b),x&&(P=Zme(P)),N&&+P==0&&p!=="+"&&(N=!1),L=(N?p==="("?p:a:p==="-"||p==="("?"":p)+L,M=(S==="s"?dL[8+JG/3]:"")+M+(N&&p==="("?")":""),E){for(O=-1,_=P.length;++O<_;)if(T=P.charCodeAt(O),48>T||T>57){M=(T===46?i+P.slice(O+1):P.slice(O))+M,P=P.slice(0,O);break}}}v&&!m&&(P=t(P,1/0));var D=L.length+P.length+M.length,I=D<y?new Array(y-D+1).join(d):"";switch(v&&m&&(P=t(I+P,I.length?y-M.length:1/0),I=""),h){case"<":P=L+P+M+I;break;case"=":P=L+I+P+M;break;case"^":P=I.slice(0,D=I.length>>1)+L+P+M+I.slice(D);break;default:P=I+L+P+M;break}return o(P)}return A.toString=function(){return f+""},A}function c(f,d){var h=u((f=ad(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Yp(d)/3)))*3,g=Math.pow(10,-p),m=dL[8+p/3];return function(y){return h(g*y)+m}}return{format:u,formatPrefix:c}}var Tb,lv,e6;t0e({thousands:",",grouping:[3],currency:["$",""]});function t0e(e){return Tb=ZG(e),lv=Tb.format,e6=Tb.formatPrefix,Tb}function eY(e){return Math.max(0,-Yp(Math.abs(e)))}function tY(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yp(t)/3)))*3-Yp(Math.abs(e)))}function nY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Yp(t)-Yp(e))+1}const m$=new Date,y$=new Date;function kn(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=o=>kn(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(m$.setTime(+o),y$.setTime(+s),e(m$),e(y$),Math.floor(n(m$,y$))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const Xp=kn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Xp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?kn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Xp);Xp.range;const cl=1e3,Eo=cl*60,fl=Eo*60,Ml=fl*24,t6=Ml*7,hL=Ml*30,v$=Ml*365,hs=kn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*cl)},(e,t)=>(t-e)/cl,e=>e.getUTCSeconds());hs.range;const uv=kn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cl)},(e,t)=>{e.setTime(+e+t*Eo)},(e,t)=>(t-e)/Eo,e=>e.getMinutes());uv.range;const cv=kn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Eo)},(e,t)=>(t-e)/Eo,e=>e.getUTCMinutes());cv.range;const fv=kn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cl-e.getMinutes()*Eo)},(e,t)=>{e.setTime(+e+t*fl)},(e,t)=>(t-e)/fl,e=>e.getHours());fv.range;const dv=kn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*fl)},(e,t)=>(t-e)/fl,e=>e.getUTCHours());dv.range;const ga=kn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Eo)/Ml,e=>e.getDate()-1);ga.range;const xl=kn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ml,e=>e.getUTCDate()-1);xl.range;const rY=kn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ml,e=>Math.floor(e/Ml));rY.range;function Ld(e){return kn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Eo)/t6)}const Id=Ld(0),hw=Ld(1),n0e=Ld(2),r0e=Ld(3),Kp=Ld(4),i0e=Ld(5),o0e=Ld(6);Id.range;hw.range;n0e.range;r0e.range;Kp.range;i0e.range;o0e.range;function zd(e){return kn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/t6)}const Bd=zd(0),pw=zd(1),s0e=zd(2),a0e=zd(3),Qp=zd(4),l0e=zd(5),u0e=zd(6);Bd.range;pw.range;s0e.range;a0e.range;Qp.range;l0e.range;u0e.range;const Jp=kn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Jp.range;const Zp=kn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Zp.range;const Es=kn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Es.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:kn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Es.range;const _s=kn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_s.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:kn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});_s.range;function iY(e,t,n,r,i,o){const s=[[hs,1,cl],[hs,5,5*cl],[hs,15,15*cl],[hs,30,30*cl],[o,1,Eo],[o,5,5*Eo],[o,15,15*Eo],[o,30,30*Eo],[i,1,fl],[i,3,3*fl],[i,6,6*fl],[i,12,12*fl],[r,1,Ml],[r,2,2*Ml],[n,1,t6],[t,1,hL],[t,3,3*hL],[e,1,v$]];function a(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),p=h?h.range(u,+c+1):[];return d?p.reverse():p}function l(u,c,f){const d=Math.abs(c-u)/f,h=om(([,,m])=>m).right(s,d);if(h===s.length)return e.every(oc(u/v$,c/v$,f));if(h===0)return Xp.every(Math.max(oc(u,c,f),1));const[p,g]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[c0e,f0e]=iY(_s,Zp,Bd,rY,dv,cv),[d0e,h0e]=iY(Es,Jp,Id,ga,fv,uv),Jn="year",bi="quarter",wr="month",bn="week",xi="date",yr="day",Aa="dayofyear",Qi="hours",Ji="minutes",No="seconds",$s="milliseconds",n6=[Jn,bi,wr,bn,xi,yr,Aa,Qi,Ji,No,$s],b$=n6.reduce((e,t,n)=>(e[t]=1+n,e),{});function r6(e){const t=le(e).slice(),n={};return t.length||G("Missing time unit."),t.forEach(i=>{fe(b$,i)?n[i]=1:G(`Invalid time unit: ${i}.`)}),(n[bn]||n[yr]?1:0)+(n[bi]||n[wr]||n[xi]?1:0)+(n[Aa]?1:0)>1&&G(`Incompatible time units: ${e}`),t.sort((i,o)=>b$[i]-b$[o]),t}const p0e={[Jn]:"%Y ",[bi]:"Q%q ",[wr]:"%b ",[xi]:"%d ",[bn]:"W%U ",[yr]:"%a ",[Aa]:"%j ",[Qi]:"%H:00",[Ji]:"00:%M",[No]:":%S",[$s]:".%L",[`${Jn}-${wr}`]:"%Y-%m ",[`${Jn}-${wr}-${xi}`]:"%Y-%m-%d ",[`${Qi}-${Ji}`]:"%H:%M"};function oY(e,t){const n=Oe({},p0e,t),r=r6(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const vf=new Date;function i6(e){return vf.setFullYear(e),vf.setMonth(0),vf.setDate(1),vf.setHours(0,0,0,0),vf}function sY(e){return lY(new Date(e))}function aY(e){return xA(new Date(e))}function lY(e){return ga.count(i6(e.getFullYear())-1,e)}function xA(e){return Id.count(i6(e.getFullYear())-1,e)}function wA(e){return i6(e).getDay()}function g0e(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function uY(e){return fY(new Date(e))}function cY(e){return SA(new Date(e))}function fY(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return xl.count(t-1,e)}function SA(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Bd.count(t-1,e)}function CA(e){return vf.setTime(Date.UTC(e,0,1)),vf.getUTCDay()}function m0e(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function dY(e,t,n,r,i){const o=t||1,s=qe(e),a=(y,v,b)=>(b=b||y,y0e(n[b],r[b],y===s&&o,v)),l=new Date,u=ks(e),c=u[Jn]?a(Jn):Er(2012),f=u[wr]?a(wr):u[bi]?a(bi):wu,d=u[bn]&&u[yr]?a(yr,1,bn+yr):u[bn]?a(bn,1):u[yr]?a(yr,1):u[xi]?a(xi,1):u[Aa]?a(Aa,1):tm,h=u[Qi]?a(Qi):wu,p=u[Ji]?a(Ji):wu,g=u[No]?a(No):wu,m=u[$s]?a($s):wu;return function(y){l.setTime(+y);const v=c(l);return i(v,f(l),d(l,v),h(l),p(l),g(l),m(l))}}function y0e(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function eg(e,t,n){return t+e*7-(n+6)%7}const v0e={[Jn]:e=>e.getFullYear(),[bi]:e=>Math.floor(e.getMonth()/3),[wr]:e=>e.getMonth(),[xi]:e=>e.getDate(),[Qi]:e=>e.getHours(),[Ji]:e=>e.getMinutes(),[No]:e=>e.getSeconds(),[$s]:e=>e.getMilliseconds(),[Aa]:e=>lY(e),[bn]:e=>xA(e),[bn+yr]:(e,t)=>eg(xA(e),e.getDay(),wA(t)),[yr]:(e,t)=>eg(1,e.getDay(),wA(t))},b0e={[bi]:e=>3*e,[bn]:(e,t)=>eg(e,0,wA(t))};function hY(e,t){return dY(e,t||1,v0e,b0e,g0e)}const x0e={[Jn]:e=>e.getUTCFullYear(),[bi]:e=>Math.floor(e.getUTCMonth()/3),[wr]:e=>e.getUTCMonth(),[xi]:e=>e.getUTCDate(),[Qi]:e=>e.getUTCHours(),[Ji]:e=>e.getUTCMinutes(),[No]:e=>e.getUTCSeconds(),[$s]:e=>e.getUTCMilliseconds(),[Aa]:e=>fY(e),[bn]:e=>SA(e),[yr]:(e,t)=>eg(1,e.getUTCDay(),CA(t)),[bn+yr]:(e,t)=>eg(SA(e),e.getUTCDay(),CA(t))},w0e={[bi]:e=>3*e,[bn]:(e,t)=>eg(e,0,CA(t))};function pY(e,t){return dY(e,t||1,x0e,w0e,m0e)}const S0e={[Jn]:Es,[bi]:Jp.every(3),[wr]:Jp,[bn]:Id,[xi]:ga,[yr]:ga,[Aa]:ga,[Qi]:fv,[Ji]:uv,[No]:hs,[$s]:Xp},C0e={[Jn]:_s,[bi]:Zp.every(3),[wr]:Zp,[bn]:Bd,[xi]:xl,[yr]:xl,[Aa]:xl,[Qi]:dv,[Ji]:cv,[No]:hs,[$s]:Xp};function sm(e){return S0e[e]}function am(e){return C0e[e]}function gY(e,t,n){return e?e.offset(t,n):void 0}function mY(e,t,n){return gY(sm(e),t,n)}function yY(e,t,n){return gY(am(e),t,n)}function vY(e,t,n,r){return e?e.range(t,n,r):void 0}function bY(e,t,n,r){return vY(sm(e),t,n,r)}function xY(e,t,n,r){return vY(am(e),t,n,r)}const k0=1e3,E0=k0*60,_0=E0*60,XC=_0*24,k0e=XC*7,pL=XC*30,kA=XC*365,wY=[Jn,wr,xi,Qi,Ji,No,$s],$0=wY.slice(0,-1),A0=$0.slice(0,-1),T0=A0.slice(0,-1),E0e=T0.slice(0,-1),_0e=[Jn,bn],gL=[Jn,wr],SY=[Jn],Om=[[$0,1,k0],[$0,5,5*k0],[$0,15,15*k0],[$0,30,30*k0],[A0,1,E0],[A0,5,5*E0],[A0,15,15*E0],[A0,30,30*E0],[T0,1,_0],[T0,3,3*_0],[T0,6,6*_0],[T0,12,12*_0],[E0e,1,XC],[_0e,1,k0e],[gL,1,pL],[gL,3,3*pL],[SY,1,kA]];function CY(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(av(t))/n;let i=om(a=>a[2]).right(Om,r),o,s;return i===Om.length?(o=SY,s=oc(t[0]/kA,t[1]/kA,n)):i?(i=Om[r/Om[i-1][2]<Om[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=wY,s=Math.max(oc(t[0],t[1],n),1)),{units:o,step:s}}function x$(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function w$(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Dm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function kY(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=Nm(i),c=Lm(i),f=Nm(o),d=Lm(o),h=Nm(s),p=Lm(s),g=Nm(a),m=Lm(a),y=Nm(l),v=Lm(l),b={a:N,A:D,b:I,B:U,c:null,d:wL,e:wL,f:X0e,g:oye,G:aye,H:q0e,I:G0e,j:Y0e,L:EY,m:K0e,M:Q0e,p:V,q:se,Q:kL,s:EL,S:J0e,u:Z0e,U:eye,V:tye,w:nye,W:rye,x:null,X:null,y:iye,Y:sye,Z:lye,"%":CL},x={a:Q,A:ye,b:Re,B:ut,c:null,d:SL,e:SL,f:dye,g:Sye,G:kye,H:uye,I:cye,j:fye,L:$Y,m:hye,M:pye,p:$n,q:ir,Q:kL,s:EL,S:gye,u:mye,U:yye,V:vye,w:bye,W:xye,x:null,X:null,y:wye,Y:Cye,Z:Eye,"%":CL},S={a:A,A:P,b:L,B:M,c:O,d:bL,e:bL,f:U0e,g:vL,G:yL,H:xL,I:xL,j:I0e,L:j0e,m:L0e,M:z0e,p:E,q:N0e,Q:W0e,s:H0e,S:B0e,u:F0e,U:M0e,V:R0e,w:P0e,W:O0e,x:_,X:T,y:vL,Y:yL,Z:D0e,"%":V0e};b.x=C(n,b),b.X=C(r,b),b.c=C(t,b),x.x=C(n,x),x.X=C(r,x),x.c=C(t,x);function C(ce,Ee){return function($e){var J=[],pn=-1,tt=0,An=ce.length,un,lo,ah;for($e instanceof Date||($e=new Date(+$e));++pn<An;)ce.charCodeAt(pn)===37&&(J.push(ce.slice(tt,pn)),(lo=mL[un=ce.charAt(++pn)])!=null?un=ce.charAt(++pn):lo=un==="e"?" ":"0",(ah=Ee[un])&&(un=ah($e,lo)),J.push(un),tt=pn+1);return J.push(ce.slice(tt,pn)),J.join("")}}function w(ce,Ee){return function($e){var J=Dm(1900,void 0,1),pn=k(J,ce,$e+="",0),tt,An;if(pn!=$e.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(Ee&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(tt=w$(Dm(J.y,0,1)),An=tt.getUTCDay(),tt=An>4||An===0?pw.ceil(tt):pw(tt),tt=xl.offset(tt,(J.V-1)*7),J.y=tt.getUTCFullYear(),J.m=tt.getUTCMonth(),J.d=tt.getUTCDate()+(J.w+6)%7):(tt=x$(Dm(J.y,0,1)),An=tt.getDay(),tt=An>4||An===0?hw.ceil(tt):hw(tt),tt=ga.offset(tt,(J.V-1)*7),J.y=tt.getFullYear(),J.m=tt.getMonth(),J.d=tt.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),An="Z"in J?w$(Dm(J.y,0,1)).getUTCDay():x$(Dm(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(An+5)%7:J.w+J.U*7-(An+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,w$(J)):x$(J)}}function k(ce,Ee,$e,J){for(var pn=0,tt=Ee.length,An=$e.length,un,lo;pn<tt;){if(J>=An)return-1;if(un=Ee.charCodeAt(pn++),un===37){if(un=Ee.charAt(pn++),lo=S[un in mL?Ee.charAt(pn++):un],!lo||(J=lo(ce,$e,J))<0)return-1}else if(un!=$e.charCodeAt(J++))return-1}return J}function E(ce,Ee,$e){var J=u.exec(Ee.slice($e));return J?(ce.p=c.get(J[0].toLowerCase()),$e+J[0].length):-1}function A(ce,Ee,$e){var J=h.exec(Ee.slice($e));return J?(ce.w=p.get(J[0].toLowerCase()),$e+J[0].length):-1}function P(ce,Ee,$e){var J=f.exec(Ee.slice($e));return J?(ce.w=d.get(J[0].toLowerCase()),$e+J[0].length):-1}function L(ce,Ee,$e){var J=y.exec(Ee.slice($e));return J?(ce.m=v.get(J[0].toLowerCase()),$e+J[0].length):-1}function M(ce,Ee,$e){var J=g.exec(Ee.slice($e));return J?(ce.m=m.get(J[0].toLowerCase()),$e+J[0].length):-1}function O(ce,Ee,$e){return k(ce,t,Ee,$e)}function _(ce,Ee,$e){return k(ce,n,Ee,$e)}function T(ce,Ee,$e){return k(ce,r,Ee,$e)}function N(ce){return s[ce.getDay()]}function D(ce){return o[ce.getDay()]}function I(ce){return l[ce.getMonth()]}function U(ce){return a[ce.getMonth()]}function V(ce){return i[+(ce.getHours()>=12)]}function se(ce){return 1+~~(ce.getMonth()/3)}function Q(ce){return s[ce.getUTCDay()]}function ye(ce){return o[ce.getUTCDay()]}function Re(ce){return l[ce.getUTCMonth()]}function ut(ce){return a[ce.getUTCMonth()]}function $n(ce){return i[+(ce.getUTCHours()>=12)]}function ir(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var Ee=C(ce+="",b);return Ee.toString=function(){return ce},Ee},parse:function(ce){var Ee=w(ce+="",!1);return Ee.toString=function(){return ce},Ee},utcFormat:function(ce){var Ee=C(ce+="",x);return Ee.toString=function(){return ce},Ee},utcParse:function(ce){var Ee=w(ce+="",!0);return Ee.toString=function(){return ce},Ee}}}var mL={"-":"",_:" ",0:"0"},In=/^\s*\d+/,$0e=/^%/,A0e=/[\\^$*+?|[\]().{}]/g;function Ze(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function T0e(e){return e.replace(A0e,"\\$&")}function Nm(e){return new RegExp("^(?:"+e.map(T0e).join("|")+")","i")}function Lm(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function P0e(e,t,n){var r=In.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function F0e(e,t,n){var r=In.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function M0e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function R0e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function O0e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function yL(e,t,n){var r=In.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function vL(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function D0e(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function N0e(e,t,n){var r=In.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function L0e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function bL(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function I0e(e,t,n){var r=In.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function xL(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function z0e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function B0e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function j0e(e,t,n){var r=In.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function U0e(e,t,n){var r=In.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function V0e(e,t,n){var r=$0e.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function W0e(e,t,n){var r=In.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function H0e(e,t,n){var r=In.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function wL(e,t){return Ze(e.getDate(),t,2)}function q0e(e,t){return Ze(e.getHours(),t,2)}function G0e(e,t){return Ze(e.getHours()%12||12,t,2)}function Y0e(e,t){return Ze(1+ga.count(Es(e),e),t,3)}function EY(e,t){return Ze(e.getMilliseconds(),t,3)}function X0e(e,t){return EY(e,t)+"000"}function K0e(e,t){return Ze(e.getMonth()+1,t,2)}function Q0e(e,t){return Ze(e.getMinutes(),t,2)}function J0e(e,t){return Ze(e.getSeconds(),t,2)}function Z0e(e){var t=e.getDay();return t===0?7:t}function eye(e,t){return Ze(Id.count(Es(e)-1,e),t,2)}function _Y(e){var t=e.getDay();return t>=4||t===0?Kp(e):Kp.ceil(e)}function tye(e,t){return e=_Y(e),Ze(Kp.count(Es(e),e)+(Es(e).getDay()===4),t,2)}function nye(e){return e.getDay()}function rye(e,t){return Ze(hw.count(Es(e)-1,e),t,2)}function iye(e,t){return Ze(e.getFullYear()%100,t,2)}function oye(e,t){return e=_Y(e),Ze(e.getFullYear()%100,t,2)}function sye(e,t){return Ze(e.getFullYear()%1e4,t,4)}function aye(e,t){var n=e.getDay();return e=n>=4||n===0?Kp(e):Kp.ceil(e),Ze(e.getFullYear()%1e4,t,4)}function lye(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ze(t/60|0,"0",2)+Ze(t%60,"0",2)}function SL(e,t){return Ze(e.getUTCDate(),t,2)}function uye(e,t){return Ze(e.getUTCHours(),t,2)}function cye(e,t){return Ze(e.getUTCHours()%12||12,t,2)}function fye(e,t){return Ze(1+xl.count(_s(e),e),t,3)}function $Y(e,t){return Ze(e.getUTCMilliseconds(),t,3)}function dye(e,t){return $Y(e,t)+"000"}function hye(e,t){return Ze(e.getUTCMonth()+1,t,2)}function pye(e,t){return Ze(e.getUTCMinutes(),t,2)}function gye(e,t){return Ze(e.getUTCSeconds(),t,2)}function mye(e){var t=e.getUTCDay();return t===0?7:t}function yye(e,t){return Ze(Bd.count(_s(e)-1,e),t,2)}function AY(e){var t=e.getUTCDay();return t>=4||t===0?Qp(e):Qp.ceil(e)}function vye(e,t){return e=AY(e),Ze(Qp.count(_s(e),e)+(_s(e).getUTCDay()===4),t,2)}function bye(e){return e.getUTCDay()}function xye(e,t){return Ze(pw.count(_s(e)-1,e),t,2)}function wye(e,t){return Ze(e.getUTCFullYear()%100,t,2)}function Sye(e,t){return e=AY(e),Ze(e.getUTCFullYear()%100,t,2)}function Cye(e,t){return Ze(e.getUTCFullYear()%1e4,t,4)}function kye(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Qp(e):Qp.ceil(e),Ze(e.getUTCFullYear()%1e4,t,4)}function Eye(){return"+0000"}function CL(){return"%"}function kL(e){return+e}function EL(e){return Math.floor(+e/1e3)}var ph,o6,TY,s6,PY;_ye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _ye(e){return ph=kY(e),o6=ph.format,TY=ph.parse,s6=ph.utcFormat,PY=ph.utcParse,ph}function P0(e){const t={};return n=>t[n]||(t[n]=e(n))}function $ye(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Aye(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function Aye(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function FY(e){const t=P0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=ad(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return $ye(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=ad(s??",f");const a=oc(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=tY(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=nY(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=eY(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let EA;MY();function MY(){return EA=FY({format:lv,formatPrefix:e6})}function RY(e){return FY(ZG(e))}function gw(e){return arguments.length?EA=RY(e):EA}function _L(e,t,n){n=n||{},ae(n)||G(`Invalid time multi-format specifier: ${n}`);const r=t(No),i=t(Ji),o=t(Qi),s=t(xi),a=t(bn),l=t(wr),u=t(bi),c=t(Jn),f=e(n[$s]||".%L"),d=e(n[No]||":%S"),h=e(n[Ji]||"%I:%M"),p=e(n[Qi]||"%I %p"),g=e(n[xi]||n[yr]||"%a %d"),m=e(n[bn]||"%b %d"),y=e(n[wr]||"%B"),v=e(n[bi]||"%B"),b=e(n[Jn]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:o(x)<x?h:s(x)<x?p:l(x)<x?a(x)<x?g:m:c(x)<x?u(x)<x?y:v:b)(x)}function OY(e){const t=P0(e.format),n=P0(e.utcFormat);return{timeFormat:r=>ue(r)?t(r):_L(t,sm,r),utcFormat:r=>ue(r)?n(r):_L(n,am,r),timeParse:P0(e.parse),utcParse:P0(e.utcParse)}}let _A;DY();function DY(){return _A=OY({format:o6,parse:TY,utcFormat:s6,utcParse:PY})}function NY(e){return OY(kY(e))}function Hy(e){return arguments.length?_A=NY(e):_A}const $A=(e,t)=>Oe({},e,t);function LY(e,t){const n=e?RY(e):gw(),r=t?NY(t):Hy();return $A(n,r)}function a6(e,t){const n=arguments.length;return n&&n!==2&&G("defaultLocale expects either zero or two arguments."),n?$A(gw(e),Hy(t)):$A(gw(),Hy())}function Tye(){return MY(),DY(),a6()}const Pye=/^(data:|([A-Za-z]+:)?\/\/)/,Fye=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Mye=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,$L="file://";function Rye(e,t){return n=>({options:n||{},sanitize:Dye,load:Oye,fileAccess:!!t,file:Nye(t),http:Iye(e)})}async function Oye(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Dye(e,t){t=Oe({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=Fye.test(e.replace(Mye,""));(e==null||typeof e!="string"||!a)&&G("Sanitize failure, invalid URI: "+ne(e));const l=Pye.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith($L))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice($L.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Nye(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):Lye}async function Lye(){G("No file system access.")}function Iye(e){return e?async function(t,n){const r=Oe({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?De(o[i])?o[i]():o.text():G(o.status+""+o.statusText)}:zye}async function zye(){G("No HTTP fetch method available.")}const Bye=e=>e!=null&&e===e,jye=e=>e==="true"||e==="false"||e===!0||e===!1,Uye=e=>!Number.isNaN(Date.parse(e)),IY=e=>!Number.isNaN(+e)&&!(e instanceof Date),Vye=e=>IY(e)&&Number.isInteger(+e),AA={boolean:KF,integer:vr,number:vr,date:QF,string:JF,unknown:kr},Pb=[jye,Vye,IY,Uye],Wye=["boolean","integer","number","date"];function zY(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Pb.length,i=Pb.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&Bye(l)&&!Pb[a](l)&&(i[a]=0,++s,s===Pb.length))return"string";return Wye[i.reduce((o,s)=>o===0?s:o,0)-1]}function BY(e,t){return t.reduce((n,r)=>(n[r]=zY(e,r),n),{})}function AL(e){const t=function(n,r){const i={delimiter:e};return l6(n,r?Oe(r,i):i)};return t.responseType="text",t}function l6(e,t){return t.header&&(e=t.header.map(ne).join(t.delimiter)+`
`+e),Xge(t.delimiter).parse(e+"")}l6.responseType="text";function Hye(e){return typeof Buffer=="function"&&De(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function u6(e,t){const n=t&&t.property?Oo(t.property):kr;return ae(e)&&!Hye(e)?qye(n(e),t):n(JSON.parse(e))}u6.responseType="json";function qye(e,t){return!Y(e)&&RG(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Gye={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function jY(e,t){let n,r,i,o;return e=u6(e,t),t&&t.feature?(n=Ame,i=t.feature):t&&t.mesh?(n=Pme,i=t.mesh,o=Gye[t.filter]):G("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):G("Invalid TopoJSON object: "+i),r&&r.features||[r]}jY.responseType="json";const Zx={dsv:l6,csv:AL(","),tsv:AL("	"),json:u6,topojson:jY};function c6(e,t){return arguments.length>1?(Zx[e]=t,this):fe(Zx,e)?Zx[e]:null}function UY(e){const t=c6(e);return t&&t.responseType||"text"}function VY(e,t,n,r){t=t||{};const i=c6(t.type||"json");return i||G("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Yye(e,t.parse,n,r),fe(e,"columns")&&delete e.columns,e}function Yye(e,t,n,r){if(!e.length)return;const i=Hy();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,c,f;t==="auto"&&(t=BY(e,o)),o=Object.keys(t);const d=o.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!AA[p])throw Error("Illegal format pattern: "+h+":"+p);return AA[p]});for(l=0,c=e.length,f=o.length;l<c;++l)for(s=e[l],u=0;u<f;++u)a=o[u],s[a]=d[u](s[a])}const KC=Rye(typeof fetch<"u"&&fetch,null);function QC(e){const t=e||kr,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function e2(e,t){try{await t(e)}catch(n){e.error(n)}}const WY=Symbol("vega_id");let Xye=1;function JC(e){return!!(e&&be(e))}function be(e){return e[WY]}function HY(e,t){return e[WY]=t,e}function at(e){const t=e===Object(e)?e:{data:e};return be(t)?t:HY(t,Xye++)}function f6(e){return ZC(e,at({}))}function ZC(e,t){for(const n in e)t[n]=e[n];return t}function qY(e,t){return HY(t,be(e))}function jd(e,t){return e?t?(n,r)=>e(n,r)||be(t(n))-be(t(r)):(n,r)=>e(n,r)||be(n)-be(r):null}function GY(e){return e&&e.constructor===Ud}function Ud(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:Ud,insert(a){const l=le(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=De(a)?r:t,u=le(a),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(a,l,u){const c={field:l,value:Er(u)};return De(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return De(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let f,d,h,p,g,m;for(f=0,d=l.length;f<d;++f)u[be(l[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],u[be(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],l.forEach(v=>{p(v)&&(u[be(v)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],m=be(g),u[m]?u[m]=1:a.add.push(at(e[f]));for(f=0,d=l.length;f<d;++f)g=l[f],u[be(g)]<0&&a.rem.push(g);function y(v,b,x){x?v[b]=x(v):a.encode=b,s||(c[be(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=u[be(g)],m>0&&(y(g,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,l.forEach(v=>{p(v)&&u[be(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?l.filter(v=>u[be(v)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const t2="_:mod:_";function ek(){Object.defineProperty(this,t2,{writable:!0,value:{}})}ek.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[t2];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=Y(n)?1+n.length:-1),i},modified(e,t){const n=this[t2];if(arguments.length){if(Y(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[t2]={},this}};let Kye=0;const Qye="pulse",Jye=new ek,Zye=1,e1e=2;function St(e,t,n,r){this.id=++Kye,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function TL(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}St.prototype={targets(){return this._targets||(this._targets=QC(ov))},set(e){return this.value!==e?(this.value=e,1):0},skip:TL(Zye),modified:TL(e1e),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new ek,i=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(f,d,h)=>{h instanceof St?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===Qye)le(a).forEach(f=>{f instanceof St?f!==this&&(f.targets().add(this),o.push(f)):G("Pulse parameters must be operator instances.")}),this.source=a;else if(Y(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||Jye,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function t1e(e,t,n,r){let i=1,o;return e instanceof St?o=e:e&&e.prototype instanceof St?o=new e:De(e)?o=new St(null,e):(i=0,o=new St(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function n1e(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let r1e=0;function tk(e,t,n){this.id=++r1e,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function lu(e,t,n){return new tk(e,t,n)}tk.prototype={_filter:Do,_apply:kr,targets(){return this._targets||(this._targets=QC(ov))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=lu(e);return this.targets().add(t),t},apply(e){const t=lu(null,e);return this.targets().add(t),t},merge(){const e=lu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=lu();return this.targets().add(lu(null,null,YF(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(lu(null,null,()=>n=!0)),t.targets().add(lu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Do,this._targets=null}};function i1e(e,t,n,r){const i=this,o=lu(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=le(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function o1e(e,t){const n=this.locale();return VY(e,t,n.timeParse,n.utcParse)}function s1e(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function a1e(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:UY(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function l1e(e,t,n){const r=this,i=r._pending||u1e(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(Do).insert(o.data||[])),i.done(),o}function u1e(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const c1e={skip:!0};function f1e(e,t,n,r,i){return(e instanceof St?h1e:d1e)(this,e,t,n,r,i),this}function d1e(e,t,n,r,i,o){const s=Oe({},o,c1e);let a,l;De(n)||(n=Er(n)),r===void 0?a=u=>e.touch(n(u)):De(r)?(l=new St(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),f=l.value;GY(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function h1e(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new St(null,p1e(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function p1e(e,t){return t=De(t)?t:Er(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function g1e(e){e.rank=++this._rank}function m1e(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&G("Cycle detected in dataflow graph.")}const mw={},Ks=1,hu=2,tl=4,y1e=Ks|hu,PL=Ks|tl,gh=Ks|hu|tl,FL=8,Im=16,ML=32,RL=64;function Wu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function S$(e,t){const n=[];return du(e,t,r=>n.push(r)),n}function OL(e,t){const n={};return e.visit(t,r=>{n[be(r)]=1}),r=>n[be(r)]?null:r}function Fb(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Wu.prototype={StopPropagation:mw,ADD:Ks,REM:hu,MOD:tl,ADD_REM:y1e,ADD_MOD:PL,ALL:gh,REFLOW:FL,SOURCE:Im,NO_SOURCE:ML,NO_FIELDS:RL,fork(e){return new Wu(this.dataflow).init(this,e)},clone(){const e=this.fork(gh);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(gh|Im)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Wu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&RL)&&(n.fields=e.fields),t&Ks?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&hu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&tl?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&ML?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||gh;return t&Ks&&this.add.length||t&hu&&this.rem.length||t&tl&&this.mod.length},reflow(e){if(e)return this.fork(gh).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(tl,OL(this,Ks))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Y(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Y(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ks&&(n.addF=Fb(n.addF,t)),e&hu&&(n.remF=Fb(n.remF,t)),e&tl&&(n.modF=Fb(n.modF,t)),e&Im&&(n.srcF=Fb(n.srcF,t)),n},materialize(e){e=e||gh;const t=this;return e&Ks&&t.addF&&(t.add=S$(t.add,t.addF),t.addF=null),e&hu&&t.remF&&(t.rem=S$(t.rem,t.remF),t.remF=null),e&tl&&t.modF&&(t.mod=S$(t.mod,t.modF),t.modF=null),e&Im&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&Im)return du(n.source,n.srcF,r),n;e&Ks&&du(n.add,n.addF,r),e&hu&&du(n.rem,n.remF,r),e&tl&&du(n.mod,n.modF,r);const i=n.source;if(e&FL&&i){const o=n.add.length+n.mod.length;o===i.length||(o?du(i,OL(n,PL),r):du(i,n.srcF,r))}return n}};function d6(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}re(d6,Wu,{fork(e){const t=new Wu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Y(e)?e.some(r=>n[r]):n[e]:0},filter(){G("MultiPulse does not support filtering.")},materialize(){G("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function v1e(e,t,n){const r=this,i=[];if(r._pulse)return YY(r);if(r._pending&&await r._pending,t&&await e2(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Wu(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=QC(ov);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=mw),l!==mw&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await e2(r,c[f].callback)}return n&&await e2(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function b1e(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function x1e(e,t,n){return this._pulse?YY(this):(this.evaluate(e,t,n),this)}function w1e(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function YY(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function S1e(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function C1e(e,t){const n=e.source,r=this._clock;return n&&Y(n)?new d6(this,r,n.map(i=>i.pulse),t):this._input[e.id]||k1e(this._pulse,n&&n.pulse)}function k1e(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==mw&&(e.source=t.source),e)}const h6={skip:!1,force:!1};function E1e(e,t){const n=t||h6;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function _1e(e,t,n){const r=n||h6;return(e.set(t)||r.force)&&this.touch(e,r),this}function $1e(e,t,n){this.touch(e,n||h6);const r=new Wu(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function A1e(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),XY(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,T1e(t,0,e)):r=n,r}}}function XY(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function T1e(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,XY(e,r,t,n)}function dp(){this.logger(VF()),this.logLevel(sv),this._clock=0,this._rank=0,this._locale=a6();try{this._loader=KC()}catch{}this._touched=QC(ov),this._input={},this._pulse=null,this._heap=A1e((e,t)=>e.qrank-t.qrank),this._postrun=[]}function zm(e){return function(){return this._log[e].apply(this,arguments)}}dp.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:zm("error"),warn:zm("warn"),info:zm("info"),debug:zm("debug"),logLevel:zm("level"),cleanThreshold:1e4,add:t1e,connect:n1e,rank:g1e,rerank:m1e,pulse:$1e,touch:E1e,update:_1e,changeset:Ud,ingest:s1e,parse:o1e,preload:l1e,request:a1e,events:i1e,on:f1e,evaluate:v1e,run:x1e,runAsync:b1e,runAfter:w1e,_enqueue:S1e,_getPulse:C1e};function H(e,t){St.call(this,e,null,t)}re(H,St,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const tg={};function KY(e){const t=QY(e);return t&&t.Definition||null}function QY(e){return e=e&&e.toLowerCase(),fe(tg,e)?tg[e]:null}function*JY(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function p6(e,t,n){const r=Float64Array.from(JY(e,n));return r.sort(bl),t.map(i=>YG(r,i))}function g6(e,t){return p6(e,[.25,.5,.75],t)}function m6(e,t){const n=e.length,r=Ime(e,t),i=g6(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function ZY(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+g)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Lo=Math.random;function P1e(e){Lo=e}function eX(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(JY(e,r)),o=i.length,s=t;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(Lo()*o)];c[u]=a/o}return c.sort(bl),[bA(c,n/2),bA(c,1-n/2)]}function tX(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,c=l+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?F1e(o,t+t/4):o}function F1e(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function M1e(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function R1e(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*Lo())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const nX=Math.sqrt(2*Math.PI),O1e=Math.SQRT2;let Bm=NaN;function nk(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(Bm===Bm)n=Bm,Bm=NaN;else{do n=Lo()*2-1,r=Lo()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Bm=r*o}return e+n*t}function y6(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*nX)}function rk(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function ik(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*O1e*D1e(2*e-1)}function D1e(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function v6(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>nk(n,r),pdf:o=>y6(o,n,r),cdf:o=>rk(o,n,r),icdf:o=>ik(o,n,r)};return i.mean(e).stdev(t)}function b6(e,t){const n=v6();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=m6(e)),i):t},sample(){return e[~~(Lo()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function x6(e,t){return e=e||0,t=t??1,Math.exp(e+nk()*t)}function w6(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*nX*e)}function S6(e,t,n){return rk(Math.log(e),t,n)}function C6(e,t,n){return Math.exp(ik(e,t,n))}function rX(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>x6(n,r),pdf:o=>w6(o,n,r),cdf:o=>S6(o,n,r),icdf:o=>C6(o,n,r)};return i.mean(e).stdev(t)}function iX(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Lo();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function k6(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Lo()}function E6(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function _6(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function $6(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function oX(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>k6(n,r),pdf:o=>E6(o,n,r),cdf:o=>_6(o,n,r),icdf:o=>$6(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function A6(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function hv(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function ok(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,l+=(c-l)/a,u+=(f-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function pv(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function lm(e,t,n,r,i){let o=0,s=0;return pv(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;o+=u*u,s+=c*c}),1-o/s}function T6(e,t,n){let r=0,i=0,o=0,s=0,a=0;pv(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=hv(r,i,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:lm(e,t,n,i,u)}}function sX(e,t,n){let r=0,i=0,o=0,s=0,a=0;pv(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=hv(r,i,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:lm(e,t,n,i,u)}}function aX(e,t,n){const[r,i,o,s]=ok(e,t,n);let a=0,l=0,u=0,c=0,f=0,d,h,p;pv(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,l+=(p-l)/f,u+=(p*h-u)/f,c+=(d*p-c)/f});const[g,m]=hv(l/s,a/s,u/s,c/s),y=v=>Math.exp(g+m*(v-o));return{coef:[Math.exp(g-m*o),m],predict:y,rSquared:lm(e,t,n,s,y)}}function lX(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;pv(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++l,r+=(h-r)/l,i+=(p-i)/l,o+=(h*p-o)/l,s+=(h*h-s)/l,a+=(d-a)/l});const u=hv(r,i,o,s),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:lm(e,t,n,a,c)}}function P6(e,t,n){const[r,i,o,s]=ok(e,t,n),a=r.length;let l=0,u=0,c=0,f=0,d=0,h,p,g,m;for(h=0;h<a;)p=r[h],g=i[h++],m=p*p,l+=(m-l)/h,u+=(m*p-u)/h,c+=(m*m-c)/h,f+=(p*g-f)/h,d+=(m*g-d)/h;const y=c-l*l,v=l*y-u*u,b=(d*l-f*u)/v,x=(f*y-d*u)/v,S=-b*l,C=w=>(w=w-o,b*w*w+x*w+S+s);return{coef:[S-x*o+b*o*o+s,x-2*b*o,b],predict:C,rSquared:lm(e,t,n,s,C)}}function uX(e,t,n,r){if(r===0)return A6(e,t,n);if(r===1)return T6(e,t,n);if(r===2)return P6(e,t,n);const[i,o,s,a]=ok(e,t,n),l=i.length,u=[],c=[],f=r+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d)*o[p];for(u.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d+h);m[h]=g}c.push(m)}c.push(u);const y=L1e(c),v=b=>{b-=s;let x=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)x+=y[d]*Math.pow(b,d);return x};return{coef:N1e(f,y,-s,a),predict:v,rSquared:lm(e,t,n,a,v)}}function N1e(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function L1e(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const DL=2,NL=1e-12;function cX(e,t,n,r){const[i,o,s,a]=ok(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=DL;){const p=[0,u-1];for(let m=0;m<l;++m){const y=i[m],v=p[0],b=p[1],x=y-i[v]>i[b]-y?v:b;let S=0,C=0,w=0,k=0,E=0;const A=1/Math.abs(i[x]-y||1);for(let M=v;M<=b;++M){const O=i[M],_=o[M],T=I1e(Math.abs(y-O)*A)*d[M],N=O*T;S+=T,C+=N,w+=_*T,k+=_*N,E+=O*N}const[P,L]=hv(C/S,w/S,k/S,E/S);c[m]=P+L*y,f[m]=Math.abs(o[m]-c[m]),z1e(i,m+1,p)}if(h===DL)break;const g=XG(f);if(Math.abs(g)<NL)break;for(let m=0,y,v;m<l;++m)y=f[m]/(6*g),d[m]=y>=1?NL:(v=1-y*y)*v}return B1e(i,c,s,a)}function I1e(e){return(e=1-e*e*e)*e*e}function z1e(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function B1e(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const j1e=.5*Math.PI/180;function sk(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],c=[];if(n===r){for(let g=1;g<r;++g)u.push(i(o+g/n*a));return u.push(i(s)),u}else{c.push(i(s));for(let g=n;--g>0;)c.push(i(o+g/n*a))}let f=u[0],d=c[c.length-1];const h=1/a,p=U1e(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=l&&V1e(f,g,d,h,p)>j1e?c.push(g):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function U1e(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function V1e(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function W1e(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function TA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:W1e(e)}function fX(e,t,n){return n||e+(t?"_"+t:"")}const C$=()=>{},H1e={init:C$,add:C$,rem:C$,idx:0},qy={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},gv=Object.keys(qy).filter(e=>e!=="__count__");function q1e(e,t){return(n,r)=>Oe({name:e,aggregate_param:r,out:n||e},H1e,t)}[...gv,"__count__"].forEach(e=>{qy[e]=q1e(e,qy[e])});function dX(e,t,n){return qy[e](n,t)}function hX(e,t){return e.idx-t.idx}function G1e(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=qy[i]())})};return e.forEach(n),Object.values(t).sort(hX)}function Y1e(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function X1e(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function K1e(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Q1e(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function pX(e,t){const n=t||kr,r=G1e(e),i=e.slice().sort(hX);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=Y1e,o.prototype.add=X1e,o.prototype.rem=K1e,o.prototype.set=Q1e,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function F6(e){this._key=e?Oo(e):be,this.reset()}const rr=F6.prototype;rr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};rr.add=function(e){this._add.push(e)};rr.rem=function(e){this._rem.push(e)};rr.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};rr.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",fe(n,o)||(n[o]=1,++i);return i};rr.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=FG(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};rr.argmin=function(e){return this.extent(e)[0]||{}};rr.argmax=function(e){return this.extent(e)[1]||{}};rr.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};rr.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};rr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=g6(this.values(),e),this._get=e),this._q};rr.q1=function(e){return this.quartile(e)[0]};rr.q2=function(e){return this.quartile(e)[1]};rr.q3=function(e){return this.quartile(e)[2]};rr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=eX(this.values(),1e3,.05,e),this._get=e),this._ci};rr.ci0=function(e){return this.ci(e)[0]};rr.ci1=function(e){return this.ci(e)[1]};function sc(e){H.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}sc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:gv},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};re(sc,H,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,c,f;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][f=c[n[u]]]=f}o(e._prev),o(t);function s(a,l,u){const c=n[u],f=r[u++];for(const d in f){const h=a?a+"|"+d:d;l[c]=f[d],u<i?s(h,l,u):t[h]||e.cell(h,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=le(xr(v)),x=b.length;let S=0,C;for(;S<x;++S)r[C=b[S]]||(r[C]=1,t.push(C))}this._dims=le(e.groupby),this._dnames=this._dims.map(v=>{const b=en(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:TA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let f,d,h,p,g,m,y;for(u!==s.length&&G("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(f=o[y],d=s[y],h=a[y]||null,f==null&&d!=="count"&&G("Null aggregate field specified."),g=en(f),m=fX(d,g,l[y]),n.push(m),d==="count"){this._counts.push(m);continue}p=c[g],p||(i(f),p=c[g]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(dX(d,h,m))}return this._measures=this._measures.map(v=>pX(v,v.field)),Object.create(null)},cellkey:TA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new F6),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?qY(t.tuple,o):at(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,c,f;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&i?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const J1e=1e-14;function M6(e){H.call(this,null,e)}M6.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};re(M6,H,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(xr(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const f=r(c);c[a]=f,c[l]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=ZY(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let c=vr(t(u));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(J1e+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=$i(l,xr(t),e.name||"bin_"+en(t))}});function gX(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?LG(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function R6(e){H.call(this,[],e)}R6.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};re(R6,H,{transform(e,t){const n=t.fork(t.ALL),r=gX(be,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(jd(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function mX(e){St.call(this,null,Z1e,e)}re(mX,St);function Z1e(e){return this.value&&!e.modified()?this.value:GF(e.fields,e.orders)}function O6(e){H.call(this,null,e)}O6.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function eve(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}re(O6,H,{transform(e,t){const n=f=>d=>{for(var h=eve(a(d),e.case,o)||[],p,g=0,m=h.length;g<m;++g)s.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=at({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function D6(e){H.call(this,null,e)}D6.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};re(D6,H,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=tve(a,i,o,e.filter||Do)):n.mod=a,n.source=this.value,n.modifies(r)}});function tve(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(at(o)),o={},o[t]=u);return i}const LL={kde:b6,mixture:iX,normal:v6,lognormal:rX,uniform:oX},nve="distributions",IL="function",rve="field";function yX(e,t){const n=e[IL];fe(LL,n)||G("Unknown distribution function: "+n);const r=LL[n]();for(const i in e)i===rve?r.data((e.from||t()).map(e[i])):i===nve?r[i](e[i].map(o=>yX(o,t))):typeof r[i]===IL&&r[i](e[i]);return r}function N6(e){H.call(this,null,e)}const vX=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ive={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:vX},{name:"weights",type:"number",array:!0}]};N6.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:vX.concat(ive)},{name:"as",type:"string",array:!0,default:["value","density"]}]};re(N6,H,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=yX(e.distribution,ove(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&G("Invalid density method: "+s),!e.extent&&!r.data&&G("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||$a(r.data()),u=sk(s,l,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],at(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function ove(e){return()=>e.materialize(e.SOURCE).source}function bX(e,t){return e?e.map((n,r)=>t[r]||en(n)):null}function L6(e,t,n){const r=[],i=f=>f(l);let o,s,a,l,u,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),c=o[u],c||(o[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const xX="bin";function I6(e){H.call(this,null,e)}I6.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:xX}]};const sve=(e,t)=>av($a(e,t))/30;re(I6,H,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=L6(t.source,e.groupby,kr),i=e.smooth||!1,o=e.field,s=e.step||sve(n,o),a=jd((p,g)=>o(p)-o(g)),l=e.as||xX,u=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<u;++d){const p=r[d].sort(a);h=-1;for(const g of tX(p,s,i,o))g<c&&(c=g),g>f&&(f=g),p[++h][l]=g}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(l)}});function wX(e){St.call(this,null,ave,e),this.modified(!0)}re(wX,St);function ave(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:$i(n=>t(n,e),xr(t),en(t))}function z6(e){H.call(this,[void 0,void 0],e)}z6.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};re(z6,H,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=vr(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=en(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function B6(e,t){St.call(this,e),this.parent=t,this.count=0}re(B6,St,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function ak(e){H.call(this,{},e),this._keys=im();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}re(ak,H,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=fe(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new B6(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=be(l),c=o.get(u);c!==void 0&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(be(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=be(l),c=o.get(u),f=r(l);c===f?a(f).mod(l):(o.set(u,f),a(c).rem(l),a(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(be(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=be(l),c=o.get(u),f=r(l);c!==f&&(o.set(u,f),a(c).rem(l),a(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function SX(e){St.call(this,null,lve,e)}re(SX,St);function lve(e){return this.value&&!e.modified()?this.value:Y(e.name)?le(e.name).map(t=>Oo(t)):Oo(e.name,e.as)}function j6(e){H.call(this,im(),e)}j6.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};re(j6,H,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,f=>{const d=be(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{l(f,e)?o.push(f):r.set(be(f),1)});function c(f){const d=be(f),h=l(f,e),p=r.get(d);h&&p?(r.delete(d),o.push(f)):!h&&!p?(r.set(d,1),s.push(f)):u&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function U6(e){H.call(this,[],e)}U6.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};re(U6,H,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=bX(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<u;++c){for(d=f6(a),f=0;f<s;++f)d[i[f]]=(h=l[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function V6(e){H.call(this,[],e)}V6.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};re(V6,H,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(en),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=f6(u),f[s]=i[c],f[a]=r[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function W6(e){H.call(this,null,e)}W6.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};re(W6,H,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function CX(e){H.call(this,[],e)}re(CX,H,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=at(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const Mb={value:"value",median:XG,mean:Wme,min:vA,max:Vf},uve=[];function H6(e){H.call(this,[],e)}H6.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function cve(e){var t=e.method||Mb.value,n;if(Mb[t]==null)G("Unrecognized imputation method: "+t);else return t===Mb.value?(n=e.value!==void 0?e.value:0,()=>n):Mb[t]}function fve(e){const t=e.field;return n=>n?t(n):NaN}re(H6,H,{transform(e,t){var n=t.fork(t.ALL),r=cve(e),i=fve(e),o=en(e.field),s=en(e.key),a=(e.groupby||[]).map(en),l=dve(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,d,h,p,g,m,y,v,b,x,S;for(m=0,b=l.length;m<b;++m)for(d=l[m],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(g=l.domain[v],S={_impute:!0},y=0,x=p.length;y<x;++y)S[a[y]]=p[y];S[s]=g,S[o]=Number.isNaN(h)?h=r(d,i):h,u.push(at(S))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function dve(e,t,n,r){var i=y=>y(m),o=[],s=r?r.slice():[],a={},l={},u,c,f,d,h,p,g,m;for(s.forEach((y,v)=>a[y]=v+1),d=0,g=e.length;d<g;++d)m=e[d],p=n(m),h=a[p]||(a[p]=s.push(p)),c=(u=t?t.map(i):uve)+"",(f=l[c])||(f=l[c]=[],o.push(f),f.values=u),f[h-1]=m;return o.domain=s,o}function q6(e){sc.call(this,e)}q6.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:gv},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};re(q6,sc,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Oe(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function G6(e){H.call(this,null,e)}G6.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};re(G6,H,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=L6(r,e.groupby,e.field),o=(e.groupby||[]).map(en),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&G("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=$a(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=b6(h,s)[a],g=e.counts?h.length:1,m=c||$a(h);sk(p,m,f,d).forEach(y=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[l[0]]=y[0],v[l[1]]=y[1]*g,u.push(at(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function kX(e){St.call(this,null,hve,e)}re(kX,St);function hve(e){return this.value&&!e.modified()?this.value:XF(e.fields,e.flat)}function EX(e){H.call(this,[],e),this._pending=null}re(EX,H,{transform(e,t){const n=t.dataflow;return this._pending?k$(this,t,this._pending):pve(e)?t.StopPropagation:e.values?k$(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=le(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>k$(this,t,le(r.data)))}});function pve(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function k$(e,t,n){n.forEach(at);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Y6(e){H.call(this,{},e)}Y6.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};re(Y6,H,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&G('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&G('The "as" parameter has too few output field names.'),c=c||i.map(en),f=function(p){for(var g=0,m=0,y,v;g<a;++g)if(v=r.get(n[g](p)),v==null)for(y=0;y<d;++y,++m)p[c[m]]=o;else for(y=0;y<d;++y,++m)p[c[m]]=i[y](v)}):(c||G("Missing output field names."),f=function(p){for(var g=0,m;g<a;++g)m=r.get(n[g](p)),p[c[g]]=m??o}),s?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,f),u.modifies(c)}});function _X(e){St.call(this,null,gve,e)}re(_X,St);function gve(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function $X(e){St.call(this,null,mve,e)}re($X,St);function mve(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function AX(e){H.call(this,null,e)}re(AX,H,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function X6(e){sc.call(this,e)}X6.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:gv,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};re(X6,sc,{_transform:sc.prototype.transform,transform(e,t){return this._transform(yve(e,t),t)}});function yve(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=xr(n).concat(xr(r)),s=bve(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>vve(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function vve(e,t,n,r){return $i(i=>t(i)===e?n(i):NaN,r,e+"")}function bve(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(YC),t?i.slice(0,t):i}function TX(e){ak.call(this,e)}re(TX,ak,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(be(o),n,t,o);return(e.modified("field")||r&&t.modified(xr(r)))&&G("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(at(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function K6(e){H.call(this,null,e)}K6.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};re(K6,H,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=bX(e.fields,e.as||[]),o=r?(a,l)=>xve(a,l,r,i):ZC;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=be(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,at({}));s[be(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[be(a)]))}),n}});function xve(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function PX(e){H.call(this,null,e)}re(PX,H,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Q6(e){H.call(this,null,e)}Q6.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const wve=1e-14;re(Q6,H,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=L6(i,e.groupby,e.field),s=(e.groupby||[]).map(en),a=[],l=e.step||.01,u=e.probs||Bi(l/2,1-wve,l),c=u.length;return o.forEach(f=>{const d=p6(f,u);for(let h=0;h<c;++h){const p={};for(let g=0;g<s.length;++g)p[s[g]]=f.dims[g];p[r[0]]=u[h],p[r[1]]=d[h],a.push(at(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function FX(e){H.call(this,null,e)}re(FX,H,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=be(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=f6(i);r[be(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[be(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function J6(e){H.call(this,[],e),this.count=0}J6.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};re(J6,H,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[be(f)]=1,c),{});let s=this.value,a=this.count,l=0;function u(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*Lo()),d<s.length&&d>=l&&(f=s[d],o[be(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=be(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[be(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[be(c)]||u(c)}),l=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[be(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[be(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(c=>!o[be(c)])),this.count=a,this.value=n.source=s,n}});function Z6(e){H.call(this,null,e)}Z6.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};re(Z6,H,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Bi(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,at(o)}),n.add=t.add.concat(this.value),n}});function MX(e){H.call(this,null,e),this.modified(!0)}re(MX,H,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function eM(e){H.call(this,null,e)}const RX=["unit0","unit1"];eM.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:n6,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:RX}]};re(eM,H,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?am:sm)(o.unit).offset,a=e.as||RX,l=a[0],u=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(xr(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let m,y;g==null?(p[l]=null,r&&(p[u]=null)):(p[l]=m=y=o(g),r&&(p[u]=y=s(m,c)),m<f&&(f=m),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:CY({extent:e.extent||$a(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=r6(r),s=this.value||{},a=(n?pY:hY)(o,i);return a.unit=qe(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function OX(e){H.call(this,im(),e)}re(OX,H,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function DX(e){H.call(this,null,e)}re(DX,H,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(jd(e.sort)):t.source).map(e.field))}});function Sve(e,t,n,r){const i=Gy[e](t,n);return{init:i.init||wu,update:function(o,s){s[r]=i.next(o)}}}const Gy={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Gy.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||G("ntile num must be greater than zero.");const n=Gy.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||G("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Cve(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Cve(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const kve=Object.keys(Gy);function NX(e){const t=le(e.ops),n=le(e.fields),r=le(e.params),i=le(e.aggregate_params),o=le(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[];let d=!0;function h(p){le(xr(p)).forEach(g=>l[g]=1)}h(e.sort),t.forEach((p,g)=>{const m=n[g],y=r[g],v=i[g]||null,b=en(m),x=fX(p,b,o[g]);if(h(m),s.push(x),fe(Gy,p))a.push(Sve(p,m,y,x));else{if(m==null&&p!=="count"&&G("Null aggregate field specified."),p==="count"){c.push(x);return}d=!1;let S=u[b];S||(S=u[b]=[],S.field=m,f.push(S)),S.push(dX(p,v,x))}}),(c.length||f.length)&&(this.cell=Eve(f,c,d)),this.inputs=Object.keys(l)}const LX=NX.prototype;LX.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};LX.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function Eve(e,t,n){e=e.map(l=>pX(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new F6;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function tM(e){H.call(this,{},e),this._mlen=0,this._mods=[]}tM.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:kve.concat(gv)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};re(tM,H,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=jd(e.sort),i=TA(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new NX(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)_ve(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=gX(be),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function _ve(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?om(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Er(-1)};t.init();for(let f=0;f<l;++f)$ve(c,s,f,l),o&&Ave(c,u),t.update(c,a[f])}function $ve(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Ave(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const Tve=Object.freeze(Object.defineProperty({__proto__:null,aggregate:sc,bin:M6,collect:R6,compare:mX,countpattern:O6,cross:D6,density:N6,dotbin:I6,expression:wX,extent:z6,facet:ak,field:SX,filter:j6,flatten:U6,fold:V6,formula:W6,generate:CX,impute:H6,joinaggregate:q6,kde:G6,key:kX,load:EX,lookup:Y6,multiextent:_X,multivalues:$X,params:AX,pivot:X6,prefacet:TX,project:K6,proxy:PX,quantile:Q6,relay:FX,sample:J6,sequence:Z6,sieve:MX,subflow:B6,timeunit:eM,tupleindex:OX,values:DX,window:tM},Symbol.toStringTag,{value:"Module"}));function ct(e){return function(){return e}}const zL=Math.abs,or=Math.atan2,Yc=Math.cos,Pve=Math.max,E$=Math.min,Us=Math.sin,Ef=Math.sqrt,cr=1e-12,ng=Math.PI,yw=ng/2,IX=2*ng;function Fve(e){return e>1?0:e<-1?ng:Math.acos(e)}function BL(e){return e>=1?yw:e<=-1?-yw:Math.asin(e)}const PA=Math.PI,FA=2*PA,lf=1e-6,Mve=FA-lf;function zX(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Rve(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zX;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let nM=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zX:Rve(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,u=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>lf)if(!(Math.abs(f*l-u*c)>lf)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,p=i-a,g=l*l+u*u,m=h*h+p*p,y=Math.sqrt(g),v=Math.sqrt(d),b=o*Math.tan((PA-Math.acos((g+d-m)/(2*y*v)))/2),x=b/v,S=b/y;Math.abs(x-1)>lf&&this._append`L${t+x*c},${n+x*f}`,this._append`A${o},${o},0,0,${+(f*h>c*p)},${this._x1=t+S*l},${this._y1=n+S*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>lf||Math.abs(this._y1-c)>lf)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%FA+FA),d>Mve?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>lf&&this._append`A${r},${r},0,${+(d>=PA)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function lk(){return new nM}lk.prototype=nM.prototype;function uk(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new nM(t)}function Ove(e){return e.innerRadius}function Dve(e){return e.outerRadius}function Nve(e){return e.startAngle}function Lve(e){return e.endAngle}function Ive(e){return e&&e.padAngle}function zve(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,c=s-i,f=a-o,d=f*l-c*u;if(!(d*d<cr))return d=(c*(t-o)-f*(e-i))/d,[e+d*l,t+d*u]}function Rb(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/Ef(a*a+l*l),c=u*l,f=-u*a,d=e+c,h=t+f,p=n+c,g=r+f,m=(d+p)/2,y=(h+g)/2,v=p-d,b=g-h,x=v*v+b*b,S=i-o,C=d*g-p*h,w=(b<0?-1:1)*Ef(Pve(0,S*S*x-C*C)),k=(C*b-v*w)/x,E=(-C*v-b*w)/x,A=(C*b+v*w)/x,P=(-C*v+b*w)/x,L=k-m,M=E-y,O=A-m,_=P-y;return L*L+M*M>O*O+_*_&&(k=A,E=P),{cx:k,cy:E,x01:-c,y01:-f,x11:k*(i/S-1),y11:E*(i/S-1)}}function Bve(){var e=Ove,t=Dve,n=ct(0),r=null,i=Nve,o=Lve,s=Ive,a=null,l=uk(u);function u(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-yw,g=o.apply(this,arguments)-yw,m=zL(g-p),y=g>p;if(a||(a=c=l()),h<d&&(f=h,h=d,d=f),!(h>cr))a.moveTo(0,0);else if(m>IX-cr)a.moveTo(h*Yc(p),h*Us(p)),a.arc(0,0,h,p,g,!y),d>cr&&(a.moveTo(d*Yc(g),d*Us(g)),a.arc(0,0,d,g,p,y));else{var v=p,b=g,x=p,S=g,C=m,w=m,k=s.apply(this,arguments)/2,E=k>cr&&(r?+r.apply(this,arguments):Ef(d*d+h*h)),A=E$(zL(h-d)/2,+n.apply(this,arguments)),P=A,L=A,M,O;if(E>cr){var _=BL(E/d*Us(k)),T=BL(E/h*Us(k));(C-=_*2)>cr?(_*=y?1:-1,x+=_,S-=_):(C=0,x=S=(p+g)/2),(w-=T*2)>cr?(T*=y?1:-1,v+=T,b-=T):(w=0,v=b=(p+g)/2)}var N=h*Yc(v),D=h*Us(v),I=d*Yc(S),U=d*Us(S);if(A>cr){var V=h*Yc(b),se=h*Us(b),Q=d*Yc(x),ye=d*Us(x),Re;if(m<ng)if(Re=zve(N,D,Q,ye,V,se,I,U)){var ut=N-Re[0],$n=D-Re[1],ir=V-Re[0],ce=se-Re[1],Ee=1/Us(Fve((ut*ir+$n*ce)/(Ef(ut*ut+$n*$n)*Ef(ir*ir+ce*ce)))/2),$e=Ef(Re[0]*Re[0]+Re[1]*Re[1]);P=E$(A,(d-$e)/(Ee-1)),L=E$(A,(h-$e)/(Ee+1))}else P=L=0}w>cr?L>cr?(M=Rb(Q,ye,N,D,h,L,y),O=Rb(V,se,I,U,h,L,y),a.moveTo(M.cx+M.x01,M.cy+M.y01),L<A?a.arc(M.cx,M.cy,L,or(M.y01,M.x01),or(O.y01,O.x01),!y):(a.arc(M.cx,M.cy,L,or(M.y01,M.x01),or(M.y11,M.x11),!y),a.arc(0,0,h,or(M.cy+M.y11,M.cx+M.x11),or(O.cy+O.y11,O.cx+O.x11),!y),a.arc(O.cx,O.cy,L,or(O.y11,O.x11),or(O.y01,O.x01),!y))):(a.moveTo(N,D),a.arc(0,0,h,v,b,!y)):a.moveTo(N,D),!(d>cr)||!(C>cr)?a.lineTo(I,U):P>cr?(M=Rb(I,U,V,se,d,-P,y),O=Rb(N,D,Q,ye,d,-P,y),a.lineTo(M.cx+M.x01,M.cy+M.y01),P<A?a.arc(M.cx,M.cy,P,or(M.y01,M.x01),or(O.y01,O.x01),!y):(a.arc(M.cx,M.cy,P,or(M.y01,M.x01),or(M.y11,M.x11),!y),a.arc(0,0,d,or(M.cy+M.y11,M.cx+M.x11),or(O.cy+O.y11,O.cx+O.x11),y),a.arc(O.cx,O.cy,P,or(O.y11,O.x11),or(O.y01,O.x01),!y))):a.arc(0,0,d,S,x,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-ng/2;return[Yc(f)*c,Us(f)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:ct(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:ct(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:ct(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:ct(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:ct(+c),u):i},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:ct(+c),u):o},u.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:ct(+c),u):s},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function BX(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jX(e){this._context=e}jX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function rM(e){return new jX(e)}function UX(e){return e[0]}function VX(e){return e[1]}function WX(e,t){var n=ct(!0),r=null,i=rM,o=null,s=uk(a);e=typeof e=="function"?e:e===void 0?UX:ct(e),t=typeof t=="function"?t:t===void 0?VX:ct(t);function a(l){var u,c=(l=BX(l)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,u,l),+t(f,u,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ct(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ct(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ct(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function HX(e,t,n){var r=null,i=ct(!0),o=null,s=rM,a=null,l=uk(u);e=typeof e=="function"?e:e===void 0?UX:ct(+e),t=typeof t=="function"?t:ct(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?VX:ct(+n);function u(f){var d,h,p,g=(f=BX(f)).length,m,y=!1,v,b=new Array(g),x=new Array(g);for(o==null&&(a=s(v=l())),d=0;d<=g;++d){if(!(d<g&&i(m=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(m,d,f),x[d]=+t(m,d,f),a.point(r?+r(m,d,f):b[d],n?+n(m,d,f):x[d]))}if(v)return a=null,v+""||null}function c(){return WX().defined(i).curve(s).context(o)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ct(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ct(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ct(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:ct(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ct(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ct(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ct(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),u):s},u.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),u):o},u}const jve={draw(e,t){const n=Ef(t/ng);e.moveTo(n,0),e.arc(0,0,n,0,IX)}};function Uve(e,t){let n=null,r=uk(i);e=typeof e=="function"?e:ct(e||jve),t=typeof t=="function"?t:ct(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:ct(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:ct(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function ac(){}function vw(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ck(e){this._context=e}ck.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vve(e){return new ck(e)}function qX(e){this._context=e}qX.prototype={areaStart:ac,areaEnd:ac,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:vw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wve(e){return new qX(e)}function GX(e){this._context=e}GX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:vw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Hve(e){return new GX(e)}function YX(e,t){this._basis=new ck(e),this._beta=t}YX.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const qve=function e(t){function n(r){return t===1?new ck(r):new YX(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function bw(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function iM(e,t){this._context=e,this._k=(1-t)/6}iM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:bw(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:bw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gve=function e(t){function n(r){return new iM(r,t)}return n.tension=function(r){return e(+r)},n}(0);function oM(e,t){this._context=e,this._k=(1-t)/6}oM.prototype={areaStart:ac,areaEnd:ac,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:bw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yve=function e(t){function n(r){return new oM(r,t)}return n.tension=function(r){return e(+r)},n}(0);function sM(e,t){this._context=e,this._k=(1-t)/6}sM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xve=function e(t){function n(r){return new sM(r,t)}return n.tension=function(r){return e(+r)},n}(0);function aM(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>cr){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>cr){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function XX(e,t){this._context=e,this._alpha=t}XX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:aM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Kve=function e(t){function n(r){return t?new XX(r,t):new iM(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function KX(e,t){this._context=e,this._alpha=t}KX.prototype={areaStart:ac,areaEnd:ac,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:aM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qve=function e(t){function n(r){return t?new KX(r,t):new oM(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function QX(e,t){this._context=e,this._alpha=t}QX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:aM(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jve=function e(t){function n(r){return t?new QX(r,t):new sM(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function JX(e){this._context=e}JX.prototype={areaStart:ac,areaEnd:ac,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Zve(e){return new JX(e)}function jL(e){return e<0?-1:1}function UL(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(jL(o)+jL(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function VL(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function _$(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function xw(e){this._context=e}xw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_$(this,this._t0,VL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_$(this,VL(this,n=UL(this,e,t)),n);break;default:_$(this,this._t0,n=UL(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function ZX(e){this._context=new eK(e)}(ZX.prototype=Object.create(xw.prototype)).point=function(e,t){xw.prototype.point.call(this,t,e)};function eK(e){this._context=e}eK.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function ebe(e){return new xw(e)}function tbe(e){return new ZX(e)}function tK(e){this._context=e}tK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=WL(e),i=WL(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function WL(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function nbe(e){return new tK(e)}function fk(e,t){this._context=e,this._t=t}fk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function rbe(e){return new fk(e,.5)}function ibe(e){return new fk(e,0)}function obe(e){return new fk(e,1)}function Hu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const sbe=()=>typeof Image<"u"?Image:null;function Na(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $c(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const MA=Symbol("implicit");function lM(){var e=new aL,t=[],n=[],r=MA;function i(o){let s=e.get(o);if(s===void 0){if(r!==MA)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new aL;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return lM(t,n).unknown(r)},Na.apply(i,arguments),i}function um(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function mv(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ac(){}var ld=.7,rg=1/ld,hp="\\s*([+-]?\\d+)\\s*",Yy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ma="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",abe=/^#([0-9a-f]{3,8})$/,lbe=new RegExp(`^rgb\\(${hp},${hp},${hp}\\)$`),ube=new RegExp(`^rgb\\(${ma},${ma},${ma}\\)$`),cbe=new RegExp(`^rgba\\(${hp},${hp},${hp},${Yy}\\)$`),fbe=new RegExp(`^rgba\\(${ma},${ma},${ma},${Yy}\\)$`),dbe=new RegExp(`^hsl\\(${Yy},${ma},${ma}\\)$`),hbe=new RegExp(`^hsla\\(${Yy},${ma},${ma},${Yy}\\)$`),HL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};um(Ac,Xy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qL,formatHex:qL,formatHex8:pbe,formatHsl:gbe,formatRgb:GL,toString:GL});function qL(){return this.rgb().formatHex()}function pbe(){return this.rgb().formatHex8()}function gbe(){return nK(this).formatHsl()}function GL(){return this.rgb().formatRgb()}function Xy(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=abe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?YL(t):n===3?new Fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ob(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ob(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lbe.exec(e))?new Fn(t[1],t[2],t[3],1):(t=ube.exec(e))?new Fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cbe.exec(e))?Ob(t[1],t[2],t[3],t[4]):(t=fbe.exec(e))?Ob(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dbe.exec(e))?QL(t[1],t[2]/100,t[3]/100,1):(t=hbe.exec(e))?QL(t[1],t[2]/100,t[3]/100,t[4]):HL.hasOwnProperty(e)?YL(HL[e]):e==="transparent"?new Fn(NaN,NaN,NaN,0):null}function YL(e){return new Fn(e>>16&255,e>>8&255,e&255,1)}function Ob(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fn(e,t,n,r)}function uM(e){return e instanceof Ac||(e=Xy(e)),e?(e=e.rgb(),new Fn(e.r,e.g,e.b,e.opacity)):new Fn}function lc(e,t,n,r){return arguments.length===1?uM(e):new Fn(e,t,n,r??1)}function Fn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}um(Fn,lc,mv(Ac,{brighter(e){return e=e==null?rg:Math.pow(rg,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ld:Math.pow(ld,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fn(Wf(this.r),Wf(this.g),Wf(this.b),ww(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XL,formatHex:XL,formatHex8:mbe,formatRgb:KL,toString:KL}));function XL(){return`#${_f(this.r)}${_f(this.g)}${_f(this.b)}`}function mbe(){return`#${_f(this.r)}${_f(this.g)}${_f(this.b)}${_f((isNaN(this.opacity)?1:this.opacity)*255)}`}function KL(){const e=ww(this.opacity);return`${e===1?"rgb(":"rgba("}${Wf(this.r)}, ${Wf(this.g)}, ${Wf(this.b)}${e===1?")":`, ${e})`}`}function ww(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _f(e){return e=Wf(e),(e<16?"0":"")+e.toString(16)}function QL(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new us(e,t,n,r)}function nK(e){if(e instanceof us)return new us(e.h,e.s,e.l,e.opacity);if(e instanceof Ac||(e=Xy(e)),!e)return new us;if(e instanceof us)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new us(s,a,l,e.opacity)}function Sw(e,t,n,r){return arguments.length===1?nK(e):new us(e,t,n,r??1)}function us(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}um(us,Sw,mv(Ac,{brighter(e){return e=e==null?rg:Math.pow(rg,e),new us(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ld:Math.pow(ld,e),new us(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fn($$(e>=240?e-240:e+120,i,r),$$(e,i,r),$$(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new us(JL(this.h),Db(this.s),Db(this.l),ww(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ww(this.opacity);return`${e===1?"hsl(":"hsla("}${JL(this.h)}, ${Db(this.s)*100}%, ${Db(this.l)*100}%${e===1?")":`, ${e})`}`}}));function JL(e){return e=(e||0)%360,e<0?e+360:e}function Db(e){return Math.max(0,Math.min(1,e||0))}function $$(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const rK=Math.PI/180,iK=180/Math.PI,Cw=18,oK=.96422,sK=1,aK=.82521,lK=4/29,pp=6/29,uK=3*pp*pp,ybe=pp*pp*pp;function cK(e){if(e instanceof ya)return new ya(e.l,e.a,e.b,e.opacity);if(e instanceof dl)return fK(e);e instanceof Fn||(e=uM(e));var t=F$(e.r),n=F$(e.g),r=F$(e.b),i=A$((.2225045*t+.7168786*n+.0606169*r)/sK),o,s;return t===n&&n===r?o=s=i:(o=A$((.4360747*t+.3850649*n+.1430804*r)/oK),s=A$((.0139322*t+.0971045*n+.7141733*r)/aK)),new ya(116*i-16,500*(o-i),200*(i-s),e.opacity)}function kw(e,t,n,r){return arguments.length===1?cK(e):new ya(e,t,n,r??1)}function ya(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}um(ya,kw,mv(Ac,{brighter(e){return new ya(this.l+Cw*(e??1),this.a,this.b,this.opacity)},darker(e){return new ya(this.l-Cw*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=oK*T$(t),e=sK*T$(e),n=aK*T$(n),new Fn(P$(3.1338561*t-1.6168667*e-.4906146*n),P$(-.9787684*t+1.9161415*e+.033454*n),P$(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function A$(e){return e>ybe?Math.pow(e,1/3):e/uK+lK}function T$(e){return e>pp?e*e*e:uK*(e-lK)}function P$(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function F$(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function vbe(e){if(e instanceof dl)return new dl(e.h,e.c,e.l,e.opacity);if(e instanceof ya||(e=cK(e)),e.a===0&&e.b===0)return new dl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*iK;return new dl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ew(e,t,n,r){return arguments.length===1?vbe(e):new dl(e,t,n,r??1)}function dl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function fK(e){if(isNaN(e.h))return new ya(e.l,0,0,e.opacity);var t=e.h*rK;return new ya(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}um(dl,Ew,mv(Ac,{brighter(e){return new dl(this.h,this.c,this.l+Cw*(e??1),this.opacity)},darker(e){return new dl(this.h,this.c,this.l-Cw*(e??1),this.opacity)},rgb(){return fK(this).rgb()}}));var dK=-.14861,cM=1.78277,fM=-.29227,dk=-.90649,Ky=1.97294,ZL=Ky*dk,eI=Ky*cM,tI=cM*fM-dk*dK;function bbe(e){if(e instanceof Hf)return new Hf(e.h,e.s,e.l,e.opacity);e instanceof Fn||(e=uM(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(tI*r+ZL*t-eI*n)/(tI+ZL-eI),o=r-i,s=(Ky*(n-i)-fM*o)/dk,a=Math.sqrt(s*s+o*o)/(Ky*i*(1-i)),l=a?Math.atan2(s,o)*iK-120:NaN;return new Hf(l<0?l+360:l,a,i,e.opacity)}function RA(e,t,n,r){return arguments.length===1?bbe(e):new Hf(e,t,n,r??1)}function Hf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}um(Hf,RA,mv(Ac,{brighter(e){return e=e==null?rg:Math.pow(rg,e),new Hf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ld:Math.pow(ld,e),new Hf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*rK,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Fn(255*(t+n*(dK*r+cM*i)),255*(t+n*(fM*r+dk*i)),255*(t+n*(Ky*r)),this.opacity)}}));function hK(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function pK(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return hK((n-r/t)*t,s,i,o,a)}}function gK(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return hK((n-r/t)*t,i,o,s,a)}}const hk=e=>()=>e;function mK(e,t){return function(n){return e+n*t}}function xbe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function pk(e,t){var n=t-e;return n?mK(e,n>180||n<-180?n-360*Math.round(n/360):n):hk(isNaN(e)?t:e)}function wbe(e){return(e=+e)==1?Mn:function(t,n){return n-t?xbe(t,n,e):hk(isNaN(t)?n:t)}}function Mn(e,t){var n=t-e;return n?mK(e,n):hk(isNaN(e)?t:e)}const _w=function e(t){var n=wbe(t);function r(i,o){var s=n((i=lc(i)).r,(o=lc(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=Mn(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function yK(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=lc(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var Sbe=yK(pK),Cbe=yK(gK);function dM(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function vK(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kbe(e,t){return(vK(t)?dM:bK)(e,t)}function bK(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Tc(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function xK(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function os(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function wK(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Tc(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var OA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M$=new RegExp(OA.source,"g");function Ebe(e){return function(){return e}}function _be(e){return function(t){return e(t)+""}}function SK(e,t){var n=OA.lastIndex=M$.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=OA.exec(e))&&(i=M$.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:os(r,i)})),n=M$.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?_be(l[0].x):Ebe(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function Tc(e,t){var n=typeof t,r;return t==null||n==="boolean"?hk(t):(n==="number"?os:n==="string"?(r=Xy(t))?(t=r,_w):SK:t instanceof Xy?_w:t instanceof Date?xK:vK(t)?dM:Array.isArray(t)?bK:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wK:os)(e,t)}function $be(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Abe(e,t){var n=pk(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function cm(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var nI=180/Math.PI,DA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function CK(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*nI,skewX:Math.atan(l)*nI,scaleX:s,scaleY:a}}var Nb;function Tbe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?DA:CK(t.a,t.b,t.c,t.d,t.e,t.f)}function Pbe(e){return e==null||(Nb||(Nb=document.createElementNS("http://www.w3.org/2000/svg","g")),Nb.setAttribute("transform",e),!(e=Nb.transform.baseVal.consolidate()))?DA:(e=e.matrix,CK(e.a,e.b,e.c,e.d,e.e,e.f))}function kK(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:os(u,f)},{i:g-2,x:os(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:os(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:os(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:os(u,f)},{i:g-2,x:os(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),s(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)f[(m=d[p]).i]=m.x(h);return f.join("")}}}var Fbe=kK(Tbe,"px, ","px)","deg)"),Mbe=kK(Pbe,", ",")",")"),Rbe=1e-12;function rI(e){return((e=Math.exp(e))+1/e)/2}function Obe(e){return((e=Math.exp(e))-1/e)/2}function Dbe(e){return((e=Math.exp(2*e))-1)/(e+1)}const Nbe=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],d=s[2],h=c-a,p=f-l,g=h*h+p*p,m,y;if(g<Rbe)y=Math.log(d/u)/t,m=function(w){return[a+w*h,l+w*p,u*Math.exp(t*w*y)]};else{var v=Math.sqrt(g),b=(d*d-u*u+r*g)/(2*u*n*v),x=(d*d-u*u-r*g)/(2*d*n*v),S=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(x*x+1)-x);y=(C-S)/t,m=function(w){var k=w*y,E=rI(S),A=u/(n*v)*(E*Dbe(t*k+S)-Obe(S));return[a+A*h,l+A*p,u*E/rI(t*k+S)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function EK(e){return function(t,n){var r=e((t=Sw(t)).h,(n=Sw(n)).h),i=Mn(t.s,n.s),o=Mn(t.l,n.l),s=Mn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const _K=EK(pk);var $K=EK(Mn);function AK(e,t){var n=Mn((e=kw(e)).l,(t=kw(t)).l),r=Mn(e.a,t.a),i=Mn(e.b,t.b),o=Mn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function TK(e){return function(t,n){var r=e((t=Ew(t)).h,(n=Ew(n)).h),i=Mn(t.c,n.c),o=Mn(t.l,n.l),s=Mn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const PK=TK(pk);var FK=TK(Mn);function MK(e){return function t(n){n=+n;function r(i,o){var s=e((i=RA(i)).h,(o=RA(o)).h),a=Mn(i.s,o.s),l=Mn(i.l,o.l),u=Mn(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const RK=MK(pk);var OK=MK(Mn);function hM(e,t){t===void 0&&(t=e,e=Tc);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function Lbe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Ibe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Tc,interpolateArray:kbe,interpolateBasis:pK,interpolateBasisClosed:gK,interpolateCubehelix:RK,interpolateCubehelixLong:OK,interpolateDate:xK,interpolateDiscrete:$be,interpolateHcl:PK,interpolateHclLong:FK,interpolateHsl:_K,interpolateHslLong:$K,interpolateHue:Abe,interpolateLab:AK,interpolateNumber:os,interpolateNumberArray:dM,interpolateObject:wK,interpolateRgb:_w,interpolateRgbBasis:Sbe,interpolateRgbBasisClosed:Cbe,interpolateRound:cm,interpolateString:SK,interpolateTransformCss:Fbe,interpolateTransformSvg:Mbe,interpolateZoom:Nbe,piecewise:hM,quantize:Lbe},Symbol.toStringTag,{value:"Module"}));function zbe(e){return function(){return e}}function NA(e){return+e}var iI=[0,1];function fi(e){return e}function LA(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:zbe(isNaN(t)?NaN:.5)}function Bbe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function jbe(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=LA(i,r),o=n(s,o)):(r=LA(r,i),o=n(o,s)),function(a){return o(r(a))}}function Ube(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=LA(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=ic(e,a,1,r)-1;return o[l](i[l](a))}}function yv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gk(){var e=iI,t=iI,n=Tc,r,i,o,s=fi,a,l,u;function c(){var d=Math.min(e.length,t.length);return s!==fi&&(s=Bbe(e[0],e[d-1])),a=d>2?Ube:jbe,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((u||(u=a(t,e.map(r),os)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,NA),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=cm,c()},f.clamp=function(d){return arguments.length?(s=d?!0:fi,c()):s!==fi},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function DK(){return gk()(fi,fi)}function NK(e,t,n,r){var i=oc(e,t,n),o;switch(r=ad(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=tY(i,s))&&(r.precision=o),e6(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=nY(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=eY(i))&&(r.precision=o-(r.type==="%")*2);break}}return lv(r)}function Vd(e){var t=e.domain;return e.ticks=function(n){var r=t();return mA(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return NK(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,c=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);c-- >0;){if(u=yA(s,a,n),u===l)return r[i]=s,r[o]=a,t(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function pM(){var e=DK();return e.copy=function(){return yv(e,pM())},Na.apply(e,arguments),Vd(e)}function LK(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,NA),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return LK(e).unknown(t)},e=arguments.length?Array.from(e,NA):[0,1],Vd(n)}function IK(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function oI(e){return Math.log(e)}function sI(e){return Math.exp(e)}function Vbe(e){return-Math.log(-e)}function Wbe(e){return-Math.exp(-e)}function Hbe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qbe(e){return e===10?Hbe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Gbe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function aI(e){return(t,n)=>-e(-t,n)}function gM(e){const t=e(oI,sI),n=t.domain;let r=10,i,o;function s(){return i=Gbe(r),o=qbe(r),n()[0]<0?(i=aI(i),o=aI(o),e(Vbe,Wbe)):e(oI,sI),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=i(u),h=i(c),p,g;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/o(-d):p*o(d),!(g<u)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/o(-d):p*o(d),!(g<u)){if(g>c)break;y.push(g)}y.length*2<m&&(y=mA(u,c,m))}else y=mA(d,h,Math.min(h-d,m)).map(o);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ad(l)).precision==null&&(l.trim=!0),l=lv(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=()=>n(IK(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function zK(){const e=gM(gk()).domain([1,10]);return e.copy=()=>yv(e,zK()).base(e.base()),Na.apply(e,arguments),e}function lI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mM(e){var t=1,n=e(lI(t),uI(t));return n.constant=function(r){return arguments.length?e(lI(t=+r),uI(t)):t},Vd(n)}function BK(){var e=mM(gk());return e.copy=function(){return yv(e,BK()).constant(e.constant())},Na.apply(e,arguments)}function cI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ybe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Xbe(e){return e<0?-e*e:e*e}function yM(e){var t=e(fi,fi),n=1;function r(){return n===1?e(fi,fi):n===.5?e(Ybe,Xbe):e(cI(n),cI(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Vd(t)}function vM(){var e=yM(gk());return e.copy=function(){return yv(e,vM()).exponent(e.exponent())},Na.apply(e,arguments),e}function Kbe(){return vM.apply(null,arguments).exponent(.5)}function jK(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=YG(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[ic(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(bl),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return jK().domain(e).range(t).unknown(r)},Na.apply(o,arguments)}function UK(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[ic(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return UK().domain([e,t]).range(i).unknown(o)},Na.apply(Vd(s),arguments)}function VK(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[ic(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return VK().domain(e).range(t).unknown(n)},Na.apply(i,arguments)}function Qbe(e){return new Date(e)}function Jbe(e){return e instanceof Date?+e:+new Date(+e)}function bM(e,t,n,r,i,o,s,a,l,u){var c=DK(),f=c.invert,d=c.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function S(C){return(l(C)<C?h:a(C)<C?p:s(C)<C?g:o(C)<C?m:r(C)<C?i(C)<C?y:v:n(C)<C?b:x)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,Jbe)):d().map(Qbe)},c.ticks=function(C){var w=d();return e(w[0],w[w.length-1],C??10)},c.tickFormat=function(C,w){return w==null?S:u(w)},c.nice=function(C){var w=d();return(!C||typeof C.range!="function")&&(C=t(w[0],w[w.length-1],C??10)),C?d(IK(w,C)):c},c.copy=function(){return yv(c,bM(e,t,n,r,i,o,s,a,l,u))},c}function Zbe(){return Na.apply(bM(d0e,h0e,Es,Jp,Id,ga,fv,uv,hs,o6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function exe(){return Na.apply(bM(c0e,f0e,_s,Zp,Bd,xl,dv,cv,hs,s6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mk(){var e=0,t=1,n,r,i,o,s=fi,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(s=f,u):s};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,s=f(h,p),u):[s(0),s(1)]}}return u.range=c(Tc),u.rangeRound=c(cm),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function Pc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function xM(){var e=Vd(mk()(fi));return e.copy=function(){return Pc(e,xM())},$c.apply(e,arguments)}function WK(){var e=gM(mk()).domain([1,10]);return e.copy=function(){return Pc(e,WK()).base(e.base())},$c.apply(e,arguments)}function HK(){var e=mM(mk());return e.copy=function(){return Pc(e,HK()).constant(e.constant())},$c.apply(e,arguments)}function wM(){var e=yM(mk());return e.copy=function(){return Pc(e,wM()).exponent(e.exponent())},$c.apply(e,arguments)}function txe(){return wM.apply(null,arguments).exponent(.5)}function yk(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=fi,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-o)*(r*g<r*o?a:l),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(m){var y,v,b;return arguments.length?([y,v,b]=m,u=hM(g,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(Tc),h.rangeRound=p(cm),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),o=g(t),s=g(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function qK(){var e=Vd(yk()(fi));return e.copy=function(){return Pc(e,qK())},$c.apply(e,arguments)}function GK(){var e=gM(yk()).domain([.1,1,10]);return e.copy=function(){return Pc(e,GK()).base(e.base())},$c.apply(e,arguments)}function YK(){var e=mM(yk());return e.copy=function(){return Pc(e,YK()).constant(e.constant())},$c.apply(e,arguments)}function SM(){var e=yM(yk());return e.copy=function(){return Pc(e,SM()).exponent(e.exponent())},$c.apply(e,arguments)}function nxe(){return SM.apply(null,arguments).exponent(.5)}function La(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const rxe=La("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ixe=La("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),oxe=La("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),sxe=La("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),axe=La("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),lxe=La("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),uxe=La("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),cxe=La("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),fxe=La("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),dxe=La("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function CM(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const hxe="identity",ig="linear",Rl="log",vv="pow",bv="sqrt",vk="symlog",ud="time",cd="utc",va="sequential",fm="diverging",og="quantile",bk="quantize",xk="threshold",kM="ordinal",IA="point",XK="band",EM="bin-ordinal",En="continuous",xv="discrete",wv="discretizing",Vo="interpolating",_M="temporal";function pxe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function gxe(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function $M(){const e=lM().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=CM(f,a,l);let g=r[d-0];i=(h-g)/(p||1),s&&(i=Math.floor(i)),g+=(h-g-i*(f-a))*u,o=i*(1-a),s&&(g=Math.round(g),o=Math.round(o));const m=Bi(f).map(y=>g+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],m=+f[1],y,v,b;if(!(g!==g||m!==m)&&(m<g&&(b=g,g=m,m=b),!(m<h[0]||g>r[1-d])))return y=Math.max(0,ic(h,g)-1),v=g===m?y:ic(h,m)-1,g-h[y]>o+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return $M().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function KK(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return KK(t())},e}function mxe(){return KK($M().paddingInner(1))}var yxe=Array.prototype.map;function vxe(e){return yxe.call(e,vr)}const bxe=Array.prototype.slice;function QK(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(ic(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=vxe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=bxe.call(r),n):t.slice()},n.tickFormat=function(r,i){return NK(e[0],qe(e),r??10,i)},n.copy=function(){return QK().domain(n.domain()).range(n.range())},n}const $w=new Map,JK=Symbol("vega_scale");function ZK(e){return e[JK]=!0,e}function xxe(e){return e&&e[JK]===!0}function wxe(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?pxe(o):o.invertExtent?gxe(o):void 0),o.type=e,ZK(o)};return r.metadata=ks(le(n)),r}function et(e,t,n){return arguments.length>1?($w.set(e,wxe(e,t,n)),this):eQ(e)?$w.get(e):void 0}et(hxe,LK);et(ig,pM,En);et(Rl,zK,[En,Rl]);et(vv,vM,En);et(bv,Kbe,En);et(vk,BK,En);et(ud,Zbe,[En,_M]);et(cd,exe,[En,_M]);et(va,xM,[En,Vo]);et(`${va}-${ig}`,xM,[En,Vo]);et(`${va}-${Rl}`,WK,[En,Vo,Rl]);et(`${va}-${vv}`,wM,[En,Vo]);et(`${va}-${bv}`,txe,[En,Vo]);et(`${va}-${vk}`,HK,[En,Vo]);et(`${fm}-${ig}`,qK,[En,Vo]);et(`${fm}-${Rl}`,GK,[En,Vo,Rl]);et(`${fm}-${vv}`,SM,[En,Vo]);et(`${fm}-${bv}`,nxe,[En,Vo]);et(`${fm}-${vk}`,YK,[En,Vo]);et(og,jK,[wv,og]);et(bk,UK,wv);et(xk,VK,wv);et(EM,QK,[xv,wv]);et(kM,lM,xv);et(XK,$M,xv);et(IA,mxe,xv);function eQ(e){return $w.has(e)}function Wd(e,t){const n=$w.get(e);return n&&n.metadata[t]}function AM(e){return Wd(e,En)}function sg(e){return Wd(e,xv)}function zA(e){return Wd(e,wv)}function tQ(e){return Wd(e,Rl)}function Sxe(e){return Wd(e,_M)}function nQ(e){return Wd(e,Vo)}function rQ(e){return Wd(e,og)}const Cxe=["clamp","base","constant","exponent"];function iQ(e,t){const n=t[0],r=qe(t)-n;return function(i){return e(n+i*r)}}function wk(e,t,n){return hM(TM(t||"rgb",n),e)}function oQ(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function sQ(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?Er(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=et(o)().domain([t,n]).range([0,1]),Cxe.forEach(a=>e[a]?s[a](e[a]()):0),s)}function TM(e,t){const n=Ibe[kxe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function kxe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Exe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},_xe={accent:ixe,category10:rxe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:oxe,observable10:sxe,paired:axe,pastel1:lxe,pastel2:uxe,set1:cxe,set2:fxe,set3:dxe,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function aQ(e){if(Y(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function lQ(e,t){for(const n in e)PM(n,t(e[n]))}const fI={};lQ(_xe,aQ);lQ(Exe,e=>wk(aQ(e)));function PM(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(fI[e]=t,this):fI[e]}const n2="symbol",$xe="discrete",Axe="gradient",Txe=e=>Y(e)?e.map(t=>String(t)):String(e),Pxe=(e,t)=>e[1]-t[1],Fxe=(e,t)=>t[1]-e[1];function FM(e,t,n){let r;return Je(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(av(e.domain())/n||1)+1))),ae(t)&&(r=t.step,t=t.interval),ue(t)&&(t=e.type===ud?sm(t):e.type==cd?am(t):G("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function uQ(e,t,n){let r=e.range(),i=r[0],o=qe(r),s=Pxe;if(i>o&&(r=o,o=i,i=r,s=Fxe),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],qe(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function MM(e,t){return e.bins?uQ(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function cQ(e,t,n,r,i,o){const s=t.type;let a=Txe;if(s===ud||i===ud)a=e.timeFormat(r);else if(s===cd||i===cd)a=e.utcFormat(r);else if(tQ(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=fQ(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function fQ(e,t,n){const r=MM(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const BA={[og]:"quantiles",[bk]:"thresholds",[xk]:"domain"},dQ={[og]:"quantiles",[bk]:"domain"};function hQ(e,t){return e.bins?Oxe(e.bins):e.type===Rl?fQ(e,t,!0):BA[e.type]?Rxe(e[BA[e.type]]()):MM(e,t)}function Mxe(e,t,n){const r=t[dQ[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function Rxe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Oxe(e){const t=e.slice(0,-1);return t.max=qe(e),t}const Dxe=e=>BA[e.type]||e.bins;function pQ(e,t,n,r,i,o,s){const a=dQ[t.type]&&o!==ud&&o!==cd?Mxe(e,t,i):cQ(e,t,n,i,o,s);return r===n2&&Dxe(t)?Nxe(a):r===$xe?Lxe(a):Ixe(a)}const Nxe=e=>(t,n,r)=>{const i=dI(r[n+1],dI(r.max,1/0)),o=hI(t,e),s=hI(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},dI=(e,t)=>e??t,Lxe=e=>(t,n)=>n?e(t):null,Ixe=e=>t=>e(t),hI=(e,t)=>Number.isFinite(e)?t(e):null;function zxe(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+qe(t),o=i-r;if(e.type===xk){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function Bxe(e,t,n,r){const i=r||t.type;return ue(n)&&Sxe(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===ud?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===cd?e.utcFormat("%A, %d %B %Y, %X UTC"):pQ(e,t,5,null,n,r,!0)}function gQ(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Bxe(e,t,n.format,n.formatType);if(zA(t.type)){const o=hQ(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(sg(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(qe(o))}`}}let mQ=0;function jxe(){mQ=0}const Aw="p_";function RM(e){return e&&e.gradient}function yQ(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?Aw:"";return i||(i=e.id="gradient_"+mQ++,r==="radial"?(e.x1=Vs(e.x1,.5),e.y1=Vs(e.y1,.5),e.r1=Vs(e.r1,0),e.x2=Vs(e.x2,.5),e.y2=Vs(e.y2,.5),e.r2=Vs(e.r2,.5),o=Aw):(e.x1=Vs(e.x1,0),e.y1=Vs(e.y1,0),e.x2=Vs(e.x2,1),e.y2=Vs(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Vs(e,t){return e??t}function vQ(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const pI={basis:{curve:Vve},"basis-closed":{curve:Wve},"basis-open":{curve:Hve},bundle:{curve:qve,tension:"beta",value:.85},cardinal:{curve:Gve,tension:"tension",value:0},"cardinal-open":{curve:Xve,tension:"tension",value:0},"cardinal-closed":{curve:Yve,tension:"tension",value:0},"catmull-rom":{curve:Kve,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Qve,tension:"alpha",value:.5},"catmull-rom-open":{curve:Jve,tension:"alpha",value:.5},linear:{curve:rM},"linear-closed":{curve:Zve},monotone:{horizontal:tbe,vertical:ebe},natural:{curve:nbe},step:{curve:rbe},"step-after":{curve:obe},"step-before":{curve:ibe}};function OM(e,t,n){var r=fe(pI,e)&&pI[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Uxe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Vxe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Wxe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Hxe=/^((\s+,?\s*)|(,\s*))/,qxe=/^[01]/;function ag(e){const t=[];return(e.match(Vxe)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=Uxe[o],a=Gxe(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function Gxe(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?qxe:Wxe,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(Hxe);l!==null&&(i+=l[0].length)}return r}const uc=Math.PI/180,Yxe=1e-14,bf=Math.PI/2,sa=Math.PI*2,mh=Math.sqrt(3)/2;var R$={},O$={},bQ=[].join;function Xxe(e,t,n,r,i,o,s,a,l){const u=bQ.call(arguments);if(R$[u])return R$[u];const c=s*uc,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(l-t)*.5,p=d*(l-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,y=f/n,v=-f/r,b=d/r,x=m*a+y*l,S=v*a+b*l,C=m*e+y*t,w=v*e+b*t;let E=1/((C-x)*(C-x)+(w-S)*(w-S))-.25;E<0&&(E=0);let A=Math.sqrt(E);o==i&&(A=-A);const P=.5*(x+C)-A*(w-S),L=.5*(S+w)+A*(C-x),M=Math.atan2(S-L,x-P);let _=Math.atan2(w-L,C-P)-M;_<0&&o===1?_+=sa:_>0&&o===0&&(_-=sa);const T=Math.ceil(Math.abs(_/(bf+.001))),N=[];for(let D=0;D<T;++D){const I=M+D*_/T,U=M+(D+1)*_/T;N[D]=[P,L,I,U,n,r,f,d]}return R$[u]=N}function Kxe(e){const t=bQ.call(e);if(O$[t])return O$[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const c=u*s,f=-l*a,d=l*s,h=u*a,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(v*.5),x=8/3*b*b/Math.sin(v),S=n+p-x*g,C=r+g+x*p,w=n+m,k=r+y,E=w+x*y,A=k-x*m;return O$[t]=[c*S+f*C,d*S+h*C,c*E+f*A,d*E+h*A,c*w+f*k,d*w+h*k]}const uo=["l",0,0,0,0,0,0,0];function Qxe(e,t,n){const r=uo[0]=e[0];if(r==="a"||r==="A")uo[1]=t*e[1],uo[2]=n*e[2],uo[3]=e[3],uo[4]=e[4],uo[5]=e[5],uo[6]=t*e[6],uo[7]=n*e[7];else if(r==="h"||r==="H")uo[1]=t*e[1];else if(r==="v"||r==="V")uo[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)uo[i]=(i%2==1?t:n)*e[i];return uo}function Qy(e,t,n,r,i,o){var s,a=null,l=0,u=0,c=0,f=0,d,h,p,g,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(s=t[v],(i!==1||o!==1)&&(s=Qxe(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"c":d=l+s[5],h=u+s[6],c=l+s[3],f=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=s[5],u=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+s[3],h=u+s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+s[1]+n,u+s[2]+r,d+n,h+r),c=l+s[1],f=u+s[2],l=d,u=h;break;case"S":d=s[3],h=s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"q":d=l+s[3],h=u+s[4],c=l+s[1],f=u+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"t":d=l+s[1],h=u+s[2],a[0].match(/[QqTt]/)===null?(c=l,f=u):a[0]==="t"?(c=2*l-p,f=2*u-g):a[0]==="q"&&(c=2*l-c,f=2*u-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+s[1],f=u+s[2];break;case"T":d=s[1],h=s[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":gI(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":gI(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=m,u=y,e.closePath();break}a=s}}function gI(e,t,n,r){const i=Xxe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=Kxe(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const mI=.5773502691896257,yI={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,sa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=mh*n,i=r-n*mI,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=mh*n,i=r-n*mI;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=mh*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=mh*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=mh*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=mh*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function xQ(e){return fe(yI,e)?yI[e]:Jxe(e)}var D$={};function Jxe(e){if(!fe(D$,e)){const t=ag(e);D$[e]={draw:function(n,r){Qy(n,t,0,0,Math.sqrt(r)/2)}}}return D$[e]}const nu=.448084975506;function Zxe(e){return e.x}function e2e(e){return e.y}function t2e(e){return e.width}function n2e(e){return e.height}function Xa(e){return typeof e=="function"?e:()=>+e}function Lb(e,t,n){return Math.max(t,Math.min(e,n))}function wQ(){var e=Zxe,t=e2e,n=t2e,r=n2e,i=Xa(0),o=i,s=i,a=i,l=null;function u(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),v=Math.min(m,y)/2,b=Lb(+i.call(this,c),0,v),x=Lb(+o.call(this,c),0,v),S=Lb(+s.call(this,c),0,v),C=Lb(+a.call(this,c),0,v);if(l||(l=h=lk()),b<=0&&x<=0&&S<=0&&C<=0)l.rect(p,g,m,y);else{var w=p+m,k=g+y;l.moveTo(p+b,g),l.lineTo(w-x,g),l.bezierCurveTo(w-nu*x,g,w,g+nu*x,w,g+x),l.lineTo(w,k-C),l.bezierCurveTo(w,k-nu*C,w-nu*C,k,w-C,k),l.lineTo(p+S,k),l.bezierCurveTo(p+nu*S,k,p,k-nu*S,p,k-S),l.lineTo(p,g+b),l.bezierCurveTo(p,g+nu*b,p+nu*b,g,p+b,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=Xa(c),u):e},u.y=function(c){return arguments.length?(t=Xa(c),u):t},u.width=function(c){return arguments.length?(n=Xa(c),u):n},u.height=function(c){return arguments.length?(r=Xa(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=Xa(c),o=f!=null?Xa(f):i,a=d!=null?Xa(d):i,s=h!=null?Xa(h):o,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function SQ(){var e,t,n,r,i=null,o,s,a,l;function u(f,d,h){const p=h/2;if(o){var g=a-d,m=f-s;if(g||m){var y=Math.hypot(g,m),v=(g/=y)*l,b=(m/=y)*l,x=Math.atan2(m,g);i.moveTo(s-v,a-b),i.lineTo(f-g*p,d-m*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(s+v,a+b),i.arc(s,a,l,x,x+Math.PI)}else i.arc(f,d,p,0,sa);i.closePath()}else o=1;s=f,a=d,l=p}function c(f){var d,h=f.length,p,g=!1,m;for(i==null&&(i=m=lk()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(o=0),g&&u(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Sv(e,t){return e??t}const Cv=e=>e.x||0,kv=e=>e.y||0,r2e=e=>e.width||0,i2e=e=>e.height||0,o2e=e=>(e.x||0)+(e.width||0),s2e=e=>(e.y||0)+(e.height||0),a2e=e=>e.startAngle||0,l2e=e=>e.endAngle||0,u2e=e=>e.padAngle||0,c2e=e=>e.innerRadius||0,f2e=e=>e.outerRadius||0,d2e=e=>e.cornerRadius||0,h2e=e=>Sv(e.cornerRadiusTopLeft,e.cornerRadius)||0,p2e=e=>Sv(e.cornerRadiusTopRight,e.cornerRadius)||0,g2e=e=>Sv(e.cornerRadiusBottomRight,e.cornerRadius)||0,m2e=e=>Sv(e.cornerRadiusBottomLeft,e.cornerRadius)||0,y2e=e=>Sv(e.size,64),v2e=e=>e.size||1,Sk=e=>e.defined!==!1,b2e=e=>xQ(e.shape||"circle"),x2e=Bve().startAngle(a2e).endAngle(l2e).padAngle(u2e).innerRadius(c2e).outerRadius(f2e).cornerRadius(d2e),w2e=HX().x(Cv).y1(kv).y0(s2e).defined(Sk),S2e=HX().y(kv).x1(Cv).x0(o2e).defined(Sk),C2e=WX().x(Cv).y(kv).defined(Sk),k2e=wQ().x(Cv).y(kv).width(r2e).height(i2e).cornerRadius(h2e,p2e,g2e,m2e),E2e=Uve().type(b2e).size(y2e),_2e=SQ().x(Cv).y(kv).defined(Sk).size(v2e);function DM(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function $2e(e,t){return x2e.context(e)(t)}function A2e(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?S2e:w2e).curve(OM(r,n.orient,n.tension)).context(e)(t)}function T2e(e,t){const n=t[0],r=n.interpolate||"linear";return C2e.curve(OM(r,n.orient,n.tension)).context(e)(t)}function dm(e,t,n,r){return k2e.context(e)(t,n,r)}function P2e(e,t){return(t.mark.shape||t.shape).context(e)(t)}function F2e(e,t){return E2e.context(e)(t)}function M2e(e,t){return _2e.context(e)(t)}var CQ=1;function kQ(){CQ=1}function NM(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+CQ++),s=i.clipping[o]||(i.clipping[o]={id:o});return De(r)?s.path=r(null):DM(n)?s.path=dm(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function hn(e){this.clear(),e&&this.union(e)}hn.prototype={clone(){return new hn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*s+u,l*r+a*s+c,a*o-l*i+u,l*o+a*i+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Ck(e){this.mark=e,this.bounds=this.bounds||new hn}function kk(e){Ck.call(this,e),this.items=this.items||[]}re(kk,Ck);class EQ{constructor(t){this._pending=0,this._loader=t||KC()}pending(){return this._pending}sanitizeURL(t){const n=this;return vI(n),n._loader.sanitize(t,{context:"href"}).then(r=>(jm(n),r)).catch(()=>(jm(n),null))}loadImage(t){const n=this,r=sbe();return vI(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=fe(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>jm(n),s.onerror=()=>jm(n),s.src=o,s}).catch(i=>(jm(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function vI(e){e._pending+=1}function jm(e){e._pending-=1}function Vl(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?R2e(t,r):0))}return e}function R2e(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const O2e=sa-1e-8;let Ek,r2,i2,$f,jA,o2,UA,VA;const Fu=(e,t)=>Ek.add(e,t),s2=(e,t)=>Fu(r2=e,i2=t),bI=e=>Fu(e,Ek.y1),xI=e=>Fu(Ek.x1,e),xf=(e,t)=>jA*e+UA*t,wf=(e,t)=>o2*e+VA*t,N$=(e,t)=>Fu(xf(e,t),wf(e,t)),L$=(e,t)=>s2(xf(e,t),wf(e,t));function Ev(e,t){return Ek=e,t?($f=t*uc,jA=VA=Math.cos($f),o2=Math.sin($f),UA=-o2):(jA=VA=1,$f=o2=UA=0),D2e}const D2e={beginPath(){},closePath(){},moveTo:L$,lineTo:L$,rect(e,t,n,r){$f?(N$(e+n,t),N$(e+n,t+r),N$(e,t+r),L$(e,t)):(Fu(e+n,t+r),s2(e,t))},quadraticCurveTo(e,t,n,r){const i=xf(e,t),o=wf(e,t),s=xf(n,r),a=wf(n,r);wI(r2,i,s,bI),wI(i2,o,a,xI),s2(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=xf(e,t),a=wf(e,t),l=xf(n,r),u=wf(n,r),c=xf(i,o),f=wf(i,o);SI(r2,s,l,c,bI),SI(i2,a,u,f,xI),s2(c,f)},arc(e,t,n,r,i,o){if(r+=$f,i+=$f,r2=n*Math.cos(i)+e,i2=n*Math.sin(i)+t,Math.abs(i-r)>O2e)Fu(e-n,t-n),Fu(e+n,t+n);else{const s=u=>Fu(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%sa,r<0&&(r+=sa),i=i%sa,i<0&&(i+=sa),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=sa,a=r-r%bf,l=0;l<4&&a>i;++l,a-=bf)s(a);else for(a=r-r%bf+bf,l=0;l<4&&a<i;++l,a=a+bf)s(a)}}};function wI(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function SI(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(o)>Yxe?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&i(CI(l,e,t,n,r)),0<u&&u<1&&i(CI(u,e,t,n,r))}function CI(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var qu=(qu=Hu(1,1))?qu.getContext("2d"):null;const WA=new hn;function LM(e){return function(t,n){if(!qu)return!0;e(qu,t),WA.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=WA;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(qu.isPointInPath(l,a))return!0;return!1}}function IM(e,t){return t.contains(e.x||0,e.y||0)}function _Q(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(WA.set(n,r,n+i,r+o))}function $Q(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return zh(t,n,r,i,o)}function zh(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,p,g,m;for(m=0;m<4;++m){if(m===0&&(h=-u,p=-(o-t)),m===1&&(h=u,p=a-t),m===2&&(h=-c,p=-(s-n)),m===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function lg(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Qo(e,t){return e??t}function kI(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function N2e(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Qo(t.x1,.5)*r,n.y1+Qo(t.y1,.5)*i,Math.max(r,i)*Qo(t.r1,0),n.x1+Qo(t.x2,.5)*r,n.y1+Qo(t.y2,.5)*i,Math.max(r,i)*Qo(t.r2,.5));else{const s=Qo(t.x1,0),a=Qo(t.y1,0),l=Qo(t.x2,1),u=Qo(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=Hu(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=kI(f.createLinearGradient(s,a,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return kI(o,t.stops)}function AQ(e,t,n){return RM(n)?N2e(e,n,t.bounds):n}function Tw(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=AQ(e,t,t.fill),!0):!1}var L2e=[];function ug(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=AQ(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||L2e),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function I2e(e,t){return e.zindex-t.zindex||e.index-t.index}function zM(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(I2e)}function As(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=zM(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function Pw(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=zM(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function BM(e){return function(t,n,r){As(n,i=>{(!r||r.intersects(i.bounds))&&TQ(e,t,i,i)})}}function z2e(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&TQ(e,t,n.items[0],n.items)}}function TQ(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(lg(t,n),n.fill&&Tw(t,n,i)&&t.fill(),n.stroke&&ug(t,n,i)&&t.stroke()))}function _k(e){return e=e||Do,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,Pw(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function _v(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,u,c;return l&&(u=s.strokeWidth,c=s.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function jM(e){return _k(_v(e))}function qf(e,t){return"translate("+e+","+t+")"}function UM(e){return"rotate("+e+")"}function B2e(e,t){return"scale("+e+","+t+")"}function PQ(e){return qf(e.x||0,e.y||0)}function j2e(e){return qf(e.x||0,e.y||0)+(e.angle?" "+UM(e.angle):"")}function U2e(e){return qf(e.x||0,e.y||0)+(e.angle?" "+UM(e.angle):"")+(e.scaleX||e.scaleY?" "+B2e(e.scaleX||1,e.scaleY||1):"")}function VM(e,t,n){function r(s,a){s("transform",j2e(a)),s("d",t(null,a))}function i(s,a){return t(Ev(s,a.angle),a),Vl(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=uc),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:BM(o),pick:jM(o),isect:n||LM(o)}}var V2e=VM("arc",$2e);function W2e(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function H2e(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function q2e(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function WM(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(Ev(l),c),Vl(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=_v(o);function a(l,u,c,f,d,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,s(l,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:z2e(o),pick:a,isect:IM,tip:n}}var G2e=WM("area",A2e,W2e);function Y2e(e,t){var n=t.clip;e.save(),De(n)?(e.beginPath(),n(e),e.clip()):FQ(e,t.group)}function FQ(e,t){e.beginPath(),DM(t)?dm(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function MQ(e){const t=Qo(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function X2e(e,t){e("transform",PQ(t))}function RQ(e,t){const n=MQ(t);e("d",dm(null,t,n,n))}function K2e(e,t){e("class","background"),e("aria-hidden",!0),RQ(e,t)}function Q2e(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?RQ(e,t):e("d","")}function J2e(e,t,n){const r=t.clip?NM(n,t,t):null;e("clip-path",r)}function Z2e(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Vl(e,t),e.translate(t.x||0,t.y||0)}function Jy(e,t,n,r){const i=MQ(t);e.beginPath(),dm(e,t,(n||0)+i,(r||0)+i)}const ewe=_v(Jy),twe=_v(Jy,!1),nwe=_v(Jy,!0);function rwe(e,t,n,r){As(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(Jy(e,i,o,s),lg(e,i),i.fill&&Tw(e,i,l)&&e.fill(),i.stroke&&!a&&ug(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&FQ(e,i),n&&n.translate(-o,-s),As(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(Jy(e,i,o,s),lg(e,i),ug(e,i,l)&&e.stroke())})}function iwe(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return Pw(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,o))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),p=f+(l.height||0),g=l.clip;if(g&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,g&&DM(l)&&!nwe(e,l,s,a))return e.restore(),null;const m=l.strokeForeground,y=t.interactive!==!1;return y&&m&&l.stroke&&twe(e,l,s,a)?(e.restore(),l):(u=Pw(l,v=>owe(v,c,f)?this.pick(v,n,r,c,f):null),!u&&y&&(l.fill||!m&&l.stroke)&&ewe(e,l,s,a)&&(u=l),e.restore(),u||null)})}function owe(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var swe={type:"group",tag:"g",nested:!1,attr:X2e,bound:Z2e,draw:rwe,pick:iwe,isect:_Q,content:J2e,background:K2e,foreground:Q2e},Zy={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function HM(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function qM(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function GM(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function $k(e,t){return e==="center"?t/2:e==="right"?t:0}function Ak(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function awe(e,t,n){const r=HM(t,n),i=qM(t,r),o=GM(t,r),s=(t.x||0)-$k(t.align,i),a=(t.y||0)-Ak(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,Zy["xmlns:xlink"],"xlink:href"),e("transform",qf(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function lwe(e,t){const n=t.image,r=qM(t,n),i=GM(t,n),o=(t.x||0)-$k(t.align,r),s=(t.y||0)-Ak(t.baseline,i);return e.set(o,s,o+r,s+i)}function uwe(e,t,n){As(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=HM(r,this);let o=qM(r,i),s=GM(r,i);if(o===0||s===0)return;let a=(r.x||0)-$k(r.align,o),l=(r.y||0)-Ak(r.baseline,s),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,l+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(lg(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var cwe={type:"image",tag:"image",nested:!1,attr:awe,bound:lwe,draw:uwe,pick:_k(),isect:Do,get:HM,xOffset:$k,yOffset:Ak},fwe=WM("line",T2e,H2e);function dwe(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",U2e(t)),e("d",t.path)}function a2(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*uc,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=ag(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),Qy(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):Qy(e,l,r,i,o,s)}function hwe(e,t){return a2(Ev(e,t.angle),t)?e.set(0,0,0,0):Vl(e,t,!0)}var pwe={type:"path",tag:"path",nested:!1,attr:dwe,bound:hwe,draw:BM(a2),pick:jM(a2),isect:LM(a2)};function gwe(e,t){e("d",dm(null,t))}function mwe(e,t){var n,r;return Vl(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function EI(e,t){e.beginPath(),dm(e,t)}var ywe={type:"rect",tag:"path",nested:!1,attr:gwe,bound:mwe,draw:BM(EI),pick:jM(EI),isect:_Q};function vwe(e,t){e("transform",PQ(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function bwe(e,t){var n,r;return Vl(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function OQ(e,t,n){var r,i,o,s;return t.stroke&&ug(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function xwe(e,t,n){As(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&OQ(e,r,i)&&(lg(e,r),e.stroke())}})}function wwe(e,t,n,r){return e.isPointInStroke?OQ(e,t,1)&&e.isPointInStroke(n,r):!1}var Swe={type:"rule",tag:"line",nested:!1,attr:vwe,bound:bwe,draw:xwe,pick:_k(wwe),isect:$Q},Cwe=VM("shape",P2e),kwe=VM("symbol",F2e,IM);const _I=NG();var Wi={height:Ia,measureWidth:YM,estimateWidth:Fw,width:Fw,canvas:DQ};DQ(!0);function DQ(e){Wi.width=e&&qu?YM:Fw}function Fw(e,t){return NQ(fc(e,t),Ia(e))}function NQ(e,t){return~~(.8*e.length*t)}function YM(e,t){return Ia(e)<=0||!(t=fc(e,t))?0:LQ(t,Tk(e))}function LQ(e,t){const n=`(${t}) ${e}`;let r=_I.get(n);return r===void 0&&(qu.font=t,r=qu.measureText(e).width,_I.set(n,r)),r}function Ia(e){return e.fontSize!=null?+e.fontSize||0:11}function cc(e){return e.lineHeight!=null?e.lineHeight:Ia(e)+2}function Ewe(e){return Y(e)?e.length>1?e:e[0]:e}function $v(e){return Ewe(e.lineBreak&&e.text&&!Y(e.text)?e.text.split(e.lineBreak):e.text)}function XM(e){const t=$v(e);return(Y(t)?t.length-1:0)*cc(e)}function fc(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?$we(e,n):n}function _we(e){if(Wi.width===YM){const t=Tk(e);return n=>LQ(n,t)}else if(Wi.width===Fw){const t=Ia(e);return n=>NQ(n,t)}else return t=>Wi.width(e,t)}function $we(e,t){var n=+e.limit,r=_we(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function Av(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Tk(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ia(e)+"px "+Av(e,t)}function KM(e){var t=e.baseline,n=Ia(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*cc(e):t==="line-bottom"?.29*n-.5*cc(e):0)}const Awe={left:"start",center:"middle",right:"end"},ly=new hn;function Pk(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-bf,t+=r*Math.cos(i),n+=r*Math.sin(i)),ly.x1=t,ly.y1=n,ly}function Twe(e,t){var n=t.dx||0,r=(t.dy||0)+KM(t),i=Pk(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",Awe[t.align]||"start"),a?(l=qf(o,s)+" "+UM(a),(n||r)&&(l+=" "+qf(n,r))):l=qf(o+n,s+r),e("transform",l)}function QM(e,t,n){var r=Wi.height(t),i=t.align,o=Pk(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+KM(t)-Math.round(.8*r),c=$v(t),f;if(Y(c)?(r+=cc(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Wi.width(t,h)),0)):f=Wi.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=s,u+=a,l+f,u+r),t.angle&&!n)e.rotate(t.angle*uc,s,a);else if(n===2)return e.rotatedPoints(t.angle*uc,s,a);return e}function Pwe(e,t,n){As(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Tk(r),e.textAlign=r.align||"left",o=Pk(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*uc),s=a=0),s+=r.dx||0,a+=(r.dy||0)+KM(r),c=$v(r),lg(e,r),Y(c))for(u=cc(r),l=0;l<c.length;++l)f=fc(r,c[l]),r.fill&&Tw(e,r,i)&&e.fillText(f,s,a),r.stroke&&ug(e,r,i)&&e.strokeText(f,s,a),a+=u;else f=fc(r,c),r.fill&&Tw(e,r,i)&&e.fillText(f,s,a),r.stroke&&ug(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function Fwe(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=Pk(t),a=s.x1,l=s.y1,u=QM(ly,t,1),c=-t.angle*uc,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*l),p=d*i+f*o+(l-d*a-f*l);return u.contains(h,p)}function Mwe(e,t){const n=QM(ly,e,2);return zh(t,n[0],n[1],n[2],n[3])||zh(t,n[0],n[1],n[4],n[5])||zh(t,n[4],n[5],n[6],n[7])||zh(t,n[2],n[3],n[6],n[7])}var Rwe={type:"text",tag:"text",nested:!1,attr:Twe,bound:QM,draw:Pwe,pick:_k(Fwe),isect:Mwe},Owe=WM("trail",M2e,q2e),Zi={arc:V2e,area:G2e,group:swe,image:cwe,line:fwe,path:pwe,rect:ywe,rule:Swe,shape:Cwe,symbol:kwe,text:Rwe,trail:Owe};function HA(e,t,n){var r=Zi[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new hn),e,n)}var $I={mark:null};function IQ(e,t,n){var r=Zi[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,c;if(r.nested)return s?u=o[0]:($I.mark=e,u=$I),c=HA(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new hn,s)for(a=0,l=o.length;a<l;++a)t.union(HA(o[a],i,n));return e.bounds=t}const Dwe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function zQ(e,t){return JSON.stringify(e,Dwe,t)}function BQ(e){const t=typeof e=="string"?JSON.parse(e):e;return jQ(t)}function jQ(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&jQ(n[i]);return t&&IQ(e),e}class UQ{constructor(t){arguments.length?this.root=BQ(t):(this.root=AI({marktype:"group",name:"root",role:"frame"}),this.root.items=[new kk(this.root)])}toJSON(t){return zQ(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=AI(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function AI(e,t){const n={bounds:new hn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Mu(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function JM(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function vn(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Mu(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function wo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function VQ(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Fk(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Nwe(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Zi[i.marktype]).tip){for(s=Fk(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let ZM=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||KC(),this._tooltip=n||Lwe}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=Mu(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Nwe(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function Lwe(e,t,n,r){e.element().setAttribute("title",r||"")}class Tv{constructor(t){this._el=null,this._bgcolor=null,this._loader=new EQ(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Iwe="keydown",zwe="keypress",Bwe="keyup",WQ="dragenter",l2="dragleave",HQ="dragover",qA="pointerdown",jwe="pointerup",Mw="pointermove",u2="pointerout",qQ="pointerover",GA="mousedown",Uwe="mouseup",GQ="mousemove",Rw="mouseout",YQ="mouseover",Ow="click",Vwe="dblclick",Wwe="wheel",XQ="mousewheel",Dw="touchstart",Nw="touchmove",Lw="touchend",Hwe=[Iwe,zwe,Bwe,WQ,l2,HQ,qA,jwe,Mw,u2,qQ,GA,Uwe,GQ,Rw,YQ,Ow,Vwe,Wwe,XQ,Dw,Nw,Lw],YA=Mw,uy=Rw,XA=Ow;class Pv extends ZM{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Hwe,this.pointermove=PI([Mw,GQ],[qQ,YQ],[u2,Rw]),this.dragover=PI([HQ],[WQ],[l2]),this.pointerout=FI([u2,Rw]),this.dragleave=FI([l2])}initialize(t,n,r){return this._canvas=t&&JM(t,"canvas"),[Ow,GA,qA,Mw,u2,l2].forEach(i=>TI(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(XQ,t)}pointerdown(t){this._down=this._active,this.fire(qA,t)}mousedown(t){this._down=this._active,this.fire(GA,t)}click(t){this._down===this._active&&(this.fire(Ow,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Dw,t,!0)}touchmove(t){this.fire(Nw,t,!0)}touchend(t){this.fire(Lw,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===XA&&i&&i.href?this.handleHref(n,i,i.href):(t===YA||t===uy)&&this.handleTooltip(n,i,t!==uy),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(TI(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=Fk(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return Zi[t.marktype].pick.call(this,s,t,n,r,i,o)}}const qwe=e=>e===Dw||e===Nw||e===Lw?[Dw,Nw,Lw]:[e];function TI(e,t){qwe(t).forEach(n=>Gwe(e,n))}function Gwe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function F0(e,t,n){t.forEach(r=>e.fire(r,n))}function PI(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?F0(this,e,r):((!i||!i.exit)&&F0(this,n,r),this._active=o,F0(this,t,r),F0(this,e,r))}}function FI(e){return function(t){F0(this,e,t),this._active=null}}function Ywe(){return typeof window<"u"&&window.devicePixelRatio||1}function Xwe(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?Ywe():i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class Iw extends Tv{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new hn,this._tempb=new hn}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Hu(1,1,this._options.type),t&&this._canvas&&(wo(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Xwe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||G("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=Kwe(i,o,s);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):Qwe(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=Zi[n.marktype];n.clip&&Y2e(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const Kwe=(e,t,n)=>new hn().set(0,0,t,n).translate(-e[0],-e[1]);function Qwe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class KQ extends ZM{constructor(t,n){super(t,n);const r=this;r._hrefHandler=I$(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=I$(r,(i,o)=>{r.handleTooltip(i,o,i.type!==uy)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(XA,this._hrefHandler),i.removeEventListener(YA,this._tooltipHandler),i.removeEventListener(uy,this._tooltipHandler)),this._svg=i=t&&JM(t,"svg"),i&&(i.addEventListener(XA,this._hrefHandler),i.addEventListener(YA,this._tooltipHandler),i.addEventListener(uy,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:I$(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const I$=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},QQ="aria-hidden",eR="aria-label",tR="role",nR="aria-roledescription",JQ="graphics-object",rR="graphics-symbol",ZQ=(e,t,n)=>({[tR]:e,[nR]:t,[eR]:n||void 0}),Jwe=ks(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),MI={axis:{desc:"axis",caption:tSe},legend:{desc:"legend",caption:nSe},"title-text":{desc:"title",caption:e=>`Title text '${OI(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${OI(e)}'`}},RI={ariaRole:tR,ariaRoleDescription:nR,description:eR};function eJ(e,t){const n=t.aria===!1;if(e(QQ,n||void 0),n||t.description==null)for(const r in RI)e(RI[r],void 0);else{const r=t.mark.marktype;e(eR,t.description),e(tR,t.ariaRole||(r==="group"?JQ:rR)),e(nR,t.ariaRoleDescription||`${r} mark`)}}function tJ(e){return e.aria===!1?{[QQ]:!0}:Jwe[e.role]?null:MI[e.role]?eSe(e,MI[e.role]):Zwe(e)}function Zwe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return ZQ(n?JQ:rR,`${t} mark container`,e.description)}function eSe(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return ZQ(t.role||rR,t.desc,n.description||r(n))}catch{return null}}function OI(e){return le(e.text).join(" ")}function tSe(e){const t=e.datum,n=e.orient,r=t.title?nJ(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${sg(a)?"discrete":a} scale with ${gQ(s,o,e)}`}function nSe(e){const t=e.datum,n=t.title?nJ(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return iSe(r)+(n?` titled '${n}'`:"")+` for ${rSe(o)} with ${gQ(l,a,e)}`}function nJ(e){try{return le(qe(e.items).items[0].text).join(" ")}catch{return null}}function rSe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+qe(e)}function iSe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const rJ=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),oSe=e=>rJ(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function iR(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${oSe(u)}"`),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=rJ(l),a),toString:()=>e};return a}const iJ=e=>oJ(iR(),e)+"";function oJ(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):oJ(e,r)}return e.close()}const zw={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Bw={blend:"mix-blend-mode"},sJ={fill:"none","stroke-miterlimit":10},Um=0,DI="http://www.w3.org/2000/xmlns/",yn=Zy.xmlns;class oR extends Tv{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=vn(t,0,"svg",yn),this._svg.setAttributeNS(DI,"xmlns",yn),this._svg.setAttributeNS(DI,"xmlns:xlink",Zy["xmlns:xlink"]),this._svg.setAttribute("version",Zy.version),this._svg.setAttribute("class","marks"),wo(t,1),this._root=vn(this._svg,Um,"g",yn),Ru(this._root,sJ),wo(this._svg,Um+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Ru(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=vn(t,Um,"rect",yn),Ru(r,{width:this._width,height:this._height,fill:n}));const i=iJ(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),wo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=Zi[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,NI(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,NI(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=Zi[s],l=n.interactive===!1?"none":null,u=a.tag==="g",c=LI(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return wo(c,0),n._svg;c.setAttribute("class",VQ(n));const f=tJ(n);for(const g in f)Or(c,g,f[g]);u||Or(c,"pointer-events",l),Or(c,"clip-path",n.clip?NM(this,n,n.group):null);let d=null,h=0;const p=g=>{const m=this.isDirty(g),y=LI(g,c,d,a.tag,o);m&&(this._update(a,y,g),u&&lSe(this,y,g,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):As(n,p),wo(c,h),c}_update(t,n,r){hl=n,pr=n.__values__,eJ(cy,r),t.attr(cy,r,this);const i=cSe[t.type];i&&i.call(this,t,n,r),hl&&this.style(hl,r)}style(t,n){if(n!=null){for(const r in zw){let i=r==="font"?Av(n):n[r];if(i===pr[r])continue;const o=zw[r];i==null?t.removeAttribute(o):(RM(i)&&(i=yQ(i,this._defs.gradient,aJ())),t.setAttribute(o,i+"")),pr[r]=i}for(const r in Bw)c2(t,Bw[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=vn(t,Um+1,"defs",yn)),i=sSe(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=vn(t,Um+1,"defs",yn)),i=aSe(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):wo(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function NI(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function sSe(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=vn(e,n++,"pattern",yn);Ru(s,{id:Aw+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=vn(s,0,"rect",yn),Ru(s,{width:1,height:1,fill:`url(${aJ()}#${t.id})`}),e=vn(e,n++,"radialGradient",yn),Ru(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=vn(e,n++,"linearGradient",yn),Ru(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=vn(e,r,"stop",yn),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return wo(e,r),n}function aSe(e,t,n){let r;return e=vn(e,n,"clipPath",yn),e.setAttribute("id",t.id),t.path?(r=vn(e,0,"path",yn),r.setAttribute("d",t.path)):(r=vn(e,0,"rect",yn),Ru(r,{x:0,y:0,width:t.width,height:t.height})),wo(e,1),n+1}function lSe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;As(n,s=>{i=e.mark(t,s,i,r),++o}),wo(t,1+o)}function LI(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=Mu(s,r,yn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=Mu(s,"path",yn);o.appendChild(a),a.__data__=e;const l=Mu(s,"g",yn);o.appendChild(l),l.__data__=e;const u=Mu(s,"path",yn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||uSe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function uSe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let hl=null,pr=null;const cSe={group(e,t,n){const r=hl=t.childNodes[2];pr=r.__values__,e.foreground(cy,n,this),pr=t.__values__,hl=t.childNodes[1],e.content(cy,n,this);const i=hl=t.childNodes[0];e.background(cy,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==pr.events&&(Or(r,"pointer-events",o),Or(i,"pointer-events",o),pr.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Or(r,"display",null),this.style(i,n),Or(i,"stroke",null),s&&(n.fill=null),pr=r.__values__,this.style(r,n),s&&(n.fill=s),hl=null}else Or(r,"display","none")},image(e,t,n){n.smooth===!1?(c2(t,"image-rendering","optimizeSpeed"),c2(t,"image-rendering","pixelated")):c2(t,"image-rendering",null)},text(e,t,n){const r=$v(n);let i,o,s,a;Y(r)?(o=r.map(l=>fc(n,l)),i=o.join(`
`),i!==pr.text&&(wo(t,0),s=t.ownerDocument,a=cc(n),o.forEach((l,u)=>{const c=Mu(s,"tspan",yn);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),pr.text=i)):(o=fc(n,r),o!==pr.text&&(t.textContent=o,pr.text=o)),Or(t,"font-family",Av(n)),Or(t,"font-size",Ia(n)+"px"),Or(t,"font-style",n.fontStyle),Or(t,"font-variant",n.fontVariant),Or(t,"font-weight",n.fontWeight)}};function cy(e,t,n){t!==pr[e]&&(n?fSe(hl,e,t,n):Or(hl,e,t),pr[e]=t)}function c2(e,t,n){n!==pr[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),pr[t]=n)}function Ru(e,t){for(const n in t)Or(e,n,t[n])}function Or(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function fSe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function aJ(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class lJ extends Tv{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=iR();n.open("svg",Oe({},Zy,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",sJ,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Zi[n.marktype],i=r.tag,o=[eJ,r.attr];t.open("g",{class:VQ(n),"clip-path":n.clip?NM(this,n,n.group):null},tJ(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const u=$v(a);if(Y(u)){const c={x:0,dy:cc(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(fc(a,u[f])).close()}else t.text(fc(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),As(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):As(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,u,c)=>{o[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&dSe(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Aw+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function dSe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Av(t),e["font-size"]=Ia(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in zw){let a=t[s];const l=zw[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(RM(a)&&(a=yQ(a,i.gradient,"")),e[l]=a)}for(const s in Bw){const a=t[s];a!=null&&(o=o||[],o.push(`${Bw[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const ns={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function hSe(e){ns.svgMarkTypes=e.svgMarkTypes??["text"],ns.svgOnTop=e.svgOnTop??!0,ns.debug=e.debug??!1}class KA extends Tv{constructor(t){super(t),this._svgRenderer=new oR(t),this._canvasRenderer=new Iw(t)}initialize(t,n,r,i,o){this._root_el=vn(t,0,"div");const s=vn(this._root_el,0,"div"),a=vn(this._root_el,1,"div");return this._root_el.style.position="relative",ns.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=ns.svgOnTop?a:s,this._canvasEl=ns.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return ns.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!ns.svgMarkTypes.includes(o));this._svgRenderer.render(t,ns.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return ns.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class uJ extends Pv{constructor(t,n){super(t,n)}initialize(t,n,r){const i=vn(vn(t,0,"div"),ns.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const cJ="canvas",fJ="hybrid",dJ="png",hJ="svg",pJ="none",Ou={Canvas:cJ,PNG:dJ,SVG:hJ,Hybrid:fJ,None:pJ},fd={};fd[cJ]=fd[dJ]={renderer:Iw,headless:Iw,handler:Pv};fd[hJ]={renderer:oR,headless:lJ,handler:KQ};fd[fJ]={renderer:KA,headless:KA,handler:uJ};fd[pJ]={};function Mk(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(fd[e]=t,this):fd[e]}function gJ(e,t,n){const r=[],i=new hn().union(t),o=e.marktype;return o?mJ(e,i,n,r):o==="group"?yJ(e,i,n,r):G("Intersect scene must be mark node or group item.")}function mJ(e,t,n,r){if(pSe(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)yJ(i[a],t,n,r);else for(const l=Zi[o].isect;a<s;++a){const u=i[a];vJ(u,t,l)&&r.push(u)}}return r}function pSe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function yJ(e,t,n,r){n&&n(e.mark)&&vJ(e,t,Zi.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)mJ(i[l],t,n,r);t.translate(s,a)}return r}function vJ(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const z$=new hn;function bJ(e){const t=e.clip;if(De(t))t(Ev(z$.clear()));else if(t)z$.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(z$)}const gSe=1e-9;function sR(e,t,n){return e===t?!0:n==="path"?xJ(e,t):e instanceof Date&&t instanceof Date?+e==+t:Je(e)&&Je(t)?Math.abs(e-t)<=gSe:!e||!t||!ae(e)&&!ae(t)?e==t:mSe(e,t)}function xJ(e,t){return sR(ag(e),ag(t))}function mSe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!sR(e[i],t[i],i))return!1;return typeof e==typeof t}function ySe(){kQ(),jxe()}const cg="top",cs="left",ps="right",dc="bottom",vSe="top-left",bSe="top-right",xSe="bottom-left",wSe="bottom-right",aR="start",QA="middle",Lr="end",SSe="x",CSe="y",Rk="group",lR="axis",uR="title",kSe="frame",ESe="scope",cR="legend",wJ="row-header",SJ="row-footer",CJ="row-title",kJ="column-header",EJ="column-footer",_J="column-title",_Se="padding",$Se="symbol",$J="fit",AJ="fit-x",TJ="fit-y",ASe="pad",fR="none",Ib="all",JA="each",dR="flush",Du="column",Nu="row";function PJ(e){H.call(this,null,e)}re(PJ,H,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Zi[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=zb(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===Rk||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(zb(u,s))),r.role){case lR:case cR:case uR:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(zb(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(zb(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return bJ(r),t.modifies("bounds")}});function zb(e,t,n){return t(e.bounds.clear(),e,n)}const II=":vega_identifier:";function hR(e){H.call(this,0,e)}hR.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};re(hR,H,{transform(e,t){const n=TSe(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function TSe(e){return e._signals[II]||(e._signals[II]=e.add(0))}function FJ(e){H.call(this,null,e)}re(FJ,H,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,PSe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===Rk?kk:Ck;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function PSe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function MJ(e){H.call(this,null,e)}const zI={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!RJ(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},RJ=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),BI=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(RJ(i,o=e[n].bounds,t))return!0},FSe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},MSe=(e,t,n)=>{var r=e.range(),i=new hn;return t===cg||t===dc?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},jI=e=>(e.forEach(t=>t.opacity=1),e),UI=(e,t)=>e.reflow(t.modified()).modifies("opacity");re(MJ,H,{transform(e,t){const n=zI[e.method]||zI.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(jI(i),t=UI(t,e)),t;if(i=i.filter(FSe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=jI(i),t=UI(t,e),o.length>=3&&BI(o,r)){do o=n(o,r);while(o.length>=3&&BI(o,r));o.length<3&&!qe(i).opacity&&(o.length>1&&(qe(o).opacity=0),qe(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=MSe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function OJ(e){H.call(this,null,e)}re(OJ,H,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const fr=new hn;function Bh(e,t,n){return e[t]===n?0:(e[t]=n,1)}function RSe(e){var t=e.items[0].orient;return t===cs||t===ps}function OSe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function DSe(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=OSe(o),u=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=o.title&&i.items[l[2]].items[0],g=i.titlePadding,m=i.bounds,y=p&&XM(p),v=0,b=0,x,S;switch(fr.clear().union(m),m.clear(),(x=l[0])>-1&&m.union(i.items[x].bounds),(x=l[1])>-1&&m.union(i.items[x].bounds),a){case cg:v=f||0,b=-c,S=Math.max(d,Math.min(h,-m.y1)),m.add(0,-S).add(u,0),p&&Bb(e,p,S,g,y,0,-1,m);break;case cs:v=-c,b=f||0,S=Math.max(d,Math.min(h,-m.x1)),m.add(-S,0).add(0,u),p&&Bb(e,p,S,g,y,1,-1,m);break;case ps:v=n+c,b=f||0,S=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(S,u),p&&Bb(e,p,S,g,y,1,1,m);break;case dc:v=f||0,b=r+c,S=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(u,S),p&&Bb(e,p,S,g,0,0,1,m);break;default:v=i.x,b=i.y}return Vl(m.translate(v,b),i),Bh(i,"x",v+s)|Bh(i,"y",b+s)&&(i.bounds=fr,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function Bb(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}a.union(l)}const VI=(e,t)=>Math.floor(Math.min(e,t)),WI=(e,t)=>Math.ceil(Math.max(e,t));function NSe(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===Rk)switch(i.role){case lR:case cR:case uR:break;case wJ:s.rowheaders.push(...o);break;case SJ:s.rowfooters.push(...o);break;case kJ:s.colheaders.push(...o);break;case EJ:s.colfooters.push(...o);break;case CJ:s.rowtitle=o[0];break;case _J:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function LSe(e){return new hn().set(0,0,e.width||0,e.height||0)}function ISe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Lt(e,t,n){const r=ae(e)?e[t]:e;return r??(n!==void 0?n:0)}function HI(e){return e<0?Math.ceil(-e):0}function DJ(e,t,n){var r=!n.nodirty,i=n.bounds===dR?LSe:ISe,o=fr.set(0,0,0,0),s=Lt(n.align,Du),a=Lt(n.align,Nu),l=Lt(n.padding,Du),u=Lt(n.padding,Nu),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,m=Array(d),y=Array(f),v=0,b=Array(d),x=Array(d),S=Array(d),C,w,k,E,A,P,L,M,O,_,T;for(w=0;w<c;++w)p[w]=0;for(w=0;w<f;++w)y[w]=0;for(w=0;w<d;++w)P=t[w],A=S[w]=i(P),P.x=P.x||0,b[w]=0,P.y=P.y||0,x[w]=0,k=w%c,E=~~(w/c),g=Math.max(g,L=Math.ceil(A.x2)),v=Math.max(v,M=Math.ceil(A.y2)),p[k]=Math.max(p[k],L),y[E]=Math.max(y[E],M),h[w]=l+HI(A.x1),m[w]=u+HI(A.y1),r&&e.dirty(t[w]);for(w=0;w<d;++w)w%c===0&&(h[w]=0),w<c&&(m[w]=0);if(s===JA)for(k=1;k<c;++k){for(T=0,w=k;w<d;w+=c)T<h[w]&&(T=h[w]);for(w=k;w<d;w+=c)h[w]=T+p[k-1]}else if(s===Ib){for(T=0,w=0;w<d;++w)w%c&&T<h[w]&&(T=h[w]);for(w=0;w<d;++w)w%c&&(h[w]=T+g)}else for(s=!1,k=1;k<c;++k)for(w=k;w<d;w+=c)h[w]+=p[k-1];if(a===JA)for(E=1;E<f;++E){for(T=0,w=E*c,C=w+c;w<C;++w)T<m[w]&&(T=m[w]);for(w=E*c;w<C;++w)m[w]=T+y[E-1]}else if(a===Ib){for(T=0,w=c;w<d;++w)T<m[w]&&(T=m[w]);for(w=c;w<d;++w)m[w]=T+v}else for(a=!1,E=1;E<f;++E)for(w=E*c,C=w+c;w<C;++w)m[w]+=y[E-1];for(O=0,w=0;w<d;++w)O=h[w]+(w%c?O:0),b[w]+=O-t[w].x;for(k=0;k<c;++k)for(_=0,w=k;w<d;w+=c)_+=m[w],x[w]+=_-t[w].y;if(s&&Lt(n.center,Du)&&f>1)for(w=0;w<d;++w)A=s===Ib?g:p[w%c],O=A-S[w].x2-t[w].x-b[w],O>0&&(b[w]+=O/2);if(a&&Lt(n.center,Nu)&&c!==1)for(w=0;w<d;++w)A=a===Ib?v:y[~~(w/c)],_=A-S[w].y2-t[w].y-x[w],_>0&&(x[w]+=_/2);for(w=0;w<d;++w)o.union(S[w].translate(b[w],x[w]));switch(O=Lt(n.anchor,SSe),_=Lt(n.anchor,CSe),Lt(n.anchor,Du)){case Lr:O-=o.width();break;case QA:O-=o.width()/2}switch(Lt(n.anchor,Nu)){case Lr:_-=o.height();break;case QA:_-=o.height()/2}for(O=Math.round(O),_=Math.round(_),o.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)P=t[w],P.x+=b[w]+=O,P.y+=x[w]+=_,o.union(P.mark.bounds.union(P.bounds.translate(b[w],x[w]))),r&&e.dirty(P);return o}function zSe(e,t,n){var r=NSe(t),i=r.marks,o=n.bounds===dR?BSe:jSe,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,f,d,h,p,g,m;const y=DJ(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=Lt(n.headerBand,Nu,null),c=jb(e,r.rowheaders,i,a,l,-Lt(s,"rowHeader"),VI,0,o,"x1",0,a,1,g)),r.colheaders&&(g=Lt(n.headerBand,Du,null),f=jb(e,r.colheaders,i,a,a,-Lt(s,"columnHeader"),VI,1,o,"y1",0,1,a,g)),r.rowfooters&&(g=Lt(n.footerBand,Nu,null),d=jb(e,r.rowfooters,i,a,l,Lt(s,"rowFooter"),WI,0,o,"x2",a-1,a,1,g)),r.colfooters&&(g=Lt(n.footerBand,Du,null),h=jb(e,r.colfooters,i,a,a,Lt(s,"columnFooter"),WI,1,o,"y2",u-a,1,a,g)),r.rowtitle&&(p=Lt(n.titleAnchor,Nu),m=Lt(s,"rowTitle"),m=p===Lr?d+m:c-m,g=Lt(n.titleBand,Nu,.5),qI(e,r.rowtitle,m,0,y,g)),r.coltitle&&(p=Lt(n.titleAnchor,Du),m=Lt(s,"columnTitle"),m=p===Lr?h+m:f-m,g=Lt(n.titleBand,Du,.5),qI(e,r.coltitle,m,1,y,g))}function BSe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function jSe(e,t){return e.bounds[t]}function jb(e,t,n,r,i,o,s,a,l,u,c,f,d,h){var p=n.length,g=0,m=0,y,v,b,x,S,C,w,k,E;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=s(g,l(n[y],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=o,v=0,x=t.length;v<x;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,x=t.length;v<x;++v,y+=f){for(C=t[v],S=C.mark.bounds,b=y;b>=0&&(w=n[b])==null;b-=d);a?(k=h==null?w.x:Math.round(w.bounds.x1+h*w.bounds.width()),E=g):(k=g,E=h==null?w.y:Math.round(w.bounds.y1+h*w.bounds.height())),S.union(C.bounds.translate(k-(C.x||0),E-(C.y||0))),C.x=k,C.y=E,e.dirty(C),m=s(m,S[u])}return m}function qI(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function USe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function VSe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function WSe(e,t,n,r,i,o,s){const a=USe(n,t),l=VSe(e,a("offset",0)),u=a("anchor",aR),c=u===Lr?1:u===QA?.5:0,f={align:JA,bounds:a("bounds",dR),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case cs:f.anchor={x:Math.floor(r.x1)-l,column:Lr,y:c*(s||r.height()+2*r.y1),row:u};break;case ps:f.anchor={x:Math.ceil(r.x2)+l,y:c*(s||r.height()+2*r.y1),row:u};break;case cg:f.anchor={y:Math.floor(i.y1)-l,row:Lr,x:c*(o||i.width()+2*i.x1),column:u};break;case dc:f.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case vSe:f.anchor={x:l,y:l};break;case bSe:f.anchor={x:o-l,y:l,column:Lr};break;case xSe:f.anchor={x:l,y:s-l,row:Lr};break;case wSe:f.anchor={x:o-l,y:s-l,column:Lr,row:Lr};break}return f}function HSe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),GSe(e,n,n.items[0].items[0]),o=qSe(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===$Se&&YSe(n.items[0].items[0].items[0].items),i!==fR&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,Vl(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function qSe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function GSe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&Vm(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,c=r-s.y;switch(s.orient){case cs:i+=Math.ceil(s.bounds.width())+l;break;case ps:case dc:break;default:o+=s.bounds.height()+l}switch((i||o)&&Vm(e,n,i,o),s.orient){case cs:c+=yh(t,n,s,a,1,1);break;case ps:u+=yh(t,n,s,Lr,0,0)+l,c+=yh(t,n,s,a,1,1);break;case dc:u+=yh(t,n,s,a,0,0),c+=yh(t,n,s,Lr,-1,0,1)+l;break;default:u+=yh(t,n,s,a,0,0)}(u||c)&&Vm(e,s,u,c),(u=Math.round(s.bounds.x1-r))<0&&(Vm(e,n,-u,0),Vm(e,s,-u,0))}}function yh(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,f=l&&o?c:0,d=l&&o?0:c,h=i<=0?0:XM(n);return Math.round(r===aR?f:r===Lr?d-h:.5*(c-h))}function Vm(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function YSe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function XSe(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===cs||a===ps?r:n,p=0,g=0,m=0,y=0,v=0,b;if(s!==Rk?a===cs?(p=i.y2,h=i.y1):a===ps?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===cs&&(p=r,h=0),b=l===aR?p:l===Lr?h:(p+h)/2,d&&d.text){switch(a){case cg:case dc:v=f.bounds.height()+c;break;case cs:y=f.bounds.width()+c;break;case ps:y=-f.bounds.width()-c;break}fr.clear().union(d.bounds),fr.translate(y-(d.x||0),v-(d.y||0)),Bh(d,"x",y)|Bh(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(fr),d.mark.bounds.clear().union(fr),e.dirty(d)),fr.clear().union(d.bounds)}else fr.clear();switch(fr.union(f.bounds),a){case cg:g=b,m=i.y1-fr.height()-u;break;case cs:g=i.x1-fr.width()-u,m=b;break;case ps:g=i.x2+fr.width()+u,m=b;break;case dc:g=b,m=i.y2+u;break;default:g=o.x,m=o.y}return Bh(o,"x",g)|Bh(o,"y",m)&&(fr.translate(g,m),e.dirty(o),o.bounds.clear().union(fr),t.bounds.clear().union(fr),e.dirty(o)),o.bounds}function NJ(e){H.call(this,null,e)}re(NJ,H,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&zSe(n,r,e.layout),QSe(n,r,e)}),KSe(e.mark.group)?t.reflow():t}});function KSe(e){return e&&e.mark.role!=="legend-entry"}function QSe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new hn().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case lR:h=RSe(f)?a:l,h.union(DSe(e,f,i,o));break;case uR:c=f;break;case cR:u.push(HSe(e,f));break;case kSe:case ESe:case wJ:case SJ:case CJ:case kJ:case EJ:case _J:a.union(f.bounds),l.union(f.bounds);break;default:s.union(f.bounds)}if(u.length){const m={};u.forEach(y=>{d=y.orient||ps,d!==fR&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];DJ(e,v,WSe(v,y,n.legends,a,l,i,o))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===$J||n.autosize.type===AJ||n.autosize.type===TJ))switch(y.orient){case cs:case ps:s.add(v.x1,0).add(v.x2,0);break;case cg:case dc:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(l),c&&s.union(XSe(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),JSe(e,t,s,n)}function JSe(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===_Se){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===fR?(u=0,f=0,l=s,c=a):o===$J?(l=Math.max(0,s-u-d),c=Math.max(0,a-f-h)):o===AJ?(l=Math.max(0,s-u-d),a=c+f+h):o===TJ?(s=l+u+d,c=Math.max(0,a-f-h)):o===ASe&&(s=l+u+d,a=c+f+h),e._resizeView(s,a,l,c,[u,f],i.resize)}const ZSe=Object.freeze(Object.defineProperty({__proto__:null,bound:PJ,identifier:hR,mark:FJ,overlap:MJ,render:OJ,viewlayout:NJ},Symbol.toStringTag,{value:"Module"}));function LJ(e){H.call(this,null,e)}re(LJ,H,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=FM(o,s,e.minstep),l=e.format||cQ(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?uQ(o,e.values,a):MM(o,a);return i&&(r.rem=i),i=u.map((c,f)=>at({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(at({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function IJ(e){H.call(this,null,e)}function eCe(){return at({})}function tCe(e){const t=im().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}re(IJ,H,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||eCe,o=e.key||be,s=this.value;return Y(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&G("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=tCe(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function zJ(e){H.call(this,null,e)}re(zJ,H,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(Y(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||au,l=i.enter||au,u=i.exit||au,c=(o&&!s?i[o]:a)||au;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),a(f,e)}),n.modifies(l.output),n.modifies(a.output),c!==au&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==au&&(t.visit(t.REM,f=>{u(f,e)}),n.modifies(u.output)),s||c!==au){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=l(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function BJ(e){H.call(this,[],e)}re(BJ,H,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||n2,s=e.scale,a=+e.limit,l=FM(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===n2,c=e.format||pQ(n,s,l,o,e.formatSpecifier,e.formatType,u),f=e.values||hQ(s,l),d,h,p,g,m;return i&&(r.rem=i),o===n2?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,De(p=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Er(g=p||8),i=i.map((y,v)=>at({index:v,label:c(y,v,i),value:y,offset:g,size:p(y,e)})),m&&(m=f[i.length],i.push(at({index:i.length,label:`${f.length-i.length} entries`,value:m,offset:g,size:p(m,e)})))):o===Axe?(d=s.domain(),h=sQ(s,d[0],qe(d)),f.length<3&&!e.values&&d[0]!==qe(d)&&(f=[d[0],qe(d)]),i=f.map((y,v)=>at({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=zxe(s),i=f.map((y,v)=>at({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const nCe=e=>e.source.x,rCe=e=>e.source.y,iCe=e=>e.target.x,oCe=e=>e.target.y;function pR(e){H.call(this,{},e)}pR.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};re(pR,H,{transform(e,t){var n=e.sourceX||nCe,r=e.sourceY||rCe,i=e.targetX||iCe,o=e.targetY||oCe,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=GI.get(l+"-"+a)||GI.get(l);return u||G("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const jJ=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,sCe=(e,t,n,r)=>jJ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),UJ=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},aCe=(e,t,n,r)=>UJ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),VJ=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},lCe=(e,t,n,r)=>VJ(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),uCe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,cCe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,fCe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},dCe=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},hCe=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},pCe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},GI=im({line:jJ,"line-radial":sCe,arc:UJ,"arc-radial":aCe,curve:VJ,"curve-radial":lCe,"orthogonal-horizontal":uCe,"orthogonal-vertical":cCe,"orthogonal-radial":fCe,"diagonal-horizontal":dCe,"diagonal-vertical":hCe,"diagonal-radial":pCe});function gR(e){H.call(this,null,e)}gR.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};re(gR,H,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||tm,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,f=s,d=(a-s)/QG(u),h=Bi(c),p,g,m;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),p=0;p<c;++p)m=u[h[p]],g=l[h[p]],g[r]=f,g[i]=f+=m*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const gCe=5;function mCe(e){const t=e.type;return!e.bins&&(t===ig||t===vv||t===bv)}function WJ(e){return AM(e)&&e!==va}const yCe=ks(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function HJ(e){H.call(this,null,e),this.modified(!0)}re(HJ,H,{transform(e,t){var n=t.dataflow,r=this.value,i=vCe(e);(!r||i!==r.type)&&(this.value=r=et(i)());for(i in e)if(!yCe[i]){if(i==="padding"&&WJ(r.type))continue;De(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return kCe(r,e,CCe(r,e,xCe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function vCe(e){var t=e.type,n="",r;return t===va?va+"-"+ig:(bCe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?va+"-":r===3?fm+"-":""),(n+t||ig).toLowerCase())}function bCe(e){const t=e.type;return AM(t)&&t!==ud&&t!==cd&&(e.scheme||e.range&&e.range.length&&e.range.every(ue))}function xCe(e,t,n){const r=wCe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&mCe(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return WJ(o)&&t.padding&&i[0]!==qe(i)&&(i=SCe(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(qJ(o,i,n)),o===kM&&e.unknown(t.domainImplicit?MA:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&FM(e,t.nice)||null),i.length}function wCe(e,t,n){return t?(e.domain(qJ(e.type,t,n)),t.length):-1}function SCe(e,t,n,r,i,o){var s=Math.abs(qe(n)-n[0]),a=s/(s-2*r),l=e===Rl?HF(t,null,a):e===bv?uw(t,null,a,.5):e===vv?uw(t,null,a,i||1):e===vk?qF(t,null,a,o||1):WF(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function qJ(e,t,n){if(tQ(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ne(t))}return t}function CCe(e,t,n){let r=t.bins;if(r&&!Y(r)){const i=e.domain(),o=i[0],s=qe(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||G("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=Bi(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===EM&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function kCe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=ECe(r,t,n);else if(t.scheme&&(o=_Ce(r,t,n),De(o))){if(e.interpolator)return e.interpolator(o);G(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&nQ(r))return e.interpolator(wk(ZA(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(TM(t.interpolate,t.interpolateGamma)):De(e.round)?e.round(i):De(e.rangeRound)&&e.interpolate(i?cm:Tc),o&&e.range(ZA(o,t.reverse))}function ECe(e,t,n){e!==XK&&e!==IA&&G("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===IA?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*CM(n,i,r)]}function _Ce(e,t,n){var r=t.schemeExtent,i,o;return Y(t.scheme)?o=wk(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=PM(i),o||G(`Unrecognized scheme name: ${t.scheme}`)),n=e===xk?n+1:e===EM?n-1:e===og||e===bk?+t.schemeCount||gCe:n,nQ(e)?YI(o,r,t.reverse):De(o)?oQ(YI(o,r),n):e===kM?o:o.slice(0,n)}function YI(e,t,n){return De(e)&&(t||n)?iQ(e,ZA(t||[0,1],n)):e}function ZA(e,t){return t?e.slice().reverse():e}function GJ(e){H.call(this,null,e)}re(GJ,H,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(jd(e.sort)),this.modified(n),t}});const XI="zero",YJ="center",XJ="normalize",KJ=["y0","y1"];function mR(e){H.call(this,null,e)}mR.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:XI,values:[XI,YJ,XJ]},{name:"as",type:"string",array:!0,length:2,default:KJ}]};re(mR,H,{transform(e,t){var n=e.as||KJ,r=n[0],i=n[1],o=jd(e.sort),s=e.field||tm,a=e.offset===YJ?$Ce:e.offset===XJ?ACe:TCe,l,u,c,f;for(l=PCe(t.source,e.groupby,o,s),u=0,c=l.length,f=l.max;u<c;++u)a(l[u],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function $Ce(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function ACe(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=s,c[i]=s=o*(u+=Math.abs(n(c)))}function TCe(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=s,c[i]=s+=u):(c[r]=o,c[i]=o+=u)}function PCe(e,t,n,r){var i=[],o=g=>g(c),s,a,l,u,c,f,d,h,p;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,u=i.length;f<u;++f){for(d=i[f],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const FCe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:LJ,datajoin:IJ,encode:zJ,legendentries:BJ,linkpath:pR,pie:gR,scale:HJ,sortitems:GJ,stack:mR},Symbol.toStringTag,{value:"Module"}));var we=1e-6,jw=1e-12,Le=Math.PI,Jt=Le/2,Uw=Le/4,Kr=Le*2,tn=180/Le,Ne=Le/180,He=Math.abs,hm=Math.atan,Io=Math.atan2,Ce=Math.cos,Ub=Math.ceil,QJ=Math.exp,eT=Math.hypot,Vw=Math.log,B$=Math.pow,xe=Math.sin,_o=Math.sign||function(e){return e>0?1:e<0?-1:0},Qr=Math.sqrt,yR=Math.tan;function JJ(e){return e>1?0:e<-1?Le:Math.acos(e)}function wi(e){return e>1?Jt:e<-1?-Jt:Math.asin(e)}function Kn(){}function Ww(e,t){e&&QI.hasOwnProperty(e.type)&&QI[e.type](e,t)}var KI={Feature:function(e,t){Ww(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Ww(n[r].geometry,t)}},QI={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){tT(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)tT(n[r],t,0)},Polygon:function(e,t){JI(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)JI(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Ww(n[r],t)}};function tT(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function JI(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)tT(e[n],t,1);t.polygonEnd()}function sl(e,t){e&&KI.hasOwnProperty(e.type)?KI[e.type](e,t):Ww(e,t)}var Hw=new qr,qw=new qr,ZJ,eZ,nT,rT,iT,Ta={point:Kn,lineStart:Kn,lineEnd:Kn,polygonStart:function(){Hw=new qr,Ta.lineStart=MCe,Ta.lineEnd=RCe},polygonEnd:function(){var e=+Hw;qw.add(e<0?Kr+e:e),this.lineStart=this.lineEnd=this.point=Kn},sphere:function(){qw.add(Kr)}};function MCe(){Ta.point=OCe}function RCe(){tZ(ZJ,eZ)}function OCe(e,t){Ta.point=tZ,ZJ=e,eZ=t,e*=Ne,t*=Ne,nT=e,rT=Ce(t=t/2+Uw),iT=xe(t)}function tZ(e,t){e*=Ne,t*=Ne,t=t/2+Uw;var n=e-nT,r=n>=0?1:-1,i=r*n,o=Ce(t),s=xe(t),a=iT*s,l=rT*o+a*Ce(i),u=a*r*xe(i);Hw.add(Io(u,l)),nT=e,rT=o,iT=s}function DCe(e){return qw=new qr,sl(e,Ta),qw*2}function Gw(e){return[Io(e[1],e[0]),wi(e[2])]}function dd(e){var t=e[0],n=e[1],r=Ce(n);return[r*Ce(t),r*xe(t),xe(n)]}function Vb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function fg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function j$(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Wb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Yw(e){var t=Qr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var jt,ai,Xt,Oi,uf,nZ,rZ,gp,fy,pu,Ol,rl={point:oT,lineStart:ZI,lineEnd:e7,polygonStart:function(){rl.point=oZ,rl.lineStart=NCe,rl.lineEnd=LCe,fy=new qr,Ta.polygonStart()},polygonEnd:function(){Ta.polygonEnd(),rl.point=oT,rl.lineStart=ZI,rl.lineEnd=e7,Hw<0?(jt=-(Xt=180),ai=-(Oi=90)):fy>we?Oi=90:fy<-we&&(ai=-90),Ol[0]=jt,Ol[1]=Xt},sphere:function(){jt=-(Xt=180),ai=-(Oi=90)}};function oT(e,t){pu.push(Ol=[jt=e,Xt=e]),t<ai&&(ai=t),t>Oi&&(Oi=t)}function iZ(e,t){var n=dd([e*Ne,t*Ne]);if(gp){var r=fg(gp,n),i=[r[1],-r[0],0],o=fg(i,r);Yw(o),o=Gw(o);var s=e-uf,a=s>0?1:-1,l=o[0]*tn*a,u,c=He(s)>180;c^(a*uf<l&&l<a*e)?(u=o[1]*tn,u>Oi&&(Oi=u)):(l=(l+360)%360-180,c^(a*uf<l&&l<a*e)?(u=-o[1]*tn,u<ai&&(ai=u)):(t<ai&&(ai=t),t>Oi&&(Oi=t))),c?e<uf?Mi(jt,e)>Mi(jt,Xt)&&(Xt=e):Mi(e,Xt)>Mi(jt,Xt)&&(jt=e):Xt>=jt?(e<jt&&(jt=e),e>Xt&&(Xt=e)):e>uf?Mi(jt,e)>Mi(jt,Xt)&&(Xt=e):Mi(e,Xt)>Mi(jt,Xt)&&(jt=e)}else pu.push(Ol=[jt=e,Xt=e]);t<ai&&(ai=t),t>Oi&&(Oi=t),gp=n,uf=e}function ZI(){rl.point=iZ}function e7(){Ol[0]=jt,Ol[1]=Xt,rl.point=oT,gp=null}function oZ(e,t){if(gp){var n=e-uf;fy.add(He(n)>180?n+(n>0?360:-360):n)}else nZ=e,rZ=t;Ta.point(e,t),iZ(e,t)}function NCe(){Ta.lineStart()}function LCe(){oZ(nZ,rZ),Ta.lineEnd(),He(fy)>we&&(jt=-(Xt=180)),Ol[0]=jt,Ol[1]=Xt,gp=null}function Mi(e,t){return(t-=e)<0?t+360:t}function ICe(e,t){return e[0]-t[0]}function t7(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function zCe(e){var t,n,r,i,o,s,a;if(Oi=Xt=-(jt=ai=1/0),pu=[],sl(e,rl),n=pu.length){for(pu.sort(ICe),t=1,r=pu[0],o=[r];t<n;++t)i=pu[t],t7(r,i[0])||t7(r,i[1])?(Mi(r[0],i[1])>Mi(r[0],r[1])&&(r[1]=i[1]),Mi(i[0],r[1])>Mi(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Mi(r[1],i[0]))>s&&(s=a,jt=i[0],Xt=r[1])}return pu=Ol=null,jt===1/0||ai===1/0?[[NaN,NaN],[NaN,NaN]]:[[jt,ai],[Xt,Oi]]}var M0,Xw,Kw,Qw,Jw,Zw,eS,tS,sT,aT,lT,sZ,aZ,zr,Br,jr,gs={sphere:Kn,point:vR,lineStart:n7,lineEnd:r7,polygonStart:function(){gs.lineStart=UCe,gs.lineEnd=VCe},polygonEnd:function(){gs.lineStart=n7,gs.lineEnd=r7}};function vR(e,t){e*=Ne,t*=Ne;var n=Ce(t);Fv(n*Ce(e),n*xe(e),xe(t))}function Fv(e,t,n){++M0,Kw+=(e-Kw)/M0,Qw+=(t-Qw)/M0,Jw+=(n-Jw)/M0}function n7(){gs.point=BCe}function BCe(e,t){e*=Ne,t*=Ne;var n=Ce(t);zr=n*Ce(e),Br=n*xe(e),jr=xe(t),gs.point=jCe,Fv(zr,Br,jr)}function jCe(e,t){e*=Ne,t*=Ne;var n=Ce(t),r=n*Ce(e),i=n*xe(e),o=xe(t),s=Io(Qr((s=Br*o-jr*i)*s+(s=jr*r-zr*o)*s+(s=zr*i-Br*r)*s),zr*r+Br*i+jr*o);Xw+=s,Zw+=s*(zr+(zr=r)),eS+=s*(Br+(Br=i)),tS+=s*(jr+(jr=o)),Fv(zr,Br,jr)}function r7(){gs.point=vR}function UCe(){gs.point=WCe}function VCe(){lZ(sZ,aZ),gs.point=vR}function WCe(e,t){sZ=e,aZ=t,e*=Ne,t*=Ne,gs.point=lZ;var n=Ce(t);zr=n*Ce(e),Br=n*xe(e),jr=xe(t),Fv(zr,Br,jr)}function lZ(e,t){e*=Ne,t*=Ne;var n=Ce(t),r=n*Ce(e),i=n*xe(e),o=xe(t),s=Br*o-jr*i,a=jr*r-zr*o,l=zr*i-Br*r,u=eT(s,a,l),c=wi(u),f=u&&-c/u;sT.add(f*s),aT.add(f*a),lT.add(f*l),Xw+=c,Zw+=c*(zr+(zr=r)),eS+=c*(Br+(Br=i)),tS+=c*(jr+(jr=o)),Fv(zr,Br,jr)}function HCe(e){M0=Xw=Kw=Qw=Jw=Zw=eS=tS=0,sT=new qr,aT=new qr,lT=new qr,sl(e,gs);var t=+sT,n=+aT,r=+lT,i=eT(t,n,r);return i<jw&&(t=Zw,n=eS,r=tS,Xw<we&&(t=Kw,n=Qw,r=Jw),i=eT(t,n,r),i<jw)?[NaN,NaN]:[Io(n,t)*tn,wi(r/i)*tn]}function uT(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function cT(e,t){return He(e)>Le&&(e-=Math.round(e/Kr)*Kr),[e,t]}cT.invert=cT;function uZ(e,t,n){return(e%=Kr)?t||n?uT(o7(e),s7(t,n)):o7(e):t||n?s7(t,n):cT}function i7(e){return function(t,n){return t+=e,He(t)>Le&&(t-=Math.round(t/Kr)*Kr),[t,n]}}function o7(e){var t=i7(e);return t.invert=i7(-e),t}function s7(e,t){var n=Ce(e),r=xe(e),i=Ce(t),o=xe(t);function s(a,l){var u=Ce(l),c=Ce(a)*u,f=xe(a)*u,d=xe(l),h=d*n+c*r;return[Io(f*i-h*o,c*n-d*r),wi(h*i+f*o)]}return s.invert=function(a,l){var u=Ce(l),c=Ce(a)*u,f=xe(a)*u,d=xe(l),h=d*i-f*o;return[Io(f*i+d*o,c*n+h*r),wi(h*n-c*r)]},s}function qCe(e){e=uZ(e[0]*Ne,e[1]*Ne,e.length>2?e[2]*Ne:0);function t(n){return n=e(n[0]*Ne,n[1]*Ne),n[0]*=tn,n[1]*=tn,n}return t.invert=function(n){return n=e.invert(n[0]*Ne,n[1]*Ne),n[0]*=tn,n[1]*=tn,n},t}function GCe(e,t,n,r,i,o){if(n){var s=Ce(t),a=xe(t),l=r*n;i==null?(i=t+r*Kr,o=t-l/2):(i=a7(s,i),o=a7(s,o),(r>0?i<o:i>o)&&(i+=r*Kr));for(var u,c=i;r>0?c>o:c<o;c-=l)u=Gw([s,-a*Ce(c),-a*xe(c)]),e.point(u[0],u[1])}}function a7(e,t){t=dd(t),t[0]-=e,Yw(t);var n=JJ(-t[1]);return((-t[2]<0?-n:n)+Kr-we)%Kr}function cZ(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Kn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function f2(e,t){return He(e[0]-t[0])<we&&He(e[1]-t[1])<we}function Hb(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function fZ(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],v;if(f2(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((m=p[a])[0],m[1]);i.lineEnd();return}y[0]+=2*we}o.push(v=new Hb(m,p,null,!0)),s.push(v.o=new Hb(m,null,v,!1)),o.push(v=new Hb(y,p,null,!1)),s.push(v.o=new Hb(y,null,v,!0))}}),!!o.length){for(s.sort(t),l7(o),l7(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function l7(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function U$(e){return He(e[0])<=Le?e[0]:_o(e[0])*((He(e[0])+Le)%Kr-Le)}function YCe(e,t){var n=U$(t),r=t[1],i=xe(r),o=[xe(n),-Ce(n),0],s=0,a=0,l=new qr;i===1?r=Jt+we:i===-1&&(r=-Jt-we);for(var u=0,c=e.length;u<c;++u)if(d=(f=e[u]).length)for(var f,d,h=f[d-1],p=U$(h),g=h[1]/2+Uw,m=xe(g),y=Ce(g),v=0;v<d;++v,p=x,m=C,y=w,h=b){var b=f[v],x=U$(b),S=b[1]/2+Uw,C=xe(S),w=Ce(S),k=x-p,E=k>=0?1:-1,A=E*k,P=A>Le,L=m*C;if(l.add(Io(L*E*xe(A),y*w+L*Ce(A))),s+=P?k+E*Kr:k,P^p>=n^x>=n){var M=fg(dd(h),dd(b));Yw(M);var O=fg(o,M);Yw(O);var _=(P^k>=0?-1:1)*wi(O[2]);(r>_||r===_&&(M[0]||M[1]))&&(a+=P^k>=0?1:-1)}}return(s<-we||s<we&&l<-jw)^a&1}function dZ(e,t,n,r){return function(i){var o=t(i),s=cZ(),a=t(s),l=!1,u,c,f,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=KG(c);var x=YCe(u,r);c.length?(l||(i.polygonStart(),l=!0),fZ(c,KCe,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,S){e(x,S)&&i.point(x,S)}function p(x,S){o.point(x,S)}function g(){d.point=p,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(x,S){f.push([x,S]),a.point(x,S)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),S=s.result(),C,w=S.length,k,E,A;if(f.pop(),u.push(f),f=null,!!w){if(x&1){if(E=S[0],(k=E.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),C=0;C<k;++C)i.point((A=E[C])[0],A[1]);i.lineEnd()}return}w>1&&x&2&&S.push(S.pop().concat(S.shift())),c.push(S.filter(XCe))}}return d}}function XCe(e){return e.length>1}function KCe(e,t){return((e=e.x)[0]<0?e[1]-Jt-we:Jt-e[1])-((t=t.x)[0]<0?t[1]-Jt-we:Jt-t[1])}const u7=dZ(function(){return!0},QCe,ZCe,[-Le,-Jt]);function QCe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Le:-Le,l=He(o-t);He(l-Le)<we?(e.point(t,n=(n+s)/2>0?Jt:-Jt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=Le&&(He(t-r)<we&&(t-=r*we),He(o-a)<we&&(o-=a*we),n=JCe(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function JCe(e,t,n,r){var i,o,s=xe(e-n);return He(s)>we?hm((xe(t)*(o=Ce(r))*xe(n)-xe(r)*(i=Ce(t))*xe(e))/(i*o*s)):(t+r)/2}function ZCe(e,t,n,r){var i;if(e==null)i=n*Jt,r.point(-Le,i),r.point(0,i),r.point(Le,i),r.point(Le,0),r.point(Le,-i),r.point(0,-i),r.point(-Le,-i),r.point(-Le,0),r.point(-Le,i);else if(He(e[0]-t[0])>we){var o=e[0]<t[0]?Le:-Le;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function eke(e){var t=Ce(e),n=2*Ne,r=t>0,i=He(t)>we;function o(c,f,d,h){GCe(h,e,n,d,c,f)}function s(c,f){return Ce(c)*Ce(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var v=[m,y],b,x=s(m,y),S=r?x?0:u(m,y):x?u(m+(m<0?Le:-Le),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=l(f,v),(!b||f2(f,b)||f2(v,b))&&(v[2]=1)),x!==h)g=0,x?(c.lineStart(),b=l(v,f),c.point(b[0],b[1])):(b=l(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var C;!(S&d)&&(C=l(v,f,!0))&&(g=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}x&&(!f||!f2(f,v))&&c.point(v[0],v[1]),f=v,h=x,d=S},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(c,f,d){var h=dd(c),p=dd(f),g=[1,0,0],m=fg(h,p),y=Vb(m,m),v=m[0],b=y-v*v;if(!b)return!d&&c;var x=t*y/b,S=-t*v/b,C=fg(g,m),w=Wb(g,x),k=Wb(m,S);j$(w,k);var E=C,A=Vb(w,E),P=Vb(E,E),L=A*A-P*(Vb(w,w)-1);if(!(L<0)){var M=Qr(L),O=Wb(E,(-A-M)/P);if(j$(O,w),O=Gw(O),!d)return O;var _=c[0],T=f[0],N=c[1],D=f[1],I;T<_&&(I=_,_=T,T=I);var U=T-_,V=He(U-Le)<we,se=V||U<we;if(!V&&D<N&&(I=N,N=D,D=I),se?V?N+D>0^O[1]<(He(O[0]-_)<we?N:D):N<=O[1]&&O[1]<=D:U>Le^(_<=O[0]&&O[0]<=T)){var Q=Wb(E,(-A+M)/P);return j$(Q,w),[O,Gw(Q)]}}}function u(c,f){var d=r?e:Le-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return dZ(s,a,o,r?[0,-e]:[-Le,e-Le])}function tke(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],c=0,f=1,d=l-s,h=u-a,p;if(p=n-s,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=o-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var R0=1e9,qb=-R0;function hZ(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function o(u,c,f,d){var h=0,p=0;if(u==null||(h=s(u,f))!==(p=s(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function s(u,c){return He(u[0]-e)<we?c>0?0:3:He(u[0]-n)<we?c>0?2:1:He(u[1]-t)<we?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=s(u,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=cZ(),d,h,p,g,m,y,v,b,x,S,C,w={point:k,lineStart:L,lineEnd:M,polygonStart:A,polygonEnd:P};function k(_,T){i(_,T)&&c.point(_,T)}function E(){for(var _=0,T=0,N=h.length;T<N;++T)for(var D=h[T],I=1,U=D.length,V=D[0],se,Q,ye=V[0],Re=V[1];I<U;++I)se=ye,Q=Re,V=D[I],ye=V[0],Re=V[1],Q<=r?Re>r&&(ye-se)*(r-Q)>(Re-Q)*(e-se)&&++_:Re<=r&&(ye-se)*(r-Q)<(Re-Q)*(e-se)&&--_;return _}function A(){c=f,d=[],h=[],C=!0}function P(){var _=E(),T=C&&_,N=(d=KG(d)).length;(T||N)&&(u.polygonStart(),T&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),N&&fZ(d,a,_,o,u),u.polygonEnd()),c=u,d=h=p=null}function L(){w.point=O,h&&h.push(p=[]),S=!0,x=!1,v=b=NaN}function M(){d&&(O(g,m),y&&x&&f.rejoin(),d.push(f.result())),w.point=k,x&&c.lineEnd()}function O(_,T){var N=i(_,T);if(h&&p.push([_,T]),S)g=_,m=T,y=N,S=!1,N&&(c.lineStart(),c.point(_,T));else if(N&&x)c.point(_,T);else{var D=[v=Math.max(qb,Math.min(R0,v)),b=Math.max(qb,Math.min(R0,b))],I=[_=Math.max(qb,Math.min(R0,_)),T=Math.max(qb,Math.min(R0,T))];tke(D,I,e,t,n,r)?(x||(c.lineStart(),c.point(D[0],D[1])),c.point(I[0],I[1]),N||c.lineEnd(),C=!1):N&&(c.lineStart(),c.point(_,T),C=!1)}v=_,b=T,x=N}return w}}function c7(e,t,n){var r=Bi(e,t-we,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function f7(e,t,n){var r=Bi(e,t-we,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function nke(){var e,t,n,r,i,o,s,a,l=10,u=l,c=90,f=360,d,h,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Bi(Ub(r/c)*c,n,c).map(p).concat(Bi(Ub(a/f)*f,s,f).map(g)).concat(Bi(Ub(t/l)*l,e,l).filter(function(b){return He(b%c)>we}).map(d)).concat(Bi(Ub(o/u)*u,i,u).filter(function(b){return He(b%f)>we}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(s).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],s=+b[1][1],r>n&&(b=r,r=n,n=b),a>s&&(b=a,a=s,s=b),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],o=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),o>i&&(b=o,o=i,i=b),y.precision(m)):[[t,o],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],u=+b[1],y):[l,u]},y.precision=function(b){return arguments.length?(m=+b,d=c7(o,i,90),h=f7(t,e,m),p=c7(a,s,90),g=f7(r,n,m),y):m},y.extentMajor([[-180,-90+we],[180,90-we]]).extentMinor([[-180,-80-we],[180,80+we]])}const e1=e=>e;var V$=new qr,fT=new qr,pZ,gZ,dT,hT,al={point:Kn,lineStart:Kn,lineEnd:Kn,polygonStart:function(){al.lineStart=rke,al.lineEnd=oke},polygonEnd:function(){al.lineStart=al.lineEnd=al.point=Kn,V$.add(He(fT)),fT=new qr},result:function(){var e=V$/2;return V$=new qr,e}};function rke(){al.point=ike}function ike(e,t){al.point=mZ,pZ=dT=e,gZ=hT=t}function mZ(e,t){fT.add(hT*e-dT*t),dT=e,hT=t}function oke(){mZ(pZ,gZ)}var dg=1/0,nS=dg,t1=-dg,rS=t1,iS={point:ske,lineStart:Kn,lineEnd:Kn,polygonStart:Kn,polygonEnd:Kn,result:function(){var e=[[dg,nS],[t1,rS]];return t1=rS=-(nS=dg=1/0),e}};function ske(e,t){e<dg&&(dg=e),e>t1&&(t1=e),t<nS&&(nS=t),t>rS&&(rS=t)}var pT=0,gT=0,O0=0,oS=0,sS=0,jh=0,mT=0,yT=0,D0=0,yZ,vZ,aa,la,ko={point:hd,lineStart:d7,lineEnd:h7,polygonStart:function(){ko.lineStart=uke,ko.lineEnd=cke},polygonEnd:function(){ko.point=hd,ko.lineStart=d7,ko.lineEnd=h7},result:function(){var e=D0?[mT/D0,yT/D0]:jh?[oS/jh,sS/jh]:O0?[pT/O0,gT/O0]:[NaN,NaN];return pT=gT=O0=oS=sS=jh=mT=yT=D0=0,e}};function hd(e,t){pT+=e,gT+=t,++O0}function d7(){ko.point=ake}function ake(e,t){ko.point=lke,hd(aa=e,la=t)}function lke(e,t){var n=e-aa,r=t-la,i=Qr(n*n+r*r);oS+=i*(aa+e)/2,sS+=i*(la+t)/2,jh+=i,hd(aa=e,la=t)}function h7(){ko.point=hd}function uke(){ko.point=fke}function cke(){bZ(yZ,vZ)}function fke(e,t){ko.point=bZ,hd(yZ=aa=e,vZ=la=t)}function bZ(e,t){var n=e-aa,r=t-la,i=Qr(n*n+r*r);oS+=i*(aa+e)/2,sS+=i*(la+t)/2,jh+=i,i=la*e-aa*t,mT+=i*(aa+e),yT+=i*(la+t),D0+=i*3,hd(aa=e,la=t)}function xZ(e){this._context=e}xZ.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Kr);break}}},result:Kn};var vT=new qr,W$,wZ,SZ,N0,L0,n1={point:Kn,lineStart:function(){n1.point=dke},lineEnd:function(){W$&&CZ(wZ,SZ),n1.point=Kn},polygonStart:function(){W$=!0},polygonEnd:function(){W$=null},result:function(){var e=+vT;return vT=new qr,e}};function dke(e,t){n1.point=CZ,wZ=N0=e,SZ=L0=t}function CZ(e,t){N0-=e,L0-=t,vT.add(Qr(N0*N0+L0*L0)),N0=e,L0=t}let p7,aS,g7,m7;class y7{constructor(t){this._append=t==null?kZ:hke(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==g7||this._append!==aS){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,g7=r,aS=this._append,m7=this._,this._=i}this._+=m7;break}}}result(){const t=this._;return this._="",t.length?t:null}}function kZ(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hke(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return kZ;if(t!==p7){const n=10**t;p7=t,aS=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return aS}function EZ(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),sl(a,i(o))),o.result()}return s.area=function(a){return sl(a,i(al)),al.result()},s.measure=function(a){return sl(a,i(n1)),n1.result()},s.bounds=function(a){return sl(a,i(iS)),iS.result()},s.centroid=function(a){return sl(a,i(ko)),ko.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,e1):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new y7(n)):new xZ(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new y7(n)),s},s.projection(e).digits(n).context(t)}function Ok(e){return function(t){var n=new bT;for(var r in e)n[r]=e[r];return n.stream=t,n}}function bT(){}bT.prototype={constructor:bT,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function bR(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),sl(n,e.stream(iS)),t(iS.result()),r!=null&&e.clipExtent(r),e}function Dk(e,t,n){return bR(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function xR(e,t,n){return Dk(e,[[0,0],t],n)}function wR(e,t,n){return bR(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function SR(e,t,n){return bR(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var v7=16,pke=Ce(30*Ne);function b7(e,t){return+t?mke(e,t):gke(e)}function gke(e){return Ok({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function mke(e,t){function n(r,i,o,s,a,l,u,c,f,d,h,p,g,m){var y=u-r,v=c-i,b=y*y+v*v;if(b>4*t&&g--){var x=s+d,S=a+h,C=l+p,w=Qr(x*x+S*S+C*C),k=wi(C/=w),E=He(He(C)-1)<we||He(o-f)<we?(o+f)/2:Io(S,x),A=e(E,k),P=A[0],L=A[1],M=P-r,O=L-i,_=v*M-y*O;(_*_/b>t||He((y*M+v*O)/b-.5)>.3||s*d+a*h+l*p<pke)&&(n(r,i,o,s,a,l,P,L,E,x/=w,S/=w,C,g,m),m.point(P,L),n(P,L,E,x,S,C,u,c,f,d,h,p,g,m))}}return function(r){var i,o,s,a,l,u,c,f,d,h,p,g,m={point:y,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),m.lineStart=S},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(k,E){k=e(k,E),r.point(k[0],k[1])}function v(){f=NaN,m.point=b,r.lineStart()}function b(k,E){var A=dd([k,E]),P=e(k,E);n(f,d,c,h,p,g,f=P[0],d=P[1],c=k,h=A[0],p=A[1],g=A[2],v7,r),r.point(f,d)}function x(){m.point=y,r.lineEnd()}function S(){v(),m.point=C,m.lineEnd=w}function C(k,E){b(i=k,E),o=f,s=d,a=h,l=p,u=g,m.point=b}function w(){n(f,d,c,h,p,g,o,s,i,a,l,u,v7,r),m.lineEnd=x,x()}return m}}var yke=Ok({point:function(e,t){this.stream.point(e*Ne,t*Ne)}});function vke(e){return Ok({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function bke(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function x7(e,t,n,r,i,o){if(!o)return bke(e,t,n,r,i);var s=Ce(o),a=xe(o),l=s*e,u=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(g,m){return g*=r,m*=i,[l*g-u*m+t,n-u*g-l*m]}return p.invert=function(g,m){return[r*(c*g-f*m+d),i*(h-f*g-c*m)]},p}function za(e){return _Z(function(){return e})()}function _Z(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,c,f=0,d=1,h=1,p=null,g=u7,m=null,y,v,b,x=e1,S=.5,C,w,k,E,A;function P(_){return k(_[0]*Ne,_[1]*Ne)}function L(_){return _=k.invert(_[0],_[1]),_&&[_[0]*tn,_[1]*tn]}P.stream=function(_){return E&&A===_?E:E=yke(vke(c)(g(C(x(A=_)))))},P.preclip=function(_){return arguments.length?(g=_,p=void 0,O()):g},P.postclip=function(_){return arguments.length?(x=_,m=y=v=b=null,O()):x},P.clipAngle=function(_){return arguments.length?(g=+_?eke(p=_*Ne):(p=null,u7),O()):p*tn},P.clipExtent=function(_){return arguments.length?(x=_==null?(m=y=v=b=null,e1):hZ(m=+_[0][0],y=+_[0][1],v=+_[1][0],b=+_[1][1]),O()):m==null?null:[[m,y],[v,b]]},P.scale=function(_){return arguments.length?(n=+_,M()):n},P.translate=function(_){return arguments.length?(r=+_[0],i=+_[1],M()):[r,i]},P.center=function(_){return arguments.length?(o=_[0]%360*Ne,s=_[1]%360*Ne,M()):[o*tn,s*tn]},P.rotate=function(_){return arguments.length?(a=_[0]%360*Ne,l=_[1]%360*Ne,u=_.length>2?_[2]%360*Ne:0,M()):[a*tn,l*tn,u*tn]},P.angle=function(_){return arguments.length?(f=_%360*Ne,M()):f*tn},P.reflectX=function(_){return arguments.length?(d=_?-1:1,M()):d<0},P.reflectY=function(_){return arguments.length?(h=_?-1:1,M()):h<0},P.precision=function(_){return arguments.length?(C=b7(w,S=_*_),O()):Qr(S)},P.fitExtent=function(_,T){return Dk(P,_,T)},P.fitSize=function(_,T){return xR(P,_,T)},P.fitWidth=function(_,T){return wR(P,_,T)},P.fitHeight=function(_,T){return SR(P,_,T)};function M(){var _=x7(n,0,0,d,h,f).apply(null,t(o,s)),T=x7(n,r-_[0],i-_[1],d,h,f);return c=uZ(a,l,u),w=uT(t,T),k=uT(c,w),C=b7(w,S),O()}function O(){return E=A=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&L,M()}}function CR(e){var t=0,n=Le/3,r=_Z(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ne,n=o[1]*Ne):[t*tn,n*tn]},i}function xke(e){var t=Ce(e);function n(r,i){return[r*t,xe(i)/t]}return n.invert=function(r,i){return[r/t,wi(i*t)]},n}function wke(e,t){var n=xe(e),r=(n+xe(t))/2;if(He(r)<we)return xke(e);var i=1+n*(2*r-n),o=Qr(i)/r;function s(a,l){var u=Qr(i-2*r*xe(l))/r;return[u*xe(a*=r),o-u*Ce(a)]}return s.invert=function(a,l){var u=o-l,c=Io(a,He(u))*_o(u);return u*r<0&&(c-=Le*_o(a)*_o(u)),[c/r,wi((i-(a*a+u*u)*r*r)/(2*r))]},s}function lS(){return CR(wke).scale(155.424).center([0,33.6442])}function $Z(){return lS().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ske(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Cke(){var e,t,n=$Z(),r,i=lS().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=lS().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(o.point(h,p),l)||(a.point(h,p),l)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Ske([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),o=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+we,g+.12*h+we],[p-.214*h-we,g+.234*h-we]]).stream(u),a=s.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+we,g+.166*h+we],[p-.115*h-we,g+.234*h-we]]).stream(u),f()},c.fitExtent=function(d,h){return Dk(c,d,h)},c.fitSize=function(d,h){return xR(c,d,h)},c.fitWidth=function(d,h){return wR(c,d,h)},c.fitHeight=function(d,h){return SR(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function AZ(e){return function(t,n){var r=Ce(t),i=Ce(n),o=e(r*i);return o===1/0?[2,0]:[o*i*xe(t),o*xe(n)]}}function Mv(e){return function(t,n){var r=Qr(t*t+n*n),i=e(r),o=xe(i),s=Ce(i);return[Io(t*o,r*s),wi(r&&n*o/r)]}}var TZ=AZ(function(e){return Qr(2/(1+e))});TZ.invert=Mv(function(e){return 2*wi(e/2)});function kke(){return za(TZ).scale(124.75).clipAngle(180-.001)}var PZ=AZ(function(e){return(e=JJ(e))&&e/xe(e)});PZ.invert=Mv(function(e){return e});function Eke(){return za(PZ).scale(79.4188).clipAngle(180-.001)}function Nk(e,t){return[e,Vw(yR((Jt+t)/2))]}Nk.invert=function(e,t){return[e,2*hm(QJ(t))-Jt]};function _ke(){return FZ(Nk).scale(961/Kr)}function FZ(e){var t=za(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=l=u=null:(s=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):s==null?null:[[s,a],[l,u]]};function c(){var f=Le*r(),d=t(qCe(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Nk?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,l),u]]:[[s,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,u)]])}return c()}function Gb(e){return yR((Jt+e)/2)}function $ke(e,t){var n=Ce(e),r=e===t?xe(e):Vw(n/Ce(t))/Vw(Gb(t)/Gb(e)),i=n*B$(Gb(e),r)/r;if(!r)return Nk;function o(s,a){i>0?a<-Jt+we&&(a=-Jt+we):a>Jt-we&&(a=Jt-we);var l=i/B$(Gb(a),r);return[l*xe(r*s),i-l*Ce(r*s)]}return o.invert=function(s,a){var l=i-a,u=_o(r)*Qr(s*s+l*l),c=Io(s,He(l))*_o(l);return l*r<0&&(c-=Le*_o(s)*_o(l)),[c/r,2*hm(B$(i/u,1/r))-Jt]},o}function Ake(){return CR($ke).scale(109.5).parallels([30,30])}function uS(e,t){return[e,t]}uS.invert=uS;function Tke(){return za(uS).scale(152.63)}function Pke(e,t){var n=Ce(e),r=e===t?xe(e):(n-Ce(t))/(t-e),i=n/r+e;if(He(r)<we)return uS;function o(s,a){var l=i-a,u=r*s;return[l*xe(u),i-l*Ce(u)]}return o.invert=function(s,a){var l=i-a,u=Io(s,He(l))*_o(l);return l*r<0&&(u-=Le*_o(s)*_o(l)),[u/r,i-_o(r)*Qr(s*s+l*l)]},o}function Fke(){return CR(Pke).scale(131.154).center([0,13.9389])}var dy=1.340264,hy=-.081106,py=893e-6,gy=.003796,cS=Qr(3)/2,Mke=12;function MZ(e,t){var n=wi(cS*xe(t)),r=n*n,i=r*r*r;return[e*Ce(n)/(cS*(dy+3*hy*r+i*(7*py+9*gy*r))),n*(dy+hy*r+i*(py+gy*r))]}MZ.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<Mke&&(a=n*(dy+hy*r+i*(py+gy*r))-t,l=dy+3*hy*r+i*(7*py+9*gy*r),n-=s=a/l,r=n*n,i=r*r*r,!(He(s)<jw));++o);return[cS*e*(dy+3*hy*r+i*(7*py+9*gy*r))/Ce(n),wi(xe(n)/cS)]};function Rke(){return za(MZ).scale(177.158)}function RZ(e,t){var n=Ce(t),r=Ce(e)*n;return[n*xe(e)/r,xe(t)/r]}RZ.invert=Mv(hm);function Oke(){return za(RZ).scale(144.049).clipAngle(60)}function Dke(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,c,f,d=1,h=1,p=Ok({point:function(x,S){var C=b([x,S]);this.stream.point(C[0],C[1])}}),g=e1,m,y;function v(){return d=e*r,h=e*i,m=y=null,b}function b(x){var S=x[0]*d,C=x[1]*h;if(o){var w=C*s-S*a;S=S*s+C*a,C=w}return[S+t,C+n]}return b.invert=function(x){var S=x[0]-t,C=x[1]-n;if(o){var w=C*s+S*a;S=S*s-C*a,C=w}return[S/d,C/h]},b.stream=function(x){return m&&y===x?m:m=p(g(y=x))},b.postclip=function(x){return arguments.length?(g=x,l=u=c=f=null,v()):g},b.clipExtent=function(x){return arguments.length?(g=x==null?(l=u=c=f=null,e1):hZ(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),v()):l==null?null:[[l,u],[c,f]]},b.scale=function(x){return arguments.length?(e=+x,v()):e},b.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],v()):[t,n]},b.angle=function(x){return arguments.length?(o=x%360*Ne,a=xe(o),s=Ce(o),v()):o*tn},b.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,v()):i<0},b.fitExtent=function(x,S){return Dk(b,x,S)},b.fitSize=function(x,S){return xR(b,x,S)},b.fitWidth=function(x,S){return wR(b,x,S)},b.fitHeight=function(x,S){return SR(b,x,S)},b}function OZ(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}OZ.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(He(i)>we&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Nke(){return za(OZ).scale(175.295)}function DZ(e,t){return[Ce(t)*xe(e),xe(t)]}DZ.invert=Mv(wi);function Lke(){return za(DZ).scale(249.5).clipAngle(90+we)}function NZ(e,t){var n=Ce(t),r=1+Ce(e)*n;return[n*xe(e)/r,xe(t)/r]}NZ.invert=Mv(function(e){return 2*hm(e)});function Ike(){return za(NZ).scale(250).clipAngle(142)}function LZ(e,t){return[Vw(yR((Jt+t)/2)),-e]}LZ.invert=function(e,t){return[-t,2*hm(QJ(e))-Jt]};function zke(){var e=FZ(LZ),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Bke=Math.abs,xT=Math.cos,fS=Math.sin,jke=1e-6,IZ=Math.PI,wT=IZ/2,w7=Uke(2);function S7(e){return e>1?wT:e<-1?-wT:Math.asin(e)}function Uke(e){return e>0?Math.sqrt(e):0}function Vke(e,t){var n=e*fS(t),r=30,i;do t-=i=(t+fS(t)-n)/(1+xT(t));while(Bke(i)>jke&&--r>0);return t/2}function Wke(e,t,n){function r(i,o){return[e*i*xT(o=Vke(n,o)),t*fS(o)]}return r.invert=function(i,o){return o=S7(o/t),[i/(e*xT(o)),S7((2*o+fS(2*o))/n)]},r}var Hke=Wke(w7/wT,w7,IZ);function qke(){return za(Hke).scale(169.529)}const Gke=EZ(),ST=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Yke(e,t){return function n(){const r=t();return r.type=e,r.path=EZ().projection(r),r.copy=r.copy||function(){const i=n();return ST.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},ZK(r)}}function kR(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(dS[e]=Yke(e,t),this):dS[e]||null}function zZ(e){return e&&e.path||Gke}const dS={albers:$Z,albersusa:Cke,azimuthalequalarea:kke,azimuthalequidistant:Eke,conicconformal:Ake,conicequalarea:lS,conicequidistant:Fke,equalEarth:Rke,equirectangular:Tke,gnomonic:Oke,identity:Dke,mercator:_ke,mollweide:qke,naturalEarth1:Nke,orthographic:Lke,stereographic:Ike,transversemercator:zke};for(const e in dS)kR(e,dS[e]);function Xke(){}const Ka=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function BZ(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],f=[];return o(l,u,d=>{n(d,l,u),Kke(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(Qke((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var f=[],d=[],h,p,g,m,y,v;for(h=p=-1,m=l[0]>=u,Ka[m<<1].forEach(b);++h<e-1;)g=m,m=l[h+1]>=u,Ka[g|m<<1].forEach(b);for(Ka[m<<0].forEach(b);++p<t-1;){for(h=-1,m=l[p*e+e]>=u,y=l[p*e]>=u,Ka[m<<1|y<<2].forEach(b);++h<e-1;)g=m,m=l[p*e+e+h+1]>=u,v=y,y=l[p*e+h+1]>=u,Ka[g|m<<1|y<<2|v<<3].forEach(b);Ka[m|y<<3].forEach(b)}for(h=-1,y=l[p*e]>=u,Ka[y<<2].forEach(b);++h<e-1;)v=y,y=l[p*e+h+1]>=u,Ka[y<<2|v<<3].forEach(b);Ka[y<<3].forEach(b);function b(x){var S=[x[0][0]+h,x[0][1]+p],C=[x[1][0]+h,x[1][1]+p],w=s(S),k=s(C),E,A;(E=d[w])?(A=f[k])?(delete d[E.end],delete f[A.start],E===A?(E.ring.push(C),c(E.ring)):f[E.start]=d[A.end]={start:E.start,end:A.end,ring:E.ring.concat(A.ring)}):(delete d[E.end],E.ring.push(C),d[E.end=k]=E):(E=f[k])?(A=d[w])?(delete f[E.start],delete d[A.end],E===A?(E.ring.push(C),c(E.ring)):f[A.start]=d[E.end]={start:A.start,end:E.end,ring:A.ring.concat(E.ring)}):(delete f[E.start],E.ring.unshift(S),f[E.start=w]=E):f[w]=d[k]={start:w,end:k,ring:[S,C]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,m,y=u[g*e+p];d>0&&d<e&&p===d&&(m=u[g*e+p-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&g===h&&(m=u[(g-1)*e+p],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||G("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:Xke,r):n===a},r}function Kke(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Qke(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Jke(e,t[n]))return i;return 0}function Jke(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],f=e[a],d=f[0],h=f[1];if(Zke(l,f,t))return 0;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function Zke(e,t,n){var r;return eEe(e,t,n)&&tEe(e[r=+(e[0]===t[0])],n[r],t[r])}function eEe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function tEe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function jZ(e,t,n){return function(r){var i=$a(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?oc(o,s,e):a/(e+1);return Bi(o+l,s,l)}}function ER(e){H.call(this,null,e)}ER.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};re(ER,H,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||kr,o=BZ().smooth(e.smooth!==!1),s=e.thresholds||nEe(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),f=o.size([c.width,c.height])(c.values,Y(s)?s:s(c.values));rEe(f,c,u,e),f.forEach(d=>{l.push(ZC(u,at(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function nEe(e,t,n){const r=jZ(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Vf(t(i).values)))}function rEe(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(De(i)&&(i=i(n,r)),De(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(Je(i)?i:i[0])||1,a=(Je(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(UZ(t,s,a,l,u))}function UZ(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(f){f.forEach(u)}function u(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(l),f}}function C7(e,t,n){const r=e>=0?e:m6(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function H$(e){return De(e)?e:Er(+e)}function VZ(){var e=l=>l[0],t=l=>l[1],n=tm,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const c=C7(r[0],l,e)>>s,f=C7(r[1],l,t)>>s,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>s),g=2*h+(o>>s),m=new Float32Array(p*g),y=new Float32Array(p*g);let v=m;l.forEach(x=>{const S=d+(+e(x)>>s),C=h+(+t(x)>>s);S>=0&&S<p&&C>=0&&C<g&&(m[S+C*p]+=+n(x))}),c>0&&f>0?(vh(p,g,m,y,c),bh(p,g,y,m,f),vh(p,g,m,y,c),bh(p,g,y,m,f),vh(p,g,m,y,c),bh(p,g,y,m,f)):c>0?(vh(p,g,m,y,c),vh(p,g,y,m,c),vh(p,g,m,y,c),v=y):f>0&&(bh(p,g,m,y,f),bh(p,g,y,m,f),bh(p,g,m,y,f),v=y);const b=u?Math.pow(2,-2*s):1/QG(v);for(let x=0,S=p*g;x<S;++x)v[x]*=b;return{values:v,scale:1<<s,width:p,height:g,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=H$(l),a):e},a.y=function(l){return arguments.length?(t=H$(l),a):t},a.weight=function(l){return arguments.length?(n=H$(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||G("invalid size"),i=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||G("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=le(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&G("invalid bandwidth"),r=l,a):r},a}function vh(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function bh(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function _R(e){H.call(this,null,e)}_R.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const iEe=["x","y","weight","size","cellSize","bandwidth"];function WZ(e,t){return iEe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}re(_R,H,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=oEe(r,e.groupby),o=(e.groupby||[]).map(en),s=WZ(VZ(),e),a=e.as||"grid",l=[];function u(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return l=i.map(c=>at(u({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function oEe(e,t){var n=[],r=c=>c(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function $R(e){H.call(this,null,e)}$R.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};re($R,H,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=BZ().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||jZ(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=WZ(VZ(),e)(i,!0),l=UZ(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=Y(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(at),n}});const CT="Feature",AR="FeatureCollection",sEe="MultiPoint";function TR(e){H.call(this,null,e)}TR.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};re(TR,H,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&kr,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(xr(a))||o&&t.modified(xr(o))||s&&t.modified(xr(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),o&&s&&(t.visit(l,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:CT,geometry:{type:sEe,coordinates:r}})),this.value={type:AR,features:n}}});function PR(e){H.call(this,null,e)}PR.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};re(PR,H,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||kr,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=zZ(e.projection),n.materialize().reflow()):s=i===kr||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=aEe(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function aEe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function FR(e){H.call(this,null,e)}FR.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};re(FR,H,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function MR(e){H.call(this,null,e)}MR.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};re(MR,H,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=lEe(zZ(e.projection),e.field||Oo("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function lEe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function RR(e){H.call(this,[],e),this.generator=nke()}RR.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};re(RR,H,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)De(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(qY(n[0],i)):t.add.push(at(i)),n[0]=i,t}});function OR(e){H.call(this,null,e)}OR.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};re(OR,H,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||kr,o=cEe(e.opacity,e),s=uEe(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Vf(n.map(u=>Vf(i(u).values))):0};return n.forEach(u=>{const c=i(u),f=Oe({},u,l);r||(f.$max=Vf(c.values||[])),u[a]=fEe(c,f,s.dep?s:Er(s(f)),o.dep?o:Er(o(f)))}),t.reflow(!0).modifies(a)}});function uEe(e,t){let n;return De(e)?(n=r=>lc(e(r,t)),n.dep=HZ(e)):n=Er(lc(e||"#888")),n}function cEe(e,t){let n;return De(e)?(n=r=>e(r,t),n.dep=HZ(e)):e?n=Er(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function HZ(e){if(!De(e))return!1;const t=ks(xr(e));return t.$x||t.$y||t.$value||t.$max}function fEe(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,c=e.values,f=c?m=>c[m]:wu,d=Hu(l-s,u-a),h=d.getContext("2d"),p=h.getImageData(0,0,l-s,u-a),g=p.data;for(let m=a,y=0;m<u;++m){t.$y=m-a;for(let v=s,b=m*i;v<l;++v,y+=4){t.$x=v-s,t.$value=f(v+b);const x=n(t);g[y+0]=x.r,g[y+1]=x.g,g[y+2]=x.b,g[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function qZ(e){H.call(this,null,e),this.modified(!0)}re(qZ,H,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=hEe(e.type),ST.forEach(r=>{e[r]!=null&&k7(n,r,e[r])})):ST.forEach(r=>{e.modified(r)&&k7(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&dEe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function dEe(e,t){const n=pEe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function hEe(e){const t=kR((e||"mercator").toLowerCase());return t||G("Unrecognized projection type: "+e),t()}function k7(e,t,n){De(e[t])&&e[t](n)}function pEe(e){return e=le(e),e.length===1?e[0]:{type:AR,features:e.reduce((t,n)=>t.concat(gEe(n)),[])}}function gEe(e){return e.type===AR?e.features:le(e).filter(t=>t!=null).map(t=>t.type===CT?t:{type:CT,geometry:t})}const mEe=Object.freeze(Object.defineProperty({__proto__:null,contour:$R,geojson:TR,geopath:PR,geopoint:FR,geoshape:MR,graticule:RR,heatmap:OR,isocontour:ER,kde2d:_R,projection:qZ},Symbol.toStringTag,{value:"Module"}));function yEe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function vEe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return GZ(this.cover(t,n),t,n,e)}function GZ(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,f,d,h,p,g,m,y,v;if(!o)return e._root=s,e;for(;o.length;)if((g=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d,i=o,!(o=o[y=m<<1|g]))return i[y]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d;while((y=m<<1|g)===(v=(p>=d)<<1|h>=f));return i[v]=o,i[y]=s,e}function bEe(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>f&&(f=o));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)GZ(this,s[n],a[n],e[n]);return this}function xEe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function wEe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function SEe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ur(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function CEe(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Ur(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>f||(l=p.x1)<i||(u=p.y1)<o))if(h.length){var m=(s+l)/2,y=(a+u)/2;d.push(new Ur(h[3],m,y,l,u),new Ur(h[2],s,y,m,u),new Ur(h[1],m,a,l,y),new Ur(h[0],s,a,m,y)),(g=(t>=y)<<1|e>=m)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=v*v+b*b;if(x<n){var S=Math.sqrt(n=x);i=e-S,o=t-S,c=e+S,f=t+S,r=h.data}}return r}function kEe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,d,h,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(s+l)/2))?s=d:l=d,(g=f>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function EEe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function _Ee(){return this._root}function $Ee(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function AEe(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new Ur(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,c=(s+l)/2;(i=r[3])&&t.push(new Ur(i,u,c,a,l)),(i=r[2])&&t.push(new Ur(i,o,c,u,l)),(i=r[1])&&t.push(new Ur(i,u,s,a,c)),(i=r[0])&&t.push(new Ur(i,o,s,u,c))}return this}function TEe(e){var t=[],n=[],r;for(this._root&&t.push(new Ur(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(s+l)/2,f=(a+u)/2;(o=i[0])&&t.push(new Ur(o,s,a,c,f)),(o=i[1])&&t.push(new Ur(o,c,a,l,f)),(o=i[2])&&t.push(new Ur(o,s,f,c,u)),(o=i[3])&&t.push(new Ur(o,c,f,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function PEe(e){return e[0]}function FEe(e){return arguments.length?(this._x=e,this):this._x}function MEe(e){return e[1]}function REe(e){return arguments.length?(this._y=e,this):this._y}function DR(e,t,n){var r=new NR(t??PEe,n??MEe,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function NR(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function E7(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ei=DR.prototype=NR.prototype;ei.copy=function(){var e=new NR(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=E7(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=E7(r));return e};ei.add=vEe;ei.addAll=bEe;ei.cover=xEe;ei.data=wEe;ei.extent=SEe;ei.find=CEe;ei.remove=kEe;ei.removeAll=EEe;ei.root=_Ee;ei.size=$Ee;ei.visit=AEe;ei.visitAfter=TEe;ei.x=FEe;ei.y=REe;function Vr(e){return function(){return e}}function Lu(e){return(e()-.5)*1e-6}function OEe(e){return e.x+e.vx}function DEe(e){return e.y+e.vy}function NEe(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Vr(e==null?1:+e));function s(){for(var u,c=t.length,f,d,h,p,g,m,y=0;y<o;++y)for(f=DR(t,OEe,DEe).visitAfter(a),u=0;u<c;++u)d=t[u],g=n[d.index],m=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,x,S,C,w){var k=b.data,E=b.r,A=g+E;if(k){if(k.index>d.index){var P=h-k.x-k.vx,L=p-k.y-k.vy,M=P*P+L*L;M<A*A&&(P===0&&(P=Lu(r),M+=P*P),L===0&&(L=Lu(r),M+=L*L),M=(A-(M=Math.sqrt(M)))/M*i,d.vx+=(P*=M)*(A=(E*=E)/(m+E)),d.vy+=(L*=M)*A,k.vx-=P*(A=1-A),k.vy-=L*A)}return}return x>h+A||C<h-A||S>p+A||w<p-A}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return s.initialize=function(u,c){t=u,r=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Vr(+u),l(),s):e},s}function LEe(e){return e.index}function _7(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function IEe(e){var t=LEe,n=f,r,i=Vr(30),o,s,a,l,u,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,v=e.length;y<c;++y)for(var b=0,x,S,C,w,k,E,A;b<v;++b)x=e[b],S=x.source,C=x.target,w=C.x+C.vx-S.x-S.vx||Lu(u),k=C.y+C.vy-S.y-S.vy||Lu(u),E=Math.sqrt(w*w+k*k),E=(E-o[b])/E*m*r[b],w*=E,k*=E,C.vx-=w*(A=l[b]),C.vy-=k*A,S.vx+=w*(A=1-A),S.vy+=k*A}function h(){if(s){var m,y=s.length,v=e.length,b=new Map(s.map((S,C)=>[t(S,C,s),S])),x;for(m=0,a=new Array(y);m<v;++m)x=e[m],x.index=m,typeof x.source!="object"&&(x.source=_7(b,x.source)),typeof x.target!="object"&&(x.target=_7(b,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)x=e[m],l[m]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(v),p(),o=new Array(v),g()}}function p(){if(s)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function g(){if(s)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){s=m,u=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Vr(+m),p(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Vr(+m),g(),d):i},d}var zEe={value:()=>{}};function YZ(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new d2(n)}function d2(e){this._=e}function BEe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}d2.prototype=YZ.prototype={constructor:d2,on:function(e,t){var n=this._,r=BEe(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=jEe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=$7(n[i],e.name,t);else if(t==null)for(i in n)n[i]=$7(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new d2(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function jEe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function $7(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=zEe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var hg=0,I0=0,Wm=0,XZ=1e3,hS,z0,pS=0,pd=0,Lk=0,r1=typeof performance=="object"&&performance.now?performance:Date,KZ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function LR(){return pd||(KZ(UEe),pd=r1.now()+Lk)}function UEe(){pd=0}function gS(){this._call=this._time=this._next=null}gS.prototype=QZ.prototype={constructor:gS,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?LR():+n)+(t==null?0:+t),!this._next&&z0!==this&&(z0?z0._next=this:hS=this,z0=this),this._call=e,this._time=n,kT()},stop:function(){this._call&&(this._call=null,this._time=1/0,kT())}};function QZ(e,t,n){var r=new gS;return r.restart(e,t,n),r}function VEe(){LR(),++hg;for(var e=hS,t;e;)(t=pd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--hg}function A7(){pd=(pS=r1.now())+Lk,hg=I0=0;try{VEe()}finally{hg=0,HEe(),pd=0}}function WEe(){var e=r1.now(),t=e-pS;t>XZ&&(Lk-=t,pS=e)}function HEe(){for(var e,t=hS,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:hS=n);z0=e,kT(r)}function kT(e){if(!hg){I0&&(I0=clearTimeout(I0));var t=e-pd;t>24?(e<1/0&&(I0=setTimeout(A7,e-r1.now()-Lk)),Wm&&(Wm=clearInterval(Wm))):(Wm||(pS=r1.now(),Wm=setInterval(WEe,XZ)),hg=1,KZ(A7))}}function qEe(e,t,n){var r=new gS,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?LR():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const GEe=1664525,YEe=1013904223,T7=4294967296;function XEe(){let e=1;return()=>(e=(GEe*e+YEe)%T7)/T7}function KEe(e){return e.x}function QEe(e){return e.y}var JEe=10,ZEe=Math.PI*(3-Math.sqrt(5));function e_e(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=QZ(f),u=YZ("tick","end"),c=XEe();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(g){var m,y=e.length,v;g===void 0&&(g=1);for(var b=0;b<g;++b)for(n+=(o-n)*i,a.forEach(function(x){x(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=JEe*Math.sqrt(.5+g),b=g*ZEe;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(s=1-g,t):1-s},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,p(m)),t):a.get(g)},find:function(g,m,y){var v=0,b=e.length,x,S,C,w,k;for(y==null?y=1/0:y*=y,v=0;v<b;++v)w=e[v],x=g-w.x,S=m-w.y,C=x*x+S*S,C<y&&(k=w,y=C);return k},on:function(g,m){return arguments.length>1?(u.on(g,m),t):u.on(g)}}}function t_e(){var e,t,n,r,i=Vr(-30),o,s=1,a=1/0,l=.81;function u(h){var p,g=e.length,m=DR(e,KEe,QEe).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],m.visit(d)}function c(){if(e){var h,p=e.length,g;for(o=new Array(p),h=0;h<p;++h)g=e[h],o[g.index]=+i(g,h,e)}}function f(h){var p=0,g,m,y=0,v,b,x;if(h.length){for(v=b=x=0;x<4;++x)(g=h[x])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,v+=m*g.x,b+=m*g.y);h.x=v/y,h.y=b/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=o[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,m){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=m-p,x=y*y+v*v;if(b*b/l<x)return x<a&&(y===0&&(y=Lu(n),x+=y*y),v===0&&(v=Lu(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)),t.vx+=y*h.value*r/x,t.vy+=v*h.value*r/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Lu(n),x+=y*y),v===0&&(v=Lu(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)));do h.data!==t&&(b=o[h.data.index]*r/x,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Vr(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function n_e(e){var t=Vr(.1),n,r,i;typeof e!="function"&&(e=Vr(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Vr(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Vr(+a),s(),o):e},o}function r_e(e){var t=Vr(.1),n,r,i;typeof e!="function"&&(e=Vr(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Vr(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Vr(+a),s(),o):e},o}const P7={center:yEe,collide:NEe,nbody:t_e,link:IEe,x:n_e,y:r_e},B0="forces",ET=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],i_e=["static","iterations"],JZ=["x","y","vx","vy"];function IR(e){H.call(this,null,e)}IR.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:JZ}]};re(IR,H,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(ET),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&ZZ(n,e,0,t)):(this.value=n=s_e(t.source,e),n.on("tick",o_e(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(i_e)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==B0||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(JZ)}});function o_e(e,t){return()=>e.touch(t).run()}function s_e(e,t){const n=e_e(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),ZZ(n,t,!0).on("end",()=>o=!0)}function ZZ(e,t,n,r){var i=le(t.forces),o,s,a,l;for(o=0,s=ET.length;o<s;++o)a=ET[o],a!==B0&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=B0+o,a=n||t.modified(B0,o)?l_e(i[o]):r&&a_e(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(B0+o,null);return e.numForces=i.length,e}function a_e(e,t){var n,r;for(n in e)if(De(r=e[n])&&t.modified(xr(r)))return 1;return 0}function l_e(e){var t,n;fe(P7,e.force)||G("Unrecognized force: "+e.force),t=P7[e.force]();for(n in e)De(t[n])&&u_e(t[n],e[n],e);return t}function u_e(e,t,n){e(De(t)?r=>t(r,n):t)}const c_e=Object.freeze(Object.defineProperty({__proto__:null,force:IR},Symbol.toStringTag,{value:"Module"}));function f_e(e,t){return e.parent===t.parent?1:2}function d_e(e){return e.reduce(h_e,0)/e.length}function h_e(e,t){return e+t.x}function p_e(e){return 1+e.reduce(g_e,0)}function g_e(e,t){return Math.max(e,t.y)}function m_e(e){for(var t;t=e.children;)e=t[0];return e}function y_e(e){for(var t;t=e.children;)e=t[t.length-1];return e}function v_e(){var e=f_e,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=d_e(h),d.y=p_e(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var l=m_e(o),u=y_e(o),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function b_e(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function x_e(){return this.eachAfter(b_e)}function w_e(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function S_e(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function C_e(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function k_e(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function E_e(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function __e(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function $_e(e){for(var t=this,n=A_e(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function A_e(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function T_e(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function P_e(){return Array.from(this)}function F_e(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function M_e(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*R_e(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function zR(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=N_e)):t===void 0&&(t=D_e);for(var n=new pg(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new pg(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(eee)}function O_e(){return zR(this).eachBefore(L_e)}function D_e(e){return e.children}function N_e(e){return Array.isArray(e)?e[1]:null}function L_e(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function eee(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function pg(e){this.data=e,this.depth=this.height=0,this.parent=null}pg.prototype=zR.prototype={constructor:pg,count:x_e,each:w_e,eachAfter:C_e,eachBefore:S_e,find:k_e,sum:E_e,sort:__e,path:$_e,ancestors:T_e,descendants:P_e,leaves:F_e,links:M_e,copy:O_e,[Symbol.iterator]:R_e};function h2(e){return e==null?null:tee(e)}function tee(e){if(typeof e!="function")throw new Error;return e}function Sf(){return 0}function Dh(e){return function(){return e}}const I_e=1664525,z_e=1013904223,F7=4294967296;function B_e(){let e=1;return()=>(e=(I_e*e+z_e)%F7)/F7}function j_e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function U_e(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function V_e(e,t){for(var n=0,r=(e=U_e(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&nee(s,o)?++n:(s=H_e(i=W_e(i,o)),n=0);return s}function W_e(e,t){var n,r;if(q$(t,e))return[t];for(n=0;n<e.length;++n)if(Yb(t,e[n])&&q$(j0(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Yb(j0(e[n],e[r]),t)&&Yb(j0(e[n],t),e[r])&&Yb(j0(e[r],t),e[n])&&q$(ree(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Yb(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function nee(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function q$(e,t){for(var n=0;n<t.length;++n)if(!nee(e,t[n]))return!1;return!0}function H_e(e){switch(e.length){case 1:return q_e(e[0]);case 2:return j0(e[0],e[1]);case 3:return ree(e[0],e[1],e[2])}}function q_e(e){return{x:e.x,y:e.y,r:e.r}}function j0(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,c=a-i,f=Math.sqrt(l*l+u*u);return{x:(n+o+l/f*c)/2,y:(r+s+u/f*c)/2,r:(f+i+a)/2}}function ree(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-s,h=r-u,p=i-a,g=i-c,m=l-o,y=f-o,v=r*r+i*i-o*o,b=v-s*s-a*a+l*l,x=v-u*u-c*c+f*f,S=h*p-d*g,C=(p*x-g*b)/(S*2)-r,w=(g*m-p*y)/S,k=(h*b-d*x)/(S*2)-i,E=(d*y-h*m)/S,A=w*w+E*E-1,P=2*(o+C*w+k*E),L=C*C+k*k-o*o,M=-(Math.abs(A)>1e-6?(P+Math.sqrt(P*P-4*A*L))/(2*A):L/P);return{x:r+C+w*M,y:i+k+E*M,r:M}}function M7(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function R7(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function O7(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function Xb(e){this._=e,this.next=null,this.previous=null}function G_e(e,t){if(!(o=(e=j_e(e)).length))return 0;var n,r,i,o,s,a,l,u,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;M7(r,n,i=e[2]),n=new Xb(n),r=new Xb(r),i=new Xb(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){M7(n._,r._,i=e[l]),i=new Xb(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(R7(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(R7(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=O7(n);(i=i.next)!==r;)(a=O7(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=V_e(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function Y_e(e){return Math.sqrt(e.value)}function X_e(){var e=null,t=1,n=1,r=Sf;function i(o){const s=B_e();return o.x=t/2,o.y=n/2,e?o.eachBefore(D7(e)).eachAfter(G$(r,.5,s)).eachBefore(N7(1)):o.eachBefore(D7(Y_e)).eachAfter(G$(Sf,1,s)).eachAfter(G$(r,o.r/Math.min(t,n),s)).eachBefore(N7(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=h2(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Dh(+o),i):r},i}function D7(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function G$(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=G_e(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function N7(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function iee(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Rv(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function K_e(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(iee),s}function o(s,a){return function(l){l.children&&Rv(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var Q_e={depth:-1},L7={},Y$={};function J_e(e){return e.id}function Z_e(e){return e.parentId}function I7(){var e=J_e,t=Z_e,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,c,f,d,h,p,g,m=new Map;if(n!=null){const y=o.map((x,S)=>e$e(n(x,S,i))),v=y.map(z7),b=new Set(y).add("");for(const x of v)b.has(x)||(b.add(x),y.push(x),v.push(z7(x)),o.push(Y$));s=(x,S)=>y[S],a=(x,S)=>v[S]}for(c=0,l=o.length;c<l;++c)u=o[c],h=o[c]=new pg(u),(p=s(u,c,i))!=null&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?L7:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=o[c],p=h.parent){if(d=m.get(p),!d)throw new Error("missing: "+p);if(d===L7)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===Y$&&f.children.length===1;)f=f.children[0],--l;for(let y=o.length-1;y>=0&&(h=o[y],h.data===Y$);--y)h.data=null}if(f.parent=Q_e,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(eee),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=h2(i),r):e},r.parentId=function(i){return arguments.length?(t=h2(i),r):t},r.path=function(i){return arguments.length?(n=h2(i),r):n},r}function e$e(e){e=`${e}`;let t=e.length;return _T(e,t-1)&&!_T(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function z7(e){let t=e.length;if(t<2)return"";for(;--t>1&&!_T(e,t););return e.slice(0,t)}function _T(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function t$e(e,t){return e.parent===t.parent?1:2}function X$(e){var t=e.children;return t?t[0]:e.t}function K$(e){var t=e.children;return t?t[t.length-1]:e.t}function n$e(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function r$e(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function i$e(e,t,n){return e.a.parent===t.parent?e.a:n}function p2(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}p2.prototype=Object.create(pg.prototype);function o$e(e){for(var t=new p2(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new p2(o[s],s)),i.parent=n;return(t.parent=new p2(null,0)).children=[t],t}function s$e(){var e=t$e,t=1,n=1,r=null;function i(u){var c=o$e(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,g=p-f.x,m=t/(d.x+p+g),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return u}function o(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){r$e(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||f[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var d=u,h=u,p=c,g=d.parent.children[0],m=d.m,y=h.m,v=p.m,b=g.m,x;p=K$(p),d=X$(d),p&&d;)g=X$(g),h=K$(h),h.a=u,x=p.z+v-d.z-m+e(p._,d._),x>0&&(n$e(i$e(p,u,f),u,x),m+=x,y+=x),v+=p.m,m+=d.m,b+=g.m,y+=h.m;p&&!K$(h)&&(h.t=p,h.m+=v-y),d&&!X$(g)&&(g.t=d,g.m+=m-b,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function Ik(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var oee=(1+Math.sqrt(5))/2;function see(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,c=0,f=0,d=a.length,h,p,g=t.value,m,y,v,b,x,S,C;c<d;){h=i-n,p=o-r;do m=a[f++].value;while(!m&&f<d);for(y=v=m,S=Math.max(p/h,h/p)/(g*e),C=m*m*S,x=Math.max(v/C,C/y);f<d;++f){if(m+=u=a[f].value,u<y&&(y=u),u>v&&(v=u),C=m*m*S,b=Math.max(v/C,C/y),b>x){m-=u;break}x=b}s.push(l={value:m,dice:h<p,children:a.slice(c,f)}),l.dice?Rv(l,n,r,i,g?r+=p*m/g:o):Ik(l,n,r,g?n+=h*m/g:i,o),g-=m,c=f}return s}const aee=function e(t){function n(r,i,o,s,a){see(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(oee);function a$e(){var e=aee,t=!1,n=1,r=1,i=[0],o=Sf,s=Sf,a=Sf,l=Sf,u=Sf;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(iee),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,m=d.x1-h,y=d.y1-h;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,p+=u(d)-h,g+=s(d)-h,m-=a(d)-h,y-=l(d)-h,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=tee(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:Dh(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:Dh(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Dh(+d),c):a},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:Dh(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:Dh(+d),c):u},c}function l$e(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,g,m,y){if(f>=d-1){var v=o[f];v.x0=p,v.y0=g,v.x1=m,v.y1=y;return}for(var b=u[f],x=h/2+b,S=f+1,C=d-1;S<C;){var w=S+C>>>1;u[w]<x?S=w+1:C=w}x-u[S-1]<u[S]-x&&f+1<S&&--S;var k=u[S]-b,E=h-k;if(m-p>y-g){var A=h?(p*E+m*k)/h:m;c(f,S,k,p,g,A,y),c(S,d,E,A,g,m,y)}else{var P=h?(g*E+y*k)/h:y;c(f,S,k,p,g,m,P),c(S,d,E,p,P,m,y)}}}function u$e(e,t,n,r,i){(e.depth&1?Ik:Rv)(e,t,n,r,i)}const c$e=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,p=l.length,g=r.value;++d<p;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?Rv(u,i,o,s,g?o+=(a-o)*u.value/g:a):Ik(u,i,o,g?i+=(s-i)*u.value/g:s,a),g-=u.value}else r._squarify=l=see(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(oee);function $T(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function BR(e){H.call(this,null,e)}BR.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const f$e=e=>e.values;re(BR,H,{transform(e,t){t.source||G("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&JC(s.data)&&i.rem.push(s.data)}),this.value=o=zR({values:le(e.keys).reduce((s,a)=>(s.key(a),s),d$e()).entries(i.source)},f$e),n&&o.each(s=>{s.children&&(s=at(s.data),i.add.push(s),i.source.push(s))}),$T(o,be,be)),i.source.root=o,i}});function d$e(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=l[f])?h.push(d):l[f]=[d];for(f in l)u[f]=n(l[f],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function Wl(e){H.call(this,null,e)}const h$e=(e,t)=>e.parent===t.parent?1:2;re(Wl,H,{transform(e,t){(!t.source||!t.source.root)&&G(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(jd(e.sort,s=>s.data)),p$e(n,this.params,e),n.separation&&n.separation(e.separation!==!1?h$e:tm);try{this.value=n(i)}catch(s){G(s)}return i.each(s=>g$e(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function p$e(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function g$e(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const AT=["x","y","r","depth","children"];function jR(e){Wl.call(this,e)}jR.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:AT.length,default:AT}]};re(jR,Wl,{layout:X_e,params:["radius","size","padding"],fields:AT});const TT=["x0","y0","x1","y1","depth","children"];function UR(e){Wl.call(this,e)}UR.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:TT.length,default:TT}]};re(UR,Wl,{layout:K_e,params:["size","round","padding"],fields:TT});function VR(e){H.call(this,null,e)}VR.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};re(VR,H,{transform(e,t){t.source||G("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?$T(I7().id(e.key).parentId(e.parentKey)(i.source),e.key,Do):$T(I7()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const B7={tidy:s$e,cluster:v_e},PT=["x","y","depth","children"];function WR(e){Wl.call(this,e)}WR.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:PT.length,default:PT}]};re(WR,Wl,{layout(e){const t=e||"tidy";if(fe(B7,t))return B7[t]();G("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:PT});function HR(e){H.call(this,[],e)}HR.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};re(HR,H,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||G("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[be(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[be(a)]&&o[be(l)]&&i.add.push(at({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[be(s)]=1),n.forEach(s=>{(o[be(s.source)]||o[be(s.target)])&&i.mod.push(s)})),i}});const j7={binary:l$e,dice:Rv,slice:Ik,slicedice:u$e,squarify:aee,resquarify:c$e},FT=["x0","y0","x1","y1","depth","children"];function qR(e){Wl.call(this,e)}qR.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:FT.length,default:FT}]};re(qR,Wl,{layout(){const e=a$e();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{fe(j7,t)?e.tile(j7[t]):G("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:FT});const m$e=Object.freeze(Object.defineProperty({__proto__:null,nest:BR,pack:jR,partition:UR,stratify:VR,tree:WR,treelinks:HR,treemap:qR},Symbol.toStringTag,{value:"Module"})),Q$=4278190080;function y$e(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function v$e(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=Hu(o,s).getContext("2d"),u=Hu(o,s).getContext("2d"),c=a&&Hu(o,s).getContext("2d");n.forEach(k=>g2(l,k,!1)),g2(u,t,!1),a&&g2(c,t,!0);const f=J$(l,o,s),d=J$(u,o,s),h=a&&J$(c,o,s),p=e.bitmap(),g=a&&e.bitmap();let m,y,v,b,x,S,C,w;for(y=0;y<s;++y)for(m=0;m<o;++m)x=y*o+m,S=f[x]&Q$,w=d[x]&Q$,C=a&&h[x]&Q$,(S||C||w)&&(v=e(m),b=e(y),!i&&(S||w)&&p.set(v,b),a&&(S||C)&&g.set(v,b));return[p,g]}function J$(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function g2(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>g2(e,o.items,n))}):Zi[r].draw(e,{items:n?t.map(b$e):t})}function b$e(e){const t=ZC(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Qa=5,Pr=31,i1=32,gu=new Uint32Array(i1+1),ss=new Uint32Array(i1+1);ss[0]=0;gu[0]=~ss[0];for(let e=1;e<=i1;++e)ss[e]=ss[e-1]<<1|1,gu[e]=~ss[e];function x$e(e,t){const n=new Uint32Array(~~((e*t+i1)/i1));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Qa]&1<<(a&Pr)},set:(o,s)=>{const a=s*e+o;r(a>>>Qa,1<<(a&Pr))},clear:(o,s)=>{const a=s*e+o;i(a>>>Qa,~(1<<(a&Pr)))},getRange:(o,s,a,l)=>{let u=l,c,f,d,h;for(;u>=s;--u)if(c=u*e+o,f=u*e+a,d=c>>>Qa,h=f>>>Qa,d===h){if(n[d]&gu[c&Pr]&ss[(f&Pr)+1])return!0}else{if(n[d]&gu[c&Pr]||n[h]&ss[(f&Pr)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Qa,d=c>>>Qa,f===d)r(f,gu[u&Pr]&ss[(c&Pr)+1]);else for(r(f,gu[u&Pr]),r(d,ss[(c&Pr)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Qa,d=c>>>Qa,f===d)i(f,ss[u&Pr]|gu[(c&Pr)+1]);else for(i(f,ss[u&Pr]),i(d,gu[(c&Pr)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function w$e(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>x$e(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function S$e(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,c=Wi.width(s.datum,s.datum.text);let f=0,d,h,p,g,m,y,v;for(let b=0;b<l;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,g=a[b].y2===void 0?p:a[b].y2,m=(d+h)/2,y=(p+g)/2,v=Math.abs(h-d+g-p),v>=f&&(f=v,s.x=m,s.y=y);return m=c/2,y=u/2,d=s.x-m,h=s.x+m,p=s.y-y,g=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",p<0&&g<=o?s.baseline="top":0<=p&&o<g&&(s.baseline="bottom"),!0}}function mS(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Iu(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),c=e(t+l),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(u,f,c,d)||s.getRange(u,f,c,d)||a&&a.getRange(u,f,c,d)}function C$e(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,c,f,d,h){const p=e.invert(u),g=e.invert(c);let m=f,y=o,v;if(!mS(p,g,d,h,i,o)&&!Iu(e,p,g,h,d,m,s,a)&&!Iu(e,p,g,h,d,h,s,null)){for(;y-m>=1;)v=(m+y)/2,Iu(e,p,g,h,d,v,s,a)?y=v:m=v;if(m>f)return[p,g,m,!0]}}return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Wi.width(u.datum,u.datum.text);let p=n?d:0,g=!1,m=!1,y=0,v,b,x,S,C,w,k,E,A,P,L,M,O,_,T,N,D;for(let I=0;I<f;++I){for(v=c[I].x,x=c[I].y,b=c[I].x2===void 0?v:c[I].x2,S=c[I].y2===void 0?x:c[I].y2,v>b&&(D=v,v=b,b=D),x>S&&(D=x,x=S,S=D),A=e(v),L=e(b),P=~~((A+L)/2),M=e(x),_=e(S),O=~~((M+_)/2),k=P;k>=A;--k)for(E=O;E>=M;--E)N=l(k,E,p,h,d),N&&([u.x,u.y,p,g]=N);for(k=P;k<=L;++k)for(E=O;E<=_;++E)N=l(k,E,p,h,d),N&&([u.x,u.y,p,g]=N);!g&&!n&&(T=Math.abs(b-v+S-x),C=(v+b)/2,w=(x+S)/2,T>=y&&!mS(C,w,h,d,i,o)&&!Iu(e,C,w,d,h,d,s,null)&&(y=T,u.x=C,u.y=w,m=!0))}return g||m?(C=h/2,w=d/2,s.setRange(e(u.x-C),e(u.y-w),e(u.x+C),e(u.y+w)),u.align="center",u.baseline="middle",!0):!1}}const k$e=[-1,-1,1,1],E$e=[-1,1,-1,1];function _$e(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Wi.width(u.datum,u.datum.text),p=[];let g=n?d:0,m=!1,y=!1,v=0,b,x,S,C,w,k,E,A,P,L,M,O;for(let _=0;_<f;++_){for(b=c[_].x,S=c[_].y,x=c[_].x2===void 0?b:c[_].x2,C=c[_].y2===void 0?S:c[_].y2,p.push([e((b+x)/2),e((S+C)/2)]);p.length;)if([E,A]=p.pop(),!(s.get(E,A)||a.get(E,A)||l.get(E,A))){l.set(E,A);for(let T=0;T<4;++T)w=E+k$e[T],k=A+E$e[T],l.outOfBounds(w,k,w,k)||p.push([w,k]);if(w=e.invert(E),k=e.invert(A),P=g,L=o,!mS(w,k,h,d,i,o)&&!Iu(e,w,k,d,h,P,s,a)&&!Iu(e,w,k,d,h,d,s,null)){for(;L-P>=1;)M=(P+L)/2,Iu(e,w,k,d,h,M,s,a)?L=M:P=M;P>g&&(u.x=w,u.y=k,g=P,m=!0)}}!m&&!n&&(O=Math.abs(x-b+C-S),w=(b+x)/2,k=(S+C)/2,O>=v&&!mS(w,k,h,d,i,o)&&!Iu(e,w,k,d,h,d,s,null)&&(v=O,u.x=w,u.y=k,y=!0))}return m||y?(w=h/2,k=d/2,s.setRange(e(u.x-w),e(u.y-k),e(u.x+w),e(u.y+k)),u.align="center",u.baseline="middle",!0):!1}}const $$e=["right","center","left"],A$e=["bottom","middle","top"];function T$e(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,f=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=u.textWidth??0,h,p,g,m,y,v,b,x,S,C,w,k,E,A,P;for(let L=0;L<l;++L){if(h=(n[L]&3)-1,p=(n[L]>>>2&3)-1,g=h===0&&p===0||r[L]<0,m=h&&p?Math.SQRT1_2:1,y=r[L]<0?-1:1,v=c[1+h]+r[L]*h*m,w=c[4+p]+y*f*p/2+r[L]*p*m,x=w-f/2,S=w+f/2,k=e(v),A=e(x),P=e(S),!d)if(U7(k,k,A,P,s,a,v,v,x,S,c,g))d=Wi.width(u.datum,u.datum.text);else continue;if(C=v+y*d*h/2,v=C-d/2,b=C+d/2,k=e(v),E=e(b),U7(k,E,A,P,s,a,v,b,x,S,c,g))return u.x=h?h*y<0?b:v:C,u.y=p?p*y<0?S:x:w,u.align=$$e[h*y+1],u.baseline=A$e[p*y+1],s.setRange(k,A,E,P),!0}return!1}}function U7(e,t,n,r,i,o,s,a,l,u,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const Z$=0,e5=4,t5=8,n5=0,r5=1,i5=2,P$e={"top-left":Z$+n5,top:Z$+r5,"top-right":Z$+i5,left:e5+n5,middle:e5+r5,right:e5+i5,"bottom-left":t5+n5,bottom:t5+r5,"bottom-right":t5+i5},F$e={naive:S$e,"reduced-search":C$e,floodfill:_$e};function M$e(e,t,n,r,i,o,s,a,l,u,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=R$e(r,f),h=O$e(i,f),p=D$e(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,m=g==="area",y=N$e(p,g,a,l),v=u===null||u===1/0,b=m&&c==="naive";let x=-1,S=-1;const C=e.map(A=>{const P=v?Wi.width(A,A.text):void 0;return x=Math.max(x,P),S=Math.max(S,A.fontSize),{datum:A,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(A),textWidth:P}});u=u===null||u===1/0?Math.max(x,S)+Math.max(...r):u;const w=w$e(t[0],t[1],u);let k;if(!b){n&&C.sort((L,M)=>n(L.datum,M.datum));let A=!1;for(let L=0;L<h.length&&!A;++L)A=h[L]===5||d[L]<0;const P=(p&&s||m)&&e.map(L=>L.datum);k=o.length||P?v$e(w,P||[],o,A,m):y$e(w,s&&C)}const E=m?F$e[c](w,k,s,l):T$e(w,k,h,d);return C.forEach(A=>A.opacity=+E(A)),C}function R$e(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function O$e(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=P$e[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function D$e(e){return e&&e.mark&&e.mark.marktype}function N$e(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const MT=["x","y","opacity","align","baseline"],lee=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function GR(e){H.call(this,null,e)}GR.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:lee},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:MT.length,default:MT}]};re(GR,H,{transform(e,t){function n(o){const s=e[o];return De(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&G("Size parameter should be specified as a [width, height] array.");const i=e.as||MT;return M$e(t.materialize(t.SOURCE).source||[],e.size,e.sort,le(e.offset==null?1:e.offset),le(e.anchor||lee),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const L$e=Object.freeze(Object.defineProperty({__proto__:null,label:GR},Symbol.toStringTag,{value:"Module"}));function uee(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function YR(e){H.call(this,null,e)}YR.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};re(YR,H,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=uee(r,e.groupby),o=(e.groupby||[]).map(en),s=o.length,a=e.as||[en(e.x),en(e.y)],l=[];i.forEach(u=>{cX(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=u.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],l.push(at(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const RT={constant:A6,linear:T6,log:sX,exp:aX,pow:lX,quad:P6,poly:uX},I$e=(e,t)=>e==="poly"?t:e==="quad"?2:1;function XR(e){H.call(this,null,e)}XR.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(RT)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};re(XR,H,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=uee(r,e.groupby),o=(e.groupby||[]).map(en),s=e.method||"linear",a=e.order==null?3:e.order,l=I$e(s,a),u=e.as||[en(e.x),en(e.y)],c=RT[s],f=[];let d=e.extent;fe(RT,s)||G("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(at({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||$a(h,e.x),y=v=>{const b={};for(let x=0;x<o.length;++x)b[o[x]]=h.dims[x];b[u[0]]=v[0],b[u[1]]=v[1],f.push(at(b))};s==="linear"||s==="constant"?m.forEach(v=>y([v,g.predict(v)])):sk(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const z$e=Object.freeze(Object.defineProperty({__proto__:null,loess:YR,regression:XR},Symbol.toStringTag,{value:"Module"})),wl=11102230246251565e-32,sr=134217729,B$e=(3+8*wl)*wl;function o5(e,t,n,r,i){let o,s,a,l,u=t[0],c=r[0],f=0,d=0;c>u==c>-u?(o=u,u=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>u==c>-u?(s=u+o,a=o-(s-u),u=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>u==c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function j$e(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Ov(e){return new Float64Array(e)}const U$e=(3+16*wl)*wl,V$e=(2+12*wl)*wl,W$e=(9+64*wl)*wl*wl,xh=Ov(4),V7=Ov(8),W7=Ov(12),H7=Ov(16),Fr=Ov(4);function H$e(e,t,n,r,i,o,s){let a,l,u,c,f,d,h,p,g,m,y,v,b,x,S,C,w,k;const E=e-i,A=n-i,P=t-o,L=r-o;x=E*L,d=sr*E,h=d-(d-E),p=E-h,d=sr*L,g=d-(d-L),m=L-g,S=p*m-(x-h*g-p*g-h*m),C=P*A,d=sr*P,h=d-(d-P),p=P-h,d=sr*A,g=d-(d-A),m=A-g,w=p*m-(C-h*g-p*g-h*m),y=S-w,f=S-y,xh[0]=S-(y+f)+(f-w),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,xh[1]=b-(y+f)+(f-C),k=v+y,f=k-v,xh[2]=v-(k-f)+(y-f),xh[3]=k;let M=j$e(4,xh),O=V$e*s;if(M>=O||-M>=O||(f=e-E,a=e-(E+f)+(f-i),f=n-A,u=n-(A+f)+(f-i),f=t-P,l=t-(P+f)+(f-o),f=r-L,c=r-(L+f)+(f-o),a===0&&l===0&&u===0&&c===0)||(O=W$e*s+B$e*Math.abs(M),M+=E*c+L*a-(P*u+A*l),M>=O||-M>=O))return M;x=a*L,d=sr*a,h=d-(d-a),p=a-h,d=sr*L,g=d-(d-L),m=L-g,S=p*m-(x-h*g-p*g-h*m),C=l*A,d=sr*l,h=d-(d-l),p=l-h,d=sr*A,g=d-(d-A),m=A-g,w=p*m-(C-h*g-p*g-h*m),y=S-w,f=S-y,Fr[0]=S-(y+f)+(f-w),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,Fr[1]=b-(y+f)+(f-C),k=v+y,f=k-v,Fr[2]=v-(k-f)+(y-f),Fr[3]=k;const _=o5(4,xh,4,Fr,V7);x=E*c,d=sr*E,h=d-(d-E),p=E-h,d=sr*c,g=d-(d-c),m=c-g,S=p*m-(x-h*g-p*g-h*m),C=P*u,d=sr*P,h=d-(d-P),p=P-h,d=sr*u,g=d-(d-u),m=u-g,w=p*m-(C-h*g-p*g-h*m),y=S-w,f=S-y,Fr[0]=S-(y+f)+(f-w),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,Fr[1]=b-(y+f)+(f-C),k=v+y,f=k-v,Fr[2]=v-(k-f)+(y-f),Fr[3]=k;const T=o5(_,V7,4,Fr,W7);x=a*c,d=sr*a,h=d-(d-a),p=a-h,d=sr*c,g=d-(d-c),m=c-g,S=p*m-(x-h*g-p*g-h*m),C=l*u,d=sr*l,h=d-(d-l),p=l-h,d=sr*u,g=d-(d-u),m=u-g,w=p*m-(C-h*g-p*g-h*m),y=S-w,f=S-y,Fr[0]=S-(y+f)+(f-w),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,Fr[1]=b-(y+f)+(f-C),k=v+y,f=k-v,Fr[2]=v-(k-f)+(y-f),Fr[3]=k;const N=o5(T,W7,4,Fr,H7);return H7[N-1]}function Kb(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=U$e*u?l:-H$e(e,t,n,r,i,o,u)}const q7=Math.pow(2,-52),Qb=new Uint32Array(512);class yS{static from(t,n=K$e,r=Q$e){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new yS(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let E=0;E<s;E++){const A=t[2*E],P=t[2*E+1];A<a&&(a=A),P<l&&(l=P),A>u&&(u=A),P>c&&(c=P),this._ids[E]=E}const f=(a+u)/2,d=(l+c)/2;let h,p,g;for(let E=0,A=1/0;E<s;E++){const P=s5(f,d,t[2*E],t[2*E+1]);P<A&&(h=E,A=P)}const m=t[2*h],y=t[2*h+1];for(let E=0,A=1/0;E<s;E++){if(E===h)continue;const P=s5(m,y,t[2*E],t[2*E+1]);P<A&&P>0&&(p=E,A=P)}let v=t[2*p],b=t[2*p+1],x=1/0;for(let E=0;E<s;E++){if(E===h||E===p)continue;const A=Y$e(m,y,v,b,t[2*E],t[2*E+1]);A<x&&(g=E,x=A)}let S=t[2*g],C=t[2*g+1];if(x===1/0){for(let P=0;P<s;P++)this._dists[P]=t[2*P]-t[0]||t[2*P+1]-t[1];Uh(this._ids,this._dists,0,s-1);const E=new Uint32Array(s);let A=0;for(let P=0,L=-1/0;P<s;P++){const M=this._ids[P],O=this._dists[M];O>L&&(E[A++]=M,L=O)}this.hull=E.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Kb(m,y,v,b,S,C)<0){const E=p,A=v,P=b;p=g,v=S,b=C,g=E,S=A,C=P}const w=X$e(m,y,v,b,S,C);this._cx=w.x,this._cy=w.y;for(let E=0;E<s;E++)this._dists[E]=s5(t[2*E],t[2*E+1],w.x,w.y);Uh(this._ids,this._dists,0,s-1),this._hullStart=h;let k=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,o.fill(-1),o[this._hashKey(m,y)]=h,o[this._hashKey(v,b)]=p,o[this._hashKey(S,C)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let E=0,A,P;E<this._ids.length;E++){const L=this._ids[E],M=t[2*L],O=t[2*L+1];if(E>0&&Math.abs(M-A)<=q7&&Math.abs(O-P)<=q7||(A=M,P=O,L===h||L===p||L===g))continue;let _=0;for(let U=0,V=this._hashKey(M,O);U<this._hashSize&&(_=o[(V+U)%this._hashSize],!(_!==-1&&_!==r[_]));U++);_=n[_];let T=_,N;for(;N=r[T],Kb(M,O,t[2*T],t[2*T+1],t[2*N],t[2*N+1])>=0;)if(T=N,T===_){T=-1;break}if(T===-1)continue;let D=this._addTriangle(T,L,r[T],-1,-1,i[T]);i[L]=this._legalize(D+2),i[T]=D,k++;let I=r[T];for(;N=r[I],Kb(M,O,t[2*I],t[2*I+1],t[2*N],t[2*N+1])<0;)D=this._addTriangle(I,L,N,i[L],-1,i[I]),i[L]=this._legalize(D+2),r[I]=I,k--,I=N;if(T===_)for(;N=n[T],Kb(M,O,t[2*N],t[2*N+1],t[2*T],t[2*T+1])<0;)D=this._addTriangle(N,L,T,-1,i[T],i[N]),this._legalize(D+2),i[N]=D,r[T]=T,k--,T=N;this._hullStart=n[L]=T,r[T]=n[I]=L,r[L]=I,o[this._hashKey(M,O)]=L,o[this._hashKey(t[2*T],t[2*T+1])]=T}this.hull=new Uint32Array(k);for(let E=0,A=this._hullStart;E<k;E++)this.hull[E]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(q$e(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=Qb[--o];continue}const u=a-a%3,c=l+(t+1)%3,f=u+(a+2)%3,d=n[s],h=n[t],p=n[c],g=n[f];if(G$e(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,f);const v=u+(a+1)%3;o<Qb.length&&(Qb[o++]=v)}else{if(o===0)break;t=Qb[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function q$e(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function s5(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function G$e(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,c=n-s,f=r-a,d=i-s,h=o-a,p=l*l+u*u,g=c*c+f*f,m=d*d+h*h;return l*(f*m-g*h)-u*(c*m-g*d)+p*(c*h-f*d)<0}function Y$e(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=(u*c-a*f)*d,p=(s*f-l*c)*d;return h*h+p*p}function X$e(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=e+(u*c-a*f)*d,p=t+(s*f-l*c)*d;return{x:h,y:p}}function Uh(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;Hm(e,i,o),t[e[n]]>t[e[r]]&&Hm(e,n,r),t[e[o]]>t[e[r]]&&Hm(e,o,r),t[e[n]]>t[e[o]]&&Hm(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;Hm(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Uh(e,t,o,r),Uh(e,t,n,s-1)):(Uh(e,t,n,s-1),Uh(e,t,o,r))}}function Hm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function K$e(e){return e[0]}function Q$e(e){return e[1]}const G7=1e-6;class Af{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>G7||Math.abs(this._y1-o)>G7)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class OT{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let J$e=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,m=0,y=r.length,v,b;g<y;g+=3,m+=2){const x=r[g]*2,S=r[g+1]*2,C=r[g+2]*2,w=t[x],k=t[x+1],E=t[S],A=t[S+1],P=t[C],L=t[C+1],M=E-w,O=A-k,_=P-w,T=L-k,N=(M*T-O*_)*2;if(Math.abs(N)<1e-9){if(o===void 0){o=s=0;for(const I of n)o+=t[I*2],s+=t[I*2+1];o/=n.length,s/=n.length}const D=1e9*Math.sign((o-w)*T-(s-k)*_);v=(w+P)/2-D*T,b=(k+L)/2+D*_}else{const D=1/N,I=M*M+O*O,U=_*_+T*T;v=w+(T*I-O*U)*D,b=k+(M*U-_*I)*D}a[m]=v,a[m+1]=b}let l=n[n.length-1],u,c=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=c,f=d,h=p,c=l*4,d=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Af:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=s[h],m=s[h+1],y=s[p],v=s[p+1];this._renderSegment(g,m,y,v,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const f=Math.floor(i[u]/3)*2,d=s[f],h=s[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Af:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Af:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new OT;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,m,y,v;if(u===0){if((p=this._clipSegment(o,s,a,l,u,c))===null)continue;[g,m,y,v]=p}else{if((p=this._clipSegment(a,l,o,s,c,u))===null)continue;[y,v,g,m]=p,f=d,d=this._edgecode(g,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,m):i=[g,m]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,u,c=o||s;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=d,d=this._edgecode(a[u],a[u+1]),f&&d&&(u=this._edge(t,f,d,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Z$e=2*Math.PI,wh=Math.pow;function e5e(e){return e[0]}function t5e(e){return e[1]}function n5e(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function r5e(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class KR{static from(t,n=e5e,r=t5e,i){return new KR("length"in t?i5e(t,n,r,i):Float64Array.from(o5e(t,n,r,i)))}constructor(t){this._delaunator=new yS(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&n5e(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=r5e(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new yS(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(r[l]===-1||s[c]===-1)&&(s[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new J$e(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=wh(n-u[t*2],2)+wh(r-u[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=wh(n-u[p*2],2)+wh(r-u[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==p&&wh(n-u[h*2],2)+wh(r-u[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Af:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,c=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Af:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,Z$e)}return r&&r.value()}renderHull(t){const n=t==null?t=new Af:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new OT;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Af:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new OT;return this.renderTriangle(t,n),n.value()}}function i5e(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*o5e(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function QR(e){H.call(this,null,e)}QR.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const s5e=[-1e5,-1e5,1e5,1e5];re(QR,H,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:s5e;const o=this.value=KR.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!l5e(l)?a5e(l):null}return t.reflow(e.modified()).modifies(n)}});function a5e(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function l5e(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const u5e=Object.freeze(Object.defineProperty({__proto__:null,voronoi:QR},Symbol.toStringTag,{value:"Module"}));var a5=Math.PI/180,U0=64,m2=2048;function c5e(){var e=[256,256],t,n,r,i,o,s,a,l=cee,u=[],c=Math.random,f={};f.layout=function(){for(var p=d(Hu()),g=m5e((e[0]>>5)*e[1]),m=null,y=u.length,v=-1,b=[],x=u.map(C=>({text:t(C),font:n(C),style:i(C),weight:o(C),rotate:s(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,w)=>w.size-C.size);++v<y;){var S=x[v];S.x=e[0]*(c()+.5)>>1,S.y=e[1]*(c()+.5)>>1,f5e(p,S,x,v),S.hasText&&h(g,S,m)&&(b.push(S),m?h5e(m,S):m=[{x:S.x+S.x0,y:S.y+S.y0},{x:S.x+S.x1,y:S.y+S.y1}],S.x-=e[0]>>1,S.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(U0<<5)/g,p.height=m2/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function h(p,g,m){for(var y=g.x,v=g.y,b=Math.hypot(e[0],e[1]),x=l(e),S=c()<.5?1:-1,C=-S,w,k,E;(w=x(C+=S))&&(k=~~w[0],E=~~w[1],!(Math.min(Math.abs(k),Math.abs(E))>=b));)if(g.x=y+k,g.y=v+E,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!d5e(g,p,e[0]))&&(!m||p5e(g,m))){for(var A=g.sprite,P=g.width>>5,L=e[0]>>5,M=g.x-(P<<4),O=M&127,_=32-O,T=g.y1-g.y0,N=(g.y+g.y0)*L+(M>>5),D,I=0;I<T;I++){D=0;for(var U=0;U<=P;U++)p[N+U]|=D<<_|(U<P?(D=A[I*P+U])>>>O:0);N+=L}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(u=p,f):u},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Xc(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Xc(p),f):i},f.fontWeight=function(p){return arguments.length?(o=Xc(p),f):o},f.rotate=function(p){return arguments.length?(s=Xc(p),f):s},f.text=function(p){return arguments.length?(t=Xc(p),f):t},f.spiral=function(p){return arguments.length?(l=y5e[p]||p,f):l},f.fontSize=function(p){return arguments.length?(r=Xc(p),f):r},f.padding=function(p){return arguments.length?(a=Xc(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function f5e(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(U0<<5)/o,m2/o);var s=0,a=0,l=0,u=n.length,c,f,d,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*a5),m=Math.cos(t.rotate*a5),y=c*m,v=c*g,b=d*m,x=d*g;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>l&&(l=d),s+c>=U0<<5&&(s=0,a+=l,l=0),a+d>=m2)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*a5),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var S=i.getImageData(0,0,(U0<<5)/o,m2/o).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)C[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var w=0,k=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var E=f*p+(h>>5),A=S[(a+p)*(U0<<5)+(s+h)<<2]?1<<31-h%32:0;C[E]|=A,w|=A}w?k=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+k,t.sprite=C.slice(0,(t.y1-t.y0)*f)}}}function d5e(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[u+d])return!0;u+=n}return!1}function h5e(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function p5e(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function cee(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function g5e(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function m5e(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Xc(e){return typeof e=="function"?e:function(){return e}}var y5e={archimedean:cee,rectangular:g5e};const fee=["x","y","font","fontSize","fontStyle","fontWeight","angle"],v5e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function JR(e){H.call(this,c5e(),e)}JR.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:fee}]};re(JR,H,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&G("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return De(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||v5e.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||fee;let a=e.fontSize||14,l;if(De(a)?l=e.fontSizeRange:a=Er(a),l){const p=a,g=et("sqrt")().domain($a(i,p)).range(l);a=m=>g(p(m))}i.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Lo).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=u.length;for(let p=0,g,m;p<h;++p)g=u[p],m=g.datum,m[s[0]]=g.x+f,m[s[1]]=g.y+d,m[s[2]]=g.font,m[s[3]]=g.size,m[s[4]]=g.style,m[s[5]]=g.weight,m[s[6]]=g.rotate;return t.reflow(r).modifies(s)}});const b5e=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:JR},Symbol.toStringTag,{value:"Module"})),x5e=e=>new Uint8Array(e),w5e=e=>new Uint16Array(e),my=e=>new Uint32Array(e);function S5e(){let e=8,t=[],n=my(0),r=Jb(0,e),i=Jb(0,e);return{data:()=>t,seen:()=>n=C5e(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)l[f]=t[f],u[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?u[f]=-1:(u[f]=d,r[d]=r[f],i[d]=i[f],l[d]=c,c._index=d++),r[f]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=Jb(o,e,r),i=Jb(o,e))}}}function C5e(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Jb(e,t,n){const r=(t<257?x5e:t<65537?w5e:my)(e);return n&&r.set(n),r}function Y7(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],c=a[1],f=l.length;let d;for(d=0;d<u;++d)o[l[d]]|=r;for(d=c;d<f;++d)o[l[d]]|=r;return s}}}function X7(){let e=my(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,f=l.length,d=my(f);let h=Array(f),p,g,m;for(m=0;m<f;++m)h[m]=a(l[m]),d[m]=m;if(h=k5e(h,d),c)p=t,g=e,t=Array(c+f),e=my(c+f),E5e(u,p,g,c,h,d,f,t,e);else{if(u>0)for(m=0;m<f;++m)d[m]+=u;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,l){const u=n;let c,f,d;for(f=0;!l[e[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[Nme(l,a[0],0,u),ic(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function k5e(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),zme(e,t)}function E5e(e,t,n,r,i,o,s,a,l){let u=0,c=0,f;for(f=0;u<r&&c<s;++f)t[u]<i[c]?(a[f]=t[u],l[f]=n[u++]):(a[f]=i[c],l[f]=o[c++]+e);for(;u<r;++u,++f)a[f]=t[u],l[f]=n[u];for(;c<s;++c,++f)a[f]=i[c],l[f]=o[c]+e}function ZR(e){H.call(this,S5e(),e),this._indices=null,this._dims=null}ZR.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};re(ZR,H,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=X7()),o.push(Y7(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,m,y,v,b,x,S,C,w;if(u.set(l),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},v=t.mod,S=0,C=v.length;S<C;++S)x[v[S]._index]=1;for(S=0;S<h;++S)w=r[S],(!s[S]||e.modified("fields",S)||t.modified(w.fields))&&(y=w.fname,(g=p[y])||(o[y]=m=X7(),p[y]=g=m.insert(w,t.source,0)),s[S]=Y7(m,S,i[S]).onAdd(g,l));for(S=0,C=a.data().length;S<C;++S)b[S]||(u[S]!==l[S]?f.push(S):x[S]&&l[S]!==c&&d.push(S));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,g=l[p]||(l[p]=s[p].insert(a[h],r,d)),o[h].onAdd(g,m);for(;d<c;++d)y[d]=v,m[d]!==v&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=u[0],p=u[1],g=e.one;let m,y,v;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(f>h)for(m=h,y=Math.min(f,p);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;if(d>p)for(m=Math.max(f,p),y=d;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(d<p)for(m=Math.max(h,d),y=p;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=a[0],d=a[1],h=e.one;let p,g,m;if(u<f)for(p=u,g=Math.min(f,c);p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(u>f)for(p=f,g=Math.min(u,d);p<g;++p)m=s[p],o[m]^=h,r.push(m);if(c>d)for(p=Math.max(u,d),g=c;p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)m=s[p],o[m]^=h,r.push(m);e.range=t.slice()}});function eO(e){H.call(this,null,e)}eO.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};re(eO,H,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:s[c];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^l[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^l[c]&n))?s[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const _5e=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:ZR,resolvefilter:eO},Symbol.toStringTag,{value:"Module"})),$5e="RawCode",gd="Literal",A5e="Property",T5e="Identifier",P5e="ArrayExpression",F5e="BinaryExpression",dee="CallExpression",M5e="ConditionalExpression",R5e="LogicalExpression",O5e="MemberExpression",D5e="ObjectExpression",N5e="UnaryExpression";function Os(e){this.type=e}Os.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=L5e(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function L5e(e){switch(e.type){case P5e:return e.elements;case F5e:case R5e:return[e.left,e.right];case dee:return[e.callee].concat(e.arguments);case M5e:return[e.test,e.consequent,e.alternate];case O5e:return[e.object,e.property];case D5e:return e.properties;case A5e:return[e.key,e.value];case N5e:return[e.argument];case T5e:case gd:case $5e:default:return[]}}var Ba,ge,q,Sr,ht,zk=1,Dv=2,md=3,Fc=4,Bk=5,Hd=6,si=7,Nv=8,I5e=9;Ba={};Ba[zk]="Boolean";Ba[Dv]="<end>";Ba[md]="Identifier";Ba[Fc]="Keyword";Ba[Bk]="Null";Ba[Hd]="Numeric";Ba[si]="Punctuator";Ba[Nv]="String";Ba[I5e]="RegularExpression";var z5e="ArrayExpression",B5e="BinaryExpression",j5e="CallExpression",U5e="ConditionalExpression",hee="Identifier",V5e="Literal",W5e="LogicalExpression",H5e="MemberExpression",q5e="ObjectExpression",G5e="Property",Y5e="UnaryExpression",Rn="Unexpected token %0",X5e="Unexpected number",K5e="Unexpected string",Q5e="Unexpected identifier",J5e="Unexpected reserved word",Z5e="Unexpected end of input",DT="Invalid regular expression",l5="Invalid regular expression: missing /",pee="Octal literals are not allowed in strict mode.",e3e="Duplicate data property in object literal not allowed in strict mode",Qn="ILLEGAL",o1="Disabled.",t3e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),n3e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function jk(e,t){if(!e)throw new Error("ASSERT: "+t)}function il(e){return e>=48&&e<=57}function tO(e){return"0123456789abcdefABCDEF".includes(e)}function yy(e){return"01234567".includes(e)}function r3e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function s1(e){return e===10||e===13||e===8232||e===8233}function Lv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&t3e.test(String.fromCharCode(e))}function vS(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&n3e.test(String.fromCharCode(e))}const i3e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function gee(){for(;q<Sr;){const e=ge.charCodeAt(q);if(r3e(e)||s1(e))++q;else break}}function NT(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)q<Sr&&tO(ge[q])?(r=ge[q++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ke({},Rn,Qn);return String.fromCharCode(i)}function o3e(){var e,t,n,r;for(e=ge[q],t=0,e==="}"&&Ke({},Rn,Qn);q<Sr&&(e=ge[q++],!!tO(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ke({},Rn,Qn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function mee(){var e,t;for(e=ge.charCodeAt(q++),t=String.fromCharCode(e),e===92&&(ge.charCodeAt(q)!==117&&Ke({},Rn,Qn),++q,e=NT("u"),(!e||e==="\\"||!Lv(e.charCodeAt(0)))&&Ke({},Rn,Qn),t=e);q<Sr&&(e=ge.charCodeAt(q),!!vS(e));)++q,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ge.charCodeAt(q)!==117&&Ke({},Rn,Qn),++q,e=NT("u"),(!e||e==="\\"||!vS(e.charCodeAt(0)))&&Ke({},Rn,Qn),t+=e);return t}function s3e(){var e,t;for(e=q++;q<Sr;){if(t=ge.charCodeAt(q),t===92)return q=e,mee();if(vS(t))++q;else break}return ge.slice(e,q)}function a3e(){var e,t,n;return e=q,t=ge.charCodeAt(q)===92?mee():s3e(),t.length===1?n=md:i3e.hasOwnProperty(t)?n=Fc:t==="null"?n=Bk:t==="true"||t==="false"?n=zk:n=md,{type:n,value:t,start:e,end:q}}function u5(){var e=q,t=ge.charCodeAt(q),n,r=ge[q],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++q,{type:si,value:String.fromCharCode(t),start:e,end:q};default:if(n=ge.charCodeAt(q+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return q+=2,{type:si,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:q};case 33:case 61:return q+=2,ge.charCodeAt(q)===61&&++q,{type:si,value:ge.slice(e,q),start:e,end:q}}}if(s=ge.substr(q,4),s===">>>=")return q+=4,{type:si,value:s,start:e,end:q};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return q+=3,{type:si,value:o,start:e,end:q};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return q+=2,{type:si,value:i,start:e,end:q};if(i==="//"&&Ke({},Rn,Qn),"<>=!+-*%&|^/".includes(r))return++q,{type:si,value:r,start:e,end:q};Ke({},Rn,Qn)}function l3e(e){let t="";for(;q<Sr&&tO(ge[q]);)t+=ge[q++];return t.length===0&&Ke({},Rn,Qn),Lv(ge.charCodeAt(q))&&Ke({},Rn,Qn),{type:Hd,value:parseInt("0x"+t,16),start:e,end:q}}function u3e(e){let t="0"+ge[q++];for(;q<Sr&&yy(ge[q]);)t+=ge[q++];return(Lv(ge.charCodeAt(q))||il(ge.charCodeAt(q)))&&Ke({},Rn,Qn),{type:Hd,value:parseInt(t,8),octal:!0,start:e,end:q}}function K7(){var e,t,n;if(n=ge[q],jk(il(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=q,e="",n!=="."){if(e=ge[q++],n=ge[q],e==="0"){if(n==="x"||n==="X")return++q,l3e(t);if(yy(n))return u3e(t);n&&il(n.charCodeAt(0))&&Ke({},Rn,Qn)}for(;il(ge.charCodeAt(q));)e+=ge[q++];n=ge[q]}if(n==="."){for(e+=ge[q++];il(ge.charCodeAt(q));)e+=ge[q++];n=ge[q]}if(n==="e"||n==="E")if(e+=ge[q++],n=ge[q],(n==="+"||n==="-")&&(e+=ge[q++]),il(ge.charCodeAt(q)))for(;il(ge.charCodeAt(q));)e+=ge[q++];else Ke({},Rn,Qn);return Lv(ge.charCodeAt(q))&&Ke({},Rn,Qn),{type:Hd,value:parseFloat(e),start:t,end:q}}function c3e(){var e="",t,n,r,i,o=!1;for(t=ge[q],jk(t==="'"||t==='"',"String literal must starts with a quote"),n=q,++q;q<Sr;)if(r=ge[q++],r===t){t="";break}else if(r==="\\")if(r=ge[q++],!r||!s1(r.charCodeAt(0)))switch(r){case"u":case"x":ge[q]==="{"?(++q,e+=o3e()):e+=NT(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:yy(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),q<Sr&&yy(ge[q])&&(o=!0,i=i*8+"01234567".indexOf(ge[q++]),"0123".includes(r)&&q<Sr&&yy(ge[q])&&(i=i*8+"01234567".indexOf(ge[q++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ge[q]===`
`&&++q;else{if(s1(r.charCodeAt(0)))break;e+=r}return t!==""&&Ke({},Rn,Qn),{type:Nv,value:e,octal:o,start:n,end:q}}function f3e(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ke({},DT)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ke({},DT)}try{return new RegExp(e,t)}catch{return null}}function d3e(){var e,t,n,r,i;for(e=ge[q],jk(e==="/","Regular expression literal must start with a slash"),t=ge[q++],n=!1,r=!1;q<Sr;)if(e=ge[q++],t+=e,e==="\\")e=ge[q++],s1(e.charCodeAt(0))&&Ke({},l5),t+=e;else if(s1(e.charCodeAt(0)))Ke({},l5);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ke({},l5),i=t.substr(1,t.length-2),{value:i,literal:t}}function h3e(){var e,t,n;for(t="",n="";q<Sr&&(e=ge[q],!!vS(e.charCodeAt(0)));)++q,e==="\\"&&q<Sr?Ke({},Rn,Qn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ke({},DT,n),{value:n,literal:t}}function p3e(){var e,t,n,r;return ht=null,gee(),e=q,t=d3e(),n=h3e(),r=f3e(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:q}}function g3e(e){return e.type===md||e.type===Fc||e.type===zk||e.type===Bk}function yee(){if(gee(),q>=Sr)return{type:Dv,start:q,end:q};const e=ge.charCodeAt(q);return Lv(e)?a3e():e===40||e===41||e===59?u5():e===39||e===34?c3e():e===46?il(ge.charCodeAt(q+1))?K7():u5():il(e)?K7():u5()}function ui(){const e=ht;return q=e.end,ht=yee(),q=e.end,e}function vee(){const e=q;ht=yee(),q=e}function m3e(e){const t=new Os(z5e);return t.elements=e,t}function Q7(e,t,n){const r=new Os(e==="||"||e==="&&"?W5e:B5e);return r.operator=e,r.left=t,r.right=n,r}function y3e(e,t){const n=new Os(j5e);return n.callee=e,n.arguments=t,n}function v3e(e,t,n){const r=new Os(U5e);return r.test=e,r.consequent=t,r.alternate=n,r}function nO(e){const t=new Os(hee);return t.name=e,t}function V0(e){const t=new Os(V5e);return t.value=e.value,t.raw=ge.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function J7(e,t,n){const r=new Os(H5e);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function b3e(e){const t=new Os(q5e);return t.properties=e,t}function Z7(e,t,n){const r=new Os(G5e);return r.key=t,r.value=n,r.kind=e,r}function x3e(e,t){const n=new Os(Y5e);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ke(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(jk(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=q,n.description=i,n}function Uk(e){e.type===Dv&&Ke(e,Z5e),e.type===Hd&&Ke(e,X5e),e.type===Nv&&Ke(e,K5e),e.type===md&&Ke(e,Q5e),e.type===Fc&&Ke(e,J5e),Ke(e,Rn,e.value)}function Cr(e){const t=ui();(t.type!==si||t.value!==e)&&Uk(t)}function Ft(e){return ht.type===si&&ht.value===e}function c5(e){return ht.type===Fc&&ht.value===e}function w3e(){const e=[];for(q=ht.start,Cr("[");!Ft("]");)Ft(",")?(ui(),e.push(null)):(e.push(yd()),Ft("]")||Cr(","));return ui(),m3e(e)}function ez(){q=ht.start;const e=ui();return e.type===Nv||e.type===Hd?(e.octal&&Ke(e,pee),V0(e)):nO(e.value)}function S3e(){var e,t,n,r;if(q=ht.start,e=ht,e.type===md)return n=ez(),Cr(":"),r=yd(),Z7("init",n,r);if(e.type===Dv||e.type===si)Uk(e);else return t=ez(),Cr(":"),r=yd(),Z7("init",t,r)}function C3e(){var e=[],t,n,r,i={},o=String;for(q=ht.start,Cr("{");!Ft("}");)t=S3e(),t.key.type===hee?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ke({},e3e):i[r]=!0,e.push(t),Ft("}")||Cr(",");return Cr("}"),b3e(e)}function k3e(){Cr("(");const e=rO();return Cr(")"),e}const E3e={if:1};function _3e(){var e,t,n;if(Ft("("))return k3e();if(Ft("["))return w3e();if(Ft("{"))return C3e();if(e=ht.type,q=ht.start,e===md||E3e[ht.value])n=nO(ui().value);else if(e===Nv||e===Hd)ht.octal&&Ke(ht,pee),n=V0(ui());else{if(e===Fc)throw new Error(o1);e===zk?(t=ui(),t.value=t.value==="true",n=V0(t)):e===Bk?(t=ui(),t.value=null,n=V0(t)):Ft("/")||Ft("/=")?(n=V0(p3e()),vee()):Uk(ui())}return n}function $3e(){const e=[];if(Cr("("),!Ft(")"))for(;q<Sr&&(e.push(yd()),!Ft(")"));)Cr(",");return Cr(")"),e}function A3e(){q=ht.start;const e=ui();return g3e(e)||Uk(e),nO(e.value)}function T3e(){return Cr("."),A3e()}function P3e(){Cr("[");const e=rO();return Cr("]"),e}function F3e(){var e,t,n;for(e=_3e();;)if(Ft("."))n=T3e(),e=J7(".",e,n);else if(Ft("("))t=$3e(),e=y3e(e,t);else if(Ft("["))n=P3e(),e=J7("[",e,n);else break;return e}function tz(){const e=F3e();if(ht.type===si&&(Ft("++")||Ft("--")))throw new Error(o1);return e}function y2(){var e,t;if(ht.type!==si&&ht.type!==Fc)t=tz();else{if(Ft("++")||Ft("--"))throw new Error(o1);if(Ft("+")||Ft("-")||Ft("~")||Ft("!"))e=ui(),t=y2(),t=x3e(e.value,t);else{if(c5("delete")||c5("void")||c5("typeof"))throw new Error(o1);t=tz()}}return t}function nz(e){let t=0;if(e.type!==si&&e.type!==Fc)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function M3e(){var e,t,n,r,i,o,s,a,l,u;if(e=ht,l=y2(),r=ht,i=nz(r),i===0)return l;for(r.prec=i,ui(),t=[e,ht],s=y2(),o=[l,r,s];(i=nz(ht))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=Q7(a,l,s),o.push(n);r=ui(),r.prec=i,o.push(r),t.push(ht),n=y2(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=Q7(o[u-1].value,o[u-2],n),u-=2;return n}function yd(){var e,t,n;return e=M3e(),Ft("?")&&(ui(),t=yd(),Cr(":"),n=yd(),e=v3e(e,t,n)),e}function rO(){const e=yd();if(Ft(","))throw new Error(o1);return e}function iO(e){ge=e,q=0,Sr=ge.length,ht=null,vee();const t=rO();if(ht.type!==Dv)throw new Error("Unexpect token after expression.");return t}var bee={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function xee(e){function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&G("Missing arguments to clamp function."),s.length>3&&G("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&G("Missing arguments to if function."),s.length>3&&G("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function R3e(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function wee(e){e=e||{};const t=e.allowed?ks(e.allowed):{},n=e.forbidden?ks(e.forbidden):{},r=e.constants||bee,i=(e.functions||xee)(f),o=e.globalvar,s=e.fieldvar,a=De(o)?o:p=>`${o}["${p}"]`;let l={},u={},c=0;function f(p){if(ue(p))return p;const g=d[p.type];return g==null&&G("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:fe(n,g)?G("Illegal identifier: "+g):fe(r,g)?r[g]:fe(t,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===s&&(u[R3e(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&G("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=fe(i,g)&&i[g];return y||G("Unrecognized function: "+g),De(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}const rz=Symbol("vega_selection_getter");function See(e){return(!e.getter||!e.getter[rz])&&(e.getter=Oo(e.field),e.getter[rz]=!0),e.getter}const oO="intersect",iz="union",O3e="vlMulti",D3e="vlPoint",oz="or",N3e="and",ra="_vgsid_",a1=Oo(ra),L3e="E",I3e="R",z3e="R-E",B3e="R-LE",j3e="R-RE",bS="index:unit";function sz(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=See(a)(e),Vu(s)&&(s=vr(s)),Vu(r[o])&&(r[o]=vr(r[o])),Y(r[o])&&Vu(r[o][0])&&(r[o]=r[o].map(vr)),a.type===L3e){if(Y(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===I3e){if(!Ih(s,r[o]))return!1}else if(a.type===j3e){if(!Ih(s,r[o],!0,!1))return!1}else if(a.type===z3e){if(!Ih(s,r[o],!1,!1))return!1}else if(a.type===B3e&&!Ih(s,r[o],!1,!0))return!1;return!0}function U3e(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[bS]&&r[bS].value:void 0,s=n===oO,a=i.length,l=0,u,c,f,d,h;l<a;++l)if(u=i[l],o&&s){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=sz(t,u),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=sz(t,u),s^h)return h;return a&&s}const Cee=om(a1),V3e=Cee.left,W3e=Cee.right;function H3e(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[bS]&&r[bS].value:void 0,s=n===oO,a=a1(t),l=V3e(i,a);if(l===i.length||a1(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(W3e(i,a)-l<o.size)return!1}return!0}function q3e(e,t){return e.map(n=>Oe(t.fields?{values:t.fields.map(r=>See(r)(n.datum))}:{[ra]:a1(n.datum)},t))}function G3e(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,c,f,d,h,p,g,m,y,v,b=o.length,x=0,S,C;x<b;++x)if(u=o[x],d=u.unit,c=u.fields,f=u.values,c&&f){for(S=0,C=c.length;S<C;++S)h=c[S],g=s[h.field]||(s[h.field]={}),m=g[d]||(g[d]=[]),l[h.field]=y=h.type.charAt(0),v=f5[`${y}_union`],g[d]=v(m,le(f[S]));n&&(m=a[d]||(a[d]=[]),m.push(le(f).reduce((w,k,E)=>(w[c[E].field]=k,w),{})))}else h=ra,p=a1(u),g=s[h]||(s[h]={}),m=g[d]||(g[d]=[]),m.push(p),n&&(m=a[d]||(a[d]=[]),m.push({[ra]:p}));if(t=t||iz,s[ra]?s[ra]=f5[`${ra}_${t}`](...Object.values(s[ra])):Object.keys(s).forEach(w=>{s[w]=Object.keys(s[w]).map(k=>s[w][k]).reduce((k,E)=>k===void 0?E:f5[`${l[w]}_${t}`](k,E))}),o=Object.keys(a),n&&o.length){const w=r?D3e:O3e;s[w]=t===iz?{[oz]:o.reduce((k,E)=>(k.push(...a[E]),k),[])}:{[N3e]:o.map(k=>({[oz]:a[k]}))}}return s}var f5={[`${ra}_union`]:Yme,[`${ra}_intersect`]:qme,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=vr(t[0]),r=vr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=vr(t[0]),r=vr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Y3e=":",X3e="@";function sO(e,t,n,r){t[0].type!==gd&&G("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&qe(t).value,s="unit",a=X3e+s,l=Y3e+i;o===oO&&!fe(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),fe(r,l)||(r[l]=n.getData(i).tuplesRef())}function kee(e){const t=this.context.data[e];return t?t.values.value:[]}function K3e(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Q3e(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Do).insert(t)),1}function J3e(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Iv=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},Z3e=Iv("format"),Eee=Iv("timeFormat"),eAe=Iv("utcFormat"),tAe=Iv("timeParse"),nAe=Iv("utcParse"),Zb=new Date(2e3,0,1);function Vk(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Zb.setYear(2e3),Zb.setMonth(e),Zb.setDate(t),Eee.call(this,Zb,n))}function rAe(e){return Vk.call(this,e,1,"%B")}function iAe(e){return Vk.call(this,e,1,"%b")}function oAe(e){return Vk.call(this,0,2+e,"%A")}function sAe(e){return Vk.call(this,0,2+e,"%a")}const aAe=":",lAe="@",LT="%",_ee="$";function aO(e,t,n,r){t[0].type!==gd&&G("First argument to data functions must be a string literal.");const i=t[0].value,o=aAe+i;if(!fe(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function uAe(e,t,n,r){t[0].type!==gd&&G("First argument to indata must be a string literal."),t[1].type!==gd&&G("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=lAe+o;fe(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function Gr(e,t,n,r){if(t[0].type===gd)az(n,r,t[0].value);else for(e in n.scales)az(n,r,e)}function az(e,t,n){const r=LT+n;if(!fe(t,r))try{t[r]=e.scaleRef(n)}catch{}}function ja(e,t){if(De(e))return e;if(ue(e)){const n=t.scales[e];return n&&xxe(n.value)?n.value:void 0}}function cAe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Gr,n._range=Gr,n._scale=Gr;const r=i=>"_["+(i.type===gd?ne(LT+i.value):ne(LT)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function lO(e,t){return function(n,r,i){if(n){const o=ja(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const fAe=lO("area",DCe),dAe=lO("bounds",zCe),hAe=lO("centroid",HCe);function pAe(e,t){const n=ja(e,(t||this).context);return n&&n.scale()}function gAe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function uO(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function mAe(){return uO(this.context.dataflow,"warn",arguments)}function yAe(){return uO(this.context.dataflow,"info",arguments)}function vAe(){return uO(this.context.dataflow,"debug",arguments)}function d5(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function IT(e){const t=lc(e),n=d5(t.r),r=d5(t.g),i=d5(t.b);return .2126*n+.7152*r+.0722*i}function bAe(e,t){const n=IT(e),r=IT(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function xAe(){const e=[].slice.call(arguments);return e.unshift({}),Oe(...e)}function $ee(e,t){return e===t||e!==e&&t!==t?!0:Y(e)?Y(t)&&e.length===t.length?wAe(e,t):!1:ae(e)&&ae(t)?Aee(e,t):!1}function wAe(e,t){for(let n=0,r=e.length;n<r;++n)if(!$ee(e[n],t[n]))return!1;return!0}function Aee(e,t){for(const n in e)if(!$ee(e[n],t[n]))return!1;return!0}function lz(e){return t=>Aee(e,t)}function SAe(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(f=n===!0?Do:Y(n)||JC(n)?n:lz(n),c.remove(f)),t&&c.insert(t),r&&(f=lz(r),l.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function CAe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function kAe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const uz={};function EAe(e,t){const n=uz[t]||(uz[t]=Oo(t));return Y(e)?e.map(n):n(e)}function cO(e){return Y(e)||ArrayBuffer.isView(e)?e:null}function fO(e){return cO(e)||(ue(e)?e:null)}function _Ae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return cO(e).join(...n)}function $Ae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fO(e).indexOf(...n)}function AAe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fO(e).lastIndexOf(...n)}function TAe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fO(e).slice(...n)}function PAe(e,t,n){return De(n)&&G("Function argument passed to replace."),String(e).replace(t,n)}function FAe(e){return cO(e).slice().reverse()}function MAe(e,t,n){return CM(e||0,t||0,n||0)}function RAe(e,t){const n=ja(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function OAe(e,t){const n=ja(e,(t||this).context);return n?n.copy():void 0}function DAe(e,t){const n=ja(e,(t||this).context);return n?n.domain():[]}function NAe(e,t,n){const r=ja(e,(n||this).context);return r?Y(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function LAe(e,t){const n=ja(e,(t||this).context);return n&&n.range?n.range():[]}function IAe(e,t,n){const r=ja(e,(n||this).context);return r?r(t):void 0}function zAe(e,t,n,r,i){e=ja(e,(i||this).context);const o=vQ(t,n);let s=e.domain(),a=s[0],l=qe(s),u=kr;return l-a?u=sQ(e,a,l):e=(e.interpolator?et("sequential")().interpolator(e.interpolator()):et("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==qe(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o}function BAe(e,t,n){const r=ja(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function jAe(e){let t=null;return function(n){return n?Qy(n,t=t||ag(e)):e}}const Tee=e=>e.data;function Pee(e,t){const n=kee.call(t,e);return n.root&&n.root.lookup||{}}function UAe(e,t,n){const r=Pee(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(Tee):void 0}function VAe(e,t){const n=Pee(e,this)[t];return n?n.ancestors().map(Tee):void 0}const Fee=()=>typeof window<"u"&&window||null;function WAe(){const e=Fee();return e?e.screen:{}}function HAe(){const e=Fee();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function qAe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Mee(e,t,n){if(!e)return[];const[r,i]=e,o=new hn().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return gJ(s,o,GAe(t))}function GAe(e){let t=null;if(e){const n=le(e.marktype),r=le(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function YAe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=le(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function XAe(e){return le(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function KAe(e,t,n){const{x:r,y:i,mark:o}=n,s=new hn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),Mee([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>QAe(l.x,l.y,t))}function QAe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const l1={random(){return Lo()},cumulativeNormal:rk,cumulativeLogNormal:S6,cumulativeUniform:_6,densityNormal:y6,densityLogNormal:w6,densityUniform:E6,quantileNormal:ik,quantileLogNormal:C6,quantileUniform:$6,sampleNormal:nk,sampleLogNormal:x6,sampleUniform:k6,isArray:Y,isBoolean:_c,isDate:Vu,isDefined(e){return e!==void 0},isNumber:Je,isObject:ae,isRegExp:OG,isString:ue,isTuple:JC,isValid(e){return e!=null&&e===e},toBoolean:KF,toDate(e){return QF(e)},toNumber:vr,toString:JF,indexof:$Ae,join:_Ae,lastindexof:AAe,replace:PAe,reverse:FAe,slice:TAe,flush:MG,lerp:DG,merge:xAe,pad:IG,peek:qe,pluck:EAe,span:av,inrange:Ih,truncate:zG,rgb:lc,lab:kw,hcl:Ew,hsl:Sw,luminance:IT,contrast:bAe,sequence:Bi,format:Z3e,utcFormat:eAe,utcParse:nAe,utcOffset:yY,utcSequence:xY,timeFormat:Eee,timeParse:tAe,timeOffset:mY,timeSequence:bY,timeUnitSpecifier:oY,monthFormat:rAe,monthAbbrevFormat:iAe,dayFormat:oAe,dayAbbrevFormat:sAe,quarter:AG,utcquarter:TG,week:aY,utcweek:cY,dayofyear:sY,utcdayofyear:uY,warn:mAe,info:yAe,debug:vAe,extent(e){return $a(e)},inScope:gAe,intersect:Mee,clampRange:PG,pinchDistance:CAe,pinchAngle:kAe,screen:WAe,containerSize:qAe,windowSize:HAe,bandspace:MAe,setdata:Q3e,pathShape:jAe,panLinear:kG,panLog:EG,panPow:_G,panSymlog:$G,zoomLinear:WF,zoomLog:HF,zoomPow:uw,zoomSymlog:qF,encode:J3e,modify:SAe,lassoAppend:YAe,lassoPath:XAe,intersectLasso:KAe},JAe=["view","item","group","xy","x","y"],ZAe="event.vega.",Ree="this.",dO={},Oee={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ne(_ee+e)}]`,functions:eTe,constants:bee,visitors:dO},zT=wee(Oee);function eTe(e){const t=xee(e);JAe.forEach(n=>t[n]=ZAe+n);for(const n in l1)t[n]=Ree+n;return Oe(t,cAe(e,l1,dO)),t}function ln(e,t,n){return arguments.length===1?l1[e]:(l1[e]=t,n&&(dO[e]=n),zT&&(zT.functions[e]=Ree+e),this)}ln("bandwidth",RAe,Gr);ln("copy",OAe,Gr);ln("domain",DAe,Gr);ln("range",LAe,Gr);ln("invert",NAe,Gr);ln("scale",IAe,Gr);ln("gradient",zAe,Gr);ln("geoArea",fAe,Gr);ln("geoBounds",dAe,Gr);ln("geoCentroid",hAe,Gr);ln("geoShape",BAe,Gr);ln("geoScale",pAe,Gr);ln("indata",K3e,uAe);ln("data",kee,aO);ln("treePath",UAe,aO);ln("treeAncestors",VAe,aO);ln("vlSelectionTest",U3e,sO);ln("vlSelectionIdTest",H3e,sO);ln("vlSelectionResolve",G3e,sO);ln("vlSelectionTuples",q3e);function Pa(e,t){const n={};let r;try{e=ue(e)?e:ne(e)+"",r=iO(e)}catch{G("Expression parse error: "+e)}r.visit(o=>{if(o.type!==dee)return;const s=o.callee.name,a=Oee.visitors[s];a&&a(s,o.arguments,t,n)});const i=zT(r);return i.globals.forEach(o=>{const s=_ee+o;!fe(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:Oe({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function tTe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const nTe=ks(["rule"]),cz=ks(["group","image","rect"]);function rTe(e,t){let n="";return nTe[t]||(e.x2&&(e.x?(cz[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(cz[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function hO(e){return(e+"").toLowerCase()}function iTe(e){return hO(e)==="operator"}function oTe(e){return hO(e)==="collect"}function qm(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function sTe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var aTe={operator:(e,t)=>qm(e,["_"],t.code),parameter:(e,t)=>qm(e,["datum","_"],t.code),event:(e,t)=>qm(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return qm(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+ne(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=rTe(r,n),i+="return m;",qm(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(ne).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),sTe(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function lTe(e){const t=this;iTe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function uTe(e){const t=this;if(e.params){const n=t.get(e.id);n||G("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function cTe(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Y(i)?i.map(o=>fz(o,n,t)):fz(i,n,t)}return t}function fz(e,t,n){if(!e||!ae(e))return e;for(let r=0,i=dz.length,o;r<i;++r)if(o=dz[r],fe(e,o.key))return o.parse(e,t,n);return e}var dz=[{key:"$ref",parse:fTe},{key:"$key",parse:hTe},{key:"$expr",parse:dTe},{key:"$field",parse:pTe},{key:"$encode",parse:mTe},{key:"$compare",parse:gTe},{key:"$context",parse:yTe},{key:"$subflow",parse:vTe},{key:"$tupleid",parse:bTe}];function fTe(e,t){return t.get(e.$ref)||G("Operator not defined: "+e.$ref)}function dTe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=$i(t.parameterExpression(e.$expr),e.$fields))}function hTe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=XF(e.$key,e.$flat,t.expr.codegen))}function pTe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Oo(e.$field,e.$name,t.expr.codegen))}function gTe(e,t){const n="c:"+e.$compare+"_"+e.$order,r=le(e.$compare).map(i=>i&&i.$tupleid?be:i);return t.fn[n]||(t.fn[n]=GF(r,e.$order,t.expr.codegen))}function mTe(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=$i(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function yTe(e,t){return t}function vTe(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function bTe(){return be}function xTe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&G("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function wTe(e){var t=this,n=ae(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||G("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const STe={skip:!0};function CTe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function kTe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],STe)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Do).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function Dee(e,t,n,r){return new Nee(e,t,n,r)}function Nee(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||aTe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function hz(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Nee.prototype=hz.prototype={fork(){const e=new hz(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),oTe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[hO(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:tTe,parseOperator:lTe,parseOperatorParameters:uTe,parseParameters:cTe,parseStream:xTe,parseUpdate:wTe,getState:CTe,setState:kTe};function ETe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Lee(t,e.description()))}function Lee(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function _Te(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const h5="default";function $Te(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:h5,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?ue(i)?i:i.user:h5,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return ue(r)||(i=r.item,r=r.user),BT(e,r&&r!==h5?r:i||r),i},{cursor:t})}function BT(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function xS(e,t){var n=e._runtime.data;return fe(n,t)||G("Unrecognized data set: "+t),n[t]}function ATe(e,t){return arguments.length<2?xS(this,e).values.value:Wk.call(this,e,Ud().remove(Do).insert(t))}function Wk(e,t){GY(t)||G("Second argument to changes must be a changeset.");const n=xS(this,e);return n.modified=!0,this.pulse(n.input,t)}function TTe(e,t){return Wk.call(this,e,Ud().insert(t))}function PTe(e,t){return Wk.call(this,e,Ud().remove(t))}function Iee(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function zee(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Hk(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function FTe(e){var t=Hk(e),n=Iee(e),r=zee(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function MTe(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=Hk(e),s=t.changedTouches?t.changedTouches[0]:t,o=Fk(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=RTe(e,n,o),t}function RTe(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;ue(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:Er(e),item:Er(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const pz="view",OTe="timer",DTe="window",NTe={trap:!1};function LTe(e){const t=Oe({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{Y(r[o])&&(r[o]=ks(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Bee(e,t,n,r){e._eventListeners.push({type:n,sources:le(t),handler:r})}function ITe(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function ex(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ae(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function zTe(e,t,n){var r=this,i=new tk(n),o=function(u,c){r.runAsync(null,()=>{e===pz&&ITe(r,t)&&u.preventDefault(),i.receive(MTe(r,u,c))})},s;if(e===OTe)ex(r,"timer",t)&&r.timer(o,t);else if(e===pz)ex(r,"view",t)&&r.addEventListener(t,o,NTe);else if(e===DTe?ex(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&ex(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);Bee(r,s,t,o)}return i}function gz(e){return e.item}function mz(e){return e.item.mark.source}function yz(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function BTe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",gz),mz,yz(e)),this.on(this.events("view","pointerout",gz),mz,yz(t)),this}function jTe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Hi(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const UTe="vega-bind",VTe="vega-bind-name",WTe="vega-bind-radio";function HTe(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=YF(r.debounce,i.update))),(r.input==null&&r.element?qTe:YTe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function qTe(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),Bee(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(GTe(i))}}function GTe(e){return typeof Event<"u"?new Event(e):{type:e}}function YTe(e,t,n,r){const i=r.signal(n.signal),o=Hi("div",{class:UTe}),s=n.input==="radio"?o:o.appendChild(Hi("label"));s.appendChild(Hi("span",{class:VTe},n.name||n.signal)),t.appendChild(o);let a=XTe;switch(n.input){case"checkbox":a=KTe;break;case"select":a=QTe;break;case"radio":a=JTe;break;case"range":a=ZTe;break}a(e,s,n,i)}function XTe(e,t,n,r){const i=Hi("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function KTe(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=Hi("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function QTe(e,t,n,r){const i=Hi("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};wS(s,r)&&(l.selected=!0),i.appendChild(Hi("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(wS(n.options[a],s)){i.selectedIndex=a;return}}}function JTe(e,t,n,r){const i=Hi("span",{class:WTe}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};wS(s,r)&&(l.checked=!0);const u=Hi("input",l);u.addEventListener("change",()=>e.update(s));const c=Hi("label",{},(o[a]||s)+"");return c.prepend(u),i.appendChild(c),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)wS(a[u].value,s)&&(a[u].checked=!0)}}function ZTe(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||oc(o,i,100),a=Hi("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=Hi("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function wS(e,t){return e===t||e+""==t+""}function jee(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Iee(e),zee(e),Hk(e),i,o).background(e.background())}function pO(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function e4e(e,t,n,r){const i=new r(e.loader(),pO(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Hk(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function t4e(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=Mk(r);e=n._el=e?p5(n,e,!0):null,ETe(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||Pv,a=e?o.renderer:o.headless;return n._renderer=a?jee(n,n._renderer,e,a):null,n._handler=e4e(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=p5(n,t,!0):e.appendChild(Hi("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=p5(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{HTe(n,l.element||t,l)})),n}function p5(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const Gm=e=>+e||0,n4e=e=>({top:e,bottom:e,left:e,right:e});function vz(e){return ae(e)?{top:Gm(e.top),bottom:Gm(e.bottom),left:Gm(e.left),right:Gm(e.right)}:n4e(Gm(e))}async function gO(e,t,n,r){const i=Mk(t),o=i&&i.headless;return o||G("Unrecognized renderer type: "+t),await e.runAsync(),jee(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function r4e(e,t){e!==Ou.Canvas&&e!==Ou.SVG&&e!==Ou.PNG&&G("Unrecognized image type: "+e);const n=await gO(this,e,t);return e===Ou.SVG?i4e(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function i4e(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function o4e(e,t){return(await gO(this,Ou.Canvas,e,t)).canvas()}async function s4e(e){return(await gO(this,Ou.SVG,e)).svg()}function a4e(e,t,n){return Dee(e,tg,l1,n).parse(t)}function l4e(e){var t=this._runtime.scales;return fe(t,e)||G("Unrecognized scale or projection: "+e),t[e].value}var Uee="width",Vee="height",mO="padding",bz={skip:!0};function Wee(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===mO?r.left+r.right:0)}function Hee(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===mO?r.top+r.bottom:0)}function u4e(e){var t=e._signals,n=t[Uee],r=t[Vee],i=t[mO];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=Wee(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Hee(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function c4e(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(Uee,n,bz),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(Vee,r,bz),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function f4e(e){return this._runtime.getState(e||{data:d4e,signals:h4e,recurse:!0})}function d4e(e,t){return t.modified&&Y(t.input.value)&&!e.startsWith("_:vega:_")}function h4e(e,t){return!(e==="parent"||t instanceof tg.proxy)}function p4e(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function g4e(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(qEe(n,t))}function m4e(e,t,n,r){const i=e.element();i&&i.setAttribute("title",y4e(r))}function y4e(e){return e==null?"":Y(e)?qee(e):ae(e)&&!Vu(e)?v4e(e):e+""}function v4e(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Y(n)?qee(n):Gee(n))}).join(`
`)}function qee(e){return"["+e.map(Gee).join(", ")+"]"}function Gee(e){return Y(e)?"[]":ae(e)&&!Vu(e)?"{}":e}function b4e(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Yee(e,t){const n=this;if(t=t||{},dp.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=Oe({},e.locale,t.locale);n.locale(LY(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Ou.Canvas,n._scenegraph=new UQ;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||m4e,n._redraw=!0,n._handler=new Pv().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=LTe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=a4e(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Oe({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Wee(n,n._width),n._viewHeight=Hee(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,u4e(n),_Te(n),$Te(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function tx(e,t){return fe(e._signals,t)?e._signals[t]:G("Unrecognized signal name: "+ne(t))}function Xee(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function xz(e,t,n,r){let i=Xee(n,r);return i||(i=pO(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function wz(e,t,n){const r=Xee(t,n);return r&&t._targets.remove(r),e}re(Yee,dp,{async evaluate(e,t,n){if(await dp.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,FTe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&e2(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Lee(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=tx(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",vz(e)):vz(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Mk(e)||G("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(dp.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(tx(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:c4e,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=pO(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return xz(this,e,tx(this,e),t)},removeSignalListener(e,t){return wz(this,tx(this,e),t)},addDataListener(e,t){return xz(this,e,xS(this,e).values,t)},removeDataListener(e,t){return wz(this,xS(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=BT(this,null);this._globalCursor=!!e,t&&BT(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:g4e,events:zTe,finalize:jTe,hover:BTe,data:ATe,change:Wk,insert:TTe,remove:PTe,scale:l4e,initialize:t4e,toImageURL:r4e,toCanvas:o4e,toSVG:s4e,getState:f4e,setState:p4e,_watchPixelRatio:b4e});const x4e="view",SS="[",CS="]",Kee="{",Qee="}",w4e=":",Jee=",",S4e="@",C4e=">",k4e=/[[\]{}]/,E4e={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Zee,ete;function Mc(e,t,n){return Zee=t||x4e,ete=n||E4e,tte(e.trim()).map(jT)}function _4e(e){return ete[e]}function vy(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function tte(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=vy(e,i,Jee,SS+Kee,CS+Qee),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function jT(e){return e[0]==="["?$4e(e):A4e(e)}function $4e(e){const t=e.length;let n=1,r;if(n=vy(e,n,CS,SS,CS),n===t)throw"Empty between selector: "+e;if(r=tte(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==C4e)throw"Expected '>' after between selector: "+e;r=r.map(jT);const i=jT(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function A4e(e){const t={source:Zee},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===Qee){if(a=e.lastIndexOf(Kee),a>=0){try{r=T4e(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===S4e&&(i=++a),l=vy(e,a,w4e),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=vy(e,a,SS),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=vy(e,a,CS),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==SS)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||k4e.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):_4e(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function T4e(e){const t=e.split(Jee);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function P4e(e){return ae(e)?e:{type:e||"pad"}}const Ym=e=>+e||0,F4e=e=>({top:e,bottom:e,left:e,right:e});function M4e(e){return ae(e)?e.signal?e:{top:Ym(e.top),bottom:Ym(e.bottom),left:Ym(e.left),right:Ym(e.right)}:F4e(Ym(e))}const On=e=>ae(e)&&!Y(e)?Oe({},e):{value:e};function Sz(e,t,n,r){return n!=null?(ae(n)&&!Y(n)||Y(n)&&n.length&&ae(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function tr(e,t,n){for(const r in t)Sz(e,r,t[r]);for(const r in n)Sz(e,r,n[r],"update")}function pm(e,t,n){for(const r in t)n&&fe(n,r)||(e[r]=Oe(e[r]||{},t[r]));return e}function Nh(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const yO="mark",vO="frame",bO="scope",R4e="axis",O4e="axis-domain",D4e="axis-grid",N4e="axis-label",L4e="axis-tick",I4e="axis-title",z4e="legend",B4e="legend-band",j4e="legend-entry",U4e="legend-gradient",nte="legend-label",V4e="legend-symbol",W4e="legend-title",H4e="title",q4e="title-text",G4e="title-subtitle";function Y4e(e,t,n,r,i){const o={},s={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!Nh(l,e)&&g5(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===vO?i.group:n===yO?Oe({},i.mark,i[t]):null;for(l in c)u=Nh(l,e)||(l==="fill"||l==="stroke")&&(Nh("fill",e)||Nh("stroke",e)),u||g5(o,l,c[l]);le(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Nh(h,e)||g5(o,h,d[h])}),e=Oe({},e);for(l in o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=Oe(s,e.enter),a&&(e.update=Oe(a,e.update)),e}function g5(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const rte=e=>ue(e)?ne(e):e.signal?`(${e.signal})`:ite(e);function qk(e){if(e.gradient!=null)return K4e(e);let t=e.signal?`(${e.signal})`:e.color?X4e(e.color):e.field!=null?ite(e.field):e.value!==void 0?ne(e.value):void 0;return e.scale!=null&&(t=Q4e(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${v2(e.exponent)})`),e.mult!=null&&(t+=`*${v2(e.mult)}`),e.offset!=null&&(t+=`+${v2(e.offset)}`),e.round&&(t=`round(${t})`),t}const nx=(e,t,n,r)=>`(${e}(${[t,n,r].map(qk).join(",")})+'')`;function X4e(e){return e.c?nx("hcl",e.h,e.c,e.l):e.h||e.s?nx("hsl",e.h,e.s,e.l):e.l||e.a?nx("lab",e.l,e.a,e.b):e.r||e.g||e.b?nx("rgb",e.r,e.g,e.b):null}function K4e(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ne(n));for(;t.length&&qe(t)==null;)t.pop();return t.unshift(rte(e.gradient)),`gradient(${t.join(",")})`}function v2(e){return ae(e)?"("+qk(e)+")":e}function ite(e){return ote(ae(e)?e:{datum:e})}function ote(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):G("Invalid field reference: "+ne(e));return e.signal||(r=ue(r)?Da(r).map(ne).join("]["):ote(r)),t+"["+r+"]"}function Q4e(e,t){const n=rte(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+v2(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function J4e(e){let t="";return e.forEach(n=>{const r=qk(n);t+=n.test?`(${n.test})?${r}:`:r}),qe(t)===":"&&(t+="null"),t}function ste(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=Y4e(e,t,n,r,i.config);for(const a in e)s[a]=Z4e(e[a],t,o,i);return o}function Z4e(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=tPe(ePe(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function ePe(e){return Y(e)?J4e(e):qk(e)}function tPe(e,t,n,r){const i=Pa(e,t);return i.$fields.forEach(o=>r[o]=1),Oe(n,i.$params),i.$expr}const nPe="outer",rPe=["value","update","init","react","bind"];function Cz(e,t){G(e+' for "outer" push: '+ne(t))}function ate(e,t){const n=e.name;if(e.push===nPe)t.signals[n]||Cz("No prior signal definition",n),rPe.forEach(r=>{e[r]!==void 0&&Cz("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function UT(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Gk(e,t,n,r){return new UT(e,t,n,r)}function kS(e,t){return Gk("operator",e,t)}function ve(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function u1(e,t){return t?{$field:e,$name:t}:{$field:e}}const VT=u1("key");function kz(e,t){return{$compare:e,$order:t}}function iPe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const oPe="ascending",sPe="descending";function aPe(e){return ae(e)?(e.order===sPe?"-":"+")+Yk(e.op,e.field):""}function Yk(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const xO="scope",WT="view";function Sn(e){return e&&e.signal}function lPe(e){return e&&e.expr}function b2(e){if(Sn(e))return!0;if(ae(e)){for(const t in e)if(b2(e[t]))return!0}return!1}function rs(e,t){return e??t}function Gf(e){return e&&e.signal||e}const Ez="timer";function c1(e,t){return(e.merge?cPe:e.stream?fPe:e.type?dPe:G("Invalid stream specification: "+ne(e)))(e,t)}function uPe(e){return e===xO?WT:e||WT}function cPe(e,t){const n=e.merge.map(i=>c1(i,t)),r=wO({merge:n},e,t);return t.addStream(r).id}function fPe(e,t){const n=c1(e.stream,t),r=wO({stream:n},e,t);return t.addStream(r).id}function dPe(e,t){let n;e.type===Ez?(n=t.event(Ez,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(uPe(e.source),e.type);const r=wO({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function wO(e,t,n){let r=t.between;return r&&(r.length!==2&&G('Stream "between" parameter must have 2 entries: '+ne(t)),e.between=[c1(r[0],n),c1(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(hPe(t.marktype,t.markname,t.markrole)),t.source===xO&&r.push("inScope(event.item)"),r.length&&(e.filter=Pa("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function hPe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const pPe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function gPe(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||G("Signal update missing events specification."),ue(o)&&(o=Mc(o,t.isSubscope()?xO:WT)),o=le(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[yPe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&G("Signal encode and update are mutually exclusive."),s="encode(item(),"+ne(r)+")"),i.update=ue(s)?Pa(s,t):s.expr!=null?Pa(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:pPe,$params:{$value:t.signalRef(s.signal)}}:G("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(Oe(mPe(l,t),i)))}function mPe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):c1(e,t)}}function yPe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function vPe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?G("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Pa(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>gPe(i,t,n.id))}const xt=e=>(t,n,r)=>Gk(e,n,t||void 0,r),lte=xt("aggregate"),bPe=xt("axisticks"),ute=xt("bound"),Ds=xt("collect"),_z=xt("compare"),xPe=xt("datajoin"),cte=xt("encode"),wPe=xt("expression"),SPe=xt("facet"),CPe=xt("field"),kPe=xt("key"),EPe=xt("legendentries"),_Pe=xt("load"),$Pe=xt("mark"),APe=xt("multiextent"),TPe=xt("multivalues"),PPe=xt("overlap"),FPe=xt("params"),fte=xt("prefacet"),MPe=xt("projection"),RPe=xt("proxy"),OPe=xt("relay"),dte=xt("render"),DPe=xt("scale"),qd=xt("sieve"),NPe=xt("sortitems"),hte=xt("viewlayout"),LPe=xt("values");let IPe=0;const pte={min:"min",max:"max",count:"sum"};function zPe(e,t){const n=e.type||"linear";eQ(n)||G("Unrecognized scale type: "+ne(n)),t.addScale(e.name,{type:n,domain:void 0})}function BPe(e,t){const n=t.getScale(e.name).params;let r;n.domain=gte(e.domain,e,t),e.range!=null&&(n.range=yte(e,t,n)),e.interpolate!=null&&KPe(e.interpolate,n),e.nice!=null&&(n.nice=XPe(e.nice,t)),e.bins!=null&&(n.bins=YPe(e.bins,t));for(r in e)fe(n,r)||r==="name"||(n[r]=$o(e[r],t))}function $o(e,t){return ae(e)?e.signal?t.signalRef(e.signal):G("Unsupported object: "+ne(e)):e}function x2(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>$o(n,t))}function Xk(e){G("Can not find data set: "+ne(e))}function gte(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&G("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Y(e)?jPe:e.fields?VPe:UPe)(e,t,n)}function jPe(e,t,n){return e.map(r=>$o(r,n))}function UPe(e,t,n){const r=n.getData(e.data);return r||Xk(e.data),sg(t.type)?r.valuesRef(n,e.field,mte(e.sort,!1)):rQ(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function VPe(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=ue(s)?{data:r,field:s}:Y(s)||s.signal?WPe(s,n):s,o.push(s),o),[]);return(sg(t.type)?HPe:rQ(t.type)?qPe:GPe)(e,n,i)}function WPe(e,t){const n="_:vega:_"+IPe++,r=Ds({});if(Y(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ne(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,qd({})]),{data:n,field:"data"}}function HPe(e,t,n){const r=mte(e.sort,!0);let i,o;const s=n.map(u=>{const c=t.getData(u.data);return c||Xk(u.data),c.countsRef(t,u.field,r)}),a={groupby:VT,pulse:s};r&&(i=r.op||"count",o=r.field?Yk(i,r.field):"count",a.ops=[pte[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(lte(a));const l=t.add(Ds({pulse:ve(i)}));return o=t.add(LPe({field:VT,sort:t.sortRef(r),pulse:ve(l)})),ve(o)}function mte(e,t){return e&&(!e.field&&!e.op?ae(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?G("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!pte[e.op]&&G("Multiple domain scales can not be sorted using "+e.op)),e}function qPe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||Xk(i.data),o.domainRef(t,i.field)});return ve(t.add(TPe({values:r})))}function GPe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||Xk(i.data),o.extentRef(t,i.field)});return ve(t.add(APe({extents:r})))}function YPe(e,t){return e.signal||Y(e)?x2(e,t):t.objectProperty(e)}function XPe(e,t){return e.signal?t.signalRef(e.signal):ae(e)?{interval:$o(e.interval),step:$o(e.step)}:$o(e)}function KPe(e,t){t.interpolate=$o(e.type||e),e.gamma!=null&&(t.interpolateGamma=$o(e.gamma))}function yte(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(ue(i)){if(r&&fe(r,i))return e=Oe({},e,{range:r[i]}),yte(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=sg(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:G("Unrecognized scale range value: "+ne(i))}else if(i.scheme){n.scheme=Y(i.scheme)?x2(i.scheme,t):$o(i.scheme,t),i.extent&&(n.schemeExtent=x2(i.extent,t)),i.count&&(n.schemeCount=$o(i.count,t));return}else if(i.step){n.rangeStep=$o(i.step,t);return}else{if(sg(e.type)&&!Y(i))return gte(i,e,t);Y(i)||G("Unsupported range type: "+ne(i))}return i.map(o=>(Y(o)?x2:$o)(o,t))}function QPe(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=HT(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=HT(n[i],i,t));t.addProjection(e.name,r)}function HT(e,t,n){return Y(e)?e.map(r=>HT(r,t,n)):ae(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:G("Unsupported parameter object: "+ne(e)):e}const Ns="top",gm="left",mm="right",hc="bottom",vte="center",JPe="vertical",ZPe="start",eFe="middle",tFe="end",qT="index",SO="label",nFe="offset",gg="perc",rFe="perc2",Fo="value",zv="guide-label",CO="guide-title",iFe="group-title",oFe="group-subtitle",$z="symbol",w2="gradient",GT="discrete",YT="size",sFe="shape",aFe="fill",lFe="stroke",uFe="strokeWidth",cFe="strokeDash",fFe="opacity",kO=[YT,sFe,aFe,lFe,uFe,cFe,fFe],Bv={name:1,style:1,interactive:1},Ye={value:0},Mo={value:1},Kk="group",bte="rect",EO="rule",dFe="symbol",Gd="text";function f1(e){return e.type=Kk,e.interactive=e.interactive||!1,e}function Ai(e,t){const n=(r,i)=>rs(e[r],rs(t[r],i));return n.isVertical=r=>JPe===rs(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>rs(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>rs(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>rs(e.columns,rs(t.columns,+n.isVertical(!0))),n}function xte(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function hFe(e,t,n){const r=t.config.style[n];return r&&r[e]}function Qk(e,t,n){return`item.anchor === '${ZPe}' ? ${e} : item.anchor === '${tFe}' ? ${t} : ${n}`}const _O=Qk(ne(gm),ne(mm),ne(vte));function pFe(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ae(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function wte(e,t){return t?e?ae(e)?Object.assign({},e,{offset:wte(e.offset,t)}):{value:e,offset:t}:t:e}function eo(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=pm(e.encode,t,Bv)):e.interactive=!1,e}function gFe(e,t,n,r){const i=Ai(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,c,f,d;o?(u=[0,1],c=[0,0],f=s,d=a):(u=[0,0],c=[1,0],f=a,d=s);const h={enter:l={opacity:Ye,x:Ye,y:Ye,width:On(f),height:On(d)},update:Oe({},l,{opacity:Mo,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Ye}};return tr(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),eo({type:bte,role:U4e,encode:h},r)}function mFe(e,t,n,r,i){const o=Ai(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,f,d,h="";s?(u="y",f="y2",c="x",d="width",h="1-"):(u="x",f="x2",c="y",d="height");const p={opacity:Ye,fill:{scale:t,field:Fo}};p[u]={signal:h+"datum."+gg,mult:l},p[c]=Ye,p[f]={signal:h+"datum."+rFe,mult:l},p[d]=On(a);const g={enter:p,update:Oe({},p,{opacity:Mo}),exit:{opacity:Ye}};return tr(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),eo({type:bte,role:B4e,key:Fo,from:i,encode:g},r)}const yFe=`datum.${gg}<=0?"${gm}":datum.${gg}>=1?"${mm}":"${vte}"`,vFe=`datum.${gg}<=0?"${hc}":datum.${gg}>=1?"${Ns}":"${eFe}"`;function Az(e,t,n,r){const i=Ai(e,t),o=i.isVertical(),s=On(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,f,d,h="";const p={enter:u={opacity:Ye},update:c={opacity:Mo,text:{field:SO}},exit:{opacity:Ye}};return tr(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:rs(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:vFe},f="y",d="x",h="1-"):(u.align=c.align={signal:yFe},u.baseline={value:"top"},f="x",d="y"),u[f]=c[f]={signal:h+"datum."+gg,mult:a},u[d]=c[d]=s,s.offset=rs(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+qT}:void 0,eo({type:Gd,role:nte,style:zv,key:Fo,from:r,encode:p,overlap:l},n)}function bFe(e,t,n,r,i){const o=Ai(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${nFe} : datum.${YT}`,h=u?On(u):{field:YT},p=`datum.${qT}`,g=`max(1, ${i})`;let m,y,v,b,x;h.mult=.5,m={enter:y={opacity:Ye,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Mo,x:y.x,y:y.y},exit:{opacity:Ye}};let S=null,C=null;e.fill||(S=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),tr(m,{fill:o("symbolFillColor",S),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",C),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),kO.forEach(A=>{e[A]&&(v[A]=y[A]={scale:e[A],field:Fo})});const w=eo({type:dFe,role:V4e,key:Fo,from:f,clip:u?!0:void 0,encode:m},n.symbols),k=On(c);k.offset=o("labelOffset"),m={enter:y={opacity:Ye,x:{signal:d,offset:k},y:h},update:v={opacity:Mo,text:{field:SO},x:y.x,y:y.y},exit:{opacity:Ye}},tr(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const E=eo({type:Gd,role:nte,style:zv,key:Fo,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:Ye,height:u?On(u):Ye,opacity:Ye},exit:{opacity:Ye},update:v={opacity:Mo,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,x={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,x={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:qT}},f1({role:bO,from:r,encode:pm(m,s,Bv),marks:[w,E],name:l,interactive:a,sort:x})}function xFe(e,t){const n=Ai(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const $O='item.orient === "left"',AO='item.orient === "right"',Jk=`(${$O} || ${AO})`,wFe=`datum.vgrad && ${Jk}`,SFe=Qk('"top"','"bottom"','"middle"'),CFe=Qk('"right"','"left"','"center"'),kFe=`datum.vgrad && ${AO} ? (${CFe}) : (${Jk} && !(datum.vgrad && ${$O})) ? "left" : ${_O}`,EFe=`item._anchor || (${Jk} ? "middle" : "start")`,_Fe=`${wFe} ? (${$O} ? -90 : 90) : 0`,$Fe=`${Jk} ? (datum.vgrad ? (${AO} ? "bottom" : "top") : ${SFe}) : "top"`;function AFe(e,t,n,r){const i=Ai(e,t),o={enter:{opacity:Ye},update:{opacity:Mo,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ye}};return tr(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:EFe},angle:{signal:_Fe},align:{signal:kFe},baseline:{signal:$Fe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),eo({type:Gd,role:W4e,style:CO,from:r,encode:o},n)}function TFe(e,t){let n;return ae(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Tz(e.path)+")":e.sphere&&(n="geoShape("+Tz(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Tz(e){return ae(e)&&e.signal?e.signal:ne(e)}function Ste(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Kk?bO:t||yO}function PFe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Ste(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function FFe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function TO(e,t){const n=KY(e.type);n||G("Unrecognized transform type: "+ne(e.type));const r=Gk(n.type.toLowerCase(),null,Cte(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Cte(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=MFe(s,t,n)}return r}function MFe(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return RFe(e,t,n);if(i===void 0){e.required&&G("Missing required "+ne(t.type)+" parameter: "+ne(e.name));return}else{if(r==="param")return OFe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Sn(i)?i.map(o=>Pz(e,o,n)):Pz(e,i,n)}function Pz(e,t,n){const r=e.type;if(Sn(t))return Mz(r)?G("Expression references can not be signals."):m5(r)?n.fieldRef(t):Rz(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||m5(r);return i&&DFe(t)?n.exprRef(t.expr,t.as):i&&NFe(t)?u1(t.field,t.as):Mz(r)?Pa(t,n):LFe(r)?ve(n.getData(t).values):m5(r)?u1(t):Rz(r)?n.compareRef(t):t}}function RFe(e,t,n){return ue(t.from)||G('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function OFe(e,t,n){const r=t[e.name];return e.array?(Y(r)||G("Expected an array of sub-parameters. Instead: "+ne(r)),r.map(i=>Fz(e,i,n))):Fz(e,r,n)}function Fz(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||G("Unsupported parameter: "+ne(t));const o=Oe(Cte(i,t,n),i.key);return ve(n.add(FPe(o)))}const DFe=e=>e&&e.expr,NFe=e=>e&&e.field,LFe=e=>e==="data",Mz=e=>e==="expr",m5=e=>e==="field",Rz=e=>e==="compare";function IFe(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||G("Only group marks can be faceted."),r.field!=null?s=a=S2(r,n):(e.data?a=ve(n.getData(e.data).aggregate):(o=TO(Oe({type:"aggregate",groupby:le(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=S2(r,n),s=a=ve(n.add(o))),i=n.keyRef(r.groupby,!0))):s=ve(n.add(Ds(null,[{}]))),s||(s=S2(e,n)),{key:i,pulse:s,parent:a}}function S2(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ve(t.getData(e.data).output)}function vd(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}vd.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=ve(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new vd(e,o,i,r,s)};function kte(e){return ue(e)?e:null}function Oz(e,t,n){const r=Yk(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Xm(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=aPe(o);let u=kte(i),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const d=o?{field:VT,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:ve(t.output)};l&&(d.sort=e.sortRef(o)),f=e.add(Gk(r,void 0,d)),s&&(t.index[i]=f),c=ve(f),u!=null&&(a[u]=c)}return c}vd.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=kte(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&Oz(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:ve(r.output)},n&&n.field&&Oz(e,l,n),a=e.add(lte(l)),s=e.add(Ds({pulse:ve(a)})),s={agg:a,ref:ve(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return ve(this.values)},extentRef(e,t){return Xm(e,this,"extent","extent",t,!1)},domainRef(e,t){return Xm(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Xm(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Xm(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Xm(e,this,"indata","tupleindex",t,!0,!0)}};function zFe(e,t,n){const r=e.from.facet,i=r.name,o=S2(r,t);let s;r.name||G("Facet must have a name: "+ne(r)),r.data||G("Facet must reference a data set: "+ne(r)),r.field?s=t.add(fte({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(SPe({key:t.keyRef(r.groupby),group:ve(t.proxy(n.parent)),pulse:o})):G("Facet must specify groupby or field: "+ne(r));const a=t.fork(),l=a.add(Ds()),u=a.add(qd({pulse:ve(l)}));a.addData(i,new vd(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function BFe(e,t,n){const r=t.add(fte({pulse:n.pulse})),i=t.fork();i.add(qd()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Ete(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(kS()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=Pa(u,t);l.update=c.$expr,l.params=c.$params}function Zk(e,t){const n=Ste(e),r=e.type===Kk,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===bO||n===vO,a,l,u,c,f,d,h;const p=n===yO||s||i,g=IFe(e.from,r,t);l=t.add(xPe({key:g.key||(e.key?u1(e.key):void 0),pulse:g.pulse,clean:!r}));const m=ve(l);l=u=t.add(Ds({pulse:m})),l=t.add($Pe({markdef:PFe(e),interactive:FFe(e.interactive,t),clip:TFe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ve(l)}));const y=ve(l);l=c=t.add(cte(ste(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const w=TO(C,t),k=w.metadata;(k.generates||k.changes)&&G("Mark transforms should not generate new data."),k.nomod||(c.params.mod=!0),w.params.pulse=ve(l),t.add(l=w)}),e.sort&&(l=t.add(NPe({sort:t.compareRef(e.sort),pulse:ve(l)})));const v=ve(l);(i||s)&&(s=t.add(hte({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=ve(s));const b=t.add(ute({mark:y,pulse:d||v}));h=ve(b),r&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||h,m),i?zFe(e,t,g):p?BFe(e,t,g):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(b))),o&&(h=jFe(o,h,t));const x=t.add(dte({pulse:h})),S=t.add(qd({pulse:ve(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new vd(t,u,x,S)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&G("Marks only support modify triggers."),Ete(C,t,f)}))}function jFe(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:Sn(o)?n.signalRef(o.signal):o,method:Sn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=Sn(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return ve(n.add(PPe(s)))}function UFe(e,t){const n=t.config.legend,r=e.encode||{},i=Ai(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let c=0,f,d,h;kO.forEach(b=>e[b]?(u[b]=e[b],c=c||e[b]):0),c||G("Missing valid scale for legend.");const p=VFe(e,t.scaleType(c)),g={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},m=ve(t.add(Ds(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},v=ve(t.add(EPe(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===w2?(h=[gFe(e,c,n,r.gradient),Az(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Gf(i.gradientLength())})/100))`)):p===GT?h=[mFe(e,c,n,r.gradient,v),Az(e,n,r.labels,v)]:(f=xFe(e,n),h=[bFe(e,n,r,v,Gf(f.columns))],d.size=qFe(e,t,h[0].marks)),h=[f1({role:j4e,from:m,encode:y,marks:h,layout:f,interactive:a})],g.title&&h.push(AFe(e,n,r.title,m)),Zk(f1({role:z4e,from:m,encode:pm(HFe(i,e,n),o,Bv),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function VFe(e,t){let n=e.type||$z;return!e.type&&WFe(e)===1&&(e.fill||e.stroke)&&(n=AM(t)?w2:zA(t)?GT:$z),n!==w2?n:zA(t)?GT:w2}function WFe(e){return kO.reduce((t,n)=>t+(e[n]?1:0),0)}function HFe(e,t,n){const r={enter:{},update:{}};return tr(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function qFe(e,t,n){const r=Gf(Dz("size",e,n)),i=Gf(Dz("strokeWidth",e,n)),o=Gf(GFe(n[1].encode,t,zv));return Pa(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function Dz(e,t,n){return t[e]?`scale("${t[e]}",datum)`:xte(e,n[0].encode)}function GFe(e,t,n){return xte("fontSize",e)||hFe("fontSize",t,n)}const YFe=`item.orient==="${gm}"?-90:item.orient==="${mm}"?90:0`;function XFe(e,t){e=ue(e)?{text:e}:e;const n=Ai(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},c=ve(t.add(Ds(null,[u])));return l.push(JFe(e,n,KFe(e),c)),e.subtitle&&l.push(ZFe(e,n,r.subtitle,c)),Zk(f1({role:H4e,from:c,encode:QFe(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function KFe(e){const t=e.encode;return t&&t.title||Oe({name:e.name,interactive:e.interactive,style:e.style},t)}function QFe(e,t){const n={enter:{},update:{}};return tr(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:_O},angle:{signal:YFe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),pm(n,t,Bv)}function JFe(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return tr(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),eo({type:Gd,role:q4e,style:iFe,from:r,encode:s},n)}function ZFe(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return tr(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),eo({type:Gd,role:G4e,style:oFe,from:r,encode:s},n)}function e6e(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(TO(r,t))}),e.on&&e.on.forEach(r=>{Ete(r,t,e.name)}),t.addDataPipeline(e.name,t6e(e,t,n))}function t6e(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,c,f;for(e.values?Sn(e.values)||b2(e.format)?(r.push(Nz(t,e)),r.push(i=Kc())):r.push(i=Kc({$ingest:e.values,$format:e.format})):e.url?b2(e.url)||b2(e.format)?(r.push(Nz(t,e)),r.push(i=Kc())):r.push(i=Kc({$request:e.url,$format:e.format})):e.source&&(i=a=le(e.source).map(d=>ve(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!i&&!f.source&&r.push(i=Kc()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(u=a.length-1,r[0]=OPe({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,Kc())),i||r.push(Kc()),r.push(qd({})),r}function Kc(e){const t=Ds({},e);return t.metadata={source:!0},t}function Nz(e,t){return _Pe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const _te=e=>e===hc||e===Ns,eE=(e,t,n)=>Sn(e)?o6e(e.signal,t,n):e===gm||e===Ns?t:n,Dn=(e,t,n)=>Sn(e)?r6e(e.signal,t,n):_te(e)?t:n,bs=(e,t,n)=>Sn(e)?i6e(e.signal,t,n):_te(e)?n:t,$te=(e,t,n)=>Sn(e)?s6e(e.signal,t,n):e===Ns?{value:t}:{value:n},n6e=(e,t,n)=>Sn(e)?a6e(e.signal,t,n):e===mm?{value:t}:{value:n},r6e=(e,t,n)=>Ate(`${e} === '${Ns}' || ${e} === '${hc}'`,t,n),i6e=(e,t,n)=>Ate(`${e} !== '${Ns}' && ${e} !== '${hc}'`,t,n),o6e=(e,t,n)=>PO(`${e} === '${gm}' || ${e} === '${Ns}'`,t,n),s6e=(e,t,n)=>PO(`${e} === '${Ns}'`,t,n),a6e=(e,t,n)=>PO(`${e} === '${mm}'`,t,n),Ate=(e,t,n)=>(t=t!=null?On(t):t,n=n!=null?On(n):n,Lz(t)&&Lz(n)?(t=t?t.signal||ne(t.value):null,n=n?n.signal||ne(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Oe({test:e},t)].concat(n||[])),Lz=e=>e==null||Object.keys(e).length===1,PO=(e,t,n)=>({signal:`${e} ? (${Vh(t)}) : (${Vh(n)})`}),l6e=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${gm}' ? (${Vh(r)}) : `:"")+(n!=null?`${e} === '${hc}' ? (${Vh(n)}) : `:"")+(i!=null?`${e} === '${mm}' ? (${Vh(i)}) : `:"")+(t!=null?`${e} === '${Ns}' ? (${Vh(t)}) : `:"")+"(null)"}),Vh=e=>Sn(e)?e.signal:e==null?null:ne(e),u6e=(e,t)=>t===0?0:Sn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},mp=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Sh(e,t,n,r){let i;if(t&&fe(t,e))return t[e];if(fe(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[CO][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[zv][i]}return null}function Iz(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function c6e(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(Sn(s)){const f=Iz([n.axisX,n.axisY]),d=Iz([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of f)a[u]=Dn(s,Sh(u,n.axisX,i,r),Sh(u,n.axisY,i,r));l={};for(u of d)l[u]=l6e(s.signal,Sh(u,n.axisTop,i,r),Sh(u,n.axisBottom,i,r),Sh(u,n.axisLeft,i,r),Sh(u,n.axisRight,i,r))}else a=s===Ns||s===hc?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?Oe({},i,a,l,o):i}function f6e(e,t,n,r){const i=Ai(e,t),o=e.orient;let s,a;const l={enter:s={opacity:Ye},update:a={opacity:Mo},exit:{opacity:Ye}};tr(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=zz(e,0),c=zz(e,1);return s.x=a.x=Dn(o,u,Ye),s.x2=a.x2=Dn(o,c),s.y=a.y=bs(o,u,Ye),s.y2=a.y2=bs(o,c),eo({type:EO,role:O4e,from:r,encode:l},n)}function zz(e,t){return{scale:e.scale,range:t}}function d6e(e,t,n,r,i){const o=Ai(e,t),s=e.orient,a=e.gridScale,l=eE(s,1,-1),u=h6e(e.offset,l);let c,f,d;const h={enter:c={opacity:Ye},update:d={opacity:Mo},exit:f={opacity:Ye}};tr(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:Fo,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},g=Dn(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:Oe(g,{mult:l,offset:u});return c.x=d.x=Dn(s,p,m),c.y=d.y=bs(s,p,m),c.x2=d.x2=bs(s,y),c.y2=d.y2=Dn(s,y),f.x=Dn(s,p),f.y=bs(s,p),eo({type:EO,role:D4e,key:Fo,from:r,encode:h},n)}function h6e(e,t){if(t!==1)if(!ae(e))e=Sn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Oe({},e);for(;n.mult!=null;)if(ae(n.mult))n=n.mult=Oe({},n.mult);else return n.mult=Sn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function p6e(e,t,n,r,i,o){const s=Ai(e,t),a=e.orient,l=eE(a,-1,1);let u,c,f;const d={enter:u={opacity:Ye},update:f={opacity:Mo},exit:c={opacity:Ye}};tr(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=On(i);h.mult=l;const p={scale:e.scale,field:Fo,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=u.y=Dn(a,Ye,p),f.y2=u.y2=Dn(a,h),c.x=Dn(a,p),f.x=u.x=bs(a,Ye,p),f.x2=u.x2=bs(a,h),c.y=bs(a,p),eo({type:EO,role:L4e,key:Fo,from:r,encode:d},n)}function y5(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function g6e(e,t,n,r,i,o){const s=Ai(e,t),a=e.orient,l=e.scale,u=eE(a,-1,1),c=Gf(s("labelFlush")),f=Gf(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let p=c===0||!!c,g;const m=On(i);m.mult=u,m.offset=On(s("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:Fo,band:.5,offset:wte(o.offset,s("labelOffset"))},v=Dn(a,p?y5(l,c,'"left"','"right"','"center"'):{value:"center"},n6e(a,"left","right")),b=Dn(a,$te(a,"bottom","top"),p?y5(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=y5(l,c,`-(${f})`,f,0);p=p&&f;const S={opacity:Ye,x:Dn(a,y,m),y:bs(a,y,m)},C={enter:S,update:g={opacity:Mo,text:{field:SO},x:S.x,y:S.y,align:v,baseline:b},exit:{opacity:Ye,x:S.x,y:S.y}};tr(C,{dx:!d&&p?Dn(a,x):null,dy:!h&&p?bs(a,x):null}),tr(C,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const w=s("labelBound");let k=s("labelOverlap");return k=k||w?{separation:s("labelSeparation"),method:k,order:"datum.index",bound:w?{scale:l,orient:a,tolerance:w}:null}:void 0,g.align!==v&&(g.align=mp(g.align,v)),g.baseline!==b&&(g.baseline=mp(g.baseline,b)),eo({type:Gd,role:N4e,style:zv,key:Fo,from:r,encode:C,overlap:k},n)}function m6e(e,t,n,r){const i=Ai(e,t),o=e.orient,s=eE(o,-1,1);let a,l;const u={enter:a={opacity:Ye,anchor:On(i("titleAnchor",null)),align:{signal:_O}},update:l=Oe({},a,{opacity:Mo,text:On(e.title)}),exit:{opacity:Ye}},c={signal:`lerp(range("${e.scale}"), ${Qk(0,1,.5)})`};return l.x=Dn(o,c),l.y=bs(o,c),a.angle=Dn(o,Ye,u6e(s,90)),a.baseline=Dn(o,$te(o,hc,Ns),{value:hc}),l.angle=a.angle,l.baseline=a.baseline,tr(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),y6e(i,o,u,n),u.update.align=mp(u.update.align,a.align),u.update.angle=mp(u.update.angle,a.angle),u.update.baseline=mp(u.update.baseline,a.baseline),eo({type:Gd,role:I4e,style:CO,from:r,encode:u},n)}function y6e(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=mp(On(a),n.update[l]),!1):!Nh(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?On(s):Dn(t,On(s),On(o))}function v6e(e,t){const n=c6e(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=Ai(e,n),u=pFe(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=ve(t.add(Ds({},[c]))),d=ve(t.add(bPe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(d6e(e,n,r.grid,d,u)),c.ticks&&(p=l("tickSize"),h.push(p6e(e,n,r.ticks,d,p,u))),c.labels&&(p=c.ticks?p:0,h.push(g6e(e,n,r.labels,d,p,u))),c.domain&&h.push(f6e(e,n,r.domain,f)),c.title&&h.push(m6e(e,n,r.title,f)),Zk(f1({role:R4e,from:f,encode:pm(b6e(l,e),i,Bv),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function b6e(e,t){const n={enter:{},update:{}};return tr(n,{orient:e("orient"),offset:e("offset")||0,position:rs(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Tte(e,t,n){const r=le(e.signals),i=le(e.scales);return n||r.forEach(o=>ate(o,t)),le(e.projections).forEach(o=>QPe(o,t)),i.forEach(o=>zPe(o,t)),le(e.data).forEach(o=>e6e(o,t)),i.forEach(o=>BPe(o,t)),(n||r).forEach(o=>vPe(o,t)),le(e.axes).forEach(o=>v6e(o,t)),le(e.marks).forEach(o=>Zk(o,t)),le(e.legends).forEach(o=>UFe(o,t)),e.title&&XFe(e.title,t),t.parseLambdas(),t}const x6e=e=>pm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function w6e(e,t){const n=t.config,r=ve(t.root=t.add(kS())),i=S6e(e,n);i.forEach(u=>ate(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Ds()),s=t.add(cte(ste(x6e(e.encode),Kk,vO,e.style,t,{pulse:ve(o)}))),a=t.add(hte({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:ve(s)}));t.operators.pop(),t.pushState(ve(s),ve(a),null),Tte(e,t,i),t.operators.push(a);let l=t.add(ute({mark:r,pulse:ve(a)}));return l=t.add(dte({pulse:ve(l)})),l=t.add(qd({pulse:ve(l)})),t.addData("root",new vd(t,o,o,l)),t}function Km(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function S6e(e,t){const n=s=>rs(e[s],t[s]),r=[Km("background",n("background")),Km("autosize",P4e(n("autosize"))),Km("padding",M4e(n("padding"))),Km("width",n("width")||0),Km("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return le(e.signals).forEach(s=>{fe(i,s.name)?s=Oe(i[s.name],s):r.push(s),o[s.name]=s}),le(t.signals).forEach(s=>{!fe(o,s.name)&&!fe(i,s.name)&&r.push(s)}),r}function Pte(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Bz(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Pte.prototype=Bz.prototype={parse(e){return Tte(e,this)},fork(){return new Bz(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof UT?ve(e):e;return this.add(RPe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(ve(this.add(qd({pulse:e})))),this._parent.push(t),this._lookup.push(n?ve(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return qe(this._parent)},encode(){return qe(this._encode)},lookup(){return qe(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ue(e))return u1(e,t);e.signal||G("Unsupported field reference: "+ne(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=ve(this.add(CPe(i)))}return r},compareRef(e){let t=!1;const n=o=>Sn(o)?(t=!0,this.signalRef(o.signal)):lPe(o)?(t=!0,this.exprRef(o.expr)):o,r=le(e.field).map(n),i=le(e.order).map(n);return t?ve(this.add(_z({fields:r,orders:i}))):kz(r,i)},keyRef(e,t){let n=!1;const r=o=>Sn(o)?(n=!0,ve(i[o.signal])):o,i=this.signals;return e=le(e).map(r),n?ve(this.add(kPe({fields:e,flat:t}))):iPe(e,t)},sortRef(e){if(!e)return e;const t=Yk(e.op,e.field),n=e.order||oPe;return n.signal?ve(this.add(_z({fields:t,orders:this.signalRef(n.signal)}))):kz(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return fe(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&G("Duplicate signal name: "+ne(e));const n=t instanceof UT?t:this.add(kS(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||G("Unrecognized signal name: "+ne(e)),this.signals[e]},signalRef(e){return this.signals[e]?ve(this.signals[e]):(fe(this.lambdas,e)||(this.lambdas[e]=this.add(kS(null))),ve(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Pa(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ae(e)?e:this.signalRef(e.signal||FO(e))},exprRef(e,t){const n={expr:Pa(e,this)};return t&&(n.expr.$name=t),ve(this.add(wPe(n)))},addBinding(e,t){this.bindings||G("Nested signals do not support binding: "+ne(e)),this.bindings.push(Oe({signal:e},t))},addScaleProj(e,t){fe(this.scales,e)&&G("Duplicate scale or projection name: "+ne(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,DPe(t))},addProjection(e,t){this.addScaleProj(e,MPe(t))},getScale(e){return this.scales[e]||G("Unrecognized scale name: "+ne(e)),this.scales[e]},scaleRef(e){return ve(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return fe(this.data,e)&&G("Duplicate data set name: "+ne(e)),this.data[e]=t},getData(e){return this.data[e]||G("Undefined data set name: "+ne(e)),this.data[e]},addDataPipeline(e,t){return fe(this.data,e)&&G("Duplicate data set name: "+ne(e)),this.addData(e,vd.fromEntries(this,t))}};function FO(e){return(Y(e)?C6e:k6e)(e)}function C6e(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ae(i)?i.signal||FO(i):ne(i))}return n+"]"}function k6e(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ne(r)+":"+(ae(i)?i.signal||FO(i):ne(i));return t+"}"}function E6e(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function _6e(e,t,n){return ae(e)||G("Input Vega specification must be an object."),t=nm(E6e(),t,e.config),w6e(e,new Pte(t,n)).toRuntime()}var $6e="5.30.0";Oe(tg,Tve,ZSe,FCe,mEe,c_e,L$e,m$e,z$e,u5e,b5e,_5e);const A6e=Object.freeze(Object.defineProperty({__proto__:null,Bounds:hn,CanvasHandler:Pv,CanvasRenderer:Iw,DATE:xi,DAY:yr,DAYOFYEAR:Aa,Dataflow:dp,Debug:bG,Error:sv,EventStream:tk,Gradient:vQ,GroupItem:kk,HOURS:Qi,Handler:ZM,HybridHandler:uJ,HybridRenderer:KA,Info:vG,Item:Ck,MILLISECONDS:$s,MINUTES:Ji,MONTH:wr,Marks:Zi,MultiPulse:d6,None:yG,Operator:St,Parameters:ek,Pulse:Wu,QUARTER:bi,RenderType:Ou,Renderer:Tv,ResourceLoader:EQ,SECONDS:No,SVGHandler:KQ,SVGRenderer:oR,SVGStringRenderer:lJ,Scenegraph:UQ,TIME_UNITS:n6,Transform:H,View:Yee,WEEK:bn,Warn:UF,YEAR:Jn,accessor:$i,accessorFields:xr,accessorName:en,array:le,ascending:YC,bandwidthNRD:m6,bin:ZY,bootstrapCI:eX,boundClip:bJ,boundContext:Ev,boundItem:HA,boundMark:IQ,boundStroke:Vl,changeset:Ud,clampRange:PG,codegenExpression:wee,compare:GF,constant:Er,cumulativeLogNormal:S6,cumulativeNormal:rk,cumulativeUniform:_6,dayofyear:sY,debounce:YF,defaultLocale:a6,definition:KY,densityLogNormal:w6,densityNormal:y6,densityUniform:E6,domChild:vn,domClear:wo,domCreate:Mu,domFind:JM,dotbin:tX,error:G,expressionFunction:ln,extend:Oe,extent:$a,extentIndex:FG,falsy:au,fastmap:im,field:Oo,flush:MG,font:Tk,fontFamily:Av,fontSize:Ia,format:Zx,formatLocale:gw,formats:c6,hasOwnProperty:fe,id:ov,identity:kr,inferType:zY,inferTypes:BY,ingest:at,inherits:re,inrange:Ih,interpolate:TM,interpolateColors:wk,interpolateRange:iQ,intersect:gJ,intersectBoxLine:zh,intersectPath:LM,intersectPoint:IM,intersectRule:$Q,isArray:Y,isBoolean:_c,isDate:Vu,isFunction:De,isIterable:RG,isNumber:Je,isObject:ae,isRegExp:OG,isString:ue,isTuple:JC,key:XF,lerp:DG,lineHeight:cc,loader:KC,locale:LY,logger:VF,lruCache:NG,markup:iR,merge:LG,mergeConfig:nm,multiLineOffset:XM,one:tm,pad:IG,panLinear:kG,panLog:EG,panPow:_G,panSymlog:$G,parse:_6e,parseExpression:iO,parseSelector:Mc,path:lk,pathCurves:OM,pathEqual:xJ,pathParse:ag,pathRectangle:wQ,pathRender:Qy,pathSymbols:xQ,pathTrail:SQ,peek:qe,point:Fk,projection:kR,quantileLogNormal:C6,quantileNormal:ik,quantileUniform:$6,quantiles:p6,quantizeInterpolator:oQ,quarter:AG,quartiles:g6,get random(){return Lo},randomInteger:R1e,randomKDE:b6,randomLCG:M1e,randomLogNormal:rX,randomMixture:iX,randomNormal:v6,randomUniform:oX,read:VY,regressionConstant:A6,regressionExp:aX,regressionLinear:T6,regressionLoess:cX,regressionLog:sX,regressionPoly:uX,regressionPow:lX,regressionQuad:P6,renderModule:Mk,repeat:C0,resetDefaultLocale:Tye,resetSVGClipId:kQ,resetSVGDefIds:ySe,responseType:UY,runtimeContext:Dee,sampleCurve:sk,sampleLogNormal:x6,sampleNormal:nk,sampleUniform:k6,scale:et,sceneEqual:sR,sceneFromJSON:BQ,scenePickVisit:Pw,sceneToJSON:zQ,sceneVisit:As,sceneZOrder:zM,scheme:PM,serializeXML:iJ,setHybridRendererOptions:hSe,setRandom:P1e,span:av,splitAccessPath:Da,stringValue:ne,textMetrics:Wi,timeBin:CY,timeFloor:hY,timeFormatLocale:Hy,timeInterval:sm,timeOffset:mY,timeSequence:bY,timeUnitSpecifier:oY,timeUnits:r6,toBoolean:KF,toDate:QF,toNumber:vr,toSet:ks,toString:JF,transform:QY,transforms:tg,truncate:zG,truthy:Do,tupleid:be,typeParsers:AA,utcFloor:pY,utcInterval:am,utcOffset:yY,utcSequence:xY,utcdayofyear:uY,utcquarter:TG,utcweek:cY,version:$6e,visitArray:du,week:aY,writeConfig:rm,zero:wu,zoomLinear:WF,zoomLog:HF,zoomPow:uw,zoomSymlog:qF},Symbol.toStringTag,{value:"Module"}));function T6e(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var P6e={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},F6e={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},M6e={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const R6e=Array.prototype.slice,Qc=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,R6e.call(t,1))},O6e=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var D6e={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:O6e,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Qc("join",arguments)},indexof:function(){return Qc("indexOf",arguments)},lastindexof:function(){return Qc("lastIndexOf",arguments)},slice:function(){return Qc("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Qc("substring",arguments,String)},split:function(){return Qc("split",arguments,String)},replace:function(){return Qc("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const N6e=["view","item","group","xy","x","y"],XT=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&XT.add(setImmediate);const L6e={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:P6e[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),XT.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||D6e[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>F6e[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>M6e[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,XT.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Qm(e,t,n,r,i,o){const s=a=>L6e[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,N6e.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var I6e={operator(e,t){const n=t.ast,r=e.functions;return i=>Qm(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>Qm(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>Qm(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return Qm(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,c;for(const f in r)c=Qm(r[f].ast,i,a,l,void 0,s),s[f]!==c&&(s[f]=c,u=1);return n!=="rule"&&T6e(s,r,o),u}}};const z6e="vega-lite",B6e='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',j6e="5.21.0",U6e=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],V6e="https://vega.github.io/vega-lite/",W6e="Vega-Lite is a concise high-level language for interactive visualization.",H6e=["vega","chart","visualization"],q6e="build/vega-lite.js",G6e="build/vega-lite.min.js",Y6e="build/vega-lite.min.js",X6e="build/src/index",K6e="build/src/index.d.ts",Q6e={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},J6e=["bin","build","src","vega-lite*","tsconfig.json"],Z6e={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},eMe={type:"git",url:"https://github.com/vega/vega-lite.git"},tMe="BSD-3-Clause",nMe={url:"https://github.com/vega/vega-lite/issues"},rMe={"@babel/core":"^7.24.9","@babel/preset-env":"^7.25.0","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.6.0",rollup:"^4.19.1","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.3","ts-jest":"^29.2.3","ts-json-schema-generator":"^2.3.0",typescript:"~5.5.4","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.26.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},iMe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},oMe={vega:"^5.24.0"},sMe={node:">=18"},aMe="yarn@1.22.19",lMe={name:z6e,author:B6e,version:j6e,collaborators:U6e,homepage:V6e,description:W6e,keywords:H6e,main:q6e,unpkg:G6e,jsdelivr:Y6e,module:X6e,types:K6e,bin:Q6e,files:J6e,scripts:Z6e,repository:eMe,license:tMe,bugs:nMe,devDependencies:rMe,dependencies:iMe,peerDependencies:oMe,engines:sMe,packageManager:aMe};function MO(e){return K(e,"or")}function RO(e){return K(e,"and")}function OO(e){return K(e,"not")}function C2(e,t){if(OO(e))C2(e.not,t);else if(RO(e))for(const n of e.and)C2(n,t);else if(MO(e))for(const n of e.or)C2(n,t);else t(e)}function yp(e,t){return OO(e)?{not:yp(e.not,t)}:RO(e)?{and:e.and.map(n=>yp(n,t))}:MO(e)?{or:e.or.map(n=>yp(n,t))}:t(e)}const Te=structuredClone;function Fte(e){throw new Error(e)}function mg(e,t){const n={};for(const r of t)fe(e,r)&&(n[r]=e[r]);return n}function hi(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>bt(e)).join(",")})`};function Be(e){if(Je(e))return e;const t=ue(e)?e:bt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function KT(e){return e===!1||e===null}function Ie(e,t){return e.includes(t)}function yg(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function DO(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Mte(e,...t){for(const n of t)uMe(e,n??{});return e}function uMe(e,t){for(const n of X(t))rm(e,n,t[n],!0)}function fa(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function k2(e,t){const n=X(e),r=X(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Rte(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function NO(e,t){for(const n of e)if(t.has(n))return!0;return!1}function QT(e){const t=new Set;for(const n of e){const i=Da(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function LO(e,t){return e===void 0||t===void 0?!0:NO(QT(e),QT(t))}function vt(e){return X(e).length===0}const X=Object.keys,Zn=Object.values,pc=Object.entries;function d1(e){return e===!0||e===!1}function zt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function by(e,t){return OO(e)?`!(${by(e.not,t)})`:RO(e)?`(${e.and.map(n=>by(n,t)).join(") && (")})`:MO(e)?`(${e.or.map(n=>by(n,t)).join(") || (")})`:t(e)}function ES(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&ES(e[n],t)&&delete e[n],vt(e)}function jv(e){return e.charAt(0).toUpperCase()+e.substr(1)}function IO(e,t="datum"){const n=Da(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(ne).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function Ote(e,t="datum"){return`${t}[${ne(Da(e).join("."))}]`}function cMe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function zo(e){return`${Da(e).map(cMe).join("\\.")}`}function bd(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function ym(e){return`${Da(e).join(".")}`}function vg(e){return e?Da(e).length:0}function sn(...e){return e.find(t=>t!==void 0)}let Dte=42;function Nte(e){const t=++Dte;return e?String(e)+t:t}function fMe(){Dte=42}function Lte(e){return Ite(e)?e:`__${e}`}function Ite(e){return e.startsWith("__")}function h1(e){if(e!==void 0)return(e%360+360)%360}function tE(e){return Je(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const jz=Object.getPrototypeOf(structuredClone({}));function ji(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!ji(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!ji(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==jz.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==jz.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!ji(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function bt(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(s,1),`{${o}}`}(e)}function K(e,t){return ae(e)&&fe(e,t)&&e[t]!==void 0}const Sl="row",Cl="column",nE="facet",Bt="x",zn="y",Ls="x2",Ua="y2",Rc="xOffset",vm="yOffset",Is="radius",Hl="radius2",Wo="theta",ql="theta2",zs="latitude",Bs="longitude",js="latitude2",Bo="longitude2",Si="color",Va="fill",Wa="stroke",Ci="shape",Gl="size",Yd="angle",Yl="opacity",Oc="fillOpacity",Dc="strokeOpacity",Nc="strokeWidth",Lc="strokeDash",Uv="text",bg="order",Vv="detail",rE="key",xd="tooltip",iE="href",oE="url",sE="description",dMe={x:1,y:1,x2:1,y2:1},zte={theta:1,theta2:1,radius:1,radius2:1};function Bte(e){return fe(zte,e)}const zO={longitude:1,longitude2:1,latitude:1,latitude2:1};function jte(e){switch(e){case zs:return"y";case js:return"y2";case Bs:return"x";case Bo:return"x2"}}function Ute(e){return fe(zO,e)}const hMe=X(zO),BO={...dMe,...zte,...zO,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function vp(e){return e===Si||e===Va||e===Wa}const Vte={row:1,column:1,facet:1},Ao=X(Vte),jO={...BO,...Vte},pMe=X(jO),{order:Jut,detail:Zut,tooltip:ect,...gMe}=jO,{row:tct,column:nct,facet:rct,...mMe}=gMe;function yMe(e){return fe(mMe,e)}function Wte(e){return fe(jO,e)}const vMe=[Ls,Ua,js,Bo,ql,Hl];function Hte(e){return Xd(e)!==e}function Xd(e){switch(e){case Ls:return Bt;case Ua:return zn;case js:return zs;case Bo:return Bs;case ql:return Wo;case Hl:return Is}return e}function gc(e){if(Bte(e))switch(e){case Wo:return"startAngle";case ql:return"endAngle";case Is:return"outerRadius";case Hl:return"innerRadius"}return e}function Ha(e){switch(e){case Bt:return Ls;case zn:return Ua;case zs:return js;case Bs:return Bo;case Wo:return ql;case Is:return Hl}}function ki(e){switch(e){case Bt:case Ls:return"width";case zn:case Ua:return"height"}}function qte(e){switch(e){case Bt:return"xOffset";case zn:return"yOffset";case Ls:return"x2Offset";case Ua:return"y2Offset";case Wo:return"thetaOffset";case Is:return"radiusOffset";case ql:return"theta2Offset";case Hl:return"radius2Offset"}}function UO(e){switch(e){case Bt:return"xOffset";case zn:return"yOffset"}}function bMe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const xMe=X(BO),{x:ict,y:oct,x2:sct,y2:act,xOffset:lct,yOffset:uct,latitude:cct,longitude:fct,latitude2:dct,longitude2:hct,theta:pct,theta2:gct,radius:mct,radius2:yct,...VO}=BO,wMe=X(VO),WO={x:1,y:1},Xl=X(WO);function an(e){return fe(WO,e)}const HO={theta:1,radius:1},SMe=X(HO);function aE(e){return e==="width"?Bt:zn}const Gte={xOffset:1,yOffset:1};function Wv(e){return fe(Gte,e)}const{text:vct,tooltip:bct,href:xct,url:wct,description:Sct,detail:Cct,key:kct,order:Ect,...Yte}=VO,CMe=X(Yte);function kMe(e){return fe(VO,e)}function EMe(e){switch(e){case Si:case Va:case Wa:case Gl:case Ci:case Yl:case Nc:case Lc:return!0;case Oc:case Dc:case Yd:return!1}}const Xte={...WO,...HO,...Gte,...Yte},qO=X(Xte);function qa(e){return fe(Xte,e)}function _Me(e,t){return AMe(e)[t]}const Kte={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:_ct,...$Me}=Kte;function AMe(e){switch(e){case Si:case Va:case Wa:case sE:case Vv:case rE:case xd:case iE:case bg:case Yl:case Oc:case Dc:case Nc:case nE:case Sl:case Cl:return Kte;case Bt:case zn:case Rc:case vm:case zs:case Bs:return $Me;case Ls:case Ua:case js:case Bo:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Gl:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Lc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ci:return{point:"always",geoshape:"always"};case Uv:return{text:"always"};case Yd:return{point:"always",square:"always",text:"always"};case oE:return{image:"always"};case Wo:return{text:"always",arc:"always"};case Is:return{text:"always",arc:"always"};case ql:case Hl:return{arc:"always"}}}function v5(e){switch(e){case Bt:case zn:case Wo:case Is:case Rc:case vm:case Gl:case Yd:case Nc:case Yl:case Oc:case Dc:case Ls:case Ua:case ql:case Hl:return;case nE:case Sl:case Cl:case Ci:case Lc:case Uv:case xd:case iE:case oE:case sE:return"discrete";case Si:case Va:case Wa:return"flexible";case zs:case Bs:case js:case Bo:case Vv:case rE:case bg:return}}const TMe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},PMe={count:1,min:1,max:1};function Fa(e){return K(e,"argmin")}function Kl(e){return K(e,"argmax")}function GO(e){return ue(e)&&fe(TMe,e)}const FMe=new Set(["count","valid","missing","distinct"]);function lE(e){return ue(e)&&FMe.has(e)}function MMe(e){return ue(e)&&Ie(["min","max"],e)}const RMe=new Set(["count","sum","distinct","valid","missing"]),OMe=new Set(["mean","average","median","q1","q3","min","max"]);function Qte(e){return _c(e)&&(e=bE(e,void 0)),"bin"+X(e).map(t=>uE(e[t])?zt(`_${t}_${pc(e[t])}`):zt(`_${t}_${e[t]}`)).join("")}function Ct(e){return e===!0||Kd(e)&&!e.binned}function Vn(e){return e==="binned"||Kd(e)&&e.binned===!0}function Kd(e){return ae(e)}function uE(e){return K(e,"param")}function Uz(e){switch(e){case Sl:case Cl:case Gl:case Si:case Va:case Wa:case Nc:case Yl:case Oc:case Dc:case Ci:return 6;case Lc:return 4;default:return 10}}function Hv(e){return K(e,"expr")}function Wn(e,{level:t}={level:0}){const n=X(e||{}),r={};for(const i of n)r[i]=t===0?Ni(e[i]):Wn(e[i],{level:t-1});return r}function Jte(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,m={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=mg(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function mu(e){return ue(e)||Y(e)&&ue(e[0])}function me(e){return K(e,"signal")}function Qd(e){return K(e,"step")}function DMe(e){return Y(e)?!1:K(e,"fields")&&!K(e,"data")}function NMe(e){return Y(e)?!1:K(e,"fields")&&K(e,"data")}function pl(e){return Y(e)?!1:K(e,"field")&&K(e,"data")}const LMe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},IMe=X(LMe),zMe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},JT=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Zte(e){const t=Y(e.condition)?e.condition.map(Vz):Vz(e.condition);return{...Ni(e),condition:t}}function Ni(e){if(Hv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Vz(e){if(Hv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Mt(e){if(Hv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return me(e)?e:e!==void 0?{value:e}:void 0}function BMe(e){return me(e)?e.signal:ne(e)}function Wz(e){return me(e)?e.signal:ne(e.value)}function ms(e){return me(e)?e.signal:e==null?null:ne(e)}function jMe(e,t,n){for(const r of n){const i=Ma(r,t.markDef,t.config);i!==void 0&&(e[r]=Mt(i))}return e}function ene(e){return[].concat(e.type,e.style??[])}function yt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&K(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Ma(e,t,n,r)}function Ma(e,t,n,{vgChannel:r}={}){const i=ZT(e,t,n.style);return sn(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function ZT(e,t,n){return tne(e,ene(t),n)}function tne(e,t,n){t=le(t);let r;for(const i of t){const o=n[i];K(o,e)&&(r=o[e])}return r}function nne(e,t){return le(e).reduce((n,r)=>(n.field.push(oe(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function rne(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(ji(i,r))return;n.push(r)}),n}function ine(e,t){return ji(e,t)||!t?e:e?[...le(e),...le(t)].join(", "):t}function one(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((mu(n)||me(n))&&(mu(r)||me(r)))return{explicit:e.explicit,value:ine(n,r)};if(mu(n)||me(n))return{explicit:e.explicit,value:n};if(mu(r)||me(r))return{explicit:e.explicit,value:r};if(!mu(n)&&!me(n)&&!mu(r)&&!me(r))return{explicit:e.explicit,value:rne(n,r)};throw new Error("It should never reach here")}function YO(e){return`Invalid specification ${bt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const UMe='Autosize "fit" only works for single views and layered views.';function Hz(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function qz(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Gz(e){return e?`Dropping "fit-${e}" because spec has discrete ${ki(e)}.`:'Dropping "fit" because spec has discrete size.'}function XO(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Yz(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function VMe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function WMe(e){return`The "nearest" transform is not supported for ${e} marks.`}function sne(e){return`Selection not supported for ${e} yet.`}function HMe(e){return`Cannot find a selection named "${e}".`}const qMe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",GMe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",YMe="Legend bindings are only supported for selections over an individual field or encoding channel.";function XMe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function KMe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const QMe="The same selection must be used to override scale domains in a layered view.",JMe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function ZMe(e){return`Unknown repeated value "${e}".`}function Xz(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const eRe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function tRe(e){return`Unrecognized parse "${e}".`}function Kz(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const nRe="Attempt to add the same child twice.";function rRe(e){return`Ignoring an invalid transform: ${bt(e)}.`}const iRe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Qz(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function oRe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${bt(t)} is overridden by a child projection ${bt(n)}.`}const sRe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function aRe(e){return`${e}Offset dropped because ${e} is continuous`}function lRe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${bt(n)}}.`}function ane(e){return`Invalid field type "${e}".`}function uRe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function cRe(e){return`Invalid aggregation operator "${e}".`}function lne(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function fRe(e){return`Position range does not support relative band size for ${e}.`}function e4(e,t){return`Dropping ${bt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const dRe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function cE(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function hRe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function pRe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function gRe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function mRe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function b5(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function yRe(e){return`The ${e} for range marks cannot be an expression`}function vRe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function bRe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function xRe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function wRe(e){return`Cannot use the relative band size with ${e} scale.`}function SRe(e){return`Using unaggregated domain with raw field has no effect (${bt(e)}).`}function CRe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function kRe(e){return`Unaggregated domain is currently unsupported for log scale (${bt(e)}).`}function ERe(e){return`Cannot apply size to non-oriented mark "${e}".`}function _Re(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function $Re(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function une(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function cne(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function ARe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${bt(n)} and ${bt(r)}). Using ${bt(n)}.`}function TRe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${bt(n)} and ${bt(r)}). Using the union of the two domains.`}function PRe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function FRe(e){return`Dropping sort property ${bt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Jz="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",MRe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",RRe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",ORe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function DRe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function NRe(e){return`Stack is applied to a non-linear scale (${e}).`}function LRe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function _S(e,t){return`Invalid ${e}: ${bt(t)}.`}function IRe(e){return`Dropping day from datetime ${bt(e)} as day cannot be combined with other units.`}function zRe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function BRe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function jRe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Zz(e){return`1D error band does not support ${e}.`}function fne(e){return`Channel ${e} is required for "binned" bin.`}function URe(e){return`Channel ${e} should not be used with "binned" bin.`}function VRe(e){return`Domain for ${e} is required for threshold scale.`}const dne=VF(UF);let xg=dne;function WRe(e){return xg=e,xg}function HRe(){return xg=dne,xg}function Z(...e){xg.warn(...e)}function qRe(...e){xg.debug(...e)}function Jd(e){if(e&&ae(e)){for(const t of QO)if(K(e,t))return!0}return!1}const hne=["january","february","march","april","may","june","july","august","september","october","november","december"],GRe=hne.map(e=>e.substr(0,3)),pne=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],YRe=pne.map(e=>e.substr(0,3));function XRe(e){if(tE(e)&&(e=+e),Je(e))return e>4&&Z(_S("quarter",e)),e-1;throw new Error(_S("quarter",e))}function KRe(e){if(tE(e)&&(e=+e),Je(e))return e-1;{const t=e.toLowerCase(),n=hne.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=GRe.indexOf(r);if(i!==-1)return i;throw new Error(_S("month",e))}}function QRe(e){if(tE(e)&&(e=+e),Je(e))return e%7;{const t=e.toLowerCase(),n=pne.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=YRe.indexOf(r);if(i!==-1)return i;throw new Error(_S("day",e))}}function KO(e,t){const n=[];if(t&&e.day!==void 0&&X(e).length>1&&(Z(IRe(e)),e=Te(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?KRe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?XRe(e.quarter):e.quarter;n.push(Je(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?QRe(e.day):e.day;n.push(Je(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function wd(e){const n=KO(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function JRe(e){const n=KO(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function ZRe(e){const t=KO(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const gne={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},QO=X(gne);function eOe(e){return fe(gne,e)}function Ic(e){return ae(e)?e.binned:mne(e)}function mne(e){return e&&e.startsWith("binned")}function JO(e){return e.startsWith("utc")}function tOe(e){return e.substring(3)}const nOe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function qv(e){return QO.filter(t=>vne(e,t))}function yne(e){const t=qv(e);return t[t.length-1]}function vne(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function rOe(e,t,{end:n}={end:!1}){const r=IO(t),i=JO(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of QO)vne(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),JRe(a)}function bne(e){if(!e)return;const t=qv(e);return`timeUnitSpecifier(${bt(t)}, ${bt(nOe)})`}function iOe(e,t,n){if(!e)return;const r=bne(e);return`${n||JO(e)?"utc":"time"}Format(${t}, ${r})`}function Cn(e){if(!e)return;let t;return ue(e)?mne(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ae(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),JO(t.unit)&&(t.utc=!0,t.unit=tOe(t.unit)),t}function oOe(e){const{utc:t,...n}=Cn(e);return n.unit?(t?"utc":"")+X(n).map(r=>zt(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+X(n).map(r=>zt(`_${r}_${n[r]}`)).join("")}function xne(e,t=n=>n){const n=Cn(e),r=yne(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=wne(r,n.step),a={...i,[s]:+i[s]+o};return`${t(wd(a))} - ${t(wd(i))}`}}const sOe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function aOe(e){return fe(sOe,e)}function wne(e,t=1){if(aOe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function lOe(e){return K(e,"param")}function ZO(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function eD(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function tD(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function nD(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function rD(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function iD(e){if(e!=null&&e.field){if(Y(e.range)&&e.range.length===2)return!0;if(me(e.range))return!0}return!1}function oD(e){return!!(e!=null&&e.field)&&(Y(e.oneOf)||Y(e.in))}function uOe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function Sne(e){return oD(e)||ZO(e)||iD(e)||eD(e)||nD(e)||tD(e)||rD(e)}function Gs(e,t){return xE(e,{timeUnit:t,wrapTime:!0})}function cOe(e,t){return e.map(n=>Gs(n,t))}function Cne(e,t=!0){const{field:n}=e,r=Cn(e.timeUnit),{unit:i,binned:o}=r||{},s=oe(e,{expr:"datum"}),a=i?`time(${o?s:rOe(i,n)})`:s;if(ZO(e))return`${a}===${Gs(e.equal,i)}`;if(eD(e)){const l=e.lt;return`${a}<${Gs(l,i)}`}else if(nD(e)){const l=e.gt;return`${a}>${Gs(l,i)}`}else if(tD(e)){const l=e.lte;return`${a}<=${Gs(l,i)}`}else if(rD(e)){const l=e.gte;return`${a}>=${Gs(l,i)}`}else{if(oD(e))return`indexof([${cOe(e.oneOf,i).join(",")}], ${a}) !== -1`;if(uOe(e))return fE(a,e.valid);if(iD(e)){const{range:l}=Wn(e),u=me(l)?{signal:`${l.signal}[0]`}:l[0],c=me(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+Gs(u,i)+", "+Gs(c,i)+"])";const f=[];return u!==null&&f.push(`${a} >= ${Gs(u,i)}`),c!==null&&f.push(`${a} <= ${Gs(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${bt(e)}`)}function fE(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function fOe(e){return Sne(e)&&e.timeUnit?{...e,timeUnit:Cn(e.timeUnit)}:e}const Gv={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function dOe(e){return e==="quantitative"||e==="temporal"}function kne(e){return e==="ordinal"||e==="nominal"}const Sd=Gv.quantitative,sD=Gv.ordinal,wg=Gv.temporal,aD=Gv.nominal,bm=Gv.geojson;function hOe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Sd:return"quantitative";case"t":case wg:return"temporal";case"o":case sD:return"ordinal";case"n":case aD:return"nominal";case bm:return"geojson"}}const qn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},t4={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function pOe(e,t){const n=t4[e],r=t4[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const gOe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function eB(e){return gOe[e]}const Ene=new Set(["linear","log","pow","sqrt","symlog"]),_ne=new Set([...Ene,"time","utc"]);function $ne(e){return Ene.has(e)}const Ane=new Set(["quantile","quantize","threshold"]),mOe=new Set([..._ne,...Ane,"sequential","identity"]),yOe=new Set(["ordinal","bin-ordinal","point","band"]);function Ln(e){return yOe.has(e)}function Ts(e){return mOe.has(e)}function da(e){return _ne.has(e)}function Sg(e){return Ane.has(e)}const vOe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function bOe(e){return!ue(e)&&K(e,"name")}function Tne(e){return K(e,"param")}function xOe(e){return K(e,"unionWith")}function wOe(e){return ae(e)&&"field"in e}const SOe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:$ct,domain:Act,range:Tct,rangeMax:Pct,rangeMin:Fct,scheme:Mct,...COe}=SOe,kOe=X(COe);function n4(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return da(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return da(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return da(e);case"nice":return da(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Ts(e)&&!Ie(["log","time","utc","threshold","quantile"],e)}}function Pne(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return vp(e)?void 0:xRe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function EOe(e,t){return Ie([sD,aD],t)?e===void 0||Ln(e):t===wg?Ie([qn.TIME,qn.UTC,void 0],e):t===Sd?$ne(e)||Sg(e)||e===void 0:!0}function _Oe(e,t,n=!1){if(!qa(e))return!1;switch(e){case Bt:case zn:case Rc:case vm:case Wo:case Is:return da(t)||t==="band"?!0:t==="point"?!n:!1;case Gl:case Nc:case Yl:case Oc:case Dc:case Yd:return da(t)||Sg(t)||Ie(["band","point","ordinal"],t);case Si:case Va:case Wa:return t!=="band";case Lc:case Ci:return t==="ordinal"||Sg(t)}}function $Oe(e){return ae(e)&&"value"in e}const ti={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Fne=ti.arc,dE=ti.area,hE=ti.bar,AOe=ti.image,pE=ti.line,gE=ti.point,TOe=ti.rect,$S=ti.rule,Mne=ti.text,lD=ti.tick,POe=ti.trail,uD=ti.circle,cD=ti.square,Rne=ti.geoshape;function zc(e){return["line","area","trail"].includes(e)}function p1(e){return["rect","bar","image","arc","tick"].includes(e)}const FOe=new Set(X(ti));function Ra(e){return K(e,"type")}const MOe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],ROe=["fill","fillOpacity"],OOe=[...MOe,...ROe],DOe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},tB=X(DOe),x5=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],NOe={area:["line","point"],bar:x5,rect:x5,line:["point"],tick:["bandSize","thickness",...x5]},LOe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},IOe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},One=X(IOe);function Cd(e){return K(e,"band")}const zOe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},BOe=5,fD={binSpacing:0,continuousBandSize:BOe,minBandSize:.25,timeUnitBandPosition:.5},jOe={...fD,binSpacing:1},UOe={...fD,thickness:1};function VOe(e){return Ra(e)?e.type:e}function Dne(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function dD({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!Ts(r)||i)return"always-valid";const o=Dne(yt("invalid",e,t),{isPath:zc(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function WOe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function Nne({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function Lne({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var c;const s=n==null?void 0:n.get("type"),a=Fs(t),l=lE(a==null?void 0:a.aggregate),u=dD({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){const f=((c=o.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:fE(oe(a,{expr:"datum"}),!1),...HOe(f,n,r)}}}function HOe(e,t,n){if($Oe(e)){const{value:r}=e;return me(r)?{signal:r.signal}:{value:r}}return Nne({scale:t,scaleName:n,mode:"zeroOrMin"})}function hD(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=Xd(t),l=pD(e),u=Lne({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return u!==void 0?[u,l]:l}function qOe(e){const{datum:t}=e;return Jd(t)?wd(t):`${bt(t)}`}function Yf(e,t,n,r){const i={};if(t&&(i.scale=t),Ga(e)){const{datum:o}=e;Jd(o)?i.signal=wd(o):me(o)?i.signal=o.signal:Hv(o)?i.signal=o.expr:i.value=o}else i.field=oe(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function AS({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!me(s)&&0<s&&s<1?"datum":void 0,l=oe(t,{expr:a,suffix:i}),u=n!==void 0?oe(n,{expr:a}):oe(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;const f=s===0?l:u;c.field=f}else{const f=me(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function GOe({scaleName:e,fieldDef:t}){const n=oe(t,{expr:"datum"}),r=oe(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function pD({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(Me(t)){const f=s==null?void 0:s.get("type");if(Jr(t)){c??(c=mc({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Ct(d)||c&&h&&p===wg)return a!=null&&a.impute?Yf(t,o,{binSuffix:"mid"},{offset:l}):c&&!Ln(f)?AS({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Yf(t,o,Jv(t,e)?{binSuffix:"range"}:{},{offset:l});if(Vn(d)){if(ee(n))return AS({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});Z(fne(e===Bt?Ls:Ua))}}return Yf(t,o,Ln(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Ps(t)){const f=t.value,d=l?{offset:l}:{};return{...xy(e,f),...d}}}return De(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function xy(e,t){return Ie(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ie(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Mt(t)}function kd(e){return e&&e!=="number"&&e!=="time"}function Ine(e,t,n){return`${e}(${t}${n?`, ${bt(n)}`:""})`}const YOe="  ";function gD({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var l,u;if(kd(n))return ys({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=zne(e,r,i),a=Cg(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return ys({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return ys({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&ee(e)&&e.timeUnit===void 0)return ys({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Eg(e)){const c=KOe({field:s,timeUnit:ee(e)?(l=Cn(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Zd(e)&&((u=e.scale)==null?void 0:u.type)===qn.UTC});return c?{signal:c}:void 0}if(t=r4({type:a,specifiedFormat:t,config:o,normalizeStack:i}),ee(e)&&Ct(e.bin)){const c=oe(e,{expr:r,binSuffix:"end"});return{signal:Yv(s,c,t,n,o)}}else return t||Cg(e)==="quantitative"?{signal:`${Une(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function zne(e,t,n){return ee(e)?n?`${oe(e,{expr:t,suffix:"end"})}-${oe(e,{expr:t,suffix:"start"})}`:oe(e,{expr:t}):qOe(e)}function ys({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=zne(e,r,i)),s!=="datum.value"&&ee(e)&&Ct(e.bin)){const a=oe(e,{expr:r,binSuffix:"end"});return{signal:Yv(s,a,t,n,o)}}return{signal:Ine(n,s,t)}}function Bne(e,t,n,r,i,o){var s;if(!(ue(r)&&kd(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Cg(e)==="quantitative"&&(i.normalizedNumberFormatType&&kg(e)&&e.stack==="normalize"||i.numberFormatType))){if(kg(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return r4({type:"quantitative",config:i,normalizeStack:!0});if(Eg(e)){const a=ee(e)?(s=Cn(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:XOe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return r4({type:t,specifiedFormat:n,config:i})}}function jne(e,t,n){var r;if(e&&(me(e)||e==="number"||e==="time"))return e;if(Eg(t)&&n!=="time"&&n!=="utc")return ee(t)&&((r=Cn(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function r4({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(ue(t))return t;if(e===Sd)return r?n.normalizedNumberFormat:n.numberFormat}function XOe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:bne(t)}:r?void 0:n.timeFormat)}function Une(e,t){return`format(${e}, "${t||""}")`}function nB(e,t,n,r){return kd(n)?Ine(n,e,t):Une(e,(ue(t)?t:void 0)??r.numberFormat)}function Yv(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return Yv(e,t,i.numberFormat,i.numberFormatType,i);const o=nB(e,n,r,i),s=nB(t,n,r,i);return`${fE(e,!1)} ? "null" : ${o} + "${YOe}" + ${s}`}function KOe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=ue(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):iOe(t,e,o)}const mE="min",QOe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function rB(e){return fe(QOe,e)}function JOe(e){return K(e,"encoding")}function kl(e){return e&&(e.op==="count"||K(e,"field"))}function Vne(e){return e&&Y(e)}function Xv(e){return K(e,"row")||K(e,"column")}function mD(e){return K(e,"header")}function yE(e){return K(e,"facet")}function ZOe(e){return K(e,"param")}function eDe(e){return!ue(e)&&K(e,"repeat")}function iB(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function yD(e){return K(e,"sort")}function mc({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Me(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ee(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Ma("timeUnitBandPosition",n,r);if(Ct(o))return .5}}function Wne({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var u,c,f;const a=ki(e),l=yt(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(ee(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Ma("timeUnitBandSize",r,i)};if(Ct(h)&&!Ln(o))return{band:1}}if(p1(r.type))return o?Ln(o)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Hne(e,t,n,r){return Ct(e.bin)||e.timeUnit&&Jr(e)&&e.type==="temporal"?mc({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function qne(e){return K(e,"sort")&&!K(e,"field")}function Kv(e){return K(e,"condition")}function vE(e){const t=e==null?void 0:e.condition;return!!t&&!Y(t)&&ee(t)}function Qv(e){const t=e==null?void 0:e.condition;return!!t&&!Y(t)&&Me(t)}function tDe(e){const t=e==null?void 0:e.condition;return!!t&&(Y(t)||Ps(t))}function ee(e){return K(e,"field")||(e==null?void 0:e.aggregate)==="count"}function Cg(e){return e==null?void 0:e.type}function Ga(e){return K(e,"datum")}function zu(e){return Jr(e)&&!PS(e)||TS(e)}function oB(e){return Jr(e)&&e.type==="quantitative"&&!e.bin||TS(e)}function TS(e){return Ga(e)&&Je(e.datum)}function Me(e){return ee(e)||Ga(e)}function Jr(e){return e&&(K(e,"field")||e.aggregate==="count")&&K(e,"type")}function Ps(e){return K(e,"value")}function Zd(e){return K(e,"scale")||K(e,"sort")}function kg(e){return K(e,"axis")||K(e,"stack")||K(e,"impute")}function Gne(e){return K(e,"legend")}function Yne(e){return K(e,"format")||K(e,"formatType")}function nDe(e){return hi(e,["legend","axis","header","scale"])}function rDe(e){return K(e,"op")}function oe(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(oDe(e))n=Lte("count");else{let s;if(!t.nofn)if(rDe(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;Ct(a)?(s=Qte(a),i=(t.binSuffix??"")+(t.suffix??"")):l?Kl(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Fa(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!Ic(u)&&(s=oOe(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?ym(n):t.expr?Ote(n,t.expr)+o:zo(n)+o}function PS(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ee(e)&&!!e.bin;case"temporal":return!1}throw new Error(ane(e.type))}function iDe(e){var t;return Zd(e)&&Sg((t=e.scale)==null?void 0:t.type)}function oDe(e){return e.aggregate==="count"}function sDe(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Ct(r))return`${n} (binned)`;if(i&&!Ic(i)){const a=(s=Cn(i))==null?void 0:s.unit;if(a)return`${n} (${qv(a).join("-")})`}else if(o)return Kl(o)?`${n} for max ${o.argmax}`:Fa(o)?`${n} for min ${o.argmin}`:`${jv(o)} of ${n}`;return n}function aDe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Kl(t))return`${i} for argmax(${t.argmax})`;if(Fa(t))return`${i} for argmin(${t.argmin})`;const o=r&&!Ic(r)?Cn(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Ct(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const Xne=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return aDe(e);default:return sDe(e,t)}};let Kne=Xne;function Qne(e){Kne=e}function lDe(){Qne(Xne)}function bp(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=vD(e))==null?void 0:a.title;if(!ee(e))return i??e.title;const o=e,s=r?bD(o,t):void 0;return n?sn(i,o.title,s):i??o.title??s}function vD(e){if(kg(e)&&e.axis)return e.axis;if(Gne(e)&&e.legend)return e.legend;if(mD(e)&&e.header)return e.header}function bD(e,t){return Kne(e,t)}function FS(e){if(Yne(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=vD(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function uDe(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(yD(e)&&Y(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Kl(n)&&!Fa(n))return"quantitative";if(Zd(e)&&((o=e.scale)!=null&&o.type))switch(t4[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Fs(e){if(ee(e))return e;if(vE(e))return e.condition}function xn(e){if(Me(e))return e;if(Qv(e))return e.condition}function Jne(e,t,n,r={}){if(ue(e)||Je(e)||_c(e)){const i=ue(e)?"string":Je(e)?"number":"boolean";return Z(lRe(t,i,e)),{value:e}}return Me(e)?MS(e,t,n,r):Qv(e)?{...e,condition:MS(e.condition,t,n,r)}:e}function MS(e,t,n,r){if(Yne(e)){const{format:i,formatType:o,...s}=e;if(kd(o)&&!n.customFormatTypes)return Z(Qz(t)),MS(s,t,n,r)}else{const i=kg(e)?"axis":Gne(e)?"legend":mD(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(kd(s)&&!n.customFormatTypes)return Z(Qz(t)),MS({...e,[i]:a},t,n,r)}}return ee(e)?xD(e,t,r):cDe(e)}function cDe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Je(n)?"quantitative":ue(n)?"nominal":Jd(n)?"temporal":void 0,{...e,type:t}}function xD(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!GO(r)&&!Kl(r)&&!Fa(r)&&(Z(cRe(r)),delete a.aggregate),i&&(a.timeUnit=Cn(i)),s&&(a.field=`${s}`),Ct(o)&&(a.bin=bE(o,t)),Vn(o)&&!an(t)&&Z(URe(t)),Jr(a)){const{type:l}=a,u=hOe(l);l!==u&&(a.type=u),l!=="quantitative"&&lE(r)&&(Z(uRe(l,r)),a.type="quantitative")}else if(!Hte(t)){const l=uDe(a,t);a.type=l}if(Jr(a)){const{compatible:l,warning:u}=fDe(a,t)||{};l===!1&&Z(u)}if(yD(a)&&ue(a.sort)){const{sort:l}=a;if(rB(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&rB(u))return{...a,sort:{encoding:u,order:"descending"}}}if(mD(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function bE(e,t){return _c(e)?{maxbins:Uz(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Uz(t)}:e}const Ch={compatible:!0};function fDe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Sl:case Cl:case nE:return PS(e)?Ch:{compatible:!1,warning:pRe(t)};case Bt:case zn:case Rc:case vm:case Si:case Va:case Wa:case Uv:case Vv:case rE:case xd:case iE:case oE:case Yd:case Wo:case Is:case sE:return Ch;case Bs:case Bo:case zs:case js:return n!==Sd?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Ch;case Yl:case Oc:case Dc:case Nc:case Gl:case ql:case Hl:case Ls:case Ua:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Ch;case Ci:case Lc:return!PS(e)&&!iDe(e)?{compatible:!1,warning:gRe(t)}:Ch;case bg:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ch}}function Eg(e){const{formatType:t}=FS(e);return t==="time"||!t&&dDe(e)}function dDe(e){return e&&(e.type==="temporal"||ee(e)&&!!e.timeUnit)}function xE(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=Cn(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return Hv(e)?a=e.expr:me(e)?a=e.signal:Jd(e)?(s=!0,a=wd(e)):(ue(e)||Je(e))&&s&&(a=`datetime(${bt(e)})`,eOe(o)&&(Je(e)&&e<1e4||ue(e)&&isNaN(Date.parse(e)))&&(a=wd({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:bt(e)}function Zne(e,t){const{type:n}=e;return t.map(r=>{const i=ee(e)&&!Ic(e.timeUnit)?e.timeUnit:void 0,o=xE(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function Jv(e,t){return Ct(e.bin)?qa(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const sB={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Zv(e){return e==null?void 0:e.condition}const ere=["domain","grid","labels","ticks","title"],hDe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},tre={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},pDe={...tre,style:1,labelExpr:1,encoding:1};function aB(e){return fe(pDe,e)}const gDe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},nre=X(gDe);function Ql(e){return K(e,"mark")}class wE{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Ql(t)?VOe(t.mark)===this.name:!1}}function Xf(e,t){const n=e&&e[t];return n?Y(n)?yg(n,r=>!!r.field):ee(n)||vE(n):!1}function rre(e,t){const n=e&&e[t];return n?Y(n)?yg(n,r=>!!r.field):ee(n)||Ga(n)||Qv(n):!1}function ire(e,t){if(an(t)){const n=e[t];if((ee(n)||Ga(n))&&(kne(n.type)||ee(n)&&n.timeUnit)){const r=UO(t);return rre(e,r)}}return!1}function ore(e){return yg(pMe,t=>{if(Xf(e,t)){const n=e[t];if(Y(n))return yg(n,r=>!!r.aggregate);{const r=Fs(n);return r&&!!r.aggregate}}return!1})}function sre(e,t){const n=[],r=[],i=[],o=[],s={};return wD(e,(a,l)=>{if(ee(a)){const{field:u,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=vD(a),g=p==null?void 0:p.title;let m=oe(a,{forAs:!0});const y={...g?[]:{title:bp(a,t,{allowDisabling:!0})},...h,field:m};if(c){let v;if(Kl(c)?(v="argmax",m=oe({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${u}`):Fa(c)?(v="argmin",m=oe({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:m};u&&(b.field=u),o.push(b)}}else if(n.push(m),Jr(a)&&Ct(f)){if(r.push({bin:f,field:u,as:m}),n.push(oe(a,{binSuffix:"end"})),Jv(a,l)&&n.push(oe(a,{binSuffix:"range"})),an(l)){const v={field:`${m}_end`};s[`${l}2`]=v}y.bin="binned",Hte(l)||(y.type=Sd)}else if(d&&!Ic(d)){i.push({timeUnit:d,field:u,as:m});const v=Jr(a)&&a.type!==wg&&"time";v&&(l===Uv||l===xd?y.formatType=v:kMe(l)?y.legend={formatType:v,...y.legend}:an(l)&&(y.axis={formatType:v,...y.axis}))}s[l]=y}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function mDe(e,t,n){const r=_Me(t,n);if(r){if(r==="binned"){const i=e[t===Ls?Bt:zn];return!!(ee(i)&&ee(e[t])&&Vn(i.bin))}}else return!1;return!0}function yDe(e,t,n,r){const i={};for(const o of X(e))Wte(o)||Z(hRe(o));for(let o of xMe){if(!e[o])continue;const s=e[o];if(Wv(o)){const a=bMe(o),l=i[a];if(ee(l)&&dOe(l.type)&&ee(s)&&!l.timeUnit){Z(aRe(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(Z(sRe),o=Wo),!mDe(e,o,t)){Z(cE(o,t));continue}if(o===Gl&&t==="line"){const a=Fs(e[o]);if(a!=null&&a.aggregate){Z(dRe);continue}}if(o===Si&&(n?"fill"in e:"stroke"in e)){Z(lne("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===Vv||o===bg&&!Y(s)&&!Ps(s)||o===xd&&Y(s)){if(s){if(o===bg){const a=e[o];if(qne(a)){i[o]=a;continue}}i[o]=le(s).reduce((a,l)=>(ee(l)?a.push(xD(l,o)):Z(e4(l,o)),a),[])}}else{if(o===xd&&s===null)i[o]=null;else if(!ee(s)&&!Ga(s)&&!Ps(s)&&!Kv(s)&&!me(s)){Z(e4(s,o));continue}i[o]=Jne(s,o,r)}}return i}function SE(e,t){const n={};for(const r of X(e)){const i=Jne(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function vDe(e){const t=[];for(const n of X(e))if(Xf(e,n)){const r=e[n],i=le(r);for(const o of i)ee(o)?t.push(o):vE(o)&&t.push(o.condition)}return t}function wD(e,t,n){if(e)for(const r of X(e)){const i=e[r];if(Y(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function bDe(e,t,n,r){return e?X(e).reduce((i,o)=>{const s=e[o];return Y(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function are(e,t){return X(t).reduce((n,r)=>{switch(r){case Bt:case zn:case iE:case sE:case oE:case Ls:case Ua:case Rc:case vm:case Wo:case ql:case Is:case Hl:case zs:case Bs:case js:case Bo:case Uv:case Ci:case Yd:case xd:return n;case bg:if(e==="line"||e==="trail")return n;case Vv:case rE:{const i=t[r];if(Y(i)||ee(i))for(const o of le(i))o.aggregate||n.push(oe(o,{}));return n}case Gl:if(e==="trail")return n;case Si:case Va:case Wa:case Yl:case Oc:case Dc:case Lc:case Nc:{const i=Fs(t[r]);return i&&!i.aggregate&&n.push(oe(i,{})),n}}},[])}function xDe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Y(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Y(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function i4(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${SD(t)}`:"";return{field:s+t.field,type:t.type,title:me(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=vDe(n).map(nDe);return{tooltip:[...i,...fa(o,Be)]}}function SD(e){const{title:t,field:n}=e;return sn(t,n)}function CD(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=SD(n);return lre(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...ue(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function lre(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...Ra(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,..._c(e[t])?{}:e[t]}}]:[]}function ure(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:rx(o,n),continuousAxisChannelDef2:rx(s,n),continuousAxisChannelDefError:rx(a,n),continuousAxisChannelDefError2:rx(l,n),continuousAxis:i}}function rx(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Z(jRe(n,t)),r}else return e}function cre(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(Ra(n)&&n.orient)return n.orient;if(zu(i)){if(zu(o)){const s=ee(i)&&i.aggregate,a=ee(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Eg(o)&&!Eg(i)?"horizontal":"vertical"}return"horizontal"}else{if(zu(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const RS="boxplot",wDe=["box","median","outliers","rule","ticks"],SDe=new wE(RS,dre);function fre(e){return Je(e)?"tukey":e}function dre(e,{config:t}){e={...e,encoding:SE(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=Ra(n)?n:{type:n};i&&Z(sne("boxplot"));const l=a.extent??t.boxplot.extent,u=yt("size",a,t),c=a.invalid,f=fre(l),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:S,customTooltipWithoutAggregatedField:C}=CDe(e,l,t),w=ym(g.field),{color:k,size:E,...A}=b,P=ah=>CD(a,m,g,ah,t.boxplot),L=P(A),M=P(b),O=(ae(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",_=P({...A,...E?{size:E}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...k||{value:O}}}}),T=i4([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,b),N={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},D=f==="min-max"?T:i4([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,b),I=[...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:D}),...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:D}),...L({partName:"ticks",mark:N,positionPrefix:"lower_whisker",extraEncoding:D}),...L({partName:"ticks",mark:N,positionPrefix:"upper_whisker",extraEncoding:D})],U=[...f!=="tukey"?I:[],...M({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:S,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:T}),..._({partName:"median",mark:{type:"tick",invalid:c,...ae(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:T})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(p),layer:U};const V=`datum["lower_box_${g.field}"]`,se=`datum["upper_box_${g.field}"]`,Q=`(${se} - ${V})`,ye=`${V} - ${l} * ${Q}`,Re=`${se} + ${l} * ${Q}`,ut=`datum["${g.field}"]`,$n={joinaggregate:hre(g.field),groupby:y},ir={transform:[{filter:`(${ye} <= ${ut}) && (${ut} <= ${Re})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${w}`},{op:"max",field:g.field,as:`upper_whisker_${w}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${w}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${w}`},...v],groupby:y}],layer:I},{tooltip:ce,...Ee}=A,{scale:$e,axis:J}=g,pn=SD(g),tt=hi(J,["title"]),An=lre(a,"outliers",t.boxplot,{transform:[{filter:`(${ut} < ${ye}) || (${ut} > ${Re})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...pn!==void 0?{title:pn}:{},...$e!==void 0?{scale:$e}:{},...vt(tt)?{}:{axis:tt}},...Ee,...k?{color:k}:{},...C?{tooltip:C}:{}}})[0];let un;const lo=[...d,...h,$n];return An?un={transform:lo,layer:[An,ir]}:(un=ir,un.transform.unshift(...lo)),{...s,layer:[un,{transform:p,layer:U}]}}function hre(e){const t=ym(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function CDe(e,t,n){const r=cre(e,RS),{continuousAxisChannelDef:i,continuousAxis:o}=ure(e,r,RS),s=i.field,a=ym(s),l=fre(t),u=[...hre(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=xDe(d),{bins:g,timeUnits:m,aggregate:y,groupby:v,encoding:b}=sre(p,n),x=r==="vertical"?"horizontal":"vertical",S=r,C=[...g,...m,{aggregate:[...y,...u],groupby:v},...c];return{bins:g,timeUnits:m,transform:C,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:S,customTooltipWithoutAggregatedField:h}}const kD="errorbar",kDe=["ticks","rule"],EDe=new wE(kD,pre);function pre(e,{config:t}){e={...e,encoding:SE(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=gre(e,kD,t);delete o.size;const c=CD(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function _De(e,t){const{encoding:n}=e;if($De(n))return{orient:cre(e,t),inputType:"raw"};const r=ADe(n),i=TDe(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Me(a)&&Me(l))throw new Error(`${t} cannot have both x2 and y2`);if(Me(a)){if(zu(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Me(l)){if(zu(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(Me(l)&&!Me(a))throw new Error(`${t} cannot have xError2 without xError`);if(Me(c)&&!Me(u))throw new Error(`${t} cannot have yError2 without yError`);if(Me(a)&&Me(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Me(a)){if(zu(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Me(u)){if(zu(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function $De(e){return(Me(e.x)||Me(e.y))&&!Me(e.x2)&&!Me(e.y2)&&!Me(e.xError)&&!Me(e.xError2)&&!Me(e.yError)&&!Me(e.yError2)}function ADe(e){return Me(e.x2)||Me(e.y2)}function TDe(e){return Me(e.xError)||Me(e.xError2)||Me(e.yError)||Me(e.yError2)}function gre(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=Ra(r)?r:{type:r};o&&Z(sne(t));const{orient:u,inputType:c}=_De(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=ure(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=PDe(l,f,d,h,p,c,t,n),{[g]:x,[g==="x"?"x2":"y2"]:S,[g==="x"?"xError":"yError"]:C,[g==="x"?"xError2":"yError2"]:w,...k}=i,{bins:E,timeUnits:A,aggregate:P,groupby:L,encoding:M}=sre(k,n),O=[...P,...m],_=c!=="raw"?[]:L,T=i4(v,f,M,b);return{transform:[...a.transform??[],...E,...A,...O.length===0?[]:[{aggregate:O,groupby:_}],...y],groupby:_,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:M,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:T}}function PDe(e,t,n,r,i,o,s,a){let l=[],u=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Z(BRe(h,p,s)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:jv(h)},{fieldPrefix:"upper_",titlePrefix:lB(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:lB(h,p,"-")}],d=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:bp({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:bp({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:bp({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Z(zRe(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:bd(bd(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}function lB(e,t,n){return`${jv(e)} ${n} ${t}`}const ED="errorband",FDe=["band","borders"],MDe=new wE(ED,mre);function mre(e,{config:t}){e={...e,encoding:SE(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=gre(e,ED,t),u=s,c=CD(u,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?Z(Zz("interpolate")):u.tension&&Z(Zz("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const yre={};function _D(e,t,n){const r=new wE(e,t);yre[e]={normalizer:r,parts:n}}function RDe(){return X(yre)}_D(RS,dre,wDe);_D(kD,pre,kDe);_D(ED,mre,FDe);const ODe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],vre={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},bre={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},DDe=X(vre),NDe=X(bre),LDe={header:1,headerRow:1,headerColumn:1,headerFacet:1},xre=X(LDe),wre=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],IDe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},zDe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ms="_vgsid_",BDe={point:{on:"click",fields:[Ms],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function $D(e){return e==="legend"||!!(e!=null&&e.legend)}function w5(e){return $D(e)&&ae(e)}function AD(e){return!!(e!=null&&e.select)}function Sre(e){const t=[];for(const n of e||[]){if(AD(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function jDe(e){return CE(e)||PD(e)||TD(e)}function TD(e){return K(e,"concat")}function CE(e){return K(e,"vconcat")}function PD(e){return K(e,"hconcat")}function Cre({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Oa(e){return K(e,"step")}function uB(e){return K(e,"view")||K(e,"width")||K(e,"height")}const cB=20,UDe={align:1,bounds:1,center:1,columns:1,spacing:1},VDe=X(UDe);function WDe(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(yE(e)&&!Xv(e.facet)||TD(e))&&(i.columns=s),CE(e)&&(i.columns=1);for(const a of VDe)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=Je(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function o4(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function s4(e,t){const n=OS(e,t);return Oa(n)?n.step:kre}function OS(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return sn(n,{step:e.step})}const kre=20,HDe={continuousWidth:200,continuousHeight:200,step:kre},qDe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:HDe,mark:LOe,arc:{},area:{},bar:jOe,circle:{},geoshape:{},image:{},line:{},point:{},rect:fD,rule:{color:"black"},square:{},text:{color:"black"},tick:UOe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:vOe,projection:{},legend:IDe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:BDe,style:{},title:{},facet:{spacing:cB},concat:{spacing:cB},normalizedNumberFormat:".0%"},Ja=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],fB={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},dB={blue:Ja[0],orange:Ja[1],red:Ja[2],teal:Ja[3],green:Ja[4],yellow:Ja[5],purple:Ja[6],pink:Ja[7],brown:Ja[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function GDe(e={}){return{signals:[{name:"color",value:ae(e)?{...dB,...e}:dB}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function YDe(e){return{signals:[{name:"fontSize",value:ae(e)?{...fB,...e}:fB}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function XDe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Ere(e){const t=X(e||{}),n={};for(const r of t){const i=e[r];n[r]=Zv(i)?Zte(i):Ni(i)}return n}function KDe(e){const t=X(e),n={};for(const r of t)n[r]=Ere(e[r]);return n}const QDe=[...One,...nre,...xre,"background","padding","legend","lineBreak","scale","style","title","view"];function _re(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=nm({},Te(qDe),n?XDe(n):{},t?GDe(t):{},r?YDe(r):{},o||{});i&&rm(s,"selection",i,!0);const a=hi(s,QDe);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Ni(s[l]));for(const l of One)s[l]&&(a[l]=Wn(s[l]));for(const l of nre)s[l]&&(a[l]=Ere(s[l]));for(const l of xre)s[l]&&(a[l]=Wn(s[l]));if(s.legend&&(a.legend=Wn(s.legend)),s.scale){const{invalid:l,...u}=s.scale,c=Wn(l,{level:1});a.scale={...Wn(u),...X(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=KDe(s.style)),s.title&&(a.title=Wn(s.title)),s.view&&(a.view=Wn(s.view)),a}const JDe=new Set(["view",...FOe]),ZDe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],e8e={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...NOe};function t8e(e){e=Te(e);for(const t of ZDe)delete e[t];if(e.axis)for(const t in e.axis)Zv(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of ODe)delete e.legend[t];if(e.mark){for(const t of tB)delete e.mark[t];e.mark.tooltip&&ae(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Sre(e.params)),delete e.params);for(const t of JDe){for(const r of tB)delete e[t][r];const n=e8e[t];if(n)for(const r of n)delete e[t][r];r8e(e,t)}for(const t of RDe())delete e[t];n8e(e);for(const t in e)ae(e[t])&&vt(e[t])&&delete e[t];return vt(e)?void 0:e}function n8e(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Jte(e.title);vt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),vt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),vt(r)?delete e.title:e.title=r}function r8e(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};vt(o)||(e.style[n??t]=o),delete e[t]}function kE(e){return K(e,"layer")}function i8e(e){return K(e,"repeat")}function o8e(e){return!Y(e.repeat)&&K(e.repeat,"layer")}class FD{map(t,n){return yE(t)?this.mapFacet(t,n):i8e(t)?this.mapRepeat(t,n):PD(t)?this.mapHConcat(t,n):CE(t)?this.mapVConcat(t,n):TD(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(kE(t))return this.mapLayer(t,n);if(Ql(t))return this.mapUnit(t,n);throw new Error(YO(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const s8e={zero:1,center:1,normalize:1};function a8e(e){return fe(s8e,e)}const l8e=new Set([Fne,hE,dE,$S,gE,uD,cD,pE,Mne,lD]),u8e=new Set([hE,dE,Fne]);function kh(e){return ee(e)&&Cg(e)==="quantitative"&&!e.bin}function hB(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(ee(s)&&ee(a))if(kh(s)&&kh(a)){if(s.stack)return t;if(a.stack)return i;const l=ee(s)&&!!s.aggregate,u=ee(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(kh(s))return t;if(kh(a))return i}else{if(kh(s))return o&&n==="vertical"?void 0:t;if(kh(a))return o&&n==="horizontal"?void 0:i}}function c8e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function $re(e,t){var g,m;const n=Ra(e)?e:{type:e},r=n.type;if(!l8e.has(r))return null;const i=hB(t,"x",n)||hB(t,"theta",n);if(!i)return null;const o=t[i],s=ee(o)?oe(o,{}):void 0,a=c8e(i),l=[],u=new Set;if(t[a]){const y=t[a],v=ee(y)?oe(y,{}):void 0;v&&v!==s&&(l.push(a),u.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=ee(f)?oe(f,{}):void 0;d&&d!==s&&(l.push(c),u.add(d));const h=wMe.reduce((y,v)=>{if(v!=="tooltip"&&Xf(t,v)){const b=t[v];for(const x of le(b)){const S=Fs(x);if(S.aggregate)continue;const C=oe(S,{});(!C||!u.has(C))&&y.push({channel:v,fieldDef:S})}}return y},[]);let p;return o.stack!==void 0?_c(o.stack)?p=o.stack?"zero":null:p=o.stack:u8e.has(r)&&(p="zero"),!p||!a8e(p)||ore(t)&&h.length===0?null:((g=o==null?void 0:o.scale)!=null&&g.type&&((m=o==null?void 0:o.scale)==null?void 0:m.type)!==qn.LINEAR&&o!=null&&o.stack&&Z(NRe(o.scale.type)),Me(t[Ha(i)])?(o.stack!==void 0&&Z(DRe(i)),null):(ee(o)&&o.aggregate&&!RMe.has(o.aggregate)&&Z(LRe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:zc(r),stackBy:h,offset:p}))}function Are(e,t,n){const r=Wn(e),i=yt("orient",r,n);if(r.orient=p8e(r.type,t,i),i!==void 0&&i!==r.orient&&Z(bRe(r.orient,i)),r.type==="bar"&&r.orient){const l=yt("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:zOe[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=yt("opacity",r,n),s=yt("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=d8e(r.type,t)),yt("cursor",r,n)===void 0&&(r.cursor=f8e(r,t,n)),r}function f8e(e,t,n){return t.href||e.href||yt("href",e,n)?"pointer":e.cursor}function d8e(e,t){if(Ie([gE,lD,uD,cD],e)&&!ore(t))return .7}function h8e(e,t,{graticule:n}){if(n)return!1;const r=Ma("filled",e,t),i=e.type;return sn(r,i!==gE&&i!==pE&&i!==$S)}function p8e(e,t,n){switch(e){case gE:case uD:case cD:case Mne:case TOe:case AOe:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case hE:if(ee(r)&&(Vn(r.bin)||ee(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ee(i)&&(Vn(i.bin)||ee(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(ee(r)&&r.type===Sd&&!Ct(r.bin)||TS(r))&&ee(i)&&Vn(i.bin)?"horizontal":"vertical";if(!s)return(ee(i)&&i.type===Sd&&!Ct(i.bin)||TS(i))&&ee(r)&&Vn(r.bin)?"vertical":"horizontal"}case $S:if(o&&!(ee(r)&&Vn(r.bin))&&s&&!(ee(i)&&Vn(i.bin)))return;case dE:if(s)return ee(i)&&Vn(i.bin)?"horizontal":"vertical";if(o)return ee(r)&&Vn(r.bin)?"vertical":"horizontal";if(e===$S){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case pE:case lD:{const a=oB(r),l=oB(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=Jr(r)&&r.type===wg,c=Jr(i)&&i.type===wg;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function g8e(e){const{point:t,line:n,...r}=e;return X(r).length>1?r:r.type}function m8e(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:hi(e[t],["point","line"])});return e}function S5(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ae(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ae(t.point)?t.point:{}:void 0}function pB(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class y8e{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Ql(t)){const{mark:r,encoding:i}=t,o=Ra(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!S5(o,n[o.type],i);case"area":return!!S5(o,n[o.type],i)||!!pB(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...c}=t,f=SE(u,i),d=Ra(a)?a:{type:a},h=S5(d,i[d.type],f),p=d.type==="area"&&pB(d,i[d.type]),g=[{name:l,...o?{params:o}:{},mark:g8e({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:hi(f,["shape"])}],m=$re(Are(d,f,i),f);let y=f;if(m){const{fieldChannel:v,offset:b}=m;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=hi(y,["y2","x2"]),p&&g.push({...s?{projection:s}:{},mark:{type:"line",...mg(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...mg(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:g},{...n,config:m8e(i)})}}function v8e(e,t){return t?Xv(e)?Pre(e,t):Tre(e,t):e}function C5(e,t){return t?Pre(e,t):e}function a4(e,t,n){const r=t[e];if(eDe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Z(ZMe(r.repeat));return}return t}function Tre(e,t){if(e=a4("field",e,t),e!==void 0){if(e===null)return null;if(yD(e)&&kl(e.sort)){const n=a4("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function gB(e,t){if(ee(e))return Tre(e,t);{const n=a4("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function mB(e,t){if(Me(e)){const n=gB(e,t);if(n)return n;if(Kv(e))return{condition:e.condition}}else{if(Qv(e)){const n=gB(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function Pre(e,t){const n={};for(const r in e)if(K(e,r)){const i=e[r];if(Y(i))n[r]=i.map(o=>mB(o,t)).filter(o=>o);else{const o=mB(i,t);o!==void 0&&(n[r]=o)}}return n}class b8e{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Ql(t)){const{encoding:n,mark:r}=t;if(r==="line"||Ra(r)&&r.type==="line")for(const i of vMe){const o=Xd(i),s=n[o];if(n[i]&&(ee(s)&&!Vn(s.bin)||Ga(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return Z(vRe(!!i.x2,!!i.y2)),r({...t,mark:ae(o)?{...o,type:"rule"}:"rule"},n)}}class x8e extends FD{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[SDe,EDe,MDe,new y8e,new b8e]}map(t,n){if(Ql(t)){const r=Xf(t.encoding,Sl),i=Xf(t.encoding,Cl),o=Xf(t.encoding,nE);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=C5(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return o8e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...o,layer:l.map(f=>{const d={...u,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${zt(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!Y(r)&&t.columns&&(t=hi(t,["columns"]),Z(Xz("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!Y(r)&&r.row||[l?l.row:null],f=!Y(r)&&r.column||[l?l.column:null],d=Y(r)&&r||[l?l.repeat:null];for(const p of d)for(const g of c)for(const m of f){const y={repeat:p,row:g,column:m,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(Y(r)?`${zt(p)}`:(r.row?`row_${zt(g)}`:"")+(r.column?`column_${zt(m)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(hi(b,["data"]))}const h=Y(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return Xv(r)&&t.columns&&(t=hi(t,["columns"]),Z(Xz("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=vB({parentProjection:s,projection:i}),u=yB({parentEncoding:o,encoding:C5(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:l,projection:u,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),y=C5(s,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...c?{height:c}:{},...f?{view:f}:{},...u?{projection:u}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&Z(mRe([...r?[Sl]:[],...i?[Cl]:[]]));const s={},a={};for(const l of[Sl,Cl]){const u=t[l];if(u){const{align:c,center:f,spacing:d,columns:h,...p}=u;s[l]=p;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:l,columns:u,...c}=o;return{facetMapping:v8e(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,l={...i,parentEncoding:yB({parentEncoding:n,encoding:o,layer:!0}),parentProjection:vB({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function yB({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...X(e),...X(t)]);for(const o of i){const s=t[o],a=e[o];if(Me(s)){const l={...a,...s};r[o]=l}else Qv(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||Ps(a)||me(a)||Me(a)||Y(a))&&(r[o]=a)}}else r=t;return!r||vt(r)?void 0:r}function vB(e){const{parentProjection:t,projection:n}=e;return t&&n&&Z(oRe({parentProjection:t,projection:n})),n??t}function MD(e){return K(e,"filter")}function w8e(e){return K(e,"stop")}function Fre(e){return K(e,"lookup")}function S8e(e){return K(e,"data")}function C8e(e){return K(e,"param")}function k8e(e){return K(e,"pivot")}function E8e(e){return K(e,"density")}function _8e(e){return K(e,"quantile")}function $8e(e){return K(e,"regression")}function A8e(e){return K(e,"loess")}function T8e(e){return K(e,"sample")}function P8e(e){return K(e,"window")}function F8e(e){return K(e,"joinaggregate")}function M8e(e){return K(e,"flatten")}function R8e(e){return K(e,"calculate")}function Mre(e){return K(e,"bin")}function O8e(e){return K(e,"impute")}function D8e(e){return K(e,"timeUnit")}function N8e(e){return K(e,"aggregate")}function L8e(e){return K(e,"stack")}function I8e(e){return K(e,"fold")}function z8e(e){return K(e,"extent")&&!K(e,"density")&&!K(e,"regression")}function B8e(e){return e.map(t=>MD(t)?{filter:yp(t.filter,fOe)}:t)}class j8e extends FD{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=bB(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=bB(t,n),t.encoding){const r={};for(const[i,o]of pc(t.encoding))r[i]=Rre(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:pc(r).map(([o,s])=>{const{init:a,bind:l,empty:u,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=u!=="none";for(const f of Zn(n.selectionPredicates[o]??{}))f.empty=u!=="none";return{name:o,value:a,select:c,bind:l}})}:t}}function bB(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(MD(o))return{filter:l4(o,t)};if(Mre(o)&&Kd(o.bin))return{...o,bin:Ore(o.bin)};if(Fre(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function Rre(e,t){var r,i;const n=Te(e);if(ee(n)&&Kd(n.bin)&&(n.bin=Ore(n.bin)),Zd(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(Kv(n))if(Y(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...u}=o;return a?o:{...u,test:l4(o,t)}});else{const{selection:o,param:s,test:a,...l}=Rre(n.condition,t);n.condition=s?n.condition:{...l,test:l4(n.condition,t)}}return n}function Ore(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function l4(e,t){const n=r=>yp(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):yp(e.test||e.filter,r=>r.selection?n(r.selection):r)}class u4 extends FD{map(t,n){const r=n.selections??[];if(t.params&&!Ql(t)){const i=[];for(const o of t.params)AD(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(ue(a)&&(a===t.name||i.includes(a))||Y(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=u4.prototype[e];u4.prototype[e]=function(n,r){return t.call(this,n,U8e(n,r))}}function U8e(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Dre(e,t){t===void 0&&(t=_re(e.config));const n=q8e(e,t),{width:r,height:i}=e,o=G8e(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const V8e=new x8e,W8e=new j8e,H8e=new u4;function q8e(e,t={}){const n={config:t};return H8e.map(V8e.map(W8e.map(e,n),n),n)}function xB(e){return ue(e)?{type:e}:e??{}}function G8e(e,t,n){let{width:r,height:i}=t;const o=Ql(e)||kE(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(Z(Hz("width")),r=void 0),i=="container"&&(Z(Hz("height")),i=void 0));const a={type:"pad",...s,...n?xB(n.autosize):{},...xB(e.autosize)};if(a.type==="fit"&&!o&&(Z(UMe),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Z(qz("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Z(qz("height")),!ji(a,{type:"pad"}))return a}function Y8e(e){return["fit","fit-x","fit-y"].includes(e)}function X8e(e){return e?`fit-${aE(e)}`:"fit"}const K8e=["background","padding"];function wB(e,t){const n={};for(const r of K8e)e&&e[r]!==void 0&&(n[r]=Ni(e[r]));return t&&(n.params=e.params),n}class Jl{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Jl(Te(this.explicit),Te(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return sn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of X(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Qs(e){return{explicit:!0,value:e}}function Pi(e){return{explicit:!1,value:e}}function Nre(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:EE(t,n,r,i)}}function EE(e,t,n,r){return e.explicit&&t.explicit&&Z(ARe(n,r,e.value,t.value)),e}function yc(e,t,n,r,i=EE){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ji(e.value,t.value)?e:i(e,t,n,r)}class Q8e extends Jl{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function _g(e){return K(e,"url")}function g1(e){return K(e,"values")}function Lre(e){return K(e,"name")&&!_g(e)&&!g1(e)&&!Gu(e)}function Gu(e){return e&&(Ire(e)||zre(e)||RD(e))}function Ire(e){return K(e,"sequence")}function zre(e){return K(e,"sphere")}function RD(e){return K(e,"graticule")}var Zt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Zt||(Zt={}));function Bre({invalid:e,isPath:t}){switch(Dne(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function J8e(e){const{marks:t,scales:n}=Bre(e);return t===n?Zt.Main:n==="include-invalid-values"?Zt.PreFilterInvalid:Zt.PostFilterInvalid}function jre(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=zo(i.field),i}function Ed(e,t=!0,n=kr){if(Y(e)){const r=e.map(i=>Ed(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Jd(e))return n(t?wd(e):ZRe(e));return t?n(bt(e)):e}function Z8e(e,t){for(const n of Zn(e.component.selection??{})){const r=n.name;let i=`${r}${vc}, ${n.resolve==="global"?"true":`{unit: ${Kf(e)}}`}`;for(const o of TE)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+TNe,on:[{events:{signal:n.name+vc},update:`modify(${ne(n.name+_d)}, ${i})`}]})}return OD(t)}function eNe(e,t){if(e.component.selection&&X(e.component.selection).length){const n=ne(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Mc("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return OD(t)}function tNe(e,t){let n=!1;for(const r of Zn(e.component.selection??{})){const i=r.name,o=ne(i+_d);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${oie}(${o}, ${ne(a)}${l}`})}n=!0;for(const a of TE)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),OD(t)}function nNe(e,t){const n=[...t],r=Kf(e,{escape:!1});for(const i of Zn(e.component.selection??{})){const o={name:i.name+_d};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Ms}}]),i.init){const a=i.project.items.map(jre);o.values=i.project.hasSelectionId?i.init.map(l=>({unit:r,[Ms]:Ed(l,!1)[0]})):i.init.map(l=>({unit:r,fields:a,values:Ed(l,!1)}))}n.filter(a=>a.name===i.name+_d).length||n.push(o)}return n}function Ure(e,t){for(const n of Zn(e.component.selection??{}))for(const r of TE)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function rNe(e,t){for(const n of e.children)Vt(n)&&(t=Ure(n,t));return t}function iNe(e,t,n,r){const i=cie(e,t.param,t);return{signal:Ts(n.get("type"))&&Y(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function OD(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class gt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Z(nRe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class pi extends gt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Nte()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function k5(e){return e.as!==void 0}function SB(e){return`${e}_end`}class ba extends gt{clone(){return new ba(null,Te(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:l}=o;if(l){let u;if(Ic(l)){if(Vt(n)){const{mark:c,markDef:f,config:d}=n,h=mc({fieldDef:o,markDef:f,config:d});(p1(c)||h)&&(u={timeUnit:Cn(l),field:a})}}else u={as:oe(o,{forAs:!0}),field:a,timeUnit:l};if(Vt(n)){const{mark:c,markDef:f,config:d}=n,h=mc({fieldDef:o,markDef:f,config:d});p1(c)&&an(s)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Be(u)]=u)}return i},{});return vt(r)?null:new ba(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=Cn(r),s={...i,timeUnit:o};return new ba(t,{[Be(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of pc(this.timeUnits)){const o=k5(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Zn(this.timeUnits).map(t=>k5(t)?t.as:SB(t.field)))}dependentFields(){return new Set(Zn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Be(this.timeUnits)}`}assemble(){const t=[];for(const n of Zn(this.timeUnits)){const{rectBandPosition:r}=n,i=Cn(n.timeUnit);if(k5(n)){const{field:o,as:s}=n,{unit:a,utc:l,...u}=i,c=[s,`${s}_end`];t.push({field:zo(o),type:"timeunit",...a?{units:qv(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...CB(c,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=Vre({timeUnit:i,field:s}),l=SB(s);t.push({type:"formula",expr:a,as:l}),t.push(...CB([s,l],r,i))}}return t}}const _E="offsetted_rect_start",$E="offsetted_rect_end";function Vre({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=yne(r),{part:s,step:a}=wne(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', datum['${t}'], ${n?-a:a})`}function CB([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:kB([Vre({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${_E}`},{type:"formula",expr:kB([i,o],n+.5),as:`${e}_${$E}`}]}return[]}function kB([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const eb="_tuple_fields";class oNe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const sNe={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new oNe),o={},s={},a=new Set,l=(p,g)=>{const m=g==="visual"?p.channel:p.field;let y=zt(`${r}_${m}`);for(let v=1;a.has(y);v++)y=zt(`${r}_${m}_${v}`);return a.add(y),{[g]:y}},u=t.type,c=e.config.selection[u],f=n.value!==void 0?le(n.value):null;let{fields:d,encodings:h}=ae(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(ae(p))for(const g of X(p))yMe(g)?(h||(h=[])).push(g):u==="interval"?(Z(JMe),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){Z(VMe(p,g.aggregate));continue}else if(!m){Z(Yz(p));continue}if(g.timeUnit&&!Ic(g.timeUnit)){m=e.vgField(p);const y={timeUnit:g.timeUnit,as:m,field:g.field};s[Be(y)]=y}if(!o[m]){const y=u==="interval"&&qa(p)&&Ts(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:p,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(o[m]=v),i.hasField[m]=o[m],i.hasSelectionId=i.hasSelectionId||m===Ms,Ute(p)?(v.geoChannel=p,v.channel=jte(p),i.hasChannel[v.channel]=o[m]):i.hasChannel[p]=o[m]}}else Z(Yz(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===Ms}f&&(t.init=f.map(p=>i.items.map(g=>ae(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),vt(s)||(i.timeUnit=new ba(null,s))},signals:(e,t,n)=>{const r=t.name+eb;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(jre)})}},El={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!qa(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&Z(GMe),!o||!Ts(s)){Z(qMe);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||EB(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(oie))i.update=`{${r.map(s=>`${ne(zo(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${ne(zo(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!EB(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function c4(e,t){return`domain(${ne(e.scaleName(t))})`}function EB(e){return e.parent&&km(e.parent)&&!e.parent.parent}const xp="_brush",Wre="_scale_trigger",Jm="geo_interval_init_tick",Hre="_init",aNe="_center",lNe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ae(n.select)?n.select:{}};i.fields=[Ms],i.encodings||(i.encodings=n.value?X(n.value):[Bs,zs]),n.select={type:"interval",...i}}if(t.translate&&!El.defined(t)){const i=`!event.item || event.item.mark.name !== ${ne(t.name+xp)}`;for(const o of t.events){if(!o.between){Z(`${o} is not an ordered event stream for interval selections.`);continue}const s=le((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+vc,o=Zn(t.project.hasChannel).filter(a=>a.channel===Bt||a.channel===zn),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(uNe(e,t,l,s&&s[l.index])),[])),e.hasProjection){const a=ne(e.projectionName()),l=e.projectionName()+aNe,{x:u,y:c}=t.project.hasChannel,f=u&&u.signals.visual,d=c&&c.signals.visual,h=u?s&&s[u.index]:`${l}[0]`,p=c?s&&s[c.index]:`${l}[1]`,g=S=>e.getSizeSignalRef(S).signal,m=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;s&&(n.unshift({name:r+Hre,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(C=>C.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${m}, {markname: ${ne(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Kf(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,x=o.map(S=>S.signals.visual);return n.concat({name:i,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...s?[{signal:Jm}]:[]],update:b}]})}else{if(!El.defined(t)){const u=r+Wre,c=o.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=ne(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=Ts(m)?"+":"";return`(!isArray(${h}) || (${y}invert(${g}, ${p})[0] === ${y}${h}[0] && ${y}invert(${g}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${Kf(e)}, fields: ${r+eb}, values`;return n.concat({name:i,...s?{init:`{${l}: ${Ed(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Vt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Jm).length||n.unshift({name:Jm,value:null,on:[{events:"timer{1}",update:`${Jm} === null ? {} : ${Jm}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${ne(t.name+_d)})`;if(El.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of X(u))u[m]=[{test:`${l}.length && ${l}[0].unit === ${Kf(e)}`,...u[m]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=X(h).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],m),{}),g=d??(t.translate?"move":null);return[{name:`${r+xp}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:u}},...n,{name:r+xp,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function uNe(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=ne(i?e.scaleName(o):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(o===Bt?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,h=El.defined(t),p=e.getScaleComponent(o),g=p?p.get("type"):void 0,m=r?{init:Ed(r,!0,l)}:{value:[]};return f.push({events:{signal:t.name+Wre},update:Ts(g)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...m,on:f},{name:d,...r?{init:Ed(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===Bt?0:1,h=t.name+Hre,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...p,on:f}]}}const cNe={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+eb,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=Zn(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+xp):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Kf(e)}, `;if(t.project.hasSelectionId)u+=`${Ms}: ${s}[${ne(Ms)}]`;else{const f=o.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${s}[${ne(e.vgField(d.channel,{}))}], ${s}[${ne(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${s}[${ne(d.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+vc,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function xm({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=Kv(t)&&t.condition;let s=[];o&&(s=le(o).map(u=>{const c=i(u);if(ZOe(u)){const{param:f,empty:d}=u;return{test:uie(e,{param:f,empty:d}),...c}}else return{test:LS(e,u.test),...c}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function DD(e,t="text"){const n=e.encoding[t];return xm({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>AE(r,e.config),invalidValueRef:void 0})}function AE(e,t,n="datum"){if(e){if(Ps(e))return Mt(e.value);if(Me(e)){const{format:r,formatType:i}=FS(e);return gD({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function qre(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(Y(s))return{tooltip:_B({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return xm({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const c=AE(u,i,a);if(c)return c;if(u===null)return;let f=yt("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),ue(f))return{value:f};if(ae(f))return me(f)?f:f.content==="encoding"?_B(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function Gre(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(c,f){const d=Xd(f),h=Jr(c)?c:{...c,type:e[d].type},p=h.title||bD(h,i),g=le(p).join(", ").replaceAll(/"/g,'\\"');let m;if(an(f)){const y=f==="x"?"x2":"y2",v=Fs(e[y]);if(Vn(h.bin)&&v){const b=oe(h,{expr:s}),x=oe(v,{expr:s}),{format:S,formatType:C}=FS(h);m=Yv(b,x,S,C,i),o.add(y)}}if((an(f)||f===Wo||f===Is)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=FS(h);m=gD({fieldOrDatumDef:h,format:y,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}m??(m=AE(h,i,s).signal),a.push({channel:f,key:g,value:m})}wD(e,(c,f)=>{ee(c)?l(c,f):vE(c)&&l(c.condition,f)});const u={};for(const{channel:c,key:f,value:d}of a)!o.has(c)&&!u[f]&&(u[f]=d);return u}function _B(e,t,n,{reactiveGeom:r}={}){const i=Gre(e,t,n,{reactiveGeom:r}),o=pc(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function fNe(e){const{markDef:t,config:n}=e,r=yt("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...dNe(e),...hNe(e)}}function dNe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=yt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:fe(zMe,t)?{}:{ariaRoleDescription:{value:t}}}function hNe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return xm({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>AE(l,e.config),invalidValueRef:void 0});const s=yt("description",n,r);if(s!=null)return{description:Mt(s)};if(r.aria===!1)return{};const a=Gre(t,i,r);if(!vt(a))return{description:{signal:pc(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Xn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=yt(e,r,o,{vgChannel:s,ignoreVgConfig:!Kv(u)})),l!==void 0&&(a=Mt(l)));const c={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=Lne({...c,scaleChannel:e,channelDef:u});return xm({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:f,mainRefFn:h=>pD({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function Yre(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??yt("filled",n,i),a=Ie(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=yt(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,u=yt(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...l?{fill:Mt(l)}:{},...u?{stroke:Mt(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&Z(lne("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Xn("color",e,{vgChannel:c,defaultValue:s?l:u}),...Xn("fill",e,{defaultValue:r.fill?l:void 0}),...Xn("stroke",e,{defaultValue:r.stroke?u:void 0})}}function pNe(e){const{encoding:t,mark:n}=e,r=t.order;return!zc(n)&&Ps(r)?xm({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Mt(i.value),invalidValueRef:void 0}):{}}function $g({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:pD({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Mt(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Wr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[Ha(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=$g({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),p=ND({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!l&&an(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:gNe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function gNe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Me(n)&&i&&t===i.fieldChannel){if(ee(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return AS({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Yf(n,r,{suffix:"end"},{offset:o})}return hD(e)}function ND({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=Xd(n),l=gc(n),u=yt(n,o,s,{vgChannel:l});if(u!==void 0)return xy(n,u);switch(t){case"zeroOrMin":return $B({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return $B({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[ki(n)],mult:.5}}}}function $B({mainChannel:e,config:t,...n}){const r=Nne(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const mNe={left:"x",center:"xc",right:"x2"},yNe={top:"y",middle:"yc",bottom:"y2"};function Xre(e,t,n,r="middle"){if(e==="radius"||e==="theta")return gc(e);const i=e==="x"?"align":"baseline",o=yt(i,t,n);let s;return me(o)?(Z(yRe(i)),s=void 0):s=o,e==="x"?mNe[s||(r==="top"?"left":"center")]:yNe[s||r]}function DS(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Kre(e,t,{defaultPos:n,defaultPos2:r}):Wr(e,t,{defaultPos:n})}function Kre(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=Ha(e),a=ki(e),l=vNe(t,r,s),u=l[a]?Xre(e,i,o):gc(e);return{...Wr(e,t,{defaultPos:n,vgChannel:u}),...l}}function vNe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=Xd(n),u=ki(n),c=gc(n),f=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in o?$g({channel:n,markDef:o,encoding:r,model:e}):$g({channel:l,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=ki(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const g=bNe({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:ix(n,o)||ix(n,{[n]:ZT(n,o,a.style),[u]:ZT(u,o,a.style)})||ix(n,a[i])||ix(n,a.mark)||{[c]:ND({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function bNe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Me(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Yf(t,o,{suffix:"start"},{offset:l}):hD({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function ix(e,t){const n=ki(e),r=gc(e);if(t[r]!==void 0)return{[r]:xy(e,t[r])};if(t[e]!==void 0)return{[r]:xy(e,t[e])};if(t[n]){const i=t[n];if(Cd(i))Z(fRe(n));else return{[n]:xy(e,i)}}}function Dl(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=Ha(t),a=ki(t),l=r[t],u=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??yt("size",i,n,{vgChannel:a}),p=qte(t),g=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return ee(l)&&(Ct(l.bin)||Vn(l.bin)||l.timeUnit&&!u)&&!(h&&!Cd(h))&&!r[p]&&!Ln(f)?SNe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Me(l)&&Ln(f)||g)&&!u?wNe(l,t,e):Kre(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function xNe(e,t,n,r,i,o,s){if(Cd(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=Ma("minBandSize",{type:s},r);return{signal:c?`max(${ms(c)}, ${u})`:u}}else i.band!==1&&(Z(wRe(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(me(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(Qd(l)&&Je(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=sn(l,s==="tick"?f:s==="bar"?u:c);if(me(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Je(d))return{signal:`${1-d} * ${e}`}}return{value:s4(r.view,e)-2}}function wNe(e,t,n){var E,A;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=ki(t),f=Ha(t),d=qte(t),h=n.scaleName(d),p=n.getScaleComponent(UO(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(i.size||r.size)&&(g?m=Xn("size",n,{vgChannel:c,defaultRef:Mt(r.size)}):Z(ERe(r.type)));const y=!!m,v=Wne({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(E=u||p)==null?void 0:E.get("type"),useVlSizeChannel:g});m=m||{[c]:xNe(c,h||l,p||u,o,v,!!e,r.type)};const b=((A=u||p)==null?void 0:A.get("type"))==="band"&&Cd(v)&&!y?"top":"middle",x=Xre(t,r,o,b),S=x==="xc"||x==="yc",{offset:C,offsetType:w}=$g({channel:t,markDef:r,encoding:i,model:n,bandPosition:S?.5:0}),k=hD({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:C,defaultRef:ND({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:S?w==="encoding"?0:.5:me(v)?{signal:`(1-${v})/2`}:Cd(v)?(1-v.band)/2:0});if(c)return{[x]:k,...m};{const P=gc(f),L=m[c],M=C?{...L,offset:C}:L;return{[x]:k,[P]:Y(k)?[k[0],{...k[1],offset:M}]:{...k,offset:M}}}}function AB(e,t,n,r,i,o,s){if(Bte(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(me(n)||me(i)||me(r)||o){const u=ms(n),c=ms(i),f=ms(r),d=ms(o),p=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${l})`:l,g=f?`${f} + `:"",m=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:g+m+y}}else return i=i||0,r+(n?-i-l:+i+l)}function SNe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var A;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),f=Wne({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),d=(A=r.component.axes[n])==null?void 0:A[0],h=(d==null?void 0:d.get("translate"))??.5,p=an(n)?yt("binSpacing",o,i)??0:0,g=Ha(n),m=gc(n),y=gc(g),v=Ma("minBandSize",o,i),{offset:b}=$g({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:x}=$g({channel:g,markDef:o,encoding:s,model:r,bandPosition:0}),S=GOe({fieldDef:e,scaleName:l}),C=AB(n,p,c,h,b,v,S),w=AB(g,p,c,h,x??b,v,S),k=me(f)?{signal:`(1-${f.signal})/2`}:Cd(f)?(1-f.band)/2:.5,E=mc({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(Ct(e.bin)||e.timeUnit){const P=e.timeUnit&&E!==.5;return{[y]:TB({fieldDef:e,scaleName:l,bandPosition:k,offset:w,useRectOffsetField:P}),[m]:TB({fieldDef:e,scaleName:l,bandPosition:me(k)?{signal:`1-${k.signal}`}:1-k,offset:C,useRectOffsetField:P})}}else if(Vn(e.bin)){const P=Yf(e,l,{},{offset:w});if(ee(t))return{[y]:P,[m]:Yf(t,l,{},{offset:C})};if(Kd(e.bin)&&e.bin.step)return{[y]:P,[m]:{signal:`scale("${l}", ${oe(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}Z(fne(g))}function TB({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return AS({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:_E,endSuffix:$E}:{}})}const CNe=new Set(["aria","width","height"]);function Ho(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Yre(e):{};return{...kNe(e.markDef,t),...PB("fill",n),...PB("stroke",r),...Xn("opacity",e),...Xn("fillOpacity",e),...Xn("strokeOpacity",e),...Xn("strokeWidth",e),...Xn("strokeDash",e),...pNe(e),...qre(e),...DD(e,"href"),...fNe(e)}}function PB(e,t){return t?{[e]:t}:{}}function kNe(e,t){return IMe.reduce((n,r)=>(!CNe.has(r)&&K(e,r)&&t[r]!=="ignore"&&(n[r]=Mt(e[r])),n),{})}function LD(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var u;let s;if(!qa(o)||!(s=e.getScaleType(o)))return;const a=lE(i.aggregate),l=dD({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(WOe(l)){const c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(o=>fE(o,!0)).join(" && ")}}}function FB(e,t){if(t!==void 0)return{[e]:Mt(t)}}const E5="voronoi",Qre={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(E5)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(zc(o))return Z(WMe(o)),n;const s={name:e.getName(E5),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...qre(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const f=u.name??"";f===e.component.mark[0].name?a=c:f.includes(E5)&&(l=!0)}),l||n.splice(a+1,0,s),n}},Jre={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!$D(e.bind),parse:(e,t,n)=>sie(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=Qre.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=zt(`${r}_${l.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...s?{init:Ed(s[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ne(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+vc),s=r+eb,a=i.items.map(u=>zt(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},NS="_toggle",Zre={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+NS,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+vc,r=t.name+NS;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Kf(e)}}, `)+`${r} ? ${n} : null`}},ENe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=ue(t.clear)?Mc(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Jre.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===zt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+vc);r(i,"null"),Zre.defined(t)&&(i=n.findIndex(o=>o.name===t.name+NS),r(i,"false"))}return n}},eie={defined:e=>{const t=e.resolve==="global"&&e.bind&&$D(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ms;return t&&!n&&Z(YMe),t&&n},parse:(e,t,n)=>{const r=Te(n);if(r.select=ue(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},sie(t,r),ae(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=le(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=w5(t.bind)?t.bind.legend:"click",o=ue(i)?Mc(i,"view"):le(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=w5(t.bind)&&t.bind.legend,o=s=>a=>{const l=Te(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${zt(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+vc),s=r+eb,a=i.items.filter(d=>d.hasLegend).map(d=>zt(`${r}_${zt(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(d=>d.name===r+NS),f=w5(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function _Ne(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of Zn(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&eie.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const tie="_translate_anchor",nie="_translate_delta",$Ne={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=El.defined(t),o=r+tie,{x:s,y:a}=t.project.hasChannel;let l=Mc(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+xp,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?c4(e,Bt):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?c4(e,zn):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+nie,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&MB(e,t,s,"width",n),a!==void 0&&MB(e,t,a,"height",n),n}};function MB(e,t,n,r,i){const o=t.name,s=o+tie,a=o+nie,l=n.channel,u=El.defined(t),c=i.find(S=>S.name===n.signals[u?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d&&d.get("type"),p=d&&d.get("reverse"),g=u?l===Bt?p?"":"-":p?"-":"":"",m=`${s}.extent_${l}`,y=`${g}${a}.${l} / ${u?`${f}`:`span(${m})`}`,v=!u||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",x=`${v}(${m}, ${y}${b})`;c.on.push({events:{signal:a},update:u?x:`clampRange(${x}, 0, ${f})`})}const rie="_zoom_anchor",iie="_zoom_delta",ANe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=El.defined(t),o=r+iie,{x:s,y:a}=t.project.hasChannel,l=ne(e.scaleName(Bt)),u=ne(e.scaleName(zn));let c=Mc(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+xp,f))),n.push({name:r+rie,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&RB(e,t,s,"width",n),a!==void 0&&RB(e,t,a,"height",n),n}};function RB(e,t,n,r,i){const o=t.name,s=n.channel,a=El.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),d=a?c4(e,s):l.name,h=o+iie,p=`${o}${rie}.${s}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${g}(${d}, ${p}, ${h}${m})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const _d="_store",vc="_tuple",TNe="_modify",oie="vlSelectionResolve",TE=[cNe,lNe,sNe,Zre,Jre,El,eie,ENe,$Ne,ANe,Qre];function PNe(e){let t=e.parent;for(;t&&!qi(t);)t=t.parent;return t}function Kf(e,{escape:t}={escape:!0}){let n=t?ne(e.name):e.name;const r=PNe(e);if(r){const{facet:i}=r;for(const o of Ao)i[o]&&(n+=` + '__facet_${o}_' + (facet[${ne(r.vgField(o))}])`)}return n}function ID(e){return Zn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function sie(e,t){(ue(t.select)||!t.select.on)&&delete e.events,(ue(t.select)||!t.select.clear)&&delete e.clear,(ue(t.select)||!t.select.toggle)&&delete e.toggle}function f4(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...f4(e.object)),t.push(...f4(e.property))),t)}function aie(e){return e.object.type==="MemberExpression"?aie(e.object):e.object.name==="datum"}function lie(e){const t=iO(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&aie(r)&&n.add(f4(r).slice(1).join("."))}),n}class wm extends gt{clone(){return new wm(null,this.model,Te(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=LS(this.model,this.filter,this),this._dependentFields=lie(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function FNe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const o=zt(i.name),s=i.select,a=ue(s)?s:s.type,l=ae(s)?Te(s):{type:a},u=r[a];for(const d in u)d==="fields"||d==="encodings"||(d==="mark"&&(l.mark={...u.mark,...l.mark}),(l[d]===void 0||l[d]===!0)&&(l[d]=Te(u[d]??l[d])));const c=n[o]={...l,name:o,type:a,init:i.value,bind:i.bind,events:ue(l.on)?Mc(l.on,"scope"):le(Te(l.on))},f=Te(i);for(const d of TE)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function uie(e,t,n,r="datum"){const i=ue(t)?t:t.param,o=zt(i),s=ne(o+_d);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${ne(a.resolve)})`,c=`${l}${s}, ${r}${u}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function cie(e,t,n){const r=zt(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&Z(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ne(o)}.`);else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,Z((a.length?"Multiple ":"No ")+`matching ${ne(i)} encoding found for selection ${ne(n.param)}. Using "field": ${ne(o)}.`)):o=a[0].field}return`${s.name}[${ne(zo(o))}]`}function MNe(e,t){for(const[n,r]of pc(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new pi(new wm(t,e,{param:n}),i,Zt.Lookup,e.component.data.outputNodeRefCounts)}}function LS(e,t,n){return by(t,r=>ue(r)?r:lOe(r)?uie(e,r,n):Cne(r))}function RNe(e,t){if(e)return Y(e)&&!mu(e)?e.map(n=>bD(n,t)).join(", "):e}function _5(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function W0(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const p=h,g=hDe[p],m=c[p];if(g&&g!==t&&g!=="both")delete c[p];else if(Zv(m)){const{condition:y,...v}=m,b=le(y),x=sB[p];if(x){const{vgProp:S,part:C}=x,w=[...b.map(k=>{const{test:E,...A}=k;return{test:LS(null,E),...A}}),v];_5(c,C,S,w),delete c[p]}else if(x===null){const S={signal:b.map(C=>{const{test:w,...k}=C;return`${LS(null,w)} ? ${Wz(k)} : `}).join("")+Wz(v)};c[p]=S}}else if(me(m)){const y=sB[p];if(y){const{vgProp:v,part:b}=y;_5(c,b,v,m),delete c[p]}}Ie(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},vt(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:sn(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&me(c.encode.labels.update.text)&&(p=bd(a,"datum.label",c.encode.labels.update.text.signal)),_5(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of ere)e.hasAxisPart(p)||delete c.encode[p];vt(c.encode)&&delete c.encode}const h=RNe(l,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:sn(u,0)}}}}function fie(e){const{axes:t}=e.component,n=[];for(const r of Xl)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function ONe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>W0(i,"grid",t)),...r.map(i=>W0(i,"grid",t)),...n.map(i=>W0(i,"main",t)),...r.map(i=>W0(i,"main",t))].filter(i=>i)}function OB(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...X(s),...X(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${o}" ? ${ms(s[c])} : ${ms(a[c])}`};return u}return t[i]})])}function DNe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:$ne(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=me(n)?"axisOrient":`axis${jv(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:OB(a,r,e,n),vgAxisConfig:OB(l,r,e,n),axisConfigStyle:NNe([...l,...a],r)}}function NNe(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=le(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function d4(e,t,n,r={}){var o;const i=tne(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const DB={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??LNe(n,e),gridScale:({model:e,channel:t})=>INe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||hie(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||die(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??BNe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??jNe(t.type,n,ee(t)&&!!t.timeUnit,ee(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??VNe({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:WNe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=pie(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return rne(i?[iB(i)]:[],ee(s)?[iB(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>HNe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??qNe(n,t)};function LNe(e,t){return!Ln(e)&&ee(t)&&!Ct(t==null?void 0:t.bin)&&!Vn(t==null?void 0:t.bin)}function INe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function zNe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return me(o)?o:h1(o);{const{configValue:s}=d4("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?h1(s):n===Bt&&Ie([aD,sD],e.type)&&!(ee(e)&&e.timeUnit)?270:void 0}}function h4(e){return`(((${e.signal} % 360) + 360) % 360)`}function die(e,t,n,r){if(e!==void 0)if(n==="x"){if(me(e)){const i=h4(e),o=me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(me(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(me(e)){const i=h4(e),o=me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(me(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function hie(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(me(e)){const s=h4(e),a=me(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(me(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function BNe(e,t){if(t==="x"&&Ie(["quantitative","temporal"],e))return!0}function jNe(e,t,n,r){if(n&&!ae(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function UNe(e){return e==="x"?"bottom":"left"}function VNe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ln(t)&&t!=="log"){if(ee(e)){if(Ct(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ie(["month","hours","day","quarter"],(i=Cn(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function WNe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ee(t)){const{timeUnit:n}=t;if(n){const r=xne(n);if(r)return{signal:r}}}}function pie(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return ine(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function HNe(e,t){const n=e.values;if(Y(n))return Zne(t,n);if(me(n))return n}function qNe(e,t){return e==="rect"&&PS(t)?1:0}class Ag extends gt{clone(){return new Ag(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=lie(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Zd(r)&&Vne(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,l=a.map((u,c)=>`${Cne({field:o,timeUnit:s,equal:u})} ? ${c} : `).join("")+a.length;t=new Ag(t,{calculate:l,as:Tg(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Be(this.transform)}`}}function Tg(e,t,n){return oe(e,{prefix:t,suffix:"sort_index",...n})}function PE(e,t){return Ie(["top","bottom"],t)?"column":Ie(["left","right"],t)||e==="row"?"row":"column"}function Pg(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return sn((t||{})[e],i[e],n.header[e])}function FE(e,t,n,r){const i={};for(const o of e){const s=Pg(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const zD=["row","column"],BD=["header","footer"];function GNe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=FE(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=PE(t,a),u=h1(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...mie(u,l),...gie(l,u,o),...yie(r,i,t,DDe,vre)}}}function gie(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=hie(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function mie(e,t){const n=die(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function YNe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of BD)if(n[i])for(const o of n[i]){const s=KNe(e,t,i,n,o);s!=null&&r.push(s)}return r}function XNe(e,t){const{sort:n}=e;return kl(n)?{field:oe(n,{expr:"datum"}),order:n.order??"ascending"}:Y(n)?{field:Tg(e,t,{expr:"datum"}),order:"ascending"}:{field:oe(e,{expr:"datum"}),order:n??"ascending"}}function p4(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=FE(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=gD({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=PE(t,a);return{text:{signal:l?bd(bd(l,"datum.label",u),"datum.value",oe(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...mie(o,c),...gie(c,o,s),...yie(n,e,t,NDe,bre)}}function KNe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=FE(["labelOrient"],s.header,a,t);(t==="row"&&!Ie(["top","bottom"],f)||t==="column"&&!Ie(["left","right"],f))&&(o=p4(s,t,a))}const l=qi(e)&&!Xv(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:XNe(s,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const QNe={column:{start:0,end:1},row:{start:1,end:0}};function JNe(e,t){return QNe[t][e]}function ZNe(e,t){const n={};for(const r of Ao){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=FE(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=PE(r,s),l=JNe(o,a);l!==void 0&&(n[a]=l)}}return vt(n)?void 0:n}function yie(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=Pg(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function jD(e){return[...ox(e,"width"),...ox(e,"height"),...ox(e,"childWidth"),...ox(e,"childHeight")]}function ox(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(Ln(s)&&Qd(a)){const l=e.scaleName(n);return qi(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[NB(l,a)]:[NB(l,a),{name:i,update:vie(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=o4(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function NB(e,t){const n=`${e}_step`;return me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function vie(e,t,n){const r=t.get("type"),i=t.get("padding"),o=sn(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${ms(s)}, ${ms(o)}) * ${e}_step`}function bie(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function xie(e,t){return X(e).reduce((n,r)=>({...n,...xm({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Mt(i.value),invalidValueRef:void 0})}),{})}function wie(e,t){if(qi(t))return e==="theta"?"independent":"shared";if(km(t))return"shared";if(YD(t))return an(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function UD(e,t){const n=e.scale[t],r=an(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Z(PRe(t)),"independent"):e[r][t]||"shared"}const e9e={...zDe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Sie=X(e9e);class t9e extends Jl{}const LB={symbols:n9e,gradient:r9e,labels:i9e,entries:o9e};function n9e(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:u}=n,c=s.filled&&u!=="trail";let f={...jMe({},n,OOe),...Yre(n,{filled:c})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=d===void 0?Cie(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Si)delete f.fill;else if(K(f.fill,"field"))h?delete f.fill:(f.fill=Mt(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=Mt(g??1));else if(Y(f.fill)){const m=g4(a.fill??a.color)??s.fill??(c&&s.color);m&&(f.fill=Mt(m))}}if(f.stroke){if(r==="stroke"||!c&&r===Si)delete f.stroke;else if(K(f.stroke,"field")||p)delete f.stroke;else if(Y(f.stroke)){const m=sn(g4(a.stroke||a.color),s.stroke,c?s.color:void 0);m&&(f.stroke={value:m})}}if(r!==Yl){const m=ee(t)&&Eie(n,i,t);m?f.opacity=[{test:m,...Mt(g??1)},Mt(l.legend.unselectedOpacity)]:g&&(f.opacity=Mt(g))}return f={...f,...e},vt(f)?void 0:f}function r9e(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Cie(s.opacity)||o.opacity:void 0;return u&&(a.opacity=Mt(u)),a={...a,...e},vt(a)?void 0:a}function i9e(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=ee(t)?Eie(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let f;kd(c)?f=ys({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):u===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=ys({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&ee(t)&&t.timeUnit===void 0&&(f=ys({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...l?{opacity:l}:{},...f?{text:f}:{},...e};return vt(d)?void 0:d}function o9e(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function Cie(e){return kie(e,(t,n)=>Math.max(t,n.value))}function g4(e){return kie(e,(t,n)=>sn(t,n.value))}function kie(e,t){if(tDe(e))return le(e.condition).reduce(t,e.value);if(Ps(e))return e.value}function Eie(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=ne(n.field);return r.map(o=>`(!length(data(${ne(zt(o)+_d)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const IB={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Bne(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return jne(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??d9e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??h9e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??a9e(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>bp(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(vp(n)&&da(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>s9e(t,e)};function s9e(e,t){const n=e.values;if(Y(n))return Zne(t,n);if(me(n))return n}function a9e(e,t,n,r){if(t!=="shape"){const i=g4(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function l9e(e){const{legend:t}=e;return sn(t.type,u9e(e))}function u9e({channel:e,timeUnit:t,scaleType:n}){if(vp(e)){if(Ie(["quarter","month","day"],t))return"symbol";if(da(n))return"gradient"}return"symbol"}function c9e({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??f9e(n,t)}function f9e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function d9e({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(da(i))return n==="horizontal"?r==="top"||r==="bottom"?zB(t,"width",s,o):s:zB(t,"height",l,a)}function zB(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function h9e(e){if(Ie(["quantile","threshold","log","symlog"],e))return"greedy"}function _ie(e){const t=Vt(e)?p9e(e):v9e(e);return e.component.legends=t,t}function p9e(e){const{encoding:t}=e,n={};for(const r of[Si,...wre]){const i=xn(t[r]);!i||!e.getScaleComponent(r)||r===Ci&&ee(i)&&i.type===bm||(n[r]=y9e(e,r))}return n}function g9e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function m9e(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function y9e(e,t){var x;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new t9e({},g9e(e,t));_Ne(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=xn(i[t]),f=ee(c)?(x=Cn(c.timeUnit))==null?void 0:x.unit:void 0,d=n.orient||o.legend.orient||"right",h=l9e({legend:n,channel:t,timeUnit:f,scaleType:u}),p=c9e({legend:n,legendType:h,orient:d,legendConfig:s}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:u,orient:d,legendType:h,direction:p};for(const S of Sie){if(h==="gradient"&&S.startsWith("symbol")||h==="symbol"&&S.startsWith("gradient"))continue;const C=S in IB?IB[S](g):n[S];if(C!==void 0){const w=m9e(C,S,n,e.fieldDef(t));(w||o.legend[S]===void 0)&&a.set(S,C,w)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const S of["labels","legend","title","symbols","gradient","entries"]){const C=xie(m[S]??{},e),w=S in LB?LB[S](C,b):C;w!==void 0&&!vt(w)&&(v[S]={...y!=null&&y.length&&ee(c)?{name:`${zt(c.field)}_legend_${S}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:w})}return vt(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function v9e(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){_ie(r);for(const i of X(r.component.legends))n.legend[i]=UD(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=$ie(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of X(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function $ie(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of Sie){const c=yc(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(f,d)=>{switch(u){case"symbolType":return b9e(f,d);case"title":return one(f,d);case"type":return i=!0,Pi("symbol")}return EE(f,d,u,"legend")});e.setWithExplicit(u,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&ES(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&ES(e.explicit,["encode","gradient"])),e}function b9e(e,t){return t.value==="circle"?t:e}function x9e(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Aie(e){const t=e.component.legends,n={};for(const i of X(t)){const o=e.getScaleComponent(i),s=bt(o.get("domains"));if(n[s])for(const a of n[s])$ie(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return Zn(n).flat().map(i=>w9e(i,e.config)).filter(i=>i!==void 0)}function w9e(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const c of wre)o[c]&&delete u[c]}if(o.title||delete o.title,r!==void 0){let u=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&me(o.encode.labels.update.text)&&(u=bd(r,"datum.label",o.encode.labels.update.text.signal)),x9e(o,"labels","text",{signal:u})}return o}}function S9e(e){return km(e)||YD(e)?C9e(e):Tie(e)}function C9e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Tie(e))}function Tie(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=me(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Ie(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const k9e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Pie extends Jl{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Fie(e){e.component.projection=Vt(e)?E9e(e):A9e(e)}function E9e(e){if(e.hasProjection){const t=Wn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?_9e(e):void 0,o=new Pie(e.projectionName(!0),{...Wn(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function _9e(e){const t=[],{encoding:n}=e;for(const r of[[Bs,zs],[Bo,js]])(xn(n[r[0]])||xn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ci)&&e.typedFieldDef(Ci).type===bm&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Zt.Main)),t}function $9e(e,t){const n=DO(k9e,i=>!!(!fe(e.explicit,i)&&!fe(t.explicit,i)||fe(e.explicit,i)&&fe(t.explicit,i)&&ji(e.get(i),t.get(i))));if(ji(e.size,t.size)){if(n)return e;if(ji(e.explicit,{}))return t;if(ji(t.explicit,{}))return e}return null}function A9e(e){if(e.children.length===0)return;let t;for(const r of e.children)Fie(r);const n=DO(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=$9e(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Pie(r,t.specifiedProjection,t.size,Te(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function T9e(e,t,n,r){if(Jv(t,n)){const i=Vt(e)?e.axis(n)??e.legend(n)??{}:{},o=oe(t,{expr:"datum"}),s=oe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:oe(t,{binSuffix:"range",forAs:!0}),formula:Yv(o,s,i.format,i.formatType,r)}}return{}}function Mie(e,t){return`${Qte(e)}_${t}`}function P9e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function VD(e,t,n){const r=bE(n,void 0)??{},i=Mie(r,t);return e.getName(`${i}_bins`)}function F9e(e){return"as"in e}function BB(e,t,n){let r,i;F9e(e)?r=ue(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[oe(e,{forAs:!0}),oe(e,{binSuffix:"end",forAs:!0})];const o={...bE(t,void 0)},s=Mie(o,e.field),{signal:a,extentSignal:l}=P9e(n,s);if(uE(o.extent)){const c=o.extent;i=cie(n,c.param,c),delete o.extent}const u={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:u}}class xa extends gt{clone(){return new xa(null,Te(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(Jr(o)&&Ct(o.bin)){const{key:a,binComponent:l}=BB(o,o.bin,n);i[a]={...l,...i[a],...T9e(n,o,s,n.config)}}return i},{});return vt(r)?null:new xa(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=BB(n,n.bin,r);return new xa(t,{[i]:o})}merge(t,n){for(const r of X(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=fa([...this.bins[r].as,...t.bins[r].as],Be)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Zn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Zn(this.bins).map(t=>t.field))}hash(){return`Bin ${Be(this.bins)}`}assemble(){return Zn(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:zo(t.field),as:r,signal:t.signal,...uE(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:zo(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:oe({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function M9e(e,t,n,r){var o;const i=Vt(r)?r.encoding[Ha(t)]:void 0;if(Jr(n)&&Vt(r)&&Hne(n,i,r.markDef,r.config)){e.add(oe(n,{})),e.add(oe(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,u=mc({fieldDef:n,markDef:a,config:l});p1(s)&&u!==.5&&an(t)&&(e.add(oe(n,{suffix:_E})),e.add(oe(n,{suffix:$E}))),n.bin&&Jv(n,t)&&e.add(oe(n,{binSuffix:"range"}))}else if(Ute(t)){const s=jte(t);e.add(r.getName(s))}else e.add(oe(n));return Zd(n)&&wOe((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function R9e(e,t){for(const n of X(t)){const r=t[n];for(const i of X(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class xs extends gt{clone(){return new xs(null,new Set(this.dimensions),Te(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:l,field:u}=s;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([oe(s,{forAs:!0})]);else{if(Fa(l)||Kl(l)){const c=Fa(l)?"argmin":"argmax",f=l[c];i[f]??(i[f]={}),i[f][c]=new Set([oe({op:c,field:f},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([oe(s,{forAs:!0})]);qa(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([oe({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([oe({field:u,aggregate:"max"},{forAs:!0})]))}else M9e(o,a,s,n)}),o.size+X(i).length===0)?null:new xs(t,o,i)}static makeFromTransform(t,n){var r;const i=new Set,o={};for(const s of n.aggregate){const{op:a,field:l,as:u}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([u||oe(s,{forAs:!0})])):(o[l]??(o[l]={}),(r=o[l])[a]??(r[a]=new Set),o[l][a].add(u||oe(s,{forAs:!0}))))}for(const s of n.groupby??[])i.add(s);return i.size+X(o).length===0?null:new xs(t,i,o)}merge(t){return Rte(this.dimensions,t.dimensions)?(R9e(this.measures,t.measures),!0):(qRe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...X(this.measures)])}producedFields(){const t=new Set;for(const n of X(this.measures))for(const r of X(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Be({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of X(this.measures))for(const s of X(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:zo(o));return{type:"aggregate",groupby:[...this.dimensions].map(zo),ops:t,fields:n,as:r}}}class Sm extends gt{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of Ao){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:n.getName(`${o}_domain`),fields:[oe(s),...Ct(a)?[oe(s,{binSuffix:"end"})]:[]],...kl(l)?{sortField:l}:Y(l)?{sortIndexField:Tg(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Ao)this[n]&&(t+=` ${n.charAt(0)}:${Be(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Ao)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Ao)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Xl){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(Ln(i)&&Qd(o)){const s=ME(this.childModel,n),a=GD(s);a?t[n]=a:Z(XO(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=mE,field:f}=l;o.push(f),s.push(c),a.push(oe(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const u of zD){for(const c of BD){const f=(r[u]&&r[u][c])??[];for(const d of f)if(((l=d.axes)==null?void 0:l.length)>0){o[u]=!0;break}}if(o[u]){const c=`length(data("${this.facet.name}"))`,f=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Cl,Sl])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function jB(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function O9e(e,t){const n=IO(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=jB(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=jB(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Z(tRe(t)),null}function D9e(e){const t={};return C2(e.filter,n=>{if(Sne(n)){let r=null;ZO(n)?r=Ni(n.equal):tD(n)?r=Ni(n.lte):eD(n)?r=Ni(n.lt):nD(n)?r=Ni(n.gt):rD(n)?r=Ni(n.gte):iD(n)?r=n.range[0]:oD(n)&&(r=(n.oneOf??n.in)[0]),r&&(Jd(r)?t[n.field]="date":Je(r)?t[n.field]="number":ue(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function N9e(e){const t={};function n(r){Eg(r)?t[r.field]="date":r.type==="quantitative"&&MMe(r.aggregate)?t[r.field]="number":vg(r.field)>1?r.field in t||(t[r.field]="flatten"):Zd(r)&&kl(r.sort)&&vg(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Vt(e)||qi(e))&&e.forEachFieldDef((r,i)=>{if(Jr(r))n(r);else{const o=Xd(i),s=e.fieldDef(o);n({...r,type:s.type})}}),Vt(e)){const{mark:r,markDef:i,encoding:o}=e;if(zc(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];ee(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function L9e(e){const t={};if(Vt(e)&&e.component.selection)for(const n of X(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&vg(i.field)>1&&(t[i.field]="flatten")}return t}class br extends gt{clone(){return new br(null,Te(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Be(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!Gu(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of X(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:Z(Kz(a,r[a],l.value)))}for(const a of X(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:Z(Kz(a,n[a],l)))}const o=new Jl(n,r);i.copyAll(o);const s={};for(const a of X(o.combine())){const l=o.get(a);l!==null&&(s[a]=l)}return X(s).length===0||i.parseNothing?null:new br(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of X(this._parse)){const r=this._parse[n];vg(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(X(this._parse))}dependentFields(){return new Set(X(this._parse))}assembleTransforms(t=!1){return X(this._parse).filter(n=>t?vg(n)>1:!0).map(n=>{const r=O9e(n,this._parse[n]);return r?{type:"formula",expr:r,as:ym(n)}:null}).filter(n=>n!==null)}}class bc extends gt{clone(){return new bc(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ms])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ms}}}class tb extends gt{clone(){return new tb(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Be(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class nb extends gt{clone(){return new nb(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Be(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class $d extends gt{constructor(t){super(null),t??(t={name:"source"});let n;if(Gu(t)||(n=t.format?{...hi(t.format,["parse"])}:{}),g1(t))this._data={values:t.values};else if(_g(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ie(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else zre(t)?this._data={values:[{type:"Sphere"}]}:(Lre(t)||Gu(t))&&(this._data={});this._generator=Gu(t),t.name&&(this._name=t.name),n&&!vt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var UB=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},I9e=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},H0;function WD(e){return e instanceof $d||e instanceof tb||e instanceof nb}class HD{constructor(){H0.set(this,void 0),UB(this,H0,!1,"f")}setModified(){UB(this,H0,!0,"f")}get modifiedFlag(){return I9e(this,H0,"f")}}H0=new WeakMap;class eh extends HD{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class qD extends HD{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class z9e extends qD{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of X(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class B9e extends qD{constructor(t){super(),this.requiresSelectionId=t&&ID(t)}run(t){t instanceof bc&&(this.requiresSelectionId&&(WD(t.parent)||t.parent instanceof xs||t.parent instanceof br)||(this.setModified(),t.remove()))}}class j9e extends HD{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof ba&&(r=t.producedFields(),NO(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class U9e extends qD{constructor(){super()}run(t){t instanceof pi&&!t.isRequired()&&(this.setModified(),t.remove())}}class V9e extends eh{run(t){if(!WD(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof br)if(t instanceof br)this.setModified(),t.merge(n);else{if(LO(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class W9e extends eh{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof br);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of X(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!vt(i)){this.setModified();const s=new br(t,i);for(const a of n){if(a instanceof br)for(const l of X(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof br&&X(a.parse).length===0&&a.remove()}}}}}class H9e extends eh{run(t){t instanceof pi||t.numChildren()>0||t instanceof Sm||t instanceof $d||(this.setModified(),t.remove())}}class q9e extends eh{run(t){const n=t.children.filter(i=>i instanceof ba),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class G9e extends eh{run(t){const n=t.children.filter(i=>i instanceof xs),r={};for(const i of n){const o=Be(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of X(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class Y9e extends eh{constructor(t){super(),this.model=t}run(t){const n=!(WD(t)||t instanceof wm||t instanceof br||t instanceof bc),r=[],i=[];for(const o of t.children)o instanceof xa&&(n&&!LO(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof xa?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class X9e extends eh{run(t){const n=[...t.children];if(!yg(n,s=>s instanceof pi)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof pi){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof pi)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class th extends gt{clone(){return new th(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=fa(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??oe(t)}hash(){return`JoinAggregateTransform ${Be(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class Fg extends gt{clone(){return new Fg(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:s,scales:a}=r;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,f)=>{const d=qa(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,g=dD({scaleChannel:f,markDef:o,config:i,scaleType:h,isCountAggregate:lE(p)});g!=="show"&&g!=="always-valid"&&(u[c.field]=c)}return u},{});return X(l).length?new Fg(t,l):null}dependentFields(){return new Set(X(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Be(this.filter)}`}assemble(){const t=X(this.filter).reduce((n,r)=>{const i=this.filter[r],o=oe(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${m4(o)}))`):i.type==="quantitative"&&n.push(m4(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function m4(e){return`isValid(${e}) && isFinite(+${e})`}function K9e(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=oe(r);return i&&t.push(i),t},[])}function Q9e(e){return Y(e)&&e.every(t=>ue(t))&&e.length>1}class _l extends gt{clone(){return new _l(null,Te(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),l.push(sn(f.order,"ascending"));const u={field:a,order:l};let c;return Q9e(o)?c=o:ue(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new _l(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=r,u=o.map(h=>{const p=i[h];return Fs(p)}).filter(h=>!!h),c=K9e(n),f=n.encoding.order;let d;if(Y(f)||ee(f))d=nne(f);else{const h=qne(f)?f.sort:s==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new _l(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Be(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[oe(i,{binSuffix:"mid"})]:[oe(i,{}),oe(i,{binSuffix:"end"})]:[oe(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=oe(c,{expr:"datum"}),p=oe(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${m4(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:oe(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:oe(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:u,offset:a}),t}}class Cm extends gt{clone(){return new Cm(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=fa(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??oe(t)}hash(){return`WindowTransform ${Be(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>GO(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),l.push(f.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function J9e(e){function t(n){if(!(n instanceof Sm)){const r=n.clone();if(r instanceof pi){const i=v4+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof xs||r instanceof _l||r instanceof Cm||r instanceof th)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function y4(e){if(e instanceof Sm)if(e.numChildren()===1&&!(e.children[0]instanceof pi)){const t=e.children[0];(t instanceof xs||t instanceof _l||t instanceof Cm||t instanceof th)&&t.addDimensions(e.fields),t.swapWithParent(),y4(e)}else{const t=e.model.component.data.main;Rie(t);const n=J9e(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(y4)}function Rie(e){if(e instanceof pi&&e.type===Zt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Sm||(t.swapWithParent(),Rie(e))}}const v4="scale_",sx=5;function b4(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!b4(t.children))return!1}return!0}function Yo(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function VB(e,t,n){let r=e.sources,i=!1;return i=Yo(new U9e,r)||i,i=Yo(new B9e(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Yo(new H9e,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Yo(new V9e,r)||i,i=Yo(new Y9e(t),r)||i,i=Yo(new j9e,r)||i,i=Yo(new W9e,r)||i,i=Yo(new G9e,r)||i,i=Yo(new q9e,r)||i,i=Yo(new z9e,r)||i,i=Yo(new X9e,r)||i),e.sources=r,i}function Z9e(e,t){b4(e.sources);let n=0,r=0;for(let i=0;i<sx&&VB(e,t,!0);i++)n++;e.sources.map(y4);for(let i=0;i<sx&&VB(e,t,!1);i++)r++;b4(e.sources),Math.max(n,r)===sx&&Z(`Maximum optimization runs(${sx}) reached.`)}class Pn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Pn(()=>t(n))}}function Oie(e){Vt(e)?eLe(e):tLe(e)}function eLe(e){const t=e.component.scales;for(const n of X(t)){const r=rLe(e,n);if(t[n].setWithExplicit("domains",r),oLe(e,n),e.component.data.isFaceted){let o=e;for(;!qi(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)pl(a)&&(a.data=v4+a.data.replace(v4,""))}}}function tLe(e){for(const n of e.children)Oie(n);const t=e.component.scales;for(const n of X(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=yc(r,s.getWithExplicit("domains"),"domains","scale",x4);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&Z(QMe),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function nLe(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=WB(t,n);if(!i){Z(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=WB(t,n);if(i)return"unaggregated"}return e}function rLe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=nLe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&xn(r.x2)?xn(r.x)?yc(uu(n,i,e,"x"),uu(n,i,e,"x2"),"domain","scale",x4):uu(n,i,e,"x2"):t==="y"&&xn(r.y2)?xn(r.y)?yc(uu(n,i,e,"y"),uu(n,i,e,"y2"),"domain","scale",x4):uu(n,i,e,"y2"):uu(n,i,e,t)}function iLe(e,t,n){return e.map(r=>({signal:`{data: ${xE(r,{timeUnit:n,type:t})}}`}))}function $5(e,t,n){var i;const r=(i=Cn(n))==null?void 0:i.unit;return t==="temporal"||r?iLe(e,t,r):[e]}function uu(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,u=xn(i[r]),{type:c}=u,f=u.timeUnit,d=J8e({invalid:Ma("invalid",o,a),isPath:zc(s)});if(xOe(t)){const g=uu(e,void 0,n,r),m=$5(t.unionWith,c,f);return Qs([...m,...g.value])}else{if(me(t))return Qs([t]);if(t&&t!=="unaggregated"&&!Tne(t))return Qs($5(t,c,f))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Pi([[0,1]]);const g=n.requestDataName(d);return Pi([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=qa(r)&&ee(u)?sLe(n,r,e):void 0;if(Ga(u)){const g=$5([u.datum],c,f);return Pi(g)}const p=u;if(t==="unaggregated"){const{field:g}=u;return Pi([{data:n.requestDataName(d),field:oe({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:oe({field:g,aggregate:"max"})}])}else if(Ct(p.bin)){if(Ln(e))return Pi(e==="bin-ordinal"?[]:[{data:d1(h)?n.requestDataName(d):n.requestDataName(Zt.Raw),field:n.vgField(r,Jv(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!ae(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if(Ct(g)){const m=VD(n,p.field,g);return Pi([new Pn(()=>{const y=n.getSignalName(m);return`[${y}.start, ${y}.stop]`})])}else return Pi([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ie(["time","utc"],e)){const g=i[Ha(r)];if(Hne(p,g,o,a)){const m=n.requestDataName(d),y=mc({fieldDef:p,fieldDef2:g,markDef:o,config:a}),v=p1(s)&&y!==.5&&an(r);return Pi([{data:m,field:n.vgField(r,v?{suffix:_E}:{})},{data:m,field:n.vgField(r,{suffix:v?$E:"end"})}])}}return Pi(h?[{data:d1(h)?n.requestDataName(d):n.requestDataName(Zt.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function A5(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":mE),...r?{field:zo(r)}:{},...i?{order:i}:{}}}function oLe(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=Tne(r)?r:void 0,s=Kd(i)&&uE(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function sLe(e,t,n){if(!Ln(n))return;const r=e.fieldDef(t),i=r.sort;if(Vne(i))return{op:"min",field:Tg(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(kl(i)){const a=o&&!s.has(i.field);return A5(i,a)}else if(JOe(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:f}=u,d=o&&!s.has(f);if(Fa(c)||Kl(c))return A5({field:oe(u),order:l},d);if(GO(c)||!c)return A5({op:c,field:f,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ie(["ascending",void 0],i))return!0}}function WB(e,t){const{aggregate:n,type:r}=e;return n?ue(n)&&!OMe.has(n)?{valid:!1,reason:CRe(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:kRe(e)}:{valid:!0}:{valid:!1,reason:SRe(e)}}function x4(e,t,n,r){return e.explicit&&t.explicit&&Z(TRe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function aLe(e){const t=fa(e.map(s=>{if(pl(s)){const{sort:a,...l}=s;return l}return s}),Be),n=fa(e.map(s=>{if(pl(s)){const a=s.sort;return a!==void 0&&!d1(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Be);if(t.length===0)return;if(t.length===1){const s=e[0];if(pl(s)&&n.length>0){let a=n[0];if(n.length>1){Z(Jz);const l=n.filter(u=>ae(u)&&"op"in u&&u.op!=="min");n.every(u=>ae(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(ae(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=fa(n.map(s=>d1(s)||!("op"in s)||ue(s.op)&&fe(PMe,s.op)?s:(Z(FRe(s)),!0)),Be);let i;r.length===1?i=r[0]:r.length>1&&(Z(Jz),i=!0);const o=fa(e.map(s=>pl(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function GD(e){if(pl(e)&&ue(e.field))return e.field;if(DMe(e)){let t;for(const n of e.fields)if(pl(n)&&ue(n.field)){if(!t)t=n.field;else if(t!==n.field)return Z(MRe),t}return Z(RRe),t}else if(NMe(e)){Z(ORe);const t=e.fields[0];return ue(t)?t:void 0}}function ME(e,t){const r=e.component.scales[t].get("domains").map(i=>(pl(i)&&(i.data=e.lookupDataSource(i.data)),i));return aLe(r)}function Die(e){return km(e)||YD(e)?e.children.reduce((t,n)=>t.concat(Die(n)),HB(e)):HB(e)}function HB(e){return X(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:c,...f}=i,d=lLe(i.range,o,n,e),h=ME(e,n),p=a?iNe(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function lLe(e,t,n,r){if(an(n)){if(Qd(e))return{step:{signal:`${t}_step`}}}else if(ae(e)&&pl(e))return{...e,data:r.lookupDataSource(e.data)};return e}class Nie extends Jl{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ie([qn.LOG,qn.TIME,qn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ie([qn.LINEAR,qn.SQRT,qn.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,s=!1;for(const a of r){if(Y(a)){const l=a[0],u=a[a.length-1];if(Je(l)&&Je(u))if(l<=0&&u>=0){i=!0;continue}else{o=!0;continue}}s=!0}if(i)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const uLe=["range","scheme"];function cLe(e){const t=e.component.scales;for(const n of qO){const r=t[n];if(!r)continue;const i=fLe(n,e);r.setWithExplicit("range",i)}}function qB(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=ki(t),s=e.getName(o);if(ae(r)&&r.binned&&r.step!==void 0)return new Pn(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(Ct(r)){const a=VD(e,i,r);return new Pn(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function fLe(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of uLe)if(n[f]!==void 0){const d=n4(o,f),h=Pne(e,f);if(!d)Z(une(o,f,e));else if(h)Z(h);else switch(f){case"range":{const p=n.range;if(Y(p)){if(an(e))return Qs(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return Pn.fromName(y,m)}return g}))}else if(ae(p))return Qs({data:t.requestDataName(Zt.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Qs(p)}case"scheme":return Qs(dLe(n[f]))}}const s=e===Bt||e==="xOffset"?"width":"height",a=r[s];if(Oa(a)){if(an(e))if(Ln(o)){const f=Iie(a,t,e);if(f)return Qs({step:f})}else Z(cne(s));else if(Wv(e)){const f=e===Rc?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=zie(a,o);if(p)return Qs(p)}}}const{rangeMin:l,rangeMax:u}=n,c=hLe(e,t);return(l!==void 0||u!==void 0)&&n4(o,"rangeMin")&&Y(c)&&c.length===2?Qs([l??c[0],u??c[1]]):Pi(c)}function dLe(e){return bOe(e)?{scheme:e.name,...hi(e,["name"])}:{scheme:e}}function Lie(e,t,n,{center:r}={}){const i=ki(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===zn&&Ts(n)?r?[Pn.fromName(a=>`${s(a)}/2`,o),Pn.fromName(a=>`-${s(a)}/2`,o)]:[Pn.fromName(s,o),0]:r?[Pn.fromName(a=>`-${s(a)}/2`,o),Pn.fromName(a=>`${s(a)}/2`,o)]:[0,Pn.fromName(s,o)]}function hLe(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=xn(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case Bt:case zn:{if(Ie(["point","band"],l)){const f=Bie(e,n,r.view);if(Oa(f))return{step:Iie(f,t,e)}}return Lie(e,t,l)}case Rc:case vm:return pLe(e,t,l);case Gl:{const f=yLe(i,r),d=vLe(i,n,t,r);return Sg(l)?mLe(f,d,gLe(l,r,u,e)):[f,d]}case Wo:return[0,Math.PI*2];case Yd:return[0,360];case Is:return[0,new Pn(()=>{const f=t.getSignalName(qi(t.parent)?"child_width":"width"),d=t.getSignalName(qi(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Nc:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Lc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ci:return"symbol";case Si:case Va:case Wa:return l==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Yl:case Oc:case Dc:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Iie(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=UO(n),s=r[o];if(Cre({step:e,offsetIsDiscrete:Me(s)&&kne(s.type)})==="offset"&&rre(r,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${BMe(f)})`}}else return e.step}function zie(e,t){if(Cre({step:e,offsetIsDiscrete:Ln(t)})==="offset")return{step:e.step}}function pLe(e,t,n){const r=e===Rc?"x":"y",i=t.getScaleComponent(r);if(!i)return Lie(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const u=Bie(r,t.size,t.config.view);if(Oa(u)){const c=zie(u,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{const u=t.encoding[r];if(ee(u)&&u.timeUnit){const c=xne(u.timeUnit,p=>`scale('${s}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=mc({fieldDef:u,markDef:a,config:l})-.5,h=d!==0?` + ${d}`:"";if(f){const p=me(f)?`${f.signal}/2`+h:`${f/2+d}`,g=me(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${g} * (${c})`}]}return[0,{signal:c}]}return Fte(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function Bie(e,t,n){const r=e===Bt?"width":"height",i=t[r];return i||OS(n,r)}function gLe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Y(n)?n.length+1:(Z(VRe(r)),3)}}function mLe(e,t,n){const r=()=>{const i=ms(t),o=ms(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return me(t)?new Pn(r):{signal:r()}}function yLe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(cE("size",e))}const GB=.95;function vLe(e,t,n,r){const i={x:qB(n,"x"),y:qB(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=YB(t,i,r.view);return Je(o)?o-1:new Pn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=YB(t,i,r.view);return Je(o)?Math.pow(GB*o,2):new Pn(()=>`pow(${GB} * ${o.signal}, 2)`)}}throw new Error(cE("size",e))}function YB(e,t,n){const r=Oa(e.width)?e.width.step:s4(n,"width"),i=Oa(e.height)?e.height.step:s4(n,"height");return t.x||t.y?new Pn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function jie(e,t){Vt(e)?bLe(e,t):Vie(e,t)}function bLe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of X(n)){const l=s[a],u=n[a],c=e.getScaleComponent(a),f=xn(i[a]),d=l[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=n4(h,t),y=Pne(a,t);if(d!==void 0&&(m?y&&Z(y):Z(une(h,t,a))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Jd(l[t])||b==="temporal"||v?u.set(t,{signal:xE(l[t],{type:b,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=K(XB,t)?XB[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:ire(i,a),hasSecondaryRangeChannel:!!i[Ha(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const XB={bins:({model:e,fieldOrDatumDef:t})=>ee(t)?xLe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>wLe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>SLe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>CLe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>kLe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>ELe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=ee(e)?e.sort:void 0;return _Le(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>$Le(e,t,n,r,i,o.scale,s)};function Uie(e){Vt(e)?cLe(e):Vie(e,"range")}function Vie(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?Uie(r):jie(r,t);for(const r of X(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=yc(i,a,t,"scale",Nre((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function xLe(e,t){const n=t.bin;if(Ct(n)){const r=VD(e,t.field,n);return new Pn(()=>e.getSignalName(r))}else if(Vn(n)&&Kd(n)&&n.step!==void 0)return{step:n.step}}function wLe(e,t){if(Ie([Si,Va,Wa],e)&&t!=="nominal")return"hcl"}function SLe(e,t,n,r,i,o){var s;if(!((s=Fs(o))!=null&&s.bin||Y(n)||i!=null||r!=null||Ie([qn.TIME,qn.UTC],e)))return an(t)?!0:void 0}function CLe(e,t,n,r,i,o){if(an(e)){if(da(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(ee(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===qn.POINT)return n.pointPadding}}function kLe(e,t,n,r,i,o=!1){if(e===void 0){if(an(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=i;return o?c:sn(s,n==="bar"?a:n==="tick"?u:l)}else if(Wv(t)&&r===qn.BAND)return i.offsetBandPaddingInner}}function ELe(e,t,n,r,i,o=!1){if(e===void 0){if(an(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===qn.BAND)return sn(s,me(r)?{signal:`${r.signal}/2`}:r/2)}else if(Wv(t)){if(n===qn.POINT)return .5;if(n===qn.BAND)return i.offsetBandPaddingOuter}}}function _Le(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Ts(e)&&t==="descending"?me(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Ts(e)&&t==="descending")return!0}function $Le(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&Ts(i)){if(Y(n)){const l=n[0],u=n[n.length-1];if(Je(l)&&l<=0&&Je(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Sg(i))return!0;if(!(ee(t)&&t.bin)&&Ie([...Xl,...SMe],e)){const{orient:l,type:u}=r;return Ie(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Ie(["bar","area"],u)&&!s?!0:o==null?void 0:o.zero}return!1}function ALe(e,t,n,r,i=!1){const o=TLe(t,n,r,i),{type:s}=e;return qa(t)?s!==void 0?_Oe(t,s)?ee(n)&&!EOe(s,n.type)?(Z($Re(s,o)),o):s:(Z(_Re(t,s,o)),o):o:null}function TLe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(vp(e)||v5(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Z(b5(e,"ordinal")),"ordinal";if(an(e)||Wv(e)){if(Ie(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in HO)return"band";const o=n[ki(e)];return Cd(o)||kg(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return vp(e)?"time":v5(e)==="discrete"?(Z(b5(e,"temporal")),"ordinal"):ee(t)&&t.timeUnit&&Cn(t.timeUnit).utc?"utc":"time";case"quantitative":return vp(e)?ee(t)&&Ct(t.bin)?"bin-ordinal":"linear":v5(e)==="discrete"?(Z(b5(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(ane(t.type))}function PLe(e,{ignoreRange:t}={}){Wie(e),Oie(e);for(const n of kOe)jie(e,n);t||Uie(e)}function Wie(e){Vt(e)?e.component.scales=FLe(e):e.component.scales=RLe(e)}function FLe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of qO){const s=xn(t[o]);if(s&&n===Rne&&o===Ci&&s.type===bm)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=ire(t,o),u=ALe(a,o,s,r,l);i[o]=new Nie(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const MLe=Nre((e,t)=>eB(e)-eB(t));function RLe(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){Wie(o);for(const s of X(o.component.scales))if((t=i.scale)[s]??(t[s]=wie(s,e)),i.scale[s]==="shared"){const a=r[s],l=o.component.scales[s].getWithExplicit("type");a?pOe(a.value,l.value)?r[s]=yc(a,l,"type","scale",MLe):(i.scale[s]="independent",delete r[s]):r[s]=l}}for(const o of X(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new Nie(s,a);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return n}class T5{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Vt(e){return(e==null?void 0:e.type)==="unit"}function qi(e){return(e==null?void 0:e.type)==="facet"}function YD(e){return(e==null?void 0:e.type)==="concat"}function km(e){return(e==null?void 0:e.type)==="layer"}class XD{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.correctDataNames=l=>{var u,c,f;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(f=(c=l.from)==null?void 0:c.facet)!=null&&f.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=r,this.config=o,this.view=Wn(a),this.name=t.name??i,this.title=mu(t.title)?{text:t.title}:t.title?Wn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new T5,this.projectionNameMap=r?r.projectionNameMap:new T5,this.signalNameMap=r?r.signalNameMap:new T5,this.data=t.data,this.description=t.description,this.transforms=B8e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:WDe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:yE(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Jl,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Te(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){PLe(this)}parseProjection(){Fie(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){_ie(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of X(r)){const s=r[o];s!==void 0&&(i[o]=Mt(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Mt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:vt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=ZNe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Ao)t[r].title&&n.push(GNe(this,r));for(const r of zD)n=n.concat(YNe(this,r));return n}assembleAxes(){return ONe(this.component.axes,this.config)}assembleLegends(){return Aie(this)}assembleProjections(){return S9e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...Jte(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Ie(["unit","layer"],this.type)?Ie(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),vt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||qi(this.parent)?Die(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return zt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Zt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(qi(this.parent)){const n=bie(t),r=aE(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(Ln(o)&&Qd(s)){const a=i.get("name"),l=ME(this,r),u=GD(l);if(u){const c=oe({aggregate:"distinct",field:u},{expr:"datum"});return{signal:vie(a,i,c)}}else return Z(XO(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Wte(t)&&qa(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(HMe(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Hie extends XD{vgField(t,n={}){const r=this.fieldDef(t);if(r)return oe(r,n)}reduceFieldDef(t,n){return bDe(this.getMapping(),(r,i,o)=>{const s=Fs(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){wD(this.getMapping(),(r,i)=>{const o=Fs(r);o&&t(o,i)},n)}}class RE extends gt{clone(){return new RE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Be(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class OE extends gt{clone(){return new OE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Be(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class DE extends gt{clone(){return new DE(this.parent,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Be(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class NE extends gt{clone(){return new NE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Be(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class wp extends gt{clone(){return new wp(null,Te(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Bs,zs],[Bo,js]]){const o=i.map(s=>{const a=xn(n.encoding[s]);return ee(a)?a.field:Ga(a)?{expr:`${a.datum}`}:Ps(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new wp(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Ci)){const i=n.typedFieldDef(Ci);i.type===bm&&(t=new wp(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(ue);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Be(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class m1 extends gt{clone(){return new m1(null,this.projection,Te(this.fields),Te(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Bs,zs],[Bo,js]]){const i=r.map(s=>{const a=xn(n.encoding[s]);return ee(a)?a.field:Ga(a)?{expr:`${a.datum}`}:Ps(a)?{expr:`${a.value}`}:void 0}),o=r[0]===Bo?"2":"";(i[0]||i[1])&&(t=new m1(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(ue))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Be(this.fields)} ${Be(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Qf extends gt{clone(){return new Qf(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Qf(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(ee(i)&&ee(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:l,value:u,frame:c,keyvals:f}=s.impute,d=are(n.mark,r);return new Qf(t,{impute:s.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Be(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:w8e(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class LE extends gt{clone(){return new LE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Be(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class y1 extends gt{clone(){return new y1(null,Te(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(S8e(s)){let l=Yie(s.data,o);l||(l=new $d(s.data),o.push(l));const u=n.getName(`lookup_${i}`);a=new pi(l,u,Zt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(C8e(s)){const l=s.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(zt(l),l)}catch{throw new Error(XMe(l))}if(a=u.materialized,!a)throw new Error(KMe(l))}return new y1(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?le(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Be({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:le(this.transform.as)}:{}};else{let n=this.transform.as;ue(n)||(Z(iRe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class IE extends gt{clone(){return new IE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Be(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class zE extends gt{clone(){return new zE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Be(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class BE extends gt{clone(){return new BE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=fa((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Be(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class jE extends gt{clone(){return new jE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Be(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function qie(e){let t=0;function n(r,i){if(r instanceof $d&&!r.isGenerator&&!_g(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof br&&(r.parent instanceof $d&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Sm){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof tb||r instanceof nb||r instanceof Fg||r instanceof wm||r instanceof Ag||r instanceof m1||r instanceof xs||r instanceof y1||r instanceof Cm||r instanceof th||r instanceof NE||r instanceof DE||r instanceof RE||r instanceof LE||r instanceof IE||r instanceof zE||r instanceof bc||r instanceof jE||r instanceof BE||r instanceof OE)&&i.transform.push(r.assemble()),(r instanceof xa||r instanceof ba||r instanceof Qf||r instanceof _l||r instanceof wp)&&i.transform.push(...r.assemble()),r instanceof pi&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof pi?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof pi&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function OLe(e){const t=[],n=qie(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function DLe(e,t){const n=[],r=qie(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function NLe(e){return e==="top"||e==="left"||me(e)?"header":"footer"}function LLe(e){for(const t of Ao)ILe(e,t);KB(e,"x"),KB(e,"y")}function ILe(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=Pg("title",null,r,t);let u=bp(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=Y(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Pg("labelOrient",a.header,r,t),f=a.header!==null?sn((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=Ie(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[Gie(e,t,f)]}}}function Gie(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function KB(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=UD(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=NLe(a.get("orient"));s[l]??(s[l]=[Gie(e,o,!1)]);const u=W0(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function zLe(e){KD(e),IS(e,"width"),IS(e,"height")}function BLe(e){KD(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";IS(e,t),IS(e,n)}function KD(e){for(const t of e.children)t.parseLayoutSize()}function IS(e,t){const n=bie(t),r=aE(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??wie(r,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=yc(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function jLe(e){const{size:t,component:n}=e;for(const r of Xl){const i=ki(r);if(t[i]){const o=t[i];n.layoutSize.set(i,Oa(o)?"step":o,!0)}else{const o=ULe(e,i);n.layoutSize.set(i,o,!1)}}}function ULe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(Ln(o)){const a=OS(r.view,t);return Qd(s)||Oa(a)?"step":a}else return o4(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return o4(r.view,t);{const o=OS(r.view,t);return Oa(o)?o.step:o}}}function w4(e,t,n){return oe(t,{suffix:`by_${oe(e)}`,...n})}class wy extends Hie{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=t8(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Xv(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=X(t),r={};for(const i of n){if(![Sl,Cl].includes(i)){Z(cE(i,"facet"));break}const o=t[i];if(o.field===void 0){Z(e4(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=xD(t,n);return r.header?r.header=Wn(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return K(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=UE(this),this.child.parseData()}parseLayoutSize(){KD(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),LLe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Ao)for(const r of BD){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=Pg("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const l=PE(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof wy))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof wy?{...this.channelHasField("column")?{encode:{update:{columns:{field:oe(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof wy){if(this.child.channelHasField("column")){const i=oe(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Xl){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(Ln(s)&&Qd(a)){const l=ME(this.child,i),u=GD(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):Z(XO(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Ao){const f=this.facet[c];if(f){l.push(oe(f));const{bin:d,sort:h}=f;if(Ct(d)&&l.push(oe(f,{binSuffix:"end"})),kl(h)){const{field:p,op:g=mE}=h,m=w4(f,h);r&&i?(o.push(m),s.push("max"),a.push(m)):(o.push(p),s.push(g),a.push(m))}else if(Y(h)){const p=Tg(f,c);o.push(p),s.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?kl(r.sort)?[w4(r,r.sort,{expr:"datum"})]:Y(r.sort)?[Tg(r,t,{expr:"datum"})]:[oe(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(kl(i)?i.order:!Y(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return p4(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of zD)if(t[o]){const s=Pg("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return p4(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=OLe(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Ao.map(l=>this.facetSortFields(l)).flat(),order:Ao.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(eNe(this,[]))}]}getMapping(){return this.facet}}function VLe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(kl(o.sort)){const{field:s,op:a=mE}=o.sort;e=i=new th(e,{joinaggregate:[{op:a,field:s,as:w4(o,o.sort,{forAs:!0})}],groupby:[oe(o)]})}return i}return null}function Yie(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((l||f)&&l!==f)){if(g1(e)&&g1(a)){if(ji(e.values,a.values))return s}else if(_g(e)&&_g(a)){if(e.url===a.url)return s}else if(Lre(e)&&e.name===s.dataName)return s}}return null}function WLe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new $d({values:[]});return t.push(r),r}const n=Yie(e.data,t);if(n)return Gu(e.data)||(n.data.format=Mte({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new $d(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function HLe(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(R8e(i))s=e=new Ag(e,i),o="derived";else if(MD(i)){const a=D9e(i);s=e=br.makeWithAncestors(e,{},a,n)??e,e=new wm(e,t,i.filter)}else if(Mre(i))s=e=xa.makeFromTransform(e,i,t),o="number";else if(D8e(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new br(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=ba.makeFromTransform(e,i);else if(N8e(i))s=e=xs.makeFromTransform(e,i),o="number",ID(t)&&(e=new bc(e));else if(Fre(i))s=e=y1.make(e,t,i,r++),o="derived";else if(P8e(i))s=e=new Cm(e,i),o="number";else if(F8e(i))s=e=new th(e,i),o="number";else if(L8e(i))s=e=_l.makeFromTransform(e,i),o="derived";else if(I8e(i))s=e=new NE(e,i),o="derived";else if(z8e(i))s=e=new OE(e,i),o="derived";else if(M8e(i))s=e=new DE(e,i),o="derived";else if(k8e(i))s=e=new BE(e,i),o="derived";else if(T8e(i))e=new jE(e,i);else if(O8e(i))s=e=Qf.makeFromTransform(e,i),o="derived";else if(E8e(i))s=e=new RE(e,i),o="derived";else if(_8e(i))s=e=new IE(e,i),o="derived";else if($8e(i))s=e=new zE(e,i),o="derived";else if(A8e(i))s=e=new LE(e,i),o="derived";else{Z(rRe(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function UE(e){var m;let t=WLe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(Gu(i)||_g(i)||g1(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Q8e;Gu(i)?(Ire(i)?t=new nb(t,i.sequence):RD(i)&&(t=new tb(t,i.graticule)),s.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(s.parseNothing=!0),t=br.makeExplicit(t,e,s)??t,t=new bc(t);const a=e.parent&&km(e.parent);(Vt(e)||qi(e))&&a&&(t=xa.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=HLe(t,e,s));const l=L9e(e),u=N9e(e);t=br.makeWithAncestors(t,{},{...l,...u},s)??t,Vt(e)&&(t=wp.parseAll(t,e),t=m1.parseAll(t,e)),(Vt(e)||qi(e))&&(a||(t=xa.makeFromEncoding(t,e)??t),t=ba.makeFromEncoding(t,e)??t,t=Ag.parseAllForSortIndex(t,e));const c=t=ax(Zt.Raw,e,t);if(Vt(e)){const y=xs.makeFromEncoding(t,e);y&&(t=y,ID(e)&&(t=new bc(t))),t=Qf.makeFromEncoding(t,e)??t,t=_l.makeFromEncoding(t,e)??t}let f,d;if(Vt(e)){const{markDef:y,mark:v,config:b}=e,x=yt("invalid",y,b),{marks:S,scales:C}=d=Bre({invalid:x,isPath:zc(v)});S!==C&&C==="include-invalid-values"&&(f=t=ax(Zt.PreFilterInvalid,e,t)),S==="exclude-invalid-values"&&(t=Fg.make(t,e,d)??t)}const h=t=ax(Zt.Main,e,t);let p;if(Vt(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=Fg.make(t,e,d)??t,p=t=ax(Zt.PostFilterInvalid,e,t))}Vt(e)&&MNe(e,h);let g=null;if(qi(e)){const y=e.getName("facet");t=VLe(t,e.facet)??t,g=new Sm(t,e,y,h.getSource()),n[y]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:g,ancestorParse:s,preFilterInvalid:f,postFilterInvalid:p}}function ax(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new pi(n,o,e,i);return r[o]=s,s}class qLe extends XD{constructor(t,n,r,i){var o,s,a,l;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&Z(eRe),this.children=this.getChildren(t).map((u,c)=>t8(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=UE(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of X(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return CE(t)?t.vconcat:PD(t)?t.hconcat:t.concat}parseLayoutSize(){BLe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=jD(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function GLe(e){return e===!1||e===null}const YLe={disable:1,gridScale:1,scale:1,...tre,labelExpr:1,encode:1},Xie=X(YLe);class QD extends Jl{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new QD(Te(this.explicit),Te(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!GLe(this.get(t))}hasOrientSignalRef(){return me(this.explicit.orient)}}function XLe(e,t,n){const{encoding:r,config:i}=e,o=xn(r[t])??xn(r[Ha(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(kd(l))return{text:ys({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(Cg(o)==="quantitative"){if(kg(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:ys({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:ys({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Cg(o)==="temporal"&&i.timeFormatType&&ee(o)&&!o.timeUnit)return{text:ys({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function KLe(e){return Xl.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[rIe(n,e)]),t),{})}const QLe={bottom:"top",top:"bottom",left:"right",right:"left"};function JLe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of X(i.component.axes))n.axis[o]=UD(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=ZLe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of Xl){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!me(a)){if(r[a]>0&&!l){const u=QLe[a];r[a]>r[u]&&s.set("orient",u,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function ZLe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=eIe(i,o)}}}else return t.map(n=>n.clone());return e}function eIe(e,t){for(const n of Xie){const r=yc(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return one(i,o);case"gridScale":return{explicit:i.explicit,value:sn(i.value,o.value)}}return EE(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function tIe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(me(n.labelAngle)?n.labelAngle:h1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===pie(r,i))return!0}return e===n[t]}const nIe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function rIe(e,t){var y,v;let n=t.axis(e);const r=new QD,i=xn(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((y=s[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=s.axis)==null?void 0:v.orient)||UNe(e),l=t.getScaleComponent(e).get("type"),u=DNe(e,l,a,t.config),c=n!==void 0?!n:d4("disable",s.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=zNe(i,n,e,s.style,u),d=jne(n.formatType,i,l),h=Bne(i,i.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const b of Xie){const x=b in DB?DB[b](p):aB(b)?n[b]:void 0,S=x!==void 0,C=tIe(x,b,n,t,e);if(S&&C)r.set(b,x,C);else{const{configValue:w=void 0,configFrom:k=void 0}=aB(b)&&b!=="values"?d4(b,s.style,n.style,u):{},E=w!==void 0;S&&!E?r.set(b,x,C):(k!=="vgAxisConfig"||nIe.has(b)&&E||Zv(w)||me(w))&&r.set(b,w,!1)}}const g=n.encoding??{},m=ere.reduce((b,x)=>{if(!r.hasAxisPart(x))return b;const S=xie(g[x]??{},t),C=x==="labels"?XLe(t,e,S):S;return C!==void 0&&!vt(C)&&(b[x]={update:C}),b},{});return vt(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function iIe({encoding:e,size:t}){for(const n of Xl){const r=ki(n);Oa(t[r])&&zu(e[n])&&(delete t[r],Z(cne(r)))}return t}const oIe={vgMark:"arc",encodeEntry:e=>({...Ho(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Wr("x",e,{defaultPos:"mid"}),...Wr("y",e,{defaultPos:"mid"}),...Dl(e,"radius"),...Dl(e,"theta")})},sIe={vgMark:"area",encodeEntry:e=>({...Ho(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...DS("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...DS("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...LD(e)})},aIe={vgMark:"rect",encodeEntry:e=>({...Ho(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Dl(e,"x"),...Dl(e,"y")})},lIe={vgMark:"shape",encodeEntry:e=>({...Ho(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ee(n)&&n.type===bm?{field:oe(n,{expr:"datum"})}:{}}]}},uIe={vgMark:"image",encodeEntry:e=>({...Ho(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Dl(e,"x"),...Dl(e,"y"),...DD(e,"url")})},cIe={vgMark:"line",encodeEntry:e=>({...Ho(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Wr("x",e,{defaultPos:"mid"}),...Wr("y",e,{defaultPos:"mid"}),...Xn("size",e,{vgChannel:"strokeWidth"}),...LD(e)})},fIe={vgMark:"trail",encodeEntry:e=>({...Ho(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Wr("x",e,{defaultPos:"mid"}),...Wr("y",e,{defaultPos:"mid"}),...Xn("size",e),...LD(e)})};function JD(e,t){const{config:n}=e;return{...Ho(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Wr("x",e,{defaultPos:"mid"}),...Wr("y",e,{defaultPos:"mid"}),...Xn("size",e),...Xn("angle",e),...dIe(e,n,t)}}function dIe(e,t,n){return n?{shape:{value:n}}:Xn("shape",e)}const hIe={vgMark:"symbol",encodeEntry:e=>JD(e)},pIe={vgMark:"symbol",encodeEntry:e=>JD(e,"circle")},gIe={vgMark:"symbol",encodeEntry:e=>JD(e,"square")},mIe={vgMark:"rect",encodeEntry:e=>({...Ho(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Dl(e,"x"),...Dl(e,"y")})},yIe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Ho(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...DS("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...DS("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Xn("size",e,{vgChannel:"strokeWidth"})}}},vIe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Ho(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Wr("x",e,{defaultPos:"mid"}),...Wr("y",e,{defaultPos:"mid"}),...DD(e),...Xn("size",e,{vgChannel:"fontSize"}),...Xn("angle",e),...FB("align",bIe(e.markDef,n,t)),...FB("baseline",xIe(e.markDef,n,t)),...Wr("radius",e,{defaultPos:null}),...Wr("theta",e,{defaultPos:null})}}};function bIe(e,t,n){if(yt("align",e,n)===void 0)return"center"}function xIe(e,t,n){if(yt("baseline",e,n)===void 0)return"middle"}const wIe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...Ho(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Dl(e,i),...Wr(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:Mt(yt("thickness",n,t))}}},lx={arc:oIe,area:sIe,bar:aIe,circle:pIe,geoshape:lIe,image:uIe,line:cIe,point:hIe,rect:mIe,rule:yIe,square:gIe,text:vIe,tick:wIe,trail:fIe};function SIe(e){if(Ie([pE,dE,POe],e.mark)){const t=are(e.mark,e.encoding);if(t.length>0)return CIe(e,t)}else if(e.mark===hE){const t=JT.some(n=>yt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return kIe(e)}return ZD(e)}const QB="faceted_path_";function CIe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:QB+e.requestDataName(Zt.Main),data:e.requestDataName(Zt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:ZD(e,{fromPrefix:QB})}]}const JB="stack_group_";function kIe(e){var u;const[t]=ZD(e,{fromPrefix:JB}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...mg(t.encode.update,["y","yc","y2","height",...JT]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...hi(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...mg(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...hi(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of JT){const f=Ma(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=Mt(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=oe(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(oe(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Ma(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Mt(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Zt.Main),name:JB+e.requestDataName(Zt.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function EIe(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!Y(s)&&Ps(s)&&KT(s.value)||!s&&KT(yt("order",i,o)))){if((Y(s)||ee(s))&&!n)return nne(s,{expr:"datum"});if(zc(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(ee(l))return{field:a}}}}function ZD(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=sn(r.clip,_Ie(e),$Ie(e)),a=ene(r),l=i.key,u=EIe(e),c=AIe(e),f=yt("aria",r,o),d=lx[n].postEncodingTransform?lx[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:lx[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Zt.Main)},encode:{update:lx[n].encodeEntry(e)},...d?{transform:d}:{}}]}function _Ie(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function $Ie(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function AIe(e){if(!e.component.selection)return null;const t=X(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=X(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Kie extends Hie{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,uB(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=Ra(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=h8e(s,o,{graticule:t.data&&RD(t.data)}));const l=this.encoding=yDe(t.encoding||{},a,s.filled,o);this.markDef=Are(s,l,o),this.size=iIe({encoding:l,size:uB(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=$re(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>AD(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===Rne,r=t&&hMe.some(i=>Me(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return qO.reduce((r,i)=>{const o=xn(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Wn(t);return Y(n)&&(i.domain=n.map(Ni)),Y(r)&&(i.range=r.map(Ni)),i}initAxes(t){return Xl.reduce((n,r)=>{const i=t[r];if(Me(i)||r===Bt&&Me(t.x2)||r===zn&&Me(t.y2)){const o=Me(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=X(t),r={};for(const i of n){const o=t[i];r[i]=Zv(o)?Zte(o):Ni(o)}return r}initLegends(t){return CMe.reduce((n,r)=>{const i=xn(t[r]);if(i&&EMe(r)){const o=i.legend;n[r]=o&&Wn(o)}return n},{})}parseData(){this.component.data=UE(this)}parseLayoutSize(){jLe(this)}parseSelections(){this.component.selection=FNe(this,this.selection)}parseMarkGroup(){this.component.mark=SIe(this)}parseAxesAndHeaders(){this.component.axes=KLe(this)}assembleSelectionTopLevelSignals(t){return tNe(this,t)}assembleSignals(){return[...fie(this),...Z8e(this,[])]}assembleSelectionData(t){return nNe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return jD(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!km(this.parent))&&(t=Ure(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Xf(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Fs(n)}typedFieldDef(t){const n=this.fieldDef(t);return Jr(n)?n:null}}class e8 extends XD{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(kE(a))return new e8(a,this,this.getName(`layer_${l}`),s,o);if(Ql(a))return new Kie(a,this,this.getName(`layer_${l}`),s,o);throw new Error(YO(a))})}parseData(){this.component.data=UE(this);for(const t of this.children)t.parseData()}parseLayoutSize(){zLe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of X(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){JLe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),fie(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),jD(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of le(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return rNe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Aie(this))}}function t8(e,t,n,r,i){if(yE(e))return new wy(e,t,n,i);if(kE(e))return new e8(e,t,n,r,i);if(Ql(e))return new Kie(e,t,n,r,i);if(jDe(e))return new qLe(e,t,n,i);throw new Error(YO(e))}function TIe(e,t={}){t.logger&&WRe(t.logger),t.fieldTitle&&Qne(t.fieldTitle);try{const n=_re(nm(t.config,e.config)),r=Dre(e,n),i=t8(r,null,"",void 0,n);return i.parse(),Z9e(i.component.data,i),{spec:FIe(i,PIe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&HRe(),t.fieldTitle&&lDe()}}function PIe(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):ue(t)&&(t={type:t}),i&&o&&Y8e(t.type)){if(i==="step"&&o==="step")Z(Gz()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";Z(Gz(aE(s)));const a=s==="width"?"height":"width";t.type=X8e(a)}}return{...X(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...wB(n,!1),...wB(e,!0)}}function FIe(e,t,n={},r){const i=e.config?t8e(e.config):void 0,o=[].concat(e.assembleSelectionData([]),DLe(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...Sre(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const MIe=lMe.version,RIe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:vg,accessPathWithDatum:IO,compile:TIe,contains:Ie,deepEqual:ji,deleteNestedProperty:ES,duplicate:Te,entries:pc,every:DO,fieldIntersection:LO,flatAccessWithDatum:Ote,getFirstDefined:sn,hasIntersection:NO,hasProperty:K,hash:Be,internalField:Lte,isBoolean:d1,isEmpty:vt,isEqual:k2,isInternalField:Ite,isNullOrFalse:KT,isNumeric:tE,keys:X,logicalExpr:by,mergeDeep:Mte,never:Fte,normalize:Dre,normalizeAngle:h1,omit:hi,pick:mg,prefixGenerator:QT,removePathFromField:ym,replaceAll:bd,replacePathInField:zo,resetIdCounter:fMe,setEqual:Rte,some:yg,stringify:bt,titleCase:jv,unique:fa,uniqueId:Nte,vals:Zn,varName:zt,version:MIe},Symbol.toStringTag,{value:"Module"}));function Qie(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var OIe="vega-themes",DIe="2.15.0",NIe="Themes for stylized Vega and Vega-Lite visualizations.",LIe=["vega","vega-lite","themes","style"],IIe="BSD-3-Clause",zIe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},BIe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],jIe="build/vega-themes.js",n8="build/vega-themes.module.js",UIe="build/vega-themes.min.js",VIe="build/vega-themes.min.js",WIe="build/vega-themes.module.d.ts",HIe={type:"git",url:"https://github.com/vega/vega-themes.git"},qIe=["src","build"],GIe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},YIe={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},XIe={vega:"*","vega-lite":"*"},KIe={},QIe={name:OIe,version:DIe,description:NIe,keywords:LIe,license:IIe,author:zIe,contributors:BIe,main:jIe,module:n8,unpkg:UIe,jsdelivr:VIe,types:WIe,repository:HIe,files:qIe,scripts:GIe,devDependencies:YIe,peerDependencies:XIe,dependencies:KIe};const Eh="#fff",ZB="#888",JIe={background:"#333",view:{stroke:ZB},title:{color:Eh,subtitleColor:Eh},style:{"guide-label":{fill:Eh},"guide-title":{fill:Eh}},axis:{domainColor:Eh,gridColor:ZB,tickColor:Eh}},Jc="#4572a7",ZIe={background:"#fff",arc:{fill:Jc},area:{fill:Jc},line:{stroke:Jc,strokeWidth:2},path:{stroke:Jc},rect:{fill:Jc},shape:{stroke:Jc},symbol:{fill:Jc,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Zc="#30a2da",P5="#cbcbcb",e7e="#999",t7e="#333",ej="#f0f0f0",tj="#333",n7e={arc:{fill:Zc},area:{fill:Zc},axis:{domainColor:P5,grid:!0,gridColor:P5,gridWidth:1,labelColor:e7e,labelFontSize:10,titleColor:t7e,tickColor:P5,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:ej,group:{fill:ej},legend:{labelColor:tj,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:tj,titleFontSize:14,titlePadding:10},line:{stroke:Zc,strokeWidth:2},path:{stroke:Zc,strokeWidth:.5},rect:{fill:Zc},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Zc},bar:{binSpacing:2,fill:Zc,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ef="#000",r7e={group:{fill:"#e5e5e5"},arc:{fill:ef},area:{fill:ef},line:{stroke:ef},path:{stroke:ef},rect:{fill:ef},shape:{stroke:ef},symbol:{fill:ef,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},i7e=22,o7e="normal",nj="Benton Gothic, sans-serif",rj=11.5,s7e="normal",tf="#82c6df",F5="Benton Gothic Bold, sans-serif",ij="normal",oj=13,Zm={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},a7e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:F5,fontSize:i7e,fontWeight:o7e},arc:{fill:tf},area:{fill:tf},line:{stroke:tf,strokeWidth:2},path:{stroke:tf},rect:{fill:tf},shape:{stroke:tf},symbol:{fill:tf,size:30},axis:{labelFont:nj,labelFontSize:rj,labelFontWeight:s7e,titleFont:F5,titleFontSize:oj,titleFontWeight:ij},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:nj,labelFontSize:rj,symbolType:"square",titleFont:F5,titleFontSize:oj,titleFontWeight:ij},range:{category:Zm["category-6"],diverging:Zm["fireandice-6"],heatmap:Zm["fire-7"],ordinal:Zm["fire-7"],ramp:Zm["fire-7"]}},nf="#ab5787",ux="#979797",l7e={background:"#f9f9f9",arc:{fill:nf},area:{fill:nf},line:{stroke:nf},path:{stroke:nf},rect:{fill:nf},shape:{stroke:nf},symbol:{fill:nf,size:30},axis:{domainColor:ux,domainWidth:.5,gridWidth:.2,labelColor:ux,tickColor:ux,tickWidth:.2,titleColor:ux},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},rf="#3e5c69",u7e={background:"#fff",arc:{fill:rf},area:{fill:rf},line:{stroke:rf},path:{stroke:rf},rect:{fill:rf},shape:{stroke:rf},symbol:{fill:rf},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},co="#1696d2",sj="#000000",c7e="#FFFFFF",cx="Lato",M5="Lato",f7e="Lato",d7e="#DEDDDD",h7e=18,e0={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},p7e={background:c7e,title:{anchor:"start",fontSize:h7e,font:cx},axisX:{domain:!0,domainColor:sj,domainWidth:1,grid:!1,labelFontSize:12,labelFont:M5,labelAngle:0,tickColor:sj,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:cx},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:d7e,gridWidth:1,labelFontSize:12,labelFont:M5,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:cx,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:M5,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:cx,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:e0["six-groups-cat-1"],diverging:e0["diverging-colors"],heatmap:e0["diverging-colors"],ordinal:e0["six-groups-seq"],ramp:e0["shades-blue"]},area:{fill:co},rect:{fill:co},line:{color:co,stroke:co,strokeWidth:5},trail:{color:co,stroke:co,strokeWidth:0,size:1},path:{stroke:co,strokeWidth:.5},point:{filled:!0},text:{font:f7e,color:co,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:co,stroke:null}},arc:{fill:co},shape:{stroke:co},symbol:{fill:co,size:30}},of="#3366CC",aj="#ccc",fx="Arial, sans-serif",g7e={arc:{fill:of},area:{fill:of},path:{stroke:of},rect:{fill:of},shape:{stroke:of},symbol:{stroke:of},circle:{fill:of},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:fx,fontSize:12},"guide-title":{font:fx,fontSize:12},"group-title":{font:fx,fontSize:12}},title:{font:fx,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:aj,tickColor:aj,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},r8=e=>e*(1/3+1),lj=r8(9),uj=r8(10),cj=r8(12),t0="Segoe UI",fj="wf_standard-font, helvetica, arial, sans-serif",dj="#252423",n0="#605E5C",hj="transparent",m7e="#C8C6C4",Jo="#118DFF",y7e="#12239E",v7e="#E66C37",b7e="#6B007B",x7e="#E044A7",w7e="#744EC2",S7e="#D9B300",C7e="#D64550",Jie=Jo,Zie="#DEEFFF",pj=[Zie,Jie],k7e=[Zie,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Jie],E7e={view:{stroke:hj},background:hj,font:t0,header:{titleFont:fj,titleFontSize:cj,titleColor:dj,labelFont:t0,labelFontSize:uj,labelColor:n0},axis:{ticks:!1,grid:!1,domain:!1,labelColor:n0,labelFontSize:lj,titleFont:fj,titleColor:dj,titleFontSize:cj,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:m7e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Jo},line:{stroke:Jo,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:t0,fontSize:lj,fill:n0},arc:{fill:Jo},area:{fill:Jo,line:!0,opacity:.6},path:{stroke:Jo},rect:{fill:Jo},point:{fill:Jo,filled:!0,size:75},shape:{stroke:Jo},symbol:{fill:Jo,strokeWidth:1.5,size:50},legend:{titleFont:t0,titleFontWeight:"bold",titleColor:n0,labelFont:t0,labelFontSize:uj,labelColor:n0,symbolType:"circle",symbolSize:75},range:{category:[Jo,y7e,v7e,b7e,x7e,w7e,S7e,C7e],diverging:pj,heatmap:pj,ordinal:k7e}},R5='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',_7e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',O5=400,dx={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},$7e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],A7e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function VE({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=dx.gridBg[e],i=dx.textPrimary[e],o=dx.textSecondary[e],s=n==="dark"?$7e:A7e,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:R5,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:_7e,labelFontWeight:O5,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:dx.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:R5,fill:o,fontWeight:O5},"guide-title":{font:R5,fill:o,fontWeight:O5}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const T7e=VE({theme:"white",background:"#ffffff"}),P7e=VE({theme:"g10",background:"#f4f4f4"}),F7e=VE({theme:"g90",background:"#262626"}),M7e=VE({theme:"g100",background:"#161616"}),R7e=QIe.version,O7e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:P7e,carbong100:M7e,carbong90:F7e,carbonwhite:T7e,dark:JIe,excel:ZIe,fivethirtyeight:n7e,ggplot2:r7e,googlecharts:g7e,latimes:a7e,powerbi:E7e,quartz:l7e,urbaninstitute:p7e,version:R7e,vox:u7e},Symbol.toStringTag,{value:"Module"}));function D7e(e,t,n,r){if(Y(e))return`[${e.map(i=>t(ue(i)?i:gj(i,n))).join(", ")}]`;if(ae(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(ae(c)&&(c=gj(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function N7e(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function gj(e,t){return JSON.stringify(e,N7e(t))}var L7e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const eoe="vg-tooltip-element",I7e={offsetX:10,offsetY:10,id:eoe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:z7e,maxDepth:2,formatTooltip:D7e,baseURL:""};function z7e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function B7e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return L7e.toString().replace(eoe,e)}function j7e(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class U7e{constructor(t){this.options={...I7e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=B7e(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=j7e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var D5={};function V7e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class W7e{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var H7e=W7e;const q7e=Object.freeze({loose:!0}),G7e=Object.freeze({}),Y7e=e=>e?typeof e!="object"?q7e:e:G7e;var i8=Y7e,S4={exports:{}};const X7e="2.0.0",toe=256,K7e=Number.MAX_SAFE_INTEGER||9007199254740991,Q7e=16,J7e=toe-6,Z7e=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var o8={MAX_LENGTH:toe,MAX_SAFE_COMPONENT_LENGTH:Q7e,MAX_SAFE_BUILD_LENGTH:J7e,MAX_SAFE_INTEGER:K7e,RELEASE_TYPES:Z7e,SEMVER_SPEC_VERSION:X7e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const eze=typeof process=="object"&&D5&&D5.NODE_DEBUG&&/\bsemver\b/i.test(D5.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var WE=eze;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=o8,o=WE;t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=g=>{for(const[m,y]of d)g=g.split(`${m}*`).join(`${m}{0,${y}}`).split(`${m}+`).join(`${m}{1,${y}}`);return g},p=(g,m,y)=>{const v=h(m),b=c++;o(g,b,m),u[g]=b,l[b]=m,s[b]=new RegExp(m,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(S4,S4.exports);var s8=S4.exports;const mj=/^[0-9]+$/,noe=(e,t)=>{const n=mj.test(e),r=mj.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},tze=(e,t)=>noe(t,e);var nze={compareIdentifiers:noe,rcompareIdentifiers:tze};const hx=WE,{MAX_LENGTH:yj,MAX_SAFE_INTEGER:px}=o8,{safeRe:vj,t:bj}=s8,rze=i8,{compareIdentifiers:_h}=nze;let ize=class Ys{constructor(t,n){if(n=rze(n),t instanceof Ys){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>yj)throw new TypeError(`version is longer than ${yj} characters`);hx("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?vj[bj.LOOSE]:vj[bj.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>px||this.major<0)throw new TypeError("Invalid major version");if(this.minor>px||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>px||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<px)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(hx("SemVer.compare",this.version,this.options,t),!(t instanceof Ys)){if(typeof t=="string"&&t===this.version)return 0;t=new Ys(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ys||(t=new Ys(t,this.options)),_h(this.major,t.major)||_h(this.minor,t.minor)||_h(this.patch,t.patch)}comparePre(t){if(t instanceof Ys||(t=new Ys(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(hx("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return _h(r,i)}while(++n)}compareBuild(t){t instanceof Ys||(t=new Ys(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(hx("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return _h(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),_h(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var a8=ize;const xj=a8,oze=(e,t,n)=>new xj(e,n).compare(new xj(t,n));var Em=oze;const sze=Em,aze=(e,t,n)=>sze(e,t,n)===0;var lze=aze;const uze=Em,cze=(e,t,n)=>uze(e,t,n)!==0;var fze=cze;const dze=Em,hze=(e,t,n)=>dze(e,t,n)>0;var pze=hze;const gze=Em,mze=(e,t,n)=>gze(e,t,n)>=0;var yze=mze;const vze=Em,bze=(e,t,n)=>vze(e,t,n)<0;var xze=bze;const wze=Em,Sze=(e,t,n)=>wze(e,t,n)<=0;var Cze=Sze;const kze=lze,Eze=fze,_ze=pze,$ze=yze,Aze=xze,Tze=Cze,Pze=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return kze(e,n,r);case"!=":return Eze(e,n,r);case">":return _ze(e,n,r);case">=":return $ze(e,n,r);case"<":return Aze(e,n,r);case"<=":return Tze(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Fze=Pze,N5,wj;function Mze(){if(wj)return N5;wj=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}N5=t;const n=i8,{safeRe:r,t:i}=s8,o=Fze,s=WE,a=a8,l=roe();return N5}var L5,Sj;function roe(){if(Sj)return L5;Sj=1;class e{constructor(O,_){if(_=r(_),O instanceof e)return O.loose===!!_.loose&&O.includePrerelease===!!_.includePrerelease?O:new e(O.raw,_);if(O instanceof i)return this.raw=O.value,this.set=[[O]],this.format(),this;if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=O.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(T=>this.parseRange(T.trim())).filter(T=>T.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const T=this.set[0];if(this.set=this.set.filter(N=>!p(N[0])),this.set.length===0)this.set=[T];else if(this.set.length>1){for(const N of this.set)if(N.length===1&&g(N[0])){this.set=[N];break}}}this.format()}format(){return this.range=this.set.map(O=>O.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(O){const T=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+O,N=n.get(T);if(N)return N;const D=this.options.loose,I=D?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];O=O.replace(I,P(this.options.includePrerelease)),o("hyphen replace",O),O=O.replace(a[l.COMPARATORTRIM],u),o("comparator trim",O),O=O.replace(a[l.TILDETRIM],c),o("tilde trim",O),O=O.replace(a[l.CARETTRIM],f),o("caret trim",O);let U=O.split(" ").map(ye=>y(ye,this.options)).join(" ").split(/\s+/).map(ye=>A(ye,this.options));D&&(U=U.filter(ye=>(o("loose invalid filter",ye,this.options),!!ye.match(a[l.COMPARATORLOOSE])))),o("range list",U);const V=new Map,se=U.map(ye=>new i(ye,this.options));for(const ye of se){if(p(ye))return[ye];V.set(ye.value,ye)}V.size>1&&V.has("")&&V.delete("");const Q=[...V.values()];return n.set(T,Q),Q}intersects(O,_){if(!(O instanceof e))throw new TypeError("a Range is required");return this.set.some(T=>m(T,_)&&O.set.some(N=>m(N,_)&&T.every(D=>N.every(I=>D.intersects(I,_)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new s(O,this.options)}catch{return!1}for(let _=0;_<this.set.length;_++)if(L(this.set[_],O,this.options))return!0;return!1}}L5=e;const t=H7e,n=new t,r=i8,i=Mze(),o=WE,s=a8,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:f}=s8,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=o8,p=M=>M.value==="<0.0.0-0",g=M=>M.value==="",m=(M,O)=>{let _=!0;const T=M.slice();let N=T.pop();for(;_&&T.length;)_=T.every(D=>N.intersects(D,O)),N=T.pop();return _},y=(M,O)=>(o("comp",M,O),M=S(M,O),o("caret",M),M=b(M,O),o("tildes",M),M=w(M,O),o("xrange",M),M=E(M,O),o("stars",M),M),v=M=>!M||M.toLowerCase()==="x"||M==="*",b=(M,O)=>M.trim().split(/\s+/).map(_=>x(_,O)).join(" "),x=(M,O)=>{const _=O.loose?a[l.TILDELOOSE]:a[l.TILDE];return M.replace(_,(T,N,D,I,U)=>{o("tilde",M,T,N,D,I,U);let V;return v(N)?V="":v(D)?V=`>=${N}.0.0 <${+N+1}.0.0-0`:v(I)?V=`>=${N}.${D}.0 <${N}.${+D+1}.0-0`:U?(o("replaceTilde pr",U),V=`>=${N}.${D}.${I}-${U} <${N}.${+D+1}.0-0`):V=`>=${N}.${D}.${I} <${N}.${+D+1}.0-0`,o("tilde return",V),V})},S=(M,O)=>M.trim().split(/\s+/).map(_=>C(_,O)).join(" "),C=(M,O)=>{o("caret",M,O);const _=O.loose?a[l.CARETLOOSE]:a[l.CARET],T=O.includePrerelease?"-0":"";return M.replace(_,(N,D,I,U,V)=>{o("caret",M,N,D,I,U,V);let se;return v(D)?se="":v(I)?se=`>=${D}.0.0${T} <${+D+1}.0.0-0`:v(U)?D==="0"?se=`>=${D}.${I}.0${T} <${D}.${+I+1}.0-0`:se=`>=${D}.${I}.0${T} <${+D+1}.0.0-0`:V?(o("replaceCaret pr",V),D==="0"?I==="0"?se=`>=${D}.${I}.${U}-${V} <${D}.${I}.${+U+1}-0`:se=`>=${D}.${I}.${U}-${V} <${D}.${+I+1}.0-0`:se=`>=${D}.${I}.${U}-${V} <${+D+1}.0.0-0`):(o("no pr"),D==="0"?I==="0"?se=`>=${D}.${I}.${U}${T} <${D}.${I}.${+U+1}-0`:se=`>=${D}.${I}.${U}${T} <${D}.${+I+1}.0-0`:se=`>=${D}.${I}.${U} <${+D+1}.0.0-0`),o("caret return",se),se})},w=(M,O)=>(o("replaceXRanges",M,O),M.split(/\s+/).map(_=>k(_,O)).join(" ")),k=(M,O)=>{M=M.trim();const _=O.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return M.replace(_,(T,N,D,I,U,V)=>{o("xRange",M,T,N,D,I,U,V);const se=v(D),Q=se||v(I),ye=Q||v(U),Re=ye;return N==="="&&Re&&(N=""),V=O.includePrerelease?"-0":"",se?N===">"||N==="<"?T="<0.0.0-0":T="*":N&&Re?(Q&&(I=0),U=0,N===">"?(N=">=",Q?(D=+D+1,I=0,U=0):(I=+I+1,U=0)):N==="<="&&(N="<",Q?D=+D+1:I=+I+1),N==="<"&&(V="-0"),T=`${N+D}.${I}.${U}${V}`):Q?T=`>=${D}.0.0${V} <${+D+1}.0.0-0`:ye&&(T=`>=${D}.${I}.0${V} <${D}.${+I+1}.0-0`),o("xRange return",T),T})},E=(M,O)=>(o("replaceStars",M,O),M.trim().replace(a[l.STAR],"")),A=(M,O)=>(o("replaceGTE0",M,O),M.trim().replace(a[O.includePrerelease?l.GTE0PRE:l.GTE0],"")),P=M=>(O,_,T,N,D,I,U,V,se,Q,ye,Re)=>(v(T)?_="":v(N)?_=`>=${T}.0.0${M?"-0":""}`:v(D)?_=`>=${T}.${N}.0${M?"-0":""}`:I?_=`>=${_}`:_=`>=${_}${M?"-0":""}`,v(se)?V="":v(Q)?V=`<${+se+1}.0.0-0`:v(ye)?V=`<${se}.${+Q+1}.0-0`:Re?V=`<=${se}.${Q}.${ye}-${Re}`:M?V=`<${se}.${Q}.${+ye+1}-0`:V=`<=${V}`,`${_} ${V}`.trim()),L=(M,O,_)=>{for(let T=0;T<M.length;T++)if(!M[T].test(O))return!1;if(O.prerelease.length&&!_.includePrerelease){for(let T=0;T<M.length;T++)if(o(M[T].semver),M[T].semver!==i.ANY&&M[T].semver.prerelease.length>0){const N=M[T].semver;if(N.major===O.major&&N.minor===O.minor&&N.patch===O.patch)return!0}return!1}return!0};return L5}const Rze=roe(),Oze=(e,t,n)=>{try{t=new Rze(t,n)}catch{return!1}return t.test(e)};var Dze=Oze,ioe=V7e(Dze);function Nze(e,t,n){const r=e.open(t),i=1e4,o=250,{origin:s}=new URL(t);let a=~~(i/o);function l(c){c.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,s),setTimeout(u,o),a-=1)}setTimeout(u,o)}var Lze=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function ooe(e,...t){for(const n of t)Ize(e,n);return e}function Ize(e,t){for(const n of Object.keys(t))rm(e,n,t[n],!0)}const Zo=A6e;let Mg=RIe;const gx=typeof window<"u"?window:void 0;var aq;Mg===void 0&&((aq=gx==null?void 0:gx.vl)!=null&&aq.compile)&&(Mg=gx.vl);const zze={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Bze={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},q0={vega:"Vega","vega-lite":"Vega-Lite"},zS={vega:Zo.version,"vega-lite":Mg?Mg.version:"not available"},jze={vega:e=>e,"vega-lite":(e,t)=>Mg.compile(e,{config:t}).spec},Uze=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Vze="chart-wrapper";function Wze(e){return typeof e=="function"}function Cj(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${q0[r]} JSON Source`}function Hze(e,t){if(e.$schema){const n=Qie(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${q0[n.library]}, but mode argument sets ${q0[t]??t}.`);const r=n.library;return ioe(zS[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${q0[r]} ${n.version}, but the current version of ${q0[r]} is v${zS[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function soe(e){return!!(e&&"load"in e)}function kj(e){return soe(e)?e:Zo.loader(e)}function qze(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return ue(t.defaultStyle)&&(t.defaultStyle=!1),t}async function aoe(e,t,n={}){let r,i;ue(t)?(i=kj(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=qze(r),s=o.loader;(!i||s)&&(i=kj(n.loader??s));const a=await Ej(o,i),l=await Ej(n,i),u={...ooe(l,a),config:nm(l.config??{},a.config??{})};return await Yze(e,r,u,i)}async function Ej(e,t){const n=ue(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=ue(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Gze(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Yze(e,t,n={},r){const i=n.theme?nm(O7e[n.theme],n.config??{}):n.config,o=_c(n.actions)?n.actions:ooe({},zze,n.actions??{}),s={...Bze,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??Zo.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const S="vega-embed-style",{root:C,rootContainer:w}=Gze(c);if(!C.getElementById(S)){const k=document.createElement("style");k.id=S,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Lze.toString():n.defaultStyle,w.appendChild(k)}}const f=Hze(t,n.mode);let d=jze[f](t,i);if(f==="vega-lite"&&d.$schema){const S=Qie(d.$schema);ioe(zS.vega,`^${S.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${S.version}, but current version is v${zS.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const S=document.createElement("div");S.classList.add(Vze),c.appendChild(S),h=S}const p=n.patch;if(p&&(d=p instanceof Function?p(d):HC(d,p,!0,!1).newDocument),n.formatLocale&&Zo.formatLocale(n.formatLocale),n.timeFormatLocale&&Zo.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const S in n.expressionFunctions){const C=n.expressionFunctions[S];"fn"in C?Zo.expressionFunction(S,C.fn,C.visitor):C instanceof Function&&Zo.expressionFunction(S,C)}const{ast:g}=n,m=Zo.parse(d,f==="vega-lite"?{}:i,{ast:g}),y=new(n.viewClass||Zo.View)(m,{loader:r,logLevel:l,renderer:a,...g?{expr:Zo.expressionInterpreter??n.expr??I6e}:{}});if(y.addSignalListener("autosize",(S,C)=>{const{type:w}=C;w=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):w=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):w=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:S,tooltip:C}=n,w=S&&!soe(S)?S==null?void 0:S.baseURL:void 0,k=Wze(C)?C:new U7e({baseURL:w,...C===!0?{}:C}).call;y.tooltip(k)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:S,updateSet:C}=typeof v=="boolean"?{}:v;y.hover(S,C)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(o!==!1){let S=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const w=document.createElement("details");w.title=s.CLICK_TO_VIEW_ACTIONS,c.append(w),S=w;const k=document.createElement("summary");k.innerHTML=Uze,w.append(k),b=E=>{w.contains(E.target)||w.removeAttribute("open")},document.addEventListener("click",b)}const C=document.createElement("div");if(S.append(C),C.classList.add("vega-actions"),o===!0||o.export!==!1){for(const w of["svg","png"])if(o===!0||o.export===!0||o.export[w]){const k=s[`${w.toUpperCase()}_ACTION`],E=document.createElement("a"),A=ae(n.scaleFactor)?n.scaleFactor[w]:n.scaleFactor;E.text=k,E.href="#",E.target="_blank",E.download=`${u}.${w}`,E.addEventListener("mousedown",async function(P){P.preventDefault();const L=await y.toImageURL(w,A);this.href=L}),C.append(E)}}if(o===!0||o.source!==!1){const w=document.createElement("a");w.text=s.SOURCE_ACTION,w.href="#",w.addEventListener("click",function(k){Cj(g$(t),n.sourceHeader??"",n.sourceFooter??"",f),k.preventDefault()}),C.append(w)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const w=document.createElement("a");w.text=s.COMPILED_ACTION,w.href="#",w.addEventListener("click",function(k){Cj(g$(d),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),C.append(w)}if(o===!0||o.editor!==!1){const w=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=s.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(E){Nze(window,w,{config:i,mode:p?"vega":f,renderer:a,spec:g$(p?d:t)}),E.preventDefault()}),C.append(k)}}function x(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:x,embedOptions:n}}const Xze={count:" ",sum:"",mean:"",average:"",median:"",min:"",max:"",variance:"",stdev:"",first:"",last:"",ci0:" ",ci1:" ",missing:"",valid:"",distinct:""},Kze={year:"",quarter:"",month:"",week:"",day:"",date:"",hours:"",minutes:"",seconds:"",milliseconds:"",yearquarter:"",yearquartermonth:"",yearmonth:"",yearmonthdate:"",yearmonthdatehours:"",yearmonthdatehoursminutes:"",yearmonthdatehoursminutesseconds:"",monthdate:"",hoursminutes:"",hoursminutesseconds:"",minutesseconds:"",secondsmilliseconds:""};function E2(e){return Xze[e]||Kze[e]||e}function Qze(e){return/[---]/.test(e)}function Jze(e){return Mg.compile(e,{config:{locale:{time:{dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["1","2","3","4","5","6","7","8","9","10","11","12"],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]},number:{decimal:".",thousands:",",grouping:[3],currency:["",""]}},axis:{labelExpr:`
  isValid(datum.value) && isNumber(datum.value) ? (
    datum.value == 0 ? '0' :
    datum.value > 1e15 ? format(datum.value/1e15, (floor(datum.value/1e15) == datum.value/1e15) ? ',d' : ',.1f') + '' :
    datum.value == 1e15 ? '' :
    datum.value > 1e14 ? format(datum.value/1e14, (floor(datum.value/1e14) == datum.value/1e14) ? ',d' : ',.1f') + '' :
    datum.value == 1e14 ? '' :
    datum.value > 1e13 ? format(datum.value/1e13, (floor(datum.value/1e13) == datum.value/1e13) ? ',d' : ',.1f') + '' :
    datum.value == 1e13 ? '' :
    datum.value > 1e12 ? format(datum.value/1e12, (floor(datum.value/1e12) == datum.value/1e12) ? ',d' : ',.1f') + '' :
    datum.value == 1e12 ? '' :
    datum.value > 1e11 ? format(datum.value/1e11, (floor(datum.value/1e11) == datum.value/1e11) ? ',d' : ',.1f') + '' :
    datum.value == 1e11 ? '' :
    datum.value > 1e10 ? format(datum.value/1e10, (floor(datum.value/1e10) == datum.value/1e10) ? ',d' : ',.1f') + '' :
    datum.value == 1e10 ? '' :
    datum.value > 1e9 ? format(datum.value/1e9, (floor(datum.value/1e9) == datum.value/1e9) ? ',d' : ',.1f') + '' :
    datum.value == 1e9 ? '' :
    datum.value > 1e8 ? format(datum.value/1e8, (floor(datum.value/1e8) == datum.value/1e8) ? ',d' : ',.1f') + '' :
    datum.value == 1e8 ? '' :
    datum.value > 1e7 ? format(datum.value/1e7, (floor(datum.value/1e7) == datum.value/1e7) ? ',d' : ',.1f') + '' :
    datum.value == 1e7 ? '' :
    datum.value > 1e6 ? format(datum.value/1e6, (floor(datum.value/1e6) == datum.value/1e6) ? ',d' : ',.1f') + '' :
    datum.value == 1e6 ? '' :
    datum.value > 1e5 ? format(datum.value/1e5, (floor(datum.value/1e5) == datum.value/1e5) ? ',d' : ',.1f') + '' :
    datum.value == 1e5 ? '' :
    datum.value > 1e4 ? format(datum.value/1e4, (floor(datum.value/1e4) == datum.value/1e4) ? ',d' : ',.1f') + '' :
    datum.value == 1e4 ? '' :
    datum.value > 1e3 ? format(datum.value/1e3, (floor(datum.value/1e3) == datum.value/1e3) ? ',d' : ',.1f') + '' :
    datum.value == 1e3 ? '' :
    format(datum.value, floor(datum.value) == datum.value ? ',.0f' : ',.1f')
  ) : datum.label`}},fieldTitle:(t,n)=>{var a;const{field:r,aggregate:i,timeUnit:o,bin:s}=t;if(i==="count")return n.countTitle&&Qze(n.countTitle)?n.countTitle:E2("count");if(s&&Ct(s))return`${r} ()`;if(o&&!Ic(o)){const l=(a=Cn(o))==null?void 0:a.unit;if(l)return`${r} (${qv(l).map(E2).join(" ")})`}else if(i)return Kl(i)?`${i.argmax}   ${r}`:Fa(i)?`${i.argmin}   ${r}`:`${r} ${E2(i)}`;return String(r)}}).spec}const kt={black:"#000000",white:"#FFFFFF","blackAlpha.50":"rgba(0, 0, 0, 0.04)","blackAlpha.100":"rgba(0, 0, 0, 0.06)","blackAlpha.200":"rgba(0, 0, 0, 0.08)","blackAlpha.300":"rgba(0, 0, 0, 0.16)","blackAlpha.400":"rgba(0, 0, 0, 0.24)","blackAlpha.500":"rgba(0, 0, 0, 0.36)","blackAlpha.600":"rgba(0, 0, 0, 0.48)","blackAlpha.700":"rgba(0, 0, 0, 0.64)","blackAlpha.800":"rgba(0, 0, 0, 0.80)","blackAlpha.900":"rgba(0, 0, 0, 0.92)","whiteAlpha.50":"rgba(255, 255, 255, 0.04)","whiteAlpha.100":"rgba(255, 255, 255, 0.06)","whiteAlpha.200":"rgba(255, 255, 255, 0.08)","whiteAlpha.300":"rgba(255, 255, 255, 0.16)","whiteAlpha.400":"rgba(255, 255, 255, 0.24)","whiteAlpha.500":"rgba(255, 255, 255, 0.36)","whiteAlpha.600":"rgba(255, 255, 255, 0.48)","whiteAlpha.700":"rgba(255, 255, 255, 0.64)","whiteAlpha.800":"rgba(255, 255, 255, 0.80)","whiteAlpha.900":"rgba(255, 255, 255, 0.92)","gray.50":"#F7FAFC","gray.100":"#EDF2F7","gray.200":"#E2E8F0","gray.300":"#CBD5E0","gray.400":"#A0AEC0","gray.500":"#718096","gray.600":"#4A5568","gray.700":"#2D3748","gray.800":"#1A202C","gray.900":"#171923","red.50":"#FFF5F5","red.100":"#FED7D7","red.200":"#FEB2B2","red.300":"#FC8181","red.400":"#F56565","red.500":"#E53E3E","red.600":"#C53030","red.700":"#9B2C2C","red.800":"#822727","red.900":"#63171B","orange.50":"#FFFAF0","orange.100":"#FEEBC8","orange.200":"#FBD38D","orange.300":"#F6AD55","orange.400":"#ED8936","orange.500":"#DD6B20","orange.600":"#C05621","orange.700":"#9C4221","orange.800":"#7B341E","orange.900":"#652B19","yellow.50":"#FFFFF0","yellow.100":"#FEFCBF","yellow.200":"#FAF089","yellow.300":"#F6E05E","yellow.400":"#ECC94B","yellow.500":"#D69E2E","yellow.600":"#B7791F","yellow.700":"#975A16","yellow.800":"#744210","yellow.900":"#5F370E","green.50":"#F0FFF4","green.100":"#C6F6D5","green.200":"#9AE6B4","green.300":"#68D391","green.400":"#48BB78","green.500":"#38A169","green.600":"#2F855A","green.700":"#276749","green.800":"#22543D","green.900":"#1C4532","teal.50":"#E6FFFA","teal.100":"#B2F5EA","teal.200":"#81E6D9","teal.300":"#4FD1C5","teal.400":"#38B2AC","teal.500":"#319795","teal.600":"#2C7A7B","teal.700":"#285E61","teal.800":"#234E52","teal.900":"#1D4044","blue.50":"#EBF8FF","blue.100":"#BEE3F8","blue.200":"#90CDF4","blue.300":"#63B3ED","blue.400":"#4299E1","blue.500":"#3182CE","blue.600":"#2B6CB0","blue.700":"#2C5282","blue.800":"#2A4365","blue.900":"#1A365D","cyan.50":"#EDFDFD","cyan.100":"#C4F1F9","cyan.200":"#9DECF9","cyan.300":"#76E4F7","cyan.400":"#0BC5EA","cyan.500":"#00B5D8","cyan.600":"#00A3C4","cyan.700":"#0987A0","cyan.800":"#086F83","cyan.900":"#065666","purple.50":"#FAF5FF","purple.100":"#E9D8FD","purple.200":"#D6BCFA","purple.300":"#B794F4","purple.400":"#9F7AEA","purple.500":"#805AD5","purple.600":"#6B46C1","purple.700":"#553C9A","purple.800":"#44337A","purple.900":"#322659","pink.50":"#FFF5F7","pink.100":"#FED7E2","pink.200":"#FBB6CE","pink.300":"#F687B3","pink.400":"#ED64A6","pink.500":"#D53F8C","pink.600":"#B83280","pink.700":"#97266D","pink.800":"#702459","pink.900":"#521B41"},_j=[{name:"Cars (Korean)",href:"/Swipytics/data/cars_ko.json"},{name:"Movies (Korean)",href:"/Swipytics/data/movies_ko.json"},{name:"Seoul Bike Rides (Korean)",href:"/Swipytics/data/SeoulBikeData_ko_cleaned_5000.json"},{name:"Barley",href:"/Swipytics/data/barley.json"},{name:"Birdstrikes",href:"/Swipytics/data/birdstrikes_5000.json"},{name:"Burtin",href:"/Swipytics/data/burtin.json"},{name:"Cars",href:"/Swipytics/data/cars.json"},{name:"Crimea",href:"/Swipytics/data/crimea.json"},{name:"Jobs",href:"/Swipytics/data/jobs.json"},{name:"Movies",href:"/Swipytics/data/movies.json"},{name:"Population",href:"/Swipytics/data/population.json"}],mx=1,gn="orange",Bu={50:kt[`${gn}.50`],100:kt[`${gn}.100`],200:kt[`${gn}.200`],300:kt[`${gn}.300`],400:kt[`${gn}.400`],500:kt[`${gn}.500`],600:kt[`${gn}.600`],700:kt[`${gn}.700`],800:kt[`${gn}.800`],900:kt[`${gn}.900`]},loe="table";function uoe(e){return`thumbnail@${JSON.stringify(e)}`}async function Zze(e,t,n=100){const r=eBe(e);if(r)return r;const i=await rBe(e,t,n);return i&&sessionStorage.setItem(uoe(e),i),i}function eBe(e){return sessionStorage.getItem(uoe(e))}function tBe(e,t=100,n=100){return{...e,width:t,height:n,data:{name:loe},config:{...e.config,background:"transparent",title:{fontSize:18,offset:16},axisX:{labelFontSize:14,titleFontSize:16,titlePadding:16,labelLimit:100,labelAngle:-45},axisY:{labelFontSize:14,titleFontSize:16,titlePadding:16,labelLimit:70},autosize:{type:"fit"},legend:{direction:"horizontal",columns:2,orient:"bottom",labelFontSize:14,titleFontSize:16},numberFormat:".3~s"}}}function nBe(e,t){return{...e,width:t,height:t,config:{...e.config,legend:{disable:!0},axis:{title:null,disable:!0,grid:!1,ticks:!1,labels:!1},style:{view:{stroke:"transparent"},cell:{stroke:"transparent"}}},background:"transparent",title:void 0}}async function rBe(e,t,n=100){if(!e||!t)return;const r=nBe(e,n);return(await(await aoe(document.createElement("div"),{...r,data:{values:t}},{actions:!1}).then(o=>o.view)).toCanvas()).toDataURL()}const iBe={year:"%Y",month:"%b",day:"%a",hours:"%H"};function oBe(e,t,n){return{...e,config:{...e.config,axisTemporal:{format:iBe[t]}},transform:[{timeUnit:t,field:n.name,as:n.name}]}}function sBe(e){if(e.startsWith("/")||e.startsWith("./")||e.startsWith("../"))return!0;try{return new URL(e),!0}catch{return!1}}function coe(e){try{let t;e.startsWith("/")||e.startsWith("./")||e.startsWith("../")?t=e.split("/"):t=new URL(e).pathname.split("/"),t=t.filter(r=>r.length>0);const n=t[t.length-1];if(!n)throw new Error("No filename found");return decodeURIComponent(n)}catch(t){throw t instanceof Error?t:new Error("Invalid URL or path")}}const aBe={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},$j=e=>{let t;const n=new Set,r=(c,f)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(p=>p(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(aBe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},lBe=e=>e?$j(e):$j;var foe={exports:{}},doe={},hoe={exports:{}},poe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg=F;function uBe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cBe=typeof Object.is=="function"?Object.is:uBe,fBe=Rg.useState,dBe=Rg.useEffect,hBe=Rg.useLayoutEffect,pBe=Rg.useDebugValue;function gBe(e,t){var n=t(),r=fBe({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return hBe(function(){i.value=n,i.getSnapshot=t,I5(i)&&o({inst:i})},[e,n,t]),dBe(function(){return I5(i)&&o({inst:i}),e(function(){I5(i)&&o({inst:i})})},[e]),pBe(n),n}function I5(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cBe(e,n)}catch{return!0}}function mBe(e,t){return t()}var yBe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mBe:gBe;poe.useSyncExternalStore=Rg.useSyncExternalStore!==void 0?Rg.useSyncExternalStore:yBe;hoe.exports=poe;var vBe=hoe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE=F,bBe=vBe;function xBe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wBe=typeof Object.is=="function"?Object.is:xBe,SBe=bBe.useSyncExternalStore,CBe=HE.useRef,kBe=HE.useEffect,EBe=HE.useMemo,_Be=HE.useDebugValue;doe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=CBe(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=EBe(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&s.hasValue){var p=s.value;if(i(p,h))return f=p}return f=h}if(p=f,wBe(c,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(c=h,f=g)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,i]);var a=SBe(e,o[0],o[1]);return kBe(function(){s.hasValue=!0,s.value=a},[a]),_Be(a),a};foe.exports=doe;var $Be=foe.exports;const ABe=Ul($Be),goe={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:TBe}=Vi,{useSyncExternalStoreWithSelector:PBe}=ABe;let Aj=!1;const FBe=e=>e;function MBe(e,t=FBe,n){(goe?"production":void 0)!=="production"&&n&&!Aj&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Aj=!0);const r=PBe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return TBe(r),r}const Tj=e=>{(goe?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?lBe(e):e,n=(r,i)=>MBe(t,r,i);return Object.assign(n,t),n},l8=e=>e?Tj(e):Tj,z5={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},C4=new Map,yx=e=>{const t=C4.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},RBe=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=C4.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return C4.set(n.name,i),{type:"tracked",store:e,...i}},OBe=(e,t={})=>(n,r,i)=>{const{enabled:o,anonymousActionType:s,store:a,...l}=t;let u;try{u=(o??(z5?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(z5?"production":void 0)!=="production"&&o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,i);const{connection:c,...f}=RBe(a,u,l);let d=!0;i.setState=(g,m,y)=>{const v=n(g,m);if(!d)return v;const b=y===void 0?{type:s||"anonymous"}:typeof y=="string"?{type:y}:y;return a===void 0?(c==null||c.send(b,r()),v):(c==null||c.send({...b,type:`${a}/${b.type}`},{...yx(l.name),[a]:i.getState()}),v)};const h=(...g)=>{const m=d;d=!1,n(...g),d=m},p=e(i.setState,r,i);if(f.type==="untracked"?c==null||c.init(p):(f.stores[f.store]=i,c==null||c.init(Object.fromEntries(Object.entries(f.stores).map(([g,m])=>[g,g===f.store?p:m.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let g=!1;const m=i.dispatch;i.dispatch=(...y)=>{(z5?"production":void 0)!=="production"&&y[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),m(...y)}}return c.subscribe(g=>{var m;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return B5(g.payload,y=>{if(y.type==="__setState"){if(a===void 0){h(y.state);return}Object.keys(y.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const v=y.state[a];if(v==null)return;JSON.stringify(i.getState())!==JSON.stringify(v)&&h(v);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(y)});case"DISPATCH":switch(g.payload.type){case"RESET":return h(p),a===void 0?c==null?void 0:c.init(i.getState()):c==null?void 0:c.init(yx(l.name));case"COMMIT":if(a===void 0){c==null||c.init(i.getState());return}return c==null?void 0:c.init(yx(l.name));case"ROLLBACK":return B5(g.state,y=>{if(a===void 0){h(y),c==null||c.init(i.getState());return}h(y[a]),c==null||c.init(yx(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return B5(g.state,y=>{if(a===void 0){h(y);return}JSON.stringify(i.getState())!==JSON.stringify(y[a])&&h(y[a])});case"IMPORT_STATE":{const{nextLiftedState:y}=g.payload,v=(m=y.computedStates.slice(-1)[0])==null?void 0:m.state;if(!v)return;h(a===void 0?v:v[a]),c==null||c.send(null,y);return}case"PAUSE_RECORDING":return d=!d}return}}),p},u8=OBe,B5=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)},DBe={json:$pe,csv:zF},xc=l8(u8(e=>({filename:null,fileCache:null,data:void 0,writingFile:!1,writeFile:async t=>{e({writingFile:!0,filename:null,fileCache:null,data:void 0});try{const n=t instanceof File?t.name:coe(t),r=n.split(".").pop(),o=await(await sA(t)).arrayBuffer(),s=new Uint8Array(o),a=await NF(o,DBe[r],{worker:!0,fetch:{mode:"no-cors"}});await Di.lazyCall("writeFile",{filename:n,fileBuffer:s}),e({filename:n,fileCache:t,data:a,writingFile:!1})}catch(n){console.error(n)}finally{e({writingFile:!1})}}}),{name:"DataStore",anonymousActionType:"DataStore Action",enabled:!1}));var NBe=!1;function LBe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function IBe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var zBe=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!NBe:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(IBe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=LBe(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e}(),ur="-ms-",BS="-moz-",it="-webkit-",moe="comm",c8="rule",f8="decl",BBe="@import",yoe="@keyframes",jBe="@layer",UBe=Math.abs,qE=String.fromCharCode,VBe=Object.assign;function WBe(e,t){return Hn(e,0)^45?(((t<<2^Hn(e,0))<<2^Hn(e,1))<<2^Hn(e,2))<<2^Hn(e,3):0}function voe(e){return e.trim()}function HBe(e,t){return(e=t.exec(e))?e[0]:e}function ot(e,t,n){return e.replace(t,n)}function k4(e,t){return e.indexOf(t)}function Hn(e,t){return e.charCodeAt(t)|0}function v1(e,t,n){return e.slice(t,n)}function ia(e){return e.length}function d8(e){return e.length}function vx(e,t){return t.push(e),e}function qBe(e,t){return e.map(t).join("")}var GE=1,Og=1,boe=0,Ei=0,fn=0,_m="";function YE(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:GE,column:Og,length:s,return:""}}function r0(e,t){return VBe(YE("",null,null,"",null,null,0),e,{length:-e.length},t)}function GBe(){return fn}function YBe(){return fn=Ei>0?Hn(_m,--Ei):0,Og--,fn===10&&(Og=1,GE--),fn}function Gi(){return fn=Ei<boe?Hn(_m,Ei++):0,Og++,fn===10&&(Og=1,GE++),fn}function wa(){return Hn(_m,Ei)}function _2(){return Ei}function rb(e,t){return v1(_m,e,t)}function b1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function xoe(e){return GE=Og=1,boe=ia(_m=e),Ei=0,[]}function woe(e){return _m="",e}function $2(e){return voe(rb(Ei-1,E4(e===91?e+2:e===40?e+1:e)))}function XBe(e){for(;(fn=wa())&&fn<33;)Gi();return b1(e)>2||b1(fn)>3?"":" "}function KBe(e,t){for(;--t&&Gi()&&!(fn<48||fn>102||fn>57&&fn<65||fn>70&&fn<97););return rb(e,_2()+(t<6&&wa()==32&&Gi()==32))}function E4(e){for(;Gi();)switch(fn){case e:return Ei;case 34:case 39:e!==34&&e!==39&&E4(fn);break;case 40:e===41&&E4(e);break;case 92:Gi();break}return Ei}function QBe(e,t){for(;Gi()&&e+fn!==57;)if(e+fn===84&&wa()===47)break;return"/*"+rb(t,Ei-1)+"*"+qE(e===47?e:Gi())}function JBe(e){for(;!b1(wa());)Gi();return rb(e,Ei)}function ZBe(e){return woe(A2("",null,null,null,[""],e=xoe(e),0,[0],e))}function A2(e,t,n,r,i,o,s,a,l){for(var u=0,c=0,f=s,d=0,h=0,p=0,g=1,m=1,y=1,v=0,b="",x=i,S=o,C=r,w=b;m;)switch(p=v,v=Gi()){case 40:if(p!=108&&Hn(w,f-1)==58){k4(w+=ot($2(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:w+=$2(v);break;case 9:case 10:case 13:case 32:w+=XBe(p);break;case 92:w+=KBe(_2()-1,7);continue;case 47:switch(wa()){case 42:case 47:vx(eje(QBe(Gi(),_2()),t,n),l);break;default:w+="/"}break;case 123*g:a[u++]=ia(w)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+c:y==-1&&(w=ot(w,/\f/g,"")),h>0&&ia(w)-f&&vx(h>32?Fj(w+";",r,n,f-1):Fj(ot(w," ","")+";",r,n,f-2),l);break;case 59:w+=";";default:if(vx(C=Pj(w,t,n,u,c,i,a,b,x=[],S=[],f),o),v===123)if(c===0)A2(w,t,C,C,x,o,f,a,S);else switch(d===99&&Hn(w,3)===110?100:d){case 100:case 108:case 109:case 115:A2(e,C,C,r&&vx(Pj(e,C,C,0,0,i,a,b,i,x=[],f),S),i,S,f,a,r?x:S);break;default:A2(w,C,C,C,[""],S,0,a,S)}}u=c=h=0,g=y=1,b=w="",f=s;break;case 58:f=1+ia(w),h=p;default:if(g<1){if(v==123)--g;else if(v==125&&g++==0&&YBe()==125)continue}switch(w+=qE(v),v*g){case 38:y=c>0?1:(w+="\f",-1);break;case 44:a[u++]=(ia(w)-1)*y,y=1;break;case 64:wa()===45&&(w+=$2(Gi())),d=wa(),c=f=ia(b=w+=JBe(_2())),v++;break;case 45:p===45&&ia(w)==2&&(g=0)}}return o}function Pj(e,t,n,r,i,o,s,a,l,u,c){for(var f=i-1,d=i===0?o:[""],h=d8(d),p=0,g=0,m=0;p<r;++p)for(var y=0,v=v1(e,f+1,f=UBe(g=s[p])),b=e;y<h;++y)(b=voe(g>0?d[y]+" "+v:ot(v,/&\f/g,d[y])))&&(l[m++]=b);return YE(e,t,n,i===0?c8:a,l,u,c)}function eje(e,t,n){return YE(e,t,n,moe,qE(GBe()),v1(e,2,-2),0)}function Fj(e,t,n,r){return YE(e,t,n,f8,v1(e,0,r),v1(e,r+1,-1),r)}function Sp(e,t){for(var n="",r=d8(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function tje(e,t,n,r){switch(e.type){case jBe:if(e.children.length)break;case BBe:case f8:return e.return=e.return||e.value;case moe:return"";case yoe:return e.return=e.value+"{"+Sp(e.children,r)+"}";case c8:e.value=e.props.join(",")}return ia(n=Sp(e.children,r))?e.return=e.value+"{"+n+"}":""}function nje(e){var t=d8(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}function rje(e){return function(t){t.root||(t=t.return)&&e(t)}}var Mj=function(t){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=t(r);return n.set(r,i),i}};function Soe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var ije=function(t,n,r){for(var i=0,o=0;i=o,o=wa(),i===38&&o===12&&(n[r]=1),!b1(o);)Gi();return rb(t,Ei)},oje=function(t,n){var r=-1,i=44;do switch(b1(i)){case 0:i===38&&wa()===12&&(n[r]=1),t[r]+=ije(Ei-1,n,r);break;case 2:t[r]+=$2(i);break;case 4:if(i===44){t[++r]=wa()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=qE(i)}while(i=Gi());return t},sje=function(t,n){return woe(oje(xoe(t),n))},Rj=new WeakMap,aje=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!Rj.get(r))&&!i){Rj.set(t,!0);for(var o=[],s=sje(n,o),a=r.props,l=0,u=0;l<s.length;l++)for(var c=0;c<a.length;c++,u++)t.props[u]=o[l]?s[l].replace(/&\f/g,a[c]):a[c]+" "+s[l]}}},lje=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function Coe(e,t){switch(WBe(e,t)){case 5103:return it+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return it+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return it+e+BS+e+ur+e+e;case 6828:case 4268:return it+e+ur+e+e;case 6165:return it+e+ur+"flex-"+e+e;case 5187:return it+e+ot(e,/(\w+).+(:[^]+)/,it+"box-$1$2"+ur+"flex-$1$2")+e;case 5443:return it+e+ur+"flex-item-"+ot(e,/flex-|-self/,"")+e;case 4675:return it+e+ur+"flex-line-pack"+ot(e,/align-content|flex-|-self/,"")+e;case 5548:return it+e+ur+ot(e,"shrink","negative")+e;case 5292:return it+e+ur+ot(e,"basis","preferred-size")+e;case 6060:return it+"box-"+ot(e,"-grow","")+it+e+ur+ot(e,"grow","positive")+e;case 4554:return it+ot(e,/([^-])(transform)/g,"$1"+it+"$2")+e;case 6187:return ot(ot(ot(e,/(zoom-|grab)/,it+"$1"),/(image-set)/,it+"$1"),e,"")+e;case 5495:case 3959:return ot(e,/(image-set\([^]*)/,it+"$1$`$1");case 4968:return ot(ot(e,/(.+:)(flex-)?(.*)/,it+"box-pack:$3"+ur+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+it+e+e;case 4095:case 3583:case 4068:case 2532:return ot(e,/(.+)-inline(.+)/,it+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ia(e)-1-t>6)switch(Hn(e,t+1)){case 109:if(Hn(e,t+4)!==45)break;case 102:return ot(e,/(.+:)(.+)-([^]+)/,"$1"+it+"$2-$3$1"+BS+(Hn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~k4(e,"stretch")?Coe(ot(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Hn(e,t+1)!==115)break;case 6444:switch(Hn(e,ia(e)-3-(~k4(e,"!important")&&10))){case 107:return ot(e,":",":"+it)+e;case 101:return ot(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+it+(Hn(e,14)===45?"inline-":"")+"box$3$1"+it+"$2$3$1"+ur+"$2box$3")+e}break;case 5936:switch(Hn(e,t+11)){case 114:return it+e+ur+ot(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return it+e+ur+ot(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return it+e+ur+ot(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return it+e+ur+e+e}return e}var uje=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case f8:t.return=Coe(t.value,t.length);break;case yoe:return Sp([r0(t,{value:ot(t.value,"@","@"+it)})],i);case c8:if(t.length)return qBe(t.props,function(o){switch(HBe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Sp([r0(t,{props:[ot(o,/:(read-\w+)/,":"+BS+"$1")]})],i);case"::placeholder":return Sp([r0(t,{props:[ot(o,/:(plac\w+)/,":"+it+"input-$1")]}),r0(t,{props:[ot(o,/:(plac\w+)/,":"+BS+"$1")]}),r0(t,{props:[ot(o,/:(plac\w+)/,ur+"input-$1")]})],i)}return""})}},cje=[uje],fje=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var m=g.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||cje,o={},s,a=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var m=g.getAttribute("data-emotion").split(" "),y=1;y<m.length;y++)o[m[y]]=!0;a.push(g)});var l,u=[aje,lje];{var c,f=[tje,rje(function(g){c.insert(g)})],d=nje(u.concat(i,f)),h=function(m){return Sp(ZBe(m),d)};l=function(m,y,v,b){c=v,h(m?m+"{"+y.styles+"}":y.styles),b&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new zBe({key:n,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return p.sheet.hydrate(a),p};function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jS.apply(null,arguments)}var koe={exports:{}},mt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bn=typeof Symbol=="function"&&Symbol.for,h8=Bn?Symbol.for("react.element"):60103,p8=Bn?Symbol.for("react.portal"):60106,XE=Bn?Symbol.for("react.fragment"):60107,KE=Bn?Symbol.for("react.strict_mode"):60108,QE=Bn?Symbol.for("react.profiler"):60114,JE=Bn?Symbol.for("react.provider"):60109,ZE=Bn?Symbol.for("react.context"):60110,g8=Bn?Symbol.for("react.async_mode"):60111,e_=Bn?Symbol.for("react.concurrent_mode"):60111,t_=Bn?Symbol.for("react.forward_ref"):60112,n_=Bn?Symbol.for("react.suspense"):60113,dje=Bn?Symbol.for("react.suspense_list"):60120,r_=Bn?Symbol.for("react.memo"):60115,i_=Bn?Symbol.for("react.lazy"):60116,hje=Bn?Symbol.for("react.block"):60121,pje=Bn?Symbol.for("react.fundamental"):60117,gje=Bn?Symbol.for("react.responder"):60118,mje=Bn?Symbol.for("react.scope"):60119;function oo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case h8:switch(e=e.type,e){case g8:case e_:case XE:case QE:case KE:case n_:return e;default:switch(e=e&&e.$$typeof,e){case ZE:case t_:case i_:case r_:case JE:return e;default:return t}}case p8:return t}}}function Eoe(e){return oo(e)===e_}mt.AsyncMode=g8;mt.ConcurrentMode=e_;mt.ContextConsumer=ZE;mt.ContextProvider=JE;mt.Element=h8;mt.ForwardRef=t_;mt.Fragment=XE;mt.Lazy=i_;mt.Memo=r_;mt.Portal=p8;mt.Profiler=QE;mt.StrictMode=KE;mt.Suspense=n_;mt.isAsyncMode=function(e){return Eoe(e)||oo(e)===g8};mt.isConcurrentMode=Eoe;mt.isContextConsumer=function(e){return oo(e)===ZE};mt.isContextProvider=function(e){return oo(e)===JE};mt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===h8};mt.isForwardRef=function(e){return oo(e)===t_};mt.isFragment=function(e){return oo(e)===XE};mt.isLazy=function(e){return oo(e)===i_};mt.isMemo=function(e){return oo(e)===r_};mt.isPortal=function(e){return oo(e)===p8};mt.isProfiler=function(e){return oo(e)===QE};mt.isStrictMode=function(e){return oo(e)===KE};mt.isSuspense=function(e){return oo(e)===n_};mt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===XE||e===e_||e===QE||e===KE||e===n_||e===dje||typeof e=="object"&&e!==null&&(e.$$typeof===i_||e.$$typeof===r_||e.$$typeof===JE||e.$$typeof===ZE||e.$$typeof===t_||e.$$typeof===pje||e.$$typeof===gje||e.$$typeof===mje||e.$$typeof===hje)};mt.typeOf=oo;koe.exports=mt;var yje=koe.exports,_oe=yje,vje={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},bje={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$oe={};$oe[_oe.ForwardRef]=vje;$oe[_oe.Memo]=bje;var xje=!0;function wje(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var Aoe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||xje===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},Toe=function(t,n,r){Aoe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function Sje(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Cje={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},kje=!1,Eje=/[A-Z]|^ms/g,_je=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Poe=function(t){return t.charCodeAt(1)===45},Oj=function(t){return t!=null&&typeof t!="boolean"},j5=Soe(function(e){return Poe(e)?e:e.replace(Eje,"-$&").toLowerCase()}),Dj=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(_je,function(r,i,o){return oa={name:i,styles:o,next:oa},i})}return Cje[t]!==1&&!Poe(t)&&typeof n=="number"&&n!==0?n+"px":n},$je="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function x1(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return oa={name:i.name,styles:i.styles,next:oa},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)oa={name:s.name,styles:s.styles,next:oa},s=s.next;var a=o.styles+";";return a}return Aje(e,t,n)}case"function":{if(e!==void 0){var l=oa,u=n(e);return oa=l,x1(e,t,u)}break}}var c=n;if(t==null)return c;var f=t[c];return f!==void 0?f:c}function Aje(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=x1(e,t,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var a=s;t!=null&&t[a]!==void 0?r+=o+"{"+t[a]+"}":Oj(a)&&(r+=j5(o)+":"+Dj(o,a)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&kje)throw new Error($je);if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var l=0;l<s.length;l++)Oj(s[l])&&(r+=j5(o)+":"+Dj(o,s[l])+";");else{var u=x1(e,t,s);switch(o){case"animation":case"animationName":{r+=j5(o)+":"+u+";";break}default:r+=o+"{"+u+"}"}}}}return r}var Nj=/label:\s*([^\s;\n{]+)\s*(;|$)/g,oa;function m8(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";oa=void 0;var o=e[0];if(o==null||o.raw===void 0)r=!1,i+=x1(n,t,o);else{var s=o;i+=s[0]}for(var a=1;a<e.length;a++)if(i+=x1(n,t,e[a]),r){var l=o;i+=l[a]}Nj.lastIndex=0;for(var u="",c;(c=Nj.exec(i))!==null;)u+="-"+c[1];var f=Sje(i)+u;return{name:f,styles:i,next:oa}}var Tje=function(t){return t()},Foe=P9.useInsertionEffect?P9.useInsertionEffect:!1,Pje=Foe||Tje,Lj=Foe||F.useLayoutEffect,Moe=F.createContext(typeof HTMLElement<"u"?fje({key:"css"}):null);Moe.Provider;var Roe=function(t){return F.forwardRef(function(n,r){var i=F.useContext(Moe);return t(n,i,r)})},w1=F.createContext({}),Fje=function(t,n){if(typeof n=="function"){var r=n(t);return r}return jS({},t,n)},Mje=Mj(function(e){return Mj(function(t){return Fje(e,t)})}),Rje=function(t){var n=F.useContext(w1);return t.theme!==n&&(n=Mje(n)(t.theme)),F.createElement(w1.Provider,{value:n},t.children)},o_=Roe(function(e,t){var n=e.styles,r=m8([n],void 0,F.useContext(w1)),i=F.useRef();return Lj(function(){var o=t.key+"-global",s=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return t.sheet.tags.length&&(s.before=t.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[t]),Lj(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&Toe(t,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}t.insert("",r,s,!1)},[t,r.name]),null});function Oje(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m8(t)}var nh=function(){var t=Oje.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Ooe=String.raw,Doe=Ooe`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Dje=()=>$.jsx(o_,{styles:Doe}),Nje=({scope:e=""})=>$.jsx(o_,{styles:Ooe`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${Doe}
    `});function Lje(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function ni(e={}){const{name:t,strict:n=!0,hookName:r="useContext",providerName:i="Provider",errorMessage:o,defaultValue:s}=e,a=F.createContext(s);a.displayName=t;function l(){var u;const c=F.useContext(a);if(!c&&n){const f=new Error(o??Lje(r,i));throw f.name="ContextError",(u=Error.captureStackTrace)==null||u.call(Error,f,l),f}return c}return[a.Provider,l,a]}var[Ije,zje]=ni({strict:!1,name:"PortalManagerContext"});function Noe(e){const{children:t,zIndex:n}=e;return $.jsx(Ije,{value:{zIndex:n},children:t})}Noe.displayName="PortalManager";var Dg=globalThis!=null&&globalThis.document?F.useLayoutEffect:F.useEffect,Loe={exports:{}},so={},Ioe={exports:{}},zoe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,I){var U=D.length;D.push(I);e:for(;0<U;){var V=U-1>>>1,se=D[V];if(0<i(se,I))D[V]=I,D[U]=se,U=V;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var I=D[0],U=D.pop();if(U!==I){D[0]=U;e:for(var V=0,se=D.length,Q=se>>>1;V<Q;){var ye=2*(V+1)-1,Re=D[ye],ut=ye+1,$n=D[ut];if(0>i(Re,U))ut<se&&0>i($n,Re)?(D[V]=$n,D[ut]=U,V=ut):(D[V]=Re,D[ye]=U,V=ye);else if(ut<se&&0>i($n,U))D[V]=$n,D[ut]=U,V=ut;else break e}}return I}function i(D,I){var U=D.sortIndex-I.sortIndex;return U!==0?U:D.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=D)r(u),I.sortIndex=I.expirationTime,t(l,I);else break;I=n(u)}}function x(D){if(g=!1,b(D),!p)if(n(l)!==null)p=!0,T(S);else{var I=n(u);I!==null&&N(x,I.startTime-D)}}function S(D,I){p=!1,g&&(g=!1,y(k),k=-1),h=!0;var U=d;try{for(b(I),f=n(l);f!==null&&(!(f.expirationTime>I)||D&&!P());){var V=f.callback;if(typeof V=="function"){f.callback=null,d=f.priorityLevel;var se=V(f.expirationTime<=I);I=e.unstable_now(),typeof se=="function"?f.callback=se:f===n(l)&&r(l),b(I)}else r(l);f=n(l)}if(f!==null)var Q=!0;else{var ye=n(u);ye!==null&&N(x,ye.startTime-I),Q=!1}return Q}finally{f=null,d=U,h=!1}}var C=!1,w=null,k=-1,E=5,A=-1;function P(){return!(e.unstable_now()-A<E)}function L(){if(w!==null){var D=e.unstable_now();A=D;var I=!0;try{I=w(!0,D)}finally{I?M():(C=!1,w=null)}}else C=!1}var M;if(typeof v=="function")M=function(){v(L)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,_=O.port2;O.port1.onmessage=L,M=function(){_.postMessage(null)}}else M=function(){m(L,0)};function T(D){w=D,C||(C=!0,M())}function N(D,I){k=m(function(){D(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,T(S))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(D){switch(d){case 1:case 2:case 3:var I=3;break;default:I=d}var U=d;d=I;try{return D()}finally{d=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,I){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=d;d=D;try{return I()}finally{d=U}},e.unstable_scheduleCallback=function(D,I,U){var V=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?V+U:V):U=V,D){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=U+se,D={id:c++,callback:I,priorityLevel:D,startTime:U,expirationTime:se,sortIndex:-1},U>V?(D.sortIndex=U,t(u,D),n(l)===null&&D===n(u)&&(g?(y(k),k=-1):g=!0,N(x,U-V))):(D.sortIndex=se,t(l,D),p||h||(p=!0,T(S))),D},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(D){var I=d;return function(){var U=d;d=I;try{return D.apply(this,arguments)}finally{d=U}}}})(zoe);Ioe.exports=zoe;var Bje=Ioe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jje=F,to=Bje;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Boe=new Set,S1={};function rh(e,t){Ng(e,t),Ng(e+"Capture",t)}function Ng(e,t){for(S1[e]=t,e=0;e<t.length;e++)Boe.add(t[e])}var Nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_4=Object.prototype.hasOwnProperty,Uje=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ij={},zj={};function Vje(e){return _4.call(zj,e)?!0:_4.call(Ij,e)?!1:Uje.test(e)?zj[e]=!0:(Ij[e]=!0,!1)}function Wje(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Hje(e,t,n,r){if(t===null||typeof t>"u"||Wje(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ri(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nr[e]=new ri(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nr[t]=new ri(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nr[e]=new ri(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nr[e]=new ri(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nr[e]=new ri(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nr[e]=new ri(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nr[e]=new ri(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nr[e]=new ri(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nr[e]=new ri(e,5,!1,e.toLowerCase(),null,!1,!1)});var y8=/[\-:]([a-z])/g;function v8(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y8,v8);nr[t]=new ri(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y8,v8);nr[t]=new ri(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y8,v8);nr[t]=new ri(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nr[e]=new ri(e,1,!1,e.toLowerCase(),null,!1,!1)});nr.xlinkHref=new ri("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nr[e]=new ri(e,1,!1,e.toLowerCase(),null,!0,!0)});function b8(e,t,n,r){var i=nr.hasOwnProperty(t)?nr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Hje(t,n,i,r)&&(n=null),r||i===null?Vje(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zl=jje.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bx=Symbol.for("react.element"),Wh=Symbol.for("react.portal"),Hh=Symbol.for("react.fragment"),x8=Symbol.for("react.strict_mode"),$4=Symbol.for("react.profiler"),joe=Symbol.for("react.provider"),Uoe=Symbol.for("react.context"),w8=Symbol.for("react.forward_ref"),A4=Symbol.for("react.suspense"),T4=Symbol.for("react.suspense_list"),S8=Symbol.for("react.memo"),yu=Symbol.for("react.lazy"),Voe=Symbol.for("react.offscreen"),Bj=Symbol.iterator;function i0(e){return e===null||typeof e!="object"?null:(e=Bj&&e[Bj]||e["@@iterator"],typeof e=="function"?e:null)}var qt=Object.assign,U5;function G0(e){if(U5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U5=t&&t[1]||""}return`
`+U5+e}var V5=!1;function W5(e,t){if(!e||V5)return"";V5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{V5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?G0(e):""}function qje(e){switch(e.tag){case 5:return G0(e.type);case 16:return G0("Lazy");case 13:return G0("Suspense");case 19:return G0("SuspenseList");case 0:case 2:case 15:return e=W5(e.type,!1),e;case 11:return e=W5(e.type.render,!1),e;case 1:return e=W5(e.type,!0),e;default:return""}}function P4(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hh:return"Fragment";case Wh:return"Portal";case $4:return"Profiler";case x8:return"StrictMode";case A4:return"Suspense";case T4:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Uoe:return(e.displayName||"Context")+".Consumer";case joe:return(e._context.displayName||"Context")+".Provider";case w8:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case S8:return t=e.displayName||null,t!==null?t:P4(e.type)||"Memo";case yu:t=e._payload,e=e._init;try{return P4(e(t))}catch{}}return null}function Gje(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P4(t);case 8:return t===x8?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Woe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yje(e){var t=Woe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xx(e){e._valueTracker||(e._valueTracker=Yje(e))}function Hoe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Woe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function US(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function F4(e,t){var n=t.checked;return qt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jj(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=wc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qoe(e,t){t=t.checked,t!=null&&b8(e,"checked",t,!1)}function M4(e,t){qoe(e,t);var n=wc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?R4(e,t.type,n):t.hasOwnProperty("defaultValue")&&R4(e,t.type,wc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uj(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function R4(e,t,n){(t!=="number"||US(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Y0=Array.isArray;function Cp(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+wc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function O4(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return qt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vj(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(te(92));if(Y0(n)){if(1<n.length)throw Error(te(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:wc(n)}}function Goe(e,t){var n=wc(t.value),r=wc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Wj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yoe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function D4(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yoe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wx,Xoe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wx=wx||document.createElement("div"),wx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function C1(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xje=["Webkit","ms","Moz","O"];Object.keys(Sy).forEach(function(e){Xje.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sy[t]=Sy[e]})});function Koe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Sy.hasOwnProperty(e)&&Sy[e]?(""+t).trim():t+"px"}function Qoe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Koe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Kje=qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function N4(e,t){if(t){if(Kje[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function L4(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I4=null;function C8(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var z4=null,kp=null,Ep=null;function Hj(e){if(e=sb(e)){if(typeof z4!="function")throw Error(te(280));var t=e.stateNode;t&&(t=c_(t),z4(e.stateNode,e.type,t))}}function Joe(e){kp?Ep?Ep.push(e):Ep=[e]:kp=e}function Zoe(){if(kp){var e=kp,t=Ep;if(Ep=kp=null,Hj(e),t)for(e=0;e<t.length;e++)Hj(t[e])}}function ese(e,t){return e(t)}function tse(){}var H5=!1;function nse(e,t,n){if(H5)return e(t,n);H5=!0;try{return ese(e,t,n)}finally{H5=!1,(kp!==null||Ep!==null)&&(tse(),Zoe())}}function k1(e,t){var n=e.stateNode;if(n===null)return null;var r=c_(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var B4=!1;if(Nl)try{var o0={};Object.defineProperty(o0,"passive",{get:function(){B4=!0}}),window.addEventListener("test",o0,o0),window.removeEventListener("test",o0,o0)}catch{B4=!1}function Qje(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Cy=!1,VS=null,WS=!1,j4=null,Jje={onError:function(e){Cy=!0,VS=e}};function Zje(e,t,n,r,i,o,s,a,l){Cy=!1,VS=null,Qje.apply(Jje,arguments)}function eUe(e,t,n,r,i,o,s,a,l){if(Zje.apply(this,arguments),Cy){if(Cy){var u=VS;Cy=!1,VS=null}else throw Error(te(198));WS||(WS=!0,j4=u)}}function ih(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rse(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qj(e){if(ih(e)!==e)throw Error(te(188))}function tUe(e){var t=e.alternate;if(!t){if(t=ih(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qj(i),e;if(o===r)return qj(i),t;o=o.sibling}throw Error(te(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function ise(e){return e=tUe(e),e!==null?ose(e):null}function ose(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ose(e);if(t!==null)return t;e=e.sibling}return null}var sse=to.unstable_scheduleCallback,Gj=to.unstable_cancelCallback,nUe=to.unstable_shouldYield,rUe=to.unstable_requestPaint,nn=to.unstable_now,iUe=to.unstable_getCurrentPriorityLevel,k8=to.unstable_ImmediatePriority,ase=to.unstable_UserBlockingPriority,HS=to.unstable_NormalPriority,oUe=to.unstable_LowPriority,lse=to.unstable_IdlePriority,s_=null,Sa=null;function sUe(e){if(Sa&&typeof Sa.onCommitFiberRoot=="function")try{Sa.onCommitFiberRoot(s_,e,void 0,(e.current.flags&128)===128)}catch{}}var ws=Math.clz32?Math.clz32:uUe,aUe=Math.log,lUe=Math.LN2;function uUe(e){return e>>>=0,e===0?32:31-(aUe(e)/lUe|0)|0}var Sx=64,Cx=4194304;function X0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qS(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=X0(a):(o&=s,o!==0&&(r=X0(o)))}else s=n&~i,s!==0?r=X0(s):o!==0&&(r=X0(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ws(t),i=1<<n,r|=e[n],t&=~i;return r}function cUe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fUe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-ws(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=cUe(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function U4(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function use(){var e=Sx;return Sx<<=1,!(Sx&4194240)&&(Sx=64),e}function q5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ib(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ws(t),e[t]=n}function dUe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ws(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function E8(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ws(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var pt=0;function cse(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fse,_8,dse,hse,pse,V4=!1,kx=[],Yu=null,Xu=null,Ku=null,E1=new Map,_1=new Map,Su=[],hUe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yj(e,t){switch(e){case"focusin":case"focusout":Yu=null;break;case"dragenter":case"dragleave":Xu=null;break;case"mouseover":case"mouseout":Ku=null;break;case"pointerover":case"pointerout":E1.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_1.delete(t.pointerId)}}function s0(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=sb(t),t!==null&&_8(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function pUe(e,t,n,r,i){switch(t){case"focusin":return Yu=s0(Yu,e,t,n,r,i),!0;case"dragenter":return Xu=s0(Xu,e,t,n,r,i),!0;case"mouseover":return Ku=s0(Ku,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return E1.set(o,s0(E1.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,_1.set(o,s0(_1.get(o)||null,e,t,n,r,i)),!0}return!1}function gse(e){var t=Tf(e.target);if(t!==null){var n=ih(t);if(n!==null){if(t=n.tag,t===13){if(t=rse(n),t!==null){e.blockedOn=t,pse(e.priority,function(){dse(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function T2(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=W4(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);I4=r,n.target.dispatchEvent(r),I4=null}else return t=sb(n),t!==null&&_8(t),e.blockedOn=n,!1;t.shift()}return!0}function Xj(e,t,n){T2(e)&&n.delete(t)}function gUe(){V4=!1,Yu!==null&&T2(Yu)&&(Yu=null),Xu!==null&&T2(Xu)&&(Xu=null),Ku!==null&&T2(Ku)&&(Ku=null),E1.forEach(Xj),_1.forEach(Xj)}function a0(e,t){e.blockedOn===t&&(e.blockedOn=null,V4||(V4=!0,to.unstable_scheduleCallback(to.unstable_NormalPriority,gUe)))}function $1(e){function t(i){return a0(i,e)}if(0<kx.length){a0(kx[0],e);for(var n=1;n<kx.length;n++){var r=kx[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Yu!==null&&a0(Yu,e),Xu!==null&&a0(Xu,e),Ku!==null&&a0(Ku,e),E1.forEach(t),_1.forEach(t),n=0;n<Su.length;n++)r=Su[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Su.length&&(n=Su[0],n.blockedOn===null);)gse(n),n.blockedOn===null&&Su.shift()}var _p=Zl.ReactCurrentBatchConfig,GS=!0;function mUe(e,t,n,r){var i=pt,o=_p.transition;_p.transition=null;try{pt=1,$8(e,t,n,r)}finally{pt=i,_p.transition=o}}function yUe(e,t,n,r){var i=pt,o=_p.transition;_p.transition=null;try{pt=4,$8(e,t,n,r)}finally{pt=i,_p.transition=o}}function $8(e,t,n,r){if(GS){var i=W4(e,t,n,r);if(i===null)n3(e,t,r,YS,n),Yj(e,r);else if(pUe(i,e,t,n,r))r.stopPropagation();else if(Yj(e,r),t&4&&-1<hUe.indexOf(e)){for(;i!==null;){var o=sb(i);if(o!==null&&fse(o),o=W4(e,t,n,r),o===null&&n3(e,t,r,YS,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else n3(e,t,r,null,n)}}var YS=null;function W4(e,t,n,r){if(YS=null,e=C8(r),e=Tf(e),e!==null)if(t=ih(e),t===null)e=null;else if(n=t.tag,n===13){if(e=rse(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return YS=e,null}function mse(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iUe()){case k8:return 1;case ase:return 4;case HS:case oUe:return 16;case lse:return 536870912;default:return 16}default:return 16}}var ju=null,A8=null,P2=null;function yse(){if(P2)return P2;var e,t=A8,n=t.length,r,i="value"in ju?ju.value:ju.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return P2=i.slice(e,1<r?1-r:void 0)}function F2(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ex(){return!0}function Kj(){return!1}function ao(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ex:Kj,this.isPropagationStopped=Kj,this}return qt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ex)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ex)},persist:function(){},isPersistent:Ex}),t}var $m={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},T8=ao($m),ob=qt({},$m,{view:0,detail:0}),vUe=ao(ob),G5,Y5,l0,a_=qt({},ob,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P8,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==l0&&(l0&&e.type==="mousemove"?(G5=e.screenX-l0.screenX,Y5=e.screenY-l0.screenY):Y5=G5=0,l0=e),G5)},movementY:function(e){return"movementY"in e?e.movementY:Y5}}),Qj=ao(a_),bUe=qt({},a_,{dataTransfer:0}),xUe=ao(bUe),wUe=qt({},ob,{relatedTarget:0}),X5=ao(wUe),SUe=qt({},$m,{animationName:0,elapsedTime:0,pseudoElement:0}),CUe=ao(SUe),kUe=qt({},$m,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),EUe=ao(kUe),_Ue=qt({},$m,{data:0}),Jj=ao(_Ue),$Ue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AUe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TUe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PUe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=TUe[e])?!!t[e]:!1}function P8(){return PUe}var FUe=qt({},ob,{key:function(e){if(e.key){var t=$Ue[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=F2(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?AUe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P8,charCode:function(e){return e.type==="keypress"?F2(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?F2(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),MUe=ao(FUe),RUe=qt({},a_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zj=ao(RUe),OUe=qt({},ob,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P8}),DUe=ao(OUe),NUe=qt({},$m,{propertyName:0,elapsedTime:0,pseudoElement:0}),LUe=ao(NUe),IUe=qt({},a_,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zUe=ao(IUe),BUe=[9,13,27,32],F8=Nl&&"CompositionEvent"in window,ky=null;Nl&&"documentMode"in document&&(ky=document.documentMode);var jUe=Nl&&"TextEvent"in window&&!ky,vse=Nl&&(!F8||ky&&8<ky&&11>=ky),eU=" ",tU=!1;function bse(e,t){switch(e){case"keyup":return BUe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xse(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qh=!1;function UUe(e,t){switch(e){case"compositionend":return xse(t);case"keypress":return t.which!==32?null:(tU=!0,eU);case"textInput":return e=t.data,e===eU&&tU?null:e;default:return null}}function VUe(e,t){if(qh)return e==="compositionend"||!F8&&bse(e,t)?(e=yse(),P2=A8=ju=null,qh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vse&&t.locale!=="ko"?null:t.data;default:return null}}var WUe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nU(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!WUe[e.type]:t==="textarea"}function wse(e,t,n,r){Joe(r),t=XS(t,"onChange"),0<t.length&&(n=new T8("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ey=null,A1=null;function HUe(e){Mse(e,0)}function l_(e){var t=Xh(e);if(Hoe(t))return e}function qUe(e,t){if(e==="change")return t}var Sse=!1;if(Nl){var K5;if(Nl){var Q5="oninput"in document;if(!Q5){var rU=document.createElement("div");rU.setAttribute("oninput","return;"),Q5=typeof rU.oninput=="function"}K5=Q5}else K5=!1;Sse=K5&&(!document.documentMode||9<document.documentMode)}function iU(){Ey&&(Ey.detachEvent("onpropertychange",Cse),A1=Ey=null)}function Cse(e){if(e.propertyName==="value"&&l_(A1)){var t=[];wse(t,A1,e,C8(e)),nse(HUe,t)}}function GUe(e,t,n){e==="focusin"?(iU(),Ey=t,A1=n,Ey.attachEvent("onpropertychange",Cse)):e==="focusout"&&iU()}function YUe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return l_(A1)}function XUe(e,t){if(e==="click")return l_(t)}function KUe(e,t){if(e==="input"||e==="change")return l_(t)}function QUe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rs=typeof Object.is=="function"?Object.is:QUe;function T1(e,t){if(Rs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_4.call(t,i)||!Rs(e[i],t[i]))return!1}return!0}function oU(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sU(e,t){var n=oU(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oU(n)}}function kse(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kse(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ese(){for(var e=window,t=US();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=US(e.document)}return t}function M8(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function JUe(e){var t=Ese(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kse(n.ownerDocument.documentElement,n)){if(r!==null&&M8(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=sU(n,o);var s=sU(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ZUe=Nl&&"documentMode"in document&&11>=document.documentMode,Gh=null,H4=null,_y=null,q4=!1;function aU(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;q4||Gh==null||Gh!==US(r)||(r=Gh,"selectionStart"in r&&M8(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_y&&T1(_y,r)||(_y=r,r=XS(H4,"onSelect"),0<r.length&&(t=new T8("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Gh)))}function _x(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yh={animationend:_x("Animation","AnimationEnd"),animationiteration:_x("Animation","AnimationIteration"),animationstart:_x("Animation","AnimationStart"),transitionend:_x("Transition","TransitionEnd")},J5={},_se={};Nl&&(_se=document.createElement("div").style,"AnimationEvent"in window||(delete Yh.animationend.animation,delete Yh.animationiteration.animation,delete Yh.animationstart.animation),"TransitionEvent"in window||delete Yh.transitionend.transition);function u_(e){if(J5[e])return J5[e];if(!Yh[e])return e;var t=Yh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _se)return J5[e]=t[n];return e}var $se=u_("animationend"),Ase=u_("animationiteration"),Tse=u_("animationstart"),Pse=u_("transitionend"),Fse=new Map,lU="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bc(e,t){Fse.set(e,t),rh(t,[e])}for(var Z5=0;Z5<lU.length;Z5++){var e3=lU[Z5],eVe=e3.toLowerCase(),tVe=e3[0].toUpperCase()+e3.slice(1);Bc(eVe,"on"+tVe)}Bc($se,"onAnimationEnd");Bc(Ase,"onAnimationIteration");Bc(Tse,"onAnimationStart");Bc("dblclick","onDoubleClick");Bc("focusin","onFocus");Bc("focusout","onBlur");Bc(Pse,"onTransitionEnd");Ng("onMouseEnter",["mouseout","mouseover"]);Ng("onMouseLeave",["mouseout","mouseover"]);Ng("onPointerEnter",["pointerout","pointerover"]);Ng("onPointerLeave",["pointerout","pointerover"]);rh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rh("onBeforeInput",["compositionend","keypress","textInput","paste"]);rh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var K0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nVe=new Set("cancel close invalid load scroll toggle".split(" ").concat(K0));function uU(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,eUe(r,t,void 0,e),e.currentTarget=null}function Mse(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;uU(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;uU(i,a,u),o=l}}}if(WS)throw e=j4,WS=!1,j4=null,e}function Tt(e,t){var n=t[Q4];n===void 0&&(n=t[Q4]=new Set);var r=e+"__bubble";n.has(r)||(Rse(t,e,2,!1),n.add(r))}function t3(e,t,n){var r=0;t&&(r|=4),Rse(n,e,r,t)}var $x="_reactListening"+Math.random().toString(36).slice(2);function P1(e){if(!e[$x]){e[$x]=!0,Boe.forEach(function(n){n!=="selectionchange"&&(nVe.has(n)||t3(n,!1,e),t3(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$x]||(t[$x]=!0,t3("selectionchange",!1,t))}}function Rse(e,t,n,r){switch(mse(t)){case 1:var i=mUe;break;case 4:i=yUe;break;default:i=$8}n=i.bind(null,t,n,e),i=void 0,!B4||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function n3(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Tf(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}nse(function(){var u=o,c=C8(n),f=[];e:{var d=Fse.get(e);if(d!==void 0){var h=T8,p=e;switch(e){case"keypress":if(F2(n)===0)break e;case"keydown":case"keyup":h=MUe;break;case"focusin":p="focus",h=X5;break;case"focusout":p="blur",h=X5;break;case"beforeblur":case"afterblur":h=X5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Qj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=xUe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=DUe;break;case $se:case Ase:case Tse:h=CUe;break;case Pse:h=LUe;break;case"scroll":h=vUe;break;case"wheel":h=zUe;break;case"copy":case"cut":case"paste":h=EUe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Zj}var g=(t&4)!==0,m=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=k1(v,y),x!=null&&g.push(F1(v,x,b)))),m)break;v=v.return}0<g.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==I4&&(p=n.relatedTarget||n.fromElement)&&(Tf(p)||p[Ll]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Tf(p):null,p!==null&&(m=ih(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(g=Qj,x="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=Zj,x="onPointerLeave",y="onPointerEnter",v="pointer"),m=h==null?d:Xh(h),b=p==null?d:Xh(p),d=new g(x,v+"leave",h,n,c),d.target=m,d.relatedTarget=b,x=null,Tf(c)===u&&(g=new g(y,v+"enter",p,n,c),g.target=b,g.relatedTarget=m,x=g),m=x,h&&p)t:{for(g=h,y=p,v=0,b=g;b;b=$h(b))v++;for(b=0,x=y;x;x=$h(x))b++;for(;0<v-b;)g=$h(g),v--;for(;0<b-v;)y=$h(y),b--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=$h(g),y=$h(y)}g=null}else g=null;h!==null&&cU(f,d,h,g,!1),p!==null&&m!==null&&cU(f,m,p,g,!0)}}e:{if(d=u?Xh(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=qUe;else if(nU(d))if(Sse)S=KUe;else{S=YUe;var C=GUe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=XUe);if(S&&(S=S(e,u))){wse(f,S,n,c);break e}C&&C(e,d,u),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&R4(d,"number",d.value)}switch(C=u?Xh(u):window,e){case"focusin":(nU(C)||C.contentEditable==="true")&&(Gh=C,H4=u,_y=null);break;case"focusout":_y=H4=Gh=null;break;case"mousedown":q4=!0;break;case"contextmenu":case"mouseup":case"dragend":q4=!1,aU(f,n,c);break;case"selectionchange":if(ZUe)break;case"keydown":case"keyup":aU(f,n,c)}var w;if(F8)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qh?bse(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(vse&&n.locale!=="ko"&&(qh||k!=="onCompositionStart"?k==="onCompositionEnd"&&qh&&(w=yse()):(ju=c,A8="value"in ju?ju.value:ju.textContent,qh=!0)),C=XS(u,k),0<C.length&&(k=new Jj(k,e,null,n,c),f.push({event:k,listeners:C}),w?k.data=w:(w=xse(n),w!==null&&(k.data=w)))),(w=jUe?UUe(e,n):VUe(e,n))&&(u=XS(u,"onBeforeInput"),0<u.length&&(c=new Jj("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=w))}Mse(f,t)})}function F1(e,t,n){return{instance:e,listener:t,currentTarget:n}}function XS(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=k1(e,n),o!=null&&r.unshift(F1(e,o,i)),o=k1(e,t),o!=null&&r.push(F1(e,o,i))),e=e.return}return r}function $h(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cU(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=k1(n,o),l!=null&&s.unshift(F1(n,l,a))):i||(l=k1(n,o),l!=null&&s.push(F1(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var rVe=/\r\n?/g,iVe=/\u0000|\uFFFD/g;function fU(e){return(typeof e=="string"?e:""+e).replace(rVe,`
`).replace(iVe,"")}function Ax(e,t,n){if(t=fU(t),fU(e)!==t&&n)throw Error(te(425))}function KS(){}var G4=null,Y4=null;function X4(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var K4=typeof setTimeout=="function"?setTimeout:void 0,oVe=typeof clearTimeout=="function"?clearTimeout:void 0,dU=typeof Promise=="function"?Promise:void 0,sVe=typeof queueMicrotask=="function"?queueMicrotask:typeof dU<"u"?function(e){return dU.resolve(null).then(e).catch(aVe)}:K4;function aVe(e){setTimeout(function(){throw e})}function r3(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),$1(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$1(t)}function Qu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hU(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Am=Math.random().toString(36).slice(2),ua="__reactFiber$"+Am,M1="__reactProps$"+Am,Ll="__reactContainer$"+Am,Q4="__reactEvents$"+Am,lVe="__reactListeners$"+Am,uVe="__reactHandles$"+Am;function Tf(e){var t=e[ua];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ll]||n[ua]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hU(e);e!==null;){if(n=e[ua])return n;e=hU(e)}return t}e=n,n=e.parentNode}return null}function sb(e){return e=e[ua]||e[Ll],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function c_(e){return e[M1]||null}var J4=[],Kh=-1;function jc(e){return{current:e}}function Rt(e){0>Kh||(e.current=J4[Kh],J4[Kh]=null,Kh--)}function Et(e,t){Kh++,J4[Kh]=e.current,e.current=t}var Sc={},_r=jc(Sc),gi=jc(!1),Ad=Sc;function Lg(e,t){var n=e.type.contextTypes;if(!n)return Sc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function mi(e){return e=e.childContextTypes,e!=null}function QS(){Rt(gi),Rt(_r)}function pU(e,t,n){if(_r.current!==Sc)throw Error(te(168));Et(_r,t),Et(gi,n)}function Ose(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(te(108,Gje(e)||"Unknown",i));return qt({},n,r)}function JS(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sc,Ad=_r.current,Et(_r,e),Et(gi,gi.current),!0}function gU(e,t,n){var r=e.stateNode;if(!r)throw Error(te(169));n?(e=Ose(e,t,Ad),r.__reactInternalMemoizedMergedChildContext=e,Rt(gi),Rt(_r),Et(_r,e)):Rt(gi),Et(gi,n)}var ol=null,f_=!1,i3=!1;function Dse(e){ol===null?ol=[e]:ol.push(e)}function cVe(e){f_=!0,Dse(e)}function Uc(){if(!i3&&ol!==null){i3=!0;var e=0,t=pt;try{var n=ol;for(pt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ol=null,f_=!1}catch(i){throw ol!==null&&(ol=ol.slice(e+1)),sse(k8,Uc),i}finally{pt=t,i3=!1}}return null}var Qh=[],Jh=0,ZS=null,eC=0,So=[],Co=0,Td=null,gl=1,ml="";function cf(e,t){Qh[Jh++]=eC,Qh[Jh++]=ZS,ZS=e,eC=t}function Nse(e,t,n){So[Co++]=gl,So[Co++]=ml,So[Co++]=Td,Td=e;var r=gl;e=ml;var i=32-ws(r)-1;r&=~(1<<i),n+=1;var o=32-ws(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,gl=1<<32-ws(t)+i|n<<i|r,ml=o+e}else gl=1<<o|n<<i|r,ml=e}function R8(e){e.return!==null&&(cf(e,1),Nse(e,1,0))}function O8(e){for(;e===ZS;)ZS=Qh[--Jh],Qh[Jh]=null,eC=Qh[--Jh],Qh[Jh]=null;for(;e===Td;)Td=So[--Co],So[Co]=null,ml=So[--Co],So[Co]=null,gl=So[--Co],So[Co]=null}var Yi=null,Ui=null,It=!1,as=null;function Lse(e,t){var n=To(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function mU(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yi=e,Ui=Qu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yi=e,Ui=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Td!==null?{id:gl,overflow:ml}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=To(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Yi=e,Ui=null,!0):!1;default:return!1}}function Z4(e){return(e.mode&1)!==0&&(e.flags&128)===0}function eP(e){if(It){var t=Ui;if(t){var n=t;if(!mU(e,t)){if(Z4(e))throw Error(te(418));t=Qu(n.nextSibling);var r=Yi;t&&mU(e,t)?Lse(r,n):(e.flags=e.flags&-4097|2,It=!1,Yi=e)}}else{if(Z4(e))throw Error(te(418));e.flags=e.flags&-4097|2,It=!1,Yi=e}}}function yU(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yi=e}function Tx(e){if(e!==Yi)return!1;if(!It)return yU(e),It=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!X4(e.type,e.memoizedProps)),t&&(t=Ui)){if(Z4(e))throw Ise(),Error(te(418));for(;t;)Lse(e,t),t=Qu(t.nextSibling)}if(yU(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ui=Qu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ui=null}}else Ui=Yi?Qu(e.stateNode.nextSibling):null;return!0}function Ise(){for(var e=Ui;e;)e=Qu(e.nextSibling)}function Ig(){Ui=Yi=null,It=!1}function D8(e){as===null?as=[e]:as.push(e)}var fVe=Zl.ReactCurrentBatchConfig;function u0(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,e))}return e}function Px(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vU(e){var t=e._init;return t(e._payload)}function zse(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=tc(y,v),y.index=0,y.sibling=null,y}function o(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,x){return v===null||v.tag!==6?(v=f3(b,y.mode,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function l(y,v,b,x){var S=b.type;return S===Hh?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===yu&&vU(S)===v.type)?(x=i(v,b.props),x.ref=u0(y,v,b),x.return=y,x):(x=I2(b.type,b.key,b.props,null,y.mode,x),x.ref=u0(y,v,b),x.return=y,x)}function u(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=d3(b,y.mode,x),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,S){return v===null||v.tag!==7?(v=Zf(b,y.mode,x,S),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=f3(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case bx:return b=I2(v.type,v.key,v.props,null,y.mode,b),b.ref=u0(y,null,v),b.return=y,b;case Wh:return v=d3(v,y.mode,b),v.return=y,v;case yu:var x=v._init;return f(y,x(v._payload),b)}if(Y0(v)||i0(v))return v=Zf(v,y.mode,b,null),v.return=y,v;Px(y,v)}return null}function d(y,v,b,x){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bx:return b.key===S?l(y,v,b,x):null;case Wh:return b.key===S?u(y,v,b,x):null;case yu:return S=b._init,d(y,v,S(b._payload),x)}if(Y0(b)||i0(b))return S!==null?null:c(y,v,b,x,null);Px(y,b)}return null}function h(y,v,b,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(v,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case bx:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,S);case Wh:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,S);case yu:var C=x._init;return h(y,v,b,C(x._payload),S)}if(Y0(x)||i0(x))return y=y.get(b)||null,c(v,y,x,S,null);Px(v,x)}return null}function p(y,v,b,x){for(var S=null,C=null,w=v,k=v=0,E=null;w!==null&&k<b.length;k++){w.index>k?(E=w,w=null):E=w.sibling;var A=d(y,w,b[k],x);if(A===null){w===null&&(w=E);break}e&&w&&A.alternate===null&&t(y,w),v=o(A,v,k),C===null?S=A:C.sibling=A,C=A,w=E}if(k===b.length)return n(y,w),It&&cf(y,k),S;if(w===null){for(;k<b.length;k++)w=f(y,b[k],x),w!==null&&(v=o(w,v,k),C===null?S=w:C.sibling=w,C=w);return It&&cf(y,k),S}for(w=r(y,w);k<b.length;k++)E=h(w,y,k,b[k],x),E!==null&&(e&&E.alternate!==null&&w.delete(E.key===null?k:E.key),v=o(E,v,k),C===null?S=E:C.sibling=E,C=E);return e&&w.forEach(function(P){return t(y,P)}),It&&cf(y,k),S}function g(y,v,b,x){var S=i0(b);if(typeof S!="function")throw Error(te(150));if(b=S.call(b),b==null)throw Error(te(151));for(var C=S=null,w=v,k=v=0,E=null,A=b.next();w!==null&&!A.done;k++,A=b.next()){w.index>k?(E=w,w=null):E=w.sibling;var P=d(y,w,A.value,x);if(P===null){w===null&&(w=E);break}e&&w&&P.alternate===null&&t(y,w),v=o(P,v,k),C===null?S=P:C.sibling=P,C=P,w=E}if(A.done)return n(y,w),It&&cf(y,k),S;if(w===null){for(;!A.done;k++,A=b.next())A=f(y,A.value,x),A!==null&&(v=o(A,v,k),C===null?S=A:C.sibling=A,C=A);return It&&cf(y,k),S}for(w=r(y,w);!A.done;k++,A=b.next())A=h(w,y,k,A.value,x),A!==null&&(e&&A.alternate!==null&&w.delete(A.key===null?k:A.key),v=o(A,v,k),C===null?S=A:C.sibling=A,C=A);return e&&w.forEach(function(L){return t(y,L)}),It&&cf(y,k),S}function m(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===Hh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case bx:e:{for(var S=b.key,C=v;C!==null;){if(C.key===S){if(S=b.type,S===Hh){if(C.tag===7){n(y,C.sibling),v=i(C,b.props.children),v.return=y,y=v;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===yu&&vU(S)===C.type){n(y,C.sibling),v=i(C,b.props),v.ref=u0(y,C,b),v.return=y,y=v;break e}n(y,C);break}else t(y,C);C=C.sibling}b.type===Hh?(v=Zf(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=I2(b.type,b.key,b.props,null,y.mode,x),x.ref=u0(y,v,b),x.return=y,y=x)}return s(y);case Wh:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=d3(b,y.mode,x),v.return=y,y=v}return s(y);case yu:return C=b._init,m(y,v,C(b._payload),x)}if(Y0(b))return p(y,v,b,x);if(i0(b))return g(y,v,b,x);Px(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=f3(b,y.mode,x),v.return=y,y=v),s(y)):n(y,v)}return m}var zg=zse(!0),Bse=zse(!1),tC=jc(null),nC=null,Zh=null,N8=null;function L8(){N8=Zh=nC=null}function I8(e){var t=tC.current;Rt(tC),e._currentValue=t}function tP(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $p(e,t){nC=e,N8=Zh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(di=!0),e.firstContext=null)}function jo(e){var t=e._currentValue;if(N8!==e)if(e={context:e,memoizedValue:t,next:null},Zh===null){if(nC===null)throw Error(te(308));Zh=e,nC.dependencies={lanes:0,firstContext:e}}else Zh=Zh.next=e;return t}var Pf=null;function z8(e){Pf===null?Pf=[e]:Pf.push(e)}function jse(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,z8(t)):(n.next=i.next,i.next=n),t.interleaved=n,Il(e,r)}function Il(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var vu=!1;function B8(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Use(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $l(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ju(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Xe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Il(e,n)}return i=r.interleaved,i===null?(t.next=t,z8(r)):(t.next=i.next,i.next=t),r.interleaved=t,Il(e,n)}function M2(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,E8(e,n)}}function bU(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function rC(e,t,n,r){var i=e.updateQueue;vu=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=qt({},f,d);break e;case 2:vu=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Fd|=s,e.lanes=s,e.memoizedState=f}}function xU(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(te(191,i));i.call(r)}}}var ab={},Ca=jc(ab),R1=jc(ab),O1=jc(ab);function Ff(e){if(e===ab)throw Error(te(174));return e}function j8(e,t){switch(Et(O1,t),Et(R1,e),Et(Ca,ab),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:D4(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=D4(t,e)}Rt(Ca),Et(Ca,t)}function Bg(){Rt(Ca),Rt(R1),Rt(O1)}function Vse(e){Ff(O1.current);var t=Ff(Ca.current),n=D4(t,e.type);t!==n&&(Et(R1,e),Et(Ca,n))}function U8(e){R1.current===e&&(Rt(Ca),Rt(R1))}var Ut=jc(0);function iC(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var o3=[];function V8(){for(var e=0;e<o3.length;e++)o3[e]._workInProgressVersionPrimary=null;o3.length=0}var R2=Zl.ReactCurrentDispatcher,s3=Zl.ReactCurrentBatchConfig,Pd=0,Ht=null,mn=null,Tn=null,oC=!1,$y=!1,D1=0,dVe=0;function ar(){throw Error(te(321))}function W8(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rs(e[n],t[n]))return!1;return!0}function H8(e,t,n,r,i,o){if(Pd=o,Ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R2.current=e===null||e.memoizedState===null?mVe:yVe,e=n(r,i),$y){o=0;do{if($y=!1,D1=0,25<=o)throw Error(te(301));o+=1,Tn=mn=null,t.updateQueue=null,R2.current=vVe,e=n(r,i)}while($y)}if(R2.current=sC,t=mn!==null&&mn.next!==null,Pd=0,Tn=mn=Ht=null,oC=!1,t)throw Error(te(300));return e}function q8(){var e=D1!==0;return D1=0,e}function Xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Ht.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function Uo(){if(mn===null){var e=Ht.alternate;e=e!==null?e.memoizedState:null}else e=mn.next;var t=Tn===null?Ht.memoizedState:Tn.next;if(t!==null)Tn=t,mn=e;else{if(e===null)throw Error(te(310));mn=e,e={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},Tn===null?Ht.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function N1(e,t){return typeof t=="function"?t(e):t}function a3(e){var t=Uo(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=mn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Pd&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,Ht.lanes|=c,Fd|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,Rs(r,t.memoizedState)||(di=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Ht.lanes|=o,Fd|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function l3(e){var t=Uo(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Rs(o,t.memoizedState)||(di=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Wse(){}function Hse(e,t){var n=Ht,r=Uo(),i=t(),o=!Rs(r.memoizedState,i);if(o&&(r.memoizedState=i,di=!0),r=r.queue,G8(Yse.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,L1(9,Gse.bind(null,n,r,i,t),void 0,null),Nn===null)throw Error(te(349));Pd&30||qse(n,t,i)}return i}function qse(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Gse(e,t,n,r){t.value=n,t.getSnapshot=r,Xse(t)&&Kse(e)}function Yse(e,t,n){return n(function(){Xse(t)&&Kse(e)})}function Xse(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rs(e,n)}catch{return!0}}function Kse(e){var t=Il(e,1);t!==null&&Ss(t,e,1,-1)}function wU(e){var t=Xs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:N1,lastRenderedState:e},t.queue=e,e=e.dispatch=gVe.bind(null,Ht,e),[t.memoizedState,e]}function L1(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ht.updateQueue,t===null?(t={lastEffect:null,stores:null},Ht.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Qse(){return Uo().memoizedState}function O2(e,t,n,r){var i=Xs();Ht.flags|=e,i.memoizedState=L1(1|t,n,void 0,r===void 0?null:r)}function d_(e,t,n,r){var i=Uo();r=r===void 0?null:r;var o=void 0;if(mn!==null){var s=mn.memoizedState;if(o=s.destroy,r!==null&&W8(r,s.deps)){i.memoizedState=L1(t,n,o,r);return}}Ht.flags|=e,i.memoizedState=L1(1|t,n,o,r)}function SU(e,t){return O2(8390656,8,e,t)}function G8(e,t){return d_(2048,8,e,t)}function Jse(e,t){return d_(4,2,e,t)}function Zse(e,t){return d_(4,4,e,t)}function eae(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tae(e,t,n){return n=n!=null?n.concat([e]):null,d_(4,4,eae.bind(null,t,e),n)}function Y8(){}function nae(e,t){var n=Uo();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&W8(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rae(e,t){var n=Uo();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&W8(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function iae(e,t,n){return Pd&21?(Rs(n,t)||(n=use(),Ht.lanes|=n,Fd|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,di=!0),e.memoizedState=n)}function hVe(e,t){var n=pt;pt=n!==0&&4>n?n:4,e(!0);var r=s3.transition;s3.transition={};try{e(!1),t()}finally{pt=n,s3.transition=r}}function oae(){return Uo().memoizedState}function pVe(e,t,n){var r=ec(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sae(e))aae(t,n);else if(n=jse(e,t,n,r),n!==null){var i=Yr();Ss(n,e,r,i),lae(n,t,r)}}function gVe(e,t,n){var r=ec(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sae(e))aae(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Rs(a,s)){var l=t.interleaved;l===null?(i.next=i,z8(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=jse(e,t,i,r),n!==null&&(i=Yr(),Ss(n,e,r,i),lae(n,t,r))}}function sae(e){var t=e.alternate;return e===Ht||t!==null&&t===Ht}function aae(e,t){$y=oC=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lae(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,E8(e,n)}}var sC={readContext:jo,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},mVe={readContext:jo,useCallback:function(e,t){return Xs().memoizedState=[e,t===void 0?null:t],e},useContext:jo,useEffect:SU,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,O2(4194308,4,eae.bind(null,t,e),n)},useLayoutEffect:function(e,t){return O2(4194308,4,e,t)},useInsertionEffect:function(e,t){return O2(4,2,e,t)},useMemo:function(e,t){var n=Xs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=pVe.bind(null,Ht,e),[r.memoizedState,e]},useRef:function(e){var t=Xs();return e={current:e},t.memoizedState=e},useState:wU,useDebugValue:Y8,useDeferredValue:function(e){return Xs().memoizedState=e},useTransition:function(){var e=wU(!1),t=e[0];return e=hVe.bind(null,e[1]),Xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ht,i=Xs();if(It){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),Nn===null)throw Error(te(349));Pd&30||qse(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,SU(Yse.bind(null,r,o,e),[e]),r.flags|=2048,L1(9,Gse.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Xs(),t=Nn.identifierPrefix;if(It){var n=ml,r=gl;n=(r&~(1<<32-ws(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=D1++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=dVe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yVe={readContext:jo,useCallback:nae,useContext:jo,useEffect:G8,useImperativeHandle:tae,useInsertionEffect:Jse,useLayoutEffect:Zse,useMemo:rae,useReducer:a3,useRef:Qse,useState:function(){return a3(N1)},useDebugValue:Y8,useDeferredValue:function(e){var t=Uo();return iae(t,mn.memoizedState,e)},useTransition:function(){var e=a3(N1)[0],t=Uo().memoizedState;return[e,t]},useMutableSource:Wse,useSyncExternalStore:Hse,useId:oae,unstable_isNewReconciler:!1},vVe={readContext:jo,useCallback:nae,useContext:jo,useEffect:G8,useImperativeHandle:tae,useInsertionEffect:Jse,useLayoutEffect:Zse,useMemo:rae,useReducer:l3,useRef:Qse,useState:function(){return l3(N1)},useDebugValue:Y8,useDeferredValue:function(e){var t=Uo();return mn===null?t.memoizedState=e:iae(t,mn.memoizedState,e)},useTransition:function(){var e=l3(N1)[0],t=Uo().memoizedState;return[e,t]},useMutableSource:Wse,useSyncExternalStore:Hse,useId:oae,unstable_isNewReconciler:!1};function es(e,t){if(e&&e.defaultProps){t=qt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nP(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:qt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var h_={isMounted:function(e){return(e=e._reactInternals)?ih(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Yr(),i=ec(e),o=$l(r,i);o.payload=t,n!=null&&(o.callback=n),t=Ju(e,o,i),t!==null&&(Ss(t,e,i,r),M2(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Yr(),i=ec(e),o=$l(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ju(e,o,i),t!==null&&(Ss(t,e,i,r),M2(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yr(),r=ec(e),i=$l(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ju(e,i,r),t!==null&&(Ss(t,e,r,n),M2(t,e,r))}};function CU(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!T1(n,r)||!T1(i,o):!0}function uae(e,t,n){var r=!1,i=Sc,o=t.contextType;return typeof o=="object"&&o!==null?o=jo(o):(i=mi(t)?Ad:_r.current,r=t.contextTypes,o=(r=r!=null)?Lg(e,i):Sc),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=h_,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function kU(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&h_.enqueueReplaceState(t,t.state,null)}function rP(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},B8(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=jo(o):(o=mi(t)?Ad:_r.current,i.context=Lg(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(nP(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&h_.enqueueReplaceState(i,i.state,null),rC(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function jg(e,t){try{var n="",r=t;do n+=qje(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function u3(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function iP(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bVe=typeof WeakMap=="function"?WeakMap:Map;function cae(e,t,n){n=$l(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){lC||(lC=!0,pP=r),iP(e,t)},n}function fae(e,t,n){n=$l(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){iP(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){iP(e,t),typeof r!="function"&&(Zu===null?Zu=new Set([this]):Zu.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function EU(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bVe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=RVe.bind(null,e,t,n),t.then(e,e))}function _U(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $U(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$l(-1,1),t.tag=2,Ju(n,t,1))),n.lanes|=1),e)}var xVe=Zl.ReactCurrentOwner,di=!1;function Nr(e,t,n,r){t.child=e===null?Bse(t,null,n,r):zg(t,e.child,n,r)}function AU(e,t,n,r,i){n=n.render;var o=t.ref;return $p(t,i),r=H8(e,t,n,r,o,i),n=q8(),e!==null&&!di?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zl(e,t,i)):(It&&n&&R8(t),t.flags|=1,Nr(e,t,r,i),t.child)}function TU(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!nN(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,dae(e,t,o,r,i)):(e=I2(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:T1,n(s,r)&&e.ref===t.ref)return zl(e,t,i)}return t.flags|=1,e=tc(o,r),e.ref=t.ref,e.return=t,t.child=e}function dae(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(T1(o,r)&&e.ref===t.ref)if(di=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(di=!0);else return t.lanes=e.lanes,zl(e,t,i)}return oP(e,t,n,r,i)}function hae(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(tp,Ri),Ri|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Et(tp,Ri),Ri|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Et(tp,Ri),Ri|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Et(tp,Ri),Ri|=r;return Nr(e,t,i,n),t.child}function pae(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function oP(e,t,n,r,i){var o=mi(n)?Ad:_r.current;return o=Lg(t,o),$p(t,i),n=H8(e,t,n,r,o,i),r=q8(),e!==null&&!di?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zl(e,t,i)):(It&&r&&R8(t),t.flags|=1,Nr(e,t,n,i),t.child)}function PU(e,t,n,r,i){if(mi(n)){var o=!0;JS(t)}else o=!1;if($p(t,i),t.stateNode===null)D2(e,t),uae(t,n,r),rP(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=jo(u):(u=mi(n)?Ad:_r.current,u=Lg(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&kU(t,s,r,u),vu=!1;var d=t.memoizedState;s.state=d,rC(t,r,s,i),l=t.memoizedState,a!==r||d!==l||gi.current||vu?(typeof c=="function"&&(nP(t,n,c,r),l=t.memoizedState),(a=vu||CU(t,n,a,r,d,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Use(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:es(t.type,a),s.props=u,f=t.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=jo(l):(l=mi(n)?Ad:_r.current,l=Lg(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==l)&&kU(t,s,r,l),vu=!1,d=t.memoizedState,s.state=d,rC(t,r,s,i);var p=t.memoizedState;a!==f||d!==p||gi.current||vu?(typeof h=="function"&&(nP(t,n,h,r),p=t.memoizedState),(u=vu||CU(t,n,u,r,d,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return sP(e,t,n,r,o,i)}function sP(e,t,n,r,i,o){pae(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&gU(t,n,!1),zl(e,t,o);r=t.stateNode,xVe.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=zg(t,e.child,null,o),t.child=zg(t,null,a,o)):Nr(e,t,a,o),t.memoizedState=r.state,i&&gU(t,n,!0),t.child}function gae(e){var t=e.stateNode;t.pendingContext?pU(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pU(e,t.context,!1),j8(e,t.containerInfo)}function FU(e,t,n,r,i){return Ig(),D8(i),t.flags|=256,Nr(e,t,n,r),t.child}var aP={dehydrated:null,treeContext:null,retryLane:0};function lP(e){return{baseLanes:e,cachePool:null,transitions:null}}function mae(e,t,n){var r=t.pendingProps,i=Ut.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Et(Ut,i&1),e===null)return eP(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=m_(s,r,0,null),e=Zf(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=lP(n),t.memoizedState=aP,e):X8(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wVe(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=tc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=tc(a,o):(o=Zf(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?lP(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=aP,r}return o=e.child,e=o.sibling,r=tc(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function X8(e,t){return t=m_({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fx(e,t,n,r){return r!==null&&D8(r),zg(t,e.child,null,n),e=X8(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wVe(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=u3(Error(te(422))),Fx(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=m_({mode:"visible",children:r.children},i,0,null),o=Zf(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&zg(t,e.child,null,s),t.child.memoizedState=lP(s),t.memoizedState=aP,o);if(!(t.mode&1))return Fx(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(te(419)),r=u3(o,r,void 0),Fx(e,t,s,r)}if(a=(s&e.childLanes)!==0,di||a){if(r=Nn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Il(e,i),Ss(r,e,i,-1))}return tN(),r=u3(Error(te(421))),Fx(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=OVe.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ui=Qu(i.nextSibling),Yi=t,It=!0,as=null,e!==null&&(So[Co++]=gl,So[Co++]=ml,So[Co++]=Td,gl=e.id,ml=e.overflow,Td=t),t=X8(t,r.children),t.flags|=4096,t)}function MU(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),tP(e.return,t,n)}function c3(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function yae(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Nr(e,t,r.children,n),r=Ut.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&MU(e,n,t);else if(e.tag===19)MU(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Et(Ut,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&iC(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),c3(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&iC(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}c3(t,!0,n,null,o);break;case"together":c3(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function D2(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fd|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=tc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=tc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function SVe(e,t,n){switch(t.tag){case 3:gae(t),Ig();break;case 5:Vse(t);break;case 1:mi(t.type)&&JS(t);break;case 4:j8(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Et(tC,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Et(Ut,Ut.current&1),t.flags|=128,null):n&t.child.childLanes?mae(e,t,n):(Et(Ut,Ut.current&1),e=zl(e,t,n),e!==null?e.sibling:null);Et(Ut,Ut.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return yae(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et(Ut,Ut.current),r)break;return null;case 22:case 23:return t.lanes=0,hae(e,t,n)}return zl(e,t,n)}var vae,uP,bae,xae;vae=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uP=function(){};bae=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ff(Ca.current);var o=null;switch(n){case"input":i=F4(e,i),r=F4(e,r),o=[];break;case"select":i=qt({},i,{value:void 0}),r=qt({},r,{value:void 0}),o=[];break;case"textarea":i=O4(e,i),r=O4(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=KS)}N4(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(S1.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(S1.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Tt("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};xae=function(e,t,n,r){n!==r&&(t.flags|=4)};function c0(e,t){if(!It)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function CVe(e,t,n){var r=t.pendingProps;switch(O8(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(t),null;case 1:return mi(t.type)&&QS(),lr(t),null;case 3:return r=t.stateNode,Bg(),Rt(gi),Rt(_r),V8(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Tx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,as!==null&&(yP(as),as=null))),uP(e,t),lr(t),null;case 5:U8(t);var i=Ff(O1.current);if(n=t.type,e!==null&&t.stateNode!=null)bae(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(te(166));return lr(t),null}if(e=Ff(Ca.current),Tx(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ua]=t,r[M1]=o,e=(t.mode&1)!==0,n){case"dialog":Tt("cancel",r),Tt("close",r);break;case"iframe":case"object":case"embed":Tt("load",r);break;case"video":case"audio":for(i=0;i<K0.length;i++)Tt(K0[i],r);break;case"source":Tt("error",r);break;case"img":case"image":case"link":Tt("error",r),Tt("load",r);break;case"details":Tt("toggle",r);break;case"input":jj(r,o),Tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Tt("invalid",r);break;case"textarea":Vj(r,o),Tt("invalid",r)}N4(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Ax(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Ax(r.textContent,a,e),i=["children",""+a]):S1.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Tt("scroll",r)}switch(n){case"input":xx(r),Uj(r,o,!0);break;case"textarea":xx(r),Wj(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=KS)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yoe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ua]=t,e[M1]=r,vae(e,t,!1,!1),t.stateNode=e;e:{switch(s=L4(n,r),n){case"dialog":Tt("cancel",e),Tt("close",e),i=r;break;case"iframe":case"object":case"embed":Tt("load",e),i=r;break;case"video":case"audio":for(i=0;i<K0.length;i++)Tt(K0[i],e);i=r;break;case"source":Tt("error",e),i=r;break;case"img":case"image":case"link":Tt("error",e),Tt("load",e),i=r;break;case"details":Tt("toggle",e),i=r;break;case"input":jj(e,r),i=F4(e,r),Tt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=qt({},r,{value:void 0}),Tt("invalid",e);break;case"textarea":Vj(e,r),i=O4(e,r),Tt("invalid",e);break;default:i=r}N4(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?Qoe(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Xoe(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&C1(e,l):typeof l=="number"&&C1(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(S1.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Tt("scroll",e):l!=null&&b8(e,o,l,s))}switch(n){case"input":xx(e),Uj(e,r,!1);break;case"textarea":xx(e),Wj(e);break;case"option":r.value!=null&&e.setAttribute("value",""+wc(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Cp(e,!!r.multiple,o,!1):r.defaultValue!=null&&Cp(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=KS)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lr(t),null;case 6:if(e&&t.stateNode!=null)xae(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(te(166));if(n=Ff(O1.current),Ff(Ca.current),Tx(t)){if(r=t.stateNode,n=t.memoizedProps,r[ua]=t,(o=r.nodeValue!==n)&&(e=Yi,e!==null))switch(e.tag){case 3:Ax(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ax(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ua]=t,t.stateNode=r}return lr(t),null;case 13:if(Rt(Ut),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(It&&Ui!==null&&t.mode&1&&!(t.flags&128))Ise(),Ig(),t.flags|=98560,o=!1;else if(o=Tx(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(te(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(te(317));o[ua]=t}else Ig(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lr(t),o=!1}else as!==null&&(yP(as),as=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ut.current&1?wn===0&&(wn=3):tN())),t.updateQueue!==null&&(t.flags|=4),lr(t),null);case 4:return Bg(),uP(e,t),e===null&&P1(t.stateNode.containerInfo),lr(t),null;case 10:return I8(t.type._context),lr(t),null;case 17:return mi(t.type)&&QS(),lr(t),null;case 19:if(Rt(Ut),o=t.memoizedState,o===null)return lr(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)c0(o,!1);else{if(wn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=iC(e),s!==null){for(t.flags|=128,c0(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Et(Ut,Ut.current&1|2),t.child}e=e.sibling}o.tail!==null&&nn()>Ug&&(t.flags|=128,r=!0,c0(o,!1),t.lanes=4194304)}else{if(!r)if(e=iC(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),c0(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!It)return lr(t),null}else 2*nn()-o.renderingStartTime>Ug&&n!==1073741824&&(t.flags|=128,r=!0,c0(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=nn(),t.sibling=null,n=Ut.current,Et(Ut,r?n&1|2:n&1),t):(lr(t),null);case 22:case 23:return eN(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ri&1073741824&&(lr(t),t.subtreeFlags&6&&(t.flags|=8192)):lr(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function kVe(e,t){switch(O8(t),t.tag){case 1:return mi(t.type)&&QS(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bg(),Rt(gi),Rt(_r),V8(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return U8(t),null;case 13:if(Rt(Ut),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));Ig()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(Ut),null;case 4:return Bg(),null;case 10:return I8(t.type._context),null;case 22:case 23:return eN(),null;case 24:return null;default:return null}}var Mx=!1,mr=!1,EVe=typeof WeakSet=="function"?WeakSet:Set,de=null;function ep(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qt(e,t,r)}else n.current=null}function cP(e,t,n){try{n()}catch(r){Qt(e,t,r)}}var RU=!1;function _Ve(e,t){if(G4=GS,e=Ese(),M8(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Y4={focusedElem:e,selectionRange:n},GS=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:es(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(x){Qt(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return p=RU,RU=!1,p}function Ay(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&cP(t,n,o)}i=i.next}while(i!==r)}}function p_(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fP(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function wae(e){var t=e.alternate;t!==null&&(e.alternate=null,wae(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ua],delete t[M1],delete t[Q4],delete t[lVe],delete t[uVe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sae(e){return e.tag===5||e.tag===3||e.tag===4}function OU(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sae(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dP(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=KS));else if(r!==4&&(e=e.child,e!==null))for(dP(e,t,n),e=e.sibling;e!==null;)dP(e,t,n),e=e.sibling}function hP(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hP(e,t,n),e=e.sibling;e!==null;)hP(e,t,n),e=e.sibling}var Un=null,is=!1;function ru(e,t,n){for(n=n.child;n!==null;)Cae(e,t,n),n=n.sibling}function Cae(e,t,n){if(Sa&&typeof Sa.onCommitFiberUnmount=="function")try{Sa.onCommitFiberUnmount(s_,n)}catch{}switch(n.tag){case 5:mr||ep(n,t);case 6:var r=Un,i=is;Un=null,ru(e,t,n),Un=r,is=i,Un!==null&&(is?(e=Un,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Un.removeChild(n.stateNode));break;case 18:Un!==null&&(is?(e=Un,n=n.stateNode,e.nodeType===8?r3(e.parentNode,n):e.nodeType===1&&r3(e,n),$1(e)):r3(Un,n.stateNode));break;case 4:r=Un,i=is,Un=n.stateNode.containerInfo,is=!0,ru(e,t,n),Un=r,is=i;break;case 0:case 11:case 14:case 15:if(!mr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&cP(n,t,s),i=i.next}while(i!==r)}ru(e,t,n);break;case 1:if(!mr&&(ep(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qt(n,t,a)}ru(e,t,n);break;case 21:ru(e,t,n);break;case 22:n.mode&1?(mr=(r=mr)||n.memoizedState!==null,ru(e,t,n),mr=r):ru(e,t,n);break;default:ru(e,t,n)}}function DU(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new EVe),t.forEach(function(r){var i=DVe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xo(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Un=a.stateNode,is=!1;break e;case 3:Un=a.stateNode.containerInfo,is=!0;break e;case 4:Un=a.stateNode.containerInfo,is=!0;break e}a=a.return}if(Un===null)throw Error(te(160));Cae(o,s,i),Un=null,is=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Qt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kae(t,e),t=t.sibling}function kae(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xo(t,e),Ws(e),r&4){try{Ay(3,e,e.return),p_(3,e)}catch(g){Qt(e,e.return,g)}try{Ay(5,e,e.return)}catch(g){Qt(e,e.return,g)}}break;case 1:Xo(t,e),Ws(e),r&512&&n!==null&&ep(n,n.return);break;case 5:if(Xo(t,e),Ws(e),r&512&&n!==null&&ep(n,n.return),e.flags&32){var i=e.stateNode;try{C1(i,"")}catch(g){Qt(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&qoe(i,o),L4(a,s);var u=L4(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?Qoe(i,f):c==="dangerouslySetInnerHTML"?Xoe(i,f):c==="children"?C1(i,f):b8(i,c,f,u)}switch(a){case"input":M4(i,o);break;case"textarea":Goe(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Cp(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?Cp(i,!!o.multiple,o.defaultValue,!0):Cp(i,!!o.multiple,o.multiple?[]:"",!1))}i[M1]=o}catch(g){Qt(e,e.return,g)}}break;case 6:if(Xo(t,e),Ws(e),r&4){if(e.stateNode===null)throw Error(te(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Qt(e,e.return,g)}}break;case 3:if(Xo(t,e),Ws(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$1(t.containerInfo)}catch(g){Qt(e,e.return,g)}break;case 4:Xo(t,e),Ws(e);break;case 13:Xo(t,e),Ws(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(J8=nn())),r&4&&DU(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(mr=(u=mr)||c,Xo(t,e),mr=u):Xo(t,e),Ws(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(de=e,c=e.child;c!==null;){for(f=de=c;de!==null;){switch(d=de,h=d.child,d.tag){case 0:case 11:case 14:case 15:Ay(4,d,d.return);break;case 1:ep(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Qt(r,n,g)}}break;case 5:ep(d,d.return);break;case 22:if(d.memoizedState!==null){LU(f);continue}}h!==null?(h.return=d,de=h):LU(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Koe("display",s))}catch(g){Qt(e,e.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Qt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Xo(t,e),Ws(e),r&4&&DU(e);break;case 21:break;default:Xo(t,e),Ws(e)}}function Ws(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Sae(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(C1(i,""),r.flags&=-33);var o=OU(e);hP(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=OU(e);dP(e,a,s);break;default:throw Error(te(161))}}catch(l){Qt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $Ve(e,t,n){de=e,Eae(e)}function Eae(e,t,n){for(var r=(e.mode&1)!==0;de!==null;){var i=de,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Mx;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||mr;a=Mx;var u=mr;if(Mx=s,(mr=l)&&!u)for(de=i;de!==null;)s=de,l=s.child,s.tag===22&&s.memoizedState!==null?IU(i):l!==null?(l.return=s,de=l):IU(i);for(;o!==null;)de=o,Eae(o),o=o.sibling;de=i,Mx=a,mr=u}NU(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,de=o):NU(e)}}function NU(e){for(;de!==null;){var t=de;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mr||p_(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!mr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:es(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&xU(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xU(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&$1(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}mr||t.flags&512&&fP(t)}catch(d){Qt(t,t.return,d)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function LU(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function IU(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{p_(4,t)}catch(l){Qt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Qt(t,i,l)}}var o=t.return;try{fP(t)}catch(l){Qt(t,o,l)}break;case 5:var s=t.return;try{fP(t)}catch(l){Qt(t,s,l)}}}catch(l){Qt(t,t.return,l)}if(t===e){de=null;break}var a=t.sibling;if(a!==null){a.return=t.return,de=a;break}de=t.return}}var AVe=Math.ceil,aC=Zl.ReactCurrentDispatcher,K8=Zl.ReactCurrentOwner,Ro=Zl.ReactCurrentBatchConfig,Xe=0,Nn=null,dn=null,er=0,Ri=0,tp=jc(0),wn=0,I1=null,Fd=0,g_=0,Q8=0,Ty=null,li=null,J8=0,Ug=1/0,nl=null,lC=!1,pP=null,Zu=null,Rx=!1,Uu=null,uC=0,Py=0,gP=null,N2=-1,L2=0;function Yr(){return Xe&6?nn():N2!==-1?N2:N2=nn()}function ec(e){return e.mode&1?Xe&2&&er!==0?er&-er:fVe.transition!==null?(L2===0&&(L2=use()),L2):(e=pt,e!==0||(e=window.event,e=e===void 0?16:mse(e.type)),e):1}function Ss(e,t,n,r){if(50<Py)throw Py=0,gP=null,Error(te(185));ib(e,n,r),(!(Xe&2)||e!==Nn)&&(e===Nn&&(!(Xe&2)&&(g_|=n),wn===4&&Cu(e,er)),yi(e,r),n===1&&Xe===0&&!(t.mode&1)&&(Ug=nn()+500,f_&&Uc()))}function yi(e,t){var n=e.callbackNode;fUe(e,t);var r=qS(e,e===Nn?er:0);if(r===0)n!==null&&Gj(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Gj(n),t===1)e.tag===0?cVe(zU.bind(null,e)):Dse(zU.bind(null,e)),sVe(function(){!(Xe&6)&&Uc()}),n=null;else{switch(cse(r)){case 1:n=k8;break;case 4:n=ase;break;case 16:n=HS;break;case 536870912:n=lse;break;default:n=HS}n=Rae(n,_ae.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _ae(e,t){if(N2=-1,L2=0,Xe&6)throw Error(te(327));var n=e.callbackNode;if(Ap()&&e.callbackNode!==n)return null;var r=qS(e,e===Nn?er:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=cC(e,r);else{t=r;var i=Xe;Xe|=2;var o=Aae();(Nn!==e||er!==t)&&(nl=null,Ug=nn()+500,Jf(e,t));do try{FVe();break}catch(a){$ae(e,a)}while(!0);L8(),aC.current=o,Xe=i,dn!==null?t=0:(Nn=null,er=0,t=wn)}if(t!==0){if(t===2&&(i=U4(e),i!==0&&(r=i,t=mP(e,i))),t===1)throw n=I1,Jf(e,0),Cu(e,r),yi(e,nn()),n;if(t===6)Cu(e,r);else{if(i=e.current.alternate,!(r&30)&&!TVe(i)&&(t=cC(e,r),t===2&&(o=U4(e),o!==0&&(r=o,t=mP(e,o))),t===1))throw n=I1,Jf(e,0),Cu(e,r),yi(e,nn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(te(345));case 2:ff(e,li,nl);break;case 3:if(Cu(e,r),(r&130023424)===r&&(t=J8+500-nn(),10<t)){if(qS(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Yr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=K4(ff.bind(null,e,li,nl),t);break}ff(e,li,nl);break;case 4:if(Cu(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ws(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=nn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AVe(r/1960))-r,10<r){e.timeoutHandle=K4(ff.bind(null,e,li,nl),r);break}ff(e,li,nl);break;case 5:ff(e,li,nl);break;default:throw Error(te(329))}}}return yi(e,nn()),e.callbackNode===n?_ae.bind(null,e):null}function mP(e,t){var n=Ty;return e.current.memoizedState.isDehydrated&&(Jf(e,t).flags|=256),e=cC(e,t),e!==2&&(t=li,li=n,t!==null&&yP(t)),e}function yP(e){li===null?li=e:li.push.apply(li,e)}function TVe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Rs(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cu(e,t){for(t&=~Q8,t&=~g_,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ws(t),r=1<<n;e[n]=-1,t&=~r}}function zU(e){if(Xe&6)throw Error(te(327));Ap();var t=qS(e,0);if(!(t&1))return yi(e,nn()),null;var n=cC(e,t);if(e.tag!==0&&n===2){var r=U4(e);r!==0&&(t=r,n=mP(e,r))}if(n===1)throw n=I1,Jf(e,0),Cu(e,t),yi(e,nn()),n;if(n===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ff(e,li,nl),yi(e,nn()),null}function Z8(e,t){var n=Xe;Xe|=1;try{return e(t)}finally{Xe=n,Xe===0&&(Ug=nn()+500,f_&&Uc())}}function Md(e){Uu!==null&&Uu.tag===0&&!(Xe&6)&&Ap();var t=Xe;Xe|=1;var n=Ro.transition,r=pt;try{if(Ro.transition=null,pt=1,e)return e()}finally{pt=r,Ro.transition=n,Xe=t,!(Xe&6)&&Uc()}}function eN(){Ri=tp.current,Rt(tp)}function Jf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,oVe(n)),dn!==null)for(n=dn.return;n!==null;){var r=n;switch(O8(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&QS();break;case 3:Bg(),Rt(gi),Rt(_r),V8();break;case 5:U8(r);break;case 4:Bg();break;case 13:Rt(Ut);break;case 19:Rt(Ut);break;case 10:I8(r.type._context);break;case 22:case 23:eN()}n=n.return}if(Nn=e,dn=e=tc(e.current,null),er=Ri=t,wn=0,I1=null,Q8=g_=Fd=0,li=Ty=null,Pf!==null){for(t=0;t<Pf.length;t++)if(n=Pf[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Pf=null}return e}function $ae(e,t){do{var n=dn;try{if(L8(),R2.current=sC,oC){for(var r=Ht.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oC=!1}if(Pd=0,Tn=mn=Ht=null,$y=!1,D1=0,K8.current=null,n===null||n.return===null){wn=1,I1=t,dn=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=er,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=_U(s);if(h!==null){h.flags&=-257,$U(h,s,a,o,t),h.mode&1&&EU(o,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}else{if(!(t&1)){EU(o,u,t),tN();break e}l=Error(te(426))}}else if(It&&a.mode&1){var m=_U(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),$U(m,s,a,o,t),D8(jg(l,a));break e}}o=l=jg(l,a),wn!==4&&(wn=2),Ty===null?Ty=[o]:Ty.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=cae(o,l,t);bU(o,y);break e;case 1:a=l;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zu===null||!Zu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=fae(o,a,t);bU(o,x);break e}}o=o.return}while(o!==null)}Pae(n)}catch(S){t=S,dn===n&&n!==null&&(dn=n=n.return);continue}break}while(!0)}function Aae(){var e=aC.current;return aC.current=sC,e===null?sC:e}function tN(){(wn===0||wn===3||wn===2)&&(wn=4),Nn===null||!(Fd&268435455)&&!(g_&268435455)||Cu(Nn,er)}function cC(e,t){var n=Xe;Xe|=2;var r=Aae();(Nn!==e||er!==t)&&(nl=null,Jf(e,t));do try{PVe();break}catch(i){$ae(e,i)}while(!0);if(L8(),Xe=n,aC.current=r,dn!==null)throw Error(te(261));return Nn=null,er=0,wn}function PVe(){for(;dn!==null;)Tae(dn)}function FVe(){for(;dn!==null&&!nUe();)Tae(dn)}function Tae(e){var t=Mae(e.alternate,e,Ri);e.memoizedProps=e.pendingProps,t===null?Pae(e):dn=t,K8.current=null}function Pae(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=kVe(n,t),n!==null){n.flags&=32767,dn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wn=6,dn=null;return}}else if(n=CVe(n,t,Ri),n!==null){dn=n;return}if(t=t.sibling,t!==null){dn=t;return}dn=t=e}while(t!==null);wn===0&&(wn=5)}function ff(e,t,n){var r=pt,i=Ro.transition;try{Ro.transition=null,pt=1,MVe(e,t,n,r)}finally{Ro.transition=i,pt=r}return null}function MVe(e,t,n,r){do Ap();while(Uu!==null);if(Xe&6)throw Error(te(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(dUe(e,o),e===Nn&&(dn=Nn=null,er=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rx||(Rx=!0,Rae(HS,function(){return Ap(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ro.transition,Ro.transition=null;var s=pt;pt=1;var a=Xe;Xe|=4,K8.current=null,_Ve(e,n),kae(n,e),JUe(Y4),GS=!!G4,Y4=G4=null,e.current=n,$Ve(n),rUe(),Xe=a,pt=s,Ro.transition=o}else e.current=n;if(Rx&&(Rx=!1,Uu=e,uC=i),o=e.pendingLanes,o===0&&(Zu=null),sUe(n.stateNode),yi(e,nn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(lC)throw lC=!1,e=pP,pP=null,e;return uC&1&&e.tag!==0&&Ap(),o=e.pendingLanes,o&1?e===gP?Py++:(Py=0,gP=e):Py=0,Uc(),null}function Ap(){if(Uu!==null){var e=cse(uC),t=Ro.transition,n=pt;try{if(Ro.transition=null,pt=16>e?16:e,Uu===null)var r=!1;else{if(e=Uu,Uu=null,uC=0,Xe&6)throw Error(te(331));var i=Xe;for(Xe|=4,de=e.current;de!==null;){var o=de,s=o.child;if(de.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(de=u;de!==null;){var c=de;switch(c.tag){case 0:case 11:case 15:Ay(8,c,o)}var f=c.child;if(f!==null)f.return=c,de=f;else for(;de!==null;){c=de;var d=c.sibling,h=c.return;if(wae(c),c===u){de=null;break}if(d!==null){d.return=h,de=d;break}de=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}de=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,de=s;else e:for(;de!==null;){if(o=de,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ay(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,de=y;break e}de=o.return}}var v=e.current;for(de=v;de!==null;){s=de;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,de=b;else e:for(s=v;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:p_(9,a)}}catch(S){Qt(a,a.return,S)}if(a===s){de=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,de=x;break e}de=a.return}}if(Xe=i,Uc(),Sa&&typeof Sa.onPostCommitFiberRoot=="function")try{Sa.onPostCommitFiberRoot(s_,e)}catch{}r=!0}return r}finally{pt=n,Ro.transition=t}}return!1}function BU(e,t,n){t=jg(n,t),t=cae(e,t,1),e=Ju(e,t,1),t=Yr(),e!==null&&(ib(e,1,t),yi(e,t))}function Qt(e,t,n){if(e.tag===3)BU(e,e,n);else for(;t!==null;){if(t.tag===3){BU(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zu===null||!Zu.has(r))){e=jg(n,e),e=fae(t,e,1),t=Ju(t,e,1),e=Yr(),t!==null&&(ib(t,1,e),yi(t,e));break}}t=t.return}}function RVe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Yr(),e.pingedLanes|=e.suspendedLanes&n,Nn===e&&(er&n)===n&&(wn===4||wn===3&&(er&130023424)===er&&500>nn()-J8?Jf(e,0):Q8|=n),yi(e,t)}function Fae(e,t){t===0&&(e.mode&1?(t=Cx,Cx<<=1,!(Cx&130023424)&&(Cx=4194304)):t=1);var n=Yr();e=Il(e,t),e!==null&&(ib(e,t,n),yi(e,n))}function OVe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Fae(e,n)}function DVe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(t),Fae(e,n)}var Mae;Mae=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||gi.current)di=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return di=!1,SVe(e,t,n);di=!!(e.flags&131072)}else di=!1,It&&t.flags&1048576&&Nse(t,eC,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;D2(e,t),e=t.pendingProps;var i=Lg(t,_r.current);$p(t,n),i=H8(null,t,r,e,i,n);var o=q8();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)?(o=!0,JS(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,B8(t),i.updater=h_,t.stateNode=i,i._reactInternals=t,rP(t,r,e,n),t=sP(null,t,r,!0,o,n)):(t.tag=0,It&&o&&R8(t),Nr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(D2(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=LVe(r),e=es(r,e),i){case 0:t=oP(null,t,r,e,n);break e;case 1:t=PU(null,t,r,e,n);break e;case 11:t=AU(null,t,r,e,n);break e;case 14:t=TU(null,t,r,es(r.type,e),n);break e}throw Error(te(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:es(r,i),oP(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:es(r,i),PU(e,t,r,i,n);case 3:e:{if(gae(t),e===null)throw Error(te(387));r=t.pendingProps,o=t.memoizedState,i=o.element,Use(e,t),rC(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=jg(Error(te(423)),t),t=FU(e,t,r,n,i);break e}else if(r!==i){i=jg(Error(te(424)),t),t=FU(e,t,r,n,i);break e}else for(Ui=Qu(t.stateNode.containerInfo.firstChild),Yi=t,It=!0,as=null,n=Bse(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ig(),r===i){t=zl(e,t,n);break e}Nr(e,t,r,n)}t=t.child}return t;case 5:return Vse(t),e===null&&eP(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,X4(r,i)?s=null:o!==null&&X4(r,o)&&(t.flags|=32),pae(e,t),Nr(e,t,s,n),t.child;case 6:return e===null&&eP(t),null;case 13:return mae(e,t,n);case 4:return j8(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=zg(t,null,r,n):Nr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:es(r,i),AU(e,t,r,i,n);case 7:return Nr(e,t,t.pendingProps,n),t.child;case 8:return Nr(e,t,t.pendingProps.children,n),t.child;case 12:return Nr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Et(tC,r._currentValue),r._currentValue=s,o!==null)if(Rs(o.value,s)){if(o.children===i.children&&!gi.current){t=zl(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=$l(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),tP(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(te(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),tP(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Nr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,$p(t,n),i=jo(i),r=r(i),t.flags|=1,Nr(e,t,r,n),t.child;case 14:return r=t.type,i=es(r,t.pendingProps),i=es(r.type,i),TU(e,t,r,i,n);case 15:return dae(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:es(r,i),D2(e,t),t.tag=1,mi(r)?(e=!0,JS(t)):e=!1,$p(t,n),uae(t,r,i),rP(t,r,i,n),sP(null,t,r,!0,e,n);case 19:return yae(e,t,n);case 22:return hae(e,t,n)}throw Error(te(156,t.tag))};function Rae(e,t){return sse(e,t)}function NVe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function To(e,t,n,r){return new NVe(e,t,n,r)}function nN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function LVe(e){if(typeof e=="function")return nN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===w8)return 11;if(e===S8)return 14}return 2}function tc(e,t){var n=e.alternate;return n===null?(n=To(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function I2(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")nN(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Hh:return Zf(n.children,i,o,t);case x8:s=8,i|=8;break;case $4:return e=To(12,n,t,i|2),e.elementType=$4,e.lanes=o,e;case A4:return e=To(13,n,t,i),e.elementType=A4,e.lanes=o,e;case T4:return e=To(19,n,t,i),e.elementType=T4,e.lanes=o,e;case Voe:return m_(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case joe:s=10;break e;case Uoe:s=9;break e;case w8:s=11;break e;case S8:s=14;break e;case yu:s=16,r=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=To(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Zf(e,t,n,r){return e=To(7,e,r,t),e.lanes=n,e}function m_(e,t,n,r){return e=To(22,e,r,t),e.elementType=Voe,e.lanes=n,e.stateNode={isHidden:!1},e}function f3(e,t,n){return e=To(6,e,null,t),e.lanes=n,e}function d3(e,t,n){return t=To(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IVe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q5(0),this.expirationTimes=q5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rN(e,t,n,r,i,o,s,a,l){return e=new IVe(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=To(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},B8(o),e}function zVe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wh,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Oae(e){if(!e)return Sc;e=e._reactInternals;e:{if(ih(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var n=e.type;if(mi(n))return Ose(e,n,t)}return t}function Dae(e,t,n,r,i,o,s,a,l){return e=rN(n,r,!0,e,i,o,s,a,l),e.context=Oae(null),n=e.current,r=Yr(),i=ec(n),o=$l(r,i),o.callback=t??null,Ju(n,o,i),e.current.lanes=i,ib(e,i,r),yi(e,r),e}function y_(e,t,n,r){var i=t.current,o=Yr(),s=ec(i);return n=Oae(n),t.context===null?t.context=n:t.pendingContext=n,t=$l(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ju(i,t,s),e!==null&&(Ss(e,i,s,o),M2(e,i,s)),s}function fC(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jU(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function iN(e,t){jU(e,t),(e=e.alternate)&&jU(e,t)}function BVe(){return null}var Nae=typeof reportError=="function"?reportError:function(e){console.error(e)};function oN(e){this._internalRoot=e}v_.prototype.render=oN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));y_(e,t,null,null)};v_.prototype.unmount=oN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Md(function(){y_(null,e,null,null)}),t[Ll]=null}};function v_(e){this._internalRoot=e}v_.prototype.unstable_scheduleHydration=function(e){if(e){var t=hse();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Su.length&&t!==0&&t<Su[n].priority;n++);Su.splice(n,0,e),n===0&&gse(e)}};function sN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function b_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function UU(){}function jVe(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=fC(s);o.call(u)}}var s=Dae(t,r,e,0,null,!1,!1,"",UU);return e._reactRootContainer=s,e[Ll]=s.current,P1(e.nodeType===8?e.parentNode:e),Md(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=fC(l);a.call(u)}}var l=rN(e,0,!1,null,null,!1,!1,"",UU);return e._reactRootContainer=l,e[Ll]=l.current,P1(e.nodeType===8?e.parentNode:e),Md(function(){y_(t,l,n,r)}),l}function x_(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=fC(s);a.call(l)}}y_(t,s,e,i)}else s=jVe(n,t,e,i,r);return fC(s)}fse=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=X0(t.pendingLanes);n!==0&&(E8(t,n|1),yi(t,nn()),!(Xe&6)&&(Ug=nn()+500,Uc()))}break;case 13:Md(function(){var r=Il(e,1);if(r!==null){var i=Yr();Ss(r,e,1,i)}}),iN(e,1)}};_8=function(e){if(e.tag===13){var t=Il(e,134217728);if(t!==null){var n=Yr();Ss(t,e,134217728,n)}iN(e,134217728)}};dse=function(e){if(e.tag===13){var t=ec(e),n=Il(e,t);if(n!==null){var r=Yr();Ss(n,e,t,r)}iN(e,t)}};hse=function(){return pt};pse=function(e,t){var n=pt;try{return pt=e,t()}finally{pt=n}};z4=function(e,t,n){switch(t){case"input":if(M4(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=c_(r);if(!i)throw Error(te(90));Hoe(r),M4(r,i)}}}break;case"textarea":Goe(e,n);break;case"select":t=n.value,t!=null&&Cp(e,!!n.multiple,t,!1)}};ese=Z8;tse=Md;var UVe={usingClientEntryPoint:!1,Events:[sb,Xh,c_,Joe,Zoe,Z8]},f0={findFiberByHostInstance:Tf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VVe={bundleType:f0.bundleType,version:f0.version,rendererPackageName:f0.rendererPackageName,rendererConfig:f0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ise(e),e===null?null:e.stateNode},findFiberByHostInstance:f0.findFiberByHostInstance||BVe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ox=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ox.isDisabled&&Ox.supportsFiber)try{s_=Ox.inject(VVe),Sa=Ox}catch{}}so.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UVe;so.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sN(t))throw Error(te(200));return zVe(e,t,null,n)};so.createRoot=function(e,t){if(!sN(e))throw Error(te(299));var n=!1,r="",i=Nae;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=rN(e,1,!1,null,null,n,!1,r,i),e[Ll]=t.current,P1(e.nodeType===8?e.parentNode:e),new oN(t)};so.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=ise(t),e=e===null?null:e.stateNode,e};so.flushSync=function(e){return Md(e)};so.hydrate=function(e,t,n){if(!b_(t))throw Error(te(200));return x_(null,e,t,!0,n)};so.hydrateRoot=function(e,t,n){if(!sN(e))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Nae;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Dae(t,null,e,1,n??null,i,!1,o,s),e[Ll]=t.current,P1(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new v_(t)};so.render=function(e,t,n){if(!b_(t))throw Error(te(200));return x_(null,e,t,!1,n)};so.unmountComponentAtNode=function(e){if(!b_(e))throw Error(te(40));return e._reactRootContainer?(Md(function(){x_(null,null,e,!1,function(){e._reactRootContainer=null,e[Ll]=null})}),!0):!1};so.unstable_batchedUpdates=Z8;so.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!b_(n))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return x_(e,t,n,!1,r)};so.version="18.3.1-next-f1338f8080-20240426";function Lae(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lae)}catch(e){console.error(e)}}Lae(),Loe.exports=so;var aN=Loe.exports,[Iae,WVe]=ni({strict:!1,name:"PortalContext"}),lN="chakra-portal",HVe=".chakra-portal",qVe=e=>$.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),GVe=e=>{const{appendToParentPortal:t,children:n}=e,[r,i]=F.useState(null),o=F.useRef(null),[,s]=F.useState({});F.useEffect(()=>s({}),[]);const a=WVe(),l=zje();Dg(()=>{if(!r)return;const c=r.ownerDocument,f=t?a??c.body:c.body;if(!f)return;o.current=c.createElement("div"),o.current.className=lN,f.appendChild(o.current),s({});const d=o.current;return()=>{f.contains(d)&&f.removeChild(d)}},[r]);const u=l!=null&&l.zIndex?$.jsx(qVe,{zIndex:l==null?void 0:l.zIndex,children:n}):n;return o.current?aN.createPortal($.jsx(Iae,{value:o.current,children:u}),o.current):$.jsx("span",{ref:c=>{c&&i(c)}})},YVe=e=>{const{children:t,containerRef:n,appendToParentPortal:r}=e,i=n.current,o=i??(typeof window<"u"?document.body:void 0),s=F.useMemo(()=>{const l=i==null?void 0:i.ownerDocument.createElement("div");return l&&(l.className=lN),l},[i]),[,a]=F.useState({});return Dg(()=>a({}),[]),Dg(()=>{if(!(!s||!o))return o.appendChild(s),()=>{o.removeChild(s)}},[s,o]),o&&s?aN.createPortal($.jsx(Iae,{value:r?s:null,children:t}),s):null};function w_(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...r}=t;return n?$.jsx(YVe,{containerRef:n,...r}):$.jsx(GVe,{...r})}w_.className=lN;w_.selector=HVe;w_.displayName="Portal";function S_(){const e=F.useContext(w1);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var uN=F.createContext({});uN.displayName="ColorModeContext";function lb(){const e=F.useContext(uN);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function fo(e,t){const{colorMode:n}=lb();return n==="dark"?t:e}var Dx={light:"chakra-ui-light",dark:"chakra-ui-dark"};function XVe(e={}){const{preventTransition:t=!0}=e,n={setDataset:r=>{const i=t?n.preventTransition():void 0;document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,i==null||i()},setClassName(r){document.body.classList.add(r?Dx.dark:Dx.light),document.body.classList.remove(r?Dx.light:Dx.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(r){var i;return((i=n.query().matches)!=null?i:r==="dark")?"dark":"light"},addListener(r){const i=n.query(),o=s=>{r(s.matches?"dark":"light")};return typeof i.addListener=="function"?i.addListener(o):i.addEventListener("change",o),()=>{typeof i.removeListener=="function"?i.removeListener(o):i.removeEventListener("change",o)}},preventTransition(){const r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(r)})})}}};return n}var KVe="chakra-ui-color-mode";function QVe(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let n;try{n=localStorage.getItem(e)||t}catch{}return n||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var JVe=QVe(KVe),VU=()=>{};function WU(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function zae(e){const{value:t,children:n,options:{useSystemColorMode:r,initialColorMode:i,disableTransitionOnChange:o}={},colorModeManager:s=JVe}=e,a=i==="dark"?"dark":"light",[l,u]=F.useState(()=>WU(s,a)),[c,f]=F.useState(()=>WU(s)),{getSystemTheme:d,setClassName:h,setDataset:p,addListener:g}=F.useMemo(()=>XVe({preventTransition:o}),[o]),m=i==="system"&&!l?c:l,y=F.useCallback(x=>{const S=x==="system"?d():x;u(S),h(S==="dark"),p(S),s.set(S)},[s,d,h,p]);Dg(()=>{i==="system"&&f(d())},[]),F.useEffect(()=>{const x=s.get();if(x){y(x);return}if(i==="system"){y("system");return}y(a)},[s,a,i,y]);const v=F.useCallback(()=>{y(m==="dark"?"light":"dark")},[m,y]);F.useEffect(()=>{if(r)return g(y)},[r,g,y]);const b=F.useMemo(()=>({colorMode:t??m,toggleColorMode:t?VU:v,setColorMode:t?VU:y,forced:t!==void 0}),[m,v,y,t]);return $.jsx(uN.Provider,{value:b,children:n})}zae.displayName="ColorModeProvider";function Bae(){const e=lb(),t=S_();return{...e,theme:t}}function ZVe(e,t,n){var r,i;if(t==null)return t;const o=s=>{var a,l;return(l=(a=e.__cssMap)==null?void 0:a[s])==null?void 0:l.value};return(i=(r=o(t))!=null?r:o(n))!=null?i:n}function eWe(e,t,n){const r=S_();return tWe(e,t,n)(r)}function tWe(e,t,n){const r=Array.isArray(t)?t:[t],i=Array.isArray(n)?n:[n];return o=>{const s=i.filter(Boolean),a=r.map((l,u)=>{var c;const f=`${e}.${l}`;return ZVe(o,f,(c=s[u])!=null?c:l)});return Array.isArray(t)?a:a[0]}}var dt=(...e)=>e.filter(Boolean).join(" ");function vi(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}function ha(e,...t){return nWe(e)?e(...t):e}var nWe=e=>typeof e=="function",bo=e=>e?"":void 0,h3=e=>e?!0:void 0;function z1(...e){return function(n){e.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}var dC={exports:{}};dC.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",m="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",x="[object RegExp]",S="[object Set]",C="[object String]",w="[object Undefined]",k="[object WeakMap]",E="[object ArrayBuffer]",A="[object DataView]",P="[object Float32Array]",L="[object Float64Array]",M="[object Int8Array]",O="[object Int16Array]",_="[object Int32Array]",T="[object Uint8Array]",N="[object Uint8ClampedArray]",D="[object Uint16Array]",I="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,V=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,Q={};Q[P]=Q[L]=Q[M]=Q[O]=Q[_]=Q[T]=Q[N]=Q[D]=Q[I]=!0,Q[a]=Q[l]=Q[E]=Q[c]=Q[A]=Q[f]=Q[d]=Q[h]=Q[g]=Q[m]=Q[v]=Q[x]=Q[S]=Q[C]=Q[k]=!1;var ye=typeof Li=="object"&&Li&&Li.Object===Object&&Li,Re=typeof self=="object"&&self&&self.Object===Object&&self,ut=ye||Re||Function("return this")(),$n=t&&!t.nodeType&&t,ir=$n&&!0&&e&&!e.nodeType&&e,ce=ir&&ir.exports===$n,Ee=ce&&ye.process,$e=function(){try{var R=ir&&ir.require&&ir.require("util").types;return R||Ee&&Ee.binding&&Ee.binding("util")}catch{}}(),J=$e&&$e.isTypedArray;function pn(R,B,W){switch(W.length){case 0:return R.call(B);case 1:return R.call(B,W[0]);case 2:return R.call(B,W[0],W[1]);case 3:return R.call(B,W[0],W[1],W[2])}return R.apply(B,W)}function tt(R,B){for(var W=-1,he=Array(R);++W<R;)he[W]=B(W);return he}function An(R){return function(B){return R(B)}}function un(R,B){return R==null?void 0:R[B]}function lo(R,B){return function(W){return R(B(W))}}var ah=Array.prototype,_fe=Function.prototype,mb=Object.prototype,Y_=ut["__core-js_shared__"],yb=_fe.toString,tu=mb.hasOwnProperty,l9=function(){var R=/[^.]+$/.exec(Y_&&Y_.keys&&Y_.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}(),u9=mb.toString,$fe=yb.call(Object),Afe=RegExp("^"+yb.call(tu).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vb=ce?ut.Buffer:void 0,c9=ut.Symbol,f9=ut.Uint8Array;vb&&vb.allocUnsafe;var d9=lo(Object.getPrototypeOf,Object),h9=Object.create,Tfe=mb.propertyIsEnumerable,Pfe=ah.splice,Hc=c9?c9.toStringTag:void 0,bb=function(){try{var R=Q_(Object,"defineProperty");return R({},"",{}),R}catch{}}(),Ffe=vb?vb.isBuffer:void 0,p9=Math.max,Mfe=Date.now,g9=Q_(ut,"Map"),Tm=Q_(Object,"create"),Rfe=function(){function R(){}return function(B){if(!Gc(B))return{};if(h9)return h9(B);R.prototype=B;var W=new R;return R.prototype=void 0,W}}();function qc(R){var B=-1,W=R==null?0:R.length;for(this.clear();++B<W;){var he=R[B];this.set(he[0],he[1])}}function Ofe(){this.__data__=Tm?Tm(null):{},this.size=0}function Dfe(R){var B=this.has(R)&&delete this.__data__[R];return this.size-=B?1:0,B}function Nfe(R){var B=this.__data__;if(Tm){var W=B[R];return W===r?void 0:W}return tu.call(B,R)?B[R]:void 0}function Lfe(R){var B=this.__data__;return Tm?B[R]!==void 0:tu.call(B,R)}function Ife(R,B){var W=this.__data__;return this.size+=this.has(R)?0:1,W[R]=Tm&&B===void 0?r:B,this}qc.prototype.clear=Ofe,qc.prototype.delete=Dfe,qc.prototype.get=Nfe,qc.prototype.has=Lfe,qc.prototype.set=Ife;function Ya(R){var B=-1,W=R==null?0:R.length;for(this.clear();++B<W;){var he=R[B];this.set(he[0],he[1])}}function zfe(){this.__data__=[],this.size=0}function Bfe(R){var B=this.__data__,W=xb(B,R);if(W<0)return!1;var he=B.length-1;return W==he?B.pop():Pfe.call(B,W,1),--this.size,!0}function jfe(R){var B=this.__data__,W=xb(B,R);return W<0?void 0:B[W][1]}function Ufe(R){return xb(this.__data__,R)>-1}function Vfe(R,B){var W=this.__data__,he=xb(W,R);return he<0?(++this.size,W.push([R,B])):W[he][1]=B,this}Ya.prototype.clear=zfe,Ya.prototype.delete=Bfe,Ya.prototype.get=jfe,Ya.prototype.has=Ufe,Ya.prototype.set=Vfe;function lh(R){var B=-1,W=R==null?0:R.length;for(this.clear();++B<W;){var he=R[B];this.set(he[0],he[1])}}function Wfe(){this.size=0,this.__data__={hash:new qc,map:new(g9||Ya),string:new qc}}function Hfe(R){var B=Sb(this,R).delete(R);return this.size-=B?1:0,B}function qfe(R){return Sb(this,R).get(R)}function Gfe(R){return Sb(this,R).has(R)}function Yfe(R,B){var W=Sb(this,R),he=W.size;return W.set(R,B),this.size+=W.size==he?0:1,this}lh.prototype.clear=Wfe,lh.prototype.delete=Hfe,lh.prototype.get=qfe,lh.prototype.has=Gfe,lh.prototype.set=Yfe;function uh(R){var B=this.__data__=new Ya(R);this.size=B.size}function Xfe(){this.__data__=new Ya,this.size=0}function Kfe(R){var B=this.__data__,W=B.delete(R);return this.size=B.size,W}function Qfe(R){return this.__data__.get(R)}function Jfe(R){return this.__data__.has(R)}function Zfe(R,B){var W=this.__data__;if(W instanceof Ya){var he=W.__data__;if(!g9||he.length<n-1)return he.push([R,B]),this.size=++W.size,this;W=this.__data__=new lh(he)}return W.set(R,B),this.size=W.size,this}uh.prototype.clear=Xfe,uh.prototype.delete=Kfe,uh.prototype.get=Qfe,uh.prototype.has=Jfe,uh.prototype.set=Zfe;function ede(R,B){var W=e$(R),he=!W&&Z_(R),Ge=!W&&!he&&x9(R),wt=!W&&!he&&!Ge&&S9(R),Dt=W||he||Ge||wt,nt=Dt?tt(R.length,String):[],Nt=nt.length;for(var Go in R)Dt&&(Go=="length"||Ge&&(Go=="offset"||Go=="parent")||wt&&(Go=="buffer"||Go=="byteLength"||Go=="byteOffset")||v9(Go,Nt))||nt.push(Go);return nt}function X_(R,B,W){(W!==void 0&&!Cb(R[B],W)||W===void 0&&!(B in R))&&K_(R,B,W)}function tde(R,B,W){var he=R[B];(!(tu.call(R,B)&&Cb(he,W))||W===void 0&&!(B in R))&&K_(R,B,W)}function xb(R,B){for(var W=R.length;W--;)if(Cb(R[W][0],B))return W;return-1}function K_(R,B,W){B=="__proto__"&&bb?bb(R,B,{configurable:!0,enumerable:!0,value:W,writable:!0}):R[B]=W}var nde=gde();function wb(R){return R==null?R===void 0?w:y:Hc&&Hc in Object(R)?mde(R):Sde(R)}function m9(R){return Pm(R)&&wb(R)==a}function rde(R){if(!Gc(R)||xde(R))return!1;var B=n$(R)?Afe:V;return B.test(_de(R))}function ide(R){return Pm(R)&&w9(R.length)&&!!Q[wb(R)]}function ode(R){if(!Gc(R))return wde(R);var B=b9(R),W=[];for(var he in R)he=="constructor"&&(B||!tu.call(R,he))||W.push(he);return W}function y9(R,B,W,he,Ge){R!==B&&nde(B,function(wt,Dt){if(Ge||(Ge=new uh),Gc(wt))sde(R,B,Dt,W,y9,he,Ge);else{var nt=he?he(J_(R,Dt),wt,Dt+"",R,B,Ge):void 0;nt===void 0&&(nt=wt),X_(R,Dt,nt)}},C9)}function sde(R,B,W,he,Ge,wt,Dt){var nt=J_(R,W),Nt=J_(B,W),Go=Dt.get(Nt);if(Go){X_(R,W,Go);return}var Ti=wt?wt(nt,Nt,W+"",R,B,Dt):void 0,Fm=Ti===void 0;if(Fm){var r$=e$(Nt),i$=!r$&&x9(Nt),E9=!r$&&!i$&&S9(Nt);Ti=Nt,r$||i$||E9?e$(nt)?Ti=nt:$de(nt)?Ti=dde(nt):i$?(Fm=!1,Ti=ude(Nt)):E9?(Fm=!1,Ti=fde(Nt)):Ti=[]:Ade(Nt)||Z_(Nt)?(Ti=nt,Z_(nt)?Ti=Tde(nt):(!Gc(nt)||n$(nt))&&(Ti=yde(Nt))):Fm=!1}Fm&&(Dt.set(Nt,Ti),Ge(Ti,Nt,he,wt,Dt),Dt.delete(Nt)),X_(R,W,Ti)}function ade(R,B){return kde(Cde(R,B,k9),R+"")}var lde=bb?function(R,B){return bb(R,"toString",{configurable:!0,enumerable:!1,value:Fde(B),writable:!0})}:k9;function ude(R,B){return R.slice()}function cde(R){var B=new R.constructor(R.byteLength);return new f9(B).set(new f9(R)),B}function fde(R,B){var W=cde(R.buffer);return new R.constructor(W,R.byteOffset,R.length)}function dde(R,B){var W=-1,he=R.length;for(B||(B=Array(he));++W<he;)B[W]=R[W];return B}function hde(R,B,W,he){var Ge=!W;W||(W={});for(var wt=-1,Dt=B.length;++wt<Dt;){var nt=B[wt],Nt=void 0;Nt===void 0&&(Nt=R[nt]),Ge?K_(W,nt,Nt):tde(W,nt,Nt)}return W}function pde(R){return ade(function(B,W){var he=-1,Ge=W.length,wt=Ge>1?W[Ge-1]:void 0,Dt=Ge>2?W[2]:void 0;for(wt=R.length>3&&typeof wt=="function"?(Ge--,wt):void 0,Dt&&vde(W[0],W[1],Dt)&&(wt=Ge<3?void 0:wt,Ge=1),B=Object(B);++he<Ge;){var nt=W[he];nt&&R(B,nt,he,wt)}return B})}function gde(R){return function(B,W,he){for(var Ge=-1,wt=Object(B),Dt=he(B),nt=Dt.length;nt--;){var Nt=Dt[++Ge];if(W(wt[Nt],Nt,wt)===!1)break}return B}}function Sb(R,B){var W=R.__data__;return bde(B)?W[typeof B=="string"?"string":"hash"]:W.map}function Q_(R,B){var W=un(R,B);return rde(W)?W:void 0}function mde(R){var B=tu.call(R,Hc),W=R[Hc];try{R[Hc]=void 0;var he=!0}catch{}var Ge=u9.call(R);return he&&(B?R[Hc]=W:delete R[Hc]),Ge}function yde(R){return typeof R.constructor=="function"&&!b9(R)?Rfe(d9(R)):{}}function v9(R,B){var W=typeof R;return B=B??s,!!B&&(W=="number"||W!="symbol"&&se.test(R))&&R>-1&&R%1==0&&R<B}function vde(R,B,W){if(!Gc(W))return!1;var he=typeof B;return(he=="number"?t$(W)&&v9(B,W.length):he=="string"&&B in W)?Cb(W[B],R):!1}function bde(R){var B=typeof R;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?R!=="__proto__":R===null}function xde(R){return!!l9&&l9 in R}function b9(R){var B=R&&R.constructor,W=typeof B=="function"&&B.prototype||mb;return R===W}function wde(R){var B=[];if(R!=null)for(var W in Object(R))B.push(W);return B}function Sde(R){return u9.call(R)}function Cde(R,B,W){return B=p9(B===void 0?R.length-1:B,0),function(){for(var he=arguments,Ge=-1,wt=p9(he.length-B,0),Dt=Array(wt);++Ge<wt;)Dt[Ge]=he[B+Ge];Ge=-1;for(var nt=Array(B+1);++Ge<B;)nt[Ge]=he[Ge];return nt[B]=W(Dt),pn(R,this,nt)}}function J_(R,B){if(!(B==="constructor"&&typeof R[B]=="function")&&B!="__proto__")return R[B]}var kde=Ede(lde);function Ede(R){var B=0,W=0;return function(){var he=Mfe(),Ge=o-(he-W);if(W=he,Ge>0){if(++B>=i)return arguments[0]}else B=0;return R.apply(void 0,arguments)}}function _de(R){if(R!=null){try{return yb.call(R)}catch{}try{return R+""}catch{}}return""}function Cb(R,B){return R===B||R!==R&&B!==B}var Z_=m9(function(){return arguments}())?m9:function(R){return Pm(R)&&tu.call(R,"callee")&&!Tfe.call(R,"callee")},e$=Array.isArray;function t$(R){return R!=null&&w9(R.length)&&!n$(R)}function $de(R){return Pm(R)&&t$(R)}var x9=Ffe||Mde;function n$(R){if(!Gc(R))return!1;var B=wb(R);return B==h||B==p||B==u||B==b}function w9(R){return typeof R=="number"&&R>-1&&R%1==0&&R<=s}function Gc(R){var B=typeof R;return R!=null&&(B=="object"||B=="function")}function Pm(R){return R!=null&&typeof R=="object"}function Ade(R){if(!Pm(R)||wb(R)!=v)return!1;var B=d9(R);if(B===null)return!0;var W=tu.call(B,"constructor")&&B.constructor;return typeof W=="function"&&W instanceof W&&yb.call(W)==$fe}var S9=J?An(J):ide;function Tde(R){return hde(R,C9(R))}function C9(R){return t$(R)?ede(R):ode(R)}var Pde=pde(function(R,B,W,he){y9(R,B,W,he)});function Fde(R){return function(){return R}}function k9(R){return R}function Mde(){return!1}e.exports=Pde})(dC,dC.exports);var rWe=dC.exports;const Po=Ul(rWe);var iWe=e=>/!(important)?$/.test(e),HU=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,oWe=(e,t)=>n=>{const r=String(t),i=iWe(r),o=HU(r),s=e?`${e}.${o}`:o;let a=vi(n.__cssMap)&&s in n.__cssMap?n.__cssMap[s].varRef:t;return a=HU(a),i?`${a} !important`:a};function cN(e){const{scale:t,transform:n,compose:r}=e;return(o,s)=>{var a;const l=oWe(t,o)(s);let u=(a=n==null?void 0:n(l,s))!=null?a:l;return r&&(u=r(u,s)),u}}var Nx=(...e)=>t=>e.reduce((n,r)=>r(n),t);function ho(e,t){return n=>{const r={property:n,scale:e};return r.transform=cN({scale:e,transform:t}),r}}var sWe=({rtl:e,ltr:t})=>n=>n.direction==="rtl"?e:t;function aWe(e){const{property:t,scale:n,transform:r}=e;return{scale:n,property:sWe(t),transform:n?cN({scale:n,compose:r}):r}}var jae=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function lWe(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...jae].join(" ")}function uWe(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...jae].join(" ")}var cWe={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},fWe={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function dWe(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var hWe={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},vP={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},pWe=new Set(Object.values(vP)),bP=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),gWe=e=>e.trim();function mWe(e,t){if(e==null||bP.has(e))return e;if(!(xP(e)||bP.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),o=i==null?void 0:i[1],s=i==null?void 0:i[2];if(!o||!s)return e;const a=o.includes("-gradient")?o:`${o}-gradient`,[l,...u]=s.split(",").map(gWe).filter(Boolean);if((u==null?void 0:u.length)===0)return e;const c=l in vP?vP[l]:l;u.unshift(c);const f=u.map(d=>{if(pWe.has(d))return d;const h=d.indexOf(" "),[p,g]=h!==-1?[d.substr(0,h),d.substr(h+1)]:[d],m=xP(g)?g:g&&g.split(" "),y=`colors.${p}`,v=y in t.__cssMap?t.__cssMap[y].varRef:p;return m?[v,...Array.isArray(m)?m:[m]].join(" "):v});return`${a}(${f.join(", ")})`}var xP=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),yWe=(e,t)=>mWe(e,t??{});function vWe(e){return/^var\(--.+\)$/.test(e)}var bWe=e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}},Hs=e=>t=>`${e}(${t})`,Ve={filter(e){return e!=="auto"?e:cWe},backdropFilter(e){return e!=="auto"?e:fWe},ring(e){return dWe(Ve.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?lWe():e==="auto-gpu"?uWe():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=bWe(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const n={left:"right",right:"left"};return t.direction==="rtl"?n[e]:e},degree(e){if(vWe(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:yWe,blur:Hs("blur"),opacity:Hs("opacity"),brightness:Hs("brightness"),contrast:Hs("contrast"),dropShadow:Hs("drop-shadow"),grayscale:Hs("grayscale"),hueRotate:e=>Hs("hue-rotate")(Ve.degree(e)),invert:Hs("invert"),saturate:Hs("saturate"),sepia:Hs("sepia"),bgImage(e){return e==null||xP(e)||bP.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:r}=(t=hWe[e])!=null?t:{},i={flexDirection:e};return n&&(i[n]=1),r&&(i[r]=1),i}},z={borderWidths:ho("borderWidths"),borderStyles:ho("borderStyles"),colors:ho("colors"),borders:ho("borders"),gradients:ho("gradients",Ve.gradient),radii:ho("radii",Ve.px),space:ho("space",Nx(Ve.vh,Ve.px)),spaceT:ho("space",Nx(Ve.vh,Ve.px)),degreeT(e){return{property:e,transform:Ve.degree}},prop(e,t,n){return{property:e,scale:t,...t&&{transform:cN({scale:t,transform:n})}}},propT(e,t){return{property:e,transform:t}},sizes:ho("sizes",Nx(Ve.vh,Ve.px)),sizesT:ho("sizes",Nx(Ve.vh,Ve.fraction)),shadows:ho("shadows"),logical:aWe,blur:ho("blur",Ve.blur)},z2={background:z.colors("background"),backgroundColor:z.colors("backgroundColor"),backgroundImage:z.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Ve.bgClip},bgSize:z.prop("backgroundSize"),bgPosition:z.prop("backgroundPosition"),bg:z.colors("background"),bgColor:z.colors("backgroundColor"),bgPos:z.prop("backgroundPosition"),bgRepeat:z.prop("backgroundRepeat"),bgAttachment:z.prop("backgroundAttachment"),bgGradient:z.gradients("backgroundImage"),bgClip:{transform:Ve.bgClip}};Object.assign(z2,{bgImage:z2.backgroundImage,bgImg:z2.backgroundImage});var rt={border:z.borders("border"),borderWidth:z.borderWidths("borderWidth"),borderStyle:z.borderStyles("borderStyle"),borderColor:z.colors("borderColor"),borderRadius:z.radii("borderRadius"),borderTop:z.borders("borderTop"),borderBlockStart:z.borders("borderBlockStart"),borderTopLeftRadius:z.radii("borderTopLeftRadius"),borderStartStartRadius:z.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:z.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:z.radii("borderTopRightRadius"),borderStartEndRadius:z.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:z.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:z.borders("borderRight"),borderInlineEnd:z.borders("borderInlineEnd"),borderBottom:z.borders("borderBottom"),borderBlockEnd:z.borders("borderBlockEnd"),borderBottomLeftRadius:z.radii("borderBottomLeftRadius"),borderBottomRightRadius:z.radii("borderBottomRightRadius"),borderLeft:z.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:z.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:z.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:z.borders(["borderLeft","borderRight"]),borderInline:z.borders("borderInline"),borderY:z.borders(["borderTop","borderBottom"]),borderBlock:z.borders("borderBlock"),borderTopWidth:z.borderWidths("borderTopWidth"),borderBlockStartWidth:z.borderWidths("borderBlockStartWidth"),borderTopColor:z.colors("borderTopColor"),borderBlockStartColor:z.colors("borderBlockStartColor"),borderTopStyle:z.borderStyles("borderTopStyle"),borderBlockStartStyle:z.borderStyles("borderBlockStartStyle"),borderBottomWidth:z.borderWidths("borderBottomWidth"),borderBlockEndWidth:z.borderWidths("borderBlockEndWidth"),borderBottomColor:z.colors("borderBottomColor"),borderBlockEndColor:z.colors("borderBlockEndColor"),borderBottomStyle:z.borderStyles("borderBottomStyle"),borderBlockEndStyle:z.borderStyles("borderBlockEndStyle"),borderLeftWidth:z.borderWidths("borderLeftWidth"),borderInlineStartWidth:z.borderWidths("borderInlineStartWidth"),borderLeftColor:z.colors("borderLeftColor"),borderInlineStartColor:z.colors("borderInlineStartColor"),borderLeftStyle:z.borderStyles("borderLeftStyle"),borderInlineStartStyle:z.borderStyles("borderInlineStartStyle"),borderRightWidth:z.borderWidths("borderRightWidth"),borderInlineEndWidth:z.borderWidths("borderInlineEndWidth"),borderRightColor:z.colors("borderRightColor"),borderInlineEndColor:z.colors("borderInlineEndColor"),borderRightStyle:z.borderStyles("borderRightStyle"),borderInlineEndStyle:z.borderStyles("borderInlineEndStyle"),borderTopRadius:z.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:z.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:z.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:z.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(rt,{rounded:rt.borderRadius,roundedTop:rt.borderTopRadius,roundedTopLeft:rt.borderTopLeftRadius,roundedTopRight:rt.borderTopRightRadius,roundedTopStart:rt.borderStartStartRadius,roundedTopEnd:rt.borderStartEndRadius,roundedBottom:rt.borderBottomRadius,roundedBottomLeft:rt.borderBottomLeftRadius,roundedBottomRight:rt.borderBottomRightRadius,roundedBottomStart:rt.borderEndStartRadius,roundedBottomEnd:rt.borderEndEndRadius,roundedLeft:rt.borderLeftRadius,roundedRight:rt.borderRightRadius,roundedStart:rt.borderInlineStartRadius,roundedEnd:rt.borderInlineEndRadius,borderStart:rt.borderInlineStart,borderEnd:rt.borderInlineEnd,borderTopStartRadius:rt.borderStartStartRadius,borderTopEndRadius:rt.borderStartEndRadius,borderBottomStartRadius:rt.borderEndStartRadius,borderBottomEndRadius:rt.borderEndEndRadius,borderStartRadius:rt.borderInlineStartRadius,borderEndRadius:rt.borderInlineEndRadius,borderStartWidth:rt.borderInlineStartWidth,borderEndWidth:rt.borderInlineEndWidth,borderStartColor:rt.borderInlineStartColor,borderEndColor:rt.borderInlineEndColor,borderStartStyle:rt.borderInlineStartStyle,borderEndStyle:rt.borderInlineEndStyle});var xWe={color:z.colors("color"),textColor:z.colors("color"),fill:z.colors("fill"),stroke:z.colors("stroke")},wP={boxShadow:z.shadows("boxShadow"),mixBlendMode:!0,blendMode:z.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:z.prop("backgroundBlendMode"),opacity:!0};Object.assign(wP,{shadow:wP.boxShadow});var wWe={filter:{transform:Ve.filter},blur:z.blur("--chakra-blur"),brightness:z.propT("--chakra-brightness",Ve.brightness),contrast:z.propT("--chakra-contrast",Ve.contrast),hueRotate:z.propT("--chakra-hue-rotate",Ve.hueRotate),invert:z.propT("--chakra-invert",Ve.invert),saturate:z.propT("--chakra-saturate",Ve.saturate),dropShadow:z.propT("--chakra-drop-shadow",Ve.dropShadow),backdropFilter:{transform:Ve.backdropFilter},backdropBlur:z.blur("--chakra-backdrop-blur"),backdropBrightness:z.propT("--chakra-backdrop-brightness",Ve.brightness),backdropContrast:z.propT("--chakra-backdrop-contrast",Ve.contrast),backdropHueRotate:z.propT("--chakra-backdrop-hue-rotate",Ve.hueRotate),backdropInvert:z.propT("--chakra-backdrop-invert",Ve.invert),backdropSaturate:z.propT("--chakra-backdrop-saturate",Ve.saturate)},hC={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Ve.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:z.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:z.space("gap"),rowGap:z.space("rowGap"),columnGap:z.space("columnGap")};Object.assign(hC,{flexDir:hC.flexDirection});var Uae={gridGap:z.space("gridGap"),gridColumnGap:z.space("gridColumnGap"),gridRowGap:z.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},SWe={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Ve.outline},outlineOffset:!0,outlineColor:z.colors("outlineColor")},go={width:z.sizesT("width"),inlineSize:z.sizesT("inlineSize"),height:z.sizes("height"),blockSize:z.sizes("blockSize"),boxSize:z.sizes(["width","height"]),minWidth:z.sizes("minWidth"),minInlineSize:z.sizes("minInlineSize"),minHeight:z.sizes("minHeight"),minBlockSize:z.sizes("minBlockSize"),maxWidth:z.sizes("maxWidth"),maxInlineSize:z.sizes("maxInlineSize"),maxHeight:z.sizes("maxHeight"),maxBlockSize:z.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (min-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r.minW)!=null?i:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (max-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r._minW)!=null?i:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:z.propT("float",Ve.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(go,{w:go.width,h:go.height,minW:go.minWidth,maxW:go.maxWidth,minH:go.minHeight,maxH:go.maxHeight,overscroll:go.overscrollBehavior,overscrollX:go.overscrollBehaviorX,overscrollY:go.overscrollBehaviorY});var CWe={listStyleType:!0,listStylePosition:!0,listStylePos:z.prop("listStylePosition"),listStyleImage:!0,listStyleImg:z.prop("listStyleImage")};function kWe(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var EWe=e=>{const t=new WeakMap;return(r,i,o,s)=>{if(typeof r>"u")return e(r,i,o);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,o,s);return a.set(i,l),l}},_We=EWe(kWe),$We={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},AWe={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},p3=(e,t,n)=>{const r={},i=_We(e,t,{});for(const o in i)o in n&&n[o]!=null||(r[o]=i[o]);return r},TWe={srOnly:{transform(e){return e===!0?$We:e==="focusable"?AWe:{}}},layerStyle:{processResult:!0,transform:(e,t,n)=>p3(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>p3(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>p3(t,e,n)}},Fy={position:!0,pos:z.prop("position"),zIndex:z.prop("zIndex","zIndices"),inset:z.spaceT("inset"),insetX:z.spaceT(["left","right"]),insetInline:z.spaceT("insetInline"),insetY:z.spaceT(["top","bottom"]),insetBlock:z.spaceT("insetBlock"),top:z.spaceT("top"),insetBlockStart:z.spaceT("insetBlockStart"),bottom:z.spaceT("bottom"),insetBlockEnd:z.spaceT("insetBlockEnd"),left:z.spaceT("left"),insetInlineStart:z.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:z.spaceT("right"),insetInlineEnd:z.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(Fy,{insetStart:Fy.insetInlineStart,insetEnd:Fy.insetInlineEnd});var PWe={ring:{transform:Ve.ring},ringColor:z.colors("--chakra-ring-color"),ringOffset:z.prop("--chakra-ring-offset-width"),ringOffsetColor:z.colors("--chakra-ring-offset-color"),ringInset:z.prop("--chakra-ring-inset")},Pt={margin:z.spaceT("margin"),marginTop:z.spaceT("marginTop"),marginBlockStart:z.spaceT("marginBlockStart"),marginRight:z.spaceT("marginRight"),marginInlineEnd:z.spaceT("marginInlineEnd"),marginBottom:z.spaceT("marginBottom"),marginBlockEnd:z.spaceT("marginBlockEnd"),marginLeft:z.spaceT("marginLeft"),marginInlineStart:z.spaceT("marginInlineStart"),marginX:z.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:z.spaceT("marginInline"),marginY:z.spaceT(["marginTop","marginBottom"]),marginBlock:z.spaceT("marginBlock"),padding:z.space("padding"),paddingTop:z.space("paddingTop"),paddingBlockStart:z.space("paddingBlockStart"),paddingRight:z.space("paddingRight"),paddingBottom:z.space("paddingBottom"),paddingBlockEnd:z.space("paddingBlockEnd"),paddingLeft:z.space("paddingLeft"),paddingInlineStart:z.space("paddingInlineStart"),paddingInlineEnd:z.space("paddingInlineEnd"),paddingX:z.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:z.space("paddingInline"),paddingY:z.space(["paddingTop","paddingBottom"]),paddingBlock:z.space("paddingBlock")};Object.assign(Pt,{m:Pt.margin,mt:Pt.marginTop,mr:Pt.marginRight,me:Pt.marginInlineEnd,marginEnd:Pt.marginInlineEnd,mb:Pt.marginBottom,ml:Pt.marginLeft,ms:Pt.marginInlineStart,marginStart:Pt.marginInlineStart,mx:Pt.marginX,my:Pt.marginY,p:Pt.padding,pt:Pt.paddingTop,py:Pt.paddingY,px:Pt.paddingX,pb:Pt.paddingBottom,pl:Pt.paddingLeft,ps:Pt.paddingInlineStart,paddingStart:Pt.paddingInlineStart,pr:Pt.paddingRight,pe:Pt.paddingInlineEnd,paddingEnd:Pt.paddingInlineEnd});var FWe={textDecorationColor:z.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:z.shadows("textShadow")},MWe={clipPath:!0,transform:z.propT("transform",Ve.transform),transformOrigin:!0,translateX:z.spaceT("--chakra-translate-x"),translateY:z.spaceT("--chakra-translate-y"),skewX:z.degreeT("--chakra-skew-x"),skewY:z.degreeT("--chakra-skew-y"),scaleX:z.prop("--chakra-scale-x"),scaleY:z.prop("--chakra-scale-y"),scale:z.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:z.degreeT("--chakra-rotate")},RWe={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:z.prop("transitionDuration","transition.duration"),transitionProperty:z.prop("transitionProperty","transition.property"),transitionTimingFunction:z.prop("transitionTimingFunction","transition.easing")},OWe={fontFamily:z.prop("fontFamily","fonts"),fontSize:z.prop("fontSize","fontSizes",Ve.px),fontWeight:z.prop("fontWeight","fontWeights"),lineHeight:z.prop("lineHeight","lineHeights"),letterSpacing:z.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},DWe={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:z.spaceT("scrollMargin"),scrollMarginTop:z.spaceT("scrollMarginTop"),scrollMarginBottom:z.spaceT("scrollMarginBottom"),scrollMarginLeft:z.spaceT("scrollMarginLeft"),scrollMarginRight:z.spaceT("scrollMarginRight"),scrollMarginX:z.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:z.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:z.spaceT("scrollPadding"),scrollPaddingTop:z.spaceT("scrollPaddingTop"),scrollPaddingBottom:z.spaceT("scrollPaddingBottom"),scrollPaddingLeft:z.spaceT("scrollPaddingLeft"),scrollPaddingRight:z.spaceT("scrollPaddingRight"),scrollPaddingX:z.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:z.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function Vae(e){return vi(e)&&e.reference?e.reference:String(e)}var C_=(e,...t)=>t.map(Vae).join(` ${e} `).replace(/calc/g,""),qU=(...e)=>`calc(${C_("+",...e)})`,GU=(...e)=>`calc(${C_("-",...e)})`,SP=(...e)=>`calc(${C_("*",...e)})`,YU=(...e)=>`calc(${C_("/",...e)})`,XU=e=>{const t=Vae(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:SP(t,-1)},Cf=Object.assign(e=>({add:(...t)=>Cf(qU(e,...t)),subtract:(...t)=>Cf(GU(e,...t)),multiply:(...t)=>Cf(SP(e,...t)),divide:(...t)=>Cf(YU(e,...t)),negate:()=>Cf(XU(e)),toString:()=>e.toString()}),{add:qU,subtract:GU,multiply:SP,divide:YU,negate:XU});function NWe(e,t="-"){return e.replace(/\s+/g,t)}function LWe(e){const t=NWe(e.toString());return zWe(IWe(t))}function IWe(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function zWe(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function BWe(e,t=""){return[t,e].filter(Boolean).join("-")}function jWe(e,t){return`var(${e}${t?`, ${t}`:""})`}function UWe(e,t=""){return LWe(`--${BWe(e,t)}`)}function Se(e,t,n){const r=UWe(e,n);return{variable:r,reference:jWe(r,t)}}function VWe(e,t){const n={};for(const r of t){if(Array.isArray(r)){const[i,o]=r;n[i]=Se(`${e}-${i}`,o);continue}n[r]=Se(`${e}-${r}`)}return n}function WWe(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function HWe(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}function CP(e){if(e==null)return e;const{unitless:t}=HWe(e);return t||typeof e=="number"?`${e}px`:e}var Wae=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,fN=e=>Object.fromEntries(Object.entries(e).sort(Wae));function KU(e){const t=fN(e);return Object.assign(Object.values(t),t)}function qWe(e){const t=Object.keys(fN(e));return new Set(t)}function QU(e){var t;if(!e)return e;e=(t=CP(e))!=null?t:e;const n=-.02;return typeof e=="number"?`${e+n}`:e.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function Q0(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${CP(e)})`),t&&n.push("and",`(max-width: ${CP(t)})`),n.join(" ")}function GWe(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const n=KU(e),r=Object.entries(e).sort(Wae).map(([s,a],l,u)=>{var c;let[,f]=(c=u[l+1])!=null?c:[];return f=parseFloat(f)>0?QU(f):void 0,{_minW:QU(a),breakpoint:s,minW:a,maxW:f,maxWQuery:Q0(null,f),minWQuery:Q0(a),minMaxQuery:Q0(a,f)}}),i=qWe(e),o=Array.from(i.values());return{keys:i,normalized:n,isResponsive(s){const a=Object.keys(s);return a.length>0&&a.every(l=>i.has(l))},asObject:fN(e),asArray:KU(e),details:r,get(s){return r.find(a=>a.breakpoint===s)},media:[null,...n.map(s=>Q0(s)).slice(1)],toArrayValue(s){if(!vi(s))throw new Error("toArrayValue: value must be an object");const a=o.map(l=>{var u;return(u=s[l])!=null?u:null});for(;WWe(a)===null;)a.pop();return a},toObjectValue(s){if(!Array.isArray(s))throw new Error("toObjectValue: value must be an array");return s.reduce((a,l,u)=>{const c=o[u];return c!=null&&l!=null&&(a[c]=l),a},{})}}}var jn={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},iu=e=>Hae(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Za=e=>Hae(t=>e(t,"~ &"),"[data-peer]",".peer"),Hae=(e,...t)=>t.map(e).join(", "),k_={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:iu(jn.hover),_peerHover:Za(jn.hover),_groupFocus:iu(jn.focus),_peerFocus:Za(jn.focus),_groupFocusVisible:iu(jn.focusVisible),_peerFocusVisible:Za(jn.focusVisible),_groupActive:iu(jn.active),_peerActive:Za(jn.active),_groupDisabled:iu(jn.disabled),_peerDisabled:Za(jn.disabled),_groupInvalid:iu(jn.invalid),_peerInvalid:Za(jn.invalid),_groupChecked:iu(jn.checked),_peerChecked:Za(jn.checked),_groupFocusWithin:iu(jn.focusWithin),_peerFocusWithin:Za(jn.focusWithin),_peerPlaceholderShown:Za(jn.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},qae=Object.keys(k_);function JU(e,t){return Se(String(e).replace(/\./g,"-"),void 0,t)}function YWe(e,t){let n={};const r={};for(const[i,o]of Object.entries(e)){const{isSemantic:s,value:a}=o,{variable:l,reference:u}=JU(i,t==null?void 0:t.cssVarPrefix);if(!s){if(i.startsWith("space")){const d=i.split("."),[h,...p]=d,g=`${h}.-${p.join(".")}`,m=Cf.negate(a),y=Cf.negate(u);r[g]={value:m,var:l,varRef:y}}n[l]=a,r[i]={value:a,var:l,varRef:u};continue}const c=d=>{const p=[String(i).split(".")[0],d].join(".");if(!e[p])return d;const{reference:m}=JU(p,t==null?void 0:t.cssVarPrefix);return m},f=vi(a)?a:{default:a};n=Po(n,Object.entries(f).reduce((d,[h,p])=>{var g,m;if(!p)return d;const y=c(`${p}`);if(h==="default")return d[l]=y,d;const v=(m=(g=k_)==null?void 0:g[h])!=null?m:h;return d[v]={[l]:y},d},{})),r[i]={value:u,var:l,varRef:u}}return{cssVars:n,cssMap:r}}function XWe(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}function KWe(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function QWe(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function ZU(e,t,n={}){const{stop:r,getKey:i}=n;function o(s,a=[]){var l;if(QWe(s)||Array.isArray(s)){const u={};for(const[c,f]of Object.entries(s)){const d=(l=i==null?void 0:i(c))!=null?l:c,h=[...a,d];if(r!=null&&r(s,h))return t(s,a);u[d]=o(f,h)}return u}return t(s,a)}return o(e)}var JWe=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function ZWe(e){return KWe(e,JWe)}function eHe(e){return e.semanticTokens}function tHe(e){const{__cssMap:t,__cssVars:n,__breakpoints:r,...i}=e;return i}var nHe=e=>qae.includes(e)||e==="default";function rHe({tokens:e,semanticTokens:t}){const n={};return ZU(e,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!1,value:r})}),ZU(t,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!0,value:r})},{stop:r=>Object.keys(r).every(nHe)}),n}function iHe(e){var t;const n=tHe(e),r=ZWe(n),i=eHe(n),o=rHe({tokens:r,semanticTokens:i}),s=(t=n.config)==null?void 0:t.cssVarPrefix,{cssMap:a,cssVars:l}=YWe(o,{cssVarPrefix:s});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...l},__cssMap:a,__breakpoints:GWe(n.breakpoints)}),n}var dN=Po({},z2,rt,xWe,hC,go,wWe,PWe,SWe,Uae,TWe,Fy,wP,Pt,DWe,OWe,FWe,MWe,CWe,RWe),oHe=Object.assign({},Pt,go,hC,Uae,Fy),sHe=Object.keys(oHe),aHe=[...Object.keys(dN),...qae],lHe={...dN,...k_},uHe=e=>e in lHe,cHe=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:r,media:i}=t.__breakpoints,o={};for(const s in e){let a=ha(e[s],t);if(a==null)continue;if(a=vi(a)&&n(a)?r(a):a,!Array.isArray(a)){o[s]=a;continue}const l=a.slice(0,i.length).length;for(let u=0;u<l;u+=1){const c=i==null?void 0:i[u];if(!c){o[s]=a[u];continue}o[c]=o[c]||{},a[u]!=null&&(o[c][s]=a[u])}}return o};function fHe(e){const t=[];let n="",r=!1;for(let i=0;i<e.length;i++){const o=e[i];o==="("?(r=!0,n+=o):o===")"?(r=!1,n+=o):o===","&&!r?(t.push(n),n=""):n+=o}return n=n.trim(),n&&t.push(n),t}function dHe(e){return/^var\(--.+\)$/.test(e)}var hHe=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!dHe(t),pHe=(e,t)=>{var n,r;if(t==null)return t;const i=l=>{var u,c;return(c=(u=e.__cssMap)==null?void 0:u[l])==null?void 0:c.varRef},o=l=>{var u;return(u=i(l))!=null?u:l},[s,a]=fHe(t);return t=(r=(n=i(s))!=null?n:o(a))!=null?r:o(t),t};function gHe(e){const{configs:t={},pseudos:n={},theme:r}=e,i=(o,s=!1)=>{var a,l,u;const c=ha(o,r),f=cHe(c)(r);let d={};for(let h in f){const p=f[h];let g=ha(p,r);h in n&&(h=n[h]),hHe(h,g)&&(g=pHe(r,g));let m=t[h];if(m===!0&&(m={property:h}),vi(g)){d[h]=(a=d[h])!=null?a:{},d[h]=Po({},d[h],i(g,!0));continue}let y=(u=(l=m==null?void 0:m.transform)==null?void 0:l.call(m,g,r,c))!=null?u:g;y=m!=null&&m.processResult?i(y,!0):y;const v=ha(m==null?void 0:m.property,r);if(!s&&(m!=null&&m.static)){const b=ha(m.static,r);d=Po({},d,b)}if(v&&Array.isArray(v)){for(const b of v)d[b]=y;continue}if(v){v==="&"&&vi(y)?d=Po({},d,y):d[v]=y;continue}if(vi(y)){d=Po({},d,y);continue}d[h]=y}return d};return i}var Gae=e=>t=>gHe({theme:t,pseudos:k_,configs:dN})(e);function $t(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function mHe(e,t){if(Array.isArray(e))return e;if(vi(e))return t(e);if(e!=null)return[e]}function yHe(e,t){for(let n=t+1;n<e.length;n++)if(e[n]!=null)return n;return-1}function vHe(e){const t=e.__breakpoints;return function(r,i,o,s){var a,l;if(!t)return;const u={},c=mHe(o,t.toArrayValue);if(!c)return u;const f=c.length,d=f===1,h=!!r.parts;for(let p=0;p<f;p++){const g=t.details[p],m=t.details[yHe(c,p)],y=Q0(g.minW,m==null?void 0:m._minW),v=ha((a=r[i])==null?void 0:a[c[p]],s);if(v){if(h){(l=r.parts)==null||l.forEach(b=>{Po(u,{[b]:d?v[b]:{[y]:v[b]}})});continue}if(!h){d?Po(u,v):u[y]=v;continue}u[y]=v}}return u}}function bHe(e){return t=>{var n;const{variant:r,size:i,theme:o}=t,s=vHe(o);return Po({},ha((n=e.baseStyle)!=null?n:{},t),s(e,"sizes",i,t),s(e,"variants",r,t))}}function $r(e){return XWe(e,["styleConfig","size","variant","colorScheme"])}var xHe=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function wHe(e){return vi(e)?xHe.every(t=>Object.prototype.hasOwnProperty.call(e,t)):!1}var SHe={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},CHe={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},kHe={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},EHe={property:SHe,easing:CHe,duration:kHe},_He=EHe,$He={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},AHe=$He,THe={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},PHe=THe,FHe={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},MHe=FHe,RHe={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},OHe=RHe,DHe={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},NHe=DHe,LHe={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},IHe=LHe,zHe={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},BHe=zHe,jHe={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},Yae=jHe,Xae={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},UHe={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},VHe={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},WHe={...Xae,...UHe,container:VHe},Kae=WHe,HHe={breakpoints:MHe,zIndices:AHe,radii:NHe,blur:BHe,colors:OHe,...Yae,sizes:Kae,shadows:IHe,space:Xae,borders:PHe,transition:_He},{defineMultiStyleConfig:qHe,definePartsStyle:J0}=$t(["stepper","step","title","description","indicator","separator","icon","number"]),ll=Se("stepper-indicator-size"),np=Se("stepper-icon-size"),rp=Se("stepper-title-font-size"),Z0=Se("stepper-description-font-size"),d0=Se("stepper-accent-color"),GHe=J0(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[d0.variable]:`colors.${e}.500`,_dark:{[d0.variable]:`colors.${e}.200`}},title:{fontSize:rp.reference,fontWeight:"medium"},description:{fontSize:Z0.reference,color:"chakra-subtle-text"},number:{fontSize:rp.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:np.reference,height:np.reference},indicator:{flexShrink:0,borderRadius:"full",width:ll.reference,height:ll.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:d0.reference},"&[data-status=complete]":{bg:d0.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:d0.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${ll.reference} - 8px)`,top:`calc(${ll.reference} + 4px)`,insetStart:`calc(${ll.reference} / 2 - 1px)`}}})),YHe=qHe({baseStyle:GHe,sizes:{xs:J0({stepper:{[ll.variable]:"sizes.4",[np.variable]:"sizes.3",[rp.variable]:"fontSizes.xs",[Z0.variable]:"fontSizes.xs"}}),sm:J0({stepper:{[ll.variable]:"sizes.6",[np.variable]:"sizes.4",[rp.variable]:"fontSizes.sm",[Z0.variable]:"fontSizes.xs"}}),md:J0({stepper:{[ll.variable]:"sizes.8",[np.variable]:"sizes.5",[rp.variable]:"fontSizes.md",[Z0.variable]:"fontSizes.sm"}}),lg:J0({stepper:{[ll.variable]:"sizes.10",[np.variable]:"sizes.6",[rp.variable]:"fontSizes.lg",[Z0.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function lt(e,t={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...c){r();for(const f of c)t[f]=l(f);return lt(e,t)}function o(...c){for(const f of c)f in t||(t[f]=l(f));return lt(e,t)}function s(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.selector]))}function a(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.className]))}function l(c){const h=`chakra-${(["container","root"].includes(c??"")?[e]:[e,c]).filter(Boolean).join("__")}`;return{className:h,selector:`.${h}`,toString:()=>c}}return{parts:i,toPart:l,extend:o,selectors:s,classnames:a,get keys(){return Object.keys(t)},__type:{}}}var XHe=lt("accordion").parts("root","container","button","panel").extend("icon"),KHe=lt("alert").parts("title","description","container").extend("icon","spinner"),QHe=lt("avatar").parts("label","badge","container").extend("excessLabel","group"),JHe=lt("breadcrumb").parts("link","item","container").extend("separator");lt("button").parts();var ZHe=lt("checkbox").parts("control","icon","container").extend("label");lt("progress").parts("track","filledTrack").extend("label");var eqe=lt("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),tqe=lt("editable").parts("preview","input","textarea"),nqe=lt("form").parts("container","requiredIndicator","helperText"),rqe=lt("formError").parts("text","icon"),iqe=lt("input").parts("addon","field","element","group"),oqe=lt("list").parts("container","item","icon"),sqe=lt("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),aqe=lt("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),lqe=lt("numberinput").parts("root","field","stepperGroup","stepper");lt("pininput").parts("field");var uqe=lt("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),cqe=lt("progress").parts("label","filledTrack","track"),fqe=lt("radio").parts("container","control","label"),dqe=lt("select").parts("field","icon"),hqe=lt("slider").parts("container","track","thumb","filledTrack","mark"),pqe=lt("stat").parts("container","label","helpText","number","icon"),gqe=lt("switch").parts("container","track","thumb","label"),mqe=lt("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),yqe=lt("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),vqe=lt("tag").parts("container","label","closeButton"),bqe=lt("card").parts("container","header","body","footer");lt("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function Mf(e,t,n){return Math.min(Math.max(e,n),t)}class xqe extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var ey=xqe;function hN(e){if(typeof e!="string")throw new ey(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=Aqe.test(e)?Cqe(e):e;const n=kqe.exec(t);if(n){const s=Array.from(n).slice(1);return[...s.slice(0,3).map(a=>parseInt(B1(a,2),16)),parseInt(B1(s[3]||"f",2),16)/255]}const r=Eqe.exec(t);if(r){const s=Array.from(r).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,16)),parseInt(s[3]||"ff",16)/255]}const i=_qe.exec(t);if(i){const s=Array.from(i).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,10)),parseFloat(s[3]||"1")]}const o=$qe.exec(t);if(o){const[s,a,l,u]=Array.from(o).slice(1).map(parseFloat);if(Mf(0,100,a)!==a)throw new ey(e);if(Mf(0,100,l)!==l)throw new ey(e);return[...Tqe(s,a,l),Number.isNaN(u)?1:u]}throw new ey(e)}function wqe(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const eV=e=>parseInt(e.replace(/_/g,""),36),Sqe="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=eV(t.substring(0,3)),r=eV(t.substring(3)).toString(16);let i="";for(let o=0;o<6-r.length;o++)i+="0";return e[n]=`${i}${r}`,e},{});function Cqe(e){const t=e.toLowerCase().trim(),n=Sqe[wqe(t)];if(!n)throw new ey(e);return`#${n}`}const B1=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),kqe=new RegExp(`^#${B1("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Eqe=new RegExp(`^#${B1("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),_qe=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${B1(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),$qe=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Aqe=/^[a-z]+$/i,tV=e=>Math.round(e*255),Tqe=(e,t,n)=>{let r=n/100;if(t===0)return[r,r,r].map(tV);const i=(e%360+360)%360/60,o=(1-Math.abs(2*r-1))*(t/100),s=o*(1-Math.abs(i%2-1));let a=0,l=0,u=0;i>=0&&i<1?(a=o,l=s):i>=1&&i<2?(a=s,l=o):i>=2&&i<3?(l=o,u=s):i>=3&&i<4?(l=s,u=o):i>=4&&i<5?(a=s,u=o):i>=5&&i<6&&(a=o,u=s);const c=r-o/2,f=a+c,d=l+c,h=u+c;return[f,d,h].map(tV)};function Pqe(e,t,n,r){return`rgba(${Mf(0,255,e).toFixed()}, ${Mf(0,255,t).toFixed()}, ${Mf(0,255,n).toFixed()}, ${parseFloat(Mf(0,1,r).toFixed(3))})`}function Fqe(e,t){const[n,r,i,o]=hN(e);return Pqe(n,r,i,o-t)}function Mqe(e){const[t,n,r,i]=hN(e);let o=s=>{const a=Mf(0,255,s).toString(16);return a.length===1?`0${a}`:a};return`#${o(t)}${o(n)}${o(r)}${i<1?o(Math.round(i*255)):""}`}function Rqe(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var Oqe=e=>Object.keys(e).length===0,Hr=(e,t,n)=>{const r=Rqe(e,`colors.${t}`,t);try{return Mqe(r),r}catch{return n??"#000000"}},Dqe=e=>{const[t,n,r]=hN(e);return(t*299+n*587+r*114)/1e3},Nqe=e=>t=>{const n=Hr(t,e);return Dqe(n)<128?"dark":"light"},Lqe=e=>t=>Nqe(e)(t)==="dark",Vg=(e,t)=>n=>{const r=Hr(n,e);return Fqe(r,1-t)};function nV(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var Iqe=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function zqe(e){const t=Iqe();return!e||Oqe(e)?t:e.string&&e.colors?jqe(e.string,e.colors):e.string&&!e.colors?Bqe(e.string):e.colors&&!e.string?Uqe(e.colors):t}function Bqe(e){let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t=t&t;let n="#";for(let r=0;r<3;r+=1){const i=t>>r*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function jqe(e,t){let n=0;if(e.length===0)return t[0];for(let r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%t.length+t.length)%t.length,t[n]}function Uqe(e){return e[Math.floor(Math.random()*e.length)]}function ke(e,t){return n=>n.colorMode==="dark"?t:e}function pN(e){const{orientation:t,vertical:n,horizontal:r}=e;return t?t==="vertical"?n:r:{}}function Qae(e){return vi(e)&&e.reference?e.reference:String(e)}var E_=(e,...t)=>t.map(Qae).join(` ${e} `).replace(/calc/g,""),rV=(...e)=>`calc(${E_("+",...e)})`,iV=(...e)=>`calc(${E_("-",...e)})`,kP=(...e)=>`calc(${E_("*",...e)})`,oV=(...e)=>`calc(${E_("/",...e)})`,sV=e=>{const t=Qae(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:kP(t,-1)},ul=Object.assign(e=>({add:(...t)=>ul(rV(e,...t)),subtract:(...t)=>ul(iV(e,...t)),multiply:(...t)=>ul(kP(e,...t)),divide:(...t)=>ul(oV(e,...t)),negate:()=>ul(sV(e)),toString:()=>e.toString()}),{add:rV,subtract:iV,multiply:kP,divide:oV,negate:sV});function Vqe(e){return!Number.isInteger(parseFloat(e.toString()))}function Wqe(e,t="-"){return e.replace(/\s+/g,t)}function Jae(e){const t=Wqe(e.toString());return t.includes("\\.")?e:Vqe(e)?t.replace(".","\\."):e}function Hqe(e,t=""){return[t,Jae(e)].filter(Boolean).join("-")}function qqe(e,t){return`var(${Jae(e)}${t?`, ${t}`:""})`}function Gqe(e,t=""){return`--${Hqe(e,t)}`}function _n(e,t){const n=Gqe(e,void 0);return{variable:n,reference:qqe(n,Yqe(void 0))}}function Yqe(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:Xqe,definePartsStyle:B2}=$t(gqe.keys),My=_n("switch-track-width"),ed=_n("switch-track-height"),g3=_n("switch-track-diff"),Kqe=ul.subtract(My,ed),EP=_n("switch-thumb-x"),h0=_n("switch-bg"),Qqe=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[My.reference],height:[ed.reference],transitionProperty:"common",transitionDuration:"fast",[h0.variable]:"colors.gray.300",_dark:{[h0.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[h0.variable]:`colors.${t}.500`,_dark:{[h0.variable]:`colors.${t}.200`}},bg:h0.reference}},Jqe={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[ed.reference],height:[ed.reference],_checked:{transform:`translateX(${EP.reference})`}},Zqe=B2(e=>({container:{[g3.variable]:Kqe,[EP.variable]:g3.reference,_rtl:{[EP.variable]:ul(g3).negate().toString()}},track:Qqe(e),thumb:Jqe})),eGe={sm:B2({container:{[My.variable]:"1.375rem",[ed.variable]:"sizes.3"}}),md:B2({container:{[My.variable]:"1.875rem",[ed.variable]:"sizes.4"}}),lg:B2({container:{[My.variable]:"2.875rem",[ed.variable]:"sizes.6"}})},tGe=Xqe({baseStyle:Zqe,sizes:eGe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:nGe,definePartsStyle:Tp}=$t(mqe.keys),rGe=Tp({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),pC={"&[data-is-numeric=true]":{textAlign:"end"}},iGe=Tp(e=>{const{colorScheme:t}=e;return{th:{color:ke("gray.600","gray.400")(e),borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...pC},td:{borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...pC},caption:{color:ke("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),oGe=Tp(e=>{const{colorScheme:t}=e;return{th:{color:ke("gray.600","gray.400")(e),borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...pC},td:{borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...pC},caption:{color:ke("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e)},td:{background:ke(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),sGe={simple:iGe,striped:oGe,unstyled:{}},aGe={sm:Tp({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Tp({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Tp({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},lGe=nGe({baseStyle:rGe,variants:sGe,sizes:aGe,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),ci=Se("tabs-color"),fs=Se("tabs-bg"),Lx=Se("tabs-border-color"),{defineMultiStyleConfig:uGe,definePartsStyle:ka}=$t(yqe.keys),cGe=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},fGe=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},dGe=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:n==="vertical"?"column":"row"}},hGe={p:4},pGe=ka(e=>({root:cGe(e),tab:fGe(e),tablist:dGe(e),tabpanel:hGe})),gGe={sm:ka({tab:{py:1,px:4,fontSize:"sm"}}),md:ka({tab:{fontSize:"md",py:2,px:4}}),lg:ka({tab:{fontSize:"lg",py:3,px:4}})},mGe=ka(e=>{const{colorScheme:t,orientation:n}=e,r=n==="vertical",i=r?"borderStart":"borderBottom",o=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[ci.variable]:`colors.${t}.600`,_dark:{[ci.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[fs.variable]:"colors.gray.200",_dark:{[fs.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:ci.reference,bg:fs.reference}}}),yGe=ka(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[Lx.variable]:"transparent",_selected:{[ci.variable]:`colors.${t}.600`,[Lx.variable]:"colors.white",_dark:{[ci.variable]:`colors.${t}.300`,[Lx.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:Lx.reference},color:ci.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),vGe=ka(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[fs.variable]:"colors.gray.50",_dark:{[fs.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[fs.variable]:"colors.white",[ci.variable]:`colors.${t}.600`,_dark:{[fs.variable]:"colors.gray.800",[ci.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:ci.reference,bg:fs.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),bGe=ka(e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Hr(n,`${t}.700`),bg:Hr(n,`${t}.100`)}}}}),xGe=ka(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[ci.variable]:"colors.gray.600",_dark:{[ci.variable]:"inherit"},_selected:{[ci.variable]:"colors.white",[fs.variable]:`colors.${t}.600`,_dark:{[ci.variable]:"colors.gray.800",[fs.variable]:`colors.${t}.300`}},color:ci.reference,bg:fs.reference}}}),wGe=ka({}),SGe={line:mGe,enclosed:yGe,"enclosed-colored":vGe,"soft-rounded":bGe,"solid-rounded":xGe,unstyled:wGe},CGe=uGe({baseStyle:pGe,sizes:gGe,variants:SGe,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),on=VWe("badge",["bg","color","shadow"]),kGe={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:on.bg.reference,color:on.color.reference,boxShadow:on.shadow.reference},EGe=e=>{const{colorScheme:t,theme:n}=e,r=Vg(`${t}.500`,.6)(n);return{[on.bg.variable]:`colors.${t}.500`,[on.color.variable]:"colors.white",_dark:{[on.bg.variable]:r,[on.color.variable]:"colors.whiteAlpha.800"}}},_Ge=e=>{const{colorScheme:t,theme:n}=e,r=Vg(`${t}.200`,.16)(n);return{[on.bg.variable]:`colors.${t}.100`,[on.color.variable]:`colors.${t}.800`,_dark:{[on.bg.variable]:r,[on.color.variable]:`colors.${t}.200`}}},$Ge=e=>{const{colorScheme:t,theme:n}=e,r=Vg(`${t}.200`,.8)(n);return{[on.color.variable]:`colors.${t}.500`,_dark:{[on.color.variable]:r},[on.shadow.variable]:`inset 0 0 0px 1px ${on.color.reference}`}},AGe={solid:EGe,subtle:_Ge,outline:$Ge},Ry={baseStyle:kGe,variants:AGe,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:TGe,definePartsStyle:td}=$t(vqe.keys),aV=Se("tag-bg"),lV=Se("tag-color"),m3=Se("tag-shadow"),j2=Se("tag-min-height"),U2=Se("tag-min-width"),V2=Se("tag-font-size"),W2=Se("tag-padding-inline"),PGe={fontWeight:"medium",lineHeight:1.2,outline:0,[lV.variable]:on.color.reference,[aV.variable]:on.bg.reference,[m3.variable]:on.shadow.reference,color:lV.reference,bg:aV.reference,boxShadow:m3.reference,borderRadius:"md",minH:j2.reference,minW:U2.reference,fontSize:V2.reference,px:W2.reference,_focusVisible:{[m3.variable]:"shadows.outline"}},FGe={lineHeight:1.2,overflow:"visible"},MGe={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},RGe=td({container:PGe,label:FGe,closeButton:MGe}),OGe={sm:td({container:{[j2.variable]:"sizes.5",[U2.variable]:"sizes.5",[V2.variable]:"fontSizes.xs",[W2.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:td({container:{[j2.variable]:"sizes.6",[U2.variable]:"sizes.6",[V2.variable]:"fontSizes.sm",[W2.variable]:"space.2"}}),lg:td({container:{[j2.variable]:"sizes.8",[U2.variable]:"sizes.8",[V2.variable]:"fontSizes.md",[W2.variable]:"space.3"}})},DGe={subtle:td(e=>{var t;return{container:(t=Ry.variants)==null?void 0:t.subtle(e)}}),solid:td(e=>{var t;return{container:(t=Ry.variants)==null?void 0:t.solid(e)}}),outline:td(e=>{var t;return{container:(t=Ry.variants)==null?void 0:t.outline(e)}})},NGe=TGe({variants:DGe,baseStyle:RGe,sizes:OGe,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:yl,defineMultiStyleConfig:LGe}=$t(iqe.keys),ip=Se("input-height"),op=Se("input-font-size"),sp=Se("input-padding"),ap=Se("input-border-radius"),IGe=yl({addon:{height:ip.reference,fontSize:op.reference,px:sp.reference,borderRadius:ap.reference},field:{width:"100%",height:ip.reference,fontSize:op.reference,px:sp.reference,borderRadius:ap.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),ou={lg:{[op.variable]:"fontSizes.lg",[sp.variable]:"space.4",[ap.variable]:"radii.md",[ip.variable]:"sizes.12"},md:{[op.variable]:"fontSizes.md",[sp.variable]:"space.4",[ap.variable]:"radii.md",[ip.variable]:"sizes.10"},sm:{[op.variable]:"fontSizes.sm",[sp.variable]:"space.3",[ap.variable]:"radii.sm",[ip.variable]:"sizes.8"},xs:{[op.variable]:"fontSizes.xs",[sp.variable]:"space.2",[ap.variable]:"radii.sm",[ip.variable]:"sizes.6"}},zGe={lg:yl({field:ou.lg,group:ou.lg}),md:yl({field:ou.md,group:ou.md}),sm:yl({field:ou.sm,group:ou.sm}),xs:yl({field:ou.xs,group:ou.xs})};function gN(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||ke("blue.500","blue.300")(e),errorBorderColor:n||ke("red.500","red.300")(e)}}var BGe=yl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=gN(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:ke("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Hr(t,r),boxShadow:`0 0 0 1px ${Hr(t,r)}`},_focusVisible:{zIndex:1,borderColor:Hr(t,n),boxShadow:`0 0 0 1px ${Hr(t,n)}`}},addon:{border:"1px solid",borderColor:ke("inherit","whiteAlpha.50")(e),bg:ke("gray.100","whiteAlpha.300")(e)}}}),jGe=yl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=gN(e);return{field:{border:"2px solid",borderColor:"transparent",bg:ke("gray.100","whiteAlpha.50")(e),_hover:{bg:ke("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Hr(t,r)},_focusVisible:{bg:"transparent",borderColor:Hr(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:ke("gray.100","whiteAlpha.50")(e)}}}),UGe=yl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=gN(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Hr(t,r),boxShadow:`0px 1px 0px 0px ${Hr(t,r)}`},_focusVisible:{borderColor:Hr(t,n),boxShadow:`0px 1px 0px 0px ${Hr(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),VGe=yl({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),WGe={outline:BGe,filled:jGe,flushed:UGe,unstyled:VGe},st=LGe({baseStyle:IGe,sizes:zGe,variants:WGe,defaultProps:{size:"md",variant:"outline"}}),uV,HGe={...(uV=st.baseStyle)==null?void 0:uV.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},cV,fV,qGe={outline:e=>{var t,n;return(n=(t=st.variants)==null?void 0:t.outline(e).field)!=null?n:{}},flushed:e=>{var t,n;return(n=(t=st.variants)==null?void 0:t.flushed(e).field)!=null?n:{}},filled:e=>{var t,n;return(n=(t=st.variants)==null?void 0:t.filled(e).field)!=null?n:{}},unstyled:(fV=(cV=st.variants)==null?void 0:cV.unstyled.field)!=null?fV:{}},dV,hV,pV,gV,mV,yV,vV,bV,GGe={xs:(hV=(dV=st.sizes)==null?void 0:dV.xs.field)!=null?hV:{},sm:(gV=(pV=st.sizes)==null?void 0:pV.sm.field)!=null?gV:{},md:(yV=(mV=st.sizes)==null?void 0:mV.md.field)!=null?yV:{},lg:(bV=(vV=st.sizes)==null?void 0:vV.lg.field)!=null?bV:{}},YGe={baseStyle:HGe,sizes:GGe,variants:qGe,defaultProps:{size:"md",variant:"outline"}},Ix=_n("tooltip-bg"),y3=_n("tooltip-fg"),XGe=_n("popper-arrow-bg"),KGe={bg:Ix.reference,color:y3.reference,[Ix.variable]:"colors.gray.700",[y3.variable]:"colors.whiteAlpha.900",_dark:{[Ix.variable]:"colors.gray.300",[y3.variable]:"colors.gray.900"},[XGe.variable]:Ix.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},QGe={baseStyle:KGe},{defineMultiStyleConfig:JGe,definePartsStyle:ty}=$t(cqe.keys),ZGe=e=>{const{colorScheme:t,theme:n,isIndeterminate:r,hasStripe:i}=e,o=ke(nV(),nV("1rem","rgba(0,0,0,0.1)"))(e),s=ke(`${t}.500`,`${t}.200`)(e),a=`linear-gradient(
    to right,
    transparent 0%,
    ${Hr(n,s)} 50%,
    transparent 100%
  )`;return{...!r&&i&&o,...r?{bgImage:a}:{bgColor:s}}},eYe={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},tYe=e=>({bg:ke("gray.100","whiteAlpha.300")(e)}),nYe=e=>({transitionProperty:"common",transitionDuration:"slow",...ZGe(e)}),rYe=ty(e=>({label:eYe,filledTrack:nYe(e),track:tYe(e)})),iYe={xs:ty({track:{h:"1"}}),sm:ty({track:{h:"2"}}),md:ty({track:{h:"3"}}),lg:ty({track:{h:"4"}})},oYe=JGe({sizes:iYe,baseStyle:rYe,defaultProps:{size:"md",colorScheme:"blue"}}),sYe=e=>typeof e=="function";function Xr(e,...t){return sYe(e)?e(...t):e}var{definePartsStyle:H2,defineMultiStyleConfig:aYe}=$t(ZHe.keys),Oy=Se("checkbox-size"),lYe=e=>{const{colorScheme:t}=e;return{w:Oy.reference,h:Oy.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:ke(`${t}.500`,`${t}.200`)(e),borderColor:ke(`${t}.500`,`${t}.200`)(e),color:ke("white","gray.900")(e),_hover:{bg:ke(`${t}.600`,`${t}.300`)(e),borderColor:ke(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:ke("gray.200","transparent")(e),bg:ke("gray.200","whiteAlpha.300")(e),color:ke("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:ke(`${t}.500`,`${t}.200`)(e),borderColor:ke(`${t}.500`,`${t}.200`)(e),color:ke("white","gray.900")(e)},_disabled:{bg:ke("gray.100","whiteAlpha.100")(e),borderColor:ke("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:ke("red.500","red.300")(e)}}},uYe={_disabled:{cursor:"not-allowed"}},cYe={userSelect:"none",_disabled:{opacity:.4}},fYe={transitionProperty:"transform",transitionDuration:"normal"},dYe=H2(e=>({icon:fYe,container:uYe,control:Xr(lYe,e),label:cYe})),hYe={sm:H2({control:{[Oy.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:H2({control:{[Oy.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:H2({control:{[Oy.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},gC=aYe({baseStyle:dYe,sizes:hYe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:pYe,definePartsStyle:q2}=$t(fqe.keys),gYe=e=>{var t;const n=(t=Xr(gC.baseStyle,e))==null?void 0:t.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},mYe=q2(e=>{var t,n,r,i;return{label:(n=(t=gC).baseStyle)==null?void 0:n.call(t,e).label,container:(i=(r=gC).baseStyle)==null?void 0:i.call(r,e).container,control:gYe(e)}}),yYe={md:q2({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:q2({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:q2({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},vYe=pYe({baseStyle:mYe,sizes:yYe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:bYe,definePartsStyle:xYe}=$t(dqe.keys),zx=Se("select-bg"),xV,wYe={...(xV=st.baseStyle)==null?void 0:xV.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:zx.reference,[zx.variable]:"colors.white",_dark:{[zx.variable]:"colors.gray.700"},"> option, > optgroup":{bg:zx.reference}},SYe={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},CYe=xYe({field:wYe,icon:SYe}),Bx={paddingInlineEnd:"8"},wV,SV,CV,kV,EV,_V,$V,AV,kYe={lg:{...(wV=st.sizes)==null?void 0:wV.lg,field:{...(SV=st.sizes)==null?void 0:SV.lg.field,...Bx}},md:{...(CV=st.sizes)==null?void 0:CV.md,field:{...(kV=st.sizes)==null?void 0:kV.md.field,...Bx}},sm:{...(EV=st.sizes)==null?void 0:EV.sm,field:{...(_V=st.sizes)==null?void 0:_V.sm.field,...Bx}},xs:{...($V=st.sizes)==null?void 0:$V.xs,field:{...(AV=st.sizes)==null?void 0:AV.xs.field,...Bx},icon:{insetEnd:"1"}}},EYe=bYe({baseStyle:CYe,sizes:kYe,variants:st.variants,defaultProps:st.defaultProps}),v3=Se("skeleton-start-color"),b3=Se("skeleton-end-color"),_Ye={[v3.variable]:"colors.gray.100",[b3.variable]:"colors.gray.400",_dark:{[v3.variable]:"colors.gray.800",[b3.variable]:"colors.gray.600"},background:v3.reference,borderColor:b3.reference,opacity:.7,borderRadius:"sm"},$Ye={baseStyle:_Ye},x3=Se("skip-link-bg"),AYe={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[x3.variable]:"colors.white",_dark:{[x3.variable]:"colors.gray.700"},bg:x3.reference}},TYe={baseStyle:AYe},{defineMultiStyleConfig:PYe,definePartsStyle:__}=$t(hqe.keys),j1=Se("slider-thumb-size"),U1=Se("slider-track-size"),ku=Se("slider-bg"),FYe=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...pN({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},MYe=e=>({...pN({orientation:e.orientation,horizontal:{h:U1.reference},vertical:{w:U1.reference}}),overflow:"hidden",borderRadius:"sm",[ku.variable]:"colors.gray.200",_dark:{[ku.variable]:"colors.whiteAlpha.200"},_disabled:{[ku.variable]:"colors.gray.300",_dark:{[ku.variable]:"colors.whiteAlpha.300"}},bg:ku.reference}),RYe=e=>{const{orientation:t}=e;return{...pN({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:j1.reference,h:j1.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},OYe=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[ku.variable]:`colors.${t}.500`,_dark:{[ku.variable]:`colors.${t}.200`},bg:ku.reference}},DYe=__(e=>({container:FYe(e),track:MYe(e),thumb:RYe(e),filledTrack:OYe(e)})),NYe=__({container:{[j1.variable]:"sizes.4",[U1.variable]:"sizes.1"}}),LYe=__({container:{[j1.variable]:"sizes.3.5",[U1.variable]:"sizes.1"}}),IYe=__({container:{[j1.variable]:"sizes.2.5",[U1.variable]:"sizes.0.5"}}),zYe={lg:NYe,md:LYe,sm:IYe},BYe=PYe({baseStyle:DYe,sizes:zYe,defaultProps:{size:"md",colorScheme:"blue"}}),kf=_n("spinner-size"),jYe={width:[kf.reference],height:[kf.reference]},UYe={xs:{[kf.variable]:"sizes.3"},sm:{[kf.variable]:"sizes.4"},md:{[kf.variable]:"sizes.6"},lg:{[kf.variable]:"sizes.8"},xl:{[kf.variable]:"sizes.12"}},VYe={baseStyle:jYe,sizes:UYe,defaultProps:{size:"md"}},{defineMultiStyleConfig:WYe,definePartsStyle:Zae}=$t(pqe.keys),HYe={fontWeight:"medium"},qYe={opacity:.8,marginBottom:"2"},GYe={verticalAlign:"baseline",fontWeight:"semibold"},YYe={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},XYe=Zae({container:{},label:HYe,helpText:qYe,number:GYe,icon:YYe}),KYe={md:Zae({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},QYe=WYe({baseStyle:XYe,sizes:KYe,defaultProps:{size:"md"}}),w3=Se("kbd-bg"),JYe={[w3.variable]:"colors.gray.100",_dark:{[w3.variable]:"colors.whiteAlpha.100"},bg:w3.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},ZYe={baseStyle:JYe},eXe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},tXe={baseStyle:eXe},{defineMultiStyleConfig:nXe,definePartsStyle:rXe}=$t(oqe.keys),iXe={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},oXe=rXe({icon:iXe}),sXe=nXe({baseStyle:oXe}),{defineMultiStyleConfig:aXe,definePartsStyle:lXe}=$t(sqe.keys),Js=Se("menu-bg"),S3=Se("menu-shadow"),uXe={[Js.variable]:"#fff",[S3.variable]:"shadows.sm",_dark:{[Js.variable]:"colors.gray.700",[S3.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:Js.reference,boxShadow:S3.reference},cXe={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Js.variable]:"colors.gray.100",_dark:{[Js.variable]:"colors.whiteAlpha.100"}},_active:{[Js.variable]:"colors.gray.200",_dark:{[Js.variable]:"colors.whiteAlpha.200"}},_expanded:{[Js.variable]:"colors.gray.100",_dark:{[Js.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Js.reference},fXe={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},dXe={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},hXe={opacity:.6},pXe={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},gXe={transitionProperty:"common",transitionDuration:"normal"},mXe=lXe({button:gXe,list:uXe,item:cXe,groupTitle:fXe,icon:dXe,command:hXe,divider:pXe}),yXe=aXe({baseStyle:mXe}),{defineMultiStyleConfig:vXe,definePartsStyle:_P}=$t(aqe.keys),C3=Se("modal-bg"),k3=Se("modal-shadow"),bXe={bg:"blackAlpha.600",zIndex:"modal"},xXe=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},wXe=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[C3.variable]:"colors.white",[k3.variable]:"shadows.lg",_dark:{[C3.variable]:"colors.gray.700",[k3.variable]:"shadows.dark-lg"},bg:C3.reference,boxShadow:k3.reference}},SXe={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},CXe={position:"absolute",top:"2",insetEnd:"3"},kXe=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},EXe={px:"6",py:"4"},_Xe=_P(e=>({overlay:bXe,dialogContainer:Xr(xXe,e),dialog:Xr(wXe,e),header:SXe,closeButton:CXe,body:Xr(kXe,e),footer:EXe}));function Ko(e){return _P(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var $Xe={xs:Ko("xs"),sm:Ko("sm"),md:Ko("md"),lg:Ko("lg"),xl:Ko("xl"),"2xl":Ko("2xl"),"3xl":Ko("3xl"),"4xl":Ko("4xl"),"5xl":Ko("5xl"),"6xl":Ko("6xl"),full:Ko("full")},AXe=vXe({baseStyle:_Xe,sizes:$Xe,defaultProps:{size:"md"}}),{defineMultiStyleConfig:TXe,definePartsStyle:ele}=$t(lqe.keys),mN=_n("number-input-stepper-width"),tle=_n("number-input-input-padding"),PXe=ul(mN).add("0.5rem").toString(),E3=_n("number-input-bg"),_3=_n("number-input-color"),$3=_n("number-input-border-color"),FXe={[mN.variable]:"sizes.6",[tle.variable]:PXe},MXe=e=>{var t,n;return(n=(t=Xr(st.baseStyle,e))==null?void 0:t.field)!=null?n:{}},RXe={width:mN.reference},OXe={borderStart:"1px solid",borderStartColor:$3.reference,color:_3.reference,bg:E3.reference,[_3.variable]:"colors.chakra-body-text",[$3.variable]:"colors.chakra-border-color",_dark:{[_3.variable]:"colors.whiteAlpha.800",[$3.variable]:"colors.whiteAlpha.300"},_active:{[E3.variable]:"colors.gray.200",_dark:{[E3.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},DXe=ele(e=>{var t;return{root:FXe,field:(t=Xr(MXe,e))!=null?t:{},stepperGroup:RXe,stepper:OXe}});function jx(e){var t,n,r;const i=(t=st.sizes)==null?void 0:t[e],o={lg:"md",md:"md",sm:"sm",xs:"sm"},s=(r=(n=i.field)==null?void 0:n.fontSize)!=null?r:"md",a=Yae.fontSizes[s];return ele({field:{...i.field,paddingInlineEnd:tle.reference,verticalAlign:"top"},stepper:{fontSize:ul(a).multiply(.75).toString(),_first:{borderTopEndRadius:o[e]},_last:{borderBottomEndRadius:o[e],mt:"-1px",borderTopWidth:1}}})}var NXe={xs:jx("xs"),sm:jx("sm"),md:jx("md"),lg:jx("lg")},LXe=TXe({baseStyle:DXe,sizes:NXe,variants:st.variants,defaultProps:st.defaultProps}),TV,IXe={...(TV=st.baseStyle)==null?void 0:TV.field,textAlign:"center"},zXe={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},PV,FV,BXe={outline:e=>{var t,n,r;return(r=(n=Xr((t=st.variants)==null?void 0:t.outline,e))==null?void 0:n.field)!=null?r:{}},flushed:e=>{var t,n,r;return(r=(n=Xr((t=st.variants)==null?void 0:t.flushed,e))==null?void 0:n.field)!=null?r:{}},filled:e=>{var t,n,r;return(r=(n=Xr((t=st.variants)==null?void 0:t.filled,e))==null?void 0:n.field)!=null?r:{}},unstyled:(FV=(PV=st.variants)==null?void 0:PV.unstyled.field)!=null?FV:{}},jXe={baseStyle:IXe,sizes:zXe,variants:BXe,defaultProps:st.defaultProps},{defineMultiStyleConfig:UXe,definePartsStyle:VXe}=$t(uqe.keys),Ux=_n("popper-bg"),WXe=_n("popper-arrow-bg"),MV=_n("popper-arrow-shadow-color"),HXe={zIndex:10},qXe={[Ux.variable]:"colors.white",bg:Ux.reference,[WXe.variable]:Ux.reference,[MV.variable]:"colors.gray.200",_dark:{[Ux.variable]:"colors.gray.700",[MV.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},GXe={px:3,py:2,borderBottomWidth:"1px"},YXe={px:3,py:2},XXe={px:3,py:2,borderTopWidth:"1px"},KXe={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},QXe=VXe({popper:HXe,content:qXe,header:GXe,body:YXe,footer:XXe,closeButton:KXe}),JXe=UXe({baseStyle:QXe}),{definePartsStyle:$P,defineMultiStyleConfig:ZXe}=$t(eqe.keys),A3=Se("drawer-bg"),T3=Se("drawer-box-shadow");function Ah(e){return $P(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var eKe={bg:"blackAlpha.600",zIndex:"modal"},tKe={display:"flex",zIndex:"modal",justifyContent:"center"},nKe=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[A3.variable]:"colors.white",[T3.variable]:"shadows.lg",_dark:{[A3.variable]:"colors.gray.700",[T3.variable]:"shadows.dark-lg"},bg:A3.reference,boxShadow:T3.reference}},rKe={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},iKe={position:"absolute",top:"2",insetEnd:"3"},oKe={px:"6",py:"2",flex:"1",overflow:"auto"},sKe={px:"6",py:"4"},aKe=$P(e=>({overlay:eKe,dialogContainer:tKe,dialog:Xr(nKe,e),header:rKe,closeButton:iKe,body:oKe,footer:sKe})),lKe={xs:Ah("xs"),sm:Ah("md"),md:Ah("lg"),lg:Ah("2xl"),xl:Ah("4xl"),full:Ah("full")},uKe=ZXe({baseStyle:aKe,sizes:lKe,defaultProps:{size:"xs"}}),{definePartsStyle:cKe,defineMultiStyleConfig:fKe}=$t(tqe.keys),dKe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},hKe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},pKe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},gKe=cKe({preview:dKe,input:hKe,textarea:pKe}),mKe=fKe({baseStyle:gKe}),{definePartsStyle:yKe,defineMultiStyleConfig:vKe}=$t(nqe.keys),Pp=Se("form-control-color"),bKe={marginStart:"1",[Pp.variable]:"colors.red.500",_dark:{[Pp.variable]:"colors.red.300"},color:Pp.reference},xKe={mt:"2",[Pp.variable]:"colors.gray.600",_dark:{[Pp.variable]:"colors.whiteAlpha.600"},color:Pp.reference,lineHeight:"normal",fontSize:"sm"},wKe=yKe({container:{width:"100%",position:"relative"},requiredIndicator:bKe,helperText:xKe}),SKe=vKe({baseStyle:wKe}),{definePartsStyle:CKe,defineMultiStyleConfig:kKe}=$t(rqe.keys),Fp=Se("form-error-color"),EKe={[Fp.variable]:"colors.red.500",_dark:{[Fp.variable]:"colors.red.300"},color:Fp.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},_Ke={marginEnd:"0.5em",[Fp.variable]:"colors.red.500",_dark:{[Fp.variable]:"colors.red.300"},color:Fp.reference},$Ke=CKe({text:EKe,icon:_Ke}),AKe=kKe({baseStyle:$Ke}),TKe={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},PKe={baseStyle:TKe},FKe={fontFamily:"heading",fontWeight:"bold"},MKe={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},RKe={baseStyle:FKe,sizes:MKe,defaultProps:{size:"xl"}},{defineMultiStyleConfig:OKe,definePartsStyle:DKe}=$t(JHe.keys),P3=Se("breadcrumb-link-decor"),NKe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:P3.reference,[P3.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[P3.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},LKe=DKe({link:NKe}),IKe=OKe({baseStyle:LKe}),zKe={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},nle=e=>{const{colorScheme:t,theme:n}=e;if(t==="gray")return{color:ke("gray.800","whiteAlpha.900")(e),_hover:{bg:ke("gray.100","whiteAlpha.200")(e)},_active:{bg:ke("gray.200","whiteAlpha.300")(e)}};const r=Vg(`${t}.200`,.12)(n),i=Vg(`${t}.200`,.24)(n);return{color:ke(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:ke(`${t}.50`,r)(e)},_active:{bg:ke(`${t}.100`,i)(e)}}},BKe=e=>{const{colorScheme:t}=e,n=ke("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Xr(nle,e)}},jKe={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},UKe=e=>{var t;const{colorScheme:n}=e;if(n==="gray"){const l=ke("gray.100","whiteAlpha.200")(e);return{bg:l,color:ke("gray.800","whiteAlpha.900")(e),_hover:{bg:ke("gray.200","whiteAlpha.300")(e),_disabled:{bg:l}},_active:{bg:ke("gray.300","whiteAlpha.400")(e)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:o=`${n}.600`,activeBg:s=`${n}.700`}=(t=jKe[n])!=null?t:{},a=ke(r,`${n}.200`)(e);return{bg:a,color:ke(i,"gray.800")(e),_hover:{bg:ke(o,`${n}.300`)(e),_disabled:{bg:a}},_active:{bg:ke(s,`${n}.400`)(e)}}},VKe=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:ke(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:ke(`${t}.700`,`${t}.500`)(e)}}},WKe={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},HKe={ghost:nle,outline:BKe,solid:UKe,link:VKe,unstyled:WKe},qKe={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},GKe={baseStyle:zKe,variants:HKe,sizes:qKe,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:nd,defineMultiStyleConfig:YKe}=$t(bqe.keys),mC=Se("card-bg"),Al=Se("card-padding"),rle=Se("card-shadow"),G2=Se("card-radius"),ile=Se("card-border-width","0"),ole=Se("card-border-color"),XKe=nd({container:{[mC.variable]:"colors.chakra-body-bg",backgroundColor:mC.reference,boxShadow:rle.reference,borderRadius:G2.reference,color:"chakra-body-text",borderWidth:ile.reference,borderColor:ole.reference},body:{padding:Al.reference,flex:"1 1 0%"},header:{padding:Al.reference},footer:{padding:Al.reference}}),KKe={sm:nd({container:{[G2.variable]:"radii.base",[Al.variable]:"space.3"}}),md:nd({container:{[G2.variable]:"radii.md",[Al.variable]:"space.5"}}),lg:nd({container:{[G2.variable]:"radii.xl",[Al.variable]:"space.7"}})},QKe={elevated:nd({container:{[rle.variable]:"shadows.base",_dark:{[mC.variable]:"colors.gray.700"}}}),outline:nd({container:{[ile.variable]:"1px",[ole.variable]:"colors.chakra-border-color"}}),filled:nd({container:{[mC.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[Al.variable]:0},header:{[Al.variable]:0},footer:{[Al.variable]:0}}},JKe=YKe({baseStyle:XKe,variants:QKe,sizes:KKe,defaultProps:{variant:"elevated",size:"md"}}),Dy=_n("close-button-size"),p0=_n("close-button-bg"),ZKe={w:[Dy.reference],h:[Dy.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[p0.variable]:"colors.blackAlpha.100",_dark:{[p0.variable]:"colors.whiteAlpha.100"}},_active:{[p0.variable]:"colors.blackAlpha.200",_dark:{[p0.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:p0.reference},eQe={lg:{[Dy.variable]:"sizes.10",fontSize:"md"},md:{[Dy.variable]:"sizes.8",fontSize:"xs"},sm:{[Dy.variable]:"sizes.6",fontSize:"2xs"}},tQe={baseStyle:ZKe,sizes:eQe,defaultProps:{size:"md"}},{variants:nQe,defaultProps:rQe}=Ry,iQe={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:on.bg.reference,color:on.color.reference,boxShadow:on.shadow.reference},oQe={baseStyle:iQe,variants:nQe,defaultProps:rQe},sQe={w:"100%",mx:"auto",maxW:"prose",px:"4"},aQe={baseStyle:sQe},lQe={opacity:.6,borderColor:"inherit"},uQe={borderStyle:"solid"},cQe={borderStyle:"dashed"},fQe={solid:uQe,dashed:cQe},dQe={baseStyle:lQe,variants:fQe,defaultProps:{variant:"solid"}},{definePartsStyle:hQe,defineMultiStyleConfig:pQe}=$t(XHe.keys),gQe={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},mQe={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},yQe={pt:"2",px:"4",pb:"5"},vQe={fontSize:"1.25em"},bQe=hQe({container:gQe,button:mQe,panel:yQe,icon:vQe}),xQe=pQe({baseStyle:bQe}),{definePartsStyle:ub,defineMultiStyleConfig:wQe}=$t(KHe.keys),Xi=Se("alert-fg"),Bl=Se("alert-bg"),SQe=ub({container:{bg:Bl.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Xi.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Xi.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function yN(e){const{theme:t,colorScheme:n}=e,r=Vg(`${n}.200`,.16)(t);return{light:`colors.${n}.100`,dark:r}}var CQe=ub(e=>{const{colorScheme:t}=e,n=yN(e);return{container:{[Xi.variable]:`colors.${t}.600`,[Bl.variable]:n.light,_dark:{[Xi.variable]:`colors.${t}.200`,[Bl.variable]:n.dark}}}}),kQe=ub(e=>{const{colorScheme:t}=e,n=yN(e);return{container:{[Xi.variable]:`colors.${t}.600`,[Bl.variable]:n.light,_dark:{[Xi.variable]:`colors.${t}.200`,[Bl.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Xi.reference}}}),EQe=ub(e=>{const{colorScheme:t}=e,n=yN(e);return{container:{[Xi.variable]:`colors.${t}.600`,[Bl.variable]:n.light,_dark:{[Xi.variable]:`colors.${t}.200`,[Bl.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Xi.reference}}}),_Qe=ub(e=>{const{colorScheme:t}=e;return{container:{[Xi.variable]:"colors.white",[Bl.variable]:`colors.${t}.600`,_dark:{[Xi.variable]:"colors.gray.900",[Bl.variable]:`colors.${t}.200`},color:Xi.reference}}}),$Qe={subtle:CQe,"left-accent":kQe,"top-accent":EQe,solid:_Qe},AQe=wQe({baseStyle:SQe,variants:$Qe,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:sle,defineMultiStyleConfig:TQe}=$t(QHe.keys),Mp=Se("avatar-border-color"),Ny=Se("avatar-bg"),V1=Se("avatar-font-size"),Wg=Se("avatar-size"),PQe={borderRadius:"full",border:"0.2em solid",borderColor:Mp.reference,[Mp.variable]:"white",_dark:{[Mp.variable]:"colors.gray.800"}},FQe={bg:Ny.reference,fontSize:V1.reference,width:Wg.reference,height:Wg.reference,lineHeight:"1",[Ny.variable]:"colors.gray.200",_dark:{[Ny.variable]:"colors.whiteAlpha.400"}},MQe=e=>{const{name:t,theme:n}=e,r=t?zqe({string:t}):"colors.gray.400",i=Lqe(r)(n);let o="white";return i||(o="gray.800"),{bg:Ny.reference,fontSize:V1.reference,color:o,borderColor:Mp.reference,verticalAlign:"top",width:Wg.reference,height:Wg.reference,"&:not([data-loaded])":{[Ny.variable]:r},[Mp.variable]:"colors.white",_dark:{[Mp.variable]:"colors.gray.800"}}},RQe={fontSize:V1.reference,lineHeight:"1"},OQe=sle(e=>({badge:Xr(PQe,e),excessLabel:Xr(FQe,e),container:Xr(MQe,e),label:RQe}));function su(e){const t=e!=="100%"?Kae[e]:void 0;return sle({container:{[Wg.variable]:t??e,[V1.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[Wg.variable]:t??e,[V1.variable]:`calc(${t??e} / 2.5)`}})}var DQe={"2xs":su(4),xs:su(6),sm:su(8),md:su(12),lg:su(16),xl:su(24),"2xl":su(32),full:su("100%")},NQe=TQe({baseStyle:OQe,sizes:DQe,defaultProps:{size:"md"}}),LQe={Accordion:xQe,Alert:AQe,Avatar:NQe,Badge:Ry,Breadcrumb:IKe,Button:GKe,Checkbox:gC,CloseButton:tQe,Code:oQe,Container:aQe,Divider:dQe,Drawer:uKe,Editable:mKe,Form:SKe,FormError:AKe,FormLabel:PKe,Heading:RKe,Input:st,Kbd:ZYe,Link:tXe,List:sXe,Menu:yXe,Modal:AXe,NumberInput:LXe,PinInput:jXe,Popover:JXe,Progress:oYe,Radio:vYe,Select:EYe,Skeleton:$Ye,SkipLink:TYe,Slider:BYe,Spinner:VYe,Stat:QYe,Switch:tGe,Table:lGe,Tabs:CGe,Tag:NGe,Textarea:YGe,Tooltip:QGe,Card:JKe,Stepper:YHe},IQe={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},zQe={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},BQe="ltr",jQe={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},ale={semanticTokens:IQe,direction:BQe,...HHe,components:LQe,styles:zQe,config:jQe};function ny(e){return typeof e=="function"}function UQe(...e){return t=>e.reduce((n,r)=>r(n),t)}var VQe=e=>function(...n){let r=[...n],i=n[n.length-1];return wHe(i)&&r.length>1?r=r.slice(0,r.length-1):i=e,UQe(...r.map(o=>s=>ny(o)?o(s):HQe(s,o)))(i)},WQe=VQe(ale);function HQe(...e){return Po({},...e,lle)}function lle(e,t,n,r){if((ny(e)||ny(t))&&Object.prototype.hasOwnProperty.call(r,n))return(...i)=>{const o=ny(e)?e(...i):e,s=ny(t)?t(...i):t;return Po({},o,s,lle)}}function qQe(e,t){const n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}function GQe(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var YQe=e=>{const t=new WeakMap;return(r,i,o,s)=>{if(typeof r>"u")return e(r,i,o);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,o,s);return a.set(i,l),l}},ule=YQe(GQe);function cle(e,t){const n={};return Object.keys(e).forEach(r=>{const i=e[r];t(i,r,e)&&(n[r]=i)}),n}var fle=e=>cle(e,t=>t!=null);function XQe(e){return typeof e=="function"}function dle(e,...t){return XQe(e)?e(...t):e}var KQe=typeof Element<"u",QQe=typeof Map=="function",JQe=typeof Set=="function",ZQe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Y2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Y2(e[r],t[r]))return!1;return!0}var o;if(QQe&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!Y2(r.value[1],t.get(r.value[0])))return!1;return!0}if(JQe&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(ZQe&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(KQe&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!Y2(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var eJe=function(t,n){try{return Y2(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const tJe=Ul(eJe);function hle(e,t={}){var n;const{styleConfig:r,...i}=t,{theme:o,colorMode:s}=Bae(),a=e?ule(o,`components.${e}`):void 0,l=r||a,u=Po({theme:o,colorMode:s},(n=l==null?void 0:l.defaultProps)!=null?n:{},fle(qQe(i,["children"]))),c=F.useRef({});if(l){const d=bHe(l)(u);tJe(c.current,d)||(c.current=d)}return c.current}function eu(e,t={}){return hle(e,t)}function Vc(e,t={}){return hle(e,t)}var nJe=new Set([...aHe,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),rJe=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function iJe(e){return rJe.has(e)||!nJe.has(e)}function oJe(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const n={...e};for(const r of t)if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(i in n&&delete n[i],n[i]=r[i]);return n}function ple(e){const t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}var sJe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,aJe=Soe(function(e){return sJe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),lJe=aJe,uJe=function(t){return t!=="theme"},RV=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?lJe:uJe},OV=function(t,n,r){var i;if(n){var o=n.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(s){return t.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},cJe=!1,fJe=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return Aoe(n,r,i),Pje(function(){return Toe(n,r,i)}),null},dJe=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,o,s;n!==void 0&&(o=n.label,s=n.target);var a=OV(t,n,r),l=a||RV(i),u=!l("as");return function(){var c=arguments,f=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&f.push("label:"+o+";"),c[0]==null||c[0].raw===void 0)f.push.apply(f,c);else{f.push(c[0][0]);for(var d=c.length,h=1;h<d;h++)f.push(c[h],c[0][h])}var p=Roe(function(g,m,y){var v=u&&g.as||i,b="",x=[],S=g;if(g.theme==null){S={};for(var C in g)S[C]=g[C];S.theme=F.useContext(w1)}typeof g.className=="string"?b=wje(m.registered,x,g.className):g.className!=null&&(b=g.className+" ");var w=m8(f.concat(x),m.registered,S);b+=m.key+"-"+w.name,s!==void 0&&(b+=" "+s);var k=u&&a===void 0?RV(v):l,E={};for(var A in g)u&&A==="as"||k(A)&&(E[A]=g[A]);return E.className=b,y&&(E.ref=y),F.createElement(F.Fragment,null,F.createElement(fJe,{cache:m,serialized:w,isStringTag:typeof v=="string"}),F.createElement(v,E))});return p.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=f,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return s===void 0&&cJe?"NO_COMPONENT_SELECTOR":"."+s}}),p.withComponent=function(g,m){return e(g,jS({},n,m,{shouldForwardProp:OV(p,m,!0)})).apply(void 0,f)},p}},hJe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],yC=dJe.bind();hJe.forEach(function(e){yC[e]=yC(e)});var DV,pJe=(DV=yC.default)!=null?DV:yC,gJe=({baseStyle:e})=>t=>{const{theme:n,css:r,__css:i,sx:o,...s}=t,a=cle(s,(f,d)=>uHe(d)),l=dle(e,t),u=oJe({},i,l,fle(a),o),c=Gae(u)(t.theme);return r?[c,r]:c};function F3(e,t){const{baseStyle:n,...r}=t??{};r.shouldForwardProp||(r.shouldForwardProp=iJe);const i=gJe({baseStyle:n}),o=pJe(e,r)(i);return Vi.forwardRef(function(l,u){const{colorMode:c,forced:f}=lb();return Vi.createElement(o,{ref:u,"data-theme":f?c:void 0,...l})})}function mJe(){const e=new Map;return new Proxy(F3,{apply(t,n,r){return F3(...r)},get(t,n){return e.has(n)||e.set(n,F3(n)),e.get(n)}})}var _e=mJe();function Pe(e){return F.forwardRef(e)}function yJe(e={}){const{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=e,i=F.createContext(void 0);i.displayName=r;function o(){var s;const a=F.useContext(i);if(!a&&t){const l=new Error(n);throw l.name="ContextError",(s=Error.captureStackTrace)==null||s.call(Error,l,o),l}return a}return[i.Provider,o,i]}function vJe(e){const{cssVarsRoot:t,theme:n,children:r}=e,i=F.useMemo(()=>iHe(n),[n]);return $.jsxs(Rje,{theme:i,children:[$.jsx(bJe,{root:t}),r]})}function bJe({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return $.jsx(o_,{styles:n=>({[t]:n.__cssVars})})}yJe({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function xJe(){const{colorMode:e}=lb();return $.jsx(o_,{styles:t=>{const n=ule(t,"styles.global"),r=dle(n,{theme:t,colorMode:e});return r?Gae(r)(t):void 0}})}var vN=F.createContext({getDocument(){return document},getWindow(){return window}});vN.displayName="EnvironmentContext";function wJe({defer:e}={}){const[,t]=F.useReducer(n=>n+1,0);return Dg(()=>{e&&t()},[e]),F.useContext(vN)}function gle(e){const{children:t,environment:n,disabled:r}=e,i=F.useRef(null),o=F.useMemo(()=>n||{getDocument:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument)!=null?l:document},getWindow:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument.defaultView)!=null?l:window}},[n]),s=!r||!n;return $.jsxs(vN.Provider,{value:o,children:[t,s&&$.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}gle.displayName="EnvironmentProvider";var SJe=e=>{const{children:t,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:o=!0,theme:s={},environment:a,cssVarsRoot:l,disableEnvironment:u,disableGlobalStyle:c}=e,f=$.jsx(gle,{environment:a,disabled:u,children:t});return $.jsx(vJe,{theme:s,cssVarsRoot:l,children:$.jsxs(zae,{colorModeManager:n,options:s.config,children:[o?$.jsx(Nje,{scope:i}):$.jsx(Dje,{}),!c&&$.jsx(xJe,{}),r?$.jsx(Noe,{zIndex:r,children:f}):f]})})},CJe=(e,t)=>e.find(n=>n.id===t);function NV(e,t){const n=mle(e,t),r=n?e[n].findIndex(i=>i.id===t):-1;return{position:n,index:r}}function mle(e,t){for(const[n,r]of Object.entries(e))if(CJe(r,t))return n}function kJe(e){const t=e.includes("right"),n=e.includes("left");let r="center";return t&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function EJe(e){const n=e==="top"||e==="bottom"?"0 auto":void 0,r=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,o=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",s=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:i,right:o,left:s}}function X2(e,t=[]){const n=F.useRef(e);return F.useEffect(()=>{n.current=e}),F.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},t)}function _Je(e,t){const n=X2(e);F.useEffect(()=>{if(t==null)return;let r=null;return r=window.setTimeout(()=>{n()},t),()=>{r&&window.clearTimeout(r)}},[t,n])}function LV(e,t){const n=F.useRef(!1),r=F.useRef(!1);F.useEffect(()=>{if(n.current&&r.current)return e();r.current=!0},t),F.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const yle=F.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),$_=F.createContext({}),cb=F.createContext(null),A_=typeof document<"u",bN=A_?F.useLayoutEffect:F.useEffect,vle=F.createContext({strict:!1}),xN=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),$Je="framerAppearId",ble="data-"+xN($Je);function AJe(e,t,n,r){const{visualElement:i}=F.useContext($_),o=F.useContext(vle),s=F.useContext(cb),a=F.useContext(yle).reducedMotion,l=F.useRef();r=r||o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:i,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;F.useInsertionEffect(()=>{u&&u.update(n,s)});const c=F.useRef(!!(n[ble]&&!window.HandoffComplete));return bN(()=>{u&&(u.render(),c.current&&u.animationState&&u.animationState.animateChanges())}),F.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}function lp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function TJe(e,t,n){return F.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):lp(n)&&(n.current=r))},[t])}function W1(e){return typeof e=="string"||Array.isArray(e)}function T_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const wN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],SN=["initial",...wN];function P_(e){return T_(e.animate)||SN.some(t=>W1(e[t]))}function xle(e){return!!(P_(e)||e.variants)}function PJe(e,t){if(P_(e)){const{initial:n,animate:r}=e;return{initial:n===!1||W1(n)?n:void 0,animate:W1(r)?r:void 0}}return e.inherit!==!1?t:{}}function FJe(e){const{initial:t,animate:n}=PJe(e,F.useContext($_));return F.useMemo(()=>({initial:t,animate:n}),[IV(t),IV(n)])}function IV(e){return Array.isArray(e)?e.join(" "):e}const zV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},H1={};for(const e in zV)H1[e]={isEnabled:t=>zV[e].some(n=>!!t[n])};function MJe(e){for(const t in e)H1[t]={...H1[t],...e[t]}}const CN=F.createContext({}),wle=F.createContext({}),RJe=Symbol.for("motionComponentSymbol");function OJe({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&MJe(e);function o(a,l){let u;const c={...F.useContext(yle),...a,layoutId:DJe(a)},{isStatic:f}=c,d=FJe(a),h=r(a,f);if(!f&&A_){d.visualElement=AJe(i,h,c,t);const p=F.useContext(wle),g=F.useContext(vle).strict;d.visualElement&&(u=d.visualElement.loadFeatures(c,g,e,p))}return F.createElement($_.Provider,{value:d},u&&d.visualElement?F.createElement(u,{visualElement:d.visualElement,...c}):null,n(i,a,TJe(h,d.visualElement,l),h,f,d.visualElement))}const s=F.forwardRef(o);return s[RJe]=i,s}function DJe({layoutId:e}){const t=F.useContext(CN).id;return t&&e!==void 0?t+"-"+e:e}function NJe(e){function t(r,i={}){return OJe(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const LJe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kN(e){return typeof e!="string"||e.includes("-")?!1:!!(LJe.indexOf(e)>-1||/[A-Z]/.test(e))}const vC={};function IJe(e){Object.assign(vC,e)}const fb=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oh=new Set(fb);function Sle(e,{layout:t,layoutId:n}){return oh.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!vC[e]||e==="opacity")}const _i=e=>!!(e&&e.getVelocity),zJe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BJe=fb.length;function jJe(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let o="";for(let s=0;s<BJe;s++){const a=fb[s];if(e[a]!==void 0){const l=zJe[a]||a;o+=`${l}(${e[a]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(e,r?"":o):n&&r&&(o="none"),o}const Cle=e=>t=>typeof t=="string"&&t.startsWith(e),kle=Cle("--"),AP=Cle("var(--"),UJe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,VJe=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Cc=(e,t,n)=>Math.min(Math.max(n,e),t),sh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ly={...sh,transform:e=>Cc(0,1,e)},Vx={...sh,default:1},Iy=e=>Math.round(e*1e5)/1e5,F_=/(-)?([\d]*\.?[\d])+/g,Ele=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,WJe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function db(e){return typeof e=="string"}const hb=e=>({test:t=>db(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),cu=hb("deg"),Ea=hb("%"),Ae=hb("px"),HJe=hb("vh"),qJe=hb("vw"),BV={...Ea,parse:e=>Ea.parse(e)/100,transform:e=>Ea.transform(e*100)},jV={...sh,transform:Math.round},_le={borderWidth:Ae,borderTopWidth:Ae,borderRightWidth:Ae,borderBottomWidth:Ae,borderLeftWidth:Ae,borderRadius:Ae,radius:Ae,borderTopLeftRadius:Ae,borderTopRightRadius:Ae,borderBottomRightRadius:Ae,borderBottomLeftRadius:Ae,width:Ae,maxWidth:Ae,height:Ae,maxHeight:Ae,size:Ae,top:Ae,right:Ae,bottom:Ae,left:Ae,padding:Ae,paddingTop:Ae,paddingRight:Ae,paddingBottom:Ae,paddingLeft:Ae,margin:Ae,marginTop:Ae,marginRight:Ae,marginBottom:Ae,marginLeft:Ae,rotate:cu,rotateX:cu,rotateY:cu,rotateZ:cu,scale:Vx,scaleX:Vx,scaleY:Vx,scaleZ:Vx,skew:cu,skewX:cu,skewY:cu,distance:Ae,translateX:Ae,translateY:Ae,translateZ:Ae,x:Ae,y:Ae,z:Ae,perspective:Ae,transformPerspective:Ae,opacity:Ly,originX:BV,originY:BV,originZ:Ae,zIndex:jV,fillOpacity:Ly,strokeOpacity:Ly,numOctaves:jV};function EN(e,t,n,r){const{style:i,vars:o,transform:s,transformOrigin:a}=e;let l=!1,u=!1,c=!0;for(const f in t){const d=t[f];if(kle(f)){o[f]=d;continue}const h=_le[f],p=VJe(d,h);if(oh.has(f)){if(l=!0,s[f]=p,!c)continue;d!==(h.default||0)&&(c=!1)}else f.startsWith("origin")?(u=!0,a[f]=p):i[f]=p}if(t.transform||(l||r?i.transform=jJe(e.transform,n,c,r):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:d="50%",originZ:h=0}=a;i.transformOrigin=`${f} ${d} ${h}`}}const _N=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $le(e,t,n){for(const r in t)!_i(t[r])&&!Sle(r,n)&&(e[r]=t[r])}function GJe({transformTemplate:e},t,n){return F.useMemo(()=>{const r=_N();return EN(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function YJe(e,t,n){const r=e.style||{},i={};return $le(i,r,e),Object.assign(i,GJe(e,t,n)),e.transformValues?e.transformValues(i):i}function XJe(e,t,n){const r={},i=YJe(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const KJe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bC(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||KJe.has(e)}let Ale=e=>!bC(e);function QJe(e){e&&(Ale=t=>t.startsWith("on")?!bC(t):e(t))}try{QJe(require("@emotion/is-prop-valid").default)}catch{}function JJe(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(Ale(i)||n===!0&&bC(i)||!t&&!bC(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function UV(e,t,n){return typeof e=="string"?e:Ae.transform(t+n*e)}function ZJe(e,t,n){const r=UV(t,e.x,e.width),i=UV(n,e.y,e.height);return`${r} ${i}`}const eZe={offset:"stroke-dashoffset",array:"stroke-dasharray"},tZe={offset:"strokeDashoffset",array:"strokeDasharray"};function nZe(e,t,n=1,r=0,i=!0){e.pathLength=1;const o=i?eZe:tZe;e[o.offset]=Ae.transform(-r);const s=Ae.transform(t),a=Ae.transform(n);e[o.array]=`${s} ${a}`}function $N(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},c,f,d){if(EN(e,u,c,d),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:g}=e;h.transform&&(g&&(p.transform=h.transform),delete h.transform),g&&(i!==void 0||o!==void 0||p.transform)&&(p.transformOrigin=ZJe(g,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&nZe(h,s,a,l,!1)}const Tle=()=>({..._N(),attrs:{}}),AN=e=>typeof e=="string"&&e.toLowerCase()==="svg";function rZe(e,t,n,r){const i=F.useMemo(()=>{const o=Tle();return $N(o,t,{enableHardwareAcceleration:!1},AN(r),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};$le(o,e.style,e),i.style={...o,...i.style}}return i}function iZe(e=!1){return(n,r,i,{latestValues:o},s)=>{const l=(kN(n)?rZe:XJe)(r,o,s,n),c={...JJe(r,typeof n=="string",e),...l,ref:i},{children:f}=r,d=F.useMemo(()=>_i(f)?f.get():f,[f]);return F.createElement(n,{...c,children:d})}}function Ple(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const o in n)e.style.setProperty(o,n[o])}const Fle=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Mle(e,t,n,r){Ple(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(Fle.has(i)?i:xN(i),t.attrs[i])}function TN(e,t){const{style:n}=e,r={};for(const i in n)(_i(n[i])||t.style&&_i(t.style[i])||Sle(i,e))&&(r[i]=n[i]);return r}function Rle(e,t){const n=TN(e,t);for(const r in e)if(_i(e[r])||_i(t[r])){const i=fb.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function PN(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function Ole(e){const t=F.useRef(null);return t.current===null&&(t.current=e()),t.current}const xC=e=>Array.isArray(e),oZe=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),sZe=e=>xC(e)?e[e.length-1]||0:e;function K2(e){const t=_i(e)?e.get():e;return oZe(t)?t.toValue():t}function aZe({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,o){const s={latestValues:lZe(r,i,o,e),renderState:t()};return n&&(s.mount=a=>n(r,a,s)),s}const Dle=e=>(t,n)=>{const r=F.useContext($_),i=F.useContext(cb),o=()=>aZe(e,t,r,i);return n?o():Ole(o)};function lZe(e,t,n,r){const i={},o=r(e,{});for(const d in o)i[d]=K2(o[d]);let{initial:s,animate:a}=e;const l=P_(e),u=xle(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const f=c?a:s;return f&&typeof f!="boolean"&&!T_(f)&&(Array.isArray(f)?f:[f]).forEach(h=>{const p=PN(e,h);if(!p)return;const{transitionEnd:g,transition:m,...y}=p;for(const v in y){let b=y[v];if(Array.isArray(b)){const x=c?b.length-1:0;b=b[x]}b!==null&&(i[v]=b)}for(const v in g)i[v]=g[v]}),i}const rn=e=>e;class VV{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function uZe(e){let t=new VV,n=new VV,r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const f=c&&i,d=f?t:n;return u&&s.add(l),d.add(l)&&f&&i&&(r=t.order.length),l},cancel:l=>{n.remove(l),s.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const c=t.order[u];c(l),s.has(c)&&(a.schedule(c),e())}i=!1,o&&(o=!1,a.process(l))}};return a}const Wx=["prepare","read","update","preRender","render","postRender"],cZe=40;function fZe(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=Wx.reduce((f,d)=>(f[d]=uZe(()=>n=!0),f),{}),s=f=>o[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,cZe),1),i.timestamp=f,i.isProcessing=!0,Wx.forEach(s),i.isProcessing=!1,n&&t&&(r=!1,e(a))},l=()=>{n=!0,r=!0,i.isProcessing||e(a)};return{schedule:Wx.reduce((f,d)=>{const h=o[d];return f[d]=(p,g=!1,m=!1)=>(n||l(),h.schedule(p,g,m)),f},{}),cancel:f=>Wx.forEach(d=>o[d].cancel(f)),state:i,steps:o}}const{schedule:_t,cancel:jl,state:hr,steps:M3}=fZe(typeof requestAnimationFrame<"u"?requestAnimationFrame:rn,!0),dZe={useVisualState:Dle({scrapeMotionValuesFromProps:Rle,createRenderState:Tle,onMount:(e,t,{renderState:n,latestValues:r})=>{_t.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),_t.render(()=>{$N(n,r,{enableHardwareAcceleration:!1},AN(t.tagName),e.transformTemplate),Mle(t,n)})}})},hZe={useVisualState:Dle({scrapeMotionValuesFromProps:TN,createRenderState:_N})};function pZe(e,{forwardMotionProps:t=!1},n,r){return{...kN(e)?dZe:hZe,preloadedFeatures:n,useRender:iZe(t),createVisualElement:r,Component:e}}function vl(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Nle=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function M_(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const gZe=e=>t=>Nle(t)&&e(t,M_(t));function Tl(e,t,n,r){return vl(e,t,gZe(n),r)}const mZe=(e,t)=>n=>t(e(n)),nc=(...e)=>e.reduce(mZe);function Lle(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const WV=Lle("dragHorizontal"),HV=Lle("dragVertical");function Ile(e){let t=!1;if(e==="y")t=HV();else if(e==="x")t=WV();else{const n=WV(),r=HV();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function zle(){const e=Ile(!0);return e?(e(),!1):!0}class Wc{constructor(t){this.isMounted=!1,this.node=t}update(){}}function qV(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(o,s)=>{if(o.pointerType==="touch"||zle())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&_t.update(()=>a[r](o,s))};return Tl(e.current,n,i,{passive:!e.getProps()[r]})}class yZe extends Wc{mount(){this.unmount=nc(qV(this.node,!0),qV(this.node,!1))}unmount(){}}class vZe extends Wc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nc(vl(this.node.current,"focus",()=>this.onFocus()),vl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Ble=(e,t)=>t?e===t?!0:Ble(e,t.parentElement):!1;function R3(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,M_(n))}class bZe extends Wc{constructor(){super(...arguments),this.removeStartListeners=rn,this.removeEndListeners=rn,this.removeAccessibleListeners=rn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=Tl(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:f}=this.node.getProps();_t.update(()=>{!f&&!Ble(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),s=Tl(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=nc(o,s),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const s=a=>{a.key!=="Enter"||!this.checkPressEnd()||R3("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&_t.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=vl(this.node.current,"keyup",s),R3("down",(a,l)=>{this.startPress(a,l)})},n=vl(this.node.current,"keydown",t),r=()=>{this.isPressing&&R3("cancel",(o,s)=>this.cancelPress(o,s))},i=vl(this.node.current,"blur",r);this.removeAccessibleListeners=nc(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&_t.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!zle()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&_t.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Tl(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=vl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=nc(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const TP=new WeakMap,O3=new WeakMap,xZe=e=>{const t=TP.get(e.target);t&&t(e)},wZe=e=>{e.forEach(xZe)};function SZe({root:e,...t}){const n=e||document;O3.has(n)||O3.set(n,{});const r=O3.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(wZe,{root:e,...t})),r[i]}function CZe(e,t,n){const r=SZe(t);return TP.set(e,n),r.observe(e),()=>{TP.delete(e),r.unobserve(e)}}const kZe={some:0,all:1};class EZe extends Wc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:kZe[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=u?c:f;d&&d(l)};return CZe(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(_Ze(t,n))&&this.startObserver()}unmount(){}}function _Ze({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const $Ze={inView:{Feature:EZe},tap:{Feature:bZe},focus:{Feature:vZe},hover:{Feature:yZe}};function jle(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function AZe(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function TZe(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function R_(e,t,n){const r=e.getProps();return PN(r,t,n!==void 0?n:r.custom,AZe(e),TZe(e))}let wC=rn;const rd=e=>e*1e3,Pl=e=>e/1e3,PZe={current:!1},Ule=e=>Array.isArray(e)&&typeof e[0]=="number";function Vle(e){return!!(!e||typeof e=="string"&&Wle[e]||Ule(e)||Array.isArray(e)&&e.every(Vle))}const ry=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Wle={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ry([0,.65,.55,1]),circOut:ry([.55,0,1,.45]),backIn:ry([.31,.01,.66,-.59]),backOut:ry([.33,1.53,.69,.99])};function Hle(e){if(e)return Ule(e)?ry(e):Array.isArray(e)?e.map(Hle):Wle[e]}function FZe(e,t,n,{delay:r=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=Hle(a);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}function MZe(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const qle=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,RZe=1e-7,OZe=12;function DZe(e,t,n,r,i){let o,s,a=0;do s=t+(n-t)/2,o=qle(s,r,i)-e,o>0?n=s:t=s;while(Math.abs(o)>RZe&&++a<OZe);return s}function pb(e,t,n,r){if(e===t&&n===r)return rn;const i=o=>DZe(o,0,1,e,n);return o=>o===0||o===1?o:qle(i(o),t,r)}const NZe=pb(.42,0,1,1),LZe=pb(0,0,.58,1),Gle=pb(.42,0,.58,1),IZe=e=>Array.isArray(e)&&typeof e[0]!="number",Yle=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Xle=e=>t=>1-e(1-t),FN=e=>1-Math.sin(Math.acos(e)),Kle=Xle(FN),zZe=Yle(FN),Qle=pb(.33,1.53,.69,.99),MN=Xle(Qle),BZe=Yle(MN),jZe=e=>(e*=2)<1?.5*MN(e):.5*(2-Math.pow(2,-10*(e-1))),GV={linear:rn,easeIn:NZe,easeInOut:Gle,easeOut:LZe,circIn:FN,circInOut:zZe,circOut:Kle,backIn:MN,backInOut:BZe,backOut:Qle,anticipate:jZe},YV=e=>{if(Array.isArray(e)){wC(e.length===4);const[t,n,r,i]=e;return pb(t,n,r,i)}else if(typeof e=="string")return wC(GV[e]!==void 0),GV[e];return e},RN=(e,t)=>n=>!!(db(n)&&WJe.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Jle=(e,t,n)=>r=>{if(!db(r))return r;const[i,o,s,a]=r.match(F_);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},UZe=e=>Cc(0,255,e),D3={...sh,transform:e=>Math.round(UZe(e))},Rf={test:RN("rgb","red"),parse:Jle("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+D3.transform(e)+", "+D3.transform(t)+", "+D3.transform(n)+", "+Iy(Ly.transform(r))+")"};function VZe(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const PP={test:RN("#"),parse:VZe,transform:Rf.transform},up={test:RN("hsl","hue"),parse:Jle("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ea.transform(Iy(t))+", "+Ea.transform(Iy(n))+", "+Iy(Ly.transform(r))+")"},Dr={test:e=>Rf.test(e)||PP.test(e)||up.test(e),parse:e=>Rf.test(e)?Rf.parse(e):up.test(e)?up.parse(e):PP.parse(e),transform:e=>db(e)?e:e.hasOwnProperty("red")?Rf.transform(e):up.transform(e)},Wt=(e,t,n)=>-n*e+n*t+e;function N3(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function WZe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,o=0,s=0;if(!t)i=o=s=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=N3(l,a,e+1/3),o=N3(l,a,e),s=N3(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}const L3=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},HZe=[PP,Rf,up],qZe=e=>HZe.find(t=>t.test(e));function XV(e){const t=qZe(e);let n=t.parse(e);return t===up&&(n=WZe(n)),n}const Zle=(e,t)=>{const n=XV(e),r=XV(t),i={...n};return o=>(i.red=L3(n.red,r.red,o),i.green=L3(n.green,r.green,o),i.blue=L3(n.blue,r.blue,o),i.alpha=Wt(n.alpha,r.alpha,o),Rf.transform(i))};function GZe(e){var t,n;return isNaN(e)&&db(e)&&(((t=e.match(F_))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Ele))===null||n===void 0?void 0:n.length)||0)>0}const eue={regex:UJe,countKey:"Vars",token:"${v}",parse:rn},tue={regex:Ele,countKey:"Colors",token:"${c}",parse:Dr.parse},nue={regex:F_,countKey:"Numbers",token:"${n}",parse:sh.parse};function I3(e,{regex:t,countKey:n,token:r,parse:i}){const o=e.tokenised.match(t);o&&(e["num"+n]=o.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...o.map(i)))}function SC(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&I3(n,eue),I3(n,tue),I3(n,nue),n}function rue(e){return SC(e).values}function iue(e){const{values:t,numColors:n,numVars:r,tokenised:i}=SC(e),o=t.length;return s=>{let a=i;for(let l=0;l<o;l++)l<r?a=a.replace(eue.token,s[l]):l<r+n?a=a.replace(tue.token,Dr.transform(s[l])):a=a.replace(nue.token,Iy(s[l]));return a}}const YZe=e=>typeof e=="number"?0:e;function XZe(e){const t=rue(e);return iue(e)(t.map(YZe))}const kc={test:GZe,parse:rue,createTransformer:iue,getAnimatableNone:XZe},oue=(e,t)=>n=>`${n>0?t:e}`;function sue(e,t){return typeof e=="number"?n=>Wt(e,t,n):Dr.test(e)?Zle(e,t):e.startsWith("var(")?oue(e,t):lue(e,t)}const aue=(e,t)=>{const n=[...e],r=n.length,i=e.map((o,s)=>sue(o,t[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}},KZe=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=sue(e[i],t[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},lue=(e,t)=>{const n=kc.createTransformer(t),r=SC(e),i=SC(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?nc(aue(r.values,i.values),n):oue(e,t)},q1=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},KV=(e,t)=>n=>Wt(e,t,n);function QZe(e){return typeof e=="number"?KV:typeof e=="string"?Dr.test(e)?Zle:lue:Array.isArray(e)?aue:typeof e=="object"?KZe:KV}function JZe(e,t,n){const r=[],i=n||QZe(e[0]),o=e.length-1;for(let s=0;s<o;s++){let a=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||rn:t;a=nc(l,a)}r.push(a)}return r}function uue(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const o=e.length;if(wC(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=JZe(t,r,i),a=s.length,l=u=>{let c=0;if(a>1)for(;c<e.length-2&&!(u<e[c+1]);c++);const f=q1(e[c],e[c+1],u);return s[c](f)};return n?u=>l(Cc(e[0],e[o-1],u)):l}function ZZe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=q1(0,t,r);e.push(Wt(n,1,i))}}function eet(e){const t=[0];return ZZe(t,e.length-1),t}function tet(e,t){return e.map(n=>n*t)}function net(e,t){return e.map(()=>t||Gle).splice(0,e.length-1)}function CC({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=IZe(r)?r.map(YV):YV(r),o={done:!1,value:t[0]},s=tet(n&&n.length===t.length?n:eet(t),e),a=uue(s,t,{ease:Array.isArray(i)?i:net(t,i)});return{calculatedDuration:e,next:l=>(o.value=a(l),o.done=l>=e,o)}}function cue(e,t){return t?e*(1e3/t):0}const ret=5;function fue(e,t,n){const r=Math.max(t-ret,0);return cue(n-e(r),t-r)}const z3=.001,iet=.01,oet=10,set=.05,aet=1;function uet({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,o,s=1-t;s=Cc(set,aet,s),e=Cc(iet,oet,Pl(e)),s<1?(i=u=>{const c=u*s,f=c*e,d=c-n,h=FP(u,s),p=Math.exp(-f);return z3-d/h*p},o=u=>{const f=u*s*e,d=f*n+n,h=Math.pow(s,2)*Math.pow(u,2)*e,p=Math.exp(-f),g=FP(Math.pow(u,2),s);return(-i(u)+z3>0?-1:1)*((d-h)*p)/g}):(i=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-z3+c*f},o=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=fet(i,o,a);if(e=rd(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const cet=12;function fet(e,t,n){let r=n;for(let i=1;i<cet;i++)r=r-e(r)/t(r);return r}function FP(e,t){return e*Math.sqrt(1-t*t)}const det=["duration","bounce"],het=["stiffness","damping","mass"];function QV(e,t){return t.some(n=>e[n]!==void 0)}function pet(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!QV(e,het)&&QV(e,det)){const n=uet(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function due({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],o=e[e.length-1],s={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:f,isResolvedFromDuration:d}=pet({...r,velocity:-Pl(r.velocity||0)}),h=f||0,p=l/(2*Math.sqrt(a*u)),g=o-i,m=Pl(Math.sqrt(a/u)),y=Math.abs(g)<5;n||(n=y?.01:2),t||(t=y?.005:.5);let v;if(p<1){const b=FP(m,p);v=x=>{const S=Math.exp(-p*m*x);return o-S*((h+p*m*g)/b*Math.sin(b*x)+g*Math.cos(b*x))}}else if(p===1)v=b=>o-Math.exp(-m*b)*(g+(h+m*g)*b);else{const b=m*Math.sqrt(p*p-1);v=x=>{const S=Math.exp(-p*m*x),C=Math.min(b*x,300);return o-S*((h+p*m*g)*Math.sinh(C)+b*g*Math.cosh(C))/b}}return{calculatedDuration:d&&c||null,next:b=>{const x=v(b);if(d)s.done=b>=c;else{let S=h;b!==0&&(p<1?S=fue(v,b,x):S=0);const C=Math.abs(S)<=n,w=Math.abs(o-x)<=t;s.done=C&&w}return s.value=s.done?o:x,s}}}function JV({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],d={done:!1,value:f},h=k=>a!==void 0&&k<a||l!==void 0&&k>l,p=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let g=n*t;const m=f+g,y=s===void 0?m:s(m);y!==m&&(g=y-f);const v=k=>-g*Math.exp(-k/r),b=k=>y+v(k),x=k=>{const E=v(k),A=b(k);d.done=Math.abs(E)<=u,d.value=d.done?y:A};let S,C;const w=k=>{h(d.value)&&(S=k,C=due({keyframes:[d.value,p(d.value)],velocity:fue(b,k,d.value),damping:i,stiffness:o,restDelta:u,restSpeed:c}))};return w(0),{calculatedDuration:null,next:k=>{let E=!1;return!C&&S===void 0&&(E=!0,x(k),w(k)),S!==void 0&&k>S?C.next(k-S):(!E&&x(k),d)}}}const get=e=>{const t=({timestamp:n})=>e(n);return{start:()=>_t.update(t,!0),stop:()=>jl(t),now:()=>hr.isProcessing?hr.timestamp:performance.now()}},ZV=2e4;function eW(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<ZV;)t+=n,r=e.next(t);return t>=ZV?1/0:t}const met={decay:JV,inertia:JV,tween:CC,keyframes:CC,spring:due};function kC({autoplay:e=!0,delay:t=0,driver:n=get,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:f,...d}){let h=1,p=!1,g,m;const y=()=>{m=new Promise(V=>{g=V})};y();let v;const b=met[i]||CC;let x;b!==CC&&typeof r[0]!="number"&&(x=uue([0,100],r,{clamp:!1}),r=[0,100]);const S=b({...d,keyframes:r});let C;a==="mirror"&&(C=b({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let w="idle",k=null,E=null,A=null;S.calculatedDuration===null&&o&&(S.calculatedDuration=eW(S));const{calculatedDuration:P}=S;let L=1/0,M=1/0;P!==null&&(L=P+s,M=L*(o+1)-s);let O=0;const _=V=>{if(E===null)return;h>0&&(E=Math.min(E,V)),h<0&&(E=Math.min(V-M/h,E)),k!==null?O=k:O=Math.round(V-E)*h;const se=O-t*(h>=0?1:-1),Q=h>=0?se<0:se>M;O=Math.max(se,0),w==="finished"&&k===null&&(O=M);let ye=O,Re=S;if(o){const ce=Math.min(O,M)/L;let Ee=Math.floor(ce),$e=ce%1;!$e&&ce>=1&&($e=1),$e===1&&Ee--,Ee=Math.min(Ee,o+1),!!(Ee%2)&&(a==="reverse"?($e=1-$e,s&&($e-=s/L)):a==="mirror"&&(Re=C)),ye=Cc(0,1,$e)*L}const ut=Q?{done:!1,value:r[0]}:Re.next(ye);x&&(ut.value=x(ut.value));let{done:$n}=ut;!Q&&P!==null&&($n=h>=0?O>=M:O<=0);const ir=k===null&&(w==="finished"||w==="running"&&$n);return f&&f(ut.value),ir&&D(),ut},T=()=>{v&&v.stop(),v=void 0},N=()=>{w="idle",T(),g(),y(),E=A=null},D=()=>{w="finished",c&&c(),T(),g()},I=()=>{if(p)return;v||(v=n(_));const V=v.now();l&&l(),k!==null?E=V-k:(!E||w==="finished")&&(E=V),w==="finished"&&y(),A=E,k=null,w="running",v.start()};e&&I();const U={then(V,se){return m.then(V,se)},get time(){return Pl(O)},set time(V){V=rd(V),O=V,k!==null||!v||h===0?k=V:E=v.now()-V/h},get duration(){const V=S.calculatedDuration===null?eW(S):S.calculatedDuration;return Pl(V)},get speed(){return h},set speed(V){V===h||!v||(h=V,U.time=Pl(O))},get state(){return w},play:I,pause:()=>{w="paused",k=O},stop:()=>{p=!0,w!=="idle"&&(w="idle",u&&u(),N())},cancel:()=>{A!==null&&_(A),N()},complete:()=>{w="finished"},sample:V=>(E=0,_(V))};return U}function yet(e){let t;return()=>(t===void 0&&(t=e()),t)}const vet=yet(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bet=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Hx=10,xet=2e4,wet=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Vle(t.ease);function Cet(e,t,{onUpdate:n,onComplete:r,...i}){if(!(vet()&&bet.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let s=!1,a,l,u=!1;const c=()=>{l=new Promise(b=>{a=b})};c();let{keyframes:f,duration:d=300,ease:h,times:p}=i;if(wet(t,i)){const b=kC({...i,repeat:0,delay:0});let x={done:!1,value:f[0]};const S=[];let C=0;for(;!x.done&&C<xet;)x=b.sample(C),S.push(x.value),C+=Hx;p=void 0,f=S,d=C-Hx,h="linear"}const g=FZe(e.owner.current,t,f,{...i,duration:d,ease:h,times:p}),m=()=>{u=!1,g.cancel()},y=()=>{u=!0,_t.update(m),a(),c()};return g.onfinish=()=>{u||(e.set(MZe(f,i)),r&&r(),y())},{then(b,x){return l.then(b,x)},attachTimeline(b){return g.timeline=b,g.onfinish=null,rn},get time(){return Pl(g.currentTime||0)},set time(b){g.currentTime=rd(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return Pl(d)},play:()=>{s||(g.play(),jl(m))},pause:()=>g.pause(),stop:()=>{if(s=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const x=kC({...i,autoplay:!1});e.setWithVelocity(x.sample(b-Hx).value,x.sample(b).value,Hx)}y()},complete:()=>{u||g.finish()},cancel:y}}function ket({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:rn,pause:rn,stop:rn,then:o=>(o(),Promise.resolve()),cancel:rn,complete:rn});return t?kC({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const Eet={type:"spring",stiffness:500,damping:25,restSpeed:10},_et=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),$et={type:"keyframes",duration:.8},Aet={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Tet=(e,{keyframes:t})=>t.length>2?$et:oh.has(e)?e.startsWith("scale")?_et(t[1]):Eet:Aet,MP=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(kc.test(t)||t==="0")&&!t.startsWith("url(")),Pet=new Set(["brightness","contrast","saturate","opacity"]);function Fet(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(F_)||[];if(!r)return e;const i=n.replace(r,"");let o=Pet.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const Met=/([a-z-]*)\(.*?\)/g,RP={...kc,getAnimatableNone:e=>{const t=e.match(Met);return t?t.map(Fet).join(" "):e}},Ret={..._le,color:Dr,backgroundColor:Dr,outlineColor:Dr,fill:Dr,stroke:Dr,borderColor:Dr,borderTopColor:Dr,borderRightColor:Dr,borderBottomColor:Dr,borderLeftColor:Dr,filter:RP,WebkitFilter:RP},ON=e=>Ret[e];function hue(e,t){let n=ON(e);return n!==RP&&(n=kc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const pue=e=>/^0[^.\s]+$/.test(e);function Oet(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||pue(e)}function Det(e,t,n,r){const i=MP(t,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const s=r.from!==void 0?r.from:e.get();let a;const l=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?s:o[u-1]),Oet(o[u])&&l.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(a=o[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];o[c]=hue(t,a)}return o}function Net({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function DN(e,t){return e[t]||e.default||e}const Let={skipAnimations:!1},NN=(e,t,n,r={})=>i=>{const o=DN(r,e)||{},s=o.delay||r.delay||0;let{elapsed:a=0}=r;a=a-rd(s);const l=Det(t,e,n,o),u=l[0],c=l[l.length-1],f=MP(e,u),d=MP(e,c);let h={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:p=>{t.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(Net(o)||(h={...h,...Tet(e,h)}),h.duration&&(h.duration=rd(h.duration)),h.repeatDelay&&(h.repeatDelay=rd(h.repeatDelay)),!f||!d||PZe.current||o.type===!1||Let.skipAnimations)return ket(h);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=Cet(t,e,h);if(p)return p}return kC(h)};function EC(e){return!!(_i(e)&&e.add)}const gue=e=>/^\-?\d*\.?\d+$/.test(e);function LN(e,t){e.indexOf(t)===-1&&e.push(t)}function IN(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class zN{constructor(){this.subscriptions=[]}add(t){return LN(this.subscriptions,t),()=>IN(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Iet=e=>!isNaN(parseFloat(e));class zet{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:s}=hr;this.lastUpdated!==s&&(this.timeDelta=o,this.lastUpdated=s,_t.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>_t.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Iet(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new zN);const r=this.events[t].add(n);return t==="change"?()=>{r(),_t.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?cue(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hg(e,t){return new zet(e,t)}const mue=e=>t=>t.test(e),Bet={test:e=>e==="auto",parse:e=>e},yue=[sh,Ae,Ea,cu,qJe,HJe,Bet],g0=e=>yue.find(mue(e)),jet=[...yue,Dr,kc],Uet=e=>jet.find(mue(e));function Vet(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Hg(n))}function Wet(e,t){const n=R_(e,t);let{transitionEnd:r={},transition:i={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const s in o){const a=sZe(o[s]);Vet(e,s,a)}}function Het(e,t,n){var r,i;const o=Object.keys(t).filter(a=>!e.hasValue(a)),s=o.length;if(s)for(let a=0;a<s;a++){const l=o[a],u=t[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(i=(r=n[l])!==null&&r!==void 0?r:e.readValue(l))!==null&&i!==void 0?i:t[l]),c!=null&&(typeof c=="string"&&(gue(c)||pue(c))?c=parseFloat(c):!Uet(c)&&kc.test(u)&&(c=hue(l,u)),e.addValue(l,Hg(c,{owner:e})),n[l]===void 0&&(n[l]=c),c!==null&&e.setBaseTarget(l,c))}}function qet(e,t){return t?(t[e]||t.default||t).from:void 0}function Get(e,t,n){const r={};for(const i in e){const o=qet(i,t);if(o!==void 0)r[i]=o;else{const s=n.getValue(i);s&&(r[i]=s.get())}}return r}function Yet({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Xet(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function vue(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:s,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(o=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const f in a){const d=e.getValue(f),h=a[f];if(!d||h===void 0||c&&Yet(c,f))continue;const p={delay:n,elapsed:0,...DN(o||{},f)};if(window.HandoffAppearAnimations){const y=e.getProps()[ble];if(y){const v=window.HandoffAppearAnimations(y,f,d,_t);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let g=!p.isHandoff&&!Xet(d,h);if(p.type==="spring"&&(d.getVelocity()||p.velocity)&&(g=!1),d.animation&&(g=!1),g)continue;d.start(NN(f,d,h,e.shouldReduceMotion&&oh.has(f)?{type:!1}:p));const m=d.animation;EC(l)&&(l.add(f),m.then(()=>l.remove(f))),u.push(m)}return s&&Promise.all(u).then(()=>{s&&Wet(e,s)}),u}function OP(e,t,n={}){const r=R_(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(vue(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:f}=i;return Ket(e,t,u+l,c,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[o,s]:[s,o];return l().then(()=>u())}else return Promise.all([o(),s(n.delay)])}function Ket(e,t,n=0,r=0,i=1,o){const s=[],a=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(Qet).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(OP(u,t,{...o,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function Qet(e,t){return e.sortNodePosition(t)}function Jet(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(o=>OP(e,o,n));r=Promise.all(i)}else if(typeof t=="string")r=OP(e,t,n);else{const i=typeof t=="function"?R_(e,t,n.custom):t;r=Promise.all(vue(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const Zet=[...wN].reverse(),ett=wN.length;function ttt(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Jet(e,n,r)))}function ntt(e){let t=ttt(e);const n=itt();let r=!0;const i=(l,u)=>{const c=R_(e,u);if(c){const{transition:f,transitionEnd:d,...h}=c;l={...l,...h,...d}}return l};function o(l){t=l(e)}function s(l,u){const c=e.getProps(),f=e.getVariantContext(!0)||{},d=[],h=new Set;let p={},g=1/0;for(let y=0;y<ett;y++){const v=Zet[y],b=n[v],x=c[v]!==void 0?c[v]:f[v],S=W1(x),C=v===u?b.isActive:null;C===!1&&(g=y);let w=x===f[v]&&x!==c[v]&&S;if(w&&r&&e.manuallyAnimateOnMount&&(w=!1),b.protectedKeys={...p},!b.isActive&&C===null||!x&&!b.prevProp||T_(x)||typeof x=="boolean")continue;let E=rtt(b.prevProp,x)||v===u&&b.isActive&&!w&&S||y>g&&S,A=!1;const P=Array.isArray(x)?x:[x];let L=P.reduce(i,{});C===!1&&(L={});const{prevResolvedValues:M={}}=b,O={...M,...L},_=T=>{E=!0,h.has(T)&&(A=!0,h.delete(T)),b.needsAnimating[T]=!0};for(const T in O){const N=L[T],D=M[T];if(p.hasOwnProperty(T))continue;let I=!1;xC(N)&&xC(D)?I=!jle(N,D):I=N!==D,I?N!==void 0?_(T):h.add(T):N!==void 0&&h.has(T)?_(T):b.protectedKeys[T]=!0}b.prevProp=x,b.prevResolvedValues=L,b.isActive&&(p={...p,...L}),r&&e.blockInitialAnimation&&(E=!1),E&&(!w||A)&&d.push(...P.map(T=>({animation:T,options:{type:v,...l}})))}if(h.size){const y={};h.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(y[v]=b)}),d.push({animation:y})}let m=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(d):Promise.resolve()}function a(l,u,c){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const d=s(c,l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n}}function rtt(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!jle(t,e):!1}function sf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function itt(){return{animate:sf(!0),whileInView:sf(),whileHover:sf(),whileTap:sf(),whileDrag:sf(),whileFocus:sf(),exit:sf()}}class ott extends Wc{constructor(t){super(t),t.animationState||(t.animationState=ntt(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),T_(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let stt=0;class att extends Wc{constructor(){super(...arguments),this.id=stt++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const ltt={animation:{Feature:ott},exit:{Feature:att}},tW=(e,t)=>Math.abs(e-t);function utt(e,t){const n=tW(e.x,t.x),r=tW(e.y,t.y);return Math.sqrt(n**2+r**2)}class bue{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=j3(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=utt(f.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:p}=f,{timestamp:g}=hr;this.history.push({...p,timestamp:g});const{onStart:m,onMove:y}=this.handlers;d||(m&&m(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=B3(d,this.transformPagePoint),_t.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=j3(f.type==="pointercancel"?this.lastMoveEventInfo:B3(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,m),p&&p(f,m)},!Nle(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=M_(t),a=B3(s,this.transformPagePoint),{point:l}=a,{timestamp:u}=hr;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,j3(a,this.history)),this.removeListeners=nc(Tl(this.contextWindow,"pointermove",this.handlePointerMove),Tl(this.contextWindow,"pointerup",this.handlePointerUp),Tl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),jl(this.updatePoint)}}function B3(e,t){return t?{point:t(e.point)}:e}function nW(e,t){return{x:e.x-t.x,y:e.y-t.y}}function j3({point:e},t){return{point:e,delta:nW(e,xue(t)),offset:nW(e,ctt(t)),velocity:ftt(t,.1)}}function ctt(e){return e[0]}function xue(e){return e[e.length-1]}function ftt(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=xue(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>rd(t)));)n--;if(!r)return{x:0,y:0};const o=Pl(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function no(e){return e.max-e.min}function DP(e,t=0,n=.01){return Math.abs(e-t)<=n}function rW(e,t,n,r=.5){e.origin=r,e.originPoint=Wt(t.min,t.max,e.origin),e.scale=no(n)/no(t),(DP(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Wt(n.min,n.max,e.origin)-e.originPoint,(DP(e.translate)||isNaN(e.translate))&&(e.translate=0)}function zy(e,t,n,r){rW(e.x,t.x,n.x,r?r.originX:void 0),rW(e.y,t.y,n.y,r?r.originY:void 0)}function iW(e,t,n){e.min=n.min+t.min,e.max=e.min+no(t)}function dtt(e,t,n){iW(e.x,t.x,n.x),iW(e.y,t.y,n.y)}function oW(e,t,n){e.min=t.min-n.min,e.max=e.min+no(t)}function By(e,t,n){oW(e.x,t.x,n.x),oW(e.y,t.y,n.y)}function htt(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Wt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Wt(n,e,r.max):Math.min(e,n)),e}function sW(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function ptt(e,{top:t,left:n,bottom:r,right:i}){return{x:sW(e.x,n,i),y:sW(e.y,t,r)}}function aW(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function gtt(e,t){return{x:aW(e.x,t.x),y:aW(e.y,t.y)}}function mtt(e,t){let n=.5;const r=no(e),i=no(t);return i>r?n=q1(t.min,t.max-r,e.min):r>i&&(n=q1(e.min,e.max-i,t.min)),Cc(0,1,n)}function ytt(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const NP=.35;function vtt(e=NP){return e===!1?e=0:e===!0&&(e=NP),{x:lW(e,"left","right"),y:lW(e,"top","bottom")}}function lW(e,t,n){return{min:uW(e,t),max:uW(e,n)}}function uW(e,t){return typeof e=="number"?e:e[t]||0}const cW=()=>({translate:0,scale:1,origin:0,originPoint:0}),cp=()=>({x:cW(),y:cW()}),fW=()=>({min:0,max:0}),cn=()=>({x:fW(),y:fW()});function mo(e){return[e("x"),e("y")]}function wue({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function btt({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function xtt(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function U3(e){return e===void 0||e===1}function LP({scale:e,scaleX:t,scaleY:n}){return!U3(e)||!U3(t)||!U3(n)}function df(e){return LP(e)||Sue(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Sue(e){return dW(e.x)||dW(e.y)}function dW(e){return e&&e!=="0%"}function _C(e,t,n){const r=e-n,i=t*r;return n+i}function hW(e,t,n,r,i){return i!==void 0&&(e=_C(e,i,r)),_C(e,n,r)+t}function IP(e,t=0,n=1,r,i){e.min=hW(e.min,t,n,r,i),e.max=hW(e.max,t,n,r,i)}function Cue(e,{x:t,y:n}){IP(e.x,t.translate,t.scale,t.originPoint),IP(e.y,n.translate,n.scale,n.originPoint)}function wtt(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&fp(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,Cue(e,s)),r&&df(o.latestValues)&&fp(e,o.latestValues))}t.x=pW(t.x),t.y=pW(t.y)}function pW(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function bu(e,t){e.min=e.min+t,e.max=e.max+t}function gW(e,t,[n,r,i]){const o=t[i]!==void 0?t[i]:.5,s=Wt(e.min,e.max,o);IP(e,t[n],t[r],s,t.scale)}const Stt=["x","scaleX","originX"],Ctt=["y","scaleY","originY"];function fp(e,t){gW(e.x,t,Stt),gW(e.y,t,Ctt)}function kue(e,t){return wue(xtt(e.getBoundingClientRect(),t))}function ktt(e,t,n){const r=kue(e,n),{scroll:i}=t;return i&&(bu(r.x,i.offset.x),bu(r.y,i.offset.y)),r}const Eue=({current:e})=>e?e.ownerDocument.defaultView:null,Ett=new WeakMap;class _tt{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=cn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(M_(c,"page").point)},o=(c,f)=>{const{drag:d,dragPropagation:h,onDragStart:p}=this.getProps();if(d&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Ile(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mo(m=>{let y=this.getAxisMotionValue(m).get()||0;if(Ea.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[m];b&&(y=no(b)*(parseFloat(y)/100))}}this.originPoint[m]=y}),p&&_t.update(()=>p(c,f),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(c,f)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:p,onDrag:g}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:m}=f;if(h&&this.currentDirection===null){this.currentDirection=$tt(m),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,m),this.updateAxis("y",f.point,m),this.visualElement.render(),g&&g(c,f)},a=(c,f)=>this.stop(c,f),l=()=>mo(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new bue(t,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Eue(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&_t.update(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!qx(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=htt(s,this.constraints[t],this.elastic[t])),o.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;n&&lp(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=ptt(i.layoutBox,n):this.constraints=!1,this.elastic=vtt(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&mo(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=ytt(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!lp(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=ktt(r,i.root,this.visualElement.getTransformPagePoint());let s=gtt(i.layout.layoutBox,o);if(n){const a=n(btt(s));this.hasMutatedConstraints=!!a,a&&(s=wue(a))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=mo(c=>{if(!qx(c,n,this.currentDirection))return;let f=l&&l[c]||{};s&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(NN(t,r,0,n))}stopAnimation(){mo(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){mo(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){mo(n=>{const{drag:r}=this.getProps();if(!qx(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(t[n]-Wt(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lp(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};mo(s=>{const a=this.getAxisMotionValue(s);if(a){const l=a.get();i[s]=mtt({min:l,max:l},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),mo(s=>{if(!qx(s,t,null))return;const a=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];a.set(Wt(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;Ett.set(this.visualElement,this);const t=this.visualElement.current,n=Tl(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();lp(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const s=vl(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(mo(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=NP,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function qx(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function $tt(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Att extends Wc{constructor(t){super(t),this.removeGroupControls=rn,this.removeListeners=rn,this.controls=new _tt(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rn}unmount(){this.removeGroupControls(),this.removeListeners()}}const mW=e=>(t,n)=>{e&&_t.update(()=>e(t,n))};class Ttt extends Wc{constructor(){super(...arguments),this.removePointerDownListener=rn}onPointerDown(t){this.session=new bue(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Eue(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:mW(t),onStart:mW(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&_t.update(()=>i(o,s))}}}mount(){this.removePointerDownListener=Tl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Ptt(){const e=F.useContext(cb);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=F.useId();return F.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}function Ftt(){return Mtt(F.useContext(cb))}function Mtt(e){return e===null?!0:e.isPresent}const Q2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yW(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const m0={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ae.test(e))e=parseFloat(e);else return e;const n=yW(e,t.target.x),r=yW(e,t.target.y);return`${n}% ${r}%`}},Rtt={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=kc.parse(e);if(i.length>5)return r;const o=kc.createTransformer(e),s=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=a,i[1+s]/=l;const u=Wt(a,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),o(i)}};class Ott extends Vi.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=t;IJe(Dtt),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Q2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?s.promote():s.relegate()||_t.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function _ue(e){const[t,n]=Ptt(),r=F.useContext(CN);return Vi.createElement(Ott,{...e,layoutGroup:r,switchLayoutGroup:F.useContext(wle),isPresent:t,safeToRemove:n})}const Dtt={borderRadius:{...m0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:m0,borderTopRightRadius:m0,borderBottomLeftRadius:m0,borderBottomRightRadius:m0,boxShadow:Rtt},$ue=["TopLeft","TopRight","BottomLeft","BottomRight"],Ntt=$ue.length,vW=e=>typeof e=="string"?parseFloat(e):e,bW=e=>typeof e=="number"||Ae.test(e);function Ltt(e,t,n,r,i,o){i?(e.opacity=Wt(0,n.opacity!==void 0?n.opacity:1,Itt(r)),e.opacityExit=Wt(t.opacity!==void 0?t.opacity:1,0,ztt(r))):o&&(e.opacity=Wt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<Ntt;s++){const a=`border${$ue[s]}Radius`;let l=xW(t,a),u=xW(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||bW(l)===bW(u)?(e[a]=Math.max(Wt(vW(l),vW(u),r),0),(Ea.test(u)||Ea.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Wt(t.rotate||0,n.rotate||0,r))}function xW(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Itt=Aue(0,.5,Kle),ztt=Aue(.5,.95,rn);function Aue(e,t,n){return r=>r<e?0:r>t?1:n(q1(e,t,r))}function wW(e,t){e.min=t.min,e.max=t.max}function po(e,t){wW(e.x,t.x),wW(e.y,t.y)}function SW(e,t,n,r,i){return e-=t,e=_C(e,1/n,r),i!==void 0&&(e=_C(e,1/i,r)),e}function Btt(e,t=0,n=1,r=.5,i,o=e,s=e){if(Ea.test(t)&&(t=parseFloat(t),t=Wt(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=Wt(o.min,o.max,r);e===o&&(a-=t),e.min=SW(e.min,t,n,a,i),e.max=SW(e.max,t,n,a,i)}function CW(e,t,[n,r,i],o,s){Btt(e,t[n],t[r],t[i],t.scale,o,s)}const jtt=["x","scaleX","originX"],Utt=["y","scaleY","originY"];function kW(e,t,n,r){CW(e.x,t,jtt,n?n.x:void 0,r?r.x:void 0),CW(e.y,t,Utt,n?n.y:void 0,r?r.y:void 0)}function EW(e){return e.translate===0&&e.scale===1}function Tue(e){return EW(e.x)&&EW(e.y)}function Vtt(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Pue(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function _W(e){return no(e.x)/no(e.y)}class Wtt{constructor(){this.members=[]}add(t){LN(this.members,t),t.scheduleRender()}remove(t){if(IN(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $W(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const s=e.x.scale*t.x,a=e.y.scale*t.y;return(s!==1||a!==1)&&(r+=`scale(${s}, ${a})`),r||"none"}const Htt=(e,t)=>e.depth-t.depth;class qtt{constructor(){this.children=[],this.isDirty=!1}add(t){LN(this.children,t),this.isDirty=!0}remove(t){IN(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Htt),this.isDirty=!1,this.children.forEach(t)}}function Gtt(e,t){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=t&&(jl(r),e(o-t))};return _t.read(r,!0),()=>jl(r)}function Ytt(e){window.MotionDebug&&window.MotionDebug.record(e)}function Xtt(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Ktt(e,t,n){const r=_i(e)?e:Hg(e);return r.start(NN("",r,t,n)),r.animation}const AW=["","X","Y","Z"],Qtt={visibility:"hidden"},TW=1e3;let Jtt=0;const hf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Fue({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=t==null?void 0:t()){this.id=Jtt++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,hf.totalNodes=hf.resolvedTargetDeltas=hf.recalculatedProjection=0,this.nodes.forEach(tnt),this.nodes.forEach(snt),this.nodes.forEach(ant),this.nodes.forEach(nnt),Ytt(hf)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new qtt)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new zN),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Xtt(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),e){let f;const d=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Gtt(d,250),Q2.hasAnimatedSinceResize&&(Q2.hasAnimatedSinceResize=!1,this.nodes.forEach(FW))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||dnt,{onLayoutAnimationStart:m,onLayoutAnimationComplete:y}=c.getProps(),v=!this.targetLayout||!Pue(this.targetLayout,p)||h,b=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const x={...DN(g,"layout"),onPlay:m,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||FW(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,jl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lnt),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(PW);return}this.isUpdating||this.nodes.forEach(int),this.isUpdating=!1,this.nodes.forEach(ont),this.nodes.forEach(Ztt),this.nodes.forEach(ent),this.clearAllSnapshots();const a=performance.now();hr.delta=Cc(0,1e3/60,a-hr.timestamp),hr.timestamp=a,hr.isProcessing=!0,M3.update.process(hr),M3.preRender.process(hr),M3.render.process(hr),hr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(rnt),this.sharedNodes.forEach(unt)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Tue(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(a||df(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),hnt(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return cn();const a=s.measureViewportBox(),{scroll:l}=this.root;return l&&(bu(a.x,l.offset.x),bu(a.y,l.offset.y)),a}removeElementScroll(s){const a=cn();po(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:f}=u;if(u!==this.root&&c&&f.layoutScroll){if(c.isRoot){po(a,s);const{scroll:d}=this.root;d&&(bu(a.x,-d.offset.x),bu(a.y,-d.offset.y))}bu(a.x,c.offset.x),bu(a.y,c.offset.y)}}return a}applyTransform(s,a=!1){const l=cn();po(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&fp(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),df(c.latestValues)&&fp(l,c.latestValues)}return df(this.latestValues)&&fp(l,this.latestValues),l}removeTransform(s){const a=cn();po(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!df(u.latestValues))continue;LP(u.latestValues)&&u.updateSnapshot();const c=cn(),f=u.measurePageBox();po(c,f),kW(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return df(this.latestValues)&&kW(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=hr.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),By(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),po(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=cn(),this.targetWithTransforms=cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dtt(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):po(this.target,this.layout.layoutBox),Cue(this.target,this.targetDelta)):po(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),By(this.relativeTargetOrigin,this.target,h.target),po(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}hf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||LP(this.parent.latestValues)||Sue(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===hr.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;po(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;wtt(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=cp(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=cp(),this.projectionDeltaWithTransform=cp());const g=this.projectionTransform;zy(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=$W(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==d||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),hf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=cp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=cn(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=h!==p,m=this.getStack(),y=!m||m.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(fnt));this.animationProgress=0;let b;this.mixTargetDelta=x=>{const S=x/1e3;MW(f.x,s.x,S),MW(f.y,s.y,S),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(By(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cnt(this.relativeTarget,this.relativeTargetOrigin,d,S),b&&Vtt(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=cn()),po(b,this.relativeTarget)),g&&(this.animationValues=c,Ltt(c,u,this.latestValues,S,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(jl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_t.update(()=>{Q2.hasAnimatedSinceResize=!0,this.currentAnimation=Ktt(0,TW,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=s;if(!(!a||!l||!u)){if(this!==s&&this.layout&&u&&Mue(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||cn();const f=no(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const d=no(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+d}po(a,l),fp(a,c),zy(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Wtt),this.sharedNodes.get(s).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<AW.length;c++){const f="rotate"+AW[c];l[f]&&(u[f]=l[f],s.setStaticValue(f,0))}s.render();for(const c in u)s.setStaticValue(c,u[c]);s.scheduleRender()}getProjectionStyles(s){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Qtt;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=K2(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=K2(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!df(this.latestValues)&&(g.transform=c?c({},""):"none",this.hasProjected=!1),g}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=$W(this.projectionDeltaWithTransform,this.treeScale,d),c&&(u.transform=c(d,u.transform));const{x:h,y:p}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in vC){if(d[g]===void 0)continue;const{correct:m,applyTo:y}=vC[g],v=u.transform==="none"?d[g]:m(d[g],f);if(y){const b=y.length;for(let x=0;x<b;x++)u[y[x]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=f===this?K2(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(PW),this.root.sharedNodes.clear()}}}function Ztt(e){e.updateLayout()}function ent(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:o}=e.options,s=n.source!==e.layout.source;o==="size"?mo(f=>{const d=s?n.measuredBox[f]:n.layoutBox[f],h=no(d);d.min=r[f].min,d.max=d.min+h}):Mue(o,n.layoutBox,r)&&mo(f=>{const d=s?n.measuredBox[f]:n.layoutBox[f],h=no(r[f]);d.max=d.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+h)});const a=cp();zy(a,r,n.layoutBox);const l=cp();s?zy(l,e.applyTransform(i,!0),n.measuredBox):zy(l,r,n.layoutBox);const u=!Tue(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=cn();By(p,n.layoutBox,d.layoutBox);const g=cn();By(g,r,h.layoutBox),Pue(p,g)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function tnt(e){hf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function nnt(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function rnt(e){e.clearSnapshot()}function PW(e){e.clearMeasurements()}function int(e){e.isLayoutDirty=!1}function ont(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function FW(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function snt(e){e.resolveTargetDelta()}function ant(e){e.calcProjection()}function lnt(e){e.resetRotation()}function unt(e){e.removeLeadSnapshot()}function MW(e,t,n){e.translate=Wt(t.translate,0,n),e.scale=Wt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function RW(e,t,n,r){e.min=Wt(t.min,n.min,r),e.max=Wt(t.max,n.max,r)}function cnt(e,t,n,r){RW(e.x,t.x,n.x,r),RW(e.y,t.y,n.y,r)}function fnt(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const dnt={duration:.45,ease:[.4,0,.1,1]},OW=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),DW=OW("applewebkit/")&&!OW("chrome/")?Math.round:rn;function NW(e){e.min=DW(e.min),e.max=DW(e.max)}function hnt(e){NW(e.x),NW(e.y)}function Mue(e,t,n){return e==="position"||e==="preserve-aspect"&&!DP(_W(t),_W(n),.2)}const pnt=Fue({attachResizeListener:(e,t)=>vl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),V3={current:void 0},Rue=Fue({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!V3.current){const e=new pnt({});e.mount(window),e.setOptions({layoutScroll:!0}),V3.current=e}return V3.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),gnt={pan:{Feature:Ttt},drag:{Feature:Att,ProjectionNode:Rue,MeasureLayout:_ue}},mnt=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ynt(e){const t=mnt.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function zP(e,t,n=1){const[r,i]=ynt(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const s=o.trim();return gue(s)?parseFloat(s):s}else return AP(i)?zP(i,t,n+1):i}function vnt(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const o=i.get();if(!AP(o))return;const s=zP(o,r);s&&i.set(s)});for(const i in t){const o=t[i];if(!AP(o))continue;const s=zP(o,r);s&&(t[i]=s,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:t,transitionEnd:n}}const bnt=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Oue=e=>bnt.has(e),xnt=e=>Object.keys(e).some(Oue),LW=e=>e===sh||e===Ae,IW=(e,t)=>parseFloat(e.split(", ")[t]),zW=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return IW(i[1],t);{const o=r.match(/^matrix\((.+)\)$/);return o?IW(o[1],e):0}},wnt=new Set(["x","y","z"]),Snt=fb.filter(e=>!wnt.has(e));function Cnt(e){const t=[];return Snt.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const qg={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:zW(4,13),y:zW(5,14)};qg.translateX=qg.x;qg.translateY=qg.y;const knt=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:s}=o,a={};s==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=qg[u](r,o)}),t.render();const l=t.measureViewportBox();return n.forEach(u=>{const c=t.getValue(u);c&&c.jump(a[u]),e[u]=qg[u](l,o)}),e},Ent=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(Oue);let o=[],s=!1;const a=[];if(i.forEach(l=>{const u=e.getValue(l);if(!e.hasValue(l))return;let c=n[l],f=g0(c);const d=t[l];let h;if(xC(d)){const p=d.length,g=d[0]===null?1:0;c=d[g],f=g0(c);for(let m=g;m<p&&d[m]!==null;m++)h?wC(g0(d[m])===h):h=g0(d[m])}else h=g0(d);if(f!==h)if(LW(f)&&LW(h)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof d=="string"?t[l]=parseFloat(d):Array.isArray(d)&&h===Ae&&(t[l]=d.map(parseFloat))}else f!=null&&f.transform&&(h!=null&&h.transform)&&(c===0||d===0)?c===0?u.set(h.transform(c)):t[l]=f.transform(d):(s||(o=Cnt(e),s=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:t[l],u.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=knt(t,e,a);return o.length&&o.forEach(([c,f])=>{e.getValue(c).set(f)}),e.render(),A_&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function _nt(e,t,n,r){return xnt(t)?Ent(e,t,n,r):{target:t,transitionEnd:r}}const $nt=(e,t,n,r)=>{const i=vnt(e,t,r);return t=i.target,r=i.transitionEnd,_nt(e,t,n,r)},BP={current:null},Due={current:!1};function Ant(){if(Due.current=!0,!!A_)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>BP.current=e.matches;e.addListener(t),t()}else BP.current=!1}function Tnt(e,t,n){const{willChange:r}=t;for(const i in t){const o=t[i],s=n[i];if(_i(o))e.addValue(i,o),EC(r)&&r.add(i);else if(_i(s))e.addValue(i,Hg(o,{owner:e})),EC(r)&&r.remove(i);else if(s!==o)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(o)}else{const a=e.getStaticValue(i);e.addValue(i,Hg(a!==void 0?a:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const BW=new WeakMap,Nue=Object.keys(H1),Pnt=Nue.length,jW=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Fnt=SN.length;class Mnt{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>_t.render(this.render,!1,!0);const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=P_(n),this.isVariantNode=xle(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const f in c){const d=c[f];a[f]!==void 0&&_i(d)&&(d.set(a[f],!1),EC(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,BW.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Due.current||Ant(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:BP.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){BW.delete(this.current),this.projection&&this.projection.unmount(),jl(this.notifyUpdate),jl(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=oh.has(t),i=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&_t.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,o){let s,a;for(let l=0;l<Pnt;l++){const u=Nue[l],{isEnabled:c,Feature:f,ProjectionNode:d,MeasureLayout:h}=H1[u];d&&(s=d),c(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:h}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||f&&lp(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:d,layoutRoot:h})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):cn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<jW.length;r++){const i=jW[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=t["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Tnt(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Fnt;r++){const i=SN[r],o=this.props[i];(W1(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Hg(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=PN(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!_i(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new zN),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Lue extends Mnt{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},o){let s=Get(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),s&&(s=i(s))),o){Het(this,r,s);const a=$nt(this,r,s,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function Rnt(e){return window.getComputedStyle(e)}class Ont extends Lue{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(oh.has(n)){const r=ON(n);return r&&r.default||0}else{const r=Rnt(t),i=(kle(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return kue(t,n)}build(t,n,r,i){EN(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return TN(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;_i(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){Ple(t,n,r,i)}}class Dnt extends Lue{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(oh.has(n)){const r=ON(n);return r&&r.default||0}return n=Fle.has(n)?n:xN(n),t.getAttribute(n)}measureInstanceViewportBox(){return cn()}scrapeMotionValuesFromProps(t,n){return Rle(t,n)}build(t,n,r,i){$N(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){Mle(t,n,r,i)}mount(t){this.isSVGTag=AN(t.tagName),super.mount(t)}}const Nnt=(e,t)=>kN(e)?new Dnt(t,{enableHardwareAcceleration:!1}):new Ont(t,{enableHardwareAcceleration:!0}),Lnt={layout:{ProjectionNode:Rue,MeasureLayout:_ue}},Int={...ltt,...$Ze,...gnt,...Lnt},BN=NJe((e,t)=>pZe(e,t,Int,Nnt));function Iue(){const e=F.useRef(!1);return bN(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function znt(){const e=Iue(),[t,n]=F.useState(0),r=F.useCallback(()=>{e.current&&n(t+1)},[t]);return[F.useCallback(()=>_t.postRender(r),[r]),t]}class Bnt extends F.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function jnt({children:e,isPresent:t}){const n=F.useId(),r=F.useRef(null),i=F.useRef({width:0,height:0,top:0,left:0});return F.useInsertionEffect(()=>{const{width:o,height:s,top:a,left:l}=i.current;if(t||!r.current||!o||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),F.createElement(Bnt,{isPresent:t,childRef:r,sizeRef:i},F.cloneElement(e,{ref:r}))}const W3=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s})=>{const a=Ole(Unt),l=F.useId(),u=F.useMemo(()=>({id:l,initial:t,isPresent:n,custom:i,onExitComplete:c=>{a.set(c,!0);for(const f of a.values())if(!f)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),o?void 0:[n]);return F.useMemo(()=>{a.forEach((c,f)=>a.set(f,!1))},[n]),F.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),s==="popLayout"&&(e=F.createElement(jnt,{isPresent:n},e)),F.createElement(cb.Provider,{value:u},e)};function Unt(){return new Map}function Vnt(e){return F.useEffect(()=>()=>e(),[])}const pf=e=>e.key||"";function Wnt(e,t){e.forEach(n=>{const r=pf(n);t.set(r,n)})}function Hnt(e){const t=[];return F.Children.forEach(e,n=>{F.isValidElement(n)&&t.push(n)}),t}const zue=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:s="sync"})=>{const a=F.useContext(CN).forceRender||znt()[0],l=Iue(),u=Hnt(e);let c=u;const f=F.useRef(new Map).current,d=F.useRef(c),h=F.useRef(new Map).current,p=F.useRef(!0);if(bN(()=>{p.current=!1,Wnt(u,h),d.current=c}),Vnt(()=>{p.current=!0,h.clear(),f.clear()}),p.current)return F.createElement(F.Fragment,null,c.map(v=>F.createElement(W3,{key:pf(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:s},v)));c=[...c];const g=d.current.map(pf),m=u.map(pf),y=g.length;for(let v=0;v<y;v++){const b=g[v];m.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return s==="wait"&&f.size&&(c=[]),f.forEach((v,b)=>{if(m.indexOf(b)!==-1)return;const x=h.get(b);if(!x)return;const S=g.indexOf(b);let C=v;if(!C){const w=()=>{f.delete(b);const k=Array.from(h.keys()).filter(E=>!m.includes(E));if(k.forEach(E=>h.delete(E)),d.current=u.filter(E=>{const A=pf(E);return A===b||k.includes(A)}),!f.size){if(l.current===!1)return;a(),r&&r()}};C=F.createElement(W3,{key:pf(x),isPresent:!1,onExitComplete:w,custom:t,presenceAffectsLayout:o,mode:s},x),f.set(b,C)}c.splice(S,0,C)}),c=c.map(v=>{const b=v.key;return f.has(b)?v:F.createElement(W3,{key:pf(v),isPresent:!0,presenceAffectsLayout:o,mode:s},v)}),F.createElement(F.Fragment,null,f.size?c:c.map(v=>F.cloneElement(v)))};var qnt={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let r=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},Bue=F.memo(e=>{const{id:t,message:n,onCloseComplete:r,onRequestRemove:i,requestClose:o=!1,position:s="bottom",duration:a=5e3,containerStyle:l,motionVariants:u=qnt,toastSpacing:c="0.5rem"}=e,[f,d]=F.useState(a),h=Ftt();LV(()=>{h||r==null||r()},[h]),LV(()=>{d(a)},[a]);const p=()=>d(null),g=()=>d(a),m=()=>{h&&i()};F.useEffect(()=>{h&&o&&i()},[h,o,i]),_Je(m,f);const y=F.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:c,...l}),[l,c]),v=F.useMemo(()=>kJe(s),[s]);return $.jsx(BN.div,{layout:!0,className:"chakra-toast",variants:u,initial:"initial",animate:"animate",exit:"exit",onHoverStart:p,onHoverEnd:g,custom:{position:s},style:v,children:$.jsx(_e.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:y,children:ha(n,{id:t,onClose:m})})})});Bue.displayName="ToastComponent";function Gnt(e,t){var n;const r=e??"bottom",o={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(n=o==null?void 0:o[t])!=null?n:r}var UW={path:$.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[$.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),$.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),$.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},We=Pe((e,t)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:o=!1,children:s,className:a,__css:l,...u}=e,c=dt("chakra-icon",a),f=eu("Icon",e),d={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...l,...f},h={ref:t,focusable:o,className:c,__css:d},p=r??UW.viewBox;if(n&&typeof n!="string")return $.jsx(_e.svg,{as:n,...h,...u});const g=s??UW.path;return $.jsx(_e.svg,{verticalAlign:"middle",viewBox:p,...h,...u,children:g})});We.displayName="Icon";function Ynt(e){return $.jsx(We,{viewBox:"0 0 24 24",...e,children:$.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function Xnt(e){return $.jsx(We,{viewBox:"0 0 24 24",...e,children:$.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function VW(e){return $.jsx(We,{viewBox:"0 0 24 24",...e,children:$.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var Knt=nh({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),jN=Pe((e,t)=>{const n=eu("Spinner",e),{label:r="Loading...",thickness:i="2px",speed:o="0.45s",emptyColor:s="transparent",className:a,...l}=$r(e),u=dt("chakra-spinner",a),c={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:s,borderLeftColor:s,animation:`${Knt} ${o} linear infinite`,...n};return $.jsx(_e.div,{ref:t,__css:c,className:u,...l,children:r&&$.jsx(_e.span,{srOnly:!0,children:r})})});jN.displayName="Spinner";var[Qnt,UN]=ni({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[Jnt,VN]=ni({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),jue={info:{icon:Xnt,colorScheme:"blue"},warning:{icon:VW,colorScheme:"orange"},success:{icon:Ynt,colorScheme:"green"},error:{icon:VW,colorScheme:"red"},loading:{icon:jN,colorScheme:"blue"}};function Znt(e){return jue[e].colorScheme}function ert(e){return jue[e].icon}var Uue=Pe(function(t,n){const r=VN(),{status:i}=UN(),o={display:"inline",...r.description};return $.jsx(_e.div,{ref:n,"data-status":i,...t,className:dt("chakra-alert__desc",t.className),__css:o})});Uue.displayName="AlertDescription";function Vue(e){const{status:t}=UN(),n=ert(t),r=VN(),i=t==="loading"?r.spinner:r.icon;return $.jsx(_e.span,{display:"inherit","data-status":t,...e,className:dt("chakra-alert__icon",e.className),__css:i,children:e.children||$.jsx(n,{h:"100%",w:"100%"})})}Vue.displayName="AlertIcon";var Wue=Pe(function(t,n){const r=VN(),{status:i}=UN();return $.jsx(_e.div,{ref:n,"data-status":i,...t,className:dt("chakra-alert__title",t.className),__css:r.title})});Wue.displayName="AlertTitle";var Hue=Pe(function(t,n){var r;const{status:i="info",addRole:o=!0,...s}=$r(t),a=(r=t.colorScheme)!=null?r:Znt(i),l=Vc("Alert",{...t,colorScheme:a}),u={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...l.container};return $.jsx(Qnt,{value:{status:i},children:$.jsx(Jnt,{value:l,children:$.jsx(_e.div,{"data-status":i,role:o?"alert":void 0,ref:n,...s,className:dt("chakra-alert",t.className),__css:u})})})});Hue.displayName="Alert";function trt(e){return $.jsx(We,{focusable:"false","aria-hidden":!0,...e,children:$.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var que=Pe(function(t,n){const r=eu("CloseButton",t),{children:i,isDisabled:o,__css:s,...a}=$r(t),l={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return $.jsx(_e.button,{type:"button","aria-label":"Close",ref:n,disabled:o,__css:{...l,...r,...s},...a,children:i||$.jsx(trt,{width:"1em",height:"1em"})})});que.displayName="CloseButton";var nrt={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},ca=rrt(nrt);function rrt(e){let t=e;const n=new Set,r=i=>{t=i(t),n.forEach(o=>o())};return{getState:()=>t,subscribe:i=>(n.add(i),()=>{r(()=>e),n.delete(i)}),removeToast:(i,o)=>{r(s=>({...s,[o]:s[o].filter(a=>a.id!=i)}))},notify:(i,o)=>{const s=irt(i,o),{position:a,id:l}=s;return r(u=>{var c,f;const h=a.includes("top")?[s,...(c=u[a])!=null?c:[]]:[...(f=u[a])!=null?f:[],s];return{...u,[a]:h}}),l},update:(i,o)=>{i&&r(s=>{const a={...s},{position:l,index:u}=NV(a,i);return l&&u!==-1&&(a[l][u]={...a[l][u],...o,message:Gue(o)}),a})},closeAll:({positions:i}={})=>{r(o=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((l,u)=>(l[u]=o[u].map(c=>({...c,requestClose:!0})),l),{...o}))},close:i=>{r(o=>{const s=mle(o,i);return s?{...o,[s]:o[s].map(a=>a.id==i?{...a,requestClose:!0}:a)}:o})},isActive:i=>!!NV(ca.getState(),i).position}}var WW=0;function irt(e,t={}){var n,r;WW+=1;const i=(n=t.id)!=null?n:WW,o=(r=t.position)!=null?r:"bottom";return{id:i,message:e,position:o,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>ca.removeToast(String(i),o),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var ort=e=>{const{status:t,variant:n="solid",id:r,title:i,isClosable:o,onClose:s,description:a,colorScheme:l,icon:u}=e,c=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return $.jsxs(Hue,{addRole:!1,status:t,variant:n,id:c==null?void 0:c.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[$.jsx(Vue,{children:u}),$.jsxs(_e.div,{flex:"1",maxWidth:"100%",children:[i&&$.jsx(Wue,{id:c==null?void 0:c.title,children:i}),a&&$.jsx(Uue,{id:c==null?void 0:c.description,display:"block",children:a})]}),o&&$.jsx(que,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function Gue(e={}){const{render:t,toastComponent:n=ort}=e;return i=>typeof t=="function"?t({...i,...e}):$.jsx(n,{...i,...e})}function srt(e,t){const n=i=>{var o;return{...t,...i,position:Gnt((o=i==null?void 0:i.position)!=null?o:t==null?void 0:t.position,e)}},r=i=>{const o=n(i),s=Gue(o);return ca.notify(s,o)};return r.update=(i,o)=>{ca.update(i,n(o))},r.promise=(i,o)=>{const s=r({...o.loading,status:"loading",duration:null});i.then(a=>r.update(s,{status:"success",duration:5e3,...ha(o.success,a)})).catch(a=>r.update(s,{status:"error",duration:5e3,...ha(o.error,a)}))},r.closeAll=ca.closeAll,r.close=ca.close,r.isActive=ca.isActive,r}var[art,lrt]=ni({name:"ToastOptionsContext",strict:!1}),urt=e=>{const t=F.useSyncExternalStore(ca.subscribe,ca.getState,ca.getState),{motionVariants:n,component:r=Bue,portalProps:i}=e,s=Object.keys(t).map(a=>{const l=t[a];return $.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${a}`,id:`chakra-toast-manager-${a}`,style:EJe(a),children:$.jsx(zue,{initial:!1,children:l.map(u=>$.jsx(r,{motionVariants:n,...u},u.id))})},a)});return $.jsx(w_,{...i,children:s})};function crt(e){const{theme:t}=Bae(),n=lrt();return F.useMemo(()=>srt(t.direction,{...n,...e}),[e,t.direction,n])}var frt=e=>function({children:n,theme:r=e,toastOptions:i,...o}){return $.jsxs(SJe,{theme:r,...o,children:[$.jsx(art,{value:i==null?void 0:i.defaultOptions,children:n}),$.jsx(urt,{...i})]})},drt=frt(ale),hrt=Object.defineProperty,prt=(e,t,n)=>t in e?hrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gt=(e,t,n)=>(prt(e,typeof t!="symbol"?t+"":t,n),n);function HW(e){return e.sort((t,n)=>{const r=t.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var grt=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function qW(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function GW(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var jP=typeof window<"u"?F.useLayoutEffect:F.useEffect,$C=e=>e,mrt=class{constructor(){Gt(this,"descendants",new Map),Gt(this,"register",e=>{if(e!=null)return grt(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),Gt(this,"unregister",e=>{this.descendants.delete(e);const t=HW(Array.from(this.descendants.keys()));this.assignIndex(t)}),Gt(this,"destroy",()=>{this.descendants.clear()}),Gt(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})}),Gt(this,"count",()=>this.descendants.size),Gt(this,"enabledCount",()=>this.enabledValues().length),Gt(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index)),Gt(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),Gt(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),Gt(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),Gt(this,"first",()=>this.item(0)),Gt(this,"firstEnabled",()=>this.enabledItem(0)),Gt(this,"last",()=>this.item(this.descendants.size-1)),Gt(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),Gt(this,"indexOf",e=>{var t,n;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1}),Gt(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),Gt(this,"next",(e,t=!0)=>{const n=qW(e,this.count(),t);return this.item(n)}),Gt(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=qW(r,this.enabledCount(),t);return this.enabledItem(i)}),Gt(this,"prev",(e,t=!0)=>{const n=GW(e,this.count()-1,t);return this.item(n)}),Gt(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=GW(r,this.enabledCount()-1,t);return this.enabledItem(i)}),Gt(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),r=HW(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(r)})}};function yrt(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function Gg(...e){return t=>{e.forEach(n=>{yrt(n,t)})}}function vrt(...e){return F.useMemo(()=>Gg(...e),e)}function brt(){const e=F.useRef(new mrt);return jP(()=>()=>e.current.destroy()),e.current}var[xrt,Yue]=ni({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function wrt(e){const t=Yue(),[n,r]=F.useState(-1),i=F.useRef(null);jP(()=>()=>{i.current&&t.unregister(i.current)},[]),jP(()=>{if(!i.current)return;const s=Number(i.current.dataset.index);n!=s&&!Number.isNaN(s)&&r(s)});const o=$C(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(i.current),register:Gg(o,i)}}function Srt(){return[$C(xrt),()=>$C(Yue()),()=>brt(),i=>wrt(i)]}function Crt(e){const{value:t,defaultValue:n,onChange:r,shouldUpdate:i=(d,h)=>d!==h}=e,o=X2(r),s=X2(i),[a,l]=F.useState(n),u=t!==void 0,c=u?t:a,f=X2(d=>{const p=typeof d=="function"?d(c):d;s(c,p)&&(u||l(p),o(p))},[u,o,c,s]);return[c,f]}var YW={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},XW={enter:{duration:.2,ease:YW.easeOut},exit:{duration:.1,ease:YW.easeIn}},KW={enter:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.enter}),exit:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.exit})},krt={enter:({transition:e,transitionEnd:t,delay:n}={})=>{var r;return{opacity:1,transition:(r=e==null?void 0:e.enter)!=null?r:KW.enter(XW.enter,n),transitionEnd:t==null?void 0:t.enter}},exit:({transition:e,transitionEnd:t,delay:n}={})=>{var r;return{opacity:0,transition:(r=e==null?void 0:e.exit)!=null?r:KW.exit(XW.exit,n),transitionEnd:t==null?void 0:t.exit}}},Ert={initial:"exit",animate:"enter",exit:"exit",variants:krt},Xue=F.forwardRef(function(t,n){const{unmountOnExit:r,in:i,className:o,transition:s,transitionEnd:a,delay:l,...u}=t,c=i||r?"enter":"exit",f=r?i&&r:!0,d={transition:s,transitionEnd:a,delay:l};return $.jsx(zue,{custom:d,children:f&&$.jsx(BN.div,{ref:n,className:dt("chakra-fade",o),custom:d,...Ert,animate:c,...u})})});Xue.displayName="Fade";var UP=Pe(function(t,n){const{htmlWidth:r,htmlHeight:i,alt:o,...s}=t;return $.jsx("img",{width:r,height:i,ref:n,alt:o,...s})});UP.displayName="NativeImage";function _rt(e){const{loading:t,src:n,srcSet:r,onLoad:i,onError:o,crossOrigin:s,sizes:a,ignoreFallback:l}=e,[u,c]=F.useState("pending");F.useEffect(()=>{c(n?"loading":"pending")},[n]);const f=F.useRef(),d=F.useCallback(()=>{if(!n)return;h();const p=new Image;p.src=n,s&&(p.crossOrigin=s),r&&(p.srcset=r),a&&(p.sizes=a),t&&(p.loading=t),p.onload=g=>{h(),c("loaded"),i==null||i(g)},p.onerror=g=>{h(),c("failed"),o==null||o(g)},f.current=p},[n,s,r,a,i,o,t]),h=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return Dg(()=>{if(!l)return u==="loading"&&d(),()=>{h()}},[u,d,l]),l?"loaded":u}var $rt=(e,t)=>e!=="loaded"&&t==="beforeLoadOrError"||e==="failed"&&t==="onError";function Art(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}var WN=Pe(function(t,n){const{fallbackSrc:r,fallback:i,src:o,srcSet:s,align:a,fit:l,loading:u,ignoreFallback:c,crossOrigin:f,fallbackStrategy:d="beforeLoadOrError",referrerPolicy:h,...p}=t,g=r!==void 0||i!==void 0,m=u!=null||c||!g,y=_rt({...t,crossOrigin:f,ignoreFallback:m}),v=$rt(y,d),b={ref:n,objectFit:l,objectPosition:a,...m?p:Art(p,["onError","onLoad"])};return v?i||$.jsx(_e.img,{as:UP,className:"chakra-image__placeholder",src:r,...b}):$.jsx(_e.img,{as:UP,src:o,srcSet:s,crossOrigin:f,loading:u,referrerPolicy:h,className:"chakra-image",...b})});WN.displayName="Image";function O_(e){return F.Children.toArray(e).filter(t=>F.isValidElement(t))}var[Trt,Prt]=ni({strict:!1,name:"ButtonGroupContext"}),Frt={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},Mrt={horizontal:e=>({"& > *:not(style) ~ *:not(style)":{marginStart:e}}),vertical:e=>({"& > *:not(style) ~ *:not(style)":{marginTop:e}})},HN=Pe(function(t,n){const{size:r,colorScheme:i,variant:o,className:s,spacing:a="0.5rem",isAttached:l,isDisabled:u,orientation:c="horizontal",...f}=t,d=dt("chakra-button__group",s),h=F.useMemo(()=>({size:r,colorScheme:i,variant:o,isDisabled:u}),[r,i,o,u]);let p={display:"inline-flex",...l?Frt[c]:Mrt[c](a)};const g=c==="vertical";return $.jsx(Trt,{value:h,children:$.jsx(_e.div,{ref:n,role:"group",__css:p,className:d,"data-attached":l?"":void 0,"data-orientation":c,flexDir:g?"column":void 0,...f})})});HN.displayName="ButtonGroup";function Rrt(e){const[t,n]=F.useState(!e);return{ref:F.useCallback(o=>{o&&n(o.tagName==="BUTTON")},[]),type:t?"button":void 0}}function VP(e){const{children:t,className:n,...r}=e,i=F.isValidElement(t)?F.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,o=dt("chakra-button__icon",n);return $.jsx(_e.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:o,children:i})}VP.displayName="ButtonIcon";function WP(e){const{label:t,placement:n,spacing:r="0.5rem",children:i=$.jsx(jN,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:s,...a}=e,l=dt("chakra-button__spinner",o),u=n==="start"?"marginEnd":"marginStart",c=F.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[u]:t?r:0,fontSize:"1em",lineHeight:"normal",...s}),[s,t,u,r]);return $.jsx(_e.div,{className:l,...a,__css:c,children:i})}WP.displayName="ButtonSpinner";var _a=Pe((e,t)=>{const n=Prt(),r=eu("Button",{...n,...e}),{isDisabled:i=n==null?void 0:n.isDisabled,isLoading:o,isActive:s,children:a,leftIcon:l,rightIcon:u,loadingText:c,iconSpacing:f="0.5rem",type:d,spinner:h,spinnerPlacement:p="start",className:g,as:m,...y}=$r(e),v=F.useMemo(()=>{const C={...r==null?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:C}}},[r,n]),{ref:b,type:x}=Rrt(m),S={rightIcon:u,leftIcon:l,iconSpacing:f,children:a};return $.jsxs(_e.button,{ref:vrt(t,b),as:m,type:d??x,"data-active":bo(s),"data-loading":bo(o),__css:v,className:dt("chakra-button",g),...y,disabled:i||o,children:[o&&p==="start"&&$.jsx(WP,{className:"chakra-button__spinner--start",label:c,placement:"start",spacing:f,children:h}),o?c||$.jsx(_e.span,{opacity:0,children:$.jsx(QW,{...S})}):$.jsx(QW,{...S}),o&&p==="end"&&$.jsx(WP,{className:"chakra-button__spinner--end",label:c,placement:"end",spacing:f,children:h})]})});_a.displayName="Button";function QW(e){const{leftIcon:t,rightIcon:n,children:r,iconSpacing:i}=e;return $.jsxs($.Fragment,{children:[t&&$.jsx(VP,{marginEnd:i,children:t}),r,n&&$.jsx(VP,{marginStart:i,children:n})]})}var vs=Pe((e,t)=>{const{icon:n,children:r,isRound:i,"aria-label":o,...s}=e,a=n||r,l=F.isValidElement(a)?F.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return $.jsx(_a,{padding:"0",borderRadius:i?"full":void 0,ref:t,"aria-label":o,...s,children:l})});vs.displayName="IconButton";var[Ort,Drt]=ni({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Nrt,Kue]=ni({strict:!1,name:"FormControlContext"});function Lrt(e){const{id:t,isRequired:n,isInvalid:r,isDisabled:i,isReadOnly:o,...s}=e,a=F.useId(),l=t||`field-${a}`,u=`${l}-label`,c=`${l}-feedback`,f=`${l}-helptext`,[d,h]=F.useState(!1),[p,g]=F.useState(!1),[m,y]=F.useState(!1),v=F.useCallback((w={},k=null)=>({id:f,...w,ref:Gg(k,E=>{E&&g(!0)})}),[f]),b=F.useCallback((w={},k=null)=>({...w,ref:k,"data-focus":bo(m),"data-disabled":bo(i),"data-invalid":bo(r),"data-readonly":bo(o),id:w.id!==void 0?w.id:u,htmlFor:w.htmlFor!==void 0?w.htmlFor:l}),[l,i,m,r,o,u]),x=F.useCallback((w={},k=null)=>({id:c,...w,ref:Gg(k,E=>{E&&h(!0)}),"aria-live":"polite"}),[c]),S=F.useCallback((w={},k=null)=>({...w,...s,ref:k,role:"group","data-focus":bo(m),"data-disabled":bo(i),"data-invalid":bo(r),"data-readonly":bo(o)}),[s,i,m,r,o]),C=F.useCallback((w={},k=null)=>({...w,ref:k,role:"presentation","aria-hidden":!0,children:w.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!o,isDisabled:!!i,isFocused:!!m,onFocus:()=>y(!0),onBlur:()=>y(!1),hasFeedbackText:d,setHasFeedbackText:h,hasHelpText:p,setHasHelpText:g,id:l,labelId:u,feedbackId:c,helpTextId:f,htmlProps:s,getHelpTextProps:v,getErrorMessageProps:x,getRootProps:S,getLabelProps:b,getRequiredIndicatorProps:C}}var Que=Pe(function(t,n){const r=Vc("Form",t),i=$r(t),{getRootProps:o,htmlProps:s,...a}=Lrt(i),l=dt("chakra-form-control",t.className);return $.jsx(Nrt,{value:a,children:$.jsx(Ort,{value:r,children:$.jsx(_e.div,{...o({},n),className:l,__css:r.container})})})});Que.displayName="FormControl";var Irt=Pe(function(t,n){const r=Kue(),i=Drt(),o=dt("chakra-form__helper-text",t.className);return $.jsx(_e.div,{...r==null?void 0:r.getHelpTextProps(t,n),__css:i.helperText,className:o})});Irt.displayName="FormHelperText";function Jue(e){const{isDisabled:t,isInvalid:n,isReadOnly:r,isRequired:i,...o}=zrt(e);return{...o,disabled:t,readOnly:r,required:i,"aria-invalid":h3(n),"aria-required":h3(i),"aria-readonly":h3(r)}}function zrt(e){var t,n,r;const i=Kue(),{id:o,disabled:s,readOnly:a,required:l,isRequired:u,isInvalid:c,isReadOnly:f,isDisabled:d,onFocus:h,onBlur:p,...g}=e,m=e["aria-describedby"]?[e["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&m.push(i.feedbackId),i!=null&&i.hasHelpText&&m.push(i.helpTextId),{...g,"aria-describedby":m.join(" ")||void 0,id:o??(i==null?void 0:i.id),isDisabled:(t=s??d)!=null?t:i==null?void 0:i.isDisabled,isReadOnly:(n=a??f)!=null?n:i==null?void 0:i.isReadOnly,isRequired:(r=l??u)!=null?r:i==null?void 0:i.isRequired,isInvalid:c??(i==null?void 0:i.isInvalid),onFocus:z1(i==null?void 0:i.onFocus,h),onBlur:z1(i==null?void 0:i.onBlur,p)}}var Zue={exports:{}},Brt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",jrt=Brt,Urt=jrt;function ece(){}function tce(){}tce.resetWarningCache=ece;var Vrt=function(){function e(r,i,o,s,a,l){if(l!==Urt){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:tce,resetWarningCache:ece};return n.PropTypes=n,n};Zue.exports=Vrt();var Wrt=Zue.exports;const JW=Ul(Wrt);var[Hrt,qrt]=ni({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),nce=Pe(function(t,n){const r=Vc("Input",t),{children:i,className:o,...s}=$r(t),a=dt("chakra-input__group",o),l={},u=O_(i),c=r.field;u.forEach(d=>{var h,p;r&&(c&&d.type.id==="InputLeftElement"&&(l.paddingStart=(h=c.height)!=null?h:c.h),c&&d.type.id==="InputRightElement"&&(l.paddingEnd=(p=c.height)!=null?p:c.h),d.type.id==="InputRightAddon"&&(l.borderEndRadius=0),d.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const f=u.map(d=>{var h,p;const g=ple({size:((h=d.props)==null?void 0:h.size)||t.size,variant:((p=d.props)==null?void 0:p.variant)||t.variant});return d.type.id!=="Input"?F.cloneElement(d,g):F.cloneElement(d,Object.assign(g,l,d.props))});return $.jsx(_e.div,{className:a,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...s,children:$.jsx(Hrt,{value:r,children:f})})});nce.displayName="InputGroup";var Grt=_e("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),D_=Pe(function(t,n){var r,i;const{placement:o="left",...s}=t,a=qrt(),l=a.field,c={[o==="left"?"insetStart":"insetEnd"]:"0",width:(r=l==null?void 0:l.height)!=null?r:l==null?void 0:l.h,height:(i=l==null?void 0:l.height)!=null?i:l==null?void 0:l.h,fontSize:l==null?void 0:l.fontSize,...a.element};return $.jsx(Grt,{ref:n,__css:c,...s})});D_.id="InputElement";D_.displayName="InputElement";var rce=Pe(function(t,n){const{className:r,...i}=t,o=dt("chakra-input__left-element",r);return $.jsx(D_,{ref:n,placement:"left",className:o,...i})});rce.id="InputLeftElement";rce.displayName="InputLeftElement";var qN=Pe(function(t,n){const{className:r,...i}=t,o=dt("chakra-input__right-element",r);return $.jsx(D_,{ref:n,placement:"right",className:o,...i})});qN.id="InputRightElement";qN.displayName="InputRightElement";var AC=Pe(function(t,n){const{htmlSize:r,...i}=t,o=Vc("Input",i),s=$r(i),a=Jue(s),l=dt("chakra-input",t.className);return $.jsx(_e.input,{size:r,...a,__css:o.field,ref:n,className:l})});AC.displayName="Input";AC.id="Input";var J2=Pe(function(t,n){const r=eu("Link",t),{className:i,isExternal:o,...s}=$r(t);return $.jsx(_e.a,{target:o?"_blank":void 0,rel:o?"noopener":void 0,ref:n,className:dt("chakra-link",i),...s,__css:r})});J2.displayName="Link";var[Yrt,ice]=ni({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),GN=Pe(function(t,n){const r=Vc("List",t),{children:i,styleType:o="none",stylePosition:s,spacing:a,...l}=$r(t),u=O_(i),f=a?{["& > *:not(style) ~ *:not(style)"]:{mt:a}}:{};return $.jsx(Yrt,{value:r,children:$.jsx(_e.ul,{ref:n,listStyleType:o,listStylePosition:s,role:"list",__css:{...r.container,...f},...l,children:u})})});GN.displayName="List";var TC=Pe((e,t)=>{const{as:n,...r}=e;return $.jsx(GN,{ref:t,as:"ol",styleType:"decimal",marginStart:"1em",...r})});TC.displayName="OrderedList";var Xrt=Pe(function(t,n){const{as:r,...i}=t;return $.jsx(GN,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...i})});Xrt.displayName="UnorderedList";var oce=Pe(function(t,n){const r=ice();return $.jsx(_e.li,{ref:n,...t,__css:r.item})});oce.displayName="ListItem";var Krt=Pe(function(t,n){const r=ice();return $.jsx(We,{ref:n,role:"presentation",...t,__css:r.icon})});Krt.displayName="ListIcon";var sce=Object.freeze(["base","sm","md","lg","xl","2xl"]);function Qrt(e,t){return Array.isArray(e)?e.map(n=>n===null?null:t(n)):vi(e)?Object.keys(e).reduce((n,r)=>(n[r]=t(e[r]),n),{}):e!=null?t(e):null}function Jrt(e,t=sce){const n={};return e.forEach((r,i)=>{const o=t[i];r!=null&&(n[o]=r)}),n}var N_=_e("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});N_.displayName="Spacer";var Gn=Pe(function(t,n){const r=eu("Text",t),{className:i,align:o,decoration:s,casing:a,...l}=$r(t),u=ple({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return $.jsx(_e.p,{ref:n,className:dt("chakra-text",t.className),...u,...l,__css:r})});Gn.displayName="Text";var ace=e=>$.jsx(_e.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});ace.displayName="StackItem";function Zrt(e){const{spacing:t,direction:n}=e,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":Qrt(n,i=>r[i])}}var lce=Pe((e,t)=>{const{isInline:n,direction:r,align:i,justify:o,spacing:s="0.5rem",wrap:a,children:l,divider:u,className:c,shouldWrapChildren:f,...d}=e,h=n?"row":r??"column",p=F.useMemo(()=>Zrt({spacing:s,direction:h}),[s,h]),g=!!u,m=!f&&!g,y=F.useMemo(()=>{const b=O_(l);return m?b:b.map((x,S)=>{const C=typeof x.key<"u"?x.key:S,w=S+1===b.length,E=f?$.jsx(ace,{children:x},C):x;if(!g)return E;const A=F.cloneElement(u,{__css:p}),P=w?null:A;return $.jsxs(F.Fragment,{children:[E,P]},C)})},[u,p,g,m,f,l]),v=dt("chakra-stack",c);return $.jsx(_e.div,{ref:t,display:"flex",alignItems:i,justifyContent:o,flexDirection:h,flexWrap:a,gap:g?void 0:s,className:v,...d,children:y})});lce.displayName="Stack";var id=Pe((e,t)=>$.jsx(lce,{align:"center",...e,direction:"column",ref:t}));id.displayName="VStack";var Yg=Pe(function(t,n){const r=eu("Heading",t),{className:i,...o}=$r(t);return $.jsx(_e.h2,{ref:n,className:dt("chakra-heading",t.className),...o,__css:r})});Yg.displayName="Heading";var YN=_e("div");YN.displayName="Box";var uce=Pe(function(t,n){const{size:r,centerContent:i=!0,...o}=t,s=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return $.jsx(YN,{ref:n,boxSize:r,__css:{...s,flexShrink:0,flexGrow:0},...o})});uce.displayName="Square";var eit=Pe(function(t,n){const{size:r,...i}=t;return $.jsx(uce,{size:r,ref:n,borderRadius:"9999px",...i})});eit.displayName="Circle";var Cs=_e("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Cs.displayName="Center";var tit={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Pe(function(t,n){const{axis:r="both",...i}=t;return $.jsx(_e.div,{ref:n,__css:tit[r],...i,position:"absolute"})});var L_=Pe(function(t,n){const{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:o,borderRightWidth:s,borderWidth:a,borderStyle:l,borderColor:u,...c}=eu("Divider",t),{className:f,orientation:d="horizontal",__css:h,...p}=$r(t),g={vertical:{borderLeftWidth:r||s||a||"1px",height:"100%"},horizontal:{borderBottomWidth:i||o||a||"1px",width:"100%"}};return $.jsx(_e.hr,{ref:n,"aria-orientation":d,...p,__css:{...c,border:"0",borderColor:u,borderStyle:l,...g[d],...h},className:dt("chakra-divider",f)})});L_.displayName="Divider";var Ot=Pe(function(t,n){const{direction:r,align:i,justify:o,wrap:s,basis:a,grow:l,shrink:u,...c}=t,f={display:"flex",flexDirection:r,alignItems:i,justifyContent:o,flexWrap:s,flexBasis:a,flexGrow:l,flexShrink:u};return $.jsx(_e.div,{ref:n,__css:f,...c})});Ot.displayName="Flex";function nit(e,t={}){const{ssr:n=!0,fallback:r}=t,{getWindow:i}=wJe(),o=Array.isArray(e)?e:[e];let s=Array.isArray(r)?r:[r];s=s.filter(u=>u!=null);const[a,l]=F.useState(()=>o.map((u,c)=>({media:u,matches:n?!!s[c]:i().matchMedia(u).matches})));return F.useEffect(()=>{const u=i();l(o.map(d=>({media:d,matches:u.matchMedia(d).matches})));const c=o.map(d=>u.matchMedia(d)),f=d=>{l(h=>h.slice().map(p=>p.media===d.media?{...p,matches:d.matches}:p))};return c.forEach(d=>{typeof d.addListener=="function"?d.addListener(f):d.addEventListener("change",f)}),()=>{c.forEach(d=>{typeof d.removeListener=="function"?d.removeListener(f):d.removeEventListener("change",f)})}},[i]),a.map(u=>u.matches)}function rit(e,t,n=sce){let r=Object.keys(e).indexOf(t);if(r!==-1)return e[t];let i=n.indexOf(t);for(;i>=0;){const o=n[i];if(e.hasOwnProperty(o)){r=i;break}i-=1}if(r!==-1){const o=n[r];return e[o]}}function iit(e){var t,n;const r=vi(e)?e:{fallback:e??"base"},o=S_().__breakpoints.details.map(({minMaxQuery:u,breakpoint:c})=>({breakpoint:c,query:u.replace("@media screen and ","")})),s=o.map(u=>u.breakpoint===r.fallback),l=nit(o.map(u=>u.query),{fallback:s,ssr:r.ssr}).findIndex(u=>u==!0);return(n=(t=o[l])==null?void 0:t.breakpoint)!=null?n:r.fallback}function gf(e,t){var n;const r=vi(t)?t:{fallback:"base"},i=iit(r),o=S_();if(!i)return;const s=Array.from(((n=o.__breakpoints)==null?void 0:n.keys)||[]),a=Array.isArray(e)?Object.fromEntries(Object.entries(Jrt(e,s)).map(([l,u])=>[l,u])):e;return rit(a,i,s)}function oit(){const e=F.useRef(new Map),t=e.current,n=F.useCallback((i,o,s,a)=>{e.current.set(s,{type:o,el:i,options:a}),i.addEventListener(o,s,a)},[]),r=F.useCallback((i,o,s,a)=>{i.removeEventListener(o,s,a),e.current.delete(s)},[]);return F.useEffect(()=>()=>{t.forEach((i,o)=>{r(i.el,i.type,o,i.options)})},[r,t]),{add:n,remove:r}}function H3(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function sit(e={}){const{ref:t,isDisabled:n,isFocusable:r,clickOnEnter:i=!0,clickOnSpace:o=!0,onMouseDown:s,onMouseUp:a,onClick:l,onKeyDown:u,onKeyUp:c,tabIndex:f,onMouseOver:d,onMouseLeave:h,...p}=e,[g,m]=F.useState(!0),[y,v]=F.useState(!1),b=oit(),x=N=>{N&&N.tagName!=="BUTTON"&&m(!1)},S=g?f:f||0,C=n&&!r,w=F.useCallback(N=>{if(n){N.stopPropagation(),N.preventDefault();return}N.currentTarget.focus(),l==null||l(N)},[n,l]),k=F.useCallback(N=>{y&&H3(N)&&(N.preventDefault(),N.stopPropagation(),v(!1),b.remove(document,"keyup",k,!1))},[y,b]),E=F.useCallback(N=>{if(u==null||u(N),n||N.defaultPrevented||N.metaKey||!H3(N.nativeEvent)||g)return;const D=i&&N.key==="Enter";o&&N.key===" "&&(N.preventDefault(),v(!0)),D&&(N.preventDefault(),N.currentTarget.click()),b.add(document,"keyup",k,!1)},[n,g,u,i,o,b,k]),A=F.useCallback(N=>{if(c==null||c(N),n||N.defaultPrevented||N.metaKey||!H3(N.nativeEvent)||g)return;o&&N.key===" "&&(N.preventDefault(),v(!1),N.currentTarget.click())},[o,g,n,c]),P=F.useCallback(N=>{N.button===0&&(v(!1),b.remove(document,"mouseup",P,!1))},[b]),L=F.useCallback(N=>{if(N.button!==0)return;if(n){N.stopPropagation(),N.preventDefault();return}g||v(!0),N.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",P,!1),s==null||s(N)},[n,g,s,b,P]),M=F.useCallback(N=>{N.button===0&&(g||v(!1),a==null||a(N))},[a,g]),O=F.useCallback(N=>{if(n){N.preventDefault();return}d==null||d(N)},[n,d]),_=F.useCallback(N=>{y&&(N.preventDefault(),v(!1)),h==null||h(N)},[y,h]),T=Gg(t,x);return g?{...p,ref:T,type:"button","aria-disabled":C?void 0:n,disabled:C,onClick:w,onMouseDown:s,onMouseUp:a,onKeyUp:c,onKeyDown:u,onMouseOver:d,onMouseLeave:h}:{...p,ref:T,role:"button","data-active":bo(y),"aria-disabled":n?"true":void 0,tabIndex:C?void 0:S,onClick:w,onMouseDown:L,onMouseUp:M,onKeyUp:A,onKeyDown:E,onMouseOver:O,onMouseLeave:_}}function ait(e){const{wasSelected:t,enabled:n,isSelected:r,mode:i="unmount"}=e;return!!(!n||r||i==="keepMounted"&&t)}var cce=Pe(function(t,n){const{children:r,placeholder:i,className:o,...s}=t;return $.jsxs(_e.select,{...s,ref:n,className:dt("chakra-select",o),children:[i&&$.jsx("option",{value:"",children:i}),r]})});cce.displayName="SelectField";function lit(e,t){const n={},r={};for(const[i,o]of Object.entries(e))t.includes(i)?n[i]=o:r[i]=o;return[n,r]}var XN=Pe((e,t)=>{var n;const r=Vc("Select",e),{rootProps:i,placeholder:o,icon:s,color:a,height:l,h:u,minH:c,minHeight:f,iconColor:d,iconSize:h,...p}=$r(e),[g,m]=lit(p,sHe),y=Jue(m),v={width:"100%",height:"fit-content",position:"relative",color:a},b={paddingEnd:"2rem",...r.field,_focus:{zIndex:"unset",...(n=r.field)==null?void 0:n._focus}};return $.jsxs(_e.div,{className:"chakra-select__wrapper",__css:v,...g,...i,children:[$.jsx(cce,{ref:t,height:u??l,minH:c??f,placeholder:o,...y,__css:b,children:e.children}),$.jsx(fce,{"data-disabled":bo(y.disabled),...(d||a)&&{color:d||a},__css:r.icon,...h&&{fontSize:h},children:s})]})});XN.displayName="Select";var uit=e=>$.jsx("svg",{viewBox:"0 0 24 24",...e,children:$.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),cit=_e("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),fce=e=>{const{children:t=$.jsx(uit,{}),...n}=e,r=F.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return $.jsx(cit,{...n,className:"chakra-select__icon-wrapper",children:F.isValidElement(t)?r:null})};fce.displayName="SelectIcon";function fit(){const e=F.useRef(!0);return F.useEffect(()=>{e.current=!1},[]),e.current}function dit(e){const t=F.useRef();return F.useEffect(()=>{t.current=e},[e]),t.current}var hit=_e("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),HP=Se("skeleton-start-color"),qP=Se("skeleton-end-color"),pit=nh({from:{opacity:0},to:{opacity:1}}),git=nh({from:{borderColor:HP.reference,background:HP.reference},to:{borderColor:qP.reference,background:qP.reference}}),KN=Pe((e,t)=>{const n={...e,fadeDuration:typeof e.fadeDuration=="number"?e.fadeDuration:.4,speed:typeof e.speed=="number"?e.speed:.8},r=eu("Skeleton",n),i=fit(),{startColor:o="",endColor:s="",isLoaded:a,fadeDuration:l,speed:u,className:c,fitContent:f,...d}=$r(n),[h,p]=eWe("colors",[o,s]),g=dit(a),m=dt("chakra-skeleton",c),y={...h&&{[HP.variable]:h},...p&&{[qP.variable]:p}};if(a){const v=i||g?"none":`${pit} ${l}s`;return $.jsx(_e.div,{ref:t,className:m,__css:{animation:v},...d})}return $.jsx(hit,{ref:t,className:m,...d,__css:{width:f?"fit-content":void 0,...r,...y,_dark:{...r._dark,...y},animation:`${u}s linear infinite alternate ${git}`}})});KN.displayName="Skeleton";function mit(e){return Array(e).fill(1).map((t,n)=>n+1)}var ZW=3,dce=e=>{const{noOfLines:t=ZW,spacing:n="0.5rem",skeletonHeight:r="0.5rem",className:i,startColor:o,endColor:s,isLoaded:a,fadeDuration:l,speed:u,variant:c,size:f,colorScheme:d,children:h,...p}=e,g=gf(typeof t=="number"?[t]:t)||ZW,m=mit(g),y=b=>g>1&&b===m.length?"80%":"100%",v=dt("chakra-skeleton__group",i);return $.jsx(_e.div,{className:v,...p,children:m.map((b,x)=>{if(a&&x>0)return null;const S=a?null:{mb:b===m.length?"0":n,width:y(b),height:r};return $.jsx(KN,{startColor:o,endColor:s,isLoaded:a,fadeDuration:l,speed:u,variant:c,size:f,colorScheme:d,...S,children:x===0?h:void 0},m.length.toString()+b)})})};dce.displayName="SkeletonText";var[yit,vit,bit,xit]=Srt();function wit(e){var t;const{defaultIndex:n,onChange:r,index:i,isManual:o,isLazy:s,lazyBehavior:a="unmount",orientation:l="horizontal",direction:u="ltr",...c}=e,[f,d]=F.useState(n??0),[h,p]=Crt({defaultValue:n??0,value:i,onChange:r});F.useEffect(()=>{i!=null&&d(i)},[i]);const g=bit(),m=F.useId();return{id:`tabs-${(t=e.id)!=null?t:m}`,selectedIndex:h,focusedIndex:f,setSelectedIndex:p,setFocusedIndex:d,isManual:o,isLazy:s,lazyBehavior:a,orientation:l,descendants:g,direction:u,htmlProps:c}}var[Sit,I_]=ni({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function Cit(e){const{focusedIndex:t,orientation:n,direction:r}=I_(),i=vit(),o=F.useCallback(s=>{const a=()=>{var v;const b=i.nextEnabled(t);b&&((v=b.node)==null||v.focus())},l=()=>{var v;const b=i.prevEnabled(t);b&&((v=b.node)==null||v.focus())},u=()=>{var v;const b=i.firstEnabled();b&&((v=b.node)==null||v.focus())},c=()=>{var v;const b=i.lastEnabled();b&&((v=b.node)==null||v.focus())},f=n==="horizontal",d=n==="vertical",h=s.key,p=r==="ltr"?"ArrowLeft":"ArrowRight",g=r==="ltr"?"ArrowRight":"ArrowLeft",y={[p]:()=>f&&l(),[g]:()=>f&&a(),ArrowDown:()=>d&&a(),ArrowUp:()=>d&&l(),Home:u,End:c}[h];y&&(s.preventDefault(),y(s))},[i,t,n,r]);return{...e,role:"tablist","aria-orientation":n,onKeyDown:z1(e.onKeyDown,o)}}function kit(e){const{isDisabled:t=!1,isFocusable:n=!1,...r}=e,{setSelectedIndex:i,isManual:o,id:s,setFocusedIndex:a,selectedIndex:l}=I_(),{index:u,register:c}=xit({disabled:t&&!n}),f=u===l,d=()=>{i(u)},h=()=>{a(u),!o&&!(t&&n)&&i(u)};return{...sit({...r,ref:Gg(c,e.ref),isDisabled:t,isFocusable:n,onClick:z1(e.onClick,d)}),id:hce(s,u),role:"tab",tabIndex:f?0:-1,type:"button","aria-selected":f,"aria-controls":pce(s,u),onFocus:t?void 0:z1(e.onFocus,h)}}var[Eit,_it]=ni({});function $it(e){const t=I_(),{id:n,selectedIndex:r}=t,o=O_(e.children).map((s,a)=>F.createElement(Eit,{key:a,value:{isSelected:a===r,id:pce(n,a),tabId:hce(n,a),selectedIndex:r}},s));return{...e,children:o}}function Ait(e){const{children:t,...n}=e,{isLazy:r,lazyBehavior:i}=I_(),{isSelected:o,id:s,tabId:a}=_it(),l=F.useRef(!1);o&&(l.current=!0);const u=ait({wasSelected:l.current,isSelected:o,enabled:r,mode:i});return{tabIndex:0,...n,children:u?t:null,role:"tabpanel","aria-labelledby":a,hidden:!o,id:s}}function hce(e,t){return`${e}--tab-${t}`}function pce(e,t){return`${e}--tabpanel-${t}`}var[Tit,z_]=ni({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),B_=Pe(function(t,n){const r=Vc("Tabs",t),{children:i,className:o,...s}=$r(t),{htmlProps:a,descendants:l,...u}=wit(s),c=F.useMemo(()=>u,[u]),{isFitted:f,...d}=a,h={position:"relative",...r.root};return $.jsx(yit,{value:l,children:$.jsx(Sit,{value:c,children:$.jsx(Tit,{value:r,children:$.jsx(_e.div,{className:dt("chakra-tabs",o),ref:n,...d,__css:h,children:i})})})})});B_.displayName="Tabs";var QN=Pe(function(t,n){const r=Cit({...t,ref:n}),o={display:"flex",...z_().tablist};return $.jsx(_e.div,{...r,className:dt("chakra-tabs__tablist",t.className),__css:o})});QN.displayName="TabList";var JN=Pe(function(t,n){const r=Ait({...t,ref:n}),i=z_();return $.jsx(_e.div,{outline:"0",...r,className:dt("chakra-tabs__tab-panel",t.className),__css:i.tabpanel})});JN.displayName="TabPanel";var ZN=Pe(function(t,n){const r=$it(t),i=z_();return $.jsx(_e.div,{...r,width:"100%",ref:n,className:dt("chakra-tabs__tab-panels",t.className),__css:i.tabpanels})});ZN.displayName="TabPanels";var e9=Pe(function(t,n){const r=z_(),i=kit({...t,ref:n}),o={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...r.tab};return $.jsx(_e.button,{...i,className:dt("chakra-tabs__tab",t.className),__css:o})});e9.displayName="Tab";var[Pit,gce]=ni({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),mce=Pe((e,t)=>{const n=Vc("Tag",e),r=$r(e),i={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...n.container};return $.jsx(Pit,{value:n,children:$.jsx(_e.span,{ref:t,...r,__css:i})})});mce.displayName="Tag";var yce=Pe((e,t)=>{const n=gce();return $.jsx(_e.span,{ref:t,noOfLines:1,...e,__css:n.label})});yce.displayName="TagLabel";var Fit=Pe((e,t)=>$.jsx(We,{ref:t,verticalAlign:"top",marginEnd:"0.5rem",...e}));Fit.displayName="TagLeftIcon";var Mit=Pe((e,t)=>$.jsx(We,{ref:t,verticalAlign:"top",marginStart:"0.5rem",...e}));Mit.displayName="TagRightIcon";var vce=e=>$.jsx(We,{verticalAlign:"inherit",viewBox:"0 0 512 512",...e,children:$.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});vce.displayName="TagCloseIcon";var Rit=Pe((e,t)=>{const{isDisabled:n,children:r,...i}=e,s={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...gce().closeButton};return $.jsx(_e.button,{ref:t,"aria-label":"close",...i,type:"button",disabled:n,__css:s,children:r||$.jsx(vce,{})})});Rit.displayName="TagCloseButton";const q3={charts:0,search:1,likes:2,fields:-2,settings:-1},Ki=l8(u8(e=>({tabIndex:q3.settings,setTabByIndex:t=>e({tabIndex:t<0?Object.keys(B_).length+t:t}),setTabByName:t=>e({tabIndex:q3[t]}),searchTargetFieldNames:[],setSearchTargetFieldNames:t=>e(n=>({searchTargetFieldNames:typeof t=="function"?t(n.searchTargetFieldNames):t})),appendSearchTarget:t=>e(n=>({searchTargetFieldNames:[...n.searchTargetFieldNames,t]})),resetInteractionStore:t=>e({searchTargetFieldNames:[],tabIndex:q3[t]})}),{name:"InteractionStore",anonymousActionType:"InteractionStore Action",enabled:!1}));var bce=Symbol.for("immer-nothing"),eH=Symbol.for("immer-draftable"),ro=Symbol.for("immer-state");function ds(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xg=Object.getPrototypeOf;function Kg(e){return!!e&&!!e[ro]}function Rd(e){var t;return e?xce(e)||Array.isArray(e)||!!e[eH]||!!((t=e.constructor)!=null&&t[eH])||U_(e)||V_(e):!1}var Oit=Object.prototype.constructor.toString();function xce(e){if(!e||typeof e!="object")return!1;const t=Xg(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Oit}function PC(e,t){j_(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function j_(e){const t=e[ro];return t?t.type_:Array.isArray(e)?1:U_(e)?2:V_(e)?3:0}function GP(e,t){return j_(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function wce(e,t,n){const r=j_(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Dit(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function U_(e){return e instanceof Map}function V_(e){return e instanceof Set}function mf(e){return e.copy_||e.base_}function YP(e,t){if(U_(e))return new Map(e);if(V_(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=xce(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ro];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(Xg(e),r)}else{const r=Xg(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function t9(e,t=!1){return W_(e)||Kg(e)||!Rd(e)||(j_(e)>1&&(e.set=e.add=e.clear=e.delete=Nit),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>t9(r,!0))),e}function Nit(){ds(2)}function W_(e){return Object.isFrozen(e)}var Lit={};function Od(e){const t=Lit[e];return t||ds(0,e),t}var G1;function Sce(){return G1}function Iit(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function tH(e,t){t&&(Od("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function XP(e){KP(e),e.drafts_.forEach(zit),e.drafts_=null}function KP(e){e===G1&&(G1=e.parent_)}function nH(e){return G1=Iit(G1,e)}function zit(e){const t=e[ro];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function rH(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ro].modified_&&(XP(t),ds(4)),Rd(e)&&(e=FC(t,e),t.parent_||MC(t,e)),t.patches_&&Od("Patches").generateReplacementPatches_(n[ro].base_,e,t.patches_,t.inversePatches_)):e=FC(t,n,[]),XP(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bce?e:void 0}function FC(e,t,n){if(W_(t))return t;const r=t[ro];if(!r)return PC(t,(i,o)=>iH(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return MC(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),PC(o,(a,l)=>iH(e,r,i,a,l,n,s)),MC(e,i,!1),n&&e.patches_&&Od("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function iH(e,t,n,r,i,o,s){if(Kg(i)){const a=o&&t&&t.type_!==3&&!GP(t.assigned_,r)?o.concat(r):void 0,l=FC(e,i,a);if(wce(n,r,l),Kg(l))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Rd(i)&&!W_(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;FC(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&MC(e,i)}}function MC(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&t9(t,n)}function Bit(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Sce(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=n9;n&&(i=[r],o=Y1);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var n9={get(e,t){if(t===ro)return e;const n=mf(e);if(!GP(n,t))return jit(e,n,t);const r=n[t];return e.finalized_||!Rd(r)?r:r===G3(e.base_,t)?(Y3(e),e.copy_[t]=JP(r,e)):r},has(e,t){return t in mf(e)},ownKeys(e){return Reflect.ownKeys(mf(e))},set(e,t,n){const r=Cce(mf(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=G3(mf(e),t),o=i==null?void 0:i[ro];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Dit(n,i)&&(n!==void 0||GP(e.base_,t)))return!0;Y3(e),QP(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return G3(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Y3(e),QP(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=mf(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ds(11)},getPrototypeOf(e){return Xg(e.base_)},setPrototypeOf(){ds(12)}},Y1={};PC(n9,(e,t)=>{Y1[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Y1.deleteProperty=function(e,t){return Y1.set.call(this,e,t,void 0)};Y1.set=function(e,t,n){return n9.set.call(this,e[0],t,n,e[0])};function G3(e,t){const n=e[ro];return(n?mf(n):e)[t]}function jit(e,t,n){var i;const r=Cce(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Cce(e,t){if(!(t in e))return;let n=Xg(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Xg(n)}}function QP(e){e.modified_||(e.modified_=!0,e.parent_&&QP(e.parent_))}function Y3(e){e.copy_||(e.copy_=YP(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Uit=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(l=o,...u){return s.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&ds(6),r!==void 0&&typeof r!="function"&&ds(7);let i;if(Rd(t)){const o=nH(this),s=JP(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?XP(o):KP(o)}return tH(o,r),rH(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===bce&&(i=void 0),this.autoFreeze_&&t9(i,!0),r){const o=[],s=[];Od("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else ds(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Rd(e)||ds(8),Kg(e)&&(e=Vit(e));const t=nH(this),n=JP(e,void 0);return n[ro].isManual_=!0,KP(t),n}finishDraft(e,t){const n=e&&e[ro];(!n||!n.isManual_)&&ds(9);const{scope_:r}=n;return tH(r,t),rH(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Od("Patches").applyPatches_;return Kg(e)?r(e,t):this.produce(e,i=>r(i,t))}};function JP(e,t){const n=U_(e)?Od("MapSet").proxyMap_(e,t):V_(e)?Od("MapSet").proxySet_(e,t):Bit(e,t);return(t?t.scope_:Sce()).drafts_.push(n),n}function Vit(e){return Kg(e)||ds(10,e),kce(e)}function kce(e){if(!Rd(e)||W_(e))return e;const t=e[ro];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=YP(e,t.scope_.immer_.useStrictShallowCopy_)}else n=YP(e,!0);return PC(n,(r,i)=>{wce(n,r,kce(i))}),t&&(t.finalized_=!1),n}var io=new Uit,y0=io.produce;io.produceWithPatches.bind(io);io.setAutoFreeze.bind(io);io.setUseStrictShallowCopy.bind(io);io.applyPatches.bind(io);io.createDraft.bind(io);io.finishDraft.bind(io);const Qe=l8(u8((e,t)=>({filename:"",timestamp:0,charts:[],fields:[],currentChartIndex:-1,loadingSession:!1,appendingChart:!1,resetSession:()=>e({filename:"",timestamp:0,charts:[],fields:[],currentChartIndex:-1}),setCurrentChartIndex:n=>{const{appendingChart:r,charts:i,currentChartIndex:o}=t();r||n<-1||n>i.length-1||n===o||e({currentChartIndex:n})},setCurrentChartToLast:()=>{const{charts:n,currentChartIndex:r}=t(),i=n.length-1;i!==r&&e({currentChartIndex:i})},loadSession:async n=>{e({loadingSession:!0,filename:n});const{timestamp:r,charts:i,fields:o,currentChartIndex:s}=t(),a=await Di.call("loadSession",{session:{filename:n,timestamp:r,charts:i,fields:o}});e(a?y0(l=>{Object.assign(l,a),l.currentChartIndex=s===-1?0:s,l.loadingSession=!1}):{loadingSession:!1})},appendNextChart:async()=>{const{appendingChart:n}=t();if(n)return;e({appendingChart:!0});const r=await Di.call("appendNextChart");e(r?y0(i=>{i.charts.push({...r,generatedBy:"scroll"}),i.appendingChart=!1}):{appendingChart:!1})},appendChart:async n=>{const{appendingChart:r}=t();if(r)return;e({appendingChart:!0}),await Di.call("appendChart",{chart:n});const i=await Di.call("appendNextChart");e(y0(o=>{o.charts.length>mx&&(o.charts=o.charts.slice(0,-mx)),o.charts.push({...n,timestamp:Date.now(),generatedBy:"append"}),i&&o.charts.push({...i,generatedBy:"scroll"}),o.appendingChart=!1,o.currentChartIndex=o.charts.length-2}))},setChartPreferred:(n,r)=>{Di.call("setPreferred",{key:n,preferred:r}),e(y0(i=>{i.charts.length>mx&&(i.charts=i.charts.slice(0,-mx));const o=i.charts.find(s=>s.key===n);o&&(o.preferred=r)})),t().appendNextChart()},setCurrentChartPreferred:n=>{const{charts:r,currentChartIndex:i,setChartPreferred:o}=t(),s=r[i];s&&o(s.key,n)},setChartTimeUnit:(n,r)=>e(y0(i=>{var s;const o=i.charts.find(a=>a.key===n);o&&(o.timeUnit=r,(s=o.spec.transform)==null||s.forEach(a=>{"timeUnit"in a&&(a.timeUnit=r)}))}))}),{name:"SessionStore",anonymousActionType:"SessionStore Action",enabled:!1}));function Wit(){var f;const e=Qe(d=>d.charts),t=Qe(d=>d.fields),n=Qe(d=>d.setCurrentChartIndex),r=Qe(d=>d.setCurrentChartPreferred),i=Qe(d=>d.currentChartIndex),o=0<=i&&i<e.length&&((f=e[i])==null?void 0:f.preferred),s=i!==-1;return{sessionInitialized:t.length>0,chartDisplaying:s,currentChartPreferred:o,handleNextChart:()=>n(i+1),handlePrevChart:()=>n(i-1),handlePreferChart:()=>{r(!o)}}}function Ece(){const e=xc(u=>u.writingFile),t=xc(u=>u.writeFile),n=Qe(u=>u.loadingSession),r=Qe(u=>u.loadSession),i=Qe(u=>u.resetSession),o=Qe(u=>u.filename),s=Ki(u=>u.resetInteractionStore),{mobile:a}=Ar();return{loading:e||n,initializeSession:async u=>{const c=u instanceof File?u.name:coe(u);c&&(c!==o&&i(),await t(u),await r(c),s(a?"charts":"search"))}}}function Hit(){const{loading:e,initializeSession:t}=Ece(),[n,r]=F.useState(null);return{loading:e,selectedDemo:n,handleSubmit:()=>{n!=null&&n.href&&(console.log(n.href),t(n.href))},handleDemoSelect:s=>{r(s)}}}const _ce=F.createContext(void 0);function qit({client:e,eventTypes:t=[],attachTo:n=window,children:r}){return F.useEffect(()=>e.registerLogger(t,n),[n,t,e]),$.jsx(_ce.Provider,{value:e,children:r})}function H_(e){const t=F.useContext(_ce);if(!t)throw new Error("useLogger must be used within a LoggerProvider");return t}const Git=(e,t={})=>{const{latency:n=200}=t,[r,i]=F.useState(0),[o,s]=F.useState(0),a=H_(),l=F.useCallback(()=>{s(Date.now())},[]),u=F.useCallback(f=>{if(Date.now()-o>n)return;const h=Date.now();h-r<n&&(f.preventDefault(),a.log("prefer_chart","double_tap"),e(f)),i(h)},[e,r,n,a,o]),c=F.useCallback(f=>{e(f)},[e]);return{onTouchStart:l,onTouchEnd:u,onDoubleClick:c}};function Yit(){var c,f;const{loading:e,initializeSession:t}=Ece(),[n,r]=F.useState(""),i=F.useRef(null),o=d=>{var p,g;const h=((g=d.target.files)==null?void 0:g[((p=d.target.files)==null?void 0:p.length)-1].name)??"";r(h)},s=d=>{r(d.target.value),i.current&&(i.current.value="",i.current.files=null)},a=()=>{i.current&&i.current.click()},l=()=>{var d,h;if((h=(d=i.current)==null?void 0:d.files)!=null&&h.length){const p=i.current.files[0];t(p)}else sBe(n)&&t(n)},u=!n&&!((f=(c=i.current)==null?void 0:c.files)!=null&&f.length);return{fileInputRef:i,inputDisabled:u,loadingData:e,pathInput:n,handleInputChange:s,handleSubmit:l,handleFileChange:o,handleFileButtonClick:a}}function Ar(){const e=fo("#EDF2F7","#1A202C");F.useLayoutEffect(()=>{const L=document.querySelector("meta[name=theme-color]"),M=document.querySelector("meta[name=msapplication-navbutton-color]");L.content=e,M.content=e},[e]);const t=gf({base:4,lg:0}),n=2,r=F.useRef(null),i=gf({base:window.innerWidth-2*n*4,lg:880}),o=gf({base:window.innerHeight-150,lg:window.innerHeight*.8-18}),[s,a]=gf({base:[window.innerWidth-64,Math.min(window.innerHeight-350,500)],lg:[Math.min(window.innerWidth-250,600),Math.min(window.innerHeight-250,600)]})??[300,300],l=i-2*t*4,u=o-2*t*4,c=gf({base:!0,lg:!1}),f=fo(kt.white,kt["gray.900"]),d=fo(kt.white,kt["gray.900"]),h=fo(kt["gray.200"],kt["gray.700"]),p=gf({base:"calc(100dvh - 110px)",lg:window.innerHeight*.8-200}),g=5,m="70px",y=fo(kt["gray.100"],kt["gray.800"]),v=fo(Bu[600],Bu[300]),b=fo(Bu[500],Bu[400]),x=fo(kt["red.500"],kt["red.200"]),S=fo(kt["orange.50"],kt["orange.800"]),C=fo(kt["orange.600"],kt["orange.200"]),w=fo(kt["gray.400"],kt["gray.600"]),k={"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:v,borderRadius:"5px"},"&::-webkit-scrollbar-thumb:hover":{background:b}},E=fo(void 0,"dark");return{cardRef:r,cardInnerHeight:u,cardInnerWidth:l,indicatorGap:6,chartTheme:E,indicatorPadding:{TOP:24,BOTTOM:24},chartHeight:a,chartWidth:s,accentColor:v,accentHoverColor:b,borderColor:h,preferredColor:x,buttonColor:y,cardPadding:t,cardWidth:i,cardHeight:o,cardColor:d,drawerBgColor:f,tabPanelHeight:p,tabIconSize:g,defaultGrayColor:w,thumbnailSize:m,mobile:c,scrollbarStyle:k,accentSelected:S,accentSelectedHover:C}}function $ce(){const[e,t]=F.useState(()=>Di.getLoadingStatus()??{loading:!0,loadingPyodide:!0,loadingServer:!0});return F.useEffect(()=>{const n=r=>{t(r)};return Di.on("loadingStatusChange",n),()=>{Di.off("loadingStatusChange",n)}},[]),e}const Xit=(...e)=>{console!=null&&console.warn&&(od(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},oH={},ZP=(...e)=>{od(e[0])&&oH[e[0]]||(od(e[0])&&(oH[e[0]]=new Date),Xit(...e))},Ace=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},sH=(e,t,n)=>{e.loadNamespaces(t,Ace(e,n))},aH=(e,t,n,r)=>{od(n)&&(n=[n]),n.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,Ace(e,r))},Kit=(e,t,n={})=>!t.languages||!t.languages.length?(ZP("i18n.languages were undefined or empty",t.languages),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,i)=>{var o;if(((o=n.bindI18n)==null?void 0:o.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,e))return!1}}),od=e=>typeof e=="string",Qit=e=>typeof e=="object"&&e!==null,Jit=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Zit={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},eot=e=>Zit[e],tot=e=>e.replace(Jit,eot);let eF={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:tot};const not=(e={})=>{eF={...eF,...e}},rot=()=>eF;let Tce;const iot=e=>{Tce=e},oot=()=>Tce,sot={type:"3rdParty",init(e){not(e.options.react),iot(e)}},aot=F.createContext();class lot{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{var r;(r=this.usedNamespaces)[n]??(r[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const uot=(e,t)=>{const n=F.useRef();return F.useEffect(()=>{n.current=e},[e,t]),n.current},Pce=(e,t,n,r)=>e.getFixedT(t,n,r),cot=(e,t,n,r)=>F.useCallback(Pce(e,t,n,r),[e,t,n,r]),qo=(e,t={})=>{var x,S,C,w;const{i18n:n}=t,{i18n:r,defaultNS:i}=F.useContext(aot)||{},o=n||r||oot();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new lot),!o){ZP("You will need to pass in an i18next instance by using initReactI18next");const k=(A,P)=>od(P)?P:Qit(P)&&od(P.defaultValue)?P.defaultValue:Array.isArray(A)?A[A.length-1]:A,E=[k,{},!1];return E.t=k,E.i18n={},E.ready=!1,E}(x=o.options.react)!=null&&x.wait&&ZP("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...rot(),...o.options.react,...t},{useSuspense:a,keyPrefix:l}=s;let u=i||((S=o.options)==null?void 0:S.defaultNS);u=od(u)?[u]:u||["translation"],(w=(C=o.reportNamespaces).addUsedNamespaces)==null||w.call(C,u);const c=(o.isInitialized||o.initializedStoreOnce)&&u.every(k=>Kit(k,o,s)),f=cot(o,t.lng||null,s.nsMode==="fallback"?u:u[0],l),d=()=>f,h=()=>Pce(o,t.lng||null,s.nsMode==="fallback"?u:u[0],l),[p,g]=F.useState(d);let m=u.join();t.lng&&(m=`${t.lng}${m}`);const y=uot(m),v=F.useRef(!0);F.useEffect(()=>{const{bindI18n:k,bindI18nStore:E}=s;v.current=!0,!c&&!a&&(t.lng?aH(o,t.lng,u,()=>{v.current&&g(h)}):sH(o,u,()=>{v.current&&g(h)})),c&&y&&y!==m&&v.current&&g(h);const A=()=>{v.current&&g(h)};return k&&(o==null||o.on(k,A)),E&&(o==null||o.store.on(E,A)),()=>{v.current=!1,o&&(k==null||k.split(" ").forEach(P=>o.off(P,A))),E&&o&&E.split(" ").forEach(P=>o.store.off(P,A))}},[o,m]),F.useEffect(()=>{v.current&&c&&g(d)},[o,l,c]);const b=[p,o,c];if(b.t=p,b.i18n=o,b.ready=c,c||!c&&!a)return b;throw new Promise(k=>{t.lng?aH(o,t.lng,u,()=>k()):sH(o,u,()=>k())})};function fot(){const{fileCache:e,writeFile:t}=xc(),{loadSession:n,filename:r}=Qe(),{colorMode:i,toggleColorMode:o}=lb(),[s,a]=F.useState(()=>Di.getPythonType()),{t:l,i18n:u}=qo(),c=crt(),f=H_();return{python:s,handleServerButtonClick:async()=>{if(!Di)return;const y=s==="pyodide"?"server":"pyodide";if(!Di.setPython(y)){c({id:"server-not-available",title:l("toast.server_not_available_title"),description:l("toast.server_not_available_description"),status:"error",duration:3e3,isClosable:!0,position:"bottom",containerStyle:{margin:10}});return}a(y),e&&(await t(e),await n(r))},handleDownloadLogs:()=>{try{f.export()}catch(y){c({title:"Oh no!",description:JSON.stringify(y),status:"error",duration:3e3,isClosable:!0,position:"bottom",containerStyle:{margin:10}})}},handleClearLogs:()=>{f.clearLogs().then(()=>{c({title:l("toast.logs_cleared_title"),description:l("toast.logs_cleared_description"),status:"success",duration:3e3,isClosable:!0,position:"bottom",containerStyle:{margin:10}})}).catch(y=>{c({title:l("toast.logs_clear_failed_title"),description:JSON.stringify(y),status:"error",duration:3e3,isClosable:!0,position:"bottom",containerStyle:{margin:10}})})},colorMode:i,toggleColorMode:o,handleShareLogs:()=>{try{f.share()}catch(y){c({title:"Oh no!",description:JSON.stringify(y),status:"error",duration:3e3,isClosable:!0,position:"bottom",containerStyle:{margin:10}})}},handleRefreshApp:()=>{window.location.reload()},locale:u.language,setLocale:y=>u.changeLanguage(y)}}function dot(e,t,{signal:n}={}){let r=null;const i=function(...s){r!==null&&clearTimeout(r),!(n!=null&&n.aborted)&&(r=setTimeout(()=>{e(...s),r=null},t))},o=function(){i.cancel()};return i.cancel=function(){r!==null&&(clearTimeout(r),r=null)},n==null||n.addEventListener("abort",o,{once:!0}),i}function Th(e,t){const n={};for(const r of t)n[r]=e[r];return n}function lH(e,t){const n={};for(const[r,i]of Object.entries(e))t(i,r)&&(n[r]=i);return n}function hot(){const e=H_();F.useEffect(()=>{const t=xc.subscribe((i,o)=>{const s=Th(i,["filename"]),a=Th(o,["filename"]);if(k2(s,a))return;const l=S0(s,a);e.log("data_store","state",l)}),n=Ki.subscribe((i,o)=>{const s=lH(i,u=>typeof u!="function"),a=lH(o,u=>typeof u!="function");if(k2(s,a))return;const l=S0(s,a);l.length&&e.log("interaction_store","state",l)}),r=Qe.subscribe((i,o)=>{const s=Th({...i,charts:i.charts.map(u=>Th(u,["key","title","preferred","timestamp"]))},["charts","filename","timestamp","currentChartIndex"]),a=Th({...o,charts:o.charts.map(u=>Th(u,["key","title","preferred","timestamp"]))},["charts","filename","timestamp","currentChartIndex"]);k2(s,a)||!S0(s,a).length||e.log("session_store","state",S0(s,a))});return()=>{t(),n(),r()}},[e])}function pot(e,t=100){const n=xc(o=>o.data),[r,i]=F.useState(e.thumbnail);return F.useEffect(()=>{!r&&n&&(async()=>{const s=await Zze(e.spec,n,t);i(s)})()},[n,r,t,e.spec]),r}/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */var got={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const At=(e,t)=>{const n=F.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=1.5,className:s="",children:a,...l},u)=>{const c={ref:u,...got,width:i,height:i,strokeWidth:o,color:r,className:s,...l};return F.createElement("svg",c,(t==null?void 0:t.map(([f,d])=>F.createElement(f,{key:d.id,...d})))??[],...Array.isArray(a)?a:[a])});return n.displayName=`${e}Icon`,n};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Fce=At("ArrowDown01Icon",[["path",{d:"M18 9.00005C18 9.00005 13.5811 15 12 15C10.4188 15 6 9 6 9",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const mot=At("ArrowDown03Icon",[["path",{d:"M6 20L18 20",stroke:"currentColor",key:"k0"}],["path",{d:"M12 16V4",stroke:"currentColor",key:"k1"}],["path",{d:"M16 12C16 12 13.054 16 12 16C10.9459 16 8 12 8 12",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const yot=At("ArrowUp01Icon",[["path",{d:"M18 15C18 15 13.5811 9.00001 12 9C10.4188 8.99999 6 15 6 15",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const vot=At("CancelCircleIcon",[["path",{d:"M14.9994 15L9 9M9.00064 15L15 9",stroke:"currentColor",key:"k0"}],["path",{d:"M22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const bot=At("ChartIcon",[["path",{d:"M2 21.5L22 21.5",stroke:"currentColor",key:"k0"}],["path",{d:"M18 15.5H18.009M18 18.5H18.009",stroke:"currentColor",key:"k1"}],["path",{d:"M6 18.5H6.00898M6 15.5H6.00898M6 12.5H6.00898M6 9.5H6.00898",stroke:"currentColor",key:"k2"}],["path",{d:"M7.79063 5.39186L16.2183 9.5904M8 4.5C8 5.60457 7.10457 6.5 6 6.5C4.89543 6.5 4 5.60457 4 4.5C4 3.39543 4.89543 2.5 6 2.5C7.10457 2.5 8 3.39543 8 4.5ZM20 10.5C20 11.6046 19.1046 12.5 18 12.5C16.8954 12.5 16 11.6046 16 10.5C16 9.39543 16.8954 8.5 18 8.5C19.1046 8.5 20 9.39543 20 10.5Z",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const xot=At("CheckmarkCircle01Icon",[["path",{d:"M22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M8 12.75C8 12.75 9.6 13.6625 10.4 15C10.4 15 12.8 9.75 16 8",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const wot=At("CleanIcon",[["path",{d:"M21 3L13 11.5",stroke:"currentColor",key:"k0"}],["path",{d:"M9.44573 11.0854C6.96539 12.0368 4.98269 11.8736 3 11.0885C3.50059 17.531 6.50414 20.0089 10.5089 21C10.5089 21 13.5261 18.8664 13.961 13.8074C14.0081 13.2595 14.0317 12.9856 13.9178 12.6769C13.8038 12.3682 13.5802 12.1468 13.1329 11.704C12.3973 10.9757 12.0295 10.6116 11.5929 10.5204C11.1564 10.4293 10.5862 10.648 9.44573 11.0854Z",stroke:"currentColor",key:"k1"}],["path",{d:"M4.5 16.4464C4.5 16.4464 7 16.9286 9.5 15",stroke:"currentColor",key:"k2"}],["path",{d:"M8.5 7.25C8.5 7.94036 7.94036 8.5 7.25 8.5C6.55964 8.5 6 7.94036 6 7.25C6 6.55964 6.55964 6 7.25 6C7.94036 6 8.5 6.55964 8.5 7.25Z",stroke:"currentColor",key:"k3"}],["path",{d:"M11 4V4.1",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Sot=At("CloudIcon",[["path",{d:"M17.4776 10.0001C17.485 10 17.4925 10 17.5 10C19.9853 10 22 12.0147 22 14.5C22 16.9853 19.9853 19 17.5 19H7C4.23858 19 2 16.7614 2 14C2 11.4003 3.98398 9.26407 6.52042 9.0227M17.4776 10.0001C17.4924 9.83536 17.5 9.66856 17.5 9.5C17.5 6.46243 15.0376 4 12 4C9.12324 4 6.76233 6.20862 6.52042 9.0227M17.4776 10.0001C17.3753 11.1345 16.9286 12.1696 16.2428 13M6.52042 9.0227C6.67826 9.00768 6.83823 9 7 9C8.12582 9 9.16474 9.37209 10.0005 10",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Cot=At("Download01Icon",[["path",{d:"M3.09502 10C3.03241 10.457 3 10.9245 3 11.4C3 16.7019 7.02944 21 12 21C16.9706 21 21 16.7019 21 11.4C21 10.9245 20.9676 10.457 20.905 10",stroke:"currentColor",key:"k0"}],["path",{d:"M12 13L12 3M12 13C11.2998 13 9.99153 11.0057 9.5 10.5M12 13C12.7002 13 14.0085 11.0057 14.5 10.5",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const kot=At("FileAttachmentIcon",[["path",{d:"M4 12.0004L4 14.5446C4 17.7896 4 19.4121 4.88607 20.5111C5.06508 20.7331 5.26731 20.9354 5.48933 21.1144C6.58831 22.0004 8.21082 22.0004 11.4558 22.0004C12.1614 22.0004 12.5141 22.0004 12.8372 21.8864C12.9044 21.8627 12.9702 21.8354 13.0345 21.8047C13.3436 21.6569 13.593 21.4074 14.0919 20.9085L18.8284 16.172C19.4065 15.5939 19.6955 15.3049 19.8478 14.9374C20 14.5698 20 14.1611 20 13.3436V10.0004C20 6.22919 20 4.34358 18.8284 3.172C17.7693 2.11284 16.1265 2.01122 13.0345 2.00146M13 21.5004V21.0004C13 18.172 13 16.7578 13.8787 15.8791C14.7574 15.0004 16.1716 15.0004 19 15.0004H19.5",stroke:"currentColor",key:"k0"}],["path",{d:"M4 8.23028V5.46105C4 3.54929 5.567 1.99951 7.5 1.99951C9.433 1.99951 11 3.54929 11 5.46105V9.26874C11 10.2246 10.2165 10.9995 9.25 10.9995C8.2835 10.9995 7.5 10.2246 7.5 9.26874V5.46105",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Eot=At("GithubIcon",[["path",{d:"M10 20.5675C6.57143 21.7248 3.71429 20.5675 2 17",stroke:"currentColor",key:"k0"}],["path",{d:"M10 22V18.7579C10 18.1596 10.1839 17.6396 10.4804 17.1699C10.6838 16.8476 10.5445 16.3904 10.1771 16.2894C7.13394 15.4528 5 14.1077 5 9.64606C5 8.48611 5.38005 7.39556 6.04811 6.4464C6.21437 6.21018 6.29749 6.09208 6.31748 5.9851C6.33746 5.87813 6.30272 5.73852 6.23322 5.45932C5.95038 4.32292 5.96871 3.11619 6.39322 2.02823C6.39322 2.02823 7.27042 1.74242 9.26698 2.98969C9.72282 3.27447 9.95075 3.41686 10.1515 3.44871C10.3522 3.48056 10.6206 3.41384 11.1573 3.28041C11.8913 3.09795 12.6476 3 13.5 3C14.3524 3 15.1087 3.09795 15.8427 3.28041C16.3794 3.41384 16.6478 3.48056 16.8485 3.44871C17.0493 3.41686 17.2772 3.27447 17.733 2.98969C19.7296 1.74242 20.6068 2.02823 20.6068 2.02823C21.0313 3.11619 21.0496 4.32292 20.7668 5.45932C20.6973 5.73852 20.6625 5.87813 20.6825 5.9851C20.7025 6.09207 20.7856 6.21019 20.9519 6.4464C21.6199 7.39556 22 8.48611 22 9.64606C22 14.1077 19.8661 15.4528 16.8229 16.2894C16.4555 16.3904 16.3162 16.8476 16.5196 17.1699C16.8161 17.6396 17 18.1596 17 18.7579V22",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Mce=At("HeartAddIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 17H22M18 13L18 21",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const r9=At("HeartCheckIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 18C14 18 15 18 16 20C16 20 19.1765 15 22 14",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const _ot=At("LabelImportantIcon",[["path",{d:"M13 4H6.23456C3.79424 4 2.57407 4 2.14438 4.76649C2.13129 4.78984 2.11883 4.81353 2.10701 4.83754C1.71893 5.62592 2.41032 6.63129 3.7931 8.64204C4.89612 10.246 5.44763 11.048 5.4611 11.9555C5.46154 11.9852 5.46154 12.0148 5.4611 12.0445C5.44763 12.952 4.89612 13.754 3.7931 15.358C2.41032 17.3687 1.71893 18.3741 2.10701 19.1625C2.11883 19.1865 2.13129 19.2102 2.14438 19.2335C2.57407 20 3.79424 20 6.23456 20H13C14.9628 20 15.9443 20 16.7889 19.5777C17.6334 19.1554 18.2223 18.3703 19.4 16.8C21.1333 14.4889 22 13.3333 22 12C22 10.6667 21.1333 9.51111 19.4 7.2C18.2223 5.62972 17.6334 4.84458 16.7889 4.42229C15.9443 4 14.9628 4 13 4Z",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const $ot=At("Moon01Icon",[["path",{d:"M21.0985 7.84477C20.458 8.55417 19.5311 9 18.5 9C16.567 9 15 7.433 15 5.5C15 4.46895 15.4458 3.54203 16.1552 2.90149M21.0985 7.84477C21.6774 9.11025 22 10.5174 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C13.4826 2 14.8898 2.32262 16.1552 2.90149M21.0985 7.84477C20.0998 5.66155 18.3384 3.90018 16.1552 2.90149",stroke:"currentColor",key:"k0"}],["path",{d:"M10 8H10.0064",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14H7.00635",stroke:"currentColor",key:"k2"}],["path",{d:"M16 16C16 17.1046 15.1046 18 14 18C12.8954 18 12 17.1046 12 16C12 14.8954 12.8954 14 14 14C15.1046 14 16 14.8954 16 16Z",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Aot=At("ReloadIcon",[["path",{d:"M15.1667 0.999756L15.7646 2.11753C16.1689 2.87322 16.371 3.25107 16.2374 3.41289C16.1037 3.57471 15.6635 3.44402 14.7831 3.18264C13.9029 2.92131 12.9684 2.78071 12 2.78071C6.75329 2.78071 2.5 6.90822 2.5 11.9998C2.5 13.6789 2.96262 15.2533 3.77093 16.6093M8.83333 22.9998L8.23536 21.882C7.83108 21.1263 7.62894 20.7484 7.7626 20.5866C7.89627 20.4248 8.33649 20.5555 9.21689 20.8169C10.0971 21.0782 11.0316 21.2188 12 21.2188C17.2467 21.2188 21.5 17.0913 21.5 11.9998C21.5 10.3206 21.0374 8.74623 20.2291 7.39023",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Tot=At("Sad02Icon",[["path",{d:"M9.5 21.685C10.299 21.8906 11.1368 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 12.3375 2.01672 12.6711 2.04938 13",stroke:"currentColor",key:"k0"}],["path",{d:"M5.02108 14L2.8602 16.0826C1.69974 17.2204 1.71976 19.0523 2.88023 20.1707C4.06071 21.2892 5.96146 21.2699 7.12193 20.1515C8.30241 19.0137 8.2824 17.1818 7.12193 16.0633L5.02108 14Z",stroke:"currentColor",key:"k1"}],["path",{d:"M8.00897 8.44238H8M16 8.44238H15.991",stroke:"currentColor",key:"k2"}],["path",{d:"M15 16C14.1644 15.3721 13.1256 15 12 15C11.0893 15 10.2354 15.2436 9.5 15.6692",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Rce=At("Search01Icon",[["path",{d:"M17.5 17.5L22 22",stroke:"currentColor",key:"k0"}],["path",{d:"M20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C15.9706 20 20 15.9706 20 11Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Pot=At("Search02Icon",[["path",{d:"M14 14L16.5 16.5",stroke:"currentColor",key:"k0"}],["path",{d:"M16.4333 18.5252C15.8556 17.9475 15.8556 17.0109 16.4333 16.4333C17.0109 15.8556 17.9475 15.8556 18.5252 16.4333L21.5667 19.4748C22.1444 20.0525 22.1444 20.9891 21.5667 21.5667C20.9891 22.1444 20.0525 22.1444 19.4748 21.5667L16.4333 18.5252Z",stroke:"currentColor",key:"k1"}],["path",{d:"M16 9C16 5.13401 12.866 2 9 2C5.13401 2 2 5.13401 2 9C2 12.866 5.13401 16 9 16C12.866 16 16 12.866 16 9Z",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Fot=At("SearchRemoveIcon",[["path",{d:"M17.5 17.5L22 22",stroke:"currentColor",key:"k0"}],["path",{d:"M20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C15.9706 20 20 15.9706 20 11Z",stroke:"currentColor",key:"k1"}],["path",{d:"M8 14L14 8M8 8L14 14",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const i9=At("Settings01Icon",[["path",{d:"M21.3175 7.14139L20.8239 6.28479C20.4506 5.63696 20.264 5.31305 19.9464 5.18388C19.6288 5.05472 19.2696 5.15664 18.5513 5.36048L17.3311 5.70418C16.8725 5.80994 16.3913 5.74994 15.9726 5.53479L15.6357 5.34042C15.2766 5.11043 15.0004 4.77133 14.8475 4.37274L14.5136 3.37536C14.294 2.71534 14.1842 2.38533 13.9228 2.19657C13.6615 2.00781 13.3143 2.00781 12.6199 2.00781H11.5051C10.8108 2.00781 10.4636 2.00781 10.2022 2.19657C9.94085 2.38533 9.83106 2.71534 9.61149 3.37536L9.27753 4.37274C9.12465 4.77133 8.84845 5.11043 8.48937 5.34042L8.15249 5.53479C7.73374 5.74994 7.25259 5.80994 6.79398 5.70418L5.57375 5.36048C4.85541 5.15664 4.49625 5.05472 4.17867 5.18388C3.86109 5.31305 3.67445 5.63696 3.30115 6.28479L2.80757 7.14139C2.45766 7.74864 2.2827 8.05227 2.31666 8.37549C2.35061 8.69871 2.58483 8.95918 3.05326 9.48012L4.0843 10.6328C4.3363 10.9518 4.51521 11.5078 4.51521 12.0077C4.51521 12.5078 4.33636 13.0636 4.08433 13.3827L3.05326 14.5354C2.58483 15.0564 2.35062 15.3168 2.31666 15.6401C2.2827 15.9633 2.45766 16.2669 2.80757 16.8741L3.30114 17.7307C3.67443 18.3785 3.86109 18.7025 4.17867 18.8316C4.49625 18.9608 4.85542 18.8589 5.57377 18.655L6.79394 18.3113C7.25263 18.2055 7.73387 18.2656 8.15267 18.4808L8.4895 18.6752C8.84851 18.9052 9.12464 19.2442 9.2775 19.6428L9.61149 20.6403C9.83106 21.3003 9.94085 21.6303 10.2022 21.8191C10.4636 22.0078 10.8108 22.0078 11.5051 22.0078H12.6199C13.3143 22.0078 13.6615 22.0078 13.9228 21.8191C14.1842 21.6303 14.294 21.3003 14.5136 20.6403L14.8476 19.6428C15.0004 19.2442 15.2765 18.9052 15.6356 18.6752L15.9724 18.4808C16.3912 18.2656 16.8724 18.2055 17.3311 18.3113L18.5513 18.655C19.2696 18.8589 19.6288 18.9608 19.9464 18.8316C20.264 18.7025 20.4506 18.3785 20.8239 17.7307L21.3175 16.8741C21.6674 16.2669 21.8423 15.9633 21.8084 15.6401C21.7744 15.3168 21.5402 15.0564 21.0718 14.5354L20.0407 13.3827C19.7887 13.0636 19.6098 12.5078 19.6098 12.0077C19.6098 11.5078 19.7888 10.9518 20.0407 10.6328L21.0718 9.48012C21.5402 8.95918 21.7744 8.69871 21.8084 8.37549C21.8423 8.05227 21.6674 7.74864 21.3175 7.14139Z",stroke:"currentColor",key:"k0"}],["path",{d:"M15.5195 12C15.5195 13.933 13.9525 15.5 12.0195 15.5C10.0865 15.5 8.51953 13.933 8.51953 12C8.51953 10.067 10.0865 8.5 12.0195 8.5C13.9525 8.5 15.5195 10.067 15.5195 12Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Mot=At("Share01Icon",[["path",{d:"M20.3927 8.03168L18.6457 6.51461C17.3871 5.42153 16.8937 4.83352 16.2121 5.04139C15.3622 5.30059 15.642 6.93609 15.642 7.48824C14.3206 7.48824 12.9468 7.38661 11.6443 7.59836C7.34453 8.29742 6 11.3566 6 14.6525C7.21697 13.9065 8.43274 13.0746 9.8954 12.7289C11.7212 12.2973 13.7603 12.5032 15.642 12.5032C15.642 13.0554 15.3622 14.6909 16.2121 14.9501C16.9844 15.1856 17.3871 14.5699 18.6457 13.4769L20.3927 11.9598C21.4642 11.0293 22 10.564 22 9.99574C22 9.4275 21.4642 8.96223 20.3927 8.03168Z",stroke:"currentColor",key:"k0"}],["path",{d:"M10.5676 3C6.70735 3.00694 4.68594 3.10152 3.39411 4.39073C2 5.78202 2 8.02125 2 12.4997C2 16.9782 2 19.2174 3.3941 20.6087C4.78821 22 7.03198 22 11.5195 22C16.0071 22 18.2509 22 19.645 20.6087C20.6156 19.64 20.9104 18.2603 21 16",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Rot=At("SmartPhone01Icon",[["path",{d:"M5 9C5 5.70017 5 4.05025 6.02513 3.02513C7.05025 2 8.70017 2 12 2C15.2998 2 16.9497 2 17.9749 3.02513C19 4.05025 19 5.70017 19 9V15C19 18.2998 19 19.9497 17.9749 20.9749C16.9497 22 15.2998 22 12 22C8.70017 22 7.05025 22 6.02513 20.9749C5 19.9497 5 18.2998 5 15V9Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 19H13",stroke:"currentColor",key:"k1"}],["path",{d:"M9 2L9.089 2.53402C9.28188 3.69129 9.37832 4.26993 9.77519 4.62204C10.1892 4.98934 10.7761 5 12 5C13.2239 5 13.8108 4.98934 14.2248 4.62204C14.6217 4.26993 14.7181 3.69129 14.911 2.53402L15 2",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Oce=At("StartUp02Icon",[["path",{d:"M7 11.2947C12.284 1.44656 18.8635 1.333 21.4928 2.50724C22.667 5.1365 22.5534 11.716 12.7053 17C12.6031 16.4129 12.0352 14.8749 10.5801 13.4199C9.12512 11.9648 7.58712 11.3969 7 11.2947Z",stroke:"currentColor",key:"k0"}],["path",{d:"M14 16.8C16.0428 17.7334 16.2609 19.4069 16.5439 21C16.5439 21 20.8223 18.0481 18.0856 14",stroke:"currentColor",key:"k1"}],["path",{d:"M7.19998 9.99987C6.26664 7.95709 4.59305 7.73899 3 7.45601C3 7.45601 5.95194 3.17753 10 5.91431",stroke:"currentColor",key:"k2"}],["path",{d:"M6.20866 13.9998C5.57677 14.6317 4.50255 16.4642 5.26082 18.739C7.53564 19.4973 9.36813 18.4231 10 17.7912",stroke:"currentColor",key:"k3"}],["path",{d:"M18.0952 7.753C18.0952 6.7328 17.2682 5.90578 16.248 5.90578C15.2278 5.90578 14.4008 6.7328 14.4008 7.753C14.4008 8.77319 15.2278 9.60022 16.248 9.60022C17.2682 9.60022 18.0952 8.77319 18.0952 7.753Z",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Oot=At("Sun03Icon",[["path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M12 2V3.5M12 20.5V22M19.0708 19.0713L18.0101 18.0106M5.98926 5.98926L4.9286 4.9286M22 12H20.5M3.5 12H2M19.0713 4.92871L18.0106 5.98937M5.98975 18.0107L4.92909 19.0714",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Dce=At("SwipeUp02Icon",[["path",{d:"M18.5 2.00195V8.00195M18.5 2.00195C17.7998 2.00195 16.4915 3.99625 16 4.50195M18.5 2.00195C19.2002 2.00195 20.5085 3.99625 21 4.50195",stroke:"currentColor",key:"k0"}],["path",{d:"M15.3913 21.998C15.3395 20.084 15.4684 19.8535 15.6052 19.4277C15.7419 19.002 16.6982 17.4665 17.0366 16.3695C18.1313 12.8202 17.111 12.0653 15.7507 11.0588C14.2422 9.94257 11.3968 9.37728 9.98573 9.49966V3.7462C9.98573 2.78288 9.20481 2.00195 8.24148 2.00195C7.27816 2.00195 6.49723 2.78288 6.49723 3.7462V9.96607M6.49774 21.9988V20.9854C6.43328 20.041 5.49529 18.9235 4.32672 17.3166C3.12509 15.576 2.86688 14.6973 3.05591 13.8848C3.15329 13.4694 3.40594 12.7832 4.64647 11.6104L6.49723 9.96607M6.49723 14.0323V9.96607",stroke:"currentColor",key:"k1"}]]);var Ph=[..."".normalize("NFD")].map(e=>e.charCodeAt(0)),RC=44032,Nce=55203,Z2=28,uH=21,Dot={"":"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Not={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},Lot=["","","","","","","","","","","","","","","","","","",""],Iot=Object.values(Not),Lce=["","","","","","","","","","","","","","","","","","","","","","","","","","","",""].map(e=>Dot[e]);function zot(e){const t=e.charCodeAt(0);if(!(RC<=t&&t<=Nce))return;const r=t-RC,i=r%Z2,o=(r-i)/Z2%uH,s=Math.floor((r-i)/Z2/uH);return{choseong:Lot[s],jungseong:Iot[o],jongseong:Lce[i]}}function Bot(e,t){const n=e[e.length-1];if(n==null)return!1;const r=n.charCodeAt(0);if(r<RC||r>Nce)return!1;const o=(r-RC)%Z2,s=Lce[o].length;switch(void 0){case"single":return s===1;case"double":return s===2;default:return o>0}}var jot=["/","/","/","/"];function tF(e,t){return e.length===0?e:e+Ice(e,t)}tF.pick=Ice;function Ice(e,t){var n;if(e.length===0)return t.split("/")[0];const r=Bot(e);let i=r?0:1;const o=r&&((n=zot(e[e.length-1]))==null?void 0:n.jongseong)==="",s=r&&o&&jot.includes(t);(t==="/"||s)&&(i=i===0?1:0);const a=e[e.length-1]==="";return t==="/"&&a&&(i=1),t.split("/")[i]}var OC={START_CHOSEONG:Ph[0],START_JUNGSEONG:Ph[1],START_JONGSEONG:Ph[2],END_CHOSEONG:Ph[3],END_JUNGSEONG:Ph[4],END_JONGSEONG:Ph[5]};new RegExp(`[^\\u${OC.START_CHOSEONG.toString(16)}-\\u${OC.END_CHOSEONG.toString(16)}-\\s]+`,"ug");new RegExp(`[\\u${OC.START_CHOSEONG.toString(16)}-\\u${OC.END_CHOSEONG.toString(16)}]`,"g");function cH(e){return e.replace(/[^---]/g,"")}function zce({chart:e,...t}){const n=e.fields,{accentSelectedHover:r}=Ar(),{i18n:i}=qo();return $.jsxs(Gn,{as:"p",fontSize:"md",...t,children:[$.jsx(Gn,{as:"span",fontWeight:600,color:r,children:n[0].name}),n.length>1&&$.jsx(Gn,{as:"span",fontWeight:400,children:i.language==="ko"?`${tF.pick(cH(n[0].name),"/")} `:" and "}),n.length>1&&$.jsx(Gn,{as:"span",fontWeight:600,color:r,children:n[1].name}),n.length>2&&$.jsx(Gn,{as:"span",fontWeight:400,children:i.language==="ko"?`${tF.pick(cH(n[1].name),"/")} `:" and "}),n.length>2&&$.jsx(Gn,{as:"span",fontWeight:600,color:r,children:`${n[2].name}`})]})}const Uot=nh`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,Vot=nh`
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
`;function Bce({chart:e,handleClick:t,logClick:n,thumbnailSize:r=70}){const{buttonColor:i}=Ar(),o=pot(e,r*1.5);return $.jsxs(oce,{as:Ot,flexDir:"column",sx:{animation:`${Uot} 0.2s ease-in-out`,"&.removing":{animation:`${Vot} 0.1s ease-in-out forwards`}},children:[$.jsxs(Ot,{p:1,gap:4,borderRadius:"md",alignItems:"center","data-log-click":n,onClick:()=>t(e),_hover:{cursor:"pointer",bg:i},children:[!!o&&$.jsx(WN,{src:o,alt:`Chart thumbnail ${e.title}`,w:`${r}px`,h:`${r}px`}),$.jsx(zce,{chart:e})]}),$.jsx(L_,{my:1})]},`bookmark-${e.key}`)}const fH={};function nF(e,t){e===void 0&&(e=fH),t===void 0&&(t=fH);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}function Wot(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Hot(e,t,n){n&&(Wot(n)?n(e.data(t)):e.change(t,Zo.changeset().remove(()=>!0).insert(n)))}function qot(e,t){Object.keys(t).forEach(n=>{Hot(e,n,t[n])})}function jce(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Uce=()=>{};function X3(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}var Got=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const Yot=Ul(Got);function Xot(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=jce([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!Yot(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function dH(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function K3(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function iy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Vce extends Vi.PureComponent{constructor(){super(...arguments),iy(this,"containerRef",Vi.createRef()),iy(this,"resultPromise",void 0),iy(this,"handleError",t=>{const{onError:n=Uce}=this.props;n(t,this.containerRef.current),console.warn(t)}),iy(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=jce([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Xot(K3(this.props),K3(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!nF(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&dH(a,o),i&&X3(a,i)),a.run()})}else nF(i,o)||this.modifyView(s=>{o&&dH(s,o),i&&X3(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=K3(this.props);this.resultPromise=aoe(this.containerRef.current,a,s).then(l=>{if(l){const{view:u}=l;X3(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Vi.createElement("div",{ref:this.containerRef,className:t,style:n})}}iy(Vce,"propTypes",{className:JW.string,onError:JW.func});function rF(){return rF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rF.apply(this,arguments)}function iF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Kot={};class Wce extends Vi.PureComponent{constructor(){super(...arguments),iF(this,"vegaEmbed",Vi.createRef()),iF(this,"handleNewView",t=>{this.update();const{onNewView:n=Uce}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){nF(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{qot(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Vi.createElement(Vce,rF({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}iF(Wce,"defaultProps",{data:Kot});function oF(){return oF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oF.apply(this,arguments)}function Qot(e){return Vi.createElement(Wce,oF({},e,{mode:"vega-lite"}))}const hH=new Map;function Jot({spec:e,theme:t,...n}){const{i18n:r}=qo(),i=JSON.stringify({spec:e,theme:t,locale:r.language}),o=hH.get(i);return o?$.jsx("img",{src:o,alt:"cached"}):$.jsx(Qot,{spec:e,theme:t,logLevel:sv,actions:!1,renderer:"canvas",onNewView:s=>{s.toImageURL("svg").then(a=>{hH.set(i,a)})},...n})}const Zot=e=>$.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",...e,children:$.jsx("path",{fill:"currentColor",d:"M1 8.99836C1 5.35802 3.3947 2 7.43 2C9.30819 2 10.7026 2.8047 11.75 4.01046C12.7974 2.8047 14.1918 2 16.07 2C20.1053 2 22.5 5.35802 22.5 8.99836C22.5 9.46105 22.4685 9.91191 22.408 10.3511C22.3483 10.7843 22.231 11.2599 22.0514 11.7668C21.3153 11.6779 20.5472 11.9159 19.9822 12.4809L16.25 16.2131L16.0178 15.9809C15.0415 15.0045 13.4585 15.0045 12.4822 15.9809C11.5059 16.9572 11.5059 18.5401 12.4822 19.5164L13.5921 20.6262C13.2689 20.808 12.9356 20.9867 12.5922 21.1621C12.4224 21.2496 12.2535 21.3354 12.0855 21.4194C11.8743 21.525 11.6257 21.525 11.4145 21.4194C9.06793 20.2456 6.48346 18.718 4.47892 16.7123C2.46481 14.697 1 12.16 1 8.99836ZM22.4571 14.9557C22.8476 14.5652 22.8476 13.932 22.4571 13.5415C22.0666 13.151 21.4334 13.151 21.0429 13.5415L16.25 18.3344L14.9571 17.0415C14.5666 16.651 13.9334 16.651 13.5429 17.0415C13.1524 17.432 13.1524 18.0652 13.5429 18.4557L15.5429 20.4557C15.7304 20.6433 15.9848 20.7486 16.25 20.7486C16.5152 20.7486 16.7696 20.6433 16.9571 20.4557L22.4571 14.9557Z"})});function est({chart:e,...t}){const{mobile:n,chartTheme:r,chartWidth:i,chartHeight:o}=Ar(),{i18n:s}=qo(),a=xc(w=>w.data),l=Qe(w=>w.setChartPreferred),u=Qe(w=>w.setChartTimeUnit),c=e.fields.find(w=>w.type==="datetime"),f=c==null?void 0:c.metadata,h=(f&&f.type==="datetime"?[f.yearUnique,f.monthUnique,f.dayUnique,f.hoursUnique]:[]).reduce((w,k,E,A)=>k>A[w]?E:w,0),p=["year","month","day","hours"].filter(w=>((f==null?void 0:f[`${w}Unique`])??0)>2),g=F.useMemo(()=>{if(p.length!==0)return p[h]},[p,h]),[m,y]=F.useState(g);F.useEffect(()=>{c&&m&&e.key&&u(e.key,m)},[c,m,e.key,u]);const v=F.useMemo(()=>({[loe]:a}),[a]),b=F.useMemo(()=>{let w=tBe(e.spec,i,o);return c&&m&&(w=oBe(w,m,c)),s.language==="ko"?Jze(w):w},[e.spec,i,o,c,m,s.language]),x=e.preferred,S=()=>{e.key&&l(e.key,!x)},C=Git(S);return $.jsxs(Cs,{flexDir:"column",...C,...t,children:[$.jsxs(id,{children:[$.jsx(zce,{chart:e,textAlign:"center",fontSize:"lg"}),$.jsx(Jot,{width:i,height:o,spec:b,data:v,theme:r,actions:!1,logLevel:sv})]}),m&&$.jsx(HN,{gap:0,w:"full",my:4,spacing:0,children:p.map((w,k)=>$.jsx(_a,{borderLeftRadius:k===0?"lg":0,borderLeft:k===0?"lg":0,borderRightRadius:k===p.length-1?"lg":0,variant:m===w?"solid":"outline",m:0,colorScheme:gn,size:"md",onClick:()=>y(w),w:"full",children:s.language==="ko"?E2(w):w.charAt(0).toUpperCase()+w.slice(1)},`temporal-select-${w}`))}),n&&$.jsxs($.Fragment,{children:[$.jsx(N_,{}),$.jsx(Ot,{justifyContent:"flex-end",w:"full",children:$.jsx(vs,{variant:"ghost",icon:$.jsx(We,{as:x?Zot:Mce,boxSize:10}),py:8,size:"lg","aria-label":"Bookmark current chart",onClick:S,"data-log-click":"prefer_chart",colorScheme:x?"red":"gray"})})]})]})}const tst=F.memo(est);function nst(e){const{sessionInitialized:t,chartDisplaying:n,currentChartPreferred:r,handleNextChart:i,handlePrevChart:o,handlePreferChart:s}=Wit(),{t:a}=qo();return $.jsxs(HN,{...e,children:[$.jsx(_a,{py:8,size:"lg",w:"full","aria-label":"Previous chart",onClick:o,"data-log-click":"prev-chart",isDisabled:!t||!n,variant:"ghost",children:$.jsxs(id,{spacing:2,children:[$.jsx(We,{as:yot,boxSize:6}),$.jsx(Gn,{fontSize:"sm",children:a("navigator.prev")})]})}),$.jsx(_a,{py:8,size:"lg",w:"full","aria-label":"Next chart",onClick:i,"data-log-click":"next-chart",isDisabled:!t,variant:"ghost",children:$.jsxs(id,{spacing:2,children:[$.jsx(We,{as:Fce,boxSize:6}),$.jsx(Gn,{fontSize:"sm",children:a("navigator.next")})]})}),$.jsx(_a,{py:8,size:"lg",w:"full","aria-label":"Bookmark current chart",onClick:s,"data-log-click":"prefer-chart",colorScheme:r?"red":"gray",isDisabled:!t||!n,variant:r?"solid":"ghost",children:$.jsxs(id,{spacing:2,children:[$.jsx(We,{as:r?r9:Mce,boxSize:6}),$.jsx(Gn,{fontSize:"sm",children:a("bookmarks.action")})]})})]})}lv(".3~s");function rst({selected:e,field:t,...n}){const{name:r}=t;return $.jsxs(mce,{gap:2,p:2,borderRadius:"full",colorScheme:gn,...n,children:[$.jsx(We,{as:e?vot:xot,boxSize:5}),$.jsx(yce,{fontSize:n.size,children:r})]})}function ist(e){const{loading:t}=$ce(),{loadingData:n,fileInputRef:r,pathInput:i,inputDisabled:o,handleFileButtonClick:s,handleFileChange:a,handleInputChange:l,handleSubmit:u}=Yit();return $.jsxs(Ot,{as:Que,...e,children:[$.jsxs(nce,{size:"md",children:[$.jsx(AC,{placeholder:"https://...",onChange:l,value:i,borderRightRadius:0,_focusVisible:{borderColor:gn}}),$.jsxs(qN,{children:[$.jsx(AC,{type:"file",display:"none",ref:r,onChange:a,"data-log-change":"file-attachment",accept:".csv,.json"}),$.jsx(vs,{size:"md","aria-label":"Select File",icon:$.jsx(We,{as:kot}),variant:"link",onClick:s,"data-log-click":"file-attachment"})]})]}),$.jsx(vs,{size:"md",borderLeftRadius:0,colorScheme:gn,type:"submit",isLoading:n||t,icon:$.jsx(We,{as:Oce}),"aria-label":"Load Data",isDisabled:o,"data-log-click":"submit-data",onClick:u,children:o?"Please Input Data":"Load Data"})]})}function ost(e){const{t}=qo();return $.jsxs(Cs,{flexDir:"column",p:2,...e,children:[$.jsxs(Cs,{gap:2,mb:4,children:[$.jsx(We,{as:Dce,boxSize:12}),$.jsx(Yg,{fontSize:40,children:"Swipytics"})]}),$.jsx(Gn,{textColor:"gray",textAlign:"center",fontSize:"sm",children:t("home.description")}),$.jsxs(id,{w:"full",color:"gray",gap:1,mt:8,p:0,children:[$.jsxs(Ot,{gap:1,children:[$.jsx(Gn,{fontSize:"xs",textAlign:"center",children:"Swipytics @ 2024"}),$.jsx(J2,{href:"https://jiwnchoi.me",isExternal:!0,children:$.jsx(Gn,{fontSize:"xs",textAlign:"center",textDecoration:"underline",children:"Jiwon Choi"})}),$.jsx(Gn,{fontSize:"xs",textAlign:"center",children:"All rights reserved."})]}),$.jsxs(Ot,{gap:4,children:[$.jsx(J2,{href:"https://github.com/jiwnchoi/Swipytics",isExternal:!0,children:$.jsx(_a,{leftIcon:$.jsx(We,{as:Eot}),size:"xs",variant:"link",color:"gray",children:"GitHub"})}),$.jsx(J2,{href:"https://idclab.skku.edu",isExternal:!0,children:$.jsx(_a,{variant:"link",size:"xs",leftIcon:$.jsx(We,{as:_ot}),color:"gray",children:$.jsx(WN,{m:0,p:0,src:"/Swipytics/idclab.svg",height:"10px"})})})]})]})]})}const Hce=F.memo(ost);function sst(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var qce=sst,ast=typeof Li=="object"&&Li&&Li.Object===Object&&Li,lst=ast,ust=lst,cst=typeof self=="object"&&self&&self.Object===Object&&self,fst=ust||cst||Function("return this")(),Gce=fst,dst=Gce,hst=function(){return dst.Date.now()},pst=hst,gst=/\s/;function mst(e){for(var t=e.length;t--&&gst.test(e.charAt(t)););return t}var yst=mst,vst=yst,bst=/^\s+/;function xst(e){return e&&e.slice(0,vst(e)+1).replace(bst,"")}var wst=xst,Sst=Gce,Cst=Sst.Symbol,Yce=Cst,pH=Yce,Xce=Object.prototype,kst=Xce.hasOwnProperty,Est=Xce.toString,v0=pH?pH.toStringTag:void 0;function _st(e){var t=kst.call(e,v0),n=e[v0];try{e[v0]=void 0;var r=!0}catch{}var i=Est.call(e);return r&&(t?e[v0]=n:delete e[v0]),i}var $st=_st,Ast=Object.prototype,Tst=Ast.toString;function Pst(e){return Tst.call(e)}var Fst=Pst,gH=Yce,Mst=$st,Rst=Fst,Ost="[object Null]",Dst="[object Undefined]",mH=gH?gH.toStringTag:void 0;function Nst(e){return e==null?e===void 0?Dst:Ost:mH&&mH in Object(e)?Mst(e):Rst(e)}var Lst=Nst;function Ist(e){return e!=null&&typeof e=="object"}var zst=Ist,Bst=Lst,jst=zst,Ust="[object Symbol]";function Vst(e){return typeof e=="symbol"||jst(e)&&Bst(e)==Ust}var Wst=Vst,Hst=wst,yH=qce,qst=Wst,vH=NaN,Gst=/^[-+]0x[0-9a-f]+$/i,Yst=/^0b[01]+$/i,Xst=/^0o[0-7]+$/i,Kst=parseInt;function Qst(e){if(typeof e=="number")return e;if(qst(e))return vH;if(yH(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=yH(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Hst(e);var n=Yst.test(e);return n||Xst.test(e)?Kst(e.slice(2),n?2:8):Gst.test(e)?vH:+e}var Jst=Qst,Zst=qce,Q3=pst,bH=Jst,eat="Expected a function",tat=Math.max,nat=Math.min;function rat(e,t,n){var r,i,o,s,a,l,u=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(eat);t=bH(t)||0,Zst(n)&&(c=!!n.leading,f="maxWait"in n,o=f?tat(bH(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d);function h(C){var w=r,k=i;return r=i=void 0,u=C,s=e.apply(k,w),s}function p(C){return u=C,a=setTimeout(y,t),c?h(C):s}function g(C){var w=C-l,k=C-u,E=t-w;return f?nat(E,o-k):E}function m(C){var w=C-l,k=C-u;return l===void 0||w>=t||w<0||f&&k>=o}function y(){var C=Q3();if(m(C))return v(C);a=setTimeout(y,g(C))}function v(C){return a=void 0,d&&r?h(C):(r=i=void 0,s)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function x(){return a===void 0?s:v(Q3())}function S(){var C=Q3(),w=m(C);if(r=arguments,i=this,l=C,w){if(a===void 0)return p(l);if(f)return clearTimeout(a),a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),s}return S.cancel=b,S.flush=x,S}var iat=rat;const oat=Ul(iat);function DC(){return DC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DC.apply(this,arguments)}var sat=[],xH={width:0,height:0,top:0,left:0};function aat(e){var t=e===void 0?{}:e,n=t.initialSize,r=n===void 0?xH:n,i=t.debounceTime,o=i===void 0?300:i,s=t.ignoreDimensions,a=s===void 0?sat:s,l=t.enableDebounceLeadingCall,u=l===void 0?!0:l,c=t.resizeObserverPolyfill,f=F.useRef(null),d=F.useRef(0),h=F.useState(DC({},xH,r)),p=h[0],g=h[1],m=F.useMemo(function(){var y=Array.isArray(a)?a:[a];return oat(function(v){g(function(b){var x=Object.keys(b),S=x.filter(function(w){return b[w]!==v[w]}),C=S.every(function(w){return y.includes(w)});return C?b:v})},o,{leading:u})},[o,u,a]);return F.useEffect(function(){var y=c||window.ResizeObserver,v=new y(function(b){b.forEach(function(x){var S,C=(S=x==null?void 0:x.contentRect)!=null?S:{},w=C.left,k=C.top,E=C.width,A=C.height;d.current=window.requestAnimationFrame(function(){m({width:E,height:A,top:k,left:w})})})});return f.current&&v.observe(f.current),function(){window.cancelAnimationFrame(d.current),v.disconnect(),m.cancel()}},[m,c]),DC({parentRef:f,resize:m},p)}function lat(e,t){t.domain&&("nice"in e||"quantiles"in e||"padding"in e,e.domain(t.domain))}function uat(e,t){t.range&&("padding"in e,e.range(t.range))}function cat(e,t){"align"in e&&"align"in t&&typeof t.align<"u"&&e.align(t.align)}function fat(e,t){"base"in e&&"base"in t&&typeof t.base<"u"&&e.base(t.base)}function dat(e,t){"clamp"in e&&"clamp"in t&&typeof t.clamp<"u"&&e.clamp(t.clamp)}function hat(e,t){"constant"in e&&"constant"in t&&typeof t.constant<"u"&&e.constant(t.constant)}function pat(e,t){"exponent"in e&&"exponent"in t&&typeof t.exponent<"u"&&e.exponent(t.exponent)}var wH={lab:AK,hcl:PK,"hcl-long":FK,hsl:_K,"hsl-long":$K,cubehelix:RK,"cubehelix-long":OK,rgb:_w};function gat(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return wH[e]}var t=e.type,n=e.gamma,r=wH[t];return typeof n>"u"?r:r.gamma(n)}function mat(e,t){if("interpolate"in t&&"interpolate"in e&&typeof t.interpolate<"u"){var n=gat(t.interpolate);e.interpolate(n)}}var yat=new Date(Date.UTC(2020,1,2,3,4,5)),vat="%Y-%m-%d %H:%M";function bat(e){var t=e.tickFormat(1,vat)(yat);return t==="2020-02-02 03:04"}var SH={day:ga,hour:fv,minute:uv,month:Jp,second:hs,week:Id,year:Es},CH={day:xl,hour:dv,minute:cv,month:Zp,second:hs,week:Bd,year:_s};function xat(e,t){if("nice"in t&&typeof t.nice<"u"&&"nice"in e){var n=t.nice;if(typeof n=="boolean")n&&e.nice();else if(typeof n=="number")e.nice(n);else{var r=e,i=bat(r);if(typeof n=="string")r.nice(i?CH[n]:SH[n]);else{var o=n.interval,s=n.step,a=(i?CH[o]:SH[o]).every(s);a!=null&&r.nice(a)}}}}function wat(e,t){"padding"in e&&"padding"in t&&typeof t.padding<"u"&&e.padding(t.padding),"paddingInner"in e&&"paddingInner"in t&&typeof t.paddingInner<"u"&&e.paddingInner(t.paddingInner),"paddingOuter"in e&&"paddingOuter"in t&&typeof t.paddingOuter<"u"&&e.paddingOuter(t.paddingOuter)}function Sat(e,t){if(t.reverse){var n=e.range().slice().reverse();"padding"in e,e.range(n)}}function Cat(e,t){"round"in t&&typeof t.round<"u"&&(t.round&&"interpolate"in t&&typeof t.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",t):"round"in e?e.round(t.round):"interpolate"in e&&t.round&&e.interpolate(cm))}function kat(e,t){"unknown"in e&&"unknown"in t&&typeof t.unknown<"u"&&e.unknown(t.unknown)}function Eat(e,t){if("zero"in t&&t.zero===!0){var n=e.domain(),r=n[0],i=n[1],o=i<r,s=o?[i,r]:[r,i],a=s[0],l=s[1],u=[Math.min(0,a),Math.max(0,l)];e.domain(o?u.reverse():u)}}var _at=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],$at={domain:lat,nice:xat,zero:Eat,interpolate:mat,round:Cat,align:cat,base:fat,clamp:dat,constant:hat,exponent:pat,padding:wat,range:uat,reverse:Sat,unknown:kat};function Aat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Set(t),i=_at.filter(function(o){return r.has(o)});return function(s,a){return typeof a<"u"&&i.forEach(function(l){$at[l](s,a)}),s}}var Tat=Aat("domain","range","reverse","clamp","interpolate","nice","round","zero");function Pat(e){return Tat(pM(),e)}function Kce(e){const{cardHeight:t,mobile:n,preferredColor:r,indicatorGap:i,indicatorPadding:o,defaultGrayColor:s}=Ar(),{parentRef:a,width:l,height:u}=aat({debounceTime:50}),c=Ki(m=>m.tabIndex),f=Qe(m=>m.charts),d=Qe(m=>m.currentChartIndex),h=Qe(m=>m.appendingChart),p=()=>{const y=h?f:f.slice(0,-1),v=Math.min(u-o.TOP-o.BOTTOM,2*3*y.length+i*(y.length-1)),b=Pat({domain:[0,y.length-1],range:[u/2-v/2,u/2+v/2]});return y.map((x,S)=>({key:`indicator-${x.key}`,cy:b(S),r:S===d?6:3,fill:x.preferred?r:s}))},g=F.useMemo(p,[h,f,u,o.TOP,o.BOTTOM,i,d,r,s]);return $.jsx(Ot,{ref:a,position:"absolute",minH:"28px",h:t,visibility:!n||c===0?"visible":"hidden",...e,children:$.jsx("svg",{width:l,height:u,children:g.map(({key:m,cy:y,r:v,fill:b})=>$.jsx(BN.circle,{cx:9,cy:y,fill:b,initial:{r:0},animate:{r:v,fill:b,cy:y},transition:{type:"spring",stiffness:100,damping:20,fill:{duration:.2}}},m))})})}const Fat=F.memo(Mat);function Mat(e){const t=Qe(s=>s.currentChartIndex),n=Qe(s=>s.charts),r=Qe(s=>s.appendingChart),{cardWidth:i}=Ar(),o=Qe(s=>s.setCurrentChartIndex);return $.jsx(Xue,{in:t<n.length-2||r&&t===n.length-2,children:$.jsx(Ot,{...e,children:$.jsx(vs,{variant:"outline",colorScheme:gn,position:"absolute",bottom:6,left:i/2-24,borderRadius:"xl",size:"lg","aria-label":"Scroll to bottom",icon:$.jsx(We,{as:mot,boxSize:8}),onClick:s=>{s.stopPropagation(),o(n.length-2)},"data-log-click":"scroll-to-bottom"})})})}const Rat={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class NC{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||Rat,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,i){return i&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new NC(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new NC(this.logger,t)}}var pa=new NC;class q_{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(s=>{let[a,l]=s;for(let u=0;u<l;u++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(s=>{let[a,l]=s;for(let u=0;u<l;u++)a.apply(a,[t,...r])})}}const b0=()=>{let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},kH=e=>e==null?"":""+e,Oat=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},Dat=/###/g,EH=e=>e&&e.indexOf("###")>-1?e.replace(Dat,"."):e,_H=e=>!e||typeof e=="string",jy=(e,t,n)=>{const r=typeof t!="string"?t:t.split(".");let i=0;for(;i<r.length-1;){if(_H(e))return{};const o=EH(r[i]);!e[o]&&n&&(e[o]=new n),Object.prototype.hasOwnProperty.call(e,o)?e=e[o]:e={},++i}return _H(e)?{}:{obj:e,k:EH(r[i])}},$H=(e,t,n)=>{const{obj:r,k:i}=jy(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let o=t[t.length-1],s=t.slice(0,t.length-1),a=jy(e,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=jy(e,s,Object),a&&a.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=n},Nat=(e,t,n,r)=>{const{obj:i,k:o}=jy(e,t,Object);i[o]=i[o]||[],i[o].push(n)},LC=(e,t)=>{const{obj:n,k:r}=jy(e,t);if(n)return n[r]},Lat=(e,t,n)=>{const r=LC(e,n);return r!==void 0?r:LC(t,n)},Qce=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof t[r]=="string"||t[r]instanceof String?n&&(e[r]=t[r]):Qce(e[r],t[r],n):e[r]=t[r]);return e},Fh=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Iat={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const zat=e=>typeof e=="string"?e.replace(/[&<>"'\/]/g,t=>Iat[t]):e;class Bat{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const jat=[" ",",","?","!",";"],Uat=new Bat(20),Vat=(e,t,n)=>{t=t||"",n=n||"";const r=jat.filter(s=>t.indexOf(s)<0&&n.indexOf(s)<0);if(r.length===0)return!0;const i=Uat.getRegExp(`(${r.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!i.test(e);if(!o){const s=e.indexOf(n);s>0&&!i.test(e.substring(0,s))&&(o=!0)}return o},sF=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let s,a="";for(let l=o;l<r.length;++l)if(l!==o&&(a+=n),a+=r[l],s=i[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&l<r.length-1)continue;o+=l-o+1;break}i=s}return i},IC=e=>e&&e.indexOf("_")>0?e.replace("_","-"):e;class AH extends q_{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,s=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],r&&(Array.isArray(r)?a.push(...r):typeof r=="string"&&o?a.push(...r.split(o)):a.push(r)));const l=LC(this.data,a);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=a[0],n=a[1],r=a.slice(2).join(".")),l||!s||typeof r!="string"?l:sF(this.data&&this.data[t]&&this.data[t][n],r,o)}addResource(t,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[t,n];r&&(a=a.concat(s?r.split(s):r)),t.indexOf(".")>-1&&(a=t.split("."),i=n,n=a[1]),this.addNamespaces(n),$H(this.data,a,i),o.silent||this.emit("added",t,n,r,i)}addResources(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in r)(typeof r[o]=="string"||Array.isArray(r[o]))&&this.addResource(t,n,o,r[o],{silent:!0});i.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,i,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=LC(this.data,a)||{};s.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Qce(l,r,o):l={...l,...r},$H(this.data,a,l),s.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var Jce={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(o=>{this.processors[o]&&(t=this.processors[o].process(t,n,r,i))}),t}};const TH={};class zC extends q_{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Oat(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=pa.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const r=this.resolve(t,n);return r&&r.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const s=r&&t.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Vat(t,r,i);if(s&&!a){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:o};const u=t.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),t=u.join(i)}return typeof o=="string"&&(o=[o]),{key:t,namespaces:o}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:s,namespaces:a}=this.extractFromKey(t[t.length-1],n),l=a[a.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const x=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${x}${s}`,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${x}${s}`}return i?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:s}const f=this.resolve(t,n);let d=f&&f.res;const h=f&&f.usedKey||s,p=f&&f.exactUsedKey||s,g=Object.prototype.toString.apply(d),m=["[object Number]","[object Function]","[object RegExp]"],y=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject;if(v&&d&&(typeof d!="string"&&typeof d!="boolean"&&typeof d!="number")&&m.indexOf(g)<0&&!(typeof y=="string"&&Array.isArray(d))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const x=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...n,ns:a}):`key '${s} (${this.language})' returned an object instead of string.`;return i?(f.res=x,f.usedParams=this.getUsedParamsDetails(n),f):x}if(o){const x=Array.isArray(d),S=x?[]:{},C=x?p:h;for(const w in d)if(Object.prototype.hasOwnProperty.call(d,w)){const k=`${C}${o}${w}`;S[w]=this.translate(k,{...n,joinArrays:!1,ns:a}),S[w]===k&&(S[w]=d[w])}d=S}}else if(v&&typeof y=="string"&&Array.isArray(d))d=d.join(y),d&&(d=this.extendTranslation(d,t,n,r));else{let x=!1,S=!1;const C=n.count!==void 0&&typeof n.count!="string",w=zC.hasDefaultValue(n),k=C?this.pluralResolver.getSuffix(u,n.count,n):"",E=n.ordinal&&C?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",A=C&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),P=A&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${k}`]||n[`defaultValue${E}`]||n.defaultValue;!this.isValidLookup(d)&&w&&(x=!0,d=P),this.isValidLookup(d)||(S=!0,d=s);const M=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:d,O=w&&P!==d&&this.options.updateMissing;if(S||x||O){if(this.logger.log(O?"updateKey":"missingKey",u,l,s,O?P:d),o){const D=this.resolve(s,{...n,keySeparator:!1});D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let _=[];const T=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&T&&T[0])for(let D=0;D<T.length;D++)_.push(T[D]);else this.options.saveMissingTo==="all"?_=this.languageUtils.toResolveHierarchy(n.lng||this.language):_.push(n.lng||this.language);const N=(D,I,U)=>{const V=w&&U!==d?U:M;this.options.missingKeyHandler?this.options.missingKeyHandler(D,l,I,V,O,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(D,l,I,V,O,n),this.emit("missingKey",D,l,I,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?_.forEach(D=>{const I=this.pluralResolver.getSuffixes(D,n);A&&n[`defaultValue${this.options.pluralSeparator}zero`]&&I.indexOf(`${this.options.pluralSeparator}zero`)<0&&I.push(`${this.options.pluralSeparator}zero`),I.forEach(U=>{N([D],s+U,n[`defaultValue${U}`]||P)})}):N(_,s,P))}d=this.extendTranslation(d,t,n,f,r),S&&d===s&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${s}`),(S||x)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${s}`:s,x?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(f.res=d,f.usedParams=this.getUsedParamsDetails(n),f):d}extendTranslation(t,n,r,i,o){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=typeof t=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const d=t.match(this.interpolator.nestingRegexp);c=d&&d.length}let f=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),t=this.interpolator.interpolate(t,f,r.lng||this.language||i.usedLng,r),u){const d=t.match(this.interpolator.nestingRegexp),h=d&&d.length;c<h&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];return o&&o[0]===h[0]&&!r.context?(s.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${n[0]}`),null):s.translate(...h,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=typeof a=="string"?[a]:a;return t!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(t=Jce.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,o,s,a;return typeof t=="string"&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;i=c;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const d=n.count!==void 0&&typeof n.count!="string",h=d&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),p=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",g=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(m=>{this.isValidLookup(r)||(a=m,!TH[`${g[0]}-${m}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(TH[`${g[0]}-${m}`]=!0,this.logger.warn(`key "${i}" for languages "${g.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(y=>{if(this.isValidLookup(r))return;s=y;const v=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(v,c,y,m,n);else{let x;d&&(x=this.pluralResolver.getSuffix(y,n.count,n));const S=`${this.options.pluralSeparator}zero`,C=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(v.push(c+x),n.ordinal&&x.indexOf(C)===0&&v.push(c+x.replace(C,this.options.pluralSeparator)),h&&v.push(c+S)),p){const w=`${c}${this.options.contextSeparator}${n.context}`;v.push(w),d&&(v.push(w+x),n.ordinal&&x.indexOf(C)===0&&v.push(w+x.replace(C,this.options.pluralSeparator)),h&&v.push(w+S))}}let b;for(;b=v.pop();)this.isValidLookup(r)||(o=b,r=this.getResource(y,m,b,n))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,r,i):this.resourceStore.getResource(t,n,r,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&typeof t.replace!="string";let i=r?t.replace:t;if(r&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of n)delete i[o]}return i}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}const J3=e=>e.charAt(0).toUpperCase()+e.slice(1);class PH{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=pa.create("languageUtils")}getScriptPartFromCode(t){if(t=IC(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=IC(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=t.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=J3(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=J3(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=J3(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),i=[],o=s=>{s&&(this.isSupportedCode(s)?i.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):typeof t=="string"&&o(this.formatLanguageCode(t)),r.forEach(s=>{i.indexOf(s)<0&&o(this.formatLanguageCode(s))}),i}}let Wat=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Hat={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const qat=["v1","v2","v3"],Gat=["v4"],FH={zero:0,one:1,two:2,few:3,many:4,other:5},Yat=()=>{const e={};return Wat.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:Hat[t.fc]}})}),e};class Xat{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=pa.create("pluralResolver"),(!this.options.compatibilityJSON||Gat.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Yat(),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const r=IC(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];const s=new Intl.PluralRules(r,{type:i});return this.pluralRulesCache[o]=s,s}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(i=>`${n}${i}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,o)=>FH[i]-FH[o]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(t,i,n)):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){const r=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let i=t.numbers[r];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const o=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!qat.includes(this.options.compatibilityJSON)}}const MH=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=Lat(e,t,n);return!o&&i&&typeof n=="string"&&(o=sF(e,n,r),o===void 0&&(o=sF(t,n,r))),o},Z3=e=>e.replace(/\$/g,"$$$$");class Kat{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=pa.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:f,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:y,alwaysFormat:v}=t.interpolation;this.escape=n!==void 0?n:zat,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Fh(o):s||"{{",this.suffix=a?Fh(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?Fh(d):h||Fh("$t("),this.nestingSuffix=p?Fh(p):g||Fh(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=y||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,i){let o,s,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=h=>{if(h.indexOf(this.formatSeparator)<0){const y=MH(n,l,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...i,...n,interpolationkey:h}):y}const p=h.split(this.formatSeparator),g=p.shift().trim(),m=p.join(this.formatSeparator).trim();return this.format(MH(n,l,g,this.options.keySeparator,this.options.ignoreJSONStructure),m,r,{...i,...n,interpolationkey:g})};this.resetRegExp();const c=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>Z3(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?Z3(this.escape(h)):Z3(h)}].forEach(h=>{for(a=0;o=h.regex.exec(t);){const p=o[1].trim();if(s=u(p),s===void 0)if(typeof c=="function"){const m=c(t,o,i);s=typeof m=="string"?m:""}else if(i&&Object.prototype.hasOwnProperty.call(i,p))s="";else if(f){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${t}`),s="";else typeof s!="string"&&!this.useRawValueToEscape&&(s=kH(s));const g=h.safeValue(s);if(t=t.replace(o[0],g),f?(h.regex.lastIndex+=s.length,h.regex.lastIndex-=o[0].length):h.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,o,s;const a=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const f=l.split(new RegExp(`${c}[ ]*{`));let d=`{${f[1]}`;l=f[0],d=this.interpolate(d,s);const h=d.match(/'/g),p=d.match(/"/g);(h&&h.length%2===0&&!p||p.length%2!==0)&&(d=d.replace(/'/g,'"'));try{s=JSON.parse(d),u&&(s={...u,...s})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${c}${d}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,l};for(;i=this.nestingRegexp.exec(t);){let l=[];s={...r},s=s.replace&&typeof s.replace!="string"?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const c=i[1].split(this.formatSeparator).map(f=>f.trim());i[1]=c.shift(),l=c,u=!0}if(o=n(a.call(this,i[1].trim(),s),s),o&&i[0]===t&&typeof o!="string")return o;typeof o!="string"&&(o=kH(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),o=""),u&&(o=l.reduce((c,f)=>this.format(c,f,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),t=t.replace(i[0],o),this.regexp.lastIndex=0}return t}}const Qat=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(s=>{if(s){const[a,...l]=s.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=a.trim();n[c]||(n[c]=u),u==="false"&&(n[c]=!1),u==="true"&&(n[c]=!0),isNaN(u)||(n[c]=parseInt(u,10))}})}return{formatName:t,formatOptions:n}},Mh=e=>{const t={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const s=r+JSON.stringify(o);let a=t[s];return a||(a=e(IC(r),i),t[s]=a),a(n)}};class Jat{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=pa.create("formatter"),this.options=t,this.formats={number:Mh((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return o=>i.format(o)}),currency:Mh((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return o=>i.format(o)}),datetime:Mh((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return o=>i.format(o)}),relativetime:Mh((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return o=>i.format(o,r.range||"day")}),list:Mh((n,r)=>{const i=new Intl.ListFormat(n,{...r});return o=>i.format(o)})},this.init(t)}init(t){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=Mh(n)}format(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(l=>l.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,l)=>{const{formatName:u,formatOptions:c}=Qat(l);if(this.formats[u]){let f=a;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},h=d.locale||d.lng||i.locale||i.lng||r;f=this.formats[u](a,h,{...c,...i,...d})}catch(d){this.logger.warn(d)}return f}else this.logger.warn(`there was no format function for ${u}`);return a},t)}}const Zat=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class elt extends q_{constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=pa.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(t,n,r,i){const o={},s={},a={},l={};return t.forEach(u=>{let c=!0;n.forEach(f=>{const d=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?s[d]===void 0&&(s[d]=!0):(this.state[d]=1,c=!1,s[d]===void 0&&(s[d]=!0),o[d]===void 0&&(o[d]=!0),l[f]===void 0&&(l[f]=!0)))}),c||(a[u]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const i=t.split("|"),o=i[0],s=i[1];n&&this.emit("failedLoading",o,s,n),!n&&r&&this.store.addResourceBundle(o,s,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const a={};this.queue.forEach(l=>{Nat(l.loaded,[o],s),Zat(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});const c=l.loaded[u];c.length&&c.forEach(f=>{a[u][f]===void 0&&(a[u][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:i,wait:o,callback:s});return}this.readingCalls++;const a=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&c&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,i+1,o*2,s)},o);return}s(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(t,n);u&&typeof u.then=="function"?u.then(c=>a(null,c)).catch(a):a(null,u)}catch(u){a(u)}return}return l(t,n,a)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof n=="string"&&(n=[n]);const o=this.queueLoad(t,n,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${n}loading namespace ${o} for language ${i} failed`,s),!s&&a&&this.logger.log(`${n}loaded namespace ${o} for language ${i}`,a),this.loaded(t,s,a)})}saveMissing(t,n,r,i,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...s,isUpdate:o},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(t,n,r,i,l):c=u(t,n,r,i),c&&typeof c.then=="function"?c.then(f=>a(null,f)).catch(a):a(null,c)}catch(c){a(c)}else u(t,n,r,i,a,l)}!t||!t[0]||this.store.addResource(t[0],n,r,i)}}}const RH=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),OH=e=>(typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),Gx=()=>{},tlt=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class X1 extends q_{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=OH(t),this.services={},this.logger=pa,this.modules={external:[]},tlt(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=RH();this.options={...i,...this.options,...OH(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const o=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?pa.init(o(this.modules.logger),this.options):pa.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=Jat);const f=new PH(this.options);this.store=new AH(this.options.resources,this.options);const d=this.services;d.logger=pa,d.resourceStore=this.store,d.languageUtils=f,d.pluralResolver=new Xat(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=o(c),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new Kat(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new elt(o(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(h){for(var p=arguments.length,g=new Array(p>1?p-1:0),m=1;m<p;m++)g[m-1]=arguments[m];t.emit(h,...g)}),this.modules.languageDetector&&(d.languageDetector=o(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=o(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new zC(this.services,this.options),this.translator.on("*",function(h){for(var p=arguments.length,g=new Array(p>1?p-1:0),m=1;m<p;m++)g[m-1]=arguments[m];t.emit(h,...g)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Gx),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return t.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return t.store[c](...arguments),t}});const l=b0(),u=()=>{const c=(f,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),r(f,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gx;const i=typeof t=="string"?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(u=>{u!=="cimode"&&o.indexOf(u)<0&&o.push(u)})};i?s(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>s(l)),this.options.preload&&this.options.preload.forEach(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(t,n,r){const i=b0();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=Gx),this.services.backendConnector.reload(t,n,o=>{i.resolve(),r(o)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Jce.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const i=b0();this.emit("languageChanging",t);const o=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},s=(l,u)=>{u?(o(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||o(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{s(c,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),i}getFixedT(t,n,r){var i=this;const o=function(s,a){let l;if(typeof a!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),f=2;f<u;f++)c[f-2]=arguments[f];l=i.options.overloadTranslationOptionHandler([s,a].concat(c))}else l={...a};l.lng=l.lng||o.lng,l.lngs=l.lngs||o.lngs,l.ns=l.ns||o.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||o.keyPrefix);const d=i.options.keySeparator||".";let h;return l.keyPrefix&&Array.isArray(s)?h=s.map(p=>`${l.keyPrefix}${d}${p}`):h=l.keyPrefix?`${l.keyPrefix}${d}${s}`:s,i.t(h,l)};return typeof t=="string"?o.lng=t:o.lngs=t,o.ns=n,o.keyPrefix=r,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(a,l)=>{const u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(r,t)&&(!i||s(o,t)))}loadNamespaces(t,n){const r=b0();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=b0();typeof t=="string"&&(t=[t]);const i=this.options.preload||[],o=t.filter(s=>i.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=i.concat(o),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new PH(RH());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new X1(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gx;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},o=new X1(i);return(t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r&&(o.store=new AH(this.store.data,i),o.services.resourceStore=o.store),o.translator=new zC(o.services,i),o.translator.on("*",function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];o.emit(a,...u)}),o.init(i,n),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Tr=X1.createInstance();Tr.createInstance=X1.createInstance;Tr.createInstance;Tr.dir;Tr.init;Tr.loadResources;Tr.reloadResources;Tr.use;Tr.changeLanguage;Tr.getFixedT;const qs=Tr.t;Tr.exists;Tr.setDefaultNamespace;Tr.hasLoadedNamespace;Tr.loadNamespaces;Tr.loadLanguages;const Rh=F.memo(nlt);function nlt({label:e,children:t,...n}){return $.jsxs(Ot,{w:"full",flexDir:"row",justify:"space-between",alignItems:"center",...n,children:[$.jsx(Gn,{minW:"130px",children:e}),t]})}function rlt(){const{handleSubmit:e,loading:t,selectedDemo:n,handleDemoSelect:r}=Hit(),{loading:i}=$ce(),{t:o}=qo();return $.jsxs($.Fragment,{children:[$.jsx(XN,{size:"md",onChange:s=>r(_j.find(a=>a.name===s.target.value)??null),"data-log-change":"select-demo",placeholder:o("settings.select_demo"),variant:"outline",colorScheme:gn,icon:$.jsx(We,{as:Fce,boxSize:5}),borderRightRadius:0,children:_j.map(s=>$.jsx("option",{value:s.name,children:s.name},s.name))}),$.jsx(vs,{size:"md",borderLeftRadius:0,colorScheme:gn,type:"submit",isLoading:t||i,isDisabled:!n||i,icon:$.jsx(We,{as:Oce,boxSize:5}),"aria-label":o("settings.load_data"),onClick:e,"data-log-click":"load_demo"})]})}function ilt(e){const{python:t,handleServerButtonClick:n,handleClearLogs:r,handleShareLogs:i,handleRefreshApp:o,handleDownloadLogs:s,colorMode:a,toggleColorMode:l,locale:u,setLocale:c}=fot();return $.jsxs(id,{...e,children:[$.jsx(Rh,{label:qs("settings.load_data"),children:$.jsx(ist,{w:"full"})}),$.jsx(Rh,{label:qs("settings.load_demo"),children:$.jsx(rlt,{})}),$.jsx(L_,{my:4}),$.jsx(Rh,{label:qs("settings.set_locale"),children:$.jsxs(XN,{size:"sm",variant:"outline",value:u,"data-log-change":"select-locale",onChange:f=>{c(f.target.value)},children:[$.jsx("option",{value:"en",children:"English"}),$.jsx("option",{value:"ko",children:""})]})}),$.jsx(Rh,{label:qs("settings.set_color"),children:$.jsx(_a,{leftIcon:$.jsx(We,{as:a==="light"?Oot:$ot}),onClick:l,"data-log-click":"toggle_color_mode",size:"sm",w:"full",children:a==="light"?"Light":"Dark"})}),$.jsx(Rh,{label:qs("settings.set_backend"),children:$.jsx(_a,{leftIcon:$.jsx(We,{as:t==="server"?Sot:Rot}),onClick:()=>{n()},"data-log-click":"toggle_server",size:"sm",w:"full",children:t&&t[0].toUpperCase()+(t==null?void 0:t.slice(1))})}),$.jsx(Rh,{label:qs("settings.monitor_logs"),children:$.jsxs(Ot,{gap:2,w:"full",children:[$.jsx(vs,{"aria-label":qs("settings.refresh_app"),icon:$.jsx(We,{as:Aot,boxSize:5}),w:"full",onClick:o,"data-log-click":"refresh_app"}),$.jsx(vs,{"aria-label":qs("settings.clear_logs"),icon:$.jsx(We,{as:wot,boxSize:5}),w:"full",onClick:r,"data-log-click":"clean_logs"}),$.jsx(vs,{"aria-label":qs("settings.download_logs"),icon:$.jsx(We,{as:Cot,boxSize:5}),w:"full",onClick:s,"data-log-click":"share_logs"}),$.jsx(vs,{"aria-label":qs("settings.share_logs"),icon:$.jsx(We,{as:Mot,boxSize:5}),w:"full",onClick:i,"data-log-click":"share_logs"})]})})]})}const Zce=F.memo(ilt);function olt({tabs:e,...t}){const{tabIconSize:n,tabPanelHeight:r,scrollbarStyle:i}=Ar(),s=Qe(u=>u.fields).length>0,a=Ki(u=>u.tabIndex),l=Ki(u=>u.setTabByIndex);return $.jsxs(B_,{position:"relative",display:"flex",w:"full",defaultIndex:e.length-1,index:a>=0?a:e.length+a,onChange:l,isFitted:!0,colorScheme:gn,...t,children:[$.jsx(QN,{my:2,children:e.map(u=>$.jsxs(e9,{gap:1,as:Cs,flexDir:"column",isDisabled:!s&&!u.displayingBeforeInit,"data-log-click":`tab-${u.name}`,children:[$.jsx(We,{boxSize:n,as:u.icon}),$.jsx(Gn,{fontSize:"xs",children:u.displayName})]},`tab-${u.name}`))}),$.jsx(ZN,{flex:1,overflow:"auto",h:r,minH:r,sx:i,children:e.map(u=>$.jsx(JN,{minH:r,children:u.Panel},`tabpanel-${u.name}`))})]})}function slt({tabs:e,...t}){const{tabIconSize:n,cardColor:r,scrollbarStyle:i,cardRef:o,cardPadding:s}=Ar(),l=Qe(f=>f.fields).length>0,u=Ki(f=>f.tabIndex),c=Ki(f=>f.setTabByIndex);return $.jsxs(B_,{display:"flex",w:"full",index:u<0?e.length+u:u,onChange:c,isFitted:!0,colorScheme:gn,...t,children:[$.jsx(ZN,{overflow:"hidden",children:e.map(f=>$.jsx(JN,{children:$.jsx(Ot,{ref:o,w:"full",h:"calc(100vh - 150px)",bg:r,borderRadius:"md",flexDir:"column",sx:i,p:s,children:f.Panel})},`tabpanel-${f.name}`))}),$.jsx(Kce,{w:8}),$.jsx(QN,{my:2,children:e.filter(f=>f.name!=="settings").map(f=>$.jsxs(e9,{gap:1,as:Cs,flexDir:"column",isDisabled:!l&&!f.displayingBeforeInit,"data-log-click":`tab-${f.name}`,children:[$.jsx(We,{boxSize:n,as:f.icon}),$.jsx(Gn,{fontSize:"xs",children:f.displayName})]},`tab-${f.name}`))})]})}var gb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qg=typeof window>"u"||"Deno"in globalThis;function xo(){}function alt(e,t){return typeof e=="function"?e(t):e}function aF(e){return typeof e=="number"&&e>=0&&e!==1/0}function efe(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Rp(e,t){return typeof e=="function"?e(t):e}function ls(e,t){return typeof e=="function"?e(t):e}function DH(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(s){if(r){if(t.queryHash!==o9(s,t.options))return!1}else if(!Q1(t.queryKey,s))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||o&&!o(t))}function NH(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(K1(t.options.mutationKey)!==K1(o))return!1}else if(!Q1(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function o9(e,t){return((t==null?void 0:t.queryKeyHashFn)||K1)(e)}function K1(e){return JSON.stringify(e,(t,n)=>uF(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Q1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Q1(e[n],t[n])):!1}function tfe(e,t){if(e===t)return e;const n=LH(e)&&LH(t);if(n||uF(e)&&uF(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),s=o.length,a=n?[]:{};let l=0;for(let u=0;u<s;u++){const c=n?u:o[u];(!n&&r.includes(c)||n)&&e[c]===void 0&&t[c]===void 0?(a[c]=void 0,l++):(a[c]=tfe(e[c],t[c]),a[c]===e[c]&&e[c]!==void 0&&l++)}return i===s&&l===i?e:a}return t}function lF(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function LH(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function uF(e){if(!IH(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!IH(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function IH(e){return Object.prototype.toString.call(e)==="[object Object]"}function llt(e){return new Promise(t=>{setTimeout(t,e)})}function cF(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?tfe(e,t):t}function ult(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function clt(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var nfe=Symbol();function rfe(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===nfe?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Of,Eu,Op,lq,flt=(lq=class extends gb{constructor(){super();Fe(this,Of);Fe(this,Eu);Fe(this,Op);pe(this,Op,t=>{if(!Qg&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){j(this,Eu)||this.setEventListener(j(this,Op))}onUnsubscribe(){var t;this.hasListeners()||((t=j(this,Eu))==null||t.call(this),pe(this,Eu,void 0))}setEventListener(t){var n;pe(this,Op,t),(n=j(this,Eu))==null||n.call(this),pe(this,Eu,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){j(this,Of)!==t&&(pe(this,Of,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof j(this,Of)=="boolean"?j(this,Of):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Of=new WeakMap,Eu=new WeakMap,Op=new WeakMap,lq),s9=new flt,Dp,_u,Np,uq,dlt=(uq=class extends gb{constructor(){super();Fe(this,Dp,!0);Fe(this,_u);Fe(this,Np);pe(this,Np,t=>{if(!Qg&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){j(this,_u)||this.setEventListener(j(this,Np))}onUnsubscribe(){var t;this.hasListeners()||((t=j(this,_u))==null||t.call(this),pe(this,_u,void 0))}setEventListener(t){var n;pe(this,Np,t),(n=j(this,_u))==null||n.call(this),pe(this,_u,t(this.setOnline.bind(this)))}setOnline(t){j(this,Dp)!==t&&(pe(this,Dp,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return j(this,Dp)}},Dp=new WeakMap,_u=new WeakMap,Np=new WeakMap,uq),BC=new dlt;function hlt(e){return Math.min(1e3*2**e,3e4)}function ife(e){return(e??"online")==="online"?BC.isOnline():!0}var ofe=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function eA(e){return e instanceof ofe}function sfe(e){let t=!1,n=0,r=!1,i,o,s;const a=new Promise((y,v)=>{o=y,s=v}),l=y=>{var v;r||(p(new ofe(y)),(v=e.abort)==null||v.call(e))},u=()=>{t=!0},c=()=>{t=!1},f=()=>s9.isFocused()&&(e.networkMode==="always"||BC.isOnline())&&e.canRun(),d=()=>ife(e.networkMode)&&e.canRun(),h=y=>{var v;r||(r=!0,(v=e.onSuccess)==null||v.call(e,y),i==null||i(),o(y))},p=y=>{var v;r||(r=!0,(v=e.onError)==null||v.call(e,y),i==null||i(),s(y))},g=()=>new Promise(y=>{var v;i=b=>{(r||f())&&y(b)},(v=e.onPause)==null||v.call(e)}).then(()=>{var y;i=void 0,r||(y=e.onContinue)==null||y.call(e)}),m=()=>{if(r)return;let y;const v=n===0?e.initialPromise:void 0;try{y=v??e.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(h).catch(b=>{var k;if(r)return;const x=e.retry??(Qg?0:3),S=e.retryDelay??hlt,C=typeof S=="function"?S(n,b):S,w=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(t||!w){p(b);return}n++,(k=e.onFail)==null||k.call(e,n,b),llt(C).then(()=>f()?void 0:g()).then(()=>{t?p(b):m()})})};return{promise:a,cancel:l,continue:()=>(i==null||i(),a),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?m():g().then(m),a)}}function plt(){let e=[],t=0,n=d=>{d()},r=d=>{d()},i=d=>setTimeout(d,0);const o=d=>{i=d},s=d=>{let h;t++;try{h=d()}finally{t--,t||u()}return h},a=d=>{t?e.push(d):i(()=>{n(d)})},l=d=>(...h)=>{a(()=>{d(...h)})},u=()=>{const d=e;e=[],d.length&&i(()=>{r(()=>{d.forEach(h=>{n(h)})})})};return{batch:s,batchCalls:l,schedule:a,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:o}}var Yn=plt(),Df,cq,afe=(cq=class{constructor(){Fe(this,Df)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),aF(this.gcTime)&&pe(this,Df,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qg?1/0:5*60*1e3))}clearGcTimeout(){j(this,Df)&&(clearTimeout(j(this,Df)),pe(this,Df,void 0))}},Df=new WeakMap,cq),Lp,Ip,yo,dr,Z1,Nf,ts,el,fq,glt=(fq=class extends afe{constructor(t){super();Fe(this,ts);Fe(this,Lp);Fe(this,Ip);Fe(this,yo);Fe(this,dr);Fe(this,Z1);Fe(this,Nf);pe(this,Nf,!1),pe(this,Z1,t.defaultOptions),this.setOptions(t.options),this.observers=[],pe(this,yo,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,pe(this,Lp,mlt(this.options)),this.state=t.state??j(this,Lp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=j(this,dr))==null?void 0:t.promise}setOptions(t){this.options={...j(this,Z1),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&j(this,yo).remove(this)}setData(t,n){const r=cF(this.state.data,t,this.options);return je(this,ts,el).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){je(this,ts,el).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=j(this,dr))==null?void 0:r.promise;return(i=j(this,dr))==null||i.cancel(t),n?n.then(xo).catch(xo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(j(this,Lp))}isActive(){return this.observers.some(t=>ls(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!efe(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=j(this,dr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=j(this,dr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),j(this,yo).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(j(this,dr)&&(j(this,Nf)?j(this,dr).cancel({revert:!0}):j(this,dr).cancelRetry()),this.scheduleGc()),j(this,yo).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||je(this,ts,el).call(this,{type:"invalidate"})}fetch(t,n){var l,u,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(j(this,dr))return j(this,dr).continueRetry(),j(this,dr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(d=>d.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(pe(this,Nf,!0),r.signal)})},o=()=>{const f=rfe(this.options,n),d={queryKey:this.queryKey,meta:this.meta};return i(d),pe(this,Nf,!1),this.options.persister?this.options.persister(f,d,this):f(d)},s={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(s),(l=this.options.behavior)==null||l.onFetch(s,this),pe(this,Ip,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=s.fetchOptions)==null?void 0:u.meta))&&je(this,ts,el).call(this,{type:"fetch",meta:(c=s.fetchOptions)==null?void 0:c.meta});const a=f=>{var d,h,p,g;eA(f)&&f.silent||je(this,ts,el).call(this,{type:"error",error:f}),eA(f)||((h=(d=j(this,yo).config).onError)==null||h.call(d,f,this),(g=(p=j(this,yo).config).onSettled)==null||g.call(p,this.state.data,f,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return pe(this,dr,sfe({initialPromise:n==null?void 0:n.initialPromise,fn:s.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var d,h,p,g;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(f),(h=(d=j(this,yo).config).onSuccess)==null||h.call(d,f,this),(g=(p=j(this,yo).config).onSettled)==null||g.call(p,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(f,d)=>{je(this,ts,el).call(this,{type:"failed",failureCount:f,error:d})},onPause:()=>{je(this,ts,el).call(this,{type:"pause"})},onContinue:()=>{je(this,ts,el).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0})),j(this,dr).start()}},Lp=new WeakMap,Ip=new WeakMap,yo=new WeakMap,dr=new WeakMap,Z1=new WeakMap,Nf=new WeakMap,ts=new WeakSet,el=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...lfe(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return eA(i)&&i.revert&&j(this,Ip)?{...j(this,Ip),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Yn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),j(this,yo).notify({query:this,type:"updated",action:t})})},fq);function lfe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ife(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function mlt(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zs,dq,ylt=(dq=class extends gb{constructor(t={}){super();Fe(this,Zs);this.config=t,pe(this,Zs,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??o9(i,n);let s=this.get(o);return s||(s=new glt({cache:this,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){j(this,Zs).has(t.queryHash)||(j(this,Zs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=j(this,Zs).get(t.queryHash);n&&(t.destroy(),n===t&&j(this,Zs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Yn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return j(this,Zs).get(t)}getAll(){return[...j(this,Zs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>DH(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>DH(t,r)):n}notify(t){Yn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Yn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Yn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Zs=new WeakMap,dq),ea,Mr,Lf,ta,fu,hq,vlt=(hq=class extends afe{constructor(t){super();Fe(this,ta);Fe(this,ea);Fe(this,Mr);Fe(this,Lf);this.mutationId=t.mutationId,pe(this,Mr,t.mutationCache),pe(this,ea,[]),this.state=t.state||blt(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){j(this,ea).includes(t)||(j(this,ea).push(t),this.clearGcTimeout(),j(this,Mr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){pe(this,ea,j(this,ea).filter(n=>n!==t)),this.scheduleGc(),j(this,Mr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){j(this,ea).length||(this.state.status==="pending"?this.scheduleGc():j(this,Mr).remove(this))}continue(){var t;return((t=j(this,Lf))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,s,a,l,u,c,f,d,h,p,g,m,y,v,b,x,S,C,w;pe(this,Lf,sfe({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,E)=>{je(this,ta,fu).call(this,{type:"failed",failureCount:k,error:E})},onPause:()=>{je(this,ta,fu).call(this,{type:"pause"})},onContinue:()=>{je(this,ta,fu).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>j(this,Mr).canRun(this)}));const n=this.state.status==="pending",r=!j(this,Lf).canStart();try{if(!n){je(this,ta,fu).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(i=j(this,Mr).config).onMutate)==null?void 0:o.call(i,t,this));const E=await((a=(s=this.options).onMutate)==null?void 0:a.call(s,t));E!==this.state.context&&je(this,ta,fu).call(this,{type:"pending",context:E,variables:t,isPaused:r})}const k=await j(this,Lf).start();return await((u=(l=j(this,Mr).config).onSuccess)==null?void 0:u.call(l,k,t,this.state.context,this)),await((f=(c=this.options).onSuccess)==null?void 0:f.call(c,k,t,this.state.context)),await((h=(d=j(this,Mr).config).onSettled)==null?void 0:h.call(d,k,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,k,null,t,this.state.context)),je(this,ta,fu).call(this,{type:"success",data:k}),k}catch(k){try{throw await((y=(m=j(this,Mr).config).onError)==null?void 0:y.call(m,k,t,this.state.context,this)),await((b=(v=this.options).onError)==null?void 0:b.call(v,k,t,this.state.context)),await((S=(x=j(this,Mr).config).onSettled)==null?void 0:S.call(x,void 0,k,this.state.variables,this.state.context,this)),await((w=(C=this.options).onSettled)==null?void 0:w.call(C,void 0,k,t,this.state.context)),k}finally{je(this,ta,fu).call(this,{type:"error",error:k})}}finally{j(this,Mr).runNext(this)}}},ea=new WeakMap,Mr=new WeakMap,Lf=new WeakMap,ta=new WeakSet,fu=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Yn.batch(()=>{j(this,ea).forEach(r=>{r.onMutationUpdate(t)}),j(this,Mr).notify({mutation:this,type:"updated",action:t})})},hq);function blt(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fi,ev,pq,xlt=(pq=class extends gb{constructor(t={}){super();Fe(this,Fi);Fe(this,ev);this.config=t,pe(this,Fi,new Map),pe(this,ev,Date.now())}build(t,n,r){const i=new vlt({mutationCache:this,mutationId:++kb(this,ev)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=Yx(t),r=j(this,Fi).get(n)??[];r.push(t),j(this,Fi).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Yx(t);if(j(this,Fi).has(n)){const i=(r=j(this,Fi).get(n))==null?void 0:r.filter(o=>o!==t);i&&(i.length===0?j(this,Fi).delete(n):j(this,Fi).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=j(this,Fi).get(Yx(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=j(this,Fi).get(Yx(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Yn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...j(this,Fi).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>NH(n,r))}findAll(t={}){return this.getAll().filter(n=>NH(t,n))}notify(t){Yn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Yn.batch(()=>Promise.all(t.map(n=>n.continue().catch(xo))))}},Fi=new WeakMap,ev=new WeakMap,pq);function Yx(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function wlt(e){return{onFetch:(t,n)=>{const r=async()=>{var p,g,m,y,v;const i=t.options,o=(m=(g=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:m.direction,s=((y=t.state.data)==null?void 0:y.pages)||[],a=((v=t.state.data)==null?void 0:v.pageParams)||[],l={pages:[],pageParams:[]};let u=!1;const c=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},f=rfe(t.options,t.fetchOptions),d=async(b,x,S)=>{if(u)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const C={queryKey:t.queryKey,pageParam:x,direction:S?"backward":"forward",meta:t.options.meta};c(C);const w=await f(C),{maxPages:k}=t.options,E=S?clt:ult;return{pages:E(b.pages,w,k),pageParams:E(b.pageParams,x,k)}};let h;if(o&&s.length){const b=o==="backward",x=b?Slt:zH,S={pages:s,pageParams:a},C=x(i,S);h=await d(S,C,b)}else{h=await d(l,a[0]??i.initialPageParam);const b=e??s.length;for(let x=1;x<b;x++){const S=zH(i,h);if(S==null)break;h=await d(h,S)}}return h};t.options.persister?t.fetchFn=()=>{var i,o;return(o=(i=t.options).persister)==null?void 0:o.call(i,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function zH(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Slt(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Yt,$u,Au,zp,Bp,Tu,jp,Up,gq,Clt=(gq=class{constructor(e={}){Fe(this,Yt);Fe(this,$u);Fe(this,Au);Fe(this,zp);Fe(this,Bp);Fe(this,Tu);Fe(this,jp);Fe(this,Up);pe(this,Yt,e.queryCache||new ylt),pe(this,$u,e.mutationCache||new xlt),pe(this,Au,e.defaultOptions||{}),pe(this,zp,new Map),pe(this,Bp,new Map),pe(this,Tu,0)}mount(){kb(this,Tu)._++,j(this,Tu)===1&&(pe(this,jp,s9.subscribe(async e=>{e&&(await this.resumePausedMutations(),j(this,Yt).onFocus())})),pe(this,Up,BC.subscribe(async e=>{e&&(await this.resumePausedMutations(),j(this,Yt).onOnline())})))}unmount(){var e,t;kb(this,Tu)._--,j(this,Tu)===0&&((e=j(this,jp))==null||e.call(this),pe(this,jp,void 0),(t=j(this,Up))==null||t.call(this),pe(this,Up,void 0))}isFetching(e){return j(this,Yt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return j(this,$u).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=j(this,Yt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=j(this,Yt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Rp(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return j(this,Yt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=j(this,Yt).get(r.queryHash),o=i==null?void 0:i.state.data,s=alt(t,o);if(s!==void 0)return j(this,Yt).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return Yn.batch(()=>j(this,Yt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=j(this,Yt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=j(this,Yt);Yn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=j(this,Yt),r={type:"active",...e};return Yn.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Yn.batch(()=>j(this,Yt).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(xo).catch(xo)}invalidateQueries(e={},t={}){return Yn.batch(()=>{if(j(this,Yt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Yn.batch(()=>j(this,Yt).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(xo)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(xo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=j(this,Yt).build(this,t);return n.isStaleByTime(Rp(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(xo).catch(xo)}fetchInfiniteQuery(e){return e.behavior=wlt(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(xo).catch(xo)}resumePausedMutations(){return BC.isOnline()?j(this,$u).resumePausedMutations():Promise.resolve()}getQueryCache(){return j(this,Yt)}getMutationCache(){return j(this,$u)}getDefaultOptions(){return j(this,Au)}setDefaultOptions(e){pe(this,Au,e)}setQueryDefaults(e,t){j(this,zp).set(K1(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...j(this,zp).values()];let n={};return t.forEach(r=>{Q1(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){j(this,Bp).set(K1(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...j(this,Bp).values()];let n={};return t.forEach(r=>{Q1(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...j(this,Au).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=o9(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===nfe&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...j(this,Au).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){j(this,Yt).clear(),j(this,$u).clear()}},Yt=new WeakMap,$u=new WeakMap,Au=new WeakMap,zp=new WeakMap,Bp=new WeakMap,Tu=new WeakMap,jp=new WeakMap,Up=new WeakMap,gq),oi,Ue,tv,Rr,If,Vp,na,nv,Wp,Hp,zf,Bf,Pu,qp,ft,oy,fF,dF,hF,pF,gF,mF,yF,ufe,mq,klt=(mq=class extends gb{constructor(t,n){super();Fe(this,ft);Fe(this,oi);Fe(this,Ue);Fe(this,tv);Fe(this,Rr);Fe(this,If);Fe(this,Vp);Fe(this,na);Fe(this,nv);Fe(this,Wp);Fe(this,Hp);Fe(this,zf);Fe(this,Bf);Fe(this,Pu);Fe(this,qp,new Set);this.options=n,pe(this,oi,t),pe(this,na,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(j(this,Ue).addObserver(this),BH(j(this,Ue),this.options)?je(this,ft,oy).call(this):this.updateResult(),je(this,ft,pF).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return vF(j(this,Ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return vF(j(this,Ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,je(this,ft,gF).call(this),je(this,ft,mF).call(this),j(this,Ue).removeObserver(this)}setOptions(t,n){const r=this.options,i=j(this,Ue);if(this.options=j(this,oi).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ls(this.options.enabled,j(this,Ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");je(this,ft,yF).call(this),j(this,Ue).setOptions(this.options),r._defaulted&&!lF(this.options,r)&&j(this,oi).getQueryCache().notify({type:"observerOptionsUpdated",query:j(this,Ue),observer:this});const o=this.hasListeners();o&&jH(j(this,Ue),i,this.options,r)&&je(this,ft,oy).call(this),this.updateResult(n),o&&(j(this,Ue)!==i||ls(this.options.enabled,j(this,Ue))!==ls(r.enabled,j(this,Ue))||Rp(this.options.staleTime,j(this,Ue))!==Rp(r.staleTime,j(this,Ue)))&&je(this,ft,fF).call(this);const s=je(this,ft,dF).call(this);o&&(j(this,Ue)!==i||ls(this.options.enabled,j(this,Ue))!==ls(r.enabled,j(this,Ue))||s!==j(this,Pu))&&je(this,ft,hF).call(this,s)}getOptimisticResult(t){const n=j(this,oi).getQueryCache().build(j(this,oi),t),r=this.createResult(n,t);return _lt(this,r)&&(pe(this,Rr,r),pe(this,Vp,this.options),pe(this,If,j(this,Ue).state)),r}getCurrentResult(){return j(this,Rr)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){j(this,qp).add(t)}getCurrentQuery(){return j(this,Ue)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=j(this,oi).defaultQueryOptions(t),r=j(this,oi).getQueryCache().build(j(this,oi),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return je(this,ft,oy).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),j(this,Rr)))}createResult(t,n){var w;const r=j(this,Ue),i=this.options,o=j(this,Rr),s=j(this,If),a=j(this,Vp),u=t!==r?t.state:j(this,tv),{state:c}=t;let f={...c},d=!1,h;if(n._optimisticResults){const k=this.hasListeners(),E=!k&&BH(t,n),A=k&&jH(t,r,n,i);(E||A)&&(f={...f,...lfe(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:m}=f;if(n.select&&f.data!==void 0)if(o&&f.data===(s==null?void 0:s.data)&&n.select===j(this,nv))h=j(this,Wp);else try{pe(this,nv,n.select),h=n.select(f.data),h=cF(o==null?void 0:o.data,h,n),pe(this,Wp,h),pe(this,na,null)}catch(k){pe(this,na,k)}else h=f.data;if(n.placeholderData!==void 0&&h===void 0&&m==="pending"){let k;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))k=o.data;else if(k=typeof n.placeholderData=="function"?n.placeholderData((w=j(this,Hp))==null?void 0:w.state.data,j(this,Hp)):n.placeholderData,n.select&&k!==void 0)try{k=n.select(k),pe(this,na,null)}catch(E){pe(this,na,E)}k!==void 0&&(m="success",h=cF(o==null?void 0:o.data,k,n),d=!0)}j(this,na)&&(p=j(this,na),h=j(this,Wp),g=Date.now(),m="error");const y=f.fetchStatus==="fetching",v=m==="pending",b=m==="error",x=v&&y,S=h!==void 0;return{status:m,fetchStatus:f.fetchStatus,isPending:v,isSuccess:m==="success",isError:b,isInitialLoading:x,isLoading:x,data:h,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:b&&!S,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:b&&S,isStale:a9(t,n),refetch:this.refetch}}updateResult(t){const n=j(this,Rr),r=this.createResult(j(this,Ue),this.options);if(pe(this,If,j(this,Ue).state),pe(this,Vp,this.options),j(this,If).data!==void 0&&pe(this,Hp,j(this,Ue)),lF(r,n))return;pe(this,Rr,r);const i={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!j(this,qp).size)return!0;const l=new Set(a??j(this,qp));return this.options.throwOnError&&l.add("error"),Object.keys(j(this,Rr)).some(u=>{const c=u;return j(this,Rr)[c]!==n[c]&&l.has(c)})};(t==null?void 0:t.listeners)!==!1&&o()&&(i.listeners=!0),je(this,ft,ufe).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&je(this,ft,pF).call(this)}},oi=new WeakMap,Ue=new WeakMap,tv=new WeakMap,Rr=new WeakMap,If=new WeakMap,Vp=new WeakMap,na=new WeakMap,nv=new WeakMap,Wp=new WeakMap,Hp=new WeakMap,zf=new WeakMap,Bf=new WeakMap,Pu=new WeakMap,qp=new WeakMap,ft=new WeakSet,oy=function(t){je(this,ft,yF).call(this);let n=j(this,Ue).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(xo)),n},fF=function(){je(this,ft,gF).call(this);const t=Rp(this.options.staleTime,j(this,Ue));if(Qg||j(this,Rr).isStale||!aF(t))return;const r=efe(j(this,Rr).dataUpdatedAt,t)+1;pe(this,zf,setTimeout(()=>{j(this,Rr).isStale||this.updateResult()},r))},dF=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(j(this,Ue)):this.options.refetchInterval)??!1},hF=function(t){je(this,ft,mF).call(this),pe(this,Pu,t),!(Qg||ls(this.options.enabled,j(this,Ue))===!1||!aF(j(this,Pu))||j(this,Pu)===0)&&pe(this,Bf,setInterval(()=>{(this.options.refetchIntervalInBackground||s9.isFocused())&&je(this,ft,oy).call(this)},j(this,Pu)))},pF=function(){je(this,ft,fF).call(this),je(this,ft,hF).call(this,je(this,ft,dF).call(this))},gF=function(){j(this,zf)&&(clearTimeout(j(this,zf)),pe(this,zf,void 0))},mF=function(){j(this,Bf)&&(clearInterval(j(this,Bf)),pe(this,Bf,void 0))},yF=function(){const t=j(this,oi).getQueryCache().build(j(this,oi),this.options);if(t===j(this,Ue))return;const n=j(this,Ue);pe(this,Ue,t),pe(this,tv,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},ufe=function(t){Yn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(j(this,Rr))}),j(this,oi).getQueryCache().notify({query:j(this,Ue),type:"observerResultsUpdated"})})},mq);function Elt(e,t){return ls(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function BH(e,t){return Elt(e,t)||e.state.data!==void 0&&vF(e,t,t.refetchOnMount)}function vF(e,t,n){if(ls(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&a9(e,t)}return!1}function jH(e,t,n,r){return(e!==t||ls(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&a9(e,n)}function a9(e,t){return ls(t.enabled,e)!==!1&&e.isStaleByTime(Rp(t.staleTime,e))}function _lt(e,t){return!lF(e.getCurrentResult(),t)}var cfe=F.createContext(void 0),$lt=e=>{const t=F.useContext(cfe);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Alt=({client:e,children:t})=>(F.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),$.jsx(cfe.Provider,{value:e,children:t})),ffe=F.createContext(!1),Tlt=()=>F.useContext(ffe);ffe.Provider;function Plt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Flt=F.createContext(Plt()),Mlt=()=>F.useContext(Flt);function Rlt(e,t){return typeof e=="function"?e(...t):!!e}var Olt=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Dlt=e=>{F.useEffect(()=>{e.clearReset()},[e])},Nlt=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Rlt(n,[e.error,r]),Llt=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Ilt=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,zlt=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Blt(e,t,n){var u,c,f,d;const r=$lt(),i=Tlt(),o=Mlt(),s=r.defaultQueryOptions(e);(c=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||c.call(u,s),s._optimisticResults=i?"isRestoring":"optimistic",Llt(s),Olt(s,o),Dlt(o);const[a]=F.useState(()=>new t(r,s)),l=a.getOptimisticResult(s);if(F.useSyncExternalStore(F.useCallback(h=>{const p=i?()=>{}:a.subscribe(Yn.batchCalls(h));return a.updateResult(),p},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),F.useEffect(()=>{a.setOptions(s,{listeners:!1})},[s,a]),Ilt(s,l))throw zlt(s,a,o);if(Nlt({result:l,errorResetBoundary:o,throwOnError:s.throwOnError,query:r.getQueryCache().get(s.queryHash)}))throw l.error;return(d=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||d.call(f,s,l),s.notifyOnChangeProps?l:a.trackResult(l)}function jlt(e,t){return Blt(e,klt)}function Ult(){const e=Qe(p=>p.appendChart),t=xc(p=>p.data),n=xc(p=>p.filename),r=Qe(p=>p.fields),i=Ki(p=>p.searchTargetFieldNames),o=Ki(p=>p.setSearchTargetFieldNames),s=Ki(p=>p.setTabByName),{mobile:a}=Ar(),{data:l=[],isLoading:u}=jlt({queryKey:["getCharts",n,...i.sort()],queryFn:async()=>i.length===0||!t?[]:await Di.call("getCharts",{fieldNames:i})??[]}),c=p=>{i.includes(p.name)?o(g=>g.filter(m=>m!==p.name)):i.length<3&&o(g=>[...g,p.name])},f=F.useMemo(()=>Array.from(r).filter(p=>p.type!=="name").sort(Kge),[r]),d=F.useCallback(p=>i.includes(p.name),[i]),h=F.useCallback(p=>{e(p).then(()=>{a&&s("charts"),o([])})},[e,a,o,s]);return{loading:u,queriedCharts:l,handleFieldClick:c,handleChartClick:h,fields:f,isSelected:d,selectedFields:i}}const Vlt=({count:e=5,thumbnailSize:t})=>Array.from({length:e}).map((n,r)=>$.jsxs(YN,{children:[$.jsxs(Ot,{gap:4,p:1,align:"center",children:[$.jsx(KN,{height:`${t-8}px`,width:`${t-8}px`,borderRadius:"md"}),$.jsx(Ot,{flexDir:"column",flex:"1",gap:2,children:$.jsx(dce,{noOfLines:2,spacing:2,skeletonHeight:4,width:`calc(100% - ${t-16})`})})]}),$.jsx(L_,{my:1})]},`skeleton-${r}`));function dfe({thumbnailSize:e=80,tagSize:t="lg",...n}){const{scrollbarStyle:r}=Ar(),{isSelected:i,loading:o,queriedCharts:s,handleFieldClick:a,handleChartClick:l,fields:u,selectedFields:c}=Ult(),{t:f}=qo();return $.jsxs(Ot,{flexDir:"column",w:"full",h:"full",justify:"space-between",gap:4,...n,children:[o?$.jsx(TC,{m:0,p:0,width:"full",overflowY:"scroll",sx:r,flex:"1 1 auto",children:$.jsx(Vlt,{thumbnailSize:e,count:c.length===3?3:1})}):s.length===0&&c.length===0?$.jsxs(Cs,{w:"full",h:"full",flexDir:"column",gap:8,px:8,children:[$.jsx(We,{boxSize:16,as:Rce}),$.jsx(Yg,{maxW:240,fontSize:24,fontWeight:600,textAlign:"center",children:f("search.empty")})]}):s.length===0&&c.length!==0?$.jsxs(Cs,{w:"full",h:"full",flexDir:"column",gap:8,px:8,children:[$.jsx(We,{boxSize:16,as:Fot}),$.jsx(Yg,{fontSize:24,fontWeight:600,textAlign:"center",maxW:280,children:f("search.no-results")})]}):$.jsx(TC,{m:0,p:0,width:"full",overflowY:"scroll",sx:r,flex:"1 1 auto",children:s.map(d=>$.jsx(Bce,{thumbnailSize:e,chart:d,logClick:`append_discovered_chart-${d.title}`,handleClick:()=>{l(d)}},`discovered-chart-${d.key}-${d.timestamp}`))}),$.jsx(Cs,{flexWrap:"wrap",gap:3,h:"fit-content",flex:"0 0 auto",children:u.map(d=>$.jsx(rst,{selected:i(d),field:d,size:t,variant:i(d)?"solid":"outline",onClick:()=>a(d),"data-log-click":`search_tag-${d.name}`,opacity:i(d)?1:c.length===3?.2:1,transition:"all 0.1s ease-in-out"},`discover-badge-${d.name}`))})]})}function Wlt(){const e=Qe(s=>s.charts),{mobile:t}=Ar(),n=Ki(s=>s.setTabByName),r=e.filter(s=>s.preferred),i=Qe(s=>s.setCurrentChartIndex);return{preferredCharts:r,handleClickChart:s=>{const a=e.findIndex(l=>l===s);t&&n("charts"),setTimeout(()=>{i(a)},150)}}}function hfe({thumbnailSize:e,...t}){const{preferredCharts:n,handleClickChart:r}=Wlt(),{t:i}=qo();return $.jsx(Ot,{w:"full",h:"full",...t,children:n.length?$.jsx(TC,{m:0,p:0,width:"full",overflowY:"auto",children:n.map(o=>$.jsx(Bce,{thumbnailSize:e,chart:o,logClick:`move_to_preferred_chart-${o.title}`,handleClick:r},`bookmark-${o.key}`))}):$.jsxs(Cs,{w:"full",flexDir:"column",gap:8,children:[$.jsx(We,{boxSize:16,as:Tot}),$.jsx(Yg,{fontWeight:600,children:i("bookmarks.empty")})]})})}function Hlt(){const e=Qe(d=>d.charts),t=Qe(d=>d.currentChartIndex),n=Qe(d=>d.appendNextChart),r=Qe(d=>d.setCurrentChartIndex),i=Qe(d=>d.setCurrentChartPreferred),o=F.useRef(null),s=H_(),{cardInnerHeight:a}=Ar(),l=F.useRef(!1),u=F.useCallback(dot(()=>{l.current=!1},50),[t,e,n]),c=F.useCallback(d=>{if(!d||l.current)return;l.current=!0;const h=Math.floor((d.scrollTop+a*.5)/a)-1;r(h),h===e.length-1&&n(),u()},[n,a,e.length,r,u]),f=F.useCallback(d=>{var h;l.current||(l.current=!0,(h=o.current)==null||h.scrollTo({top:(d+1)*a,behavior:"smooth"}),setTimeout(()=>{l.current=!1},500))},[a]);return F.useEffect(()=>{const d=()=>{var h;(h=o.current)!=null&&h.clientHeight||!l.current?f(t):requestAnimationFrame(d)};requestAnimationFrame(d)},[t,f]),F.useEffect(()=>{const d={ArrowUp:()=>f(t-1),ArrowDown:()=>f(t+1),Enter:()=>i(!e[t].preferred)},h=p=>{const g=d[p.key];g&&(p.preventDefault(),s.log("chart_container","keydown",{key:p.key.toLowerCase().replace("arrow","")}),g())};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[t,e,i,s,f]),{charts:e,currentChartIndex:t,ref:o,scrollContainerCallback:c}}const qlt=nh`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,Glt=nh`
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
`;function pfe(e){const{cardColor:t,cardInnerHeight:n,cardInnerWidth:r}=Ar(),{charts:i,ref:o,scrollContainerCallback:s}=Hlt();return $.jsxs(Ot,{ref:o,onScroll:a=>s(a.currentTarget),"data-log-scroll":"chart_container",scrollSnapType:"y mandatory",flexDir:"column",borderRadius:"lg",bgColor:t,overflowX:"hidden",fade:`${qlt} 0.2s ease-in-out`,style:{WebkitOverflowScrolling:"touch"},sx:{"&.removing":{animation:`${Glt} 0.1s ease-in-out forwards`},"&::-webkit-scrollbar":{display:"none"}},...e,children:[$.jsx(Fat,{position:"absolute",bottom:"72px"}),$.jsx(Hce,{flexDir:"column",minW:"full",minH:n,maxH:n,scrollSnapStop:"always",scrollSnapAlign:"start"}),i.map(a=>$.jsx(tst,{minH:n,maxH:n,w:r,chart:a,flexDirection:"column",borderRadius:"lg",scrollSnapStop:"always",scrollSnapAlign:"start"},`chart-${a.key}-${a.timestamp}`))]})}const Ylt=F.memo(Xlt);function Xlt(){const{accentColor:e}=Ar(),t=Ki(o=>o.tabIndex),n=Ki(o=>o.setTabByName),{t:r}=qo(),i=Qe(o=>o.fields);return $.jsxs(Ot,{w:"full",justifyContent:"space-between",alignItems:"center",px:2,pb:1,children:[t!==-1?$.jsxs(Ot,{alignItems:"center",h:"full",gap:1,children:[$.jsx(We,{as:Dce,boxSize:7}),$.jsx(Yg,{size:"md",children:"Swipytics"})]}):$.jsx(Ot,{}),$.jsx(vs,{variant:"ghost",padding:0,isDisabled:i.length===0,color:t===-1?e:void 0,icon:$.jsx(We,{as:i9,boxSize:6}),"aria-label":r("settings.title"),"data-log-click":"settings_button",onClick:()=>{n(t===-1?"charts":"settings")}})]})}function Klt(){const{t:e}=qo();return $.jsxs(Ot,{px:2,w:"100dvw",h:"100dvh",gap:2,flexDir:"column",position:"relative",children:[$.jsx(Ylt,{}),$.jsx(slt,{flexDir:"column",variant:"soft-rounded",tabs:[{name:"charts",displayName:e("charts.title"),icon:bot,Panel:$.jsx(pfe,{}),displayingBeforeInit:!1},{name:"search",displayName:e("search.title"),icon:Pot,Panel:$.jsx(dfe,{tagSize:"md"}),displayingBeforeInit:!1},{name:"likes",displayName:e("bookmarks.title"),icon:r9,Panel:$.jsx(hfe,{thumbnailSize:100}),displayingBeforeInit:!1},{name:"settings",displayName:e("settings.title"),icon:i9,Panel:$.jsxs(Ot,{flexDir:"column",justify:"space-between",h:"full",children:[$.jsx(Hce,{h:"full"}),$.jsx(N_,{}),$.jsx(Zce,{align:"start"})]}),displayingBeforeInit:!0}]})]})}function Qlt(){const{cardHeight:e,cardColor:t,cardWidth:n,borderColor:r,tabPanelHeight:i}=Ar(),{t:o}=qo();return $.jsxs(Ot,{minW:"container.xl",maxH:e,gap:4,flexDir:"row",children:[$.jsxs(Ot,{position:"relative",w:n,h:e,children:[$.jsx(pfe,{w:"full",h:"full",gap:4}),$.jsx(Kce,{left:2,w:8})]}),$.jsxs(Ot,{position:"relative",borderTop:"none",borderColor:r,px:4,py:2,flexDir:"column",bgColor:t,borderRadius:"lg",w:"sm",minW:"sm",children:[$.jsx(olt,{flexDir:"column",variant:"line",tabs:[{name:"search",displayName:o("search.title"),icon:Rce,Panel:$.jsx(dfe,{tagSize:"md",h:i,pb:4,thumbnailSize:80}),displayingBeforeInit:!1},{name:"likes",displayName:o("bookmarks.title"),icon:r9,Panel:$.jsx(hfe,{h:i,thumbnailSize:100}),displayingBeforeInit:!1},{name:"settings",displayName:o("settings.title"),icon:i9,Panel:$.jsx(Zce,{h:i,align:"start",py:4}),displayingBeforeInit:!0}]}),$.jsx(N_,{}),$.jsx(nst,{spacing:2,w:"full"})]})]})}function Jlt(){const{mobile:e}=Ar();return hot(),e?$.jsx(Klt,{}):$.jsx(Qlt,{})}const Zlt=WQe({initialColorMode:"dark",useSystemColorMode:!0,components:{Button:{defaultProps:{size:"sm"}},Input:{defaultProps:{size:"sm",focusBorderColor:Bu[200]},baseStyle:{field:{_focusVisible:{borderColor:Bu[200]}}}},Select:{defaultProps:{size:"sm",focusBorderColor:Bu[200]}},Tabs:{parts:["tabpanel"],baseStyle:{tabpanel:{p:0}}},Card:{baseStyle:e=>({container:{bg:e.colorMode==="light"?"white":"gray.900"}})}},styles:{global:e=>({body:{height:"100dvh",overflow:"smooth",overscrollBehavior:"none",bg:e.colorMode==="light"?"gray.100":"gray.800"},html:{height:"100dvh",overflow:"smooth",overscrollBehavior:"none",overflowY:"overlay",focusBorderColor:Bu[200]}})}});var gfe,UH=aN;gfe=UH.createRoot,UH.hydrateRoot;const bF=(e,t)=>t.some(n=>e instanceof n);let VH,WH;function eut(){return VH||(VH=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tut(){return WH||(WH=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xF=new WeakMap,tA=new WeakMap,G_=new WeakMap;function nut(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(sd(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return G_.set(t,e),t}function rut(e){if(xF.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});xF.set(e,t)}let wF={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return xF.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sd(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function mfe(e){wF=e(wF)}function iut(e){return tut().includes(e)?function(...t){return e.apply(SF(this),t),sd(this.request)}:function(...t){return sd(e.apply(SF(this),t))}}function out(e){return typeof e=="function"?iut(e):(e instanceof IDBTransaction&&rut(e),bF(e,eut())?new Proxy(e,wF):e)}function sd(e){if(e instanceof IDBRequest)return nut(e);if(tA.has(e))return tA.get(e);const t=out(e);return t!==e&&(tA.set(e,t),G_.set(t,e)),t}const SF=e=>G_.get(e);function sut(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=sd(s);return r&&s.addEventListener("upgradeneeded",l=>{r(sd(s.result),l.oldVersion,l.newVersion,sd(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const aut=["get","getKey","getAll","getAllKeys","count"],lut=["put","add","delete","clear"],nA=new Map;function HH(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(nA.get(t))return nA.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=lut.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aut.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return nA.set(t,o),o}mfe(e=>({...e,get:(t,n,r)=>HH(t,n)||e.get(t,n,r),has:(t,n)=>!!HH(t,n)||e.has(t,n)}));const uut=["continue","continuePrimaryKey","advance"],qH={},CF=new WeakMap,yfe=new WeakMap,cut={get(e,t){if(!uut.includes(t))return e[t];let n=qH[t];return n||(n=qH[t]=function(...r){CF.set(this,yfe.get(this)[t](...r))}),n}};async function*fut(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,cut);for(yfe.set(n,t),G_.set(n,SF(t));t;)yield n,t=await(CF.get(n)||t.continue()),CF.delete(n)}function GH(e,t){return t===Symbol.asyncIterator&&bF(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&bF(e,[IDBIndex,IDBObjectStore])}mfe(e=>({...e,get(t,n,r){return GH(t,n)?fut:e.get(t,n,r)},has(t,n){return GH(t,n)||e.has(t,n)}}));const dut=e=>sut(e,1,{upgrade:t=>{t.objectStoreNames.contains(e)||t.createObjectStore(e,{keyPath:"timestamp"})}}),jC=()=>new Map,vfe=e=>{const t=localStorage.getItem(e)??"[]";try{const n=JSON.parse(t);return new Map(n)}catch(n){return console.error("Failed to parse existing logs:",n),localStorage.removeItem(e),jC()}},YH=(e,t,n,r)=>{const i=vfe(e);i.set(t,{...n,timestamp:t,version:r}),localStorage.setItem(e,JSON.stringify(Array.from(i.entries())))},hut=async(e,t)=>{try{const n=e.transaction(t,"readonly"),r=n.objectStore(t),i=jC(),o=await r.getAll();return await n.done,o.forEach(s=>{s.timestamp!==void 0&&i.set(s.timestamp,s)}),i}catch(n){return console.error("IndexedDB read error:",n),jC()}},put=(e,t,n,r,i)=>{e.transaction(t,"readwrite").objectStore(t).add({timestamp:n,...r,version:i})},XH=async(e,t)=>{const n=e?await hut(e,t):jC(),r=vfe(t),i=new Map([...n,...r]);return Array.from(i.entries()).map(([o,s])=>({...s,timestamp:o})).sort((o,s)=>o.timestamp-s.timestamp)};class gut{constructor(t="logs",n="json",r=1,i="logger"){ie(this,"indexedDB",null);ie(this,"eventListeners",{});ie(this,"scrollLogged",!1);ie(this,"logFileName");ie(this,"logFileFormat");ie(this,"logVersion");ie(this,"storageKey");ie(this,"saveLog",(t,n)=>{if(!this.indexedDB){console.warn("IndexedDB is not initialized."),YH(this.storageKey,t,n,this.logVersion);return}try{put(this.indexedDB,this.storageKey,t,n,this.logVersion)}catch(r){console.error("Failed to save log to IndexedDB:",r),YH(this.storageKey,t,n,this.logVersion)}});ie(this,"createEventListener",(t,n)=>r=>{if(r.type!==t)return;const o=r.target.closest(`[data-log-${t}]`);if(!o)return;const s=o.getAttribute(`data-log-${t}`);if(typeof s=="string"){if(t==="scroll"){if(this.scrollLogged)return;this.scrollLogged=!0}else this.scrollLogged=!1;if(n){this.saveLog(Date.now(),{key:s,event:t,data:n()});return}else this.saveLog(Date.now(),{key:s,event:t})}});ie(this,"registerEvent",(t,n,r)=>(n.forEach(i=>{this.eventListeners[i]||(this.eventListeners[i]=this.createEventListener(i,r)),i==="scroll"?t.addEventListener(i,this.eventListeners[i],{capture:!0}):t.addEventListener(i,this.eventListeners[i])}),()=>{this.detachEvent(t,n)}));ie(this,"detachEvent",(t,n)=>{n.forEach(r=>{this.eventListeners[r]&&(r==="scroll"?t.removeEventListener(r,this.eventListeners[r],{capture:!0}):t.removeEventListener(r,this.eventListeners[r]))})});ie(this,"export",async()=>{this.indexedDB||console.warn("IndexedDB is not initialized.");const t=await XH(this.indexedDB,this.storageKey),n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=this.getTimestampedFileName(),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)});ie(this,"share",async()=>{try{if(!navigator.share){console.warn("Web Share API is not supported in this browser"),await this.export();return}this.indexedDB||console.warn("IndexedDB is not initialized.");const t=await XH(this.indexedDB,this.storageKey),n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=new File([n],this.getTimestampedFileName(),{type:"application/json"});await navigator.share({title:`${this.logFileName} - Logs`,files:[r]})}catch(t){console.error("Failed to share logs:",t)}});ie(this,"registerLogger",(t=[],n=window)=>(this.initializeDB().then(()=>{this.registerEvent(n,t)}),()=>{this.detachEvent(n,t)}));this.logFileName=t,this.logFileFormat=n,this.logVersion=r,this.storageKey=i,this.initializeDB()}getTimestampedFileName(){const t=new Date,n=t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0")+t.getHours().toString().padStart(2,"0")+t.getMinutes().toString().padStart(2,"0");return`${this.logFileName}-${n}.${this.logFileFormat}`}async initializeDB(){try{this.indexedDB=await dut(this.storageKey)}catch(t){console.warn("Failed to connect to IndexedDB:",t)}}log(t,n,r){this.saveLog(Date.now(),{key:t,event:n,data:r}),n!=="scroll"&&(this.scrollLogged=!1)}async clearLogs(){try{if(!this.indexedDB){console.warn("IndexedDB is not initialized."),localStorage.removeItem(this.storageKey);return}await this.indexedDB.transaction(this.storageKey,"readwrite").objectStore(this.storageKey).clear(),localStorage.removeItem(this.storageKey),console.log("Logs cleared successfully")}catch(t){throw console.error("Failed to clear logs:",t),t}}}const{slice:mut,forEach:yut}=[];function vut(e){return yut.call(mut.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}const KH=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,but=(e,t,n)=>{const r=n||{};r.path=r.path||"/";const i=encodeURIComponent(t);let o=`${e}=${i}`;if(r.maxAge>0){const s=r.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(r.domain){if(!KH.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!KH.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o},QH={create(e,t,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=but(e,encodeURIComponent(t),i)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove(e){this.create(e,"",-1)}};var xut={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return QH.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=t;n&&typeof document<"u"&&QH.create(n,e,r,i,o)}},wut={name:"querystring",lookup(e){var r;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const s=i.substring(1).split("&");for(let a=0;a<s.length;a++){const l=s[a].indexOf("=");l>0&&s[a].substring(0,l)===t&&(n=s[a].substring(l+1))}}return n}};let x0=null;const JH=()=>{if(x0!==null)return x0;try{x0=window!=="undefined"&&window.localStorage!==null;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{x0=!1}return x0};var Sut={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&JH())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&JH()&&window.localStorage.setItem(n,e)}};let w0=null;const ZH=()=>{if(w0!==null)return w0;try{w0=window!=="undefined"&&window.sessionStorage!==null;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{w0=!1}return w0};var Cut={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&ZH())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&ZH()&&window.sessionStorage.setItem(n,e)}},kut={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let o=0;o<n.length;o++)t.push(n[o]);r&&t.push(r),i&&t.push(i)}return t.length>0?t:void 0}},Eut={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const r=t||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},_ut={name:"path",lookup(e){var i;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof t=="number"?t:0])==null?void 0:i.replace("/",""):void 0}},$ut={name:"subdomain",lookup(e){var i,o;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,r=typeof window<"u"&&((o=(i=window.location)==null?void 0:i.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};function Aut(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}}class bfe{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=vut(n,this.options||{},Aut()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(xut),this.addDetector(wut),this.addDetector(Sut),this.addDetector(Cut),this.addDetector(kut),this.addDetector(Eut),this.addDetector(_ut),this.addDetector($ut)}addDetector(t){return this.detectors[t.name]=t,this}detect(t){t||(t=this.options.order);let n=[];return t.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(t,this.options)}))}}bfe.type="languageDetector";function kF(e){"@babel/helpers - typeof";return kF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kF(e)}function xfe(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":kF(XMLHttpRequest))==="object"}function Tut(e){return!!e&&typeof e.then=="function"}function Put(e){return Tut(e)?e:Promise.resolve(e)}function Fut(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var EF={exports:{}},Xx={exports:{}},eq;function Mut(){return eq||(eq=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Li<"u"&&Li,r=function(){function o(){this.fetch=!1,this.DOMException=n.DOMException}return o.prototype=n,new o}();(function(o){(function(s){var a=typeof o<"u"&&o||typeof self<"u"&&self||typeof a<"u"&&a,l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(_){return _&&DataView.prototype.isPrototypeOf(_)}if(l.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(_){return _&&c.indexOf(Object.prototype.toString.call(_))>-1};function d(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(_)||_==="")throw new TypeError('Invalid character in header field name: "'+_+'"');return _.toLowerCase()}function h(_){return typeof _!="string"&&(_=String(_)),_}function p(_){var T={next:function(){var N=_.shift();return{done:N===void 0,value:N}}};return l.iterable&&(T[Symbol.iterator]=function(){return T}),T}function g(_){this.map={},_ instanceof g?_.forEach(function(T,N){this.append(N,T)},this):Array.isArray(_)?_.forEach(function(T){this.append(T[0],T[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(T){this.append(T,_[T])},this)}g.prototype.append=function(_,T){_=d(_),T=h(T);var N=this.map[_];this.map[_]=N?N+", "+T:T},g.prototype.delete=function(_){delete this.map[d(_)]},g.prototype.get=function(_){return _=d(_),this.has(_)?this.map[_]:null},g.prototype.has=function(_){return this.map.hasOwnProperty(d(_))},g.prototype.set=function(_,T){this.map[d(_)]=h(T)},g.prototype.forEach=function(_,T){for(var N in this.map)this.map.hasOwnProperty(N)&&_.call(T,this.map[N],N,this)},g.prototype.keys=function(){var _=[];return this.forEach(function(T,N){_.push(N)}),p(_)},g.prototype.values=function(){var _=[];return this.forEach(function(T){_.push(T)}),p(_)},g.prototype.entries=function(){var _=[];return this.forEach(function(T,N){_.push([N,T])}),p(_)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function y(_){return new Promise(function(T,N){_.onload=function(){T(_.result)},_.onerror=function(){N(_.error)}})}function v(_){var T=new FileReader,N=y(T);return T.readAsArrayBuffer(_),N}function b(_){var T=new FileReader,N=y(T);return T.readAsText(_),N}function x(_){for(var T=new Uint8Array(_),N=new Array(T.length),D=0;D<T.length;D++)N[D]=String.fromCharCode(T[D]);return N.join("")}function S(_){if(_.slice)return _.slice(0);var T=new Uint8Array(_.byteLength);return T.set(new Uint8Array(_)),T.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(_){this.bodyUsed=this.bodyUsed,this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:l.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:l.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():l.arrayBuffer&&l.blob&&u(_)?(this._bodyArrayBuffer=S(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||f(_))?this._bodyArrayBuffer=S(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var _=m(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var _=m(this);return _||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(v)}),this.text=function(){var _=m(this);if(_)return _;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(_){var T=_.toUpperCase();return w.indexOf(T)>-1?T:_}function E(_,T){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T=T||{};var N=T.body;if(_ instanceof E){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,T.headers||(this.headers=new g(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!N&&_._bodyInit!=null&&(N=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new g(T.headers)),this.method=k(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&N)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(N),(this.method==="GET"||this.method==="HEAD")&&(T.cache==="no-store"||T.cache==="no-cache")){var D=/([?&])_=[^&]*/;if(D.test(this.url))this.url=this.url.replace(D,"$1_="+new Date().getTime());else{var I=/\?/;this.url+=(I.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function A(_){var T=new FormData;return _.trim().split("&").forEach(function(N){if(N){var D=N.split("="),I=D.shift().replace(/\+/g," "),U=D.join("=").replace(/\+/g," ");T.append(decodeURIComponent(I),decodeURIComponent(U))}}),T}function P(_){var T=new g,N=_.replace(/\r?\n[\t ]+/g," ");return N.split("\r").map(function(D){return D.indexOf(`
`)===0?D.substr(1,D.length):D}).forEach(function(D){var I=D.split(":"),U=I.shift().trim();if(U){var V=I.join(":").trim();T.append(U,V)}}),T}C.call(E.prototype);function L(_,T){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.ok=this.status>=200&&this.status<300,this.statusText=T.statusText===void 0?"":""+T.statusText,this.headers=new g(T.headers),this.url=T.url||"",this._initBody(_)}C.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},L.error=function(){var _=new L(null,{status:0,statusText:""});return _.type="error",_};var M=[301,302,303,307,308];L.redirect=function(_,T){if(M.indexOf(T)===-1)throw new RangeError("Invalid status code");return new L(null,{status:T,headers:{location:_}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(T,N){this.message=T,this.name=N;var D=Error(T);this.stack=D.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function O(_,T){return new Promise(function(N,D){var I=new E(_,T);if(I.signal&&I.signal.aborted)return D(new s.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function V(){U.abort()}U.onload=function(){var Q={status:U.status,statusText:U.statusText,headers:P(U.getAllResponseHeaders()||"")};Q.url="responseURL"in U?U.responseURL:Q.headers.get("X-Request-URL");var ye="response"in U?U.response:U.responseText;setTimeout(function(){N(new L(ye,Q))},0)},U.onerror=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},U.onabort=function(){setTimeout(function(){D(new s.DOMException("Aborted","AbortError"))},0)};function se(Q){try{return Q===""&&a.location.href?a.location.href:Q}catch{return Q}}U.open(I.method,se(I.url),!0),I.credentials==="include"?U.withCredentials=!0:I.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(l.blob?U.responseType="blob":l.arrayBuffer&&I.headers.get("Content-Type")&&I.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(U.responseType="arraybuffer")),T&&typeof T.headers=="object"&&!(T.headers instanceof g)?Object.getOwnPropertyNames(T.headers).forEach(function(Q){U.setRequestHeader(Q,h(T.headers[Q]))}):I.headers.forEach(function(Q,ye){U.setRequestHeader(ye,Q)}),I.signal&&(I.signal.addEventListener("abort",V),U.onreadystatechange=function(){U.readyState===4&&I.signal.removeEventListener("abort",V)}),U.send(typeof I._bodyInit>"u"?null:I._bodyInit)})}return O.polyfill=!0,a.fetch||(a.fetch=O,a.Headers=g,a.Request=E,a.Response=L),s.Headers=g,s.Request=E,s.Response=L,s.fetch=O,s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(Xx,Xx.exports)),Xx.exports}(function(e,t){var n;if(typeof fetch=="function"&&(typeof Li<"u"&&Li.fetch?n=Li.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof Fut<"u"&&typeof window>"u"){var r=n||Mut();r.default&&(r=r.default),t.default=r,e.exports=t.default}})(EF,EF.exports);var wfe=EF.exports;const Sfe=Ul(wfe),tq=yq({__proto__:null,default:Sfe},[wfe]);function nq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nq(Object(n),!0).forEach(function(r){Rut(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nq(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rut(e,t,n){return(t=Out(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Out(e){var t=Dut(e,"string");return Dd(t)=="symbol"?t:t+""}function Dut(e,t){if(Dd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}var Fl;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?Fl=global.fetch:typeof window<"u"&&window.fetch?Fl=window.fetch:Fl=fetch);var J1;xfe()&&(typeof global<"u"&&global.XMLHttpRequest?J1=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(J1=window.XMLHttpRequest));var UC;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?UC=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(UC=window.ActiveXObject));!Fl&&tq&&!J1&&!UC&&(Fl=Sfe||tq);typeof Fl!="function"&&(Fl=void 0);var _F=function(t,n){if(n&&Dd(n)==="object"){var r="";for(var i in n)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);if(!r)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+r.slice(1)}return t},iq=function(t,n,r,i){var o=function(l){if(!l.ok)return r(l.statusText||"Error",{status:l.status});l.text().then(function(u){r(null,{status:l.status,data:u})}).catch(r)};if(i){var s=i(t,n);if(s instanceof Promise){s.then(o).catch(r);return}}typeof fetch=="function"?fetch(t,n).then(o).catch(r):Fl(t,n).then(o).catch(r)},oq=!1,Nut=function(t,n,r,i){t.queryStringParams&&(n=_F(n,t.queryStringParams));var o=rq({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(o["Content-Type"]="application/json");var s=typeof t.requestOptions=="function"?t.requestOptions(r):t.requestOptions,a=rq({method:r?"POST":"GET",body:r?t.stringify(r):void 0,headers:o},oq?{}:s),l=typeof t.alternateFetch=="function"&&t.alternateFetch.length>=1?t.alternateFetch:void 0;try{iq(n,a,i,l)}catch(u){if(!s||Object.keys(s).length===0||!u.message||u.message.indexOf("not implemented")<0)return i(u);try{Object.keys(s).forEach(function(c){delete a[c]}),iq(n,a,i,l),oq=!0}catch(c){i(c)}}},Lut=function(t,n,r,i){r&&Dd(r)==="object"&&(r=_F("",r).slice(1)),t.queryStringParams&&(n=_F(n,t.queryStringParams));try{var o;J1?o=new J1:o=new UC("MSXML2.XMLHTTP.3.0"),o.open(r?"POST":"GET",n,1),t.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!t.withCredentials,r&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var s=t.customHeaders;if(s=typeof s=="function"?s():s,s)for(var a in s)o.setRequestHeader(a,s[a]);o.onreadystatechange=function(){o.readyState>3&&i(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(r)}catch(l){console&&console.log(l)}},Iut=function(t,n,r,i){if(typeof r=="function"&&(i=r,r=void 0),i=i||function(){},Fl&&n.indexOf("file:")!==0)return Nut(t,n,r,i);if(xfe()||typeof ActiveXObject=="function")return Lut(t,n,r,i);i(new Error("No fetch and no xhr implementation found!"))};function Jg(e){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jg(e)}function sq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sq(Object(n),!0).forEach(function(r){Cfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sq(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function But(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kfe(r.key),r)}}function jut(e,t,n){return t&&But(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cfe(e,t,n){return(t=kfe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kfe(e){var t=Uut(e,"string");return Jg(t)=="symbol"?t:t+""}function Uut(e,t){if(Jg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vut=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,i){return Cfe({},r,i||"")},parseLoadPayload:function(n,r){},request:Iut,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Efe=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};zut(this,e),this.services=t,this.options=n,this.allOptions=r,this.type="backend",this.init(t,n,r)}return jut(e,[{key:"init",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=rA(rA(rA({},Vut()),this.options||{}),i),this.allOptions=o,this.services&&this.options.reloadInterval){var s=setInterval(function(){return r.reload()},this.options.reloadInterval);Jg(s)==="object"&&typeof s.unref=="function"&&s.unref()}}},{key:"readMulti",value:function(n,r,i){this._readAny(n,n,r,r,i)}},{key:"read",value:function(n,r,i){this._readAny([n],n,[r],r,i)}},{key:"_readAny",value:function(n,r,i,o,s){var a=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(n,i)),l=Put(l),l.then(function(u){if(!u)return s(null,{});var c=a.services.interpolator.interpolate(u,{lng:n.join("+"),ns:i.join("+")});a.loadUrl(c,s,r,o)})}},{key:"loadUrl",value:function(n,r,i,o){var s=this,a=typeof i=="string"?[i]:i,l=typeof o=="string"?[o]:o,u=this.options.parseLoadPayload(a,l);this.options.request(this.options,n,u,function(c,f){if(f&&(f.status>=500&&f.status<600||!f.status))return r("failed loading "+n+"; status code: "+f.status,!0);if(f&&f.status>=400&&f.status<500)return r("failed loading "+n+"; status code: "+f.status,!1);if(!f&&c&&c.message&&c.message.toLowerCase().indexOf("failed")>-1&&(c.message.indexOf("fetch")>-1||c.message.toLowerCase().indexOf("network")>-1))return r("failed loading "+n+": "+c.message,!0);if(c)return r(c,!1);var d,h;try{typeof f.data=="string"?d=s.options.parse(f.data,i,o):d=f.data}catch{h="failed parsing "+n+" to json"}if(h)return r(h,!1);r(null,d)})}},{key:"create",value:function(n,r,i,o,s){var a=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var l=this.options.parsePayload(r,i,o),u=0,c=[],f=[];n.forEach(function(d){var h=a.options.addPath;typeof a.options.addPath=="function"&&(h=a.options.addPath(d,r));var p=a.services.interpolator.interpolate(h,{lng:d,ns:r});a.options.request(a.options,p,l,function(g,m){u+=1,c.push(g),f.push(m),u===n.length&&typeof s=="function"&&s(c,f)})})}}},{key:"reload",value:function(){var n=this,r=this.services,i=r.backendConnector,o=r.languageUtils,s=r.logger,a=i.language;if(!(a&&a.toLowerCase()==="cimode")){var l=[],u=function(f){var d=o.toResolveHierarchy(f);d.forEach(function(h){l.indexOf(h)<0&&l.push(h)})};u(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(c){return u(c)}),l.forEach(function(c){n.allOptions.ns.forEach(function(f){i.read(c,f,"read",null,null,function(d,h){d&&s.warn("loading namespace ".concat(f," for language ").concat(c," failed"),d),!d&&h&&s.log("loaded namespace ".concat(f," for language ").concat(c),h),i.loaded("".concat(c,"|").concat(f),d,h)})})})}}}])}();Efe.type="backend";Tr.use(Efe).use(bfe).use(sot).init({supportedLngs:["en","ko"],fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"/Swipytics/locales/{{lng}}/translation.json"},react:{useSuspense:!0}});const Wut=new Clt,Hut=new gut;gfe(document.getElementById("root")).render($.jsx(F.StrictMode,{children:$.jsx(Alt,{client:Wut,children:$.jsx(qit,{client:Hut,attachTo:window,eventTypes:["click","scroll","change"],children:$.jsx(drt,{theme:Zlt,children:$.jsx(Cs,{flexDir:"column",minH:"100dvh",p:0,m:0,w:"full",children:$.jsx(Jlt,{})})})})})}))});export default qut();
