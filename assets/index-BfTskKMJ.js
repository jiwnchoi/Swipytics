var Wme=Object.defineProperty;var Q7=e=>{throw TypeError(e)};var Hme=(e,t,n)=>t in e?Wme(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var qme=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var me=(e,t,n)=>Hme(e,typeof t!="symbol"?t+"":t,n),o5=(e,t,n)=>t.has(e)||Q7("Cannot "+n);var H=(e,t,n)=>(o5(e,t,"read from private field"),n?n.call(e):t.get(e)),Ke=(e,t,n)=>t.has(e)?Q7("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ae=(e,t,n,r)=>(o5(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ht=(e,t,n)=>(o5(e,t,"access private method"),n);var Ow=(e,t,n,r)=>({set _(i){Ae(e,t,i,n)},get _(){return H(e,t,r)}});var lgt=qme((Jgt,o8)=>{function qY(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Zi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function GY(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var XY={exports:{}},Kk={},YY={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb=Symbol.for("react.element"),Gme=Symbol.for("react.portal"),Xme=Symbol.for("react.fragment"),Yme=Symbol.for("react.strict_mode"),Kme=Symbol.for("react.profiler"),Qme=Symbol.for("react.provider"),Jme=Symbol.for("react.context"),Zme=Symbol.for("react.forward_ref"),e0e=Symbol.for("react.suspense"),t0e=Symbol.for("react.memo"),n0e=Symbol.for("react.lazy"),J7=Symbol.iterator;function r0e(e){return e===null||typeof e!="object"?null:(e=J7&&e[J7]||e["@@iterator"],typeof e=="function"?e:null)}var KY={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QY=Object.assign,JY={};function k0(e,t,n){this.props=e,this.context=t,this.refs=JY,this.updater=n||KY}k0.prototype.isReactComponent={};k0.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};k0.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ZY(){}ZY.prototype=k0.prototype;function FM(e,t,n){this.props=e,this.context=t,this.refs=JY,this.updater=n||KY}var PM=FM.prototype=new ZY;PM.constructor=FM;QY(PM,k0.prototype);PM.isPureReactComponent=!0;var Z7=Array.isArray,eK=Object.prototype.hasOwnProperty,OM={current:null},tK={key:!0,ref:!0,__self:!0,__source:!0};function nK(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)eK.call(t,r)&&!tK.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Kb,type:e,key:s,ref:o,props:i,_owner:OM.current}}function i0e(e,t){return{$$typeof:Kb,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function MM(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kb}function s0e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ez=/\/+/g;function a5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?s0e(""+e.key):t.toString(36)}function aS(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Kb:case Gme:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+a5(o,0):r,Z7(i)?(n="",e!=null&&(n=e.replace(ez,"$&/")+"/"),aS(i,t,n,"",function(u){return u})):i!=null&&(MM(i)&&(i=i0e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ez,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Z7(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+a5(s,a);o+=aS(s,t,n,l,i)}else if(l=r0e(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+a5(s,a++),o+=aS(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Mw(e,t,n){if(e==null)return e;var r=[],i=0;return aS(e,r,"","",function(s){return t.call(n,s,i++)}),r}function o0e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var zi={current:null},lS={transition:null},a0e={ReactCurrentDispatcher:zi,ReactCurrentBatchConfig:lS,ReactCurrentOwner:OM};function rK(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:Mw,forEach:function(e,t,n){Mw(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Mw(e,function(){t++}),t},toArray:function(e){return Mw(e,function(t){return t})||[]},only:function(e){if(!MM(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};at.Component=k0;at.Fragment=Xme;at.Profiler=Kme;at.PureComponent=FM;at.StrictMode=Yme;at.Suspense=e0e;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a0e;at.act=rK;at.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=QY({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=OM.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)eK.call(t,l)&&!tK.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Kb,type:e.type,key:i,ref:s,props:r,_owner:o}};at.createContext=function(e){return e={$$typeof:Jme,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Qme,_context:e},e.Consumer=e};at.createElement=nK;at.createFactory=function(e){var t=nK.bind(null,e);return t.type=e,t};at.createRef=function(){return{current:null}};at.forwardRef=function(e){return{$$typeof:Zme,render:e}};at.isValidElement=MM;at.lazy=function(e){return{$$typeof:n0e,_payload:{_status:-1,_result:e},_init:o0e}};at.memo=function(e,t){return{$$typeof:t0e,type:e,compare:t===void 0?null:t}};at.startTransition=function(e){var t=lS.transition;lS.transition={};try{e()}finally{lS.transition=t}};at.unstable_act=rK;at.useCallback=function(e,t){return zi.current.useCallback(e,t)};at.useContext=function(e){return zi.current.useContext(e)};at.useDebugValue=function(){};at.useDeferredValue=function(e){return zi.current.useDeferredValue(e)};at.useEffect=function(e,t){return zi.current.useEffect(e,t)};at.useId=function(){return zi.current.useId()};at.useImperativeHandle=function(e,t,n){return zi.current.useImperativeHandle(e,t,n)};at.useInsertionEffect=function(e,t){return zi.current.useInsertionEffect(e,t)};at.useLayoutEffect=function(e,t){return zi.current.useLayoutEffect(e,t)};at.useMemo=function(e,t){return zi.current.useMemo(e,t)};at.useReducer=function(e,t,n){return zi.current.useReducer(e,t,n)};at.useRef=function(e){return zi.current.useRef(e)};at.useState=function(e){return zi.current.useState(e)};at.useSyncExternalStore=function(e,t,n){return zi.current.useSyncExternalStore(e,t,n)};at.useTransition=function(){return zi.current.useTransition()};at.version="18.3.1";YY.exports=at;var M=YY.exports;const wm=Zh(M),tz=qY({__proto__:null,default:wm},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0e=M,u0e=Symbol.for("react.element"),c0e=Symbol.for("react.fragment"),f0e=Object.prototype.hasOwnProperty,d0e=l0e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h0e={key:!0,ref:!0,__self:!0,__source:!0};function iK(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)f0e.call(t,r)&&!h0e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:u0e,type:e,key:s,ref:o,props:i,_owner:d0e.current}}Kk.Fragment=c0e;Kk.jsx=iK;Kk.jsxs=iK;XY.exports=Kk;var T=XY.exports;function p0e(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sK=Symbol("Comlink.proxy"),g0e=Symbol("Comlink.endpoint"),oK=Symbol("Comlink.releaseProxy"),l5=Symbol("Comlink.finalizer"),uS=Symbol("Comlink.thrown"),aK=e=>typeof e=="object"&&e!==null||typeof e=="function",m0e={canHandle:e=>aK(e)&&e[sK],serialize(e){const{port1:t,port2:n}=new MessageChannel;return uK(e,t),[n,[n]]},deserialize(e){return e.start(),fK(e)}},y0e={canHandle:e=>aK(e)&&uS in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},lK=new Map([["proxy",m0e],["throw",y0e]]);function v0e(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function uK(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(i){if(!i||!i.data)return;if(!v0e(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:s,type:o,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(Pd);let u;try{const c=a.slice(0,-1).reduce((d,h)=>d[h],e),f=a.reduce((d,h)=>d[h],e);switch(o){case"GET":u=f;break;case"SET":c[a.slice(-1)[0]]=Pd(i.data.value),u=!0;break;case"APPLY":u=f.apply(c,l);break;case"CONSTRUCT":{const d=new f(...l);u=C0e(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;uK(e,h),u=E0e(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[uS]:0}}Promise.resolve(u).catch(c=>({value:c,[uS]:0})).then(c=>{const[f,d]=fE(c);t.postMessage(Object.assign(Object.assign({},f),{id:s}),d),o==="RELEASE"&&(t.removeEventListener("message",r),cK(t),l5 in e&&typeof e[l5]=="function"&&e[l5]())}).catch(c=>{const[f,d]=fE({value:new TypeError("Unserializable return value"),[uS]:0});t.postMessage(Object.assign(Object.assign({},f),{id:s}),d)})}),t.start&&t.start()}function b0e(e){return e.constructor.name==="MessagePort"}function cK(e){b0e(e)&&e.close()}function fK(e,t){return oF(e,[],t)}function Dw(e){if(e)throw new Error("Proxy has been released and is not useable")}function dK(e){return og(e,{type:"RELEASE"}).then(()=>{cK(e)})}const uE=new WeakMap,cE="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(uE.get(e)||0)-1;uE.set(e,t),t===0&&dK(e)});function x0e(e,t){const n=(uE.get(t)||0)+1;uE.set(t,n),cE&&cE.register(e,t,e)}function w0e(e){cE&&cE.unregister(e)}function oF(e,t=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(s,o){if(Dw(r),o===oK)return()=>{w0e(i),dK(e),r=!0};if(o==="then"){if(t.length===0)return{then:()=>i};const a=og(e,{type:"GET",path:t.map(l=>l.toString())}).then(Pd);return a.then.bind(a)}return oF(e,[...t,o])},set(s,o,a){Dw(r);const[l,u]=fE(a);return og(e,{type:"SET",path:[...t,o].map(c=>c.toString()),value:l},u).then(Pd)},apply(s,o,a){Dw(r);const l=t[t.length-1];if(l===g0e)return og(e,{type:"ENDPOINT"}).then(Pd);if(l==="bind")return oF(e,t.slice(0,-1));const[u,c]=nz(a);return og(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},c).then(Pd)},construct(s,o){Dw(r);const[a,l]=nz(o);return og(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:a},l).then(Pd)}});return x0e(i,e),i}function S0e(e){return Array.prototype.concat.apply([],e)}function nz(e){const t=e.map(fE);return[t.map(n=>n[0]),S0e(t.map(n=>n[1]))]}const hK=new WeakMap;function E0e(e,t){return hK.set(e,t),e}function C0e(e){return Object.assign(e,{[sK]:!0})}function fE(e){for(const[t,n]of lK)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},hK.get(e)||[]]}function Pd(e){switch(e.type){case"HANDLER":return lK.get(e.name).deserialize(e.value);case"RAW":return e.value}}function og(e,t,n){return new Promise(r=>{const i=k0e();e.addEventListener("message",function s(o){!o.data||!o.data.id||o.data.id!==i||(e.removeEventListener("message",s),r(o.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)})}function k0e(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function _0e(e){return new Worker("/Swipytics/assets/pyodide-worker-C3sdDleF.js",{type:"module",name:e==null?void 0:e.name})}let io=null,ti=null;const $0e=async(e,t)=>{if(!io||!ti)throw new Error("pyodide isn't loaded yet");return await ti.runPython(e,t)},A0e=async(e,t)=>{if(!io||!ti)throw new Error("pyodide isn't loaded yet");return ti.callPythonFunction(e,t)},T0e=async(e,t)=>{if(!io||!ti)throw new Error("pyodide isn't loaded yet");return ti.writeFile(e,t)},R0e=async e=>{if(!io||!ti)throw new Error("pyodide isn't loaded yet");return ti.readFile(e)},F0e=async e=>(io||(io=new _0e({name:"pyodide-worker"}),ti=fK(io),await ti.initialize(e)),{runPython:$0e,callPythonFunction:A0e,writeFile:T0e,readFile:R0e,terminate:()=>{io==null||io.terminate(),io=null,ti==null||ti[oK](),ti=null},initialize:async t=>{if(!io||!ti)throw new Error("pyodide isn't loaded yet");await ti.initialize(t)}});let Y1;async function P0e(e){const{packages:t}=e||{};return Y1===void 0&&(Y1=await O0e(t)),Y1}const O0e=async e=>(Y1=await F0e(e),Y1),If=async()=>await P0e({packages:["draco"]});async function M0e({chart:e}){return await(await If()).callPythonFunction("appendChart",[e])}async function D0e({chart:e}){return await(await fetch("/api/appendChart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chart:e})})).json()}const N0e={pyodide:M0e,server:D0e};async function I0e(){return await(await If()).callPythonFunction("appendNextChart",[])}async function L0e(){return await(await fetch("/api/appendNextChart")).json()}const z0e={server:L0e,pyodide:I0e};async function j0e({fieldNames:e}){return await(await If()).callPythonFunction("browseCharts",[e])}async function B0e({fieldNames:e}){return await(await fetch("/api/browseCharts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({field_names:e})})).json()}const U0e={pyodide:j0e,server:B0e};async function V0e({fieldNames:e}){return await(await If()).callPythonFunction("getCharts",[e])}async function W0e({fieldNames:e}){return await(await fetch("/api/getCharts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({field_names:e})})).json()}const H0e={pyodide:V0e,server:W0e};async function q0e({session:e}){return await(await If()).callPythonFunction("loadSession",[e])}async function G0e({session:e}){return await(await fetch("/api/loadSession",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}const X0e={pyodide:q0e,server:G0e};async function Y0e({key:e,preferred:t}){await(await If()).callPythonFunction("setPreferred",[e,t])}async function K0e({key:e,preferred:t}){await fetch("/api/setPreferred",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:e,preferred:t})})}const Q0e={pyodide:Y0e,server:K0e};async function J0e({filename:e,fileBuffer:t}){await(await If()).writeFile(e,t)}async function Z0e({filename:e,fileBuffer:t}){const n=new Blob([t]),r=new FormData;r.append("file",n,e),await fetch("/api/writeFile",{method:"POST",body:r})}const eye={pyodide:J0e,server:Z0e},tye={appendChart:N0e,getCharts:H0e,appendNextChart:z0e,browseCharts:U0e,loadSession:X0e,writeFile:eye,setPreferred:Q0e};async function nye(e,t,n){return await tye[t][e](n)}class rye{constructor(){me(this,"python","pyodide");me(this,"serverConnectable",!1);me(this,"pyodideLoaded",!1);me(this,"emitter",p0e());this.initializeRouter()}async initializeRouter(){await Promise.all([this.loadPyodide(),this.checkServerConnection()])}async loadPyodide(){if(!this.pyodideLoaded)try{await If(),this.pyodideLoaded=!0,this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}catch(t){console.error("error while connecting pyodide:",t),this.pyodideLoaded=!1,this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}}async checkServerConnection(){try{const t=await fetch("/api");this.serverConnectable=t.ok,this.serverConnectable&&(this.python="server"),this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}catch(t){this.serverConnectable=!1,console.error("error while connecting server:",t),this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}}getPythonType(){return this.python}setPython(t){return t==="server"&&!this.serverConnectable?!1:(this.python=t,this.emitter.emit("loadingStatusChange",this.getLoadingStatus()),!0)}getLoadingStatus(){return{loadingPyodide:this.python==="pyodide"&&!this.pyodideLoaded,loadingServer:this.python==="server"&&!this.serverConnectable,loading:this.python==="pyodide"&&!this.pyodideLoaded||this.python==="server"&&!this.serverConnectable}}on(t,n){this.emitter.on(t,n)}off(t,n){this.emitter.off(t,n)}async call(t,n){if(this.getLoadingStatus().loading)return console.error("Router is not loaded yet"),null;try{return await nye(this.getPythonType(),t,n)}catch(r){return console.error("error while calling endpoint:",r),null}}async lazyCall(t,n){return new Promise(r=>{const i=()=>{this.getLoadingStatus().loading||(this.off("loadingStatusChange",i),r(this.call(t,n)))};this.on("loadingStatusChange",i),i()})}}const Ki=new rye;function rz(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const pK=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),iz=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);iz&&parseFloat(iz[1]);const Nw=globalThis,Np=globalThis.process||{};function iye(e){var r,i;if(typeof window<"u"&&((r=window.process)==null?void 0:r.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function DM(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||iye()}const gK="4.0.7";function sye(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch{return null}}class oye{constructor(t,n,r="sessionStorage"){this.storage=sye(r),this.id=t,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let t={};if(this.storage){const n=this.storage.getItem(this.id);t=n?JSON.parse(n):{}}return Object.assign(this.config,t),this}}function aye(e){let t;return e<10?t=`${e.toFixed(2)}ms`:e<100?t=`${e.toFixed(1)}ms`:e<1e3?t=`${e.toFixed(0)}ms`:t=`${(e/1e3).toFixed(2)}s`,t}function lye(e,t=8){const n=Math.max(t-e.length,0);return`${" ".repeat(n)}${e}`}var dE;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(dE||(dE={}));const uye=10;function sz(e){return typeof e!="string"?e:(e=e.toUpperCase(),dE[e]||dE.WHITE)}function cye(e,t,n){return!DM&&typeof e=="string"&&(t&&(e=`\x1B[${sz(t)}m${e}\x1B[39m`),n&&(e=`\x1B[${sz(n)+uye}m${e}\x1B[49m`)),e}function fye(e,t=["constructor"]){const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=e;for(const s of r){const o=i[s];typeof o=="function"&&(t.find(a=>s===a)||(i[s]=o.bind(e)))}}function NM(e,t){if(!e)throw new Error("Assertion failed")}function Ip(){var t,n,r;let e;if(DM()&&Nw.performance)e=(n=(t=Nw==null?void 0:Nw.performance)==null?void 0:t.now)==null?void 0:n.call(t);else if("hrtime"in Np){const i=(r=Np==null?void 0:Np.hrtime)==null?void 0:r.call(Np);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const Lp={debug:DM()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},dye={enabled:!0,level:0};function zp(){}const oz={},az={once:!0};let IM=class{constructor({id:t}={id:""}){this.VERSION=gK,this._startTs=Ip(),this._deltaTs=Ip(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new oye(`__probe-${this.id}__`,dye),this.timeStamp(`${this.id} started`),fye(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ip()-this._startTs).toPrecision(10))}getDelta(){return Number((Ip()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,n){this._storage.setConfiguration({[t]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,n){if(!t)throw new Error(n||"Assertion failed")}warn(t){return this._getLogFunction(0,t,Lp.warn,arguments,az)}error(t){return this._getLogFunction(0,t,Lp.error,arguments)}deprecated(t,n){return this.warn(`\`${t}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(t,n){return this.error(`\`${t}\` has been removed. Use \`${n}\` instead`)}probe(t,n){return this._getLogFunction(t,n,Lp.log,arguments,{time:!0,once:!0})}log(t,n){return this._getLogFunction(t,n,Lp.debug,arguments)}info(t,n){return this._getLogFunction(t,n,console.info,arguments)}once(t,n){return this._getLogFunction(t,n,Lp.debug||Lp.info,arguments,az)}table(t,n,r){return n?this._getLogFunction(t,n,console.table||zp,r&&[r],{tag:pye(n)}):zp}time(t,n){return this._getLogFunction(t,n,console.time?console.time:console.info)}timeEnd(t,n){return this._getLogFunction(t,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,n){return this._getLogFunction(t,n,console.timeStamp||zp)}group(t,n,r={collapsed:!1}){const i=lz({logLevel:t,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,n,r={}){return this.group(t,n,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||zp)}withGroup(t,n,r){this.group(t,n)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=mK(t)}_getLogFunction(t,n,r,i,s){if(this._shouldLog(t)){s=lz({logLevel:t,message:n,args:i,opts:s}),r=r||s.method,NM(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Ip();const o=s.tag||s.message;if(s.once&&o)if(!oz[o])oz[o]=Ip();else return zp;return n=hye(this.id,s.message,s),r.bind(console,n,...s.args)}return zp}};IM.VERSION=gK;function mK(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return NM(Number.isFinite(t)&&t>=0),t}function lz(e){const{logLevel:t,message:n}=e;e.logLevel=mK(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":n!==void 0&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return NM(i==="string"||i==="object"),Object.assign(e,{args:r},e.opts)}function hye(e,t,n){if(typeof t=="string"){const r=n.time?lye(aye(n.total)):"";t=n.time?`${e}: ${r}  ${t}`:`${e}: ${t}`,t=cye(t,n.color,n.background)}return t}function pye(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}function gye(e,t){return yK(e||{},t)}function yK(e,t,n=0){if(n>3)return t;const r={...e};for(const[i,s]of Object.entries(t))s&&typeof s=="object"&&!Array.isArray(s)?r[i]=yK(r[i]||{},t[i],n+1):r[i]=t[i];return r}const mye="latest";function yye(){var e;return(e=globalThis._loadersgl_)!=null&&e.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version}const vye=yye();function mf(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const rh=typeof process!="object"||String(process)!=="[object process]"||process.browser,bye=typeof window<"u"&&typeof window.orientation<"u",uz=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);uz&&parseFloat(uz[1]);class xye{constructor(t,n){me(this,"name");me(this,"workerThread");me(this,"isRunning",!0);me(this,"result");me(this,"_resolve",()=>{});me(this,"_reject",()=>{});this.name=t,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(t,n){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:n})}done(t){mf(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){mf(this.isRunning),this.isRunning=!1,this._reject(t)}}class u5{terminate(){}}const c5=new Map;function wye(e){mf(e.source&&!e.url||!e.source&&e.url);let t=c5.get(e.source||e.url);return t||(e.url&&(t=Sye(e.url),c5.set(e.url,t)),e.source&&(t=vK(e.source),c5.set(e.source,t))),mf(t),t}function Sye(e){if(!e.startsWith("http"))return e;const t=Eye(e);return vK(t)}function vK(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Eye(e){return`try {
  importScripts('${e}');
} catch (error) {
  console.error(error);
  throw error;
}`}function bK(e,t=!0,n){const r=n||new Set;if(e){if(cz(e))r.add(e);else if(cz(e.buffer))r.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)bK(e[i],t,r)}}return n===void 0?Array.from(r):[]}function cz(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const f5=()=>{};class aF{constructor(t){me(this,"name");me(this,"source");me(this,"url");me(this,"terminated",!1);me(this,"worker");me(this,"onMessage");me(this,"onError");me(this,"_loadableURL","");const{name:n,source:r,url:i}=t;mf(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=f5,this.onError=s=>console.log(s),this.worker=rh?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&rh||typeof u5<"u"&&!rh}destroy(){this.onMessage=f5,this.onError=f5,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,n){n=n||bK(t),this.worker.postMessage(t,n)}_getErrorFromErrorEvent(t){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,t.message&&(n+=`${t.message} in `),t.lineno&&(n+=`:${t.lineno}:${t.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=wye({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},t.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},t.onmessageerror=n=>console.error(n),t}_createNodeWorker(){let t;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new u5(r,{eval:!1})}else if(this.source)t=new u5(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",n=>{this.onMessage(n)}),t.on("error",n=>{this.onError(n)}),t.on("exit",n=>{}),t}}class Cye{constructor(t){me(this,"name","unnamed");me(this,"source");me(this,"url");me(this,"maxConcurrency",1);me(this,"maxMobileConcurrency",1);me(this,"onDebug",()=>{});me(this,"reuseWorkers",!0);me(this,"props",{});me(this,"jobQueue",[]);me(this,"idleQueue",[]);me(this,"count",0);me(this,"isDestroyed",!1);this.source=t.source,this.url=t.url,this.setProps(t)}static isSupported(){return aF.isSupported()}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,n=(i,s,o)=>i.done(o),r=(i,s)=>i.error(s)){const i=new Promise(s=>(this.jobQueue.push({name:t,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:t,backlog:this.jobQueue.length});const r=new xye(n.name,t);t.onMessage=i=>n.onMessage(r,i.type,i.payload),t.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!rh||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new aF({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return bye?this.maxMobileConcurrency:this.maxConcurrency}}const kye={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},Fc=class Fc{constructor(t){me(this,"props");me(this,"workerPools",new Map);this.props={...kye},this.setProps(t),this.workerPools=new Map}static isSupported(){return aF.isSupported()}static getWorkerFarm(t={}){return Fc._workerFarm=Fc._workerFarm||new Fc({}),Fc._workerFarm.setProps(t),Fc._workerFarm}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:n,source:r,url:i}=t;let s=this.workerPools.get(n);return s||(s=new Cye({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};me(Fc,"_workerFarm");let hE=Fc;function _ye(e,t={}){const n=t[e.id]||{},r=rh?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let i=n.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(rh?i=`modules/${e.module}/dist/${r}`:i=`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!i){let s=e.version;s==="latest"&&(s=mye);const o=s?`@${s}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${o}/dist/${r}`}return mf(i),i}function $ye(e,t=vye){mf(e,"no worker provided");const n=e.version;return!(!t||!n)}function Aye(e,t){return!hE.isSupported()||!rh&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function Tye(e,t,n,r,i){const s=e.id,o=_ye(e,n),l=hE.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const u=await l.startJob("process-on-worker",Rye.bind(null,i));return u.postMessage("process",{input:t,options:n,context:r}),await(await u.result).result}async function Rye(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await e(s,o);t.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function Fye(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function Pye(...e){return Oye(e)}function Oye(e){const t=e.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=t.reduce((s,o)=>s+o.byteLength,0),r=new Uint8Array(n);let i=0;for(const s of t)r.set(s,i),i+=s.byteLength;return r.buffer}async function Mye(e){const t=[];for await(const n of e)t.push(n);return Pye(...t)}let Dye="";const fz={};function Nye(e){for(const t in fz)if(e.startsWith(t)){const n=fz[t];e=e.replace(t,n)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e=`${Dye}${e}`),e}const Iye="4.2.1",Lye={dataType:null,batchType:null,name:"JSON",id:"json",module:"json",version:Iye,extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:dz,parse:async e=>dz(new TextDecoder().decode(e)),options:{}};function dz(e){return JSON.parse(e)}function zye(e){return e&&typeof e=="object"&&e.isBuffer}function xK(e){if(zye(e))return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function wK(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function jye(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}const Bye=e=>typeof e=="boolean",K1=e=>typeof e=="function",Qb=e=>e!==null&&typeof e=="object",hz=e=>Qb(e)&&e.constructor==={}.constructor,Uye=e=>!!e&&typeof e[Symbol.iterator]=="function",Vye=e=>e&&typeof e[Symbol.asyncIterator]=="function",ep=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,_0=e=>typeof Blob<"u"&&e instanceof Blob,Wye=e=>e&&typeof e=="object"&&e.isBuffer,Hye=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||Qb(e)&&K1(e.tee)&&K1(e.cancel)&&K1(e.getReader),qye=e=>Qb(e)&&K1(e.read)&&K1(e.pipe)&&Bye(e.readable),SK=e=>Hye(e)||qye(e);class Gye extends Error{constructor(n,r){super(n);me(this,"reason");me(this,"url");me(this,"response");this.reason=r.reason,this.url=r.url,this.response=r.response}}const Xye=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Yye=/^([-\w.]+\/[-\w.+]+)/;function pz(e,t){return e.toLowerCase()===t.toLowerCase()}function Kye(e){const t=Yye.exec(e);return t?t[1]:e}function gz(e){const t=Xye.exec(e);return t?t[1]:""}const EK=/\?.*/;function Qye(e){const t=e.match(EK);return t&&t[0]}function LM(e){return e.replace(EK,"")}function Jye(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}function Qk(e){return ep(e)?e.url:_0(e)?e.name||"":typeof e=="string"?e:""}function zM(e){if(ep(e)){const t=e,n=t.headers.get("content-type")||"",r=LM(t.url);return Kye(n)||gz(r)}return _0(e)?e.type||"":typeof e=="string"?gz(e):""}function Zye(e){return ep(e)?e.headers["content-length"]||-1:_0(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}async function CK(e){if(ep(e))return e;const t={},n=Zye(e);n>=0&&(t["content-length"]=String(n));const r=Qk(e),i=zM(e);i&&(t["content-type"]=i);const s=await n1e(e);s&&(t["x-first-bytes"]=s),typeof e=="string"&&(e=new TextEncoder().encode(e));const o=new Response(e,{headers:t});return Object.defineProperty(o,"url",{value:r}),o}async function e1e(e){if(!e.ok)throw await t1e(e)}async function t1e(e){const t=Jye(e.url);let n=`Failed to fetch resource (${e.status}) ${e.statusText}: ${t}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:e.statusText,url:e.url,response:e};try{const i=e.headers.get("Content-Type");r.reason=i!=null&&i.includes("application/json")?await e.json():e.text()}catch{}return new Gye(n,r)}async function n1e(e){if(typeof e=="string")return`data:,${e.slice(0,5)}`;if(e instanceof Blob){const n=e.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r((o=s==null?void 0:s.target)==null?void 0:o.result)},i.readAsDataURL(n)})}if(e instanceof ArrayBuffer){const n=e.slice(0,5);return`data:base64,${r1e(n)}`}return null}function r1e(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}function i1e(e){return!s1e(e)&&!o1e(e)}function s1e(e){return e.startsWith("http:")||e.startsWith("https:")}function o1e(e){return e.startsWith("data:")}async function lF(e,t){var n,r;if(typeof e=="string"){const i=Nye(e);return i1e(i)&&(n=globalThis.loaders)!=null&&n.fetchNode?(r=globalThis.loaders)==null?void 0:r.fetchNode(i,t):await fetch(i,t)}return await CK(e)}const mz=new IM({id:"loaders.gl"});class a1e{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class l1e{constructor(){me(this,"console");this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const kK={fetch:null,mimeType:void 0,nothrow:!1,log:new l1e,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:pK,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},u1e={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function _K(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function $K(){const e=_K();return e.globalOptions=e.globalOptions||{...kK},e.globalOptions}function c1e(e,t,n,r){return n=n||[],n=Array.isArray(n)?n:[n],f1e(e,n),h1e(t,e,r)}function f1e(e,t){yz(e,null,kK,u1e,t);for(const n of t){const r=e&&e[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};yz(r,n.id,i,s,t)}}function yz(e,t,n,r,i){const s=t||"Top level",o=t?`${t}.`:"";for(const a in e){const l=!t&&Qb(e[a]),u=a==="baseUri"&&!t,c=a==="workerUrl"&&t;if(!(a in n)&&!u&&!c){if(a in r)mz.warn(`${s} loader option '${o}${a}' no longer supported, use '${r[a]}'`)();else if(!l){const f=d1e(a,i);mz.warn(`${s} loader option '${o}${a}' not recognized. ${f}`)()}}}}function d1e(e,t){const n=e.toLowerCase();let r="";for(const i of t)for(const s in i.options){if(e===s)return`Did you mean '${i.id}.${s}'?`;const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||`Did you mean '${i.id}.${s}'?`)}return r}function h1e(e,t,n){const i={...e.options||{}};return p1e(i,n),i.log===null&&(i.log=new a1e),vz(i,$K()),vz(i,t),i}function vz(e,t){for(const n in t)if(n in t){const r=t[n];hz(r)&&hz(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function p1e(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function AK(e){return e?(Array.isArray(e)&&(e=e[0]),Array.isArray(e==null?void 0:e.extensions)):!1}function TK(e){rz(e,"null loader"),rz(AK(e),"invalid loader");let t;return Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e!=null&&e.parseTextSync||e!=null&&e.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const g1e=()=>{const e=_K();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function m1e(){return g1e()}const y1e=new IM({id:"loaders.gl"}),v1e=/\.([^.]+)$/;async function b1e(e,t=[],n,r){if(!RK(e))return null;let i=bz(e,t,{...n,nothrow:!0},r);if(i)return i;if(_0(e)&&(e=await e.slice(0,10).arrayBuffer(),i=bz(e,t,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(FK(e));return i}function bz(e,t=[],n,r){if(!RK(e))return null;if(t&&!Array.isArray(t))return TK(t);let i=[];t&&(i=i.concat(t)),n!=null&&n.ignoreRegisteredLoaders||i.push(...m1e()),w1e(i);const s=x1e(e,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(FK(e));return s}function x1e(e,t,n,r){const i=Qk(e),s=zM(e),o=LM(i)||(r==null?void 0:r.url);let a=null,l="";return n!=null&&n.mimeType&&(a=d5(t,n==null?void 0:n.mimeType),l=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),a=a||S1e(t,o),l=l||(a?`matched url ${o}`:""),a=a||d5(t,s),l=l||(a?`matched MIME type ${s}`:""),a=a||C1e(t,e),l=l||(a?`matched initial data ${PK(e)}`:""),n!=null&&n.fallbackMimeType&&(a=a||d5(t,n==null?void 0:n.fallbackMimeType),l=l||(a?`matched fallback MIME type ${s}`:"")),l&&y1e.log(1,`selectLoader selected ${a==null?void 0:a.name}: ${l}.`),a}function RK(e){return!(e instanceof Response&&e.status===204)}function FK(e){const t=Qk(e),n=zM(e);let r="No valid loader found (";r+=t?`${wK(t)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const i=e?PK(e):"";return r+=i?` first bytes: "${i}"`:"first bytes: not available",r+=")",r}function w1e(e){for(const t of e)TK(t)}function S1e(e,t){const n=t&&v1e.exec(t),r=n&&n[1];return r?E1e(e,r):null}function E1e(e,t){t=t.toLowerCase();for(const n of e)for(const r of n.extensions)if(r.toLowerCase()===t)return n;return null}function d5(e,t){var n;for(const r of e)if((n=r.mimeTypes)!=null&&n.some(i=>pz(t,i))||pz(t,`application/x.${r.id}`))return r;return null}function C1e(e,t){if(!t)return null;for(const n of e)if(typeof t=="string"){if(k1e(t,n))return n}else if(ArrayBuffer.isView(t)){if(xz(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer&&xz(t,0,n))return n;return null}function k1e(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>e.startsWith(r))}function xz(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>_1e(e,t,n,i))}function _1e(e,t,n,r){if(r instanceof ArrayBuffer)return Fye(r,e,r.byteLength);switch(typeof r){case"function":return r(e);case"string":const i=uF(e,t,r.length);return r===i;default:return!1}}function PK(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?uF(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?uF(e,0,t):""}function uF(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(t+s));return i}const $1e=256*1024;function*A1e(e,t){const n=(t==null?void 0:t.chunkSize)||$1e;let r=0;const i=new TextEncoder;for(;r<e.length;){const s=Math.min(e.length-r,n),o=e.slice(r,r+s);r+=s,yield i.encode(o)}}const T1e=256*1024;function*R1e(e,t={}){const{chunkSize:n=T1e}=t;let r=0;for(;r<e.byteLength;){const i=Math.min(e.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(e,r,i);new Uint8Array(s).set(o),r+=i,yield s}}const F1e=1024*1024;async function*P1e(e,t){const n=(t==null?void 0:t.chunkSize)||F1e;let r=0;for(;r<e.size;){const i=r+n,s=await e.slice(r,i).arrayBuffer();r=i,yield s}}function wz(e,t){return pK?O1e(e,t):M1e(e)}async function*O1e(e,t){const n=e.getReader();let r;try{for(;;){const i=r||n.read();t!=null&&t._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield xK(o)}}catch{n.releaseLock()}}async function*M1e(e,t){for await(const n of e)yield xK(n)}function D1e(e,t){if(typeof e=="string")return A1e(e,t);if(e instanceof ArrayBuffer)return R1e(e,t);if(_0(e))return P1e(e,t);if(SK(e))return wz(e,t);if(ep(e))return wz(e.body,t);throw new Error("makeIterator")}const OK="Cannot convert supplied data type";function N1e(e,t,n){if(t.text&&typeof e=="string")return e;if(Wye(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(e.byteOffset,e.byteOffset+i)),r}throw new Error(OK)}async function I1e(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||r)return N1e(e,t);if(_0(e)&&(e=await CK(e)),ep(e)){const i=e;return await e1e(i),t.binary?await i.arrayBuffer():await i.text()}if(SK(e)&&(e=D1e(e,n)),Uye(e)||Vye(e))return Mye(e);throw new Error(OK)}function L1e(e,t){const n=$K(),r=e||n;return typeof r.fetch=="function"?r.fetch:Qb(r.fetch)?i=>lF(i,r.fetch):t!=null&&t.fetch?t==null?void 0:t.fetch:lF}function z1e(e,t,n){if(n)return n;const r={fetch:L1e(t,e),...e};if(r.url){const i=LM(r.url);r.baseUrl=i,r.queryString=Qye(r.url),r.filename=wK(i),r.baseUrl=jye(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function j1e(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const r=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function jM(e,t,n,r){t&&!Array.isArray(t)&&!AK(t)&&(r=void 0,n=t,t=void 0),e=await e,n=n||{};const i=Qk(e),o=j1e(t,r),a=await b1e(e,o,n);return a?(n=c1e(n,a,o,i),r=z1e({url:i,_parse:jM,loaders:o},n,r||null),await B1e(a,e,n,r)):null}async function B1e(e,t,n,r){if($ye(e),n=gye(e.options,n),ep(t)){const s=t,{ok:o,redirected:a,status:l,statusText:u,type:c,url:f}=s,d=Object.fromEntries(s.headers.entries());r.response={headers:d,ok:o,redirected:a,status:l,statusText:u,type:c,url:f}}t=await I1e(t,e,n);const i=e;if(i.parseTextSync&&typeof t=="string")return i.parseTextSync(t,n,r);if(Aye(e,n))return await Tye(e,t,n,r,jM);if(i.parseText&&typeof t=="string")return await i.parseText(t,n,r);if(i.parse)return await i.parse(t,n,r);throw mf(!i.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}const Sz=100;class U1e{constructor(t,n){me(this,"schema");me(this,"options");me(this,"shape");me(this,"length",0);me(this,"rows",null);me(this,"cursor",0);me(this,"_headers",[]);if(this.options=n,this.schema=t,!Array.isArray(t)){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="array-row-table",this.rows=this.rows||new Array(Sz),this.rows[this.length]=t,this.length++}addObjectRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="object-row-table",this.rows=this.rows||new Array(Sz),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;return t?(t=t.slice(0,this.length),this.rows=null,{shape:this.shape||"array-row-table",batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}function MK(e,t){if(!e)throw new Error("null row");const n={};if(t)for(let r=0;r<t.length;r++)n[t[r]]=e[r];else for(let r=0;r<e.length;r++){const i=`column-${r}`;n[i]=e[r]}return n}function DK(e,t){if(!e)throw new Error("null row");if(t){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=e[t[r]];return n}return Object.values(e)}function V1e(e){const t=[];for(let n=0;n<e.length;n++){const r=`column-${n}`;t.push(r)}return t}function W1e(e){return Object.keys(e)}const Ez=100;class H1e{constructor(t,n){me(this,"schema");me(this,"options");me(this,"length",0);me(this,"objectRows",null);me(this,"arrayRows",null);me(this,"cursor",0);me(this,"_headers",null);if(this.options=n,this.schema=t,t){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=V1e(t)),this.options.shape){case"object-row-table":const r=MK(t,this._headers);this.addObjectRow(r,n);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(Ez),this.arrayRows[this.length]=t,this.length++;break}}addObjectRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=W1e(t)),this.options.shape){case"array-row-table":const r=DK(t,this._headers);this.addArrayRow(r,n);break;case"object-row-table":this.objectRows=this.objectRows||new Array(Ez),this.objectRows[this.length]=t,this.length++;break}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}const q1e=100;class G1e{constructor(t,n){me(this,"schema");me(this,"length",0);me(this,"allocated",0);me(this,"columns",{});this.schema=t,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let n=0;for(const r in this.columns)this.columns[r][this.length]=t[n++];this.length++}addObjectRow(t){this._reallocateColumns();for(const n in t)this.columns[n][this.length]=t[n];this.length++}getBatch(){this._pruneColumns();const t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const r in this.schema){const i=this.schema[r];t[i.name]=this.columns[i.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:q1e,this.columns={};for(const t in this.schema){const n=this.schema[t],r=n.type||Float32Array,i=this.columns[n.index];if(i&&ArrayBuffer.isView(i)){const s=new r(this.allocated);s.set(i),this.columns[n.index]=s}else i?(i.length=this.allocated,this.columns[n.index]=i):this.columns[n.index]=new r(this.allocated)}}}_pruneColumns(){for(const[t,n]of Object.entries(this.columns))this.columns[t]=n.slice(0,this.length)}}const X1e={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},Y1e="TableBatchBuilder",Pv=class Pv{constructor(t,n){me(this,"schema");me(this,"options");me(this,"aggregator",null);me(this,"batchCount",0);me(this,"bytesUsed",0);me(this,"isChunkComplete",!1);me(this,"lastBatchEmittedMs",Date.now());me(this,"totalLength",0);me(this,"totalBytes",0);me(this,"rowBytes",0);this.schema=t,this.options={...X1e,...n}}limitReached(){var t,n;return!!((t=this.options)!=null&&t.limit&&this.totalLength>=this.options.limit||(n=this.options)!=null&&n._limitMB&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),typeof t=="string"&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?t.length*8:Object.keys(t).length*8}_isFull(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;t!=null&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);const n=this.aggregator.getBatch();return n.count=this.batchCount,n.bytesUsed=this.bytesUsed,Object.assign(n,t),this.batchCount++,this.aggregator=null,n}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return H1e;case"columnar-table":return G1e;case"arrow-table":if(!Pv.ArrowBatch)throw new Error(Y1e);return Pv.ArrowBatch;default:return U1e}}};me(Pv,"ArrowBatch");let cF=Pv;class Cz extends Array{enqueue(t){return this.push(t)}dequeue(){return this.shift()}}class K1e{constructor(){me(this,"_values");me(this,"_settlers");me(this,"_closed");this._values=new Cz,this._settlers=new Cz,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[Symbol.asyncIterator](){return this}enqueue(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");const n=this._settlers.dequeue();t instanceof Error?n.reject(t):n.resolve({value:t})}else this._values.enqueue(t)}next(){if(this._values.length>0){const t=this._values.dequeue();return t instanceof Error?Promise.reject(t):Promise.resolve({value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((t,n)=>{this._settlers.enqueue({resolve:t,reject:n})})}}/* @license
Papa Parse
v5.0.0-beta.0
https://github.com/mholt/PapaParse
License: MIT
*/const kz="\uFEFF",_s={parse:Q1e,unparse:J1e,RECORD_SEP:"",UNIT_SEP:"",BYTE_ORDER_MARK:kz,BAD_DELIMITERS:["\r",`
`,'"',kz],WORKERS_SUPPORTED:!1,NODE_STREAM_INPUT:1,LocalChunkSize:1024*1024*10,RemoteChunkSize:1024*1024*5,DefaultDelimiter:",",Parser:fF,ParserHandle:IK,ChunkStreamer:NK,StringStreamer:Sm};function Q1e(e,t,n){t=t||{};var r=t.dynamicTyping||!1;if(Ci(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=Ci(t.transform)?t.transform:!1,t.worker&&_s.WORKERS_SUPPORTED){var i=newWorker();i.userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=Ci(t.step),t.chunk=Ci(t.chunk),t.complete=Ci(t.complete),t.error=Ci(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id});return}var s=null;return typeof e=="string"&&(s=new Sm(t)),s||(s=new n(t)),s.stream(e)}function J1e(e,t){var n=!1,r=!0,i=",",s=`\r
`,o='"',a=o+o,l=!1,u=null;f();var c=new RegExp(Ov(o),"g");if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,l);if(typeof e[0]=="object")return h(u||d(e[0]),e,l)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:d(e.data[0])),!Array.isArray(e.data[0])&&typeof e.data[0]!="object"&&(e.data=[e.data])),h(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function f(){if(typeof t=="object"){if(typeof t.delimiter=="string"&&!_s.BAD_DELIMITERS.filter(function(m){return t.delimiter.indexOf(m)!==-1}).length&&(i=t.delimiter),(typeof t.quotes=="boolean"||Array.isArray(t.quotes))&&(n=t.quotes),(typeof t.skipEmptyLines=="boolean"||typeof t.skipEmptyLines=="string")&&(l=t.skipEmptyLines),typeof t.newline=="string"&&(s=t.newline),typeof t.quoteChar=="string"&&(o=t.quoteChar),typeof t.header=="boolean"&&(r=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");u=t.columns}t.escapeChar!==void 0&&(a=t.escapeChar+o)}}function d(m){if(typeof m!="object")return[];var y=[];for(var v in m)y.push(v);return y}function h(m,y,v){var b="";typeof m=="string"&&(m=JSON.parse(m)),typeof y=="string"&&(y=JSON.parse(y));var x=Array.isArray(m)&&m.length>0,w=!Array.isArray(y[0]);if(x&&r){for(var C=0;C<m.length;C++)C>0&&(b+=i),b+=p(m[C],C);y.length>0&&(b+=s)}for(var S=0;S<y.length;S++){var k=x?m.length:y[S].length,$=!1,F=x?Object.keys(y[S]).length===0:y[S].length===0;if(v&&!x&&($=v==="greedy"?y[S].join("").trim()==="":y[S].length===1&&y[S][0].length===0),v==="greedy"&&x){for(var O=[],B=0;B<k;B++){var D=w?m[B]:B;O.push(y[S][D])}$=O.join("").trim()===""}if(!$){for(var N=0;N<k;N++){N>0&&!F&&(b+=i);var A=x&&w?m[N]:N;b+=p(y[S][A],N)}S<y.length-1&&(!v||k>0&&!F)&&(b+=s)}}return b}function p(m,y){if(typeof m>"u"||m===null)return"";if(m.constructor===Date)return JSON.stringify(m).slice(1,25);m=m.toString().replace(c,a);var v=typeof n=="boolean"&&n||Array.isArray(n)&&n[y]||g(m,_s.BAD_DELIMITERS)||m.indexOf(i)>-1||m.charAt(0)===" "||m.charAt(m.length-1)===" ";return v?o+m+o:m}function g(m,y){for(var v=0;v<y.length;v++)if(m.indexOf(y[v])>-1)return!0;return!1}}function NK(e){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},t.call(this,e),this.parseChunk=function(n,r){if(this.isFirstChunk&&Ci(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(n);i!==void 0&&(n=i)}this.isFirstChunk=!1;var s=this._partialLine+n;this._partialLine="";var o=this._handle.parse(s,this._baseIndex,!this._finished);if(!(this._handle.paused()||this._handle.aborted())){var a=o.meta.cursor;this._finished||(this._partialLine=s.substring(a-this._baseIndex),this._baseIndex=a),o&&o.data&&(this._rowCount+=o.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Ci(this._config.chunk)&&!r){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return;o=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),!this._completed&&l&&Ci(this._config.complete)&&(!o||!o.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!l&&(!o||!o.meta.paused)&&this._nextChunk(),o}},this._sendError=function(n){Ci(this._config.error)&&this._config.error(n)};function t(n){var r=BM(n);r.chunkSize=parseInt(r.chunkSize),!n.step&&!n.chunk&&(r.chunkSize=null),this._handle=new IK(r),this._handle.streamer=this,this._config=r}}function Sm(e){e=e||{},NK.call(this,e);var t;this.stream=function(n){return t=n,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var n=this._config.chunkSize,r=n?t.substr(0,n):t;return t=n?t.substr(n):"",this._finished=!t,this.parseChunk(r)}}}Sm.prototype=Object.create(Sm.prototype);Sm.prototype.constructor=Sm;function IK(e){var t=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,r=this,i=0,s=0,o,a,l=!1,u=!1,c,f=[],d={data:[],errors:[],meta:{}};if(Ci(e.step)){var h=e.step;e.step=function(k){if(d=k,m())g();else{if(g(),!d.data||d.data.length===0)return;i+=k.data.length,e.preview&&i>e.preview?a.abort():h(d,r)}}}this.parse=function(k,$,F){var O=e.quoteChar||'"';if(e.newline||(e.newline=C(k,O)),c=!1,e.delimiter)Ci(e.delimiter)&&(e.delimiter=e.delimiter(k),d.meta.delimiter=e.delimiter);else{var B=w(k,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);B.successful?e.delimiter=B.bestDelimiter:(c=!0,e.delimiter=_s.DefaultDelimiter),d.meta.delimiter=e.delimiter}var D=BM(e);return e.preview&&e.header&&D.preview++,o=k,a=new fF(D),d=a.parse(o,$,F),g(),l?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,a.abort(),o=o.substr(a.getCharIndex())},this.resume=function(){l=!1,r.streamer.parseChunk(o,!0)},this.aborted=function(){return u},this.abort=function(){u=!0,a.abort(),d.meta.aborted=!0,Ci(e.complete)&&e.complete(d),o=""};function p(k){return e.skipEmptyLines==="greedy"?k.join("").trim()==="":k.length===1&&k[0].length===0}function g(){if(d&&c&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_s.DefaultDelimiter+"'"),c=!1),e.skipEmptyLines)for(var k=0;k<d.data.length;k++)p(d.data[k])&&d.data.splice(k--,1);return m()&&y(),x()}function m(){return e.header&&f.length===0}function y(){if(!d)return;function k(F){Ci(e.transformHeader)&&(F=e.transformHeader(F)),f.push(F)}if(Array.isArray(d.data[0])){for(var $=0;m()&&$<d.data.length;$++)d.data[$].forEach(k);d.data.splice(0,1)}else d.data.forEach(k)}function v(k){return e.dynamicTypingFunction&&e.dynamicTyping[k]===void 0&&(e.dynamicTyping[k]=e.dynamicTypingFunction(k)),(e.dynamicTyping[k]||e.dynamicTyping)===!0}function b(k,$){return v(k)?$==="true"||$==="TRUE"?!0:$==="false"||$==="FALSE"?!1:t.test($)?parseFloat($):n.test($)?new Date($):$===""?null:$:$}function x(){if(!d||!d.data||!e.header&&!e.dynamicTyping&&!e.transform)return d;function k(F,O){var B=e.header?{}:[],D;for(D=0;D<F.length;D++){var N=D,A=F[D];e.header&&(N=D>=f.length?"__parsed_extra":f[D]),e.transform&&(A=e.transform(A,N)),A=b(N,A),N==="__parsed_extra"?(B[N]=B[N]||[],B[N].push(A)):B[N]=A}return e.header&&(D>f.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+D,s+O):D<f.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+D,s+O)),B}var $=1;return!d.data[0]||Array.isArray(d.data[0])?(d.data=d.data.map(k),$=d.data.length):d.data=k(d.data,0),e.header&&d.meta&&(d.meta.fields=f),s+=$,d}function w(k,$,F,O,B){var D,N,A;B=B||[",","	","|",";",_s.RECORD_SEP,_s.UNIT_SEP];for(var P=0;P<B.length;P++){var j=B[P],z=0,U=0,X=0;A=void 0;for(var K=new fF({comments:O,delimiter:j,newline:$,preview:10}).parse(k),pe=0;pe<K.data.length;pe++){if(F&&p(K.data[pe])){X++;continue}var se=K.data[pe].length;if(U+=se,typeof A>"u"){A=0;continue}else se>1&&(z+=Math.abs(se-A),A=se)}K.data.length>0&&(U/=K.data.length-X),(typeof N>"u"||z>N)&&U>1.99&&(N=z,D=j)}return e.delimiter=D,{successful:!!D,bestDelimiter:D}}function C(k,$){k=k.substr(0,1024*1024);var F=new RegExp(Ov($)+"([^]*?)"+Ov($),"gm");k=k.replace(F,"");var O=k.split("\r"),B=k.split(`
`),D=B.length>1&&B[0].length<O[0].length;if(O.length===1||D)return`
`;for(var N=0,A=0;A<O.length;A++)O[A][0]===`
`&&N++;return N>=O.length/2?`\r
`:"\r"}function S(k,$,F,O){d.errors.push({type:k,code:$,message:F,row:O})}}function Ov(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fF(e){e=e||{};var t=e.delimiter,n=e.newline,r=e.comments,i=e.step,s=e.preview,o=e.fastMode,a;e.quoteChar===void 0?a='"':a=e.quoteChar;var l=a;if(e.escapeChar!==void 0&&(l=e.escapeChar),(typeof t!="string"||_s.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),r===t)throw new Error("Comment character same as delimiter");r===!0?r="#":(typeof r!="string"||_s.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),n!==`
`&&n!=="\r"&&n!==`\r
`&&(n=`
`);var u=0,c=!1;this.parse=function(f,d,h){if(typeof f!="string")throw new Error("Input must be a string");var p=f.length,g=t.length,m=n.length,y=r.length,v=Ci(i);u=0;var b=[],x=[],w=[],C=0;if(!f)return K();if(o||o!==!1&&f.indexOf(a)===-1){for(var S=f.split(n),k=0;k<S.length;k++){if(w=S[k],u+=w.length,k!==S.length-1)u+=n.length;else if(h)return K();if(!(r&&w.substr(0,y)===r)){if(v){if(b=[],j(w.split(t)),pe(),c)return K()}else j(w.split(t));if(s&&k>=s)return b=b.slice(0,s),K(!0)}}return K()}for(var $=f.indexOf(t,u),F=f.indexOf(n,u),O=new RegExp(Ov(l)+Ov(a),"g"),B;;){if(f[u]===a){for(B=u,u++;;){if(B=f.indexOf(a,B+1),B===-1)return h||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),U();if(B===p-1){var D=f.substring(u,B).replace(O,a);return U(D)}if(a===l&&f[B+1]===l){B++;continue}if(!(a!==l&&B!==0&&f[B-1]===l)){var N=F===-1?$:Math.min($,F),A=z(N);if(f[B+1+A]===t){if(w.push(f.substring(u,B).replace(O,a)),u=B+1+A+g,$=f.indexOf(t,u),F=f.indexOf(n,u),v&&(pe(),c))return K();if(s&&b.length>=s)return K(!0);break}var P=z(F);if(f.substr(B+1+P,m)===n){if(w.push(f.substring(u,B).replace(O,a)),X(B+1+P+m),$=f.indexOf(t,u),v&&(pe(),c))return K();if(s&&b.length>=s)return K(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),B++}}if(v&&(pe(),c))return K();if(s&&b.length>=s)return K(!0);continue}if(r&&w.length===0&&f.substr(u,y)===r){if(F===-1)return K();u=F+m,F=f.indexOf(n,u),$=f.indexOf(t,u);continue}if($!==-1&&($<F||F===-1)){w.push(f.substring(u,$)),u=$+g,$=f.indexOf(t,u);continue}if(F!==-1){if(w.push(f.substring(u,F)),X(F+m),v&&(pe(),c))return K();if(s&&b.length>=s)return K(!0);continue}break}return U();function j(se){b.push(se),C=u}function z(se){var _e=0;if(se!==-1){var Ze=f.substring(B+1,se);Ze&&Ze.trim()===""&&(_e=Ze.length)}return _e}function U(se){return h||(typeof se>"u"&&(se=f.substr(u)),w.push(se),u=p,j(w),v&&pe()),K()}function X(se){u=se,j(w),w=[],F=f.indexOf(n,u)}function K(se,_e){var Ze=_e||!1;return{data:Ze?b[0]:b,errors:x,meta:{delimiter:t,linebreak:n,aborted:c,truncated:!!se,cursor:C+(d||0)}}}function pe(){i(K(void 0,!0)),b=[],x=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return u}}function BM(e){if(typeof e!="object"||e===null)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=BM(e[n]);return t}function Ci(e){return typeof e=="function"}const{ChunkStreamer:LK}=_s;function pE(e){e=e||{},LK.call(this,e),this.textDecoder=new TextDecoder(this._config.encoding),this.stream=async function(t){this._input=t;try{for await(const n of t)this.parseChunk(this.getStringChunk(n));this._finished=!0,this.parseChunk("")}catch(n){this._sendError(n)}},this._nextChunk=function(){},this.getStringChunk=function(t){return typeof t=="string"?t:this.textDecoder.decode(t,{stream:!0})}}pE.prototype=Object.create(LK.prototype);pE.prototype.constructor=pE;const Z1e="4.2.1",UM="object-row-table",VM={dataType:null,batchType:null,id:"csv",module:"csv",name:"CSV",version:Z1e,extensions:["csv","tsv","dsv"],mimeTypes:["text/csv","text/tab-separated-values","text/dsv"],category:"table",parse:async(e,t)=>_z(new TextDecoder().decode(e),t),parseText:(e,t)=>_z(e,t),parseInBatches:eve,options:{csv:{shape:UM,optimizeMemoryUsage:!1,header:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!0,delimitersToGuess:[",","	","|",";"]}}};async function _z(e,t){const n={...VM.options.csv,...t==null?void 0:t.csv},r=tve(e),s=n.header==="auto"?zK(r):!!n.header,o={...n,header:s,download:!1,transformHeader:s?jK():void 0,error:f=>{throw new Error(f)}},a=_s.parse(e,o),l=a.data,u=a.meta.fields||BK(n.columnPrefix,r.length),c=n.shape||UM;switch(c){case"object-row-table":return{shape:"object-row-table",data:l.map(f=>Array.isArray(f)?MK(f,u):f)};case"array-row-table":return{shape:"array-row-table",data:l.map(f=>Array.isArray(f)?f:DK(f,u))};default:throw new Error(c)}}function eve(e,t){t={...t},t.batchSize==="auto"&&(t.batchSize=4e3);const n={...VM.options.csv,...t==null?void 0:t.csv},r=new K1e;let i=!0,s=null,o=null,a=null;const l={...n,header:!1,download:!1,chunkSize:1024*1024*5,skipEmptyLines:!1,step(u){let c=u.data;if(n.skipEmptyLines&&c.flat().join("").trim()==="")return;const f=u.meta.cursor;if(i&&!s&&(n.header==="auto"?zK(c):!!n.header)){s=c.map(jK());return}i&&(i=!1,s||(s=BK(n.columnPrefix,c.length)),a=nve(c,s)),n.optimizeMemoryUsage&&(c=JSON.parse(JSON.stringify(c)));const d=n.shape||UM;o=o||new cF(a,{shape:d,...t});try{o.addRow(c);const h=o&&o.getFullBatch({bytesUsed:f});h&&r.enqueue(h)}catch(h){r.enqueue(h)}},complete(u){try{const c=u.meta.cursor,f=o&&o.getFinalBatch({bytesUsed:c});f&&r.enqueue(f)}catch(c){r.enqueue(c)}r.close()}};return _s.parse(e,l,pE),r}function zK(e){return e&&e.every(t=>typeof t=="string")}function tve(e){return _s.parse(e,{download:!1,dynamicTyping:!0,preview:1}).data[0]}function jK(){const e=new Set;return t=>{let n=t,r=1;for(;e.has(n);)n=`${t}.${r}`,r++;return e.add(n),n}}function BK(e,t=0){const n=[];for(let r=0;r<t;r++)n.push(`${e}${r+1}`);return n}function nve(e,t){const n=t?{}:[];for(let r=0;r<e.length;r++){const i=t&&t[r]||r;switch(typeof e[r]){case"number":case"boolean":n[i]={name:String(i),index:r,type:Float32Array};break;case"string":default:n[i]={name:String(i),index:r,type:Array}}}return n}var $z={},h5={},p5=34,xy=10,g5=13;function UK(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function rve(e,t){var n=UK(e);return function(r,i){return t(n(r),i,e)}}function Az(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Hi(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function ive(e){return e<0?"-"+Hi(-e,6):e>9999?"+"+Hi(e,6):Hi(e,4)}function sve(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":ive(e.getUTCFullYear())+"-"+Hi(e.getUTCMonth()+1,2)+"-"+Hi(e.getUTCDate(),2)+(i?"T"+Hi(t,2)+":"+Hi(n,2)+":"+Hi(r,2)+"."+Hi(i,3)+"Z":r?"T"+Hi(t,2)+":"+Hi(n,2)+":"+Hi(r,2)+"Z":n||t?"T"+Hi(t,2)+":"+Hi(n,2)+"Z":"")}function ove(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(m,y){if(h)return h(m,y-1);p=m,h=d?rve(m,d):UK(m)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,m=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===xy&&--p,f.charCodeAt(p-1)===g5&&--p;function x(){if(v)return h5;if(b)return b=!1,$z;var C,S=g,k;if(f.charCodeAt(S)===p5){for(;g++<p&&f.charCodeAt(g)!==p5||f.charCodeAt(++g)===p5;);return(C=g)>=p?v=!0:(k=f.charCodeAt(g++))===xy?b=!0:k===g5&&(b=!0,f.charCodeAt(g)===xy&&++g),f.slice(S+1,C-1).replace(/""/g,'"')}for(;g<p;){if((k=f.charCodeAt(C=g++))===xy)b=!0;else if(k===g5)b=!0,f.charCodeAt(g)===xy&&++g;else if(k!==n)continue;return f.slice(S,C)}return v=!0,f.slice(S,p)}for(;(y=x())!==h5;){for(var w=[];y!==$z&&y!==h5;)w.push(y),y=x();d&&(w=d(w,m++))==null||h.push(w)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Az(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Az(f)),s(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?sve(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}function VK(e,t){const n={numeric:0,categorical:1,datetime:2,name:3};return n[e.type]-n[t.type]}function c1(e,t,n=[]){const r=[];if(e==null||t==null)return e!==t&&r.push({path:n.join("."),value:e}),r;if(typeof e!="object"||typeof t!="object")return e!==t&&r.push({path:n.join("."),value:e}),r;const i=new Set([...Object.keys(e),...Object.keys(t)]);for(const s of i){const o=[...n,s];if(!(s in t))r.push({path:o.join("."),value:e[s]});else if(!(s in e))r.push({path:o.join("."),value:void 0});else if(typeof e[s]=="object"&&e[s]!=null&&typeof t[s]=="object"&&t[s]!=null){const a=c1(e[s],t[s],o);r.push(...a)}else e[s]!==t[s]&&r.push({path:o.join("."),value:e[s]})}return r}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var ave=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lve=Object.prototype.hasOwnProperty;function dF(e,t){return lve.call(e,t)}function hF(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)dF(e,i)&&r.push(i);return r}function $s(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function pF(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ed(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function WK(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function gF(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(gF(e[t]))return!0}else if(typeof e=="object"){for(var r=hF(e),i=r.length,s=0;s<i;s++)if(gF(e[r[s]]))return!0}}return!1}function Tz(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var HK=function(e){ave(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,Tz(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=Tz(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),Fn=HK,uve=$s,cg={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=gE(n,this.path);r&&(r=$s(r));var i=ih(n,{op:"remove",path:this.from}).removed;return ih(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=gE(n,this.from);return ih(n,{op:"add",path:this.path,value:$s(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Mv(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},cve={add:function(e,t,n){return pF(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:cg.move,copy:cg.copy,test:cg.test,_get:cg._get};function gE(e,t){if(t=="")return e;var n={op:"_get",path:t};return ih(e,n),n.value}function ih(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):mE(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=gE(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Mv(e,t.value),o.test===!1)throw new Fn("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Fn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=$s(e));var a=t.path||"",l=a.split("/"),u=e,c=1,f=l.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=mE;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=WK(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!pF(h))throw new Fn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);pF(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>u.length)throw new Fn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=cve[t.op].call(t,u,h,e);if(o.test===!1)throw new Fn("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=cg[t.op].call(t,u,h,e);if(o.test===!1)throw new Fn("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<f&&(!u||typeof u!="object"))throw new Fn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function Jk(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Fn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=$s(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=ih(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function fve(e,t,n){var r=ih(e,t);if(r.test===!1)throw new Fn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function mE(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Fn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(cg[e.op]){if(typeof e.path!="string")throw new Fn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Fn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Fn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Fn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&gF(e.value))throw new Fn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Fn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Fn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=qK([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Fn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Fn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function qK(e,t,n){try{if(!Array.isArray(e))throw new Fn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Jk($s(t),$s(e),n||!0);else{n=n||mE;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Fn)return i;throw i}}function Mv(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!Mv(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!Mv(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const dve=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Fn,_areEquals:Mv,applyOperation:ih,applyPatch:Jk,applyReducer:fve,deepClone:uve,getValueByPointer:gE,validate:qK,validator:mE},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var WM=new WeakMap,hve=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),pve=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function gve(e){return WM.get(e)}function mve(e,t){return e.observers.get(t)}function yve(e,t){e.observers.delete(t.callback)}function vve(e,t){t.unobserve()}function bve(e,t){var n=[],r,i=gve(e);if(!i)i=new hve(e),WM.set(e,i);else{var s=mve(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=$s(e),t){r.callback=t,r.next=null;var o=function(){mF(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){mF(r),clearTimeout(r.next),yve(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new pve(t,r)),r}function mF(e,t){t===void 0&&(t=!1);var n=WM.get(e.object);HM(n.value,e.object,e.patches,"",t),e.patches.length&&Jk(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function HM(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=hF(t),o=hF(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(dF(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[u];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?HM(c,f,n,r+"/"+Ed(u),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Ed(u),value:$s(c)}),n.push({op:"replace",path:r+"/"+Ed(u),value:$s(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ed(u),value:$s(c)}),n.push({op:"remove",path:r+"/"+Ed(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!dF(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Ed(u),value:$s(t[u])})}}}function xve(e,t,n){n===void 0&&(n=!1);var r=[];return HM(e,t,r,"",n),r}const wve=Object.freeze(Object.defineProperty({__proto__:null,compare:xve,generate:mF,observe:bve,unobserve:vve},Symbol.toStringTag,{value:"Module"}));Object.assign({},dve,wve,{JsonPatchError:HK,deepClone:$s,escapePathComponent:Ed,unescapePathComponent:WK});var Sve=/("(?:[^\\"]|\\.)*")|[:,]/g,Eve=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,l,u){var c,f,d,h,p,g,m,y,v,b,x,w;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,s),x===void 0)return x;if(m=i-l.length-u,x.length<=m&&(v=x.replace(Sve,function(C,S){return S||C+" "}),v.length<=m))return v;if(s!=null&&(a=JSON.parse(x),s=void 0),typeof a=="object"&&a!==null){if(y=l+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",m=a.length;f<m;f++)d.push(o(a[f],y,f===m-1?0:1)||"null");else for(b="{",c="}",g=Object.keys(a),m=g.length;f<m;f++)h=g[f],p=JSON.stringify(h)+": ",w=o(a[h],y,p.length+(f===m-1?0:1)),w!==void 0&&d.push(p+w);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+l)}return x}(t,"",0)};const m5=Zh(Eve);function ms(e,t,n){return e.fields=t||[],e.fname=n,e}function Dn(e){return e==null?null:e.fname}function oi(e){return e==null?null:e.fields}function GK(e){return e.length===1?Cve(e[0]):kve(e)}const Cve=e=>function(t){return t[e]},kve=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ee(e){throw Error(e)}function Tl(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,l;e=e+"";function u(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=e[a],l==="\\")s+=e.substring(o,a++),o=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;o===i&&l==='"'||o===i&&l==="'"?(o=a+1,r=l):l==="."&&!i?a>o?u():o=a+1:l==="["?(a>o&&u(),i=o=a+1):l==="]"&&(i||ee("Access path missing open bracket: "+e),i>0&&u(),i=0,o=a+1)}return i&&ee("Access path missing closing bracket: "+e),r&&ee("Access path missing closing quote: "+e),a>o&&(a++,u()),t}function wo(e,t,n){const r=Tl(e);return e=r.length===1?r[0]:e,ms((n&&n.get||GK)(r),[e],t||e)}const Jb=wo("id"),fi=ms(e=>e,[],"identity"),Pc=ms(()=>0,[],"zero"),$0=ms(()=>1,[],"one"),So=ms(()=>!0,[],"true"),vc=ms(()=>!1,[],"false");function _ve(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const XK=0,Zk=1,qM=2,YK=3,KK=4;function GM(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_ve,r=e||XK;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Zk&&n(t||"error","ERROR",arguments),this},warn(){return r>=qM&&n(t||"warn","WARN",arguments),this},info(){return r>=YK&&n(t||"log","INFO",arguments),this},debug(){return r>=KK&&n(t||"log","DEBUG",arguments),this}}}var te=Array.isArray;function ve(e){return e===Object(e)}const Rz=e=>e!=="__proto__";function A0(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=$ve(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;T0(r,s,i[s],o)}return r},{})}function T0(e,t,n,r){if(!Rz(t))return;let i,s;if(ve(n)&&!te(n)){s=ve(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?T0(s,i,n[i]):Rz(i)&&(s[i]=n[i])}else e[t]=n}function $ve(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function yt(e){return e[e.length-1]}function ii(e){return e==null||e===""?null:+e}const QK=e=>t=>e*Math.exp(t),JK=e=>t=>Math.log(e*t),ZK=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),eQ=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,yE=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function e_(e,t,n,r){const i=n(e[0]),s=n(yt(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function tQ(e,t){return e_(e,t,ii,fi)}function nQ(e,t){var n=Math.sign(e[0]);return e_(e,t,JK(n),QK(n))}function rQ(e,t,n){return e_(e,t,yE(n),yE(1/n))}function iQ(e,t,n){return e_(e,t,ZK(n),eQ(n))}function t_(e,t,n,r,i){const s=r(e[0]),o=r(yt(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function XM(e,t,n){return t_(e,t,n,ii,fi)}function YM(e,t,n){const r=Math.sign(e[0]);return t_(e,t,n,JK(r),QK(r))}function vE(e,t,n,r){return t_(e,t,n,yE(r),yE(1/r))}function KM(e,t,n,r){return t_(e,t,n,ZK(r),eQ(r))}function sQ(e){return 1+~~(new Date(e).getMonth()/3)}function oQ(e){return 1+~~(new Date(e).getUTCMonth()/3)}function xe(e){return e!=null?te(e)?e:[e]:[]}function aQ(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function tt(e){return typeof e=="function"}const Ave="descending";function QM(e,t,n){n=n||{},t=xe(t)||[];const r=[],i=[],s={},o=n.comparator||Tve;return xe(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===Ave?-1:1),i.push(a=tt(a)?a:wo(a,null,n)),(oi(a)||[]).forEach(u=>s[u]=1))}),i.length===0?null:ms(o(i,r),Object.keys(s))}const n_=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Tve=(e,t)=>e.length===1?Rve(e[0],t[0]):Fve(e,t,e.length),Rve=(e,t)=>function(n,r){return n_(e(n),e(r))*t},Fve=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=n_(s(r),s(i));return o*t[a]});function di(e){return tt(e)?e:()=>e}function JM(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function et(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function wl(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function lQ(e,t){const n=e.length;let r=-1,i,s,o,a,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}return[a,l]}const Pve=Object.prototype.hasOwnProperty;function Se(e,t){return Pve.call(e,t)}const Iw={};function R0(e){let t={},n;function r(s){return Se(t,s)&&t[s]!==Iw}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===Iw&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=Iw),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const l=t[a];l!==Iw&&(!n||!n(l))&&(s[a]=l,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function uQ(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],l=yt(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=o?r:c<=o?i:s}function he(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),et(r,n)}function fg(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Lf(e){return typeof e=="boolean"}function ef(e){return Object.prototype.toString.call(e)==="[object Date]"}function cQ(e){return e&&tt(e[Symbol.iterator])}function _t(e){return typeof e=="number"}function fQ(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function we(e){return typeof e=="string"}function ZM(e,t,n){e&&(e=t?xe(e).map(a=>a.replace(/\\(.)/g,"$1")):xe(e));const r=e&&e.length,i=n&&n.get||GK,s=a=>i(t?[a]:Tl(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(l){return""+a(l)}}else{const a=e.map(s);o=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return ms(o,e,"key")}function dQ(e,t){const n=e[0],r=yt(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Ove=1e4;function hQ(e){e=+e||Ove;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Se(t,o)||Se(n,o),get:o=>Se(t,o)?t[o]:Se(n,o)?s(o,n[o]):void 0,set:(o,a)=>Se(t,o)?t[o]=a:s(o,a)}}function pQ(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,l=0,u=0;for(;a<i&&l<s;++u)o[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)o[u]=t[a];for(;l<s;++l,++u)o[u]=n[l];return o}function f1(e,t){let n="";for(;--t>=0;)n+=e;return n}function gQ(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?f1(i,o)+s:r==="center"?f1(i,~~(o/2))+s+f1(i,Math.ceil(o/2)):s+f1(i,o)}function Zb(e){return e&&yt(e)-e[0]||0}function de(e){return te(e)?"["+e.map(de)+"]":ve(e)||we(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function eD(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Mve=e=>_t(e)||ef(e)?e:Date.parse(e);function tD(e,t){return t=t||Mve,e==null||e===""?null:t(e)}function nD(e){return e==null||e===""?null:e+""}function da(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function mQ(e,t,n,r){const i=r??"…",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Ec(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Dve(e){return e}function Nve(e){if(e==null)return Dve;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;u<c;)f[u]=a[u],++u;return f}}function Ive(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Lve(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Fz(e,n)})}:Fz(e,t)}function Fz(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=yQ(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function yQ(e,t){var n=Nve(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Ive(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(a)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(t)}function zve(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=u,t[c]=d)}),t.forEach(function(u){var c=a(u),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,p=i[f]){delete i[p.end];var m=p===h?h:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function a(u){var c=e.arcs[u<0?~u:u],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function jve(e){return yQ(e,Bve.apply(this,arguments))}function Bve(e,t,n){var r,i,s;if(arguments.length>1)r=Uve(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:zve(e,r)}}function Uve(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function l(f){f.forEach(a)}function u(f){f.forEach(l)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function mu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Vve(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function F0(e){let t,n,r;e.length!==2?(t=mu,n=(a,l)=>mu(e(a),l),r=(a,l)=>e(a)-l):(t=e===mu||e===Vve?e:Wve,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:o,right:s}}function Wve(){return 0}function vQ(e){return e===null?NaN:+e}function*Hve(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const bQ=F0(mu),yf=bQ.right,qve=bQ.left;F0(vQ).center;function Gve(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Xve(e,t){const n=Gve(e,t);return n&&Math.sqrt(n)}class Pi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Pz extends Map{constructor(t,n=SQ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(yF(this,t))}has(t){return super.has(yF(this,t))}set(t,n){return super.set(xQ(this,t),n)}delete(t){return super.delete(wQ(this,t))}}class bE extends Set{constructor(t,n=SQ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(yF(this,t))}add(t){return super.add(xQ(this,t))}delete(t){return super.delete(wQ(this,t))}}function yF({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function xQ({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function wQ({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function SQ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Yve(e,t){return Array.from(t,n=>e[n])}function Kve(e=mu){if(e===mu)return EQ;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function EQ(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Qve=Math.sqrt(50),Jve=Math.sqrt(10),Zve=Math.sqrt(2);function xE(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Qve?10:s>=Jve?5:s>=Zve?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?xE(e,t,n*2):[a,l,u]}function vF(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?xE(t,e,n):xE(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function bF(e,t,n){return t=+t,e=+e,n=+n,xE(e,t,n)[2]}function vf(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?bF(t,e,n):bF(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function sh(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function xF(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function CQ(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?EQ:Kve(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*f/l+d)),p=Math.min(r,Math.floor(t+(l-u)*f/l+d));CQ(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(wy(e,n,t),i(e[r],s)>0&&wy(e,n,r);o<a;){for(wy(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?wy(e,n,a):(++a,wy(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function wy(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function wF(e,t,n){if(e=Float64Array.from(Hve(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return xF(e);if(t>=1)return sh(e);var r,i=(r-1)*t,s=Math.floor(i),o=sh(CQ(e,s).subarray(0,s+1)),a=xF(e.subarray(s+1));return o+(a-o)*(i-s)}}function kQ(e,t,n=vQ){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function ebe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function _Q(e,t){return wF(e,.5,t)}function*tbe(e){for(const t of e)yield*t}function $Q(e){return Array.from(tbe(e))}function As(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function AQ(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function nbe(e,...t){e=new bE(e),t=t.map(rbe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function rbe(e){return e instanceof bE?e:new bE(e)}function ibe(...e){const t=new bE;for(const n of e)for(const r of n)t.add(r);return t}function sbe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wE(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Em(e){return e=wE(Math.abs(e)),e?e[1]:NaN}function obe(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function abe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var lbe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sh(e){if(!(t=lbe.exec(e)))throw new Error("invalid format: "+e);var t;return new rD({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sh.prototype=rD.prototype;function rD(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}rD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ube(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var TQ;function cbe(e,t){var n=wE(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(TQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+wE(e,Math.max(0,t+s-1))[0]}function Oz(e,t){var n=wE(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Mz={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:sbe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Oz(e*100,t),r:Oz,s:cbe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Dz(e){return e}var Nz=Array.prototype.map,Iz=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function RQ(e){var t=e.grouping===void 0||e.thousands===void 0?Dz:obe(Nz.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Dz:abe(Nz.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Sh(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(v=!0,w="g"):Mz[w]||(b===void 0&&(b=12),x=!0,w="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=g==="$"?r:/[%p]/.test(w)?o:"",k=Mz[w],$=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function F(O){var B=C,D=S,N,A,P;if(w==="c")D=k(O)+D,O="";else{O=+O;var j=O<0||1/O<0;if(O=isNaN(O)?l:k(Math.abs(O),b),x&&(O=ube(O)),j&&+O==0&&p!=="+"&&(j=!1),B=(j?p==="("?p:a:p==="-"||p==="("?"":p)+B,D=(w==="s"?Iz[8+TQ/3]:"")+D+(j&&p==="("?")":""),$){for(N=-1,A=O.length;++N<A;)if(P=O.charCodeAt(N),48>P||P>57){D=(P===46?i+O.slice(N+1):O.slice(N))+D,O=O.slice(0,N);break}}}v&&!m&&(O=t(O,1/0));var z=B.length+O.length+D.length,U=z<y?new Array(y-z+1).join(d):"";switch(v&&m&&(O=t(U+O,U.length?y-D.length:1/0),U=""),h){case"<":O=B+O+D+U;break;case"=":O=B+U+O+D;break;case"^":O=U.slice(0,z=U.length>>1)+B+O+D+U.slice(z);break;default:O=U+B+O+D;break}return s(O)}return F.toString=function(){return f+""},F}function c(f,d){var h=u((f=Sh(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Em(d)/3)))*3,g=Math.pow(10,-p),m=Iz[8+p/3];return function(y){return h(g*y)+m}}return{format:u,formatPrefix:c}}var Lw,ex,iD;fbe({thousands:",",grouping:[3],currency:["$",""]});function fbe(e){return Lw=RQ(e),ex=Lw.format,iD=Lw.formatPrefix,Lw}function FQ(e){return Math.max(0,-Em(Math.abs(e)))}function PQ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Em(t)/3)))*3-Em(Math.abs(e)))}function OQ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Em(t)-Em(e))+1}const y5=new Date,v5=new Date;function or(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),t(s,a),e(s);while(u<s&&s<o);return l},i.filter=s=>or(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(y5.setTime(+s),v5.setTime(+o),e(y5),e(v5),Math.floor(n(y5,v5))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const Cm=or(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Cm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?or(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Cm);Cm.range;const au=1e3,fo=au*60,lu=fo*60,Ru=lu*24,sD=Ru*7,Lz=Ru*30,b5=Ru*365,na=or(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*au)},(e,t)=>(t-e)/au,e=>e.getUTCSeconds());na.range;const tx=or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*au)},(e,t)=>{e.setTime(+e+t*fo)},(e,t)=>(t-e)/fo,e=>e.getMinutes());tx.range;const nx=or(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fo)},(e,t)=>(t-e)/fo,e=>e.getUTCMinutes());nx.range;const rx=or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*au-e.getMinutes()*fo)},(e,t)=>{e.setTime(+e+t*lu)},(e,t)=>(t-e)/lu,e=>e.getHours());rx.range;const ix=or(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*lu)},(e,t)=>(t-e)/lu,e=>e.getUTCHours());ix.range;const cl=or(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fo)/Ru,e=>e.getDate()-1);cl.range;const yu=or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ru,e=>e.getUTCDate()-1);yu.range;const MQ=or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ru,e=>Math.floor(e/Ru));MQ.range;function tp(e){return or(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*fo)/sD)}const np=tp(0),SE=tp(1),dbe=tp(2),hbe=tp(3),km=tp(4),pbe=tp(5),gbe=tp(6);np.range;SE.range;dbe.range;hbe.range;km.range;pbe.range;gbe.range;function rp(e){return or(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/sD)}const ip=rp(0),EE=rp(1),mbe=rp(2),ybe=rp(3),_m=rp(4),vbe=rp(5),bbe=rp(6);ip.range;EE.range;mbe.range;ybe.range;_m.range;vbe.range;bbe.range;const $m=or(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$m.range;const Am=or(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Am.range;const ha=or(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:or(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ha.range;const pa=or(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());pa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:or(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});pa.range;function DQ(e,t,n,r,i,s){const o=[[na,1,au],[na,5,5*au],[na,15,15*au],[na,30,30*au],[s,1,fo],[s,5,5*fo],[s,15,15*fo],[s,30,30*fo],[i,1,lu],[i,3,3*lu],[i,6,6*lu],[i,12,12*lu],[r,1,Ru],[r,2,2*Ru],[n,1,sD],[t,1,Lz],[t,3,3*Lz],[e,1,b5]];function a(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),p=h?h.range(u,+c+1):[];return d?p.reverse():p}function l(u,c,f){const d=Math.abs(c-u)/f,h=F0(([,,m])=>m).right(o,d);if(h===o.length)return e.every(vf(u/b5,c/b5,f));if(h===0)return Cm.every(Math.max(vf(u,c,f),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[xbe,wbe]=DQ(pa,Am,ip,MQ,ix,nx),[Sbe,Ebe]=DQ(ha,$m,np,cl,rx,tx),Nr="year",ls="quarter",ai="month",nr="week",us="date",ri="day",Sl="dayofyear",Is="hours",Ls="minutes",Eo="seconds",ga="milliseconds",oD=[Nr,ls,ai,nr,us,ri,Sl,Is,Ls,Eo,ga],x5=oD.reduce((e,t,n)=>(e[t]=1+n,e),{});function aD(e){const t=xe(e).slice(),n={};return t.length||ee("Missing time unit."),t.forEach(i=>{Se(x5,i)?n[i]=1:ee(`Invalid time unit: ${i}.`)}),(n[nr]||n[ri]?1:0)+(n[ls]||n[ai]||n[us]?1:0)+(n[Sl]?1:0)>1&&ee(`Incompatible time units: ${e}`),t.sort((i,s)=>x5[i]-x5[s]),t}const Cbe={[Nr]:"%Y ",[ls]:"Q%q ",[ai]:"%b ",[us]:"%d ",[nr]:"W%U ",[ri]:"%a ",[Sl]:"%j ",[Is]:"%H:00",[Ls]:"00:%M",[Eo]:":%S",[ga]:".%L",[`${Nr}-${ai}`]:"%Y-%m ",[`${Nr}-${ai}-${us}`]:"%Y-%m-%d ",[`${Is}-${Ls}`]:"%H:%M"};function NQ(e,t){const n=et({},Cbe,t),r=aD(e),i=r.length;let s="",o=0,a,l;for(o=0;o<i;)for(a=r.length;a>o;--a)if(l=r.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const Od=new Date;function lD(e){return Od.setFullYear(e),Od.setMonth(0),Od.setDate(1),Od.setHours(0,0,0,0),Od}function IQ(e){return zQ(new Date(e))}function LQ(e){return SF(new Date(e))}function zQ(e){return cl.count(lD(e.getFullYear())-1,e)}function SF(e){return np.count(lD(e.getFullYear())-1,e)}function EF(e){return lD(e).getDay()}function kbe(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function jQ(e){return UQ(new Date(e))}function BQ(e){return CF(new Date(e))}function UQ(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return yu.count(t-1,e)}function CF(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ip.count(t-1,e)}function kF(e){return Od.setTime(Date.UTC(e,0,1)),Od.getUTCDay()}function _be(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function VQ(e,t,n,r,i){const s=t||1,o=yt(e),a=(y,v,b)=>(b=b||y,$be(n[b],r[b],y===o&&s,v)),l=new Date,u=da(e),c=u[Nr]?a(Nr):di(2012),f=u[ai]?a(ai):u[ls]?a(ls):Pc,d=u[nr]&&u[ri]?a(ri,1,nr+ri):u[nr]?a(nr,1):u[ri]?a(ri,1):u[us]?a(us,1):u[Sl]?a(Sl,1):$0,h=u[Is]?a(Is):Pc,p=u[Ls]?a(Ls):Pc,g=u[Eo]?a(Eo):Pc,m=u[ga]?a(ga):Pc;return function(y){l.setTime(+y);const v=c(l);return i(v,f(l),d(l,v),h(l),p(l),g(l),m(l))}}function $be(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Tm(e,t,n){return t+e*7-(n+6)%7}const Abe={[Nr]:e=>e.getFullYear(),[ls]:e=>Math.floor(e.getMonth()/3),[ai]:e=>e.getMonth(),[us]:e=>e.getDate(),[Is]:e=>e.getHours(),[Ls]:e=>e.getMinutes(),[Eo]:e=>e.getSeconds(),[ga]:e=>e.getMilliseconds(),[Sl]:e=>zQ(e),[nr]:e=>SF(e),[nr+ri]:(e,t)=>Tm(SF(e),e.getDay(),EF(t)),[ri]:(e,t)=>Tm(1,e.getDay(),EF(t))},Tbe={[ls]:e=>3*e,[nr]:(e,t)=>Tm(e,0,EF(t))};function WQ(e,t){return VQ(e,t||1,Abe,Tbe,kbe)}const Rbe={[Nr]:e=>e.getUTCFullYear(),[ls]:e=>Math.floor(e.getUTCMonth()/3),[ai]:e=>e.getUTCMonth(),[us]:e=>e.getUTCDate(),[Is]:e=>e.getUTCHours(),[Ls]:e=>e.getUTCMinutes(),[Eo]:e=>e.getUTCSeconds(),[ga]:e=>e.getUTCMilliseconds(),[Sl]:e=>UQ(e),[nr]:e=>CF(e),[ri]:(e,t)=>Tm(1,e.getUTCDay(),kF(t)),[nr+ri]:(e,t)=>Tm(CF(e),e.getUTCDay(),kF(t))},Fbe={[ls]:e=>3*e,[nr]:(e,t)=>Tm(e,0,kF(t))};function HQ(e,t){return VQ(e,t||1,Rbe,Fbe,_be)}const Pbe={[Nr]:ha,[ls]:$m.every(3),[ai]:$m,[nr]:np,[us]:cl,[ri]:cl,[Sl]:cl,[Is]:rx,[Ls]:tx,[Eo]:na,[ga]:Cm},Obe={[Nr]:pa,[ls]:Am.every(3),[ai]:Am,[nr]:ip,[us]:yu,[ri]:yu,[Sl]:yu,[Is]:ix,[Ls]:nx,[Eo]:na,[ga]:Cm};function P0(e){return Pbe[e]}function O0(e){return Obe[e]}function qQ(e,t,n){return e?e.offset(t,n):void 0}function GQ(e,t,n){return qQ(P0(e),t,n)}function XQ(e,t,n){return qQ(O0(e),t,n)}function YQ(e,t,n,r){return e?e.range(t,n,r):void 0}function KQ(e,t,n,r){return YQ(P0(e),t,n,r)}function QQ(e,t,n,r){return YQ(O0(e),t,n,r)}const d1=1e3,h1=d1*60,p1=h1*60,r_=p1*24,Mbe=r_*7,zz=r_*30,_F=r_*365,JQ=[Nr,ai,us,Is,Ls,Eo,ga],g1=JQ.slice(0,-1),m1=g1.slice(0,-1),y1=m1.slice(0,-1),Dbe=y1.slice(0,-1),Nbe=[Nr,nr],jz=[Nr,ai],ZQ=[Nr],Sy=[[g1,1,d1],[g1,5,5*d1],[g1,15,15*d1],[g1,30,30*d1],[m1,1,h1],[m1,5,5*h1],[m1,15,15*h1],[m1,30,30*h1],[y1,1,p1],[y1,3,3*p1],[y1,6,6*p1],[y1,12,12*p1],[Dbe,1,r_],[Nbe,1,Mbe],[jz,1,zz],[jz,3,3*zz],[ZQ,1,_F]];function eJ(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Zb(t))/n;let i=F0(a=>a[2]).right(Sy,r),s,o;return i===Sy.length?(s=ZQ,o=vf(t[0]/_F,t[1]/_F,n)):i?(i=Sy[r/Sy[i-1][2]<Sy[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=JQ,o=Math.max(vf(t[0],t[1],n),1)),{units:s,step:o}}function w5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function S5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ey(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function tJ(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,u=Cy(i),c=ky(i),f=Cy(s),d=ky(s),h=Cy(o),p=ky(o),g=Cy(a),m=ky(a),y=Cy(l),v=ky(l),b={a:j,A:z,b:U,B:X,c:null,d:qz,e:qz,f:sxe,g:gxe,G:yxe,H:nxe,I:rxe,j:ixe,L:nJ,m:oxe,M:axe,p:K,q:pe,Q:Yz,s:Kz,S:lxe,u:uxe,U:cxe,V:fxe,w:dxe,W:hxe,x:null,X:null,y:pxe,Y:mxe,Z:vxe,"%":Xz},x={a:se,A:_e,b:Ze,B:Ct,c:null,d:Gz,e:Gz,f:Sxe,g:Pxe,G:Mxe,H:bxe,I:xxe,j:wxe,L:iJ,m:Exe,M:Cxe,p:Nn,q:ur,Q:Yz,s:Kz,S:kxe,u:_xe,U:$xe,V:Axe,w:Txe,W:Rxe,x:null,X:null,y:Fxe,Y:Oxe,Z:Dxe,"%":Xz},w={a:F,A:O,b:B,B:D,c:N,d:Wz,e:Wz,f:Jbe,g:Vz,G:Uz,H:Hz,I:Hz,j:Xbe,L:Qbe,m:Gbe,M:Ybe,p:$,q:qbe,Q:exe,s:txe,S:Kbe,u:Bbe,U:Ube,V:Vbe,w:jbe,W:Wbe,x:A,X:P,y:Vz,Y:Uz,Z:Hbe,"%":Zbe};b.x=C(n,b),b.X=C(r,b),b.c=C(t,b),x.x=C(n,x),x.X=C(r,x),x.c=C(t,x);function C(be,Ne){return function(We){var ae=[],In=-1,St=0,Qn=be.length,hn,Vr,nc;for(We instanceof Date||(We=new Date(+We));++In<Qn;)be.charCodeAt(In)===37&&(ae.push(be.slice(St,In)),(Vr=Bz[hn=be.charAt(++In)])!=null?hn=be.charAt(++In):Vr=hn==="e"?" ":"0",(nc=Ne[hn])&&(hn=nc(We,Vr)),ae.push(hn),St=In+1);return ae.push(be.slice(St,In)),ae.join("")}}function S(be,Ne){return function(We){var ae=Ey(1900,void 0,1),In=k(ae,be,We+="",0),St,Qn;if(In!=We.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(Ne&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(St=S5(Ey(ae.y,0,1)),Qn=St.getUTCDay(),St=Qn>4||Qn===0?EE.ceil(St):EE(St),St=yu.offset(St,(ae.V-1)*7),ae.y=St.getUTCFullYear(),ae.m=St.getUTCMonth(),ae.d=St.getUTCDate()+(ae.w+6)%7):(St=w5(Ey(ae.y,0,1)),Qn=St.getDay(),St=Qn>4||Qn===0?SE.ceil(St):SE(St),St=cl.offset(St,(ae.V-1)*7),ae.y=St.getFullYear(),ae.m=St.getMonth(),ae.d=St.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),Qn="Z"in ae?S5(Ey(ae.y,0,1)).getUTCDay():w5(Ey(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(Qn+5)%7:ae.w+ae.U*7-(Qn+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,S5(ae)):w5(ae)}}function k(be,Ne,We,ae){for(var In=0,St=Ne.length,Qn=We.length,hn,Vr;In<St;){if(ae>=Qn)return-1;if(hn=Ne.charCodeAt(In++),hn===37){if(hn=Ne.charAt(In++),Vr=w[hn in Bz?Ne.charAt(In++):hn],!Vr||(ae=Vr(be,We,ae))<0)return-1}else if(hn!=We.charCodeAt(ae++))return-1}return ae}function $(be,Ne,We){var ae=u.exec(Ne.slice(We));return ae?(be.p=c.get(ae[0].toLowerCase()),We+ae[0].length):-1}function F(be,Ne,We){var ae=h.exec(Ne.slice(We));return ae?(be.w=p.get(ae[0].toLowerCase()),We+ae[0].length):-1}function O(be,Ne,We){var ae=f.exec(Ne.slice(We));return ae?(be.w=d.get(ae[0].toLowerCase()),We+ae[0].length):-1}function B(be,Ne,We){var ae=y.exec(Ne.slice(We));return ae?(be.m=v.get(ae[0].toLowerCase()),We+ae[0].length):-1}function D(be,Ne,We){var ae=g.exec(Ne.slice(We));return ae?(be.m=m.get(ae[0].toLowerCase()),We+ae[0].length):-1}function N(be,Ne,We){return k(be,t,Ne,We)}function A(be,Ne,We){return k(be,n,Ne,We)}function P(be,Ne,We){return k(be,r,Ne,We)}function j(be){return o[be.getDay()]}function z(be){return s[be.getDay()]}function U(be){return l[be.getMonth()]}function X(be){return a[be.getMonth()]}function K(be){return i[+(be.getHours()>=12)]}function pe(be){return 1+~~(be.getMonth()/3)}function se(be){return o[be.getUTCDay()]}function _e(be){return s[be.getUTCDay()]}function Ze(be){return l[be.getUTCMonth()]}function Ct(be){return a[be.getUTCMonth()]}function Nn(be){return i[+(be.getUTCHours()>=12)]}function ur(be){return 1+~~(be.getUTCMonth()/3)}return{format:function(be){var Ne=C(be+="",b);return Ne.toString=function(){return be},Ne},parse:function(be){var Ne=S(be+="",!1);return Ne.toString=function(){return be},Ne},utcFormat:function(be){var Ne=C(be+="",x);return Ne.toString=function(){return be},Ne},utcParse:function(be){var Ne=S(be+="",!0);return Ne.toString=function(){return be},Ne}}}var Bz={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,Ibe=/^%/,Lbe=/[\\^$*+?|[\]().{}]/g;function $t(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function zbe(e){return e.replace(Lbe,"\\$&")}function Cy(e){return new RegExp("^(?:"+e.map(zbe).join("|")+")","i")}function ky(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function jbe(e,t,n){var r=wr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Bbe(e,t,n){var r=wr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ube(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Vbe(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Wbe(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Uz(e,t,n){var r=wr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Vz(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Hbe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function qbe(e,t,n){var r=wr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Gbe(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Wz(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Xbe(e,t,n){var r=wr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Hz(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Ybe(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Kbe(e,t,n){var r=wr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Qbe(e,t,n){var r=wr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Jbe(e,t,n){var r=wr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Zbe(e,t,n){var r=Ibe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function exe(e,t,n){var r=wr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function txe(e,t,n){var r=wr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function qz(e,t){return $t(e.getDate(),t,2)}function nxe(e,t){return $t(e.getHours(),t,2)}function rxe(e,t){return $t(e.getHours()%12||12,t,2)}function ixe(e,t){return $t(1+cl.count(ha(e),e),t,3)}function nJ(e,t){return $t(e.getMilliseconds(),t,3)}function sxe(e,t){return nJ(e,t)+"000"}function oxe(e,t){return $t(e.getMonth()+1,t,2)}function axe(e,t){return $t(e.getMinutes(),t,2)}function lxe(e,t){return $t(e.getSeconds(),t,2)}function uxe(e){var t=e.getDay();return t===0?7:t}function cxe(e,t){return $t(np.count(ha(e)-1,e),t,2)}function rJ(e){var t=e.getDay();return t>=4||t===0?km(e):km.ceil(e)}function fxe(e,t){return e=rJ(e),$t(km.count(ha(e),e)+(ha(e).getDay()===4),t,2)}function dxe(e){return e.getDay()}function hxe(e,t){return $t(SE.count(ha(e)-1,e),t,2)}function pxe(e,t){return $t(e.getFullYear()%100,t,2)}function gxe(e,t){return e=rJ(e),$t(e.getFullYear()%100,t,2)}function mxe(e,t){return $t(e.getFullYear()%1e4,t,4)}function yxe(e,t){var n=e.getDay();return e=n>=4||n===0?km(e):km.ceil(e),$t(e.getFullYear()%1e4,t,4)}function vxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+$t(t/60|0,"0",2)+$t(t%60,"0",2)}function Gz(e,t){return $t(e.getUTCDate(),t,2)}function bxe(e,t){return $t(e.getUTCHours(),t,2)}function xxe(e,t){return $t(e.getUTCHours()%12||12,t,2)}function wxe(e,t){return $t(1+yu.count(pa(e),e),t,3)}function iJ(e,t){return $t(e.getUTCMilliseconds(),t,3)}function Sxe(e,t){return iJ(e,t)+"000"}function Exe(e,t){return $t(e.getUTCMonth()+1,t,2)}function Cxe(e,t){return $t(e.getUTCMinutes(),t,2)}function kxe(e,t){return $t(e.getUTCSeconds(),t,2)}function _xe(e){var t=e.getUTCDay();return t===0?7:t}function $xe(e,t){return $t(ip.count(pa(e)-1,e),t,2)}function sJ(e){var t=e.getUTCDay();return t>=4||t===0?_m(e):_m.ceil(e)}function Axe(e,t){return e=sJ(e),$t(_m.count(pa(e),e)+(pa(e).getUTCDay()===4),t,2)}function Txe(e){return e.getUTCDay()}function Rxe(e,t){return $t(EE.count(pa(e)-1,e),t,2)}function Fxe(e,t){return $t(e.getUTCFullYear()%100,t,2)}function Pxe(e,t){return e=sJ(e),$t(e.getUTCFullYear()%100,t,2)}function Oxe(e,t){return $t(e.getUTCFullYear()%1e4,t,4)}function Mxe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?_m(e):_m.ceil(e),$t(e.getUTCFullYear()%1e4,t,4)}function Dxe(){return"+0000"}function Xz(){return"%"}function Yz(e){return+e}function Kz(e){return Math.floor(+e/1e3)}var jp,uD,oJ,cD,aJ;Nxe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nxe(e){return jp=tJ(e),uD=jp.format,oJ=jp.parse,cD=jp.utcFormat,aJ=jp.utcParse,jp}function v1(e){const t={};return n=>t[n]||(t[n]=e(n))}function Ixe(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Lxe(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Lxe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function lJ(e){const t=v1(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Sh(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Ixe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Sh(o??",f");const a=vf(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=PQ(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=OQ(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=FQ(a))||(o.precision=u-(o.type==="%")*2);break}}return t(o)}}}let $F;uJ();function uJ(){return $F=lJ({format:ex,formatPrefix:iD})}function cJ(e){return lJ(RQ(e))}function CE(e){return arguments.length?$F=cJ(e):$F}function Qz(e,t,n){n=n||{},ve(n)||ee(`Invalid time multi-format specifier: ${n}`);const r=t(Eo),i=t(Ls),s=t(Is),o=t(us),a=t(nr),l=t(ai),u=t(ls),c=t(Nr),f=e(n[ga]||".%L"),d=e(n[Eo]||":%S"),h=e(n[Ls]||"%I:%M"),p=e(n[Is]||"%I %p"),g=e(n[us]||n[ri]||"%a %d"),m=e(n[nr]||"%b %d"),y=e(n[ai]||"%B"),v=e(n[ls]||"%B"),b=e(n[Nr]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:s(x)<x?h:o(x)<x?p:l(x)<x?a(x)<x?g:m:c(x)<x?u(x)<x?y:v:b)(x)}function fJ(e){const t=v1(e.format),n=v1(e.utcFormat);return{timeFormat:r=>we(r)?t(r):Qz(t,P0,r),utcFormat:r=>we(r)?n(r):Qz(n,O0,r),timeParse:v1(e.parse),utcParse:v1(e.utcParse)}}let AF;dJ();function dJ(){return AF=fJ({format:uD,parse:oJ,utcFormat:cD,utcParse:aJ})}function hJ(e){return fJ(tJ(e))}function Dv(e){return arguments.length?AF=hJ(e):AF}const TF=(e,t)=>et({},e,t);function pJ(e,t){const n=e?cJ(e):CE(),r=t?hJ(t):Dv();return TF(n,r)}function fD(e,t){const n=arguments.length;return n&&n!==2&&ee("defaultLocale expects either zero or two arguments."),n?TF(CE(e),Dv(t)):TF(CE(),Dv())}function zxe(){return uJ(),dJ(),fD()}const jxe=/^(data:|([A-Za-z]+:)?\/\/)/,Bxe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Uxe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Jz="file://";function Vxe(e,t){return n=>({options:n||{},sanitize:Hxe,load:Wxe,fileAccess:!!t,file:qxe(t),http:Xxe(e)})}async function Wxe(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Hxe(e,t){t=et({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=Bxe.test(e.replace(Uxe,""));(e==null||typeof e!="string"||!a)&&ee("Sanitize failure, invalid URI: "+de(e));const l=jxe.test(e);return(o=t.baseURL)&&!l&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Jz))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(Jz.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function qxe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):Gxe}async function Gxe(){ee("No file system access.")}function Xxe(e){return e?async function(t,n){const r=et({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?tt(s[i])?s[i]():s.text():ee(s.status+""+s.statusText)}:Yxe}async function Yxe(){ee("No HTTP fetch method available.")}const Kxe=e=>e!=null&&e===e,Qxe=e=>e==="true"||e==="false"||e===!0||e===!1,Jxe=e=>!Number.isNaN(Date.parse(e)),gJ=e=>!Number.isNaN(+e)&&!(e instanceof Date),Zxe=e=>gJ(e)&&Number.isInteger(+e),RF={boolean:eD,integer:ii,number:ii,date:tD,string:nD,unknown:fi},zw=[Qxe,Zxe,gJ,Jxe],ewe=["boolean","integer","number","date"];function mJ(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=zw.length,i=zw.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&Kxe(l)&&!zw[a](l)&&(i[a]=0,++o,o===zw.length))return"string";return ewe[i.reduce((s,o)=>s===0?o:s,0)-1]}function yJ(e,t){return t.reduce((n,r)=>(n[r]=mJ(e,r),n),{})}function Zz(e){const t=function(n,r){const i={delimiter:e};return dD(n,r?et(r,i):i)};return t.responseType="text",t}function dD(e,t){return t.header&&(e=t.header.map(de).join(t.delimiter)+`
`+e),ove(t.delimiter).parse(e+"")}dD.responseType="text";function twe(e){return typeof Buffer=="function"&&tt(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function hD(e,t){const n=t&&t.property?wo(t.property):fi;return ve(e)&&!twe(e)?nwe(n(e),t):n(JSON.parse(e))}hD.responseType="json";function nwe(e,t){return!te(e)&&cQ(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const rwe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function vJ(e,t){let n,r,i,s;return e=hD(e,t),t&&t.feature?(n=Lve,i=t.feature):t&&t.mesh?(n=jve,i=t.mesh,s=rwe[t.filter]):ee("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):ee("Invalid TopoJSON object: "+i),r&&r.features||[r]}vJ.responseType="json";const cS={dsv:dD,csv:Zz(","),tsv:Zz("	"),json:hD,topojson:vJ};function pD(e,t){return arguments.length>1?(cS[e]=t,this):Se(cS,e)?cS[e]:null}function bJ(e){const t=pD(e);return t&&t.responseType||"text"}function xJ(e,t,n,r){t=t||{};const i=pD(t.type||"json");return i||ee("Unknown data format type: "+t.type),e=i(e,t),t.parse&&iwe(e,t.parse,n,r),Se(e,"columns")&&delete e.columns,e}function iwe(e,t,n,r){if(!e.length)return;const i=Dv();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,l,u,c,f;t==="auto"&&(t=yJ(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!RF[p])throw Error("Illegal format pattern: "+h+":"+p);return RF[p]});for(l=0,c=e.length,f=s.length;l<c;++l)for(o=e[l],u=0;u<f;++u)a=s[u],o[a]=d[u](o[a])}const i_=Vxe(typeof fetch<"u"&&fetch,null);function s_(e){const t=e||fi,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function fS(e,t){try{await t(e)}catch(n){e.error(n)}}const wJ=Symbol("vega_id");let swe=1;function o_(e){return!!(e&&Me(e))}function Me(e){return e[wJ]}function SJ(e,t){return e[wJ]=t,e}function Dt(e){const t=e===Object(e)?e:{data:e};return Me(t)?t:SJ(t,swe++)}function gD(e){return a_(e,Dt({}))}function a_(e,t){for(const n in e)t[n]=e[n];return t}function EJ(e,t){return SJ(t,Me(e))}function sp(e,t){return e?t?(n,r)=>e(n,r)||Me(t(n))-Me(t(r)):(n,r)=>e(n,r)||Me(n)-Me(r):null}function CJ(e){return e&&e.constructor===op}function op(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:op,insert(a){const l=xe(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=tt(a)?r:t,u=xe(a),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(a,l,u){const c={field:l,value:di(u)};return tt(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return tt(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},c={};let f,d,h,p,g,m;for(f=0,d=l.length;f<d;++f)u[Me(l[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],u[Me(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],l.forEach(v=>{p(v)&&(u[Me(v)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],m=Me(g),u[m]?u[m]=1:a.add.push(Dt(e[f]));for(f=0,d=l.length;f<d;++f)g=l[f],u[Me(g)]<0&&a.rem.push(g);function y(v,b,x){x?v[b]=x(v):a.encode=b,o||(c[Me(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=u[Me(g)],m>0&&(y(g,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,l.forEach(v=>{p(v)&&u[Me(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?l.filter(v=>u[Me(v)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const dS="_:mod:_";function l_(){Object.defineProperty(this,dS,{writable:!0,value:{}})}l_.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[dS];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=te(n)?1+n.length:-1),i},modified(e,t){const n=this[dS];if(arguments.length){if(te(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[dS]={},this}};let owe=0;const awe="pulse",lwe=new l_,uwe=1,cwe=2;function Jt(e,t,n,r){this.id=++owe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function ej(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Jt.prototype={targets(){return this._targets||(this._targets=s_(Jb))},set(e){return this.value!==e?(this.value=e,1):0},skip:ej(uwe),modified:ej(cwe),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new l_,i=this._argops=this._argops||[],s=[];let o,a,l,u;const c=(f,d,h)=>{h instanceof Jt?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===awe)xe(a).forEach(f=>{f instanceof Jt?f!==this&&(f.targets().add(this),s.push(f)):ee("Pulse parameters must be operator instances.")}),this.source=a;else if(te(a))for(r.set(o,-1,Array(l=a.length)),u=0;u<l;++u)c(o,u,a[u]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||lwe,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function fwe(e,t,n,r){let i=1,s;return e instanceof Jt?s=e:e&&e.prototype instanceof Jt?s=new e:tt(e)?s=new Jt(null,e):(i=0,s=new Jt(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function dwe(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let hwe=0;function u_(e,t,n){this.id=++hwe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function bc(e,t,n){return new u_(e,t,n)}u_.prototype={_filter:So,_apply:fi,targets(){return this._targets||(this._targets=s_(Jb))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=bc(e);return this.targets().add(t),t},apply(e){const t=bc(null,e);return this.targets().add(t),t},merge(){const e=bc();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=bc();return this.targets().add(bc(null,null,JM(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(bc(null,null,()=>n=!0)),t.targets().add(bc(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=So,this._targets=null}};function pwe(e,t,n,r){const i=this,s=bc(n,r),o=function(u){u.dataflow=i;try{s.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=xe(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,o);return s}function gwe(e,t){const n=this.locale();return xJ(e,t,n.timeParse,n.utcParse)}function mwe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function ywe(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:bJ(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function vwe(e,t,n){const r=this,i=r._pending||bwe(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(So).insert(s.data||[])),i.done(),s}function bwe(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const xwe={skip:!0};function wwe(e,t,n,r,i){return(e instanceof Jt?Ewe:Swe)(this,e,t,n,r,i),this}function Swe(e,t,n,r,i,s){const o=et({},s,xwe);let a,l;tt(n)||(n=di(n)),r===void 0?a=u=>e.touch(n(u)):tt(r)?(l=new Jt(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),f=l.value;CJ(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=u=>e.update(n(u),r,o),t.apply(a)}function Ewe(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Jt(null,Cwe(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Cwe(e,t){return t=tt(t)?t:di(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function kwe(e){e.rank=++this._rank}function _we(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&ee("Cycle detected in dataflow graph.")}const kE={},Wa=1,Cc=2,Jl=4,$we=Wa|Cc,tj=Wa|Jl,Bp=Wa|Cc|Jl,nj=8,_y=16,rj=32,ij=64;function tf(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function E5(e,t){const n=[];return Ec(e,t,r=>n.push(r)),n}function sj(e,t){const n={};return e.visit(t,r=>{n[Me(r)]=1}),r=>n[Me(r)]?null:r}function jw(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}tf.prototype={StopPropagation:kE,ADD:Wa,REM:Cc,MOD:Jl,ADD_REM:$we,ADD_MOD:tj,ALL:Bp,REFLOW:nj,SOURCE:_y,NO_SOURCE:rj,NO_FIELDS:ij,fork(e){return new tf(this.dataflow).init(this,e)},clone(){const e=this.fork(Bp);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Bp|_y)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new tf(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&ij)&&(n.fields=e.fields),t&Wa?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Cc?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Jl?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&rj?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Bp;return t&Wa&&this.add.length||t&Cc&&this.rem.length||t&Jl&&this.mod.length},reflow(e){if(e)return this.fork(Bp).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Jl,sj(this,Wa))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return te(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?te(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Wa&&(n.addF=jw(n.addF,t)),e&Cc&&(n.remF=jw(n.remF,t)),e&Jl&&(n.modF=jw(n.modF,t)),e&_y&&(n.srcF=jw(n.srcF,t)),n},materialize(e){e=e||Bp;const t=this;return e&Wa&&t.addF&&(t.add=E5(t.add,t.addF),t.addF=null),e&Cc&&t.remF&&(t.rem=E5(t.rem,t.remF),t.remF=null),e&Jl&&t.modF&&(t.mod=E5(t.mod,t.modF),t.modF=null),e&_y&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&_y)return Ec(n.source,n.srcF,r),n;e&Wa&&Ec(n.add,n.addF,r),e&Cc&&Ec(n.rem,n.remF,r),e&Jl&&Ec(n.mod,n.modF,r);const i=n.source;if(e&nj&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Ec(i,sj(n,tj),r):Ec(i,n.srcF,r))}return n}};function mD(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const l in o.fields)a[l]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}he(mD,tf,{fork(e){const t=new tf(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?te(e)?e.some(r=>n[r]):n[e]:0},filter(){ee("MultiPulse does not support filtering.")},materialize(){ee("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Awe(e,t,n){const r=this,i=[];if(r._pulse)return kJ(r);if(r._pending&&await r._pending,t&&await fS(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new tf(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=s_(Jb);let o=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=kE),l!==kE&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await fS(r,c[f].callback)}return n&&await fS(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Twe(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Rwe(e,t,n){return this._pulse?kJ(this):(this.evaluate(e,t,n),this)}function Fwe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function kJ(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Pwe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Owe(e,t){const n=e.source,r=this._clock;return n&&te(n)?new mD(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Mwe(this._pulse,n&&n.pulse)}function Mwe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==kE&&(e.source=t.source),e)}const yD={skip:!1,force:!1};function Dwe(e,t){const n=t||yD;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Nwe(e,t,n){const r=n||yD;return(e.set(t)||r.force)&&this.touch(e,r),this}function Iwe(e,t,n){this.touch(e,n||yD);const r=new tf(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Lwe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),_J(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,zwe(t,0,e)):r=n,r}}}function _J(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function zwe(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,_J(e,r,t,n)}function jg(){this.logger(GM()),this.logLevel(Zk),this._clock=0,this._rank=0,this._locale=fD();try{this._loader=i_()}catch{}this._touched=s_(Jb),this._input={},this._pulse=null,this._heap=Lwe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function $y(e){return function(){return this._log[e].apply(this,arguments)}}jg.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:$y("error"),warn:$y("warn"),info:$y("info"),debug:$y("debug"),logLevel:$y("level"),cleanThreshold:1e4,add:fwe,connect:dwe,rank:kwe,rerank:_we,pulse:Iwe,touch:Dwe,update:Nwe,changeset:op,ingest:mwe,parse:gwe,preload:vwe,request:ywe,events:pwe,on:wwe,evaluate:Awe,run:Rwe,runAsync:Twe,runAfter:Fwe,_enqueue:Pwe,_getPulse:Owe};function J(e,t){Jt.call(this,e,null,t)}he(J,Jt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Rm={};function $J(e){const t=AJ(e);return t&&t.Definition||null}function AJ(e){return e=e&&e.toLowerCase(),Se(Rm,e)?Rm[e]:null}function*TJ(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function vD(e,t,n){const r=Float64Array.from(TJ(e,n));return r.sort(mu),t.map(i=>kQ(r,i))}function bD(e,t){return vD(e,[.25,.5,.75],t)}function xD(e,t){const n=e.length,r=Xve(e,t),i=bD(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function RJ(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,l,u,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+g)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Co=Math.random;function jwe(e){Co=e}function FJ(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(TJ(e,r)),s=i.length,o=t;let a,l,u,c;for(u=0,c=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=i[~~(Co()*s)];c[u]=a/s}return c.sort(mu),[wF(c,n/2),wF(c,1-n/2)]}function PJ(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,l=r(e[0]),u=l,c=l+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(u=(l+u)/2;o<a;++o)s[o]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?Bwe(s,t+t/4):s}function Bwe(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function Uwe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Vwe(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Co())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const OJ=Math.sqrt(2*Math.PI),Wwe=Math.SQRT2;let Ay=NaN;function c_(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(Ay===Ay)n=Ay,Ay=NaN;else{do n=Co()*2-1,r=Co()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,Ay=r*s}return e+n*t}function wD(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*OJ)}function f_(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function d_(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Wwe*Hwe(2*e-1)}function Hwe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function SD(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>c_(n,r),pdf:s=>wD(s,n,r),cdf:s=>f_(s,n,r),icdf:s=>d_(s,n,r)};return i.mean(e).stdev(t)}function ED(e,t){const n=SD();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=xD(e)),i):t},sample(){return e[~~(Co()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function CD(e,t){return e=e||0,t=t??1,Math.exp(e+c_()*t)}function kD(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*OJ*e)}function _D(e,t,n){return f_(Math.log(e),t,n)}function $D(e,t,n){return Math.exp(d_(e,t,n))}function MJ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>CD(n,r),pdf:s=>kD(s,n,r),cdf:s=>_D(s,n,r),icdf:s=>$D(s,n,r)};return i.mean(e).stdev(t)}function DJ(e,t){let n=0,r;function i(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Co();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(o<l){a=e[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function AD(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Co()}function TD(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function RD(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function FD(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function NJ(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>AD(n,r),pdf:s=>TD(s,n,r),cdf:s=>RD(s,n,r),icdf:s=>FD(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function PD(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function sx(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function h_(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,l=0,u=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,l+=(c-l)/a,u+=(f-u)/a;for(a=0;a<i;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function ox(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function M0(e,t,n,r,i){let s=0,o=0;return ox(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;s+=u*u,o+=c*c}),1-s/o}function OD(e,t,n){let r=0,i=0,s=0,o=0,a=0;ox(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const l=sx(r,i,s,o),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:M0(e,t,n,i,u)}}function IJ(e,t,n){let r=0,i=0,s=0,o=0,a=0;ox(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const l=sx(r,i,s,o),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:M0(e,t,n,i,u)}}function LJ(e,t,n){const[r,i,s,o]=h_(e,t,n);let a=0,l=0,u=0,c=0,f=0,d,h,p;ox(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,l+=(p-l)/f,u+=(p*h-u)/f,c+=(d*p-c)/f});const[g,m]=sx(l/o,a/o,u/o,c/o),y=v=>Math.exp(g+m*(v-s));return{coef:[Math.exp(g-m*s),m],predict:y,rSquared:M0(e,t,n,o,y)}}function zJ(e,t,n){let r=0,i=0,s=0,o=0,a=0,l=0;ox(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++l,r+=(h-r)/l,i+=(p-i)/l,s+=(h*p-s)/l,o+=(h*h-o)/l,a+=(d-a)/l});const u=sx(r,i,s,o),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:M0(e,t,n,a,c)}}function MD(e,t,n){const[r,i,s,o]=h_(e,t,n),a=r.length;let l=0,u=0,c=0,f=0,d=0,h,p,g,m;for(h=0;h<a;)p=r[h],g=i[h++],m=p*p,l+=(m-l)/h,u+=(m*p-u)/h,c+=(m*m-c)/h,f+=(p*g-f)/h,d+=(m*g-d)/h;const y=c-l*l,v=l*y-u*u,b=(d*l-f*u)/v,x=(f*y-d*u)/v,w=-b*l,C=S=>(S=S-s,b*S*S+x*S+w+o);return{coef:[w-x*s+b*s*s+o,x-2*b*s,b],predict:C,rSquared:M0(e,t,n,o,C)}}function jJ(e,t,n,r){if(r===0)return PD(e,t,n);if(r===1)return OD(e,t,n);if(r===2)return MD(e,t,n);const[i,s,o,a]=h_(e,t,n),l=i.length,u=[],c=[],f=r+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d)*s[p];for(u.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d+h);m[h]=g}c.push(m)}c.push(u);const y=Gwe(c),v=b=>{b-=o;let x=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)x+=y[d]*Math.pow(b,d);return x};return{coef:qwe(f,y,-o,a),predict:v,rSquared:M0(e,t,n,a,v)}}function qwe(e,t,n,r){const i=Array(e);let s,o,a,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],l=1,i[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*l;return i[0]+=r,i}function Gwe(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const oj=2,aj=1e-12;function BJ(e,t,n,r){const[i,s,o,a]=h_(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=oj;){const p=[0,u-1];for(let m=0;m<l;++m){const y=i[m],v=p[0],b=p[1],x=y-i[v]>i[b]-y?v:b;let w=0,C=0,S=0,k=0,$=0;const F=1/Math.abs(i[x]-y||1);for(let D=v;D<=b;++D){const N=i[D],A=s[D],P=Xwe(Math.abs(y-N)*F)*d[D],j=N*P;w+=P,C+=j,S+=A*P,k+=A*j,$+=N*j}const[O,B]=sx(C/w,S/w,k/w,$/w);c[m]=O+B*y,f[m]=Math.abs(s[m]-c[m]),Ywe(i,m+1,p)}if(h===oj)break;const g=_Q(f);if(Math.abs(g)<aj)break;for(let m=0,y,v;m<l;++m)y=f[m]/(6*g),d[m]=y>=1?aj:(v=1-y*y)*v}return Kwe(i,c,o,a)}function Xwe(e){return(e=1-e*e*e)*e*e}function Ywe(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Kwe(e,t,n,r){const i=e.length,s=[];let o=0,a=0,l=[],u;for(;o<i;++o)u=e[o]+n,l[0]===u?l[1]+=(t[o]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[o]],s.push(l));return l[1]+=r,s}const Qwe=.5*Math.PI/180;function p_(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],s=t[0],o=t[1],a=o-s,l=a/r,u=[i(s)],c=[];if(n===r){for(let g=1;g<r;++g)u.push(i(s+g/n*a));return u.push(i(o)),u}else{c.push(i(o));for(let g=n;--g>0;)c.push(i(s+g/n*a))}let f=u[0],d=c[c.length-1];const h=1/a,p=Jwe(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=l&&Zwe(f,g,d,h,p)>Qwe?c.push(g):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function Jwe(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function Zwe(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function e2e(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function FF(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:e2e(e)}function UJ(e,t,n){return n||e+(t?"_"+t:"")}const C5=()=>{},t2e={init:C5,add:C5,rem:C5,idx:0},Nv={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},ax=Object.keys(Nv).filter(e=>e!=="__count__");function n2e(e,t){return(n,r)=>et({name:e,aggregate_param:r,out:n||e},t2e,t)}[...ax,"__count__"].forEach(e=>{Nv[e]=n2e(e,Nv[e])});function VJ(e,t,n){return Nv[e](n,t)}function WJ(e,t){return e.idx-t.idx}function r2e(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Nv[i]())})};return e.forEach(n),Object.values(t).sort(WJ)}function i2e(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function s2e(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function o2e(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function a2e(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function HJ(e,t){const n=t||fi,r=r2e(e),i=e.slice().sort(WJ);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=i2e,s.prototype.add=s2e,s.prototype.rem=o2e,s.prototype.set=a2e,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function DD(e){this._key=e?wo(e):Me,this.reset()}const Br=DD.prototype;Br.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Br.add=function(e){this._add.push(e)};Br.rem=function(e){this._rem.push(e)};Br.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,l,u;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,l=0;a<r;++a)o[n(u=e[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};Br.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Se(n,s)||(n[s]=1,++i);return i};Br.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=lQ(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Br.argmin=function(e){return this.extent(e)[0]||{}};Br.argmax=function(e){return this.extent(e)[1]||{}};Br.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Br.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Br.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=bD(this.values(),e),this._get=e),this._q};Br.q1=function(e){return this.quartile(e)[0]};Br.q2=function(e){return this.quartile(e)[1]};Br.q3=function(e){return this.quartile(e)[2]};Br.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=FJ(this.values(),1e3,.05,e),this._get=e),this._ci};Br.ci0=function(e){return this.ci(e)[0]};Br.ci1=function(e){return this.ci(e)[1]};function bf(e){J.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}bf.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ax},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};he(bf,J,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let l,u,c,f;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][f=c[n[u]]]=f}s(e._prev),s(t);function o(a,l,u){const c=n[u],f=r[u++];for(const d in f){const h=a?a+"|"+d:d;l[c]=f[d],u<i?o(h,l,u):t[h]||e.cell(h,l)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=xe(oi(v)),x=b.length;let w=0,C;for(;w<x;++w)r[C=b[w]]||(r[C]=1,t.push(C))}this._dims=xe(e.groupby),this._dnames=this._dims.map(v=>{const b=Dn(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:FF(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=s.length,c={};let f,d,h,p,g,m,y;for(u!==o.length&&ee("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&ee("Null aggregate field specified."),g=Dn(f),m=UJ(d,g,l[y]),n.push(m),d==="count"){this._counts.push(m);continue}p=c[g],p||(i(f),p=c[g]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(VJ(d,h,m))}return this._measures=this._measures.map(v=>HJ(v,v.field)),Object.create(null)},cellkey:FF(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new DD),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?EJ(t.tuple,s):Dt(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let l,u,c,f;if(r)for(u in r)l=r[u],(!i||l.num)&&o.push(l.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&i?o:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const l2e=1e-14;function ND(e){J.call(this,null,e)}ND.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};he(ND,J,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],l=o[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(oi(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const f=r(c);c[a]=f,c[l]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=RJ(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const l=function(u){let c=ii(t(u));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(l2e+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=ms(l,oi(t),e.name||"bin_"+Dn(t))}});function qJ(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),u&&l&&i.sort(l),s.length&&(i=l?pQ(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function ID(e){J.call(this,[],e)}ID.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};he(ID,J,{transform(e,t){const n=t.fork(t.ALL),r=qJ(Me,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(sp(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function GJ(e){Jt.call(this,null,u2e,e)}he(GJ,Jt);function u2e(e){return this.value&&!e.modified()?this.value:QM(e.fields,e.orders)}function LD(e){J.call(this,null,e)}LD.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function c2e(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}he(LD,J,{transform(e,t){const n=f=>d=>{for(var h=c2e(a(d),e.case,s)||[],p,g=0,m=h.length;g<m;++g)o.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,l=e.as||["text","count"],u=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=Dt({}),l[i]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,r[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(t)}});function zD(e){J.call(this,null,e)}zD.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};he(zD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=f2e(a,i,s,e.filter||So)):n.mod=a,n.source=this.value,n.modifies(r)}});function f2e(e,t,n,r){for(var i=[],s={},o=e.length,a=0,l,u;a<o;++a)for(s[t]=u=e[a],l=0;l<o;++l)s[n]=e[l],r(s)&&(i.push(Dt(s)),s={},s[t]=u);return i}const lj={kde:ED,mixture:DJ,normal:SD,lognormal:MJ,uniform:NJ},d2e="distributions",uj="function",h2e="field";function XJ(e,t){const n=e[uj];Se(lj,n)||ee("Unknown distribution function: "+n);const r=lj[n]();for(const i in e)i===h2e?r.data((e.from||t()).map(e[i])):i===d2e?r[i](e[i].map(s=>XJ(s,t))):typeof r[i]===uj&&r[i](e[i]);return r}function jD(e){J.call(this,null,e)}const YJ=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],p2e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:YJ},{name:"weights",type:"number",array:!0}]};jD.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:YJ.concat(p2e)},{name:"as",type:"string",array:!0,default:["value","density"]}]};he(jD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=XJ(e.distribution,g2e(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&ee("Invalid density method: "+o),!e.extent&&!r.data&&ee("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],l=e.extent||wl(r.data()),u=p_(o,l,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Dt(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function g2e(e){return()=>e.materialize(e.SOURCE).source}function KJ(e,t){return e?e.map((n,r)=>t[r]||Dn(n)):null}function BD(e,t,n){const r=[],i=f=>f(l);let s,o,a,l,u,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)l=e[o],u=t.map(i),c=s[u],c||(s[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const QJ="bin";function UD(e){J.call(this,null,e)}UD.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:QJ}]};const m2e=(e,t)=>Zb(wl(e,t))/30;he(UD,J,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=BD(t.source,e.groupby,fi),i=e.smooth||!1,s=e.field,o=e.step||m2e(n,s),a=sp((p,g)=>s(p)-s(g)),l=e.as||QJ,u=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<u;++d){const p=r[d].sort(a);h=-1;for(const g of PJ(p,o,i,s))g<c&&(c=g),g>f&&(f=g),p[++h][l]=g}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(l)}});function JJ(e){Jt.call(this,null,y2e,e),this.modified(!0)}he(JJ,Jt);function y2e(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ms(n=>t(n,e),oi(t),Dn(t))}function VD(e){J.call(this,[void 0,void 0],e)}VD.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};he(VD,J,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=ii(r(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Dn(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function WD(e,t){Jt.call(this,e),this.parent=t,this.count=0}he(WD,Jt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function g_(e){J.call(this,{},e),this._keys=R0();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}he(g_,J,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Se(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new WD(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Me(l),c=s.get(u);c!==void 0&&(s.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);s.set(Me(l),u),a(u).add(l)}),o||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=Me(l),c=s.get(u),f=r(l);c===f?a(f).mod(l):(s.set(u,f),a(c).rem(l),a(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(s.get(Me(l))).mod(l)}),o&&t.visit(t.REFLOW,l=>{const u=Me(l),c=s.get(u),f=r(l);c!==f&&(s.set(u,f),a(c).rem(l),a(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function ZJ(e){Jt.call(this,null,v2e,e)}he(ZJ,Jt);function v2e(e){return this.value&&!e.modified()?this.value:te(e.name)?xe(e.name).map(t=>wo(t)):wo(e.name,e.as)}function HD(e){J.call(this,R0(),e)}HD.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};he(HD,J,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,f=>{const d=Me(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{l(f,e)?s.push(f):r.set(Me(f),1)});function c(f){const d=Me(f),h=l(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):u&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function qD(e){J.call(this,[],e)}qD.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};he(qD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=KJ(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<u;++c){for(d=gD(a),f=0;f<o;++f)d[i[f]]=(h=l[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function GD(e){J.call(this,[],e)}GD.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};he(GD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Dn),s=e.as||["key","value"],o=s[0],a=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=gD(u),f[o]=i[c],f[a]=r[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function XD(e){J.call(this,null,e)}XD.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};he(XD,J,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function eZ(e){J.call(this,[],e)}he(eZ,J,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=Dt(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const Bw={value:"value",median:_Q,mean:ebe,min:xF,max:sh},b2e=[];function YD(e){J.call(this,[],e)}YD.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function x2e(e){var t=e.method||Bw.value,n;if(Bw[t]==null)ee("Unrecognized imputation method: "+t);else return t===Bw.value?(n=e.value!==void 0?e.value:0,()=>n):Bw[t]}function w2e(e){const t=e.field;return n=>n?t(n):NaN}he(YD,J,{transform(e,t){var n=t.fork(t.ALL),r=x2e(e),i=w2e(e),s=Dn(e.field),o=Dn(e.key),a=(e.groupby||[]).map(Dn),l=S2e(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,d,h,p,g,m,y,v,b,x,w;for(m=0,b=l.length;m<b;++m)for(d=l[m],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(g=l.domain[v],w={_impute:!0},y=0,x=p.length;y<x;++y)w[a[y]]=p[y];w[o]=g,w[s]=Number.isNaN(h)?h=r(d,i):h,u.push(Dt(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function S2e(e,t,n,r){var i=y=>y(m),s=[],o=r?r.slice():[],a={},l={},u,c,f,d,h,p,g,m;for(o.forEach((y,v)=>a[y]=v+1),d=0,g=e.length;d<g;++d)m=e[d],p=n(m),h=a[p]||(a[p]=o.push(p)),c=(u=t?t.map(i):b2e)+"",(f=l[c])||(f=l[c]=[],s.push(f),f.values=u),f[h-1]=m;return s.domain=o,s}function KD(e){bf.call(this,e)}KD.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ax},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};he(KD,bf,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{et(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function QD(e){J.call(this,null,e)}QD.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};he(QD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=BD(r,e.groupby,e.field),s=(e.groupby||[]).map(Dn),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&ee("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=wl(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=ED(h,o)[a],g=e.counts?h.length:1,m=c||wl(h);p_(p,m,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[l[0]]=y[0],v[l[1]]=y[1]*g,u.push(Dt(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function tZ(e){Jt.call(this,null,E2e,e)}he(tZ,Jt);function E2e(e){return this.value&&!e.modified()?this.value:ZM(e.fields,e.flat)}function nZ(e){J.call(this,[],e),this._pending=null}he(nZ,J,{transform(e,t){const n=t.dataflow;return this._pending?k5(this,t,this._pending):C2e(e)?t.StopPropagation:e.values?k5(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=xe(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>k5(this,t,xe(r.data)))}});function C2e(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function k5(e,t,n){n.forEach(Dt);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function JD(e){J.call(this,{},e)}JD.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};he(JD,J,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let l=o?t.SOURCE:t.ADD,u=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&ee('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&ee('The "as" parameter has too few output field names.'),c=c||i.map(Dn),f=function(p){for(var g=0,m=0,y,v;g<a;++g)if(v=r.get(n[g](p)),v==null)for(y=0;y<d;++y,++m)p[c[m]]=s;else for(y=0;y<d;++y,++m)p[c[m]]=i[y](v)}):(c||ee("Missing output field names."),f=function(p){for(var g=0,m;g<a;++g)m=r.get(n[g](p)),p[c[g]]=m??s}),o?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,f),u.modifies(c)}});function rZ(e){Jt.call(this,null,k2e,e)}he(rZ,Jt);function k2e(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function iZ(e){Jt.call(this,null,_2e,e)}he(iZ,Jt);function _2e(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function sZ(e){J.call(this,null,e)}he(sZ,J,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ZD(e){bf.call(this,e)}ZD.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:ax,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};he(ZD,bf,{_transform:bf.prototype.transform,transform(e,t){return this._transform($2e(e,t),t)}});function $2e(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=oi(n).concat(oi(r)),o=T2e(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>A2e(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function A2e(e,t,n,r){return ms(i=>t(i)===e?n(i):NaN,r,e+"")}function T2e(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(n_),t?i.slice(0,t):i}function oZ(e){g_.call(this,e)}he(oZ,g_,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Me(s),n,t,s);return(e.modified("field")||r&&t.modified(oi(r)))&&ee("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Dt(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function e6(e){J.call(this,null,e)}e6.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};he(e6,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=KJ(e.fields,e.as||[]),s=r?(a,l)=>R2e(a,l,r,i):a_;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const l=Me(a);n.rem.push(o[l]),o[l]=null}),t.visit(t.ADD,a=>{const l=s(a,Dt({}));o[Me(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Me(a)]))}),n}});function R2e(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function aZ(e){J.call(this,null,e)}he(aZ,J,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function t6(e){J.call(this,null,e)}t6.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const F2e=1e-14;he(t6,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=BD(i,e.groupby,e.field),o=(e.groupby||[]).map(Dn),a=[],l=e.step||.01,u=e.probs||As(l/2,1-F2e,l),c=u.length;return s.forEach(f=>{const d=vD(f,u);for(let h=0;h<c;++h){const p={};for(let g=0;g<o.length;++g)p[o[g]]=f.dims[g];p[r[0]]=u[h],p[r[1]]=d[h],a.push(Dt(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function lZ(e){J.call(this,null,e)}he(lZ,J,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Me(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=gD(i);r[Me(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Me(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function n6(e){J.call(this,[],e),this.count=0}n6.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};he(n6,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Me(f)]=1,c),{});let o=this.value,a=this.count,l=0;function u(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Co()),d<o.length&&d>=l&&(f=o[d],s[Me(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Me(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Me(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(l=a=o.length,t.visit(t.SOURCE,c=>{s[Me(c)]||u(c)}),l=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Me(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Me(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=o.filter(c=>!s[Me(c)])),this.count=a,this.value=n.source=o,n}});function r6(e){J.call(this,null,e)}r6.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};he(r6,J,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=As(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Dt(s)}),n.add=t.add.concat(this.value),n}});function uZ(e){J.call(this,null,e),this.modified(!0)}he(uZ,J,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function i6(e){J.call(this,null,e)}const cZ=["unit0","unit1"];i6.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:oD,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:cZ}]};he(i6,J,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?O0:P0)(s.unit).offset,a=e.as||cZ,l=a[0],u=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(oi(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let m,y;g==null?(p[l]=null,r&&(p[u]=null)):(p[l]=m=y=s(g),r&&(p[u]=y=o(m,c)),m<f&&(f=m),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:eJ({extent:e.extent||wl(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=aD(r),o=this.value||{},a=(n?HQ:WQ)(s,i);return a.unit=yt(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function fZ(e){J.call(this,R0(),e)}he(fZ,J,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function dZ(e){J.call(this,null,e)}he(dZ,J,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(sp(e.sort)):t.source).map(e.field))}});function P2e(e,t,n,r){const i=Iv[e](t,n);return{init:i.init||Pc,update:function(s,o){o[r]=i.next(s)}}}const Iv={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Iv.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ee("ntile num must be greater than zero.");const n=Iv.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ee("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=O2e(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function O2e(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const M2e=Object.keys(Iv);function hZ(e){const t=xe(e.ops),n=xe(e.fields),r=xe(e.params),i=xe(e.aggregate_params),s=xe(e.as),o=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[];let d=!0;function h(p){xe(oi(p)).forEach(g=>l[g]=1)}h(e.sort),t.forEach((p,g)=>{const m=n[g],y=r[g],v=i[g]||null,b=Dn(m),x=UJ(p,b,s[g]);if(h(m),o.push(x),Se(Iv,p))a.push(P2e(p,m,y,x));else{if(m==null&&p!=="count"&&ee("Null aggregate field specified."),p==="count"){c.push(x);return}d=!1;let w=u[b];w||(w=u[b]=[],w.field=m,f.push(w)),w.push(VJ(p,v,x))}}),(c.length||f.length)&&(this.cell=D2e(f,c,d)),this.inputs=Object.keys(l)}const pZ=hZ.prototype;pZ.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};pZ.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function D2e(e,t,n){e=e.map(l=>HJ(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new DD;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)s[l].init()},r}function s6(e){J.call(this,{},e),this._mlen=0,this._mods=[]}s6.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:M2e.concat(ax)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};he(s6,J,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=sp(e.sort),i=FF(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new hZ(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)N2e(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=qJ(Me),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function N2e(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),l=a.length,u=s?F0(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||di(-1)};t.init();for(let f=0;f<l;++f)I2e(c,o,f,l),s&&L2e(c,u),t.update(c,a[f])}function I2e(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function L2e(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const z2e=Object.freeze(Object.defineProperty({__proto__:null,aggregate:bf,bin:ND,collect:ID,compare:GJ,countpattern:LD,cross:zD,density:jD,dotbin:UD,expression:JJ,extent:VD,facet:g_,field:ZJ,filter:HD,flatten:qD,fold:GD,formula:XD,generate:eZ,impute:YD,joinaggregate:KD,kde:QD,key:tZ,load:nZ,lookup:JD,multiextent:rZ,multivalues:iZ,params:sZ,pivot:ZD,prefacet:oZ,project:e6,proxy:aZ,quantile:t6,relay:lZ,sample:n6,sequence:r6,sieve:uZ,subflow:WD,timeunit:i6,tupleindex:fZ,values:dZ,window:s6},Symbol.toStringTag,{value:"Module"}));function It(e){return function(){return e}}const cj=Math.abs,Hr=Math.atan2,fd=Math.cos,j2e=Math.max,_5=Math.min,Ma=Math.sin,Bd=Math.sqrt,Kr=1e-12,Fm=Math.PI,_E=Fm/2,gZ=2*Fm;function B2e(e){return e>1?0:e<-1?Fm:Math.acos(e)}function fj(e){return e>=1?_E:e<=-1?-_E:Math.asin(e)}const PF=Math.PI,OF=2*PF,Cd=1e-6,U2e=OF-Cd;function mZ(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function V2e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return mZ;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let o6=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?mZ:V2e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,u=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Cd)if(!(Math.abs(f*l-u*c)>Cd)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=l*l+u*u,m=h*h+p*p,y=Math.sqrt(g),v=Math.sqrt(d),b=s*Math.tan((PF-Math.acos((g+d-m)/(2*y*v)))/2),x=b/v,w=b/y;Math.abs(x-1)>Cd&&this._append`L${t+x*c},${n+x*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+w*l},${this._y1=n+w*u}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Cd||Math.abs(this._y1-c)>Cd)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%OF+OF),d>U2e?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>Cd&&this._append`A${r},${r},0,${+(d>=PF)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function m_(){return new o6}m_.prototype=o6.prototype;function y_(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new o6(t)}function W2e(e){return e.innerRadius}function H2e(e){return e.outerRadius}function q2e(e){return e.startAngle}function G2e(e){return e.endAngle}function X2e(e){return e&&e.padAngle}function Y2e(e,t,n,r,i,s,o,a){var l=n-e,u=r-t,c=o-i,f=a-s,d=f*l-c*u;if(!(d*d<Kr))return d=(c*(t-s)-f*(e-i))/d,[e+d*l,t+d*u]}function Uw(e,t,n,r,i,s,o){var a=e-n,l=t-r,u=(o?s:-s)/Bd(a*a+l*l),c=u*l,f=-u*a,d=e+c,h=t+f,p=n+c,g=r+f,m=(d+p)/2,y=(h+g)/2,v=p-d,b=g-h,x=v*v+b*b,w=i-s,C=d*g-p*h,S=(b<0?-1:1)*Bd(j2e(0,w*w*x-C*C)),k=(C*b-v*S)/x,$=(-C*v-b*S)/x,F=(C*b+v*S)/x,O=(-C*v+b*S)/x,B=k-m,D=$-y,N=F-m,A=O-y;return B*B+D*D>N*N+A*A&&(k=F,$=O),{cx:k,cy:$,x01:-c,y01:-f,x11:k*(i/w-1),y11:$*(i/w-1)}}function K2e(){var e=W2e,t=H2e,n=It(0),r=null,i=q2e,s=G2e,o=X2e,a=null,l=y_(u);function u(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-_E,g=s.apply(this,arguments)-_E,m=cj(g-p),y=g>p;if(a||(a=c=l()),h<d&&(f=h,h=d,d=f),!(h>Kr))a.moveTo(0,0);else if(m>gZ-Kr)a.moveTo(h*fd(p),h*Ma(p)),a.arc(0,0,h,p,g,!y),d>Kr&&(a.moveTo(d*fd(g),d*Ma(g)),a.arc(0,0,d,g,p,y));else{var v=p,b=g,x=p,w=g,C=m,S=m,k=o.apply(this,arguments)/2,$=k>Kr&&(r?+r.apply(this,arguments):Bd(d*d+h*h)),F=_5(cj(h-d)/2,+n.apply(this,arguments)),O=F,B=F,D,N;if($>Kr){var A=fj($/d*Ma(k)),P=fj($/h*Ma(k));(C-=A*2)>Kr?(A*=y?1:-1,x+=A,w-=A):(C=0,x=w=(p+g)/2),(S-=P*2)>Kr?(P*=y?1:-1,v+=P,b-=P):(S=0,v=b=(p+g)/2)}var j=h*fd(v),z=h*Ma(v),U=d*fd(w),X=d*Ma(w);if(F>Kr){var K=h*fd(b),pe=h*Ma(b),se=d*fd(x),_e=d*Ma(x),Ze;if(m<Fm)if(Ze=Y2e(j,z,se,_e,K,pe,U,X)){var Ct=j-Ze[0],Nn=z-Ze[1],ur=K-Ze[0],be=pe-Ze[1],Ne=1/Ma(B2e((Ct*ur+Nn*be)/(Bd(Ct*Ct+Nn*Nn)*Bd(ur*ur+be*be)))/2),We=Bd(Ze[0]*Ze[0]+Ze[1]*Ze[1]);O=_5(F,(d-We)/(Ne-1)),B=_5(F,(h-We)/(Ne+1))}else O=B=0}S>Kr?B>Kr?(D=Uw(se,_e,j,z,h,B,y),N=Uw(K,pe,U,X,h,B,y),a.moveTo(D.cx+D.x01,D.cy+D.y01),B<F?a.arc(D.cx,D.cy,B,Hr(D.y01,D.x01),Hr(N.y01,N.x01),!y):(a.arc(D.cx,D.cy,B,Hr(D.y01,D.x01),Hr(D.y11,D.x11),!y),a.arc(0,0,h,Hr(D.cy+D.y11,D.cx+D.x11),Hr(N.cy+N.y11,N.cx+N.x11),!y),a.arc(N.cx,N.cy,B,Hr(N.y11,N.x11),Hr(N.y01,N.x01),!y))):(a.moveTo(j,z),a.arc(0,0,h,v,b,!y)):a.moveTo(j,z),!(d>Kr)||!(C>Kr)?a.lineTo(U,X):O>Kr?(D=Uw(U,X,K,pe,d,-O,y),N=Uw(j,z,se,_e,d,-O,y),a.lineTo(D.cx+D.x01,D.cy+D.y01),O<F?a.arc(D.cx,D.cy,O,Hr(D.y01,D.x01),Hr(N.y01,N.x01),!y):(a.arc(D.cx,D.cy,O,Hr(D.y01,D.x01),Hr(D.y11,D.x11),!y),a.arc(0,0,d,Hr(D.cy+D.y11,D.cx+D.x11),Hr(N.cy+N.y11,N.cx+N.x11),y),a.arc(N.cx,N.cy,O,Hr(N.y11,N.x11),Hr(N.y01,N.x01),!y))):a.arc(0,0,d,w,x,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Fm/2;return[fd(f)*c,Ma(f)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:It(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:It(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:It(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:It(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:It(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:It(+c),u):s},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:It(+c),u):o},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function yZ(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vZ(e){this._context=e}vZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function a6(e){return new vZ(e)}function bZ(e){return e[0]}function xZ(e){return e[1]}function wZ(e,t){var n=It(!0),r=null,i=a6,s=null,o=y_(a);e=typeof e=="function"?e:e===void 0?bZ:It(e),t=typeof t=="function"?t:t===void 0?xZ:It(t);function a(l){var u,c=(l=yZ(l)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,u,l),+t(f,u,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:It(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:It(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:It(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function SZ(e,t,n){var r=null,i=It(!0),s=null,o=a6,a=null,l=y_(u);e=typeof e=="function"?e:e===void 0?bZ:It(+e),t=typeof t=="function"?t:It(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?xZ:It(+n);function u(f){var d,h,p,g=(f=yZ(f)).length,m,y=!1,v,b=new Array(g),x=new Array(g);for(s==null&&(a=o(v=l())),d=0;d<=g;++d){if(!(d<g&&i(m=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(m,d,f),x[d]=+t(m,d,f),a.point(r?+r(m,d,f):b[d],n?+n(m,d,f):x[d]))}if(v)return a=null,v+""||null}function c(){return wZ().defined(i).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:It(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:It(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:It(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:It(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:It(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:It(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:It(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),u):s},u}const Q2e={draw(e,t){const n=Bd(t/Fm);e.moveTo(n,0),e.arc(0,0,n,0,gZ)}};function J2e(e,t){let n=null,r=y_(i);e=typeof e=="function"?e:It(e||Q2e),t=typeof t=="function"?t:It(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:It(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:It(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function xf(){}function $E(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function v_(e){this._context=e}v_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$E(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$E(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Z2e(e){return new v_(e)}function EZ(e){this._context=e}EZ.prototype={areaStart:xf,areaEnd:xf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$E(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eSe(e){return new EZ(e)}function CZ(e){this._context=e}CZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:$E(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tSe(e){return new CZ(e)}function kZ(e,t){this._basis=new v_(e),this._beta=t}kZ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const nSe=function e(t){function n(r){return t===1?new v_(r):new kZ(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function AE(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function l6(e,t){this._context=e,this._k=(1-t)/6}l6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:AE(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:AE(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rSe=function e(t){function n(r){return new l6(r,t)}return n.tension=function(r){return e(+r)},n}(0);function u6(e,t){this._context=e,this._k=(1-t)/6}u6.prototype={areaStart:xf,areaEnd:xf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:AE(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const iSe=function e(t){function n(r){return new u6(r,t)}return n.tension=function(r){return e(+r)},n}(0);function c6(e,t){this._context=e,this._k=(1-t)/6}c6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:AE(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const sSe=function e(t){function n(r){return new c6(r,t)}return n.tension=function(r){return e(+r)},n}(0);function f6(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Kr){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Kr){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*u+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function _Z(e,t){this._context=e,this._alpha=t}_Z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:f6(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const oSe=function e(t){function n(r){return t?new _Z(r,t):new l6(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function $Z(e,t){this._context=e,this._alpha=t}$Z.prototype={areaStart:xf,areaEnd:xf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:f6(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const aSe=function e(t){function n(r){return t?new $Z(r,t):new u6(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function AZ(e,t){this._context=e,this._alpha=t}AZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:f6(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lSe=function e(t){function n(r){return t?new AZ(r,t):new c6(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function TZ(e){this._context=e}TZ.prototype={areaStart:xf,areaEnd:xf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uSe(e){return new TZ(e)}function dj(e){return e<0?-1:1}function hj(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(dj(s)+dj(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function pj(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function $5(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function TE(e){this._context=e}TE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$5(this,this._t0,pj(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,$5(this,pj(this,n=hj(this,e,t)),n);break;default:$5(this,this._t0,n=hj(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function RZ(e){this._context=new FZ(e)}(RZ.prototype=Object.create(TE.prototype)).point=function(e,t){TE.prototype.point.call(this,t,e)};function FZ(e){this._context=e}FZ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function cSe(e){return new TE(e)}function fSe(e){return new RZ(e)}function PZ(e){this._context=e}PZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=gj(e),i=gj(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function gj(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function dSe(e){return new PZ(e)}function b_(e,t){this._context=e,this._t=t}b_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function hSe(e){return new b_(e,.5)}function pSe(e){return new b_(e,0)}function gSe(e){return new b_(e,1)}function nf(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const mSe=()=>typeof Image<"u"?Image:null;function Rl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function zf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const MF=Symbol("implicit");function d6(){var e=new Pz,t=[],n=[],r=MF;function i(s){let o=e.get(s);if(o===void 0){if(r!==MF)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Pz;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return d6(t,n).unknown(r)},Rl.apply(i,arguments),i}function D0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function lx(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function jf(){}var Eh=.7,Pm=1/Eh,Bg="\\s*([+-]?\\d+)\\s*",Lv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ySe=/^#([0-9a-f]{3,8})$/,vSe=new RegExp(`^rgb\\(${Bg},${Bg},${Bg}\\)$`),bSe=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),xSe=new RegExp(`^rgba\\(${Bg},${Bg},${Bg},${Lv}\\)$`),wSe=new RegExp(`^rgba\\(${fl},${fl},${fl},${Lv}\\)$`),SSe=new RegExp(`^hsl\\(${Lv},${fl},${fl}\\)$`),ESe=new RegExp(`^hsla\\(${Lv},${fl},${fl},${Lv}\\)$`),mj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};D0(jf,zv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:yj,formatHex:yj,formatHex8:CSe,formatHsl:kSe,formatRgb:vj,toString:vj});function yj(){return this.rgb().formatHex()}function CSe(){return this.rgb().formatHex8()}function kSe(){return OZ(this).formatHsl()}function vj(){return this.rgb().formatRgb()}function zv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ySe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bj(t):n===3?new hr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Vw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Vw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=vSe.exec(e))?new hr(t[1],t[2],t[3],1):(t=bSe.exec(e))?new hr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xSe.exec(e))?Vw(t[1],t[2],t[3],t[4]):(t=wSe.exec(e))?Vw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=SSe.exec(e))?Sj(t[1],t[2]/100,t[3]/100,1):(t=ESe.exec(e))?Sj(t[1],t[2]/100,t[3]/100,t[4]):mj.hasOwnProperty(e)?bj(mj[e]):e==="transparent"?new hr(NaN,NaN,NaN,0):null}function bj(e){return new hr(e>>16&255,e>>8&255,e&255,1)}function Vw(e,t,n,r){return r<=0&&(e=t=n=NaN),new hr(e,t,n,r)}function h6(e){return e instanceof jf||(e=zv(e)),e?(e=e.rgb(),new hr(e.r,e.g,e.b,e.opacity)):new hr}function wf(e,t,n,r){return arguments.length===1?h6(e):new hr(e,t,n,r??1)}function hr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}D0(hr,wf,lx(jf,{brighter(e){return e=e==null?Pm:Math.pow(Pm,e),new hr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Eh:Math.pow(Eh,e),new hr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new hr(oh(this.r),oh(this.g),oh(this.b),RE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xj,formatHex:xj,formatHex8:_Se,formatRgb:wj,toString:wj}));function xj(){return`#${Ud(this.r)}${Ud(this.g)}${Ud(this.b)}`}function _Se(){return`#${Ud(this.r)}${Ud(this.g)}${Ud(this.b)}${Ud((isNaN(this.opacity)?1:this.opacity)*255)}`}function wj(){const e=RE(this.opacity);return`${e===1?"rgb(":"rgba("}${oh(this.r)}, ${oh(this.g)}, ${oh(this.b)}${e===1?")":`, ${e})`}`}function RE(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function oh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ud(e){return e=oh(e),(e<16?"0":"")+e.toString(16)}function Sj(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Jo(e,t,n,r)}function OZ(e){if(e instanceof Jo)return new Jo(e.h,e.s,e.l,e.opacity);if(e instanceof jf||(e=zv(e)),!e)return new Jo;if(e instanceof Jo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Jo(o,a,l,e.opacity)}function FE(e,t,n,r){return arguments.length===1?OZ(e):new Jo(e,t,n,r??1)}function Jo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}D0(Jo,FE,lx(jf,{brighter(e){return e=e==null?Pm:Math.pow(Pm,e),new Jo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Eh:Math.pow(Eh,e),new Jo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new hr(A5(e>=240?e-240:e+120,i,r),A5(e,i,r),A5(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Jo(Ej(this.h),Ww(this.s),Ww(this.l),RE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=RE(this.opacity);return`${e===1?"hsl(":"hsla("}${Ej(this.h)}, ${Ww(this.s)*100}%, ${Ww(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ej(e){return e=(e||0)%360,e<0?e+360:e}function Ww(e){return Math.max(0,Math.min(1,e||0))}function A5(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const MZ=Math.PI/180,DZ=180/Math.PI,PE=18,NZ=.96422,IZ=1,LZ=.82521,zZ=4/29,Ug=6/29,jZ=3*Ug*Ug,$Se=Ug*Ug*Ug;function BZ(e){if(e instanceof dl)return new dl(e.l,e.a,e.b,e.opacity);if(e instanceof uu)return UZ(e);e instanceof hr||(e=h6(e));var t=P5(e.r),n=P5(e.g),r=P5(e.b),i=T5((.2225045*t+.7168786*n+.0606169*r)/IZ),s,o;return t===n&&n===r?s=o=i:(s=T5((.4360747*t+.3850649*n+.1430804*r)/NZ),o=T5((.0139322*t+.0971045*n+.7141733*r)/LZ)),new dl(116*i-16,500*(s-i),200*(i-o),e.opacity)}function OE(e,t,n,r){return arguments.length===1?BZ(e):new dl(e,t,n,r??1)}function dl(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}D0(dl,OE,lx(jf,{brighter(e){return new dl(this.l+PE*(e??1),this.a,this.b,this.opacity)},darker(e){return new dl(this.l-PE*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=NZ*R5(t),e=IZ*R5(e),n=LZ*R5(n),new hr(F5(3.1338561*t-1.6168667*e-.4906146*n),F5(-.9787684*t+1.9161415*e+.033454*n),F5(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function T5(e){return e>$Se?Math.pow(e,1/3):e/jZ+zZ}function R5(e){return e>Ug?e*e*e:jZ*(e-zZ)}function F5(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function P5(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ASe(e){if(e instanceof uu)return new uu(e.h,e.c,e.l,e.opacity);if(e instanceof dl||(e=BZ(e)),e.a===0&&e.b===0)return new uu(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*DZ;return new uu(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ME(e,t,n,r){return arguments.length===1?ASe(e):new uu(e,t,n,r??1)}function uu(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function UZ(e){if(isNaN(e.h))return new dl(e.l,0,0,e.opacity);var t=e.h*MZ;return new dl(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}D0(uu,ME,lx(jf,{brighter(e){return new uu(this.h,this.c,this.l+PE*(e??1),this.opacity)},darker(e){return new uu(this.h,this.c,this.l-PE*(e??1),this.opacity)},rgb(){return UZ(this).rgb()}}));var VZ=-.14861,p6=1.78277,g6=-.29227,x_=-.90649,jv=1.97294,Cj=jv*x_,kj=jv*p6,_j=p6*g6-x_*VZ;function TSe(e){if(e instanceof ah)return new ah(e.h,e.s,e.l,e.opacity);e instanceof hr||(e=h6(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(_j*r+Cj*t-kj*n)/(_j+Cj-kj),s=r-i,o=(jv*(n-i)-g6*s)/x_,a=Math.sqrt(o*o+s*s)/(jv*i*(1-i)),l=a?Math.atan2(o,s)*DZ-120:NaN;return new ah(l<0?l+360:l,a,i,e.opacity)}function DF(e,t,n,r){return arguments.length===1?TSe(e):new ah(e,t,n,r??1)}function ah(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}D0(ah,DF,lx(jf,{brighter(e){return e=e==null?Pm:Math.pow(Pm,e),new ah(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Eh:Math.pow(Eh,e),new ah(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*MZ,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new hr(255*(t+n*(VZ*r+p6*i)),255*(t+n*(g6*r+x_*i)),255*(t+n*(jv*r)),this.opacity)}}));function WZ(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function HZ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return WZ((n-r/t)*t,o,i,s,a)}}function qZ(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return WZ((n-r/t)*t,i,s,o,a)}}const w_=e=>()=>e;function GZ(e,t){return function(n){return e+n*t}}function RSe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function S_(e,t){var n=t-e;return n?GZ(e,n>180||n<-180?n-360*Math.round(n/360):n):w_(isNaN(e)?t:e)}function FSe(e){return(e=+e)==1?pr:function(t,n){return n-t?RSe(t,n,e):w_(isNaN(t)?n:t)}}function pr(e,t){var n=t-e;return n?GZ(e,n):w_(isNaN(e)?t:e)}const DE=function e(t){var n=FSe(t);function r(i,s){var o=n((i=wf(i)).r,(s=wf(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=pr(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function XZ(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=wf(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var PSe=XZ(HZ),OSe=XZ(qZ);function m6(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function YZ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function MSe(e,t){return(YZ(t)?m6:KZ)(e,t)}function KZ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Bf(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function QZ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Xo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function JZ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Bf(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var NF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,O5=new RegExp(NF.source,"g");function DSe(e){return function(){return e}}function NSe(e){return function(t){return e(t)+""}}function ZZ(e,t){var n=NF.lastIndex=O5.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=NF.exec(e))&&(i=O5.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Xo(r,i)})),n=O5.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?NSe(l[0].x):DSe(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function Bf(e,t){var n=typeof t,r;return t==null||n==="boolean"?w_(t):(n==="number"?Xo:n==="string"?(r=zv(t))?(t=r,DE):ZZ:t instanceof zv?DE:t instanceof Date?QZ:YZ(t)?m6:Array.isArray(t)?KZ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?JZ:Xo)(e,t)}function ISe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function LSe(e,t){var n=S_(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function N0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var $j=180/Math.PI,IF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eee(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*$j,skewX:Math.atan(l)*$j,scaleX:o,scaleY:a}}var Hw;function zSe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?IF:eee(t.a,t.b,t.c,t.d,t.e,t.f)}function jSe(e){return e==null||(Hw||(Hw=document.createElementNS("http://www.w3.org/2000/svg","g")),Hw.setAttribute("transform",e),!(e=Hw.transform.baseVal.consolidate()))?IF:(e=e.matrix,eee(e.a,e.b,e.c,e.d,e.e,e.f))}function tee(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Xo(u,f)},{i:g-2,x:Xo(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Xo(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Xo(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Xo(u,f)},{i:g-2,x:Xo(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,d),o(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)f[(m=d[p]).i]=m.x(h);return f.join("")}}}var BSe=tee(zSe,"px, ","px)","deg)"),USe=tee(jSe,", ",")",")"),VSe=1e-12;function Aj(e){return((e=Math.exp(e))+1/e)/2}function WSe(e){return((e=Math.exp(e))-1/e)/2}function HSe(e){return((e=Math.exp(2*e))-1)/(e+1)}const qSe=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-l,g=h*h+p*p,m,y;if(g<VSe)y=Math.log(d/u)/t,m=function(S){return[a+S*h,l+S*p,u*Math.exp(t*S*y)]};else{var v=Math.sqrt(g),b=(d*d-u*u+r*g)/(2*u*n*v),x=(d*d-u*u-r*g)/(2*d*n*v),w=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(x*x+1)-x);y=(C-w)/t,m=function(S){var k=S*y,$=Aj(w),F=u/(n*v)*($*HSe(t*k+w)-WSe(w));return[a+F*h,l+F*p,u*$/Aj(t*k+w)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function nee(e){return function(t,n){var r=e((t=FE(t)).h,(n=FE(n)).h),i=pr(t.s,n.s),s=pr(t.l,n.l),o=pr(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const ree=nee(S_);var iee=nee(pr);function see(e,t){var n=pr((e=OE(e)).l,(t=OE(t)).l),r=pr(e.a,t.a),i=pr(e.b,t.b),s=pr(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function oee(e){return function(t,n){var r=e((t=ME(t)).h,(n=ME(n)).h),i=pr(t.c,n.c),s=pr(t.l,n.l),o=pr(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const aee=oee(S_);var lee=oee(pr);function uee(e){return function t(n){n=+n;function r(i,s){var o=e((i=DF(i)).h,(s=DF(s)).h),a=pr(i.s,s.s),l=pr(i.l,s.l),u=pr(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const cee=uee(S_);var fee=uee(pr);function y6(e,t){t===void 0&&(t=e,e=Bf);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function GSe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const XSe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Bf,interpolateArray:MSe,interpolateBasis:HZ,interpolateBasisClosed:qZ,interpolateCubehelix:cee,interpolateCubehelixLong:fee,interpolateDate:QZ,interpolateDiscrete:ISe,interpolateHcl:aee,interpolateHclLong:lee,interpolateHsl:ree,interpolateHslLong:iee,interpolateHue:LSe,interpolateLab:see,interpolateNumber:Xo,interpolateNumberArray:m6,interpolateObject:JZ,interpolateRgb:DE,interpolateRgbBasis:PSe,interpolateRgbBasisClosed:OSe,interpolateRound:N0,interpolateString:ZZ,interpolateTransformCss:BSe,interpolateTransformSvg:USe,interpolateZoom:qSe,piecewise:y6,quantize:GSe},Symbol.toStringTag,{value:"Module"}));function YSe(e){return function(){return e}}function LF(e){return+e}var Tj=[0,1];function es(e){return e}function zF(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:YSe(isNaN(t)?NaN:.5)}function KSe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function QSe(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=zF(i,r),s=n(o,s)):(r=zF(r,i),s=n(s,o)),function(a){return s(r(a))}}function JSe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=zF(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=yf(e,a,1,r)-1;return s[l](i[l](a))}}function ux(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function E_(){var e=Tj,t=Tj,n=Bf,r,i,s,o=es,a,l,u;function c(){var d=Math.min(e.length,t.length);return o!==es&&(o=KSe(e[0],e[d-1])),a=d>2?JSe:QSe,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?s:(l||(l=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((u||(u=a(t,e.map(r),Xo)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,LF),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=N0,c()},f.clamp=function(d){return arguments.length?(o=d?!0:es,c()):o!==es},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function dee(){return E_()(es,es)}function hee(e,t,n,r){var i=vf(e,t,n),s;switch(r=Sh(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=PQ(i,o))&&(r.precision=s),iD(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=OQ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=FQ(i))&&(r.precision=s-(r.type==="%")*2);break}}return ex(r)}function ap(e){var t=e.domain;return e.ticks=function(n){var r=t();return vF(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return hee(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=bF(o,a,n),u===l)return r[i]=o,r[s]=a,t(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function v6(){var e=dee();return e.copy=function(){return ux(e,v6())},Rl.apply(e,arguments),ap(e)}function pee(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,LF),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return pee(e).unknown(t)},e=arguments.length?Array.from(e,LF):[0,1],ap(n)}function gee(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Rj(e){return Math.log(e)}function Fj(e){return Math.exp(e)}function ZSe(e){return-Math.log(-e)}function eEe(e){return-Math.exp(-e)}function tEe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function nEe(e){return e===10?tEe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function rEe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Pj(e){return(t,n)=>-e(-t,n)}function b6(e){const t=e(Rj,Fj),n=t.domain;let r=10,i,s;function o(){return i=rEe(r),s=nEe(r),n()[0]<0?(i=Pj(i),s=Pj(s),e(ZSe,eEe)):e(Rj,Fj),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=i(u),h=i(c),p,g;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/s(-d):p*s(d),!(g<u)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<u)){if(g>c)break;y.push(g)}y.length*2<m&&(y=vF(u,c,m))}else y=vF(d,h,Math.min(h-d,m)).map(s);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Sh(l)).precision==null&&(l.trim=!0),l=ex(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=()=>n(gee(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function mee(){const e=b6(E_()).domain([1,10]);return e.copy=()=>ux(e,mee()).base(e.base()),Rl.apply(e,arguments),e}function Oj(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Mj(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function x6(e){var t=1,n=e(Oj(t),Mj(t));return n.constant=function(r){return arguments.length?e(Oj(t=+r),Mj(t)):t},ap(n)}function yee(){var e=x6(E_());return e.copy=function(){return ux(e,yee()).constant(e.constant())},Rl.apply(e,arguments)}function Dj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function iEe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function sEe(e){return e<0?-e*e:e*e}function w6(e){var t=e(es,es),n=1;function r(){return n===1?e(es,es):n===.5?e(iEe,sEe):e(Dj(n),Dj(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ap(t)}function S6(){var e=w6(E_());return e.copy=function(){return ux(e,S6()).exponent(e.exponent())},Rl.apply(e,arguments),e}function oEe(){return S6.apply(null,arguments).exponent(.5)}function vee(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=kQ(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[yf(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(mu),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return vee().domain(e).range(t).unknown(r)},Rl.apply(s,arguments)}function bee(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[yf(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return bee().domain([e,t]).range(i).unknown(s)},Rl.apply(ap(o),arguments)}function xee(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[yf(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return xee().domain(e).range(t).unknown(n)},Rl.apply(i,arguments)}function aEe(e){return new Date(e)}function lEe(e){return e instanceof Date?+e:+new Date(+e)}function E6(e,t,n,r,i,s,o,a,l,u){var c=dee(),f=c.invert,d=c.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(C){return(l(C)<C?h:a(C)<C?p:o(C)<C?g:s(C)<C?m:r(C)<C?i(C)<C?y:v:n(C)<C?b:x)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,lEe)):d().map(aEe)},c.ticks=function(C){var S=d();return e(S[0],S[S.length-1],C??10)},c.tickFormat=function(C,S){return S==null?w:u(S)},c.nice=function(C){var S=d();return(!C||typeof C.range!="function")&&(C=t(S[0],S[S.length-1],C??10)),C?d(gee(S,C)):c},c.copy=function(){return ux(c,E6(e,t,n,r,i,s,o,a,l,u))},c}function uEe(){return Rl.apply(E6(Sbe,Ebe,ha,$m,np,cl,rx,tx,na,uD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cEe(){return Rl.apply(E6(xbe,wbe,pa,Am,ip,yu,ix,nx,na,cD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function C_(){var e=0,t=1,n,r,i,s,o=es,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(o=f,u):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),u):[o(0),o(1)]}}return u.range=c(Bf),u.rangeRound=c(N0),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function Uf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function C6(){var e=ap(C_()(es));return e.copy=function(){return Uf(e,C6())},zf.apply(e,arguments)}function wee(){var e=b6(C_()).domain([1,10]);return e.copy=function(){return Uf(e,wee()).base(e.base())},zf.apply(e,arguments)}function See(){var e=x6(C_());return e.copy=function(){return Uf(e,See()).constant(e.constant())},zf.apply(e,arguments)}function k6(){var e=w6(C_());return e.copy=function(){return Uf(e,k6()).exponent(e.exponent())},zf.apply(e,arguments)}function fEe(){return k6.apply(null,arguments).exponent(.5)}function k_(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,u=es,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-s)*(r*g<r*s?a:l),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(m){var y,v,b;return arguments.length?([y,v,b]=m,u=y6(g,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(Bf),h.rangeRound=p(N0),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function Eee(){var e=ap(k_()(es));return e.copy=function(){return Uf(e,Eee())},zf.apply(e,arguments)}function Cee(){var e=b6(k_()).domain([.1,1,10]);return e.copy=function(){return Uf(e,Cee()).base(e.base())},zf.apply(e,arguments)}function kee(){var e=x6(k_());return e.copy=function(){return Uf(e,kee()).constant(e.constant())},zf.apply(e,arguments)}function _6(){var e=w6(k_());return e.copy=function(){return Uf(e,_6()).exponent(e.exponent())},zf.apply(e,arguments)}function dEe(){return _6.apply(null,arguments).exponent(.5)}function Fl(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const hEe=Fl("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),pEe=Fl("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),gEe=Fl("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),mEe=Fl("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),yEe=Fl("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),vEe=Fl("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),bEe=Fl("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),xEe=Fl("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),wEe=Fl("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),SEe=Fl("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function $6(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const EEe="identity",Om="linear",Fu="log",cx="pow",fx="sqrt",__="symlog",Ch="time",kh="utc",hl="sequential",I0="diverging",Mm="quantile",$_="quantize",A_="threshold",A6="ordinal",jF="point",_ee="band",T6="bin-ordinal",ar="continuous",dx="discrete",hx="discretizing",Ro="interpolating",R6="temporal";function CEe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function kEe(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),o=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function F6(){const e=d6().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=$6(f,a,l);let g=r[d-0];i=(h-g)/(p||1),o&&(i=Math.floor(i)),g+=(h-g-i*(f-a))*u,s=i*(1-a),o&&(g=Math.round(g),s=Math.round(s));const m=As(f).map(y=>g+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],m=+f[1],y,v,b;if(!(g!==g||m!==m)&&(m<g&&(b=g,g=m,m=b),!(m<h[0]||g>r[1-d])))return y=Math.max(0,yf(h,g)-1),v=g===m?y:yf(h,m)-1,g-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return F6().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(l).align(u)},c()}function $ee(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return $ee(t())},e}function _Ee(){return $ee(F6().paddingInner(1))}var $Ee=Array.prototype.map;function AEe(e){return $Ee.call(e,ii)}const TEe=Array.prototype.slice;function Aee(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(yf(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=AEe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=TEe.call(r),n):t.slice()},n.tickFormat=function(r,i){return hee(e[0],yt(e),r??10,i)},n.copy=function(){return Aee().domain(n.domain()).range(n.range())},n}const NE=new Map,Tee=Symbol("vega_scale");function Ree(e){return e[Tee]=!0,e}function REe(e){return e&&e[Tee]===!0}function FEe(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?CEe(s):s.invertExtent?kEe(s):void 0),s.type=e,Ree(s)};return r.metadata=da(xe(n)),r}function At(e,t,n){return arguments.length>1?(NE.set(e,FEe(e,t,n)),this):Fee(e)?NE.get(e):void 0}At(EEe,pee);At(Om,v6,ar);At(Fu,mee,[ar,Fu]);At(cx,S6,ar);At(fx,oEe,ar);At(__,yee,ar);At(Ch,uEe,[ar,R6]);At(kh,cEe,[ar,R6]);At(hl,C6,[ar,Ro]);At(`${hl}-${Om}`,C6,[ar,Ro]);At(`${hl}-${Fu}`,wee,[ar,Ro,Fu]);At(`${hl}-${cx}`,k6,[ar,Ro]);At(`${hl}-${fx}`,fEe,[ar,Ro]);At(`${hl}-${__}`,See,[ar,Ro]);At(`${I0}-${Om}`,Eee,[ar,Ro]);At(`${I0}-${Fu}`,Cee,[ar,Ro,Fu]);At(`${I0}-${cx}`,_6,[ar,Ro]);At(`${I0}-${fx}`,dEe,[ar,Ro]);At(`${I0}-${__}`,kee,[ar,Ro]);At(Mm,vee,[hx,Mm]);At($_,bee,hx);At(A_,xee,hx);At(T6,Aee,[dx,hx]);At(A6,d6,dx);At(_ee,F6,dx);At(jF,_Ee,dx);function Fee(e){return NE.has(e)}function lp(e,t){const n=NE.get(e);return n&&n.metadata[t]}function P6(e){return lp(e,ar)}function Dm(e){return lp(e,dx)}function BF(e){return lp(e,hx)}function Pee(e){return lp(e,Fu)}function PEe(e){return lp(e,R6)}function Oee(e){return lp(e,Ro)}function Mee(e){return lp(e,Mm)}const OEe=["clamp","base","constant","exponent"];function Dee(e,t){const n=t[0],r=yt(t)-n;return function(i){return e(n+i*r)}}function T_(e,t,n){return y6(O6(t||"rgb",n),e)}function Nee(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function Iee(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?di(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=At(s)().domain([t,n]).range([0,1]),OEe.forEach(a=>e[a]?o[a](e[a]()):0),o)}function O6(e,t){const n=XSe[MEe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function MEe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const DEe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},NEe={accent:pEe,category10:hEe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:gEe,observable10:mEe,paired:yEe,pastel1:vEe,pastel2:bEe,set1:xEe,set2:wEe,set3:SEe,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function Lee(e){if(te(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function zee(e,t){for(const n in e)M6(n,t(e[n]))}const Nj={};zee(NEe,Lee);zee(DEe,e=>T_(Lee(e)));function M6(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Nj[e]=t,this):Nj[e]}const hS="symbol",IEe="discrete",LEe="gradient",zEe=e=>te(e)?e.map(t=>String(t)):String(e),jEe=(e,t)=>e[1]-t[1],BEe=(e,t)=>t[1]-e[1];function D6(e,t,n){let r;return _t(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Zb(e.domain())/n||1)+1))),ve(t)&&(r=t.step,t=t.interval),we(t)&&(t=e.type===Ch?P0(t):e.type==kh?O0(t):ee("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function jee(e,t,n){let r=e.range(),i=r[0],s=yt(r),o=jEe;if(i>s&&(r=s,s=i,i=r,o=BEe),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],yt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function N6(e,t){return e.bins?jee(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function Bee(e,t,n,r,i,s){const o=t.type;let a=zEe;if(o===Ch||i===Ch)a=e.timeFormat(r);else if(o===kh||i===kh)a=e.utcFormat(r);else if(Pee(o)){const l=e.formatFloat(r);if(s||t.bins)a=l;else{const u=Uee(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function Uee(e,t,n){const r=N6(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/s));return u*i<i-.5&&(u*=i),u<=o};return n?r.filter(a):a}const UF={[Mm]:"quantiles",[$_]:"thresholds",[A_]:"domain"},Vee={[Mm]:"quantiles",[$_]:"domain"};function Wee(e,t){return e.bins?WEe(e.bins):e.type===Fu?Uee(e,t,!0):UF[e.type]?VEe(e[UF[e.type]]()):N6(e,t)}function UEe(e,t,n){const r=t[Vee[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function VEe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function WEe(e){const t=e.slice(0,-1);return t.max=yt(e),t}const HEe=e=>UF[e.type]||e.bins;function Hee(e,t,n,r,i,s,o){const a=Vee[t.type]&&s!==Ch&&s!==kh?UEe(e,t,i):Bee(e,t,n,i,s,o);return r===hS&&HEe(t)?qEe(a):r===IEe?GEe(a):XEe(a)}const qEe=e=>(t,n,r)=>{const i=Ij(r[n+1],Ij(r.max,1/0)),s=Lj(t,e),o=Lj(i,e);return s&&o?s+" – "+o:o?"< "+o:"≥ "+s},Ij=(e,t)=>e??t,GEe=e=>(t,n)=>n?e(t):null,XEe=e=>t=>e(t),Lj=(e,t)=>Number.isFinite(e)?t(e):null;function YEe(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+yt(t),s=i-r;if(e.type===A_){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function KEe(e,t,n,r){const i=r||t.type;return we(n)&&PEe(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Ch?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===kh?e.utcFormat("%A, %d %B %Y, %X UTC"):Hee(e,t,5,null,n,r,!0)}function qee(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=KEe(e,t,n.format,n.formatType);if(BF(t.type)){const s=Wee(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Dm(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(yt(s))}`}}let Gee=0;function QEe(){Gee=0}const IE="p_";function I6(e){return e&&e.gradient}function Xee(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?IE:"";return i||(i=e.id="gradient_"+Gee++,r==="radial"?(e.x1=Da(e.x1,.5),e.y1=Da(e.y1,.5),e.r1=Da(e.r1,0),e.x2=Da(e.x2,.5),e.y2=Da(e.y2,.5),e.r2=Da(e.r2,.5),s=IE):(e.x1=Da(e.x1,0),e.y1=Da(e.y1,0),e.x2=Da(e.x2,1),e.y2=Da(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Da(e,t){return e??t}function Yee(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const zj={basis:{curve:Z2e},"basis-closed":{curve:eSe},"basis-open":{curve:tSe},bundle:{curve:nSe,tension:"beta",value:.85},cardinal:{curve:rSe,tension:"tension",value:0},"cardinal-open":{curve:sSe,tension:"tension",value:0},"cardinal-closed":{curve:iSe,tension:"tension",value:0},"catmull-rom":{curve:oSe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:aSe,tension:"alpha",value:.5},"catmull-rom-open":{curve:lSe,tension:"alpha",value:.5},linear:{curve:a6},"linear-closed":{curve:uSe},monotone:{horizontal:fSe,vertical:cSe},natural:{curve:dSe},step:{curve:hSe},"step-after":{curve:gSe},"step-before":{curve:pSe}};function L6(e,t,n){var r=Se(zj,e)&&zj[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const JEe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},ZEe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,eCe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,tCe=/^((\s+,?\s*)|(,\s*))/,nCe=/^[01]/;function Nm(e){const t=[];return(e.match(ZEe)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=JEe[s],a=rCe(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),l!==o){s==="m"&&(i=i==="M"?"L":"l");for(let u=o;u<l;u+=o)t.push([i,...a.slice(u,u+o)])}}),t}function rCe(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?nCe:eCe,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(tCe);l!==null&&(i+=l[0].length)}return r}const Sf=Math.PI/180,iCe=1e-14,Md=Math.PI/2,el=Math.PI*2,Up=Math.sqrt(3)/2;var M5={},D5={},Kee=[].join;function sCe(e,t,n,r,i,s,o,a,l){const u=Kee.call(arguments);if(M5[u])return M5[u];const c=o*Sf,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(l-t)*.5,p=d*(l-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,y=f/n,v=-f/r,b=d/r,x=m*a+y*l,w=v*a+b*l,C=m*e+y*t,S=v*e+b*t;let $=1/((C-x)*(C-x)+(S-w)*(S-w))-.25;$<0&&($=0);let F=Math.sqrt($);s==i&&(F=-F);const O=.5*(x+C)-F*(S-w),B=.5*(w+S)+F*(C-x),D=Math.atan2(w-B,x-O);let A=Math.atan2(S-B,C-O)-D;A<0&&s===1?A+=el:A>0&&s===0&&(A-=el);const P=Math.ceil(Math.abs(A/(Md+.001))),j=[];for(let z=0;z<P;++z){const U=D+z*A/P,X=D+(z+1)*A/P;j[z]=[O,B,U,X,n,r,f,d]}return M5[u]=j}function oCe(e){const t=Kee.call(e);if(D5[t])return D5[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7];const c=u*o,f=-l*a,d=l*o,h=u*a,p=Math.cos(i),g=Math.sin(i),m=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),x=8/3*b*b/Math.sin(v),w=n+p-x*g,C=r+g+x*p,S=n+m,k=r+y,$=S+x*y,F=k-x*m;return D5[t]=[c*w+f*C,d*w+h*C,c*$+f*F,d*$+h*F,c*S+f*k,d*S+h*k]}const Qs=["l",0,0,0,0,0,0,0];function aCe(e,t,n){const r=Qs[0]=e[0];if(r==="a"||r==="A")Qs[1]=t*e[1],Qs[2]=n*e[2],Qs[3]=e[3],Qs[4]=e[4],Qs[5]=e[5],Qs[6]=t*e[6],Qs[7]=n*e[7];else if(r==="h"||r==="H")Qs[1]=t*e[1];else if(r==="v"||r==="V")Qs[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Qs[i]=(i%2==1?t:n)*e[i];return Qs}function Bv(e,t,n,r,i,s){var o,a=null,l=0,u=0,c=0,f=0,d,h,p,g,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=aCe(o,i,s)),o[0]){case"l":l+=o[1],u+=o[2],e.lineTo(l+n,u+r);break;case"L":l=o[1],u=o[2],e.lineTo(l+n,u+r);break;case"h":l+=o[1],e.lineTo(l+n,u+r);break;case"H":l=o[1],e.lineTo(l+n,u+r);break;case"v":u+=o[1],e.lineTo(l+n,u+r);break;case"V":u=o[1],e.lineTo(l+n,u+r);break;case"m":l+=o[1],u+=o[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=o[1],u=o[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"c":d=l+o[5],h=u+o[6],c=l+o[3],f=u+o[4],e.bezierCurveTo(l+o[1]+n,u+o[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=o[5],u=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+o[3],h=u+o[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+o[1]+n,u+o[2]+r,d+n,h+r),c=l+o[1],f=u+o[2],l=d,u=h;break;case"S":d=o[3],h=o[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),l=d,u=h,c=o[1],f=o[2];break;case"q":d=l+o[3],h=u+o[4],c=l+o[1],f=u+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),l=d,u=h,c=o[1],f=o[2];break;case"t":d=l+o[1],h=u+o[2],a[0].match(/[QqTt]/)===null?(c=l,f=u):a[0]==="t"?(c=2*l-p,f=2*u-g):a[0]==="q"&&(c=2*l-c,f=2*u-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+o[1],f=u+o[2];break;case"T":d=o[1],h=o[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":jj(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+r]),l+=o[6],u+=o[7];break;case"A":jj(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),l=o[6],u=o[7];break;case"z":case"Z":l=m,u=y,e.closePath();break}a=o}}function jj(e,t,n,r){const i=sCe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=oCe(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Bj=.5773502691896257,Uj={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,el)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Up*n,i=r-n*Bj,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Up*n,i=r-n*Bj;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Up*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Up*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Up*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Up*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Qee(e){return Se(Uj,e)?Uj[e]:lCe(e)}var N5={};function lCe(e){if(!Se(N5,e)){const t=Nm(e);N5[e]={draw:function(n,r){Bv(n,t,0,0,Math.sqrt(r)/2)}}}return N5[e]}const dc=.448084975506;function uCe(e){return e.x}function cCe(e){return e.y}function fCe(e){return e.width}function dCe(e){return e.height}function ql(e){return typeof e=="function"?e:()=>+e}function qw(e,t,n){return Math.max(t,Math.min(e,n))}function Jee(){var e=uCe,t=cCe,n=fCe,r=dCe,i=ql(0),s=i,o=i,a=i,l=null;function u(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),v=Math.min(m,y)/2,b=qw(+i.call(this,c),0,v),x=qw(+s.call(this,c),0,v),w=qw(+o.call(this,c),0,v),C=qw(+a.call(this,c),0,v);if(l||(l=h=m_()),b<=0&&x<=0&&w<=0&&C<=0)l.rect(p,g,m,y);else{var S=p+m,k=g+y;l.moveTo(p+b,g),l.lineTo(S-x,g),l.bezierCurveTo(S-dc*x,g,S,g+dc*x,S,g+x),l.lineTo(S,k-C),l.bezierCurveTo(S,k-dc*C,S-dc*C,k,S-C,k),l.lineTo(p+w,k),l.bezierCurveTo(p+dc*w,k,p,k-dc*w,p,k-w),l.lineTo(p,g+b),l.bezierCurveTo(p,g+dc*b,p+dc*b,g,p+b,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=ql(c),u):e},u.y=function(c){return arguments.length?(t=ql(c),u):t},u.width=function(c){return arguments.length?(n=ql(c),u):n},u.height=function(c){return arguments.length?(r=ql(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=ql(c),s=f!=null?ql(f):i,a=d!=null?ql(d):i,o=h!=null?ql(h):s,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function Zee(){var e,t,n,r,i=null,s,o,a,l;function u(f,d,h){const p=h/2;if(s){var g=a-d,m=f-o;if(g||m){var y=Math.hypot(g,m),v=(g/=y)*l,b=(m/=y)*l,x=Math.atan2(m,g);i.moveTo(o-v,a-b),i.lineTo(f-g*p,d-m*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(o+v,a+b),i.arc(o,a,l,x,x+Math.PI)}else i.arc(f,d,p,0,el);i.closePath()}else s=1;o=f,a=d,l=p}function c(f){var d,h=f.length,p,g=!1,m;for(i==null&&(i=m=m_()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(s=0),g&&u(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function px(e,t){return e??t}const gx=e=>e.x||0,mx=e=>e.y||0,hCe=e=>e.width||0,pCe=e=>e.height||0,gCe=e=>(e.x||0)+(e.width||0),mCe=e=>(e.y||0)+(e.height||0),yCe=e=>e.startAngle||0,vCe=e=>e.endAngle||0,bCe=e=>e.padAngle||0,xCe=e=>e.innerRadius||0,wCe=e=>e.outerRadius||0,SCe=e=>e.cornerRadius||0,ECe=e=>px(e.cornerRadiusTopLeft,e.cornerRadius)||0,CCe=e=>px(e.cornerRadiusTopRight,e.cornerRadius)||0,kCe=e=>px(e.cornerRadiusBottomRight,e.cornerRadius)||0,_Ce=e=>px(e.cornerRadiusBottomLeft,e.cornerRadius)||0,$Ce=e=>px(e.size,64),ACe=e=>e.size||1,R_=e=>e.defined!==!1,TCe=e=>Qee(e.shape||"circle"),RCe=K2e().startAngle(yCe).endAngle(vCe).padAngle(bCe).innerRadius(xCe).outerRadius(wCe).cornerRadius(SCe),FCe=SZ().x(gx).y1(mx).y0(mCe).defined(R_),PCe=SZ().y(mx).x1(gx).x0(gCe).defined(R_),OCe=wZ().x(gx).y(mx).defined(R_),MCe=Jee().x(gx).y(mx).width(hCe).height(pCe).cornerRadius(ECe,CCe,kCe,_Ce),DCe=J2e().type(TCe).size($Ce),NCe=Zee().x(gx).y(mx).defined(R_).size(ACe);function z6(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function ICe(e,t){return RCe.context(e)(t)}function LCe(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?PCe:FCe).curve(L6(r,n.orient,n.tension)).context(e)(t)}function zCe(e,t){const n=t[0],r=n.interpolate||"linear";return OCe.curve(L6(r,n.orient,n.tension)).context(e)(t)}function L0(e,t,n,r){return MCe.context(e)(t,n,r)}function jCe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function BCe(e,t){return DCe.context(e)(t)}function UCe(e,t){return NCe.context(e)(t)}var ete=1;function tte(){ete=1}function j6(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+ete++),o=i.clipping[s]||(i.clipping[s]={id:s});return tt(r)?o.path=r(null):z6(n)?o.path=L0(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Kn(e){this.clear(),e&&this.union(e)}Kn.prototype={clone(){return new Kn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*o+u,l*r+a*o+c,a*s-l*i+u,l*s+a*i+c,a*s-l*o+u,l*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function F_(e){this.mark=e,this.bounds=this.bounds||new Kn}function P_(e){F_.call(this,e),this.items=this.items||[]}he(P_,F_);class nte{constructor(t){this._pending=0,this._loader=t||i_()}pending(){return this._pending}sanitizeURL(t){const n=this;return Vj(n),n._loader.sanitize(t,{context:"href"}).then(r=>(Ty(n),r)).catch(()=>(Ty(n),null))}loadImage(t){const n=this,r=mSe();return Vj(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Se(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>Ty(n),o.onerror=()=>Ty(n),o.src=s,o}).catch(i=>(Ty(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Vj(e){e._pending+=1}function Ty(e){e._pending-=1}function Uu(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?VCe(t,r):0))}return e}function VCe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const WCe=el-1e-8;let O_,pS,gS,Vd,VF,mS,WF,HF;const Uc=(e,t)=>O_.add(e,t),yS=(e,t)=>Uc(pS=e,gS=t),Wj=e=>Uc(e,O_.y1),Hj=e=>Uc(O_.x1,e),Dd=(e,t)=>VF*e+WF*t,Nd=(e,t)=>mS*e+HF*t,I5=(e,t)=>Uc(Dd(e,t),Nd(e,t)),L5=(e,t)=>yS(Dd(e,t),Nd(e,t));function yx(e,t){return O_=e,t?(Vd=t*Sf,VF=HF=Math.cos(Vd),mS=Math.sin(Vd),WF=-mS):(VF=HF=1,Vd=mS=WF=0),HCe}const HCe={beginPath(){},closePath(){},moveTo:L5,lineTo:L5,rect(e,t,n,r){Vd?(I5(e+n,t),I5(e+n,t+r),I5(e,t+r),L5(e,t)):(Uc(e+n,t+r),yS(e,t))},quadraticCurveTo(e,t,n,r){const i=Dd(e,t),s=Nd(e,t),o=Dd(n,r),a=Nd(n,r);qj(pS,i,o,Wj),qj(gS,s,a,Hj),yS(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Dd(e,t),a=Nd(e,t),l=Dd(n,r),u=Nd(n,r),c=Dd(i,s),f=Nd(i,s);Gj(pS,o,l,c,Wj),Gj(gS,a,u,f,Hj),yS(c,f)},arc(e,t,n,r,i,s){if(r+=Vd,i+=Vd,pS=n*Math.cos(i)+e,gS=n*Math.sin(i)+t,Math.abs(i-r)>WCe)Uc(e-n,t-n),Uc(e+n,t+n);else{const o=u=>Uc(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(o(r),o(i),i!==r)if(r=r%el,r<0&&(r+=el),i=i%el,i<0&&(i+=el),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=el,a=r-r%Md,l=0;l<4&&a>i;++l,a-=Md)o(a);else for(a=r-r%Md+Md,l=0;l<4&&a<i;++l,a=a+Md)o(a)}}};function qj(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Gj(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(s)>iCe?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),l=(-o+c)/s,u=(-o-c)/s)):l=.5*a/o,0<l&&l<1&&i(Xj(l,e,t,n,r)),0<u&&u<1&&i(Xj(u,e,t,n,r))}function Xj(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var rf=(rf=nf(1,1))?rf.getContext("2d"):null;const qF=new Kn;function B6(e){return function(t,n){if(!rf)return!0;e(rf,t),qF.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=qF;for(let a=i;a<=o;++a)for(let l=r;l<=s;++l)if(rf.isPointInPath(l,a))return!0;return!1}}function U6(e,t){return t.contains(e.x||0,e.y||0)}function rte(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(qF.set(n,r,n+i,r+s))}function ite(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return dg(t,n,r,i,s)}function dg(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,p,g,m;for(m=0;m<4;++m){if(m===0&&(h=-u,p=-(s-t)),m===1&&(h=u,p=a-t),m===2&&(h=-c,p=-(o-n)),m===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function Im(e,t){e.globalCompositeOperation=t.blend||"source-over"}function jo(e,t){return e??t}function Yj(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function qCe(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+jo(t.x1,.5)*r,n.y1+jo(t.y1,.5)*i,Math.max(r,i)*jo(t.r1,0),n.x1+jo(t.x2,.5)*r,n.y1+jo(t.y2,.5)*i,Math.max(r,i)*jo(t.r2,.5));else{const o=jo(t.x1,0),a=jo(t.y1,0),l=jo(t.x2,1),u=jo(t.y2,0);if(o===l||a===u||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=nf(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Yj(f.createLinearGradient(o,a,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Yj(s,t.stops)}function ste(e,t,n){return I6(n)?qCe(e,n,t.bounds):n}function LE(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=ste(e,t,t.fill),!0):!1}var GCe=[];function Lm(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=ste(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||GCe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function XCe(e,t){return e.zindex-t.zindex||e.index-t.index}function V6(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(XCe)}function ma(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=V6(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function zE(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=V6(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function W6(e){return function(t,n,r){ma(n,i=>{(!r||r.intersects(i.bounds))&&ote(e,t,i,i)})}}function YCe(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&ote(e,t,n.items[0],n.items)}}function ote(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Im(t,n),n.fill&&LE(t,n,i)&&t.fill(),n.stroke&&Lm(t,n,i)&&t.stroke()))}function M_(e){return e=e||So,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,zE(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&e(t,a,r,i,s,o))return a})}}function vx(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,l=o.stroke&&n.isPointInStroke,u,c;return l&&(u=o.strokeWidth,c=o.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function H6(e){return M_(vx(e))}function lh(e,t){return"translate("+e+","+t+")"}function q6(e){return"rotate("+e+")"}function KCe(e,t){return"scale("+e+","+t+")"}function ate(e){return lh(e.x||0,e.y||0)}function QCe(e){return lh(e.x||0,e.y||0)+(e.angle?" "+q6(e.angle):"")}function JCe(e){return lh(e.x||0,e.y||0)+(e.angle?" "+q6(e.angle):"")+(e.scaleX||e.scaleY?" "+KCe(e.scaleX||1,e.scaleY||1):"")}function G6(e,t,n){function r(o,a){o("transform",QCe(a)),o("d",t(null,a))}function i(o,a){return t(yx(o,a.angle),a),Uu(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,c=a.angle||0;o.translate(l,u),c&&o.rotate(c*=Sf),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:W6(s),pick:H6(s),isect:n||B6(s)}}var ZCe=G6("arc",ICe);function eke(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function tke(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function nke(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function X6(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(yx(l),c),Uu(l,c[0]))}function s(l,u){l.beginPath(),t(l,u)}const o=vx(s);function a(l,u,c,f,d,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,o(l,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:YCe(s),pick:a,isect:U6,tip:n}}var rke=X6("area",LCe,eke);function ike(e,t){var n=t.clip;e.save(),tt(n)?(e.beginPath(),n(e),e.clip()):lte(e,t.group)}function lte(e,t){e.beginPath(),z6(t)?L0(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function ute(e){const t=jo(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function ske(e,t){e("transform",ate(t))}function cte(e,t){const n=ute(t);e("d",L0(null,t,n,n))}function oke(e,t){e("class","background"),e("aria-hidden",!0),cte(e,t)}function ake(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?cte(e,t):e("d","")}function lke(e,t,n){const r=t.clip?j6(n,t,t):null;e("clip-path",r)}function uke(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Uu(e,t),e.translate(t.x||0,t.y||0)}function Uv(e,t,n,r){const i=ute(t);e.beginPath(),L0(e,t,(n||0)+i,(r||0)+i)}const cke=vx(Uv),fke=vx(Uv,!1),dke=vx(Uv,!0);function hke(e,t,n,r){ma(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(Uv(e,i,s,o),Im(e,i),i.fill&&LE(e,i,l)&&e.fill(),i.stroke&&!a&&Lm(e,i,l)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&lte(e,i),n&&n.translate(-s,-o),ma(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&l&&(Uv(e,i,s,o),Im(e,i),Lm(e,i,l)&&e.stroke())})}function pke(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return zE(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,s))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),p=f+(l.height||0),g=l.clip;if(g&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,g&&z6(l)&&!dke(e,l,o,a))return e.restore(),null;const m=l.strokeForeground,y=t.interactive!==!1;return y&&m&&l.stroke&&fke(e,l,o,a)?(e.restore(),l):(u=zE(l,v=>gke(v,c,f)?this.pick(v,n,r,c,f):null),!u&&y&&(l.fill||!m&&l.stroke)&&cke(e,l,o,a)&&(u=l),e.restore(),u||null)})}function gke(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var mke={type:"group",tag:"g",nested:!1,attr:ske,bound:uke,draw:hke,pick:pke,isect:rte,content:lke,background:oke,foreground:ake},Vv={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Y6(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function K6(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Q6(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function D_(e,t){return e==="center"?t/2:e==="right"?t:0}function N_(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function yke(e,t,n){const r=Y6(t,n),i=K6(t,r),s=Q6(t,r),o=(t.x||0)-D_(t.align,i),a=(t.y||0)-N_(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,Vv["xmlns:xlink"],"xlink:href"),e("transform",lh(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function vke(e,t){const n=t.image,r=K6(t,n),i=Q6(t,n),s=(t.x||0)-D_(t.align,r),o=(t.y||0)-N_(t.baseline,i);return e.set(s,o,s+r,o+i)}function bke(e,t,n){ma(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Y6(r,this);let s=K6(r,i),o=Q6(r,i);if(s===0||o===0)return;let a=(r.x||0)-D_(r.align,s),l=(r.y||0)-N_(r.baseline,o),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,l+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Im(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,s,o))})}var xke={type:"image",tag:"image",nested:!1,attr:yke,bound:vke,draw:bke,pick:M_(),isect:So,get:Y6,xOffset:D_,yOffset:N_},wke=X6("line",zCe,tke);function Ske(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",JCe(t)),e("d",t.path)}function vS(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Sf,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Nm(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),Bv(e,l,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):Bv(e,l,r,i,s,o)}function Eke(e,t){return vS(yx(e,t.angle),t)?e.set(0,0,0,0):Uu(e,t,!0)}var Cke={type:"path",tag:"path",nested:!1,attr:Ske,bound:Eke,draw:W6(vS),pick:H6(vS),isect:B6(vS)};function kke(e,t){e("d",L0(null,t))}function _ke(e,t){var n,r;return Uu(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Kj(e,t){e.beginPath(),L0(e,t)}var $ke={type:"rect",tag:"path",nested:!1,attr:kke,bound:_ke,draw:W6(Kj),pick:H6(Kj),isect:rte};function Ake(e,t){e("transform",ate(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Tke(e,t){var n,r;return Uu(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function fte(e,t,n){var r,i,s,o;return t.stroke&&Lm(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function Rke(e,t,n){ma(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&fte(e,r,i)&&(Im(e,r),e.stroke())}})}function Fke(e,t,n,r){return e.isPointInStroke?fte(e,t,1)&&e.isPointInStroke(n,r):!1}var Pke={type:"rule",tag:"line",nested:!1,attr:Ake,bound:Tke,draw:Rke,pick:M_(Fke),isect:ite},Oke=G6("shape",jCe),Mke=G6("symbol",BCe,U6);const Qj=hQ();var Fs={height:Pl,measureWidth:J6,estimateWidth:jE,width:jE,canvas:dte};dte(!0);function dte(e){Fs.width=e&&rf?J6:jE}function jE(e,t){return hte(Cf(e,t),Pl(e))}function hte(e,t){return~~(.8*e.length*t)}function J6(e,t){return Pl(e)<=0||!(t=Cf(e,t))?0:pte(t,I_(e))}function pte(e,t){const n=`(${t}) ${e}`;let r=Qj.get(n);return r===void 0&&(rf.font=t,r=rf.measureText(e).width,Qj.set(n,r)),r}function Pl(e){return e.fontSize!=null?+e.fontSize||0:11}function Ef(e){return e.lineHeight!=null?e.lineHeight:Pl(e)+2}function Dke(e){return te(e)?e.length>1?e:e[0]:e}function bx(e){return Dke(e.lineBreak&&e.text&&!te(e.text)?e.text.split(e.lineBreak):e.text)}function Z6(e){const t=bx(e);return(te(t)?t.length-1:0)*Ef(e)}function Cf(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Ike(e,n):n}function Nke(e){if(Fs.width===J6){const t=I_(e);return n=>pte(n,t)}else if(Fs.width===jE){const t=Pl(e);return n=>hte(n,t)}else return t=>Fs.width(e,t)}function Ike(e,t){var n=+e.limit,r=Nke(e);if(r(t)<n)return t;var i=e.ellipsis||"…",s=e.dir==="rtl",o=0,a=t.length,l;if(n-=r(i),s){for(;o<a;)l=o+a>>>1,r(t.slice(l))>n?o=l+1:a=l;return i+t.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),r(t.slice(0,l))<n?o=l:a=l-1;return t.slice(0,o)+i}}function xx(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function I_(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Pl(e)+"px "+xx(e,t)}function eN(e){var t=e.baseline,n=Pl(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ef(e):t==="line-bottom"?.29*n-.5*Ef(e):0)}const Lke={left:"start",center:"middle",right:"end"},Q1=new Kn;function L_(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Md,t+=r*Math.cos(i),n+=r*Math.sin(i)),Q1.x1=t,Q1.y1=n,Q1}function zke(e,t){var n=t.dx||0,r=(t.dy||0)+eN(t),i=L_(t),s=i.x1,o=i.y1,a=t.angle||0,l;e("text-anchor",Lke[t.align]||"start"),a?(l=lh(s,o)+" "+q6(a),(n||r)&&(l+=" "+lh(n,r))):l=lh(s+n,o+r),e("transform",l)}function tN(e,t,n){var r=Fs.height(t),i=t.align,s=L_(t),o=s.x1,a=s.y1,l=t.dx||0,u=(t.dy||0)+eN(t)-Math.round(.8*r),c=bx(t),f;if(te(c)?(r+=Ef(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Fs.width(t,h)),0)):f=Fs.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=o,u+=a,l+f,u+r),t.angle&&!n)e.rotate(t.angle*Sf,o,a);else if(n===2)return e.rotatedPoints(t.angle*Sf,o,a);return e}function jke(e,t,n){ma(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=I_(r),e.textAlign=r.align||"left",s=L_(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Sf),o=a=0),o+=r.dx||0,a+=(r.dy||0)+eN(r),c=bx(r),Im(e,r),te(c))for(u=Ef(r),l=0;l<c.length;++l)f=Cf(r,c[l]),r.fill&&LE(e,r,i)&&e.fillText(f,o,a),r.stroke&&Lm(e,r,i)&&e.strokeText(f,o,a),a+=u;else f=Cf(r,c),r.fill&&LE(e,r,i)&&e.fillText(f,o,a),r.stroke&&Lm(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function Bke(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=L_(t),a=o.x1,l=o.y1,u=tN(Q1,t,1),c=-t.angle*Sf,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*l),p=d*i+f*s+(l-d*a-f*l);return u.contains(h,p)}function Uke(e,t){const n=tN(Q1,e,2);return dg(t,n[0],n[1],n[2],n[3])||dg(t,n[0],n[1],n[4],n[5])||dg(t,n[4],n[5],n[6],n[7])||dg(t,n[2],n[3],n[6],n[7])}var Vke={type:"text",tag:"text",nested:!1,attr:zke,bound:tN,draw:jke,pick:M_(Bke),isect:Uke},Wke=X6("trail",UCe,nke),zs={arc:ZCe,area:rke,group:mke,image:xke,line:wke,path:Cke,rect:$ke,rule:Pke,shape:Oke,symbol:Mke,text:Vke,trail:Wke};function GF(e,t,n){var r=zs[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Kn),e,n)}var Jj={mark:null};function gte(e,t,n){var r=zs[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,l,u,c;if(r.nested)return o?u=s[0]:(Jj.mark=e,u=Jj),c=GF(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Kn,o)for(a=0,l=s.length;a<l;++a)t.union(GF(s[a],i,n));return e.bounds=t}const Hke=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function mte(e,t){return JSON.stringify(e,Hke,t)}function yte(e){const t=typeof e=="string"?JSON.parse(e):e;return vte(t)}function vte(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&vte(n[i]);return t&&gte(e),e}class bte{constructor(t){arguments.length?this.root=yte(t):(this.root=Zj({marktype:"group",name:"root",role:"frame"}),this.root.items=[new P_(this.root)])}toJSON(t){return mte(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Zj(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Zj(e,t){const n={bounds:new Kn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Vc(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function nN(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function tr(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Vc(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function ao(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function xte(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function z_(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function qke(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=zs[i.marktype]).tip){for(o=z_(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let rN=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||i_(),this._tooltip=n||Gke}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Vc(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=qke(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let l=s.x1+i[0]+r.left,u=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:o,height:a,left:l,top:u,right:l+o,bottom:u+a}}};function Gke(e,t,n,r){e.element().setAttribute("title",r||"")}class wx{constructor(t){this._el=null,this._bgcolor=null,this._loader=new nte(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Xke="keydown",Yke="keypress",Kke="keyup",wte="dragenter",bS="dragleave",Ste="dragover",XF="pointerdown",Qke="pointerup",BE="pointermove",xS="pointerout",Ete="pointerover",YF="mousedown",Jke="mouseup",Cte="mousemove",UE="mouseout",kte="mouseover",VE="click",Zke="dblclick",e_e="wheel",_te="mousewheel",WE="touchstart",HE="touchmove",qE="touchend",t_e=[Xke,Yke,Kke,wte,bS,Ste,XF,Qke,BE,xS,Ete,YF,Jke,Cte,UE,kte,VE,Zke,e_e,_te,WE,HE,qE],KF=BE,J1=UE,QF=VE;class Sx extends rN{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=t_e,this.pointermove=tB([BE,Cte],[Ete,kte],[xS,UE]),this.dragover=tB([Ste],[wte],[bS]),this.pointerout=nB([xS,UE]),this.dragleave=nB([bS])}initialize(t,n,r){return this._canvas=t&&nN(t,"canvas"),[VE,YF,XF,BE,xS,bS].forEach(i=>eB(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(_te,t)}pointerdown(t){this._down=this._active,this.fire(XF,t)}mousedown(t){this._down=this._active,this.fire(YF,t)}click(t){this._down===this._active&&(this.fire(VE,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(WE,t,!0)}touchmove(t){this.fire(HE,t,!0)}touchend(t){this.fire(qE,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===QF&&i&&i.href?this.handleHref(n,i,i.href):(t===KF||t===J1)&&this.handleTooltip(n,i,t!==J1),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(eB(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=z_(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return zs[t.marktype].pick.call(this,o,t,n,r,i,s)}}const n_e=e=>e===WE||e===HE||e===qE?[WE,HE,qE]:[e];function eB(e,t){n_e(t).forEach(n=>r_e(e,n))}function r_e(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function b1(e,t,n){t.forEach(r=>e.fire(r,n))}function tB(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?b1(this,e,r):((!i||!i.exit)&&b1(this,n,r),this._active=s,b1(this,t,r),b1(this,e,r))}}function nB(e){return function(t){b1(this,e,t),this._active=null}}function i_e(){return typeof window<"u"&&window.devicePixelRatio||1}function s_e(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=o?i_e():i;e.width=t*l,e.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class GE extends wx{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Kn,this._tempb=new Kn}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:nf(1,1,this._options.type),t&&this._canvas&&(ao(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)s_e(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||ee("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,l=o_e(i,s,o);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):a_e(r,l.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=zs[n.marktype];n.clip&&ike(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const o_e=(e,t,n)=>new Kn().set(0,0,t,n).translate(-e[0],-e[1]);function a_e(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class $te extends rN{constructor(t,n){super(t,n);const r=this;r._hrefHandler=z5(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=z5(r,(i,s)=>{r.handleTooltip(i,s,i.type!==J1)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(QF,this._hrefHandler),i.removeEventListener(KF,this._tooltipHandler),i.removeEventListener(J1,this._tooltipHandler)),this._svg=i=t&&nN(t,"svg"),i&&(i.addEventListener(QF,this._hrefHandler),i.addEventListener(KF,this._tooltipHandler),i.addEventListener(J1,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:z5(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const z5=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},Ate="aria-hidden",iN="aria-label",sN="role",oN="aria-roledescription",Tte="graphics-object",aN="graphics-symbol",Rte=(e,t,n)=>({[sN]:e,[oN]:t,[iN]:n||void 0}),l_e=da(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),rB={axis:{desc:"axis",caption:f_e},legend:{desc:"legend",caption:d_e},"title-text":{desc:"title",caption:e=>`Title text '${sB(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${sB(e)}'`}},iB={ariaRole:sN,ariaRoleDescription:oN,description:iN};function Fte(e,t){const n=t.aria===!1;if(e(Ate,n||void 0),n||t.description==null)for(const r in iB)e(iB[r],void 0);else{const r=t.mark.marktype;e(iN,t.description),e(sN,t.ariaRole||(r==="group"?Tte:aN)),e(oN,t.ariaRoleDescription||`${r} mark`)}}function Pte(e){return e.aria===!1?{[Ate]:!0}:l_e[e.role]?null:rB[e.role]?c_e(e,rB[e.role]):u_e(e)}function u_e(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return Rte(n?Tte:aN,`${t} mark container`,e.description)}function c_e(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return Rte(t.role||aN,t.desc,n.description||r(n))}catch{return null}}function sB(e){return xe(e.text).join(" ")}function f_e(e){const t=e.datum,n=e.orient,r=t.title?Ote(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Dm(a)?"discrete":a} scale with ${qee(o,s,e)}`}function d_e(e){const t=e.datum,n=t.title?Ote(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,l=o.dataflow.locale();return p_e(r)+(n?` titled '${n}'`:"")+` for ${h_e(s)} with ${qee(l,a,e)}`}function Ote(e){try{return xe(yt(e.items).items[0].text).join(" ")}catch{return null}}function h_e(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+yt(e)}function p_e(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const Mte=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),g_e=e=>Mte(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function lN(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},o=(l,u)=>(u!=null&&(t+=` ${l}="${g_e(u)}"`),a),a={open(l){s(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:o,text:l=>(n+=Mte(l),a),toString:()=>e};return a}const Dte=e=>Nte(lN(),e)+"";function Nte(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):Nte(e,r)}return e.close()}const XE={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},YE={blend:"mix-blend-mode"},Ite={fill:"none","stroke-miterlimit":10},Ry=0,oB="http://www.w3.org/2000/xmlns/",er=Vv.xmlns;class uN extends wx{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=tr(t,0,"svg",er),this._svg.setAttributeNS(oB,"xmlns",er),this._svg.setAttributeNS(oB,"xmlns:xlink",Vv["xmlns:xlink"]),this._svg.setAttribute("version",Vv.version),this._svg.setAttribute("class","marks"),ao(t,1),this._root=tr(this._svg,Ry,"g",er),Wc(this._root,Ite),ao(this._svg,Ry+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Wc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=tr(t,Ry,"rect",er),Wc(r,{width:this._width,height:this._height,fill:n}));const i=Dte(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),ao(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=zs[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,aB(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(o,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,aB(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=zs[o],l=n.interactive===!1?"none":null,u=a.tag==="g",c=lB(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return ao(c,0),n._svg;c.setAttribute("class",xte(n));const f=Pte(n);for(const g in f)xi(c,g,f[g]);u||xi(c,"pointer-events",l),xi(c,"clip-path",n.clip?j6(this,n,n.group):null);let d=null,h=0;const p=g=>{const m=this.isDirty(g),y=lB(g,c,d,a.tag,s);m&&(this._update(a,y,g),u&&v_e(this,y,g,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):ma(n,p),ao(c,h),c}_update(t,n,r){cu=n,ei=n.__values__,Fte(Z1,r),t.attr(Z1,r,this);const i=x_e[t.type];i&&i.call(this,t,n,r),cu&&this.style(cu,r)}style(t,n){if(n!=null){for(const r in XE){let i=r==="font"?xx(n):n[r];if(i===ei[r])continue;const s=XE[r];i==null?t.removeAttribute(s):(I6(i)&&(i=Xee(i,this._defs.gradient,Lte())),t.setAttribute(s,i+"")),ei[r]=i}for(const r in YE)wS(t,YE[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=tr(t,Ry+1,"defs",er)),i=m_e(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=tr(t,Ry+1,"defs",er)),i=y_e(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):ao(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function aB(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function m_e(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=tr(e,n++,"pattern",er);Wc(o,{id:IE+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=tr(o,0,"rect",er),Wc(o,{width:1,height:1,fill:`url(${Lte()}#${t.id})`}),e=tr(e,n++,"radialGradient",er),Wc(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=tr(e,n++,"linearGradient",er),Wc(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=tr(e,r,"stop",er),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return ao(e,r),n}function y_e(e,t,n){let r;return e=tr(e,n,"clipPath",er),e.setAttribute("id",t.id),t.path?(r=tr(e,0,"path",er),r.setAttribute("d",t.path)):(r=tr(e,0,"rect",er),Wc(r,{x:0,y:0,width:t.width,height:t.height})),ao(e,1),n+1}function v_e(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;ma(n,o=>{i=e.mark(t,o,i,r),++s}),ao(t,1+s)}function lB(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Vc(o,r,er),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Vc(o,"path",er);s.appendChild(a),a.__data__=e;const l=Vc(o,"g",er);s.appendChild(l),l.__data__=e;const u=Vc(o,"path",er);s.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(s.ownerSVGElement!==i||b_e(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function b_e(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let cu=null,ei=null;const x_e={group(e,t,n){const r=cu=t.childNodes[2];ei=r.__values__,e.foreground(Z1,n,this),ei=t.__values__,cu=t.childNodes[1],e.content(Z1,n,this);const i=cu=t.childNodes[0];e.background(Z1,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ei.events&&(xi(r,"pointer-events",s),xi(i,"pointer-events",s),ei.events=s),n.strokeForeground&&n.stroke){const o=n.fill;xi(r,"display",null),this.style(i,n),xi(i,"stroke",null),o&&(n.fill=null),ei=r.__values__,this.style(r,n),o&&(n.fill=o),cu=null}else xi(r,"display","none")},image(e,t,n){n.smooth===!1?(wS(t,"image-rendering","optimizeSpeed"),wS(t,"image-rendering","pixelated")):wS(t,"image-rendering",null)},text(e,t,n){const r=bx(n);let i,s,o,a;te(r)?(s=r.map(l=>Cf(n,l)),i=s.join(`
`),i!==ei.text&&(ao(t,0),o=t.ownerDocument,a=Ef(n),s.forEach((l,u)=>{const c=Vc(o,"tspan",er);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ei.text=i)):(s=Cf(n,r),s!==ei.text&&(t.textContent=s,ei.text=s)),xi(t,"font-family",xx(n)),xi(t,"font-size",Pl(n)+"px"),xi(t,"font-style",n.fontStyle),xi(t,"font-variant",n.fontVariant),xi(t,"font-weight",n.fontWeight)}};function Z1(e,t,n){t!==ei[e]&&(n?w_e(cu,e,t,n):xi(cu,e,t),ei[e]=t)}function wS(e,t,n){n!==ei[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ei[t]=n)}function Wc(e,t){for(const n in t)xi(e,n,t[n])}function xi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function w_e(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Lte(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class zte extends wx{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=lN();n.open("svg",et({},Vv,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",Ite,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=zs[n.marktype],i=r.tag,s=[Fte,r.attr];t.open("g",{class:xte(n),"clip-path":n.clip?j6(this,n,n.group):null},Pte(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const u=bx(a);if(te(u)){const c={x:0,dy:Ef(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(Cf(a,u[f])).close()}else t.text(Cf(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),ma(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):ma(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,l,u,c)=>{s[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&S_e(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:IE+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function S_e(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=xx(t),e["font-size"]=Pl(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in XE){let a=t[o];const l=XE[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(I6(a)&&(a=Xee(a,i.gradient,"")),e[l]=a)}for(const o in YE){const a=t[o];a!=null&&(s=s||[],s.push(`${YE[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Ho={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function E_e(e){Ho.svgMarkTypes=e.svgMarkTypes??["text"],Ho.svgOnTop=e.svgOnTop??!0,Ho.debug=e.debug??!1}class JF extends wx{constructor(t){super(t),this._svgRenderer=new uN(t),this._canvasRenderer=new GE(t)}initialize(t,n,r,i,s){this._root_el=tr(t,0,"div");const o=tr(this._root_el,0,"div"),a=tr(this._root_el,1,"div");return this._root_el.style.position="relative",Ho.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Ho.svgOnTop?a:o,this._canvasEl=Ho.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Ho.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Ho.svgMarkTypes.includes(s));this._svgRenderer.render(t,Ho.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Ho.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class jte extends Sx{constructor(t,n){super(t,n)}initialize(t,n,r){const i=tr(tr(t,0,"div"),Ho.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const Bte="canvas",Ute="hybrid",Vte="png",Wte="svg",Hte="none",Hc={Canvas:Bte,PNG:Vte,SVG:Wte,Hybrid:Ute,None:Hte},_h={};_h[Bte]=_h[Vte]={renderer:GE,headless:GE,handler:Sx};_h[Wte]={renderer:uN,headless:zte,handler:$te};_h[Ute]={renderer:JF,headless:JF,handler:jte};_h[Hte]={};function j_(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(_h[e]=t,this):_h[e]}function qte(e,t,n){const r=[],i=new Kn().union(t),s=e.marktype;return s?Gte(e,i,n,r):s==="group"?Xte(e,i,n,r):ee("Intersect scene must be mark node or group item.")}function Gte(e,t,n,r){if(C_e(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)Xte(i[a],t,n,r);else for(const l=zs[s].isect;a<o;++a){const u=i[a];Yte(u,t,l)&&r.push(u)}}return r}function C_e(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Xte(e,t,n,r){n&&n(e.mark)&&Yte(e,t,zs.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let l=0;l<s;++l)Gte(i[l],t,n,r);t.translate(o,a)}return r}function Yte(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const j5=new Kn;function Kte(e){const t=e.clip;if(tt(t))t(yx(j5.clear()));else if(t)j5.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(j5)}const k_e=1e-9;function cN(e,t,n){return e===t?!0:n==="path"?Qte(e,t):e instanceof Date&&t instanceof Date?+e==+t:_t(e)&&_t(t)?Math.abs(e-t)<=k_e:!e||!t||!ve(e)&&!ve(t)?e==t:__e(e,t)}function Qte(e,t){return cN(Nm(e),Nm(t))}function __e(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!cN(e[i],t[i],i))return!1;return typeof e==typeof t}function $_e(){tte(),QEe()}const zm="top",Zo="left",ra="right",kf="bottom",A_e="top-left",T_e="top-right",R_e="bottom-left",F_e="bottom-right",fN="start",ZF="middle",Ei="end",P_e="x",O_e="y",B_="group",dN="axis",hN="title",M_e="frame",D_e="scope",pN="legend",Jte="row-header",Zte="row-footer",ene="row-title",tne="column-header",nne="column-footer",rne="column-title",N_e="padding",I_e="symbol",ine="fit",sne="fit-x",one="fit-y",L_e="pad",gN="none",Gw="all",eP="each",mN="flush",qc="column",Gc="row";function ane(e){J.call(this,null,e)}he(ane,J,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=zs[i],o=s.bound;let a=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=Xw(r,o),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===B_||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(Xw(u,o))),r.role){case dN:case pN:case hN:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(Xw(u,o))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(Xw(u,o))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return Kte(r),t.modifies("bounds")}});function Xw(e,t,n){return t(e.bounds.clear(),e,n)}const uB=":vega_identifier:";function yN(e){J.call(this,0,e)}yN.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};he(yN,J,{transform(e,t){const n=z_e(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function z_e(e){return e._signals[uB]||(e._signals[uB]=e.add(0))}function lne(e){J.call(this,null,e)}he(lne,J,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,j_e(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===B_?P_:F_;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function j_e(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function une(e){J.call(this,null,e)}const cB={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!cne(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},cne=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),fB=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(cne(i,s=e[n].bounds,t))return!0},B_e=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},U_e=(e,t,n)=>{var r=e.range(),i=new Kn;return t===zm||t===kf?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},dB=e=>(e.forEach(t=>t.opacity=1),e),hB=(e,t)=>e.reflow(t.modified()).modifies("opacity");he(une,J,{transform(e,t){const n=cB[e.method]||cB.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(dB(i),t=hB(t,e)),t;if(i=i.filter(B_e),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=dB(i),t=hB(t,e),s.length>=3&&fB(s,r)){do s=n(s,r);while(s.length>=3&&fB(s,r));s.length<3&&!yt(i).opacity&&(s.length>1&&(yt(s).opacity=0),yt(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=U_e(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function fne(e){J.call(this,null,e)}he(fne,J,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Qr=new Kn;function hg(e,t,n){return e[t]===n?0:(e[t]=n,1)}function V_e(e){var t=e.items[0].orient;return t===Zo||t===ra}function W_e(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function H_e(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,l=W_e(s),u=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[l[2]].items[0],g=i.titlePadding,m=i.bounds,y=p&&Z6(p),v=0,b=0,x,w;switch(Qr.clear().union(m),m.clear(),(x=l[0])>-1&&m.union(i.items[x].bounds),(x=l[1])>-1&&m.union(i.items[x].bounds),a){case zm:v=f||0,b=-c,w=Math.max(d,Math.min(h,-m.y1)),m.add(0,-w).add(u,0),p&&Yw(e,p,w,g,y,0,-1,m);break;case Zo:v=-c,b=f||0,w=Math.max(d,Math.min(h,-m.x1)),m.add(-w,0).add(0,u),p&&Yw(e,p,w,g,y,1,-1,m);break;case ra:v=n+c,b=f||0,w=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(w,u),p&&Yw(e,p,w,g,y,1,1,m);break;case kf:v=f||0,b=r+c,w=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(u,w),p&&Yw(e,p,w,g,0,0,1,m);break;default:v=i.x,b=i.y}return Uu(m.translate(v,b),i),hg(i,"x",v+o)|hg(i,"y",b+o)&&(i.bounds=Qr,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function Yw(e,t,n,r,i,s,o,a){const l=t.bounds;if(t.auto){const u=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}a.union(l)}const pB=(e,t)=>Math.floor(Math.min(e,t)),gB=(e,t)=>Math.ceil(Math.max(e,t));function q_e(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===B_)switch(i.role){case dN:case pN:case hN:break;case Jte:o.rowheaders.push(...s);break;case Zte:o.rowfooters.push(...s);break;case tne:o.colheaders.push(...s);break;case nne:o.colfooters.push(...s);break;case ene:o.rowtitle=s[0];break;case rne:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function G_e(e){return new Kn().set(0,0,e.width||0,e.height||0)}function X_e(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function gn(e,t,n){const r=ve(e)?e[t]:e;return r??(n!==void 0?n:0)}function mB(e){return e<0?Math.ceil(-e):0}function dne(e,t,n){var r=!n.nodirty,i=n.bounds===mN?G_e:X_e,s=Qr.set(0,0,0,0),o=gn(n.align,qc),a=gn(n.align,Gc),l=gn(n.padding,qc),u=gn(n.padding,Gc),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,m=Array(d),y=Array(f),v=0,b=Array(d),x=Array(d),w=Array(d),C,S,k,$,F,O,B,D,N,A,P;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)O=t[S],F=w[S]=i(O),O.x=O.x||0,b[S]=0,O.y=O.y||0,x[S]=0,k=S%c,$=~~(S/c),g=Math.max(g,B=Math.ceil(F.x2)),v=Math.max(v,D=Math.ceil(F.y2)),p[k]=Math.max(p[k],B),y[$]=Math.max(y[$],D),h[S]=l+mB(F.x1),m[S]=u+mB(F.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(m[S]=0);if(o===eP)for(k=1;k<c;++k){for(P=0,S=k;S<d;S+=c)P<h[S]&&(P=h[S]);for(S=k;S<d;S+=c)h[S]=P+p[k-1]}else if(o===Gw){for(P=0,S=0;S<d;++S)S%c&&P<h[S]&&(P=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=P+g)}else for(o=!1,k=1;k<c;++k)for(S=k;S<d;S+=c)h[S]+=p[k-1];if(a===eP)for($=1;$<f;++$){for(P=0,S=$*c,C=S+c;S<C;++S)P<m[S]&&(P=m[S]);for(S=$*c;S<C;++S)m[S]=P+y[$-1]}else if(a===Gw){for(P=0,S=c;S<d;++S)P<m[S]&&(P=m[S]);for(S=c;S<d;++S)m[S]=P+v}else for(a=!1,$=1;$<f;++$)for(S=$*c,C=S+c;S<C;++S)m[S]+=y[$-1];for(N=0,S=0;S<d;++S)N=h[S]+(S%c?N:0),b[S]+=N-t[S].x;for(k=0;k<c;++k)for(A=0,S=k;S<d;S+=c)A+=m[S],x[S]+=A-t[S].y;if(o&&gn(n.center,qc)&&f>1)for(S=0;S<d;++S)F=o===Gw?g:p[S%c],N=F-w[S].x2-t[S].x-b[S],N>0&&(b[S]+=N/2);if(a&&gn(n.center,Gc)&&c!==1)for(S=0;S<d;++S)F=a===Gw?v:y[~~(S/c)],A=F-w[S].y2-t[S].y-x[S],A>0&&(x[S]+=A/2);for(S=0;S<d;++S)s.union(w[S].translate(b[S],x[S]));switch(N=gn(n.anchor,P_e),A=gn(n.anchor,O_e),gn(n.anchor,qc)){case Ei:N-=s.width();break;case ZF:N-=s.width()/2}switch(gn(n.anchor,Gc)){case Ei:A-=s.height();break;case ZF:A-=s.height()/2}for(N=Math.round(N),A=Math.round(A),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)O=t[S],O.x+=b[S]+=N,O.y+=x[S]+=A,s.union(O.mark.bounds.union(O.bounds.translate(b[S],x[S]))),r&&e.dirty(O);return s}function Y_e(e,t,n){var r=q_e(t),i=r.marks,s=n.bounds===mN?K_e:Q_e,o=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,f,d,h,p,g,m;const y=dne(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=gn(n.headerBand,Gc,null),c=Kw(e,r.rowheaders,i,a,l,-gn(o,"rowHeader"),pB,0,s,"x1",0,a,1,g)),r.colheaders&&(g=gn(n.headerBand,qc,null),f=Kw(e,r.colheaders,i,a,a,-gn(o,"columnHeader"),pB,1,s,"y1",0,1,a,g)),r.rowfooters&&(g=gn(n.footerBand,Gc,null),d=Kw(e,r.rowfooters,i,a,l,gn(o,"rowFooter"),gB,0,s,"x2",a-1,a,1,g)),r.colfooters&&(g=gn(n.footerBand,qc,null),h=Kw(e,r.colfooters,i,a,a,gn(o,"columnFooter"),gB,1,s,"y2",u-a,1,a,g)),r.rowtitle&&(p=gn(n.titleAnchor,Gc),m=gn(o,"rowTitle"),m=p===Ei?d+m:c-m,g=gn(n.titleBand,Gc,.5),yB(e,r.rowtitle,m,0,y,g)),r.coltitle&&(p=gn(n.titleAnchor,qc),m=gn(o,"columnTitle"),m=p===Ei?h+m:f-m,g=gn(n.titleBand,qc,.5),yB(e,r.coltitle,m,1,y,g))}function K_e(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Q_e(e,t){return e.bounds[t]}function Kw(e,t,n,r,i,s,o,a,l,u,c,f,d,h){var p=n.length,g=0,m=0,y,v,b,x,w,C,S,k,$;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=o(g,l(n[y],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=s,v=0,x=t.length;v<x;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,x=t.length;v<x;++v,y+=f){for(C=t[v],w=C.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(k=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),$=g):(k=g,$=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),w.union(C.bounds.translate(k-(C.x||0),$-(C.y||0))),C.x=k,C.y=$,e.dirty(C),m=o(m,w[u])}return m}function yB(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function J_e(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Z_e(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function e$e(e,t,n,r,i,s,o){const a=J_e(n,t),l=Z_e(e,a("offset",0)),u=a("anchor",fN),c=u===Ei?1:u===ZF?.5:0,f={align:eP,bounds:a("bounds",mN),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Zo:f.anchor={x:Math.floor(r.x1)-l,column:Ei,y:c*(o||r.height()+2*r.y1),row:u};break;case ra:f.anchor={x:Math.ceil(r.x2)+l,y:c*(o||r.height()+2*r.y1),row:u};break;case zm:f.anchor={y:Math.floor(i.y1)-l,row:Ei,x:c*(s||i.width()+2*i.x1),column:u};break;case kf:f.anchor={y:Math.ceil(i.y2)+l,x:c*(s||i.width()+2*i.x1),column:u};break;case A_e:f.anchor={x:l,y:l};break;case T_e:f.anchor={x:s-l,y:l,column:Ei};break;case R_e:f.anchor={x:l,y:o-l,row:Ei};break;case F_e:f.anchor={x:s-l,y:o-l,column:Ei,row:Ei};break}return f}function t$e(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),r$e(e,n,n.items[0].items[0]),s=n$e(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===I_e&&i$e(n.items[0].items[0].items[0].items),i!==gN&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,Uu(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function n$e(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function r$e(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&Fy(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,l=t.titlePadding||0,u=r-o.x,c=r-o.y;switch(o.orient){case Zo:i+=Math.ceil(o.bounds.width())+l;break;case ra:case kf:break;default:s+=o.bounds.height()+l}switch((i||s)&&Fy(e,n,i,s),o.orient){case Zo:c+=Vp(t,n,o,a,1,1);break;case ra:u+=Vp(t,n,o,Ei,0,0)+l,c+=Vp(t,n,o,a,1,1);break;case kf:u+=Vp(t,n,o,a,0,0),c+=Vp(t,n,o,Ei,-1,0,1)+l;break;default:u+=Vp(t,n,o,a,0,0)}(u||c)&&Fy(e,o,u,c),(u=Math.round(o.bounds.x1-r))<0&&(Fy(e,n,-u,0),Fy(e,o,-u,0))}}function Vp(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,f=l&&s?c:0,d=l&&s?0:c,h=i<=0?0:Z6(n);return Math.round(r===fN?f:r===Ei?d-h:.5*(c-h))}function Fy(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function i$e(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function s$e(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Zo||a===ra?r:n,p=0,g=0,m=0,y=0,v=0,b;if(o!==B_?a===Zo?(p=i.y2,h=i.y1):a===ra?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Zo&&(p=r,h=0),b=l===fN?p:l===Ei?h:(p+h)/2,d&&d.text){switch(a){case zm:case kf:v=f.bounds.height()+c;break;case Zo:y=f.bounds.width()+c;break;case ra:y=-f.bounds.width()-c;break}Qr.clear().union(d.bounds),Qr.translate(y-(d.x||0),v-(d.y||0)),hg(d,"x",y)|hg(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Qr),d.mark.bounds.clear().union(Qr),e.dirty(d)),Qr.clear().union(d.bounds)}else Qr.clear();switch(Qr.union(f.bounds),a){case zm:g=b,m=i.y1-Qr.height()-u;break;case Zo:g=i.x1-Qr.width()-u,m=b;break;case ra:g=i.x2+Qr.width()+u,m=b;break;case kf:g=b,m=i.y2+u;break;default:g=s.x,m=s.y}return hg(s,"x",g)|hg(s,"y",m)&&(Qr.translate(g,m),e.dirty(s),s.bounds.clear().union(Qr),t.bounds.clear().union(Qr),e.dirty(s)),s.bounds}function hne(e){J.call(this,null,e)}he(hne,J,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Y_e(n,r,e.layout),a$e(n,r,e)}),o$e(e.mark.group)?t.reflow():t}});function o$e(e){return e&&e.mark.role!=="legend-entry"}function a$e(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Kn().set(0,0,i,s),a=o.clone(),l=o.clone(),u=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case dN:h=V_e(f)?a:l,h.union(H_e(e,f,i,s));break;case hN:c=f;break;case pN:u.push(t$e(e,f));break;case M_e:case D_e:case Jte:case Zte:case ene:case tne:case nne:case rne:a.union(f.bounds),l.union(f.bounds);break;default:o.union(f.bounds)}if(u.length){const m={};u.forEach(y=>{d=y.orient||ra,d!==gN&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];dne(e,v,e$e(v,y,n.legends,a,l,i,s))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===ine||n.autosize.type===sne||n.autosize.type===one))switch(y.orient){case Zo:case ra:o.add(v.x1,0).add(v.x2,0);break;case zm:case kf:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(l),c&&o.union(s$e(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),l$e(e,t,o,n)}function l$e(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===N_e){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===gN?(u=0,f=0,l=o,c=a):s===ine?(l=Math.max(0,o-u-d),c=Math.max(0,a-f-h)):s===sne?(l=Math.max(0,o-u-d),a=c+f+h):s===one?(o=l+u+d,c=Math.max(0,a-f-h)):s===L_e&&(o=l+u+d,a=c+f+h),e._resizeView(o,a,l,c,[u,f],i.resize)}const u$e=Object.freeze(Object.defineProperty({__proto__:null,bound:ane,identifier:yN,mark:lne,overlap:une,render:fne,viewlayout:hne},Symbol.toStringTag,{value:"Module"}));function pne(e){J.call(this,null,e)}he(pne,J,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=D6(s,o,e.minstep),l=e.format||Bee(n,s,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?jee(s,e.values,a):N6(s,a);return i&&(r.rem=i),i=u.map((c,f)=>Dt({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(Dt({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function gne(e){J.call(this,null,e)}function c$e(){return Dt({})}function f$e(e){const t=R0().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}he(gne,J,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||c$e,s=e.key||Me,o=this.value;return te(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&ee("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=f$e(s)),t.visit(t.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),o.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function mne(e){J.call(this,null,e)}he(mne,J,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(te(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||vc,l=i.enter||vc,u=i.exit||vc,c=(s&&!o?i[s]:a)||vc;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),a(f,e)}),n.modifies(l.output),n.modifies(a.output),c!==vc&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==vc&&(t.visit(t.REM,f=>{u(f,e)}),n.modifies(u.output)),o||c!==vc){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=l(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function yne(e){J.call(this,[],e)}he(yne,J,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||hS,o=e.scale,a=+e.limit,l=D6(o,e.count==null?5:e.count,e.minstep),u=!!e.values||s===hS,c=e.format||Hee(n,o,l,s,e.formatSpecifier,e.formatType,u),f=e.values||Wee(o,l),d,h,p,g,m;return i&&(r.rem=i),s===hS?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,tt(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=di(g=p||8),i=i.map((y,v)=>Dt({index:v,label:c(y,v,i),value:y,offset:g,size:p(y,e)})),m&&(m=f[i.length],i.push(Dt({index:i.length,label:`…${f.length-i.length} entries`,value:m,offset:g,size:p(m,e)})))):s===LEe?(d=o.domain(),h=Iee(o,d[0],yt(d)),f.length<3&&!e.values&&d[0]!==yt(d)&&(f=[d[0],yt(d)]),i=f.map((y,v)=>Dt({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=YEe(o),i=f.map((y,v)=>Dt({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const d$e=e=>e.source.x,h$e=e=>e.source.y,p$e=e=>e.target.x,g$e=e=>e.target.y;function vN(e){J.call(this,{},e)}vN.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};he(vN,J,{transform(e,t){var n=e.sourceX||d$e,r=e.sourceY||h$e,i=e.targetX||p$e,s=e.targetY||g$e,o=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=vB.get(l+"-"+a)||vB.get(l);return u||ee("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=u(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const vne=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,m$e=(e,t,n,r)=>vne(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),bne=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},y$e=(e,t,n,r)=>bne(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),xne=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},v$e=(e,t,n,r)=>xne(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),b$e=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,x$e=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,w$e=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},S$e=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},E$e=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},C$e=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*o+","+l*a+" "+r*o+","+r*a},vB=R0({line:vne,"line-radial":m$e,arc:bne,"arc-radial":y$e,curve:xne,"curve-radial":v$e,"orthogonal-horizontal":b$e,"orthogonal-vertical":x$e,"orthogonal-radial":w$e,"diagonal-horizontal":S$e,"diagonal-vertical":E$e,"diagonal-radial":C$e});function bN(e){J.call(this,null,e)}bN.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};he(bN,J,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||$0,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(s),c=u.length,f=o,d=(a-o)/AQ(u),h=As(c),p,g,m;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),p=0;p<c;++p)m=u[h[p]],g=l[h[p]],g[r]=f,g[i]=f+=m*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const k$e=5;function _$e(e){const t=e.type;return!e.bins&&(t===Om||t===cx||t===fx)}function wne(e){return P6(e)&&e!==hl}const $$e=da(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Sne(e){J.call(this,null,e),this.modified(!0)}he(Sne,J,{transform(e,t){var n=t.dataflow,r=this.value,i=A$e(e);(!r||i!==r.type)&&(this.value=r=At(i)());for(i in e)if(!$$e[i]){if(i==="padding"&&wne(r.type))continue;tt(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return M$e(r,e,O$e(r,e,R$e(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function A$e(e){var t=e.type,n="",r;return t===hl?hl+"-"+Om:(T$e(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?hl+"-":r===3?I0+"-":""),(n+t||Om).toLowerCase())}function T$e(e){const t=e.type;return P6(t)&&t!==Ch&&t!==kh&&(e.scheme||e.range&&e.range.length&&e.range.every(we))}function R$e(e,t,n){const r=F$e(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&_$e(e),a,l;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return wne(s)&&t.padding&&i[0]!==yt(i)&&(i=P$e(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Ene(s,i,n)),s===A6&&e.unknown(t.domainImplicit?MF:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&D6(e,t.nice)||null),i.length}function F$e(e,t,n){return t?(e.domain(Ene(e.type,t,n)),t.length):-1}function P$e(e,t,n,r,i,s){var o=Math.abs(yt(n)-n[0]),a=o/(o-2*r),l=e===Fu?YM(t,null,a):e===fx?vE(t,null,a,.5):e===cx?vE(t,null,a,i||1):e===__?KM(t,null,a,s||1):XM(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function Ene(e,t,n){if(Pee(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+de(t))}return t}function O$e(e,t,n){let r=t.bins;if(r&&!te(r)){const i=e.domain(),s=i[0],o=yt(i),a=r.step;let l=r.start==null?s:r.start,u=r.stop==null?o:r.stop;a||ee("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),r=As(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===T6&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function M$e(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=D$e(r,t,n);else if(t.scheme&&(s=N$e(r,t,n),tt(s))){if(e.interpolator)return e.interpolator(s);ee(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&Oee(r))return e.interpolator(T_(tP(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(O6(t.interpolate,t.interpolateGamma)):tt(e.round)?e.round(i):tt(e.rangeRound)&&e.interpolate(i?N0:Bf),s&&e.range(tP(s,t.reverse))}function D$e(e,t,n){e!==_ee&&e!==jF&&ee("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===jF?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*$6(n,i,r)]}function N$e(e,t,n){var r=t.schemeExtent,i,s;return te(t.scheme)?s=T_(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=M6(i),s||ee(`Unrecognized scheme name: ${t.scheme}`)),n=e===A_?n+1:e===T6?n-1:e===Mm||e===$_?+t.schemeCount||k$e:n,Oee(e)?bB(s,r,t.reverse):tt(s)?Nee(bB(s,r),n):e===A6?s:s.slice(0,n)}function bB(e,t,n){return tt(e)&&(t||n)?Dee(e,tP(t||[0,1],n)):e}function tP(e,t){return t?e.slice().reverse():e}function Cne(e){J.call(this,null,e)}he(Cne,J,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(sp(e.sort)),this.modified(n),t}});const xB="zero",kne="center",_ne="normalize",$ne=["y0","y1"];function xN(e){J.call(this,null,e)}xN.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:xB,values:[xB,kne,_ne]},{name:"as",type:"string",array:!0,length:2,default:$ne}]};he(xN,J,{transform(e,t){var n=e.as||$ne,r=n[0],i=n[1],s=sp(e.sort),o=e.field||$0,a=e.offset===kne?I$e:e.offset===_ne?L$e:z$e,l,u,c,f;for(l=j$e(t.source,e.groupby,s,o),u=0,c=l.length,f=l.max;u<c;++u)a(l[u],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function I$e(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,l;a<o;++a)l=e[a],l[r]=s,l[i]=s+=Math.abs(n(l))}function L$e(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=o,c[i]=o=s*(u+=Math.abs(n(c)))}function z$e(e,t,n,r,i){for(var s=0,o=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=o,c[i]=o+=u):(c[r]=s,c[i]=s+=u)}function j$e(e,t,n,r){var i=[],s=g=>g(c),o,a,l,u,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,l=e.length;a<l;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,u=i.length;f<u;++f){for(d=i[f],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const B$e=Object.freeze(Object.defineProperty({__proto__:null,axisticks:pne,datajoin:gne,encode:mne,legendentries:yne,linkpath:vN,pie:bN,scale:Sne,sortitems:Cne,stack:xN},Symbol.toStringTag,{value:"Module"}));var Ie=1e-6,KE=1e-12,it=Math.PI,On=it/2,QE=it/4,Ni=it*2,zn=180/it,rt=it/180,mt=Math.abs,z0=Math.atan,ko=Math.atan2,ze=Math.cos,Qw=Math.ceil,Ane=Math.exp,nP=Math.hypot,JE=Math.log,B5=Math.pow,De=Math.sin,ho=Math.sign||function(e){return e>0?1:e<0?-1:0},Ii=Math.sqrt,wN=Math.tan;function Tne(e){return e>1?0:e<-1?it:Math.acos(e)}function cs(e){return e>1?On:e<-1?-On:Math.asin(e)}function Mr(){}function ZE(e,t){e&&SB.hasOwnProperty(e.type)&&SB[e.type](e,t)}var wB={Feature:function(e,t){ZE(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ZE(n[r].geometry,t)}},SB={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){rP(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)rP(n[r],t,0)},Polygon:function(e,t){EB(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)EB(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ZE(n[r],t)}};function rP(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function EB(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)rP(e[n],t,1);t.polygonEnd()}function ru(e,t){e&&wB.hasOwnProperty(e.type)?wB[e.type](e,t):ZE(e,t)}var eC=new Pi,tC=new Pi,Rne,Fne,iP,sP,oP,El={point:Mr,lineStart:Mr,lineEnd:Mr,polygonStart:function(){eC=new Pi,El.lineStart=U$e,El.lineEnd=V$e},polygonEnd:function(){var e=+eC;tC.add(e<0?Ni+e:e),this.lineStart=this.lineEnd=this.point=Mr},sphere:function(){tC.add(Ni)}};function U$e(){El.point=W$e}function V$e(){Pne(Rne,Fne)}function W$e(e,t){El.point=Pne,Rne=e,Fne=t,e*=rt,t*=rt,iP=e,sP=ze(t=t/2+QE),oP=De(t)}function Pne(e,t){e*=rt,t*=rt,t=t/2+QE;var n=e-iP,r=n>=0?1:-1,i=r*n,s=ze(t),o=De(t),a=oP*o,l=sP*s+a*ze(i),u=a*r*De(i);eC.add(ko(u,l)),iP=e,sP=s,oP=o}function H$e(e){return tC=new Pi,ru(e,El),tC*2}function nC(e){return[ko(e[1],e[0]),cs(e[2])]}function $h(e){var t=e[0],n=e[1],r=ze(n);return[r*ze(t),r*De(t),De(n)]}function Jw(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function jm(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function U5(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Zw(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function rC(e){var t=Ii(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var wn,Xi,Rn,Es,kd,One,Mne,Vg,ev,kc,Pu,eu={point:aP,lineStart:CB,lineEnd:kB,polygonStart:function(){eu.point=Nne,eu.lineStart=q$e,eu.lineEnd=G$e,ev=new Pi,El.polygonStart()},polygonEnd:function(){El.polygonEnd(),eu.point=aP,eu.lineStart=CB,eu.lineEnd=kB,eC<0?(wn=-(Rn=180),Xi=-(Es=90)):ev>Ie?Es=90:ev<-Ie&&(Xi=-90),Pu[0]=wn,Pu[1]=Rn},sphere:function(){wn=-(Rn=180),Xi=-(Es=90)}};function aP(e,t){kc.push(Pu=[wn=e,Rn=e]),t<Xi&&(Xi=t),t>Es&&(Es=t)}function Dne(e,t){var n=$h([e*rt,t*rt]);if(Vg){var r=jm(Vg,n),i=[r[1],-r[0],0],s=jm(i,r);rC(s),s=nC(s);var o=e-kd,a=o>0?1:-1,l=s[0]*zn*a,u,c=mt(o)>180;c^(a*kd<l&&l<a*e)?(u=s[1]*zn,u>Es&&(Es=u)):(l=(l+360)%360-180,c^(a*kd<l&&l<a*e)?(u=-s[1]*zn,u<Xi&&(Xi=u)):(t<Xi&&(Xi=t),t>Es&&(Es=t))),c?e<kd?ws(wn,e)>ws(wn,Rn)&&(Rn=e):ws(e,Rn)>ws(wn,Rn)&&(wn=e):Rn>=wn?(e<wn&&(wn=e),e>Rn&&(Rn=e)):e>kd?ws(wn,e)>ws(wn,Rn)&&(Rn=e):ws(e,Rn)>ws(wn,Rn)&&(wn=e)}else kc.push(Pu=[wn=e,Rn=e]);t<Xi&&(Xi=t),t>Es&&(Es=t),Vg=n,kd=e}function CB(){eu.point=Dne}function kB(){Pu[0]=wn,Pu[1]=Rn,eu.point=aP,Vg=null}function Nne(e,t){if(Vg){var n=e-kd;ev.add(mt(n)>180?n+(n>0?360:-360):n)}else One=e,Mne=t;El.point(e,t),Dne(e,t)}function q$e(){El.lineStart()}function G$e(){Nne(One,Mne),El.lineEnd(),mt(ev)>Ie&&(wn=-(Rn=180)),Pu[0]=wn,Pu[1]=Rn,Vg=null}function ws(e,t){return(t-=e)<0?t+360:t}function X$e(e,t){return e[0]-t[0]}function _B(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Y$e(e){var t,n,r,i,s,o,a;if(Es=Rn=-(wn=Xi=1/0),kc=[],ru(e,eu),n=kc.length){for(kc.sort(X$e),t=1,r=kc[0],s=[r];t<n;++t)i=kc[t],_B(r,i[0])||_B(r,i[1])?(ws(r[0],i[1])>ws(r[0],r[1])&&(r[1]=i[1]),ws(i[0],r[1])>ws(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=ws(r[1],i[0]))>o&&(o=a,wn=i[0],Rn=r[1])}return kc=Pu=null,wn===1/0||Xi===1/0?[[NaN,NaN],[NaN,NaN]]:[[wn,Xi],[Rn,Es]]}var x1,iC,sC,oC,aC,lC,uC,cC,lP,uP,cP,Ine,Lne,ki,_i,$i,ia={sphere:Mr,point:SN,lineStart:$B,lineEnd:AB,polygonStart:function(){ia.lineStart=J$e,ia.lineEnd=Z$e},polygonEnd:function(){ia.lineStart=$B,ia.lineEnd=AB}};function SN(e,t){e*=rt,t*=rt;var n=ze(t);Ex(n*ze(e),n*De(e),De(t))}function Ex(e,t,n){++x1,sC+=(e-sC)/x1,oC+=(t-oC)/x1,aC+=(n-aC)/x1}function $B(){ia.point=K$e}function K$e(e,t){e*=rt,t*=rt;var n=ze(t);ki=n*ze(e),_i=n*De(e),$i=De(t),ia.point=Q$e,Ex(ki,_i,$i)}function Q$e(e,t){e*=rt,t*=rt;var n=ze(t),r=n*ze(e),i=n*De(e),s=De(t),o=ko(Ii((o=_i*s-$i*i)*o+(o=$i*r-ki*s)*o+(o=ki*i-_i*r)*o),ki*r+_i*i+$i*s);iC+=o,lC+=o*(ki+(ki=r)),uC+=o*(_i+(_i=i)),cC+=o*($i+($i=s)),Ex(ki,_i,$i)}function AB(){ia.point=SN}function J$e(){ia.point=eAe}function Z$e(){zne(Ine,Lne),ia.point=SN}function eAe(e,t){Ine=e,Lne=t,e*=rt,t*=rt,ia.point=zne;var n=ze(t);ki=n*ze(e),_i=n*De(e),$i=De(t),Ex(ki,_i,$i)}function zne(e,t){e*=rt,t*=rt;var n=ze(t),r=n*ze(e),i=n*De(e),s=De(t),o=_i*s-$i*i,a=$i*r-ki*s,l=ki*i-_i*r,u=nP(o,a,l),c=cs(u),f=u&&-c/u;lP.add(f*o),uP.add(f*a),cP.add(f*l),iC+=c,lC+=c*(ki+(ki=r)),uC+=c*(_i+(_i=i)),cC+=c*($i+($i=s)),Ex(ki,_i,$i)}function tAe(e){x1=iC=sC=oC=aC=lC=uC=cC=0,lP=new Pi,uP=new Pi,cP=new Pi,ru(e,ia);var t=+lP,n=+uP,r=+cP,i=nP(t,n,r);return i<KE&&(t=lC,n=uC,r=cC,iC<Ie&&(t=sC,n=oC,r=aC),i=nP(t,n,r),i<KE)?[NaN,NaN]:[ko(n,t)*zn,cs(r/i)*zn]}function fP(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function dP(e,t){return mt(e)>it&&(e-=Math.round(e/Ni)*Ni),[e,t]}dP.invert=dP;function jne(e,t,n){return(e%=Ni)?t||n?fP(RB(e),FB(t,n)):RB(e):t||n?FB(t,n):dP}function TB(e){return function(t,n){return t+=e,mt(t)>it&&(t-=Math.round(t/Ni)*Ni),[t,n]}}function RB(e){var t=TB(e);return t.invert=TB(-e),t}function FB(e,t){var n=ze(e),r=De(e),i=ze(t),s=De(t);function o(a,l){var u=ze(l),c=ze(a)*u,f=De(a)*u,d=De(l),h=d*n+c*r;return[ko(f*i-h*s,c*n-d*r),cs(h*i+f*s)]}return o.invert=function(a,l){var u=ze(l),c=ze(a)*u,f=De(a)*u,d=De(l),h=d*i-f*s;return[ko(f*i+d*s,c*n+h*r),cs(h*n-c*r)]},o}function nAe(e){e=jne(e[0]*rt,e[1]*rt,e.length>2?e[2]*rt:0);function t(n){return n=e(n[0]*rt,n[1]*rt),n[0]*=zn,n[1]*=zn,n}return t.invert=function(n){return n=e.invert(n[0]*rt,n[1]*rt),n[0]*=zn,n[1]*=zn,n},t}function rAe(e,t,n,r,i,s){if(n){var o=ze(t),a=De(t),l=r*n;i==null?(i=t+r*Ni,s=t-l/2):(i=PB(o,i),s=PB(o,s),(r>0?i<s:i>s)&&(i+=r*Ni));for(var u,c=i;r>0?c>s:c<s;c-=l)u=nC([o,-a*ze(c),-a*De(c)]),e.point(u[0],u[1])}}function PB(e,t){t=$h(t),t[0]-=e,rC(t);var n=Tne(-t[1]);return((-t[2]<0?-n:n)+Ni-Ie)%Ni}function Bne(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Mr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function SS(e,t){return mt(e[0]-t[0])<Ie&&mt(e[1]-t[1])<Ie}function e2(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Une(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],v;if(SS(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((m=p[a])[0],m[1]);i.lineEnd();return}y[0]+=2*Ie}s.push(v=new e2(m,p,null,!0)),o.push(v.o=new e2(m,null,v,!1)),s.push(v=new e2(y,p,null,!1)),o.push(v.o=new e2(y,null,v,!0))}}),!!s.length){for(o.sort(t),OB(s),OB(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function OB(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function V5(e){return mt(e[0])<=it?e[0]:ho(e[0])*((mt(e[0])+it)%Ni-it)}function iAe(e,t){var n=V5(t),r=t[1],i=De(r),s=[De(n),-ze(n),0],o=0,a=0,l=new Pi;i===1?r=On+Ie:i===-1&&(r=-On-Ie);for(var u=0,c=e.length;u<c;++u)if(d=(f=e[u]).length)for(var f,d,h=f[d-1],p=V5(h),g=h[1]/2+QE,m=De(g),y=ze(g),v=0;v<d;++v,p=x,m=C,y=S,h=b){var b=f[v],x=V5(b),w=b[1]/2+QE,C=De(w),S=ze(w),k=x-p,$=k>=0?1:-1,F=$*k,O=F>it,B=m*C;if(l.add(ko(B*$*De(F),y*S+B*ze(F))),o+=O?k+$*Ni:k,O^p>=n^x>=n){var D=jm($h(h),$h(b));rC(D);var N=jm(s,D);rC(N);var A=(O^k>=0?-1:1)*cs(N[2]);(r>A||r===A&&(D[0]||D[1]))&&(a+=O^k>=0?1:-1)}}return(o<-Ie||o<Ie&&l<-KE)^a&1}function Vne(e,t,n,r){return function(i){var s=t(i),o=Bne(),a=t(o),l=!1,u,c,f,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=$Q(c);var x=iAe(u,r);c.length?(l||(i.polygonStart(),l=!0),Une(c,oAe,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,w){e(x,w)&&i.point(x,w)}function p(x,w){s.point(x,w)}function g(){d.point=p,s.lineStart()}function m(){d.point=h,s.lineEnd()}function y(x,w){f.push([x,w]),a.point(x,w)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),w=o.result(),C,S=w.length,k,$,F;if(f.pop(),u.push(f),f=null,!!S){if(x&1){if($=w[0],(k=$.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),C=0;C<k;++C)i.point((F=$[C])[0],F[1]);i.lineEnd()}return}S>1&&x&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(sAe))}}return d}}function sAe(e){return e.length>1}function oAe(e,t){return((e=e.x)[0]<0?e[1]-On-Ie:On-e[1])-((t=t.x)[0]<0?t[1]-On-Ie:On-t[1])}const MB=Vne(function(){return!0},aAe,uAe,[-it,-On]);function aAe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?it:-it,l=mt(s-t);mt(l-it)<Ie?(e.point(t,n=(n+o)/2>0?On:-On),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=it&&(mt(t-r)<Ie&&(t-=r*Ie),mt(s-a)<Ie&&(s-=a*Ie),n=lAe(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function lAe(e,t,n,r){var i,s,o=De(e-n);return mt(o)>Ie?z0((De(t)*(s=ze(r))*De(n)-De(r)*(i=ze(t))*De(e))/(i*s*o)):(t+r)/2}function uAe(e,t,n,r){var i;if(e==null)i=n*On,r.point(-it,i),r.point(0,i),r.point(it,i),r.point(it,0),r.point(it,-i),r.point(0,-i),r.point(-it,-i),r.point(-it,0),r.point(-it,i);else if(mt(e[0]-t[0])>Ie){var s=e[0]<t[0]?it:-it;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function cAe(e){var t=ze(e),n=2*rt,r=t>0,i=mt(t)>Ie;function s(c,f,d,h){rAe(h,e,n,d,c,f)}function o(c,f){return ze(c)*ze(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var v=[m,y],b,x=o(m,y),w=r?x?0:u(m,y):x?u(m+(m<0?it:-it),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=l(f,v),(!b||SS(f,b)||SS(v,b))&&(v[2]=1)),x!==h)g=0,x?(c.lineStart(),b=l(v,f),c.point(b[0],b[1])):(b=l(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var C;!(w&d)&&(C=l(v,f,!0))&&(g=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}x&&(!f||!SS(f,v))&&c.point(v[0],v[1]),f=v,h=x,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(c,f,d){var h=$h(c),p=$h(f),g=[1,0,0],m=jm(h,p),y=Jw(m,m),v=m[0],b=y-v*v;if(!b)return!d&&c;var x=t*y/b,w=-t*v/b,C=jm(g,m),S=Zw(g,x),k=Zw(m,w);U5(S,k);var $=C,F=Jw(S,$),O=Jw($,$),B=F*F-O*(Jw(S,S)-1);if(!(B<0)){var D=Ii(B),N=Zw($,(-F-D)/O);if(U5(N,S),N=nC(N),!d)return N;var A=c[0],P=f[0],j=c[1],z=f[1],U;P<A&&(U=A,A=P,P=U);var X=P-A,K=mt(X-it)<Ie,pe=K||X<Ie;if(!K&&z<j&&(U=j,j=z,z=U),pe?K?j+z>0^N[1]<(mt(N[0]-A)<Ie?j:z):j<=N[1]&&N[1]<=z:X>it^(A<=N[0]&&N[0]<=P)){var se=Zw($,(-F+D)/O);return U5(se,S),[N,nC(se)]}}}function u(c,f){var d=r?e:it-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Vne(o,a,s,r?[0,-e]:[-it,e-it])}function fAe(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],u=t[1],c=0,f=1,d=l-o,h=u-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var w1=1e9,t2=-w1;function Wne(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function s(u,c,f,d){var h=0,p=0;if(u==null||(h=o(u,f))!==(p=o(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(u,c){return mt(u[0]-e)<Ie?c>0?0:3:mt(u[0]-n)<Ie?c>0?2:1:mt(u[1]-t)<Ie?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=o(u,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=Bne(),d,h,p,g,m,y,v,b,x,w,C,S={point:k,lineStart:B,lineEnd:D,polygonStart:F,polygonEnd:O};function k(A,P){i(A,P)&&c.point(A,P)}function $(){for(var A=0,P=0,j=h.length;P<j;++P)for(var z=h[P],U=1,X=z.length,K=z[0],pe,se,_e=K[0],Ze=K[1];U<X;++U)pe=_e,se=Ze,K=z[U],_e=K[0],Ze=K[1],se<=r?Ze>r&&(_e-pe)*(r-se)>(Ze-se)*(e-pe)&&++A:Ze<=r&&(_e-pe)*(r-se)<(Ze-se)*(e-pe)&&--A;return A}function F(){c=f,d=[],h=[],C=!0}function O(){var A=$(),P=C&&A,j=(d=$Q(d)).length;(P||j)&&(u.polygonStart(),P&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),j&&Une(d,a,A,s,u),u.polygonEnd()),c=u,d=h=p=null}function B(){S.point=N,h&&h.push(p=[]),w=!0,x=!1,v=b=NaN}function D(){d&&(N(g,m),y&&x&&f.rejoin(),d.push(f.result())),S.point=k,x&&c.lineEnd()}function N(A,P){var j=i(A,P);if(h&&p.push([A,P]),w)g=A,m=P,y=j,w=!1,j&&(c.lineStart(),c.point(A,P));else if(j&&x)c.point(A,P);else{var z=[v=Math.max(t2,Math.min(w1,v)),b=Math.max(t2,Math.min(w1,b))],U=[A=Math.max(t2,Math.min(w1,A)),P=Math.max(t2,Math.min(w1,P))];fAe(z,U,e,t,n,r)?(x||(c.lineStart(),c.point(z[0],z[1])),c.point(U[0],U[1]),j||c.lineEnd(),C=!1):j&&(c.lineStart(),c.point(A,P),C=!1)}v=A,b=P,x=j}return S}}function DB(e,t,n){var r=As(e,t-Ie,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function NB(e,t,n){var r=As(e,t-Ie,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function dAe(){var e,t,n,r,i,s,o,a,l=10,u=l,c=90,f=360,d,h,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return As(Qw(r/c)*c,n,c).map(p).concat(As(Qw(a/f)*f,o,f).map(g)).concat(As(Qw(t/l)*l,e,l).filter(function(b){return mt(b%c)>Ie}).map(d)).concat(As(Qw(s/u)*u,i,u).filter(function(b){return mt(b%f)>Ie}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(m)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(m)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],u=+b[1],y):[l,u]},y.precision=function(b){return arguments.length?(m=+b,d=DB(s,i,90),h=NB(t,e,m),p=DB(a,o,90),g=NB(r,n,m),y):m},y.extentMajor([[-180,-90+Ie],[180,90-Ie]]).extentMinor([[-180,-80-Ie],[180,80+Ie]])}const Wv=e=>e;var W5=new Pi,hP=new Pi,Hne,qne,pP,gP,iu={point:Mr,lineStart:Mr,lineEnd:Mr,polygonStart:function(){iu.lineStart=hAe,iu.lineEnd=gAe},polygonEnd:function(){iu.lineStart=iu.lineEnd=iu.point=Mr,W5.add(mt(hP)),hP=new Pi},result:function(){var e=W5/2;return W5=new Pi,e}};function hAe(){iu.point=pAe}function pAe(e,t){iu.point=Gne,Hne=pP=e,qne=gP=t}function Gne(e,t){hP.add(gP*e-pP*t),pP=e,gP=t}function gAe(){Gne(Hne,qne)}var Bm=1/0,fC=Bm,Hv=-Bm,dC=Hv,hC={point:mAe,lineStart:Mr,lineEnd:Mr,polygonStart:Mr,polygonEnd:Mr,result:function(){var e=[[Bm,fC],[Hv,dC]];return Hv=dC=-(fC=Bm=1/0),e}};function mAe(e,t){e<Bm&&(Bm=e),e>Hv&&(Hv=e),t<fC&&(fC=t),t>dC&&(dC=t)}var mP=0,yP=0,S1=0,pC=0,gC=0,pg=0,vP=0,bP=0,E1=0,Xne,Yne,tl,nl,co={point:Ah,lineStart:IB,lineEnd:LB,polygonStart:function(){co.lineStart=bAe,co.lineEnd=xAe},polygonEnd:function(){co.point=Ah,co.lineStart=IB,co.lineEnd=LB},result:function(){var e=E1?[vP/E1,bP/E1]:pg?[pC/pg,gC/pg]:S1?[mP/S1,yP/S1]:[NaN,NaN];return mP=yP=S1=pC=gC=pg=vP=bP=E1=0,e}};function Ah(e,t){mP+=e,yP+=t,++S1}function IB(){co.point=yAe}function yAe(e,t){co.point=vAe,Ah(tl=e,nl=t)}function vAe(e,t){var n=e-tl,r=t-nl,i=Ii(n*n+r*r);pC+=i*(tl+e)/2,gC+=i*(nl+t)/2,pg+=i,Ah(tl=e,nl=t)}function LB(){co.point=Ah}function bAe(){co.point=wAe}function xAe(){Kne(Xne,Yne)}function wAe(e,t){co.point=Kne,Ah(Xne=tl=e,Yne=nl=t)}function Kne(e,t){var n=e-tl,r=t-nl,i=Ii(n*n+r*r);pC+=i*(tl+e)/2,gC+=i*(nl+t)/2,pg+=i,i=nl*e-tl*t,vP+=i*(tl+e),bP+=i*(nl+t),E1+=i*3,Ah(tl=e,nl=t)}function Qne(e){this._context=e}Qne.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ni);break}}},result:Mr};var xP=new Pi,H5,Jne,Zne,C1,k1,qv={point:Mr,lineStart:function(){qv.point=SAe},lineEnd:function(){H5&&ere(Jne,Zne),qv.point=Mr},polygonStart:function(){H5=!0},polygonEnd:function(){H5=null},result:function(){var e=+xP;return xP=new Pi,e}};function SAe(e,t){qv.point=ere,Jne=C1=e,Zne=k1=t}function ere(e,t){C1-=e,k1-=t,xP.add(Ii(C1*C1+k1*k1)),C1=e,k1=t}let zB,mC,jB,BB;class UB{constructor(t){this._append=t==null?tre:EAe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==jB||this._append!==mC){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,jB=r,mC=this._append,BB=this._,this._=i}this._+=BB;break}}}result(){const t=this._;return this._="",t.length?t:null}}function tre(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function EAe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return tre;if(t!==zB){const n=10**t;zB=t,mC=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return mC}function nre(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),ru(a,i(s))),s.result()}return o.area=function(a){return ru(a,i(iu)),iu.result()},o.measure=function(a){return ru(a,i(qv)),qv.result()},o.bounds=function(a){return ru(a,i(hC)),hC.result()},o.centroid=function(a){return ru(a,i(co)),co.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,Wv):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new UB(n)):new Qne(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new UB(n)),o},o.projection(e).digits(n).context(t)}function U_(e){return function(t){var n=new wP;for(var r in e)n[r]=e[r];return n.stream=t,n}}function wP(){}wP.prototype={constructor:wP,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function EN(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),ru(n,e.stream(hC)),t(hC.result()),r!=null&&e.clipExtent(r),e}function V_(e,t,n){return EN(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function CN(e,t,n){return V_(e,[[0,0],t],n)}function kN(e,t,n){return EN(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function _N(e,t,n){return EN(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var VB=16,CAe=ze(30*rt);function WB(e,t){return+t?_Ae(e,t):kAe(e)}function kAe(e){return U_({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function _Ae(e,t){function n(r,i,s,o,a,l,u,c,f,d,h,p,g,m){var y=u-r,v=c-i,b=y*y+v*v;if(b>4*t&&g--){var x=o+d,w=a+h,C=l+p,S=Ii(x*x+w*w+C*C),k=cs(C/=S),$=mt(mt(C)-1)<Ie||mt(s-f)<Ie?(s+f)/2:ko(w,x),F=e($,k),O=F[0],B=F[1],D=O-r,N=B-i,A=v*D-y*N;(A*A/b>t||mt((y*D+v*N)/b-.5)>.3||o*d+a*h+l*p<CAe)&&(n(r,i,s,o,a,l,O,B,$,x/=S,w/=S,C,g,m),m.point(O,B),n(O,B,$,x,w,C,u,c,f,d,h,p,g,m))}}return function(r){var i,s,o,a,l,u,c,f,d,h,p,g,m={point:y,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),m.lineStart=w},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(k,$){k=e(k,$),r.point(k[0],k[1])}function v(){f=NaN,m.point=b,r.lineStart()}function b(k,$){var F=$h([k,$]),O=e(k,$);n(f,d,c,h,p,g,f=O[0],d=O[1],c=k,h=F[0],p=F[1],g=F[2],VB,r),r.point(f,d)}function x(){m.point=y,r.lineEnd()}function w(){v(),m.point=C,m.lineEnd=S}function C(k,$){b(i=k,$),s=f,o=d,a=h,l=p,u=g,m.point=b}function S(){n(f,d,c,h,p,g,s,o,i,a,l,u,VB,r),m.lineEnd=x,x()}return m}}var $Ae=U_({point:function(e,t){this.stream.point(e*rt,t*rt)}});function AAe(e){return U_({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function TAe(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function HB(e,t,n,r,i,s){if(!s)return TAe(e,t,n,r,i);var o=ze(s),a=De(s),l=o*e,u=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,m){return g*=r,m*=i,[l*g-u*m+t,n-u*g-l*m]}return p.invert=function(g,m){return[r*(c*g-f*m+d),i*(h-f*g-c*m)]},p}function Ol(e){return rre(function(){return e})()}function rre(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,u=0,c,f=0,d=1,h=1,p=null,g=MB,m=null,y,v,b,x=Wv,w=.5,C,S,k,$,F;function O(A){return k(A[0]*rt,A[1]*rt)}function B(A){return A=k.invert(A[0],A[1]),A&&[A[0]*zn,A[1]*zn]}O.stream=function(A){return $&&F===A?$:$=$Ae(AAe(c)(g(C(x(F=A)))))},O.preclip=function(A){return arguments.length?(g=A,p=void 0,N()):g},O.postclip=function(A){return arguments.length?(x=A,m=y=v=b=null,N()):x},O.clipAngle=function(A){return arguments.length?(g=+A?cAe(p=A*rt):(p=null,MB),N()):p*zn},O.clipExtent=function(A){return arguments.length?(x=A==null?(m=y=v=b=null,Wv):Wne(m=+A[0][0],y=+A[0][1],v=+A[1][0],b=+A[1][1]),N()):m==null?null:[[m,y],[v,b]]},O.scale=function(A){return arguments.length?(n=+A,D()):n},O.translate=function(A){return arguments.length?(r=+A[0],i=+A[1],D()):[r,i]},O.center=function(A){return arguments.length?(s=A[0]%360*rt,o=A[1]%360*rt,D()):[s*zn,o*zn]},O.rotate=function(A){return arguments.length?(a=A[0]%360*rt,l=A[1]%360*rt,u=A.length>2?A[2]%360*rt:0,D()):[a*zn,l*zn,u*zn]},O.angle=function(A){return arguments.length?(f=A%360*rt,D()):f*zn},O.reflectX=function(A){return arguments.length?(d=A?-1:1,D()):d<0},O.reflectY=function(A){return arguments.length?(h=A?-1:1,D()):h<0},O.precision=function(A){return arguments.length?(C=WB(S,w=A*A),N()):Ii(w)},O.fitExtent=function(A,P){return V_(O,A,P)},O.fitSize=function(A,P){return CN(O,A,P)},O.fitWidth=function(A,P){return kN(O,A,P)},O.fitHeight=function(A,P){return _N(O,A,P)};function D(){var A=HB(n,0,0,d,h,f).apply(null,t(s,o)),P=HB(n,r-A[0],i-A[1],d,h,f);return c=jne(a,l,u),S=fP(t,P),k=fP(c,S),C=WB(S,w),N()}function N(){return $=F=null,O}return function(){return t=e.apply(this,arguments),O.invert=t.invert&&B,D()}}function $N(e){var t=0,n=it/3,r=rre(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*rt,n=s[1]*rt):[t*zn,n*zn]},i}function RAe(e){var t=ze(e);function n(r,i){return[r*t,De(i)/t]}return n.invert=function(r,i){return[r/t,cs(i*t)]},n}function FAe(e,t){var n=De(e),r=(n+De(t))/2;if(mt(r)<Ie)return RAe(e);var i=1+n*(2*r-n),s=Ii(i)/r;function o(a,l){var u=Ii(i-2*r*De(l))/r;return[u*De(a*=r),s-u*ze(a)]}return o.invert=function(a,l){var u=s-l,c=ko(a,mt(u))*ho(u);return u*r<0&&(c-=it*ho(a)*ho(u)),[c/r,cs((i-(a*a+u*u)*r*r)/(2*r))]},o}function yC(){return $N(FAe).scale(155.424).center([0,33.6442])}function ire(){return yC().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function PAe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function OAe(){var e,t,n=ire(),r,i=yC().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=yC().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=PAe([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+Ie,g+.12*h+Ie],[p-.214*h-Ie,g+.234*h-Ie]]).stream(u),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+Ie,g+.166*h+Ie],[p-.115*h-Ie,g+.234*h-Ie]]).stream(u),f()},c.fitExtent=function(d,h){return V_(c,d,h)},c.fitSize=function(d,h){return CN(c,d,h)},c.fitWidth=function(d,h){return kN(c,d,h)},c.fitHeight=function(d,h){return _N(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function sre(e){return function(t,n){var r=ze(t),i=ze(n),s=e(r*i);return s===1/0?[2,0]:[s*i*De(t),s*De(n)]}}function Cx(e){return function(t,n){var r=Ii(t*t+n*n),i=e(r),s=De(i),o=ze(i);return[ko(t*s,r*o),cs(r&&n*s/r)]}}var ore=sre(function(e){return Ii(2/(1+e))});ore.invert=Cx(function(e){return 2*cs(e/2)});function MAe(){return Ol(ore).scale(124.75).clipAngle(180-.001)}var are=sre(function(e){return(e=Tne(e))&&e/De(e)});are.invert=Cx(function(e){return e});function DAe(){return Ol(are).scale(79.4188).clipAngle(180-.001)}function W_(e,t){return[e,JE(wN((On+t)/2))]}W_.invert=function(e,t){return[e,2*z0(Ane(t))-On]};function NAe(){return lre(W_).scale(961/Ni)}function lre(e){var t=Ol(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,u;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=l=u=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var f=it*r(),d=t(nAe(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===W_?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,l),u]]:[[o,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,u)]])}return c()}function n2(e){return wN((On+e)/2)}function IAe(e,t){var n=ze(e),r=e===t?De(e):JE(n/ze(t))/JE(n2(t)/n2(e)),i=n*B5(n2(e),r)/r;if(!r)return W_;function s(o,a){i>0?a<-On+Ie&&(a=-On+Ie):a>On-Ie&&(a=On-Ie);var l=i/B5(n2(a),r);return[l*De(r*o),i-l*ze(r*o)]}return s.invert=function(o,a){var l=i-a,u=ho(r)*Ii(o*o+l*l),c=ko(o,mt(l))*ho(l);return l*r<0&&(c-=it*ho(o)*ho(l)),[c/r,2*z0(B5(i/u,1/r))-On]},s}function LAe(){return $N(IAe).scale(109.5).parallels([30,30])}function vC(e,t){return[e,t]}vC.invert=vC;function zAe(){return Ol(vC).scale(152.63)}function jAe(e,t){var n=ze(e),r=e===t?De(e):(n-ze(t))/(t-e),i=n/r+e;if(mt(r)<Ie)return vC;function s(o,a){var l=i-a,u=r*o;return[l*De(u),i-l*ze(u)]}return s.invert=function(o,a){var l=i-a,u=ko(o,mt(l))*ho(l);return l*r<0&&(u-=it*ho(o)*ho(l)),[u/r,i-ho(r)*Ii(o*o+l*l)]},s}function BAe(){return $N(jAe).scale(131.154).center([0,13.9389])}var tv=1.340264,nv=-.081106,rv=893e-6,iv=.003796,bC=Ii(3)/2,UAe=12;function ure(e,t){var n=cs(bC*De(t)),r=n*n,i=r*r*r;return[e*ze(n)/(bC*(tv+3*nv*r+i*(7*rv+9*iv*r))),n*(tv+nv*r+i*(rv+iv*r))]}ure.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<UAe&&(a=n*(tv+nv*r+i*(rv+iv*r))-t,l=tv+3*nv*r+i*(7*rv+9*iv*r),n-=o=a/l,r=n*n,i=r*r*r,!(mt(o)<KE));++s);return[bC*e*(tv+3*nv*r+i*(7*rv+9*iv*r))/ze(n),cs(De(n)/bC)]};function VAe(){return Ol(ure).scale(177.158)}function cre(e,t){var n=ze(t),r=ze(e)*n;return[n*De(e)/r,De(t)/r]}cre.invert=Cx(z0);function WAe(){return Ol(cre).scale(144.049).clipAngle(60)}function HAe(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,l=null,u,c,f,d=1,h=1,p=U_({point:function(x,w){var C=b([x,w]);this.stream.point(C[0],C[1])}}),g=Wv,m,y;function v(){return d=e*r,h=e*i,m=y=null,b}function b(x){var w=x[0]*d,C=x[1]*h;if(s){var S=C*o-w*a;w=w*o+C*a,C=S}return[w+t,C+n]}return b.invert=function(x){var w=x[0]-t,C=x[1]-n;if(s){var S=C*o+w*a;w=w*o-C*a,C=S}return[w/d,C/h]},b.stream=function(x){return m&&y===x?m:m=p(g(y=x))},b.postclip=function(x){return arguments.length?(g=x,l=u=c=f=null,v()):g},b.clipExtent=function(x){return arguments.length?(g=x==null?(l=u=c=f=null,Wv):Wne(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),v()):l==null?null:[[l,u],[c,f]]},b.scale=function(x){return arguments.length?(e=+x,v()):e},b.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],v()):[t,n]},b.angle=function(x){return arguments.length?(s=x%360*rt,a=De(s),o=ze(s),v()):s*zn},b.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,v()):i<0},b.fitExtent=function(x,w){return V_(b,x,w)},b.fitSize=function(x,w){return CN(b,x,w)},b.fitWidth=function(x,w){return kN(b,x,w)},b.fitHeight=function(x,w){return _N(b,x,w)},b}function fre(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}fre.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(mt(i)>Ie&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function qAe(){return Ol(fre).scale(175.295)}function dre(e,t){return[ze(t)*De(e),De(t)]}dre.invert=Cx(cs);function GAe(){return Ol(dre).scale(249.5).clipAngle(90+Ie)}function hre(e,t){var n=ze(t),r=1+ze(e)*n;return[n*De(e)/r,De(t)/r]}hre.invert=Cx(function(e){return 2*z0(e)});function XAe(){return Ol(hre).scale(250).clipAngle(142)}function pre(e,t){return[JE(wN((On+t)/2)),-e]}pre.invert=function(e,t){return[-t,2*z0(Ane(e))-On]};function YAe(){var e=lre(pre),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var KAe=Math.abs,SP=Math.cos,xC=Math.sin,QAe=1e-6,gre=Math.PI,EP=gre/2,qB=JAe(2);function GB(e){return e>1?EP:e<-1?-EP:Math.asin(e)}function JAe(e){return e>0?Math.sqrt(e):0}function ZAe(e,t){var n=e*xC(t),r=30,i;do t-=i=(t+xC(t)-n)/(1+SP(t));while(KAe(i)>QAe&&--r>0);return t/2}function eTe(e,t,n){function r(i,s){return[e*i*SP(s=ZAe(n,s)),t*xC(s)]}return r.invert=function(i,s){return s=GB(s/t),[i/(e*SP(s)),GB((2*s+xC(2*s))/n)]},r}var tTe=eTe(qB/EP,qB,gre);function nTe(){return Ol(tTe).scale(169.529)}const rTe=nre(),CP=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function iTe(e,t){return function n(){const r=t();return r.type=e,r.path=nre().projection(r),r.copy=r.copy||function(){const i=n();return CP.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},Ree(r)}}function AN(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(wC[e]=iTe(e,t),this):wC[e]||null}function mre(e){return e&&e.path||rTe}const wC={albers:ire,albersusa:OAe,azimuthalequalarea:MAe,azimuthalequidistant:DAe,conicconformal:LAe,conicequalarea:yC,conicequidistant:BAe,equalEarth:VAe,equirectangular:zAe,gnomonic:WAe,identity:HAe,mercator:NAe,mollweide:nTe,naturalEarth1:qAe,orthographic:GAe,stereographic:XAe,transversemercator:YAe};for(const e in wC)AN(e,wC[e]);function sTe(){}const Gl=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function yre(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],f=[];return s(l,u,d=>{n(d,l,u),oTe(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(aTe((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var f=[],d=[],h,p,g,m,y,v;for(h=p=-1,m=l[0]>=u,Gl[m<<1].forEach(b);++h<e-1;)g=m,m=l[h+1]>=u,Gl[g|m<<1].forEach(b);for(Gl[m<<0].forEach(b);++p<t-1;){for(h=-1,m=l[p*e+e]>=u,y=l[p*e]>=u,Gl[m<<1|y<<2].forEach(b);++h<e-1;)g=m,m=l[p*e+e+h+1]>=u,v=y,y=l[p*e+h+1]>=u,Gl[g|m<<1|y<<2|v<<3].forEach(b);Gl[m|y<<3].forEach(b)}for(h=-1,y=l[p*e]>=u,Gl[y<<2].forEach(b);++h<e-1;)v=y,y=l[p*e+h+1]>=u,Gl[y<<2|v<<3].forEach(b);Gl[y<<3].forEach(b);function b(x){var w=[x[0][0]+h,x[0][1]+p],C=[x[1][0]+h,x[1][1]+p],S=o(w),k=o(C),$,F;($=d[S])?(F=f[k])?(delete d[$.end],delete f[F.start],$===F?($.ring.push(C),c($.ring)):f[$.start]=d[F.end]={start:$.start,end:F.end,ring:$.ring.concat(F.ring)}):(delete d[$.end],$.ring.push(C),d[$.end=k]=$):($=f[k])?(F=d[S])?(delete f[$.start],delete d[F.end],$===F?($.ring.push(C),c($.ring)):f[F.start]=d[$.end]={start:F.start,end:$.end,ring:F.ring.concat($.ring)}):(delete f[$.start],$.ring.unshift(w),f[$.start=S]=$):f[S]=d[k]={start:S,end:k,ring:[w,C]}}}function o(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,m,y=u[g*e+p];d>0&&d<e&&p===d&&(m=u[g*e+p-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&g===h&&(m=u[(g-1)*e+p],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||ee("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:sTe,r):n===a},r}function oTe(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function aTe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=lTe(e,t[n]))return i;return 0}function lTe(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],u=l[0],c=l[1],f=e[a],d=f[0],h=f[1];if(uTe(l,f,t))return 0;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function uTe(e,t,n){var r;return cTe(e,t,n)&&fTe(e[r=+(e[0]===t[0])],n[r],t[r])}function cTe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function fTe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function vre(e,t,n){return function(r){var i=wl(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,l=t?vf(s,o,e):a/(e+1);return As(s+l,o,l)}}function TN(e){J.call(this,null,e)}TN.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};he(TN,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||fi,s=yre().smooth(e.smooth!==!1),o=e.thresholds||dTe(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),f=s.size([c.width,c.height])(c.values,te(o)?o:o(c.values));hTe(f,c,u,e),f.forEach(d=>{l.push(a_(u,Dt(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function dTe(e,t,n){const r=vre(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>sh(t(i).values)))}function hTe(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(tt(i)&&(i=i(n,r)),tt(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(_t(i)?i:i[0])||1,a=(_t(i)?i:i[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;e.forEach(bre(t,o,a,l,u))}function bre(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function l(f){f.forEach(u)}function u(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(l),f}}function XB(e,t,n){const r=e>=0?e:xD(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function q5(e){return tt(e)?e:di(+e)}function xre(){var e=l=>l[0],t=l=>l[1],n=$0,r=[-1,-1],i=960,s=500,o=2;function a(l,u){const c=XB(r[0],l,e)>>o,f=XB(r[1],l,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),g=2*h+(s>>o),m=new Float32Array(p*g),y=new Float32Array(p*g);let v=m;l.forEach(x=>{const w=d+(+e(x)>>o),C=h+(+t(x)>>o);w>=0&&w<p&&C>=0&&C<g&&(m[w+C*p]+=+n(x))}),c>0&&f>0?(Wp(p,g,m,y,c),Hp(p,g,y,m,f),Wp(p,g,m,y,c),Hp(p,g,y,m,f),Wp(p,g,m,y,c),Hp(p,g,y,m,f)):c>0?(Wp(p,g,m,y,c),Wp(p,g,y,m,c),Wp(p,g,m,y,c),v=y):f>0&&(Hp(p,g,m,y,f),Hp(p,g,y,m,f),Hp(p,g,m,y,f),v=y);const b=u?Math.pow(2,-2*o):1/AQ(v);for(let x=0,w=p*g;x<w;++x)v[x]*=b;return{values:v,scale:1<<o,width:p,height:g,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(l){return arguments.length?(e=q5(l),a):e},a.y=function(l){return arguments.length?(t=q5(l),a):t},a.weight=function(l){return arguments.length?(n=q5(l),a):n},a.size=function(l){if(!arguments.length)return[i,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||ee("invalid size"),i=u,s=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||ee("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=xe(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&ee("invalid bandwidth"),r=l,a):r},a}function Wp(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+o*e]),a>=i&&(a>=s&&(l-=n[a-s+o*e]),r[a-i+o*e]=l/Math.min(a+1,e-1+s-a,s))}function Hp(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[o+a*e]),a>=i&&(a>=s&&(l-=n[o+(a-s)*e]),r[o+(a-i)*e]=l/Math.min(a+1,t-1+s-a,s))}function RN(e){J.call(this,null,e)}RN.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const pTe=["x","y","weight","size","cellSize","bandwidth"];function wre(e,t){return pTe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}he(RN,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=gTe(r,e.groupby),s=(e.groupby||[]).map(Dn),o=wre(xre(),e),a=e.as||"grid",l=[];function u(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return l=i.map(c=>Dt(u({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function gTe(e,t){var n=[],r=c=>c(a),i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function FN(e){J.call(this,null,e)}FN.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};he(FN,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=yre().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||vre(e.count||10,e.nice,!!i),o=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=wre(xre(),e)(i,!0),l=bre(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=te(s)?s:s(i),i=r.size(o)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Dt),n}});const kP="Feature",PN="FeatureCollection",mTe="MultiPoint";function ON(e){J.call(this,null,e)}ON.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};he(ON,J,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&fi,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(oi(a))||s&&t.modified(oi(s))||o&&t.modified(oi(o)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),s&&o&&(t.visit(l,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:kP,geometry:{type:mTe,coordinates:r}})),this.value={type:PN,features:n}}});function MN(e){J.call(this,null,e)}MN.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};he(MN,J,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||fi,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=mre(e.projection),n.materialize().reflow()):o=i===fi||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=yTe(r,e.pointRadius);return n.visit(o,l=>l[s]=r(i(l))),r.pointRadius(a),n.modifies(s)}});function yTe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function DN(e){J.call(this,null,e)}DN.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};he(DN,J,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],l;function u(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(s)}});function NN(e){J.call(this,null,e)}NN.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};he(NN,J,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=vTe(mre(e.projection),e.field||wo("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function vTe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function IN(e){J.call(this,[],e),this.generator=dAe()}IN.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};he(IN,J,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)tt(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(EJ(n[0],i)):t.add.push(Dt(i)),n[0]=i,t}});function LN(e){J.call(this,null,e)}LN.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};he(LN,J,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||fi,s=xTe(e.opacity,e),o=bTe(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?sh(n.map(u=>sh(i(u).values))):0};return n.forEach(u=>{const c=i(u),f=et({},u,l);r||(f.$max=sh(c.values||[])),u[a]=wTe(c,f,o.dep?o:di(o(f)),s.dep?s:di(s(f)))}),t.reflow(!0).modifies(a)}});function bTe(e,t){let n;return tt(e)?(n=r=>wf(e(r,t)),n.dep=Sre(e)):n=di(wf(e||"#888")),n}function xTe(e,t){let n;return tt(e)?(n=r=>e(r,t),n.dep=Sre(e)):e?n=di(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function Sre(e){if(!tt(e))return!1;const t=da(oi(e));return t.$x||t.$y||t.$value||t.$max}function wTe(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||s,c=e.values,f=c?m=>c[m]:Pc,d=nf(l-o,u-a),h=d.getContext("2d"),p=h.getImageData(0,0,l-o,u-a),g=p.data;for(let m=a,y=0;m<u;++m){t.$y=m-a;for(let v=o,b=m*i;v<l;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const x=n(t);g[y+0]=x.r,g[y+1]=x.g,g[y+2]=x.b,g[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function Ere(e){J.call(this,null,e),this.modified(!0)}he(Ere,J,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=ETe(e.type),CP.forEach(r=>{e[r]!=null&&YB(n,r,e[r])})):CP.forEach(r=>{e.modified(r)&&YB(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&STe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function STe(e,t){const n=CTe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function ETe(e){const t=AN((e||"mercator").toLowerCase());return t||ee("Unrecognized projection type: "+e),t()}function YB(e,t,n){tt(e[t])&&e[t](n)}function CTe(e){return e=xe(e),e.length===1?e[0]:{type:PN,features:e.reduce((t,n)=>t.concat(kTe(n)),[])}}function kTe(e){return e.type===PN?e.features:xe(e).filter(t=>t!=null).map(t=>t.type===kP?t:{type:kP,geometry:t})}const _Te=Object.freeze(Object.defineProperty({__proto__:null,contour:FN,geojson:ON,geopath:MN,geopoint:DN,geoshape:NN,graticule:IN,heatmap:LN,isocontour:TN,kde2d:RN,projection:Ere},Symbol.toStringTag,{value:"Module"}));function $Te(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-e)*r,u=(u/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function ATe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Cre(this.cover(t,n),t,n,e)}function Cre(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,f,d,h,p,g,m,y,v;if(!s)return e._root=o,e;for(;s.length;)if((g=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d,i=s,!(s=s[y=m<<1|g]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d;while((y=m<<1|g)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function TTe(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>f&&(f=s));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)Cre(this,o[n],a[n],e[n]);return this}function RTe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=s;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function FTe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function PTe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ai(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function OTe(e,t,n){var r,i=this._x0,s=this._y0,o,a,l,u,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Ai(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(l=p.x1)<i||(u=p.y1)<s))if(h.length){var m=(o+l)/2,y=(a+u)/2;d.push(new Ai(h[3],m,y,l,u),new Ai(h[2],o,y,m,u),new Ai(h[1],m,a,l,y),new Ai(h[0],o,a,m,y)),(g=(t>=y)<<1|e>=m)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);i=e-w,s=t-w,c=e+w,f=t+w,r=h.data}}return r}function MTe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,d,h,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+l)/2))?o=d:l=d,(g=f>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[m]=s:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function DTe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function NTe(){return this._root}function ITe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function LTe(e){var t=[],n,r=this._root,i,s,o,a,l;for(r&&t.push(new Ai(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(s+a)/2,c=(o+l)/2;(i=r[3])&&t.push(new Ai(i,u,c,a,l)),(i=r[2])&&t.push(new Ai(i,s,c,u,l)),(i=r[1])&&t.push(new Ai(i,u,o,a,c)),(i=r[0])&&t.push(new Ai(i,s,o,u,c))}return this}function zTe(e){var t=[],n=[],r;for(this._root&&t.push(new Ai(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(o+l)/2,f=(a+u)/2;(s=i[0])&&t.push(new Ai(s,o,a,c,f)),(s=i[1])&&t.push(new Ai(s,c,a,l,f)),(s=i[2])&&t.push(new Ai(s,o,f,c,u)),(s=i[3])&&t.push(new Ai(s,c,f,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function jTe(e){return e[0]}function BTe(e){return arguments.length?(this._x=e,this):this._x}function UTe(e){return e[1]}function VTe(e){return arguments.length?(this._y=e,this):this._y}function zN(e,t,n){var r=new jN(t??jTe,n??UTe,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function jN(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function KB(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ji=zN.prototype=jN.prototype;ji.copy=function(){var e=new jN(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=KB(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=KB(r));return e};ji.add=ATe;ji.addAll=TTe;ji.cover=RTe;ji.data=FTe;ji.extent=PTe;ji.find=OTe;ji.remove=MTe;ji.removeAll=DTe;ji.root=NTe;ji.size=ITe;ji.visit=LTe;ji.visitAfter=zTe;ji.x=BTe;ji.y=VTe;function Ti(e){return function(){return e}}function Xc(e){return(e()-.5)*1e-6}function WTe(e){return e.x+e.vx}function HTe(e){return e.y+e.vy}function qTe(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ti(e==null?1:+e));function o(){for(var u,c=t.length,f,d,h,p,g,m,y=0;y<s;++y)for(f=zN(t,WTe,HTe).visitAfter(a),u=0;u<c;++u)d=t[u],g=n[d.index],m=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,x,w,C,S){var k=b.data,$=b.r,F=g+$;if(k){if(k.index>d.index){var O=h-k.x-k.vx,B=p-k.y-k.vy,D=O*O+B*B;D<F*F&&(O===0&&(O=Xc(r),D+=O*O),B===0&&(B=Xc(r),D+=B*B),D=(F-(D=Math.sqrt(D)))/D*i,d.vx+=(O*=D)*(F=($*=$)/(m+$)),d.vy+=(B*=D)*F,k.vx-=O*(F=1-F),k.vy-=B*F)}return}return x>h+F||C<h-F||w>p+F||S<p-F}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return o.initialize=function(u,c){t=u,r=c,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Ti(+u),l(),o):e},o}function GTe(e){return e.index}function QB(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function XTe(e){var t=GTe,n=f,r,i=Ti(30),s,o,a,l,u,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,v=e.length;y<c;++y)for(var b=0,x,w,C,S,k,$,F;b<v;++b)x=e[b],w=x.source,C=x.target,S=C.x+C.vx-w.x-w.vx||Xc(u),k=C.y+C.vy-w.y-w.vy||Xc(u),$=Math.sqrt(S*S+k*k),$=($-s[b])/$*m*r[b],S*=$,k*=$,C.vx-=S*(F=l[b]),C.vy-=k*F,w.vx+=S*(F=1-F),w.vy+=k*F}function h(){if(o){var m,y=o.length,v=e.length,b=new Map(o.map((w,C)=>[t(w,C,o),w])),x;for(m=0,a=new Array(y);m<v;++m)x=e[m],x.index=m,typeof x.source!="object"&&(x.source=QB(b,x.source)),typeof x.target!="object"&&(x.target=QB(b,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)x=e[m],l[m]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(v),p(),s=new Array(v),g()}}function p(){if(o)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function g(){if(o)for(var m=0,y=e.length;m<y;++m)s[m]=+i(e[m],m,e)}return d.initialize=function(m,y){o=m,u=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Ti(+m),p(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Ti(+m),g(),d):i},d}var YTe={value:()=>{}};function kre(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ES(n)}function ES(e){this._=e}function KTe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ES.prototype=kre.prototype={constructor:ES,on:function(e,t){var n=this._,r=KTe(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=QTe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=JB(n[i],e.name,t);else if(t==null)for(i in n)n[i]=JB(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ES(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function QTe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function JB(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=YTe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Um=0,_1=0,Py=0,_re=1e3,SC,$1,EC=0,Th=0,H_=0,Gv=typeof performance=="object"&&performance.now?performance:Date,$re=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function BN(){return Th||($re(JTe),Th=Gv.now()+H_)}function JTe(){Th=0}function CC(){this._call=this._time=this._next=null}CC.prototype=Are.prototype={constructor:CC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?BN():+n)+(t==null?0:+t),!this._next&&$1!==this&&($1?$1._next=this:SC=this,$1=this),this._call=e,this._time=n,_P()},stop:function(){this._call&&(this._call=null,this._time=1/0,_P())}};function Are(e,t,n){var r=new CC;return r.restart(e,t,n),r}function ZTe(){BN(),++Um;for(var e=SC,t;e;)(t=Th-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Um}function ZB(){Th=(EC=Gv.now())+H_,Um=_1=0;try{ZTe()}finally{Um=0,t5e(),Th=0}}function e5e(){var e=Gv.now(),t=e-EC;t>_re&&(H_-=t,EC=e)}function t5e(){for(var e,t=SC,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:SC=n);$1=e,_P(r)}function _P(e){if(!Um){_1&&(_1=clearTimeout(_1));var t=e-Th;t>24?(e<1/0&&(_1=setTimeout(ZB,e-Gv.now()-H_)),Py&&(Py=clearInterval(Py))):(Py||(EC=Gv.now(),Py=setInterval(e5e,_re)),Um=1,$re(ZB))}}function n5e(e,t,n){var r=new CC,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?BN():+a,r._restart(function l(u){u+=i,r._restart(l,i+=o,a),s(u)},o,a)},r.restart(e,t,n),r)}const r5e=1664525,i5e=1013904223,eU=4294967296;function s5e(){let e=1;return()=>(e=(r5e*e+i5e)%eU)/eU}function o5e(e){return e.x}function a5e(e){return e.y}var l5e=10,u5e=Math.PI*(3-Math.sqrt(5));function c5e(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=Are(f),u=kre("tick","end"),c=s5e();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(g){var m,y=e.length,v;g===void 0&&(g=1);for(var b=0;b<g;++b)for(n+=(s-n)*i,a.forEach(function(x){x(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=l5e*Math.sqrt(.5+g),b=g*u5e;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(s=+g,t):s},velocityDecay:function(g){return arguments.length?(o=1-g,t):1-o},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,p(m)),t):a.get(g)},find:function(g,m,y){var v=0,b=e.length,x,w,C,S,k;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],x=g-S.x,w=m-S.y,C=x*x+w*w,C<y&&(k=S,y=C);return k},on:function(g,m){return arguments.length>1?(u.on(g,m),t):u.on(g)}}}function f5e(){var e,t,n,r,i=Ti(-30),s,o=1,a=1/0,l=.81;function u(h){var p,g=e.length,m=zN(e,o5e,a5e).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],m.visit(d)}function c(){if(e){var h,p=e.length,g;for(s=new Array(p),h=0;h<p;++h)g=e[h],s[g.index]=+i(g,h,e)}}function f(h){var p=0,g,m,y=0,v,b,x;if(h.length){for(v=b=x=0;x<4;++x)(g=h[x])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,v+=m*g.x,b+=m*g.y);h.x=v/y,h.y=b/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,m){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=m-p,x=y*y+v*v;if(b*b/l<x)return x<a&&(y===0&&(y=Xc(n),x+=y*y),v===0&&(v=Xc(n),x+=v*v),x<o&&(x=Math.sqrt(o*x)),t.vx+=y*h.value*r/x,t.vy+=v*h.value*r/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Xc(n),x+=y*y),v===0&&(v=Xc(n),x+=v*v),x<o&&(x=Math.sqrt(o*x)));do h.data!==t&&(b=s[h.data.index]*r/x,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ti(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function d5e(e){var t=Ti(.1),n,r,i;typeof e!="function"&&(e=Ti(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ti(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ti(+a),o(),s):e},s}function h5e(e){var t=Ti(.1),n,r,i;typeof e!="function"&&(e=Ti(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ti(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ti(+a),o(),s):e},s}const tU={center:$Te,collide:qTe,nbody:f5e,link:XTe,x:d5e,y:h5e},A1="forces",$P=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],p5e=["static","iterations"],Tre=["x","y","vx","vy"];function UN(e){J.call(this,null,e)}UN.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Tre}]};he(UN,J,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified($P),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Rre(n,e,0,t)):(this.value=n=m5e(t.source,e),n.on("tick",g5e(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(p5e)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==A1||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Tre)}});function g5e(e,t){return()=>e.touch(t).run()}function m5e(e,t){const n=c5e(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),Rre(n,t,!0).on("end",()=>s=!0)}function Rre(e,t,n,r){var i=xe(t.forces),s,o,a,l;for(s=0,o=$P.length;s<o;++s)a=$P[s],a!==A1&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)l=A1+s,a=n||t.modified(A1,s)?v5e(i[s]):r&&y5e(i[s],r)?e.force(l):null,a&&e.force(l,a);for(o=e.numForces||0;s<o;++s)e.force(A1+s,null);return e.numForces=i.length,e}function y5e(e,t){var n,r;for(n in e)if(tt(r=e[n])&&t.modified(oi(r)))return 1;return 0}function v5e(e){var t,n;Se(tU,e.force)||ee("Unrecognized force: "+e.force),t=tU[e.force]();for(n in e)tt(t[n])&&b5e(t[n],e[n],e);return t}function b5e(e,t,n){e(tt(t)?r=>t(r,n):t)}const x5e=Object.freeze(Object.defineProperty({__proto__:null,force:UN},Symbol.toStringTag,{value:"Module"}));function w5e(e,t){return e.parent===t.parent?1:2}function S5e(e){return e.reduce(E5e,0)/e.length}function E5e(e,t){return e+t.x}function C5e(e){return 1+e.reduce(k5e,0)}function k5e(e,t){return Math.max(e,t.y)}function _5e(e){for(var t;t=e.children;)e=t[0];return e}function $5e(e){for(var t;t=e.children;)e=t[t.length-1];return e}function A5e(){var e=w5e,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=S5e(h),d.y=C5e(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var l=_5e(s),u=$5e(s),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function T5e(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function R5e(){return this.eachAfter(T5e)}function F5e(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function P5e(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function O5e(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function M5e(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function D5e(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function N5e(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function I5e(e){for(var t=this,n=L5e(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function L5e(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function z5e(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function j5e(){return Array.from(this)}function B5e(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function U5e(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*V5e(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function VN(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=q5e)):t===void 0&&(t=H5e);for(var n=new Vm(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new Vm(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Fre)}function W5e(){return VN(this).eachBefore(G5e)}function H5e(e){return e.children}function q5e(e){return Array.isArray(e)?e[1]:null}function G5e(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Fre(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Vm(e){this.data=e,this.depth=this.height=0,this.parent=null}Vm.prototype=VN.prototype={constructor:Vm,count:R5e,each:F5e,eachAfter:O5e,eachBefore:P5e,find:M5e,sum:D5e,sort:N5e,path:I5e,ancestors:z5e,descendants:j5e,leaves:B5e,links:U5e,copy:W5e,[Symbol.iterator]:V5e};function CS(e){return e==null?null:Pre(e)}function Pre(e){if(typeof e!="function")throw new Error;return e}function Id(){return 0}function ag(e){return function(){return e}}const X5e=1664525,Y5e=1013904223,nU=4294967296;function K5e(){let e=1;return()=>(e=(X5e*e+Y5e)%nU)/nU}function Q5e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function J5e(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Z5e(e,t){for(var n=0,r=(e=J5e(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&Ore(o,s)?++n:(o=t3e(i=e3e(i,s)),n=0);return o}function e3e(e,t){var n,r;if(G5(t,e))return[t];for(n=0;n<e.length;++n)if(r2(t,e[n])&&G5(T1(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(r2(T1(e[n],e[r]),t)&&r2(T1(e[n],t),e[r])&&r2(T1(e[r],t),e[n])&&G5(Mre(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function r2(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Ore(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function G5(e,t){for(var n=0;n<t.length;++n)if(!Ore(e,t[n]))return!1;return!0}function t3e(e){switch(e.length){case 1:return n3e(e[0]);case 2:return T1(e[0],e[1]);case 3:return Mre(e[0],e[1],e[2])}}function n3e(e){return{x:e.x,y:e.y,r:e.r}}function T1(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,l=s-n,u=o-r,c=a-i,f=Math.sqrt(l*l+u*u);return{x:(n+s+l/f*c)/2,y:(r+o+u/f*c)/2,r:(f+i+a)/2}}function Mre(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-o,h=r-u,p=i-a,g=i-c,m=l-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+l*l,x=v-u*u-c*c+f*f,w=h*p-d*g,C=(p*x-g*b)/(w*2)-r,S=(g*m-p*y)/w,k=(h*b-d*x)/(w*2)-i,$=(d*y-h*m)/w,F=S*S+$*$-1,O=2*(s+C*S+k*$),B=C*C+k*k-s*s,D=-(Math.abs(F)>1e-6?(O+Math.sqrt(O*O-4*F*B))/(2*F):B/O);return{x:r+C+S*D,y:i+k+$*D,r:D}}function rU(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,l,u=r*r+o*o;u?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function iU(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function sU(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function i2(e){this._=e,this.next=null,this.previous=null}function r3e(e,t){if(!(s=(e=Q5e(e)).length))return 0;var n,r,i,s,o,a,l,u,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;rU(r,n,i=e[2]),n=new i2(n),r=new i2(r),i=new i2(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){rU(n._,r._,i=e[l]),i=new i2(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(iU(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(iU(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=sU(n);(i=i.next)!==r;)(a=sU(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Z5e(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function i3e(e){return Math.sqrt(e.value)}function s3e(){var e=null,t=1,n=1,r=Id;function i(s){const o=K5e();return s.x=t/2,s.y=n/2,e?s.eachBefore(oU(e)).eachAfter(X5(r,.5,o)).eachBefore(aU(1)):s.eachBefore(oU(i3e)).eachAfter(X5(Id,1,o)).eachAfter(X5(r,s.r/Math.min(t,n),o)).eachBefore(aU(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=CS(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:ag(+s),i):r},i}function oU(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function X5(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=r3e(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function aU(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Dre(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function kx(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(r-t)/e.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function o3e(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(Dre),o}function s(o,a){return function(l){l.children&&kx(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var a3e={depth:-1},lU={},Y5={};function l3e(e){return e.id}function u3e(e){return e.parentId}function uU(){var e=l3e,t=u3e,n;function r(i){var s=Array.from(i),o=e,a=t,l,u,c,f,d,h,p,g,m=new Map;if(n!=null){const y=s.map((x,w)=>c3e(n(x,w,i))),v=y.map(cU),b=new Set(y).add("");for(const x of v)b.has(x)||(b.add(x),y.push(x),v.push(cU(x)),s.push(Y5));o=(x,w)=>y[w],a=(x,w)=>v[w]}for(c=0,l=s.length;c<l;++c)u=s[c],h=s[c]=new Vm(u),(p=o(u,c,i))!=null&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?lU:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=s[c],p=h.parent){if(d=m.get(p),!d)throw new Error("missing: "+p);if(d===lU)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===Y5&&f.children.length===1;)f=f.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===Y5);--y)h.data=null}if(f.parent=a3e,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(Fre),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=CS(i),r):e},r.parentId=function(i){return arguments.length?(t=CS(i),r):t},r.path=function(i){return arguments.length?(n=CS(i),r):n},r}function c3e(e){e=`${e}`;let t=e.length;return AP(e,t-1)&&!AP(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function cU(e){let t=e.length;if(t<2)return"";for(;--t>1&&!AP(e,t););return e.slice(0,t)}function AP(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function f3e(e,t){return e.parent===t.parent?1:2}function K5(e){var t=e.children;return t?t[0]:e.t}function Q5(e){var t=e.children;return t?t[t.length-1]:e.t}function d3e(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function h3e(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function p3e(e,t,n){return e.a.parent===t.parent?e.a:n}function kS(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}kS.prototype=Object.create(Vm.prototype);function g3e(e){for(var t=new kS(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new kS(s[o],o)),i.parent=n;return(t.parent=new kS(null,0)).children=[t],t}function m3e(){var e=f3e,t=1,n=1,r=null;function i(u){var c=g3e(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,g=p-f.x,m=t/(d.x+p+g),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return u}function s(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){h3e(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var d=u,h=u,p=c,g=d.parent.children[0],m=d.m,y=h.m,v=p.m,b=g.m,x;p=Q5(p),d=K5(d),p&&d;)g=K5(g),h=Q5(h),h.a=u,x=p.z+v-d.z-m+e(p._,d._),x>0&&(d3e(p3e(p,u,f),u,x),m+=x,y+=x),v+=p.m,m+=d.m,b+=g.m,y+=h.m;p&&!Q5(h)&&(h.t=p,h.m+=v-y),d&&!K5(g)&&(g.t=d,g.m+=m-b,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function q_(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(i-n)/e.value;++a<l;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var Nre=(1+Math.sqrt(5))/2;function Ire(e,t,n,r,i,s){for(var o=[],a=t.children,l,u,c=0,f=0,d=a.length,h,p,g=t.value,m,y,v,b,x,w,C;c<d;){h=i-n,p=s-r;do m=a[f++].value;while(!m&&f<d);for(y=v=m,w=Math.max(p/h,h/p)/(g*e),C=m*m*w,x=Math.max(v/C,C/y);f<d;++f){if(m+=u=a[f].value,u<y&&(y=u),u>v&&(v=u),C=m*m*w,b=Math.max(v/C,C/y),b>x){m-=u;break}x=b}o.push(l={value:m,dice:h<p,children:a.slice(c,f)}),l.dice?kx(l,n,r,i,g?r+=p*m/g:s):q_(l,n,r,g?n+=h*m/g:i,s),g-=m,c=f}return o}const Lre=function e(t){function n(r,i,s,o,a){Ire(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Nre);function y3e(){var e=Lre,t=!1,n=1,r=1,i=[0],s=Id,o=Id,a=Id,l=Id,u=Id;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(Dre),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,m=d.x1-h,y=d.y1-h;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=u(d)-h,g+=o(d)-h,m-=a(d)-h,y-=l(d)-h,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=Pre(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:ag(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:ag(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:ag(+d),c):a},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:ag(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:ag(+d),c):u},c}function v3e(e,t,n,r,i){var s=e.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,g,m,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=g,v.x1=m,v.y1=y;return}for(var b=u[f],x=h/2+b,w=f+1,C=d-1;w<C;){var S=w+C>>>1;u[S]<x?w=S+1:C=S}x-u[w-1]<u[w]-x&&f+1<w&&--w;var k=u[w]-b,$=h-k;if(m-p>y-g){var F=h?(p*$+m*k)/h:m;c(f,w,k,p,g,F,y),c(w,d,$,F,g,m,y)}else{var O=h?(g*$+y*k)/h:y;c(f,w,k,p,g,m,O),c(w,d,$,p,O,m,y)}}}function b3e(e,t,n,r,i){(e.depth&1?q_:kx)(e,t,n,r,i)}const x3e=function e(t){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,p=l.length,g=r.value;++d<p;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?kx(u,i,s,o,g?s+=(a-s)*u.value/g:a):q_(u,i,s,g?i+=(o-i)*u.value/g:o,a),g-=u.value}else r._squarify=l=Ire(t,r,i,s,o,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Nre);function TP(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function WN(e){J.call(this,null,e)}WN.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const w3e=e=>e.values;he(WN,J,{transform(e,t){t.source||ee("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&o_(o.data)&&i.rem.push(o.data)}),this.value=s=VN({values:xe(e.keys).reduce((o,a)=>(o.key(a),o),S3e()).entries(i.source)},w3e),n&&s.each(o=>{o.children&&(o=Dt(o.data),i.add.push(o),i.source.push(o))}),TP(s,Me,Me)),i.source.root=s,i}});function S3e(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],l={},u={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=l[f])?h.push(d):l[f]=[d];for(f in l)u[f]=n(l[f],s);return u}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Vu(e){J.call(this,null,e)}const E3e=(e,t)=>e.parent===t.parent?1:2;he(Vu,J,{transform(e,t){(!t.source||!t.source.root)&&ee(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(sp(e.sort,o=>o.data)),C3e(n,this.params,e),n.separation&&n.separation(e.separation!==!1?E3e:$0);try{this.value=n(i)}catch(o){ee(o)}return i.each(o=>k3e(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function C3e(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function k3e(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const RP=["x","y","r","depth","children"];function HN(e){Vu.call(this,e)}HN.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:RP.length,default:RP}]};he(HN,Vu,{layout:s3e,params:["radius","size","padding"],fields:RP});const FP=["x0","y0","x1","y1","depth","children"];function qN(e){Vu.call(this,e)}qN.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:FP.length,default:FP}]};he(qN,Vu,{layout:o3e,params:["size","round","padding"],fields:FP});function GN(e){J.call(this,null,e)}GN.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};he(GN,J,{transform(e,t){t.source||ee("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?TP(uU().id(e.key).parentId(e.parentKey)(i.source),e.key,So):TP(uU()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const fU={tidy:m3e,cluster:A5e},PP=["x","y","depth","children"];function XN(e){Vu.call(this,e)}XN.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:PP.length,default:PP}]};he(XN,Vu,{layout(e){const t=e||"tidy";if(Se(fU,t))return fU[t]();ee("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:PP});function YN(e){J.call(this,[],e)}YN.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};he(YN,J,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||ee("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Me(o)]=1),r.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[Me(a)]&&s[Me(l)]&&i.add.push(Dt({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Me(o)]=1),n.forEach(o=>{(s[Me(o.source)]||s[Me(o.target)])&&i.mod.push(o)})),i}});const dU={binary:v3e,dice:kx,slice:q_,slicedice:b3e,squarify:Lre,resquarify:x3e},OP=["x0","y0","x1","y1","depth","children"];function KN(e){Vu.call(this,e)}KN.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OP.length,default:OP}]};he(KN,Vu,{layout(){const e=y3e();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Se(dU,t)?e.tile(dU[t]):ee("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:OP});const _3e=Object.freeze(Object.defineProperty({__proto__:null,nest:WN,pack:HN,partition:qN,stratify:GN,tree:XN,treelinks:YN,treemap:KN},Symbol.toStringTag,{value:"Module"})),J5=4278190080;function $3e(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function A3e(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,l=nf(s,o).getContext("2d"),u=nf(s,o).getContext("2d"),c=a&&nf(s,o).getContext("2d");n.forEach(k=>_S(l,k,!1)),_S(u,t,!1),a&&_S(c,t,!0);const f=Z5(l,s,o),d=Z5(u,s,o),h=a&&Z5(c,s,o),p=e.bitmap(),g=a&&e.bitmap();let m,y,v,b,x,w,C,S;for(y=0;y<o;++y)for(m=0;m<s;++m)x=y*s+m,w=f[x]&J5,S=d[x]&J5,C=a&&h[x]&J5,(w||C||S)&&(v=e(m),b=e(y),!i&&(w||S)&&p.set(v,b),a&&(w||C)&&g.set(v,b));return[p,g]}function Z5(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function _S(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>_S(e,s.items,n))}):zs[r].draw(e,{items:n?t.map(T3e):t})}function T3e(e){const t=a_(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Xl=5,mi=31,Xv=32,_c=new Uint32Array(Xv+1),Yo=new Uint32Array(Xv+1);Yo[0]=0;_c[0]=~Yo[0];for(let e=1;e<=Xv;++e)Yo[e]=Yo[e-1]<<1|1,_c[e]=~Yo[e];function R3e(e,t){const n=new Uint32Array(~~((e*t+Xv)/Xv));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Xl]&1<<(a&mi)},set:(s,o)=>{const a=o*e+s;r(a>>>Xl,1<<(a&mi))},clear:(s,o)=>{const a=o*e+s;i(a>>>Xl,~(1<<(a&mi)))},getRange:(s,o,a,l)=>{let u=l,c,f,d,h;for(;u>=o;--u)if(c=u*e+s,f=u*e+a,d=c>>>Xl,h=f>>>Xl,d===h){if(n[d]&_c[c&mi]&Yo[(f&mi)+1])return!0}else{if(n[d]&_c[c&mi]||n[h]&Yo[(f&mi)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,c,f,d,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,f=u>>>Xl,d=c>>>Xl,f===d)r(f,_c[u&mi]&Yo[(c&mi)+1]);else for(r(f,_c[u&mi]),r(d,Yo[(c&mi)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,l)=>{let u,c,f,d,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,f=u>>>Xl,d=c>>>Xl,f===d)i(f,Yo[u&mi]|_c[(c&mi)+1]);else for(i(f,Yo[u&mi]),i(d,_c[(c&mi)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=t||a>=e}}function F3e(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>R3e(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function P3e(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,l=a.length,u=o.datum.fontSize,c=Fs.width(o.datum,o.datum.text);let f=0,d,h,p,g,m,y,v;for(let b=0;b<l;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,g=a[b].y2===void 0?p:a[b].y2,m=(d+h)/2,y=(p+g)/2,v=Math.abs(h-d+g-p),v>=f&&(f=v,o.x=m,o.y=y);return m=c/2,y=u/2,d=o.x-m,h=o.x+m,p=o.y-y,g=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&g<=s?o.baseline="top":0<=p&&s<g&&(o.baseline="bottom"),!0}}function kC(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Yc(e,t,n,r,i,s,o,a){const l=i*s/(r*2),u=e(t-l),c=e(t+l),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(u,f,c,d)||o.getRange(u,f,c,d)||a&&a.getRange(u,f,c,d)}function O3e(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function l(u,c,f,d,h){const p=e.invert(u),g=e.invert(c);let m=f,y=s,v;if(!kC(p,g,d,h,i,s)&&!Yc(e,p,g,h,d,m,o,a)&&!Yc(e,p,g,h,d,h,o,null)){for(;y-m>=1;)v=(m+y)/2,Yc(e,p,g,h,d,v,o,a)?y=v:m=v;if(m>f)return[p,g,m,!0]}}return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Fs.width(u.datum,u.datum.text);let p=n?d:0,g=!1,m=!1,y=0,v,b,x,w,C,S,k,$,F,O,B,D,N,A,P,j,z;for(let U=0;U<f;++U){for(v=c[U].x,x=c[U].y,b=c[U].x2===void 0?v:c[U].x2,w=c[U].y2===void 0?x:c[U].y2,v>b&&(z=v,v=b,b=z),x>w&&(z=x,x=w,w=z),F=e(v),B=e(b),O=~~((F+B)/2),D=e(x),A=e(w),N=~~((D+A)/2),k=O;k>=F;--k)for($=N;$>=D;--$)j=l(k,$,p,h,d),j&&([u.x,u.y,p,g]=j);for(k=O;k<=B;++k)for($=N;$<=A;++$)j=l(k,$,p,h,d),j&&([u.x,u.y,p,g]=j);!g&&!n&&(P=Math.abs(b-v+w-x),C=(v+b)/2,S=(x+w)/2,P>=y&&!kC(C,S,h,d,i,s)&&!Yc(e,C,S,d,h,d,o,null)&&(y=P,u.x=C,u.y=S,m=!0))}return g||m?(C=h/2,S=d/2,o.setRange(e(u.x-C),e(u.y-S),e(u.x+C),e(u.y+S)),u.align="center",u.baseline="middle",!0):!1}}const M3e=[-1,-1,1,1],D3e=[-1,1,-1,1];function N3e(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Fs.width(u.datum,u.datum.text),p=[];let g=n?d:0,m=!1,y=!1,v=0,b,x,w,C,S,k,$,F,O,B,D,N;for(let A=0;A<f;++A){for(b=c[A].x,w=c[A].y,x=c[A].x2===void 0?b:c[A].x2,C=c[A].y2===void 0?w:c[A].y2,p.push([e((b+x)/2),e((w+C)/2)]);p.length;)if([$,F]=p.pop(),!(o.get($,F)||a.get($,F)||l.get($,F))){l.set($,F);for(let P=0;P<4;++P)S=$+M3e[P],k=F+D3e[P],l.outOfBounds(S,k,S,k)||p.push([S,k]);if(S=e.invert($),k=e.invert(F),O=g,B=s,!kC(S,k,h,d,i,s)&&!Yc(e,S,k,d,h,O,o,a)&&!Yc(e,S,k,d,h,d,o,null)){for(;B-O>=1;)D=(O+B)/2,Yc(e,S,k,d,h,D,o,a)?B=D:O=D;O>g&&(u.x=S,u.y=k,g=O,m=!0)}}!m&&!n&&(N=Math.abs(x-b+C-w),S=(b+x)/2,k=(w+C)/2,N>=v&&!kC(S,k,h,d,i,s)&&!Yc(e,S,k,d,h,d,o,null)&&(v=N,u.x=S,u.y=k,y=!0))}return m||y?(S=h/2,k=d/2,o.setRange(e(u.x-S),e(u.y-k),e(u.x+S),e(u.y+k)),u.align="center",u.baseline="middle",!0):!1}}const I3e=["right","center","left"],L3e=["bottom","middle","top"];function z3e(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,f=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=u.textWidth??0,h,p,g,m,y,v,b,x,w,C,S,k,$,F,O;for(let B=0;B<l;++B){if(h=(n[B]&3)-1,p=(n[B]>>>2&3)-1,g=h===0&&p===0||r[B]<0,m=h&&p?Math.SQRT1_2:1,y=r[B]<0?-1:1,v=c[1+h]+r[B]*h*m,S=c[4+p]+y*f*p/2+r[B]*p*m,x=S-f/2,w=S+f/2,k=e(v),F=e(x),O=e(w),!d)if(hU(k,k,F,O,o,a,v,v,x,w,c,g))d=Fs.width(u.datum,u.datum.text);else continue;if(C=v+y*d*h/2,v=C-d/2,b=C+d/2,k=e(v),$=e(b),hU(k,$,F,O,o,a,v,b,x,w,c,g))return u.x=h?h*y<0?b:v:C,u.y=p?p*y<0?w:x:S,u.align=I3e[h*y+1],u.baseline=L3e[p*y+1],o.setRange(k,F,$,O),!0}return!1}}function hU(e,t,n,r,i,s,o,a,l,u,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const e3=0,t3=4,n3=8,r3=0,i3=1,s3=2,j3e={"top-left":e3+r3,top:e3+i3,"top-right":e3+s3,left:t3+r3,middle:t3+i3,right:t3+s3,"bottom-left":n3+r3,bottom:n3+i3,"bottom-right":n3+s3},B3e={naive:P3e,"reduced-search":O3e,floodfill:N3e};function U3e(e,t,n,r,i,s,o,a,l,u,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=V3e(r,f),h=W3e(i,f),p=H3e(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,m=g==="area",y=q3e(p,g,a,l),v=u===null||u===1/0,b=m&&c==="naive";let x=-1,w=-1;const C=e.map(F=>{const O=v?Fs.width(F,F.text):void 0;return x=Math.max(x,O),w=Math.max(w,F.fontSize),{datum:F,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(F),textWidth:O}});u=u===null||u===1/0?Math.max(x,w)+Math.max(...r):u;const S=F3e(t[0],t[1],u);let k;if(!b){n&&C.sort((B,D)=>n(B.datum,D.datum));let F=!1;for(let B=0;B<h.length&&!F;++B)F=h[B]===5||d[B]<0;const O=(p&&o||m)&&e.map(B=>B.datum);k=s.length||O?A3e(S,O||[],s,F,m):$3e(S,o&&C)}const $=m?B3e[c](S,k,o,l):z3e(S,k,h,d);return C.forEach(F=>F.opacity=+$(F)),C}function V3e(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function W3e(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=j3e[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function H3e(e){return e&&e.mark&&e.mark.marktype}function q3e(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const MP=["x","y","opacity","align","baseline"],zre=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function QN(e){J.call(this,null,e)}QN.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:zre},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:MP.length,default:MP}]};he(QN,J,{transform(e,t){function n(s){const o=e[s];return tt(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ee("Size parameter should be specified as a [width, height] array.");const i=e.as||MP;return U3e(t.materialize(t.SOURCE).source||[],e.size,e.sort,xe(e.offset==null?1:e.offset),xe(e.anchor||zre),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const G3e=Object.freeze(Object.defineProperty({__proto__:null,label:QN},Symbol.toStringTag,{value:"Module"}));function jre(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function JN(e){J.call(this,null,e)}JN.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};he(JN,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=jre(r,e.groupby),s=(e.groupby||[]).map(Dn),o=s.length,a=e.as||[Dn(e.x),Dn(e.y)],l=[];i.forEach(u=>{BJ(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=u.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],l.push(Dt(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const DP={constant:PD,linear:OD,log:IJ,exp:LJ,pow:zJ,quad:MD,poly:jJ},X3e=(e,t)=>e==="poly"?t:e==="quad"?2:1;function ZN(e){J.call(this,null,e)}ZN.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(DP)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};he(ZN,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=jre(r,e.groupby),s=(e.groupby||[]).map(Dn),o=e.method||"linear",a=e.order==null?3:e.order,l=X3e(o,a),u=e.as||[Dn(e.x),Dn(e.y)],c=DP[o],f=[];let d=e.extent;Se(DP,o)||ee("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(Dt({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||wl(h,e.x),y=v=>{const b={};for(let x=0;x<s.length;++x)b[s[x]]=h.dims[x];b[u[0]]=v[0],b[u[1]]=v[1],f.push(Dt(b))};o==="linear"||o==="constant"?m.forEach(v=>y([v,g.predict(v)])):p_(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Y3e=Object.freeze(Object.defineProperty({__proto__:null,loess:JN,regression:ZN},Symbol.toStringTag,{value:"Module"})),vu=11102230246251565e-32,qr=134217729,K3e=(3+8*vu)*vu;function o3(e,t,n,r,i){let s,o,a,l,u=t[0],c=r[0],f=0,d=0;c>u==c>-u?(s=u,u=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++f]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Q3e(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function _x(e){return new Float64Array(e)}const J3e=(3+16*vu)*vu,Z3e=(2+12*vu)*vu,eRe=(9+64*vu)*vu*vu,qp=_x(4),pU=_x(8),gU=_x(12),mU=_x(16),yi=_x(4);function tRe(e,t,n,r,i,s,o){let a,l,u,c,f,d,h,p,g,m,y,v,b,x,w,C,S,k;const $=e-i,F=n-i,O=t-s,B=r-s;x=$*B,d=qr*$,h=d-(d-$),p=$-h,d=qr*B,g=d-(d-B),m=B-g,w=p*m-(x-h*g-p*g-h*m),C=O*F,d=qr*O,h=d-(d-O),p=O-h,d=qr*F,g=d-(d-F),m=F-g,S=p*m-(C-h*g-p*g-h*m),y=w-S,f=w-y,qp[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,qp[1]=b-(y+f)+(f-C),k=v+y,f=k-v,qp[2]=v-(k-f)+(y-f),qp[3]=k;let D=Q3e(4,qp),N=Z3e*o;if(D>=N||-D>=N||(f=e-$,a=e-($+f)+(f-i),f=n-F,u=n-(F+f)+(f-i),f=t-O,l=t-(O+f)+(f-s),f=r-B,c=r-(B+f)+(f-s),a===0&&l===0&&u===0&&c===0)||(N=eRe*o+K3e*Math.abs(D),D+=$*c+B*a-(O*u+F*l),D>=N||-D>=N))return D;x=a*B,d=qr*a,h=d-(d-a),p=a-h,d=qr*B,g=d-(d-B),m=B-g,w=p*m-(x-h*g-p*g-h*m),C=l*F,d=qr*l,h=d-(d-l),p=l-h,d=qr*F,g=d-(d-F),m=F-g,S=p*m-(C-h*g-p*g-h*m),y=w-S,f=w-y,yi[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,yi[1]=b-(y+f)+(f-C),k=v+y,f=k-v,yi[2]=v-(k-f)+(y-f),yi[3]=k;const A=o3(4,qp,4,yi,pU);x=$*c,d=qr*$,h=d-(d-$),p=$-h,d=qr*c,g=d-(d-c),m=c-g,w=p*m-(x-h*g-p*g-h*m),C=O*u,d=qr*O,h=d-(d-O),p=O-h,d=qr*u,g=d-(d-u),m=u-g,S=p*m-(C-h*g-p*g-h*m),y=w-S,f=w-y,yi[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,yi[1]=b-(y+f)+(f-C),k=v+y,f=k-v,yi[2]=v-(k-f)+(y-f),yi[3]=k;const P=o3(A,pU,4,yi,gU);x=a*c,d=qr*a,h=d-(d-a),p=a-h,d=qr*c,g=d-(d-c),m=c-g,w=p*m-(x-h*g-p*g-h*m),C=l*u,d=qr*l,h=d-(d-l),p=l-h,d=qr*u,g=d-(d-u),m=u-g,S=p*m-(C-h*g-p*g-h*m),y=w-S,f=w-y,yi[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-C,f=b-y,yi[1]=b-(y+f)+(f-C),k=v+y,f=k-v,yi[2]=v-(k-f)+(y-f),yi[3]=k;const j=o3(P,gU,4,yi,mU);return mU[j-1]}function s2(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=J3e*u?l:-tRe(e,t,n,r,i,s,u)}const yU=Math.pow(2,-52),o2=new Uint32Array(512);class _C{static from(t,n=oRe,r=aRe){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new _C(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let $=0;$<o;$++){const F=t[2*$],O=t[2*$+1];F<a&&(a=F),O<l&&(l=O),F>u&&(u=F),O>c&&(c=O),this._ids[$]=$}const f=(a+u)/2,d=(l+c)/2;let h,p,g;for(let $=0,F=1/0;$<o;$++){const O=a3(f,d,t[2*$],t[2*$+1]);O<F&&(h=$,F=O)}const m=t[2*h],y=t[2*h+1];for(let $=0,F=1/0;$<o;$++){if($===h)continue;const O=a3(m,y,t[2*$],t[2*$+1]);O<F&&O>0&&(p=$,F=O)}let v=t[2*p],b=t[2*p+1],x=1/0;for(let $=0;$<o;$++){if($===h||$===p)continue;const F=iRe(m,y,v,b,t[2*$],t[2*$+1]);F<x&&(g=$,x=F)}let w=t[2*g],C=t[2*g+1];if(x===1/0){for(let O=0;O<o;O++)this._dists[O]=t[2*O]-t[0]||t[2*O+1]-t[1];gg(this._ids,this._dists,0,o-1);const $=new Uint32Array(o);let F=0;for(let O=0,B=-1/0;O<o;O++){const D=this._ids[O],N=this._dists[D];N>B&&($[F++]=D,B=N)}this.hull=$.subarray(0,F),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(s2(m,y,v,b,w,C)<0){const $=p,F=v,O=b;p=g,v=w,b=C,g=$,w=F,C=O}const S=sRe(m,y,v,b,w,C);this._cx=S.x,this._cy=S.y;for(let $=0;$<o;$++)this._dists[$]=a3(t[2*$],t[2*$+1],S.x,S.y);gg(this._ids,this._dists,0,o-1),this._hullStart=h;let k=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,s.fill(-1),s[this._hashKey(m,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(w,C)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let $=0,F,O;$<this._ids.length;$++){const B=this._ids[$],D=t[2*B],N=t[2*B+1];if($>0&&Math.abs(D-F)<=yU&&Math.abs(N-O)<=yU||(F=D,O=N,B===h||B===p||B===g))continue;let A=0;for(let X=0,K=this._hashKey(D,N);X<this._hashSize&&(A=s[(K+X)%this._hashSize],!(A!==-1&&A!==r[A]));X++);A=n[A];let P=A,j;for(;j=r[P],s2(D,N,t[2*P],t[2*P+1],t[2*j],t[2*j+1])>=0;)if(P=j,P===A){P=-1;break}if(P===-1)continue;let z=this._addTriangle(P,B,r[P],-1,-1,i[P]);i[B]=this._legalize(z+2),i[P]=z,k++;let U=r[P];for(;j=r[U],s2(D,N,t[2*U],t[2*U+1],t[2*j],t[2*j+1])<0;)z=this._addTriangle(U,B,j,i[B],-1,i[U]),i[B]=this._legalize(z+2),r[U]=U,k--,U=j;if(P===A)for(;j=n[P],s2(D,N,t[2*j],t[2*j+1],t[2*P],t[2*P+1])<0;)z=this._addTriangle(j,B,P,-1,i[P],i[j]),this._legalize(z+2),i[j]=z,r[P]=P,k--,P=j;this._hullStart=n[B]=P,r[P]=n[U]=B,r[B]=U,s[this._hashKey(D,N)]=B,s[this._hashKey(t[2*P],t[2*P+1])]=P}this.hull=new Uint32Array(k);for(let $=0,F=this._hullStart;$<k;$++)this.hull[$]=F,F=r[F];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(nRe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=o2[--s];continue}const u=a-a%3,c=l+(t+1)%3,f=u+(a+2)%3,d=n[o],h=n[t],p=n[c],g=n[f];if(rRe(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=u+(a+1)%3;s<o2.length&&(o2[s++]=v)}else{if(s===0)break;t=o2[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function nRe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function a3(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function rRe(e,t,n,r,i,s,o,a){const l=e-o,u=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=l*l+u*u,g=c*c+f*f,m=d*d+h*h;return l*(f*m-g*h)-u*(c*m-g*d)+p*(c*h-f*d)<0}function iRe(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,f=l*l+u*u,d=.5/(o*u-a*l),h=(u*c-a*f)*d,p=(o*f-l*c)*d;return h*h+p*p}function sRe(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,f=l*l+u*u,d=.5/(o*u-a*l),h=e+(u*c-a*f)*d,p=t+(o*f-l*c)*d;return{x:h,y:p}}function gg(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;Oy(e,i,s),t[e[n]]>t[e[r]]&&Oy(e,n,r),t[e[s]]>t[e[r]]&&Oy(e,s,r),t[e[n]]>t[e[s]]&&Oy(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;Oy(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(gg(e,t,s,r),gg(e,t,n,o-1)):(gg(e,t,n,o-1),gg(e,t,s,r))}}function Oy(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function oRe(e){return e[0]}function aRe(e){return e[1]}const vU=1e-6;class Wd{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>vU||Math.abs(this._y1-s)>vU)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class NP{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let lRe=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,m=0,y=r.length,v,b;g<y;g+=3,m+=2){const x=r[g]*2,w=r[g+1]*2,C=r[g+2]*2,S=t[x],k=t[x+1],$=t[w],F=t[w+1],O=t[C],B=t[C+1],D=$-S,N=F-k,A=O-S,P=B-k,j=(D*P-N*A)*2;if(Math.abs(j)<1e-9){if(s===void 0){s=o=0;for(const U of n)s+=t[U*2],o+=t[U*2+1];s/=n.length,o/=n.length}const z=1e9*Math.sign((s-S)*P-(o-k)*A);v=(S+O)/2-z*P,b=(k+B)/2+z*A}else{const z=1/j,U=D*D+N*N,X=A*A+P*P;v=S+(P*U-N*X)*z,b=k+(D*X-A*U)*z}a[m]=v,a[m+1]=b}let l=n[n.length-1],u,c=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=c,f=d,h=p,c=l*4,d=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Wd:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=o[h],m=o[h+1],y=o[p],v=o[p+1];this._renderSegment(g,m,y,v,t)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const f=Math.floor(i[u]/3)*2,d=o[f],h=o[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Wd:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Wd:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new NP;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,m,y,v;if(u===0){if((p=this._clipSegment(s,o,a,l,u,c))===null)continue;[g,m,y,v]=p}else{if((p=this._clipSegment(a,l,s,o,c,u))===null)continue;[y,v,g,m]=p,f=d,d=this._edgecode(g,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,m):i=[g,m]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,u,c=s||o;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=u,s=this._regioncode(t,n)):(r=l,i=u,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=d,d=this._edgecode(a[u],a[u+1]),f&&d&&(u=this._edge(t,f,d,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const uRe=2*Math.PI,Gp=Math.pow;function cRe(e){return e[0]}function fRe(e){return e[1]}function dRe(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function hRe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class eI{static from(t,n=cRe,r=fRe,i){return new eI("length"in t?pRe(t,n,r,i):Float64Array.from(gRe(t,n,r,i)))}constructor(t){this._delaunator=new _C(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&dRe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=hRe(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new _C(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(r[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new lRe(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=s[u],u===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=Gp(n-u[t*2],2)+Gp(r-u[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=Gp(n-u[p*2],2)+Gp(r-u[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Gp(n-u[h*2],2)+Gp(r-u[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Wd:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Wd:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,uRe)}return r&&r.value()}renderHull(t){const n=t==null?t=new Wd:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new NP;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Wd:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new NP;return this.renderTriangle(t,n),n.value()}}function pRe(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*gRe(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function tI(e){J.call(this,null,e)}tI.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const mRe=[-1e5,-1e5,1e5,1e5];he(tI,J,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:mRe;const s=this.value=eI.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const l=s.cellPolygon(o);r[o][n]=l&&!vRe(l)?yRe(l):null}return t.reflow(e.modified()).modifies(n)}});function yRe(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function vRe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const bRe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:tI},Symbol.toStringTag,{value:"Module"}));var l3=Math.PI/180,R1=64,$S=2048;function xRe(){var e=[256,256],t,n,r,i,s,o,a,l=Bre,u=[],c=Math.random,f={};f.layout=function(){for(var p=d(nf()),g=_Re((e[0]>>5)*e[1]),m=null,y=u.length,v=-1,b=[],x=u.map(C=>({text:t(C),font:n(C),style:i(C),weight:s(C),rotate:o(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,S)=>S.size-C.size);++v<y;){var w=x[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,wRe(p,w,x,v),w.hasText&&h(g,w,m)&&(b.push(w),m?ERe(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(R1<<5)/g,p.height=$S/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function h(p,g,m){for(var y=g.x,v=g.y,b=Math.hypot(e[0],e[1]),x=l(e),w=c()<.5?1:-1,C=-w,S,k,$;(S=x(C+=w))&&(k=~~S[0],$=~~S[1],!(Math.min(Math.abs(k),Math.abs($))>=b));)if(g.x=y+k,g.y=v+$,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!SRe(g,p,e[0]))&&(!m||CRe(g,m))){for(var F=g.sprite,O=g.width>>5,B=e[0]>>5,D=g.x-(O<<4),N=D&127,A=32-N,P=g.y1-g.y0,j=(g.y+g.y0)*B+(D>>5),z,U=0;U<P;U++){z=0;for(var X=0;X<=O;X++)p[j+X]|=z<<A|(X<O?(z=F[U*O+X])>>>N:0);j+=B}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(u=p,f):u},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=dd(p),f):n},f.fontStyle=function(p){return arguments.length?(i=dd(p),f):i},f.fontWeight=function(p){return arguments.length?(s=dd(p),f):s},f.rotate=function(p){return arguments.length?(o=dd(p),f):o},f.text=function(p){return arguments.length?(t=dd(p),f):t},f.spiral=function(p){return arguments.length?(l=$Re[p]||p,f):l},f.fontSize=function(p){return arguments.length?(r=dd(p),f):r},f.padding=function(p){return arguments.length?(a=dd(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function wRe(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(R1<<5)/s,$S/s);var o=0,a=0,l=0,u=n.length,c,f,d,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*l3),m=Math.cos(t.rotate*l3),y=c*m,v=c*g,b=d*m,x=d*g;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>l&&(l=d),o+c>=R1<<5&&(o=0,a+=l,l=0),a+d>=$S)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*l3),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var w=i.getImageData(0,0,(R1<<5)/s,$S/s).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)C[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,k=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var $=f*p+(h>>5),F=w[(a+p)*(R1<<5)+(o+h)<<2]?1<<31-h%32:0;C[$]|=F,S|=F}S?k=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+k,t.sprite=C.slice(0,(t.y1-t.y0)*f)}}}function SRe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,l=e.y1-e.y0,u=(e.y+e.y0)*n+(s>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[u+d])return!0;u+=n}return!1}function ERe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function CRe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Bre(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function kRe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function _Re(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function dd(e){return typeof e=="function"?e:function(){return e}}var $Re={archimedean:Bre,rectangular:kRe};const Ure=["x","y","font","fontSize","fontStyle","fontWeight","angle"],ARe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function nI(e){J.call(this,xRe(),e)}nI.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Ure}]};he(nI,J,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ee("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return tt(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||ARe.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||Ure;let a=e.fontSize||14,l;if(tt(a)?l=e.fontSizeRange:a=di(a),l){const p=a,g=At("sqrt")().domain(wl(i,p)).range(l);a=m=>g(p(m))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Co).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=u.length;for(let p=0,g,m;p<h;++p)g=u[p],m=g.datum,m[o[0]]=g.x+f,m[o[1]]=g.y+d,m[o[2]]=g.font,m[o[3]]=g.size,m[o[4]]=g.style,m[o[5]]=g.weight,m[o[6]]=g.rotate;return t.reflow(r).modifies(o)}});const TRe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:nI},Symbol.toStringTag,{value:"Module"})),RRe=e=>new Uint8Array(e),FRe=e=>new Uint16Array(e),sv=e=>new Uint32Array(e);function PRe(){let e=8,t=[],n=sv(0),r=a2(0,e),i=a2(0,e);return{data:()=>t,seen:()=>n=ORe(n,t.length),add(s){for(let o=0,a=t.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,t.push(u)},remove(s,o){const a=t.length,l=Array(a-s),u=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)l[f]=t[f],u[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?u[f]=-1:(u[f]=d,r[d]=r[f],i[d]=i[f],l[d]=c,c._index=d++),r[f]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=a2(s,e,r),i=a2(s,e))}}}function ORe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function a2(e,t,n){const r=(t<257?RRe:t<65537?FRe:sv)(e);return n&&r.set(n),r}function bU(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),l=i.index,u=a[0],c=a[1],f=l.length;let d;for(d=0;d<u;++d)s[l[d]]|=r;for(d=c;d<f;++d)s[l[d]]|=r;return o}}}function xU(){let e=sv(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,f=l.length,d=sv(f);let h=Array(f),p,g,m;for(m=0;m<f;++m)h[m]=a(l[m]),d[m]=m;if(h=MRe(h,d),c)p=t,g=e,t=Array(c+f),e=sv(c+f),DRe(u,p,g,c,h,d,f,t,e);else{if(u>0)for(m=0;m<f;++m)d[m]+=u;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,l){const u=n;let c,f,d;for(f=0;!l[e[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function o(a,l){let u;return l?u=l.length:(l=t,u=n),[qve(l,a[0],0,u),yf(l,a[1],0,u)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function MRe(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Yve(e,t)}function DRe(e,t,n,r,i,s,o,a,l){let u=0,c=0,f;for(f=0;u<r&&c<o;++f)t[u]<i[c]?(a[f]=t[u],l[f]=n[u++]):(a[f]=i[c],l[f]=s[c++]+e);for(;u<r;++u,++f)a[f]=t[u],l[f]=n[u];for(;c<o;++c,++f)a[f]=i[c],l[f]=s[c]+e}function rI(e){J.call(this,PRe(),e),this._indices=null,this._dims=null}rI.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};he(rI,J,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=i[l]||(i[l]=xU()),s.push(bU(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,m,y,v,b,x,w,C,S;if(u.set(l),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,C=v.length;w<C;++w)x[v[w]._index]=1;for(w=0;w<h;++w)S=r[w],(!o[w]||e.modified("fields",w)||t.modified(S.fields))&&(y=S.fname,(g=p[y])||(s[y]=m=xU(),p[y]=g=m.insert(S,t.source,0)),o[w]=bU(m,w,i[w]).onAdd(g,l));for(w=0,C=a.data().length;w<C;++w)b[w]||(u[w]!==l[w]?f.push(w):x[w]&&l[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,g=l[p]||(l[p]=o[p].insert(a[h],r,d)),s[h].onAdd(g,m);for(;d<c;++d)y[d]=v,m[d]!==v&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,i[u]!==s&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=u[0],p=u[1],g=e.one;let m,y,v;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)v=l[m],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=g;else if(f>h)for(m=h,y=Math.min(f,p);m<y;++m)v=l[m],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=g;if(d>p)for(m=Math.max(f,p),y=d;m<y;++m)v=l[m],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=g;else if(d<p)for(m=Math.max(h,d),y=p;m<y;++m)v=l[m],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=a[0],d=a[1],h=e.one;let p,g,m;if(u<f)for(p=u,g=Math.min(f,c);p<g;++p)m=o[p],s[m]^=h,n.push(m);else if(u>f)for(p=f,g=Math.min(u,d);p<g;++p)m=o[p],s[m]^=h,r.push(m);if(c>d)for(p=Math.max(u,d),g=c;p<g;++p)m=o[p],s[m]^=h,n.push(m);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)m=o[p],s[m]^=h,r.push(m);e.range=t.slice()}});function iI(e){J.call(this,null,e)}iI.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};he(iI,J,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:o[c];return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^l[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^l[c]&n))?o[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});const NRe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:rI,resolvefilter:iI},Symbol.toStringTag,{value:"Module"})),IRe="RawCode",Rh="Literal",LRe="Property",zRe="Identifier",jRe="ArrayExpression",BRe="BinaryExpression",Vre="CallExpression",URe="ConditionalExpression",VRe="LogicalExpression",WRe="MemberExpression",HRe="ObjectExpression",qRe="UnaryExpression";function Ea(e){this.type=e}Ea.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=GRe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function GRe(e){switch(e.type){case jRe:return e.elements;case BRe:case VRe:return[e.left,e.right];case Vre:return[e.callee].concat(e.arguments);case URe:return[e.test,e.consequent,e.alternate];case WRe:return[e.object,e.property];case HRe:return e.properties;case LRe:return[e.key,e.value];case qRe:return[e.argument];case zRe:case Rh:case IRe:default:return[]}}var Ml,Te,Z,li,jt,G_=1,$x=2,Fh=3,Vf=4,X_=5,up=6,Gi=7,Ax=8,XRe=9;Ml={};Ml[G_]="Boolean";Ml[$x]="<end>";Ml[Fh]="Identifier";Ml[Vf]="Keyword";Ml[X_]="Null";Ml[up]="Numeric";Ml[Gi]="Punctuator";Ml[Ax]="String";Ml[XRe]="RegularExpression";var YRe="ArrayExpression",KRe="BinaryExpression",QRe="CallExpression",JRe="ConditionalExpression",Wre="Identifier",ZRe="Literal",eFe="LogicalExpression",tFe="MemberExpression",nFe="ObjectExpression",rFe="Property",iFe="UnaryExpression",gr="Unexpected token %0",sFe="Unexpected number",oFe="Unexpected string",aFe="Unexpected identifier",lFe="Unexpected reserved word",uFe="Unexpected end of input",IP="Invalid regular expression",u3="Invalid regular expression: missing /",Hre="Octal literals are not allowed in strict mode.",cFe="Duplicate data property in object literal not allowed in strict mode",Dr="ILLEGAL",Yv="Disabled.",fFe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),dFe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Y_(e,t){if(!e)throw new Error("ASSERT: "+t)}function tu(e){return e>=48&&e<=57}function sI(e){return"0123456789abcdefABCDEF".includes(e)}function ov(e){return"01234567".includes(e)}function hFe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Kv(e){return e===10||e===13||e===8232||e===8233}function Tx(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&fFe.test(String.fromCharCode(e))}function $C(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&dFe.test(String.fromCharCode(e))}const pFe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function qre(){for(;Z<li;){const e=Te.charCodeAt(Z);if(hFe(e)||Kv(e))++Z;else break}}function LP(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Z<li&&sI(Te[Z])?(r=Te[Z++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):kt({},gr,Dr);return String.fromCharCode(i)}function gFe(){var e,t,n,r;for(e=Te[Z],t=0,e==="}"&&kt({},gr,Dr);Z<li&&(e=Te[Z++],!!sI(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&kt({},gr,Dr),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Gre(){var e,t;for(e=Te.charCodeAt(Z++),t=String.fromCharCode(e),e===92&&(Te.charCodeAt(Z)!==117&&kt({},gr,Dr),++Z,e=LP("u"),(!e||e==="\\"||!Tx(e.charCodeAt(0)))&&kt({},gr,Dr),t=e);Z<li&&(e=Te.charCodeAt(Z),!!$C(e));)++Z,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Te.charCodeAt(Z)!==117&&kt({},gr,Dr),++Z,e=LP("u"),(!e||e==="\\"||!$C(e.charCodeAt(0)))&&kt({},gr,Dr),t+=e);return t}function mFe(){var e,t;for(e=Z++;Z<li;){if(t=Te.charCodeAt(Z),t===92)return Z=e,Gre();if($C(t))++Z;else break}return Te.slice(e,Z)}function yFe(){var e,t,n;return e=Z,t=Te.charCodeAt(Z)===92?Gre():mFe(),t.length===1?n=Fh:pFe.hasOwnProperty(t)?n=Vf:t==="null"?n=X_:t==="true"||t==="false"?n=G_:n=Fh,{type:n,value:t,start:e,end:Z}}function c3(){var e=Z,t=Te.charCodeAt(Z),n,r=Te[Z],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Z,{type:Gi,value:String.fromCharCode(t),start:e,end:Z};default:if(n=Te.charCodeAt(Z+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Z+=2,{type:Gi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Z};case 33:case 61:return Z+=2,Te.charCodeAt(Z)===61&&++Z,{type:Gi,value:Te.slice(e,Z),start:e,end:Z}}}if(o=Te.substr(Z,4),o===">>>=")return Z+=4,{type:Gi,value:o,start:e,end:Z};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Z+=3,{type:Gi,value:s,start:e,end:Z};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return Z+=2,{type:Gi,value:i,start:e,end:Z};if(i==="//"&&kt({},gr,Dr),"<>=!+-*%&|^/".includes(r))return++Z,{type:Gi,value:r,start:e,end:Z};kt({},gr,Dr)}function vFe(e){let t="";for(;Z<li&&sI(Te[Z]);)t+=Te[Z++];return t.length===0&&kt({},gr,Dr),Tx(Te.charCodeAt(Z))&&kt({},gr,Dr),{type:up,value:parseInt("0x"+t,16),start:e,end:Z}}function bFe(e){let t="0"+Te[Z++];for(;Z<li&&ov(Te[Z]);)t+=Te[Z++];return(Tx(Te.charCodeAt(Z))||tu(Te.charCodeAt(Z)))&&kt({},gr,Dr),{type:up,value:parseInt(t,8),octal:!0,start:e,end:Z}}function wU(){var e,t,n;if(n=Te[Z],Y_(tu(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Z,e="",n!=="."){if(e=Te[Z++],n=Te[Z],e==="0"){if(n==="x"||n==="X")return++Z,vFe(t);if(ov(n))return bFe(t);n&&tu(n.charCodeAt(0))&&kt({},gr,Dr)}for(;tu(Te.charCodeAt(Z));)e+=Te[Z++];n=Te[Z]}if(n==="."){for(e+=Te[Z++];tu(Te.charCodeAt(Z));)e+=Te[Z++];n=Te[Z]}if(n==="e"||n==="E")if(e+=Te[Z++],n=Te[Z],(n==="+"||n==="-")&&(e+=Te[Z++]),tu(Te.charCodeAt(Z)))for(;tu(Te.charCodeAt(Z));)e+=Te[Z++];else kt({},gr,Dr);return Tx(Te.charCodeAt(Z))&&kt({},gr,Dr),{type:up,value:parseFloat(e),start:t,end:Z}}function xFe(){var e="",t,n,r,i,s=!1;for(t=Te[Z],Y_(t==="'"||t==='"',"String literal must starts with a quote"),n=Z,++Z;Z<li;)if(r=Te[Z++],r===t){t="";break}else if(r==="\\")if(r=Te[Z++],!r||!Kv(r.charCodeAt(0)))switch(r){case"u":case"x":Te[Z]==="{"?(++Z,e+=gFe()):e+=LP(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:ov(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Z<li&&ov(Te[Z])&&(s=!0,i=i*8+"01234567".indexOf(Te[Z++]),"0123".includes(r)&&Z<li&&ov(Te[Z])&&(i=i*8+"01234567".indexOf(Te[Z++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Te[Z]===`
`&&++Z;else{if(Kv(r.charCodeAt(0)))break;e+=r}return t!==""&&kt({},gr,Dr),{type:Ax,value:e,octal:s,start:n,end:Z}}function wFe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";kt({},IP)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{kt({},IP)}try{return new RegExp(e,t)}catch{return null}}function SFe(){var e,t,n,r,i;for(e=Te[Z],Y_(e==="/","Regular expression literal must start with a slash"),t=Te[Z++],n=!1,r=!1;Z<li;)if(e=Te[Z++],t+=e,e==="\\")e=Te[Z++],Kv(e.charCodeAt(0))&&kt({},u3),t+=e;else if(Kv(e.charCodeAt(0)))kt({},u3);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||kt({},u3),i=t.substr(1,t.length-2),{value:i,literal:t}}function EFe(){var e,t,n;for(t="",n="";Z<li&&(e=Te[Z],!!$C(e.charCodeAt(0)));)++Z,e==="\\"&&Z<li?kt({},gr,Dr):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&kt({},IP,n),{value:n,literal:t}}function CFe(){var e,t,n,r;return jt=null,qre(),e=Z,t=SFe(),n=EFe(),r=wFe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Z}}function kFe(e){return e.type===Fh||e.type===Vf||e.type===G_||e.type===X_}function Xre(){if(qre(),Z>=li)return{type:$x,start:Z,end:Z};const e=Te.charCodeAt(Z);return Tx(e)?yFe():e===40||e===41||e===59?c3():e===39||e===34?xFe():e===46?tu(Te.charCodeAt(Z+1))?wU():c3():tu(e)?wU():c3()}function Qi(){const e=jt;return Z=e.end,jt=Xre(),Z=e.end,e}function Yre(){const e=Z;jt=Xre(),Z=e}function _Fe(e){const t=new Ea(YRe);return t.elements=e,t}function SU(e,t,n){const r=new Ea(e==="||"||e==="&&"?eFe:KRe);return r.operator=e,r.left=t,r.right=n,r}function $Fe(e,t){const n=new Ea(QRe);return n.callee=e,n.arguments=t,n}function AFe(e,t,n){const r=new Ea(JRe);return r.test=e,r.consequent=t,r.alternate=n,r}function oI(e){const t=new Ea(Wre);return t.name=e,t}function F1(e){const t=new Ea(ZRe);return t.value=e.value,t.raw=Te.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function EU(e,t,n){const r=new Ea(tFe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function TFe(e){const t=new Ea(nFe);return t.properties=e,t}function CU(e,t,n){const r=new Ea(rFe);return r.key=t,r.value=n,r.kind=e,r}function RFe(e,t){const n=new Ea(iFe);return n.operator=e,n.argument=t,n.prefix=!0,n}function kt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(Y_(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Z,n.description=i,n}function K_(e){e.type===$x&&kt(e,uFe),e.type===up&&kt(e,sFe),e.type===Ax&&kt(e,oFe),e.type===Fh&&kt(e,aFe),e.type===Vf&&kt(e,lFe),kt(e,gr,e.value)}function ui(e){const t=Qi();(t.type!==Gi||t.value!==e)&&K_(t)}function cn(e){return jt.type===Gi&&jt.value===e}function f3(e){return jt.type===Vf&&jt.value===e}function FFe(){const e=[];for(Z=jt.start,ui("[");!cn("]");)cn(",")?(Qi(),e.push(null)):(e.push(Ph()),cn("]")||ui(","));return Qi(),_Fe(e)}function kU(){Z=jt.start;const e=Qi();return e.type===Ax||e.type===up?(e.octal&&kt(e,Hre),F1(e)):oI(e.value)}function PFe(){var e,t,n,r;if(Z=jt.start,e=jt,e.type===Fh)return n=kU(),ui(":"),r=Ph(),CU("init",n,r);if(e.type===$x||e.type===Gi)K_(e);else return t=kU(),ui(":"),r=Ph(),CU("init",t,r)}function OFe(){var e=[],t,n,r,i={},s=String;for(Z=jt.start,ui("{");!cn("}");)t=PFe(),t.key.type===Wre?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?kt({},cFe):i[r]=!0,e.push(t),cn("}")||ui(",");return ui("}"),TFe(e)}function MFe(){ui("(");const e=aI();return ui(")"),e}const DFe={if:1};function NFe(){var e,t,n;if(cn("("))return MFe();if(cn("["))return FFe();if(cn("{"))return OFe();if(e=jt.type,Z=jt.start,e===Fh||DFe[jt.value])n=oI(Qi().value);else if(e===Ax||e===up)jt.octal&&kt(jt,Hre),n=F1(Qi());else{if(e===Vf)throw new Error(Yv);e===G_?(t=Qi(),t.value=t.value==="true",n=F1(t)):e===X_?(t=Qi(),t.value=null,n=F1(t)):cn("/")||cn("/=")?(n=F1(CFe()),Yre()):K_(Qi())}return n}function IFe(){const e=[];if(ui("("),!cn(")"))for(;Z<li&&(e.push(Ph()),!cn(")"));)ui(",");return ui(")"),e}function LFe(){Z=jt.start;const e=Qi();return kFe(e)||K_(e),oI(e.value)}function zFe(){return ui("."),LFe()}function jFe(){ui("[");const e=aI();return ui("]"),e}function BFe(){var e,t,n;for(e=NFe();;)if(cn("."))n=zFe(),e=EU(".",e,n);else if(cn("("))t=IFe(),e=$Fe(e,t);else if(cn("["))n=jFe(),e=EU("[",e,n);else break;return e}function _U(){const e=BFe();if(jt.type===Gi&&(cn("++")||cn("--")))throw new Error(Yv);return e}function AS(){var e,t;if(jt.type!==Gi&&jt.type!==Vf)t=_U();else{if(cn("++")||cn("--"))throw new Error(Yv);if(cn("+")||cn("-")||cn("~")||cn("!"))e=Qi(),t=AS(),t=RFe(e.value,t);else{if(f3("delete")||f3("void")||f3("typeof"))throw new Error(Yv);t=_U()}}return t}function $U(e){let t=0;if(e.type!==Gi&&e.type!==Vf)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function UFe(){var e,t,n,r,i,s,o,a,l,u;if(e=jt,l=AS(),r=jt,i=$U(r),i===0)return l;for(r.prec=i,Qi(),t=[e,jt],o=AS(),s=[l,r,o];(i=$U(jt))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),n=SU(a,l,o),s.push(n);r=Qi(),r.prec=i,s.push(r),t.push(jt),n=AS(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=SU(s[u-1].value,s[u-2],n),u-=2;return n}function Ph(){var e,t,n;return e=UFe(),cn("?")&&(Qi(),t=Ph(),ui(":"),n=Ph(),e=AFe(e,t,n)),e}function aI(){const e=Ph();if(cn(","))throw new Error(Yv);return e}function lI(e){Te=e,Z=0,li=Te.length,jt=null,Yre();const t=aI();if(jt.type!==$x)throw new Error("Unexpect token after expression.");return t}var Kre={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Qre(e){function t(o,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,l){return u=>t(o,u,a,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&ee("Missing arguments to clamp function."),o.length>3&&ee("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&ee("Missing arguments to if function."),o.length>3&&ee("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function VFe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Jre(e){e=e||{};const t=e.allowed?da(e.allowed):{},n=e.forbidden?da(e.forbidden):{},r=e.constants||Kre,i=(e.functions||Qre)(f),s=e.globalvar,o=e.fieldvar,a=tt(s)?s:p=>`${s}["${p}"]`;let l={},u={},c=0;function f(p){if(we(p))return p;const g=d[p.type];return g==null&&ee("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:Se(n,g)?ee("Illegal identifier: "+g):Se(r,g)?r[g]:Se(t,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===o&&(u[VFe(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&ee("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=Se(i,g)&&i[g];return y||ee("Unrecognized function: "+g),tt(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}const AU=Symbol("vega_selection_getter");function Zre(e){return(!e.getter||!e.getter[AU])&&(e.getter=wo(e.field),e.getter[AU]=!0),e.getter}const uI="intersect",TU="union",WFe="vlMulti",HFe="vlPoint",RU="or",qFe="and",Qa="_vgsid_",Qv=wo(Qa),GFe="E",XFe="R",YFe="R-E",KFe="R-LE",QFe="R-RE",AC="index:unit";function FU(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=Zre(a)(e),ef(o)&&(o=ii(o)),ef(r[s])&&(r[s]=ii(r[s])),te(r[s])&&ef(r[s][0])&&(r[s]=r[s].map(ii)),a.type===GFe){if(te(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===XFe){if(!fg(o,r[s]))return!1}else if(a.type===QFe){if(!fg(o,r[s],!0,!1))return!1}else if(a.type===YFe){if(!fg(o,r[s],!1,!1))return!1}else if(a.type===KFe&&!fg(o,r[s],!1,!0))return!1;return!0}function JFe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[AC]&&r[AC].value:void 0,o=n===uI,a=i.length,l=0,u,c,f,d,h;l<a;++l)if(u=i[l],s&&o){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=FU(t,u),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=FU(t,u),o^h)return h;return a&&o}const eie=F0(Qv),ZFe=eie.left,ePe=eie.right;function tPe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[AC]&&r[AC].value:void 0,o=n===uI,a=Qv(t),l=ZFe(i,a);if(l===i.length||Qv(i[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(ePe(i,a)-l<s.size)return!1}return!0}function nPe(e,t){return e.map(n=>et(t.fields?{values:t.fields.map(r=>Zre(r)(n.datum))}:{[Qa]:Qv(n.datum)},t))}function rPe(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},l={},u,c,f,d,h,p,g,m,y,v,b=s.length,x=0,w,C;x<b;++x)if(u=s[x],d=u.unit,c=u.fields,f=u.values,c&&f){for(w=0,C=c.length;w<C;++w)h=c[w],g=o[h.field]||(o[h.field]={}),m=g[d]||(g[d]=[]),l[h.field]=y=h.type.charAt(0),v=d3[`${y}_union`],g[d]=v(m,xe(f[w]));n&&(m=a[d]||(a[d]=[]),m.push(xe(f).reduce((S,k,$)=>(S[c[$].field]=k,S),{})))}else h=Qa,p=Qv(u),g=o[h]||(o[h]={}),m=g[d]||(g[d]=[]),m.push(p),n&&(m=a[d]||(a[d]=[]),m.push({[Qa]:p}));if(t=t||TU,o[Qa]?o[Qa]=d3[`${Qa}_${t}`](...Object.values(o[Qa])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(k=>o[S][k]).reduce((k,$)=>k===void 0?$:d3[`${l[S]}_${t}`](k,$))}),s=Object.keys(a),n&&s.length){const S=r?HFe:WFe;o[S]=t===TU?{[RU]:s.reduce((k,$)=>(k.push(...a[$]),k),[])}:{[qFe]:s.map(k=>({[RU]:a[k]}))}}return o}var d3={[`${Qa}_union`]:ibe,[`${Qa}_intersect`]:nbe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ii(t[0]),r=ii(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ii(t[0]),r=ii(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const iPe=":",sPe="@";function cI(e,t,n,r){t[0].type!==Rh&&ee("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&yt(t).value,o="unit",a=sPe+o,l=iPe+i;s===uI&&!Se(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Se(r,l)||(r[l]=n.getData(i).tuplesRef())}function tie(e){const t=this.context.data[e];return t?t.values.value:[]}function oPe(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function aPe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(So).insert(t)),1}function lPe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Rx=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},uPe=Rx("format"),nie=Rx("timeFormat"),cPe=Rx("utcFormat"),fPe=Rx("timeParse"),dPe=Rx("utcParse"),l2=new Date(2e3,0,1);function Q_(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(l2.setYear(2e3),l2.setMonth(e),l2.setDate(t),nie.call(this,l2,n))}function hPe(e){return Q_.call(this,e,1,"%B")}function pPe(e){return Q_.call(this,e,1,"%b")}function gPe(e){return Q_.call(this,0,2+e,"%A")}function mPe(e){return Q_.call(this,0,2+e,"%a")}const yPe=":",vPe="@",zP="%",rie="$";function fI(e,t,n,r){t[0].type!==Rh&&ee("First argument to data functions must be a string literal.");const i=t[0].value,s=yPe+i;if(!Se(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function bPe(e,t,n,r){t[0].type!==Rh&&ee("First argument to indata must be a string literal."),t[1].type!==Rh&&ee("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=vPe+s;Se(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Oi(e,t,n,r){if(t[0].type===Rh)PU(n,r,t[0].value);else for(e in n.scales)PU(n,r,e)}function PU(e,t,n){const r=zP+n;if(!Se(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Dl(e,t){if(tt(e))return e;if(we(e)){const n=t.scales[e];return n&&REe(n.value)?n.value:void 0}}function xPe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Oi,n._range=Oi,n._scale=Oi;const r=i=>"_["+(i.type===Rh?de(zP+i.value):de(zP)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function dI(e,t){return function(n,r,i){if(n){const s=Dl(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const wPe=dI("area",H$e),SPe=dI("bounds",Y$e),EPe=dI("centroid",tAe);function CPe(e,t){const n=Dl(e,(t||this).context);return n&&n.scale()}function kPe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function hI(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function _Pe(){return hI(this.context.dataflow,"warn",arguments)}function $Pe(){return hI(this.context.dataflow,"info",arguments)}function APe(){return hI(this.context.dataflow,"debug",arguments)}function h3(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function jP(e){const t=wf(e),n=h3(t.r),r=h3(t.g),i=h3(t.b);return .2126*n+.7152*r+.0722*i}function TPe(e,t){const n=jP(e),r=jP(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function RPe(){const e=[].slice.call(arguments);return e.unshift({}),et(...e)}function iie(e,t){return e===t||e!==e&&t!==t?!0:te(e)?te(t)&&e.length===t.length?FPe(e,t):!1:ve(e)&&ve(t)?sie(e,t):!1}function FPe(e,t){for(let n=0,r=e.length;n<r;++n)if(!iie(e[n],t[n]))return!1;return!0}function sie(e,t){for(const n in e)if(!iie(e[n],t[n]))return!1;return!0}function OU(e){return t=>sie(e,t)}function PPe(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],l=a.input,u=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=o.changeset(),c.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,c).run()},!0,1)),n&&(f=n===!0?So:te(n)||o_(n)?n:OU(n),c.remove(f)),t&&c.insert(t),r&&(f=OU(r),l.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function OPe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function MPe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const MU={};function DPe(e,t){const n=MU[t]||(MU[t]=wo(t));return te(e)?e.map(n):n(e)}function pI(e){return te(e)||ArrayBuffer.isView(e)?e:null}function gI(e){return pI(e)||(we(e)?e:null)}function NPe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return pI(e).join(...n)}function IPe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gI(e).indexOf(...n)}function LPe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gI(e).lastIndexOf(...n)}function zPe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gI(e).slice(...n)}function jPe(e,t,n){return tt(n)&&ee("Function argument passed to replace."),String(e).replace(t,n)}function BPe(e){return pI(e).slice().reverse()}function UPe(e,t,n){return $6(e||0,t||0,n||0)}function VPe(e,t){const n=Dl(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function WPe(e,t){const n=Dl(e,(t||this).context);return n?n.copy():void 0}function HPe(e,t){const n=Dl(e,(t||this).context);return n?n.domain():[]}function qPe(e,t,n){const r=Dl(e,(n||this).context);return r?te(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function GPe(e,t){const n=Dl(e,(t||this).context);return n&&n.range?n.range():[]}function XPe(e,t,n){const r=Dl(e,(n||this).context);return r?r(t):void 0}function YPe(e,t,n,r,i){e=Dl(e,(i||this).context);const s=Yee(t,n);let o=e.domain(),a=o[0],l=yt(o),u=fi;return l-a?u=Iee(e,a,l):e=(e.interpolator?At("sequential")().interpolator(e.interpolator()):At("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),l!==yt(o)&&o.push(l)),o.forEach(c=>s.stop(u(c),e(c))),s}function KPe(e,t,n){const r=Dl(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function QPe(e){let t=null;return function(n){return n?Bv(n,t=t||Nm(e)):e}}const oie=e=>e.data;function aie(e,t){const n=tie.call(t,e);return n.root&&n.root.lookup||{}}function JPe(e,t,n){const r=aie(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(oie):void 0}function ZPe(e,t){const n=aie(e,this)[t];return n?n.ancestors().map(oie):void 0}const lie=()=>typeof window<"u"&&window||null;function e4e(){const e=lie();return e?e.screen:{}}function t4e(){const e=lie();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function n4e(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function uie(e,t,n){if(!e)return[];const[r,i]=e,s=new Kn().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return qte(o,s,r4e(t))}function r4e(e){let t=null;if(e){const n=xe(e.marktype),r=xe(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function i4e(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=xe(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function s4e(e){return xe(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function o4e(e,t,n){const{x:r,y:i,mark:s}=n,o=new Kn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,i),uie([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(l=>a4e(l.x,l.y,t))}function a4e(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[l,u]=n[i];u>t!=a>t&&e<(o-l)*(t-u)/(a-u)+l&&r++}return r&1}const Jv={random(){return Co()},cumulativeNormal:f_,cumulativeLogNormal:_D,cumulativeUniform:RD,densityNormal:wD,densityLogNormal:kD,densityUniform:TD,quantileNormal:d_,quantileLogNormal:$D,quantileUniform:FD,sampleNormal:c_,sampleLogNormal:CD,sampleUniform:AD,isArray:te,isBoolean:Lf,isDate:ef,isDefined(e){return e!==void 0},isNumber:_t,isObject:ve,isRegExp:fQ,isString:we,isTuple:o_,isValid(e){return e!=null&&e===e},toBoolean:eD,toDate(e){return tD(e)},toNumber:ii,toString:nD,indexof:IPe,join:NPe,lastindexof:LPe,replace:jPe,reverse:BPe,slice:zPe,flush:uQ,lerp:dQ,merge:RPe,pad:gQ,peek:yt,pluck:DPe,span:Zb,inrange:fg,truncate:mQ,rgb:wf,lab:OE,hcl:ME,hsl:FE,luminance:jP,contrast:TPe,sequence:As,format:uPe,utcFormat:cPe,utcParse:dPe,utcOffset:XQ,utcSequence:QQ,timeFormat:nie,timeParse:fPe,timeOffset:GQ,timeSequence:KQ,timeUnitSpecifier:NQ,monthFormat:hPe,monthAbbrevFormat:pPe,dayFormat:gPe,dayAbbrevFormat:mPe,quarter:sQ,utcquarter:oQ,week:LQ,utcweek:BQ,dayofyear:IQ,utcdayofyear:jQ,warn:_Pe,info:$Pe,debug:APe,extent(e){return wl(e)},inScope:kPe,intersect:uie,clampRange:aQ,pinchDistance:OPe,pinchAngle:MPe,screen:e4e,containerSize:n4e,windowSize:t4e,bandspace:UPe,setdata:aPe,pathShape:QPe,panLinear:tQ,panLog:nQ,panPow:rQ,panSymlog:iQ,zoomLinear:XM,zoomLog:YM,zoomPow:vE,zoomSymlog:KM,encode:lPe,modify:PPe,lassoAppend:i4e,lassoPath:s4e,intersectLasso:o4e},l4e=["view","item","group","xy","x","y"],u4e="event.vega.",cie="this.",mI={},fie={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${de(rie+e)}]`,functions:c4e,constants:Kre,visitors:mI},BP=Jre(fie);function c4e(e){const t=Qre(e);l4e.forEach(n=>t[n]=u4e+n);for(const n in Jv)t[n]=cie+n;return et(t,xPe(e,Jv,mI)),t}function Hn(e,t,n){return arguments.length===1?Jv[e]:(Jv[e]=t,n&&(mI[e]=n),BP&&(BP.functions[e]=cie+e),this)}Hn("bandwidth",VPe,Oi);Hn("copy",WPe,Oi);Hn("domain",HPe,Oi);Hn("range",GPe,Oi);Hn("invert",qPe,Oi);Hn("scale",XPe,Oi);Hn("gradient",YPe,Oi);Hn("geoArea",wPe,Oi);Hn("geoBounds",SPe,Oi);Hn("geoCentroid",EPe,Oi);Hn("geoShape",KPe,Oi);Hn("geoScale",CPe,Oi);Hn("indata",oPe,bPe);Hn("data",tie,fI);Hn("treePath",JPe,fI);Hn("treeAncestors",ZPe,fI);Hn("vlSelectionTest",JFe,cI);Hn("vlSelectionIdTest",tPe,cI);Hn("vlSelectionResolve",rPe,cI);Hn("vlSelectionTuples",nPe);function Cl(e,t){const n={};let r;try{e=we(e)?e:de(e)+"",r=lI(e)}catch{ee("Expression parse error: "+e)}r.visit(s=>{if(s.type!==Vre)return;const o=s.callee.name,a=fie.visitors[o];a&&a(o,s.arguments,t,n)});const i=BP(r);return i.globals.forEach(s=>{const o=rie+s;!Se(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:et({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function f4e(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const d4e=da(["rule"]),DU=da(["group","image","rect"]);function h4e(e,t){let n="";return d4e[t]||(e.x2&&(e.x?(DU[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(DU[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function yI(e){return(e+"").toLowerCase()}function p4e(e){return yI(e)==="operator"}function g4e(e){return yI(e)==="collect"}function My(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function m4e(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var y4e={operator:(e,t)=>My(e,["_"],t.code),parameter:(e,t)=>My(e,["datum","_"],t.code),event:(e,t)=>My(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return My(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+de(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=h4e(r,n),i+="return m;",My(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(de).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),m4e(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function v4e(e){const t=this;p4e(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function b4e(e){const t=this;if(e.params){const n=t.get(e.id);n||ee("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function x4e(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=te(i)?i.map(s=>NU(s,n,t)):NU(i,n,t)}return t}function NU(e,t,n){if(!e||!ve(e))return e;for(let r=0,i=IU.length,s;r<i;++r)if(s=IU[r],Se(e,s.key))return s.parse(e,t,n);return e}var IU=[{key:"$ref",parse:w4e},{key:"$key",parse:E4e},{key:"$expr",parse:S4e},{key:"$field",parse:C4e},{key:"$encode",parse:_4e},{key:"$compare",parse:k4e},{key:"$context",parse:$4e},{key:"$subflow",parse:A4e},{key:"$tupleid",parse:T4e}];function w4e(e,t){return t.get(e.$ref)||ee("Operator not defined: "+e.$ref)}function S4e(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ms(t.parameterExpression(e.$expr),e.$fields))}function E4e(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=ZM(e.$key,e.$flat,t.expr.codegen))}function C4e(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=wo(e.$field,e.$name,t.expr.codegen))}function k4e(e,t){const n="c:"+e.$compare+"_"+e.$order,r=xe(e.$compare).map(i=>i&&i.$tupleid?Me:i);return t.fn[n]||(t.fn[n]=QM(r,e.$order,t.expr.codegen))}function _4e(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ms(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function $4e(e,t){return t}function A4e(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>t.detach(o),a}}function T4e(){return Me}function R4e(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&ee("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function F4e(e){var t=this,n=ve(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||ee("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const P4e={skip:!0};function O4e(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function M4e(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],P4e)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(So).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function die(e,t,n,r){return new hie(e,t,n,r)}function hie(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||y4e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function LU(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}hie.prototype=LU.prototype={fork(){const e=new LU(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),g4e(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[yI(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:f4e,parseOperator:v4e,parseOperatorParameters:b4e,parseParameters:x4e,parseStream:R4e,parseUpdate:F4e,getState:O4e,setState:M4e};function D4e(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),pie(t,e.description()))}function pie(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function N4e(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const p3="default";function I4e(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:p3,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?we(i)?i:i.user:p3,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return we(r)||(i=r.item,r=r.user),UP(e,r&&r!==p3?r:i||r),i},{cursor:t})}function UP(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function TC(e,t){var n=e._runtime.data;return Se(n,t)||ee("Unrecognized data set: "+t),n[t]}function L4e(e,t){return arguments.length<2?TC(this,e).values.value:J_.call(this,e,op().remove(So).insert(t))}function J_(e,t){CJ(t)||ee("Second argument to changes must be a changeset.");const n=TC(this,e);return n.modified=!0,this.pulse(n.input,t)}function z4e(e,t){return J_.call(this,e,op().insert(t))}function j4e(e,t){return J_.call(this,e,op().remove(t))}function gie(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function mie(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Z_(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function B4e(e){var t=Z_(e),n=gie(e),r=mie(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function U4e(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=Z_(e),o=t.changedTouches?t.changedTouches[0]:t,s=z_(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=V4e(e,n,s),t}function V4e(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,l;if(o){for(l=t;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;we(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:di(e),item:di(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const zU="view",W4e="timer",H4e="window",q4e={trap:!1};function G4e(e){const t=et({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{te(r[s])&&(r[s]=da(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function yie(e,t,n,r){e._eventListeners.push({type:n,sources:xe(t),handler:r})}function X4e(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function u2(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ve(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Y4e(e,t,n){var r=this,i=new u_(n),s=function(u,c){r.runAsync(null,()=>{e===zU&&X4e(r,t)&&u.preventDefault(),i.receive(U4e(r,u,c))})},o;if(e===W4e)u2(r,"timer",t)&&r.timer(s,t);else if(e===zU)u2(r,"view",t)&&r.addEventListener(t,s,q4e);else if(e===H4e?u2(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&u2(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(t,s);yie(r,o,t,s)}return i}function jU(e){return e.item}function BU(e){return e.item.mark.source}function UU(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function K4e(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",jU),BU,UU(e)),this.on(this.events("view","pointerout",jU),BU,UU(t)),this}function Q4e(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Ps(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const J4e="vega-bind",Z4e="vega-bind-name",eOe="vega-bind-radio";function tOe(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=JM(r.debounce,i.update))),(r.input==null&&r.element?nOe:iOe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function nOe(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),yie(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(rOe(i))}}function rOe(e){return typeof Event<"u"?new Event(e):{type:e}}function iOe(e,t,n,r){const i=r.signal(n.signal),s=Ps("div",{class:J4e}),o=n.input==="radio"?s:s.appendChild(Ps("label"));o.appendChild(Ps("span",{class:Z4e},n.name||n.signal)),t.appendChild(s);let a=sOe;switch(n.input){case"checkbox":a=oOe;break;case"select":a=aOe;break;case"radio":a=lOe;break;case"range":a=uOe;break}a(e,o,n,i)}function sOe(e,t,n,r){const i=Ps("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function oOe(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Ps("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function aOe(e,t,n,r){const i=Ps("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};RC(o,r)&&(l.selected=!0),i.appendChild(Ps("option",l,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(RC(n.options[a],o)){i.selectedIndex=a;return}}}function lOe(e,t,n,r){const i=Ps("span",{class:eOe}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};RC(o,r)&&(l.checked=!0);const u=Ps("input",l);u.addEventListener("change",()=>e.update(o));const c=Ps("label",{},(s[a]||o)+"");return c.prepend(u),i.appendChild(c),u}),e.set=o=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)RC(a[u].value,o)&&(a[u].checked=!0)}}function uOe(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||vf(s,i,100),a=Ps("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const l=Ps("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function RC(e,t){return e===t||e+""==t+""}function vie(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,gie(e),mie(e),Z_(e),i,s).background(e.background())}function vI(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function cOe(e,t,n,r){const i=new r(e.loader(),vI(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Z_(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function fOe(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=j_(r);e=n._el=e?g3(n,e,!0):null,D4e(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||Sx,a=e?s.renderer:s.headless;return n._renderer=a?vie(n,n._renderer,e,a):null,n._handler=cOe(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=g3(n,t,!0):e.appendChild(Ps("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=g3(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{tOe(n,l.element||t,l)})),n}function g3(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const Dy=e=>+e||0,dOe=e=>({top:e,bottom:e,left:e,right:e});function VU(e){return ve(e)?{top:Dy(e.top),bottom:Dy(e.bottom),left:Dy(e.left),right:Dy(e.right)}:dOe(Dy(e))}async function bI(e,t,n,r){const i=j_(t),s=i&&i.headless;return s||ee("Unrecognized renderer type: "+t),await e.runAsync(),vie(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function hOe(e,t){e!==Hc.Canvas&&e!==Hc.SVG&&e!==Hc.PNG&&ee("Unrecognized image type: "+e);const n=await bI(this,e,t);return e===Hc.SVG?pOe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function pOe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function gOe(e,t){return(await bI(this,Hc.Canvas,e,t)).canvas()}async function mOe(e){return(await bI(this,Hc.SVG,e)).svg()}function yOe(e,t,n){return die(e,Rm,Jv,n).parse(t)}function vOe(e){var t=this._runtime.scales;return Se(t,e)||ee("Unrecognized scale or projection: "+e),t[e].value}var bie="width",xie="height",xI="padding",WU={skip:!0};function wie(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===xI?r.left+r.right:0)}function Sie(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===xI?r.top+r.bottom:0)}function bOe(e){var t=e._signals,n=t[bie],r=t[xie],i=t[xI];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=wie(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Sie(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function xOe(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(bie,n,WU),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(xie,r,WU),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function wOe(e){return this._runtime.getState(e||{data:SOe,signals:EOe,recurse:!0})}function SOe(e,t){return t.modified&&te(t.input.value)&&!e.startsWith("_:vega:_")}function EOe(e,t){return!(e==="parent"||t instanceof Rm.proxy)}function COe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function kOe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(n5e(n,t))}function _Oe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",$Oe(r))}function $Oe(e){return e==null?"":te(e)?Eie(e):ve(e)&&!ef(e)?AOe(e):e+""}function AOe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(te(n)?Eie(n):Cie(n))}).join(`
`)}function Eie(e){return"["+e.map(Cie).join(", ")+"]"}function Cie(e){return te(e)?"[…]":ve(e)&&!ef(e)?"{…}":e}function TOe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function kie(e,t){const n=this;if(t=t||{},jg.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=et({},e.locale,t.locale);n.locale(pJ(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Hc.Canvas,n._scenegraph=new bte;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||_Oe,n._redraw=!0,n._handler=new Sx().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=G4e(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=yOe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:et({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=wie(n,n._width),n._viewHeight=Sie(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,bOe(n),N4e(n),I4e(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function c2(e,t){return Se(e._signals,t)?e._signals[t]:ee("Unrecognized signal name: "+de(t))}function _ie(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function HU(e,t,n,r){let i=_ie(n,r);return i||(i=vI(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function qU(e,t,n){const r=_ie(t,n);return r&&t._targets.remove(r),e}he(kie,jg,{async evaluate(e,t,n){if(await jg.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,B4e(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&fS(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&pie(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=c2(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",VU(e)):VU(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(j_(e)||ee("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(jg.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(c2(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:xOe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=vI(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return HU(this,e,c2(this,e),t)},removeSignalListener(e,t){return qU(this,c2(this,e),t)},addDataListener(e,t){return HU(this,e,TC(this,e).values,t)},removeDataListener(e,t){return qU(this,TC(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=UP(this,null);this._globalCursor=!!e,t&&UP(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:kOe,events:Y4e,finalize:Q4e,hover:K4e,data:L4e,change:J_,insert:z4e,remove:j4e,scale:vOe,initialize:fOe,toImageURL:hOe,toCanvas:gOe,toSVG:mOe,getState:wOe,setState:COe,_watchPixelRatio:TOe});const ROe="view",FC="[",PC="]",$ie="{",Aie="}",FOe=":",Tie=",",POe="@",OOe=">",MOe=/[[\]{}]/,DOe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Rie,Fie;function Wf(e,t,n){return Rie=t||ROe,Fie=n||DOe,Pie(e.trim()).map(VP)}function NOe(e){return Fie[e]}function av(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Pie(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=av(e,i,Tie,FC+$ie,PC+Aie),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function VP(e){return e[0]==="["?IOe(e):LOe(e)}function IOe(e){const t=e.length;let n=1,r;if(n=av(e,n,PC,FC,PC),n===t)throw"Empty between selector: "+e;if(r=Pie(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==OOe)throw"Expected '>' after between selector: "+e;r=r.map(VP);const i=VP(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function LOe(e){const t={source:Rie},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,l,u;if(e[o-1]===Aie){if(a=e.lastIndexOf($ie),a>=0){try{r=zOe(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===POe&&(i=++a),l=av(e,a,FOe),l<o&&(n.push(e.substring(s,l).trim()),s=a=++l),a=av(e,a,FC),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=av(e,a,PC),a===o)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==FC)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||MOe.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):NOe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function zOe(e){const t=e.split(Tie);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function jOe(e){return ve(e)?e:{type:e||"pad"}}const Ny=e=>+e||0,BOe=e=>({top:e,bottom:e,left:e,right:e});function UOe(e){return ve(e)?e.signal?e:{top:Ny(e.top),bottom:Ny(e.bottom),left:Ny(e.left),right:Ny(e.right)}:BOe(Ny(e))}const mr=e=>ve(e)&&!te(e)?et({},e):{value:e};function GU(e,t,n,r){return n!=null?(ve(n)&&!te(n)||te(n)&&n.length&&ve(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function zr(e,t,n){for(const r in t)GU(e,r,t[r]);for(const r in n)GU(e,r,n[r],"update")}function j0(e,t,n){for(const r in t)n&&Se(n,r)||(e[r]=et(e[r]||{},t[r]));return e}function lg(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const wI="mark",SI="frame",EI="scope",VOe="axis",WOe="axis-domain",HOe="axis-grid",qOe="axis-label",GOe="axis-tick",XOe="axis-title",YOe="legend",KOe="legend-band",QOe="legend-entry",JOe="legend-gradient",Oie="legend-label",ZOe="legend-symbol",eMe="legend-title",tMe="title",nMe="title-text",rMe="title-subtitle";function iMe(e,t,n,r,i){const s={},o={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!lg(l,e)&&m3(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===SI?i.group:n===wI?et({},i.mark,i[t]):null;for(l in c)u=lg(l,e)||(l==="fill"||l==="stroke")&&(lg("fill",e)||lg("stroke",e)),u||m3(s,l,c[l]);xe(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)lg(h,e)||m3(s,h,d[h])}),e=et({},e);for(l in s)c=s[l],c.signal?(a=a||{})[l]=c:o[l]=c;return e.enter=et(o,e.enter),a&&(e.update=et(a,e.update)),e}function m3(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Mie=e=>we(e)?de(e):e.signal?`(${e.signal})`:Die(e);function e$(e){if(e.gradient!=null)return oMe(e);let t=e.signal?`(${e.signal})`:e.color?sMe(e.color):e.field!=null?Die(e.field):e.value!==void 0?de(e.value):void 0;return e.scale!=null&&(t=aMe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${TS(e.exponent)})`),e.mult!=null&&(t+=`*${TS(e.mult)}`),e.offset!=null&&(t+=`+${TS(e.offset)}`),e.round&&(t=`round(${t})`),t}const f2=(e,t,n,r)=>`(${e}(${[t,n,r].map(e$).join(",")})+'')`;function sMe(e){return e.c?f2("hcl",e.h,e.c,e.l):e.h||e.s?f2("hsl",e.h,e.s,e.l):e.l||e.a?f2("lab",e.l,e.a,e.b):e.r||e.g||e.b?f2("rgb",e.r,e.g,e.b):null}function oMe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:de(n));for(;t.length&&yt(t)==null;)t.pop();return t.unshift(Mie(e.gradient)),`gradient(${t.join(",")})`}function TS(e){return ve(e)?"("+e$(e)+")":e}function Die(e){return Nie(ve(e)?e:{datum:e})}function Nie(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):ee("Invalid field reference: "+de(e));return e.signal||(r=we(r)?Tl(r).map(de).join("]["):Nie(r)),t+"["+r+"]"}function aMe(e,t){const n=Mie(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+TS(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function lMe(e){let t="";return e.forEach(n=>{const r=e$(n);t+=n.test?`(${n.test})?${r}:`:r}),yt(t)===":"&&(t+="null"),t}function Iie(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=iMe(e,t,n,r,i.config);for(const a in e)o[a]=uMe(e[a],t,s,i);return s}function uMe(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=fMe(cMe(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function cMe(e){return te(e)?lMe(e):e$(e)}function fMe(e,t,n,r){const i=Cl(e,t);return i.$fields.forEach(s=>r[s]=1),et(n,i.$params),i.$expr}const dMe="outer",hMe=["value","update","init","react","bind"];function XU(e,t){ee(e+' for "outer" push: '+de(t))}function Lie(e,t){const n=e.name;if(e.push===dMe)t.signals[n]||XU("No prior signal definition",n),hMe.forEach(r=>{e[r]!==void 0&&XU("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function WP(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function t$(e,t,n,r){return new WP(e,t,n,r)}function OC(e,t){return t$("operator",e,t)}function Oe(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Zv(e,t){return t?{$field:e,$name:t}:{$field:e}}const HP=Zv("key");function YU(e,t){return{$compare:e,$order:t}}function pMe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const gMe="ascending",mMe="descending";function yMe(e){return ve(e)?(e.order===mMe?"-":"+")+n$(e.op,e.field):""}function n$(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const CI="scope",qP="view";function sr(e){return e&&e.signal}function vMe(e){return e&&e.expr}function RS(e){if(sr(e))return!0;if(ve(e)){for(const t in e)if(RS(e[t]))return!0}return!1}function qo(e,t){return e??t}function uh(e){return e&&e.signal||e}const KU="timer";function eb(e,t){return(e.merge?xMe:e.stream?wMe:e.type?SMe:ee("Invalid stream specification: "+de(e)))(e,t)}function bMe(e){return e===CI?qP:e||qP}function xMe(e,t){const n=e.merge.map(i=>eb(i,t)),r=kI({merge:n},e,t);return t.addStream(r).id}function wMe(e,t){const n=eb(e.stream,t),r=kI({stream:n},e,t);return t.addStream(r).id}function SMe(e,t){let n;e.type===KU?(n=t.event(KU,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(bMe(e.source),e.type);const r=kI({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function kI(e,t,n){let r=t.between;return r&&(r.length!==2&&ee('Stream "between" parameter must have 2 entries: '+de(t)),e.between=[eb(r[0],n),eb(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(EMe(t.marktype,t.markname,t.markrole)),t.source===CI&&r.push("inScope(event.item)"),r.length&&(e.filter=Cl("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function EMe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const CMe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function kMe(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||ee("Signal update missing events specification."),we(s)&&(s=Wf(s,t.isSubscope()?CI:qP)),s=xe(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[$Me(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&ee("Signal encode and update are mutually exclusive."),o="encode(item(),"+de(r)+")"),i.update=we(o)?Cl(o,t):o.expr!=null?Cl(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:CMe,$params:{$value:t.signalRef(o.signal)}}:ee("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(et(_Me(l,t),i)))}function _Me(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):eb(e,t)}}function $Me(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function AMe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?ee("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Cl(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>kMe(i,t,n.id))}const Xt=e=>(t,n,r)=>t$(e,n,t||void 0,r),zie=Xt("aggregate"),TMe=Xt("axisticks"),jie=Xt("bound"),Ca=Xt("collect"),QU=Xt("compare"),RMe=Xt("datajoin"),Bie=Xt("encode"),FMe=Xt("expression"),PMe=Xt("facet"),OMe=Xt("field"),MMe=Xt("key"),DMe=Xt("legendentries"),NMe=Xt("load"),IMe=Xt("mark"),LMe=Xt("multiextent"),zMe=Xt("multivalues"),jMe=Xt("overlap"),BMe=Xt("params"),Uie=Xt("prefacet"),UMe=Xt("projection"),VMe=Xt("proxy"),WMe=Xt("relay"),Vie=Xt("render"),HMe=Xt("scale"),cp=Xt("sieve"),qMe=Xt("sortitems"),Wie=Xt("viewlayout"),GMe=Xt("values");let XMe=0;const Hie={min:"min",max:"max",count:"sum"};function YMe(e,t){const n=e.type||"linear";Fee(n)||ee("Unrecognized scale type: "+de(n)),t.addScale(e.name,{type:n,domain:void 0})}function KMe(e,t){const n=t.getScale(e.name).params;let r;n.domain=qie(e.domain,e,t),e.range!=null&&(n.range=Xie(e,t,n)),e.interpolate!=null&&oDe(e.interpolate,n),e.nice!=null&&(n.nice=sDe(e.nice,t)),e.bins!=null&&(n.bins=iDe(e.bins,t));for(r in e)Se(n,r)||r==="name"||(n[r]=po(e[r],t))}function po(e,t){return ve(e)?e.signal?t.signalRef(e.signal):ee("Unsupported object: "+de(e)):e}function FS(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>po(n,t))}function r$(e){ee("Can not find data set: "+de(e))}function qie(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ee("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(te(e)?QMe:e.fields?ZMe:JMe)(e,t,n)}function QMe(e,t,n){return e.map(r=>po(r,n))}function JMe(e,t,n){const r=n.getData(e.data);return r||r$(e.data),Dm(t.type)?r.valuesRef(n,e.field,Gie(e.sort,!1)):Mee(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function ZMe(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=we(o)?{data:r,field:o}:te(o)||o.signal?eDe(o,n):o,s.push(o),s),[]);return(Dm(t.type)?tDe:Mee(t.type)?nDe:rDe)(e,n,i)}function eDe(e,t){const n="_:vega:_"+XMe++,r=Ca({});if(te(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+de(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,cp({})]),{data:n,field:"data"}}function tDe(e,t,n){const r=Gie(e.sort,!0);let i,s;const o=n.map(u=>{const c=t.getData(u.data);return c||r$(u.data),c.countsRef(t,u.field,r)}),a={groupby:HP,pulse:o};r&&(i=r.op||"count",s=r.field?n$(i,r.field):"count",a.ops=[Hie[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(zie(a));const l=t.add(Ca({pulse:Oe(i)}));return s=t.add(GMe({field:HP,sort:t.sortRef(r),pulse:Oe(l)})),Oe(s)}function Gie(e,t){return e&&(!e.field&&!e.op?ve(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ee("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Hie[e.op]&&ee("Multiple domain scales can not be sorted using "+e.op)),e}function nDe(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||r$(i.data),s.domainRef(t,i.field)});return Oe(t.add(zMe({values:r})))}function rDe(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||r$(i.data),s.extentRef(t,i.field)});return Oe(t.add(LMe({extents:r})))}function iDe(e,t){return e.signal||te(e)?FS(e,t):t.objectProperty(e)}function sDe(e,t){return e.signal?t.signalRef(e.signal):ve(e)?{interval:po(e.interval),step:po(e.step)}:po(e)}function oDe(e,t){t.interpolate=po(e.type||e),e.gamma!=null&&(t.interpolateGamma=po(e.gamma))}function Xie(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(we(i)){if(r&&Se(r,i))return e=et({},e,{range:r[i]}),Xie(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Dm(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ee("Unrecognized scale range value: "+de(i))}else if(i.scheme){n.scheme=te(i.scheme)?FS(i.scheme,t):po(i.scheme,t),i.extent&&(n.schemeExtent=FS(i.extent,t)),i.count&&(n.schemeCount=po(i.count,t));return}else if(i.step){n.rangeStep=po(i.step,t);return}else{if(Dm(e.type)&&!te(i))return qie(i,e,t);te(i)||ee("Unsupported range type: "+de(i))}return i.map(s=>(te(s)?FS:po)(s,t))}function aDe(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=GP(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=GP(n[i],i,t));t.addProjection(e.name,r)}function GP(e,t,n){return te(e)?e.map(r=>GP(r,t,n)):ve(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ee("Unsupported parameter object: "+de(e)):e}const ka="top",B0="left",U0="right",_f="bottom",Yie="center",lDe="vertical",uDe="start",cDe="middle",fDe="end",XP="index",_I="label",dDe="offset",Wm="perc",hDe="perc2",vo="value",Fx="guide-label",$I="guide-title",pDe="group-title",gDe="group-subtitle",JU="symbol",PS="gradient",YP="discrete",KP="size",mDe="shape",yDe="fill",vDe="stroke",bDe="strokeWidth",xDe="strokeDash",wDe="opacity",AI=[KP,mDe,yDe,vDe,bDe,xDe,wDe],Px={name:1,style:1,interactive:1},xt={value:0},bo={value:1},i$="group",Kie="rect",TI="rule",SDe="symbol",fp="text";function tb(e){return e.type=i$,e.interactive=e.interactive||!1,e}function ys(e,t){const n=(r,i)=>qo(e[r],qo(t[r],i));return n.isVertical=r=>lDe===qo(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>qo(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>qo(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>qo(e.columns,qo(t.columns,+n.isVertical(!0))),n}function Qie(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function EDe(e,t,n){const r=t.config.style[n];return r&&r[e]}function s$(e,t,n){return`item.anchor === '${uDe}' ? ${e} : item.anchor === '${fDe}' ? ${t} : ${n}`}const RI=s$(de(B0),de(U0),de(Yie));function CDe(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ve(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Jie(e,t){return t?e?ve(e)?Object.assign({},e,{offset:Jie(e.offset,t)}):{value:e,offset:t}:t:e}function js(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=j0(e.encode,t,Px)):e.interactive=!1,e}function kDe(e,t,n,r){const i=ys(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let l,u,c,f,d;s?(u=[0,1],c=[0,0],f=o,d=a):(u=[0,0],c=[1,0],f=a,d=o);const h={enter:l={opacity:xt,x:xt,y:xt,width:mr(f),height:mr(d)},update:et({},l,{opacity:bo,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:xt}};return zr(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),js({type:Kie,role:JOe,encode:h},r)}function _De(e,t,n,r,i){const s=ys(e,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,c,f,d,h="";o?(u="y",f="y2",c="x",d="width",h="1-"):(u="x",f="x2",c="y",d="height");const p={opacity:xt,fill:{scale:t,field:vo}};p[u]={signal:h+"datum."+Wm,mult:l},p[c]=xt,p[f]={signal:h+"datum."+hDe,mult:l},p[d]=mr(a);const g={enter:p,update:et({},p,{opacity:bo}),exit:{opacity:xt}};return zr(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),js({type:Kie,role:KOe,key:vo,from:i,encode:g},r)}const $De=`datum.${Wm}<=0?"${B0}":datum.${Wm}>=1?"${U0}":"${Yie}"`,ADe=`datum.${Wm}<=0?"${_f}":datum.${Wm}>=1?"${ka}":"${cDe}"`;function ZU(e,t,n,r){const i=ys(e,t),s=i.isVertical(),o=mr(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,f,d,h="";const p={enter:u={opacity:xt},update:c={opacity:bo,text:{field:_I}},exit:{opacity:xt}};return zr(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:qo(e.labelLimit,t.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:ADe},f="y",d="x",h="1-"):(u.align=c.align={signal:$De},u.baseline={value:"top"},f="x",d="y"),u[f]=c[f]={signal:h+"datum."+Wm,mult:a},u[d]=c[d]=o,o.offset=qo(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+XP}:void 0,js({type:fp,role:Oie,style:Fx,key:vo,from:r,encode:p,overlap:l},n)}function TDe(e,t,n,r,i){const s=ys(e,t),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${dDe} : datum.${KP}`,h=u?mr(u):{field:KP},p=`datum.${XP}`,g=`max(1, ${i})`;let m,y,v,b,x;h.mult=.5,m={enter:y={opacity:xt,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:bo,x:y.x,y:y.y},exit:{opacity:xt}};let w=null,C=null;e.fill||(w=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),zr(m,{fill:s("symbolFillColor",w),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),AI.forEach(F=>{e[F]&&(v[F]=y[F]={scale:e[F],field:vo})});const S=js({type:SDe,role:ZOe,key:vo,from:f,clip:u?!0:void 0,encode:m},n.symbols),k=mr(c);k.offset=s("labelOffset"),m={enter:y={opacity:xt,x:{signal:d,offset:k},y:h},update:v={opacity:bo,text:{field:_I},x:y.x,y:y.y},exit:{opacity:xt}},zr(m,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const $=js({type:fp,role:Oie,style:Fx,key:vo,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:xt,height:u?mr(u):xt,opacity:xt},exit:{opacity:xt},update:v={opacity:bo,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,x={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,x={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:XP}},tb({role:EI,from:r,encode:j0(m,o,Px),marks:[S,$],name:l,interactive:a,sort:x})}function RDe(e,t){const n=ys(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const FI='item.orient === "left"',PI='item.orient === "right"',o$=`(${FI} || ${PI})`,FDe=`datum.vgrad && ${o$}`,PDe=s$('"top"','"bottom"','"middle"'),ODe=s$('"right"','"left"','"center"'),MDe=`datum.vgrad && ${PI} ? (${ODe}) : (${o$} && !(datum.vgrad && ${FI})) ? "left" : ${RI}`,DDe=`item._anchor || (${o$} ? "middle" : "start")`,NDe=`${FDe} ? (${FI} ? -90 : 90) : 0`,IDe=`${o$} ? (datum.vgrad ? (${PI} ? "bottom" : "top") : ${PDe}) : "top"`;function LDe(e,t,n,r){const i=ys(e,t),s={enter:{opacity:xt},update:{opacity:bo,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:xt}};return zr(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:DDe},angle:{signal:NDe},align:{signal:MDe},baseline:{signal:IDe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),js({type:fp,role:eMe,style:$I,from:r,encode:s},n)}function zDe(e,t){let n;return ve(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+eV(e.path)+")":e.sphere&&(n="geoShape("+eV(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function eV(e){return ve(e)&&e.signal?e.signal:de(e)}function Zie(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===i$?EI:t||wI}function jDe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Zie(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function BDe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function OI(e,t){const n=$J(e.type);n||ee("Unrecognized transform type: "+de(e.type));const r=t$(n.type.toLowerCase(),null,ese(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function ese(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=UDe(o,t,n)}return r}function UDe(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return VDe(e,t,n);if(i===void 0){e.required&&ee("Missing required "+de(t.type)+" parameter: "+de(e.name));return}else{if(r==="param")return WDe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!sr(i)?i.map(s=>tV(e,s,n)):tV(e,i,n)}function tV(e,t,n){const r=e.type;if(sr(t))return rV(r)?ee("Expression references can not be signals."):y3(r)?n.fieldRef(t):iV(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||y3(r);return i&&HDe(t)?n.exprRef(t.expr,t.as):i&&qDe(t)?Zv(t.field,t.as):rV(r)?Cl(t,n):GDe(r)?Oe(n.getData(t).values):y3(r)?Zv(t):iV(r)?n.compareRef(t):t}}function VDe(e,t,n){return we(t.from)||ee('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function WDe(e,t,n){const r=t[e.name];return e.array?(te(r)||ee("Expected an array of sub-parameters. Instead: "+de(r)),r.map(i=>nV(e,i,n))):nV(e,r,n)}function nV(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||ee("Unsupported parameter: "+de(t));const s=et(ese(i,t,n),i.key);return Oe(n.add(BMe(s)))}const HDe=e=>e&&e.expr,qDe=e=>e&&e.field,GDe=e=>e==="data",rV=e=>e==="expr",y3=e=>e==="field",iV=e=>e==="compare";function XDe(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||ee("Only group marks can be faceted."),r.field!=null?o=a=OS(r,n):(e.data?a=Oe(n.getData(e.data).aggregate):(s=OI(et({type:"aggregate",groupby:xe(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=OS(r,n),o=a=Oe(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Oe(n.add(Ca(null,[{}]))),o||(o=OS(e,n)),{key:i,pulse:o,parent:a}}function OS(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Oe(t.getData(e.data).output)}function Oh(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Oh.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Oe(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Oh(e,s,i,r,o)};function tse(e){return we(e)?e:null}function sV(e,t,n){const r=n$(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Iy(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),l=yMe(s);let u=tse(i),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const d=s?{field:HP,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Oe(t.output)};l&&(d.sort=e.sortRef(s)),f=e.add(t$(r,void 0,d)),o&&(t.index[i]=f),c=Oe(f),u!=null&&(a[u]=c)}return c}Oh.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=tse(t);let o,a,l;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&sV(e,o.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Oe(r.output)},n&&n.field&&sV(e,l,n),a=e.add(zie(l)),o=e.add(Ca({pulse:Oe(a)})),o={agg:a,ref:Oe(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Oe(this.values)},extentRef(e,t){return Iy(e,this,"extent","extent",t,!1)},domainRef(e,t){return Iy(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Iy(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Iy(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Iy(e,this,"indata","tupleindex",t,!0,!0)}};function YDe(e,t,n){const r=e.from.facet,i=r.name,s=OS(r,t);let o;r.name||ee("Facet must have a name: "+de(r)),r.data||ee("Facet must reference a data set: "+de(r)),r.field?o=t.add(Uie({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(PMe({key:t.keyRef(r.groupby),group:Oe(t.proxy(n.parent)),pulse:s})):ee("Facet must specify groupby or field: "+de(r));const a=t.fork(),l=a.add(Ca()),u=a.add(cp({pulse:Oe(l)}));a.addData(i,new Oh(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function KDe(e,t,n){const r=t.add(Uie({pulse:n.pulse})),i=t.fork();i.add(cp()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function nse(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,l=t.add(OC()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Cl(u,t);l.update=c.$expr,l.params=c.$params}function a$(e,t){const n=Zie(e),r=e.type===i$,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===EI||n===SI,a,l,u,c,f,d,h;const p=n===wI||o||i,g=XDe(e.from,r,t);l=t.add(RMe({key:g.key||(e.key?Zv(e.key):void 0),pulse:g.pulse,clean:!r}));const m=Oe(l);l=u=t.add(Ca({pulse:m})),l=t.add(IMe({markdef:jDe(e),interactive:BDe(e.interactive,t),clip:zDe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Oe(l)}));const y=Oe(l);l=c=t.add(Bie(Iie(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const S=OI(C,t),k=S.metadata;(k.generates||k.changes)&&ee("Mark transforms should not generate new data."),k.nomod||(c.params.mod=!0),S.params.pulse=Oe(l),t.add(l=S)}),e.sort&&(l=t.add(qMe({sort:t.compareRef(e.sort),pulse:Oe(l)})));const v=Oe(l);(i||o)&&(o=t.add(Wie({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Oe(o));const b=t.add(jie({mark:y,pulse:d||v}));h=Oe(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,m),i?YDe(e,t,g):p?KDe(e,t,g):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=QDe(s,h,t));const x=t.add(Vie({pulse:h})),w=t.add(cp({pulse:Oe(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Oh(t,u,x,w)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&ee("Marks only support modify triggers."),nse(C,t,f)}))}function QDe(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:sr(s)?n.signalRef(s.signal):s,method:sr(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=sr(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Oe(n.add(jMe(o)))}function JDe(e,t){const n=t.config.legend,r=e.encode||{},i=ys(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let c=0,f,d,h;AI.forEach(b=>e[b]?(u[b]=e[b],c=c||e[b]):0),c||ee("Missing valid scale for legend.");const p=ZDe(e,t.scaleType(c)),g={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},m=Oe(t.add(Ca(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},v=Oe(t.add(DMe(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===PS?(h=[kDe(e,c,n,r.gradient),ZU(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${uh(i.gradientLength())})/100))`)):p===YP?h=[_De(e,c,n,r.gradient,v),ZU(e,n,r.labels,v)]:(f=RDe(e,n),h=[TDe(e,n,r,v,uh(f.columns))],d.size=n6e(e,t,h[0].marks)),h=[tb({role:QOe,from:m,encode:y,marks:h,layout:f,interactive:a})],g.title&&h.push(LDe(e,n,r.title,m)),a$(tb({role:YOe,from:m,encode:j0(t6e(i,e,n),s,Px),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:l}),t)}function ZDe(e,t){let n=e.type||JU;return!e.type&&e6e(e)===1&&(e.fill||e.stroke)&&(n=P6(t)?PS:BF(t)?YP:JU),n!==PS?n:BF(t)?YP:PS}function e6e(e){return AI.reduce((t,n)=>t+(e[n]?1:0),0)}function t6e(e,t,n){const r={enter:{},update:{}};return zr(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function n6e(e,t,n){const r=uh(oV("size",e,n)),i=uh(oV("strokeWidth",e,n)),s=uh(r6e(n[1].encode,t,Fx));return Cl(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function oV(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Qie(e,n[0].encode)}function r6e(e,t,n){return Qie("fontSize",e)||EDe("fontSize",t,n)}const i6e=`item.orient==="${B0}"?-90:item.orient==="${U0}"?90:0`;function s6e(e,t){e=we(e)?{text:e}:e;const n=ys(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,l=[],u={},c=Oe(t.add(Ca(null,[u])));return l.push(l6e(e,n,o6e(e),c)),e.subtitle&&l.push(u6e(e,n,r.subtitle,c)),a$(tb({role:tMe,from:c,encode:a6e(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function o6e(e){const t=e.encode;return t&&t.title||et({name:e.name,interactive:e.interactive,style:e.style},t)}function a6e(e,t){const n={enter:{},update:{}};return zr(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:RI},angle:{signal:i6e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),j0(n,t,Px)}function l6e(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return zr(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),js({type:fp,role:nMe,style:pDe,from:r,encode:o},n)}function u6e(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return zr(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),js({type:fp,role:rMe,style:gDe,from:r,encode:o},n)}function c6e(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(OI(r,t))}),e.on&&e.on.forEach(r=>{nse(r,t,e.name)}),t.addDataPipeline(e.name,f6e(e,t,n))}function f6e(e,t,n){const r=[];let i=null,s=!1,o=!1,a,l,u,c,f;for(e.values?sr(e.values)||RS(e.format)?(r.push(aV(t,e)),r.push(i=hd())):r.push(i=hd({$ingest:e.values,$format:e.format})):e.url?RS(e.url)||RS(e.format)?(r.push(aV(t,e)),r.push(i=hd())):r.push(i=hd({$request:e.url,$format:e.format})):e.source&&(i=a=xe(e.source).map(d=>Oe(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!i&&!f.source&&r.push(i=hd()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(u=a.length-1,r[0]=WMe({derive:s,pulse:u?a:a[0]}),(s||u)&&r.splice(1,0,hd())),i||r.push(hd()),r.push(cp({})),r}function hd(e){const t=Ca({},e);return t.metadata={source:!0},t}function aV(e,t){return NMe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const rse=e=>e===_f||e===ka,l$=(e,t,n)=>sr(e)?g6e(e.signal,t,n):e===B0||e===ka?t:n,yr=(e,t,n)=>sr(e)?h6e(e.signal,t,n):rse(e)?t:n,la=(e,t,n)=>sr(e)?p6e(e.signal,t,n):rse(e)?n:t,ise=(e,t,n)=>sr(e)?m6e(e.signal,t,n):e===ka?{value:t}:{value:n},d6e=(e,t,n)=>sr(e)?y6e(e.signal,t,n):e===U0?{value:t}:{value:n},h6e=(e,t,n)=>sse(`${e} === '${ka}' || ${e} === '${_f}'`,t,n),p6e=(e,t,n)=>sse(`${e} !== '${ka}' && ${e} !== '${_f}'`,t,n),g6e=(e,t,n)=>MI(`${e} === '${B0}' || ${e} === '${ka}'`,t,n),m6e=(e,t,n)=>MI(`${e} === '${ka}'`,t,n),y6e=(e,t,n)=>MI(`${e} === '${U0}'`,t,n),sse=(e,t,n)=>(t=t!=null?mr(t):t,n=n!=null?mr(n):n,lV(t)&&lV(n)?(t=t?t.signal||de(t.value):null,n=n?n.signal||de(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[et({test:e},t)].concat(n||[])),lV=e=>e==null||Object.keys(e).length===1,MI=(e,t,n)=>({signal:`${e} ? (${mg(t)}) : (${mg(n)})`}),v6e=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${B0}' ? (${mg(r)}) : `:"")+(n!=null?`${e} === '${_f}' ? (${mg(n)}) : `:"")+(i!=null?`${e} === '${U0}' ? (${mg(i)}) : `:"")+(t!=null?`${e} === '${ka}' ? (${mg(t)}) : `:"")+"(null)"}),mg=e=>sr(e)?e.signal:e==null?null:de(e),b6e=(e,t)=>t===0?0:sr(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Wg=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Xp(e,t,n,r){let i;if(t&&Se(t,e))return t[e];if(Se(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[$I][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Fx][i]}return null}function uV(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function x6e(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,l,u;if(sr(o)){const f=uV([n.axisX,n.axisY]),d=uV([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of f)a[u]=yr(o,Xp(u,n.axisX,i,r),Xp(u,n.axisY,i,r));l={};for(u of d)l[u]=v6e(o.signal,Xp(u,n.axisTop,i,r),Xp(u,n.axisBottom,i,r),Xp(u,n.axisLeft,i,r),Xp(u,n.axisRight,i,r))}else a=o===ka||o===_f?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?et({},i,a,l,s):i}function w6e(e,t,n,r){const i=ys(e,t),s=e.orient;let o,a;const l={enter:o={opacity:xt},update:a={opacity:bo},exit:{opacity:xt}};zr(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=cV(e,0),c=cV(e,1);return o.x=a.x=yr(s,u,xt),o.x2=a.x2=yr(s,c),o.y=a.y=la(s,u,xt),o.y2=a.y2=la(s,c),js({type:TI,role:WOe,from:r,encode:l},n)}function cV(e,t){return{scale:e.scale,range:t}}function S6e(e,t,n,r,i){const s=ys(e,t),o=e.orient,a=e.gridScale,l=l$(o,1,-1),u=E6e(e.offset,l);let c,f,d;const h={enter:c={opacity:xt},update:d={opacity:bo},exit:f={opacity:xt}};zr(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:vo,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=yr(o,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:et(g,{mult:l,offset:u});return c.x=d.x=yr(o,p,m),c.y=d.y=la(o,p,m),c.x2=d.x2=la(o,y),c.y2=d.y2=yr(o,y),f.x=yr(o,p),f.y=la(o,p),js({type:TI,role:HOe,key:vo,from:r,encode:h},n)}function E6e(e,t){if(t!==1)if(!ve(e))e=sr(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=et({},e);for(;n.mult!=null;)if(ve(n.mult))n=n.mult=et({},n.mult);else return n.mult=sr(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function C6e(e,t,n,r,i,s){const o=ys(e,t),a=e.orient,l=l$(a,-1,1);let u,c,f;const d={enter:u={opacity:xt},update:f={opacity:bo},exit:c={opacity:xt}};zr(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=mr(i);h.mult=l;const p={scale:e.scale,field:vo,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=u.y=yr(a,xt,p),f.y2=u.y2=yr(a,h),c.x=yr(a,p),f.x=u.x=la(a,xt,p),f.x2=u.x2=la(a,h),c.y=la(a,p),js({type:TI,role:GOe,key:vo,from:r,encode:d},n)}function v3(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function k6e(e,t,n,r,i,s){const o=ys(e,t),a=e.orient,l=e.scale,u=l$(a,-1,1),c=uh(o("labelFlush")),f=uh(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,g;const m=mr(i);m.mult=u,m.offset=mr(o("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:vo,band:.5,offset:Jie(s.offset,o("labelOffset"))},v=yr(a,p?v3(l,c,'"left"','"right"','"center"'):{value:"center"},d6e(a,"left","right")),b=yr(a,ise(a,"bottom","top"),p?v3(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=v3(l,c,`-(${f})`,f,0);p=p&&f;const w={opacity:xt,x:yr(a,y,m),y:la(a,y,m)},C={enter:w,update:g={opacity:bo,text:{field:_I},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:xt,x:w.x,y:w.y}};zr(C,{dx:!d&&p?yr(a,x):null,dy:!h&&p?la(a,x):null}),zr(C,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let k=o("labelOverlap");return k=k||S?{separation:o("labelSeparation"),method:k,order:"datum.index",bound:S?{scale:l,orient:a,tolerance:S}:null}:void 0,g.align!==v&&(g.align=Wg(g.align,v)),g.baseline!==b&&(g.baseline=Wg(g.baseline,b)),js({type:fp,role:qOe,style:Fx,key:vo,from:r,encode:C,overlap:k},n)}function _6e(e,t,n,r){const i=ys(e,t),s=e.orient,o=l$(s,-1,1);let a,l;const u={enter:a={opacity:xt,anchor:mr(i("titleAnchor",null)),align:{signal:RI}},update:l=et({},a,{opacity:bo,text:mr(e.title)}),exit:{opacity:xt}},c={signal:`lerp(range("${e.scale}"), ${s$(0,1,.5)})`};return l.x=yr(s,c),l.y=la(s,c),a.angle=yr(s,xt,b6e(o,90)),a.baseline=yr(s,ise(s,_f,ka),{value:_f}),l.angle=a.angle,l.baseline=a.baseline,zr(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),$6e(i,s,u,n),u.update.align=Wg(u.update.align,a.align),u.update.angle=Wg(u.update.angle,a.angle),u.update.baseline=Wg(u.update.baseline,a.baseline),js({type:fp,role:XOe,style:$I,from:r,encode:u},n)}function $6e(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=Wg(mr(a),n.update[l]),!1):!lg(l,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?mr(o):yr(t,mr(o),mr(s))}function A6e(e,t){const n=x6e(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,l=ys(e,n),u=CDe(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=Oe(t.add(Ca({},[c]))),d=Oe(t.add(TMe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(S6e(e,n,r.grid,d,u)),c.ticks&&(p=l("tickSize"),h.push(C6e(e,n,r.ticks,d,p,u))),c.labels&&(p=c.ticks?p:0,h.push(k6e(e,n,r.labels,d,p,u))),c.domain&&h.push(w6e(e,n,r.domain,f)),c.title&&h.push(_6e(e,n,r.title,f)),a$(tb({role:VOe,from:f,encode:j0(T6e(l,e),i,Px),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),t)}function T6e(e,t){const n={enter:{},update:{}};return zr(n,{orient:e("orient"),offset:e("offset")||0,position:qo(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function ose(e,t,n){const r=xe(e.signals),i=xe(e.scales);return n||r.forEach(s=>Lie(s,t)),xe(e.projections).forEach(s=>aDe(s,t)),i.forEach(s=>YMe(s,t)),xe(e.data).forEach(s=>c6e(s,t)),i.forEach(s=>KMe(s,t)),(n||r).forEach(s=>AMe(s,t)),xe(e.axes).forEach(s=>A6e(s,t)),xe(e.marks).forEach(s=>a$(s,t)),xe(e.legends).forEach(s=>JDe(s,t)),e.title&&s6e(e.title,t),t.parseLambdas(),t}const R6e=e=>j0({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function F6e(e,t){const n=t.config,r=Oe(t.root=t.add(OC())),i=P6e(e,n);i.forEach(u=>Lie(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Ca()),o=t.add(Bie(Iie(R6e(e.encode),i$,SI,e.style,t,{pulse:Oe(s)}))),a=t.add(Wie({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Oe(o)}));t.operators.pop(),t.pushState(Oe(o),Oe(a),null),ose(e,t,i),t.operators.push(a);let l=t.add(jie({mark:r,pulse:Oe(a)}));return l=t.add(Vie({pulse:Oe(l)})),l=t.add(cp({pulse:Oe(l)})),t.addData("root",new Oh(t,s,s,l)),t}function Ly(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function P6e(e,t){const n=o=>qo(e[o],t[o]),r=[Ly("background",n("background")),Ly("autosize",jOe(n("autosize"))),Ly("padding",UOe(n("padding"))),Ly("width",n("width")||0),Ly("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return xe(e.signals).forEach(o=>{Se(i,o.name)?o=et(i[o.name],o):r.push(o),s[o.name]=o}),xe(t.signals).forEach(o=>{!Se(s,o.name)&&!Se(i,o.name)&&r.push(o)}),r}function ase(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function fV(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}ase.prototype=fV.prototype={parse(e){return ose(e,this)},fork(){return new fV(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof WP?Oe(e):e;return this.add(VMe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Oe(this.add(cp({pulse:e})))),this._parent.push(t),this._lookup.push(n?Oe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return yt(this._parent)},encode(){return yt(this._encode)},lookup(){return yt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(we(e))return Zv(e,t);e.signal||ee("Unsupported field reference: "+de(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Oe(this.add(OMe(i)))}return r},compareRef(e){let t=!1;const n=s=>sr(s)?(t=!0,this.signalRef(s.signal)):vMe(s)?(t=!0,this.exprRef(s.expr)):s,r=xe(e.field).map(n),i=xe(e.order).map(n);return t?Oe(this.add(QU({fields:r,orders:i}))):YU(r,i)},keyRef(e,t){let n=!1;const r=s=>sr(s)?(n=!0,Oe(i[s.signal])):s,i=this.signals;return e=xe(e).map(r),n?Oe(this.add(MMe({fields:e,flat:t}))):pMe(e,t)},sortRef(e){if(!e)return e;const t=n$(e.op,e.field),n=e.order||gMe;return n.signal?Oe(this.add(QU({fields:t,orders:this.signalRef(n.signal)}))):YU(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Se(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ee("Duplicate signal name: "+de(e));const n=t instanceof WP?t:this.add(OC(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ee("Unrecognized signal name: "+de(e)),this.signals[e]},signalRef(e){return this.signals[e]?Oe(this.signals[e]):(Se(this.lambdas,e)||(this.lambdas[e]=this.add(OC(null))),Oe(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Cl(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ve(e)?e:this.signalRef(e.signal||DI(e))},exprRef(e,t){const n={expr:Cl(e,this)};return t&&(n.expr.$name=t),Oe(this.add(FMe(n)))},addBinding(e,t){this.bindings||ee("Nested signals do not support binding: "+de(e)),this.bindings.push(et({signal:e},t))},addScaleProj(e,t){Se(this.scales,e)&&ee("Duplicate scale or projection name: "+de(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,HMe(t))},addProjection(e,t){this.addScaleProj(e,UMe(t))},getScale(e){return this.scales[e]||ee("Unrecognized scale name: "+de(e)),this.scales[e]},scaleRef(e){return Oe(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Se(this.data,e)&&ee("Duplicate data set name: "+de(e)),this.data[e]=t},getData(e){return this.data[e]||ee("Undefined data set name: "+de(e)),this.data[e]},addDataPipeline(e,t){return Se(this.data,e)&&ee("Duplicate data set name: "+de(e)),this.addData(e,Oh.fromEntries(this,t))}};function DI(e){return(te(e)?O6e:M6e)(e)}function O6e(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ve(i)?i.signal||DI(i):de(i))}return n+"]"}function M6e(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+de(r)+":"+(ve(i)?i.signal||DI(i):de(i));return t+"}"}function D6e(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function N6e(e,t,n){return ve(e)||ee("Input Vega specification must be an object."),t=A0(D6e(),t,e.config),F6e(e,new ase(t,n)).toRuntime()}var I6e="5.30.0";et(Rm,z2e,u$e,B$e,_Te,x5e,G3e,_3e,Y3e,bRe,TRe,NRe);const lse=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Kn,CanvasHandler:Sx,CanvasRenderer:GE,DATE:us,DAY:ri,DAYOFYEAR:Sl,Dataflow:jg,Debug:KK,Error:Zk,EventStream:u_,Gradient:Yee,GroupItem:P_,HOURS:Is,Handler:rN,HybridHandler:jte,HybridRenderer:JF,Info:YK,Item:F_,MILLISECONDS:ga,MINUTES:Ls,MONTH:ai,Marks:zs,MultiPulse:mD,None:XK,Operator:Jt,Parameters:l_,Pulse:tf,QUARTER:ls,RenderType:Hc,Renderer:wx,ResourceLoader:nte,SECONDS:Eo,SVGHandler:$te,SVGRenderer:uN,SVGStringRenderer:zte,Scenegraph:bte,TIME_UNITS:oD,Transform:J,View:kie,WEEK:nr,Warn:qM,YEAR:Nr,accessor:ms,accessorFields:oi,accessorName:Dn,array:xe,ascending:n_,bandwidthNRD:xD,bin:RJ,bootstrapCI:FJ,boundClip:Kte,boundContext:yx,boundItem:GF,boundMark:gte,boundStroke:Uu,changeset:op,clampRange:aQ,codegenExpression:Jre,compare:QM,constant:di,cumulativeLogNormal:_D,cumulativeNormal:f_,cumulativeUniform:RD,dayofyear:IQ,debounce:JM,defaultLocale:fD,definition:$J,densityLogNormal:kD,densityNormal:wD,densityUniform:TD,domChild:tr,domClear:ao,domCreate:Vc,domFind:nN,dotbin:PJ,error:ee,expressionFunction:Hn,extend:et,extent:wl,extentIndex:lQ,falsy:vc,fastmap:R0,field:wo,flush:uQ,font:I_,fontFamily:xx,fontSize:Pl,format:cS,formatLocale:CE,formats:pD,hasOwnProperty:Se,id:Jb,identity:fi,inferType:mJ,inferTypes:yJ,ingest:Dt,inherits:he,inrange:fg,interpolate:O6,interpolateColors:T_,interpolateRange:Dee,intersect:qte,intersectBoxLine:dg,intersectPath:B6,intersectPoint:U6,intersectRule:ite,isArray:te,isBoolean:Lf,isDate:ef,isFunction:tt,isIterable:cQ,isNumber:_t,isObject:ve,isRegExp:fQ,isString:we,isTuple:o_,key:ZM,lerp:dQ,lineHeight:Ef,loader:i_,locale:pJ,logger:GM,lruCache:hQ,markup:lN,merge:pQ,mergeConfig:A0,multiLineOffset:Z6,one:$0,pad:gQ,panLinear:tQ,panLog:nQ,panPow:rQ,panSymlog:iQ,parse:N6e,parseExpression:lI,parseSelector:Wf,path:m_,pathCurves:L6,pathEqual:Qte,pathParse:Nm,pathRectangle:Jee,pathRender:Bv,pathSymbols:Qee,pathTrail:Zee,peek:yt,point:z_,projection:AN,quantileLogNormal:$D,quantileNormal:d_,quantileUniform:FD,quantiles:vD,quantizeInterpolator:Nee,quarter:sQ,quartiles:bD,get random(){return Co},randomInteger:Vwe,randomKDE:ED,randomLCG:Uwe,randomLogNormal:MJ,randomMixture:DJ,randomNormal:SD,randomUniform:NJ,read:xJ,regressionConstant:PD,regressionExp:LJ,regressionLinear:OD,regressionLoess:BJ,regressionLog:IJ,regressionPoly:jJ,regressionPow:zJ,regressionQuad:MD,renderModule:j_,repeat:f1,resetDefaultLocale:zxe,resetSVGClipId:tte,resetSVGDefIds:$_e,responseType:bJ,runtimeContext:die,sampleCurve:p_,sampleLogNormal:CD,sampleNormal:c_,sampleUniform:AD,scale:At,sceneEqual:cN,sceneFromJSON:yte,scenePickVisit:zE,sceneToJSON:mte,sceneVisit:ma,sceneZOrder:V6,scheme:M6,serializeXML:Dte,setHybridRendererOptions:E_e,setRandom:jwe,span:Zb,splitAccessPath:Tl,stringValue:de,textMetrics:Fs,timeBin:eJ,timeFloor:WQ,timeFormatLocale:Dv,timeInterval:P0,timeOffset:GQ,timeSequence:KQ,timeUnitSpecifier:NQ,timeUnits:aD,toBoolean:eD,toDate:tD,toNumber:ii,toSet:da,toString:nD,transform:AJ,transforms:Rm,truncate:mQ,truthy:So,tupleid:Me,typeParsers:RF,utcFloor:HQ,utcInterval:O0,utcOffset:XQ,utcSequence:QQ,utcdayofyear:jQ,utcquarter:oQ,utcweek:BQ,version:I6e,visitArray:Ec,week:LQ,writeConfig:T0,zero:Pc,zoomLinear:XM,zoomLog:YM,zoomPow:vE,zoomSymlog:KM},Symbol.toStringTag,{value:"Module"}));function L6e(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var z6e={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},j6e={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},B6e={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const U6e=Array.prototype.slice,pd=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,U6e.call(t,1))},V6e=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var W6e={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:V6e,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return pd("join",arguments)},indexof:function(){return pd("indexOf",arguments)},lastindexof:function(){return pd("lastIndexOf",arguments)},slice:function(){return pd("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return pd("substring",arguments,String)},split:function(){return pd("split",arguments,String)},replace:function(){return pd("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const H6e=["view","item","group","xy","x","y"],QP=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&QP.add(setImmediate);const q6e={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:z6e[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),QP.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||W6e[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>j6e[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>B6e[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,QP.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function zy(e,t,n,r,i,s){const o=a=>q6e[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,H6e.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var G6e={operator(e,t){const n=t.ast,r=e.functions;return i=>zy(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>zy(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>zy(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return zy(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const l=o.datum;let u=0,c;for(const f in r)c=zy(r[f].ast,i,a,l,void 0,o),o[f]!==c&&(o[f]=c,u=1);return n!=="rule"&&L6e(o,r,s),u}}};const X6e="vega-lite",Y6e='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',K6e="5.21.0",Q6e=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],J6e="https://vega.github.io/vega-lite/",Z6e="Vega-Lite is a concise high-level language for interactive visualization.",eNe=["vega","chart","visualization"],tNe="build/vega-lite.js",nNe="build/vega-lite.min.js",rNe="build/vega-lite.min.js",iNe="build/src/index",sNe="build/src/index.d.ts",oNe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},aNe=["bin","build","src","vega-lite*","tsconfig.json"],lNe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},uNe={type:"git",url:"https://github.com/vega/vega-lite.git"},cNe="BSD-3-Clause",fNe={url:"https://github.com/vega/vega-lite/issues"},dNe={"@babel/core":"^7.24.9","@babel/preset-env":"^7.25.0","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.6.0",rollup:"^4.19.1","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.3","ts-jest":"^29.2.3","ts-json-schema-generator":"^2.3.0",typescript:"~5.5.4","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.26.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},hNe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},pNe={vega:"^5.24.0"},gNe={node:">=18"},mNe="yarn@1.22.19",yNe={name:X6e,author:Y6e,version:K6e,collaborators:Q6e,homepage:J6e,description:Z6e,keywords:eNe,main:tNe,unpkg:nNe,jsdelivr:rNe,module:iNe,types:sNe,bin:oNe,files:aNe,scripts:lNe,repository:uNe,license:cNe,bugs:fNe,devDependencies:dNe,dependencies:hNe,peerDependencies:pNe,engines:gNe,packageManager:mNe};function NI(e){return le(e,"or")}function II(e){return le(e,"and")}function LI(e){return le(e,"not")}function MS(e,t){if(LI(e))MS(e.not,t);else if(II(e))for(const n of e.and)MS(n,t);else if(NI(e))for(const n of e.or)MS(n,t);else t(e)}function Hg(e,t){return LI(e)?{not:Hg(e.not,t)}:II(e)?{and:e.and.map(n=>Hg(n,t))}:NI(e)?{or:e.or.map(n=>Hg(n,t))}:t(e)}const Xe=structuredClone;function use(e){throw new Error(e)}function Hm(e,t){const n={};for(const r of t)Se(e,r)&&(n[r]=e[r]);return n}function ns(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Gt(e)).join(",")})`};function ft(e){if(_t(e))return e;const t=we(e)?e:Gt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function JP(e){return e===!1||e===null}function ot(e,t){return e.includes(t)}function qm(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function zI(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function cse(e,...t){for(const n of t)vNe(e,n??{});return e}function vNe(e,t){for(const n of oe(t))T0(e,n,t[n],!0)}function sl(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function P1(e,t){const n=oe(e),r=oe(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function fse(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function jI(e,t){for(const n of e)if(t.has(n))return!0;return!1}function ZP(e){const t=new Set;for(const n of e){const i=Tl(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function BI(e,t){return e===void 0||t===void 0?!0:jI(ZP(e),ZP(t))}function qt(e){return oe(e).length===0}const oe=Object.keys,Ir=Object.values,$f=Object.entries;function nb(e){return e===!0||e===!1}function yn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function lv(e,t){return LI(e)?`!(${lv(e.not,t)})`:II(e)?`(${e.and.map(n=>lv(n,t)).join(") && (")})`:NI(e)?`(${e.or.map(n=>lv(n,t)).join(") || (")})`:t(e)}function MC(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&MC(e[n],t)&&delete e[n],qt(e)}function Ox(e){return e.charAt(0).toUpperCase()+e.substr(1)}function UI(e,t="datum"){const n=Tl(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(de).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function dse(e,t="datum"){return`${t}[${de(Tl(e).join("."))}]`}function bNe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function _o(e){return`${Tl(e).map(bNe).join("\\.")}`}function Mh(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function V0(e){return`${Tl(e).join(".")}`}function Gm(e){return e?Tl(e).length:0}function Vn(...e){return e.find(t=>t!==void 0)}let hse=42;function pse(e){const t=++hse;return e?String(e)+t:t}function xNe(){hse=42}function gse(e){return mse(e)?e:`__${e}`}function mse(e){return e.startsWith("__")}function rb(e){if(e!==void 0)return(e%360+360)%360}function u$(e){return _t(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const dV=Object.getPrototypeOf(structuredClone({}));function Ts(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Ts(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Ts(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==dV.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==dV.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Ts(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Gt(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return t.splice(o,1),`{${s}}`}(e)}function le(e,t){return ve(e)&&Se(e,t)&&e[t]!==void 0}const bu="row",xu="column",c$="facet",vn="x",Sr="y",_a="x2",Nl="y2",Hf="xOffset",W0="yOffset",$a="radius",Wu="radius2",Fo="theta",Hu="theta2",Aa="latitude",Ta="longitude",Ra="latitude2",$o="longitude2",fs="color",Il="fill",Ll="stroke",ds="shape",qu="size",dp="angle",Gu="opacity",qf="fillOpacity",Gf="strokeOpacity",Xf="strokeWidth",Yf="strokeDash",Mx="text",Xm="order",Dx="detail",f$="key",Dh="tooltip",d$="href",h$="url",p$="description",wNe={x:1,y:1,x2:1,y2:1},yse={theta:1,theta2:1,radius:1,radius2:1};function vse(e){return Se(yse,e)}const VI={longitude:1,longitude2:1,latitude:1,latitude2:1};function bse(e){switch(e){case Aa:return"y";case Ra:return"y2";case Ta:return"x";case $o:return"x2"}}function xse(e){return Se(VI,e)}const SNe=oe(VI),WI={...wNe,...yse,...VI,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function qg(e){return e===fs||e===Il||e===Ll}const wse={row:1,column:1,facet:1},go=oe(wse),HI={...WI,...wse},ENe=oe(HI),{order:ggt,detail:mgt,tooltip:ygt,...CNe}=HI,{row:vgt,column:bgt,facet:xgt,...kNe}=CNe;function _Ne(e){return Se(kNe,e)}function Sse(e){return Se(HI,e)}const $Ne=[_a,Nl,Ra,$o,Hu,Wu];function Ese(e){return hp(e)!==e}function hp(e){switch(e){case _a:return vn;case Nl:return Sr;case Ra:return Aa;case $o:return Ta;case Hu:return Fo;case Wu:return $a}return e}function Af(e){if(vse(e))switch(e){case Fo:return"startAngle";case Hu:return"endAngle";case $a:return"outerRadius";case Wu:return"innerRadius"}return e}function zl(e){switch(e){case vn:return _a;case Sr:return Nl;case Aa:return Ra;case Ta:return $o;case Fo:return Hu;case $a:return Wu}}function hs(e){switch(e){case vn:case _a:return"width";case Sr:case Nl:return"height"}}function Cse(e){switch(e){case vn:return"xOffset";case Sr:return"yOffset";case _a:return"x2Offset";case Nl:return"y2Offset";case Fo:return"thetaOffset";case $a:return"radiusOffset";case Hu:return"theta2Offset";case Wu:return"radius2Offset"}}function qI(e){switch(e){case vn:return"xOffset";case Sr:return"yOffset"}}function ANe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const TNe=oe(WI),{x:wgt,y:Sgt,x2:Egt,y2:Cgt,xOffset:kgt,yOffset:_gt,latitude:$gt,longitude:Agt,latitude2:Tgt,longitude2:Rgt,theta:Fgt,theta2:Pgt,radius:Ogt,radius2:Mgt,...GI}=WI,RNe=oe(GI),XI={x:1,y:1},Xu=oe(XI);function Wn(e){return Se(XI,e)}const YI={theta:1,radius:1},FNe=oe(YI);function g$(e){return e==="width"?vn:Sr}const kse={xOffset:1,yOffset:1};function Nx(e){return Se(kse,e)}const{text:Dgt,tooltip:Ngt,href:Igt,url:Lgt,description:zgt,detail:jgt,key:Bgt,order:Ugt,..._se}=GI,PNe=oe(_se);function ONe(e){return Se(GI,e)}function MNe(e){switch(e){case fs:case Il:case Ll:case qu:case ds:case Gu:case Xf:case Yf:return!0;case qf:case Gf:case dp:return!1}}const $se={...XI,...YI,...kse,..._se},KI=oe($se);function jl(e){return Se($se,e)}function DNe(e,t){return INe(e)[t]}const Ase={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Vgt,...NNe}=Ase;function INe(e){switch(e){case fs:case Il:case Ll:case p$:case Dx:case f$:case Dh:case d$:case Xm:case Gu:case qf:case Gf:case Xf:case c$:case bu:case xu:return Ase;case vn:case Sr:case Hf:case W0:case Aa:case Ta:return NNe;case _a:case Nl:case Ra:case $o:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case qu:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Yf:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ds:return{point:"always",geoshape:"always"};case Mx:return{text:"always"};case dp:return{point:"always",square:"always",text:"always"};case h$:return{image:"always"};case Fo:return{text:"always",arc:"always"};case $a:return{text:"always",arc:"always"};case Hu:case Wu:return{arc:"always"}}}function b3(e){switch(e){case vn:case Sr:case Fo:case $a:case Hf:case W0:case qu:case dp:case Xf:case Gu:case qf:case Gf:case _a:case Nl:case Hu:case Wu:return;case c$:case bu:case xu:case ds:case Yf:case Mx:case Dh:case d$:case h$:case p$:return"discrete";case fs:case Il:case Ll:return"flexible";case Aa:case Ta:case Ra:case $o:case Dx:case f$:case Xm:return}}const LNe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},zNe={count:1,min:1,max:1};function Ou(e){return le(e,"argmin")}function Kf(e){return le(e,"argmax")}function QI(e){return we(e)&&Se(LNe,e)}const jNe=new Set(["count","valid","missing","distinct"]);function m$(e){return we(e)&&jNe.has(e)}function BNe(e){return we(e)&&ot(["min","max"],e)}const UNe=new Set(["count","sum","distinct","valid","missing"]),VNe=new Set(["mean","average","median","q1","q3","min","max"]);function Tse(e){return Lf(e)&&(e=A$(e,void 0)),"bin"+oe(e).map(t=>y$(e[t])?yn(`_${t}_${$f(e[t])}`):yn(`_${t}_${e[t]}`)).join("")}function sn(e){return e===!0||pp(e)&&!e.binned}function Ar(e){return e==="binned"||pp(e)&&e.binned===!0}function pp(e){return ve(e)}function y$(e){return le(e,"param")}function hV(e){switch(e){case bu:case xu:case qu:case fs:case Il:case Ll:case Xf:case Gu:case qf:case Gf:case ds:return 6;case Yf:return 4;default:return 10}}function Ix(e){return le(e,"expr")}function Tr(e,{level:t}={level:0}){const n=oe(e||{}),r={};for(const i of n)r[i]=t===0?ks(e[i]):Tr(e[i],{level:t-1});return r}function Rse(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,m={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=Hm(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function $c(e){return we(e)||te(e)&&we(e[0])}function Fe(e){return le(e,"signal")}function gp(e){return le(e,"step")}function WNe(e){return te(e)?!1:le(e,"fields")&&!le(e,"data")}function HNe(e){return te(e)?!1:le(e,"fields")&&le(e,"data")}function fu(e){return te(e)?!1:le(e,"field")&&le(e,"data")}const qNe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},GNe=oe(qNe),XNe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},e4=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Fse(e){const t=te(e.condition)?e.condition.map(pV):pV(e.condition);return{...ks(e),condition:t}}function ks(e){if(Ix(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function pV(e){if(Ix(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function fn(e){if(Ix(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Fe(e)?e:e!==void 0?{value:e}:void 0}function YNe(e){return Fe(e)?e.signal:de(e)}function gV(e){return Fe(e)?e.signal:de(e.value)}function sa(e){return Fe(e)?e.signal:e==null?null:de(e)}function KNe(e,t,n){for(const r of n){const i=kl(r,t.markDef,t.config);i!==void 0&&(e[r]=fn(i))}return e}function Pse(e){return[].concat(e.type,e.style??[])}function Ht(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&le(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:kl(e,t,n,r)}function kl(e,t,n,{vgChannel:r}={}){const i=t4(e,t,n.style);return Vn(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function t4(e,t,n){return Ose(e,Pse(t),n)}function Ose(e,t,n){t=xe(t);let r;for(const i of t){const s=n[i];le(s,e)&&(r=s[e])}return r}function Mse(e,t){return xe(e).reduce((n,r)=>(n.field.push(ye(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function Dse(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Ts(i,r))return;n.push(r)}),n}function Nse(e,t){return Ts(e,t)||!t?e:e?[...xe(e),...xe(t)].join(", "):t}function Ise(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if(($c(n)||Fe(n))&&($c(r)||Fe(r)))return{explicit:e.explicit,value:Nse(n,r)};if($c(n)||Fe(n))return{explicit:e.explicit,value:n};if($c(r)||Fe(r))return{explicit:e.explicit,value:r};if(!$c(n)&&!Fe(n)&&!$c(r)&&!Fe(r))return{explicit:e.explicit,value:Dse(n,r)};throw new Error("It should never reach here")}function JI(e){return`Invalid specification ${Gt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const QNe='Autosize "fit" only works for single views and layered views.';function mV(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function yV(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function vV(e){return e?`Dropping "fit-${e}" because spec has discrete ${hs(e)}.`:'Dropping "fit" because spec has discrete size.'}function ZI(e){return`Unknown field for ${e}. Cannot calculate view size.`}function bV(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function JNe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function ZNe(e){return`The "nearest" transform is not supported for ${e} marks.`}function Lse(e){return`Selection not supported for ${e} yet.`}function eIe(e){return`Cannot find a selection named "${e}".`}const tIe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",nIe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",rIe="Legend bindings are only supported for selections over an individual field or encoding channel.";function iIe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function sIe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const oIe="The same selection must be used to override scale domains in a layered view.",aIe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function lIe(e){return`Unknown repeated value "${e}".`}function xV(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const uIe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function cIe(e){return`Unrecognized parse "${e}".`}function wV(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const fIe="Attempt to add the same child twice.";function dIe(e){return`Ignoring an invalid transform: ${Gt(e)}.`}const hIe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function SV(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function pIe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Gt(t)} is overridden by a child projection ${Gt(n)}.`}const gIe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function mIe(e){return`${e}Offset dropped because ${e} is continuous`}function yIe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Gt(n)}}.`}function zse(e){return`Invalid field type "${e}".`}function vIe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function bIe(e){return`Invalid aggregation operator "${e}".`}function jse(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function xIe(e){return`Position range does not support relative band size for ${e}.`}function n4(e,t){return`Dropping ${Gt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const wIe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function v$(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function SIe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function EIe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function CIe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function kIe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function x3(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function _Ie(e){return`The ${e} for range marks cannot be an expression`}function $Ie(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function AIe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function TIe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function RIe(e){return`Cannot use the relative band size with ${e} scale.`}function FIe(e){return`Using unaggregated domain with raw field has no effect (${Gt(e)}).`}function PIe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function OIe(e){return`Unaggregated domain is currently unsupported for log scale (${Gt(e)}).`}function MIe(e){return`Cannot apply size to non-oriented mark "${e}".`}function DIe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function NIe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function Bse(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Use(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function IIe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Gt(n)} and ${Gt(r)}). Using ${Gt(n)}.`}function LIe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Gt(n)} and ${Gt(r)}). Using the union of the two domains.`}function zIe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function jIe(e){return`Dropping sort property ${Gt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const EV="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",BIe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",UIe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",VIe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function WIe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function HIe(e){return`Stack is applied to a non-linear scale (${e}).`}function qIe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function DC(e,t){return`Invalid ${e}: ${Gt(t)}.`}function GIe(e){return`Dropping day from datetime ${Gt(e)} as day cannot be combined with other units.`}function XIe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function YIe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function KIe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function CV(e){return`1D error band does not support ${e}.`}function Vse(e){return`Channel ${e} is required for "binned" bin.`}function QIe(e){return`Channel ${e} should not be used with "binned" bin.`}function JIe(e){return`Domain for ${e} is required for threshold scale.`}const Wse=GM(qM);let Ym=Wse;function ZIe(e){return Ym=e,Ym}function eLe(){return Ym=Wse,Ym}function ue(...e){Ym.warn(...e)}function tLe(...e){Ym.debug(...e)}function mp(e){if(e&&ve(e)){for(const t of tL)if(le(e,t))return!0}return!1}const Hse=["january","february","march","april","may","june","july","august","september","october","november","december"],nLe=Hse.map(e=>e.substr(0,3)),qse=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],rLe=qse.map(e=>e.substr(0,3));function iLe(e){if(u$(e)&&(e=+e),_t(e))return e>4&&ue(DC("quarter",e)),e-1;throw new Error(DC("quarter",e))}function sLe(e){if(u$(e)&&(e=+e),_t(e))return e-1;{const t=e.toLowerCase(),n=Hse.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=nLe.indexOf(r);if(i!==-1)return i;throw new Error(DC("month",e))}}function oLe(e){if(u$(e)&&(e=+e),_t(e))return e%7;{const t=e.toLowerCase(),n=qse.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=rLe.indexOf(r);if(i!==-1)return i;throw new Error(DC("day",e))}}function eL(e,t){const n=[];if(t&&e.day!==void 0&&oe(e).length>1&&(ue(GIe(e)),e=Xe(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?sLe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?iLe(e.quarter):e.quarter;n.push(_t(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?oLe(e.day):e.day;n.push(_t(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Nh(e){const n=eL(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function aLe(e){const n=eL(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function lLe(e){const t=eL(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const Gse={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},tL=oe(Gse);function uLe(e){return Se(Gse,e)}function yp(e){return ve(e)?e.binned:Xse(e)}function Xse(e){return e&&e.startsWith("binned")}function nL(e){return e.startsWith("utc")}function cLe(e){return e.substring(3)}const fLe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function b$(e){return tL.filter(t=>Kse(e,t))}function Yse(e){const t=b$(e);return t[t.length-1]}function Kse(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function dLe(e,t,{end:n}={end:!1}){const r=UI(t),i=nL(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let o;const a={};for(const l of tL)Kse(e,l)&&(a[l]=s(l),o=l);return n&&(a[o]+="+1"),aLe(a)}function Qse(e){if(!e)return;const t=b$(e);return`timeUnitSpecifier(${Gt(t)}, ${Gt(fLe)})`}function hLe(e,t,n){if(!e)return;const r=Qse(e);return`${n||nL(e)?"utc":"time"}Format(${t}, ${r})`}function vr(e){if(!e)return;let t;return we(e)?Xse(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ve(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),nL(t.unit)&&(t.utc=!0,t.unit=cLe(t.unit)),t}function pLe(e){const{utc:t,...n}=vr(e);return n.unit?(t?"utc":"")+oe(n).map(r=>yn(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+oe(n).map(r=>yn(`_${r}_${n[r]}`)).join("")}function Jse(e,t=n=>n){const n=vr(e),r=Yse(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=Zse(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Nh(a))} - ${t(Nh(i))}`}}const gLe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function mLe(e){return Se(gLe,e)}function Zse(e,t=1){if(mLe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function yLe(e){return le(e,"param")}function rL(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function iL(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function sL(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function oL(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function aL(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function lL(e){if(e!=null&&e.field){if(te(e.range)&&e.range.length===2)return!0;if(Fe(e.range))return!0}return!1}function uL(e){return!!(e!=null&&e.field)&&(te(e.oneOf)||te(e.in))}function vLe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function eoe(e){return uL(e)||rL(e)||lL(e)||iL(e)||oL(e)||sL(e)||aL(e)}function La(e,t){return T$(e,{timeUnit:t,wrapTime:!0})}function bLe(e,t){return e.map(n=>La(n,t))}function toe(e,t=!0){const{field:n}=e,r=vr(e.timeUnit),{unit:i,binned:s}=r||{},o=ye(e,{expr:"datum"}),a=i?`time(${s?o:dLe(i,n)})`:o;if(rL(e))return`${a}===${La(e.equal,i)}`;if(iL(e)){const l=e.lt;return`${a}<${La(l,i)}`}else if(oL(e)){const l=e.gt;return`${a}>${La(l,i)}`}else if(sL(e)){const l=e.lte;return`${a}<=${La(l,i)}`}else if(aL(e)){const l=e.gte;return`${a}>=${La(l,i)}`}else{if(uL(e))return`indexof([${bLe(e.oneOf,i).join(",")}], ${a}) !== -1`;if(vLe(e))return x$(a,e.valid);if(lL(e)){const{range:l}=Tr(e),u=Fe(l)?{signal:`${l.signal}[0]`}:l[0],c=Fe(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+La(u,i)+", "+La(c,i)+"])";const f=[];return u!==null&&f.push(`${a} >= ${La(u,i)}`),c!==null&&f.push(`${a} <= ${La(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Gt(e)}`)}function x$(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function xLe(e){return eoe(e)&&e.timeUnit?{...e,timeUnit:vr(e.timeUnit)}:e}const Lx={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function wLe(e){return e==="quantitative"||e==="temporal"}function noe(e){return e==="ordinal"||e==="nominal"}const Ih=Lx.quantitative,cL=Lx.ordinal,Km=Lx.temporal,fL=Lx.nominal,H0=Lx.geojson;function SLe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Ih:return"quantitative";case"t":case Km:return"temporal";case"o":case cL:return"ordinal";case"n":case fL:return"nominal";case H0:return"geojson"}}const Fr={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},r4={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function ELe(e,t){const n=r4[e],r=r4[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const CLe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function kV(e){return CLe[e]}const roe=new Set(["linear","log","pow","sqrt","symlog"]),ioe=new Set([...roe,"time","utc"]);function soe(e){return roe.has(e)}const ooe=new Set(["quantile","quantize","threshold"]),kLe=new Set([...ioe,...ooe,"sequential","identity"]),_Le=new Set(["ordinal","bin-ordinal","point","band"]);function xr(e){return _Le.has(e)}function ya(e){return kLe.has(e)}function ol(e){return ioe.has(e)}function Qm(e){return ooe.has(e)}const $Le={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function ALe(e){return!we(e)&&le(e,"name")}function aoe(e){return le(e,"param")}function TLe(e){return le(e,"unionWith")}function RLe(e){return ve(e)&&"field"in e}const FLe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Wgt,domain:Hgt,range:qgt,rangeMax:Ggt,rangeMin:Xgt,scheme:Ygt,...PLe}=FLe,OLe=oe(PLe);function i4(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ol(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ol(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ol(e);case"nice":return ol(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ya(e)&&!ot(["log","time","utc","threshold","quantile"],e)}}function loe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return qg(e)?void 0:TIe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function MLe(e,t){return ot([cL,fL],t)?e===void 0||xr(e):t===Km?ot([Fr.TIME,Fr.UTC,void 0],e):t===Ih?soe(e)||Qm(e)||e===void 0:!0}function DLe(e,t,n=!1){if(!jl(e))return!1;switch(e){case vn:case Sr:case Hf:case W0:case Fo:case $a:return ol(t)||t==="band"?!0:t==="point"?!n:!1;case qu:case Xf:case Gu:case qf:case Gf:case dp:return ol(t)||Qm(t)||ot(["band","point","ordinal"],t);case fs:case Il:case Ll:return t!=="band";case Yf:case ds:return t==="ordinal"||Qm(t)}}function NLe(e){return ve(e)&&"value"in e}const Bi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},uoe=Bi.arc,w$=Bi.area,S$=Bi.bar,ILe=Bi.image,E$=Bi.line,C$=Bi.point,LLe=Bi.rect,NC=Bi.rule,coe=Bi.text,dL=Bi.tick,zLe=Bi.trail,hL=Bi.circle,pL=Bi.square,foe=Bi.geoshape;function Qf(e){return["line","area","trail"].includes(e)}function ib(e){return["rect","bar","image","arc","tick"].includes(e)}const jLe=new Set(oe(Bi));function _l(e){return le(e,"type")}const BLe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],ULe=["fill","fillOpacity"],VLe=[...BLe,...ULe],WLe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},_V=oe(WLe),w3=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],HLe={area:["line","point"],bar:w3,rect:w3,line:["point"],tick:["bandSize","thickness",...w3]},qLe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},GLe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},doe=oe(GLe);function Lh(e){return le(e,"band")}const XLe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},YLe=5,gL={binSpacing:0,continuousBandSize:YLe,minBandSize:.25,timeUnitBandPosition:.5},KLe={...gL,binSpacing:1},QLe={...gL,thickness:1};function JLe(e){return _l(e)?e.type:e}function hoe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function mL({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!ya(r)||i)return"always-valid";const s=hoe(Ht("invalid",e,t),{isPath:Qf(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":s}function ZLe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function poe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function goe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=ba(t),l=m$(a==null?void 0:a.aggregate),u=mL({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:l});if(a&&u==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:x$(ye(a,{expr:"datum"}),!1),...e8e(f,n,r)}}}function e8e(e,t,n){if(NLe(e)){const{value:r}=e;return Fe(r)?{signal:r.signal}:{value:r}}return poe({scale:t,scaleName:n,mode:"zeroOrMin"})}function yL(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=hp(t),l=vL(e),u=goe({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return u!==void 0?[u,l]:l}function t8e(e){const{datum:t}=e;return mp(t)?Nh(t):`${Gt(t)}`}function ch(e,t,n,r){const i={};if(t&&(i.scale=t),Bl(e)){const{datum:s}=e;mp(s)?i.signal=Nh(s):Fe(s)?i.signal=s.signal:Ix(s)?i.signal=s.expr:i.value=s}else i.field=ye(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function IC({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Fe(o)&&0<o&&o<1?"datum":void 0,l=ye(t,{expr:a,suffix:i}),u=n!==void 0?ye(n,{expr:a}):ye(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?l:u;c.field=f}else{const f=Fe(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function n8e({scaleName:e,fieldDef:t}){const n=ye(t,{expr:"datum"}),r=ye(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function vL({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(Qe(t)){const f=o==null?void 0:o.get("type");if(Li(t)){c??(c=Tf({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(sn(d)||c&&h&&p===Km)return a!=null&&a.impute?ch(t,s,{binSuffix:"mid"},{offset:l}):c&&!xr(f)?IC({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:l}):ch(t,s,Vx(t,e)?{binSuffix:"range"}:{},{offset:l});if(Ar(d)){if(ce(n))return IC({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});ue(Vse(e===vn?_a:Nl))}}return ch(t,s,xr(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(va(t)){const f=t.value,d=l?{offset:l}:{};return{...uv(e,f),...d}}}return tt(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function uv(e,t){return ot(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:ot(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:fn(t)}function zh(e){return e&&e!=="number"&&e!=="time"}function moe(e,t,n){return`${e}(${t}${n?`, ${Gt(n)}`:""})`}const r8e=" – ";function bL({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var l,u;if(zh(n))return oa({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=yoe(e,r,i),a=Jm(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return oa({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return oa({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&ce(e)&&e.timeUnit===void 0)return oa({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(e0(e)){const c=s8e({field:o,timeUnit:ce(e)?(l=vr(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:vp(e)&&((u=e.scale)==null?void 0:u.type)===Fr.UTC});return c?{signal:c}:void 0}if(t=s4({type:a,specifiedFormat:t,config:s,normalizeStack:i}),ce(e)&&sn(e.bin)){const c=ye(e,{expr:r,binSuffix:"end"});return{signal:zx(o,c,t,n,s)}}else return t||Jm(e)==="quantitative"?{signal:`${xoe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function yoe(e,t,n){return ce(e)?n?`${ye(e,{expr:t,suffix:"end"})}-${ye(e,{expr:t,suffix:"start"})}`:ye(e,{expr:t}):t8e(e)}function oa({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=yoe(e,r,i)),o!=="datum.value"&&ce(e)&&sn(e.bin)){const a=ye(e,{expr:r,binSuffix:"end"});return{signal:zx(o,a,t,n,s)}}return{signal:moe(n,o,t)}}function voe(e,t,n,r,i,s){var o;if(!(we(r)&&zh(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Jm(e)==="quantitative"&&(i.normalizedNumberFormatType&&Zm(e)&&e.stack==="normalize"||i.numberFormatType))){if(Zm(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return s4({type:"quantitative",config:i,normalizeStack:!0});if(e0(e)){const a=ce(e)?(o=vr(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:i8e({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return s4({type:t,specifiedFormat:n,config:i})}}function boe(e,t,n){var r;if(e&&(Fe(e)||e==="number"||e==="time"))return e;if(e0(t)&&n!=="time"&&n!=="utc")return ce(t)&&((r=vr(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function s4({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(we(t))return t;if(e===Ih)return r?n.normalizedNumberFormat:n.numberFormat}function i8e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:Qse(t)}:r?void 0:n.timeFormat)}function xoe(e,t){return`format(${e}, "${t||""}")`}function $V(e,t,n,r){return zh(n)?moe(n,e,t):xoe(e,(we(t)?t:void 0)??r.numberFormat)}function zx(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return zx(e,t,i.numberFormat,i.numberFormatType,i);const s=$V(e,n,r,i),o=$V(t,n,r,i);return`${x$(e,!1)} ? "null" : ${s} + "${r8e}" + ${o}`}function s8e({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=we(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):hLe(t,e,s)}const k$="min",o8e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function AV(e){return Se(o8e,e)}function a8e(e){return le(e,"encoding")}function wu(e){return e&&(e.op==="count"||le(e,"field"))}function woe(e){return e&&te(e)}function jx(e){return le(e,"row")||le(e,"column")}function xL(e){return le(e,"header")}function _$(e){return le(e,"facet")}function l8e(e){return le(e,"param")}function u8e(e){return!we(e)&&le(e,"repeat")}function TV(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function wL(e){return le(e,"sort")}function Tf({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ce(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return kl("timeUnitBandPosition",n,r);if(sn(s))return .5}}function Soe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var u,c,f;const a=hs(e),l=Ht(o?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(ce(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:kl("timeUnitBandSize",r,i)};if(sn(h)&&!xr(s))return{band:1}}if(ib(r.type))return s?xr(s)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Eoe(e,t,n,r){return sn(e.bin)||e.timeUnit&&Li(e)&&e.type==="temporal"?Tf({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Coe(e){return le(e,"sort")&&!le(e,"field")}function Bx(e){return le(e,"condition")}function $$(e){const t=e==null?void 0:e.condition;return!!t&&!te(t)&&ce(t)}function Ux(e){const t=e==null?void 0:e.condition;return!!t&&!te(t)&&Qe(t)}function c8e(e){const t=e==null?void 0:e.condition;return!!t&&(te(t)||va(t))}function ce(e){return le(e,"field")||(e==null?void 0:e.aggregate)==="count"}function Jm(e){return e==null?void 0:e.type}function Bl(e){return le(e,"datum")}function Kc(e){return Li(e)&&!zC(e)||LC(e)}function RV(e){return Li(e)&&e.type==="quantitative"&&!e.bin||LC(e)}function LC(e){return Bl(e)&&_t(e.datum)}function Qe(e){return ce(e)||Bl(e)}function Li(e){return e&&(le(e,"field")||e.aggregate==="count")&&le(e,"type")}function va(e){return le(e,"value")}function vp(e){return le(e,"scale")||le(e,"sort")}function Zm(e){return le(e,"axis")||le(e,"stack")||le(e,"impute")}function koe(e){return le(e,"legend")}function _oe(e){return le(e,"format")||le(e,"formatType")}function f8e(e){return ns(e,["legend","axis","header","scale"])}function d8e(e){return le(e,"op")}function ye(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(p8e(e))n=gse("count");else{let o;if(!t.nofn)if(d8e(e))o=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;sn(a)?(o=Tse(a),i=(t.binSuffix??"")+(t.suffix??"")):l?Kf(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):Ou(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!yp(u)&&(o=pLe(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?V0(n):t.expr?dse(n,t.expr)+s:_o(n)+s}function zC(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ce(e)&&!!e.bin;case"temporal":return!1}throw new Error(zse(e.type))}function h8e(e){var t;return vp(e)&&Qm((t=e.scale)==null?void 0:t.type)}function p8e(e){return e.aggregate==="count"}function g8e(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(sn(r))return`${n} (binned)`;if(i&&!yp(i)){const a=(o=vr(i))==null?void 0:o.unit;if(a)return`${n} (${b$(a).join("-")})`}else if(s)return Kf(s)?`${n} for max ${s.argmax}`:Ou(s)?`${n} for min ${s.argmin}`:`${Ox(s)} of ${n}`;return n}function m8e(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Kf(t))return`${i} for argmax(${t.argmax})`;if(Ou(t))return`${i} for argmin(${t.argmin})`;const s=r&&!yp(r)?vr(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||sn(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const $oe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return m8e(e);default:return g8e(e,t)}};let Aoe=$oe;function Toe(e){Aoe=e}function y8e(){Toe($oe)}function Gg(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=SL(e))==null?void 0:a.title;if(!ce(e))return i??e.title;const s=e,o=r?EL(s,t):void 0;return n?Vn(i,s.title,o):i??s.title??o}function SL(e){if(Zm(e)&&e.axis)return e.axis;if(koe(e)&&e.legend)return e.legend;if(xL(e)&&e.header)return e.header}function EL(e,t){return Aoe(e,t)}function jC(e){if(_oe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=SL(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function v8e(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(wL(e)&&te(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Kf(n)&&!Ou(n))return"quantitative";if(vp(e)&&((s=e.scale)!=null&&s.type))switch(r4[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ba(e){if(ce(e))return e;if($$(e))return e.condition}function rr(e){if(Qe(e))return e;if(Ux(e))return e.condition}function Roe(e,t,n,r={}){if(we(e)||_t(e)||Lf(e)){const i=we(e)?"string":_t(e)?"number":"boolean";return ue(yIe(t,i,e)),{value:e}}return Qe(e)?BC(e,t,n,r):Ux(e)?{...e,condition:BC(e.condition,t,n,r)}:e}function BC(e,t,n,r){if(_oe(e)){const{format:i,formatType:s,...o}=e;if(zh(s)&&!n.customFormatTypes)return ue(SV(t)),BC(o,t,n,r)}else{const i=Zm(e)?"axis":koe(e)?"legend":xL(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(zh(o)&&!n.customFormatTypes)return ue(SV(t)),BC({...e,[i]:a},t,n,r)}}return ce(e)?CL(e,t,r):b8e(e)}function b8e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=_t(n)?"quantitative":we(n)?"nominal":mp(n)?"temporal":void 0,{...e,type:t}}function CL(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!QI(r)&&!Kf(r)&&!Ou(r)&&(ue(bIe(r)),delete a.aggregate),i&&(a.timeUnit=vr(i)),o&&(a.field=`${o}`),sn(s)&&(a.bin=A$(s,t)),Ar(s)&&!Wn(t)&&ue(QIe(t)),Li(a)){const{type:l}=a,u=SLe(l);l!==u&&(a.type=u),l!=="quantitative"&&m$(r)&&(ue(vIe(l,r)),a.type="quantitative")}else if(!Ese(t)){const l=v8e(a,t);a.type=l}if(Li(a)){const{compatible:l,warning:u}=x8e(a,t)||{};l===!1&&ue(u)}if(wL(a)&&we(a.sort)){const{sort:l}=a;if(AV(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&AV(u))return{...a,sort:{encoding:u,order:"descending"}}}if(xL(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function A$(e,t){return Lf(e)?{maxbins:hV(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:hV(t)}:e}const Yp={compatible:!0};function x8e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case bu:case xu:case c$:return zC(e)?Yp:{compatible:!1,warning:EIe(t)};case vn:case Sr:case Hf:case W0:case fs:case Il:case Ll:case Mx:case Dx:case f$:case Dh:case d$:case h$:case dp:case Fo:case $a:case p$:return Yp;case Ta:case $o:case Aa:case Ra:return n!==Ih?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Yp;case Gu:case qf:case Gf:case Xf:case qu:case Hu:case Wu:case _a:case Nl:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Yp;case ds:case Yf:return!zC(e)&&!h8e(e)?{compatible:!1,warning:CIe(t)}:Yp;case Xm:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Yp}}function e0(e){const{formatType:t}=jC(e);return t==="time"||!t&&w8e(e)}function w8e(e){return e&&(e.type==="temporal"||ce(e)&&!!e.timeUnit)}function T$(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const s=t&&((l=vr(t))==null?void 0:l.unit);let o=s||n==="temporal",a;return Ix(e)?a=e.expr:Fe(e)?a=e.signal:mp(e)?(o=!0,a=Nh(e)):(we(e)||_t(e))&&o&&(a=`datetime(${Gt(e)})`,uLe(s)&&(_t(e)&&e<1e4||we(e)&&isNaN(Date.parse(e)))&&(a=Nh({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Gt(e)}function Foe(e,t){const{type:n}=e;return t.map(r=>{const i=ce(e)&&!yp(e.timeUnit)?e.timeUnit:void 0,s=T$(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function Vx(e,t){return sn(e.bin)?jl(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const FV={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Wx(e){return e==null?void 0:e.condition}const Poe=["domain","grid","labels","ticks","title"],S8e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Ooe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},E8e={...Ooe,style:1,labelExpr:1,encoding:1};function PV(e){return Se(E8e,e)}const C8e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Moe=oe(C8e);function Yu(e){return le(e,"mark")}class R${constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Yu(t)?JLe(t.mark)===this.name:!1}}function fh(e,t){const n=e&&e[t];return n?te(n)?qm(n,r=>!!r.field):ce(n)||$$(n):!1}function Doe(e,t){const n=e&&e[t];return n?te(n)?qm(n,r=>!!r.field):ce(n)||Bl(n)||Ux(n):!1}function Noe(e,t){if(Wn(t)){const n=e[t];if((ce(n)||Bl(n))&&(noe(n.type)||ce(n)&&n.timeUnit)){const r=qI(t);return Doe(e,r)}}return!1}function Ioe(e){return qm(ENe,t=>{if(fh(e,t)){const n=e[t];if(te(n))return qm(n,r=>!!r.aggregate);{const r=ba(n);return r&&!!r.aggregate}}return!1})}function Loe(e,t){const n=[],r=[],i=[],s=[],o={};return kL(e,(a,l)=>{if(ce(a)){const{field:u,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=SL(a),g=p==null?void 0:p.title;let m=ye(a,{forAs:!0});const y={...g?[]:{title:Gg(a,t,{allowDisabling:!0})},...h,field:m};if(c){let v;if(Kf(c)?(v="argmax",m=ye({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${u}`):Ou(c)?(v="argmin",m=ye({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:m};u&&(b.field=u),s.push(b)}}else if(n.push(m),Li(a)&&sn(f)){if(r.push({bin:f,field:u,as:m}),n.push(ye(a,{binSuffix:"end"})),Vx(a,l)&&n.push(ye(a,{binSuffix:"range"})),Wn(l)){const v={field:`${m}_end`};o[`${l}2`]=v}y.bin="binned",Ese(l)||(y.type=Ih)}else if(d&&!yp(d)){i.push({timeUnit:d,field:u,as:m});const v=Li(a)&&a.type!==Km&&"time";v&&(l===Mx||l===Dh?y.formatType=v:ONe(l)?y.legend={formatType:v,...y.legend}:Wn(l)&&(y.axis={formatType:v,...y.axis}))}o[l]=y}else n.push(u),o[l]=e[l]}else o[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function k8e(e,t,n){const r=DNe(t,n);if(r){if(r==="binned"){const i=e[t===_a?vn:Sr];return!!(ce(i)&&ce(e[t])&&Ar(i.bin))}}else return!1;return!0}function _8e(e,t,n,r){const i={};for(const s of oe(e))Sse(s)||ue(SIe(s));for(let s of TNe){if(!e[s])continue;const o=e[s];if(Nx(s)){const a=ANe(s),l=i[a];if(ce(l)&&wLe(l.type)&&ce(o)&&!l.timeUnit){ue(mIe(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(ue(gIe),s=Fo),!k8e(e,s,t)){ue(v$(s,t));continue}if(s===qu&&t==="line"){const a=ba(e[s]);if(a!=null&&a.aggregate){ue(wIe);continue}}if(s===fs&&(n?"fill"in e:"stroke"in e)){ue(jse("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===Dx||s===Xm&&!te(o)&&!va(o)||s===Dh&&te(o)){if(o){if(s===Xm){const a=e[s];if(Coe(a)){i[s]=a;continue}}i[s]=xe(o).reduce((a,l)=>(ce(l)?a.push(CL(l,s)):ue(n4(l,s)),a),[])}}else{if(s===Dh&&o===null)i[s]=null;else if(!ce(o)&&!Bl(o)&&!va(o)&&!Bx(o)&&!Fe(o)){ue(n4(o,s));continue}i[s]=Roe(o,s,r)}}return i}function F$(e,t){const n={};for(const r of oe(e)){const i=Roe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function $8e(e){const t=[];for(const n of oe(e))if(fh(e,n)){const r=e[n],i=xe(r);for(const s of i)ce(s)?t.push(s):$$(s)&&t.push(s.condition)}return t}function kL(e,t,n){if(e)for(const r of oe(e)){const i=e[r];if(te(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function A8e(e,t,n,r){return e?oe(e).reduce((i,s)=>{const o=e[s];return te(o)?o.reduce((a,l)=>t.call(r,a,l,s),i):t.call(r,i,o,s)},n):n}function zoe(e,t){return oe(t).reduce((n,r)=>{switch(r){case vn:case Sr:case d$:case p$:case h$:case _a:case Nl:case Hf:case W0:case Fo:case Hu:case $a:case Wu:case Aa:case Ta:case Ra:case $o:case Mx:case ds:case dp:case Dh:return n;case Xm:if(e==="line"||e==="trail")return n;case Dx:case f$:{const i=t[r];if(te(i)||ce(i))for(const s of xe(i))s.aggregate||n.push(ye(s,{}));return n}case qu:if(e==="trail")return n;case fs:case Il:case Ll:case Gu:case qf:case Gf:case Yf:case Xf:{const i=ba(t[r]);return i&&!i.aggregate&&n.push(ye(i,{})),n}}},[])}function T8e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(te(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return te(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function o4(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const l=r?` of ${_L(t)}`:"";return{field:o+t.field,type:t.type,title:Fe(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=$8e(n).map(f8e);return{tooltip:[...i,...sl(s,ft)]}}function _L(e){const{title:t,field:n}=e;return Vn(t,n)}function $L(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=_L(n);return joe(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...we(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function joe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},..._l(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Lf(e[t])?{}:e[t]}}]:[]}function Boe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:d2(s,n),continuousAxisChannelDef2:d2(o,n),continuousAxisChannelDefError:d2(a,n),continuousAxisChannelDefError2:d2(l,n),continuousAxis:i}}function d2(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&ue(KIe(n,t)),r}else return e}function Uoe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(_l(n)&&n.orient)return n.orient;if(Kc(i)){if(Kc(s)){const o=ce(i)&&i.aggregate,a=ce(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return e0(s)&&!e0(i)?"horizontal":"vertical"}return"horizontal"}else{if(Kc(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const UC="boxplot",R8e=["box","median","outliers","rule","ticks"],F8e=new R$(UC,Woe);function Voe(e){return _t(e)?"tukey":e}function Woe(e,{config:t}){e={...e,encoding:F$(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=_l(n)?n:{type:n};i&&ue(Lse("boxplot"));const l=a.extent??t.boxplot.extent,u=Ht("size",a,t),c=a.invalid,f=Voe(l),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:C}=P8e(e,l,t),S=V0(g.field),{color:k,size:$,...F}=b,O=nc=>$L(a,m,g,nc,t.boxplot),B=O(F),D=O(b),N=(ve(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",A=O({...F,...$?{size:$}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...k||{value:N}}}}),P=o4([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,b),j={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},z=f==="min-max"?P:o4([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,b),U=[...B({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:z}),...B({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:z}),...B({partName:"ticks",mark:j,positionPrefix:"lower_whisker",extraEncoding:z}),...B({partName:"ticks",mark:j,positionPrefix:"upper_whisker",extraEncoding:z})],X=[...f!=="tukey"?U:[],...D({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:P}),...A({partName:"median",mark:{type:"tick",invalid:c,...ve(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:P})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:X};const K=`datum["lower_box_${g.field}"]`,pe=`datum["upper_box_${g.field}"]`,se=`(${pe} - ${K})`,_e=`${K} - ${l} * ${se}`,Ze=`${pe} + ${l} * ${se}`,Ct=`datum["${g.field}"]`,Nn={joinaggregate:Hoe(g.field),groupby:y},ur={transform:[{filter:`(${_e} <= ${Ct}) && (${Ct} <= ${Ze})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${S}`},{op:"max",field:g.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:U},{tooltip:be,...Ne}=F,{scale:We,axis:ae}=g,In=_L(g),St=ns(ae,["title"]),Qn=joe(a,"outliers",t.boxplot,{transform:[{filter:`(${Ct} < ${_e}) || (${Ct} > ${Ze})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...In!==void 0?{title:In}:{},...We!==void 0?{scale:We}:{},...qt(St)?{}:{axis:St}},...Ne,...k?{color:k}:{},...C?{tooltip:C}:{}}})[0];let hn;const Vr=[...d,...h,Nn];return Qn?hn={transform:Vr,layer:[Qn,ur]}:(hn=ur,hn.transform.unshift(...Vr)),{...o,layer:[hn,{transform:p,layer:X}]}}function Hoe(e){const t=V0(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function P8e(e,t,n){const r=Uoe(e,UC),{continuousAxisChannelDef:i,continuousAxis:s}=Boe(e,r,UC),o=i.field,a=V0(o),l=Voe(t),u=[...Hoe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=T8e(d),{bins:g,timeUnits:m,aggregate:y,groupby:v,encoding:b}=Loe(p,n),x=r==="vertical"?"horizontal":"vertical",w=r,C=[...g,...m,{aggregate:[...y,...u],groupby:v},...c];return{bins:g,timeUnits:m,transform:C,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:h}}const AL="errorbar",O8e=["ticks","rule"],M8e=new R$(AL,qoe);function qoe(e,{config:t}){e={...e,encoding:F$(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=Goe(e,AL,t);delete s.size;const c=$L(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function D8e(e,t){const{encoding:n}=e;if(N8e(n))return{orient:Uoe(e,t),inputType:"raw"};const r=I8e(n),i=L8e(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Qe(a)&&Qe(l))throw new Error(`${t} cannot have both x2 and y2`);if(Qe(a)){if(Kc(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qe(l)){if(Kc(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(Qe(l)&&!Qe(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qe(c)&&!Qe(u))throw new Error(`${t} cannot have yError2 without yError`);if(Qe(a)&&Qe(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qe(a)){if(Kc(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qe(u)){if(Kc(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function N8e(e){return(Qe(e.x)||Qe(e.y))&&!Qe(e.x2)&&!Qe(e.y2)&&!Qe(e.xError)&&!Qe(e.xError2)&&!Qe(e.yError)&&!Qe(e.yError2)}function I8e(e){return Qe(e.x2)||Qe(e.y2)}function L8e(e){return Qe(e.xError)||Qe(e.xError2)||Qe(e.yError)||Qe(e.yError2)}function Goe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,l=_l(r)?r:{type:r};s&&ue(Lse(t));const{orient:u,inputType:c}=D8e(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=Boe(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=z8e(l,f,d,h,p,c,t,n),{[g]:x,[g==="x"?"x2":"y2"]:w,[g==="x"?"xError":"yError"]:C,[g==="x"?"xError2":"yError2"]:S,...k}=i,{bins:$,timeUnits:F,aggregate:O,groupby:B,encoding:D}=Loe(k,n),N=[...O,...m],A=c!=="raw"?[]:B,P=o4(v,f,D,b);return{transform:[...a.transform??[],...$,...F,...N.length===0?[]:[{aggregate:N,groupby:A}],...y],groupby:A,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:D,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:P}}function z8e(e,t,n,r,i,s,o,a){let l=[],u=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&ue(YIe(h,p,o)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Ox(h)},{fieldPrefix:"upper_",titlePrefix:OV(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:OV(h,p,"-")}],d=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Gg({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Gg({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Gg({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ue(XIe(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Mh(Mh(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}function OV(e,t,n){return`${Ox(e)} ${n} ${t}`}const TL="errorband",j8e=["band","borders"],B8e=new R$(TL,Xoe);function Xoe(e,{config:t}){e={...e,encoding:F$(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=Goe(e,TL,t),u=o,c=$L(u,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?ue(CV("interpolate")):u.tension&&ue(CV("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const Yoe={};function RL(e,t,n){const r=new R$(e,t);Yoe[e]={normalizer:r,parts:n}}function U8e(){return oe(Yoe)}RL(UC,Woe,R8e);RL(AL,qoe,O8e);RL(TL,Xoe,j8e);const V8e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Koe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Qoe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},W8e=oe(Koe),H8e=oe(Qoe),q8e={header:1,headerRow:1,headerColumn:1,headerFacet:1},Joe=oe(q8e),Zoe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],G8e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},X8e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},xa="_vgsid_",Y8e={point:{on:"click",fields:[xa],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function FL(e){return e==="legend"||!!(e!=null&&e.legend)}function S3(e){return FL(e)&&ve(e)}function PL(e){return!!(e!=null&&e.select)}function eae(e){const t=[];for(const n of e||[]){if(PL(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function K8e(e){return P$(e)||ML(e)||OL(e)}function OL(e){return le(e,"concat")}function P$(e){return le(e,"vconcat")}function ML(e){return le(e,"hconcat")}function tae({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function $l(e){return le(e,"step")}function MV(e){return le(e,"view")||le(e,"width")||le(e,"height")}const DV=20,Q8e={align:1,bounds:1,center:1,columns:1,spacing:1},J8e=oe(Q8e);function Z8e(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(_$(e)&&!jx(e.facet)||OL(e))&&(i.columns=o),P$(e)&&(i.columns=1);for(const a of J8e)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=_t(l)?l:{row:l.row??s,column:l.column??s}}else i[a]=e[a];return i}function a4(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function l4(e,t){const n=VC(e,t);return $l(n)?n.step:nae}function VC(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Vn(n,{step:e.step})}const nae=20,e9e={continuousWidth:200,continuousHeight:200,step:nae},t9e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:e9e,mark:qLe,arc:{},area:{},bar:KLe,circle:{},geoshape:{},image:{},line:{},point:{},rect:gL,rule:{color:"black"},square:{},text:{color:"black"},tick:QLe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:$Le,projection:{},legend:G8e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Y8e,style:{},title:{},facet:{spacing:DV},concat:{spacing:DV},normalizedNumberFormat:".0%"},Yl=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],NV={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},IV={blue:Yl[0],orange:Yl[1],red:Yl[2],teal:Yl[3],green:Yl[4],yellow:Yl[5],purple:Yl[6],pink:Yl[7],brown:Yl[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function n9e(e={}){return{signals:[{name:"color",value:ve(e)?{...IV,...e}:IV}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function r9e(e){return{signals:[{name:"fontSize",value:ve(e)?{...NV,...e}:NV}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function i9e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function rae(e){const t=oe(e||{}),n={};for(const r of t){const i=e[r];n[r]=Wx(i)?Fse(i):ks(i)}return n}function s9e(e){const t=oe(e),n={};for(const r of t)n[r]=rae(e[r]);return n}const o9e=[...doe,...Moe,...Joe,"background","padding","legend","lineBreak","scale","style","title","view"];function iae(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=A0({},Xe(t9e),n?i9e(n):{},t?n9e(t):{},r?r9e(r):{},s||{});i&&T0(o,"selection",i,!0);const a=ns(o,o9e);for(const l of["background","lineBreak","padding"])o[l]&&(a[l]=ks(o[l]));for(const l of doe)o[l]&&(a[l]=Tr(o[l]));for(const l of Moe)o[l]&&(a[l]=rae(o[l]));for(const l of Joe)o[l]&&(a[l]=Tr(o[l]));if(o.legend&&(a.legend=Tr(o.legend)),o.scale){const{invalid:l,...u}=o.scale,c=Tr(l,{level:1});a.scale={...Tr(u),...oe(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=s9e(o.style)),o.title&&(a.title=Tr(o.title)),o.view&&(a.view=Tr(o.view)),a}const a9e=new Set(["view",...jLe]),l9e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],u9e={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...HLe};function c9e(e){e=Xe(e);for(const t of l9e)delete e[t];if(e.axis)for(const t in e.axis)Wx(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of V8e)delete e.legend[t];if(e.mark){for(const t of _V)delete e.mark[t];e.mark.tooltip&&ve(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(eae(e.params)),delete e.params);for(const t of a9e){for(const r of _V)delete e[t][r];const n=u9e[t];if(n)for(const r of n)delete e[t][r];d9e(e,t)}for(const t of U8e())delete e[t];f9e(e);for(const t in e)ve(e[t])&&qt(e[t])&&delete e[t];return qt(e)?void 0:e}function f9e(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Rse(e.title);qt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),qt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),qt(r)?delete e.title:e.title=r}function d9e(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};qt(s)||(e.style[n??t]=s),delete e[t]}function O$(e){return le(e,"layer")}function h9e(e){return le(e,"repeat")}function p9e(e){return!te(e.repeat)&&le(e.repeat,"layer")}class DL{map(t,n){return _$(t)?this.mapFacet(t,n):h9e(t)?this.mapRepeat(t,n):ML(t)?this.mapHConcat(t,n):P$(t)?this.mapVConcat(t,n):OL(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(O$(t))return this.mapLayer(t,n);if(Yu(t))return this.mapUnit(t,n);throw new Error(JI(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const g9e={zero:1,center:1,normalize:1};function m9e(e){return Se(g9e,e)}const y9e=new Set([uoe,S$,w$,NC,C$,hL,pL,E$,coe,dL]),v9e=new Set([S$,w$,uoe]);function Kp(e){return ce(e)&&Jm(e)==="quantitative"&&!e.bin}function LV(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(ce(o)&&ce(a))if(Kp(o)&&Kp(a)){if(o.stack)return t;if(a.stack)return i;const l=ce(o)&&!!o.aggregate,u=ce(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Kp(o))return t;if(Kp(a))return i}else{if(Kp(o))return s&&n==="vertical"?void 0:t;if(Kp(a))return s&&n==="horizontal"?void 0:i}}function b9e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function sae(e,t){var g,m;const n=_l(e)?e:{type:e},r=n.type;if(!y9e.has(r))return null;const i=LV(t,"x",n)||LV(t,"theta",n);if(!i)return null;const s=t[i],o=ce(s)?ye(s,{}):void 0,a=b9e(i),l=[],u=new Set;if(t[a]){const y=t[a],v=ce(y)?ye(y,{}):void 0;v&&v!==o&&(l.push(a),u.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=ce(f)?ye(f,{}):void 0;d&&d!==o&&(l.push(c),u.add(d));const h=RNe.reduce((y,v)=>{if(v!=="tooltip"&&fh(t,v)){const b=t[v];for(const x of xe(b)){const w=ba(x);if(w.aggregate)continue;const C=ye(w,{});(!C||!u.has(C))&&y.push({channel:v,fieldDef:w})}}return y},[]);let p;return s.stack!==void 0?Lf(s.stack)?p=s.stack?"zero":null:p=s.stack:v9e.has(r)&&(p="zero"),!p||!m9e(p)||Ioe(t)&&h.length===0?null:((g=s==null?void 0:s.scale)!=null&&g.type&&((m=s==null?void 0:s.scale)==null?void 0:m.type)!==Fr.LINEAR&&s!=null&&s.stack&&ue(HIe(s.scale.type)),Qe(t[zl(i)])?(s.stack!==void 0&&ue(WIe(i)),null):(ce(s)&&s.aggregate&&!UNe.has(s.aggregate)&&ue(qIe(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:s.impute===null?!1:Qf(r),stackBy:h,offset:p}))}function oae(e,t,n){const r=Tr(e),i=Ht("orient",r,n);if(r.orient=E9e(r.type,t,i),i!==void 0&&i!==r.orient&&ue(AIe(r.orient,i)),r.type==="bar"&&r.orient){const l=Ht("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:XLe[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Ht("opacity",r,n),o=Ht("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=w9e(r.type,t)),Ht("cursor",r,n)===void 0&&(r.cursor=x9e(r,t,n)),r}function x9e(e,t,n){return t.href||e.href||Ht("href",e,n)?"pointer":e.cursor}function w9e(e,t){if(ot([C$,dL,hL,pL],e)&&!Ioe(t))return .7}function S9e(e,t,{graticule:n}){if(n)return!1;const r=kl("filled",e,t),i=e.type;return Vn(r,i!==C$&&i!==E$&&i!==NC)}function E9e(e,t,n){switch(e){case C$:case hL:case pL:case coe:case LLe:case ILe:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case S$:if(ce(r)&&(Ar(r.bin)||ce(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ce(i)&&(Ar(i.bin)||ce(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(ce(r)&&r.type===Ih&&!sn(r.bin)||LC(r))&&ce(i)&&Ar(i.bin)?"horizontal":"vertical";if(!o)return(ce(i)&&i.type===Ih&&!sn(i.bin)||LC(i))&&ce(r)&&Ar(r.bin)?"vertical":"horizontal"}case NC:if(s&&!(ce(r)&&Ar(r.bin))&&o&&!(ce(i)&&Ar(i.bin)))return;case w$:if(o)return ce(i)&&Ar(i.bin)?"horizontal":"vertical";if(s)return ce(r)&&Ar(r.bin)?"vertical":"horizontal";if(e===NC){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case E$:case dL:{const a=RV(r),l=RV(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=Li(r)&&r.type===Km,c=Li(i)&&i.type===Km;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function C9e(e){const{point:t,line:n,...r}=e;return oe(r).length>1?r:r.type}function k9e(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ns(e[t],["point","line"])});return e}function E3(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ve(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ve(t.point)?t.point:{}:void 0}function zV(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class _9e{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Yu(t)){const{mark:r,encoding:i}=t,s=_l(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!E3(s,n[s.type],i);case"area":return!!E3(s,n[s.type],i)||!!zV(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:l,encoding:u,...c}=t,f=F$(u,i),d=_l(a)?a:{type:a},h=E3(d,i[d.type],f),p=d.type==="area"&&zV(d,i[d.type]),g=[{name:l,...s?{params:s}:{},mark:C9e({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:ns(f,["shape"])}],m=sae(oae(d,f,i),f);let y=f;if(m){const{fieldChannel:v,offset:b}=m;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=ns(y,["y2","x2"]),p&&g.push({...o?{projection:o}:{},mark:{type:"line",...Hm(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&g.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Hm(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:g},{...n,config:k9e(i)})}}function $9e(e,t){return t?jx(e)?lae(e,t):aae(e,t):e}function C3(e,t){return t?lae(e,t):e}function u4(e,t,n){const r=t[e];if(u8e(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};ue(lIe(r.repeat));return}return t}function aae(e,t){if(e=u4("field",e,t),e!==void 0){if(e===null)return null;if(wL(e)&&wu(e.sort)){const n=u4("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function jV(e,t){if(ce(e))return aae(e,t);{const n=u4("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function BV(e,t){if(Qe(e)){const n=jV(e,t);if(n)return n;if(Bx(e))return{condition:e.condition}}else{if(Ux(e)){const n=jV(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function lae(e,t){const n={};for(const r in e)if(le(e,r)){const i=e[r];if(te(i))n[r]=i.map(s=>BV(s,t)).filter(s=>s);else{const s=BV(i,t);s!==void 0&&(n[r]=s)}}return n}class A9e{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Yu(t)){const{encoding:n,mark:r}=t;if(r==="line"||_l(r)&&r.type==="line")for(const i of $Ne){const s=hp(i),o=n[s];if(n[i]&&(ce(o)&&!Ar(o.bin)||Bl(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return ue($Ie(!!i.x2,!!i.y2)),r({...t,mark:ve(s)?{...s,type:"rule"}:"rule"},n)}}class T9e extends DL{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[F8e,M8e,B8e,new _9e,new A9e]}map(t,n){if(Yu(t)){const r=fh(t.encoding,bu),i=fh(t.encoding,xu),s=fh(t.encoding,c$);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=C3(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,a);return o}mapRepeat(t,n){return p9e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(f=>{const d={...u,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${yn(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!te(r)&&t.columns&&(t=ns(t,["columns"]),ue(xV("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!te(r)&&r.row||[l?l.row:null],f=!te(r)&&r.column||[l?l.column:null],d=te(r)&&r||[l?l.repeat:null];for(const p of d)for(const g of c)for(const m of f){const y={repeat:p,row:g,column:m,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(te(r)?`${yn(p)}`:(r.row?`row_${yn(g)}`:"")+(r.column?`column_${yn(m)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(ns(b,["data"]))}const h=te(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return jx(r)&&t.columns&&(t=ns(t,["columns"]),ue(xV("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,l=VV({parentProjection:o,projection:i}),u=UV({parentEncoding:s,encoding:C3(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:l,projection:u,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=C3(o,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...c?{height:c}:{},...f?{view:f}:{},...u?{projection:u}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&ue(kIe([...r?[bu]:[],...i?[xu]:[]]));const o={},a={};for(const l of[bu,xu]){const u=t[l];if(u){const{align:c,center:f,spacing:d,columns:h,...p}=u;o[l]=p;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:l,columns:u,...c}=s;return{facetMapping:$9e(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,l={...i,parentEncoding:UV({parentEncoding:n,encoding:s,layer:!0}),parentProjection:VV({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function UV({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...oe(e),...oe(t)]);for(const s of i){const o=t[s],a=e[s];if(Qe(o)){const l={...a,...o};r[s]=l}else Ux(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||va(a)||Fe(a)||Qe(a)||te(a))&&(r[s]=a)}}else r=t;return!r||qt(r)?void 0:r}function VV(e){const{parentProjection:t,projection:n}=e;return t&&n&&ue(pIe({parentProjection:t,projection:n})),n??t}function NL(e){return le(e,"filter")}function R9e(e){return le(e,"stop")}function uae(e){return le(e,"lookup")}function F9e(e){return le(e,"data")}function P9e(e){return le(e,"param")}function O9e(e){return le(e,"pivot")}function M9e(e){return le(e,"density")}function D9e(e){return le(e,"quantile")}function N9e(e){return le(e,"regression")}function I9e(e){return le(e,"loess")}function L9e(e){return le(e,"sample")}function z9e(e){return le(e,"window")}function j9e(e){return le(e,"joinaggregate")}function B9e(e){return le(e,"flatten")}function U9e(e){return le(e,"calculate")}function cae(e){return le(e,"bin")}function V9e(e){return le(e,"impute")}function W9e(e){return le(e,"timeUnit")}function H9e(e){return le(e,"aggregate")}function q9e(e){return le(e,"stack")}function G9e(e){return le(e,"fold")}function X9e(e){return le(e,"extent")&&!le(e,"density")&&!le(e,"regression")}function Y9e(e){return e.map(t=>NL(t)?{filter:Hg(t.filter,xLe)}:t)}class K9e extends DL{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=WV(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=WV(t,n),t.encoding){const r={};for(const[i,s]of $f(t.encoding))r[i]=fae(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:$f(r).map(([s,o])=>{const{init:a,bind:l,empty:u,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=u!=="none";for(const f of Ir(n.selectionPredicates[s]??{}))f.empty=u!=="none";return{name:s,value:a,select:c,bind:l}})}:t}}function WV(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(NL(s))return{filter:c4(s,t)};if(cae(s)&&pp(s.bin))return{...s,bin:dae(s.bin)};if(uae(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function fae(e,t){var r,i;const n=Xe(e);if(ce(n)&&pp(n.bin)&&(n.bin=dae(n.bin)),vp(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(Bx(n))if(te(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:l,...u}=s;return a?s:{...u,test:c4(s,t)}});else{const{selection:s,param:o,test:a,...l}=fae(n.condition,t);n.condition=o?n.condition:{...l,test:c4(n.condition,t)}}return n}function dae(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function c4(e,t){const n=r=>Hg(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Hg(e.test||e.filter,r=>r.selection?n(r.selection):r)}class f4 extends DL{map(t,n){const r=n.selections??[];if(t.params&&!Yu(t)){const i=[];for(const s of t.params)PL(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(we(a)&&(a===t.name||i.includes(a))||te(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=f4.prototype[e];f4.prototype[e]=function(n,r){return t.call(this,n,Q9e(n,r))}}function Q9e(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function hae(e,t){t===void 0&&(t=iae(e.config));const n=t7e(e,t),{width:r,height:i}=e,s=n7e(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const J9e=new T9e,Z9e=new K9e,e7e=new f4;function t7e(e,t={}){const n={config:t};return e7e.map(J9e.map(Z9e.map(e,n),n),n)}function HV(e){return we(e)?{type:e}:e??{}}function n7e(e,t,n){let{width:r,height:i}=t;const s=Yu(e)||O$(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(ue(mV("width")),r=void 0),i=="container"&&(ue(mV("height")),i=void 0));const a={type:"pad",...o,...n?HV(n.autosize):{},...HV(e.autosize)};if(a.type==="fit"&&!s&&(ue(QNe),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&ue(yV("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&ue(yV("height")),!Ts(a,{type:"pad"}))return a}function r7e(e){return["fit","fit-x","fit-y"].includes(e)}function i7e(e){return e?`fit-${g$(e)}`:"fit"}const s7e=["background","padding"];function qV(e,t){const n={};for(const r of s7e)e&&e[r]!==void 0&&(n[r]=ks(e[r]));return t&&(n.params=e.params),n}class Ku{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Ku(Xe(this.explicit),Xe(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Vn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of oe(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ha(e){return{explicit:!0,value:e}}function bs(e){return{explicit:!1,value:e}}function pae(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:M$(t,n,r,i)}}function M$(e,t,n,r){return e.explicit&&t.explicit&&ue(IIe(n,r,e.value,t.value)),e}function Rf(e,t,n,r,i=M$){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Ts(e.value,t.value)?e:i(e,t,n,r)}class o7e extends Ku{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function t0(e){return le(e,"url")}function sb(e){return le(e,"values")}function gae(e){return le(e,"name")&&!t0(e)&&!sb(e)&&!sf(e)}function sf(e){return e&&(mae(e)||yae(e)||IL(e))}function mae(e){return le(e,"sequence")}function yae(e){return le(e,"sphere")}function IL(e){return le(e,"graticule")}var Mn;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Mn||(Mn={}));function vae({invalid:e,isPath:t}){switch(hoe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function a7e(e){const{marks:t,scales:n}=vae(e);return t===n?Mn.Main:n==="include-invalid-values"?Mn.PreFilterInvalid:Mn.PostFilterInvalid}function bae(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=_o(i.field),i}function jh(e,t=!0,n=fi){if(te(e)){const r=e.map(i=>jh(i,t,n));return t?`[${r.join(", ")}]`:r}else if(mp(e))return n(t?Nh(e):lLe(e));return t?n(Gt(e)):e}function l7e(e,t){for(const n of Ir(e.component.selection??{})){const r=n.name;let i=`${r}${Ff}, ${n.resolve==="global"?"true":`{unit: ${dh(e)}}`}`;for(const s of L$)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+L7e,on:[{events:{signal:n.name+Ff},update:`modify(${de(n.name+Bh)}, ${i})`}]})}return LL(t)}function u7e(e,t){if(e.component.selection&&oe(e.component.selection).length){const n=de(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Wf("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return LL(t)}function c7e(e,t){let n=!1;for(const r of Ir(e.component.selection??{})){const i=r.name,s=de(i+Bh);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Iae}(${s}, ${de(a)}${l}`})}n=!0;for(const a of L$)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),LL(t)}function f7e(e,t){const n=[...t],r=dh(e,{escape:!1});for(const i of Ir(e.component.selection??{})){const s={name:i.name+Bh};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:xa}}]),i.init){const a=i.project.items.map(bae);s.values=i.project.hasSelectionId?i.init.map(l=>({unit:r,[xa]:jh(l,!1)[0]})):i.init.map(l=>({unit:r,fields:a,values:jh(l,!1)}))}n.filter(a=>a.name===i.name+Bh).length||n.push(s)}return n}function xae(e,t){for(const n of Ir(e.component.selection??{}))for(const r of L$)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function d7e(e,t){for(const n of e.children)En(n)&&(t=xae(n,t));return t}function h7e(e,t,n,r){const i=Uae(e,t.param,t);return{signal:ya(n.get("type"))&&te(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function LL(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ut{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ue(fIe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class rs extends Ut{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${pse()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function k3(e){return e.as!==void 0}function GV(e){return`${e}_end`}class pl extends Ut{clone(){return new pl(null,Xe(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:l}=s;if(l){let u;if(yp(l)){if(En(n)){const{mark:c,markDef:f,config:d}=n,h=Tf({fieldDef:s,markDef:f,config:d});(ib(c)||h)&&(u={timeUnit:vr(l),field:a})}}else u={as:ye(s,{forAs:!0}),field:a,timeUnit:l};if(En(n)){const{mark:c,markDef:f,config:d}=n,h=Tf({fieldDef:s,markDef:f,config:d});ib(c)&&Wn(o)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[ft(u)]=u)}return i},{});return qt(r)?null:new pl(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=vr(r),o={...i,timeUnit:s};return new pl(t,{[ft(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of $f(this.timeUnits)){const s=k3(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ir(this.timeUnits).map(t=>k3(t)?t.as:GV(t.field)))}dependentFields(){return new Set(Ir(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${ft(this.timeUnits)}`}assemble(){const t=[];for(const n of Ir(this.timeUnits)){const{rectBandPosition:r}=n,i=vr(n.timeUnit);if(k3(n)){const{field:s,as:o}=n,{unit:a,utc:l,...u}=i,c=[o,`${o}_end`];t.push({field:_o(s),type:"timeunit",...a?{units:b$(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...XV(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=wae({timeUnit:i,field:o}),l=GV(o);t.push({type:"formula",expr:a,as:l}),t.push(...XV([o,l],r,i))}}return t}}const D$="offsetted_rect_start",N$="offsetted_rect_end";function wae({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=Yse(r),{part:o,step:a}=Zse(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function XV([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:YV([wae({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${D$}`},{type:"formula",expr:YV([i,s],n+.5),as:`${e}_${N$}`}]}return[]}function YV([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Hx="_tuple_fields";class p7e{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const g7e={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new p7e),s={},o={},a=new Set,l=(p,g)=>{const m=g==="visual"?p.channel:p.field;let y=yn(`${r}_${m}`);for(let v=1;a.has(y);v++)y=yn(`${r}_${m}_${v}`);return a.add(y),{[g]:y}},u=t.type,c=e.config.selection[u],f=n.value!==void 0?xe(n.value):null;let{fields:d,encodings:h}=ve(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(ve(p))for(const g of oe(p))_Ne(g)?(h||(h=[])).push(g):u==="interval"?(ue(aIe),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){ue(JNe(p,g.aggregate));continue}else if(!m){ue(bV(p));continue}if(g.timeUnit&&!yp(g.timeUnit)){m=e.vgField(p);const y={timeUnit:g.timeUnit,as:m,field:g.field};o[ft(y)]=y}if(!s[m]){const y=u==="interval"&&jl(p)&&ya(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:p,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(s[m]=v),i.hasField[m]=s[m],i.hasSelectionId=i.hasSelectionId||m===xa,xse(p)?(v.geoChannel=p,v.channel=bse(p),i.hasChannel[v.channel]=s[m]):i.hasChannel[p]=s[m]}}else ue(bV(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===xa}f&&(t.init=f.map(p=>i.items.map(g=>ve(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),qt(o)||(i.timeUnit=new pl(null,o))},signals:(e,t,n)=>{const r=t.name+Hx;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(bae)})}},Su={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!jl(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&ue(nIe),!s||!ya(o)){ue(tIe);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||KV(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(Iae))i.update=`{${r.map(o=>`${de(_o(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${de(_o(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!KV(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function d4(e,t){return`domain(${de(e.scaleName(t))})`}function KV(e){return e.parent&&K0(e.parent)&&!e.parent.parent}const Xg="_brush",Sae="_scale_trigger",jy="geo_interval_init_tick",Eae="_init",m7e="_center",y7e={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ve(n.select)?n.select:{}};i.fields=[xa],i.encodings||(i.encodings=n.value?oe(n.value):[Ta,Aa]),n.select={type:"interval",...i}}if(t.translate&&!Su.defined(t)){const i=`!event.item || event.item.mark.name !== ${de(t.name+Xg)}`;for(const s of t.events){if(!s.between){ue(`${s} is not an ordered event stream for interval selections.`);continue}const o=xe((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Ff,s=Ir(t.project.hasChannel).filter(a=>a.channel===vn||a.channel===Sr),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,l)=>a.concat(v7e(e,t,l,o&&o[l.index])),[])),e.hasProjection){const a=de(e.projectionName()),l=e.projectionName()+m7e,{x:u,y:c}=t.project.hasChannel,f=u&&u.signals.visual,d=c&&c.signals.visual,h=u?o&&o[u.index]:`${l}[0]`,p=c?o&&o[c.index]:`${l}[1]`,g=w=>e.getSizeSignalRef(w).signal,m=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;o&&(n.unshift({name:r+Eae,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(C=>C.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${m}, {markname: ${de(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${dh(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,x=s.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...o?[{signal:jy}]:[]],update:b}]})}else{if(!Su.defined(t)){const u=r+Sae,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=de(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=ya(m)?"+":"";return`(!isArray(${h}) || (${y}invert(${g}, ${p})[0] === ${y}${h}[0] && ${y}invert(${g}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=s.map(u=>u.signals.data),l=`unit: ${dh(e)}, fields: ${r+Hx}, values`;return n.concat({name:i,...o?{init:`{${l}: ${jh(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(En(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===jy).length||n.unshift({name:jy,value:null,on:[{events:"timer{1}",update:`${jy} === null ? {} : ${jy}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,l=`data(${de(t.name+Bh)})`;if(Su.defined(t)||!i&&!s)return n;const u={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of oe(u))u[m]=[{test:`${l}.length && ${l}[0].unit === ${dh(e)}`,...u[m]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=oe(h).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],m),{}),g=d??(t.translate?"move":null);return[{name:`${r+Xg}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:u}},...n,{name:r+Xg,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function v7e(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=de(i?e.scaleName(s):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(s===vn?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,h=Su.defined(t),p=e.getScaleComponent(s),g=p?p.get("type"):void 0,m=r?{init:jh(r,!0,l)}:{value:[]};return f.push({events:{signal:t.name+Sae},update:ya(g)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...m,on:f},{name:d,...r?{init:jh(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===vn?0:1,h=t.name+Eae,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const b7e={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+Hx,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Ir(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Xg):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${dh(e)}, `;if(t.project.hasSelectionId)u+=`${xa}: ${o}[${de(xa)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${de(e.vgField(d.channel,{}))}], ${o}[${de(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${de(d.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Ff,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function q0({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=Bx(t)&&t.condition;let o=[];s&&(o=xe(s).map(u=>{const c=i(u);if(l8e(u)){const{param:f,empty:d}=u;return{test:Bae(e,{param:f,empty:d}),...c}}else return{test:qC(e,u.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function zL(e,t="text"){const n=e.encoding[t];return q0({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>I$(r,e.config),invalidValueRef:void 0})}function I$(e,t,n="datum"){if(e){if(va(e))return fn(e.value);if(Qe(e)){const{format:r,formatType:i}=jC(e);return bL({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Cae(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(te(o))return{tooltip:QV({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return q0({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{const c=I$(u,i,a);if(c)return c;if(u===null)return;let f=Ht("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),we(f))return{value:f};if(ve(f))return Fe(f)?f:f.content==="encoding"?QV(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function kae(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function l(c,f){const d=hp(f),h=Li(c)?c:{...c,type:e[d].type},p=h.title||EL(h,i),g=xe(p).join(", ").replaceAll(/"/g,'\\"');let m;if(Wn(f)){const y=f==="x"?"x2":"y2",v=ba(e[y]);if(Ar(h.bin)&&v){const b=ye(h,{expr:o}),x=ye(v,{expr:o}),{format:w,formatType:C}=jC(h);m=zx(b,x,w,C,i),s.add(y)}}if((Wn(f)||f===Fo||f===$a)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=jC(h);m=bL({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}m??(m=I$(h,i,o).signal),a.push({channel:f,key:g,value:m})}kL(e,(c,f)=>{ce(c)?l(c,f):$$(c)&&l(c.condition,f)});const u={};for(const{channel:c,key:f,value:d}of a)!s.has(c)&&!u[f]&&(u[f]=d);return u}function QV(e,t,n,{reactiveGeom:r}={}){const i=kae(e,t,n,{reactiveGeom:r}),s=$f(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function x7e(e){const{markDef:t,config:n}=e,r=Ht("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...w7e(e),...S7e(e)}}function w7e(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Ht("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Se(XNe,t)?{}:{ariaRoleDescription:{value:t}}}function S7e(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return q0({model:e,channelDef:s,vgChannel:"description",mainRefFn:l=>I$(l,e.config),invalidValueRef:void 0});const o=Ht("description",n,r);if(o!=null)return{description:fn(o)};if(r.aria===!1)return{};const a=kae(t,i,r);if(!qt(a))return{description:{signal:$f(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Or(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=Ht(e,r,s,{vgChannel:o,ignoreVgConfig:!Bx(u)})),l!==void 0&&(a=fn(l)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=goe({...c,scaleChannel:e,channelDef:u});return q0({model:t,channelDef:u,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>vL({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function _ae(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Ht("filled",n,i),a=ot(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=Ht(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,u=Ht(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...l?{fill:fn(l)}:{},...u?{stroke:fn(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&ue(jse("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Or("color",e,{vgChannel:c,defaultValue:o?l:u}),...Or("fill",e,{defaultValue:r.fill?l:void 0}),...Or("stroke",e,{defaultValue:r.stroke?u:void 0})}}function E7e(e){const{encoding:t,mark:n}=e,r=t.order;return!Qf(n)&&va(r)?q0({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>fn(i.value),invalidValueRef:void 0}):{}}function n0({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:vL({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:fn(o),bandPosition:i})};const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function Ri(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,l=i[e],u=i[zl(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=n0({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=jL({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!l&&Wn(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:C7e({channel:e,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function C7e(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qe(n)&&i&&t===i.fieldChannel){if(ce(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return IC({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return ch(n,r,{suffix:"end"},{offset:s})}return yL(e)}function jL({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=hp(n),l=Af(n),u=Ht(n,s,o,{vgChannel:l});if(u!==void 0)return uv(n,u);switch(t){case"zeroOrMin":return JV({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return JV({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[hs(n)],mult:.5}}}}function JV({mainChannel:e,config:t,...n}){const r=poe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const k7e={left:"x",center:"xc",right:"x2"},_7e={top:"y",middle:"yc",bottom:"y2"};function $ae(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Af(e);const i=e==="x"?"align":"baseline",s=Ht(i,t,n);let o;return Fe(s)?(ue(_Ie(i)),o=void 0):o=s,e==="x"?k7e[o||(r==="top"?"left":"center")]:_7e[o||r]}function WC(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Aae(e,t,{defaultPos:n,defaultPos2:r}):Ri(e,t,{defaultPos:n})}function Aae(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=zl(e),a=hs(e),l=$7e(t,r,o),u=l[a]?$ae(e,i,s):Af(e);return{...Ri(e,t,{defaultPos:n,vgChannel:u}),...l}}function $7e(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,l=hp(n),u=hs(n),c=Af(n),f=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in s?n0({channel:n,markDef:s,encoding:r,model:e}):n0({channel:l,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=hs(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const g=A7e({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:h2(n,s)||h2(n,{[n]:t4(n,s,a.style),[u]:t4(u,s,a.style)})||h2(n,a[i])||h2(n,a.mark)||{[c]:jL({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function A7e({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return Qe(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?ch(t,s,{suffix:"start"},{offset:l}):yL({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function h2(e,t){const n=hs(e),r=Af(e);if(t[r]!==void 0)return{[r]:uv(e,t[r])};if(t[e]!==void 0)return{[r]:uv(e,t[e])};if(t[n]){const i=t[n];if(Lh(i))ue(xIe(n));else return{[n]:uv(e,i)}}}function Mu(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=zl(t),a=hs(t),l=r[t],u=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Ht("size",i,n,{vgChannel:a}),p=Cse(t),g=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return ce(l)&&(sn(l.bin)||Ar(l.bin)||l.timeUnit&&!u)&&!(h&&!Lh(h))&&!r[p]&&!xr(f)?F7e({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Qe(l)&&xr(f)||g)&&!u?R7e(l,t,e):Aae(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function T7e(e,t,n,r,i,s,o){if(Lh(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=kl("minBandSize",{type:o},r);return{signal:c?`max(${sa(c)}, ${u})`:u}}else i.band!==1&&(ue(RIe(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Fe(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(gp(l)&&_t(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=Vn(l,o==="tick"?f:o==="bar"?u:c);if(Fe(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(_t(d))return{signal:`${1-d} * ${e}`}}return{value:l4(r.view,e)-2}}function R7e(e,t,n){var $,F;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=hs(t),f=zl(t),d=Cse(t),h=n.scaleName(d),p=n.getScaleComponent(qI(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(i.size||r.size)&&(g?m=Or("size",n,{vgChannel:c,defaultRef:fn(r.size)}):ue(MIe(r.type)));const y=!!m,v=Soe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:($=u||p)==null?void 0:$.get("type"),useVlSizeChannel:g});m=m||{[c]:T7e(c,h||l,p||u,s,v,!!e,r.type)};const b=((F=u||p)==null?void 0:F.get("type"))==="band"&&Lh(v)&&!y?"top":"middle",x=$ae(t,r,s,b),w=x==="xc"||x==="yc",{offset:C,offsetType:S}=n0({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),k=yL({channel:t,channelDef:e,markDef:r,config:s,scaleName:l,scale:u,stack:o,offset:C,defaultRef:jL({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:w?S==="encoding"?0:.5:Fe(v)?{signal:`(1-${v})/2`}:Lh(v)?(1-v.band)/2:0});if(c)return{[x]:k,...m};{const O=Af(f),B=m[c],D=C?{...B,offset:C}:B;return{[x]:k,[O]:te(k)?[k[0],{...k[1],offset:D}]:{...k,offset:D}}}}function ZV(e,t,n,r,i,s,o){if(vse(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(Fe(n)||Fe(i)||Fe(r)||s){const u=sa(n),c=sa(i),f=sa(r),d=sa(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${l})`:l,g=f?`${f} + `:"",m=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:g+m+y}}else return i=i||0,r+(n?-i-l:+i+l)}function F7e({fieldDef:e,fieldDef2:t,channel:n,model:r}){var F;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),f=Soe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:u}),d=(F=r.component.axes[n])==null?void 0:F[0],h=(d==null?void 0:d.get("translate"))??.5,p=Wn(n)?Ht("binSpacing",s,i)??0:0,g=zl(n),m=Af(n),y=Af(g),v=kl("minBandSize",s,i),{offset:b}=n0({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:x}=n0({channel:g,markDef:s,encoding:o,model:r,bandPosition:0}),w=n8e({fieldDef:e,scaleName:l}),C=ZV(n,p,c,h,b,v,w),S=ZV(g,p,c,h,x??b,v,w),k=Fe(f)?{signal:`(1-${f.signal})/2`}:Lh(f)?(1-f.band)/2:.5,$=Tf({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(sn(e.bin)||e.timeUnit){const O=e.timeUnit&&$!==.5;return{[y]:eW({fieldDef:e,scaleName:l,bandPosition:k,offset:S,useRectOffsetField:O}),[m]:eW({fieldDef:e,scaleName:l,bandPosition:Fe(k)?{signal:`1-${k.signal}`}:1-k,offset:C,useRectOffsetField:O})}}else if(Ar(e.bin)){const O=ch(e,l,{},{offset:S});if(ce(t))return{[y]:O,[m]:ch(t,l,{},{offset:C})};if(pp(e.bin)&&e.bin.step)return{[y]:O,[m]:{signal:`scale("${l}", ${ye(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}ue(Vse(g))}function eW({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return IC({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:D$,endSuffix:N$}:{}})}const P7e=new Set(["aria","width","height"]);function Po(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?_ae(e):{};return{...O7e(e.markDef,t),...tW("fill",n),...tW("stroke",r),...Or("opacity",e),...Or("fillOpacity",e),...Or("strokeOpacity",e),...Or("strokeWidth",e),...Or("strokeDash",e),...E7e(e),...Cae(e),...zL(e,"href"),...x7e(e)}}function tW(e,t){return t?{[e]:t}:{}}function O7e(e,t){return GNe.reduce((n,r)=>(!P7e.has(r)&&le(e,r)&&t[r]!=="ignore"&&(n[r]=fn(e[r])),n),{})}function BL(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var u;let o;if(!jl(s)||!(o=e.getScaleType(s)))return;const a=m$(i.aggregate),l=mL({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(ZLe(l)){const c=e.vgField(s,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>x$(s,!0)).join(" && ")}}}function nW(e,t){if(t!==void 0)return{[e]:fn(t)}}const _3="voronoi",Tae={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(_3)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Qf(s))return ue(ZNe(s)),n;const o={name:e.getName(_3),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Cae(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const f=u.name??"";f===e.component.mark[0].name?a=c:f.includes(_3)&&(l=!0)}),l||n.splice(a+1,0,o),n}},Rae={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!FL(e.bind),parse:(e,t,n)=>Lae(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=Tae.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=yn(`${r}_${l.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:jh(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${de(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(u=>u.name===r+Ff),o=r+Hx,a=i.items.map(u=>yn(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},HC="_toggle",Fae={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+HC,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ff,r=t.name+HC;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${dh(e)}}, `)+`${r} ? ${n} : null`}},M7e={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=we(t.clear)?Wf(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Rae.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===yn(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Ff);r(i,"null"),Fae.defined(t)&&(i=n.findIndex(s=>s.name===t.name+HC),r(i,"false"))}return n}},Pae={defined:e=>{const t=e.resolve==="global"&&e.bind&&FL(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==xa;return t&&!n&&ue(rIe),t&&n},parse:(e,t,n)=>{const r=Xe(n);if(r.select=we(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Lae(t,r),ve(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=xe(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=S3(t.bind)?t.bind.legend:"click",s=we(i)?Wf(i,"view"):xe(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=S3(t.bind)&&t.bind.legend,s=o=>a=>{const l=Xe(a);return l.markname=o,l};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${yn(o.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Ff),o=r+Hx,a=i.items.filter(d=>d.hasLegend).map(d=>yn(`${r}_${yn(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const c=n.find(d=>d.name===r+HC),f=S3(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function D7e(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Ir(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&Pae.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const Oae="_translate_anchor",Mae="_translate_delta",N7e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Su.defined(t),s=r+Oae,{x:o,y:a}=t.project.hasChannel;let l=Wf(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+Xg,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?d4(e,vn):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?d4(e,Sr):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+Mae,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&rW(e,t,o,"width",n),a!==void 0&&rW(e,t,a,"height",n),n}};function rW(e,t,n,r,i){const s=t.name,o=s+Oae,a=s+Mae,l=n.channel,u=Su.defined(t),c=i.find(w=>w.name===n.signals[u?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d&&d.get("type"),p=d&&d.get("reverse"),g=u?l===vn?p?"":"-":p?"-":"":"",m=`${o}.extent_${l}`,y=`${g}${a}.${l} / ${u?`${f}`:`span(${m})`}`,v=!u||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",x=`${v}(${m}, ${y}${b})`;c.on.push({events:{signal:a},update:u?x:`clampRange(${x}, 0, ${f})`})}const Dae="_zoom_anchor",Nae="_zoom_delta",I7e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Su.defined(t),s=r+Nae,{x:o,y:a}=t.project.hasChannel,l=de(e.scaleName(vn)),u=de(e.scaleName(Sr));let c=Wf(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Xg,f))),n.push({name:r+Dae,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&iW(e,t,o,"width",n),a!==void 0&&iW(e,t,a,"height",n),n}};function iW(e,t,n,r,i){const s=t.name,o=n.channel,a=Su.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?d4(e,o):l.name,h=s+Nae,p=`${s}${Dae}.${o}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${g}(${d}, ${p}, ${h}${m})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const Bh="_store",Ff="_tuple",L7e="_modify",Iae="vlSelectionResolve",L$=[b7e,y7e,g7e,Fae,Rae,Su,Pae,M7e,N7e,I7e,Tae];function z7e(e){let t=e.parent;for(;t&&!Os(t);)t=t.parent;return t}function dh(e,{escape:t}={escape:!0}){let n=t?de(e.name):e.name;const r=z7e(e);if(r){const{facet:i}=r;for(const s of go)i[s]&&(n+=` + '__facet_${s}_' + (facet[${de(r.vgField(s))}])`)}return n}function UL(e){return Ir(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Lae(e,t){(we(t.select)||!t.select.on)&&delete e.events,(we(t.select)||!t.select.clear)&&delete e.clear,(we(t.select)||!t.select.toggle)&&delete e.toggle}function h4(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...h4(e.object)),t.push(...h4(e.property))),t)}function zae(e){return e.object.type==="MemberExpression"?zae(e.object):e.object.name==="datum"}function jae(e){const t=lI(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&zae(r)&&n.add(h4(r).slice(1).join("."))}),n}class G0 extends Ut{clone(){return new G0(null,this.model,Xe(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=qC(this.model,this.filter,this),this._dependentFields=jae(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function j7e(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=yn(i.name),o=i.select,a=we(o)?o:o.type,l=ve(o)?Xe(o):{type:a},u=r[a];for(const d in u)d==="fields"||d==="encodings"||(d==="mark"&&(l.mark={...u.mark,...l.mark}),(l[d]===void 0||l[d]===!0)&&(l[d]=Xe(u[d]??l[d])));const c=n[s]={...l,name:s,type:a,init:i.value,bind:i.bind,events:we(l.on)?Wf(l.on,"scope"):xe(Xe(l.on))},f=Xe(i);for(const d of L$)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function Bae(e,t,n,r="datum"){const i=we(t)?t:t.param,s=yn(i),o=de(s+Bh);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${de(a.resolve)})`,c=`${l}${o}, ${r}${u}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function Uae(e,t,n){const r=yn(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&ue(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${de(s)}.`);else if(i&&!s){const a=o.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,ue((a.length?"Multiple ":"No ")+`matching ${de(i)} encoding found for selection ${de(n.param)}. Using "field": ${de(s)}.`)):s=a[0].field}return`${o.name}[${de(_o(s))}]`}function B7e(e,t){for(const[n,r]of $f(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new rs(new G0(t,e,{param:n}),i,Mn.Lookup,e.component.data.outputNodeRefCounts)}}function qC(e,t,n){return lv(t,r=>we(r)?r:yLe(r)?Bae(e,r,n):toe(r))}function U7e(e,t){if(e)return te(e)&&!$c(e)?e.map(n=>EL(n,t)).join(", "):e}function $3(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function O1(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const p=h,g=S8e[p],m=c[p];if(g&&g!==t&&g!=="both")delete c[p];else if(Wx(m)){const{condition:y,...v}=m,b=xe(y),x=FV[p];if(x){const{vgProp:w,part:C}=x,S=[...b.map(k=>{const{test:$,...F}=k;return{test:qC(null,$),...F}}),v];$3(c,C,w,S),delete c[p]}else if(x===null){const w={signal:b.map(C=>{const{test:S,...k}=C;return`${qC(null,S)} ? ${gV(k)} : `}).join("")+gV(v)};c[p]=w}}else if(Fe(m)){const y=FV[p];if(y){const{vgProp:v,part:b}=y;$3(c,b,v,m),delete c[p]}}ot(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},qt(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Vn(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Fe(c.encode.labels.update.text)&&(p=Mh(a,"datum.label",c.encode.labels.update.text.signal)),$3(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of Poe)e.hasAxisPart(p)||delete c.encode[p];qt(c.encode)&&delete c.encode}const h=U7e(l,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Vn(u,0)}}}}function Vae(e){const{axes:t}=e.component,n=[];for(const r of Xu)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function V7e(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>O1(i,"grid",t)),...r.map(i=>O1(i,"grid",t)),...n.map(i=>O1(i,"main",t)),...r.map(i=>O1(i,"main",t))].filter(i=>i)}function sW(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...oe(o),...oe(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${s}" ? ${sa(o[c])} : ${sa(a[c])}`};return u}return t[i]})])}function W7e(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:soe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Fe(n)?"axisOrient":`axis${Ox(n)}`,a=[...i,...i.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:sW(a,r,e,n),vgAxisConfig:sW(l,r,e,n),axisConfigStyle:H7e([...l,...a],r)}}function H7e(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=xe(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function p4(e,t,n,r={}){var s;const i=Ose(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const oW={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??q7e(n,e),gridScale:({model:e,channel:t})=>G7e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Hae(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Wae(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Y7e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??K7e(t.type,n,ce(t)&&!!t.timeUnit,ce(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??J7e({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Z7e,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=qae(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return Dse(i?[TV(i)]:[],ce(o)?[TV(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>eze(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??tze(n,t)};function q7e(e,t){return!xr(e)&&ce(t)&&!sn(t==null?void 0:t.bin)&&!Ar(t==null?void 0:t.bin)}function G7e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function X7e(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Fe(s)?s:rb(s);{const{configValue:o}=p4("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?rb(o):n===vn&&ot([fL,cL],e.type)&&!(ce(e)&&e.timeUnit)?270:void 0}}function g4(e){return`(((${e.signal} % 360) + 360) % 360)`}function Wae(e,t,n,r){if(e!==void 0)if(n==="x"){if(Fe(e)){const i=g4(e),s=Fe(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Fe(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Fe(e)){const i=g4(e),s=Fe(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Fe(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Hae(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Fe(e)){const o=g4(e),a=Fe(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Fe(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Y7e(e,t){if(t==="x"&&ot(["quantitative","temporal"],e))return!0}function K7e(e,t,n,r){if(n&&!ve(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Q7e(e){return e==="x"?"bottom":"left"}function J7e({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!xr(t)&&t!=="log"){if(ce(e)){if(sn(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ot(["month","hours","day","quarter"],(i=vr(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Z7e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ce(t)){const{timeUnit:n}=t;if(n){const r=Jse(n);if(r)return{signal:r}}}}function qae(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return Nse(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function eze(e,t){const n=e.values;if(te(n))return Foe(t,n);if(Fe(n))return n}function tze(e,t){return e==="rect"&&zC(t)?1:0}class r0 extends Ut{clone(){return new r0(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=jae(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(vp(r)&&woe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,l=a.map((u,c)=>`${toe({field:s,timeUnit:o,equal:u})} ? ${c} : `).join("")+a.length;t=new r0(t,{calculate:l,as:i0(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${ft(this.transform)}`}}function i0(e,t,n){return ye(e,{prefix:t,suffix:"sort_index",...n})}function z$(e,t){return ot(["top","bottom"],t)?"column":ot(["left","right"],t)||e==="row"?"row":"column"}function s0(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Vn((t||{})[e],i[e],n.header[e])}function j$(e,t,n,r){const i={};for(const s of e){const o=s0(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const VL=["row","column"],WL=["header","footer"];function nze(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=j$(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=z$(t,a),u=rb(o);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Xae(u,l),...Gae(l,u,s),...Yae(r,i,t,W8e,Koe)}}}function Gae(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Hae(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Xae(e,t){const n=Wae(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function rze(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of WL)if(n[i])for(const s of n[i]){const o=sze(e,t,i,n,s);o!=null&&r.push(o)}return r}function ize(e,t){const{sort:n}=e;return wu(n)?{field:ye(n,{expr:"datum"}),order:n.order??"ascending"}:te(n)?{field:i0(e,t,{expr:"datum"}),order:"ascending"}:{field:ye(e,{expr:"datum"}),order:n??"ascending"}}function m4(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=j$(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=bL({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=z$(t,a);return{text:{signal:l?Mh(Mh(l,"datum.label",u),"datum.value",ye(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Xae(s,c),...Gae(c,s,o),...Yae(n,e,t,H8e,Qoe)}}function sze(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=j$(["labelOrient"],o.header,a,t);(t==="row"&&!ot(["top","bottom"],f)||t==="column"&&!ot(["left","right"],f))&&(s=m4(o,t,a))}const l=Os(e)&&!jx(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:ize(o,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const oze={column:{start:0,end:1},row:{start:1,end:0}};function aze(e,t){return oze[t][e]}function lze(e,t){const n={};for(const r of go){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=j$(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=z$(r,o),l=aze(s,a);l!==void 0&&(n[a]=l)}}return qt(n)?void 0:n}function Yae(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=s0(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function HL(e){return[...p2(e,"width"),...p2(e,"height"),...p2(e,"childWidth"),...p2(e,"childHeight")]}function p2(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(xr(o)&&gp(a)){const l=e.scaleName(n);return Os(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[aW(l,a)]:[aW(l,a),{name:i,update:Kae(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=a4(e.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function aW(e,t){const n=`${e}_step`;return Fe(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Kae(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Vn(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${sa(o)}, ${sa(s)}) * ${e}_step`}function Qae(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Jae(e,t){return oe(e).reduce((n,r)=>({...n,...q0({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>fn(i.value),invalidValueRef:void 0})}),{})}function Zae(e,t){if(Os(t))return e==="theta"?"independent":"shared";if(K0(t))return"shared";if(JL(t))return Wn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function qL(e,t){const n=e.scale[t],r=Wn(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&ue(zIe(t)),"independent"):e[r][t]||"shared"}const uze={...X8e,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},ele=oe(uze);class cze extends Ku{}const lW={symbols:fze,gradient:dze,labels:hze,entries:pze};function fze(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:l,mark:u}=n,c=o.filled&&u!=="trail";let f={...KNe({},n,VLe),..._ae(n,{filled:c})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=d===void 0?tle(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===fs)delete f.fill;else if(le(f.fill,"field"))h?delete f.fill:(f.fill=fn(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=fn(g??1));else if(te(f.fill)){const m=y4(a.fill??a.color)??o.fill??(c&&o.color);m&&(f.fill=fn(m))}}if(f.stroke){if(r==="stroke"||!c&&r===fs)delete f.stroke;else if(le(f.stroke,"field")||p)delete f.stroke;else if(te(f.stroke)){const m=Vn(y4(a.stroke||a.color),o.stroke,c?o.color:void 0);m&&(f.stroke={value:m})}}if(r!==Gu){const m=ce(t)&&rle(n,i,t);m?f.opacity=[{test:m,...fn(g??1)},fn(l.legend.unselectedOpacity)]:g&&(f.opacity=fn(g))}return f={...f,...e},qt(f)?void 0:f}function dze(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?tle(o.opacity)||s.opacity:void 0;return u&&(a.opacity=fn(u)),a={...a,...e},qt(a)?void 0:a}function hze(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=ce(t)?rle(n,i,t):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s;let f;zh(c)?f=oa({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:o}):u===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=oa({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&ce(t)&&t.timeUnit===void 0&&(f=oa({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...l?{opacity:l}:{},...f?{text:f}:{},...e};return qt(d)?void 0:d}function pze(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function tle(e){return nle(e,(t,n)=>Math.max(t,n.value))}function y4(e){return nle(e,(t,n)=>Vn(t,n.value))}function nle(e,t){if(c8e(e))return xe(e.condition).reduce(t,e.value);if(va(e))return e.value}function rle(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=de(n.field);return r.map(s=>`(!length(data(${de(yn(s)+Bh)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const uW={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return voe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return boe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??wze(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Sze(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??mze(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Gg(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(qg(n)&&ol(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>gze(t,e)};function gze(e,t){const n=e.values;if(te(n))return Foe(t,n);if(Fe(n))return n}function mze(e,t,n,r){if(t!=="shape"){const i=y4(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function yze(e){const{legend:t}=e;return Vn(t.type,vze(e))}function vze({channel:e,timeUnit:t,scaleType:n}){if(qg(e)){if(ot(["quarter","month","day"],t))return"symbol";if(ol(n))return"gradient"}return"symbol"}function bze({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??xze(n,t)}function xze(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function wze({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(ol(i))return n==="horizontal"?r==="top"||r==="bottom"?cW(t,"width",o,s):o:cW(t,"height",l,a)}function cW(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Sze(e){if(ot(["quantile","threshold","log","symlog"],e))return"greedy"}function ile(e){const t=En(e)?Eze(e):$ze(e);return e.component.legends=t,t}function Eze(e){const{encoding:t}=e,n={};for(const r of[fs,...Zoe]){const i=rr(t[r]);!i||!e.getScaleComponent(r)||r===ds&&ce(i)&&i.type===H0||(n[r]=_ze(e,r))}return n}function Cze(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function kze(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function _ze(e,t){var x;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new cze({},Cze(e,t));D7e(e,t,a);const l=n!==void 0?!n:o.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=rr(i[t]),f=ce(c)?(x=vr(c.timeUnit))==null?void 0:x.unit:void 0,d=n.orient||s.legend.orient||"right",h=yze({legend:n,channel:t,timeUnit:f,scaleType:u}),p=bze({legend:n,legendType:h,orient:d,legendConfig:o}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:u,orient:d,legendType:h,direction:p};for(const w of ele){if(h==="gradient"&&w.startsWith("symbol")||h==="symbol"&&w.startsWith("gradient"))continue;const C=w in uW?uW[w](g):n[w];if(C!==void 0){const S=kze(C,w,n,e.fieldDef(t));(S||s.legend[w]===void 0)&&a.set(w,C,S)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const w of["labels","legend","title","symbols","gradient","entries"]){const C=Jae(m[w]??{},e),S=w in lW?lW[w](C,b):C;S!==void 0&&!qt(S)&&(v[w]={...y!=null&&y.length&&ce(c)?{name:`${yn(c.field)}_legend_${w}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return qt(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function $ze(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){ile(r);for(const i of oe(r.component.legends))n.legend[i]=qL(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=sle(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of oe(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function sle(e,t){var s,o,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of ele){const c=Rf(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(f,d)=>{switch(u){case"symbolType":return Aze(f,d);case"title":return Ise(f,d);case"type":return i=!0,bs("symbol")}return M$(f,d,u,"legend")});e.setWithExplicit(u,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&MC(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&MC(e.explicit,["encode","gradient"])),e}function Aze(e,t){return t.value==="circle"?t:e}function Tze(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function ole(e){const t=e.component.legends,n={};for(const i of oe(t)){const s=e.getScaleComponent(i),o=Gt(s.get("domains"));if(n[o])for(const a of n[o])sle(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Ir(n).flat().map(i=>Rze(i,e.config)).filter(i=>i!==void 0)}function Rze(e,t){var o,a,l;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const u=s.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!s.stroke&&(u.stroke={value:"transparent"});for(const c of Zoe)s[c]&&delete u[c]}if(s.title||delete s.title,r!==void 0){let u=r;(l=(a=s.encode)==null?void 0:a.labels)!=null&&l.update&&Fe(s.encode.labels.update.text)&&(u=Mh(r,"datum.label",s.encode.labels.update.text.signal)),Tze(s,"labels","text",{signal:u})}return s}}function Fze(e){return K0(e)||JL(e)?Pze(e):ale(e)}function Pze(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),ale(e))}function ale(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const l=Fe(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return ot(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Oze=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class lle extends Ku{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function ule(e){e.component.projection=En(e)?Mze(e):Ize(e)}function Mze(e){if(e.hasProjection){const t=Tr(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Dze(e):void 0,s=new lle(e.projectionName(!0),{...Tr(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Dze(e){const t=[],{encoding:n}=e;for(const r of[[Ta,Aa],[$o,Ra]])(rr(n[r[0]])||rr(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ds)&&e.typedFieldDef(ds).type===H0&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Mn.Main)),t}function Nze(e,t){const n=zI(Oze,i=>!!(!Se(e.explicit,i)&&!Se(t.explicit,i)||Se(e.explicit,i)&&Se(t.explicit,i)&&Ts(e.get(i),t.get(i))));if(Ts(e.size,t.size)){if(n)return e;if(Ts(e.explicit,{}))return t;if(Ts(t.explicit,{}))return e}return null}function Ize(e){if(e.children.length===0)return;let t;for(const r of e.children)ule(r);const n=zI(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Nze(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new lle(r,t.specifiedProjection,t.size,Xe(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Lze(e,t,n,r){if(Vx(t,n)){const i=En(e)?e.axis(n)??e.legend(n)??{}:{},s=ye(t,{expr:"datum"}),o=ye(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ye(t,{binSuffix:"range",forAs:!0}),formula:zx(s,o,i.format,i.formatType,r)}}return{}}function cle(e,t){return`${Tse(e)}_${t}`}function zze(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function GL(e,t,n){const r=A$(n,void 0)??{},i=cle(r,t);return e.getName(`${i}_bins`)}function jze(e){return"as"in e}function fW(e,t,n){let r,i;jze(e)?r=we(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ye(e,{forAs:!0}),ye(e,{binSuffix:"end",forAs:!0})];const s={...A$(t,void 0)},o=cle(s,e.field),{signal:a,extentSignal:l}=zze(n,o);if(y$(s.extent)){const c=s.extent;i=Uae(n,c.param,c),delete s.extent}const u={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:o,binComponent:u}}class gl extends Ut{clone(){return new gl(null,Xe(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Li(s)&&sn(s.bin)){const{key:a,binComponent:l}=fW(s,s.bin,n);i[a]={...l,...i[a],...Lze(n,s,o,n.config)}}return i},{});return qt(r)?null:new gl(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=fW(n,n.bin,r);return new gl(t,{[i]:s})}merge(t,n){for(const r of oe(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=sl([...this.bins[r].as,...t.bins[r].as],ft)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ir(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ir(this.bins).map(t=>t.field))}hash(){return`Bin ${ft(this.bins)}`}assemble(){return Ir(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:_o(t.field),as:r,signal:t.signal,...y$(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:_o(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:ye({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Bze(e,t,n,r){var s;const i=En(r)?r.encoding[zl(t)]:void 0;if(Li(n)&&En(r)&&Eoe(n,i,r.markDef,r.config)){e.add(ye(n,{})),e.add(ye(n,{suffix:"end"}));const{mark:o,markDef:a,config:l}=r,u=Tf({fieldDef:n,markDef:a,config:l});ib(o)&&u!==.5&&Wn(t)&&(e.add(ye(n,{suffix:D$})),e.add(ye(n,{suffix:N$}))),n.bin&&Vx(n,t)&&e.add(ye(n,{binSuffix:"range"}))}else if(xse(t)){const o=bse(t);e.add(r.getName(o))}else e.add(ye(n));return vp(n)&&RLe((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Uze(e,t){for(const n of oe(t)){const r=t[n];for(const i of oe(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class ua extends Ut{clone(){return new ua(null,new Set(this.dimensions),Xe(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ye(o,{forAs:!0})]);else{if(Ou(l)||Kf(l)){const c=Ou(l)?"argmin":"argmax",f=l[c];i[f]??(i[f]={}),i[f][c]=new Set([ye({op:c,field:f},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([ye(o,{forAs:!0})]);jl(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([ye({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([ye({field:u,aggregate:"max"},{forAs:!0})]))}else Bze(s,a,o,n)}),s.size+oe(i).length===0)?null:new ua(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:l,as:u}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([u||ye(o,{forAs:!0})])):(s[l]??(s[l]={}),(r=s[l])[a]??(r[a]=new Set),s[l][a].add(u||ye(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+oe(s).length===0?null:new ua(t,i,s)}merge(t){return fse(this.dimensions,t.dimensions)?(Uze(this.measures,t.measures),!0):(tLe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...oe(this.measures)])}producedFields(){const t=new Set;for(const n of oe(this.measures))for(const r of oe(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${ft({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of oe(this.measures))for(const o of oe(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:_o(s));return{type:"aggregate",groupby:[...this.dimensions].map(_o),ops:t,fields:n,as:r}}}class X0 extends Ut{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of go){const o=n.facet[s];if(o){const{bin:a,sort:l}=o;this[s]={name:n.getName(`${s}_domain`),fields:[ye(o),...sn(a)?[ye(o,{binSuffix:"end"})]:[]],...wu(l)?{sortField:l}:te(l)?{sortIndexField:i0(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of go)this[n]&&(t+=` ${n.charAt(0)}:${ft(this[n])}`);return t}get fields(){var n;const t=[];for(const r of go)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of go)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Xu){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(xr(i)&&gp(s)){const o=B$(this.childModel,n),a=QL(o);a?t[n]=a:ue(ZI(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=k$,field:f}=l;s.push(f),o.push(c),a.push(ye(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const u of VL){for(const c of WL){const f=(r[u]&&r[u][c])??[];for(const d of f)if(((l=d.axes)==null?void 0:l.length)>0){s[u]=!0;break}}if(s[u]){const c=`length(data("${this.facet.name}"))`,f=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[xu,bu])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function dW(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Vze(e,t){const n=UI(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=dW(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=dW(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return ue(cIe(t)),null}function Wze(e){const t={};return MS(e.filter,n=>{if(eoe(n)){let r=null;rL(n)?r=ks(n.equal):sL(n)?r=ks(n.lte):iL(n)?r=ks(n.lt):oL(n)?r=ks(n.gt):aL(n)?r=ks(n.gte):lL(n)?r=n.range[0]:uL(n)&&(r=(n.oneOf??n.in)[0]),r&&(mp(r)?t[n.field]="date":_t(r)?t[n.field]="number":we(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Hze(e){const t={};function n(r){e0(r)?t[r.field]="date":r.type==="quantitative"&&BNe(r.aggregate)?t[r.field]="number":Gm(r.field)>1?r.field in t||(t[r.field]="flatten"):vp(r)&&wu(r.sort)&&Gm(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((En(e)||Os(e))&&e.forEachFieldDef((r,i)=>{if(Li(r))n(r);else{const s=hp(i),o=e.fieldDef(s);n({...r,type:o.type})}}),En(e)){const{mark:r,markDef:i,encoding:s}=e;if(Qf(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];ce(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function qze(e){const t={};if(En(e)&&e.component.selection)for(const n of oe(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Gm(i.field)>1&&(t[i.field]="flatten")}return t}class si extends Ut{clone(){return new si(null,Xe(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${ft(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!sf(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of oe(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:ue(wV(a,r[a],l.value)))}for(const a of oe(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:ue(wV(a,n[a],l)))}const s=new Ku(n,r);i.copyAll(s);const o={};for(const a of oe(s.combine())){const l=s.get(a);l!==null&&(o[a]=l)}return oe(o).length===0||i.parseNothing?null:new si(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of oe(this._parse)){const r=this._parse[n];Gm(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(oe(this._parse))}dependentFields(){return new Set(oe(this._parse))}assembleTransforms(t=!1){return oe(this._parse).filter(n=>t?Gm(n)>1:!0).map(n=>{const r=Vze(n,this._parse[n]);return r?{type:"formula",expr:r,as:V0(n)}:null}).filter(n=>n!==null)}}class Pf extends Ut{clone(){return new Pf(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([xa])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:xa}}}class qx extends Ut{clone(){return new qx(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${ft(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Gx extends Ut{clone(){return new Gx(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${ft(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Uh extends Ut{constructor(t){super(null),t??(t={name:"source"});let n;if(sf(t)||(n=t.format?{...ns(t.format,["parse"])}:{}),sb(t))this._data={values:t.values};else if(t0(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];ot(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else yae(t)?this._data={values:[{type:"Sphere"}]}:(gae(t)||sf(t))&&(this._data={});this._generator=sf(t),t.name&&(this._name=t.name),n&&!qt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var hW=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Gze=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},M1;function XL(e){return e instanceof Uh||e instanceof qx||e instanceof Gx}class YL{constructor(){M1.set(this,void 0),hW(this,M1,!1,"f")}setModified(){hW(this,M1,!0,"f")}get modifiedFlag(){return Gze(this,M1,"f")}}M1=new WeakMap;class bp extends YL{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class KL extends YL{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Xze extends KL{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of oe(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Yze extends KL{constructor(t){super(),this.requiresSelectionId=t&&UL(t)}run(t){t instanceof Pf&&(this.requiresSelectionId&&(XL(t.parent)||t.parent instanceof ua||t.parent instanceof si)||(this.setModified(),t.remove()))}}class Kze extends YL{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof pl&&(r=t.producedFields(),jI(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Qze extends KL{constructor(){super()}run(t){t instanceof rs&&!t.isRequired()&&(this.setModified(),t.remove())}}class Jze extends bp{run(t){if(!XL(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof si)if(t instanceof si)this.setModified(),t.merge(n);else{if(BI(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Zze extends bp{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof si);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const l of oe(a))l in i?i[l]!==a[l]&&s.add(l):i[l]=a[l]}for(const o of s)delete i[o];if(!qt(i)){this.setModified();const o=new si(t,i);for(const a of n){if(a instanceof si)for(const l of oe(i))delete a.parse[l];t.removeChild(a),a.parent=o,a instanceof si&&oe(a.parse).length===0&&a.remove()}}}}}class eje extends bp{run(t){t instanceof rs||t.numChildren()>0||t instanceof X0||t instanceof Uh||(this.setModified(),t.remove())}}class tje extends bp{run(t){const n=t.children.filter(i=>i instanceof pl),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class nje extends bp{run(t){const n=t.children.filter(i=>i instanceof ua),r={};for(const i of n){const s=ft(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of oe(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class rje extends bp{constructor(t){super(),this.model=t}run(t){const n=!(XL(t)||t instanceof G0||t instanceof si||t instanceof Pf),r=[],i=[];for(const s of t.children)s instanceof gl&&(n&&!BI(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof gl?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class ije extends bp{run(t){const n=[...t.children];if(!qm(n,o=>o instanceof rs)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof rs){let a=o;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof rs)a=l;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class xp extends Ut{clone(){return new xp(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sl(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ye(t)}hash(){return`JoinAggregateTransform ${ft(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class o0 extends Ut{clone(){return new o0(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,f)=>{const d=jl(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,g=mL({scaleChannel:f,markDef:s,config:i,scaleType:h,isCountAggregate:m$(p)});g!=="show"&&g!=="always-valid"&&(u[c.field]=c)}return u},{});return oe(l).length?new o0(t,l):null}dependentFields(){return new Set(oe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${ft(this.filter)}`}assemble(){const t=oe(this.filter).reduce((n,r)=>{const i=this.filter[r],s=ye(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${v4(s)}))`):i.type==="quantitative"&&n.push(v4(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function v4(e){return`isValid(${e}) && isFinite(+${e})`}function sje(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ye(r);return i&&t.push(i),t},[])}function oje(e){return te(e)&&e.every(t=>we(t))&&e.length>1}class Eu extends Ut{clone(){return new Eu(null,Xe(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),l.push(Vn(f.order,"ascending"));const u={field:a,order:l};let c;return oje(s)?c=s:we(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Eu(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=r,u=s.map(h=>{const p=i[h];return ba(p)}).filter(h=>!!h),c=sje(n),f=n.encoding.order;let d;if(te(f)||ce(f))d=Mse(f);else{const h=Coe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new Eu(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${ft(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ye(i,{binSuffix:"mid"})]:[ye(i,{}),ye(i,{binSuffix:"end"})]:[ye(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ye(c,{expr:"datum"}),p=ye(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${v4(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:ye(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:ye(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:u,offset:a}),t}}class Y0 extends Ut{clone(){return new Y0(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sl(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ye(t)}hash(){return`WindowTransform ${ft(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>QI(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),l.push(f.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function aje(e){function t(n){if(!(n instanceof X0)){const r=n.clone();if(r instanceof rs){const i=x4+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof ua||r instanceof Eu||r instanceof Y0||r instanceof xp)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function b4(e){if(e instanceof X0)if(e.numChildren()===1&&!(e.children[0]instanceof rs)){const t=e.children[0];(t instanceof ua||t instanceof Eu||t instanceof Y0||t instanceof xp)&&t.addDimensions(e.fields),t.swapWithParent(),b4(e)}else{const t=e.model.component.data.main;fle(t);const n=aje(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(b4)}function fle(e){if(e instanceof rs&&e.type===Mn.Main&&e.numChildren()===1){const t=e.children[0];t instanceof X0||(t.swapWithParent(),fle(e))}}const x4="scale_",g2=5;function w4(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!w4(t.children))return!1}return!0}function Io(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function pW(e,t,n){let r=e.sources,i=!1;return i=Io(new Qze,r)||i,i=Io(new Yze(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Io(new eje,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Io(new Jze,r)||i,i=Io(new rje(t),r)||i,i=Io(new Kze,r)||i,i=Io(new Zze,r)||i,i=Io(new nje,r)||i,i=Io(new tje,r)||i,i=Io(new Xze,r)||i,i=Io(new ije,r)||i),e.sources=r,i}function lje(e,t){w4(e.sources);let n=0,r=0;for(let i=0;i<g2&&pW(e,t,!0);i++)n++;e.sources.map(b4);for(let i=0;i<g2&&pW(e,t,!1);i++)r++;w4(e.sources),Math.max(n,r)===g2&&ue(`Maximum optimization runs(${g2}) reached.`)}class dr{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new dr(()=>t(n))}}function dle(e){En(e)?uje(e):cje(e)}function uje(e){const t=e.component.scales;for(const n of oe(t)){const r=dje(e,n);if(t[n].setWithExplicit("domains",r),pje(e,n),e.component.data.isFaceted){let s=e;for(;!Os(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)fu(a)&&(a.data=x4+a.data.replace(x4,""))}}}function cje(e){for(const n of e.children)dle(n);const t=e.component.scales;for(const n of oe(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Rf(r,o.getWithExplicit("domains"),"domains","scale",S4);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&ue(oIe),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function fje(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=gW(t,n);if(!i){ue(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=gW(t,n);if(i)return"unaggregated"}return e}function dje(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=fje(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&rr(r.x2)?rr(r.x)?Rf(xc(n,i,e,"x"),xc(n,i,e,"x2"),"domain","scale",S4):xc(n,i,e,"x2"):t==="y"&&rr(r.y2)?rr(r.y)?Rf(xc(n,i,e,"y"),xc(n,i,e,"y2"),"domain","scale",S4):xc(n,i,e,"y2"):xc(n,i,e,t)}function hje(e,t,n){return e.map(r=>({signal:`{data: ${T$(r,{timeUnit:n,type:t})}}`}))}function A3(e,t,n){var i;const r=(i=vr(n))==null?void 0:i.unit;return t==="temporal"||r?hje(e,t,r):[e]}function xc(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:l}=n,u=rr(i[r]),{type:c}=u,f=u.timeUnit,d=a7e({invalid:kl("invalid",s,a),isPath:Qf(o)});if(TLe(t)){const g=xc(e,void 0,n,r),m=A3(t.unionWith,c,f);return Ha([...m,...g.value])}else{if(Fe(t))return Ha([t]);if(t&&t!=="unaggregated"&&!aoe(t))return Ha(A3(t,c,f))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return bs([[0,1]]);const g=n.requestDataName(d);return bs([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=jl(r)&&ce(u)?gje(n,r,e):void 0;if(Bl(u)){const g=A3([u.datum],c,f);return bs(g)}const p=u;if(t==="unaggregated"){const{field:g}=u;return bs([{data:n.requestDataName(d),field:ye({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:ye({field:g,aggregate:"max"})}])}else if(sn(p.bin)){if(xr(e))return bs(e==="bin-ordinal"?[]:[{data:nb(h)?n.requestDataName(d):n.requestDataName(Mn.Raw),field:n.vgField(r,Vx(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!ve(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if(sn(g)){const m=GL(n,p.field,g);return bs([new dr(()=>{const y=n.getSignalName(m);return`[${y}.start, ${y}.stop]`})])}else return bs([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&ot(["time","utc"],e)){const g=i[zl(r)];if(Eoe(p,g,s,a)){const m=n.requestDataName(d),y=Tf({fieldDef:p,fieldDef2:g,markDef:s,config:a}),v=ib(o)&&y!==.5&&Wn(r);return bs([{data:m,field:n.vgField(r,v?{suffix:D$}:{})},{data:m,field:n.vgField(r,{suffix:v?N$:"end"})}])}}return bs(h?[{data:nb(h)?n.requestDataName(d):n.requestDataName(Mn.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function T3(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":k$),...r?{field:_o(r)}:{},...i?{order:i}:{}}}function pje(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=aoe(r)?r:void 0,o=pp(i)&&y$(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function gje(e,t,n){if(!xr(n))return;const r=e.fieldDef(t),i=r.sort;if(woe(i))return{op:"min",field:i0(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(wu(i)){const a=s&&!o.has(i.field);return T3(i,a)}else if(a8e(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:f}=u,d=s&&!o.has(f);if(Ou(c)||Kf(c))return T3({field:ye(u),order:l},d);if(QI(c)||!c)return T3({op:c,field:f,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(ot(["ascending",void 0],i))return!0}}function gW(e,t){const{aggregate:n,type:r}=e;return n?we(n)&&!VNe.has(n)?{valid:!1,reason:PIe(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:OIe(e)}:{valid:!0}:{valid:!1,reason:FIe(e)}}function S4(e,t,n,r){return e.explicit&&t.explicit&&ue(LIe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function mje(e){const t=sl(e.map(o=>{if(fu(o)){const{sort:a,...l}=o;return l}return o}),ft),n=sl(e.map(o=>{if(fu(o)){const a=o.sort;return a!==void 0&&!nb(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),ft);if(t.length===0)return;if(t.length===1){const o=e[0];if(fu(o)&&n.length>0){let a=n[0];if(n.length>1){ue(EV);const l=n.filter(u=>ve(u)&&"op"in u&&u.op!=="min");n.every(u=>ve(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(ve(a)&&"field"in a){const l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=sl(n.map(o=>nb(o)||!("op"in o)||we(o.op)&&Se(zNe,o.op)?o:(ue(jIe(o)),!0)),ft);let i;r.length===1?i=r[0]:r.length>1&&(ue(EV),i=!0);const s=sl(e.map(o=>fu(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function QL(e){if(fu(e)&&we(e.field))return e.field;if(WNe(e)){let t;for(const n of e.fields)if(fu(n)&&we(n.field)){if(!t)t=n.field;else if(t!==n.field)return ue(BIe),t}return ue(UIe),t}else if(HNe(e)){ue(VIe);const t=e.fields[0];return we(t)?t:void 0}}function B$(e,t){const r=e.component.scales[t].get("domains").map(i=>(fu(i)&&(i.data=e.lookupDataSource(i.data)),i));return mje(r)}function hle(e){return K0(e)||JL(e)?e.children.reduce((t,n)=>t.concat(hle(n)),mW(e)):mW(e)}function mW(e){return oe(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:c,...f}=i,d=yje(i.range,s,n,e),h=B$(e,n),p=a?h7e(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function yje(e,t,n,r){if(Wn(n)){if(gp(e))return{step:{signal:`${t}_step`}}}else if(ve(e)&&fu(e))return{...e,data:r.lookupDataSource(e.data)};return e}class ple extends Ku{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(ot([Fr.LOG,Fr.TIME,Fr.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&ot([Fr.LINEAR,Fr.SQRT,Fr.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(te(a)){const l=a[0],u=a[a.length-1];if(_t(l)&&_t(u))if(l<=0&&u>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const vje=["range","scheme"];function bje(e){const t=e.component.scales;for(const n of KI){const r=t[n];if(!r)continue;const i=xje(n,e);r.setWithExplicit("range",i)}}function yW(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=hs(t),o=e.getName(s);if(ve(r)&&r.binned&&r.step!==void 0)return new dr(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${l})`});if(sn(r)){const a=GL(e,i,r);return new dr(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(o)} / (${u})`})}}}function xje(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of vje)if(n[f]!==void 0){const d=i4(s,f),h=loe(e,f);if(!d)ue(Bse(s,f,e));else if(h)ue(h);else switch(f){case"range":{const p=n.range;if(te(p)){if(Wn(e))return Ha(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return dr.fromName(y,m)}return g}))}else if(ve(p))return Ha({data:t.requestDataName(Mn.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Ha(p)}case"scheme":return Ha(wje(n[f]))}}const o=e===vn||e==="xOffset"?"width":"height",a=r[o];if($l(a)){if(Wn(e))if(xr(s)){const f=mle(a,t,e);if(f)return Ha({step:f})}else ue(Use(o));else if(Nx(e)){const f=e===Hf?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=yle(a,s);if(p)return Ha(p)}}}const{rangeMin:l,rangeMax:u}=n,c=Sje(e,t);return(l!==void 0||u!==void 0)&&i4(s,"rangeMin")&&te(c)&&c.length===2?Ha([l??c[0],u??c[1]]):bs(c)}function wje(e){return ALe(e)?{scheme:e.name,...ns(e,["name"])}:{scheme:e}}function gle(e,t,n,{center:r}={}){const i=hs(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Sr&&ya(n)?r?[dr.fromName(a=>`${o(a)}/2`,s),dr.fromName(a=>`-${o(a)}/2`,s)]:[dr.fromName(o,s),0]:r?[dr.fromName(a=>`-${o(a)}/2`,s),dr.fromName(a=>`${o(a)}/2`,s)]:[0,dr.fromName(o,s)]}function Sje(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=rr(s[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case vn:case Sr:{if(ot(["point","band"],l)){const f=vle(e,n,r.view);if($l(f))return{step:mle(f,t,e)}}return gle(e,t,l)}case Hf:case W0:return Eje(e,t,l);case qu:{const f=_je(i,r),d=$je(i,n,t,r);return Qm(l)?kje(f,d,Cje(l,r,u,e)):[f,d]}case Fo:return[0,Math.PI*2];case dp:return[0,360];case $a:return[0,new dr(()=>{const f=t.getSignalName(Os(t.parent)?"child_width":"width"),d=t.getSignalName(Os(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Xf:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Yf:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ds:return"symbol";case fs:case Il:case Ll:return l==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Gu:case qf:case Gf:return[r.scale.minOpacity,r.scale.maxOpacity]}}function mle(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=qI(n),o=r[s];if(tae({step:e,offsetIsDiscrete:Qe(o)&&noe(o.type)})==="offset"&&Doe(r,s)){const l=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${YNe(f)})`}}else return e.step}function yle(e,t){if(tae({step:e,offsetIsDiscrete:xr(t)})==="offset")return{step:e.step}}function Eje(e,t,n){const r=e===Hf?"x":"y",i=t.getScaleComponent(r);if(!i)return gle(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:l}=t;if(s==="band"){const u=vle(r,t.size,t.config.view);if($l(u)){const c=yle(u,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const u=t.encoding[r];if(ce(u)&&u.timeUnit){const c=Jse(u.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Tf({fieldDef:u,markDef:a,config:l})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Fe(f)?`${f.signal}/2`+h:`${f/2+d}`,g=Fe(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${g} * (${c})`}]}return[0,{signal:c}]}return use(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function vle(e,t,n){const r=e===vn?"width":"height",i=t[r];return i||VC(n,r)}function Cje(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&te(n)?n.length+1:(ue(JIe(r)),3)}}function kje(e,t,n){const r=()=>{const i=sa(t),s=sa(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Fe(t)?new dr(r):{signal:r()}}function _je(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(v$("size",e))}const vW=.95;function $je(e,t,n,r){const i={x:yW(n,"x"),y:yW(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=bW(t,i,r.view);return _t(s)?s-1:new dr(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=bW(t,i,r.view);return _t(s)?Math.pow(vW*s,2):new dr(()=>`pow(${vW} * ${s.signal}, 2)`)}}throw new Error(v$("size",e))}function bW(e,t,n){const r=$l(e.width)?e.width.step:l4(n,"width"),i=$l(e.height)?e.height.step:l4(n,"height");return t.x||t.y?new dr(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function ble(e,t){En(e)?Aje(e,t):wle(e,t)}function Aje(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of oe(n)){const l=o[a],u=n[a],c=e.getScaleComponent(a),f=rr(i[a]),d=l[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=i4(h,t),y=loe(a,t);if(d!==void 0&&(m?y&&ue(y):ue(Bse(h,t,a))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":mp(l[t])||b==="temporal"||v?u.set(t,{signal:T$(l[t],{type:b,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=le(xW,t)?xW[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:Noe(i,a),hasSecondaryRangeChannel:!!i[zl(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const xW={bins:({model:e,fieldOrDatumDef:t})=>ce(t)?Tje(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Rje(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Fje(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Pje(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Oje(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Mje(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=ce(e)?e.sort:void 0;return Dje(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Nje(e,t,n,r,i,s.scale,o)};function xle(e){En(e)?bje(e):wle(e,"range")}function wle(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?xle(r):ble(r,t);for(const r of oe(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Rf(i,a,t,"scale",pae((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Tje(e,t){const n=t.bin;if(sn(n)){const r=GL(e,t.field,n);return new dr(()=>e.getSignalName(r))}else if(Ar(n)&&pp(n)&&n.step!==void 0)return{step:n.step}}function Rje(e,t){if(ot([fs,Il,Ll],e)&&t!=="nominal")return"hcl"}function Fje(e,t,n,r,i,s){var o;if(!((o=ba(s))!=null&&o.bin||te(n)||i!=null||r!=null||ot([Fr.TIME,Fr.UTC],e)))return Wn(t)?!0:void 0}function Pje(e,t,n,r,i,s){if(Wn(e)){if(ol(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(ce(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Fr.POINT)return n.pointPadding}}function Oje(e,t,n,r,i,s=!1){if(e===void 0){if(Wn(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=i;return s?c:Vn(o,n==="bar"?a:n==="tick"?u:l)}else if(Nx(t)&&r===Fr.BAND)return i.offsetBandPaddingInner}}function Mje(e,t,n,r,i,s=!1){if(e===void 0){if(Wn(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Fr.BAND)return Vn(o,Fe(r)?{signal:`${r.signal}/2`}:r/2)}else if(Nx(t)){if(n===Fr.POINT)return .5;if(n===Fr.BAND)return i.offsetBandPaddingOuter}}}function Dje(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return ya(e)&&t==="descending"?Fe(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(ya(e)&&t==="descending")return!0}function Nje(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&ya(i)){if(te(n)){const l=n[0],u=n[n.length-1];if(_t(l)&&l<=0&&_t(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Qm(i))return!0;if(!(ce(t)&&t.bin)&&ot([...Xu,...FNe],e)){const{orient:l,type:u}=r;return ot(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:ot(["bar","area"],u)&&!o?!0:s==null?void 0:s.zero}return!1}function Ije(e,t,n,r,i=!1){const s=Lje(t,n,r,i),{type:o}=e;return jl(t)?o!==void 0?DLe(t,o)?ce(n)&&!MLe(o,n.type)?(ue(NIe(o,s)),s):o:(ue(DIe(t,o,s)),s):s:null}function Lje(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(qg(e)||b3(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ue(x3(e,"ordinal")),"ordinal";if(Wn(e)||Nx(e)){if(ot(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in YI)return"band";const s=n[hs(e)];return Lh(s)||Zm(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return qg(e)?"time":b3(e)==="discrete"?(ue(x3(e,"temporal")),"ordinal"):ce(t)&&t.timeUnit&&vr(t.timeUnit).utc?"utc":"time";case"quantitative":return qg(e)?ce(t)&&sn(t.bin)?"bin-ordinal":"linear":b3(e)==="discrete"?(ue(x3(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(zse(t.type))}function zje(e,{ignoreRange:t}={}){Sle(e),dle(e);for(const n of OLe)ble(e,n);t||xle(e)}function Sle(e){En(e)?e.component.scales=jje(e):e.component.scales=Uje(e)}function jje(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of KI){const o=rr(t[s]);if(o&&n===foe&&s===ds&&o.type===H0)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const l=Noe(t,s),u=Ije(a,s,o,r,l);i[s]=new ple(e.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return i}const Bje=pae((e,t)=>kV(e)-kV(t));function Uje(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){Sle(s);for(const o of oe(s.component.scales))if((t=i.scale)[o]??(t[o]=Zae(o,e)),i.scale[o]==="shared"){const a=r[o],l=s.component.scales[o].getWithExplicit("type");a?ELe(a.value,l.value)?r[o]=Rf(a,l,"type","scale",Bje):(i.scale[o]="independent",delete r[o]):r[o]=l}}for(const s of oe(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new ple(o,a);for(const l of e.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class R3{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function En(e){return(e==null?void 0:e.type)==="unit"}function Os(e){return(e==null?void 0:e.type)==="facet"}function JL(e){return(e==null?void 0:e.type)==="concat"}function K0(e){return(e==null?void 0:e.type)==="layer"}class ZL{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=l=>{var u,c,f;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(f=(c=l.from)==null?void 0:c.facet)!=null&&f.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=r,this.config=s,this.view=Tr(a),this.name=t.name??i,this.title=$c(t.title)?{text:t.title}:t.title?Tr(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new R3,this.projectionNameMap=r?r.projectionNameMap:new R3,this.signalNameMap=r?r.signalNameMap:new R3,this.data=t.data,this.description=t.description,this.transforms=Y9e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Z8e(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:_$(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Ku,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Xe(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){zje(this)}parseProjection(){ule(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){ile(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of oe(r)){const o=r[s];o!==void 0&&(i[s]=fn(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=fn(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:qt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=lze(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of go)t[r].title&&n.push(nze(this,r));for(const r of VL)n=n.concat(rze(this,r));return n}assembleAxes(){return V7e(this.component.axes,this.config)}assembleLegends(){return ole(this)}assembleProjections(){return Fze(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...Rse(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return ot(["unit","layer"],this.type)?ot(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),qt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Os(this.parent)?hle(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return yn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Mn[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Os(this.parent)){const n=Qae(t),r=g$(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(xr(s)&&gp(o)){const a=i.get("name"),l=B$(this,r),u=QL(l);if(u){const c=ye({aggregate:"distinct",field:u},{expr:"datum"});return{signal:Kae(a,i,c)}}else return ue(ZI(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Sse(t)&&jl(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(eIe(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Ele extends ZL{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ye(r,n)}reduceFieldDef(t,n){return A8e(this.getMapping(),(r,i,s)=>{const o=ba(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){kL(this.getMapping(),(r,i)=>{const s=ba(r);s&&t(s,i)},n)}}class U$ extends Ut{clone(){return new U$(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Xe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${ft(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class V$ extends Ut{clone(){return new V$(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Xe(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${ft(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class W$ extends Ut{clone(){return new W$(this.parent,Xe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Xe(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${ft(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class H$ extends Ut{clone(){return new H$(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Xe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${ft(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Yg extends Ut{clone(){return new Yg(null,Xe(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Ta,Aa],[$o,Ra]]){const s=i.map(o=>{const a=rr(n.encoding[o]);return ce(a)?a.field:Bl(a)?{expr:`${a.datum}`}:va(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Yg(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ds)){const i=n.typedFieldDef(ds);i.type===H0&&(t=new Yg(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(we);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${ft(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class ob extends Ut{clone(){return new ob(null,this.projection,Xe(this.fields),Xe(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Ta,Aa],[$o,Ra]]){const i=r.map(o=>{const a=rr(n.encoding[o]);return ce(a)?a.field:Bl(a)?{expr:`${a.datum}`}:va(a)?{expr:`${a.value}`}:void 0}),s=r[0]===$o?"2":"";(i[0]||i[1])&&(t=new ob(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(we))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${ft(this.fields)} ${ft(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class hh extends Ut{clone(){return new hh(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new hh(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(ce(i)&&ce(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:l,value:u,frame:c,keyvals:f}=o.impute,d=zoe(n.mark,r);return new hh(t,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${ft(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:R9e(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class q$ extends Ut{clone(){return new q$(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Xe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${ft(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class ab extends Ut{clone(){return new ab(null,Xe(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(F9e(o)){let l=_le(o.data,s);l||(l=new Uh(o.data),s.push(l));const u=n.getName(`lookup_${i}`);a=new rs(l,u,Mn.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(P9e(o)){const l=o.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(yn(l),l)}catch{throw new Error(iIe(l))}if(a=u.materialized,!a)throw new Error(sIe(l))}return new ab(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?xe(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${ft({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:xe(this.transform.as)}:{}};else{let n=this.transform.as;we(n)||(ue(hIe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class G$ extends Ut{clone(){return new G$(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Xe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${ft(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class X$ extends Ut{clone(){return new X$(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Xe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${ft(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class Y$ extends Ut{clone(){return new Y$(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sl((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${ft(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class K$ extends Ut{clone(){return new K$(null,Xe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${ft(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Cle(e){let t=0;function n(r,i){if(r instanceof Uh&&!r.isGenerator&&!t0(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof si&&(r.parent instanceof Uh&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof X0){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof qx||r instanceof Gx||r instanceof o0||r instanceof G0||r instanceof r0||r instanceof ob||r instanceof ua||r instanceof ab||r instanceof Y0||r instanceof xp||r instanceof H$||r instanceof W$||r instanceof U$||r instanceof q$||r instanceof G$||r instanceof X$||r instanceof Pf||r instanceof K$||r instanceof Y$||r instanceof V$)&&i.transform.push(r.assemble()),(r instanceof gl||r instanceof pl||r instanceof hh||r instanceof Eu||r instanceof Yg)&&i.transform.push(...r.assemble()),r instanceof rs&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof rs?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof rs&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Vje(e){const t=[],n=Cle(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Wje(e,t){const n=[],r=Cle(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Hje(e){return e==="top"||e==="left"||Fe(e)?"header":"footer"}function qje(e){for(const t of go)Gje(e,t);wW(e,"x"),wW(e,"y")}function Gje(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],l=s0("title",null,r,t);let u=Gg(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=te(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=s0("labelOrient",a.header,r,t),f=a.header!==null?Vn((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=ot(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[kle(e,t,f)]}}}function kle(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function wW(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=qL(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const l=Hje(a.get("orient"));o[l]??(o[l]=[kle(e,s,!1)]);const u=O1(a,"main",e.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function Xje(e){e8(e),GC(e,"width"),GC(e,"height")}function Yje(e){e8(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";GC(e,t),GC(e,n)}function e8(e){for(const t of e.children)t.parseLayoutSize()}function GC(e,t){const n=Qae(t),r=g$(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??Zae(r,e);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=Rf(o,l,n,"")}else o=l}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Kje(e){const{size:t,component:n}=e;for(const r of Xu){const i=hs(r);if(t[i]){const s=t[i];n.layoutSize.set(i,$l(s)?"step":s,!0)}else{const s=Qje(e,i);n.layoutSize.set(i,s,!1)}}}function Qje(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(xr(s)){const a=VC(r.view,t);return gp(o)||$l(a)?"step":a}else return a4(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return a4(r.view,t);{const s=VC(r.view,t);return $l(s)?s.step:s}}}function E4(e,t,n){return ye(t,{suffix:`by_${ye(e)}`,...n})}class cv extends Ele{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=s8(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!jx(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=oe(t),r={};for(const i of n){if(![bu,xu].includes(i)){ue(v$(i,"facet"));break}const s=t[i];if(s.field===void 0){ue(n4(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=CL(t,n);return r.header?r.header=Tr(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return le(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Q$(this),this.child.parseData()}parseLayoutSize(){e8(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),qje(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of go)for(const r of WL){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=s0("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const l=z$(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof cv))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof cv?{...this.channelHasField("column")?{encode:{update:{columns:{field:ye(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof cv){if(this.child.channelHasField("column")){const i=ye(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Xu){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(xr(o)&&gp(a)){const l=B$(this.child,i),u=QL(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):ue(ZI(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of go){const f=this.facet[c];if(f){l.push(ye(f));const{bin:d,sort:h}=f;if(sn(d)&&l.push(ye(f,{binSuffix:"end"})),wu(h)){const{field:p,op:g=k$}=h,m=E4(f,h);r&&i?(s.push(m),o.push("max"),a.push(m)):(s.push(p),o.push(g),a.push(m))}else if(te(h)){const p=i0(f,c);s.push(p),o.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?wu(r.sort)?[E4(r,r.sort,{expr:"datum"})]:te(r.sort)?[i0(r,t,{expr:"datum"})]:[ye(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(wu(i)?i.order:!te(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return m4(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of VL)if(t[s]){const o=s0("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return m4(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Vje(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:go.map(l=>this.facetSortFields(l)).flat(),order:go.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(u7e(this,[]))}]}getMapping(){return this.facet}}function Jje(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(wu(s.sort)){const{field:o,op:a=k$}=s.sort;e=i=new xp(e,{joinaggregate:[{op:a,field:o,as:E4(s,s.sort,{forAs:!0})}],groupby:[ye(s)]})}return i}return null}function _le(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((l||f)&&l!==f)){if(sb(e)&&sb(a)){if(Ts(e.values,a.values))return o}else if(t0(e)&&t0(a)){if(e.url===a.url)return o}else if(gae(e)&&e.name===o.dataName)return o}}return null}function Zje(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Uh({values:[]});return t.push(r),r}const n=_le(e.data,t);if(n)return sf(e.data)||(n.data.format=cse({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Uh(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function eBe(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(U9e(i))o=e=new r0(e,i),s="derived";else if(NL(i)){const a=Wze(i);o=e=si.makeWithAncestors(e,{},a,n)??e,e=new G0(e,t,i.filter)}else if(cae(i))o=e=gl.makeFromTransform(e,i,t),s="number";else if(W9e(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new si(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=pl.makeFromTransform(e,i);else if(H9e(i))o=e=ua.makeFromTransform(e,i),s="number",UL(t)&&(e=new Pf(e));else if(uae(i))o=e=ab.make(e,t,i,r++),s="derived";else if(z9e(i))o=e=new Y0(e,i),s="number";else if(j9e(i))o=e=new xp(e,i),s="number";else if(q9e(i))o=e=Eu.makeFromTransform(e,i),s="derived";else if(G9e(i))o=e=new H$(e,i),s="derived";else if(X9e(i))o=e=new V$(e,i),s="derived";else if(B9e(i))o=e=new W$(e,i),s="derived";else if(O9e(i))o=e=new Y$(e,i),s="derived";else if(L9e(i))e=new K$(e,i);else if(V9e(i))o=e=hh.makeFromTransform(e,i),s="derived";else if(M9e(i))o=e=new U$(e,i),s="derived";else if(D9e(i))o=e=new G$(e,i),s="derived";else if(N9e(i))o=e=new X$(e,i),s="derived";else if(I9e(i))o=e=new q$(e,i),s="derived";else{ue(dIe(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function Q$(e){var m;let t=Zje(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(sf(i)||t0(i)||sb(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new o7e;sf(i)?(mae(i)?t=new Gx(t,i.sequence):IL(i)&&(t=new qx(t,i.graticule)),o.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(o.parseNothing=!0),t=si.makeExplicit(t,e,o)??t,t=new Pf(t);const a=e.parent&&K0(e.parent);(En(e)||Os(e))&&a&&(t=gl.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=eBe(t,e,o));const l=qze(e),u=Hze(e);t=si.makeWithAncestors(t,{},{...l,...u},o)??t,En(e)&&(t=Yg.parseAll(t,e),t=ob.parseAll(t,e)),(En(e)||Os(e))&&(a||(t=gl.makeFromEncoding(t,e)??t),t=pl.makeFromEncoding(t,e)??t,t=r0.parseAllForSortIndex(t,e));const c=t=m2(Mn.Raw,e,t);if(En(e)){const y=ua.makeFromEncoding(t,e);y&&(t=y,UL(e)&&(t=new Pf(t))),t=hh.makeFromEncoding(t,e)??t,t=Eu.makeFromEncoding(t,e)??t}let f,d;if(En(e)){const{markDef:y,mark:v,config:b}=e,x=Ht("invalid",y,b),{marks:w,scales:C}=d=vae({invalid:x,isPath:Qf(v)});w!==C&&C==="include-invalid-values"&&(f=t=m2(Mn.PreFilterInvalid,e,t)),w==="exclude-invalid-values"&&(t=o0.make(t,e,d)??t)}const h=t=m2(Mn.Main,e,t);let p;if(En(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=o0.make(t,e,d)??t,p=t=m2(Mn.PostFilterInvalid,e,t))}En(e)&&B7e(e,h);let g=null;if(Os(e)){const y=e.getName("facet");t=Jje(t,e.facet)??t,g=new X0(t,e,y,h.getSource()),n[y]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:g,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function m2(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new rs(n,s,e,i);return r[s]=o,o}class tBe extends ZL{constructor(t,n,r,i){var s,o,a,l;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&ue(uIe),this.children=this.getChildren(t).map((u,c)=>s8(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=Q$(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of oe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return P$(t)?t.vconcat:ML(t)?t.hconcat:t.concat}parseLayoutSize(){Yje(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=HL(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function nBe(e){return e===!1||e===null}const rBe={disable:1,gridScale:1,scale:1,...Ooe,labelExpr:1,encode:1},$le=oe(rBe);class t8 extends Ku{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new t8(Xe(this.explicit),Xe(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!nBe(this.get(t))}hasOrientSignalRef(){return Fe(this.explicit.orient)}}function iBe(e,t,n){const{encoding:r,config:i}=e,s=rr(r[t])??rr(r[zl(t)]),o=e.axis(t)||{},{format:a,formatType:l}=o;if(zh(l))return{text:oa({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(Jm(s)==="quantitative"){if(Zm(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:oa({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:oa({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Jm(s)==="temporal"&&i.timeFormatType&&ce(s)&&!s.timeUnit)return{text:oa({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function sBe(e){return Xu.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[dBe(n,e)]),t),{})}const oBe={bottom:"top",top:"bottom",left:"right",right:"left"};function aBe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of oe(i.component.axes))n.axis[s]=qL(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=lBe(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Xu){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:l}=o.getWithExplicit("orient");if(!Fe(a)){if(r[a]>0&&!l){const u=oBe[a];r[a]>r[u]&&o.set("orient",u,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function lBe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=uBe(i,s)}}}else return t.map(n=>n.clone());return e}function uBe(e,t){for(const n of $le){const r=Rf(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return Ise(i,s);case"gridScale":return{explicit:i.explicit,value:Vn(i.value,s.value)}}return M$(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function cBe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Fe(n.labelAngle)?n.labelAngle:rb(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===qae(r,i))return!0}return e===n[t]}const fBe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function dBe(e,t){var y,v;let n=t.axis(e);const r=new t8,i=rr(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Q7e(e),l=t.getScaleComponent(e).get("type"),u=W7e(e,l,a,t.config),c=n!==void 0?!n:p4("disable",o.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=X7e(i,n,e,o.style,u),d=boe(n.formatType,i,l),h=voe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of $le){const x=b in oW?oW[b](p):PV(b)?n[b]:void 0,w=x!==void 0,C=cBe(x,b,n,t,e);if(w&&C)r.set(b,x,C);else{const{configValue:S=void 0,configFrom:k=void 0}=PV(b)&&b!=="values"?p4(b,o.style,n.style,u):{},$=S!==void 0;w&&!$?r.set(b,x,C):(k!=="vgAxisConfig"||fBe.has(b)&&$||Wx(S)||Fe(S))&&r.set(b,S,!1)}}const g=n.encoding??{},m=Poe.reduce((b,x)=>{if(!r.hasAxisPart(x))return b;const w=Jae(g[x]??{},t),C=x==="labels"?iBe(t,e,w):w;return C!==void 0&&!qt(C)&&(b[x]={update:C}),b},{});return qt(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function hBe({encoding:e,size:t}){for(const n of Xu){const r=hs(n);$l(t[r])&&Kc(e[n])&&(delete t[r],ue(Use(r)))}return t}const pBe={vgMark:"arc",encodeEntry:e=>({...Po(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ri("x",e,{defaultPos:"mid"}),...Ri("y",e,{defaultPos:"mid"}),...Mu(e,"radius"),...Mu(e,"theta")})},gBe={vgMark:"area",encodeEntry:e=>({...Po(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...WC("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...WC("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...BL(e)})},mBe={vgMark:"rect",encodeEntry:e=>({...Po(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Mu(e,"x"),...Mu(e,"y")})},yBe={vgMark:"shape",encodeEntry:e=>({...Po(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ce(n)&&n.type===H0?{field:ye(n,{expr:"datum"})}:{}}]}},vBe={vgMark:"image",encodeEntry:e=>({...Po(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Mu(e,"x"),...Mu(e,"y"),...zL(e,"url")})},bBe={vgMark:"line",encodeEntry:e=>({...Po(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ri("x",e,{defaultPos:"mid"}),...Ri("y",e,{defaultPos:"mid"}),...Or("size",e,{vgChannel:"strokeWidth"}),...BL(e)})},xBe={vgMark:"trail",encodeEntry:e=>({...Po(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ri("x",e,{defaultPos:"mid"}),...Ri("y",e,{defaultPos:"mid"}),...Or("size",e),...BL(e)})};function n8(e,t){const{config:n}=e;return{...Po(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ri("x",e,{defaultPos:"mid"}),...Ri("y",e,{defaultPos:"mid"}),...Or("size",e),...Or("angle",e),...wBe(e,n,t)}}function wBe(e,t,n){return n?{shape:{value:n}}:Or("shape",e)}const SBe={vgMark:"symbol",encodeEntry:e=>n8(e)},EBe={vgMark:"symbol",encodeEntry:e=>n8(e,"circle")},CBe={vgMark:"symbol",encodeEntry:e=>n8(e,"square")},kBe={vgMark:"rect",encodeEntry:e=>({...Po(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Mu(e,"x"),...Mu(e,"y")})},_Be={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Po(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...WC("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...WC("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Or("size",e,{vgChannel:"strokeWidth"})}}},$Be={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Po(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ri("x",e,{defaultPos:"mid"}),...Ri("y",e,{defaultPos:"mid"}),...zL(e),...Or("size",e,{vgChannel:"fontSize"}),...Or("angle",e),...nW("align",ABe(e.markDef,n,t)),...nW("baseline",TBe(e.markDef,n,t)),...Ri("radius",e,{defaultPos:null}),...Ri("theta",e,{defaultPos:null})}}};function ABe(e,t,n){if(Ht("align",e,n)===void 0)return"center"}function TBe(e,t,n){if(Ht("baseline",e,n)===void 0)return"middle"}const RBe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...Po(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Mu(e,i),...Ri(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:fn(Ht("thickness",n,t))}}},y2={arc:pBe,area:gBe,bar:mBe,circle:EBe,geoshape:yBe,image:vBe,line:bBe,point:SBe,rect:kBe,rule:_Be,square:CBe,text:$Be,tick:RBe,trail:xBe};function FBe(e){if(ot([E$,w$,zLe],e.mark)){const t=zoe(e.mark,e.encoding);if(t.length>0)return PBe(e,t)}else if(e.mark===S$){const t=e4.some(n=>Ht(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return OBe(e)}return r8(e)}const SW="faceted_path_";function PBe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:SW+e.requestDataName(Mn.Main),data:e.requestDataName(Mn.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:r8(e,{fromPrefix:SW})}]}const EW="stack_group_";function OBe(e){var u;const[t]=r8(e,{fromPrefix:EW}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Hm(t.encode.update,["y","yc","y2","height",...e4]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ns(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Hm(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ns(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of e4){const f=kl(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=fn(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ye(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ye(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=kl(f,e.markDef,e.config);return d!==void 0?{...c,[f]:fn(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Mn.Main),name:EW+e.requestDataName(Mn.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function MBe(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!te(o)&&va(o)&&JP(o.value)||!o&&JP(Ht("order",i,s)))){if((te(o)||ce(o))&&!n)return Mse(o,{expr:"datum"});if(Qf(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(ce(l))return{field:a}}}}function r8(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Vn(r.clip,DBe(e),NBe(e)),a=Pse(r),l=i.key,u=MBe(e),c=IBe(e),f=Ht("aria",r,s),d=y2[n].postEncodingTransform?y2[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:y2[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Mn.Main)},encode:{update:y2[n].encodeEntry(e)},...d?{transform:d}:{}}]}function DBe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function NBe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function IBe(e){if(!e.component.selection)return null;const t=oe(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=oe(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Ale extends Ele{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,MV(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=_l(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=S9e(o,s,{graticule:t.data&&IL(t.data)}));const l=this.encoding=_8e(t.encoding||{},a,o.filled,s);this.markDef=oae(o,l,s),this.size=hBe({encoding:l,size:MV(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=sae(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>PL(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===foe,r=t&&SNe.some(i=>Qe(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return KI.reduce((r,i)=>{const s=rr(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Tr(t);return te(n)&&(i.domain=n.map(ks)),te(r)&&(i.range=r.map(ks)),i}initAxes(t){return Xu.reduce((n,r)=>{const i=t[r];if(Qe(i)||r===vn&&Qe(t.x2)||r===Sr&&Qe(t.y2)){const s=Qe(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=oe(t),r={};for(const i of n){const s=t[i];r[i]=Wx(s)?Fse(s):ks(s)}return r}initLegends(t){return PNe.reduce((n,r)=>{const i=rr(t[r]);if(i&&MNe(r)){const s=i.legend;n[r]=s&&Tr(s)}return n},{})}parseData(){this.component.data=Q$(this)}parseLayoutSize(){Kje(this)}parseSelections(){this.component.selection=j7e(this,this.selection)}parseMarkGroup(){this.component.mark=FBe(this)}parseAxesAndHeaders(){this.component.axes=sBe(this)}assembleSelectionTopLevelSignals(t){return c7e(this,t)}assembleSignals(){return[...Vae(this),...l7e(this,[])]}assembleSelectionData(t){return f7e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return HL(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!K0(this.parent))&&(t=xae(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return fh(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ba(n)}typedFieldDef(t){const n=this.fieldDef(t);return Li(n)?n:null}}class i8 extends ZL{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(O$(a))return new i8(a,this,this.getName(`layer_${l}`),o,s);if(Yu(a))return new Ale(a,this,this.getName(`layer_${l}`),o,s);throw new Error(JI(a))})}parseData(){this.component.data=Q$(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Xje(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of oe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){aBe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Vae(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),HL(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of xe(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return d7e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),ole(this))}}function s8(e,t,n,r,i){if(_$(e))return new cv(e,t,n,i);if(O$(e))return new i8(e,t,n,r,i);if(Yu(e))return new Ale(e,t,n,r,i);if(K8e(e))return new tBe(e,t,n,i);throw new Error(JI(e))}function LBe(e,t={}){t.logger&&ZIe(t.logger),t.fieldTitle&&Toe(t.fieldTitle);try{const n=iae(A0(t.config,e.config)),r=hae(e,n),i=s8(r,null,"",void 0,n);return i.parse(),lje(i.component.data,i),{spec:jBe(i,zBe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&eLe(),t.fieldTitle&&y8e()}}function zBe(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):we(t)&&(t={type:t}),i&&s&&r7e(t.type)){if(i==="step"&&s==="step")ue(vV()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";ue(vV(g$(o)));const a=o==="width"?"height":"width";t.type=i7e(a)}}return{...oe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...qV(n,!1),...qV(e,!0)}}function jBe(e,t,n={},r){const i=e.config?c9e(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Wje(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...eae(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const BBe=yNe.version,Tle=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Gm,accessPathWithDatum:UI,compile:LBe,contains:ot,deepEqual:Ts,deleteNestedProperty:MC,duplicate:Xe,entries:$f,every:zI,fieldIntersection:BI,flatAccessWithDatum:dse,getFirstDefined:Vn,hasIntersection:jI,hasProperty:le,hash:ft,internalField:gse,isBoolean:nb,isEmpty:qt,isEqual:P1,isInternalField:mse,isNullOrFalse:JP,isNumeric:u$,keys:oe,logicalExpr:lv,mergeDeep:cse,never:use,normalize:hae,normalizeAngle:rb,omit:ns,pick:Hm,prefixGenerator:ZP,removePathFromField:V0,replaceAll:Mh,replacePathInField:_o,resetIdCounter:xNe,setEqual:fse,some:qm,stringify:Gt,titleCase:Ox,unique:sl,uniqueId:pse,vals:Ir,varName:yn,version:BBe},Symbol.toStringTag,{value:"Module"}));function Rle(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var UBe="vega-themes",VBe="2.15.0",WBe="Themes for stylized Vega and Vega-Lite visualizations.",HBe=["vega","vega-lite","themes","style"],qBe="BSD-3-Clause",GBe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},XBe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],YBe="build/vega-themes.js",o8="build/vega-themes.module.js",KBe="build/vega-themes.min.js",QBe="build/vega-themes.min.js",JBe="build/vega-themes.module.d.ts",ZBe={type:"git",url:"https://github.com/vega/vega-themes.git"},eUe=["src","build"],tUe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},nUe={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},rUe={vega:"*","vega-lite":"*"},iUe={},sUe={name:UBe,version:VBe,description:WBe,keywords:HBe,license:qBe,author:GBe,contributors:XBe,main:YBe,module:o8,unpkg:KBe,jsdelivr:QBe,types:JBe,repository:ZBe,files:eUe,scripts:tUe,devDependencies:nUe,peerDependencies:rUe,dependencies:iUe};const Qp="#fff",CW="#888",oUe={background:"#333",view:{stroke:CW},title:{color:Qp,subtitleColor:Qp},style:{"guide-label":{fill:Qp},"guide-title":{fill:Qp}},axis:{domainColor:Qp,gridColor:CW,tickColor:Qp}},gd="#4572a7",aUe={background:"#fff",arc:{fill:gd},area:{fill:gd},line:{stroke:gd,strokeWidth:2},path:{stroke:gd},rect:{fill:gd},shape:{stroke:gd},symbol:{fill:gd,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},md="#30a2da",F3="#cbcbcb",lUe="#999",uUe="#333",kW="#f0f0f0",_W="#333",cUe={arc:{fill:md},area:{fill:md},axis:{domainColor:F3,grid:!0,gridColor:F3,gridWidth:1,labelColor:lUe,labelFontSize:10,titleColor:uUe,tickColor:F3,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:kW,group:{fill:kW},legend:{labelColor:_W,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:_W,titleFontSize:14,titlePadding:10},line:{stroke:md,strokeWidth:2},path:{stroke:md,strokeWidth:.5},rect:{fill:md},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:md},bar:{binSpacing:2,fill:md,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},yd="#000",fUe={group:{fill:"#e5e5e5"},arc:{fill:yd},area:{fill:yd},line:{stroke:yd},path:{stroke:yd},rect:{fill:yd},shape:{stroke:yd},symbol:{fill:yd,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},dUe=22,hUe="normal",$W="Benton Gothic, sans-serif",AW=11.5,pUe="normal",vd="#82c6df",P3="Benton Gothic Bold, sans-serif",TW="normal",RW=13,By={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},gUe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:P3,fontSize:dUe,fontWeight:hUe},arc:{fill:vd},area:{fill:vd},line:{stroke:vd,strokeWidth:2},path:{stroke:vd},rect:{fill:vd},shape:{stroke:vd},symbol:{fill:vd,size:30},axis:{labelFont:$W,labelFontSize:AW,labelFontWeight:pUe,titleFont:P3,titleFontSize:RW,titleFontWeight:TW},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:$W,labelFontSize:AW,symbolType:"square",titleFont:P3,titleFontSize:RW,titleFontWeight:TW},range:{category:By["category-6"],diverging:By["fireandice-6"],heatmap:By["fire-7"],ordinal:By["fire-7"],ramp:By["fire-7"]}},bd="#ab5787",v2="#979797",mUe={background:"#f9f9f9",arc:{fill:bd},area:{fill:bd},line:{stroke:bd},path:{stroke:bd},rect:{fill:bd},shape:{stroke:bd},symbol:{fill:bd,size:30},axis:{domainColor:v2,domainWidth:.5,gridWidth:.2,labelColor:v2,tickColor:v2,tickWidth:.2,titleColor:v2},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},xd="#3e5c69",yUe={background:"#fff",arc:{fill:xd},area:{fill:xd},line:{stroke:xd},path:{stroke:xd},rect:{fill:xd},shape:{stroke:xd},symbol:{fill:xd},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Js="#1696d2",FW="#000000",vUe="#FFFFFF",b2="Lato",O3="Lato",bUe="Lato",xUe="#DEDDDD",wUe=18,Uy={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},SUe={background:vUe,title:{anchor:"start",fontSize:wUe,font:b2},axisX:{domain:!0,domainColor:FW,domainWidth:1,grid:!1,labelFontSize:12,labelFont:O3,labelAngle:0,tickColor:FW,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:b2},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:xUe,gridWidth:1,labelFontSize:12,labelFont:O3,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:b2,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:O3,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:b2,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Uy["six-groups-cat-1"],diverging:Uy["diverging-colors"],heatmap:Uy["diverging-colors"],ordinal:Uy["six-groups-seq"],ramp:Uy["shades-blue"]},area:{fill:Js},rect:{fill:Js},line:{color:Js,stroke:Js,strokeWidth:5},trail:{color:Js,stroke:Js,strokeWidth:0,size:1},path:{stroke:Js,strokeWidth:.5},point:{filled:!0},text:{font:bUe,color:Js,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Js,stroke:null}},arc:{fill:Js},shape:{stroke:Js},symbol:{fill:Js,size:30}},wd="#3366CC",PW="#ccc",x2="Arial, sans-serif",EUe={arc:{fill:wd},area:{fill:wd},path:{stroke:wd},rect:{fill:wd},shape:{stroke:wd},symbol:{stroke:wd},circle:{fill:wd},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:x2,fontSize:12},"guide-title":{font:x2,fontSize:12},"group-title":{font:x2,fontSize:12}},title:{font:x2,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:PW,tickColor:PW,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},a8=e=>e*(1/3+1),OW=a8(9),MW=a8(10),DW=a8(12),Vy="Segoe UI",NW="wf_standard-font, helvetica, arial, sans-serif",IW="#252423",Wy="#605E5C",LW="transparent",CUe="#C8C6C4",Bo="#118DFF",kUe="#12239E",_Ue="#E66C37",$Ue="#6B007B",AUe="#E044A7",TUe="#744EC2",RUe="#D9B300",FUe="#D64550",Fle=Bo,Ple="#DEEFFF",zW=[Ple,Fle],PUe=[Ple,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Fle],OUe={view:{stroke:LW},background:LW,font:Vy,header:{titleFont:NW,titleFontSize:DW,titleColor:IW,labelFont:Vy,labelFontSize:MW,labelColor:Wy},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Wy,labelFontSize:OW,titleFont:NW,titleColor:IW,titleFontSize:DW,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:CUe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Bo},line:{stroke:Bo,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Vy,fontSize:OW,fill:Wy},arc:{fill:Bo},area:{fill:Bo,line:!0,opacity:.6},path:{stroke:Bo},rect:{fill:Bo},point:{fill:Bo,filled:!0,size:75},shape:{stroke:Bo},symbol:{fill:Bo,strokeWidth:1.5,size:50},legend:{titleFont:Vy,titleFontWeight:"bold",titleColor:Wy,labelFont:Vy,labelFontSize:MW,labelColor:Wy,symbolType:"circle",symbolSize:75},range:{category:[Bo,kUe,_Ue,$Ue,AUe,TUe,RUe,FUe],diverging:zW,heatmap:zW,ordinal:PUe}},M3='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',MUe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',D3=400,w2={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},DUe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],NUe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function J$({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=w2.gridBg[e],i=w2.textPrimary[e],s=w2.textSecondary[e],o=n==="dark"?DUe:NUe,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:M3,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:MUe,labelFontWeight:D3,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:w2.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:M3,fill:s,fontWeight:D3},"guide-title":{font:M3,fill:s,fontWeight:D3}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const IUe=J$({theme:"white",background:"#ffffff"}),LUe=J$({theme:"g10",background:"#f4f4f4"}),zUe=J$({theme:"g90",background:"#262626"}),jUe=J$({theme:"g100",background:"#161616"}),BUe=sUe.version,UUe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:LUe,carbong100:jUe,carbong90:zUe,carbonwhite:IUe,dark:oUe,excel:aUe,fivethirtyeight:cUe,ggplot2:fUe,googlecharts:EUe,latimes:gUe,powerbi:OUe,quartz:mUe,urbaninstitute:SUe,version:BUe,vox:yUe},Symbol.toStringTag,{value:"Module"}));function VUe(e,t,n,r){if(te(e))return`[${e.map(i=>t(we(i)?i:jW(i,n))).join(", ")}]`;if(ve(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(ve(c)&&(c=jW(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function WUe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function jW(e,t){return JSON.stringify(e,WUe(t))}var HUe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Ole="vg-tooltip-element",qUe={offsetX:10,offsetY:10,id:Ole,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:GUe,maxDepth:2,formatTooltip:VUe,baseURL:""};function GUe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function XUe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return HUe.toString().replace(Ole,e)}function YUe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class KUe{constructor(t){this.options={...qUe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=XUe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=YUe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var N3={};function QUe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class JUe{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var ZUe=JUe;const eVe=Object.freeze({loose:!0}),tVe=Object.freeze({}),nVe=e=>e?typeof e!="object"?eVe:e:tVe;var l8=nVe,C4={exports:{}};const rVe="2.0.0",Mle=256,iVe=Number.MAX_SAFE_INTEGER||9007199254740991,sVe=16,oVe=Mle-6,aVe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var u8={MAX_LENGTH:Mle,MAX_SAFE_COMPONENT_LENGTH:sVe,MAX_SAFE_BUILD_LENGTH:oVe,MAX_SAFE_INTEGER:iVe,RELEASE_TYPES:aVe,SEMVER_SPEC_VERSION:rVe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const lVe=typeof process=="object"&&N3&&N3.NODE_DEBUG&&/\bsemver\b/i.test(N3.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Z$=lVe;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=u8,s=Z$;t=e.exports={};const o=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=g=>{for(const[m,y]of d)g=g.split(`${m}*`).join(`${m}{0,${y}}`).split(`${m}+`).join(`${m}{1,${y}}`);return g},p=(g,m,y)=>{const v=h(m),b=c++;s(g,b,m),u[g]=b,l[b]=m,o[b]=new RegExp(m,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(C4,C4.exports);var c8=C4.exports;const BW=/^[0-9]+$/,Dle=(e,t)=>{const n=BW.test(e),r=BW.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},uVe=(e,t)=>Dle(t,e);var cVe={compareIdentifiers:Dle,rcompareIdentifiers:uVe};const S2=Z$,{MAX_LENGTH:UW,MAX_SAFE_INTEGER:E2}=u8,{safeRe:VW,t:WW}=c8,fVe=l8,{compareIdentifiers:Jp}=cVe;let dVe=class za{constructor(t,n){if(n=fVe(n),t instanceof za){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>UW)throw new TypeError(`version is longer than ${UW} characters`);S2("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?VW[WW.LOOSE]:VW[WW.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>E2||this.major<0)throw new TypeError("Invalid major version");if(this.minor>E2||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>E2||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<E2)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(S2("SemVer.compare",this.version,this.options,t),!(t instanceof za)){if(typeof t=="string"&&t===this.version)return 0;t=new za(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof za||(t=new za(t,this.options)),Jp(this.major,t.major)||Jp(this.minor,t.minor)||Jp(this.patch,t.patch)}comparePre(t){if(t instanceof za||(t=new za(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(S2("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Jp(r,i)}while(++n)}compareBuild(t){t instanceof za||(t=new za(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(S2("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Jp(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),Jp(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var f8=dVe;const HW=f8,hVe=(e,t,n)=>new HW(e,n).compare(new HW(t,n));var Q0=hVe;const pVe=Q0,gVe=(e,t,n)=>pVe(e,t,n)===0;var mVe=gVe;const yVe=Q0,vVe=(e,t,n)=>yVe(e,t,n)!==0;var bVe=vVe;const xVe=Q0,wVe=(e,t,n)=>xVe(e,t,n)>0;var SVe=wVe;const EVe=Q0,CVe=(e,t,n)=>EVe(e,t,n)>=0;var kVe=CVe;const _Ve=Q0,$Ve=(e,t,n)=>_Ve(e,t,n)<0;var AVe=$Ve;const TVe=Q0,RVe=(e,t,n)=>TVe(e,t,n)<=0;var FVe=RVe;const PVe=mVe,OVe=bVe,MVe=SVe,DVe=kVe,NVe=AVe,IVe=FVe,LVe=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return PVe(e,n,r);case"!=":return OVe(e,n,r);case">":return MVe(e,n,r);case">=":return DVe(e,n,r);case"<":return NVe(e,n,r);case"<=":return IVe(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var zVe=LVe,I3,qW;function jVe(){if(qW)return I3;qW=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}I3=t;const n=l8,{safeRe:r,t:i}=c8,s=zVe,o=Z$,a=f8,l=Nle();return I3}var L3,GW;function Nle(){if(GW)return L3;GW=1;class e{constructor(N,A){if(A=r(A),N instanceof e)return N.loose===!!A.loose&&N.includePrerelease===!!A.includePrerelease?N:new e(N.raw,A);if(N instanceof i)return this.raw=N.value,this.set=[[N]],this.format(),this;if(this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease,this.raw=N.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(j=>!p(j[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const j of this.set)if(j.length===1&&g(j[0])){this.set=[j];break}}}this.format()}format(){return this.range=this.set.map(N=>N.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(N){const P=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+N,j=n.get(P);if(j)return j;const z=this.options.loose,U=z?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];N=N.replace(U,O(this.options.includePrerelease)),s("hyphen replace",N),N=N.replace(a[l.COMPARATORTRIM],u),s("comparator trim",N),N=N.replace(a[l.TILDETRIM],c),s("tilde trim",N),N=N.replace(a[l.CARETTRIM],f),s("caret trim",N);let X=N.split(" ").map(_e=>y(_e,this.options)).join(" ").split(/\s+/).map(_e=>F(_e,this.options));z&&(X=X.filter(_e=>(s("loose invalid filter",_e,this.options),!!_e.match(a[l.COMPARATORLOOSE])))),s("range list",X);const K=new Map,pe=X.map(_e=>new i(_e,this.options));for(const _e of pe){if(p(_e))return[_e];K.set(_e.value,_e)}K.size>1&&K.has("")&&K.delete("");const se=[...K.values()];return n.set(P,se),se}intersects(N,A){if(!(N instanceof e))throw new TypeError("a Range is required");return this.set.some(P=>m(P,A)&&N.set.some(j=>m(j,A)&&P.every(z=>j.every(U=>z.intersects(U,A)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new o(N,this.options)}catch{return!1}for(let A=0;A<this.set.length;A++)if(B(this.set[A],N,this.options))return!0;return!1}}L3=e;const t=ZUe,n=new t,r=l8,i=jVe(),s=Z$,o=f8,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:f}=c8,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=u8,p=D=>D.value==="<0.0.0-0",g=D=>D.value==="",m=(D,N)=>{let A=!0;const P=D.slice();let j=P.pop();for(;A&&P.length;)A=P.every(z=>j.intersects(z,N)),j=P.pop();return A},y=(D,N)=>(s("comp",D,N),D=w(D,N),s("caret",D),D=b(D,N),s("tildes",D),D=S(D,N),s("xrange",D),D=$(D,N),s("stars",D),D),v=D=>!D||D.toLowerCase()==="x"||D==="*",b=(D,N)=>D.trim().split(/\s+/).map(A=>x(A,N)).join(" "),x=(D,N)=>{const A=N.loose?a[l.TILDELOOSE]:a[l.TILDE];return D.replace(A,(P,j,z,U,X)=>{s("tilde",D,P,j,z,U,X);let K;return v(j)?K="":v(z)?K=`>=${j}.0.0 <${+j+1}.0.0-0`:v(U)?K=`>=${j}.${z}.0 <${j}.${+z+1}.0-0`:X?(s("replaceTilde pr",X),K=`>=${j}.${z}.${U}-${X} <${j}.${+z+1}.0-0`):K=`>=${j}.${z}.${U} <${j}.${+z+1}.0-0`,s("tilde return",K),K})},w=(D,N)=>D.trim().split(/\s+/).map(A=>C(A,N)).join(" "),C=(D,N)=>{s("caret",D,N);const A=N.loose?a[l.CARETLOOSE]:a[l.CARET],P=N.includePrerelease?"-0":"";return D.replace(A,(j,z,U,X,K)=>{s("caret",D,j,z,U,X,K);let pe;return v(z)?pe="":v(U)?pe=`>=${z}.0.0${P} <${+z+1}.0.0-0`:v(X)?z==="0"?pe=`>=${z}.${U}.0${P} <${z}.${+U+1}.0-0`:pe=`>=${z}.${U}.0${P} <${+z+1}.0.0-0`:K?(s("replaceCaret pr",K),z==="0"?U==="0"?pe=`>=${z}.${U}.${X}-${K} <${z}.${U}.${+X+1}-0`:pe=`>=${z}.${U}.${X}-${K} <${z}.${+U+1}.0-0`:pe=`>=${z}.${U}.${X}-${K} <${+z+1}.0.0-0`):(s("no pr"),z==="0"?U==="0"?pe=`>=${z}.${U}.${X}${P} <${z}.${U}.${+X+1}-0`:pe=`>=${z}.${U}.${X}${P} <${z}.${+U+1}.0-0`:pe=`>=${z}.${U}.${X} <${+z+1}.0.0-0`),s("caret return",pe),pe})},S=(D,N)=>(s("replaceXRanges",D,N),D.split(/\s+/).map(A=>k(A,N)).join(" ")),k=(D,N)=>{D=D.trim();const A=N.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return D.replace(A,(P,j,z,U,X,K)=>{s("xRange",D,P,j,z,U,X,K);const pe=v(z),se=pe||v(U),_e=se||v(X),Ze=_e;return j==="="&&Ze&&(j=""),K=N.includePrerelease?"-0":"",pe?j===">"||j==="<"?P="<0.0.0-0":P="*":j&&Ze?(se&&(U=0),X=0,j===">"?(j=">=",se?(z=+z+1,U=0,X=0):(U=+U+1,X=0)):j==="<="&&(j="<",se?z=+z+1:U=+U+1),j==="<"&&(K="-0"),P=`${j+z}.${U}.${X}${K}`):se?P=`>=${z}.0.0${K} <${+z+1}.0.0-0`:_e&&(P=`>=${z}.${U}.0${K} <${z}.${+U+1}.0-0`),s("xRange return",P),P})},$=(D,N)=>(s("replaceStars",D,N),D.trim().replace(a[l.STAR],"")),F=(D,N)=>(s("replaceGTE0",D,N),D.trim().replace(a[N.includePrerelease?l.GTE0PRE:l.GTE0],"")),O=D=>(N,A,P,j,z,U,X,K,pe,se,_e,Ze)=>(v(P)?A="":v(j)?A=`>=${P}.0.0${D?"-0":""}`:v(z)?A=`>=${P}.${j}.0${D?"-0":""}`:U?A=`>=${A}`:A=`>=${A}${D?"-0":""}`,v(pe)?K="":v(se)?K=`<${+pe+1}.0.0-0`:v(_e)?K=`<${pe}.${+se+1}.0-0`:Ze?K=`<=${pe}.${se}.${_e}-${Ze}`:D?K=`<${pe}.${se}.${+_e+1}-0`:K=`<=${K}`,`${A} ${K}`.trim()),B=(D,N,A)=>{for(let P=0;P<D.length;P++)if(!D[P].test(N))return!1;if(N.prerelease.length&&!A.includePrerelease){for(let P=0;P<D.length;P++)if(s(D[P].semver),D[P].semver!==i.ANY&&D[P].semver.prerelease.length>0){const j=D[P].semver;if(j.major===N.major&&j.minor===N.minor&&j.patch===N.patch)return!0}return!1}return!0};return L3}const BVe=Nle(),UVe=(e,t,n)=>{try{t=new BVe(t,n)}catch{return!1}return t.test(e)};var VVe=UVe,Ile=QUe(VVe);function WVe(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function l(c){c.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,o),setTimeout(u,s),a-=1)}setTimeout(u,s)}var HVe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Lle(e,...t){for(const n of t)qVe(e,n);return e}function qVe(e,t){for(const n of Object.keys(t))T0(e,n,t[n],!0)}const Ua=lse;let lb=Tle;const C2=typeof window<"u"?window:void 0;var NY;lb===void 0&&((NY=C2==null?void 0:C2.vl)!=null&&NY.compile)&&(lb=C2.vl);const GVe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},XVe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},D1={vega:"Vega","vega-lite":"Vega-Lite"},XC={vega:Ua.version,"vega-lite":lb?lb.version:"not available"},YVe={vega:e=>e,"vega-lite":(e,t)=>lb.compile(e,{config:t}).spec},KVe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,QVe="chart-wrapper";function JVe(e){return typeof e=="function"}function XW(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${D1[r]} JSON Source`}function ZVe(e,t){if(e.$schema){const n=Rle(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${D1[n.library]}, but mode argument sets ${D1[t]??t}.`);const r=n.library;return Ile(XC[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${D1[r]} ${n.version}, but the current version of ${D1[r]} is v${XC[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function zle(e){return!!(e&&"load"in e)}function YW(e){return zle(e)?e:Ua.loader(e)}function eWe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return we(t.defaultStyle)&&(t.defaultStyle=!1),t}async function tWe(e,t,n={}){let r,i;we(t)?(i=YW(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=eWe(r),o=s.loader;(!i||o)&&(i=YW(n.loader??o));const a=await KW(s,i),l=await KW(n,i),u={...Lle(l,a),config:A0(l.config??{},a.config??{})};return await rWe(e,r,u,i)}async function KW(e,t){const n=we(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=we(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function nWe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function rWe(e,t,n={},r){const i=n.theme?A0(UUe[n.theme],n.config??{}):n.config,s=Lf(n.actions)?n.actions:Lle({},GVe,n.actions??{}),o={...XVe,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??Ua.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const w="vega-embed-style",{root:C,rootContainer:S}=nWe(c);if(!C.getElementById(w)){const k=document.createElement("style");k.id=w,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?HVe.toString():n.defaultStyle,S.appendChild(k)}}const f=ZVe(t,n.mode);let d=YVe[f](t,i);if(f==="vega-lite"&&d.$schema){const w=Rle(d.$schema);Ile(XC.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${XC.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const w=document.createElement("div");w.classList.add(QVe),c.appendChild(w),h=w}const p=n.patch;if(p&&(d=p instanceof Function?p(d):Jk(d,p,!0,!1).newDocument),n.formatLocale&&Ua.formatLocale(n.formatLocale),n.timeFormatLocale&&Ua.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const C=n.expressionFunctions[w];"fn"in C?Ua.expressionFunction(w,C.fn,C.visitor):C instanceof Function&&Ua.expressionFunction(w,C)}const{ast:g}=n,m=Ua.parse(d,f==="vega-lite"?{}:i,{ast:g}),y=new(n.viewClass||Ua.View)(m,{loader:r,logLevel:l,renderer:a,...g?{expr:Ua.expressionInterpreter??n.expr??G6e}:{}});if(y.addSignalListener("autosize",(w,C)=>{const{type:S}=C;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:w,tooltip:C}=n,S=w&&!zle(w)?w==null?void 0:w.baseURL:void 0,k=JVe(C)?C:new KUe({baseURL:S,...C===!0?{}:C}).call;y.tooltip(k)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:w,updateSet:C}=typeof v=="boolean"?{}:v;y.hover(w,C)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let w=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),w=S;const k=document.createElement("summary");k.innerHTML=KVe,S.append(k),b=$=>{S.contains($.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const C=document.createElement("div");if(w.append(C),C.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const k=o[`${S.toUpperCase()}_ACTION`],$=document.createElement("a"),F=ve(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;$.text=k,$.href="#",$.target="_blank",$.download=`${u}.${S}`,$.addEventListener("mousedown",async function(O){O.preventDefault();const B=await y.toImageURL(S,F);this.href=B}),C.append($)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(k){XW(m5(t),n.sourceHeader??"",n.sourceFooter??"",f),k.preventDefault()}),C.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(k){XW(m5(d),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),C.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=o.EDITOR_ACTION,k.href="#",k.addEventListener("click",function($){WVe(window,S,{config:i,mode:p?"vega":f,renderer:a,spec:m5(p?d:t)}),$.preventDefault()}),C.append(k)}}function x(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:x,embedOptions:n}}function jle(e){return`thumbnail@${JSON.stringify(e)}`}async function iWe(e,t,n=100){const r=sWe(e);if(r)return r;const i=await oWe(e,t,n);return i&&sessionStorage.setItem(jle(e),i),i}function sWe(e){return sessionStorage.getItem(jle(e))}async function oWe(e,t,n=100){if(!("mark"in e)||!e||!t)return;const r={disable:!0,title:"",grid:!1,ticks:!1,labels:!1},i={...e,width:n,height:n,config:{...e.config,mark:{strokeWidth:e.mark==="line"?4:0},legend:{disable:!0},axis:{disable:!0},style:{view:{stroke:"transparent"},cell:{stroke:"transparent"}}},data:{values:t},background:"transparent",title:void 0,encoding:Object.fromEntries(Object.entries(e.encoding??{}).map(([o,a])=>[o,{...a,legend:null,axis:r}]))};return(await(await tWe(document.createElement("div"),i,{actions:!1}).then(o=>o.view)).toCanvas()).toDataURL()}function aWe(e){try{return new URL(e),!0}catch{return!1}}function Ble(e){try{const n=new URL(e).pathname.split("/"),r=n[n.length-1];return decodeURIComponent(r)}catch{throw new Error("Invalid URL")}}const lWe={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},QW=e=>{let t;const n=new Set,r=(c,f)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(p=>p(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(lWe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},uWe=e=>e?QW(e):QW;var Ule={exports:{}},Vle={},Wle={exports:{}},Hle={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0=M;function cWe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fWe=typeof Object.is=="function"?Object.is:cWe,dWe=a0.useState,hWe=a0.useEffect,pWe=a0.useLayoutEffect,gWe=a0.useDebugValue;function mWe(e,t){var n=t(),r=dWe({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return pWe(function(){i.value=n,i.getSnapshot=t,z3(i)&&s({inst:i})},[e,n,t]),hWe(function(){return z3(i)&&s({inst:i}),e(function(){z3(i)&&s({inst:i})})},[e]),gWe(n),n}function z3(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fWe(e,n)}catch{return!0}}function yWe(e,t){return t()}var vWe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yWe:mWe;Hle.useSyncExternalStore=a0.useSyncExternalStore!==void 0?a0.useSyncExternalStore:vWe;Wle.exports=Hle;var bWe=Wle.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eA=M,xWe=bWe;function wWe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var SWe=typeof Object.is=="function"?Object.is:wWe,EWe=xWe.useSyncExternalStore,CWe=eA.useRef,kWe=eA.useEffect,_We=eA.useMemo,$We=eA.useDebugValue;Vle.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=CWe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=_We(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,SWe(c,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(c=h,f=g)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,i]);var a=EWe(e,s[0],s[1]);return kWe(function(){o.hasValue=!0,o.value=a},[a]),$We(a),a};Ule.exports=Vle;var AWe=Ule.exports;const TWe=Zh(AWe),qle={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:RWe}=wm,{useSyncExternalStoreWithSelector:FWe}=TWe;let JW=!1;const PWe=e=>e;function OWe(e,t=PWe,n){(qle?"production":void 0)!=="production"&&n&&!JW&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),JW=!0);const r=FWe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return RWe(r),r}const ZW=e=>{(qle?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?uWe(e):e,n=(r,i)=>OWe(t,r,i);return Object.assign(n,t),n},tA=e=>e?ZW(e):ZW,DS={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},k4=new Map,k2=e=>{const t=k4.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},MWe=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=k4.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return k4.set(n.name,i),{type:"tracked",store:e,...i}},DWe=(e,t={})=>(n,r,i)=>{const{enabled:s,anonymousActionType:o,store:a,...l}=t;let u;try{u=(s??(DS?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(DS?"production":void 0)!=="production"&&s&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,i);const{connection:c,...f}=MWe(a,u,l);let d=!0;i.setState=(g,m,y)=>{const v=n(g,m);if(!d)return v;const b=y===void 0?{type:o||"anonymous"}:typeof y=="string"?{type:y}:y;return a===void 0?(c==null||c.send(b,r()),v):(c==null||c.send({...b,type:`${a}/${b.type}`},{...k2(l.name),[a]:i.getState()}),v)};const h=(...g)=>{const m=d;d=!1,n(...g),d=m},p=e(i.setState,r,i);if(f.type==="untracked"?c==null||c.init(p):(f.stores[f.store]=i,c==null||c.init(Object.fromEntries(Object.entries(f.stores).map(([g,m])=>[g,g===f.store?p:m.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let g=!1;const m=i.dispatch;i.dispatch=(...y)=>{(DS?"production":void 0)!=="production"&&y[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),m(...y)}}return c.subscribe(g=>{var m;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return j3(g.payload,y=>{if(y.type==="__setState"){if(a===void 0){h(y.state);return}Object.keys(y.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const v=y.state[a];if(v==null)return;JSON.stringify(i.getState())!==JSON.stringify(v)&&h(v);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(y)});case"DISPATCH":switch(g.payload.type){case"RESET":return h(p),a===void 0?c==null?void 0:c.init(i.getState()):c==null?void 0:c.init(k2(l.name));case"COMMIT":if(a===void 0){c==null||c.init(i.getState());return}return c==null?void 0:c.init(k2(l.name));case"ROLLBACK":return j3(g.state,y=>{if(a===void 0){h(y),c==null||c.init(i.getState());return}h(y[a]),c==null||c.init(k2(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return j3(g.state,y=>{if(a===void 0){h(y);return}JSON.stringify(i.getState())!==JSON.stringify(y[a])&&h(y[a])});case"IMPORT_STATE":{const{nextLiftedState:y}=g.payload,v=(m=y.computedStates.slice(-1)[0])==null?void 0:m.state;if(!v)return;h(a===void 0?v:v[a]),c==null||c.send(null,y);return}case"PAUSE_RECORDING":return d=!d}return}}),p},nA=DWe,j3=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function NWe(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const ub=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return ub(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ub(r)(n)}}}},IWe=(e,t)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,y)=>({...y,...m}),...t},o=!1;const a=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...m)},r,i);const c=ub(s.serialize),f=()=>{const m=s.partialize({...r()});let y;const v=c({state:m,version:s.version}).then(b=>u.setItem(s.name,b)).catch(b=>{y=b});if(y)throw y;return v},d=i.setState;i.setState=(m,y)=>{d(m,y),f()};const h=e((...m)=>{n(...m),f()},r,i);let p;const g=()=>{var m;if(!u)return;o=!1,a.forEach(v=>v(r()));const y=((m=s.onRehydrateStorage)==null?void 0:m.call(s,r()))||void 0;return ub(u.getItem.bind(u))(s.name).then(v=>{if(v)return s.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return s.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var b;return p=s.merge(v,(b=r())!=null?b:h),n(p,!0),f()}).then(()=>{y==null||y(p,void 0),o=!0,l.forEach(v=>v(p))}).catch(v=>{y==null||y(void 0,v)})};return i.persist={setOptions:m=>{s={...s,...m},m.getStorage&&(u=m.getStorage())},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},g(),p||h},LWe=(e,t)=>(n,r,i)=>{let s={storage:NWe(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...t},o=!1;const a=new Set,l=new Set;let u=s.storage;if(!u)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...g)},r,i);const c=()=>{const g=s.partialize({...r()});return u.setItem(s.name,{state:g,version:s.version})},f=i.setState;i.setState=(g,m)=>{f(g,m),c()};const d=e((...g)=>{n(...g),c()},r,i);i.getInitialState=()=>d;let h;const p=()=>{var g,m;if(!u)return;o=!1,a.forEach(v=>{var b;return v((b=r())!=null?b:d)});const y=((m=s.onRehydrateStorage)==null?void 0:m.call(s,(g=r())!=null?g:d))||void 0;return ub(u.getItem.bind(u))(s.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return[!0,s.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[x,w]=v;if(h=s.merge(w,(b=r())!=null?b:d),n(h,!0),x)return c()}).then(()=>{y==null||y(h,void 0),h=r(),o=!0,l.forEach(v=>v(h))}).catch(v=>{y==null||y(void 0,v)})};return i.persist={setOptions:g=>{s={...s,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},s.skipHydration||p(),h||d},zWe=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((DS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),IWe(e,t)):LWe(e,t),jWe=zWe,BWe={json:Lye,csv:VM},Al=tA(nA(e=>({filename:null,fileCache:null,data:void 0,writingFile:!1,writeFile:async t=>{e({writingFile:!0,filename:null,fileCache:null,data:void 0});try{const n=t instanceof File?t.name:Ble(t),r=n.split(".").pop(),s=await(await lF(t)).arrayBuffer(),o=new Uint8Array(s),a=await jM(s,BWe[r],{worker:!0,fetch:{mode:"no-cors"}});await Ki.lazyCall("writeFile",{filename:n,fileBuffer:o}),e({filename:n,fileCache:t,data:a,writingFile:!1})}catch(n){console.error(n)}finally{e({writingFile:!1})}}}),{name:"DataStore",anonymousActionType:"DataStore Action",enabled:!1})),eH={likes:0,fields:1,charts:1,search:2,settings:3},ci=tA(nA(e=>({drawerExpanded:!0,setDrawerExpanded:t=>e({drawerExpanded:t}),tabIndex:eH.settings,setTabByIndex:t=>e({tabIndex:t}),setTabByName:t=>e({tabIndex:eH[t]}),searchTargetFieldNames:[],setSearchTargetFieldNames:t=>e(n=>({searchTargetFieldNames:typeof t=="function"?t(n.searchTargetFieldNames):t})),appendSearchTarget:t=>e(n=>({searchTargetFieldNames:[...n.searchTargetFieldNames,t]}))}),{name:"InteractionStore",anonymousActionType:"InteractionStore Action",enabled:!1})),tn={black:"#000000",white:"#FFFFFF","blackAlpha.50":"rgba(0, 0, 0, 0.04)","blackAlpha.100":"rgba(0, 0, 0, 0.06)","blackAlpha.200":"rgba(0, 0, 0, 0.08)","blackAlpha.300":"rgba(0, 0, 0, 0.16)","blackAlpha.400":"rgba(0, 0, 0, 0.24)","blackAlpha.500":"rgba(0, 0, 0, 0.36)","blackAlpha.600":"rgba(0, 0, 0, 0.48)","blackAlpha.700":"rgba(0, 0, 0, 0.64)","blackAlpha.800":"rgba(0, 0, 0, 0.80)","blackAlpha.900":"rgba(0, 0, 0, 0.92)","whiteAlpha.50":"rgba(255, 255, 255, 0.04)","whiteAlpha.100":"rgba(255, 255, 255, 0.06)","whiteAlpha.200":"rgba(255, 255, 255, 0.08)","whiteAlpha.300":"rgba(255, 255, 255, 0.16)","whiteAlpha.400":"rgba(255, 255, 255, 0.24)","whiteAlpha.500":"rgba(255, 255, 255, 0.36)","whiteAlpha.600":"rgba(255, 255, 255, 0.48)","whiteAlpha.700":"rgba(255, 255, 255, 0.64)","whiteAlpha.800":"rgba(255, 255, 255, 0.80)","whiteAlpha.900":"rgba(255, 255, 255, 0.92)","gray.50":"#F7FAFC","gray.100":"#EDF2F7","gray.200":"#E2E8F0","gray.300":"#CBD5E0","gray.400":"#A0AEC0","gray.500":"#718096","gray.600":"#4A5568","gray.700":"#2D3748","gray.800":"#1A202C","gray.900":"#171923","red.50":"#FFF5F5","red.100":"#FED7D7","red.200":"#FEB2B2","red.300":"#FC8181","red.400":"#F56565","red.500":"#E53E3E","red.600":"#C53030","red.700":"#9B2C2C","red.800":"#822727","red.900":"#63171B","orange.50":"#FFFAF0","orange.100":"#FEEBC8","orange.200":"#FBD38D","orange.300":"#F6AD55","orange.400":"#ED8936","orange.500":"#DD6B20","orange.600":"#C05621","orange.700":"#9C4221","orange.800":"#7B341E","orange.900":"#652B19","yellow.50":"#FFFFF0","yellow.100":"#FEFCBF","yellow.200":"#FAF089","yellow.300":"#F6E05E","yellow.400":"#ECC94B","yellow.500":"#D69E2E","yellow.600":"#B7791F","yellow.700":"#975A16","yellow.800":"#744210","yellow.900":"#5F370E","green.50":"#F0FFF4","green.100":"#C6F6D5","green.200":"#9AE6B4","green.300":"#68D391","green.400":"#48BB78","green.500":"#38A169","green.600":"#2F855A","green.700":"#276749","green.800":"#22543D","green.900":"#1C4532","teal.50":"#E6FFFA","teal.100":"#B2F5EA","teal.200":"#81E6D9","teal.300":"#4FD1C5","teal.400":"#38B2AC","teal.500":"#319795","teal.600":"#2C7A7B","teal.700":"#285E61","teal.800":"#234E52","teal.900":"#1D4044","blue.50":"#EBF8FF","blue.100":"#BEE3F8","blue.200":"#90CDF4","blue.300":"#63B3ED","blue.400":"#4299E1","blue.500":"#3182CE","blue.600":"#2B6CB0","blue.700":"#2C5282","blue.800":"#2A4365","blue.900":"#1A365D","cyan.50":"#EDFDFD","cyan.100":"#C4F1F9","cyan.200":"#9DECF9","cyan.300":"#76E4F7","cyan.400":"#0BC5EA","cyan.500":"#00B5D8","cyan.600":"#00A3C4","cyan.700":"#0987A0","cyan.800":"#086F83","cyan.900":"#065666","purple.50":"#FAF5FF","purple.100":"#E9D8FD","purple.200":"#D6BCFA","purple.300":"#B794F4","purple.400":"#9F7AEA","purple.500":"#805AD5","purple.600":"#6B46C1","purple.700":"#553C9A","purple.800":"#44337A","purple.900":"#322659","pink.50":"#FFF5F7","pink.100":"#FED7E2","pink.200":"#FBB6CE","pink.300":"#F687B3","pink.400":"#ED64A6","pink.500":"#D53F8C","pink.600":"#B83280","pink.700":"#97266D","pink.800":"#702459","pink.900":"#521B41"},tH=[{name:"Barley",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/barley.json"},{name:"Cars",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/cars.json"},{name:"Crimea",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/crimea.json"},{name:"Jobs",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/jobs.json"},{name:"Population",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/population.json"},{name:"Movies",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/movies.json"},{name:"Birdstrikes",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/birdstrikes.csv"},{name:"Burtin",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/burtin.json"}],UWe=50,nH=1,cr="orange",Qc={50:tn[`${cr}.50`],100:tn[`${cr}.100`],200:tn[`${cr}.200`],300:tn[`${cr}.300`],400:tn[`${cr}.400`],500:tn[`${cr}.500`],600:tn[`${cr}.600`],700:tn[`${cr}.700`],800:tn[`${cr}.800`],900:tn[`${cr}.900`]},rH="table",iH=3;var Gle=Symbol.for("immer-nothing"),sH=Symbol.for("immer-draftable"),Bs=Symbol.for("immer-state");function ea(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var l0=Object.getPrototypeOf;function u0(e){return!!e&&!!e[Bs]}function Vh(e){var t;return e?Xle(e)||Array.isArray(e)||!!e[sH]||!!((t=e.constructor)!=null&&t[sH])||iA(e)||sA(e):!1}var VWe=Object.prototype.constructor.toString();function Xle(e){if(!e||typeof e!="object")return!1;const t=l0(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===VWe}function YC(e,t){rA(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function rA(e){const t=e[Bs];return t?t.type_:Array.isArray(e)?1:iA(e)?2:sA(e)?3:0}function _4(e,t){return rA(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Yle(e,t,n){const r=rA(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function WWe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function iA(e){return e instanceof Map}function sA(e){return e instanceof Set}function _d(e){return e.copy_||e.base_}function $4(e,t){if(iA(e))return new Map(e);if(sA(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Xle(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Bs];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(l0(e),r)}else{const r=l0(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function d8(e,t=!1){return oA(e)||u0(e)||!Vh(e)||(rA(e)>1&&(e.set=e.add=e.clear=e.delete=HWe),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>d8(r,!0))),e}function HWe(){ea(2)}function oA(e){return Object.isFrozen(e)}var qWe={};function Wh(e){const t=qWe[e];return t||ea(0,e),t}var cb;function Kle(){return cb}function GWe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function oH(e,t){t&&(Wh("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function A4(e){T4(e),e.drafts_.forEach(XWe),e.drafts_=null}function T4(e){e===cb&&(cb=e.parent_)}function aH(e){return cb=GWe(cb,e)}function XWe(e){const t=e[Bs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function lH(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Bs].modified_&&(A4(t),ea(4)),Vh(e)&&(e=KC(t,e),t.parent_||QC(t,e)),t.patches_&&Wh("Patches").generateReplacementPatches_(n[Bs].base_,e,t.patches_,t.inversePatches_)):e=KC(t,n,[]),A4(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Gle?e:void 0}function KC(e,t,n){if(oA(t))return t;const r=t[Bs];if(!r)return YC(t,(i,s)=>uH(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return QC(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),YC(s,(a,l)=>uH(e,r,i,a,l,n,o)),QC(e,i,!1),n&&e.patches_&&Wh("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function uH(e,t,n,r,i,s,o){if(u0(i)){const a=s&&t&&t.type_!==3&&!_4(t.assigned_,r)?s.concat(r):void 0,l=KC(e,i,a);if(Yle(n,r,l),u0(l))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Vh(i)&&!oA(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;KC(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&QC(e,i)}}function QC(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&d8(t,n)}function YWe(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Kle(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=h8;n&&(i=[r],s=fb);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var h8={get(e,t){if(t===Bs)return e;const n=_d(e);if(!_4(n,t))return KWe(e,n,t);const r=n[t];return e.finalized_||!Vh(r)?r:r===B3(e.base_,t)?(U3(e),e.copy_[t]=F4(r,e)):r},has(e,t){return t in _d(e)},ownKeys(e){return Reflect.ownKeys(_d(e))},set(e,t,n){const r=Qle(_d(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=B3(_d(e),t),s=i==null?void 0:i[Bs];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(WWe(n,i)&&(n!==void 0||_4(e.base_,t)))return!0;U3(e),R4(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return B3(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,U3(e),R4(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=_d(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ea(11)},getPrototypeOf(e){return l0(e.base_)},setPrototypeOf(){ea(12)}},fb={};YC(h8,(e,t)=>{fb[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});fb.deleteProperty=function(e,t){return fb.set.call(this,e,t,void 0)};fb.set=function(e,t,n){return h8.set.call(this,e[0],t,n,e[0])};function B3(e,t){const n=e[Bs];return(n?_d(n):e)[t]}function KWe(e,t,n){var i;const r=Qle(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Qle(e,t){if(!(t in e))return;let n=l0(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=l0(n)}}function R4(e){e.modified_||(e.modified_=!0,e.parent_&&R4(e.parent_))}function U3(e){e.copy_||(e.copy_=$4(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var QWe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(l=s,...u){return o.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&ea(6),r!==void 0&&typeof r!="function"&&ea(7);let i;if(Vh(t)){const s=aH(this),o=F4(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?A4(s):T4(s)}return oH(s,r),lH(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Gle&&(i=void 0),this.autoFreeze_&&d8(i,!0),r){const s=[],o=[];Wh("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else ea(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,l=>t(l,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Vh(e)||ea(8),u0(e)&&(e=JWe(e));const t=aH(this),n=F4(e,void 0);return n[Bs].isManual_=!0,T4(t),n}finishDraft(e,t){const n=e&&e[Bs];(!n||!n.isManual_)&&ea(9);const{scope_:r}=n;return oH(r,t),lH(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Wh("Patches").applyPatches_;return u0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function F4(e,t){const n=iA(e)?Wh("MapSet").proxyMap_(e,t):sA(e)?Wh("MapSet").proxySet_(e,t):YWe(e,t);return(t?t.scope_:Kle()).drafts_.push(n),n}function JWe(e){return u0(e)||ea(10,e),Jle(e)}function Jle(e){if(!Vh(e)||oA(e))return e;const t=e[Bs];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$4(e,t.scope_.immer_.useStrictShallowCopy_)}else n=$4(e,!0);return YC(n,(r,i)=>{Yle(n,r,Jle(i))}),t&&(t.finalized_=!1),n}var Us=new QWe,Zp=Us.produce;Us.produceWithPatches.bind(Us);Us.setAutoFreeze.bind(Us);Us.setUseStrictShallowCopy.bind(Us);Us.applyPatches.bind(Us);Us.createDraft.bind(Us);Us.finishDraft.bind(Us);const st=tA(nA((e,t)=>({filename:"",timestamp:0,charts:[],fields:[],currentChartIndex:-1,loadingSession:!1,appendingChart:!1,resetSession:()=>e({filename:"",timestamp:0,charts:[],fields:[],currentChartIndex:-1}),setCurrentChartIndex:n=>{const{appendingChart:r,charts:i}=t();r||n<-1||n>i.length-1||e({currentChartIndex:n})},setCurrentChartToLast:()=>{const{charts:n,setCurrentChartIndex:r}=t();r(n.length-1)},loadSession:async n=>{e({loadingSession:!0,filename:n});const{timestamp:r,charts:i,fields:s,currentChartIndex:o}=t(),a=await Ki.call("loadSession",{session:{filename:n,timestamp:r,charts:i,fields:s}});e(a?Zp(l=>{Object.assign(l,a),l.currentChartIndex=o===-1?0:o,l.loadingSession=!1}):{loadingSession:!1})},appendNextChart:async()=>{e({appendingChart:!0});const n=await Ki.call("appendNextChart");e(n?Zp(r=>{r.charts.push(n),r.appendingChart=!1}):{appendingChart:!1})},appendChart:async n=>{e({appendingChart:!0}),await Ki.call("appendChart",{chart:n}),e(Zp(r=>{r.charts.length>nH&&(r.charts=r.charts.slice(0,-nH)),r.charts.push(n),r.appendingChart=!1}))},renewCurrentChart:()=>e(Zp(n=>{const r=n.charts[n.currentChartIndex];r.specIndex=(r.specIndex+1)%r.specs.length})),setChartPreferred:(n,r)=>{Ki.call("setPreferred",{key:n,preferred:r}),e(Zp(i=>{const s=i.charts.find(o=>o.key===n);s&&(s.preferred=r)}))},setCurrentChartPreferred:n=>{const{charts:r,currentChartIndex:i}=t(),s=r[i];Ki.call("setPreferred",{key:s.key,preferred:n}),e(Zp(o=>{o.charts[o.currentChartIndex].preferred=n}))}}),{name:"SessionStore",anonymousActionType:"SessionStore Action",enabled:!1})),Zle=tA(nA(jWe(e=>({apiKey:"sk-...",setApiKey:t=>e({apiKey:t}),locale:"en",setLocale:t=>e({locale:t})}),{name:"settings-storage"}),{name:"SettingStore",anonymousActionType:"SettingStore Action",enabled:!1}));function ZWe(){const e=st(i=>i.charts),t=e.filter(i=>i.preferred),n=st(i=>i.setCurrentChartIndex);return{preferredCharts:t,handleClickBookmark:i=>{const s=e.findIndex(o=>o===i);n(s)}}}var Xx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},c0=typeof window>"u"||"Deno"in globalThis;function so(){}function eHe(e,t){return typeof e=="function"?e(t):e}function P4(e){return typeof e=="number"&&e>=0&&e!==1/0}function eue(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Kg(e,t){return typeof e=="function"?e(t):e}function Ko(e,t){return typeof e=="function"?e(t):e}function cH(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==p8(o,t.options))return!1}else if(!hb(t.queryKey,o))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||s&&!s(t))}function fH(e,t){const{exact:n,status:r,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(db(t.options.mutationKey)!==db(s))return!1}else if(!hb(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function p8(e,t){return((t==null?void 0:t.queryKeyHashFn)||db)(e)}function db(e){return JSON.stringify(e,(t,n)=>M4(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function hb(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!hb(e[n],t[n])):!1}function tue(e,t){if(e===t)return e;const n=dH(e)&&dH(t);if(n||M4(e)&&M4(t)){const r=n?e:Object.keys(e),i=r.length,s=n?t:Object.keys(t),o=s.length,a=n?[]:{};let l=0;for(let u=0;u<o;u++){const c=n?u:s[u];(!n&&r.includes(c)||n)&&e[c]===void 0&&t[c]===void 0?(a[c]=void 0,l++):(a[c]=tue(e[c],t[c]),a[c]===e[c]&&e[c]!==void 0&&l++)}return i===o&&l===i?e:a}return t}function O4(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function dH(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function M4(e){if(!hH(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!hH(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hH(e){return Object.prototype.toString.call(e)==="[object Object]"}function tHe(e){return new Promise(t=>{setTimeout(t,e)})}function D4(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?tue(e,t):t}function nHe(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function rHe(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var nue=Symbol();function rue(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===nue?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Kd,Nc,lm,IY,iHe=(IY=class extends Xx{constructor(){super();Ke(this,Kd);Ke(this,Nc);Ke(this,lm);Ae(this,lm,t=>{if(!c0&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,Nc)||this.setEventListener(H(this,lm))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Nc))==null||t.call(this),Ae(this,Nc,void 0))}setEventListener(t){var n;Ae(this,lm,t),(n=H(this,Nc))==null||n.call(this),Ae(this,Nc,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){H(this,Kd)!==t&&(Ae(this,Kd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof H(this,Kd)=="boolean"?H(this,Kd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Kd=new WeakMap,Nc=new WeakMap,lm=new WeakMap,IY),g8=new iHe,um,Ic,cm,LY,sHe=(LY=class extends Xx{constructor(){super();Ke(this,um,!0);Ke(this,Ic);Ke(this,cm);Ae(this,cm,t=>{if(!c0&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,Ic)||this.setEventListener(H(this,cm))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,Ic))==null||t.call(this),Ae(this,Ic,void 0))}setEventListener(t){var n;Ae(this,cm,t),(n=H(this,Ic))==null||n.call(this),Ae(this,Ic,t(this.setOnline.bind(this)))}setOnline(t){H(this,um)!==t&&(Ae(this,um,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return H(this,um)}},um=new WeakMap,Ic=new WeakMap,cm=new WeakMap,LY),JC=new sHe;function oHe(e){return Math.min(1e3*2**e,3e4)}function iue(e){return(e??"online")==="online"?JC.isOnline():!0}var sue=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function V3(e){return e instanceof sue}function oue(e){let t=!1,n=0,r=!1,i,s,o;const a=new Promise((y,v)=>{s=y,o=v}),l=y=>{var v;r||(p(new sue(y)),(v=e.abort)==null||v.call(e))},u=()=>{t=!0},c=()=>{t=!1},f=()=>g8.isFocused()&&(e.networkMode==="always"||JC.isOnline())&&e.canRun(),d=()=>iue(e.networkMode)&&e.canRun(),h=y=>{var v;r||(r=!0,(v=e.onSuccess)==null||v.call(e,y),i==null||i(),s(y))},p=y=>{var v;r||(r=!0,(v=e.onError)==null||v.call(e,y),i==null||i(),o(y))},g=()=>new Promise(y=>{var v;i=b=>{(r||f())&&y(b)},(v=e.onPause)==null||v.call(e)}).then(()=>{var y;i=void 0,r||(y=e.onContinue)==null||y.call(e)}),m=()=>{if(r)return;let y;const v=n===0?e.initialPromise:void 0;try{y=v??e.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(h).catch(b=>{var k;if(r)return;const x=e.retry??(c0?0:3),w=e.retryDelay??oHe,C=typeof w=="function"?w(n,b):w,S=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(t||!S){p(b);return}n++,(k=e.onFail)==null||k.call(e,n,b),tHe(C).then(()=>f()?void 0:g()).then(()=>{t?p(b):m()})})};return{promise:a,cancel:l,continue:()=>(i==null||i(),a),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?m():g().then(m),a)}}function aHe(){let e=[],t=0,n=d=>{d()},r=d=>{d()},i=d=>setTimeout(d,0);const s=d=>{i=d},o=d=>{let h;t++;try{h=d()}finally{t--,t||u()}return h},a=d=>{t?e.push(d):i(()=>{n(d)})},l=d=>(...h)=>{a(()=>{d(...h)})},u=()=>{const d=e;e=[],d.length&&i(()=>{r(()=>{d.forEach(h=>{n(h)})})})};return{batch:o,batchCalls:l,schedule:a,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:s}}var Pr=aHe(),Qd,zY,aue=(zY=class{constructor(){Ke(this,Qd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),P4(this.gcTime)&&Ae(this,Qd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(c0?1/0:5*60*1e3))}clearGcTimeout(){H(this,Qd)&&(clearTimeout(H(this,Qd)),Ae(this,Qd,void 0))}},Qd=new WeakMap,zY),fm,dm,ro,Jr,qb,Jd,Wo,Ql,jY,lHe=(jY=class extends aue{constructor(t){super();Ke(this,Wo);Ke(this,fm);Ke(this,dm);Ke(this,ro);Ke(this,Jr);Ke(this,qb);Ke(this,Jd);Ae(this,Jd,!1),Ae(this,qb,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ae(this,ro,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ae(this,fm,uHe(this.options)),this.state=t.state??H(this,fm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,Jr))==null?void 0:t.promise}setOptions(t){this.options={...H(this,qb),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,ro).remove(this)}setData(t,n){const r=D4(this.state.data,t,this.options);return ht(this,Wo,Ql).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ht(this,Wo,Ql).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=H(this,Jr))==null?void 0:r.promise;return(i=H(this,Jr))==null||i.cancel(t),n?n.then(so).catch(so):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,fm))}isActive(){return this.observers.some(t=>Ko(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!eue(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=H(this,Jr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=H(this,Jr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,ro).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(H(this,Jr)&&(H(this,Jd)?H(this,Jr).cancel({revert:!0}):H(this,Jr).cancelRetry()),this.scheduleGc()),H(this,ro).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ht(this,Wo,Ql).call(this,{type:"invalidate"})}fetch(t,n){var l,u,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(H(this,Jr))return H(this,Jr).continueRetry(),H(this,Jr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(d=>d.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Ae(this,Jd,!0),r.signal)})},s=()=>{const f=rue(this.options,n),d={queryKey:this.queryKey,meta:this.meta};return i(d),Ae(this,Jd,!1),this.options.persister?this.options.persister(f,d,this):f(d)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(o),(l=this.options.behavior)==null||l.onFetch(o,this),Ae(this,dm,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&ht(this,Wo,Ql).call(this,{type:"fetch",meta:(c=o.fetchOptions)==null?void 0:c.meta});const a=f=>{var d,h,p,g;V3(f)&&f.silent||ht(this,Wo,Ql).call(this,{type:"error",error:f}),V3(f)||((h=(d=H(this,ro).config).onError)==null||h.call(d,f,this),(g=(p=H(this,ro).config).onSettled)==null||g.call(p,this.state.data,f,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return Ae(this,Jr,oue({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var d,h,p,g;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(f),(h=(d=H(this,ro).config).onSuccess)==null||h.call(d,f,this),(g=(p=H(this,ro).config).onSettled)==null||g.call(p,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(f,d)=>{ht(this,Wo,Ql).call(this,{type:"failed",failureCount:f,error:d})},onPause:()=>{ht(this,Wo,Ql).call(this,{type:"pause"})},onContinue:()=>{ht(this,Wo,Ql).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),H(this,Jr).start()}},fm=new WeakMap,dm=new WeakMap,ro=new WeakMap,Jr=new WeakMap,qb=new WeakMap,Jd=new WeakMap,Wo=new WeakSet,Ql=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...lue(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return V3(i)&&i.revert&&H(this,dm)?{...H(this,dm),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Pr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),H(this,ro).notify({query:this,type:"updated",action:t})})},jY);function lue(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:iue(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function uHe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ga,BY,cHe=(BY=class extends Xx{constructor(t={}){super();Ke(this,Ga);this.config=t,Ae(this,Ga,new Map)}build(t,n,r){const i=n.queryKey,s=n.queryHash??p8(i,n);let o=this.get(s);return o||(o=new lHe({cache:this,queryKey:i,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){H(this,Ga).has(t.queryHash)||(H(this,Ga).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=H(this,Ga).get(t.queryHash);n&&(t.destroy(),n===t&&H(this,Ga).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Pr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,Ga).get(t)}getAll(){return[...H(this,Ga).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>cH(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>cH(t,r)):n}notify(t){Pr.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Pr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Pr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ga=new WeakMap,BY),Xa,vi,Zd,Ya,wc,UY,fHe=(UY=class extends aue{constructor(t){super();Ke(this,Ya);Ke(this,Xa);Ke(this,vi);Ke(this,Zd);this.mutationId=t.mutationId,Ae(this,vi,t.mutationCache),Ae(this,Xa,[]),this.state=t.state||dHe(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,Xa).includes(t)||(H(this,Xa).push(t),this.clearGcTimeout(),H(this,vi).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ae(this,Xa,H(this,Xa).filter(n=>n!==t)),this.scheduleGc(),H(this,vi).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,Xa).length||(this.state.status==="pending"?this.scheduleGc():H(this,vi).remove(this))}continue(){var t;return((t=H(this,Zd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,s,o,a,l,u,c,f,d,h,p,g,m,y,v,b,x,w,C,S;Ae(this,Zd,oue({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,$)=>{ht(this,Ya,wc).call(this,{type:"failed",failureCount:k,error:$})},onPause:()=>{ht(this,Ya,wc).call(this,{type:"pause"})},onContinue:()=>{ht(this,Ya,wc).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,vi).canRun(this)}));const n=this.state.status==="pending",r=!H(this,Zd).canStart();try{if(!n){ht(this,Ya,wc).call(this,{type:"pending",variables:t,isPaused:r}),await((s=(i=H(this,vi).config).onMutate)==null?void 0:s.call(i,t,this));const $=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,t));$!==this.state.context&&ht(this,Ya,wc).call(this,{type:"pending",context:$,variables:t,isPaused:r})}const k=await H(this,Zd).start();return await((u=(l=H(this,vi).config).onSuccess)==null?void 0:u.call(l,k,t,this.state.context,this)),await((f=(c=this.options).onSuccess)==null?void 0:f.call(c,k,t,this.state.context)),await((h=(d=H(this,vi).config).onSettled)==null?void 0:h.call(d,k,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,k,null,t,this.state.context)),ht(this,Ya,wc).call(this,{type:"success",data:k}),k}catch(k){try{throw await((y=(m=H(this,vi).config).onError)==null?void 0:y.call(m,k,t,this.state.context,this)),await((b=(v=this.options).onError)==null?void 0:b.call(v,k,t,this.state.context)),await((w=(x=H(this,vi).config).onSettled)==null?void 0:w.call(x,void 0,k,this.state.variables,this.state.context,this)),await((S=(C=this.options).onSettled)==null?void 0:S.call(C,void 0,k,t,this.state.context)),k}finally{ht(this,Ya,wc).call(this,{type:"error",error:k})}}finally{H(this,vi).runNext(this)}}},Xa=new WeakMap,vi=new WeakMap,Zd=new WeakMap,Ya=new WeakSet,wc=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Pr.batch(()=>{H(this,Xa).forEach(r=>{r.onMutationUpdate(t)}),H(this,vi).notify({mutation:this,type:"updated",action:t})})},UY);function dHe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xs,Gb,VY,hHe=(VY=class extends Xx{constructor(t={}){super();Ke(this,xs);Ke(this,Gb);this.config=t,Ae(this,xs,new Map),Ae(this,Gb,Date.now())}build(t,n,r){const i=new fHe({mutationCache:this,mutationId:++Ow(this,Gb)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=_2(t),r=H(this,xs).get(n)??[];r.push(t),H(this,xs).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=_2(t);if(H(this,xs).has(n)){const i=(r=H(this,xs).get(n))==null?void 0:r.filter(s=>s!==t);i&&(i.length===0?H(this,xs).delete(n):H(this,xs).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=H(this,xs).get(_2(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=H(this,xs).get(_2(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Pr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...H(this,xs).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>fH(n,r))}findAll(t={}){return this.getAll().filter(n=>fH(t,n))}notify(t){Pr.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Pr.batch(()=>Promise.all(t.map(n=>n.continue().catch(so))))}},xs=new WeakMap,Gb=new WeakMap,VY);function _2(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function pHe(e){return{onFetch:(t,n)=>{const r=async()=>{var p,g,m,y,v;const i=t.options,s=(m=(g=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:m.direction,o=((y=t.state.data)==null?void 0:y.pages)||[],a=((v=t.state.data)==null?void 0:v.pageParams)||[],l={pages:[],pageParams:[]};let u=!1;const c=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},f=rue(t.options,t.fetchOptions),d=async(b,x,w)=>{if(u)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const C={queryKey:t.queryKey,pageParam:x,direction:w?"backward":"forward",meta:t.options.meta};c(C);const S=await f(C),{maxPages:k}=t.options,$=w?rHe:nHe;return{pages:$(b.pages,S,k),pageParams:$(b.pageParams,x,k)}};let h;if(s&&o.length){const b=s==="backward",x=b?gHe:pH,w={pages:o,pageParams:a},C=x(i,w);h=await d(w,C,b)}else{h=await d(l,a[0]??i.initialPageParam);const b=e??o.length;for(let x=1;x<b;x++){const w=pH(i,h);if(w==null)break;h=await d(h,w)}}return h};t.options.persister?t.fetchFn=()=>{var i,s;return(s=(i=t.options).persister)==null?void 0:s.call(i,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function pH(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function gHe(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Tn,Lc,zc,hm,pm,jc,gm,mm,WY,mHe=(WY=class{constructor(e={}){Ke(this,Tn);Ke(this,Lc);Ke(this,zc);Ke(this,hm);Ke(this,pm);Ke(this,jc);Ke(this,gm);Ke(this,mm);Ae(this,Tn,e.queryCache||new cHe),Ae(this,Lc,e.mutationCache||new hHe),Ae(this,zc,e.defaultOptions||{}),Ae(this,hm,new Map),Ae(this,pm,new Map),Ae(this,jc,0)}mount(){Ow(this,jc)._++,H(this,jc)===1&&(Ae(this,gm,g8.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Tn).onFocus())})),Ae(this,mm,JC.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Tn).onOnline())})))}unmount(){var e,t;Ow(this,jc)._--,H(this,jc)===0&&((e=H(this,gm))==null||e.call(this),Ae(this,gm,void 0),(t=H(this,mm))==null||t.call(this),Ae(this,mm,void 0))}isFetching(e){return H(this,Tn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return H(this,Lc).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=H(this,Tn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=H(this,Tn).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Kg(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return H(this,Tn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=H(this,Tn).get(r.queryHash),s=i==null?void 0:i.state.data,o=eHe(t,s);if(o!==void 0)return H(this,Tn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Pr.batch(()=>H(this,Tn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=H(this,Tn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=H(this,Tn);Pr.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=H(this,Tn),r={type:"active",...e};return Pr.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Pr.batch(()=>H(this,Tn).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(so).catch(so)}invalidateQueries(e={},t={}){return Pr.batch(()=>{if(H(this,Tn).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Pr.batch(()=>H(this,Tn).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(so)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(so)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=H(this,Tn).build(this,t);return n.isStaleByTime(Kg(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(so).catch(so)}fetchInfiniteQuery(e){return e.behavior=pHe(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(so).catch(so)}resumePausedMutations(){return JC.isOnline()?H(this,Lc).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,Tn)}getMutationCache(){return H(this,Lc)}getDefaultOptions(){return H(this,zc)}setDefaultOptions(e){Ae(this,zc,e)}setQueryDefaults(e,t){H(this,hm).set(db(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...H(this,hm).values()];let n={};return t.forEach(r=>{hb(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){H(this,pm).set(db(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...H(this,pm).values()];let n={};return t.forEach(r=>{hb(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...H(this,zc).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=p8(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===nue&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...H(this,zc).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){H(this,Tn).clear(),H(this,Lc).clear()}},Tn=new WeakMap,Lc=new WeakMap,zc=new WeakMap,hm=new WeakMap,pm=new WeakMap,jc=new WeakMap,gm=new WeakMap,mm=new WeakMap,WY),qi,pt,Xb,bi,eh,ym,Ka,Yb,vm,bm,th,nh,Bc,xm,Lt,N1,N4,I4,L4,z4,j4,B4,U4,uue,HY,yHe=(HY=class extends Xx{constructor(t,n){super();Ke(this,Lt);Ke(this,qi);Ke(this,pt);Ke(this,Xb);Ke(this,bi);Ke(this,eh);Ke(this,ym);Ke(this,Ka);Ke(this,Yb);Ke(this,vm);Ke(this,bm);Ke(this,th);Ke(this,nh);Ke(this,Bc);Ke(this,xm,new Set);this.options=n,Ae(this,qi,t),Ae(this,Ka,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,pt).addObserver(this),gH(H(this,pt),this.options)?ht(this,Lt,N1).call(this):this.updateResult(),ht(this,Lt,z4).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return V4(H(this,pt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return V4(H(this,pt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ht(this,Lt,j4).call(this),ht(this,Lt,B4).call(this),H(this,pt).removeObserver(this)}setOptions(t,n){const r=this.options,i=H(this,pt);if(this.options=H(this,qi).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ko(this.options.enabled,H(this,pt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ht(this,Lt,U4).call(this),H(this,pt).setOptions(this.options),r._defaulted&&!O4(this.options,r)&&H(this,qi).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,pt),observer:this});const s=this.hasListeners();s&&mH(H(this,pt),i,this.options,r)&&ht(this,Lt,N1).call(this),this.updateResult(n),s&&(H(this,pt)!==i||Ko(this.options.enabled,H(this,pt))!==Ko(r.enabled,H(this,pt))||Kg(this.options.staleTime,H(this,pt))!==Kg(r.staleTime,H(this,pt)))&&ht(this,Lt,N4).call(this);const o=ht(this,Lt,I4).call(this);s&&(H(this,pt)!==i||Ko(this.options.enabled,H(this,pt))!==Ko(r.enabled,H(this,pt))||o!==H(this,Bc))&&ht(this,Lt,L4).call(this,o)}getOptimisticResult(t){const n=H(this,qi).getQueryCache().build(H(this,qi),t),r=this.createResult(n,t);return bHe(this,r)&&(Ae(this,bi,r),Ae(this,ym,this.options),Ae(this,eh,H(this,pt).state)),r}getCurrentResult(){return H(this,bi)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){H(this,xm).add(t)}getCurrentQuery(){return H(this,pt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=H(this,qi).defaultQueryOptions(t),r=H(this,qi).getQueryCache().build(H(this,qi),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ht(this,Lt,N1).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,bi)))}createResult(t,n){var S;const r=H(this,pt),i=this.options,s=H(this,bi),o=H(this,eh),a=H(this,ym),u=t!==r?t.state:H(this,Xb),{state:c}=t;let f={...c},d=!1,h;if(n._optimisticResults){const k=this.hasListeners(),$=!k&&gH(t,n),F=k&&mH(t,r,n,i);($||F)&&(f={...f,...lue(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:m}=f;if(n.select&&f.data!==void 0)if(s&&f.data===(o==null?void 0:o.data)&&n.select===H(this,Yb))h=H(this,vm);else try{Ae(this,Yb,n.select),h=n.select(f.data),h=D4(s==null?void 0:s.data,h,n),Ae(this,vm,h),Ae(this,Ka,null)}catch(k){Ae(this,Ka,k)}else h=f.data;if(n.placeholderData!==void 0&&h===void 0&&m==="pending"){let k;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))k=s.data;else if(k=typeof n.placeholderData=="function"?n.placeholderData((S=H(this,bm))==null?void 0:S.state.data,H(this,bm)):n.placeholderData,n.select&&k!==void 0)try{k=n.select(k),Ae(this,Ka,null)}catch($){Ae(this,Ka,$)}k!==void 0&&(m="success",h=D4(s==null?void 0:s.data,k,n),d=!0)}H(this,Ka)&&(p=H(this,Ka),h=H(this,vm),g=Date.now(),m="error");const y=f.fetchStatus==="fetching",v=m==="pending",b=m==="error",x=v&&y,w=h!==void 0;return{status:m,fetchStatus:f.fetchStatus,isPending:v,isSuccess:m==="success",isError:b,isInitialLoading:x,isLoading:x,data:h,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:b&&!w,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:b&&w,isStale:m8(t,n),refetch:this.refetch}}updateResult(t){const n=H(this,bi),r=this.createResult(H(this,pt),this.options);if(Ae(this,eh,H(this,pt).state),Ae(this,ym,this.options),H(this,eh).data!==void 0&&Ae(this,bm,H(this,pt)),O4(r,n))return;Ae(this,bi,r);const i={},s=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!H(this,xm).size)return!0;const l=new Set(a??H(this,xm));return this.options.throwOnError&&l.add("error"),Object.keys(H(this,bi)).some(u=>{const c=u;return H(this,bi)[c]!==n[c]&&l.has(c)})};(t==null?void 0:t.listeners)!==!1&&s()&&(i.listeners=!0),ht(this,Lt,uue).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ht(this,Lt,z4).call(this)}},qi=new WeakMap,pt=new WeakMap,Xb=new WeakMap,bi=new WeakMap,eh=new WeakMap,ym=new WeakMap,Ka=new WeakMap,Yb=new WeakMap,vm=new WeakMap,bm=new WeakMap,th=new WeakMap,nh=new WeakMap,Bc=new WeakMap,xm=new WeakMap,Lt=new WeakSet,N1=function(t){ht(this,Lt,U4).call(this);let n=H(this,pt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(so)),n},N4=function(){ht(this,Lt,j4).call(this);const t=Kg(this.options.staleTime,H(this,pt));if(c0||H(this,bi).isStale||!P4(t))return;const r=eue(H(this,bi).dataUpdatedAt,t)+1;Ae(this,th,setTimeout(()=>{H(this,bi).isStale||this.updateResult()},r))},I4=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,pt)):this.options.refetchInterval)??!1},L4=function(t){ht(this,Lt,B4).call(this),Ae(this,Bc,t),!(c0||Ko(this.options.enabled,H(this,pt))===!1||!P4(H(this,Bc))||H(this,Bc)===0)&&Ae(this,nh,setInterval(()=>{(this.options.refetchIntervalInBackground||g8.isFocused())&&ht(this,Lt,N1).call(this)},H(this,Bc)))},z4=function(){ht(this,Lt,N4).call(this),ht(this,Lt,L4).call(this,ht(this,Lt,I4).call(this))},j4=function(){H(this,th)&&(clearTimeout(H(this,th)),Ae(this,th,void 0))},B4=function(){H(this,nh)&&(clearInterval(H(this,nh)),Ae(this,nh,void 0))},U4=function(){const t=H(this,qi).getQueryCache().build(H(this,qi),this.options);if(t===H(this,pt))return;const n=H(this,pt);Ae(this,pt,t),Ae(this,Xb,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},uue=function(t){Pr.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(H(this,bi))}),H(this,qi).getQueryCache().notify({query:H(this,pt),type:"observerResultsUpdated"})})},HY);function vHe(e,t){return Ko(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function gH(e,t){return vHe(e,t)||e.state.data!==void 0&&V4(e,t,t.refetchOnMount)}function V4(e,t,n){if(Ko(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&m8(e,t)}return!1}function mH(e,t,n,r){return(e!==t||Ko(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&m8(e,n)}function m8(e,t){return Ko(t.enabled,e)!==!1&&e.isStaleByTime(Kg(t.staleTime,e))}function bHe(e,t){return!O4(e.getCurrentResult(),t)}var cue=M.createContext(void 0),xHe=e=>{const t=M.useContext(cue);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},wHe=({client:e,children:t})=>(M.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),T.jsx(cue.Provider,{value:e,children:t})),fue=M.createContext(!1),SHe=()=>M.useContext(fue);fue.Provider;function EHe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var CHe=M.createContext(EHe()),kHe=()=>M.useContext(CHe);function _He(e,t){return typeof e=="function"?e(...t):!!e}var $He=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},AHe=e=>{M.useEffect(()=>{e.clearReset()},[e])},THe=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&_He(n,[e.error,r]),RHe=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},FHe=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,PHe=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function OHe(e,t,n){var u,c,f,d;const r=xHe(),i=SHe(),s=kHe(),o=r.defaultQueryOptions(e);(c=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||c.call(u,o),o._optimisticResults=i?"isRestoring":"optimistic",RHe(o),$He(o,s),AHe(s);const[a]=M.useState(()=>new t(r,o)),l=a.getOptimisticResult(o);if(M.useSyncExternalStore(M.useCallback(h=>{const p=i?()=>{}:a.subscribe(Pr.batchCalls(h));return a.updateResult(),p},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),M.useEffect(()=>{a.setOptions(o,{listeners:!1})},[o,a]),FHe(o,l))throw PHe(o,a,s);if(THe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw l.error;return(d=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||d.call(f,o,l),o.notifyOnChangeProps?l:a.trackResult(l)}function due(e,t){return OHe(e,yHe)}function MHe(){const e=ci(v=>v.searchTargetFieldNames),t=ci(v=>v.setSearchTargetFieldNames),[n,r]=M.useState(""),[i,s]=M.useState(0),o=Al(v=>v.data),a=Al(v=>v.filename),l=st(v=>v.charts),u=st(v=>v.setCurrentChartIndex),c=st(v=>v.appendChart),{data:f=[],isLoading:d}=due({queryKey:["browseCharts",a,...e.sort()],queryFn:async()=>e.length===0||!o?[]:await Ki.call("browseCharts",{fieldNames:e})??[]}),h=Act(n),p=e.length>=iH,g=M.useCallback(async v=>{await c(v),u(l.length-1)},[c,l.length,u]);M.useEffect(()=>s(0),[n]),M.useEffect(()=>{e.length>=iH||r("")},[e]);const m=v=>{t(b=>b.includes(v)?b.filter(x=>x!==v):[...b,v]),r("")};return{browsedCharts:f,inputDisabled:p,loading:d,fieldNameMatches:h,inputValue:n,setInputValue:r,selectedFields:e,appendBrowseField:m,appendBrowsedChart:g,suggestionCursorIndex:i,handleKeydown:v=>{["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(v.key)&&v.stopPropagation(),["ArrowDown","ArrowUp"].includes(v.key)&&h.length>0&&(v.preventDefault(),s(b=>v.key==="ArrowDown"?Math.min(b+1,h.length-1):Math.max(b-1,0))),v.key==="Enter"&&h.length>i&&m(h[i].item),v.key==="Backspace"&&n===""&&t(b=>b.slice(0,-1))}}}var DHe=!1;function NHe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function IHe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var LHe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!DHe:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(IHe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=NHe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Yr="-ms-",ZC="-moz-",Pt="-webkit-",hue="comm",y8="rule",v8="decl",zHe="@import",pue="@keyframes",jHe="@layer",BHe=Math.abs,aA=String.fromCharCode,UHe=Object.assign;function VHe(e,t){return Rr(e,0)^45?(((t<<2^Rr(e,0))<<2^Rr(e,1))<<2^Rr(e,2))<<2^Rr(e,3):0}function gue(e){return e.trim()}function WHe(e,t){return(e=t.exec(e))?e[0]:e}function Ot(e,t,n){return e.replace(t,n)}function W4(e,t){return e.indexOf(t)}function Rr(e,t){return e.charCodeAt(t)|0}function pb(e,t,n){return e.slice(t,n)}function Ja(e){return e.length}function b8(e){return e.length}function $2(e,t){return t.push(e),e}function HHe(e,t){return e.map(t).join("")}var lA=1,f0=1,mue=0,ps=0,Xn=0,J0="";function uA(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:lA,column:f0,length:o,return:""}}function Hy(e,t){return UHe(uA("",null,null,"",null,null,0),e,{length:-e.length},t)}function qHe(){return Xn}function GHe(){return Xn=ps>0?Rr(J0,--ps):0,f0--,Xn===10&&(f0=1,lA--),Xn}function Ms(){return Xn=ps<mue?Rr(J0,ps++):0,f0++,Xn===10&&(f0=1,lA++),Xn}function ml(){return Rr(J0,ps)}function NS(){return ps}function Yx(e,t){return pb(J0,e,t)}function gb(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yue(e){return lA=f0=1,mue=Ja(J0=e),ps=0,[]}function vue(e){return J0="",e}function IS(e){return gue(Yx(ps-1,H4(e===91?e+2:e===40?e+1:e)))}function XHe(e){for(;(Xn=ml())&&Xn<33;)Ms();return gb(e)>2||gb(Xn)>3?"":" "}function YHe(e,t){for(;--t&&Ms()&&!(Xn<48||Xn>102||Xn>57&&Xn<65||Xn>70&&Xn<97););return Yx(e,NS()+(t<6&&ml()==32&&Ms()==32))}function H4(e){for(;Ms();)switch(Xn){case e:return ps;case 34:case 39:e!==34&&e!==39&&H4(Xn);break;case 40:e===41&&H4(e);break;case 92:Ms();break}return ps}function KHe(e,t){for(;Ms()&&e+Xn!==57;)if(e+Xn===84&&ml()===47)break;return"/*"+Yx(t,ps-1)+"*"+aA(e===47?e:Ms())}function QHe(e){for(;!gb(ml());)Ms();return Yx(e,ps)}function JHe(e){return vue(LS("",null,null,null,[""],e=yue(e),0,[0],e))}function LS(e,t,n,r,i,s,o,a,l){for(var u=0,c=0,f=o,d=0,h=0,p=0,g=1,m=1,y=1,v=0,b="",x=i,w=s,C=r,S=b;m;)switch(p=v,v=Ms()){case 40:if(p!=108&&Rr(S,f-1)==58){W4(S+=Ot(IS(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:S+=IS(v);break;case 9:case 10:case 13:case 32:S+=XHe(p);break;case 92:S+=YHe(NS()-1,7);continue;case 47:switch(ml()){case 42:case 47:$2(ZHe(KHe(Ms(),NS()),t,n),l);break;default:S+="/"}break;case 123*g:a[u++]=Ja(S)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+c:y==-1&&(S=Ot(S,/\f/g,"")),h>0&&Ja(S)-f&&$2(h>32?vH(S+";",r,n,f-1):vH(Ot(S," ","")+";",r,n,f-2),l);break;case 59:S+=";";default:if($2(C=yH(S,t,n,u,c,i,a,b,x=[],w=[],f),s),v===123)if(c===0)LS(S,t,C,C,x,s,f,a,w);else switch(d===99&&Rr(S,3)===110?100:d){case 100:case 108:case 109:case 115:LS(e,C,C,r&&$2(yH(e,C,C,0,0,i,a,b,i,x=[],f),w),i,w,f,a,r?x:w);break;default:LS(S,C,C,C,[""],w,0,a,w)}}u=c=h=0,g=y=1,b=S="",f=o;break;case 58:f=1+Ja(S),h=p;default:if(g<1){if(v==123)--g;else if(v==125&&g++==0&&GHe()==125)continue}switch(S+=aA(v),v*g){case 38:y=c>0?1:(S+="\f",-1);break;case 44:a[u++]=(Ja(S)-1)*y,y=1;break;case 64:ml()===45&&(S+=IS(Ms())),d=ml(),c=f=Ja(b=S+=QHe(NS())),v++;break;case 45:p===45&&Ja(S)==2&&(g=0)}}return s}function yH(e,t,n,r,i,s,o,a,l,u,c){for(var f=i-1,d=i===0?s:[""],h=b8(d),p=0,g=0,m=0;p<r;++p)for(var y=0,v=pb(e,f+1,f=BHe(g=o[p])),b=e;y<h;++y)(b=gue(g>0?d[y]+" "+v:Ot(v,/&\f/g,d[y])))&&(l[m++]=b);return uA(e,t,n,i===0?y8:a,l,u,c)}function ZHe(e,t,n){return uA(e,t,n,hue,aA(qHe()),pb(e,2,-2),0)}function vH(e,t,n,r){return uA(e,t,n,v8,pb(e,0,r),pb(e,r+1,-1),r)}function Qg(e,t){for(var n="",r=b8(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function eqe(e,t,n,r){switch(e.type){case jHe:if(e.children.length)break;case zHe:case v8:return e.return=e.return||e.value;case hue:return"";case pue:return e.return=e.value+"{"+Qg(e.children,r)+"}";case y8:e.value=e.props.join(",")}return Ja(n=Qg(e.children,r))?e.return=e.value+"{"+n+"}":""}function tqe(e){var t=b8(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function nqe(e){return function(t){t.root||(t=t.return)&&e(t)}}var bH=function(t){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=t(r);return n.set(r,i),i}};function bue(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var rqe=function(t,n,r){for(var i=0,s=0;i=s,s=ml(),i===38&&s===12&&(n[r]=1),!gb(s);)Ms();return Yx(t,ps)},iqe=function(t,n){var r=-1,i=44;do switch(gb(i)){case 0:i===38&&ml()===12&&(n[r]=1),t[r]+=rqe(ps-1,n,r);break;case 2:t[r]+=IS(i);break;case 4:if(i===44){t[++r]=ml()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=aA(i)}while(i=Ms());return t},sqe=function(t,n){return vue(iqe(yue(t),n))},xH=new WeakMap,oqe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!xH.get(r))&&!i){xH.set(t,!0);for(var s=[],o=sqe(n,s),a=r.props,l=0,u=0;l<o.length;l++)for(var c=0;c<a.length;c++,u++)t.props[u]=s[l]?o[l].replace(/&\f/g,a[c]):a[c]+" "+o[l]}}},aqe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function xue(e,t){switch(VHe(e,t)){case 5103:return Pt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Pt+e+ZC+e+Yr+e+e;case 6828:case 4268:return Pt+e+Yr+e+e;case 6165:return Pt+e+Yr+"flex-"+e+e;case 5187:return Pt+e+Ot(e,/(\w+).+(:[^]+)/,Pt+"box-$1$2"+Yr+"flex-$1$2")+e;case 5443:return Pt+e+Yr+"flex-item-"+Ot(e,/flex-|-self/,"")+e;case 4675:return Pt+e+Yr+"flex-line-pack"+Ot(e,/align-content|flex-|-self/,"")+e;case 5548:return Pt+e+Yr+Ot(e,"shrink","negative")+e;case 5292:return Pt+e+Yr+Ot(e,"basis","preferred-size")+e;case 6060:return Pt+"box-"+Ot(e,"-grow","")+Pt+e+Yr+Ot(e,"grow","positive")+e;case 4554:return Pt+Ot(e,/([^-])(transform)/g,"$1"+Pt+"$2")+e;case 6187:return Ot(Ot(Ot(e,/(zoom-|grab)/,Pt+"$1"),/(image-set)/,Pt+"$1"),e,"")+e;case 5495:case 3959:return Ot(e,/(image-set\([^]*)/,Pt+"$1$`$1");case 4968:return Ot(Ot(e,/(.+:)(flex-)?(.*)/,Pt+"box-pack:$3"+Yr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pt+e+e;case 4095:case 3583:case 4068:case 2532:return Ot(e,/(.+)-inline(.+)/,Pt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ja(e)-1-t>6)switch(Rr(e,t+1)){case 109:if(Rr(e,t+4)!==45)break;case 102:return Ot(e,/(.+:)(.+)-([^]+)/,"$1"+Pt+"$2-$3$1"+ZC+(Rr(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~W4(e,"stretch")?xue(Ot(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Rr(e,t+1)!==115)break;case 6444:switch(Rr(e,Ja(e)-3-(~W4(e,"!important")&&10))){case 107:return Ot(e,":",":"+Pt)+e;case 101:return Ot(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Pt+(Rr(e,14)===45?"inline-":"")+"box$3$1"+Pt+"$2$3$1"+Yr+"$2box$3")+e}break;case 5936:switch(Rr(e,t+11)){case 114:return Pt+e+Yr+Ot(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Pt+e+Yr+Ot(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Pt+e+Yr+Ot(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Pt+e+Yr+e+e}return e}var lqe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case v8:t.return=xue(t.value,t.length);break;case pue:return Qg([Hy(t,{value:Ot(t.value,"@","@"+Pt)})],i);case y8:if(t.length)return HHe(t.props,function(s){switch(WHe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Qg([Hy(t,{props:[Ot(s,/:(read-\w+)/,":"+ZC+"$1")]})],i);case"::placeholder":return Qg([Hy(t,{props:[Ot(s,/:(plac\w+)/,":"+Pt+"input-$1")]}),Hy(t,{props:[Ot(s,/:(plac\w+)/,":"+ZC+"$1")]}),Hy(t,{props:[Ot(s,/:(plac\w+)/,Yr+"input-$1")]})],i)}return""})}},uqe=[lqe],cqe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var m=g.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||uqe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var m=g.getAttribute("data-emotion").split(" "),y=1;y<m.length;y++)s[m[y]]=!0;a.push(g)});var l,u=[oqe,aqe];{var c,f=[eqe,nqe(function(g){c.insert(g)})],d=tqe(u.concat(i,f)),h=function(m){return Qg(JHe(m),d)};l=function(m,y,v,b){c=v,h(m?m+"{"+y.styles+"}":y.styles),b&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new LHe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p};function ek(){return ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ek.apply(null,arguments)}var wue={exports:{}},Vt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Er=typeof Symbol=="function"&&Symbol.for,x8=Er?Symbol.for("react.element"):60103,w8=Er?Symbol.for("react.portal"):60106,cA=Er?Symbol.for("react.fragment"):60107,fA=Er?Symbol.for("react.strict_mode"):60108,dA=Er?Symbol.for("react.profiler"):60114,hA=Er?Symbol.for("react.provider"):60109,pA=Er?Symbol.for("react.context"):60110,S8=Er?Symbol.for("react.async_mode"):60111,gA=Er?Symbol.for("react.concurrent_mode"):60111,mA=Er?Symbol.for("react.forward_ref"):60112,yA=Er?Symbol.for("react.suspense"):60113,fqe=Er?Symbol.for("react.suspense_list"):60120,vA=Er?Symbol.for("react.memo"):60115,bA=Er?Symbol.for("react.lazy"):60116,dqe=Er?Symbol.for("react.block"):60121,hqe=Er?Symbol.for("react.fundamental"):60117,pqe=Er?Symbol.for("react.responder"):60118,gqe=Er?Symbol.for("react.scope"):60119;function qs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case x8:switch(e=e.type,e){case S8:case gA:case cA:case dA:case fA:case yA:return e;default:switch(e=e&&e.$$typeof,e){case pA:case mA:case bA:case vA:case hA:return e;default:return t}}case w8:return t}}}function Sue(e){return qs(e)===gA}Vt.AsyncMode=S8;Vt.ConcurrentMode=gA;Vt.ContextConsumer=pA;Vt.ContextProvider=hA;Vt.Element=x8;Vt.ForwardRef=mA;Vt.Fragment=cA;Vt.Lazy=bA;Vt.Memo=vA;Vt.Portal=w8;Vt.Profiler=dA;Vt.StrictMode=fA;Vt.Suspense=yA;Vt.isAsyncMode=function(e){return Sue(e)||qs(e)===S8};Vt.isConcurrentMode=Sue;Vt.isContextConsumer=function(e){return qs(e)===pA};Vt.isContextProvider=function(e){return qs(e)===hA};Vt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===x8};Vt.isForwardRef=function(e){return qs(e)===mA};Vt.isFragment=function(e){return qs(e)===cA};Vt.isLazy=function(e){return qs(e)===bA};Vt.isMemo=function(e){return qs(e)===vA};Vt.isPortal=function(e){return qs(e)===w8};Vt.isProfiler=function(e){return qs(e)===dA};Vt.isStrictMode=function(e){return qs(e)===fA};Vt.isSuspense=function(e){return qs(e)===yA};Vt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===cA||e===gA||e===dA||e===fA||e===yA||e===fqe||typeof e=="object"&&e!==null&&(e.$$typeof===bA||e.$$typeof===vA||e.$$typeof===hA||e.$$typeof===pA||e.$$typeof===mA||e.$$typeof===hqe||e.$$typeof===pqe||e.$$typeof===gqe||e.$$typeof===dqe)};Vt.typeOf=qs;wue.exports=Vt;var mqe=wue.exports,Eue=mqe,yqe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},vqe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Cue={};Cue[Eue.ForwardRef]=yqe;Cue[Eue.Memo]=vqe;var bqe=!0;function xqe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var kue=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||bqe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},_ue=function(t,n,r){kue(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function wqe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Sqe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Eqe=!1,Cqe=/[A-Z]|^ms/g,kqe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$ue=function(t){return t.charCodeAt(1)===45},wH=function(t){return t!=null&&typeof t!="boolean"},W3=bue(function(e){return $ue(e)?e:e.replace(Cqe,"-$&").toLowerCase()}),SH=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(kqe,function(r,i,s){return Za={name:i,styles:s,next:Za},i})}return Sqe[t]!==1&&!$ue(t)&&typeof n=="number"&&n!==0?n+"px":n},_qe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function mb(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Za={name:i.name,styles:i.styles,next:Za},i.name;var s=n;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Za={name:o.name,styles:o.styles,next:Za},o=o.next;var a=s.styles+";";return a}return $qe(e,t,n)}case"function":{if(e!==void 0){var l=Za,u=n(e);return Za=l,mb(e,t,u)}break}}var c=n;if(t==null)return c;var f=t[c];return f!==void 0?f:c}function $qe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=mb(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object"){var a=o;t!=null&&t[a]!==void 0?r+=s+"{"+t[a]+"}":wH(a)&&(r+=W3(s)+":"+SH(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&Eqe)throw new Error(_qe);if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var l=0;l<o.length;l++)wH(o[l])&&(r+=W3(s)+":"+SH(s,o[l])+";");else{var u=mb(e,t,o);switch(s){case"animation":case"animationName":{r+=W3(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}}return r}var EH=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Za;function E8(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";Za=void 0;var s=e[0];if(s==null||s.raw===void 0)r=!1,i+=mb(n,t,s);else{var o=s;i+=o[0]}for(var a=1;a<e.length;a++)if(i+=mb(n,t,e[a]),r){var l=s;i+=l[a]}EH.lastIndex=0;for(var u="",c;(c=EH.exec(i))!==null;)u+="-"+c[1];var f=wqe(i)+u;return{name:f,styles:i,next:Za}}var Aqe=function(t){return t()},Aue=tz.useInsertionEffect?tz.useInsertionEffect:!1,Tqe=Aue||Aqe,CH=Aue||M.useLayoutEffect,Tue=M.createContext(typeof HTMLElement<"u"?cqe({key:"css"}):null);Tue.Provider;var Rue=function(t){return M.forwardRef(function(n,r){var i=M.useContext(Tue);return t(n,i,r)})},yb=M.createContext({}),Rqe=function(t,n){if(typeof n=="function"){var r=n(t);return r}return ek({},t,n)},Fqe=bH(function(e){return bH(function(t){return Rqe(e,t)})}),Pqe=function(t){var n=M.useContext(yb);return t.theme!==n&&(n=Fqe(n)(t.theme)),M.createElement(yb.Provider,{value:n},t.children)},xA=Rue(function(e,t){var n=e.styles,r=E8([n],void 0,M.useContext(yb)),i=M.useRef();return CH(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[t]),CH(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&_ue(t,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function Oqe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E8(t)}var Mqe=function(){var t=Oqe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Fue=String.raw,Pue=Fue`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Dqe=()=>T.jsx(xA,{styles:Pue}),Nqe=({scope:e=""})=>T.jsx(xA,{styles:Fue`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${Pue}
    `});function Iqe(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function Cr(e={}){const{name:t,strict:n=!0,hookName:r="useContext",providerName:i="Provider",errorMessage:s,defaultValue:o}=e,a=M.createContext(o);a.displayName=t;function l(){var u;const c=M.useContext(a);if(!c&&n){const f=new Error(s??Iqe(r,i));throw f.name="ContextError",(u=Error.captureStackTrace)==null||u.call(Error,f,l),f}return c}return[a.Provider,l,a]}var[Lqe,zqe]=Cr({strict:!1,name:"PortalManagerContext"});function Oue(e){const{children:t,zIndex:n}=e;return T.jsx(Lqe,{value:{zIndex:n},children:t})}Oue.displayName="PortalManager";var d0=globalThis!=null&&globalThis.document?M.useLayoutEffect:M.useEffect,Mue={exports:{}},Gs={},Due={exports:{}},Nue={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,U){var X=z.length;z.push(U);e:for(;0<X;){var K=X-1>>>1,pe=z[K];if(0<i(pe,U))z[K]=U,z[X]=pe,X=K;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var U=z[0],X=z.pop();if(X!==U){z[0]=X;e:for(var K=0,pe=z.length,se=pe>>>1;K<se;){var _e=2*(K+1)-1,Ze=z[_e],Ct=_e+1,Nn=z[Ct];if(0>i(Ze,X))Ct<pe&&0>i(Nn,Ze)?(z[K]=Nn,z[Ct]=X,K=Ct):(z[K]=Ze,z[_e]=X,K=_e);else if(Ct<pe&&0>i(Nn,X))z[K]=Nn,z[Ct]=X,K=Ct;else break e}}return U}function i(z,U){var X=z.sortIndex-U.sortIndex;return X!==0?X:z.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=z)r(u),U.sortIndex=U.expirationTime,t(l,U);else break;U=n(u)}}function x(z){if(g=!1,b(z),!p)if(n(l)!==null)p=!0,P(w);else{var U=n(u);U!==null&&j(x,U.startTime-z)}}function w(z,U){p=!1,g&&(g=!1,y(k),k=-1),h=!0;var X=d;try{for(b(U),f=n(l);f!==null&&(!(f.expirationTime>U)||z&&!O());){var K=f.callback;if(typeof K=="function"){f.callback=null,d=f.priorityLevel;var pe=K(f.expirationTime<=U);U=e.unstable_now(),typeof pe=="function"?f.callback=pe:f===n(l)&&r(l),b(U)}else r(l);f=n(l)}if(f!==null)var se=!0;else{var _e=n(u);_e!==null&&j(x,_e.startTime-U),se=!1}return se}finally{f=null,d=X,h=!1}}var C=!1,S=null,k=-1,$=5,F=-1;function O(){return!(e.unstable_now()-F<$)}function B(){if(S!==null){var z=e.unstable_now();F=z;var U=!0;try{U=S(!0,z)}finally{U?D():(C=!1,S=null)}}else C=!1}var D;if(typeof v=="function")D=function(){v(B)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,A=N.port2;N.port1.onmessage=B,D=function(){A.postMessage(null)}}else D=function(){m(B,0)};function P(z){S=z,C||(C=!0,D())}function j(z,U){k=m(function(){z(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,P(w))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(z){switch(d){case 1:case 2:case 3:var U=3;break;default:U=d}var X=d;d=U;try{return z()}finally{d=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,U){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=d;d=z;try{return U()}finally{d=X}},e.unstable_scheduleCallback=function(z,U,X){var K=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,z){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=X+pe,z={id:c++,callback:U,priorityLevel:z,startTime:X,expirationTime:pe,sortIndex:-1},X>K?(z.sortIndex=X,t(u,z),n(l)===null&&z===n(u)&&(g?(y(k),k=-1):g=!0,j(x,X-K))):(z.sortIndex=pe,t(l,z),p||h||(p=!0,P(w))),z},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(z){var U=d;return function(){var X=d;d=U;try{return z.apply(this,arguments)}finally{d=X}}}})(Nue);Due.exports=Nue;var jqe=Due.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bqe=M,Vs=jqe;function fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Iue=new Set,vb={};function wp(e,t){h0(e,t),h0(e+"Capture",t)}function h0(e,t){for(vb[e]=t,e=0;e<t.length;e++)Iue.add(t[e])}var Du=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),q4=Object.prototype.hasOwnProperty,Uqe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kH={},_H={};function Vqe(e){return q4.call(_H,e)?!0:q4.call(kH,e)?!1:Uqe.test(e)?_H[e]=!0:(kH[e]=!0,!1)}function Wqe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Hqe(e,t,n,r){if(t===null||typeof t>"u"||Wqe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ui(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jr[e]=new Ui(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jr[t]=new Ui(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jr[e]=new Ui(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jr[e]=new Ui(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jr[e]=new Ui(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jr[e]=new Ui(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jr[e]=new Ui(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jr[e]=new Ui(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jr[e]=new Ui(e,5,!1,e.toLowerCase(),null,!1,!1)});var C8=/[\-:]([a-z])/g;function k8(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(C8,k8);jr[t]=new Ui(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(C8,k8);jr[t]=new Ui(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(C8,k8);jr[t]=new Ui(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jr[e]=new Ui(e,1,!1,e.toLowerCase(),null,!1,!1)});jr.xlinkHref=new Ui("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jr[e]=new Ui(e,1,!1,e.toLowerCase(),null,!0,!0)});function _8(e,t,n,r){var i=jr.hasOwnProperty(t)?jr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Hqe(t,n,i,r)&&(n=null),r||i===null?Vqe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Qu=Bqe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A2=Symbol.for("react.element"),yg=Symbol.for("react.portal"),vg=Symbol.for("react.fragment"),$8=Symbol.for("react.strict_mode"),G4=Symbol.for("react.profiler"),Lue=Symbol.for("react.provider"),zue=Symbol.for("react.context"),A8=Symbol.for("react.forward_ref"),X4=Symbol.for("react.suspense"),Y4=Symbol.for("react.suspense_list"),T8=Symbol.for("react.memo"),Ac=Symbol.for("react.lazy"),jue=Symbol.for("react.offscreen"),$H=Symbol.iterator;function qy(e){return e===null||typeof e!="object"?null:(e=$H&&e[$H]||e["@@iterator"],typeof e=="function"?e:null)}var _n=Object.assign,H3;function I1(e){if(H3===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);H3=t&&t[1]||""}return`
`+H3+e}var q3=!1;function G3(e,t){if(!e||q3)return"";q3=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{q3=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?I1(e):""}function qqe(e){switch(e.tag){case 5:return I1(e.type);case 16:return I1("Lazy");case 13:return I1("Suspense");case 19:return I1("SuspenseList");case 0:case 2:case 15:return e=G3(e.type,!1),e;case 11:return e=G3(e.type.render,!1),e;case 1:return e=G3(e.type,!0),e;default:return""}}function K4(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vg:return"Fragment";case yg:return"Portal";case G4:return"Profiler";case $8:return"StrictMode";case X4:return"Suspense";case Y4:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zue:return(e.displayName||"Context")+".Consumer";case Lue:return(e._context.displayName||"Context")+".Provider";case A8:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T8:return t=e.displayName||null,t!==null?t:K4(e.type)||"Memo";case Ac:t=e._payload,e=e._init;try{return K4(e(t))}catch{}}return null}function Gqe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K4(t);case 8:return t===$8?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Of(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bue(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xqe(e){var t=Bue(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function T2(e){e._valueTracker||(e._valueTracker=Xqe(e))}function Uue(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Bue(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function tk(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Q4(e,t){var n=t.checked;return _n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function AH(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Of(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vue(e,t){t=t.checked,t!=null&&_8(e,"checked",t,!1)}function J4(e,t){Vue(e,t);var n=Of(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Z4(e,t.type,n):t.hasOwnProperty("defaultValue")&&Z4(e,t.type,Of(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function TH(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Z4(e,t,n){(t!=="number"||tk(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var L1=Array.isArray;function Jg(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Of(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function eO(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fe(91));return _n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function RH(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(fe(92));if(L1(n)){if(1<n.length)throw Error(fe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Of(n)}}function Wue(e,t){var n=Of(t.value),r=Of(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function FH(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tO(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hue(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var R2,que=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(R2=R2||document.createElement("div"),R2.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=R2.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bb(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var fv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yqe=["Webkit","ms","Moz","O"];Object.keys(fv).forEach(function(e){Yqe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fv[t]=fv[e]})});function Gue(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||fv.hasOwnProperty(e)&&fv[e]?(""+t).trim():t+"px"}function Xue(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Gue(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Kqe=_n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nO(e,t){if(t){if(Kqe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fe(62))}}function rO(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iO=null;function R8(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sO=null,Zg=null,em=null;function PH(e){if(e=Jx(e)){if(typeof sO!="function")throw Error(fe(280));var t=e.stateNode;t&&(t=kA(t),sO(e.stateNode,e.type,t))}}function Yue(e){Zg?em?em.push(e):em=[e]:Zg=e}function Kue(){if(Zg){var e=Zg,t=em;if(em=Zg=null,PH(e),t)for(e=0;e<t.length;e++)PH(t[e])}}function Que(e,t){return e(t)}function Jue(){}var X3=!1;function Zue(e,t,n){if(X3)return e(t,n);X3=!0;try{return Que(e,t,n)}finally{X3=!1,(Zg!==null||em!==null)&&(Jue(),Kue())}}function xb(e,t){var n=e.stateNode;if(n===null)return null;var r=kA(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(fe(231,t,typeof n));return n}var oO=!1;if(Du)try{var Gy={};Object.defineProperty(Gy,"passive",{get:function(){oO=!0}}),window.addEventListener("test",Gy,Gy),window.removeEventListener("test",Gy,Gy)}catch{oO=!1}function Qqe(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var dv=!1,nk=null,rk=!1,aO=null,Jqe={onError:function(e){dv=!0,nk=e}};function Zqe(e,t,n,r,i,s,o,a,l){dv=!1,nk=null,Qqe.apply(Jqe,arguments)}function eGe(e,t,n,r,i,s,o,a,l){if(Zqe.apply(this,arguments),dv){if(dv){var u=nk;dv=!1,nk=null}else throw Error(fe(198));rk||(rk=!0,aO=u)}}function Sp(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ece(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function OH(e){if(Sp(e)!==e)throw Error(fe(188))}function tGe(e){var t=e.alternate;if(!t){if(t=Sp(e),t===null)throw Error(fe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return OH(i),e;if(s===r)return OH(i),t;s=s.sibling}throw Error(fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?e:t}function tce(e){return e=tGe(e),e!==null?nce(e):null}function nce(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nce(e);if(t!==null)return t;e=e.sibling}return null}var rce=Vs.unstable_scheduleCallback,MH=Vs.unstable_cancelCallback,nGe=Vs.unstable_shouldYield,rGe=Vs.unstable_requestPaint,jn=Vs.unstable_now,iGe=Vs.unstable_getCurrentPriorityLevel,F8=Vs.unstable_ImmediatePriority,ice=Vs.unstable_UserBlockingPriority,ik=Vs.unstable_NormalPriority,sGe=Vs.unstable_LowPriority,sce=Vs.unstable_IdlePriority,wA=null,yl=null;function oGe(e){if(yl&&typeof yl.onCommitFiberRoot=="function")try{yl.onCommitFiberRoot(wA,e,void 0,(e.current.flags&128)===128)}catch{}}var ca=Math.clz32?Math.clz32:uGe,aGe=Math.log,lGe=Math.LN2;function uGe(e){return e>>>=0,e===0?32:31-(aGe(e)/lGe|0)|0}var F2=64,P2=4194304;function z1(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sk(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=z1(a):(s&=o,s!==0&&(r=z1(s)))}else o=n&~i,o!==0?r=z1(o):s!==0&&(r=z1(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ca(t),i=1<<n,r|=e[n],t&=~i;return r}function cGe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fGe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ca(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=cGe(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function lO(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oce(){var e=F2;return F2<<=1,!(F2&4194240)&&(F2=64),e}function Y3(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Kx(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ca(t),e[t]=n}function dGe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ca(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function P8(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ca(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Bt=0;function ace(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lce,O8,uce,cce,fce,uO=!1,O2=[],of=null,af=null,lf=null,wb=new Map,Sb=new Map,Oc=[],hGe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DH(e,t){switch(e){case"focusin":case"focusout":of=null;break;case"dragenter":case"dragleave":af=null;break;case"mouseover":case"mouseout":lf=null;break;case"pointerover":case"pointerout":wb.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sb.delete(t.pointerId)}}function Xy(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Jx(t),t!==null&&O8(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function pGe(e,t,n,r,i){switch(t){case"focusin":return of=Xy(of,e,t,n,r,i),!0;case"dragenter":return af=Xy(af,e,t,n,r,i),!0;case"mouseover":return lf=Xy(lf,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return wb.set(s,Xy(wb.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Sb.set(s,Xy(Sb.get(s)||null,e,t,n,r,i)),!0}return!1}function dce(e){var t=Hd(e.target);if(t!==null){var n=Sp(t);if(n!==null){if(t=n.tag,t===13){if(t=ece(n),t!==null){e.blockedOn=t,fce(e.priority,function(){uce(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zS(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=cO(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);iO=r,n.target.dispatchEvent(r),iO=null}else return t=Jx(n),t!==null&&O8(t),e.blockedOn=n,!1;t.shift()}return!0}function NH(e,t,n){zS(e)&&n.delete(t)}function gGe(){uO=!1,of!==null&&zS(of)&&(of=null),af!==null&&zS(af)&&(af=null),lf!==null&&zS(lf)&&(lf=null),wb.forEach(NH),Sb.forEach(NH)}function Yy(e,t){e.blockedOn===t&&(e.blockedOn=null,uO||(uO=!0,Vs.unstable_scheduleCallback(Vs.unstable_NormalPriority,gGe)))}function Eb(e){function t(i){return Yy(i,e)}if(0<O2.length){Yy(O2[0],e);for(var n=1;n<O2.length;n++){var r=O2[n];r.blockedOn===e&&(r.blockedOn=null)}}for(of!==null&&Yy(of,e),af!==null&&Yy(af,e),lf!==null&&Yy(lf,e),wb.forEach(t),Sb.forEach(t),n=0;n<Oc.length;n++)r=Oc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Oc.length&&(n=Oc[0],n.blockedOn===null);)dce(n),n.blockedOn===null&&Oc.shift()}var tm=Qu.ReactCurrentBatchConfig,ok=!0;function mGe(e,t,n,r){var i=Bt,s=tm.transition;tm.transition=null;try{Bt=1,M8(e,t,n,r)}finally{Bt=i,tm.transition=s}}function yGe(e,t,n,r){var i=Bt,s=tm.transition;tm.transition=null;try{Bt=4,M8(e,t,n,r)}finally{Bt=i,tm.transition=s}}function M8(e,t,n,r){if(ok){var i=cO(e,t,n,r);if(i===null)sR(e,t,r,ak,n),DH(e,r);else if(pGe(i,e,t,n,r))r.stopPropagation();else if(DH(e,r),t&4&&-1<hGe.indexOf(e)){for(;i!==null;){var s=Jx(i);if(s!==null&&lce(s),s=cO(e,t,n,r),s===null&&sR(e,t,r,ak,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sR(e,t,r,null,n)}}var ak=null;function cO(e,t,n,r){if(ak=null,e=R8(r),e=Hd(e),e!==null)if(t=Sp(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ece(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ak=e,null}function hce(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iGe()){case F8:return 1;case ice:return 4;case ik:case sGe:return 16;case sce:return 536870912;default:return 16}default:return 16}}var Jc=null,D8=null,jS=null;function pce(){if(jS)return jS;var e,t=D8,n=t.length,r,i="value"in Jc?Jc.value:Jc.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return jS=i.slice(e,1<r?1-r:void 0)}function BS(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function M2(){return!0}function IH(){return!1}function Xs(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?M2:IH,this.isPropagationStopped=IH,this}return _n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=M2)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=M2)},persist:function(){},isPersistent:M2}),t}var Z0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N8=Xs(Z0),Qx=_n({},Z0,{view:0,detail:0}),vGe=Xs(Qx),K3,Q3,Ky,SA=_n({},Qx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:I8,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ky&&(Ky&&e.type==="mousemove"?(K3=e.screenX-Ky.screenX,Q3=e.screenY-Ky.screenY):Q3=K3=0,Ky=e),K3)},movementY:function(e){return"movementY"in e?e.movementY:Q3}}),LH=Xs(SA),bGe=_n({},SA,{dataTransfer:0}),xGe=Xs(bGe),wGe=_n({},Qx,{relatedTarget:0}),J3=Xs(wGe),SGe=_n({},Z0,{animationName:0,elapsedTime:0,pseudoElement:0}),EGe=Xs(SGe),CGe=_n({},Z0,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kGe=Xs(CGe),_Ge=_n({},Z0,{data:0}),zH=Xs(_Ge),$Ge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AGe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TGe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RGe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=TGe[e])?!!t[e]:!1}function I8(){return RGe}var FGe=_n({},Qx,{key:function(e){if(e.key){var t=$Ge[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=BS(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?AGe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:I8,charCode:function(e){return e.type==="keypress"?BS(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?BS(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),PGe=Xs(FGe),OGe=_n({},SA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jH=Xs(OGe),MGe=_n({},Qx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:I8}),DGe=Xs(MGe),NGe=_n({},Z0,{propertyName:0,elapsedTime:0,pseudoElement:0}),IGe=Xs(NGe),LGe=_n({},SA,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zGe=Xs(LGe),jGe=[9,13,27,32],L8=Du&&"CompositionEvent"in window,hv=null;Du&&"documentMode"in document&&(hv=document.documentMode);var BGe=Du&&"TextEvent"in window&&!hv,gce=Du&&(!L8||hv&&8<hv&&11>=hv),BH=" ",UH=!1;function mce(e,t){switch(e){case"keyup":return jGe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yce(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bg=!1;function UGe(e,t){switch(e){case"compositionend":return yce(t);case"keypress":return t.which!==32?null:(UH=!0,BH);case"textInput":return e=t.data,e===BH&&UH?null:e;default:return null}}function VGe(e,t){if(bg)return e==="compositionend"||!L8&&mce(e,t)?(e=pce(),jS=D8=Jc=null,bg=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gce&&t.locale!=="ko"?null:t.data;default:return null}}var WGe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VH(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!WGe[e.type]:t==="textarea"}function vce(e,t,n,r){Yue(r),t=lk(t,"onChange"),0<t.length&&(n=new N8("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var pv=null,Cb=null;function HGe(e){Tce(e,0)}function EA(e){var t=Sg(e);if(Uue(t))return e}function qGe(e,t){if(e==="change")return t}var bce=!1;if(Du){var Z3;if(Du){var eR="oninput"in document;if(!eR){var WH=document.createElement("div");WH.setAttribute("oninput","return;"),eR=typeof WH.oninput=="function"}Z3=eR}else Z3=!1;bce=Z3&&(!document.documentMode||9<document.documentMode)}function HH(){pv&&(pv.detachEvent("onpropertychange",xce),Cb=pv=null)}function xce(e){if(e.propertyName==="value"&&EA(Cb)){var t=[];vce(t,Cb,e,R8(e)),Zue(HGe,t)}}function GGe(e,t,n){e==="focusin"?(HH(),pv=t,Cb=n,pv.attachEvent("onpropertychange",xce)):e==="focusout"&&HH()}function XGe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return EA(Cb)}function YGe(e,t){if(e==="click")return EA(t)}function KGe(e,t){if(e==="input"||e==="change")return EA(t)}function QGe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wa=typeof Object.is=="function"?Object.is:QGe;function kb(e,t){if(wa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!q4.call(t,i)||!wa(e[i],t[i]))return!1}return!0}function qH(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function GH(e,t){var n=qH(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qH(n)}}function wce(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wce(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sce(){for(var e=window,t=tk();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=tk(e.document)}return t}function z8(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function JGe(e){var t=Sce(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wce(n.ownerDocument.documentElement,n)){if(r!==null&&z8(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=GH(n,s);var o=GH(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ZGe=Du&&"documentMode"in document&&11>=document.documentMode,xg=null,fO=null,gv=null,dO=!1;function XH(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dO||xg==null||xg!==tk(r)||(r=xg,"selectionStart"in r&&z8(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gv&&kb(gv,r)||(gv=r,r=lk(fO,"onSelect"),0<r.length&&(t=new N8("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xg)))}function D2(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wg={animationend:D2("Animation","AnimationEnd"),animationiteration:D2("Animation","AnimationIteration"),animationstart:D2("Animation","AnimationStart"),transitionend:D2("Transition","TransitionEnd")},tR={},Ece={};Du&&(Ece=document.createElement("div").style,"AnimationEvent"in window||(delete wg.animationend.animation,delete wg.animationiteration.animation,delete wg.animationstart.animation),"TransitionEvent"in window||delete wg.transitionend.transition);function CA(e){if(tR[e])return tR[e];if(!wg[e])return e;var t=wg[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ece)return tR[e]=t[n];return e}var Cce=CA("animationend"),kce=CA("animationiteration"),_ce=CA("animationstart"),$ce=CA("transitionend"),Ace=new Map,YH="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jf(e,t){Ace.set(e,t),wp(t,[e])}for(var nR=0;nR<YH.length;nR++){var rR=YH[nR],eXe=rR.toLowerCase(),tXe=rR[0].toUpperCase()+rR.slice(1);Jf(eXe,"on"+tXe)}Jf(Cce,"onAnimationEnd");Jf(kce,"onAnimationIteration");Jf(_ce,"onAnimationStart");Jf("dblclick","onDoubleClick");Jf("focusin","onFocus");Jf("focusout","onBlur");Jf($ce,"onTransitionEnd");h0("onMouseEnter",["mouseout","mouseover"]);h0("onMouseLeave",["mouseout","mouseover"]);h0("onPointerEnter",["pointerout","pointerover"]);h0("onPointerLeave",["pointerout","pointerover"]);wp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wp("onBeforeInput",["compositionend","keypress","textInput","paste"]);wp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var j1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nXe=new Set("cancel close invalid load scroll toggle".split(" ").concat(j1));function KH(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,eGe(r,t,void 0,e),e.currentTarget=null}function Tce(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;KH(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;KH(i,a,u),s=l}}}if(rk)throw e=aO,rk=!1,aO=null,e}function an(e,t){var n=t[yO];n===void 0&&(n=t[yO]=new Set);var r=e+"__bubble";n.has(r)||(Rce(t,e,2,!1),n.add(r))}function iR(e,t,n){var r=0;t&&(r|=4),Rce(n,e,r,t)}var N2="_reactListening"+Math.random().toString(36).slice(2);function _b(e){if(!e[N2]){e[N2]=!0,Iue.forEach(function(n){n!=="selectionchange"&&(nXe.has(n)||iR(n,!1,e),iR(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[N2]||(t[N2]=!0,iR("selectionchange",!1,t))}}function Rce(e,t,n,r){switch(hce(t)){case 1:var i=mGe;break;case 4:i=yGe;break;default:i=M8}n=i.bind(null,t,n,e),i=void 0,!oO||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function sR(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Hd(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Zue(function(){var u=s,c=R8(n),f=[];e:{var d=Ace.get(e);if(d!==void 0){var h=N8,p=e;switch(e){case"keypress":if(BS(n)===0)break e;case"keydown":case"keyup":h=PGe;break;case"focusin":p="focus",h=J3;break;case"focusout":p="blur",h=J3;break;case"beforeblur":case"afterblur":h=J3;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=LH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=xGe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=DGe;break;case Cce:case kce:case _ce:h=EGe;break;case $ce:h=IGe;break;case"scroll":h=vGe;break;case"wheel":h=zGe;break;case"copy":case"cut":case"paste":h=kGe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=jH}var g=(t&4)!==0,m=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=xb(v,y),x!=null&&g.push($b(v,x,b)))),m)break;v=v.return}0<g.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==iO&&(p=n.relatedTarget||n.fromElement)&&(Hd(p)||p[Nu]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Hd(p):null,p!==null&&(m=Sp(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(g=LH,x="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=jH,x="onPointerLeave",y="onPointerEnter",v="pointer"),m=h==null?d:Sg(h),b=p==null?d:Sg(p),d=new g(x,v+"leave",h,n,c),d.target=m,d.relatedTarget=b,x=null,Hd(c)===u&&(g=new g(y,v+"enter",p,n,c),g.target=b,g.relatedTarget=m,x=g),m=x,h&&p)t:{for(g=h,y=p,v=0,b=g;b;b=eg(b))v++;for(b=0,x=y;x;x=eg(x))b++;for(;0<v-b;)g=eg(g),v--;for(;0<b-v;)y=eg(y),b--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=eg(g),y=eg(y)}g=null}else g=null;h!==null&&QH(f,d,h,g,!1),p!==null&&m!==null&&QH(f,m,p,g,!0)}}e:{if(d=u?Sg(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=qGe;else if(VH(d))if(bce)w=KGe;else{w=XGe;var C=GGe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=YGe);if(w&&(w=w(e,u))){vce(f,w,n,c);break e}C&&C(e,d,u),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&Z4(d,"number",d.value)}switch(C=u?Sg(u):window,e){case"focusin":(VH(C)||C.contentEditable==="true")&&(xg=C,fO=u,gv=null);break;case"focusout":gv=fO=xg=null;break;case"mousedown":dO=!0;break;case"contextmenu":case"mouseup":case"dragend":dO=!1,XH(f,n,c);break;case"selectionchange":if(ZGe)break;case"keydown":case"keyup":XH(f,n,c)}var S;if(L8)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else bg?mce(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(gce&&n.locale!=="ko"&&(bg||k!=="onCompositionStart"?k==="onCompositionEnd"&&bg&&(S=pce()):(Jc=c,D8="value"in Jc?Jc.value:Jc.textContent,bg=!0)),C=lk(u,k),0<C.length&&(k=new zH(k,e,null,n,c),f.push({event:k,listeners:C}),S?k.data=S:(S=yce(n),S!==null&&(k.data=S)))),(S=BGe?UGe(e,n):VGe(e,n))&&(u=lk(u,"onBeforeInput"),0<u.length&&(c=new zH("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=S))}Tce(f,t)})}function $b(e,t,n){return{instance:e,listener:t,currentTarget:n}}function lk(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=xb(e,n),s!=null&&r.unshift($b(e,s,i)),s=xb(e,t),s!=null&&r.push($b(e,s,i))),e=e.return}return r}function eg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function QH(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=xb(n,s),l!=null&&o.unshift($b(n,l,a))):i||(l=xb(n,s),l!=null&&o.push($b(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var rXe=/\r\n?/g,iXe=/\u0000|\uFFFD/g;function JH(e){return(typeof e=="string"?e:""+e).replace(rXe,`
`).replace(iXe,"")}function I2(e,t,n){if(t=JH(t),JH(e)!==t&&n)throw Error(fe(425))}function uk(){}var hO=null,pO=null;function gO(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mO=typeof setTimeout=="function"?setTimeout:void 0,sXe=typeof clearTimeout=="function"?clearTimeout:void 0,ZH=typeof Promise=="function"?Promise:void 0,oXe=typeof queueMicrotask=="function"?queueMicrotask:typeof ZH<"u"?function(e){return ZH.resolve(null).then(e).catch(aXe)}:mO;function aXe(e){setTimeout(function(){throw e})}function oR(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Eb(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Eb(t)}function uf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function eq(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ey=Math.random().toString(36).slice(2),rl="__reactFiber$"+ey,Ab="__reactProps$"+ey,Nu="__reactContainer$"+ey,yO="__reactEvents$"+ey,lXe="__reactListeners$"+ey,uXe="__reactHandles$"+ey;function Hd(e){var t=e[rl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Nu]||n[rl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=eq(e);e!==null;){if(n=e[rl])return n;e=eq(e)}return t}e=n,n=e.parentNode}return null}function Jx(e){return e=e[rl]||e[Nu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sg(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function kA(e){return e[Ab]||null}var vO=[],Eg=-1;function Zf(e){return{current:e}}function dn(e){0>Eg||(e.current=vO[Eg],vO[Eg]=null,Eg--)}function nn(e,t){Eg++,vO[Eg]=e.current,e.current=t}var Mf={},hi=Zf(Mf),is=Zf(!1),Hh=Mf;function p0(e,t){var n=e.type.contextTypes;if(!n)return Mf;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ss(e){return e=e.childContextTypes,e!=null}function ck(){dn(is),dn(hi)}function tq(e,t,n){if(hi.current!==Mf)throw Error(fe(168));nn(hi,t),nn(is,n)}function Fce(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(fe(108,Gqe(e)||"Unknown",i));return _n({},n,r)}function fk(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mf,Hh=hi.current,nn(hi,e),nn(is,is.current),!0}function nq(e,t,n){var r=e.stateNode;if(!r)throw Error(fe(169));n?(e=Fce(e,t,Hh),r.__reactInternalMemoizedMergedChildContext=e,dn(is),dn(hi),nn(hi,e)):dn(is),nn(is,n)}var nu=null,_A=!1,aR=!1;function Pce(e){nu===null?nu=[e]:nu.push(e)}function cXe(e){_A=!0,Pce(e)}function ed(){if(!aR&&nu!==null){aR=!0;var e=0,t=Bt;try{var n=nu;for(Bt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}nu=null,_A=!1}catch(i){throw nu!==null&&(nu=nu.slice(e+1)),rce(F8,ed),i}finally{Bt=t,aR=!1}}return null}var Cg=[],kg=0,dk=null,hk=0,lo=[],uo=0,qh=null,du=1,hu="";function $d(e,t){Cg[kg++]=hk,Cg[kg++]=dk,dk=e,hk=t}function Oce(e,t,n){lo[uo++]=du,lo[uo++]=hu,lo[uo++]=qh,qh=e;var r=du;e=hu;var i=32-ca(r)-1;r&=~(1<<i),n+=1;var s=32-ca(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,du=1<<32-ca(t)+i|n<<i|r,hu=s+e}else du=1<<s|n<<i|r,hu=e}function j8(e){e.return!==null&&($d(e,1),Oce(e,1,0))}function B8(e){for(;e===dk;)dk=Cg[--kg],Cg[kg]=null,hk=Cg[--kg],Cg[kg]=null;for(;e===qh;)qh=lo[--uo],lo[uo]=null,hu=lo[--uo],lo[uo]=null,du=lo[--uo],lo[uo]=null}var Ds=null,Rs=null,mn=!1,Qo=null;function Mce(e,t){var n=mo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function rq(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ds=e,Rs=uf(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ds=e,Rs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qh!==null?{id:du,overflow:hu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=mo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ds=e,Rs=null,!0):!1;default:return!1}}function bO(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xO(e){if(mn){var t=Rs;if(t){var n=t;if(!rq(e,t)){if(bO(e))throw Error(fe(418));t=uf(n.nextSibling);var r=Ds;t&&rq(e,t)?Mce(r,n):(e.flags=e.flags&-4097|2,mn=!1,Ds=e)}}else{if(bO(e))throw Error(fe(418));e.flags=e.flags&-4097|2,mn=!1,Ds=e}}}function iq(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ds=e}function L2(e){if(e!==Ds)return!1;if(!mn)return iq(e),mn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gO(e.type,e.memoizedProps)),t&&(t=Rs)){if(bO(e))throw Dce(),Error(fe(418));for(;t;)Mce(e,t),t=uf(t.nextSibling)}if(iq(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Rs=uf(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Rs=null}}else Rs=Ds?uf(e.stateNode.nextSibling):null;return!0}function Dce(){for(var e=Rs;e;)e=uf(e.nextSibling)}function g0(){Rs=Ds=null,mn=!1}function U8(e){Qo===null?Qo=[e]:Qo.push(e)}var fXe=Qu.ReactCurrentBatchConfig;function Qy(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,e))}return e}function z2(e,t){throw e=Object.prototype.toString.call(t),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sq(e){var t=e._init;return t(e._payload)}function Nce(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=hf(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,x){return v===null||v.tag!==6?(v=pR(b,y.mode,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function l(y,v,b,x){var w=b.type;return w===vg?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ac&&sq(w)===v.type)?(x=i(v,b.props),x.ref=Qy(y,v,b),x.return=y,x):(x=XS(b.type,b.key,b.props,null,y.mode,x),x.ref=Qy(y,v,b),x.return=y,x)}function u(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=gR(b,y.mode,x),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,w){return v===null||v.tag!==7?(v=gh(b,y.mode,x,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=pR(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case A2:return b=XS(v.type,v.key,v.props,null,y.mode,b),b.ref=Qy(y,null,v),b.return=y,b;case yg:return v=gR(v,y.mode,b),v.return=y,v;case Ac:var x=v._init;return f(y,x(v._payload),b)}if(L1(v)||qy(v))return v=gh(v,y.mode,b,null),v.return=y,v;z2(y,v)}return null}function d(y,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case A2:return b.key===w?l(y,v,b,x):null;case yg:return b.key===w?u(y,v,b,x):null;case Ac:return w=b._init,d(y,v,w(b._payload),x)}if(L1(b)||qy(b))return w!==null?null:c(y,v,b,x,null);z2(y,b)}return null}function h(y,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case A2:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,w);case yg:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,w);case Ac:var C=x._init;return h(y,v,b,C(x._payload),w)}if(L1(x)||qy(x))return y=y.get(b)||null,c(v,y,x,w,null);z2(v,x)}return null}function p(y,v,b,x){for(var w=null,C=null,S=v,k=v=0,$=null;S!==null&&k<b.length;k++){S.index>k?($=S,S=null):$=S.sibling;var F=d(y,S,b[k],x);if(F===null){S===null&&(S=$);break}e&&S&&F.alternate===null&&t(y,S),v=s(F,v,k),C===null?w=F:C.sibling=F,C=F,S=$}if(k===b.length)return n(y,S),mn&&$d(y,k),w;if(S===null){for(;k<b.length;k++)S=f(y,b[k],x),S!==null&&(v=s(S,v,k),C===null?w=S:C.sibling=S,C=S);return mn&&$d(y,k),w}for(S=r(y,S);k<b.length;k++)$=h(S,y,k,b[k],x),$!==null&&(e&&$.alternate!==null&&S.delete($.key===null?k:$.key),v=s($,v,k),C===null?w=$:C.sibling=$,C=$);return e&&S.forEach(function(O){return t(y,O)}),mn&&$d(y,k),w}function g(y,v,b,x){var w=qy(b);if(typeof w!="function")throw Error(fe(150));if(b=w.call(b),b==null)throw Error(fe(151));for(var C=w=null,S=v,k=v=0,$=null,F=b.next();S!==null&&!F.done;k++,F=b.next()){S.index>k?($=S,S=null):$=S.sibling;var O=d(y,S,F.value,x);if(O===null){S===null&&(S=$);break}e&&S&&O.alternate===null&&t(y,S),v=s(O,v,k),C===null?w=O:C.sibling=O,C=O,S=$}if(F.done)return n(y,S),mn&&$d(y,k),w;if(S===null){for(;!F.done;k++,F=b.next())F=f(y,F.value,x),F!==null&&(v=s(F,v,k),C===null?w=F:C.sibling=F,C=F);return mn&&$d(y,k),w}for(S=r(y,S);!F.done;k++,F=b.next())F=h(S,y,k,F.value,x),F!==null&&(e&&F.alternate!==null&&S.delete(F.key===null?k:F.key),v=s(F,v,k),C===null?w=F:C.sibling=F,C=F);return e&&S.forEach(function(B){return t(y,B)}),mn&&$d(y,k),w}function m(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===vg&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case A2:e:{for(var w=b.key,C=v;C!==null;){if(C.key===w){if(w=b.type,w===vg){if(C.tag===7){n(y,C.sibling),v=i(C,b.props.children),v.return=y,y=v;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ac&&sq(w)===C.type){n(y,C.sibling),v=i(C,b.props),v.ref=Qy(y,C,b),v.return=y,y=v;break e}n(y,C);break}else t(y,C);C=C.sibling}b.type===vg?(v=gh(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=XS(b.type,b.key,b.props,null,y.mode,x),x.ref=Qy(y,v,b),x.return=y,y=x)}return o(y);case yg:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=gR(b,y.mode,x),v.return=y,y=v}return o(y);case Ac:return C=b._init,m(y,v,C(b._payload),x)}if(L1(b))return p(y,v,b,x);if(qy(b))return g(y,v,b,x);z2(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=pR(b,y.mode,x),v.return=y,y=v),o(y)):n(y,v)}return m}var m0=Nce(!0),Ice=Nce(!1),pk=Zf(null),gk=null,_g=null,V8=null;function W8(){V8=_g=gk=null}function H8(e){var t=pk.current;dn(pk),e._currentValue=t}function wO(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nm(e,t){gk=e,V8=_g=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ts=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(V8!==e)if(e={context:e,memoizedValue:t,next:null},_g===null){if(gk===null)throw Error(fe(308));_g=e,gk.dependencies={lanes:0,firstContext:e}}else _g=_g.next=e;return t}var qd=null;function q8(e){qd===null?qd=[e]:qd.push(e)}function Lce(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,q8(t)):(n.next=i.next,i.next=n),t.interleaved=n,Iu(e,r)}function Iu(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Tc=!1;function G8(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zce(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cf(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Et&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Iu(e,n)}return i=r.interleaved,i===null?(t.next=t,q8(r)):(t.next=i.next,i.next=t),r.interleaved=t,Iu(e,n)}function US(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,P8(e,n)}}function oq(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function mk(e,t,n,r){var i=e.updateQueue;Tc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=_n({},f,d);break e;case 2:Tc=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Xh|=o,e.lanes=o,e.memoizedState=f}}function aq(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(fe(191,i));i.call(r)}}}var Zx={},vl=Zf(Zx),Tb=Zf(Zx),Rb=Zf(Zx);function Gd(e){if(e===Zx)throw Error(fe(174));return e}function X8(e,t){switch(nn(Rb,t),nn(Tb,e),nn(vl,Zx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tO(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=tO(t,e)}dn(vl),nn(vl,t)}function y0(){dn(vl),dn(Tb),dn(Rb)}function jce(e){Gd(Rb.current);var t=Gd(vl.current),n=tO(t,e.type);t!==n&&(nn(Tb,e),nn(vl,n))}function Y8(e){Tb.current===e&&(dn(vl),dn(Tb))}var Sn=Zf(0);function yk(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lR=[];function K8(){for(var e=0;e<lR.length;e++)lR[e]._workInProgressVersionPrimary=null;lR.length=0}var VS=Qu.ReactCurrentDispatcher,uR=Qu.ReactCurrentBatchConfig,Gh=0,kn=null,Zn=null,fr=null,vk=!1,mv=!1,Fb=0,dXe=0;function Gr(){throw Error(fe(321))}function Q8(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wa(e[n],t[n]))return!1;return!0}function J8(e,t,n,r,i,s){if(Gh=s,kn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,VS.current=e===null||e.memoizedState===null?mXe:yXe,e=n(r,i),mv){s=0;do{if(mv=!1,Fb=0,25<=s)throw Error(fe(301));s+=1,fr=Zn=null,t.updateQueue=null,VS.current=vXe,e=n(r,i)}while(mv)}if(VS.current=bk,t=Zn!==null&&Zn.next!==null,Gh=0,fr=Zn=kn=null,vk=!1,t)throw Error(fe(300));return e}function Z8(){var e=Fb!==0;return Fb=0,e}function Va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?kn.memoizedState=fr=e:fr=fr.next=e,fr}function To(){if(Zn===null){var e=kn.alternate;e=e!==null?e.memoizedState:null}else e=Zn.next;var t=fr===null?kn.memoizedState:fr.next;if(t!==null)fr=t,Zn=e;else{if(e===null)throw Error(fe(310));Zn=e,e={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},fr===null?kn.memoizedState=fr=e:fr=fr.next=e}return fr}function Pb(e,t){return typeof t=="function"?t(e):t}function cR(e){var t=To(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var r=Zn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Gh&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,kn.lanes|=c,Xh|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,wa(r,t.memoizedState)||(ts=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,kn.lanes|=s,Xh|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fR(e){var t=To(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);wa(s,t.memoizedState)||(ts=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Bce(){}function Uce(e,t){var n=kn,r=To(),i=t(),s=!wa(r.memoizedState,i);if(s&&(r.memoizedState=i,ts=!0),r=r.queue,e9(Hce.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||fr!==null&&fr.memoizedState.tag&1){if(n.flags|=2048,Ob(9,Wce.bind(null,n,r,i,t),void 0,null),br===null)throw Error(fe(349));Gh&30||Vce(n,t,i)}return i}function Vce(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=kn.updateQueue,t===null?(t={lastEffect:null,stores:null},kn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Wce(e,t,n,r){t.value=n,t.getSnapshot=r,qce(t)&&Gce(e)}function Hce(e,t,n){return n(function(){qce(t)&&Gce(e)})}function qce(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wa(e,n)}catch{return!0}}function Gce(e){var t=Iu(e,1);t!==null&&fa(t,e,1,-1)}function lq(e){var t=Va();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pb,lastRenderedState:e},t.queue=e,e=e.dispatch=gXe.bind(null,kn,e),[t.memoizedState,e]}function Ob(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=kn.updateQueue,t===null?(t={lastEffect:null,stores:null},kn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Xce(){return To().memoizedState}function WS(e,t,n,r){var i=Va();kn.flags|=e,i.memoizedState=Ob(1|t,n,void 0,r===void 0?null:r)}function $A(e,t,n,r){var i=To();r=r===void 0?null:r;var s=void 0;if(Zn!==null){var o=Zn.memoizedState;if(s=o.destroy,r!==null&&Q8(r,o.deps)){i.memoizedState=Ob(t,n,s,r);return}}kn.flags|=e,i.memoizedState=Ob(1|t,n,s,r)}function uq(e,t){return WS(8390656,8,e,t)}function e9(e,t){return $A(2048,8,e,t)}function Yce(e,t){return $A(4,2,e,t)}function Kce(e,t){return $A(4,4,e,t)}function Qce(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jce(e,t,n){return n=n!=null?n.concat([e]):null,$A(4,4,Qce.bind(null,t,e),n)}function t9(){}function Zce(e,t){var n=To();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Q8(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function efe(e,t){var n=To();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Q8(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function tfe(e,t,n){return Gh&21?(wa(n,t)||(n=oce(),kn.lanes|=n,Xh|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ts=!0),e.memoizedState=n)}function hXe(e,t){var n=Bt;Bt=n!==0&&4>n?n:4,e(!0);var r=uR.transition;uR.transition={};try{e(!1),t()}finally{Bt=n,uR.transition=r}}function nfe(){return To().memoizedState}function pXe(e,t,n){var r=df(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rfe(e))ife(t,n);else if(n=Lce(e,t,n,r),n!==null){var i=Mi();fa(n,e,r,i),sfe(n,t,r)}}function gXe(e,t,n){var r=df(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rfe(e))ife(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,wa(a,o)){var l=t.interleaved;l===null?(i.next=i,q8(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Lce(e,t,i,r),n!==null&&(i=Mi(),fa(n,e,r,i),sfe(n,t,r))}}function rfe(e){var t=e.alternate;return e===kn||t!==null&&t===kn}function ife(e,t){mv=vk=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sfe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,P8(e,n)}}var bk={readContext:Ao,useCallback:Gr,useContext:Gr,useEffect:Gr,useImperativeHandle:Gr,useInsertionEffect:Gr,useLayoutEffect:Gr,useMemo:Gr,useReducer:Gr,useRef:Gr,useState:Gr,useDebugValue:Gr,useDeferredValue:Gr,useTransition:Gr,useMutableSource:Gr,useSyncExternalStore:Gr,useId:Gr,unstable_isNewReconciler:!1},mXe={readContext:Ao,useCallback:function(e,t){return Va().memoizedState=[e,t===void 0?null:t],e},useContext:Ao,useEffect:uq,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,WS(4194308,4,Qce.bind(null,t,e),n)},useLayoutEffect:function(e,t){return WS(4194308,4,e,t)},useInsertionEffect:function(e,t){return WS(4,2,e,t)},useMemo:function(e,t){var n=Va();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Va();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=pXe.bind(null,kn,e),[r.memoizedState,e]},useRef:function(e){var t=Va();return e={current:e},t.memoizedState=e},useState:lq,useDebugValue:t9,useDeferredValue:function(e){return Va().memoizedState=e},useTransition:function(){var e=lq(!1),t=e[0];return e=hXe.bind(null,e[1]),Va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=kn,i=Va();if(mn){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=t(),br===null)throw Error(fe(349));Gh&30||Vce(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,uq(Hce.bind(null,r,s,e),[e]),r.flags|=2048,Ob(9,Wce.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Va(),t=br.identifierPrefix;if(mn){var n=hu,r=du;n=(r&~(1<<32-ca(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Fb++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=dXe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yXe={readContext:Ao,useCallback:Zce,useContext:Ao,useEffect:e9,useImperativeHandle:Jce,useInsertionEffect:Yce,useLayoutEffect:Kce,useMemo:efe,useReducer:cR,useRef:Xce,useState:function(){return cR(Pb)},useDebugValue:t9,useDeferredValue:function(e){var t=To();return tfe(t,Zn.memoizedState,e)},useTransition:function(){var e=cR(Pb)[0],t=To().memoizedState;return[e,t]},useMutableSource:Bce,useSyncExternalStore:Uce,useId:nfe,unstable_isNewReconciler:!1},vXe={readContext:Ao,useCallback:Zce,useContext:Ao,useEffect:e9,useImperativeHandle:Jce,useInsertionEffect:Yce,useLayoutEffect:Kce,useMemo:efe,useReducer:fR,useRef:Xce,useState:function(){return fR(Pb)},useDebugValue:t9,useDeferredValue:function(e){var t=To();return Zn===null?t.memoizedState=e:tfe(t,Zn.memoizedState,e)},useTransition:function(){var e=fR(Pb)[0],t=To().memoizedState;return[e,t]},useMutableSource:Bce,useSyncExternalStore:Uce,useId:nfe,unstable_isNewReconciler:!1};function Vo(e,t){if(e&&e.defaultProps){t=_n({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function SO(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_n({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var AA={isMounted:function(e){return(e=e._reactInternals)?Sp(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Mi(),i=df(e),s=Cu(r,i);s.payload=t,n!=null&&(s.callback=n),t=cf(e,s,i),t!==null&&(fa(t,e,i,r),US(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Mi(),i=df(e),s=Cu(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=cf(e,s,i),t!==null&&(fa(t,e,i,r),US(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mi(),r=df(e),i=Cu(n,r);i.tag=2,t!=null&&(i.callback=t),t=cf(e,i,r),t!==null&&(fa(t,e,r,n),US(t,e,r))}};function cq(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!kb(n,r)||!kb(i,s):!0}function ofe(e,t,n){var r=!1,i=Mf,s=t.contextType;return typeof s=="object"&&s!==null?s=Ao(s):(i=ss(t)?Hh:hi.current,r=t.contextTypes,s=(r=r!=null)?p0(e,i):Mf),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=AA,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function fq(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&AA.enqueueReplaceState(t,t.state,null)}function EO(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},G8(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ao(s):(s=ss(t)?Hh:hi.current,i.context=p0(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(SO(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&AA.enqueueReplaceState(i,i.state,null),mk(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function v0(e,t){try{var n="",r=t;do n+=qqe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function dR(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function CO(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bXe=typeof WeakMap=="function"?WeakMap:Map;function afe(e,t,n){n=Cu(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){wk||(wk=!0,MO=r),CO(e,t)},n}function lfe(e,t,n){n=Cu(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){CO(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){CO(e,t),typeof r!="function"&&(ff===null?ff=new Set([this]):ff.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function dq(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bXe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=OXe.bind(null,e,t,n),t.then(e,e))}function hq(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pq(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Cu(-1,1),t.tag=2,cf(n,t,1))),n.lanes|=1),e)}var xXe=Qu.ReactCurrentOwner,ts=!1;function Si(e,t,n,r){t.child=e===null?Ice(t,null,n,r):m0(t,e.child,n,r)}function gq(e,t,n,r,i){n=n.render;var s=t.ref;return nm(t,i),r=J8(e,t,n,r,s,i),n=Z8(),e!==null&&!ts?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Lu(e,t,i)):(mn&&n&&j8(t),t.flags|=1,Si(e,t,r,i),t.child)}function mq(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!u9(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,ufe(e,t,s,r,i)):(e=XS(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:kb,n(o,r)&&e.ref===t.ref)return Lu(e,t,i)}return t.flags|=1,e=hf(s,r),e.ref=t.ref,e.return=t,t.child=e}function ufe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(kb(s,r)&&e.ref===t.ref)if(ts=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ts=!0);else return t.lanes=e.lanes,Lu(e,t,i)}return kO(e,t,n,r,i)}function cfe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nn(Ag,Ss),Ss|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,nn(Ag,Ss),Ss|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,nn(Ag,Ss),Ss|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,nn(Ag,Ss),Ss|=r;return Si(e,t,i,n),t.child}function ffe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function kO(e,t,n,r,i){var s=ss(n)?Hh:hi.current;return s=p0(t,s),nm(t,i),n=J8(e,t,n,r,s,i),r=Z8(),e!==null&&!ts?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Lu(e,t,i)):(mn&&r&&j8(t),t.flags|=1,Si(e,t,n,i),t.child)}function yq(e,t,n,r,i){if(ss(n)){var s=!0;fk(t)}else s=!1;if(nm(t,i),t.stateNode===null)HS(e,t),ofe(t,n,r),EO(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ao(u):(u=ss(n)?Hh:hi.current,u=p0(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&fq(t,o,r,u),Tc=!1;var d=t.memoizedState;o.state=d,mk(t,r,o,i),l=t.memoizedState,a!==r||d!==l||is.current||Tc?(typeof c=="function"&&(SO(t,n,c,r),l=t.memoizedState),(a=Tc||cq(t,n,a,r,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,zce(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Vo(t.type,a),o.props=u,f=t.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ao(l):(l=ss(n)?Hh:hi.current,l=p0(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&fq(t,o,r,l),Tc=!1,d=t.memoizedState,o.state=d,mk(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||is.current||Tc?(typeof h=="function"&&(SO(t,n,h,r),p=t.memoizedState),(u=Tc||cq(t,n,u,r,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return _O(e,t,n,r,s,i)}function _O(e,t,n,r,i,s){ffe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&nq(t,n,!1),Lu(e,t,s);r=t.stateNode,xXe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=m0(t,e.child,null,s),t.child=m0(t,null,a,s)):Si(e,t,a,s),t.memoizedState=r.state,i&&nq(t,n,!0),t.child}function dfe(e){var t=e.stateNode;t.pendingContext?tq(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tq(e,t.context,!1),X8(e,t.containerInfo)}function vq(e,t,n,r,i){return g0(),U8(i),t.flags|=256,Si(e,t,n,r),t.child}var $O={dehydrated:null,treeContext:null,retryLane:0};function AO(e){return{baseLanes:e,cachePool:null,transitions:null}}function hfe(e,t,n){var r=t.pendingProps,i=Sn.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),nn(Sn,i&1),e===null)return xO(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=FA(o,r,0,null),e=gh(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=AO(n),t.memoizedState=$O,e):n9(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wXe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=hf(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=hf(a,s):(s=gh(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?AO(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=$O,r}return s=e.child,e=s.sibling,r=hf(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function n9(e,t){return t=FA({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function j2(e,t,n,r){return r!==null&&U8(r),m0(t,e.child,null,n),e=n9(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wXe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=dR(Error(fe(422))),j2(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=FA({mode:"visible",children:r.children},i,0,null),s=gh(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&m0(t,e.child,null,o),t.child.memoizedState=AO(o),t.memoizedState=$O,s);if(!(t.mode&1))return j2(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(fe(419)),r=dR(s,r,void 0),j2(e,t,o,r)}if(a=(o&e.childLanes)!==0,ts||a){if(r=br,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Iu(e,i),fa(r,e,i,-1))}return l9(),r=dR(Error(fe(421))),j2(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=MXe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Rs=uf(i.nextSibling),Ds=t,mn=!0,Qo=null,e!==null&&(lo[uo++]=du,lo[uo++]=hu,lo[uo++]=qh,du=e.id,hu=e.overflow,qh=t),t=n9(t,r.children),t.flags|=4096,t)}function bq(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),wO(e.return,t,n)}function hR(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function pfe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Si(e,t,r.children,n),r=Sn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bq(e,n,t);else if(e.tag===19)bq(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(nn(Sn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&yk(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),hR(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&yk(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}hR(t,!0,n,null,s);break;case"together":hR(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function HS(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Xh|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fe(153));if(t.child!==null){for(e=t.child,n=hf(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hf(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function SXe(e,t,n){switch(t.tag){case 3:dfe(t),g0();break;case 5:jce(t);break;case 1:ss(t.type)&&fk(t);break;case 4:X8(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;nn(pk,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(nn(Sn,Sn.current&1),t.flags|=128,null):n&t.child.childLanes?hfe(e,t,n):(nn(Sn,Sn.current&1),e=Lu(e,t,n),e!==null?e.sibling:null);nn(Sn,Sn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return pfe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nn(Sn,Sn.current),r)break;return null;case 22:case 23:return t.lanes=0,cfe(e,t,n)}return Lu(e,t,n)}var gfe,TO,mfe,yfe;gfe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};TO=function(){};mfe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gd(vl.current);var s=null;switch(n){case"input":i=Q4(e,i),r=Q4(e,r),s=[];break;case"select":i=_n({},i,{value:void 0}),r=_n({},r,{value:void 0}),s=[];break;case"textarea":i=eO(e,i),r=eO(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=uk)}nO(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vb.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&an("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};yfe=function(e,t,n,r){n!==r&&(t.flags|=4)};function Jy(e,t){if(!mn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function EXe(e,t,n){var r=t.pendingProps;switch(B8(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(t),null;case 1:return ss(t.type)&&ck(),Xr(t),null;case 3:return r=t.stateNode,y0(),dn(is),dn(hi),K8(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(L2(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qo!==null&&(IO(Qo),Qo=null))),TO(e,t),Xr(t),null;case 5:Y8(t);var i=Gd(Rb.current);if(n=t.type,e!==null&&t.stateNode!=null)mfe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(fe(166));return Xr(t),null}if(e=Gd(vl.current),L2(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[rl]=t,r[Ab]=s,e=(t.mode&1)!==0,n){case"dialog":an("cancel",r),an("close",r);break;case"iframe":case"object":case"embed":an("load",r);break;case"video":case"audio":for(i=0;i<j1.length;i++)an(j1[i],r);break;case"source":an("error",r);break;case"img":case"image":case"link":an("error",r),an("load",r);break;case"details":an("toggle",r);break;case"input":AH(r,s),an("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},an("invalid",r);break;case"textarea":RH(r,s),an("invalid",r)}nO(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&I2(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&I2(r.textContent,a,e),i=["children",""+a]):vb.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&an("scroll",r)}switch(n){case"input":T2(r),TH(r,s,!0);break;case"textarea":T2(r),FH(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=uk)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hue(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[rl]=t,e[Ab]=r,gfe(e,t,!1,!1),t.stateNode=e;e:{switch(o=rO(n,r),n){case"dialog":an("cancel",e),an("close",e),i=r;break;case"iframe":case"object":case"embed":an("load",e),i=r;break;case"video":case"audio":for(i=0;i<j1.length;i++)an(j1[i],e);i=r;break;case"source":an("error",e),i=r;break;case"img":case"image":case"link":an("error",e),an("load",e),i=r;break;case"details":an("toggle",e),i=r;break;case"input":AH(e,r),i=Q4(e,r),an("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=_n({},r,{value:void 0}),an("invalid",e);break;case"textarea":RH(e,r),i=eO(e,r),an("invalid",e);break;default:i=r}nO(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Xue(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&que(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&bb(e,l):typeof l=="number"&&bb(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(vb.hasOwnProperty(s)?l!=null&&s==="onScroll"&&an("scroll",e):l!=null&&_8(e,s,l,o))}switch(n){case"input":T2(e),TH(e,r,!1);break;case"textarea":T2(e),FH(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Of(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Jg(e,!!r.multiple,s,!1):r.defaultValue!=null&&Jg(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=uk)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xr(t),null;case 6:if(e&&t.stateNode!=null)yfe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(fe(166));if(n=Gd(Rb.current),Gd(vl.current),L2(t)){if(r=t.stateNode,n=t.memoizedProps,r[rl]=t,(s=r.nodeValue!==n)&&(e=Ds,e!==null))switch(e.tag){case 3:I2(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&I2(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rl]=t,t.stateNode=r}return Xr(t),null;case 13:if(dn(Sn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mn&&Rs!==null&&t.mode&1&&!(t.flags&128))Dce(),g0(),t.flags|=98560,s=!1;else if(s=L2(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(fe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(fe(317));s[rl]=t}else g0(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xr(t),s=!1}else Qo!==null&&(IO(Qo),Qo=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Sn.current&1?ir===0&&(ir=3):l9())),t.updateQueue!==null&&(t.flags|=4),Xr(t),null);case 4:return y0(),TO(e,t),e===null&&_b(t.stateNode.containerInfo),Xr(t),null;case 10:return H8(t.type._context),Xr(t),null;case 17:return ss(t.type)&&ck(),Xr(t),null;case 19:if(dn(Sn),s=t.memoizedState,s===null)return Xr(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Jy(s,!1);else{if(ir!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=yk(e),o!==null){for(t.flags|=128,Jy(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return nn(Sn,Sn.current&1|2),t.child}e=e.sibling}s.tail!==null&&jn()>b0&&(t.flags|=128,r=!0,Jy(s,!1),t.lanes=4194304)}else{if(!r)if(e=yk(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Jy(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!mn)return Xr(t),null}else 2*jn()-s.renderingStartTime>b0&&n!==1073741824&&(t.flags|=128,r=!0,Jy(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=jn(),t.sibling=null,n=Sn.current,nn(Sn,r?n&1|2:n&1),t):(Xr(t),null);case 22:case 23:return a9(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ss&1073741824&&(Xr(t),t.subtreeFlags&6&&(t.flags|=8192)):Xr(t),null;case 24:return null;case 25:return null}throw Error(fe(156,t.tag))}function CXe(e,t){switch(B8(t),t.tag){case 1:return ss(t.type)&&ck(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return y0(),dn(is),dn(hi),K8(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Y8(t),null;case 13:if(dn(Sn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fe(340));g0()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dn(Sn),null;case 4:return y0(),null;case 10:return H8(t.type._context),null;case 22:case 23:return a9(),null;case 24:return null;default:return null}}var B2=!1,ni=!1,kXe=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function $g(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pn(e,t,r)}else n.current=null}function RO(e,t,n){try{n()}catch(r){Pn(e,t,r)}}var xq=!1;function _Xe(e,t){if(hO=ok,e=Sce(),z8(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(pO={focusedElem:e,selectionRange:n},ok=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Vo(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(x){Pn(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return p=xq,xq=!1,p}function yv(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&RO(t,n,s)}i=i.next}while(i!==r)}}function TA(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function FO(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vfe(e){var t=e.alternate;t!==null&&(e.alternate=null,vfe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rl],delete t[Ab],delete t[yO],delete t[lXe],delete t[uXe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bfe(e){return e.tag===5||e.tag===3||e.tag===4}function wq(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bfe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function PO(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=uk));else if(r!==4&&(e=e.child,e!==null))for(PO(e,t,n),e=e.sibling;e!==null;)PO(e,t,n),e=e.sibling}function OO(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(OO(e,t,n),e=e.sibling;e!==null;)OO(e,t,n),e=e.sibling}var $r=null,Go=!1;function hc(e,t,n){for(n=n.child;n!==null;)xfe(e,t,n),n=n.sibling}function xfe(e,t,n){if(yl&&typeof yl.onCommitFiberUnmount=="function")try{yl.onCommitFiberUnmount(wA,n)}catch{}switch(n.tag){case 5:ni||$g(n,t);case 6:var r=$r,i=Go;$r=null,hc(e,t,n),$r=r,Go=i,$r!==null&&(Go?(e=$r,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$r.removeChild(n.stateNode));break;case 18:$r!==null&&(Go?(e=$r,n=n.stateNode,e.nodeType===8?oR(e.parentNode,n):e.nodeType===1&&oR(e,n),Eb(e)):oR($r,n.stateNode));break;case 4:r=$r,i=Go,$r=n.stateNode.containerInfo,Go=!0,hc(e,t,n),$r=r,Go=i;break;case 0:case 11:case 14:case 15:if(!ni&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&RO(n,t,o),i=i.next}while(i!==r)}hc(e,t,n);break;case 1:if(!ni&&($g(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pn(n,t,a)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:n.mode&1?(ni=(r=ni)||n.memoizedState!==null,hc(e,t,n),ni=r):hc(e,t,n);break;default:hc(e,t,n)}}function Sq(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new kXe),t.forEach(function(r){var i=DXe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lo(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:$r=a.stateNode,Go=!1;break e;case 3:$r=a.stateNode.containerInfo,Go=!0;break e;case 4:$r=a.stateNode.containerInfo,Go=!0;break e}a=a.return}if($r===null)throw Error(fe(160));xfe(s,o,i),$r=null,Go=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Pn(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wfe(t,e),t=t.sibling}function wfe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lo(t,e),Na(e),r&4){try{yv(3,e,e.return),TA(3,e)}catch(g){Pn(e,e.return,g)}try{yv(5,e,e.return)}catch(g){Pn(e,e.return,g)}}break;case 1:Lo(t,e),Na(e),r&512&&n!==null&&$g(n,n.return);break;case 5:if(Lo(t,e),Na(e),r&512&&n!==null&&$g(n,n.return),e.flags&32){var i=e.stateNode;try{bb(i,"")}catch(g){Pn(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Vue(i,s),rO(a,o);var u=rO(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?Xue(i,f):c==="dangerouslySetInnerHTML"?que(i,f):c==="children"?bb(i,f):_8(i,c,f,u)}switch(a){case"input":J4(i,s);break;case"textarea":Wue(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Jg(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Jg(i,!!s.multiple,s.defaultValue,!0):Jg(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ab]=s}catch(g){Pn(e,e.return,g)}}break;case 6:if(Lo(t,e),Na(e),r&4){if(e.stateNode===null)throw Error(fe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Pn(e,e.return,g)}}break;case 3:if(Lo(t,e),Na(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Eb(t.containerInfo)}catch(g){Pn(e,e.return,g)}break;case 4:Lo(t,e),Na(e);break;case 13:Lo(t,e),Na(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(s9=jn())),r&4&&Sq(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ni=(u=ni)||c,Lo(t,e),ni=u):Lo(t,e),Na(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Ce=e,c=e.child;c!==null;){for(f=Ce=c;Ce!==null;){switch(d=Ce,h=d.child,d.tag){case 0:case 11:case 14:case 15:yv(4,d,d.return);break;case 1:$g(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Pn(r,n,g)}}break;case 5:$g(d,d.return);break;case 22:if(d.memoizedState!==null){Cq(f);continue}}h!==null?(h.return=d,Ce=h):Cq(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Gue("display",o))}catch(g){Pn(e,e.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Pn(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Lo(t,e),Na(e),r&4&&Sq(e);break;case 21:break;default:Lo(t,e),Na(e)}}function Na(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(bfe(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bb(i,""),r.flags&=-33);var s=wq(e);OO(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=wq(e);PO(e,a,o);break;default:throw Error(fe(161))}}catch(l){Pn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $Xe(e,t,n){Ce=e,Sfe(e)}function Sfe(e,t,n){for(var r=(e.mode&1)!==0;Ce!==null;){var i=Ce,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||B2;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ni;a=B2;var u=ni;if(B2=o,(ni=l)&&!u)for(Ce=i;Ce!==null;)o=Ce,l=o.child,o.tag===22&&o.memoizedState!==null?kq(i):l!==null?(l.return=o,Ce=l):kq(i);for(;s!==null;)Ce=s,Sfe(s),s=s.sibling;Ce=i,B2=a,ni=u}Eq(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ce=s):Eq(e)}}function Eq(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ni||TA(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ni)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&aq(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}aq(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Eb(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}ni||t.flags&512&&FO(t)}catch(d){Pn(t,t.return,d)}}if(t===e){Ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function Cq(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function kq(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{TA(4,t)}catch(l){Pn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Pn(t,i,l)}}var s=t.return;try{FO(t)}catch(l){Pn(t,s,l)}break;case 5:var o=t.return;try{FO(t)}catch(l){Pn(t,o,l)}}}catch(l){Pn(t,t.return,l)}if(t===e){Ce=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ce=a;break}Ce=t.return}}var AXe=Math.ceil,xk=Qu.ReactCurrentDispatcher,r9=Qu.ReactCurrentOwner,xo=Qu.ReactCurrentBatchConfig,Et=0,br=null,Yn=null,Lr=0,Ss=0,Ag=Zf(0),ir=0,Mb=null,Xh=0,RA=0,i9=0,vv=null,Yi=null,s9=0,b0=1/0,Zl=null,wk=!1,MO=null,ff=null,U2=!1,Zc=null,Sk=0,bv=0,DO=null,qS=-1,GS=0;function Mi(){return Et&6?jn():qS!==-1?qS:qS=jn()}function df(e){return e.mode&1?Et&2&&Lr!==0?Lr&-Lr:fXe.transition!==null?(GS===0&&(GS=oce()),GS):(e=Bt,e!==0||(e=window.event,e=e===void 0?16:hce(e.type)),e):1}function fa(e,t,n,r){if(50<bv)throw bv=0,DO=null,Error(fe(185));Kx(e,n,r),(!(Et&2)||e!==br)&&(e===br&&(!(Et&2)&&(RA|=n),ir===4&&Mc(e,Lr)),os(e,r),n===1&&Et===0&&!(t.mode&1)&&(b0=jn()+500,_A&&ed()))}function os(e,t){var n=e.callbackNode;fGe(e,t);var r=sk(e,e===br?Lr:0);if(r===0)n!==null&&MH(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&MH(n),t===1)e.tag===0?cXe(_q.bind(null,e)):Pce(_q.bind(null,e)),oXe(function(){!(Et&6)&&ed()}),n=null;else{switch(ace(r)){case 1:n=F8;break;case 4:n=ice;break;case 16:n=ik;break;case 536870912:n=sce;break;default:n=ik}n=Rfe(n,Efe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Efe(e,t){if(qS=-1,GS=0,Et&6)throw Error(fe(327));var n=e.callbackNode;if(rm()&&e.callbackNode!==n)return null;var r=sk(e,e===br?Lr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ek(e,r);else{t=r;var i=Et;Et|=2;var s=kfe();(br!==e||Lr!==t)&&(Zl=null,b0=jn()+500,ph(e,t));do try{FXe();break}catch(a){Cfe(e,a)}while(!0);W8(),xk.current=s,Et=i,Yn!==null?t=0:(br=null,Lr=0,t=ir)}if(t!==0){if(t===2&&(i=lO(e),i!==0&&(r=i,t=NO(e,i))),t===1)throw n=Mb,ph(e,0),Mc(e,r),os(e,jn()),n;if(t===6)Mc(e,r);else{if(i=e.current.alternate,!(r&30)&&!TXe(i)&&(t=Ek(e,r),t===2&&(s=lO(e),s!==0&&(r=s,t=NO(e,s))),t===1))throw n=Mb,ph(e,0),Mc(e,r),os(e,jn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(fe(345));case 2:Ad(e,Yi,Zl);break;case 3:if(Mc(e,r),(r&130023424)===r&&(t=s9+500-jn(),10<t)){if(sk(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Mi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=mO(Ad.bind(null,e,Yi,Zl),t);break}Ad(e,Yi,Zl);break;case 4:if(Mc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-ca(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=jn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AXe(r/1960))-r,10<r){e.timeoutHandle=mO(Ad.bind(null,e,Yi,Zl),r);break}Ad(e,Yi,Zl);break;case 5:Ad(e,Yi,Zl);break;default:throw Error(fe(329))}}}return os(e,jn()),e.callbackNode===n?Efe.bind(null,e):null}function NO(e,t){var n=vv;return e.current.memoizedState.isDehydrated&&(ph(e,t).flags|=256),e=Ek(e,t),e!==2&&(t=Yi,Yi=n,t!==null&&IO(t)),e}function IO(e){Yi===null?Yi=e:Yi.push.apply(Yi,e)}function TXe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!wa(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mc(e,t){for(t&=~i9,t&=~RA,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ca(t),r=1<<n;e[n]=-1,t&=~r}}function _q(e){if(Et&6)throw Error(fe(327));rm();var t=sk(e,0);if(!(t&1))return os(e,jn()),null;var n=Ek(e,t);if(e.tag!==0&&n===2){var r=lO(e);r!==0&&(t=r,n=NO(e,r))}if(n===1)throw n=Mb,ph(e,0),Mc(e,t),os(e,jn()),n;if(n===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ad(e,Yi,Zl),os(e,jn()),null}function o9(e,t){var n=Et;Et|=1;try{return e(t)}finally{Et=n,Et===0&&(b0=jn()+500,_A&&ed())}}function Yh(e){Zc!==null&&Zc.tag===0&&!(Et&6)&&rm();var t=Et;Et|=1;var n=xo.transition,r=Bt;try{if(xo.transition=null,Bt=1,e)return e()}finally{Bt=r,xo.transition=n,Et=t,!(Et&6)&&ed()}}function a9(){Ss=Ag.current,dn(Ag)}function ph(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sXe(n)),Yn!==null)for(n=Yn.return;n!==null;){var r=n;switch(B8(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ck();break;case 3:y0(),dn(is),dn(hi),K8();break;case 5:Y8(r);break;case 4:y0();break;case 13:dn(Sn);break;case 19:dn(Sn);break;case 10:H8(r.type._context);break;case 22:case 23:a9()}n=n.return}if(br=e,Yn=e=hf(e.current,null),Lr=Ss=t,ir=0,Mb=null,i9=RA=Xh=0,Yi=vv=null,qd!==null){for(t=0;t<qd.length;t++)if(n=qd[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}qd=null}return e}function Cfe(e,t){do{var n=Yn;try{if(W8(),VS.current=bk,vk){for(var r=kn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vk=!1}if(Gh=0,fr=Zn=kn=null,mv=!1,Fb=0,r9.current=null,n===null||n.return===null){ir=1,Mb=t,Yn=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Lr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=hq(o);if(h!==null){h.flags&=-257,pq(h,o,a,s,t),h.mode&1&&dq(s,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}else{if(!(t&1)){dq(s,u,t),l9();break e}l=Error(fe(426))}}else if(mn&&a.mode&1){var m=hq(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),pq(m,o,a,s,t),U8(v0(l,a));break e}}s=l=v0(l,a),ir!==4&&(ir=2),vv===null?vv=[s]:vv.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=afe(s,l,t);oq(s,y);break e;case 1:a=l;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ff===null||!ff.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=lfe(s,a,t);oq(s,x);break e}}s=s.return}while(s!==null)}$fe(n)}catch(w){t=w,Yn===n&&n!==null&&(Yn=n=n.return);continue}break}while(!0)}function kfe(){var e=xk.current;return xk.current=bk,e===null?bk:e}function l9(){(ir===0||ir===3||ir===2)&&(ir=4),br===null||!(Xh&268435455)&&!(RA&268435455)||Mc(br,Lr)}function Ek(e,t){var n=Et;Et|=2;var r=kfe();(br!==e||Lr!==t)&&(Zl=null,ph(e,t));do try{RXe();break}catch(i){Cfe(e,i)}while(!0);if(W8(),Et=n,xk.current=r,Yn!==null)throw Error(fe(261));return br=null,Lr=0,ir}function RXe(){for(;Yn!==null;)_fe(Yn)}function FXe(){for(;Yn!==null&&!nGe();)_fe(Yn)}function _fe(e){var t=Tfe(e.alternate,e,Ss);e.memoizedProps=e.pendingProps,t===null?$fe(e):Yn=t,r9.current=null}function $fe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=CXe(n,t),n!==null){n.flags&=32767,Yn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ir=6,Yn=null;return}}else if(n=EXe(n,t,Ss),n!==null){Yn=n;return}if(t=t.sibling,t!==null){Yn=t;return}Yn=t=e}while(t!==null);ir===0&&(ir=5)}function Ad(e,t,n){var r=Bt,i=xo.transition;try{xo.transition=null,Bt=1,PXe(e,t,n,r)}finally{xo.transition=i,Bt=r}return null}function PXe(e,t,n,r){do rm();while(Zc!==null);if(Et&6)throw Error(fe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(dGe(e,s),e===br&&(Yn=br=null,Lr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||U2||(U2=!0,Rfe(ik,function(){return rm(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=xo.transition,xo.transition=null;var o=Bt;Bt=1;var a=Et;Et|=4,r9.current=null,_Xe(e,n),wfe(n,e),JGe(pO),ok=!!hO,pO=hO=null,e.current=n,$Xe(n),rGe(),Et=a,Bt=o,xo.transition=s}else e.current=n;if(U2&&(U2=!1,Zc=e,Sk=i),s=e.pendingLanes,s===0&&(ff=null),oGe(n.stateNode),os(e,jn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wk)throw wk=!1,e=MO,MO=null,e;return Sk&1&&e.tag!==0&&rm(),s=e.pendingLanes,s&1?e===DO?bv++:(bv=0,DO=e):bv=0,ed(),null}function rm(){if(Zc!==null){var e=ace(Sk),t=xo.transition,n=Bt;try{if(xo.transition=null,Bt=16>e?16:e,Zc===null)var r=!1;else{if(e=Zc,Zc=null,Sk=0,Et&6)throw Error(fe(331));var i=Et;for(Et|=4,Ce=e.current;Ce!==null;){var s=Ce,o=s.child;if(Ce.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Ce=u;Ce!==null;){var c=Ce;switch(c.tag){case 0:case 11:case 15:yv(8,c,s)}var f=c.child;if(f!==null)f.return=c,Ce=f;else for(;Ce!==null;){c=Ce;var d=c.sibling,h=c.return;if(vfe(c),c===u){Ce=null;break}if(d!==null){d.return=h,Ce=d;break}Ce=h}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}Ce=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ce=o;else e:for(;Ce!==null;){if(s=Ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:yv(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ce=y;break e}Ce=s.return}}var v=e.current;for(Ce=v;Ce!==null;){o=Ce;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ce=b;else e:for(o=v;Ce!==null;){if(a=Ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:TA(9,a)}}catch(w){Pn(a,a.return,w)}if(a===o){Ce=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Ce=x;break e}Ce=a.return}}if(Et=i,ed(),yl&&typeof yl.onPostCommitFiberRoot=="function")try{yl.onPostCommitFiberRoot(wA,e)}catch{}r=!0}return r}finally{Bt=n,xo.transition=t}}return!1}function $q(e,t,n){t=v0(n,t),t=afe(e,t,1),e=cf(e,t,1),t=Mi(),e!==null&&(Kx(e,1,t),os(e,t))}function Pn(e,t,n){if(e.tag===3)$q(e,e,n);else for(;t!==null;){if(t.tag===3){$q(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ff===null||!ff.has(r))){e=v0(n,e),e=lfe(t,e,1),t=cf(t,e,1),e=Mi(),t!==null&&(Kx(t,1,e),os(t,e));break}}t=t.return}}function OXe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Mi(),e.pingedLanes|=e.suspendedLanes&n,br===e&&(Lr&n)===n&&(ir===4||ir===3&&(Lr&130023424)===Lr&&500>jn()-s9?ph(e,0):i9|=n),os(e,t)}function Afe(e,t){t===0&&(e.mode&1?(t=P2,P2<<=1,!(P2&130023424)&&(P2=4194304)):t=1);var n=Mi();e=Iu(e,t),e!==null&&(Kx(e,t,n),os(e,n))}function MXe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Afe(e,n)}function DXe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(t),Afe(e,n)}var Tfe;Tfe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||is.current)ts=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ts=!1,SXe(e,t,n);ts=!!(e.flags&131072)}else ts=!1,mn&&t.flags&1048576&&Oce(t,hk,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;HS(e,t),e=t.pendingProps;var i=p0(t,hi.current);nm(t,n),i=J8(null,t,r,e,i,n);var s=Z8();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ss(r)?(s=!0,fk(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,G8(t),i.updater=AA,t.stateNode=i,i._reactInternals=t,EO(t,r,e,n),t=_O(null,t,r,!0,s,n)):(t.tag=0,mn&&s&&j8(t),Si(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(HS(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=IXe(r),e=Vo(r,e),i){case 0:t=kO(null,t,r,e,n);break e;case 1:t=yq(null,t,r,e,n);break e;case 11:t=gq(null,t,r,e,n);break e;case 14:t=mq(null,t,r,Vo(r.type,e),n);break e}throw Error(fe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Vo(r,i),kO(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Vo(r,i),yq(e,t,r,i,n);case 3:e:{if(dfe(t),e===null)throw Error(fe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,zce(e,t),mk(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=v0(Error(fe(423)),t),t=vq(e,t,r,n,i);break e}else if(r!==i){i=v0(Error(fe(424)),t),t=vq(e,t,r,n,i);break e}else for(Rs=uf(t.stateNode.containerInfo.firstChild),Ds=t,mn=!0,Qo=null,n=Ice(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(g0(),r===i){t=Lu(e,t,n);break e}Si(e,t,r,n)}t=t.child}return t;case 5:return jce(t),e===null&&xO(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,gO(r,i)?o=null:s!==null&&gO(r,s)&&(t.flags|=32),ffe(e,t),Si(e,t,o,n),t.child;case 6:return e===null&&xO(t),null;case 13:return hfe(e,t,n);case 4:return X8(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=m0(t,null,r,n):Si(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Vo(r,i),gq(e,t,r,i,n);case 7:return Si(e,t,t.pendingProps,n),t.child;case 8:return Si(e,t,t.pendingProps.children,n),t.child;case 12:return Si(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,nn(pk,r._currentValue),r._currentValue=o,s!==null)if(wa(s.value,o)){if(s.children===i.children&&!is.current){t=Lu(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Cu(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),wO(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),wO(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Si(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,nm(t,n),i=Ao(i),r=r(i),t.flags|=1,Si(e,t,r,n),t.child;case 14:return r=t.type,i=Vo(r,t.pendingProps),i=Vo(r.type,i),mq(e,t,r,i,n);case 15:return ufe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Vo(r,i),HS(e,t),t.tag=1,ss(r)?(e=!0,fk(t)):e=!1,nm(t,n),ofe(t,r,i),EO(t,r,i,n),_O(null,t,r,!0,e,n);case 19:return pfe(e,t,n);case 22:return cfe(e,t,n)}throw Error(fe(156,t.tag))};function Rfe(e,t){return rce(e,t)}function NXe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mo(e,t,n,r){return new NXe(e,t,n,r)}function u9(e){return e=e.prototype,!(!e||!e.isReactComponent)}function IXe(e){if(typeof e=="function")return u9(e)?1:0;if(e!=null){if(e=e.$$typeof,e===A8)return 11;if(e===T8)return 14}return 2}function hf(e,t){var n=e.alternate;return n===null?(n=mo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function XS(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")u9(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case vg:return gh(n.children,i,s,t);case $8:o=8,i|=8;break;case G4:return e=mo(12,n,t,i|2),e.elementType=G4,e.lanes=s,e;case X4:return e=mo(13,n,t,i),e.elementType=X4,e.lanes=s,e;case Y4:return e=mo(19,n,t,i),e.elementType=Y4,e.lanes=s,e;case jue:return FA(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Lue:o=10;break e;case zue:o=9;break e;case A8:o=11;break e;case T8:o=14;break e;case Ac:o=16,r=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return t=mo(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function gh(e,t,n,r){return e=mo(7,e,r,t),e.lanes=n,e}function FA(e,t,n,r){return e=mo(22,e,r,t),e.elementType=jue,e.lanes=n,e.stateNode={isHidden:!1},e}function pR(e,t,n){return e=mo(6,e,null,t),e.lanes=n,e}function gR(e,t,n){return t=mo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function LXe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Y3(0),this.expirationTimes=Y3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y3(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function c9(e,t,n,r,i,s,o,a,l){return e=new LXe(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=mo(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},G8(s),e}function zXe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yg,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ffe(e){if(!e)return Mf;e=e._reactInternals;e:{if(Sp(e)!==e||e.tag!==1)throw Error(fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ss(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fe(171))}if(e.tag===1){var n=e.type;if(ss(n))return Fce(e,n,t)}return t}function Pfe(e,t,n,r,i,s,o,a,l){return e=c9(n,r,!0,e,i,s,o,a,l),e.context=Ffe(null),n=e.current,r=Mi(),i=df(n),s=Cu(r,i),s.callback=t??null,cf(n,s,i),e.current.lanes=i,Kx(e,i,r),os(e,r),e}function PA(e,t,n,r){var i=t.current,s=Mi(),o=df(i);return n=Ffe(n),t.context===null?t.context=n:t.pendingContext=n,t=Cu(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=cf(i,t,o),e!==null&&(fa(e,i,o,s),US(e,i,o)),o}function Ck(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Aq(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function f9(e,t){Aq(e,t),(e=e.alternate)&&Aq(e,t)}function jXe(){return null}var Ofe=typeof reportError=="function"?reportError:function(e){console.error(e)};function d9(e){this._internalRoot=e}OA.prototype.render=d9.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fe(409));PA(e,t,null,null)};OA.prototype.unmount=d9.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yh(function(){PA(null,e,null,null)}),t[Nu]=null}};function OA(e){this._internalRoot=e}OA.prototype.unstable_scheduleHydration=function(e){if(e){var t=cce();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Oc.length&&t!==0&&t<Oc[n].priority;n++);Oc.splice(n,0,e),n===0&&dce(e)}};function h9(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function MA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tq(){}function BXe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Ck(o);s.call(u)}}var o=Pfe(t,r,e,0,null,!1,!1,"",Tq);return e._reactRootContainer=o,e[Nu]=o.current,_b(e.nodeType===8?e.parentNode:e),Yh(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Ck(l);a.call(u)}}var l=c9(e,0,!1,null,null,!1,!1,"",Tq);return e._reactRootContainer=l,e[Nu]=l.current,_b(e.nodeType===8?e.parentNode:e),Yh(function(){PA(t,l,n,r)}),l}function DA(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ck(o);a.call(l)}}PA(t,o,e,i)}else o=BXe(n,t,e,i,r);return Ck(o)}lce=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=z1(t.pendingLanes);n!==0&&(P8(t,n|1),os(t,jn()),!(Et&6)&&(b0=jn()+500,ed()))}break;case 13:Yh(function(){var r=Iu(e,1);if(r!==null){var i=Mi();fa(r,e,1,i)}}),f9(e,1)}};O8=function(e){if(e.tag===13){var t=Iu(e,134217728);if(t!==null){var n=Mi();fa(t,e,134217728,n)}f9(e,134217728)}};uce=function(e){if(e.tag===13){var t=df(e),n=Iu(e,t);if(n!==null){var r=Mi();fa(n,e,t,r)}f9(e,t)}};cce=function(){return Bt};fce=function(e,t){var n=Bt;try{return Bt=e,t()}finally{Bt=n}};sO=function(e,t,n){switch(t){case"input":if(J4(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=kA(r);if(!i)throw Error(fe(90));Uue(r),J4(r,i)}}}break;case"textarea":Wue(e,n);break;case"select":t=n.value,t!=null&&Jg(e,!!n.multiple,t,!1)}};Que=o9;Jue=Yh;var UXe={usingClientEntryPoint:!1,Events:[Jx,Sg,kA,Yue,Kue,o9]},Zy={findFiberByHostInstance:Hd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VXe={bundleType:Zy.bundleType,version:Zy.version,rendererPackageName:Zy.rendererPackageName,rendererConfig:Zy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tce(e),e===null?null:e.stateNode},findFiberByHostInstance:Zy.findFiberByHostInstance||jXe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var V2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!V2.isDisabled&&V2.supportsFiber)try{wA=V2.inject(VXe),yl=V2}catch{}}Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UXe;Gs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h9(t))throw Error(fe(200));return zXe(e,t,null,n)};Gs.createRoot=function(e,t){if(!h9(e))throw Error(fe(299));var n=!1,r="",i=Ofe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=c9(e,1,!1,null,null,n,!1,r,i),e[Nu]=t.current,_b(e.nodeType===8?e.parentNode:e),new d9(t)};Gs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=tce(t),e=e===null?null:e.stateNode,e};Gs.flushSync=function(e){return Yh(e)};Gs.hydrate=function(e,t,n){if(!MA(t))throw Error(fe(200));return DA(null,e,t,!0,n)};Gs.hydrateRoot=function(e,t,n){if(!h9(e))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Ofe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Pfe(t,null,e,1,n??null,i,!1,s,o),e[Nu]=t.current,_b(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new OA(t)};Gs.render=function(e,t,n){if(!MA(t))throw Error(fe(200));return DA(null,e,t,!1,n)};Gs.unmountComponentAtNode=function(e){if(!MA(e))throw Error(fe(40));return e._reactRootContainer?(Yh(function(){DA(null,null,e,!1,function(){e._reactRootContainer=null,e[Nu]=null})}),!0):!1};Gs.unstable_batchedUpdates=o9;Gs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!MA(n))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return DA(e,t,n,!1,r)};Gs.version="18.3.1-next-f1338f8080-20240426";function Mfe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mfe)}catch(e){console.error(e)}}Mfe(),Mue.exports=Gs;var p9=Mue.exports,[Dfe,WXe]=Cr({strict:!1,name:"PortalContext"}),g9="chakra-portal",HXe=".chakra-portal",qXe=e=>T.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),GXe=e=>{const{appendToParentPortal:t,children:n}=e,[r,i]=M.useState(null),s=M.useRef(null),[,o]=M.useState({});M.useEffect(()=>o({}),[]);const a=WXe(),l=zqe();d0(()=>{if(!r)return;const c=r.ownerDocument,f=t?a??c.body:c.body;if(!f)return;s.current=c.createElement("div"),s.current.className=g9,f.appendChild(s.current),o({});const d=s.current;return()=>{f.contains(d)&&f.removeChild(d)}},[r]);const u=l!=null&&l.zIndex?T.jsx(qXe,{zIndex:l==null?void 0:l.zIndex,children:n}):n;return s.current?p9.createPortal(T.jsx(Dfe,{value:s.current,children:u}),s.current):T.jsx("span",{ref:c=>{c&&i(c)}})},XXe=e=>{const{children:t,containerRef:n,appendToParentPortal:r}=e,i=n.current,s=i??(typeof window<"u"?document.body:void 0),o=M.useMemo(()=>{const l=i==null?void 0:i.ownerDocument.createElement("div");return l&&(l.className=g9),l},[i]),[,a]=M.useState({});return d0(()=>a({}),[]),d0(()=>{if(!(!o||!s))return s.appendChild(o),()=>{s.removeChild(o)}},[o,s]),s&&o?p9.createPortal(T.jsx(Dfe,{value:r?o:null,children:t}),o):null};function NA(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...r}=t;return n?T.jsx(XXe,{containerRef:n,...r}):T.jsx(GXe,{...r})}NA.className=g9;NA.selector=HXe;NA.displayName="Portal";function m9(){const e=M.useContext(yb);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var y9=M.createContext({});y9.displayName="ColorModeContext";function ty(){const e=M.useContext(y9);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function ja(e,t){const{colorMode:n}=ty();return n==="dark"?t:e}var W2={light:"chakra-ui-light",dark:"chakra-ui-dark"};function YXe(e={}){const{preventTransition:t=!0}=e,n={setDataset:r=>{const i=t?n.preventTransition():void 0;document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,i==null||i()},setClassName(r){document.body.classList.add(r?W2.dark:W2.light),document.body.classList.remove(r?W2.light:W2.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(r){var i;return((i=n.query().matches)!=null?i:r==="dark")?"dark":"light"},addListener(r){const i=n.query(),s=o=>{r(o.matches?"dark":"light")};return typeof i.addListener=="function"?i.addListener(s):i.addEventListener("change",s),()=>{typeof i.removeListener=="function"?i.removeListener(s):i.removeEventListener("change",s)}},preventTransition(){const r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(r)})})}}};return n}var KXe="chakra-ui-color-mode";function QXe(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let n;try{n=localStorage.getItem(e)||t}catch{}return n||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var JXe=QXe(KXe),Rq=()=>{};function Fq(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function Nfe(e){const{value:t,children:n,options:{useSystemColorMode:r,initialColorMode:i,disableTransitionOnChange:s}={},colorModeManager:o=JXe}=e,a=i==="dark"?"dark":"light",[l,u]=M.useState(()=>Fq(o,a)),[c,f]=M.useState(()=>Fq(o)),{getSystemTheme:d,setClassName:h,setDataset:p,addListener:g}=M.useMemo(()=>YXe({preventTransition:s}),[s]),m=i==="system"&&!l?c:l,y=M.useCallback(x=>{const w=x==="system"?d():x;u(w),h(w==="dark"),p(w),o.set(w)},[o,d,h,p]);d0(()=>{i==="system"&&f(d())},[]),M.useEffect(()=>{const x=o.get();if(x){y(x);return}if(i==="system"){y("system");return}y(a)},[o,a,i,y]);const v=M.useCallback(()=>{y(m==="dark"?"light":"dark")},[m,y]);M.useEffect(()=>{if(r)return g(y)},[r,g,y]);const b=M.useMemo(()=>({colorMode:t??m,toggleColorMode:t?Rq:v,setColorMode:t?Rq:y,forced:t!==void 0}),[m,v,y,t]);return T.jsx(y9.Provider,{value:b,children:n})}Nfe.displayName="ColorModeProvider";function Ife(){const e=ty(),t=m9();return{...e,theme:t}}var vt=(...e)=>e.filter(Boolean).join(" ");function ZXe(){return!1}function as(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}var ew=e=>{const{condition:t,message:n}=e;t&&ZXe()&&console.warn(n)};function al(e,...t){return eYe(e)?e(...t):e}var eYe=e=>typeof e=="function",oo=e=>e?"":void 0,mR=e=>e?!0:void 0;function pf(...e){return function(n){e.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}var kk={exports:{}};kk.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",m="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",x="[object RegExp]",w="[object Set]",C="[object String]",S="[object Undefined]",k="[object WeakMap]",$="[object ArrayBuffer]",F="[object DataView]",O="[object Float32Array]",B="[object Float64Array]",D="[object Int8Array]",N="[object Int16Array]",A="[object Int32Array]",P="[object Uint8Array]",j="[object Uint8ClampedArray]",z="[object Uint16Array]",U="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,pe=/^(?:0|[1-9]\d*)$/,se={};se[O]=se[B]=se[D]=se[N]=se[A]=se[P]=se[j]=se[z]=se[U]=!0,se[a]=se[l]=se[$]=se[c]=se[F]=se[f]=se[d]=se[h]=se[g]=se[m]=se[v]=se[x]=se[w]=se[C]=se[k]=!1;var _e=typeof Zi=="object"&&Zi&&Zi.Object===Object&&Zi,Ze=typeof self=="object"&&self&&self.Object===Object&&self,Ct=_e||Ze||Function("return this")(),Nn=t&&!t.nodeType&&t,ur=Nn&&!0&&e&&!e.nodeType&&e,be=ur&&ur.exports===Nn,Ne=be&&_e.process,We=function(){try{var I=ur&&ur.require&&ur.require("util").types;return I||Ne&&Ne.binding&&Ne.binding("util")}catch{}}(),ae=We&&We.isTypedArray;function In(I,V,Y){switch(Y.length){case 0:return I.call(V);case 1:return I.call(V,Y[0]);case 2:return I.call(V,Y[0],Y[1]);case 3:return I.call(V,Y[0],Y[1],Y[2])}return I.apply(V,Y)}function St(I,V){for(var Y=-1,ke=Array(I);++Y<I;)ke[Y]=V(Y);return ke}function Qn(I){return function(V){return I(V)}}function hn(I,V){return I==null?void 0:I[V]}function Vr(I,V){return function(Y){return I(V(Y))}}var nc=Array.prototype,dw=Function.prototype,_p=Object.prototype,ry=Ct["__core-js_shared__"],$p=dw.toString,Ul=_p.hasOwnProperty,Ap=function(){var I=/[^.]+$/.exec(ry&&ry.keys&&ry.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),uT=_p.toString,Tp=$p.call(Object),iy=RegExp("^"+$p.call(Ul).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rd=be?Ct.Buffer:void 0,sy=Ct.Symbol,cT=Ct.Uint8Array;rd&&rd.allocUnsafe;var hw=Vr(Object.getPrototypeOf,Object),id=Object.create,pw=_p.propertyIsEnumerable,Rp=nc.splice,Fa=sy?sy.toStringTag:void 0,sd=function(){try{var I=ay(Object,"defineProperty");return I({},"",{}),I}catch{}}(),fT=rd?rd.isBuffer:void 0,Vl=Math.max,w7=Date.now,Fp=ay(Ct,"Map"),rc=ay(Object,"create"),S7=function(){function I(){}return function(V){if(!Wi(V))return{};if(id)return id(V);I.prototype=V;var Y=new I;return I.prototype=void 0,Y}}();function Vi(I){var V=-1,Y=I==null?0:I.length;for(this.clear();++V<Y;){var ke=I[V];this.set(ke[0],ke[1])}}function dT(){this.__data__=rc?rc(null):{},this.size=0}function E7(I){var V=this.has(I)&&delete this.__data__[I];return this.size-=V?1:0,V}function hT(I){var V=this.__data__;if(rc){var Y=V[I];return Y===r?void 0:Y}return Ul.call(V,I)?V[I]:void 0}function pT(I){var V=this.__data__;return rc?V[I]!==void 0:Ul.call(V,I)}function C7(I,V){var Y=this.__data__;return this.size+=this.has(I)?0:1,Y[I]=rc&&V===void 0?r:V,this}Vi.prototype.clear=dT,Vi.prototype.delete=E7,Vi.prototype.get=hT,Vi.prototype.has=pT,Vi.prototype.set=C7;function Oo(I){var V=-1,Y=I==null?0:I.length;for(this.clear();++V<Y;){var ke=I[V];this.set(ke[0],ke[1])}}function gT(){this.__data__=[],this.size=0}function k7(I){var V=this.__data__,Y=oc(V,I);if(Y<0)return!1;var ke=V.length-1;return Y==ke?V.pop():Rp.call(V,Y,1),--this.size,!0}function mT(I){var V=this.__data__,Y=oc(V,I);return Y<0?void 0:V[Y][1]}function yT(I){return oc(this.__data__,I)>-1}function _7(I,V){var Y=this.__data__,ke=oc(Y,I);return ke<0?(++this.size,Y.push([I,V])):Y[ke][1]=V,this}Oo.prototype.clear=gT,Oo.prototype.delete=k7,Oo.prototype.get=mT,Oo.prototype.has=yT,Oo.prototype.set=_7;function ic(I){var V=-1,Y=I==null?0:I.length;for(this.clear();++V<Y;){var ke=I[V];this.set(ke[0],ke[1])}}function vT(){this.size=0,this.__data__={hash:new Vi,map:new(Fp||Oo),string:new Vi}}function $7(I){var V=lc(this,I).delete(I);return this.size-=V?1:0,V}function bT(I){return lc(this,I).get(I)}function xT(I){return lc(this,I).has(I)}function A7(I,V){var Y=lc(this,I),ke=Y.size;return Y.set(I,V),this.size+=Y.size==ke?0:1,this}ic.prototype.clear=vT,ic.prototype.delete=$7,ic.prototype.get=bT,ic.prototype.has=xT,ic.prototype.set=A7;function sc(I){var V=this.__data__=new Oo(I);this.size=V.size}function wT(){this.__data__=new Oo,this.size=0}function ST(I){var V=this.__data__,Y=V.delete(I);return this.size=V.size,Y}function ET(I){return this.__data__.get(I)}function CT(I){return this.__data__.has(I)}function kT(I,V){var Y=this.__data__;if(Y instanceof Oo){var ke=Y.__data__;if(!Fp||ke.length<n-1)return ke.push([I,V]),this.size=++Y.size,this;Y=this.__data__=new ic(ke)}return Y.set(I,V),this.size=Y.size,this}sc.prototype.clear=wT,sc.prototype.delete=ST,sc.prototype.get=ET,sc.prototype.has=CT,sc.prototype.set=kT;function _T(I,V){var Y=fy(I),ke=!Y&&cy(I),lt=!Y&&!ke&&xw(I),zt=!Y&&!ke&&!lt&&Pa(I),Yt=Y||ke||lt||zt,bt=Yt?St(I.length,String):[],en=bt.length;for(var Jn in I)Yt&&(Jn=="length"||lt&&(Jn=="offset"||Jn=="parent")||zt&&(Jn=="buffer"||Jn=="byteLength"||Jn=="byteOffset")||ly(Jn,en))||bt.push(Jn);return bt}function gw(I,V,Y){(Y!==void 0&&!Op(I[V],Y)||Y===void 0&&!(V in I))&&Pp(I,V,Y)}function $T(I,V,Y){var ke=I[V];(!(Ul.call(I,V)&&Op(ke,Y))||Y===void 0&&!(V in I))&&Pp(I,V,Y)}function oc(I,V){for(var Y=I.length;Y--;)if(Op(I[Y][0],V))return Y;return-1}function Pp(I,V,Y){V=="__proto__"&&sd?sd(I,V,{configurable:!0,enumerable:!0,value:Y,writable:!0}):I[V]=Y}var AT=IT();function ac(I){return I==null?I===void 0?S:y:Fa&&Fa in Object(I)?od(I):VT(I)}function oy(I){return uc(I)&&ac(I)==a}function mw(I){if(!Wi(I)||BT(I))return!1;var V=hy(I)?iy:K;return V.test(GT(I))}function TT(I){return uc(I)&&ww(I.length)&&!!se[ac(I)]}function T7(I){if(!Wi(I))return UT(I);var V=bw(I),Y=[];for(var ke in I)ke=="constructor"&&(V||!Ul.call(I,ke))||Y.push(ke);return Y}function yw(I,V,Y,ke,lt){I!==V&&AT(V,function(zt,Yt){if(lt||(lt=new sc),Wi(zt))vw(I,V,Yt,Y,yw,ke,lt);else{var bt=ke?ke(uy(I,Yt),zt,Yt+"",I,V,lt):void 0;bt===void 0&&(bt=zt),gw(I,Yt,bt)}},Oa)}function vw(I,V,Y,ke,lt,zt,Yt){var bt=uy(I,Y),en=uy(V,Y),Jn=Yt.get(en);if(Jn){gw(I,Y,Jn);return}var kr=zt?zt(bt,en,Y+"",I,V,Yt):void 0,cc=kr===void 0;if(cc){var Mp=fy(en),Hl=!Mp&&xw(en),Cw=!Mp&&!Hl&&Pa(en);kr=en,Mp||Hl||Cw?fy(bt)?kr=bt:XT(bt)?kr=Wl(bt):Hl?(cc=!1,kr=PT(en)):Cw?(cc=!1,kr=MT(en)):kr=[]:YT(en)||cy(en)?(kr=bt,cy(bt)?kr=KT(bt):(!Wi(bt)||hy(bt))&&(kr=LT(en))):cc=!1}cc&&(Yt.set(en,kr),lt(kr,en,ke,zt,Yt),Yt.delete(en)),gw(I,Y,kr)}function RT(I,V){return HT(WT(I,V,Sw),I+"")}var FT=sd?function(I,V){return sd(I,"toString",{configurable:!0,enumerable:!1,value:QT(V),writable:!0})}:Sw;function PT(I,V){return I.slice()}function OT(I){var V=new I.constructor(I.byteLength);return new cT(V).set(new cT(I)),V}function MT(I,V){var Y=OT(I.buffer);return new I.constructor(Y,I.byteOffset,I.length)}function Wl(I,V){var Y=-1,ke=I.length;for(V||(V=Array(ke));++Y<ke;)V[Y]=I[Y];return V}function DT(I,V,Y,ke){var lt=!Y;Y||(Y={});for(var zt=-1,Yt=V.length;++zt<Yt;){var bt=V[zt],en=void 0;en===void 0&&(en=I[bt]),lt?Pp(Y,bt,en):$T(Y,bt,en)}return Y}function NT(I){return RT(function(V,Y){var ke=-1,lt=Y.length,zt=lt>1?Y[lt-1]:void 0,Yt=lt>2?Y[2]:void 0;for(zt=I.length>3&&typeof zt=="function"?(lt--,zt):void 0,Yt&&zT(Y[0],Y[1],Yt)&&(zt=lt<3?void 0:zt,lt=1),V=Object(V);++ke<lt;){var bt=Y[ke];bt&&I(V,bt,ke,zt)}return V})}function IT(I){return function(V,Y,ke){for(var lt=-1,zt=Object(V),Yt=ke(V),bt=Yt.length;bt--;){var en=Yt[++lt];if(Y(zt[en],en,zt)===!1)break}return V}}function lc(I,V){var Y=I.__data__;return jT(V)?Y[typeof V=="string"?"string":"hash"]:Y.map}function ay(I,V){var Y=hn(I,V);return mw(Y)?Y:void 0}function od(I){var V=Ul.call(I,Fa),Y=I[Fa];try{I[Fa]=void 0;var ke=!0}catch{}var lt=uT.call(I);return ke&&(V?I[Fa]=Y:delete I[Fa]),lt}function LT(I){return typeof I.constructor=="function"&&!bw(I)?S7(hw(I)):{}}function ly(I,V){var Y=typeof I;return V=V??o,!!V&&(Y=="number"||Y!="symbol"&&pe.test(I))&&I>-1&&I%1==0&&I<V}function zT(I,V,Y){if(!Wi(Y))return!1;var ke=typeof V;return(ke=="number"?dy(Y)&&ly(V,Y.length):ke=="string"&&V in Y)?Op(Y[V],I):!1}function jT(I){var V=typeof I;return V=="string"||V=="number"||V=="symbol"||V=="boolean"?I!=="__proto__":I===null}function BT(I){return!!Ap&&Ap in I}function bw(I){var V=I&&I.constructor,Y=typeof V=="function"&&V.prototype||_p;return I===Y}function UT(I){var V=[];if(I!=null)for(var Y in Object(I))V.push(Y);return V}function VT(I){return uT.call(I)}function WT(I,V,Y){return V=Vl(V===void 0?I.length-1:V,0),function(){for(var ke=arguments,lt=-1,zt=Vl(ke.length-V,0),Yt=Array(zt);++lt<zt;)Yt[lt]=ke[V+lt];lt=-1;for(var bt=Array(V+1);++lt<V;)bt[lt]=ke[lt];return bt[V]=Y(Yt),In(I,this,bt)}}function uy(I,V){if(!(V==="constructor"&&typeof I[V]=="function")&&V!="__proto__")return I[V]}var HT=qT(FT);function qT(I){var V=0,Y=0;return function(){var ke=w7(),lt=s-(ke-Y);if(Y=ke,lt>0){if(++V>=i)return arguments[0]}else V=0;return I.apply(void 0,arguments)}}function GT(I){if(I!=null){try{return $p.call(I)}catch{}try{return I+""}catch{}}return""}function Op(I,V){return I===V||I!==I&&V!==V}var cy=oy(function(){return arguments}())?oy:function(I){return uc(I)&&Ul.call(I,"callee")&&!pw.call(I,"callee")},fy=Array.isArray;function dy(I){return I!=null&&ww(I.length)&&!hy(I)}function XT(I){return uc(I)&&dy(I)}var xw=fT||Ew;function hy(I){if(!Wi(I))return!1;var V=ac(I);return V==h||V==p||V==u||V==b}function ww(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=o}function Wi(I){var V=typeof I;return I!=null&&(V=="object"||V=="function")}function uc(I){return I!=null&&typeof I=="object"}function YT(I){if(!uc(I)||ac(I)!=v)return!1;var V=hw(I);if(V===null)return!0;var Y=Ul.call(V,"constructor")&&V.constructor;return typeof Y=="function"&&Y instanceof Y&&$p.call(Y)==Tp}var Pa=ae?Qn(ae):TT;function KT(I){return DT(I,Oa(I))}function Oa(I){return dy(I)?_T(I):T7(I)}var py=NT(function(I,V,Y,ke){yw(I,V,Y,ke)});function QT(I){return function(){return I}}function Sw(I){return I}function Ew(){return!1}e.exports=py})(kk,kk.exports);var tYe=kk.exports;const yo=Zh(tYe);var nYe=e=>/!(important)?$/.test(e),Pq=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,rYe=(e,t)=>n=>{const r=String(t),i=nYe(r),s=Pq(r),o=e?`${e}.${s}`:s;let a=as(n.__cssMap)&&o in n.__cssMap?n.__cssMap[o].varRef:t;return a=Pq(a),i?`${a} !important`:a};function v9(e){const{scale:t,transform:n,compose:r}=e;return(s,o)=>{var a;const l=rYe(t,s)(o);let u=(a=n==null?void 0:n(l,o))!=null?a:l;return r&&(u=r(u,o)),u}}var H2=(...e)=>t=>e.reduce((n,r)=>r(n),t);function Zs(e,t){return n=>{const r={property:n,scale:e};return r.transform=v9({scale:e,transform:t}),r}}var iYe=({rtl:e,ltr:t})=>n=>n.direction==="rtl"?e:t;function sYe(e){const{property:t,scale:n,transform:r}=e;return{scale:n,property:iYe(t),transform:n?v9({scale:n,compose:r}):r}}var Lfe=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function oYe(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...Lfe].join(" ")}function aYe(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...Lfe].join(" ")}var lYe={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},uYe={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function cYe(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var fYe={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},LO={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},dYe=new Set(Object.values(LO)),zO=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),hYe=e=>e.trim();function pYe(e,t){if(e==null||zO.has(e))return e;if(!(jO(e)||zO.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),s=i==null?void 0:i[1],o=i==null?void 0:i[2];if(!s||!o)return e;const a=s.includes("-gradient")?s:`${s}-gradient`,[l,...u]=o.split(",").map(hYe).filter(Boolean);if((u==null?void 0:u.length)===0)return e;const c=l in LO?LO[l]:l;u.unshift(c);const f=u.map(d=>{if(dYe.has(d))return d;const h=d.indexOf(" "),[p,g]=h!==-1?[d.substr(0,h),d.substr(h+1)]:[d],m=jO(g)?g:g&&g.split(" "),y=`colors.${p}`,v=y in t.__cssMap?t.__cssMap[y].varRef:p;return m?[v,...Array.isArray(m)?m:[m]].join(" "):v});return`${a}(${f.join(", ")})`}var jO=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),gYe=(e,t)=>pYe(e,t??{});function mYe(e){return/^var\(--.+\)$/.test(e)}var yYe=e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}},Ia=e=>t=>`${e}(${t})`,gt={filter(e){return e!=="auto"?e:lYe},backdropFilter(e){return e!=="auto"?e:uYe},ring(e){return cYe(gt.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?oYe():e==="auto-gpu"?aYe():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=yYe(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const n={left:"right",right:"left"};return t.direction==="rtl"?n[e]:e},degree(e){if(mYe(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:gYe,blur:Ia("blur"),opacity:Ia("opacity"),brightness:Ia("brightness"),contrast:Ia("contrast"),dropShadow:Ia("drop-shadow"),grayscale:Ia("grayscale"),hueRotate:e=>Ia("hue-rotate")(gt.degree(e)),invert:Ia("invert"),saturate:Ia("saturate"),sepia:Ia("sepia"),bgImage(e){return e==null||jO(e)||zO.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:r}=(t=fYe[e])!=null?t:{},i={flexDirection:e};return n&&(i[n]=1),r&&(i[r]=1),i}},W={borderWidths:Zs("borderWidths"),borderStyles:Zs("borderStyles"),colors:Zs("colors"),borders:Zs("borders"),gradients:Zs("gradients",gt.gradient),radii:Zs("radii",gt.px),space:Zs("space",H2(gt.vh,gt.px)),spaceT:Zs("space",H2(gt.vh,gt.px)),degreeT(e){return{property:e,transform:gt.degree}},prop(e,t,n){return{property:e,scale:t,...t&&{transform:v9({scale:t,transform:n})}}},propT(e,t){return{property:e,transform:t}},sizes:Zs("sizes",H2(gt.vh,gt.px)),sizesT:Zs("sizes",H2(gt.vh,gt.fraction)),shadows:Zs("shadows"),logical:sYe,blur:Zs("blur",gt.blur)},YS={background:W.colors("background"),backgroundColor:W.colors("backgroundColor"),backgroundImage:W.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:gt.bgClip},bgSize:W.prop("backgroundSize"),bgPosition:W.prop("backgroundPosition"),bg:W.colors("background"),bgColor:W.colors("backgroundColor"),bgPos:W.prop("backgroundPosition"),bgRepeat:W.prop("backgroundRepeat"),bgAttachment:W.prop("backgroundAttachment"),bgGradient:W.gradients("backgroundImage"),bgClip:{transform:gt.bgClip}};Object.assign(YS,{bgImage:YS.backgroundImage,bgImg:YS.backgroundImage});var Ft={border:W.borders("border"),borderWidth:W.borderWidths("borderWidth"),borderStyle:W.borderStyles("borderStyle"),borderColor:W.colors("borderColor"),borderRadius:W.radii("borderRadius"),borderTop:W.borders("borderTop"),borderBlockStart:W.borders("borderBlockStart"),borderTopLeftRadius:W.radii("borderTopLeftRadius"),borderStartStartRadius:W.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:W.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:W.radii("borderTopRightRadius"),borderStartEndRadius:W.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:W.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:W.borders("borderRight"),borderInlineEnd:W.borders("borderInlineEnd"),borderBottom:W.borders("borderBottom"),borderBlockEnd:W.borders("borderBlockEnd"),borderBottomLeftRadius:W.radii("borderBottomLeftRadius"),borderBottomRightRadius:W.radii("borderBottomRightRadius"),borderLeft:W.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:W.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:W.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:W.borders(["borderLeft","borderRight"]),borderInline:W.borders("borderInline"),borderY:W.borders(["borderTop","borderBottom"]),borderBlock:W.borders("borderBlock"),borderTopWidth:W.borderWidths("borderTopWidth"),borderBlockStartWidth:W.borderWidths("borderBlockStartWidth"),borderTopColor:W.colors("borderTopColor"),borderBlockStartColor:W.colors("borderBlockStartColor"),borderTopStyle:W.borderStyles("borderTopStyle"),borderBlockStartStyle:W.borderStyles("borderBlockStartStyle"),borderBottomWidth:W.borderWidths("borderBottomWidth"),borderBlockEndWidth:W.borderWidths("borderBlockEndWidth"),borderBottomColor:W.colors("borderBottomColor"),borderBlockEndColor:W.colors("borderBlockEndColor"),borderBottomStyle:W.borderStyles("borderBottomStyle"),borderBlockEndStyle:W.borderStyles("borderBlockEndStyle"),borderLeftWidth:W.borderWidths("borderLeftWidth"),borderInlineStartWidth:W.borderWidths("borderInlineStartWidth"),borderLeftColor:W.colors("borderLeftColor"),borderInlineStartColor:W.colors("borderInlineStartColor"),borderLeftStyle:W.borderStyles("borderLeftStyle"),borderInlineStartStyle:W.borderStyles("borderInlineStartStyle"),borderRightWidth:W.borderWidths("borderRightWidth"),borderInlineEndWidth:W.borderWidths("borderInlineEndWidth"),borderRightColor:W.colors("borderRightColor"),borderInlineEndColor:W.colors("borderInlineEndColor"),borderRightStyle:W.borderStyles("borderRightStyle"),borderInlineEndStyle:W.borderStyles("borderInlineEndStyle"),borderTopRadius:W.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:W.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:W.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:W.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Ft,{rounded:Ft.borderRadius,roundedTop:Ft.borderTopRadius,roundedTopLeft:Ft.borderTopLeftRadius,roundedTopRight:Ft.borderTopRightRadius,roundedTopStart:Ft.borderStartStartRadius,roundedTopEnd:Ft.borderStartEndRadius,roundedBottom:Ft.borderBottomRadius,roundedBottomLeft:Ft.borderBottomLeftRadius,roundedBottomRight:Ft.borderBottomRightRadius,roundedBottomStart:Ft.borderEndStartRadius,roundedBottomEnd:Ft.borderEndEndRadius,roundedLeft:Ft.borderLeftRadius,roundedRight:Ft.borderRightRadius,roundedStart:Ft.borderInlineStartRadius,roundedEnd:Ft.borderInlineEndRadius,borderStart:Ft.borderInlineStart,borderEnd:Ft.borderInlineEnd,borderTopStartRadius:Ft.borderStartStartRadius,borderTopEndRadius:Ft.borderStartEndRadius,borderBottomStartRadius:Ft.borderEndStartRadius,borderBottomEndRadius:Ft.borderEndEndRadius,borderStartRadius:Ft.borderInlineStartRadius,borderEndRadius:Ft.borderInlineEndRadius,borderStartWidth:Ft.borderInlineStartWidth,borderEndWidth:Ft.borderInlineEndWidth,borderStartColor:Ft.borderInlineStartColor,borderEndColor:Ft.borderInlineEndColor,borderStartStyle:Ft.borderInlineStartStyle,borderEndStyle:Ft.borderInlineEndStyle});var vYe={color:W.colors("color"),textColor:W.colors("color"),fill:W.colors("fill"),stroke:W.colors("stroke")},BO={boxShadow:W.shadows("boxShadow"),mixBlendMode:!0,blendMode:W.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:W.prop("backgroundBlendMode"),opacity:!0};Object.assign(BO,{shadow:BO.boxShadow});var bYe={filter:{transform:gt.filter},blur:W.blur("--chakra-blur"),brightness:W.propT("--chakra-brightness",gt.brightness),contrast:W.propT("--chakra-contrast",gt.contrast),hueRotate:W.propT("--chakra-hue-rotate",gt.hueRotate),invert:W.propT("--chakra-invert",gt.invert),saturate:W.propT("--chakra-saturate",gt.saturate),dropShadow:W.propT("--chakra-drop-shadow",gt.dropShadow),backdropFilter:{transform:gt.backdropFilter},backdropBlur:W.blur("--chakra-backdrop-blur"),backdropBrightness:W.propT("--chakra-backdrop-brightness",gt.brightness),backdropContrast:W.propT("--chakra-backdrop-contrast",gt.contrast),backdropHueRotate:W.propT("--chakra-backdrop-hue-rotate",gt.hueRotate),backdropInvert:W.propT("--chakra-backdrop-invert",gt.invert),backdropSaturate:W.propT("--chakra-backdrop-saturate",gt.saturate)},_k={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:gt.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:W.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:W.space("gap"),rowGap:W.space("rowGap"),columnGap:W.space("columnGap")};Object.assign(_k,{flexDir:_k.flexDirection});var zfe={gridGap:W.space("gridGap"),gridColumnGap:W.space("gridColumnGap"),gridRowGap:W.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},xYe={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:gt.outline},outlineOffset:!0,outlineColor:W.colors("outlineColor")},to={width:W.sizesT("width"),inlineSize:W.sizesT("inlineSize"),height:W.sizes("height"),blockSize:W.sizes("blockSize"),boxSize:W.sizes(["width","height"]),minWidth:W.sizes("minWidth"),minInlineSize:W.sizes("minInlineSize"),minHeight:W.sizes("minHeight"),minBlockSize:W.sizes("minBlockSize"),maxWidth:W.sizes("maxWidth"),maxInlineSize:W.sizes("maxInlineSize"),maxHeight:W.sizes("maxHeight"),maxBlockSize:W.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (min-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r.minW)!=null?i:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (max-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r._minW)!=null?i:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:W.propT("float",gt.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(to,{w:to.width,h:to.height,minW:to.minWidth,maxW:to.maxWidth,minH:to.minHeight,maxH:to.maxHeight,overscroll:to.overscrollBehavior,overscrollX:to.overscrollBehaviorX,overscrollY:to.overscrollBehaviorY});var wYe={listStyleType:!0,listStylePosition:!0,listStylePos:W.prop("listStylePosition"),listStyleImage:!0,listStyleImg:W.prop("listStyleImage")};function SYe(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var EYe=e=>{const t=new WeakMap;return(r,i,s,o)=>{if(typeof r>"u")return e(r,i,s);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,s,o);return a.set(i,l),l}},CYe=EYe(SYe),kYe={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},_Ye={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},yR=(e,t,n)=>{const r={},i=CYe(e,t,{});for(const s in i)s in n&&n[s]!=null||(r[s]=i[s]);return r},$Ye={srOnly:{transform(e){return e===!0?kYe:e==="focusable"?_Ye:{}}},layerStyle:{processResult:!0,transform:(e,t,n)=>yR(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>yR(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>yR(t,e,n)}},xv={position:!0,pos:W.prop("position"),zIndex:W.prop("zIndex","zIndices"),inset:W.spaceT("inset"),insetX:W.spaceT(["left","right"]),insetInline:W.spaceT("insetInline"),insetY:W.spaceT(["top","bottom"]),insetBlock:W.spaceT("insetBlock"),top:W.spaceT("top"),insetBlockStart:W.spaceT("insetBlockStart"),bottom:W.spaceT("bottom"),insetBlockEnd:W.spaceT("insetBlockEnd"),left:W.spaceT("left"),insetInlineStart:W.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:W.spaceT("right"),insetInlineEnd:W.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(xv,{insetStart:xv.insetInlineStart,insetEnd:xv.insetInlineEnd});var AYe={ring:{transform:gt.ring},ringColor:W.colors("--chakra-ring-color"),ringOffset:W.prop("--chakra-ring-offset-width"),ringOffsetColor:W.colors("--chakra-ring-offset-color"),ringInset:W.prop("--chakra-ring-inset")},ln={margin:W.spaceT("margin"),marginTop:W.spaceT("marginTop"),marginBlockStart:W.spaceT("marginBlockStart"),marginRight:W.spaceT("marginRight"),marginInlineEnd:W.spaceT("marginInlineEnd"),marginBottom:W.spaceT("marginBottom"),marginBlockEnd:W.spaceT("marginBlockEnd"),marginLeft:W.spaceT("marginLeft"),marginInlineStart:W.spaceT("marginInlineStart"),marginX:W.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:W.spaceT("marginInline"),marginY:W.spaceT(["marginTop","marginBottom"]),marginBlock:W.spaceT("marginBlock"),padding:W.space("padding"),paddingTop:W.space("paddingTop"),paddingBlockStart:W.space("paddingBlockStart"),paddingRight:W.space("paddingRight"),paddingBottom:W.space("paddingBottom"),paddingBlockEnd:W.space("paddingBlockEnd"),paddingLeft:W.space("paddingLeft"),paddingInlineStart:W.space("paddingInlineStart"),paddingInlineEnd:W.space("paddingInlineEnd"),paddingX:W.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:W.space("paddingInline"),paddingY:W.space(["paddingTop","paddingBottom"]),paddingBlock:W.space("paddingBlock")};Object.assign(ln,{m:ln.margin,mt:ln.marginTop,mr:ln.marginRight,me:ln.marginInlineEnd,marginEnd:ln.marginInlineEnd,mb:ln.marginBottom,ml:ln.marginLeft,ms:ln.marginInlineStart,marginStart:ln.marginInlineStart,mx:ln.marginX,my:ln.marginY,p:ln.padding,pt:ln.paddingTop,py:ln.paddingY,px:ln.paddingX,pb:ln.paddingBottom,pl:ln.paddingLeft,ps:ln.paddingInlineStart,paddingStart:ln.paddingInlineStart,pr:ln.paddingRight,pe:ln.paddingInlineEnd,paddingEnd:ln.paddingInlineEnd});var TYe={textDecorationColor:W.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:W.shadows("textShadow")},RYe={clipPath:!0,transform:W.propT("transform",gt.transform),transformOrigin:!0,translateX:W.spaceT("--chakra-translate-x"),translateY:W.spaceT("--chakra-translate-y"),skewX:W.degreeT("--chakra-skew-x"),skewY:W.degreeT("--chakra-skew-y"),scaleX:W.prop("--chakra-scale-x"),scaleY:W.prop("--chakra-scale-y"),scale:W.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:W.degreeT("--chakra-rotate")},FYe={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:W.prop("transitionDuration","transition.duration"),transitionProperty:W.prop("transitionProperty","transition.property"),transitionTimingFunction:W.prop("transitionTimingFunction","transition.easing")},PYe={fontFamily:W.prop("fontFamily","fonts"),fontSize:W.prop("fontSize","fontSizes",gt.px),fontWeight:W.prop("fontWeight","fontWeights"),lineHeight:W.prop("lineHeight","lineHeights"),letterSpacing:W.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},OYe={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:W.spaceT("scrollMargin"),scrollMarginTop:W.spaceT("scrollMarginTop"),scrollMarginBottom:W.spaceT("scrollMarginBottom"),scrollMarginLeft:W.spaceT("scrollMarginLeft"),scrollMarginRight:W.spaceT("scrollMarginRight"),scrollMarginX:W.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:W.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:W.spaceT("scrollPadding"),scrollPaddingTop:W.spaceT("scrollPaddingTop"),scrollPaddingBottom:W.spaceT("scrollPaddingBottom"),scrollPaddingLeft:W.spaceT("scrollPaddingLeft"),scrollPaddingRight:W.spaceT("scrollPaddingRight"),scrollPaddingX:W.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:W.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function jfe(e){return as(e)&&e.reference?e.reference:String(e)}var IA=(e,...t)=>t.map(jfe).join(` ${e} `).replace(/calc/g,""),Oq=(...e)=>`calc(${IA("+",...e)})`,Mq=(...e)=>`calc(${IA("-",...e)})`,UO=(...e)=>`calc(${IA("*",...e)})`,Dq=(...e)=>`calc(${IA("/",...e)})`,Nq=e=>{const t=jfe(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:UO(t,-1)},Ld=Object.assign(e=>({add:(...t)=>Ld(Oq(e,...t)),subtract:(...t)=>Ld(Mq(e,...t)),multiply:(...t)=>Ld(UO(e,...t)),divide:(...t)=>Ld(Dq(e,...t)),negate:()=>Ld(Nq(e)),toString:()=>e.toString()}),{add:Oq,subtract:Mq,multiply:UO,divide:Dq,negate:Nq});function MYe(e,t="-"){return e.replace(/\s+/g,t)}function DYe(e){const t=MYe(e.toString());return IYe(NYe(t))}function NYe(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function IYe(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function LYe(e,t=""){return[t,e].filter(Boolean).join("-")}function zYe(e,t){return`var(${e}${t?`, ${t}`:""})`}function jYe(e,t=""){return DYe(`--${LYe(e,t)}`)}function Ue(e,t,n){const r=jYe(e,n);return{variable:r,reference:zYe(r,t)}}function BYe(e,t){const n={};for(const r of t){if(Array.isArray(r)){const[i,s]=r;n[i]=Ue(`${e}-${i}`,s);continue}n[r]=Ue(`${e}-${r}`)}return n}function UYe(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function VYe(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}function VO(e){if(e==null)return e;const{unitless:t}=VYe(e);return t||typeof e=="number"?`${e}px`:e}var Bfe=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,b9=e=>Object.fromEntries(Object.entries(e).sort(Bfe));function Iq(e){const t=b9(e);return Object.assign(Object.values(t),t)}function WYe(e){const t=Object.keys(b9(e));return new Set(t)}function Lq(e){var t;if(!e)return e;e=(t=VO(e))!=null?t:e;const n=-.02;return typeof e=="number"?`${e+n}`:e.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function B1(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${VO(e)})`),t&&n.push("and",`(max-width: ${VO(t)})`),n.join(" ")}function HYe(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const n=Iq(e),r=Object.entries(e).sort(Bfe).map(([o,a],l,u)=>{var c;let[,f]=(c=u[l+1])!=null?c:[];return f=parseFloat(f)>0?Lq(f):void 0,{_minW:Lq(a),breakpoint:o,minW:a,maxW:f,maxWQuery:B1(null,f),minWQuery:B1(a),minMaxQuery:B1(a,f)}}),i=WYe(e),s=Array.from(i.values());return{keys:i,normalized:n,isResponsive(o){const a=Object.keys(o);return a.length>0&&a.every(l=>i.has(l))},asObject:b9(e),asArray:Iq(e),details:r,get(o){return r.find(a=>a.breakpoint===o)},media:[null,...n.map(o=>B1(o)).slice(1)],toArrayValue(o){if(!as(o))throw new Error("toArrayValue: value must be an object");const a=s.map(l=>{var u;return(u=o[l])!=null?u:null});for(;UYe(a)===null;)a.pop();return a},toObjectValue(o){if(!Array.isArray(o))throw new Error("toObjectValue: value must be an array");return o.reduce((a,l,u)=>{const c=s[u];return c!=null&&l!=null&&(a[c]=l),a},{})}}}var _r={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},pc=e=>Ufe(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Kl=e=>Ufe(t=>e(t,"~ &"),"[data-peer]",".peer"),Ufe=(e,...t)=>t.map(e).join(", "),LA={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:pc(_r.hover),_peerHover:Kl(_r.hover),_groupFocus:pc(_r.focus),_peerFocus:Kl(_r.focus),_groupFocusVisible:pc(_r.focusVisible),_peerFocusVisible:Kl(_r.focusVisible),_groupActive:pc(_r.active),_peerActive:Kl(_r.active),_groupDisabled:pc(_r.disabled),_peerDisabled:Kl(_r.disabled),_groupInvalid:pc(_r.invalid),_peerInvalid:Kl(_r.invalid),_groupChecked:pc(_r.checked),_peerChecked:Kl(_r.checked),_groupFocusWithin:pc(_r.focusWithin),_peerFocusWithin:Kl(_r.focusWithin),_peerPlaceholderShown:Kl(_r.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},Vfe=Object.keys(LA);function zq(e,t){return Ue(String(e).replace(/\./g,"-"),void 0,t)}function qYe(e,t){let n={};const r={};for(const[i,s]of Object.entries(e)){const{isSemantic:o,value:a}=s,{variable:l,reference:u}=zq(i,t==null?void 0:t.cssVarPrefix);if(!o){if(i.startsWith("space")){const d=i.split("."),[h,...p]=d,g=`${h}.-${p.join(".")}`,m=Ld.negate(a),y=Ld.negate(u);r[g]={value:m,var:l,varRef:y}}n[l]=a,r[i]={value:a,var:l,varRef:u};continue}const c=d=>{const p=[String(i).split(".")[0],d].join(".");if(!e[p])return d;const{reference:m}=zq(p,t==null?void 0:t.cssVarPrefix);return m},f=as(a)?a:{default:a};n=yo(n,Object.entries(f).reduce((d,[h,p])=>{var g,m;if(!p)return d;const y=c(`${p}`);if(h==="default")return d[l]=y,d;const v=(m=(g=LA)==null?void 0:g[h])!=null?m:h;return d[v]={[l]:y},d},{})),r[i]={value:u,var:l,varRef:u}}return{cssVars:n,cssMap:r}}function GYe(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}function XYe(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function YYe(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function jq(e,t,n={}){const{stop:r,getKey:i}=n;function s(o,a=[]){var l;if(YYe(o)||Array.isArray(o)){const u={};for(const[c,f]of Object.entries(o)){const d=(l=i==null?void 0:i(c))!=null?l:c,h=[...a,d];if(r!=null&&r(o,h))return t(o,a);u[d]=s(f,h)}return u}return t(o,a)}return s(e)}var KYe=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function QYe(e){return XYe(e,KYe)}function JYe(e){return e.semanticTokens}function ZYe(e){const{__cssMap:t,__cssVars:n,__breakpoints:r,...i}=e;return i}var eKe=e=>Vfe.includes(e)||e==="default";function tKe({tokens:e,semanticTokens:t}){const n={};return jq(e,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!1,value:r})}),jq(t,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!0,value:r})},{stop:r=>Object.keys(r).every(eKe)}),n}function nKe(e){var t;const n=ZYe(e),r=QYe(n),i=JYe(n),s=tKe({tokens:r,semanticTokens:i}),o=(t=n.config)==null?void 0:t.cssVarPrefix,{cssMap:a,cssVars:l}=qYe(s,{cssVarPrefix:o});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...l},__cssMap:a,__breakpoints:HYe(n.breakpoints)}),n}var x9=yo({},YS,Ft,vYe,_k,to,bYe,AYe,xYe,zfe,$Ye,xv,BO,ln,OYe,PYe,TYe,RYe,wYe,FYe),rKe=Object.assign({},ln,to,_k,zfe,xv),iKe=Object.keys(rKe),sKe=[...Object.keys(x9),...Vfe],oKe={...x9,...LA},aKe=e=>e in oKe,lKe=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:r,media:i}=t.__breakpoints,s={};for(const o in e){let a=al(e[o],t);if(a==null)continue;if(a=as(a)&&n(a)?r(a):a,!Array.isArray(a)){s[o]=a;continue}const l=a.slice(0,i.length).length;for(let u=0;u<l;u+=1){const c=i==null?void 0:i[u];if(!c){s[o]=a[u];continue}s[c]=s[c]||{},a[u]!=null&&(s[c][o]=a[u])}}return s};function uKe(e){const t=[];let n="",r=!1;for(let i=0;i<e.length;i++){const s=e[i];s==="("?(r=!0,n+=s):s===")"?(r=!1,n+=s):s===","&&!r?(t.push(n),n=""):n+=s}return n=n.trim(),n&&t.push(n),t}function cKe(e){return/^var\(--.+\)$/.test(e)}var fKe=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!cKe(t),dKe=(e,t)=>{var n,r;if(t==null)return t;const i=l=>{var u,c;return(c=(u=e.__cssMap)==null?void 0:u[l])==null?void 0:c.varRef},s=l=>{var u;return(u=i(l))!=null?u:l},[o,a]=uKe(t);return t=(r=(n=i(o))!=null?n:s(a))!=null?r:s(t),t};function hKe(e){const{configs:t={},pseudos:n={},theme:r}=e,i=(s,o=!1)=>{var a,l,u;const c=al(s,r),f=lKe(c)(r);let d={};for(let h in f){const p=f[h];let g=al(p,r);h in n&&(h=n[h]),fKe(h,g)&&(g=dKe(r,g));let m=t[h];if(m===!0&&(m={property:h}),as(g)){d[h]=(a=d[h])!=null?a:{},d[h]=yo({},d[h],i(g,!0));continue}let y=(u=(l=m==null?void 0:m.transform)==null?void 0:l.call(m,g,r,c))!=null?u:g;y=m!=null&&m.processResult?i(y,!0):y;const v=al(m==null?void 0:m.property,r);if(!o&&(m!=null&&m.static)){const b=al(m.static,r);d=yo({},d,b)}if(v&&Array.isArray(v)){for(const b of v)d[b]=y;continue}if(v){v==="&"&&as(y)?d=yo({},d,y):d[v]=y;continue}if(as(y)){d=yo({},d,y);continue}d[h]=y}return d};return i}var Wfe=e=>t=>hKe({theme:t,pseudos:LA,configs:x9})(e);function on(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function pKe(e,t){if(Array.isArray(e))return e;if(as(e))return t(e);if(e!=null)return[e]}function gKe(e,t){for(let n=t+1;n<e.length;n++)if(e[n]!=null)return n;return-1}function mKe(e){const t=e.__breakpoints;return function(r,i,s,o){var a,l;if(!t)return;const u={},c=pKe(s,t.toArrayValue);if(!c)return u;const f=c.length,d=f===1,h=!!r.parts;for(let p=0;p<f;p++){const g=t.details[p],m=t.details[gKe(c,p)],y=B1(g.minW,m==null?void 0:m._minW),v=al((a=r[i])==null?void 0:a[c[p]],o);if(v){if(h){(l=r.parts)==null||l.forEach(b=>{yo(u,{[b]:d?v[b]:{[y]:v[b]}})});continue}if(!h){d?yo(u,v):u[y]=v;continue}u[y]=v}}return u}}function yKe(e){return t=>{var n;const{variant:r,size:i,theme:s}=t,o=mKe(s);return yo({},al((n=e.baseStyle)!=null?n:{},t),o(e,"sizes",i,t),o(e,"variants",r,t))}}function Ur(e){return GYe(e,["styleConfig","size","variant","colorScheme"])}var vKe=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function bKe(e){return as(e)?vKe.every(t=>Object.prototype.hasOwnProperty.call(e,t)):!1}var xKe={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},wKe={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},SKe={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},EKe={property:xKe,easing:wKe,duration:SKe},CKe=EKe,kKe={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},_Ke=kKe,$Ke={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},AKe=$Ke,TKe={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},RKe=TKe,FKe={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},PKe=FKe,OKe={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},MKe=OKe,DKe={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},NKe=DKe,IKe={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},LKe=IKe,zKe={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},Hfe=zKe,qfe={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},jKe={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},BKe={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},UKe={...qfe,...jKe,container:BKe},Gfe=UKe,VKe={breakpoints:RKe,zIndices:_Ke,radii:MKe,blur:LKe,colors:PKe,...Hfe,sizes:Gfe,shadows:NKe,space:qfe,borders:AKe,transition:CKe},{defineMultiStyleConfig:WKe,definePartsStyle:U1}=on(["stepper","step","title","description","indicator","separator","icon","number"]),su=Ue("stepper-indicator-size"),Tg=Ue("stepper-icon-size"),Rg=Ue("stepper-title-font-size"),V1=Ue("stepper-description-font-size"),e1=Ue("stepper-accent-color"),HKe=U1(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[e1.variable]:`colors.${e}.500`,_dark:{[e1.variable]:`colors.${e}.200`}},title:{fontSize:Rg.reference,fontWeight:"medium"},description:{fontSize:V1.reference,color:"chakra-subtle-text"},number:{fontSize:Rg.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Tg.reference,height:Tg.reference},indicator:{flexShrink:0,borderRadius:"full",width:su.reference,height:su.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:e1.reference},"&[data-status=complete]":{bg:e1.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:e1.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${su.reference} - 8px)`,top:`calc(${su.reference} + 4px)`,insetStart:`calc(${su.reference} / 2 - 1px)`}}})),qKe=WKe({baseStyle:HKe,sizes:{xs:U1({stepper:{[su.variable]:"sizes.4",[Tg.variable]:"sizes.3",[Rg.variable]:"fontSizes.xs",[V1.variable]:"fontSizes.xs"}}),sm:U1({stepper:{[su.variable]:"sizes.6",[Tg.variable]:"sizes.4",[Rg.variable]:"fontSizes.sm",[V1.variable]:"fontSizes.xs"}}),md:U1({stepper:{[su.variable]:"sizes.8",[Tg.variable]:"sizes.5",[Rg.variable]:"fontSizes.md",[V1.variable]:"fontSizes.sm"}}),lg:U1({stepper:{[su.variable]:"sizes.10",[Tg.variable]:"sizes.6",[Rg.variable]:"fontSizes.lg",[V1.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function Nt(e,t={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...c){r();for(const f of c)t[f]=l(f);return Nt(e,t)}function s(...c){for(const f of c)f in t||(t[f]=l(f));return Nt(e,t)}function o(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.selector]))}function a(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.className]))}function l(c){const h=`chakra-${(["container","root"].includes(c??"")?[e]:[e,c]).filter(Boolean).join("__")}`;return{className:h,selector:`.${h}`,toString:()=>c}}return{parts:i,toPart:l,extend:s,selectors:o,classnames:a,get keys(){return Object.keys(t)},__type:{}}}var GKe=Nt("accordion").parts("root","container","button","panel").extend("icon"),XKe=Nt("alert").parts("title","description","container").extend("icon","spinner"),YKe=Nt("avatar").parts("label","badge","container").extend("excessLabel","group"),KKe=Nt("breadcrumb").parts("link","item","container").extend("separator");Nt("button").parts();var QKe=Nt("checkbox").parts("control","icon","container").extend("label");Nt("progress").parts("track","filledTrack").extend("label");var JKe=Nt("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),ZKe=Nt("editable").parts("preview","input","textarea"),eQe=Nt("form").parts("container","requiredIndicator","helperText"),tQe=Nt("formError").parts("text","icon"),nQe=Nt("input").parts("addon","field","element","group"),rQe=Nt("list").parts("container","item","icon"),iQe=Nt("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),sQe=Nt("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),oQe=Nt("numberinput").parts("root","field","stepperGroup","stepper");Nt("pininput").parts("field");var aQe=Nt("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),lQe=Nt("progress").parts("label","filledTrack","track"),uQe=Nt("radio").parts("container","control","label"),cQe=Nt("select").parts("field","icon"),fQe=Nt("slider").parts("container","track","thumb","filledTrack","mark"),dQe=Nt("stat").parts("container","label","helpText","number","icon"),hQe=Nt("switch").parts("container","track","thumb","label"),pQe=Nt("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),gQe=Nt("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),mQe=Nt("tag").parts("container","label","closeButton"),yQe=Nt("card").parts("container","header","body","footer");Nt("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function Xd(e,t,n){return Math.min(Math.max(e,n),t)}class vQe extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var W1=vQe;function w9(e){if(typeof e!="string")throw new W1(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=_Qe.test(e)?wQe(e):e;const n=SQe.exec(t);if(n){const o=Array.from(n).slice(1);return[...o.slice(0,3).map(a=>parseInt(Db(a,2),16)),parseInt(Db(o[3]||"f",2),16)/255]}const r=EQe.exec(t);if(r){const o=Array.from(r).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,16)),parseInt(o[3]||"ff",16)/255]}const i=CQe.exec(t);if(i){const o=Array.from(i).slice(1);return[...o.slice(0,3).map(a=>parseInt(a,10)),parseFloat(o[3]||"1")]}const s=kQe.exec(t);if(s){const[o,a,l,u]=Array.from(s).slice(1).map(parseFloat);if(Xd(0,100,a)!==a)throw new W1(e);if(Xd(0,100,l)!==l)throw new W1(e);return[...$Qe(o,a,l),Number.isNaN(u)?1:u]}throw new W1(e)}function bQe(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const Bq=e=>parseInt(e.replace(/_/g,""),36),xQe="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=Bq(t.substring(0,3)),r=Bq(t.substring(3)).toString(16);let i="";for(let s=0;s<6-r.length;s++)i+="0";return e[n]=`${i}${r}`,e},{});function wQe(e){const t=e.toLowerCase().trim(),n=xQe[bQe(t)];if(!n)throw new W1(e);return`#${n}`}const Db=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),SQe=new RegExp(`^#${Db("([a-f0-9])",3)}([a-f0-9])?$`,"i"),EQe=new RegExp(`^#${Db("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),CQe=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Db(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),kQe=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,_Qe=/^[a-z]+$/i,Uq=e=>Math.round(e*255),$Qe=(e,t,n)=>{let r=n/100;if(t===0)return[r,r,r].map(Uq);const i=(e%360+360)%360/60,s=(1-Math.abs(2*r-1))*(t/100),o=s*(1-Math.abs(i%2-1));let a=0,l=0,u=0;i>=0&&i<1?(a=s,l=o):i>=1&&i<2?(a=o,l=s):i>=2&&i<3?(l=s,u=o):i>=3&&i<4?(l=o,u=s):i>=4&&i<5?(a=o,u=s):i>=5&&i<6&&(a=s,u=o);const c=r-s/2,f=a+c,d=l+c,h=u+c;return[f,d,h].map(Uq)};function AQe(e,t,n,r){return`rgba(${Xd(0,255,e).toFixed()}, ${Xd(0,255,t).toFixed()}, ${Xd(0,255,n).toFixed()}, ${parseFloat(Xd(0,1,r).toFixed(3))})`}function TQe(e,t){const[n,r,i,s]=w9(e);return AQe(n,r,i,s-t)}function RQe(e){const[t,n,r,i]=w9(e);let s=o=>{const a=Xd(0,255,o).toString(16);return a.length===1?`0${a}`:a};return`#${s(t)}${s(n)}${s(r)}${i<1?s(Math.round(i*255)):""}`}function FQe(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var PQe=e=>Object.keys(e).length===0,Fi=(e,t,n)=>{const r=FQe(e,`colors.${t}`,t);try{return RQe(r),r}catch{return n??"#000000"}},OQe=e=>{const[t,n,r]=w9(e);return(t*299+n*587+r*114)/1e3},MQe=e=>t=>{const n=Fi(t,e);return OQe(n)<128?"dark":"light"},DQe=e=>t=>MQe(e)(t)==="dark",x0=(e,t)=>n=>{const r=Fi(n,e);return TQe(r,1-t)};function Vq(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var NQe=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function IQe(e){const t=NQe();return!e||PQe(e)?t:e.string&&e.colors?zQe(e.string,e.colors):e.string&&!e.colors?LQe(e.string):e.colors&&!e.string?jQe(e.colors):t}function LQe(e){let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t=t&t;let n="#";for(let r=0;r<3;r+=1){const i=t>>r*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function zQe(e,t){let n=0;if(e.length===0)return t[0];for(let r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%t.length+t.length)%t.length,t[n]}function jQe(e){return e[Math.floor(Math.random()*e.length)]}function Be(e,t){return n=>n.colorMode==="dark"?t:e}function S9(e){const{orientation:t,vertical:n,horizontal:r}=e;return t?t==="vertical"?n:r:{}}function Xfe(e){return as(e)&&e.reference?e.reference:String(e)}var zA=(e,...t)=>t.map(Xfe).join(` ${e} `).replace(/calc/g,""),Wq=(...e)=>`calc(${zA("+",...e)})`,Hq=(...e)=>`calc(${zA("-",...e)})`,WO=(...e)=>`calc(${zA("*",...e)})`,qq=(...e)=>`calc(${zA("/",...e)})`,Gq=e=>{const t=Xfe(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:WO(t,-1)},ou=Object.assign(e=>({add:(...t)=>ou(Wq(e,...t)),subtract:(...t)=>ou(Hq(e,...t)),multiply:(...t)=>ou(WO(e,...t)),divide:(...t)=>ou(qq(e,...t)),negate:()=>ou(Gq(e)),toString:()=>e.toString()}),{add:Wq,subtract:Hq,multiply:WO,divide:qq,negate:Gq});function BQe(e){return!Number.isInteger(parseFloat(e.toString()))}function UQe(e,t="-"){return e.replace(/\s+/g,t)}function Yfe(e){const t=UQe(e.toString());return t.includes("\\.")?e:BQe(e)?t.replace(".","\\."):e}function VQe(e,t=""){return[t,Yfe(e)].filter(Boolean).join("-")}function WQe(e,t){return`var(${Yfe(e)}${t?`, ${t}`:""})`}function HQe(e,t=""){return`--${VQe(e,t)}`}function lr(e,t){const n=HQe(e,void 0);return{variable:n,reference:WQe(n,qQe(void 0))}}function qQe(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:GQe,definePartsStyle:KS}=on(hQe.keys),wv=lr("switch-track-width"),mh=lr("switch-track-height"),vR=lr("switch-track-diff"),XQe=ou.subtract(wv,mh),HO=lr("switch-thumb-x"),t1=lr("switch-bg"),YQe=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[wv.reference],height:[mh.reference],transitionProperty:"common",transitionDuration:"fast",[t1.variable]:"colors.gray.300",_dark:{[t1.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[t1.variable]:`colors.${t}.500`,_dark:{[t1.variable]:`colors.${t}.200`}},bg:t1.reference}},KQe={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[mh.reference],height:[mh.reference],_checked:{transform:`translateX(${HO.reference})`}},QQe=KS(e=>({container:{[vR.variable]:XQe,[HO.variable]:vR.reference,_rtl:{[HO.variable]:ou(vR).negate().toString()}},track:YQe(e),thumb:KQe})),JQe={sm:KS({container:{[wv.variable]:"1.375rem",[mh.variable]:"sizes.3"}}),md:KS({container:{[wv.variable]:"1.875rem",[mh.variable]:"sizes.4"}}),lg:KS({container:{[wv.variable]:"2.875rem",[mh.variable]:"sizes.6"}})},ZQe=GQe({baseStyle:QQe,sizes:JQe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:eJe,definePartsStyle:im}=on(pQe.keys),tJe=im({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),$k={"&[data-is-numeric=true]":{textAlign:"end"}},nJe=im(e=>{const{colorScheme:t}=e;return{th:{color:Be("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Be(`${t}.100`,`${t}.700`)(e),...$k},td:{borderBottom:"1px",borderColor:Be(`${t}.100`,`${t}.700`)(e),...$k},caption:{color:Be("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),rJe=im(e=>{const{colorScheme:t}=e;return{th:{color:Be("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Be(`${t}.100`,`${t}.700`)(e),...$k},td:{borderBottom:"1px",borderColor:Be(`${t}.100`,`${t}.700`)(e),...$k},caption:{color:Be("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Be(`${t}.100`,`${t}.700`)(e)},td:{background:Be(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),iJe={simple:nJe,striped:rJe,unstyled:{}},sJe={sm:im({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:im({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:im({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},oJe=eJe({baseStyle:tJe,variants:iJe,sizes:sJe,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),Ji=Ue("tabs-color"),ta=Ue("tabs-bg"),q2=Ue("tabs-border-color"),{defineMultiStyleConfig:aJe,definePartsStyle:bl}=on(gQe.keys),lJe=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},uJe=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},cJe=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:n==="vertical"?"column":"row"}},fJe={p:4},dJe=bl(e=>({root:lJe(e),tab:uJe(e),tablist:cJe(e),tabpanel:fJe})),hJe={sm:bl({tab:{py:1,px:4,fontSize:"sm"}}),md:bl({tab:{fontSize:"md",py:2,px:4}}),lg:bl({tab:{fontSize:"lg",py:3,px:4}})},pJe=bl(e=>{const{colorScheme:t,orientation:n}=e,r=n==="vertical",i=r?"borderStart":"borderBottom",s=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[s]:"-2px",_selected:{[Ji.variable]:`colors.${t}.600`,_dark:{[Ji.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[ta.variable]:"colors.gray.200",_dark:{[ta.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Ji.reference,bg:ta.reference}}}),gJe=bl(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[q2.variable]:"transparent",_selected:{[Ji.variable]:`colors.${t}.600`,[q2.variable]:"colors.white",_dark:{[Ji.variable]:`colors.${t}.300`,[q2.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:q2.reference},color:Ji.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),mJe=bl(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[ta.variable]:"colors.gray.50",_dark:{[ta.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[ta.variable]:"colors.white",[Ji.variable]:`colors.${t}.600`,_dark:{[ta.variable]:"colors.gray.800",[Ji.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:Ji.reference,bg:ta.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),yJe=bl(e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Fi(n,`${t}.700`),bg:Fi(n,`${t}.100`)}}}}),vJe=bl(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[Ji.variable]:"colors.gray.600",_dark:{[Ji.variable]:"inherit"},_selected:{[Ji.variable]:"colors.white",[ta.variable]:`colors.${t}.600`,_dark:{[Ji.variable]:"colors.gray.800",[ta.variable]:`colors.${t}.300`}},color:Ji.reference,bg:ta.reference}}}),bJe=bl({}),xJe={line:pJe,enclosed:gJe,"enclosed-colored":mJe,"soft-rounded":yJe,"solid-rounded":vJe,unstyled:bJe},wJe=aJe({baseStyle:dJe,sizes:hJe,variants:xJe,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),Un=BYe("badge",["bg","color","shadow"]),SJe={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Un.bg.reference,color:Un.color.reference,boxShadow:Un.shadow.reference},EJe=e=>{const{colorScheme:t,theme:n}=e,r=x0(`${t}.500`,.6)(n);return{[Un.bg.variable]:`colors.${t}.500`,[Un.color.variable]:"colors.white",_dark:{[Un.bg.variable]:r,[Un.color.variable]:"colors.whiteAlpha.800"}}},CJe=e=>{const{colorScheme:t,theme:n}=e,r=x0(`${t}.200`,.16)(n);return{[Un.bg.variable]:`colors.${t}.100`,[Un.color.variable]:`colors.${t}.800`,_dark:{[Un.bg.variable]:r,[Un.color.variable]:`colors.${t}.200`}}},kJe=e=>{const{colorScheme:t,theme:n}=e,r=x0(`${t}.200`,.8)(n);return{[Un.color.variable]:`colors.${t}.500`,_dark:{[Un.color.variable]:r},[Un.shadow.variable]:`inset 0 0 0px 1px ${Un.color.reference}`}},_Je={solid:EJe,subtle:CJe,outline:kJe},Sv={baseStyle:SJe,variants:_Je,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:$Je,definePartsStyle:yh}=on(mQe.keys),Xq=Ue("tag-bg"),Yq=Ue("tag-color"),bR=Ue("tag-shadow"),QS=Ue("tag-min-height"),JS=Ue("tag-min-width"),ZS=Ue("tag-font-size"),eE=Ue("tag-padding-inline"),AJe={fontWeight:"medium",lineHeight:1.2,outline:0,[Yq.variable]:Un.color.reference,[Xq.variable]:Un.bg.reference,[bR.variable]:Un.shadow.reference,color:Yq.reference,bg:Xq.reference,boxShadow:bR.reference,borderRadius:"md",minH:QS.reference,minW:JS.reference,fontSize:ZS.reference,px:eE.reference,_focusVisible:{[bR.variable]:"shadows.outline"}},TJe={lineHeight:1.2,overflow:"visible"},RJe={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},FJe=yh({container:AJe,label:TJe,closeButton:RJe}),PJe={sm:yh({container:{[QS.variable]:"sizes.5",[JS.variable]:"sizes.5",[ZS.variable]:"fontSizes.xs",[eE.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:yh({container:{[QS.variable]:"sizes.6",[JS.variable]:"sizes.6",[ZS.variable]:"fontSizes.sm",[eE.variable]:"space.2"}}),lg:yh({container:{[QS.variable]:"sizes.8",[JS.variable]:"sizes.8",[ZS.variable]:"fontSizes.md",[eE.variable]:"space.3"}})},OJe={subtle:yh(e=>{var t;return{container:(t=Sv.variants)==null?void 0:t.subtle(e)}}),solid:yh(e=>{var t;return{container:(t=Sv.variants)==null?void 0:t.solid(e)}}),outline:yh(e=>{var t;return{container:(t=Sv.variants)==null?void 0:t.outline(e)}})},MJe=$Je({variants:OJe,baseStyle:FJe,sizes:PJe,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:pu,defineMultiStyleConfig:DJe}=on(nQe.keys),Fg=Ue("input-height"),Pg=Ue("input-font-size"),Og=Ue("input-padding"),Mg=Ue("input-border-radius"),NJe=pu({addon:{height:Fg.reference,fontSize:Pg.reference,px:Og.reference,borderRadius:Mg.reference},field:{width:"100%",height:Fg.reference,fontSize:Pg.reference,px:Og.reference,borderRadius:Mg.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),gc={lg:{[Pg.variable]:"fontSizes.lg",[Og.variable]:"space.4",[Mg.variable]:"radii.md",[Fg.variable]:"sizes.12"},md:{[Pg.variable]:"fontSizes.md",[Og.variable]:"space.4",[Mg.variable]:"radii.md",[Fg.variable]:"sizes.10"},sm:{[Pg.variable]:"fontSizes.sm",[Og.variable]:"space.3",[Mg.variable]:"radii.sm",[Fg.variable]:"sizes.8"},xs:{[Pg.variable]:"fontSizes.xs",[Og.variable]:"space.2",[Mg.variable]:"radii.sm",[Fg.variable]:"sizes.6"}},IJe={lg:pu({field:gc.lg,group:gc.lg}),md:pu({field:gc.md,group:gc.md}),sm:pu({field:gc.sm,group:gc.sm}),xs:pu({field:gc.xs,group:gc.xs})};function E9(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||Be("blue.500","blue.300")(e),errorBorderColor:n||Be("red.500","red.300")(e)}}var LJe=pu(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=E9(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Be("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Fi(t,r),boxShadow:`0 0 0 1px ${Fi(t,r)}`},_focusVisible:{zIndex:1,borderColor:Fi(t,n),boxShadow:`0 0 0 1px ${Fi(t,n)}`}},addon:{border:"1px solid",borderColor:Be("inherit","whiteAlpha.50")(e),bg:Be("gray.100","whiteAlpha.300")(e)}}}),zJe=pu(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=E9(e);return{field:{border:"2px solid",borderColor:"transparent",bg:Be("gray.100","whiteAlpha.50")(e),_hover:{bg:Be("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Fi(t,r)},_focusVisible:{bg:"transparent",borderColor:Fi(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Be("gray.100","whiteAlpha.50")(e)}}}),jJe=pu(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=E9(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Fi(t,r),boxShadow:`0px 1px 0px 0px ${Fi(t,r)}`},_focusVisible:{borderColor:Fi(t,n),boxShadow:`0px 1px 0px 0px ${Fi(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),BJe=pu({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),UJe={outline:LJe,filled:zJe,flushed:jJe,unstyled:BJe},Mt=DJe({baseStyle:NJe,sizes:IJe,variants:UJe,defaultProps:{size:"md",variant:"outline"}}),Kq,VJe={...(Kq=Mt.baseStyle)==null?void 0:Kq.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},Qq,Jq,WJe={outline:e=>{var t,n;return(n=(t=Mt.variants)==null?void 0:t.outline(e).field)!=null?n:{}},flushed:e=>{var t,n;return(n=(t=Mt.variants)==null?void 0:t.flushed(e).field)!=null?n:{}},filled:e=>{var t,n;return(n=(t=Mt.variants)==null?void 0:t.filled(e).field)!=null?n:{}},unstyled:(Jq=(Qq=Mt.variants)==null?void 0:Qq.unstyled.field)!=null?Jq:{}},Zq,eG,tG,nG,rG,iG,sG,oG,HJe={xs:(eG=(Zq=Mt.sizes)==null?void 0:Zq.xs.field)!=null?eG:{},sm:(nG=(tG=Mt.sizes)==null?void 0:tG.sm.field)!=null?nG:{},md:(iG=(rG=Mt.sizes)==null?void 0:rG.md.field)!=null?iG:{},lg:(oG=(sG=Mt.sizes)==null?void 0:sG.lg.field)!=null?oG:{}},qJe={baseStyle:VJe,sizes:HJe,variants:WJe,defaultProps:{size:"md",variant:"outline"}},G2=lr("tooltip-bg"),xR=lr("tooltip-fg"),GJe=lr("popper-arrow-bg"),XJe={bg:G2.reference,color:xR.reference,[G2.variable]:"colors.gray.700",[xR.variable]:"colors.whiteAlpha.900",_dark:{[G2.variable]:"colors.gray.300",[xR.variable]:"colors.gray.900"},[GJe.variable]:G2.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},YJe={baseStyle:XJe},{defineMultiStyleConfig:KJe,definePartsStyle:H1}=on(lQe.keys),QJe=e=>{const{colorScheme:t,theme:n,isIndeterminate:r,hasStripe:i}=e,s=Be(Vq(),Vq("1rem","rgba(0,0,0,0.1)"))(e),o=Be(`${t}.500`,`${t}.200`)(e),a=`linear-gradient(
    to right,
    transparent 0%,
    ${Fi(n,o)} 50%,
    transparent 100%
  )`;return{...!r&&i&&s,...r?{bgImage:a}:{bgColor:o}}},JJe={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},ZJe=e=>({bg:Be("gray.100","whiteAlpha.300")(e)}),eZe=e=>({transitionProperty:"common",transitionDuration:"slow",...QJe(e)}),tZe=H1(e=>({label:JJe,filledTrack:eZe(e),track:ZJe(e)})),nZe={xs:H1({track:{h:"1"}}),sm:H1({track:{h:"2"}}),md:H1({track:{h:"3"}}),lg:H1({track:{h:"4"}})},rZe=KJe({sizes:nZe,baseStyle:tZe,defaultProps:{size:"md",colorScheme:"blue"}}),iZe=e=>typeof e=="function";function Di(e,...t){return iZe(e)?e(...t):e}var{definePartsStyle:tE,defineMultiStyleConfig:sZe}=on(QKe.keys),Ev=Ue("checkbox-size"),oZe=e=>{const{colorScheme:t}=e;return{w:Ev.reference,h:Ev.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Be(`${t}.500`,`${t}.200`)(e),borderColor:Be(`${t}.500`,`${t}.200`)(e),color:Be("white","gray.900")(e),_hover:{bg:Be(`${t}.600`,`${t}.300`)(e),borderColor:Be(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:Be("gray.200","transparent")(e),bg:Be("gray.200","whiteAlpha.300")(e),color:Be("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:Be(`${t}.500`,`${t}.200`)(e),borderColor:Be(`${t}.500`,`${t}.200`)(e),color:Be("white","gray.900")(e)},_disabled:{bg:Be("gray.100","whiteAlpha.100")(e),borderColor:Be("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Be("red.500","red.300")(e)}}},aZe={_disabled:{cursor:"not-allowed"}},lZe={userSelect:"none",_disabled:{opacity:.4}},uZe={transitionProperty:"transform",transitionDuration:"normal"},cZe=tE(e=>({icon:uZe,container:aZe,control:Di(oZe,e),label:lZe})),fZe={sm:tE({control:{[Ev.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:tE({control:{[Ev.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:tE({control:{[Ev.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},Ak=sZe({baseStyle:cZe,sizes:fZe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:dZe,definePartsStyle:nE}=on(uQe.keys),hZe=e=>{var t;const n=(t=Di(Ak.baseStyle,e))==null?void 0:t.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},pZe=nE(e=>{var t,n,r,i;return{label:(n=(t=Ak).baseStyle)==null?void 0:n.call(t,e).label,container:(i=(r=Ak).baseStyle)==null?void 0:i.call(r,e).container,control:hZe(e)}}),gZe={md:nE({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:nE({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:nE({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},mZe=dZe({baseStyle:pZe,sizes:gZe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:yZe,definePartsStyle:vZe}=on(cQe.keys),X2=Ue("select-bg"),aG,bZe={...(aG=Mt.baseStyle)==null?void 0:aG.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:X2.reference,[X2.variable]:"colors.white",_dark:{[X2.variable]:"colors.gray.700"},"> option, > optgroup":{bg:X2.reference}},xZe={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},wZe=vZe({field:bZe,icon:xZe}),Y2={paddingInlineEnd:"8"},lG,uG,cG,fG,dG,hG,pG,gG,SZe={lg:{...(lG=Mt.sizes)==null?void 0:lG.lg,field:{...(uG=Mt.sizes)==null?void 0:uG.lg.field,...Y2}},md:{...(cG=Mt.sizes)==null?void 0:cG.md,field:{...(fG=Mt.sizes)==null?void 0:fG.md.field,...Y2}},sm:{...(dG=Mt.sizes)==null?void 0:dG.sm,field:{...(hG=Mt.sizes)==null?void 0:hG.sm.field,...Y2}},xs:{...(pG=Mt.sizes)==null?void 0:pG.xs,field:{...(gG=Mt.sizes)==null?void 0:gG.xs.field,...Y2},icon:{insetEnd:"1"}}},EZe=yZe({baseStyle:wZe,sizes:SZe,variants:Mt.variants,defaultProps:Mt.defaultProps}),wR=Ue("skeleton-start-color"),SR=Ue("skeleton-end-color"),CZe={[wR.variable]:"colors.gray.100",[SR.variable]:"colors.gray.400",_dark:{[wR.variable]:"colors.gray.800",[SR.variable]:"colors.gray.600"},background:wR.reference,borderColor:SR.reference,opacity:.7,borderRadius:"sm"},kZe={baseStyle:CZe},ER=Ue("skip-link-bg"),_Ze={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[ER.variable]:"colors.white",_dark:{[ER.variable]:"colors.gray.700"},bg:ER.reference}},$Ze={baseStyle:_Ze},{defineMultiStyleConfig:AZe,definePartsStyle:jA}=on(fQe.keys),Nb=Ue("slider-thumb-size"),Ib=Ue("slider-track-size"),Dc=Ue("slider-bg"),TZe=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...S9({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},RZe=e=>({...S9({orientation:e.orientation,horizontal:{h:Ib.reference},vertical:{w:Ib.reference}}),overflow:"hidden",borderRadius:"sm",[Dc.variable]:"colors.gray.200",_dark:{[Dc.variable]:"colors.whiteAlpha.200"},_disabled:{[Dc.variable]:"colors.gray.300",_dark:{[Dc.variable]:"colors.whiteAlpha.300"}},bg:Dc.reference}),FZe=e=>{const{orientation:t}=e;return{...S9({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:Nb.reference,h:Nb.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},PZe=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[Dc.variable]:`colors.${t}.500`,_dark:{[Dc.variable]:`colors.${t}.200`},bg:Dc.reference}},OZe=jA(e=>({container:TZe(e),track:RZe(e),thumb:FZe(e),filledTrack:PZe(e)})),MZe=jA({container:{[Nb.variable]:"sizes.4",[Ib.variable]:"sizes.1"}}),DZe=jA({container:{[Nb.variable]:"sizes.3.5",[Ib.variable]:"sizes.1"}}),NZe=jA({container:{[Nb.variable]:"sizes.2.5",[Ib.variable]:"sizes.0.5"}}),IZe={lg:MZe,md:DZe,sm:NZe},LZe=AZe({baseStyle:OZe,sizes:IZe,defaultProps:{size:"md",colorScheme:"blue"}}),zd=lr("spinner-size"),zZe={width:[zd.reference],height:[zd.reference]},jZe={xs:{[zd.variable]:"sizes.3"},sm:{[zd.variable]:"sizes.4"},md:{[zd.variable]:"sizes.6"},lg:{[zd.variable]:"sizes.8"},xl:{[zd.variable]:"sizes.12"}},BZe={baseStyle:zZe,sizes:jZe,defaultProps:{size:"md"}},{defineMultiStyleConfig:UZe,definePartsStyle:Kfe}=on(dQe.keys),VZe={fontWeight:"medium"},WZe={opacity:.8,marginBottom:"2"},HZe={verticalAlign:"baseline",fontWeight:"semibold"},qZe={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},GZe=Kfe({container:{},label:VZe,helpText:WZe,number:HZe,icon:qZe}),XZe={md:Kfe({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},YZe=UZe({baseStyle:GZe,sizes:XZe,defaultProps:{size:"md"}}),CR=Ue("kbd-bg"),KZe={[CR.variable]:"colors.gray.100",_dark:{[CR.variable]:"colors.whiteAlpha.100"},bg:CR.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},QZe={baseStyle:KZe},JZe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},ZZe={baseStyle:JZe},{defineMultiStyleConfig:eet,definePartsStyle:tet}=on(rQe.keys),net={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},ret=tet({icon:net}),iet=eet({baseStyle:ret}),{defineMultiStyleConfig:set,definePartsStyle:oet}=on(iQe.keys),qa=Ue("menu-bg"),kR=Ue("menu-shadow"),aet={[qa.variable]:"#fff",[kR.variable]:"shadows.sm",_dark:{[qa.variable]:"colors.gray.700",[kR.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:qa.reference,boxShadow:kR.reference},uet={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[qa.variable]:"colors.gray.100",_dark:{[qa.variable]:"colors.whiteAlpha.100"}},_active:{[qa.variable]:"colors.gray.200",_dark:{[qa.variable]:"colors.whiteAlpha.200"}},_expanded:{[qa.variable]:"colors.gray.100",_dark:{[qa.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:qa.reference},cet={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},fet={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},det={opacity:.6},het={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},pet={transitionProperty:"common",transitionDuration:"normal"},get=oet({button:pet,list:aet,item:uet,groupTitle:cet,icon:fet,command:det,divider:het}),met=set({baseStyle:get}),{defineMultiStyleConfig:yet,definePartsStyle:qO}=on(sQe.keys),_R=Ue("modal-bg"),$R=Ue("modal-shadow"),vet={bg:"blackAlpha.600",zIndex:"modal"},bet=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},xet=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[_R.variable]:"colors.white",[$R.variable]:"shadows.lg",_dark:{[_R.variable]:"colors.gray.700",[$R.variable]:"shadows.dark-lg"},bg:_R.reference,boxShadow:$R.reference}},wet={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Eet={position:"absolute",top:"2",insetEnd:"3"},Cet=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},ket={px:"6",py:"4"},_et=qO(e=>({overlay:vet,dialogContainer:Di(bet,e),dialog:Di(xet,e),header:wet,closeButton:Eet,body:Di(Cet,e),footer:ket}));function zo(e){return qO(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var $et={xs:zo("xs"),sm:zo("sm"),md:zo("md"),lg:zo("lg"),xl:zo("xl"),"2xl":zo("2xl"),"3xl":zo("3xl"),"4xl":zo("4xl"),"5xl":zo("5xl"),"6xl":zo("6xl"),full:zo("full")},Aet=yet({baseStyle:_et,sizes:$et,defaultProps:{size:"md"}}),{defineMultiStyleConfig:Tet,definePartsStyle:Qfe}=on(oQe.keys),C9=lr("number-input-stepper-width"),Jfe=lr("number-input-input-padding"),Ret=ou(C9).add("0.5rem").toString(),AR=lr("number-input-bg"),TR=lr("number-input-color"),RR=lr("number-input-border-color"),Fet={[C9.variable]:"sizes.6",[Jfe.variable]:Ret},Pet=e=>{var t,n;return(n=(t=Di(Mt.baseStyle,e))==null?void 0:t.field)!=null?n:{}},Oet={width:C9.reference},Met={borderStart:"1px solid",borderStartColor:RR.reference,color:TR.reference,bg:AR.reference,[TR.variable]:"colors.chakra-body-text",[RR.variable]:"colors.chakra-border-color",_dark:{[TR.variable]:"colors.whiteAlpha.800",[RR.variable]:"colors.whiteAlpha.300"},_active:{[AR.variable]:"colors.gray.200",_dark:{[AR.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Det=Qfe(e=>{var t;return{root:Fet,field:(t=Di(Pet,e))!=null?t:{},stepperGroup:Oet,stepper:Met}});function K2(e){var t,n,r;const i=(t=Mt.sizes)==null?void 0:t[e],s={lg:"md",md:"md",sm:"sm",xs:"sm"},o=(r=(n=i.field)==null?void 0:n.fontSize)!=null?r:"md",a=Hfe.fontSizes[o];return Qfe({field:{...i.field,paddingInlineEnd:Jfe.reference,verticalAlign:"top"},stepper:{fontSize:ou(a).multiply(.75).toString(),_first:{borderTopEndRadius:s[e]},_last:{borderBottomEndRadius:s[e],mt:"-1px",borderTopWidth:1}}})}var Net={xs:K2("xs"),sm:K2("sm"),md:K2("md"),lg:K2("lg")},Iet=Tet({baseStyle:Det,sizes:Net,variants:Mt.variants,defaultProps:Mt.defaultProps}),mG,Let={...(mG=Mt.baseStyle)==null?void 0:mG.field,textAlign:"center"},zet={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},yG,vG,jet={outline:e=>{var t,n,r;return(r=(n=Di((t=Mt.variants)==null?void 0:t.outline,e))==null?void 0:n.field)!=null?r:{}},flushed:e=>{var t,n,r;return(r=(n=Di((t=Mt.variants)==null?void 0:t.flushed,e))==null?void 0:n.field)!=null?r:{}},filled:e=>{var t,n,r;return(r=(n=Di((t=Mt.variants)==null?void 0:t.filled,e))==null?void 0:n.field)!=null?r:{}},unstyled:(vG=(yG=Mt.variants)==null?void 0:yG.unstyled.field)!=null?vG:{}},Bet={baseStyle:Let,sizes:zet,variants:jet,defaultProps:Mt.defaultProps},{defineMultiStyleConfig:Uet,definePartsStyle:Vet}=on(aQe.keys),Q2=lr("popper-bg"),Wet=lr("popper-arrow-bg"),bG=lr("popper-arrow-shadow-color"),Het={zIndex:10},qet={[Q2.variable]:"colors.white",bg:Q2.reference,[Wet.variable]:Q2.reference,[bG.variable]:"colors.gray.200",_dark:{[Q2.variable]:"colors.gray.700",[bG.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},Get={px:3,py:2,borderBottomWidth:"1px"},Xet={px:3,py:2},Yet={px:3,py:2,borderTopWidth:"1px"},Ket={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},Qet=Vet({popper:Het,content:qet,header:Get,body:Xet,footer:Yet,closeButton:Ket}),Jet=Uet({baseStyle:Qet}),{definePartsStyle:GO,defineMultiStyleConfig:Zet}=on(JKe.keys),FR=Ue("drawer-bg"),PR=Ue("drawer-box-shadow");function tg(e){return GO(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var ett={bg:"blackAlpha.600",zIndex:"modal"},ttt={display:"flex",zIndex:"modal",justifyContent:"center"},ntt=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[FR.variable]:"colors.white",[PR.variable]:"shadows.lg",_dark:{[FR.variable]:"colors.gray.700",[PR.variable]:"shadows.dark-lg"},bg:FR.reference,boxShadow:PR.reference}},rtt={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},itt={position:"absolute",top:"2",insetEnd:"3"},stt={px:"6",py:"2",flex:"1",overflow:"auto"},ott={px:"6",py:"4"},att=GO(e=>({overlay:ett,dialogContainer:ttt,dialog:Di(ntt,e),header:rtt,closeButton:itt,body:stt,footer:ott})),ltt={xs:tg("xs"),sm:tg("md"),md:tg("lg"),lg:tg("2xl"),xl:tg("4xl"),full:tg("full")},utt=Zet({baseStyle:att,sizes:ltt,defaultProps:{size:"xs"}}),{definePartsStyle:ctt,defineMultiStyleConfig:ftt}=on(ZKe.keys),dtt={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},htt={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},ptt={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},gtt=ctt({preview:dtt,input:htt,textarea:ptt}),mtt=ftt({baseStyle:gtt}),{definePartsStyle:ytt,defineMultiStyleConfig:vtt}=on(eQe.keys),sm=Ue("form-control-color"),btt={marginStart:"1",[sm.variable]:"colors.red.500",_dark:{[sm.variable]:"colors.red.300"},color:sm.reference},xtt={mt:"2",[sm.variable]:"colors.gray.600",_dark:{[sm.variable]:"colors.whiteAlpha.600"},color:sm.reference,lineHeight:"normal",fontSize:"sm"},wtt=ytt({container:{width:"100%",position:"relative"},requiredIndicator:btt,helperText:xtt}),Stt=vtt({baseStyle:wtt}),{definePartsStyle:Ett,defineMultiStyleConfig:Ctt}=on(tQe.keys),om=Ue("form-error-color"),ktt={[om.variable]:"colors.red.500",_dark:{[om.variable]:"colors.red.300"},color:om.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},_tt={marginEnd:"0.5em",[om.variable]:"colors.red.500",_dark:{[om.variable]:"colors.red.300"},color:om.reference},$tt=Ett({text:ktt,icon:_tt}),Att=Ctt({baseStyle:$tt}),Ttt={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},Rtt={baseStyle:Ttt},Ftt={fontFamily:"heading",fontWeight:"bold"},Ptt={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},Ott={baseStyle:Ftt,sizes:Ptt,defaultProps:{size:"xl"}},{defineMultiStyleConfig:Mtt,definePartsStyle:Dtt}=on(KKe.keys),OR=Ue("breadcrumb-link-decor"),Ntt={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:OR.reference,[OR.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[OR.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Itt=Dtt({link:Ntt}),Ltt=Mtt({baseStyle:Itt}),ztt={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},Zfe=e=>{const{colorScheme:t,theme:n}=e;if(t==="gray")return{color:Be("gray.800","whiteAlpha.900")(e),_hover:{bg:Be("gray.100","whiteAlpha.200")(e)},_active:{bg:Be("gray.200","whiteAlpha.300")(e)}};const r=x0(`${t}.200`,.12)(n),i=x0(`${t}.200`,.24)(n);return{color:Be(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:Be(`${t}.50`,r)(e)},_active:{bg:Be(`${t}.100`,i)(e)}}},jtt=e=>{const{colorScheme:t}=e,n=Be("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Di(Zfe,e)}},Btt={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Utt=e=>{var t;const{colorScheme:n}=e;if(n==="gray"){const l=Be("gray.100","whiteAlpha.200")(e);return{bg:l,color:Be("gray.800","whiteAlpha.900")(e),_hover:{bg:Be("gray.200","whiteAlpha.300")(e),_disabled:{bg:l}},_active:{bg:Be("gray.300","whiteAlpha.400")(e)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:s=`${n}.600`,activeBg:o=`${n}.700`}=(t=Btt[n])!=null?t:{},a=Be(r,`${n}.200`)(e);return{bg:a,color:Be(i,"gray.800")(e),_hover:{bg:Be(s,`${n}.300`)(e),_disabled:{bg:a}},_active:{bg:Be(o,`${n}.400`)(e)}}},Vtt=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Be(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Be(`${t}.700`,`${t}.500`)(e)}}},Wtt={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},Htt={ghost:Zfe,outline:jtt,solid:Utt,link:Vtt,unstyled:Wtt},qtt={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},Gtt={baseStyle:ztt,variants:Htt,sizes:qtt,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:vh,defineMultiStyleConfig:Xtt}=on(yQe.keys),Tk=Ue("card-bg"),ku=Ue("card-padding"),ede=Ue("card-shadow"),rE=Ue("card-radius"),tde=Ue("card-border-width","0"),nde=Ue("card-border-color"),Ytt=vh({container:{[Tk.variable]:"colors.chakra-body-bg",backgroundColor:Tk.reference,boxShadow:ede.reference,borderRadius:rE.reference,color:"chakra-body-text",borderWidth:tde.reference,borderColor:nde.reference},body:{padding:ku.reference,flex:"1 1 0%"},header:{padding:ku.reference},footer:{padding:ku.reference}}),Ktt={sm:vh({container:{[rE.variable]:"radii.base",[ku.variable]:"space.3"}}),md:vh({container:{[rE.variable]:"radii.md",[ku.variable]:"space.5"}}),lg:vh({container:{[rE.variable]:"radii.xl",[ku.variable]:"space.7"}})},Qtt={elevated:vh({container:{[ede.variable]:"shadows.base",_dark:{[Tk.variable]:"colors.gray.700"}}}),outline:vh({container:{[tde.variable]:"1px",[nde.variable]:"colors.chakra-border-color"}}),filled:vh({container:{[Tk.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[ku.variable]:0},header:{[ku.variable]:0},footer:{[ku.variable]:0}}},Jtt=Xtt({baseStyle:Ytt,variants:Qtt,sizes:Ktt,defaultProps:{variant:"elevated",size:"md"}}),Cv=lr("close-button-size"),n1=lr("close-button-bg"),Ztt={w:[Cv.reference],h:[Cv.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[n1.variable]:"colors.blackAlpha.100",_dark:{[n1.variable]:"colors.whiteAlpha.100"}},_active:{[n1.variable]:"colors.blackAlpha.200",_dark:{[n1.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:n1.reference},ent={lg:{[Cv.variable]:"sizes.10",fontSize:"md"},md:{[Cv.variable]:"sizes.8",fontSize:"xs"},sm:{[Cv.variable]:"sizes.6",fontSize:"2xs"}},tnt={baseStyle:Ztt,sizes:ent,defaultProps:{size:"md"}},{variants:nnt,defaultProps:rnt}=Sv,int={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Un.bg.reference,color:Un.color.reference,boxShadow:Un.shadow.reference},snt={baseStyle:int,variants:nnt,defaultProps:rnt},ont={w:"100%",mx:"auto",maxW:"prose",px:"4"},ant={baseStyle:ont},lnt={opacity:.6,borderColor:"inherit"},unt={borderStyle:"solid"},cnt={borderStyle:"dashed"},fnt={solid:unt,dashed:cnt},dnt={baseStyle:lnt,variants:fnt,defaultProps:{variant:"solid"}},{definePartsStyle:hnt,defineMultiStyleConfig:pnt}=on(GKe.keys),gnt={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},mnt={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},ynt={pt:"2",px:"4",pb:"5"},vnt={fontSize:"1.25em"},bnt=hnt({container:gnt,button:mnt,panel:ynt,icon:vnt}),xnt=pnt({baseStyle:bnt}),{definePartsStyle:tw,defineMultiStyleConfig:wnt}=on(XKe.keys),Ns=Ue("alert-fg"),zu=Ue("alert-bg"),Snt=tw({container:{bg:zu.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Ns.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Ns.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function k9(e){const{theme:t,colorScheme:n}=e,r=x0(`${n}.200`,.16)(t);return{light:`colors.${n}.100`,dark:r}}var Ent=tw(e=>{const{colorScheme:t}=e,n=k9(e);return{container:{[Ns.variable]:`colors.${t}.600`,[zu.variable]:n.light,_dark:{[Ns.variable]:`colors.${t}.200`,[zu.variable]:n.dark}}}}),Cnt=tw(e=>{const{colorScheme:t}=e,n=k9(e);return{container:{[Ns.variable]:`colors.${t}.600`,[zu.variable]:n.light,_dark:{[Ns.variable]:`colors.${t}.200`,[zu.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Ns.reference}}}),knt=tw(e=>{const{colorScheme:t}=e,n=k9(e);return{container:{[Ns.variable]:`colors.${t}.600`,[zu.variable]:n.light,_dark:{[Ns.variable]:`colors.${t}.200`,[zu.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Ns.reference}}}),_nt=tw(e=>{const{colorScheme:t}=e;return{container:{[Ns.variable]:"colors.white",[zu.variable]:`colors.${t}.600`,_dark:{[Ns.variable]:"colors.gray.900",[zu.variable]:`colors.${t}.200`},color:Ns.reference}}}),$nt={subtle:Ent,"left-accent":Cnt,"top-accent":knt,solid:_nt},Ant=wnt({baseStyle:Snt,variants:$nt,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:rde,defineMultiStyleConfig:Tnt}=on(YKe.keys),am=Ue("avatar-border-color"),kv=Ue("avatar-bg"),Lb=Ue("avatar-font-size"),w0=Ue("avatar-size"),Rnt={borderRadius:"full",border:"0.2em solid",borderColor:am.reference,[am.variable]:"white",_dark:{[am.variable]:"colors.gray.800"}},Fnt={bg:kv.reference,fontSize:Lb.reference,width:w0.reference,height:w0.reference,lineHeight:"1",[kv.variable]:"colors.gray.200",_dark:{[kv.variable]:"colors.whiteAlpha.400"}},Pnt=e=>{const{name:t,theme:n}=e,r=t?IQe({string:t}):"colors.gray.400",i=DQe(r)(n);let s="white";return i||(s="gray.800"),{bg:kv.reference,fontSize:Lb.reference,color:s,borderColor:am.reference,verticalAlign:"top",width:w0.reference,height:w0.reference,"&:not([data-loaded])":{[kv.variable]:r},[am.variable]:"colors.white",_dark:{[am.variable]:"colors.gray.800"}}},Ont={fontSize:Lb.reference,lineHeight:"1"},Mnt=rde(e=>({badge:Di(Rnt,e),excessLabel:Di(Fnt,e),container:Di(Pnt,e),label:Ont}));function mc(e){const t=e!=="100%"?Gfe[e]:void 0;return rde({container:{[w0.variable]:t??e,[Lb.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[w0.variable]:t??e,[Lb.variable]:`calc(${t??e} / 2.5)`}})}var Dnt={"2xs":mc(4),xs:mc(6),sm:mc(8),md:mc(12),lg:mc(16),xl:mc(24),"2xl":mc(32),full:mc("100%")},Nnt=Tnt({baseStyle:Mnt,sizes:Dnt,defaultProps:{size:"md"}}),Int={Accordion:xnt,Alert:Ant,Avatar:Nnt,Badge:Sv,Breadcrumb:Ltt,Button:Gtt,Checkbox:Ak,CloseButton:tnt,Code:snt,Container:ant,Divider:dnt,Drawer:utt,Editable:mtt,Form:Stt,FormError:Att,FormLabel:Rtt,Heading:Ott,Input:Mt,Kbd:QZe,Link:ZZe,List:iet,Menu:met,Modal:Aet,NumberInput:Iet,PinInput:Bet,Popover:Jet,Progress:rZe,Radio:mZe,Select:EZe,Skeleton:kZe,SkipLink:$Ze,Slider:LZe,Spinner:BZe,Stat:YZe,Switch:ZQe,Table:oJe,Tabs:wJe,Tag:MJe,Textarea:qJe,Tooltip:YJe,Card:Jtt,Stepper:qKe},Lnt={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},znt={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},jnt="ltr",Bnt={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},ide={semanticTokens:Lnt,direction:jnt,...VKe,components:Int,styles:znt,config:Bnt};function q1(e){return typeof e=="function"}function Unt(...e){return t=>e.reduce((n,r)=>r(n),t)}var Vnt=e=>function(...n){let r=[...n],i=n[n.length-1];return bKe(i)&&r.length>1?r=r.slice(0,r.length-1):i=e,Unt(...r.map(s=>o=>q1(s)?s(o):Hnt(o,s)))(i)},Wnt=Vnt(ide);function Hnt(...e){return yo({},...e,sde)}function sde(e,t,n,r){if((q1(e)||q1(t))&&Object.prototype.hasOwnProperty.call(r,n))return(...i)=>{const s=q1(e)?e(...i):e,o=q1(t)?t(...i):t;return yo({},s,o,sde)}}function qnt(e,t){const n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}function Gnt(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var Xnt=e=>{const t=new WeakMap;return(r,i,s,o)=>{if(typeof r>"u")return e(r,i,s);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,s,o);return a.set(i,l),l}},ode=Xnt(Gnt);function ade(e,t){const n={};return Object.keys(e).forEach(r=>{const i=e[r];t(i,r,e)&&(n[r]=i)}),n}var lde=e=>ade(e,t=>t!=null);function Ynt(e){return typeof e=="function"}function ude(e,...t){return Ynt(e)?e(...t):e}var Knt=typeof Element<"u",Qnt=typeof Map=="function",Jnt=typeof Set=="function",Znt=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function iE(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!iE(e[r],t[r]))return!1;return!0}var s;if(Qnt&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;for(s=e.entries();!(r=s.next()).done;)if(!iE(r.value[1],t.get(r.value[0])))return!1;return!0}if(Jnt&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(r=s.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(Znt&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(Knt&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!iE(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var ert=function(t,n){try{return iE(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const trt=Zh(ert);function cde(e,t={}){var n;const{styleConfig:r,...i}=t,{theme:s,colorMode:o}=Ife(),a=e?ode(s,`components.${e}`):void 0,l=r||a,u=yo({theme:s,colorMode:o},(n=l==null?void 0:l.defaultProps)!=null?n:{},lde(qnt(i,["children"]))),c=M.useRef({});if(l){const d=yKe(l)(u);trt(c.current,d)||(c.current=d)}return c.current}function Ju(e,t={}){return cde(e,t)}function Zu(e,t={}){return cde(e,t)}var nrt=new Set([...sKe,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),rrt=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function irt(e){return rrt.has(e)||!nrt.has(e)}function srt(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const n={...e};for(const r of t)if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(i in n&&delete n[i],n[i]=r[i]);return n}function fde(e){const t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}var ort=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,art=bue(function(e){return ort.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),lrt=art,urt=function(t){return t!=="theme"},xG=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?lrt:urt},wG=function(t,n,r){var i;if(n){var s=n.shouldForwardProp;i=t.__emotion_forwardProp&&s?function(o){return t.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},crt=!1,frt=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return kue(n,r,i),Tqe(function(){return _ue(n,r,i)}),null},drt=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,s,o;n!==void 0&&(s=n.label,o=n.target);var a=wG(t,n,r),l=a||xG(i),u=!l("as");return function(){var c=arguments,f=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(s!==void 0&&f.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)f.push.apply(f,c);else{f.push(c[0][0]);for(var d=c.length,h=1;h<d;h++)f.push(c[h],c[0][h])}var p=Rue(function(g,m,y){var v=u&&g.as||i,b="",x=[],w=g;if(g.theme==null){w={};for(var C in g)w[C]=g[C];w.theme=M.useContext(yb)}typeof g.className=="string"?b=xqe(m.registered,x,g.className):g.className!=null&&(b=g.className+" ");var S=E8(f.concat(x),m.registered,w);b+=m.key+"-"+S.name,o!==void 0&&(b+=" "+o);var k=u&&a===void 0?xG(v):l,$={};for(var F in g)u&&F==="as"||k(F)&&($[F]=g[F]);return $.className=b,y&&($.ref=y),M.createElement(M.Fragment,null,M.createElement(frt,{cache:m,serialized:S,isStringTag:typeof v=="string"}),M.createElement(v,$))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=f,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return o===void 0&&crt?"NO_COMPONENT_SELECTOR":"."+o}}),p.withComponent=function(g,m){return e(g,ek({},n,m,{shouldForwardProp:wG(p,m,!0)})).apply(void 0,f)},p}},hrt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Rk=drt.bind();hrt.forEach(function(e){Rk[e]=Rk(e)});var SG,prt=(SG=Rk.default)!=null?SG:Rk,grt=({baseStyle:e})=>t=>{const{theme:n,css:r,__css:i,sx:s,...o}=t,a=ade(o,(f,d)=>aKe(d)),l=ude(e,t),u=srt({},i,l,lde(a),s),c=Wfe(u)(t.theme);return r?[c,r]:c};function MR(e,t){const{baseStyle:n,...r}=t??{};r.shouldForwardProp||(r.shouldForwardProp=irt);const i=grt({baseStyle:n}),s=prt(e,r)(i);return wm.forwardRef(function(l,u){const{colorMode:c,forced:f}=ty();return wm.createElement(s,{ref:u,"data-theme":f?c:void 0,...l})})}function mrt(){const e=new Map;return new Proxy(MR,{apply(t,n,r){return MR(...r)},get(t,n){return e.has(n)||e.set(n,MR(n)),e.get(n)}})}var je=mrt();function Ve(e){return M.forwardRef(e)}function yrt(e={}){const{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=e,i=M.createContext(void 0);i.displayName=r;function s(){var o;const a=M.useContext(i);if(!a&&t){const l=new Error(n);throw l.name="ContextError",(o=Error.captureStackTrace)==null||o.call(Error,l,s),l}return a}return[i.Provider,s,i]}function vrt(e){const{cssVarsRoot:t,theme:n,children:r}=e,i=M.useMemo(()=>nKe(n),[n]);return T.jsxs(Pqe,{theme:i,children:[T.jsx(brt,{root:t}),r]})}function brt({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return T.jsx(xA,{styles:n=>({[t]:n.__cssVars})})}yrt({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function xrt(){const{colorMode:e}=ty();return T.jsx(xA,{styles:t=>{const n=ode(t,"styles.global"),r=ude(n,{theme:t,colorMode:e});return r?Wfe(r)(t):void 0}})}var _9=M.createContext({getDocument(){return document},getWindow(){return window}});_9.displayName="EnvironmentContext";function wrt({defer:e}={}){const[,t]=M.useReducer(n=>n+1,0);return d0(()=>{e&&t()},[e]),M.useContext(_9)}function dde(e){const{children:t,environment:n,disabled:r}=e,i=M.useRef(null),s=M.useMemo(()=>n||{getDocument:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument)!=null?l:document},getWindow:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument.defaultView)!=null?l:window}},[n]),o=!r||!n;return T.jsxs(_9.Provider,{value:s,children:[t,o&&T.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}dde.displayName="EnvironmentProvider";var Srt=e=>{const{children:t,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:s=!0,theme:o={},environment:a,cssVarsRoot:l,disableEnvironment:u,disableGlobalStyle:c}=e,f=T.jsx(dde,{environment:a,disabled:u,children:t});return T.jsx(vrt,{theme:o,cssVarsRoot:l,children:T.jsxs(Nfe,{colorModeManager:n,options:o.config,children:[s?T.jsx(Nqe,{scope:i}):T.jsx(Dqe,{}),!c&&T.jsx(xrt,{}),r?T.jsx(Oue,{zIndex:r,children:f}):f]})})},Ert=(e,t)=>e.find(n=>n.id===t);function EG(e,t){const n=hde(e,t),r=n?e[n].findIndex(i=>i.id===t):-1;return{position:n,index:r}}function hde(e,t){for(const[n,r]of Object.entries(e))if(Ert(r,t))return n}function Crt(e){const t=e.includes("right"),n=e.includes("left");let r="center";return t&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function krt(e){const n=e==="top"||e==="bottom"?"0 auto":void 0,r=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,s=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",o=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:i,right:s,left:o}}function sE(e,t=[]){const n=M.useRef(e);return M.useEffect(()=>{n.current=e}),M.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},t)}function _rt(e,t){const n=sE(e);M.useEffect(()=>{if(t==null)return;let r=null;return r=window.setTimeout(()=>{n()},t),()=>{r&&window.clearTimeout(r)}},[t,n])}function CG(e,t){const n=M.useRef(!1),r=M.useRef(!1);M.useEffect(()=>{if(n.current&&r.current)return e();r.current=!0},t),M.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const pde=M.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),BA=M.createContext({}),nw=M.createContext(null),UA=typeof document<"u",$9=UA?M.useLayoutEffect:M.useEffect,gde=M.createContext({strict:!1}),A9=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),$rt="framerAppearId",mde="data-"+A9($rt);function Art(e,t,n,r){const{visualElement:i}=M.useContext(BA),s=M.useContext(gde),o=M.useContext(nw),a=M.useContext(pde).reducedMotion,l=M.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;M.useInsertionEffect(()=>{u&&u.update(n,o)});const c=M.useRef(!!(n[mde]&&!window.HandoffComplete));return $9(()=>{u&&(u.render(),c.current&&u.animationState&&u.animationState.animateChanges())}),M.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}function Dg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Trt(e,t,n){return M.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Dg(n)&&(n.current=r))},[t])}function zb(e){return typeof e=="string"||Array.isArray(e)}function VA(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const T9=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],R9=["initial",...T9];function WA(e){return VA(e.animate)||R9.some(t=>zb(e[t]))}function yde(e){return!!(WA(e)||e.variants)}function Rrt(e,t){if(WA(e)){const{initial:n,animate:r}=e;return{initial:n===!1||zb(n)?n:void 0,animate:zb(r)?r:void 0}}return e.inherit!==!1?t:{}}function Frt(e){const{initial:t,animate:n}=Rrt(e,M.useContext(BA));return M.useMemo(()=>({initial:t,animate:n}),[kG(t),kG(n)])}function kG(e){return Array.isArray(e)?e.join(" "):e}const _G={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jb={};for(const e in _G)jb[e]={isEnabled:t=>_G[e].some(n=>!!t[n])};function Prt(e){for(const t in e)jb[t]={...jb[t],...e[t]}}const F9=M.createContext({}),vde=M.createContext({}),Ort=Symbol.for("motionComponentSymbol");function Mrt({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&Prt(e);function s(a,l){let u;const c={...M.useContext(pde),...a,layoutId:Drt(a)},{isStatic:f}=c,d=Frt(a),h=r(a,f);if(!f&&UA){d.visualElement=Art(i,h,c,t);const p=M.useContext(vde),g=M.useContext(gde).strict;d.visualElement&&(u=d.visualElement.loadFeatures(c,g,e,p))}return M.createElement(BA.Provider,{value:d},u&&d.visualElement?M.createElement(u,{visualElement:d.visualElement,...c}):null,n(i,a,Trt(h,d.visualElement,l),h,f,d.visualElement))}const o=M.forwardRef(s);return o[Ort]=i,o}function Drt({layoutId:e}){const t=M.useContext(F9).id;return t&&e!==void 0?t+"-"+e:e}function Nrt(e){function t(r,i={}){return Mrt(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const Irt=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function P9(e){return typeof e!="string"||e.includes("-")?!1:!!(Irt.indexOf(e)>-1||/[A-Z]/.test(e))}const Fk={};function Lrt(e){Object.assign(Fk,e)}const rw=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ep=new Set(rw);function bde(e,{layout:t,layoutId:n}){return Ep.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Fk[e]||e==="opacity")}const gs=e=>!!(e&&e.getVelocity),zrt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jrt=rw.length;function Brt(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<jrt;o++){const a=rw[o];if(e[a]!==void 0){const l=zrt[a]||a;s+=`${l}(${e[a]}) `}}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(e,r?"":s):n&&r&&(s="none"),s}const xde=e=>t=>typeof t=="string"&&t.startsWith(e),wde=xde("--"),XO=xde("var(--"),Urt=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Vrt=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Df=(e,t,n)=>Math.min(Math.max(n,e),t),Cp={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},_v={...Cp,transform:e=>Df(0,1,e)},J2={...Cp,default:1},$v=e=>Math.round(e*1e5)/1e5,HA=/(-)?([\d]*\.?[\d])+/g,Sde=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Wrt=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function iw(e){return typeof e=="string"}const sw=e=>({test:t=>iw(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Sc=sw("deg"),xl=sw("%"),He=sw("px"),Hrt=sw("vh"),qrt=sw("vw"),$G={...xl,parse:e=>xl.parse(e)/100,transform:e=>xl.transform(e*100)},AG={...Cp,transform:Math.round},Ede={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,size:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,rotate:Sc,rotateX:Sc,rotateY:Sc,rotateZ:Sc,scale:J2,scaleX:J2,scaleY:J2,scaleZ:J2,skew:Sc,skewX:Sc,skewY:Sc,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:_v,originX:$G,originY:$G,originZ:He,zIndex:AG,fillOpacity:_v,strokeOpacity:_v,numOctaves:AG};function O9(e,t,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=e;let l=!1,u=!1,c=!0;for(const f in t){const d=t[f];if(wde(f)){s[f]=d;continue}const h=Ede[f],p=Vrt(d,h);if(Ep.has(f)){if(l=!0,o[f]=p,!c)continue;d!==(h.default||0)&&(c=!1)}else f.startsWith("origin")?(u=!0,a[f]=p):i[f]=p}if(t.transform||(l||r?i.transform=Brt(e.transform,n,c,r):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:d="50%",originZ:h=0}=a;i.transformOrigin=`${f} ${d} ${h}`}}const M9=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Cde(e,t,n){for(const r in t)!gs(t[r])&&!bde(r,n)&&(e[r]=t[r])}function Grt({transformTemplate:e},t,n){return M.useMemo(()=>{const r=M9();return O9(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function Xrt(e,t,n){const r=e.style||{},i={};return Cde(i,r,e),Object.assign(i,Grt(e,t,n)),e.transformValues?e.transformValues(i):i}function Yrt(e,t,n){const r={},i=Xrt(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const Krt=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pk(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Krt.has(e)}let kde=e=>!Pk(e);function Qrt(e){e&&(kde=t=>t.startsWith("on")?!Pk(t):e(t))}try{Qrt(require("@emotion/is-prop-valid").default)}catch{}function Jrt(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(kde(i)||n===!0&&Pk(i)||!t&&!Pk(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function TG(e,t,n){return typeof e=="string"?e:He.transform(t+n*e)}function Zrt(e,t,n){const r=TG(t,e.x,e.width),i=TG(n,e.y,e.height);return`${r} ${i}`}const eit={offset:"stroke-dashoffset",array:"stroke-dasharray"},tit={offset:"strokeDashoffset",array:"strokeDasharray"};function nit(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?eit:tit;e[s.offset]=He.transform(-r);const o=He.transform(t),a=He.transform(n);e[s.array]=`${o} ${a}`}function D9(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,f,d){if(O9(e,u,c,d),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:g}=e;h.transform&&(g&&(p.transform=h.transform),delete h.transform),g&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=Zrt(g,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&nit(h,o,a,l,!1)}const _de=()=>({...M9(),attrs:{}}),N9=e=>typeof e=="string"&&e.toLowerCase()==="svg";function rit(e,t,n,r){const i=M.useMemo(()=>{const s=_de();return D9(s,t,{enableHardwareAcceleration:!1},N9(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};Cde(s,e.style,e),i.style={...s,...i.style}}return i}function iit(e=!1){return(n,r,i,{latestValues:s},o)=>{const l=(P9(n)?rit:Yrt)(r,s,o,n),c={...Jrt(r,typeof n=="string",e),...l,ref:i},{children:f}=r,d=M.useMemo(()=>gs(f)?f.get():f,[f]);return M.createElement(n,{...c,children:d})}}function $de(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const Ade=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Tde(e,t,n,r){$de(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(Ade.has(i)?i:A9(i),t.attrs[i])}function I9(e,t){const{style:n}=e,r={};for(const i in n)(gs(n[i])||t.style&&gs(t.style[i])||bde(i,e))&&(r[i]=n[i]);return r}function Rde(e,t){const n=I9(e,t);for(const r in e)if(gs(e[r])||gs(t[r])){const i=rw.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function L9(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function Fde(e){const t=M.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ok=e=>Array.isArray(e),sit=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),oit=e=>Ok(e)?e[e.length-1]||0:e;function oE(e){const t=gs(e)?e.get():e;return sit(t)?t.toValue():t}function ait({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,s){const o={latestValues:lit(r,i,s,e),renderState:t()};return n&&(o.mount=a=>n(r,a,o)),o}const Pde=e=>(t,n)=>{const r=M.useContext(BA),i=M.useContext(nw),s=()=>ait(e,t,r,i);return n?s():Fde(s)};function lit(e,t,n,r){const i={},s=r(e,{});for(const d in s)i[d]=oE(s[d]);let{initial:o,animate:a}=e;const l=WA(e),u=yde(e);t&&u&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const f=c?a:o;return f&&typeof f!="boolean"&&!VA(f)&&(Array.isArray(f)?f:[f]).forEach(h=>{const p=L9(e,h);if(!p)return;const{transitionEnd:g,transition:m,...y}=p;for(const v in y){let b=y[v];if(Array.isArray(b)){const x=c?b.length-1:0;b=b[x]}b!==null&&(i[v]=b)}for(const v in g)i[v]=g[v]}),i}const Bn=e=>e;class RG{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function uit(e){let t=new RG,n=new RG,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const f=c&&i,d=f?t:n;return u&&o.add(l),d.add(l)&&f&&i&&(r=t.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const c=t.order[u];c(l),o.has(c)&&(a.schedule(c),e())}i=!1,s&&(s=!1,a.process(l))}};return a}const Z2=["prepare","read","update","preRender","render","postRender"],cit=40;function fit(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Z2.reduce((f,d)=>(f[d]=uit(()=>n=!0),f),{}),o=f=>s[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,cit),1),i.timestamp=f,i.isProcessing=!0,Z2.forEach(o),i.isProcessing=!1,n&&t&&(r=!1,e(a))},l=()=>{n=!0,r=!0,i.isProcessing||e(a)};return{schedule:Z2.reduce((f,d)=>{const h=s[d];return f[d]=(p,g=!1,m=!1)=>(n||l(),h.schedule(p,g,m)),f},{}),cancel:f=>Z2.forEach(d=>s[d].cancel(f)),state:i,steps:s}}const{schedule:rn,cancel:ju,state:Zr,steps:DR}=fit(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bn,!0),dit={useVisualState:Pde({scrapeMotionValuesFromProps:Rde,createRenderState:_de,onMount:(e,t,{renderState:n,latestValues:r})=>{rn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),rn.render(()=>{D9(n,r,{enableHardwareAcceleration:!1},N9(t.tagName),e.transformTemplate),Tde(t,n)})}})},hit={useVisualState:Pde({scrapeMotionValuesFromProps:I9,createRenderState:M9})};function pit(e,{forwardMotionProps:t=!1},n,r){return{...P9(e)?dit:hit,preloadedFeatures:n,useRender:iit(t),createVisualElement:r,Component:e}}function gu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Ode=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function qA(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const git=e=>t=>Ode(t)&&e(t,qA(t));function _u(e,t,n,r){return gu(e,t,git(n),r)}const mit=(e,t)=>n=>t(e(n)),gf=(...e)=>e.reduce(mit);function Mde(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const FG=Mde("dragHorizontal"),PG=Mde("dragVertical");function Dde(e){let t=!1;if(e==="y")t=PG();else if(e==="x")t=FG();else{const n=FG(),r=PG();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function Nde(){const e=Dde(!0);return e?(e(),!1):!0}class td{constructor(t){this.isMounted=!1,this.node=t}update(){}}function OG(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||Nde())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&rn.update(()=>a[r](s,o))};return _u(e.current,n,i,{passive:!e.getProps()[r]})}class yit extends td{mount(){this.unmount=gf(OG(this.node,!0),OG(this.node,!1))}unmount(){}}class vit extends td{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gf(gu(this.node.current,"focus",()=>this.onFocus()),gu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Ide=(e,t)=>t?e===t?!0:Ide(e,t.parentElement):!1;function NR(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,qA(n))}class bit extends td{constructor(){super(...arguments),this.removeStartListeners=Bn,this.removeEndListeners=Bn,this.removeAccessibleListeners=Bn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=_u(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:f}=this.node.getProps();rn.update(()=>{!f&&!Ide(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=_u(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=gf(s,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||NR("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&rn.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=gu(this.node.current,"keyup",o),NR("down",(a,l)=>{this.startPress(a,l)})},n=gu(this.node.current,"keydown",t),r=()=>{this.isPressing&&NR("cancel",(s,o)=>this.cancelPress(s,o))},i=gu(this.node.current,"blur",r);this.removeAccessibleListeners=gf(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&rn.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Nde()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&rn.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=_u(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=gu(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=gf(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const YO=new WeakMap,IR=new WeakMap,xit=e=>{const t=YO.get(e.target);t&&t(e)},wit=e=>{e.forEach(xit)};function Sit({root:e,...t}){const n=e||document;IR.has(n)||IR.set(n,{});const r=IR.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(wit,{root:e,...t})),r[i]}function Eit(e,t,n){const r=Sit(t);return YO.set(e,n),r.observe(e),()=>{YO.delete(e),r.unobserve(e)}}const Cit={some:0,all:1};class kit extends td{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Cit[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=u?c:f;d&&d(l)};return Eit(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(_it(t,n))&&this.startObserver()}unmount(){}}function _it({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const $it={inView:{Feature:kit},tap:{Feature:bit},focus:{Feature:vit},hover:{Feature:yit}};function Lde(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Ait(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function Tit(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function GA(e,t,n){const r=e.getProps();return L9(r,t,n!==void 0?n:r.custom,Ait(e),Tit(e))}let Mk=Bn;const bh=e=>e*1e3,$u=e=>e/1e3,Rit={current:!1},zde=e=>Array.isArray(e)&&typeof e[0]=="number";function jde(e){return!!(!e||typeof e=="string"&&Bde[e]||zde(e)||Array.isArray(e)&&e.every(jde))}const G1=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Bde={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:G1([0,.65,.55,1]),circOut:G1([.55,0,1,.45]),backIn:G1([.31,.01,.66,-.59]),backOut:G1([.33,1.53,.69,.99])};function Ude(e){if(e)return zde(e)?G1(e):Array.isArray(e)?e.map(Ude):Bde[e]}function Fit(e,t,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=Ude(a);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function Pit(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const Vde=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Oit=1e-7,Mit=12;function Dit(e,t,n,r,i){let s,o,a=0;do o=t+(n-t)/2,s=Vde(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>Oit&&++a<Mit);return o}function ow(e,t,n,r){if(e===t&&n===r)return Bn;const i=s=>Dit(s,0,1,e,n);return s=>s===0||s===1?s:Vde(i(s),t,r)}const Nit=ow(.42,0,1,1),Iit=ow(0,0,.58,1),Wde=ow(.42,0,.58,1),Lit=e=>Array.isArray(e)&&typeof e[0]!="number",Hde=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,qde=e=>t=>1-e(1-t),z9=e=>1-Math.sin(Math.acos(e)),Gde=qde(z9),zit=Hde(z9),Xde=ow(.33,1.53,.69,.99),j9=qde(Xde),jit=Hde(j9),Bit=e=>(e*=2)<1?.5*j9(e):.5*(2-Math.pow(2,-10*(e-1))),MG={linear:Bn,easeIn:Nit,easeInOut:Wde,easeOut:Iit,circIn:z9,circInOut:zit,circOut:Gde,backIn:j9,backInOut:jit,backOut:Xde,anticipate:Bit},DG=e=>{if(Array.isArray(e)){Mk(e.length===4);const[t,n,r,i]=e;return ow(t,n,r,i)}else if(typeof e=="string")return Mk(MG[e]!==void 0),MG[e];return e},B9=(e,t)=>n=>!!(iw(n)&&Wrt.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Yde=(e,t,n)=>r=>{if(!iw(r))return r;const[i,s,o,a]=r.match(HA);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Uit=e=>Df(0,255,e),LR={...Cp,transform:e=>Math.round(Uit(e))},Yd={test:B9("rgb","red"),parse:Yde("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+LR.transform(e)+", "+LR.transform(t)+", "+LR.transform(n)+", "+$v(_v.transform(r))+")"};function Vit(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const KO={test:B9("#"),parse:Vit,transform:Yd.transform},Ng={test:B9("hsl","hue"),parse:Yde("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+xl.transform($v(t))+", "+xl.transform($v(n))+", "+$v(_v.transform(r))+")"},wi={test:e=>Yd.test(e)||KO.test(e)||Ng.test(e),parse:e=>Yd.test(e)?Yd.parse(e):Ng.test(e)?Ng.parse(e):KO.parse(e),transform:e=>iw(e)?e:e.hasOwnProperty("red")?Yd.transform(e):Ng.transform(e)},Cn=(e,t,n)=>-n*e+n*t+e;function zR(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Wit({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=zR(l,a,e+1/3),s=zR(l,a,e),o=zR(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const jR=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Hit=[KO,Yd,Ng],qit=e=>Hit.find(t=>t.test(e));function NG(e){const t=qit(e);let n=t.parse(e);return t===Ng&&(n=Wit(n)),n}const Kde=(e,t)=>{const n=NG(e),r=NG(t),i={...n};return s=>(i.red=jR(n.red,r.red,s),i.green=jR(n.green,r.green,s),i.blue=jR(n.blue,r.blue,s),i.alpha=Cn(n.alpha,r.alpha,s),Yd.transform(i))};function Git(e){var t,n;return isNaN(e)&&iw(e)&&(((t=e.match(HA))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Sde))===null||n===void 0?void 0:n.length)||0)>0}const Qde={regex:Urt,countKey:"Vars",token:"${v}",parse:Bn},Jde={regex:Sde,countKey:"Colors",token:"${c}",parse:wi.parse},Zde={regex:HA,countKey:"Numbers",token:"${n}",parse:Cp.parse};function BR(e,{regex:t,countKey:n,token:r,parse:i}){const s=e.tokenised.match(t);s&&(e["num"+n]=s.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...s.map(i)))}function Dk(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&BR(n,Qde),BR(n,Jde),BR(n,Zde),n}function ehe(e){return Dk(e).values}function the(e){const{values:t,numColors:n,numVars:r,tokenised:i}=Dk(e),s=t.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(Qde.token,o[l]):l<r+n?a=a.replace(Jde.token,wi.transform(o[l])):a=a.replace(Zde.token,$v(o[l]));return a}}const Xit=e=>typeof e=="number"?0:e;function Yit(e){const t=ehe(e);return the(e)(t.map(Xit))}const Nf={test:Git,parse:ehe,createTransformer:the,getAnimatableNone:Yit},nhe=(e,t)=>n=>`${n>0?t:e}`;function rhe(e,t){return typeof e=="number"?n=>Cn(e,t,n):wi.test(e)?Kde(e,t):e.startsWith("var(")?nhe(e,t):she(e,t)}const ihe=(e,t)=>{const n=[...e],r=n.length,i=e.map((s,o)=>rhe(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},Kit=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=rhe(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},she=(e,t)=>{const n=Nf.createTransformer(t),r=Dk(e),i=Dk(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?gf(ihe(r.values,i.values),n):nhe(e,t)},Bb=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},IG=(e,t)=>n=>Cn(e,t,n);function Qit(e){return typeof e=="number"?IG:typeof e=="string"?wi.test(e)?Kde:she:Array.isArray(e)?ihe:typeof e=="object"?Kit:IG}function Jit(e,t,n){const r=[],i=n||Qit(e[0]),s=e.length-1;for(let o=0;o<s;o++){let a=i(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Bn:t;a=gf(l,a)}r.push(a)}return r}function ohe(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(Mk(s===t.length),s===1)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Jit(t,r,i),a=o.length,l=u=>{let c=0;if(a>1)for(;c<e.length-2&&!(u<e[c+1]);c++);const f=Bb(e[c],e[c+1],u);return o[c](f)};return n?u=>l(Df(e[0],e[s-1],u)):l}function Zit(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Bb(0,t,r);e.push(Cn(n,1,i))}}function est(e){const t=[0];return Zit(t,e.length-1),t}function tst(e,t){return e.map(n=>n*t)}function nst(e,t){return e.map(()=>t||Wde).splice(0,e.length-1)}function Nk({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=Lit(r)?r.map(DG):DG(r),s={done:!1,value:t[0]},o=tst(n&&n.length===t.length?n:est(t),e),a=ohe(o,t,{ease:Array.isArray(i)?i:nst(t,i)});return{calculatedDuration:e,next:l=>(s.value=a(l),s.done=l>=e,s)}}function ahe(e,t){return t?e*(1e3/t):0}const rst=5;function lhe(e,t,n){const r=Math.max(t-rst,0);return ahe(n-e(r),t-r)}const UR=.001,ist=.01,sst=10,ost=.05,ast=1;function lst({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,s,o=1-t;o=Df(ost,ast,o),e=Df(ist,sst,$u(e)),o<1?(i=u=>{const c=u*o,f=c*e,d=c-n,h=QO(u,o),p=Math.exp(-f);return UR-d/h*p},s=u=>{const f=u*o*e,d=f*n+n,h=Math.pow(o,2)*Math.pow(u,2)*e,p=Math.exp(-f),g=QO(Math.pow(u,2),o);return(-i(u)+UR>0?-1:1)*((d-h)*p)/g}):(i=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-UR+c*f},s=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=cst(i,s,a);if(e=bh(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const ust=12;function cst(e,t,n){let r=n;for(let i=1;i<ust;i++)r=r-e(r)/t(r);return r}function QO(e,t){return e*Math.sqrt(1-t*t)}const fst=["duration","bounce"],dst=["stiffness","damping","mass"];function LG(e,t){return t.some(n=>e[n]!==void 0)}function hst(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!LG(e,dst)&&LG(e,fst)){const n=lst(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function uhe({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],s=e[e.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:f,isResolvedFromDuration:d}=hst({...r,velocity:-$u(r.velocity||0)}),h=f||0,p=l/(2*Math.sqrt(a*u)),g=s-i,m=$u(Math.sqrt(a/u)),y=Math.abs(g)<5;n||(n=y?.01:2),t||(t=y?.005:.5);let v;if(p<1){const b=QO(m,p);v=x=>{const w=Math.exp(-p*m*x);return s-w*((h+p*m*g)/b*Math.sin(b*x)+g*Math.cos(b*x))}}else if(p===1)v=b=>s-Math.exp(-m*b)*(g+(h+m*g)*b);else{const b=m*Math.sqrt(p*p-1);v=x=>{const w=Math.exp(-p*m*x),C=Math.min(b*x,300);return s-w*((h+p*m*g)*Math.sinh(C)+b*g*Math.cosh(C))/b}}return{calculatedDuration:d&&c||null,next:b=>{const x=v(b);if(d)o.done=b>=c;else{let w=h;b!==0&&(p<1?w=lhe(v,b,x):w=0);const C=Math.abs(w)<=n,S=Math.abs(s-x)<=t;o.done=C&&S}return o.value=o.done?s:x,o}}}function zG({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],d={done:!1,value:f},h=k=>a!==void 0&&k<a||l!==void 0&&k>l,p=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let g=n*t;const m=f+g,y=o===void 0?m:o(m);y!==m&&(g=y-f);const v=k=>-g*Math.exp(-k/r),b=k=>y+v(k),x=k=>{const $=v(k),F=b(k);d.done=Math.abs($)<=u,d.value=d.done?y:F};let w,C;const S=k=>{h(d.value)&&(w=k,C=uhe({keyframes:[d.value,p(d.value)],velocity:lhe(b,k,d.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:k=>{let $=!1;return!C&&w===void 0&&($=!0,x(k),S(k)),w!==void 0&&k>w?C.next(k-w):(!$&&x(k),d)}}}const pst=e=>{const t=({timestamp:n})=>e(n);return{start:()=>rn.update(t,!0),stop:()=>ju(t),now:()=>Zr.isProcessing?Zr.timestamp:performance.now()}},jG=2e4;function BG(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<jG;)t+=n,r=e.next(t);return t>=jG?1/0:t}const gst={decay:zG,inertia:zG,tween:Nk,keyframes:Nk,spring:uhe};function Ik({autoplay:e=!0,delay:t=0,driver:n=pst,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:f,...d}){let h=1,p=!1,g,m;const y=()=>{m=new Promise(K=>{g=K})};y();let v;const b=gst[i]||Nk;let x;b!==Nk&&typeof r[0]!="number"&&(x=ohe([0,100],r,{clamp:!1}),r=[0,100]);const w=b({...d,keyframes:r});let C;a==="mirror"&&(C=b({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let S="idle",k=null,$=null,F=null;w.calculatedDuration===null&&s&&(w.calculatedDuration=BG(w));const{calculatedDuration:O}=w;let B=1/0,D=1/0;O!==null&&(B=O+o,D=B*(s+1)-o);let N=0;const A=K=>{if($===null)return;h>0&&($=Math.min($,K)),h<0&&($=Math.min(K-D/h,$)),k!==null?N=k:N=Math.round(K-$)*h;const pe=N-t*(h>=0?1:-1),se=h>=0?pe<0:pe>D;N=Math.max(pe,0),S==="finished"&&k===null&&(N=D);let _e=N,Ze=w;if(s){const be=Math.min(N,D)/B;let Ne=Math.floor(be),We=be%1;!We&&be>=1&&(We=1),We===1&&Ne--,Ne=Math.min(Ne,s+1),!!(Ne%2)&&(a==="reverse"?(We=1-We,o&&(We-=o/B)):a==="mirror"&&(Ze=C)),_e=Df(0,1,We)*B}const Ct=se?{done:!1,value:r[0]}:Ze.next(_e);x&&(Ct.value=x(Ct.value));let{done:Nn}=Ct;!se&&O!==null&&(Nn=h>=0?N>=D:N<=0);const ur=k===null&&(S==="finished"||S==="running"&&Nn);return f&&f(Ct.value),ur&&z(),Ct},P=()=>{v&&v.stop(),v=void 0},j=()=>{S="idle",P(),g(),y(),$=F=null},z=()=>{S="finished",c&&c(),P(),g()},U=()=>{if(p)return;v||(v=n(A));const K=v.now();l&&l(),k!==null?$=K-k:(!$||S==="finished")&&($=K),S==="finished"&&y(),F=$,k=null,S="running",v.start()};e&&U();const X={then(K,pe){return m.then(K,pe)},get time(){return $u(N)},set time(K){K=bh(K),N=K,k!==null||!v||h===0?k=K:$=v.now()-K/h},get duration(){const K=w.calculatedDuration===null?BG(w):w.calculatedDuration;return $u(K)},get speed(){return h},set speed(K){K===h||!v||(h=K,X.time=$u(N))},get state(){return S},play:U,pause:()=>{S="paused",k=N},stop:()=>{p=!0,S!=="idle"&&(S="idle",u&&u(),j())},cancel:()=>{F!==null&&A(F),j()},complete:()=>{S="finished"},sample:K=>($=0,A(K))};return X}function mst(e){let t;return()=>(t===void 0&&(t=e()),t)}const yst=mst(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),vst=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),eS=10,bst=2e4,xst=(e,t)=>t.type==="spring"||e==="backgroundColor"||!jde(t.ease);function wst(e,t,{onUpdate:n,onComplete:r,...i}){if(!(yst()&&vst.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const c=()=>{l=new Promise(b=>{a=b})};c();let{keyframes:f,duration:d=300,ease:h,times:p}=i;if(xst(t,i)){const b=Ik({...i,repeat:0,delay:0});let x={done:!1,value:f[0]};const w=[];let C=0;for(;!x.done&&C<bst;)x=b.sample(C),w.push(x.value),C+=eS;p=void 0,f=w,d=C-eS,h="linear"}const g=Fit(e.owner.current,t,f,{...i,duration:d,ease:h,times:p}),m=()=>{u=!1,g.cancel()},y=()=>{u=!0,rn.update(m),a(),c()};return g.onfinish=()=>{u||(e.set(Pit(f,i)),r&&r(),y())},{then(b,x){return l.then(b,x)},attachTimeline(b){return g.timeline=b,g.onfinish=null,Bn},get time(){return $u(g.currentTime||0)},set time(b){g.currentTime=bh(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return $u(d)},play:()=>{o||(g.play(),ju(m))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const x=Ik({...i,autoplay:!1});e.setWithVelocity(x.sample(b-eS).value,x.sample(b).value,eS)}y()},complete:()=>{u||g.finish()},cancel:y}}function Sst({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Bn,pause:Bn,stop:Bn,then:s=>(s(),Promise.resolve()),cancel:Bn,complete:Bn});return t?Ik({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const Est={type:"spring",stiffness:500,damping:25,restSpeed:10},Cst=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),kst={type:"keyframes",duration:.8},_st={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$st=(e,{keyframes:t})=>t.length>2?kst:Ep.has(e)?e.startsWith("scale")?Cst(t[1]):Est:_st,JO=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Nf.test(t)||t==="0")&&!t.startsWith("url(")),Ast=new Set(["brightness","contrast","saturate","opacity"]);function Tst(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(HA)||[];if(!r)return e;const i=n.replace(r,"");let s=Ast.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Rst=/([a-z-]*)\(.*?\)/g,ZO={...Nf,getAnimatableNone:e=>{const t=e.match(Rst);return t?t.map(Tst).join(" "):e}},Fst={...Ede,color:wi,backgroundColor:wi,outlineColor:wi,fill:wi,stroke:wi,borderColor:wi,borderTopColor:wi,borderRightColor:wi,borderBottomColor:wi,borderLeftColor:wi,filter:ZO,WebkitFilter:ZO},U9=e=>Fst[e];function che(e,t){let n=U9(e);return n!==ZO&&(n=Nf),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const fhe=e=>/^0[^.\s]+$/.test(e);function Pst(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||fhe(e)}function Ost(e,t,n,r){const i=JO(t,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:e.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),Pst(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];s[c]=che(t,a)}return s}function Mst({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function V9(e,t){return e[t]||e.default||e}const Dst={skipAnimations:!1},W9=(e,t,n,r={})=>i=>{const s=V9(r,e)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-bh(o);const l=Ost(t,e,n,s),u=l[0],c=l[l.length-1],f=JO(e,u),d=JO(e,c);let h={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:p=>{t.set(p),s.onUpdate&&s.onUpdate(p)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(Mst(s)||(h={...h,...$st(e,h)}),h.duration&&(h.duration=bh(h.duration)),h.repeatDelay&&(h.repeatDelay=bh(h.repeatDelay)),!f||!d||Rit.current||s.type===!1||Dst.skipAnimations)return Sst(h);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=wst(t,e,h);if(p)return p}return Ik(h)};function Lk(e){return!!(gs(e)&&e.add)}const dhe=e=>/^\-?\d*\.?\d+$/.test(e);function H9(e,t){e.indexOf(t)===-1&&e.push(t)}function q9(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class G9{constructor(){this.subscriptions=[]}add(t){return H9(this.subscriptions,t),()=>q9(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Nst=e=>!isNaN(parseFloat(e));class Ist{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Zr;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,rn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>rn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Nst(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new G9);const r=this.events[t].add(n);return t==="change"?()=>{r(),rn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?ahe(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function S0(e,t){return new Ist(e,t)}const hhe=e=>t=>t.test(e),Lst={test:e=>e==="auto",parse:e=>e},phe=[Cp,He,xl,Sc,qrt,Hrt,Lst],r1=e=>phe.find(hhe(e)),zst=[...phe,wi,Nf],jst=e=>zst.find(hhe(e));function Bst(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,S0(n))}function Ust(e,t){const n=GA(e,t);let{transitionEnd:r={},transition:i={},...s}=n?e.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=oit(s[o]);Bst(e,o,a)}}function Vst(e,t,n){var r,i;const s=Object.keys(t).filter(a=>!e.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=t[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(i=(r=n[l])!==null&&r!==void 0?r:e.readValue(l))!==null&&i!==void 0?i:t[l]),c!=null&&(typeof c=="string"&&(dhe(c)||fhe(c))?c=parseFloat(c):!jst(c)&&Nf.test(u)&&(c=che(l,u)),e.addValue(l,S0(c,{owner:e})),n[l]===void 0&&(n[l]=c),c!==null&&e.setBaseTarget(l,c))}}function Wst(e,t){return t?(t[e]||t.default||t).from:void 0}function Hst(e,t,n){const r={};for(const i in e){const s=Wst(i,t);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function qst({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Gst(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function ghe(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(s=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const f in a){const d=e.getValue(f),h=a[f];if(!d||h===void 0||c&&qst(c,f))continue;const p={delay:n,elapsed:0,...V9(s||{},f)};if(window.HandoffAppearAnimations){const y=e.getProps()[mde];if(y){const v=window.HandoffAppearAnimations(y,f,d,rn);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let g=!p.isHandoff&&!Gst(d,h);if(p.type==="spring"&&(d.getVelocity()||p.velocity)&&(g=!1),d.animation&&(g=!1),g)continue;d.start(W9(f,d,h,e.shouldReduceMotion&&Ep.has(f)?{type:!1}:p));const m=d.animation;Lk(l)&&(l.add(f),m.then(()=>l.remove(f))),u.push(m)}return o&&Promise.all(u).then(()=>{o&&Ust(e,o)}),u}function eM(e,t,n={}){const r=GA(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(ghe(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:f}=i;return Xst(e,t,u+l,c,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function Xst(e,t,n=0,r=0,i=1,s){const o=[],a=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(Yst).forEach((u,c)=>{u.notify("AnimationStart",t),o.push(eM(u,t,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Yst(e,t){return e.sortNodePosition(t)}function Kst(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>eM(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=eM(e,t,n);else{const i=typeof t=="function"?GA(e,t,n.custom):t;r=Promise.all(ghe(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const Qst=[...T9].reverse(),Jst=T9.length;function Zst(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Kst(e,n,r)))}function eot(e){let t=Zst(e);const n=not();let r=!0;const i=(l,u)=>{const c=GA(e,u);if(c){const{transition:f,transitionEnd:d,...h}=c;l={...l,...h,...d}}return l};function s(l){t=l(e)}function o(l,u){const c=e.getProps(),f=e.getVariantContext(!0)||{},d=[],h=new Set;let p={},g=1/0;for(let y=0;y<Jst;y++){const v=Qst[y],b=n[v],x=c[v]!==void 0?c[v]:f[v],w=zb(x),C=v===u?b.isActive:null;C===!1&&(g=y);let S=x===f[v]&&x!==c[v]&&w;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...p},!b.isActive&&C===null||!x&&!b.prevProp||VA(x)||typeof x=="boolean")continue;let $=tot(b.prevProp,x)||v===u&&b.isActive&&!S&&w||y>g&&w,F=!1;const O=Array.isArray(x)?x:[x];let B=O.reduce(i,{});C===!1&&(B={});const{prevResolvedValues:D={}}=b,N={...D,...B},A=P=>{$=!0,h.has(P)&&(F=!0,h.delete(P)),b.needsAnimating[P]=!0};for(const P in N){const j=B[P],z=D[P];if(p.hasOwnProperty(P))continue;let U=!1;Ok(j)&&Ok(z)?U=!Lde(j,z):U=j!==z,U?j!==void 0?A(P):h.add(P):j!==void 0&&h.has(P)?A(P):b.protectedKeys[P]=!0}b.prevProp=x,b.prevResolvedValues=B,b.isActive&&(p={...p,...B}),r&&e.blockInitialAnimation&&($=!1),$&&(!S||F)&&d.push(...O.map(P=>({animation:P,options:{type:v,...l}})))}if(h.size){const y={};h.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(y[v]=b)}),d.push({animation:y})}let m=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(d):Promise.resolve()}function a(l,u,c){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const d=o(c,l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function tot(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Lde(t,e):!1}function Sd(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function not(){return{animate:Sd(!0),whileInView:Sd(),whileHover:Sd(),whileTap:Sd(),whileDrag:Sd(),whileFocus:Sd(),exit:Sd()}}class rot extends td{constructor(t){super(t),t.animationState||(t.animationState=eot(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),VA(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let iot=0;class sot extends td{constructor(){super(...arguments),this.id=iot++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const oot={animation:{Feature:rot},exit:{Feature:sot}},UG=(e,t)=>Math.abs(e-t);function aot(e,t){const n=UG(e.x,t.x),r=UG(e.y,t.y);return Math.sqrt(n**2+r**2)}class mhe{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=WR(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=aot(f.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:p}=f,{timestamp:g}=Zr;this.history.push({...p,timestamp:g});const{onStart:m,onMove:y}=this.handlers;d||(m&&m(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=VR(d,this.transformPagePoint),rn.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=WR(f.type==="pointercancel"?this.lastMoveEventInfo:VR(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,m),p&&p(f,m)},!Ode(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=qA(t),a=VR(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Zr;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,WR(a,this.history)),this.removeListeners=gf(_u(this.contextWindow,"pointermove",this.handlePointerMove),_u(this.contextWindow,"pointerup",this.handlePointerUp),_u(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ju(this.updatePoint)}}function VR(e,t){return t?{point:t(e.point)}:e}function VG(e,t){return{x:e.x-t.x,y:e.y-t.y}}function WR({point:e},t){return{point:e,delta:VG(e,yhe(t)),offset:VG(e,lot(t)),velocity:uot(t,.1)}}function lot(e){return e[0]}function yhe(e){return e[e.length-1]}function uot(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=yhe(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>bh(t)));)n--;if(!r)return{x:0,y:0};const s=$u(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ws(e){return e.max-e.min}function tM(e,t=0,n=.01){return Math.abs(e-t)<=n}function WG(e,t,n,r=.5){e.origin=r,e.originPoint=Cn(t.min,t.max,e.origin),e.scale=Ws(n)/Ws(t),(tM(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Cn(n.min,n.max,e.origin)-e.originPoint,(tM(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Av(e,t,n,r){WG(e.x,t.x,n.x,r?r.originX:void 0),WG(e.y,t.y,n.y,r?r.originY:void 0)}function HG(e,t,n){e.min=n.min+t.min,e.max=e.min+Ws(t)}function cot(e,t,n){HG(e.x,t.x,n.x),HG(e.y,t.y,n.y)}function qG(e,t,n){e.min=t.min-n.min,e.max=e.min+Ws(t)}function Tv(e,t,n){qG(e.x,t.x,n.x),qG(e.y,t.y,n.y)}function fot(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Cn(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Cn(n,e,r.max):Math.min(e,n)),e}function GG(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function dot(e,{top:t,left:n,bottom:r,right:i}){return{x:GG(e.x,n,i),y:GG(e.y,t,r)}}function XG(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function hot(e,t){return{x:XG(e.x,t.x),y:XG(e.y,t.y)}}function pot(e,t){let n=.5;const r=Ws(e),i=Ws(t);return i>r?n=Bb(t.min,t.max-r,e.min):r>i&&(n=Bb(e.min,e.max-i,t.min)),Df(0,1,n)}function got(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const nM=.35;function mot(e=nM){return e===!1?e=0:e===!0&&(e=nM),{x:YG(e,"left","right"),y:YG(e,"top","bottom")}}function YG(e,t,n){return{min:KG(e,t),max:KG(e,n)}}function KG(e,t){return typeof e=="number"?e:e[t]||0}const QG=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ig=()=>({x:QG(),y:QG()}),JG=()=>({min:0,max:0}),Gn=()=>({x:JG(),y:JG()});function no(e){return[e("x"),e("y")]}function vhe({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function yot({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function vot(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function HR(e){return e===void 0||e===1}function rM({scale:e,scaleX:t,scaleY:n}){return!HR(e)||!HR(t)||!HR(n)}function Td(e){return rM(e)||bhe(e)||e.z||e.rotate||e.rotateX||e.rotateY}function bhe(e){return ZG(e.x)||ZG(e.y)}function ZG(e){return e&&e!=="0%"}function zk(e,t,n){const r=e-n,i=t*r;return n+i}function eX(e,t,n,r,i){return i!==void 0&&(e=zk(e,i,r)),zk(e,n,r)+t}function iM(e,t=0,n=1,r,i){e.min=eX(e.min,t,n,r,i),e.max=eX(e.max,t,n,r,i)}function xhe(e,{x:t,y:n}){iM(e.x,t.translate,t.scale,t.originPoint),iM(e.y,n.translate,n.scale,n.originPoint)}function bot(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Lg(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,xhe(e,o)),r&&Td(s.latestValues)&&Lg(e,s.latestValues))}t.x=tX(t.x),t.y=tX(t.y)}function tX(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Rc(e,t){e.min=e.min+t,e.max=e.max+t}function nX(e,t,[n,r,i]){const s=t[i]!==void 0?t[i]:.5,o=Cn(e.min,e.max,s);iM(e,t[n],t[r],o,t.scale)}const xot=["x","scaleX","originX"],wot=["y","scaleY","originY"];function Lg(e,t){nX(e.x,t,xot),nX(e.y,t,wot)}function whe(e,t){return vhe(vot(e.getBoundingClientRect(),t))}function Sot(e,t,n){const r=whe(e,n),{scroll:i}=t;return i&&(Rc(r.x,i.offset.x),Rc(r.y,i.offset.y)),r}const She=({current:e})=>e?e.ownerDocument.defaultView:null,Eot=new WeakMap;class Cot{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qA(c,"page").point)},s=(c,f)=>{const{drag:d,dragPropagation:h,onDragStart:p}=this.getProps();if(d&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Dde(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),no(m=>{let y=this.getAxisMotionValue(m).get()||0;if(xl.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[m];b&&(y=Ws(b)*(parseFloat(y)/100))}}this.originPoint[m]=y}),p&&rn.update(()=>p(c,f),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(c,f)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:p,onDrag:g}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:m}=f;if(h&&this.currentDirection===null){this.currentDirection=kot(m),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,m),this.updateAxis("y",f.point,m),this.visualElement.render(),g&&g(c,f)},a=(c,f)=>this.stop(c,f),l=()=>no(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new mhe(t,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:She(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&rn.update(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!tS(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=fot(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&Dg(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=dot(i.layoutBox,n):this.constraints=!1,this.elastic=mot(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&no(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=got(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Dg(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Sot(r,i.root,this.visualElement.getTransformPagePoint());let o=hot(i.layout.layoutBox,s);if(n){const a=n(yot(o));this.hasMutatedConstraints=!!a,a&&(o=vhe(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=no(c=>{if(!tS(c,n,this.currentDirection))return;let f=l&&l[c]||{};o&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(W9(t,r,0,n))}stopAnimation(){no(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){no(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){no(n=>{const{drag:r}=this.getProps();if(!tS(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(t[n]-Cn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Dg(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};no(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=pot({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),no(o=>{if(!tS(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Cn(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Eot.set(this.visualElement,this);const t=this.visualElement.current,n=_u(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Dg(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=gu(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(no(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=nM,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function tS(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function kot(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class _ot extends td{constructor(t){super(t),this.removeGroupControls=Bn,this.removeListeners=Bn,this.controls=new Cot(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bn}unmount(){this.removeGroupControls(),this.removeListeners()}}const rX=e=>(t,n)=>{e&&rn.update(()=>e(t,n))};class $ot extends td{constructor(){super(...arguments),this.removePointerDownListener=Bn}onPointerDown(t){this.session=new mhe(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:She(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:rX(t),onStart:rX(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&rn.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=_u(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Aot(){const e=M.useContext(nw);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=M.useId();return M.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}function Tot(){return Rot(M.useContext(nw))}function Rot(e){return e===null?!0:e.isPresent}const aE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iX(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const i1={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(He.test(e))e=parseFloat(e);else return e;const n=iX(e,t.target.x),r=iX(e,t.target.y);return`${n}% ${r}%`}},Fot={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Nf.parse(e);if(i.length>5)return r;const s=Nf.createTransformer(e),o=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+o]/=a,i[1+o]/=l;const u=Cn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class Pot extends wm.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;Lrt(Oot),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),aE.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||rn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ehe(e){const[t,n]=Aot(),r=M.useContext(F9);return wm.createElement(Pot,{...e,layoutGroup:r,switchLayoutGroup:M.useContext(vde),isPresent:t,safeToRemove:n})}const Oot={borderRadius:{...i1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:i1,borderTopRightRadius:i1,borderBottomLeftRadius:i1,borderBottomRightRadius:i1,boxShadow:Fot},Che=["TopLeft","TopRight","BottomLeft","BottomRight"],Mot=Che.length,sX=e=>typeof e=="string"?parseFloat(e):e,oX=e=>typeof e=="number"||He.test(e);function Dot(e,t,n,r,i,s){i?(e.opacity=Cn(0,n.opacity!==void 0?n.opacity:1,Not(r)),e.opacityExit=Cn(t.opacity!==void 0?t.opacity:1,0,Iot(r))):s&&(e.opacity=Cn(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Mot;o++){const a=`border${Che[o]}Radius`;let l=aX(t,a),u=aX(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||oX(l)===oX(u)?(e[a]=Math.max(Cn(sX(l),sX(u),r),0),(xl.test(u)||xl.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Cn(t.rotate||0,n.rotate||0,r))}function aX(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Not=khe(0,.5,Gde),Iot=khe(.5,.95,Bn);function khe(e,t,n){return r=>r<e?0:r>t?1:n(Bb(e,t,r))}function lX(e,t){e.min=t.min,e.max=t.max}function eo(e,t){lX(e.x,t.x),lX(e.y,t.y)}function uX(e,t,n,r,i){return e-=t,e=zk(e,1/n,r),i!==void 0&&(e=zk(e,1/i,r)),e}function Lot(e,t=0,n=1,r=.5,i,s=e,o=e){if(xl.test(t)&&(t=parseFloat(t),t=Cn(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Cn(s.min,s.max,r);e===s&&(a-=t),e.min=uX(e.min,t,n,a,i),e.max=uX(e.max,t,n,a,i)}function cX(e,t,[n,r,i],s,o){Lot(e,t[n],t[r],t[i],t.scale,s,o)}const zot=["x","scaleX","originX"],jot=["y","scaleY","originY"];function fX(e,t,n,r){cX(e.x,t,zot,n?n.x:void 0,r?r.x:void 0),cX(e.y,t,jot,n?n.y:void 0,r?r.y:void 0)}function dX(e){return e.translate===0&&e.scale===1}function _he(e){return dX(e.x)&&dX(e.y)}function Bot(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function $he(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function hX(e){return Ws(e.x)/Ws(e.y)}class Uot{constructor(){this.members=[]}add(t){H9(this.members,t),t.scheduleRender()}remove(t){if(q9(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pX(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Vot=(e,t)=>e.depth-t.depth;class Wot{constructor(){this.children=[],this.isDirty=!1}add(t){H9(this.children,t),this.isDirty=!0}remove(t){q9(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Vot),this.isDirty=!1,this.children.forEach(t)}}function Hot(e,t){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(ju(r),e(s-t))};return rn.read(r,!0),()=>ju(r)}function qot(e){window.MotionDebug&&window.MotionDebug.record(e)}function Got(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Xot(e,t,n){const r=gs(e)?e:S0(e);return r.start(W9("",r,t,n)),r.animation}const gX=["","X","Y","Z"],Yot={visibility:"hidden"},mX=1e3;let Kot=0;const Rd={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ahe({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=t==null?void 0:t()){this.id=Kot++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Rd.totalNodes=Rd.resolvedTargetDeltas=Rd.recalculatedProjection=0,this.nodes.forEach(Zot),this.nodes.forEach(iat),this.nodes.forEach(sat),this.nodes.forEach(eat),qot(Rd)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Wot)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new G9),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Got(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),e){let f;const d=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Hot(d,250),aE.hasAnimatedSinceResize&&(aE.hasAnimatedSinceResize=!1,this.nodes.forEach(vX))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||cat,{onLayoutAnimationStart:m,onLayoutAnimationComplete:y}=c.getProps(),v=!this.targetLayout||!$he(this.targetLayout,p)||h,b=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const x={...V9(g,"layout"),onPlay:m,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||vX(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ju(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oat),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yX);return}this.isUpdating||this.nodes.forEach(nat),this.isUpdating=!1,this.nodes.forEach(rat),this.nodes.forEach(Qot),this.nodes.forEach(Jot),this.clearAllSnapshots();const a=performance.now();Zr.delta=Df(0,1e3/60,a-Zr.timestamp),Zr.timestamp=a,Zr.isProcessing=!0,DR.update.process(Zr),DR.preRender.process(Zr),DR.render.process(Zr),Zr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(tat),this.sharedNodes.forEach(aat)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Gn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!_he(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Td(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),fat(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Gn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Rc(a.x,l.offset.x),Rc(a.y,l.offset.y)),a}removeElementScroll(o){const a=Gn();eo(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:f}=u;if(u!==this.root&&c&&f.layoutScroll){if(c.isRoot){eo(a,o);const{scroll:d}=this.root;d&&(Rc(a.x,-d.offset.x),Rc(a.y,-d.offset.y))}Rc(a.x,c.offset.x),Rc(a.y,c.offset.y)}}return a}applyTransform(o,a=!1){const l=Gn();eo(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Lg(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Td(c.latestValues)&&Lg(l,c.latestValues)}return Td(this.latestValues)&&Lg(l,this.latestValues),l}removeTransform(o){const a=Gn();eo(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Td(u.latestValues))continue;rM(u.latestValues)&&u.updateSnapshot();const c=Gn(),f=u.measurePageBox();eo(c,f),fX(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Td(this.latestValues)&&fX(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=Zr.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gn(),this.relativeTargetOrigin=Gn(),Tv(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),eo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Gn(),this.targetWithTransforms=Gn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cot(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):eo(this.target,this.layout.layoutBox),xhe(this.target,this.targetDelta)):eo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gn(),this.relativeTargetOrigin=Gn(),Tv(this.relativeTargetOrigin,this.target,h.target),eo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Rd.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rM(this.parent.latestValues)||bhe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Zr.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;eo(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;bot(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=Ig(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ig(),this.projectionDeltaWithTransform=Ig());const g=this.projectionTransform;Av(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=pX(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==d||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Rd.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=Ig();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=Gn(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=h!==p,m=this.getStack(),y=!m||m.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(uat));this.animationProgress=0;let b;this.mixTargetDelta=x=>{const w=x/1e3;bX(f.x,o.x,w),bX(f.y,o.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Tv(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lat(this.relativeTarget,this.relativeTargetOrigin,d,w),b&&Bot(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Gn()),eo(b,this.relativeTarget)),g&&(this.animationValues=c,Dot(c,u,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ju(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rn.update(()=>{aE.hasAnimatedSinceResize=!0,this.currentAnimation=Xot(0,mX,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mX),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&The(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Gn();const f=Ws(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const d=Ws(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}eo(a,l),Lg(a,c),Av(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Uot),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<gX.length;c++){const f="rotate"+gX[c];l[f]&&(u[f]=l[f],o.setStaticValue(f,0))}o.render();for(const c in u)o.setStaticValue(c,u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Yot;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=oE(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=oE(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Td(this.latestValues)&&(g.transform=c?c({},""):"none",this.hasProjected=!1),g}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=pX(this.projectionDeltaWithTransform,this.treeScale,d),c&&(u.transform=c(d,u.transform));const{x:h,y:p}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in Fk){if(d[g]===void 0)continue;const{correct:m,applyTo:y}=Fk[g],v=u.transform==="none"?d[g]:m(d[g],f);if(y){const b=y.length;for(let x=0;x<b;x++)u[y[x]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=f===this?oE(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(yX),this.root.sharedNodes.clear()}}}function Qot(e){e.updateLayout()}function Jot(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,o=n.source!==e.layout.source;s==="size"?no(f=>{const d=o?n.measuredBox[f]:n.layoutBox[f],h=Ws(d);d.min=r[f].min,d.max=d.min+h}):The(s,n.layoutBox,r)&&no(f=>{const d=o?n.measuredBox[f]:n.layoutBox[f],h=Ws(r[f]);d.max=d.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+h)});const a=Ig();Av(a,r,n.layoutBox);const l=Ig();o?Av(l,e.applyTransform(i,!0),n.measuredBox):Av(l,r,n.layoutBox);const u=!_he(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=Gn();Tv(p,n.layoutBox,d.layoutBox);const g=Gn();Tv(g,r,h.layoutBox),$he(p,g)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Zot(e){Rd.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function eat(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tat(e){e.clearSnapshot()}function yX(e){e.clearMeasurements()}function nat(e){e.isLayoutDirty=!1}function rat(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function vX(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function iat(e){e.resolveTargetDelta()}function sat(e){e.calcProjection()}function oat(e){e.resetRotation()}function aat(e){e.removeLeadSnapshot()}function bX(e,t,n){e.translate=Cn(t.translate,0,n),e.scale=Cn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function xX(e,t,n,r){e.min=Cn(t.min,n.min,r),e.max=Cn(t.max,n.max,r)}function lat(e,t,n,r){xX(e.x,t.x,n.x,r),xX(e.y,t.y,n.y,r)}function uat(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const cat={duration:.45,ease:[.4,0,.1,1]},wX=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),SX=wX("applewebkit/")&&!wX("chrome/")?Math.round:Bn;function EX(e){e.min=SX(e.min),e.max=SX(e.max)}function fat(e){EX(e.x),EX(e.y)}function The(e,t,n){return e==="position"||e==="preserve-aspect"&&!tM(hX(t),hX(n),.2)}const dat=Ahe({attachResizeListener:(e,t)=>gu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qR={current:void 0},Rhe=Ahe({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!qR.current){const e=new dat({});e.mount(window),e.setOptions({layoutScroll:!0}),qR.current=e}return qR.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),hat={pan:{Feature:$ot},drag:{Feature:_ot,ProjectionNode:Rhe,MeasureLayout:Ehe}},pat=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function gat(e){const t=pat.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function sM(e,t,n=1){const[r,i]=gat(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return dhe(o)?parseFloat(o):o}else return XO(i)?sM(i,t,n+1):i}function mat(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const s=i.get();if(!XO(s))return;const o=sM(s,r);o&&i.set(o)});for(const i in t){const s=t[i];if(!XO(s))continue;const o=sM(s,r);o&&(t[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:t,transitionEnd:n}}const yat=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Fhe=e=>yat.has(e),vat=e=>Object.keys(e).some(Fhe),CX=e=>e===Cp||e===He,kX=(e,t)=>parseFloat(e.split(", ")[t]),_X=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return kX(i[1],t);{const s=r.match(/^matrix\((.+)\)$/);return s?kX(s[1],e):0}},bat=new Set(["x","y","z"]),xat=rw.filter(e=>!bat.has(e));function wat(e){const t=[];return xat.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const E0={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:_X(4,13),y:_X(5,14)};E0.translateX=E0.x;E0.translateY=E0.y;const Sat=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=E0[u](r,s)}),t.render();const l=t.measureViewportBox();return n.forEach(u=>{const c=t.getValue(u);c&&c.jump(a[u]),e[u]=E0[u](l,s)}),e},Eat=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(Fhe);let s=[],o=!1;const a=[];if(i.forEach(l=>{const u=e.getValue(l);if(!e.hasValue(l))return;let c=n[l],f=r1(c);const d=t[l];let h;if(Ok(d)){const p=d.length,g=d[0]===null?1:0;c=d[g],f=r1(c);for(let m=g;m<p&&d[m]!==null;m++)h?Mk(r1(d[m])===h):h=r1(d[m])}else h=r1(d);if(f!==h)if(CX(f)&&CX(h)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof d=="string"?t[l]=parseFloat(d):Array.isArray(d)&&h===He&&(t[l]=d.map(parseFloat))}else f!=null&&f.transform&&(h!=null&&h.transform)&&(c===0||d===0)?c===0?u.set(h.transform(c)):t[l]=f.transform(d):(o||(s=wat(e),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:t[l],u.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=Sat(t,e,a);return s.length&&s.forEach(([c,f])=>{e.getValue(c).set(f)}),e.render(),UA&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function Cat(e,t,n,r){return vat(t)?Eat(e,t,n,r):{target:t,transitionEnd:r}}const kat=(e,t,n,r)=>{const i=mat(e,t,r);return t=i.target,r=i.transitionEnd,Cat(e,t,n,r)},oM={current:null},Phe={current:!1};function _at(){if(Phe.current=!0,!!UA)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>oM.current=e.matches;e.addListener(t),t()}else oM.current=!1}function $at(e,t,n){const{willChange:r}=t;for(const i in t){const s=t[i],o=n[i];if(gs(s))e.addValue(i,s),Lk(r)&&r.add(i);else if(gs(o))e.addValue(i,S0(s,{owner:e})),Lk(r)&&r.remove(i);else if(o!==s)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=e.getStaticValue(i);e.addValue(i,S0(a!==void 0?a:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const $X=new WeakMap,Ohe=Object.keys(jb),Aat=Ohe.length,AX=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Tat=R9.length;class Rat{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>rn.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=WA(n),this.isVariantNode=yde(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const f in c){const d=c[f];a[f]!==void 0&&gs(d)&&(d.set(a[f],!1),Lk(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,$X.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Phe.current||_at(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oM.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$X.delete(this.current),this.projection&&this.projection.unmount(),ju(this.notifyUpdate),ju(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Ep.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&rn.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),s()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,s){let o,a;for(let l=0;l<Aat;l++){const u=Ohe[l],{isEnabled:c,Feature:f,ProjectionNode:d,MeasureLayout:h}=jb[u];d&&(o=d),c(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:h}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||f&&Dg(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:d,layoutRoot:h})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<AX.length;r++){const i=AX[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=t["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=$at(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Tat;r++){const i=R9[r],s=this.props[i];(zb(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=S0(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=L9(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!gs(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new G9),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Mhe extends Rat{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},s){let o=Hst(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){Vst(this,r,o);const a=kat(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function Fat(e){return window.getComputedStyle(e)}class Pat extends Mhe{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Ep.has(n)){const r=U9(n);return r&&r.default||0}else{const r=Fat(t),i=(wde(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return whe(t,n)}build(t,n,r,i){O9(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return I9(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;gs(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){$de(t,n,r,i)}}class Oat extends Mhe{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ep.has(n)){const r=U9(n);return r&&r.default||0}return n=Ade.has(n)?n:A9(n),t.getAttribute(n)}measureInstanceViewportBox(){return Gn()}scrapeMotionValuesFromProps(t,n){return Rde(t,n)}build(t,n,r,i){D9(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){Tde(t,n,r,i)}mount(t){this.isSVGTag=N9(t.tagName),super.mount(t)}}const Mat=(e,t)=>P9(e)?new Oat(t,{enableHardwareAcceleration:!1}):new Pat(t,{enableHardwareAcceleration:!0}),Dat={layout:{ProjectionNode:Rhe,MeasureLayout:Ehe}},Nat={...oot,...$it,...hat,...Dat},XA=Nrt((e,t)=>pit(e,t,Nat,Mat));function Dhe(){const e=M.useRef(!1);return $9(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Iat(){const e=Dhe(),[t,n]=M.useState(0),r=M.useCallback(()=>{e.current&&n(t+1)},[t]);return[M.useCallback(()=>rn.postRender(r),[r]),t]}class Lat extends M.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function zat({children:e,isPresent:t}){const n=M.useId(),r=M.useRef(null),i=M.useRef({width:0,height:0,top:0,left:0});return M.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(t||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),M.createElement(Lat,{isPresent:t,childRef:r,sizeRef:i},M.cloneElement(e,{ref:r}))}const GR=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=Fde(jat),l=M.useId(),u=M.useMemo(()=>({id:l,initial:t,isPresent:n,custom:i,onExitComplete:c=>{a.set(c,!0);for(const f of a.values())if(!f)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),s?void 0:[n]);return M.useMemo(()=>{a.forEach((c,f)=>a.set(f,!1))},[n]),M.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=M.createElement(zat,{isPresent:n},e)),M.createElement(nw.Provider,{value:u},e)};function jat(){return new Map}function Bat(e){return M.useEffect(()=>()=>e(),[])}const Fd=e=>e.key||"";function Uat(e,t){e.forEach(n=>{const r=Fd(n);t.set(r,n)})}function Vat(e){const t=[];return M.Children.forEach(e,n=>{M.isValidElement(n)&&t.push(n)}),t}const X9=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=M.useContext(F9).forceRender||Iat()[0],l=Dhe(),u=Vat(e);let c=u;const f=M.useRef(new Map).current,d=M.useRef(c),h=M.useRef(new Map).current,p=M.useRef(!0);if($9(()=>{p.current=!1,Uat(u,h),d.current=c}),Bat(()=>{p.current=!0,h.clear(),f.clear()}),p.current)return M.createElement(M.Fragment,null,c.map(v=>M.createElement(GR,{key:Fd(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},v)));c=[...c];const g=d.current.map(Fd),m=u.map(Fd),y=g.length;for(let v=0;v<y;v++){const b=g[v];m.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return o==="wait"&&f.size&&(c=[]),f.forEach((v,b)=>{if(m.indexOf(b)!==-1)return;const x=h.get(b);if(!x)return;const w=g.indexOf(b);let C=v;if(!C){const S=()=>{f.delete(b);const k=Array.from(h.keys()).filter($=>!m.includes($));if(k.forEach($=>h.delete($)),d.current=u.filter($=>{const F=Fd($);return F===b||k.includes(F)}),!f.size){if(l.current===!1)return;a(),r&&r()}};C=M.createElement(GR,{key:Fd(x),isPresent:!1,onExitComplete:S,custom:t,presenceAffectsLayout:s,mode:o},x),f.set(b,C)}c.splice(w,0,C)}),c=c.map(v=>{const b=v.key;return f.has(b)?v:M.createElement(GR,{key:Fd(v),isPresent:!0,presenceAffectsLayout:s,mode:o},v)}),M.createElement(M.Fragment,null,f.size?c:c.map(v=>M.cloneElement(v)))};var Wat={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let r=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},Nhe=M.memo(e=>{const{id:t,message:n,onCloseComplete:r,onRequestRemove:i,requestClose:s=!1,position:o="bottom",duration:a=5e3,containerStyle:l,motionVariants:u=Wat,toastSpacing:c="0.5rem"}=e,[f,d]=M.useState(a),h=Tot();CG(()=>{h||r==null||r()},[h]),CG(()=>{d(a)},[a]);const p=()=>d(null),g=()=>d(a),m=()=>{h&&i()};M.useEffect(()=>{h&&s&&i()},[h,s,i]),_rt(m,f);const y=M.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:c,...l}),[l,c]),v=M.useMemo(()=>Crt(o),[o]);return T.jsx(XA.div,{layout:!0,className:"chakra-toast",variants:u,initial:"initial",animate:"animate",exit:"exit",onHoverStart:p,onHoverEnd:g,custom:{position:o},style:v,children:T.jsx(je.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:y,children:al(n,{id:t,onClose:m})})})});Nhe.displayName="ToastComponent";function Hat(e,t){var n;const r=e??"bottom",s={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(n=s==null?void 0:s[t])!=null?n:r}var TX={path:T.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[T.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),T.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),T.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},wt=Ve((e,t)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:s=!1,children:o,className:a,__css:l,...u}=e,c=vt("chakra-icon",a),f=Ju("Icon",e),d={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...l,...f},h={ref:t,focusable:s,className:c,__css:d},p=r??TX.viewBox;if(n&&typeof n!="string")return T.jsx(je.svg,{as:n,...h,...u});const g=o??TX.path;return T.jsx(je.svg,{verticalAlign:"middle",viewBox:p,...h,...u,children:g})});wt.displayName="Icon";function qat(e){return T.jsx(wt,{viewBox:"0 0 24 24",...e,children:T.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function Gat(e){return T.jsx(wt,{viewBox:"0 0 24 24",...e,children:T.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function RX(e){return T.jsx(wt,{viewBox:"0 0 24 24",...e,children:T.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var Xat=Mqe({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),aw=Ve((e,t)=>{const n=Ju("Spinner",e),{label:r="Loading...",thickness:i="2px",speed:s="0.45s",emptyColor:o="transparent",className:a,...l}=Ur(e),u=vt("chakra-spinner",a),c={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:o,borderLeftColor:o,animation:`${Xat} ${s} linear infinite`,...n};return T.jsx(je.div,{ref:t,__css:c,className:u,...l,children:r&&T.jsx(je.span,{srOnly:!0,children:r})})});aw.displayName="Spinner";var[Yat,Y9]=Cr({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[Kat,K9]=Cr({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),Ihe={info:{icon:Gat,colorScheme:"blue"},warning:{icon:RX,colorScheme:"orange"},success:{icon:qat,colorScheme:"green"},error:{icon:RX,colorScheme:"red"},loading:{icon:aw,colorScheme:"blue"}};function Qat(e){return Ihe[e].colorScheme}function Jat(e){return Ihe[e].icon}var Lhe=Ve(function(t,n){const r=K9(),{status:i}=Y9(),s={display:"inline",...r.description};return T.jsx(je.div,{ref:n,"data-status":i,...t,className:vt("chakra-alert__desc",t.className),__css:s})});Lhe.displayName="AlertDescription";function zhe(e){const{status:t}=Y9(),n=Jat(t),r=K9(),i=t==="loading"?r.spinner:r.icon;return T.jsx(je.span,{display:"inherit","data-status":t,...e,className:vt("chakra-alert__icon",e.className),__css:i,children:e.children||T.jsx(n,{h:"100%",w:"100%"})})}zhe.displayName="AlertIcon";var jhe=Ve(function(t,n){const r=K9(),{status:i}=Y9();return T.jsx(je.div,{ref:n,"data-status":i,...t,className:vt("chakra-alert__title",t.className),__css:r.title})});jhe.displayName="AlertTitle";var Bhe=Ve(function(t,n){var r;const{status:i="info",addRole:s=!0,...o}=Ur(t),a=(r=t.colorScheme)!=null?r:Qat(i),l=Zu("Alert",{...t,colorScheme:a}),u={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...l.container};return T.jsx(Yat,{value:{status:i},children:T.jsx(Kat,{value:l,children:T.jsx(je.div,{"data-status":i,role:s?"alert":void 0,ref:n,...o,className:vt("chakra-alert",t.className),__css:u})})})});Bhe.displayName="Alert";function Zat(e){return T.jsx(wt,{focusable:"false","aria-hidden":!0,...e,children:T.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var Uhe=Ve(function(t,n){const r=Ju("CloseButton",t),{children:i,isDisabled:s,__css:o,...a}=Ur(t),l={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return T.jsx(je.button,{type:"button","aria-label":"Close",ref:n,disabled:s,__css:{...l,...r,...o},...a,children:i||T.jsx(Zat,{width:"1em",height:"1em"})})});Uhe.displayName="CloseButton";var elt={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},il=tlt(elt);function tlt(e){let t=e;const n=new Set,r=i=>{t=i(t),n.forEach(s=>s())};return{getState:()=>t,subscribe:i=>(n.add(i),()=>{r(()=>e),n.delete(i)}),removeToast:(i,s)=>{r(o=>({...o,[s]:o[s].filter(a=>a.id!=i)}))},notify:(i,s)=>{const o=nlt(i,s),{position:a,id:l}=o;return r(u=>{var c,f;const h=a.includes("top")?[o,...(c=u[a])!=null?c:[]]:[...(f=u[a])!=null?f:[],o];return{...u,[a]:h}}),l},update:(i,s)=>{i&&r(o=>{const a={...o},{position:l,index:u}=EG(a,i);return l&&u!==-1&&(a[l][u]={...a[l][u],...s,message:Vhe(s)}),a})},closeAll:({positions:i}={})=>{r(s=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((l,u)=>(l[u]=s[u].map(c=>({...c,requestClose:!0})),l),{...s}))},close:i=>{r(s=>{const o=hde(s,i);return o?{...s,[o]:s[o].map(a=>a.id==i?{...a,requestClose:!0}:a)}:s})},isActive:i=>!!EG(il.getState(),i).position}}var FX=0;function nlt(e,t={}){var n,r;FX+=1;const i=(n=t.id)!=null?n:FX,s=(r=t.position)!=null?r:"bottom";return{id:i,message:e,position:s,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>il.removeToast(String(i),s),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var rlt=e=>{const{status:t,variant:n="solid",id:r,title:i,isClosable:s,onClose:o,description:a,colorScheme:l,icon:u}=e,c=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return T.jsxs(Bhe,{addRole:!1,status:t,variant:n,id:c==null?void 0:c.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[T.jsx(zhe,{children:u}),T.jsxs(je.div,{flex:"1",maxWidth:"100%",children:[i&&T.jsx(jhe,{id:c==null?void 0:c.title,children:i}),a&&T.jsx(Lhe,{id:c==null?void 0:c.description,display:"block",children:a})]}),s&&T.jsx(Uhe,{size:"sm",onClick:o,position:"absolute",insetEnd:1,top:1})]})};function Vhe(e={}){const{render:t,toastComponent:n=rlt}=e;return i=>typeof t=="function"?t({...i,...e}):T.jsx(n,{...i,...e})}function ilt(e,t){const n=i=>{var s;return{...t,...i,position:Hat((s=i==null?void 0:i.position)!=null?s:t==null?void 0:t.position,e)}},r=i=>{const s=n(i),o=Vhe(s);return il.notify(o,s)};return r.update=(i,s)=>{il.update(i,n(s))},r.promise=(i,s)=>{const o=r({...s.loading,status:"loading",duration:null});i.then(a=>r.update(o,{status:"success",duration:5e3,...al(s.success,a)})).catch(a=>r.update(o,{status:"error",duration:5e3,...al(s.error,a)}))},r.closeAll=il.closeAll,r.close=il.close,r.isActive=il.isActive,r}var[slt,olt]=Cr({name:"ToastOptionsContext",strict:!1}),alt=e=>{const t=M.useSyncExternalStore(il.subscribe,il.getState,il.getState),{motionVariants:n,component:r=Nhe,portalProps:i}=e,o=Object.keys(t).map(a=>{const l=t[a];return T.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${a}`,id:`chakra-toast-manager-${a}`,style:krt(a),children:T.jsx(X9,{initial:!1,children:l.map(u=>T.jsx(r,{motionVariants:n,...u},u.id))})},a)});return T.jsx(NA,{...i,children:o})};function llt(e){const{theme:t}=Ife(),n=olt();return M.useMemo(()=>ilt(t.direction,{...n,...e}),[e,t.direction,n])}var ult=e=>function({children:n,theme:r=e,toastOptions:i,...s}){return T.jsxs(Srt,{theme:r,...s,children:[T.jsx(slt,{value:i==null?void 0:i.defaultOptions,children:n}),T.jsx(alt,{...i})]})},clt=ult(ide),flt=Object.defineProperty,dlt=(e,t,n)=>t in e?flt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,An=(e,t,n)=>(dlt(e,typeof t!="symbol"?t+"":t,n),n);function PX(e){return e.sort((t,n)=>{const r=t.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var hlt=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function OX(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function MX(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var aM=typeof window<"u"?M.useLayoutEffect:M.useEffect,jk=e=>e,plt=class{constructor(){An(this,"descendants",new Map),An(this,"register",e=>{if(e!=null)return hlt(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),An(this,"unregister",e=>{this.descendants.delete(e);const t=PX(Array.from(this.descendants.keys()));this.assignIndex(t)}),An(this,"destroy",()=>{this.descendants.clear()}),An(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})}),An(this,"count",()=>this.descendants.size),An(this,"enabledCount",()=>this.enabledValues().length),An(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index)),An(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),An(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),An(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),An(this,"first",()=>this.item(0)),An(this,"firstEnabled",()=>this.enabledItem(0)),An(this,"last",()=>this.item(this.descendants.size-1)),An(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),An(this,"indexOf",e=>{var t,n;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1}),An(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),An(this,"next",(e,t=!0)=>{const n=OX(e,this.count(),t);return this.item(n)}),An(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=OX(r,this.enabledCount(),t);return this.enabledItem(i)}),An(this,"prev",(e,t=!0)=>{const n=MX(e,this.count()-1,t);return this.item(n)}),An(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=MX(r,this.enabledCount()-1,t);return this.enabledItem(i)}),An(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),r=PX(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(r)})}};function glt(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function Kh(...e){return t=>{e.forEach(n=>{glt(n,t)})}}function mlt(...e){return M.useMemo(()=>Kh(...e),e)}function ylt(){const e=M.useRef(new plt);return aM(()=>()=>e.current.destroy()),e.current}var[vlt,Whe]=Cr({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function blt(e){const t=Whe(),[n,r]=M.useState(-1),i=M.useRef(null);aM(()=>()=>{i.current&&t.unregister(i.current)},[]),aM(()=>{if(!i.current)return;const o=Number(i.current.dataset.index);n!=o&&!Number.isNaN(o)&&r(o)});const s=jk(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(i.current),register:Kh(s,i)}}function Hhe(){return[jk(vlt),()=>jk(Whe()),()=>ylt(),i=>blt(i)]}var[xlt,YA]=Cr({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[wlt,Q9]=Cr({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[Slt,Qgt,Elt,Clt]=Hhe(),qhe=Ve(function(t,n){const{getButtonProps:r}=Q9(),i=r(t,n),o={display:"flex",alignItems:"center",width:"100%",outline:0,...YA().button};return T.jsx(je.button,{...i,className:vt("chakra-accordion__button",t.className),__css:o})});qhe.displayName="AccordionButton";function Ghe(e){const{value:t,defaultValue:n,onChange:r,shouldUpdate:i=(d,h)=>d!==h}=e,s=sE(r),o=sE(i),[a,l]=M.useState(n),u=t!==void 0,c=u?t:a,f=sE(d=>{const p=typeof d=="function"?d(c):d;o(c,p)&&(u||l(p),s(p))},[u,s,c,o]);return[c,f]}function klt(e){const{onChange:t,defaultIndex:n,index:r,allowMultiple:i,allowToggle:s,...o}=e;Alt(e),Tlt(e);const a=Elt(),[l,u]=M.useState(-1);M.useEffect(()=>()=>{u(-1)},[]);const[c,f]=Ghe({value:r,defaultValue(){return i?n??[]:n??-1},onChange:t});return{index:c,setIndex:f,htmlProps:o,getAccordionItemProps:h=>{let p=!1;return h!==null&&(p=Array.isArray(c)?c.includes(h):c===h),{isOpen:p,onChange:m=>{if(h!==null)if(i&&Array.isArray(c)){const y=m?c.concat(h):c.filter(v=>v!==h);f(y)}else m?f(h):s&&f(-1)}}},focusedIndex:l,setFocusedIndex:u,descendants:a}}var[_lt,J9]=Cr({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function $lt(e){const{isDisabled:t,isFocusable:n,id:r,...i}=e,{getAccordionItemProps:s,setFocusedIndex:o}=J9(),a=M.useRef(null),l=M.useId(),u=r??l,c=`accordion-button-${u}`,f=`accordion-panel-${u}`;Rlt(e);const{register:d,index:h,descendants:p}=Clt({disabled:t&&!n}),{isOpen:g,onChange:m}=s(h===-1?null:h);Flt({isOpen:g,isDisabled:t});const y=()=>{m==null||m(!0)},v=()=>{m==null||m(!1)},b=M.useCallback(()=>{m==null||m(!g),o(h)},[h,o,g,m]),x=M.useCallback(k=>{const F={ArrowDown:()=>{const O=p.nextEnabled(h);O==null||O.node.focus()},ArrowUp:()=>{const O=p.prevEnabled(h);O==null||O.node.focus()},Home:()=>{const O=p.firstEnabled();O==null||O.node.focus()},End:()=>{const O=p.lastEnabled();O==null||O.node.focus()}}[k.key];F&&(k.preventDefault(),F(k))},[p,h]),w=M.useCallback(()=>{o(h)},[o,h]),C=M.useCallback(function($={},F=null){return{...$,type:"button",ref:Kh(d,a,F),id:c,disabled:!!t,"aria-expanded":!!g,"aria-controls":f,onClick:pf($.onClick,b),onFocus:pf($.onFocus,w),onKeyDown:pf($.onKeyDown,x)}},[c,t,g,b,w,x,f,d]),S=M.useCallback(function($={},F=null){return{...$,ref:F,role:"region",id:f,"aria-labelledby":c,hidden:!g}},[c,g,f]);return{isOpen:g,isDisabled:t,isFocusable:n,onOpen:y,onClose:v,getButtonProps:C,getPanelProps:S,htmlProps:i}}function Alt(e){const t=e.index||e.defaultIndex,n=t!=null&&!Array.isArray(t)&&e.allowMultiple;ew({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof t},`})}function Tlt(e){ew({condition:!!(e.allowMultiple&&e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function Rlt(e){ew({condition:!!(e.isFocusable&&!e.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function Flt(e){ew({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}function Xhe(e){const{isOpen:t,isDisabled:n}=Q9(),{reduceMotion:r}=J9(),i=vt("chakra-accordion__icon",e.className),s=YA(),o={opacity:n?.4:1,transform:t?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center",...s.icon};return T.jsx(wt,{viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:o,...e,children:T.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}Xhe.displayName="AccordionIcon";var Yhe=Ve(function(t,n){const{children:r,className:i}=t,{htmlProps:s,...o}=$lt(t),l={...YA().container,overflowAnchor:"none"},u=M.useMemo(()=>o,[o]);return T.jsx(wlt,{value:u,children:T.jsx(je.div,{ref:n,...s,className:vt("chakra-accordion__item",i),__css:l,children:typeof r=="function"?r({isExpanded:!!o.isOpen,isDisabled:!!o.isDisabled}):r})})});Yhe.displayName="AccordionItem";var zg={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},DX={enter:{duration:.2,ease:zg.easeOut},exit:{duration:.1,ease:zg.easeIn}},Bk={enter:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.enter}),exit:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.exit})},Plt=e=>e!=null&&parseInt(e.toString(),10)>0,NX={exit:{height:{duration:.2,ease:zg.ease},opacity:{duration:.3,ease:zg.ease}},enter:{height:{duration:.3,ease:zg.ease},opacity:{duration:.4,ease:zg.ease}}},Olt={exit:({animateOpacity:e,startingHeight:t,transition:n,transitionEnd:r,delay:i})=>{var s;return{...e&&{opacity:Plt(t)?1:0},height:t,transitionEnd:r==null?void 0:r.exit,transition:(s=n==null?void 0:n.exit)!=null?s:Bk.exit(NX.exit,i)}},enter:({animateOpacity:e,endingHeight:t,transition:n,transitionEnd:r,delay:i})=>{var s;return{...e&&{opacity:1},height:t,transitionEnd:r==null?void 0:r.enter,transition:(s=n==null?void 0:n.enter)!=null?s:Bk.enter(NX.enter,i)}}},Khe=M.forwardRef((e,t)=>{const{in:n,unmountOnExit:r,animateOpacity:i=!0,startingHeight:s=0,endingHeight:o="auto",style:a,className:l,transition:u,transitionEnd:c,...f}=e,[d,h]=M.useState(!1);M.useEffect(()=>{const v=setTimeout(()=>{h(!0)});return()=>clearTimeout(v)},[]),ew({condition:Number(s)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const p=parseFloat(s.toString())>0,g={startingHeight:s,endingHeight:o,animateOpacity:i,transition:d?u:{enter:{duration:0}},transitionEnd:{enter:c==null?void 0:c.enter,exit:r?c==null?void 0:c.exit:{...c==null?void 0:c.exit,display:p?"block":"none"}}},m=r?n:!0,y=n||r?"enter":"exit";return T.jsx(X9,{initial:!1,custom:g,children:m&&T.jsx(XA.div,{ref:t,...f,className:vt("chakra-collapse",l),style:{overflow:"hidden",display:"block",...a},custom:g,variants:Olt,initial:r?"exit":!1,animate:y,exit:"exit"})})});Khe.displayName="Collapse";var Mlt={enter:({transition:e,transitionEnd:t,delay:n}={})=>{var r;return{opacity:1,transition:(r=e==null?void 0:e.enter)!=null?r:Bk.enter(DX.enter,n),transitionEnd:t==null?void 0:t.enter}},exit:({transition:e,transitionEnd:t,delay:n}={})=>{var r;return{opacity:0,transition:(r=e==null?void 0:e.exit)!=null?r:Bk.exit(DX.exit,n),transitionEnd:t==null?void 0:t.exit}}},Dlt={initial:"exit",animate:"enter",exit:"exit",variants:Mlt},Z9=M.forwardRef(function(t,n){const{unmountOnExit:r,in:i,className:s,transition:o,transitionEnd:a,delay:l,...u}=t,c=i||r?"enter":"exit",f=r?i&&r:!0,d={transition:o,transitionEnd:a,delay:l};return T.jsx(X9,{custom:d,children:f&&T.jsx(XA.div,{ref:n,className:vt("chakra-fade",s),custom:d,...Dlt,animate:c,...u})})});Z9.displayName="Fade";var Qhe=Ve(function(t,n){const{className:r,motionProps:i,...s}=t,{reduceMotion:o}=J9(),{getPanelProps:a,isOpen:l}=Q9(),u=a(s,n),c=vt("chakra-accordion__panel",r),f=YA();o||delete u.hidden;const d=T.jsx(je.div,{...u,__css:f.panel,className:c});return o?d:T.jsx(Khe,{in:l,...i,children:d})});Qhe.displayName="AccordionPanel";var Jhe=Ve(function({children:t,reduceMotion:n,...r},i){const s=Zu("Accordion",r),o=Ur(r),{htmlProps:a,descendants:l,...u}=klt(o),c=M.useMemo(()=>({...u,reduceMotion:!!n}),[u,n]);return T.jsx(Slt,{value:l,children:T.jsx(_lt,{value:c,children:T.jsx(xlt,{value:s,children:T.jsx(je.div,{ref:i,...a,className:vt("chakra-accordion",r.className),__css:s.root,children:t})})})})});Jhe.displayName="Accordion";var lM=Ve(function(t,n){const{htmlWidth:r,htmlHeight:i,alt:s,...o}=t;return T.jsx("img",{width:r,height:i,ref:n,alt:s,...o})});lM.displayName="NativeImage";function Nlt(e){const{loading:t,src:n,srcSet:r,onLoad:i,onError:s,crossOrigin:o,sizes:a,ignoreFallback:l}=e,[u,c]=M.useState("pending");M.useEffect(()=>{c(n?"loading":"pending")},[n]);const f=M.useRef(),d=M.useCallback(()=>{if(!n)return;h();const p=new Image;p.src=n,o&&(p.crossOrigin=o),r&&(p.srcset=r),a&&(p.sizes=a),t&&(p.loading=t),p.onload=g=>{h(),c("loaded"),i==null||i(g)},p.onerror=g=>{h(),c("failed"),s==null||s(g)},f.current=p},[n,o,r,a,i,s,t]),h=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return d0(()=>{if(!l)return u==="loading"&&d(),()=>{h()}},[u,d,l]),l?"loaded":u}var Ilt=(e,t)=>e!=="loaded"&&t==="beforeLoadOrError"||e==="failed"&&t==="onError";function Llt(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}var Zhe=Ve(function(t,n){const{fallbackSrc:r,fallback:i,src:s,srcSet:o,align:a,fit:l,loading:u,ignoreFallback:c,crossOrigin:f,fallbackStrategy:d="beforeLoadOrError",referrerPolicy:h,...p}=t,g=r!==void 0||i!==void 0,m=u!=null||c||!g,y=Nlt({...t,crossOrigin:f,ignoreFallback:m}),v=Ilt(y,d),b={ref:n,objectFit:l,objectPosition:a,...m?p:Llt(p,["onError","onLoad"])};return v?i||T.jsx(je.img,{as:lM,className:"chakra-image__placeholder",src:r,...b}):T.jsx(je.img,{as:lM,src:s,srcSet:o,crossOrigin:f,loading:u,referrerPolicy:h,className:"chakra-image",...b})});Zhe.displayName="Image";function KA(e){return M.Children.toArray(e).filter(t=>M.isValidElement(t))}var[zlt,jlt]=Cr({strict:!1,name:"ButtonGroupContext"}),Blt={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},Ult={horizontal:e=>({"& > *:not(style) ~ *:not(style)":{marginStart:e}}),vertical:e=>({"& > *:not(style) ~ *:not(style)":{marginTop:e}})},epe=Ve(function(t,n){const{size:r,colorScheme:i,variant:s,className:o,spacing:a="0.5rem",isAttached:l,isDisabled:u,orientation:c="horizontal",...f}=t,d=vt("chakra-button__group",o),h=M.useMemo(()=>({size:r,colorScheme:i,variant:s,isDisabled:u}),[r,i,s,u]);let p={display:"inline-flex",...l?Blt[c]:Ult[c](a)};const g=c==="vertical";return T.jsx(zlt,{value:h,children:T.jsx(je.div,{ref:n,role:"group",__css:p,className:d,"data-attached":l?"":void 0,"data-orientation":c,flexDir:g?"column":void 0,...f})})});epe.displayName="ButtonGroup";function Vlt(e){const[t,n]=M.useState(!e);return{ref:M.useCallback(s=>{s&&n(s.tagName==="BUTTON")},[]),type:t?"button":void 0}}function uM(e){const{children:t,className:n,...r}=e,i=M.isValidElement(t)?M.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,s=vt("chakra-button__icon",n);return T.jsx(je.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:s,children:i})}uM.displayName="ButtonIcon";function cM(e){const{label:t,placement:n,spacing:r="0.5rem",children:i=T.jsx(aw,{color:"currentColor",width:"1em",height:"1em"}),className:s,__css:o,...a}=e,l=vt("chakra-button__spinner",s),u=n==="start"?"marginEnd":"marginStart",c=M.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[u]:t?r:0,fontSize:"1em",lineHeight:"normal",...o}),[o,t,u,r]);return T.jsx(je.div,{className:l,...a,__css:c,children:i})}cM.displayName="ButtonSpinner";var aa=Ve((e,t)=>{const n=jlt(),r=Ju("Button",{...n,...e}),{isDisabled:i=n==null?void 0:n.isDisabled,isLoading:s,isActive:o,children:a,leftIcon:l,rightIcon:u,loadingText:c,iconSpacing:f="0.5rem",type:d,spinner:h,spinnerPlacement:p="start",className:g,as:m,...y}=Ur(e),v=M.useMemo(()=>{const C={...r==null?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:C}}},[r,n]),{ref:b,type:x}=Vlt(m),w={rightIcon:u,leftIcon:l,iconSpacing:f,children:a};return T.jsxs(je.button,{ref:mlt(t,b),as:m,type:d??x,"data-active":oo(o),"data-loading":oo(s),__css:v,className:vt("chakra-button",g),...y,disabled:i||s,children:[s&&p==="start"&&T.jsx(cM,{className:"chakra-button__spinner--start",label:c,placement:"start",spacing:f,children:h}),s?c||T.jsx(je.span,{opacity:0,children:T.jsx(IX,{...w})}):T.jsx(IX,{...w}),s&&p==="end"&&T.jsx(cM,{className:"chakra-button__spinner--end",label:c,placement:"end",spacing:f,children:h})]})});aa.displayName="Button";function IX(e){const{leftIcon:t,rightIcon:n,children:r,iconSpacing:i}=e;return T.jsxs(T.Fragment,{children:[t&&T.jsx(uM,{marginEnd:i,children:t}),r,n&&T.jsx(uM,{marginStart:i,children:n})]})}var Qh=Ve((e,t)=>{const{icon:n,children:r,isRound:i,"aria-label":s,...o}=e,a=n||r,l=M.isValidElement(a)?M.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return T.jsx(aa,{padding:"0",borderRadius:i?"full":void 0,ref:t,"aria-label":s,...o,children:l})});Qh.displayName="IconButton";var[Wlt,Hlt]=Cr({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[qlt,tpe]=Cr({strict:!1,name:"FormControlContext"});function Glt(e){const{id:t,isRequired:n,isInvalid:r,isDisabled:i,isReadOnly:s,...o}=e,a=M.useId(),l=t||`field-${a}`,u=`${l}-label`,c=`${l}-feedback`,f=`${l}-helptext`,[d,h]=M.useState(!1),[p,g]=M.useState(!1),[m,y]=M.useState(!1),v=M.useCallback((S={},k=null)=>({id:f,...S,ref:Kh(k,$=>{$&&g(!0)})}),[f]),b=M.useCallback((S={},k=null)=>({...S,ref:k,"data-focus":oo(m),"data-disabled":oo(i),"data-invalid":oo(r),"data-readonly":oo(s),id:S.id!==void 0?S.id:u,htmlFor:S.htmlFor!==void 0?S.htmlFor:l}),[l,i,m,r,s,u]),x=M.useCallback((S={},k=null)=>({id:c,...S,ref:Kh(k,$=>{$&&h(!0)}),"aria-live":"polite"}),[c]),w=M.useCallback((S={},k=null)=>({...S,...o,ref:k,role:"group","data-focus":oo(m),"data-disabled":oo(i),"data-invalid":oo(r),"data-readonly":oo(s)}),[o,i,m,r,s]),C=M.useCallback((S={},k=null)=>({...S,ref:k,role:"presentation","aria-hidden":!0,children:S.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!s,isDisabled:!!i,isFocused:!!m,onFocus:()=>y(!0),onBlur:()=>y(!1),hasFeedbackText:d,setHasFeedbackText:h,hasHelpText:p,setHasHelpText:g,id:l,labelId:u,feedbackId:c,helpTextId:f,htmlProps:o,getHelpTextProps:v,getErrorMessageProps:x,getRootProps:w,getLabelProps:b,getRequiredIndicatorProps:C}}var npe=Ve(function(t,n){const r=Zu("Form",t),i=Ur(t),{getRootProps:s,htmlProps:o,...a}=Glt(i),l=vt("chakra-form-control",t.className);return T.jsx(qlt,{value:a,children:T.jsx(Wlt,{value:r,children:T.jsx(je.div,{...s({},n),className:l,__css:r.container})})})});npe.displayName="FormControl";var Xlt=Ve(function(t,n){const r=tpe(),i=Hlt(),s=vt("chakra-form__helper-text",t.className);return T.jsx(je.div,{...r==null?void 0:r.getHelpTextProps(t,n),__css:i.helperText,className:s})});Xlt.displayName="FormHelperText";function rpe(e){const{isDisabled:t,isInvalid:n,isReadOnly:r,isRequired:i,...s}=Ylt(e);return{...s,disabled:t,readOnly:r,required:i,"aria-invalid":mR(n),"aria-required":mR(i),"aria-readonly":mR(r)}}function Ylt(e){var t,n,r;const i=tpe(),{id:s,disabled:o,readOnly:a,required:l,isRequired:u,isInvalid:c,isReadOnly:f,isDisabled:d,onFocus:h,onBlur:p,...g}=e,m=e["aria-describedby"]?[e["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&m.push(i.feedbackId),i!=null&&i.hasHelpText&&m.push(i.helpTextId),{...g,"aria-describedby":m.join(" ")||void 0,id:s??(i==null?void 0:i.id),isDisabled:(t=o??d)!=null?t:i==null?void 0:i.isDisabled,isReadOnly:(n=a??f)!=null?n:i==null?void 0:i.isReadOnly,isRequired:(r=l??u)!=null?r:i==null?void 0:i.isRequired,isInvalid:c??(i==null?void 0:i.isInvalid),onFocus:pf(i==null?void 0:i.onFocus,h),onBlur:pf(i==null?void 0:i.onBlur,p)}}var ipe={exports:{}},Klt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Qlt=Klt,Jlt=Qlt;function spe(){}function ope(){}ope.resetWarningCache=spe;var Zlt=function(){function e(r,i,s,o,a,l){if(l!==Jlt){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ope,resetWarningCache:spe};return n.PropTypes=n,n};ipe.exports=Zlt();var ape=ipe.exports,[eut,tut]=Cr({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),lpe=Ve(function(t,n){const r=Zu("Input",t),{children:i,className:s,...o}=Ur(t),a=vt("chakra-input__group",s),l={},u=KA(i),c=r.field;u.forEach(d=>{var h,p;r&&(c&&d.type.id==="InputLeftElement"&&(l.paddingStart=(h=c.height)!=null?h:c.h),c&&d.type.id==="InputRightElement"&&(l.paddingEnd=(p=c.height)!=null?p:c.h),d.type.id==="InputRightAddon"&&(l.borderEndRadius=0),d.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const f=u.map(d=>{var h,p;const g=fde({size:((h=d.props)==null?void 0:h.size)||t.size,variant:((p=d.props)==null?void 0:p.variant)||t.variant});return d.type.id!=="Input"?M.cloneElement(d,g):M.cloneElement(d,Object.assign(g,l,d.props))});return T.jsx(je.div,{className:a,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...o,children:T.jsx(eut,{value:r,children:f})})});lpe.displayName="InputGroup";var nut=je("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),QA=Ve(function(t,n){var r,i;const{placement:s="left",...o}=t,a=tut(),l=a.field,c={[s==="left"?"insetStart":"insetEnd"]:"0",width:(r=l==null?void 0:l.height)!=null?r:l==null?void 0:l.h,height:(i=l==null?void 0:l.height)!=null?i:l==null?void 0:l.h,fontSize:l==null?void 0:l.fontSize,...a.element};return T.jsx(nut,{ref:n,__css:c,...o})});QA.id="InputElement";QA.displayName="InputElement";var upe=Ve(function(t,n){const{className:r,...i}=t,s=vt("chakra-input__left-element",r);return T.jsx(QA,{ref:n,placement:"left",className:s,...i})});upe.id="InputLeftElement";upe.displayName="InputLeftElement";var e7=Ve(function(t,n){const{className:r,...i}=t,s=vt("chakra-input__right-element",r);return T.jsx(QA,{ref:n,placement:"right",className:s,...i})});e7.id="InputRightElement";e7.displayName="InputRightElement";var Ub=Ve(function(t,n){const{htmlSize:r,...i}=t,s=Zu("Input",i),o=Ur(i),a=rpe(o),l=vt("chakra-input",t.className);return T.jsx(je.input,{size:r,...a,__css:s.field,ref:n,className:l})});Ub.displayName="Input";Ub.id="Input";var lE=Ve(function(t,n){const r=Ju("Link",t),{className:i,isExternal:s,...o}=Ur(t);return T.jsx(je.a,{target:s?"_blank":void 0,rel:s?"noopener":void 0,ref:n,className:vt("chakra-link",i),...o,__css:r})});lE.displayName="Link";var[rut,cpe]=Cr({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),t7=Ve(function(t,n){const r=Zu("List",t),{children:i,styleType:s="none",stylePosition:o,spacing:a,...l}=Ur(t),u=KA(i),f=a?{["& > *:not(style) ~ *:not(style)"]:{mt:a}}:{};return T.jsx(rut,{value:r,children:T.jsx(je.ul,{ref:n,listStyleType:s,listStylePosition:o,role:"list",__css:{...r.container,...f},...l,children:u})})});t7.displayName="List";var lw=Ve((e,t)=>{const{as:n,...r}=e;return T.jsx(t7,{ref:t,as:"ol",styleType:"decimal",marginStart:"1em",...r})});lw.displayName="OrderedList";var iut=Ve(function(t,n){const{as:r,...i}=t;return T.jsx(t7,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...i})});iut.displayName="UnorderedList";var fpe=Ve(function(t,n){const r=cpe();return T.jsx(je.li,{ref:n,...t,__css:r.item})});fpe.displayName="ListItem";var sut=Ve(function(t,n){const r=cpe();return T.jsx(wt,{ref:n,role:"presentation",...t,__css:r.icon})});sut.displayName="ListIcon";var Rv=Ve(function(t,n){const{templateAreas:r,gap:i,rowGap:s,columnGap:o,column:a,row:l,autoFlow:u,autoRows:c,templateRows:f,autoColumns:d,templateColumns:h,...p}=t,g={display:"grid",gridTemplateAreas:r,gridGap:i,gridRowGap:s,gridColumnGap:o,gridAutoColumns:d,gridColumn:a,gridRow:l,gridAutoFlow:u,gridAutoRows:c,gridTemplateRows:f,gridTemplateColumns:h};return T.jsx(je.div,{ref:n,__css:g,...p})});Rv.displayName="Grid";var dpe=Object.freeze(["base","sm","md","lg","xl","2xl"]);function out(e,t){return Array.isArray(e)?e.map(n=>n===null?null:t(n)):as(e)?Object.keys(e).reduce((n,r)=>(n[r]=t(e[r]),n),{}):e!=null?t(e):null}function aut(e,t=dpe){const n={};return e.forEach((r,i)=>{const s=t[i];r!=null&&(n[s]=r)}),n}var uw=je("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});uw.displayName="Spacer";var un=Ve(function(t,n){const r=Ju("Text",t),{className:i,align:s,decoration:o,casing:a,...l}=Ur(t),u=fde({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return T.jsx(je.p,{ref:n,className:vt("chakra-text",t.className),...u,...l,__css:r})});un.displayName="Text";var hpe=e=>T.jsx(je.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});hpe.displayName="StackItem";function lut(e){const{spacing:t,direction:n}=e,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":out(n,i=>r[i])}}var n7=Ve((e,t)=>{const{isInline:n,direction:r,align:i,justify:s,spacing:o="0.5rem",wrap:a,children:l,divider:u,className:c,shouldWrapChildren:f,...d}=e,h=n?"row":r??"column",p=M.useMemo(()=>lut({spacing:o,direction:h}),[o,h]),g=!!u,m=!f&&!g,y=M.useMemo(()=>{const b=KA(l);return m?b:b.map((x,w)=>{const C=typeof x.key<"u"?x.key:w,S=w+1===b.length,$=f?T.jsx(hpe,{children:x},C):x;if(!g)return $;const F=M.cloneElement(u,{__css:p}),O=S?null:F;return T.jsxs(M.Fragment,{children:[$,O]},C)})},[u,p,g,m,f,l]),v=vt("chakra-stack",c);return T.jsx(je.div,{ref:t,display:"flex",alignItems:i,justifyContent:s,flexDirection:h,flexWrap:a,gap:g?void 0:o,className:v,...d,children:y})});n7.displayName="Stack";var Au=Ve((e,t)=>T.jsx(n7,{align:"center",...e,direction:"column",ref:t}));Au.displayName="VStack";var ppe=Ve((e,t)=>T.jsx(n7,{align:"center",...e,direction:"row",ref:t}));ppe.displayName="HStack";var kp=Ve(function(t,n){const r=Ju("Heading",t),{className:i,...s}=Ur(t);return T.jsx(je.h2,{ref:n,className:vt("chakra-heading",t.className),...s,__css:r})});kp.displayName="Heading";var Vb=je("div");Vb.displayName="Box";var gpe=Ve(function(t,n){const{size:r,centerContent:i=!0,...s}=t,o=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return T.jsx(Vb,{ref:n,boxSize:r,__css:{...o,flexShrink:0,flexGrow:0},...s})});gpe.displayName="Square";var uut=Ve(function(t,n){const{size:r,...i}=t;return T.jsx(gpe,{size:r,ref:n,borderRadius:"9999px",...i})});uut.displayName="Circle";var mpe=Ve(function(t,n){const r=Ju("Badge",t),{className:i,...s}=Ur(t);return T.jsx(je.span,{ref:n,className:vt("chakra-badge",t.className),...s,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...r}})});mpe.displayName="Badge";var Sa=je("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Sa.displayName="Center";var cut={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Ve(function(t,n){const{axis:r="both",...i}=t;return T.jsx(je.div,{ref:n,__css:cut[r],...i,position:"absolute"})});var r7=Ve(function(t,n){const{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:s,borderRightWidth:o,borderWidth:a,borderStyle:l,borderColor:u,...c}=Ju("Divider",t),{className:f,orientation:d="horizontal",__css:h,...p}=Ur(t),g={vertical:{borderLeftWidth:r||o||a||"1px",height:"100%"},horizontal:{borderBottomWidth:i||s||a||"1px",width:"100%"}};return T.jsx(je.hr,{ref:n,"aria-orientation":d,...p,__css:{...c,border:"0",borderColor:u,borderStyle:l,...g[d],...h},className:vt("chakra-divider",f)})});r7.displayName="Divider";var Zt=Ve(function(t,n){const{direction:r,align:i,justify:s,wrap:o,basis:a,grow:l,shrink:u,...c}=t,f={display:"flex",flexDirection:r,alignItems:i,justifyContent:s,flexWrap:o,flexBasis:a,flexGrow:l,flexShrink:u};return T.jsx(je.div,{ref:n,__css:f,...c})});Zt.displayName="Flex";function fut(e,t={}){const{ssr:n=!0,fallback:r}=t,{getWindow:i}=wrt(),s=Array.isArray(e)?e:[e];let o=Array.isArray(r)?r:[r];o=o.filter(u=>u!=null);const[a,l]=M.useState(()=>s.map((u,c)=>({media:u,matches:n?!!o[c]:i().matchMedia(u).matches})));return M.useEffect(()=>{const u=i();l(s.map(d=>({media:d,matches:u.matchMedia(d).matches})));const c=s.map(d=>u.matchMedia(d)),f=d=>{l(h=>h.slice().map(p=>p.media===d.media?{...p,matches:d.matches}:p))};return c.forEach(d=>{typeof d.addListener=="function"?d.addListener(f):d.addEventListener("change",f)}),()=>{c.forEach(d=>{typeof d.removeListener=="function"?d.removeListener(f):d.removeEventListener("change",f)})}},[i]),a.map(u=>u.matches)}function dut(e,t,n=dpe){let r=Object.keys(e).indexOf(t);if(r!==-1)return e[t];let i=n.indexOf(t);for(;i>=0;){const s=n[i];if(e.hasOwnProperty(s)){r=i;break}i-=1}if(r!==-1){const s=n[r];return e[s]}}function hut(e){var t,n;const r=as(e)?e:{fallback:e??"base"},s=m9().__breakpoints.details.map(({minMaxQuery:u,breakpoint:c})=>({breakpoint:c,query:u.replace("@media screen and ","")})),o=s.map(u=>u.breakpoint===r.fallback),l=fut(s.map(u=>u.query),{fallback:o,ssr:r.ssr}).findIndex(u=>u==!0);return(n=(t=s[l])==null?void 0:t.breakpoint)!=null?n:r.fallback}function ug(e,t){var n;const r=as(t)?t:{fallback:"base"},i=hut(r),s=m9();if(!i)return;const o=Array.from(((n=s.__breakpoints)==null?void 0:n.keys)||[]),a=Array.isArray(e)?Object.fromEntries(Object.entries(aut(e,o)).map(([l,u])=>[l,u])):e;return dut(a,i,o)}function put(){const e=M.useRef(new Map),t=e.current,n=M.useCallback((i,s,o,a)=>{e.current.set(o,{type:s,el:i,options:a}),i.addEventListener(s,o,a)},[]),r=M.useCallback((i,s,o,a)=>{i.removeEventListener(s,o,a),e.current.delete(o)},[]);return M.useEffect(()=>()=>{t.forEach((i,s)=>{r(i.el,i.type,s,i.options)})},[r,t]),{add:n,remove:r}}function XR(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function gut(e={}){const{ref:t,isDisabled:n,isFocusable:r,clickOnEnter:i=!0,clickOnSpace:s=!0,onMouseDown:o,onMouseUp:a,onClick:l,onKeyDown:u,onKeyUp:c,tabIndex:f,onMouseOver:d,onMouseLeave:h,...p}=e,[g,m]=M.useState(!0),[y,v]=M.useState(!1),b=put(),x=j=>{j&&j.tagName!=="BUTTON"&&m(!1)},w=g?f:f||0,C=n&&!r,S=M.useCallback(j=>{if(n){j.stopPropagation(),j.preventDefault();return}j.currentTarget.focus(),l==null||l(j)},[n,l]),k=M.useCallback(j=>{y&&XR(j)&&(j.preventDefault(),j.stopPropagation(),v(!1),b.remove(document,"keyup",k,!1))},[y,b]),$=M.useCallback(j=>{if(u==null||u(j),n||j.defaultPrevented||j.metaKey||!XR(j.nativeEvent)||g)return;const z=i&&j.key==="Enter";s&&j.key===" "&&(j.preventDefault(),v(!0)),z&&(j.preventDefault(),j.currentTarget.click()),b.add(document,"keyup",k,!1)},[n,g,u,i,s,b,k]),F=M.useCallback(j=>{if(c==null||c(j),n||j.defaultPrevented||j.metaKey||!XR(j.nativeEvent)||g)return;s&&j.key===" "&&(j.preventDefault(),v(!1),j.currentTarget.click())},[s,g,n,c]),O=M.useCallback(j=>{j.button===0&&(v(!1),b.remove(document,"mouseup",O,!1))},[b]),B=M.useCallback(j=>{if(j.button!==0)return;if(n){j.stopPropagation(),j.preventDefault();return}g||v(!0),j.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",O,!1),o==null||o(j)},[n,g,o,b,O]),D=M.useCallback(j=>{j.button===0&&(g||v(!1),a==null||a(j))},[a,g]),N=M.useCallback(j=>{if(n){j.preventDefault();return}d==null||d(j)},[n,d]),A=M.useCallback(j=>{y&&(j.preventDefault(),v(!1)),h==null||h(j)},[y,h]),P=Kh(t,x);return g?{...p,ref:P,type:"button","aria-disabled":C?void 0:n,disabled:C,onClick:S,onMouseDown:o,onMouseUp:a,onKeyUp:c,onKeyDown:u,onMouseOver:d,onMouseLeave:h}:{...p,ref:P,role:"button","data-active":oo(y),"aria-disabled":n?"true":void 0,tabIndex:C?void 0:w,onClick:S,onMouseDown:B,onMouseUp:D,onKeyUp:F,onKeyDown:$,onMouseOver:N,onMouseLeave:A}}function mut(e){const{wasSelected:t,enabled:n,isSelected:r,mode:i="unmount"}=e;return!!(!n||r||i==="keepMounted"&&t)}var ype=Ve(function(t,n){const{children:r,placeholder:i,className:s,...o}=t;return T.jsxs(je.select,{...o,ref:n,className:vt("chakra-select",s),children:[i&&T.jsx("option",{value:"",children:i}),r]})});ype.displayName="SelectField";function yut(e,t){const n={},r={};for(const[i,s]of Object.entries(e))t.includes(i)?n[i]=s:r[i]=s;return[n,r]}var i7=Ve((e,t)=>{var n;const r=Zu("Select",e),{rootProps:i,placeholder:s,icon:o,color:a,height:l,h:u,minH:c,minHeight:f,iconColor:d,iconSize:h,...p}=Ur(e),[g,m]=yut(p,iKe),y=rpe(m),v={width:"100%",height:"fit-content",position:"relative",color:a},b={paddingEnd:"2rem",...r.field,_focus:{zIndex:"unset",...(n=r.field)==null?void 0:n._focus}};return T.jsxs(je.div,{className:"chakra-select__wrapper",__css:v,...g,...i,children:[T.jsx(ype,{ref:t,height:u??l,minH:c??f,placeholder:s,...y,__css:b,children:e.children}),T.jsx(vpe,{"data-disabled":oo(y.disabled),...(d||a)&&{color:d||a},__css:r.icon,...h&&{fontSize:h},children:o})]})});i7.displayName="Select";var vut=e=>T.jsx("svg",{viewBox:"0 0 24 24",...e,children:T.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),but=je("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),vpe=e=>{const{children:t=T.jsx(vut,{}),...n}=e,r=M.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return T.jsx(but,{...n,className:"chakra-select__icon-wrapper",children:M.isValidElement(t)?r:null})};vpe.displayName="SelectIcon";var[xut,wut,Sut,Eut]=Hhe();function Cut(e){var t;const{defaultIndex:n,onChange:r,index:i,isManual:s,isLazy:o,lazyBehavior:a="unmount",orientation:l="horizontal",direction:u="ltr",...c}=e,[f,d]=M.useState(n??0),[h,p]=Ghe({defaultValue:n??0,value:i,onChange:r});M.useEffect(()=>{i!=null&&d(i)},[i]);const g=Sut(),m=M.useId();return{id:`tabs-${(t=e.id)!=null?t:m}`,selectedIndex:h,focusedIndex:f,setSelectedIndex:p,setFocusedIndex:d,isManual:s,isLazy:o,lazyBehavior:a,orientation:l,descendants:g,direction:u,htmlProps:c}}var[kut,JA]=Cr({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function _ut(e){const{focusedIndex:t,orientation:n,direction:r}=JA(),i=wut(),s=M.useCallback(o=>{const a=()=>{var v;const b=i.nextEnabled(t);b&&((v=b.node)==null||v.focus())},l=()=>{var v;const b=i.prevEnabled(t);b&&((v=b.node)==null||v.focus())},u=()=>{var v;const b=i.firstEnabled();b&&((v=b.node)==null||v.focus())},c=()=>{var v;const b=i.lastEnabled();b&&((v=b.node)==null||v.focus())},f=n==="horizontal",d=n==="vertical",h=o.key,p=r==="ltr"?"ArrowLeft":"ArrowRight",g=r==="ltr"?"ArrowRight":"ArrowLeft",y={[p]:()=>f&&l(),[g]:()=>f&&a(),ArrowDown:()=>d&&a(),ArrowUp:()=>d&&l(),Home:u,End:c}[h];y&&(o.preventDefault(),y(o))},[i,t,n,r]);return{...e,role:"tablist","aria-orientation":n,onKeyDown:pf(e.onKeyDown,s)}}function $ut(e){const{isDisabled:t=!1,isFocusable:n=!1,...r}=e,{setSelectedIndex:i,isManual:s,id:o,setFocusedIndex:a,selectedIndex:l}=JA(),{index:u,register:c}=Eut({disabled:t&&!n}),f=u===l,d=()=>{i(u)},h=()=>{a(u),!s&&!(t&&n)&&i(u)};return{...gut({...r,ref:Kh(c,e.ref),isDisabled:t,isFocusable:n,onClick:pf(e.onClick,d)}),id:bpe(o,u),role:"tab",tabIndex:f?0:-1,type:"button","aria-selected":f,"aria-controls":xpe(o,u),onFocus:t?void 0:pf(e.onFocus,h)}}var[Aut,Tut]=Cr({});function Rut(e){const t=JA(),{id:n,selectedIndex:r}=t,s=KA(e.children).map((o,a)=>M.createElement(Aut,{key:a,value:{isSelected:a===r,id:xpe(n,a),tabId:bpe(n,a),selectedIndex:r}},o));return{...e,children:s}}function Fut(e){const{children:t,...n}=e,{isLazy:r,lazyBehavior:i}=JA(),{isSelected:s,id:o,tabId:a}=Tut(),l=M.useRef(!1);s&&(l.current=!0);const u=mut({wasSelected:l.current,isSelected:s,enabled:r,mode:i});return{tabIndex:0,...n,children:u?t:null,role:"tabpanel","aria-labelledby":a,hidden:!s,id:o}}function bpe(e,t){return`${e}--tab-${t}`}function xpe(e,t){return`${e}--tabpanel-${t}`}var[Put,ZA]=Cr({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),s7=Ve(function(t,n){const r=Zu("Tabs",t),{children:i,className:s,...o}=Ur(t),{htmlProps:a,descendants:l,...u}=Cut(o),c=M.useMemo(()=>u,[u]),{isFitted:f,...d}=a,h={position:"relative",...r.root};return T.jsx(xut,{value:l,children:T.jsx(kut,{value:c,children:T.jsx(Put,{value:r,children:T.jsx(je.div,{className:vt("chakra-tabs",s),ref:n,...d,__css:h,children:i})})})})});s7.displayName="Tabs";var o7=Ve(function(t,n){const r=_ut({...t,ref:n}),s={display:"flex",...ZA().tablist};return T.jsx(je.div,{...r,className:vt("chakra-tabs__tablist",t.className),__css:s})});o7.displayName="TabList";var eT=Ve(function(t,n){const r=Fut({...t,ref:n}),i=ZA();return T.jsx(je.div,{outline:"0",...r,className:vt("chakra-tabs__tab-panel",t.className),__css:i.tabpanel})});eT.displayName="TabPanel";var a7=Ve(function(t,n){const r=Rut(t),i=ZA();return T.jsx(je.div,{...r,width:"100%",ref:n,className:vt("chakra-tabs__tab-panels",t.className),__css:i.tabpanels})});a7.displayName="TabPanels";var l7=Ve(function(t,n){const r=ZA(),i=$ut({...t,ref:n}),s={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...r.tab};return T.jsx(je.button,{...i,className:vt("chakra-tabs__tab",t.className),__css:s})});l7.displayName="Tab";var[Out,wpe]=Cr({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),u7=Ve((e,t)=>{const n=Zu("Tag",e),r=Ur(e),i={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...n.container};return T.jsx(Out,{value:n,children:T.jsx(je.span,{ref:t,...r,__css:i})})});u7.displayName="Tag";var c7=Ve((e,t)=>{const n=wpe();return T.jsx(je.span,{ref:t,noOfLines:1,...e,__css:n.label})});c7.displayName="TagLabel";var Mut=Ve((e,t)=>T.jsx(wt,{ref:t,verticalAlign:"top",marginEnd:"0.5rem",...e}));Mut.displayName="TagLeftIcon";var Dut=Ve((e,t)=>T.jsx(wt,{ref:t,verticalAlign:"top",marginStart:"0.5rem",...e}));Dut.displayName="TagRightIcon";var Spe=e=>T.jsx(wt,{verticalAlign:"inherit",viewBox:"0 0 512 512",...e,children:T.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});Spe.displayName="TagCloseIcon";var Epe=Ve((e,t)=>{const{isDisabled:n,children:r,...i}=e,o={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...wpe().closeButton};return T.jsx(je.button,{ref:t,"aria-label":"close",...i,type:"button",disabled:n,__css:o,children:r||T.jsx(Spe,{})})});Epe.displayName="TagCloseButton";function Nut(e){const{colorMode:t}=ty(),n=Al(u=>u.data),r=e.specs[e.specIndex],i=t==="dark"?"dark":void 0,[s,o]=ug({base:[window.innerWidth-100,Math.min(window.innerHeight-250,500)],lg:[Math.min(window.innerWidth-250,600),Math.min(window.innerHeight-250,600)]})??[300,300],a={...r,width:s,mark:{..."mark"in r?r.mark:{}},height:o,background:"transparent",data:{name:rH},config:{..."config"in r?r.config:{},title:{fontSize:18,offset:16},axis:{labelFontSize:14,titleFontSize:16,titlePadding:16},autosize:{type:"fit"},legend:{direction:"horizontal",titleLimit:s,gradientLength:s,orient:"bottom",labelFontSize:14,titleFontSize:16},numberFormat:".3~s"}};return{data:{[rH]:n},chartTheme:i,spec:a}}function Iut(){var h;const e=st(p=>p.charts),t=st(p=>p.fields),n=st(p=>p.setCurrentChartIndex),r=st(p=>p.setCurrentChartPreferred),i=st(p=>p.renewCurrentChart),s=st(p=>p.currentChartIndex),o=0<=s&&s<e.length&&((h=e[s])==null?void 0:h.preferred),a=s!==-1;return{sessionInitialized:t.length>0,chartDisplaying:a,currentChartPreferred:o,handleRenewChart:i,handleNextChart:()=>n(s+1),handlePrevChart:()=>n(s-1),handlePreferChart:()=>{r(!o)}}}function Cpe(){const e=Al(u=>u.writingFile),t=Al(u=>u.writeFile),n=st(u=>u.loadingSession),r=st(u=>u.loadSession),i=st(u=>u.resetSession),s=st(u=>u.filename),o=st(u=>u.setCurrentChartIndex),a=ci(u=>u.setTabByName);return{loading:e||n,initializeSession:async u=>{const c=u instanceof File?u.name:Ble(u);c&&(c!==s&&i(),await t(u),await r(c),a("fields"),o(0))}}}function Lut(){const{loading:e,initializeSession:t}=Cpe(),[n,r]=M.useState(null);return{loading:e,selectedDemo:n,handleSubmit:()=>{n!=null&&n.href&&t(n.href)},handleDemoSelect:o=>{r(o)}}}const zut=(e,t={})=>{const{latency:n=200}=t,[r,i]=M.useState(0),[s,o]=M.useState(0),a=M.useCallback(()=>{o(Date.now())},[]),l=M.useCallback(c=>{if(Date.now()-s>500)return;const d=Date.now();d-r<n&&(c.preventDefault(),e(c)),i(d)},[e,r,n,s]),u=M.useCallback(c=>{e(c)},[e]);return{onTouchStart:a,onTouchEnd:l,onDoubleClick:u}};function Bu(e){return Array.isArray?Array.isArray(e):$pe(e)==="[object Array]"}const jut=1/0;function But(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-jut?"-0":t}function Uut(e){return e==null?"":But(e)}function ll(e){return typeof e=="string"}function kpe(e){return typeof e=="number"}function Vut(e){return e===!0||e===!1||Wut(e)&&$pe(e)=="[object Boolean]"}function _pe(e){return typeof e=="object"}function Wut(e){return _pe(e)&&e!==null}function Cs(e){return e!=null}function YR(e){return!e.trim().length}function $pe(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Hut="Incorrect 'index' type",qut=e=>`Invalid value for key ${e}`,Gut=e=>`Pattern length exceeds max of ${e}.`,Xut=e=>`Missing ${e} property in key`,Yut=e=>`Property 'weight' in key '${e}' must be a positive integer`,LX=Object.prototype.hasOwnProperty;class Kut{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=Ape(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ape(e){let t=null,n=null,r=null,i=1,s=null;if(ll(e)||Bu(e))r=e,t=zX(e),n=fM(e);else{if(!LX.call(e,"name"))throw new Error(Xut("name"));const o=e.name;if(r=o,LX.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(Yut(o));t=zX(o),n=fM(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function zX(e){return Bu(e)?e:e.split(".")}function fM(e){return Bu(e)?e.join("."):e}function Qut(e,t){let n=[],r=!1;const i=(s,o,a)=>{if(Cs(s))if(!o[a])n.push(s);else{let l=o[a];const u=s[l];if(!Cs(u))return;if(a===o.length-1&&(ll(u)||kpe(u)||Vut(u)))n.push(Uut(u));else if(Bu(u)){r=!0;for(let c=0,f=u.length;c<f;c+=1)i(u[c],o,a+1)}else o.length&&i(u,o,a+1)}};return i(e,ll(t)?t.split("."):t,0),r?n:n[0]}const Jut={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Zut={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},ect={location:0,threshold:.6,distance:100},tct={useExtendedSearch:!1,getFn:Qut,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Je={...Zut,...Jut,...ect,...tct};const nct=/[^ ]+/g;function rct(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(nct).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),a=parseFloat(Math.round(o*r)/r);return n.set(s,a),a},clear(){n.clear()}}}class f7{constructor({getFn:t=Je.getFn,fieldNormWeight:n=Je.fieldNormWeight}={}){this.norm=rct(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ll(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();ll(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Cs(t)||YR(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Cs(o)){if(Bu(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(Cs(c))if(ll(c)&&!YR(c)){let f={v:c,i:u,n:this.norm.get(c)};a.push(f)}else Bu(c)&&c.forEach((f,d)=>{l.push({nestedArrIndex:d,value:f})})}r.$[s]=a}else if(ll(o)&&!YR(o)){let a={v:o,n:this.norm.get(o)};r.$[s]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Tpe(e,t,{getFn:n=Je.getFn,fieldNormWeight:r=Je.fieldNormWeight}={}){const i=new f7({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(Ape)),i.setSources(t),i.create(),i}function ict(e,{getFn:t=Je.getFn,fieldNormWeight:n=Je.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new f7({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function nS(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Je.distance,ignoreLocation:s=Je.ignoreLocation}={}){const o=t/e.length;if(s)return o;const a=Math.abs(r-n);return i?o+a/i:a?1:o}function sct(e=[],t=Je.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let a=e[s];a&&r===-1?r=s:!a&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const jd=32;function oct(e,t,n,{location:r=Je.location,distance:i=Je.distance,threshold:s=Je.threshold,findAllMatches:o=Je.findAllMatches,minMatchCharLength:a=Je.minMatchCharLength,includeMatches:l=Je.includeMatches,ignoreLocation:u=Je.ignoreLocation}={}){if(t.length>jd)throw new Error(Gut(jd));const c=t.length,f=e.length,d=Math.max(0,Math.min(r,f));let h=s,p=d;const g=a>1||l,m=g?Array(f):[];let y;for(;(y=e.indexOf(t,p))>-1;){let S=nS(t,{currentLocation:y,expectedLocation:d,distance:i,ignoreLocation:u});if(h=Math.min(S,h),p=y+c,g){let k=0;for(;k<c;)m[y+k]=1,k+=1}}p=-1;let v=[],b=1,x=c+f;const w=1<<c-1;for(let S=0;S<c;S+=1){let k=0,$=x;for(;k<$;)nS(t,{errors:S,currentLocation:d+$,expectedLocation:d,distance:i,ignoreLocation:u})<=h?k=$:x=$,$=Math.floor((x-k)/2+k);x=$;let F=Math.max(1,d-$+1),O=o?f:Math.min(d+$,f)+c,B=Array(O+2);B[O+1]=(1<<S)-1;for(let N=O;N>=F;N-=1){let A=N-1,P=n[e.charAt(A)];if(g&&(m[A]=+!!P),B[N]=(B[N+1]<<1|1)&P,S&&(B[N]|=(v[N+1]|v[N])<<1|1|v[N+1]),B[N]&w&&(b=nS(t,{errors:S,currentLocation:A,expectedLocation:d,distance:i,ignoreLocation:u}),b<=h)){if(h=b,p=A,p<=d)break;F=Math.max(1,2*d-p)}}if(nS(t,{errors:S+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>h)break;v=B}const C={isMatch:p>=0,score:Math.max(.001,b)};if(g){const S=sct(m,a);S.length?l&&(C.indices=S):C.isMatch=!1}return C}function act(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class Rpe{constructor(t,{location:n=Je.location,threshold:r=Je.threshold,distance:i=Je.distance,includeMatches:s=Je.includeMatches,findAllMatches:o=Je.findAllMatches,minMatchCharLength:a=Je.minMatchCharLength,isCaseSensitive:l=Je.isCaseSensitive,ignoreLocation:u=Je.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(d,h)=>{this.chunks.push({pattern:d,alphabet:act(d),startIndex:h})},f=this.pattern.length;if(f>jd){let d=0;const h=f%jd,p=f-h;for(;d<p;)c(this.pattern.substr(d,jd),d),d+=jd;if(h){const g=f-jd;c(this.pattern.substr(g),g)}}else c(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,t.length-1]]),p}const{location:i,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],f=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:g,startIndex:m})=>{const{isMatch:y,score:v,indices:b}=oct(t,p,g,{location:i+m,distance:s,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});y&&(d=!0),f+=v,y&&b&&(c=[...c,...b])});let h={isMatch:d,score:d?f/this.chunks.length:1};return d&&r&&(h.indices=c),h}}class nd{constructor(t){this.pattern=t}static isMultiMatch(t){return jX(t,this.multiRegex)}static isSingleMatch(t){return jX(t,this.singleRegex)}search(){}}function jX(e,t){const n=e.match(t);return n?n[1]:null}class lct extends nd{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class uct extends nd{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class cct extends nd{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class fct extends nd{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class dct extends nd{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class hct extends nd{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Fpe extends nd{constructor(t,{location:n=Je.location,threshold:r=Je.threshold,distance:i=Je.distance,includeMatches:s=Je.includeMatches,findAllMatches:o=Je.findAllMatches,minMatchCharLength:a=Je.minMatchCharLength,isCaseSensitive:l=Je.isCaseSensitive,ignoreLocation:u=Je.ignoreLocation}={}){super(t),this._bitapSearch=new Rpe(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Ppe extends nd{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const dM=[lct,Ppe,cct,fct,hct,dct,uct,Fpe],BX=dM.length,pct=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,gct="|";function mct(e,t={}){return e.split(gct).map(n=>{let r=n.trim().split(pct).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const a=r[s];let l=!1,u=-1;for(;!l&&++u<BX;){const c=dM[u];let f=c.isMultiMatch(a);f&&(i.push(new c(f,t)),l=!0)}if(!l)for(u=-1;++u<BX;){const c=dM[u];let f=c.isSingleMatch(a);if(f){i.push(new c(f,t));break}}}return i})}const yct=new Set([Fpe.type,Ppe.type]);class vct{constructor(t,{isCaseSensitive:n=Je.isCaseSensitive,includeMatches:r=Je.includeMatches,minMatchCharLength:i=Je.minMatchCharLength,ignoreLocation:s=Je.ignoreLocation,findAllMatches:o=Je.findAllMatches,location:a=Je.location,threshold:l=Je.threshold,distance:u=Je.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:o,ignoreLocation:s,location:a,threshold:l,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=mct(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let s=0,o=[],a=0;for(let l=0,u=n.length;l<u;l+=1){const c=n[l];o.length=0,s=0;for(let f=0,d=c.length;f<d;f+=1){const h=c[f],{isMatch:p,indices:g,score:m}=h.search(t);if(p){if(s+=1,a+=m,r){const y=h.constructor.type;yct.has(y)?o=[...o,...g]:o.push(g)}}else{a=0,s=0,o.length=0;break}}if(s){let f={isMatch:!0,score:a/s};return r&&(f.indices=o),f}}return{isMatch:!1,score:1}}}const hM=[];function bct(...e){hM.push(...e)}function pM(e,t){for(let n=0,r=hM.length;n<r;n+=1){let i=hM[n];if(i.condition(e,t))return new i(e,t)}return new Rpe(e,t)}const Uk={AND:"$and",OR:"$or"},gM={PATH:"$path",PATTERN:"$val"},mM=e=>!!(e[Uk.AND]||e[Uk.OR]),xct=e=>!!e[gM.PATH],wct=e=>!Bu(e)&&_pe(e)&&!mM(e),UX=e=>({[Uk.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Ope(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=xct(i);if(!o&&s.length>1&&!mM(i))return r(UX(i));if(wct(i)){const l=o?i[gM.PATH]:s[0],u=o?i[gM.PATTERN]:i[l];if(!ll(u))throw new Error(qut(l));const c={keyId:fM(l),pattern:u};return n&&(c.searcher=pM(u,t)),c}let a={children:[],operator:s[0]};return s.forEach(l=>{const u=i[l];Bu(u)&&u.forEach(c=>{a.children.push(r(c))})}),a};return mM(e)||(e=UX(e)),r(e)}function Sct(e,{ignoreFieldNorm:t=Je.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const a=i?i.weight:null;r*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(t?1:s))}),n.score=r})}function Ect(e,t){const n=e.matches;t.matches=[],Cs(n)&&n.forEach(r=>{if(!Cs(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function Cct(e,t){t.score=e.score}function kct(e,t,{includeMatches:n=Je.includeMatches,includeScore:r=Je.includeScore}={}){const i=[];return n&&i.push(Ect),r&&i.push(Cct),e.map(s=>{const{idx:o}=s,a={item:t[o],refIndex:o};return i.length&&i.forEach(l=>{l(s,a)}),a})}class ny{constructor(t,n={},r){this.options={...Je,...n},this.options.useExtendedSearch,this._keyStore=new Kut(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof f7))throw new Error(Hut);this._myIndex=n||Tpe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Cs(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:a}=this.options;let l=ll(t)?ll(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Sct(l,{ignoreFieldNorm:a}),s&&l.sort(o),kpe(n)&&n>-1&&(l=l.slice(0,n)),kct(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=pM(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:a})=>{if(!Cs(s))return;const{isMatch:l,score:u,indices:c}=n.searchIn(s);l&&i.push({item:s,idx:o,matches:[{score:u,value:s,norm:a,indices:c}]})}),i}_searchLogical(t){const n=Ope(t,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:f,searcher:d}=a,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:d});return h&&h.length?[{idx:u,item:l,matches:h}]:[]}const c=[];for(let f=0,d=a.children.length;f<d;f+=1){const h=a.children[f],p=r(h,l,u);if(p.length)c.push(...p);else if(a.operator===Uk.AND)return[]}return c},i=this._myIndex.records,s={},o=[];return i.forEach(({$:a,i:l})=>{if(Cs(a)){let u=r(n,a,l);u.length&&(s[l]||(s[l]={idx:l,item:a,matches:[]},o.push(s[l])),u.forEach(({matches:c})=>{s[l].matches.push(...c)}))}}),o}_searchObjectList(t){const n=pM(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:a})=>{if(!Cs(o))return;let l=[];r.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:o[c],searcher:n}))}),l.length&&s.push({idx:a,item:o,matches:l})}),s}_findMatches({key:t,value:n,searcher:r}){if(!Cs(n))return[];let i=[];if(Bu(n))n.forEach(({v:s,i:o,n:a})=>{if(!Cs(s))return;const{isMatch:l,score:u,indices:c}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,idx:o,norm:a,indices:c})});else{const{v:s,n:o}=n,{isMatch:a,score:l,indices:u}=r.searchIn(s);a&&i.push({score:l,key:t,value:s,norm:o,indices:u})}return i}}ny.version="7.0.0";ny.createIndex=Tpe;ny.parseIndex=ict;ny.config=Je;ny.parseQuery=Ope;bct(vct);const _ct={includeScore:!1,threshold:.3},$ct=e=>new ny(e,_ct);function Act(e){const t=st(i=>i.fields),n=M.useMemo(()=>t.map(i=>i.name),[t]);return $ct(n).search(e)}function Tct(){var c,f;const{loading:e,initializeSession:t}=Cpe(),[n,r]=M.useState(""),i=M.useRef(null),s=d=>{var p,g;const h=((g=d.target.files)==null?void 0:g[((p=d.target.files)==null?void 0:p.length)-1].name)??"";r(h)},o=d=>{r(d.target.value),i.current&&(i.current.value="",i.current.files=null)},a=()=>{i.current&&i.current.click()},l=()=>{var d,h;if((h=(d=i.current)==null?void 0:d.files)!=null&&h.length){const p=i.current.files[0];t(p)}else aWe(n)&&t(n)},u=!n&&!((f=(c=i.current)==null?void 0:c.files)!=null&&f.length);return{fileInputRef:i,inputDisabled:u,loadingData:e,pathInput:n,handleInputChange:o,handleSubmit:l,handleFileChange:s,handleFileButtonClick:a}}function Rct(e,t){t.domain&&("nice"in e||"quantiles"in e||"padding"in e,e.domain(t.domain))}function Fct(e,t){t.range&&("padding"in e,e.range(t.range))}function Pct(e,t){"align"in e&&"align"in t&&typeof t.align<"u"&&e.align(t.align)}function Oct(e,t){"base"in e&&"base"in t&&typeof t.base<"u"&&e.base(t.base)}function Mct(e,t){"clamp"in e&&"clamp"in t&&typeof t.clamp<"u"&&e.clamp(t.clamp)}function Dct(e,t){"constant"in e&&"constant"in t&&typeof t.constant<"u"&&e.constant(t.constant)}function Nct(e,t){"exponent"in e&&"exponent"in t&&typeof t.exponent<"u"&&e.exponent(t.exponent)}var VX={lab:see,hcl:aee,"hcl-long":lee,hsl:ree,"hsl-long":iee,cubehelix:cee,"cubehelix-long":fee,rgb:DE};function Ict(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return VX[e]}var t=e.type,n=e.gamma,r=VX[t];return typeof n>"u"?r:r.gamma(n)}function Lct(e,t){if("interpolate"in t&&"interpolate"in e&&typeof t.interpolate<"u"){var n=Ict(t.interpolate);e.interpolate(n)}}var zct=new Date(Date.UTC(2020,1,2,3,4,5)),jct="%Y-%m-%d %H:%M";function Bct(e){var t=e.tickFormat(1,jct)(zct);return t==="2020-02-02 03:04"}var WX={day:cl,hour:rx,minute:tx,month:$m,second:na,week:np,year:ha},HX={day:yu,hour:ix,minute:nx,month:Am,second:na,week:ip,year:pa};function Uct(e,t){if("nice"in t&&typeof t.nice<"u"&&"nice"in e){var n=t.nice;if(typeof n=="boolean")n&&e.nice();else if(typeof n=="number")e.nice(n);else{var r=e,i=Bct(r);if(typeof n=="string")r.nice(i?HX[n]:WX[n]);else{var s=n.interval,o=n.step,a=(i?HX[s]:WX[s]).every(o);a!=null&&r.nice(a)}}}}function Vct(e,t){"padding"in e&&"padding"in t&&typeof t.padding<"u"&&e.padding(t.padding),"paddingInner"in e&&"paddingInner"in t&&typeof t.paddingInner<"u"&&e.paddingInner(t.paddingInner),"paddingOuter"in e&&"paddingOuter"in t&&typeof t.paddingOuter<"u"&&e.paddingOuter(t.paddingOuter)}function Wct(e,t){if(t.reverse){var n=e.range().slice().reverse();"padding"in e,e.range(n)}}function Hct(e,t){"round"in t&&typeof t.round<"u"&&(t.round&&"interpolate"in t&&typeof t.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",t):"round"in e?e.round(t.round):"interpolate"in e&&t.round&&e.interpolate(N0))}function qct(e,t){"unknown"in e&&"unknown"in t&&typeof t.unknown<"u"&&e.unknown(t.unknown)}function Gct(e,t){if("zero"in t&&t.zero===!0){var n=e.domain(),r=n[0],i=n[1],s=i<r,o=s?[i,r]:[r,i],a=o[0],l=o[1],u=[Math.min(0,a),Math.max(0,l)];e.domain(s?u.reverse():u)}}var Xct=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],Yct={domain:Rct,nice:Uct,zero:Gct,interpolate:Lct,round:Hct,align:Pct,base:Oct,clamp:Mct,constant:Dct,exponent:Nct,padding:Vct,range:Fct,reverse:Wct,unknown:qct};function Kct(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Set(t),i=Xct.filter(function(s){return r.has(s)});return function(o,a){return typeof a<"u"&&i.forEach(function(l){Yct[l](o,a)}),o}}var Qct=Kct("domain","range","reverse","clamp","interpolate","nice","round","zero");function Jct(e){return Qct(v6(),e)}const rS={TOP:12,RIGHT:10,BOTTOM:12,LEFT:10},Zct=6;function eft({width:e,height:t,r:n,orientation:r="vertical"}){const i=st(h=>h.charts),s=st(h=>h.currentChartIndex),{preferredColor:o}=Hs(),a=ja(tn["gray.400"],tn["gray.600"]),l=r==="vertical"?t-rS.TOP-rS.BOTTOM:e-rS.LEFT-rS.RIGHT,u=r==="vertical"?e/2:t/2,c=Math.min(l,(Zct+2*n)*i.length),f=n-Math.floor(i.length/60),d=Jct({domain:[0,i.length-1],range:[l/2-c/2,l/2+c/2]});return i.map((h,p)=>({key:`indicator-${h.key}`,cx:r==="vertical"?u:d(p),cy:r==="vertical"?d(p):u,r:p===s?2*f:f,fill:h.preferred?o:a}))}function Hs(){const e=ug({base:0,lg:"18px"}),t=ug({base:window.innerWidth-2*4,lg:880}),n=ug({base:window.innerHeight-140,lg:window.innerHeight*.8-18}),r=ug({base:!0,lg:!1}),i=ja(tn.white,tn["gray.900"]),s=ja(tn.white,tn["gray.900"]),o=ja(tn["gray.200"],tn["gray.700"]),a=ug({base:"calc(100dvh - 110px)",lg:window.innerHeight*.8-160}),l=5,u="70px",c=ja(tn["gray.100"],tn["gray.800"]),f=ja(Qc[600],Qc[300]),d=ja(Qc[500],Qc[400]),h=ja(tn["red.500"],tn["red.200"]),p=ja(tn["orange.50"],tn["orange.800"]),g=ja(tn["orange.100"],tn["orange.700"]);return{accentColor:f,accentHoverColor:d,borderColor:o,preferredColor:h,buttonColor:c,cardPadding:e,cardWidth:t,cardHeight:n,cardColor:s,drawerBgColor:i,tabPanelHeight:a,tabIconSize:l,thumbnailSize:u,mobile:r,scrollbarStyle:{"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:f,borderRadius:"5px"},"&::-webkit-scrollbar-thumb:hover":{background:d}},accentSelected:p,accentSelectedHover:g}}function Mpe(){const[e,t]=M.useState(()=>Ki.getLoadingStatus()??{loading:!0,loadingPyodide:!0,loadingServer:!0});return M.useEffect(()=>{const n=r=>{t(r)};return Ki.on("loadingStatusChange",n),()=>{Ki.off("loadingStatusChange",n)}},[]),e}const Dpe=M.createContext(void 0);function tft({client:e,eventTypes:t=[],attachTo:n=window,children:r}){return M.useEffect(()=>e.registerLogger(t,n),[n,t,e]),T.jsx(Dpe.Provider,{value:e,children:r})}function d7(e){const t=M.useContext(Dpe);if(!t)throw new Error("useLogger must be used within a LoggerProvider");return t}const nft=(...e)=>{console!=null&&console.warn&&(xh(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},qX={},yM=(...e)=>{xh(e[0])&&qX[e[0]]||(xh(e[0])&&(qX[e[0]]=new Date),nft(...e))},Npe=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},GX=(e,t,n)=>{e.loadNamespaces(t,Npe(e,n))},XX=(e,t,n,r)=>{xh(n)&&(n=[n]),n.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,Npe(e,r))},rft=(e,t,n={})=>!t.languages||!t.languages.length?(yM("i18n.languages were undefined or empty",t.languages),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,i)=>{var s;if(((s=n.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,e))return!1}}),xh=e=>typeof e=="string",ift=e=>typeof e=="object"&&e!==null,sft=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,oft={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},aft=e=>oft[e],lft=e=>e.replace(sft,aft);let vM={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:lft};const uft=(e={})=>{vM={...vM,...e}},cft=()=>vM;let Ipe;const fft=e=>{Ipe=e},dft=()=>Ipe,hft={type:"3rdParty",init(e){uft(e.options.react),fft(e)}},pft=M.createContext();class gft{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{var r;(r=this.usedNamespaces)[n]??(r[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const mft=(e,t)=>{const n=M.useRef();return M.useEffect(()=>{n.current=e},[e,t]),n.current},Lpe=(e,t,n,r)=>e.getFixedT(t,n,r),yft=(e,t,n,r)=>M.useCallback(Lpe(e,t,n,r),[e,t,n,r]),ec=(e,t={})=>{var x,w,C,S;const{i18n:n}=t,{i18n:r,defaultNS:i}=M.useContext(pft)||{},s=n||r||dft();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new gft),!s){yM("You will need to pass in an i18next instance by using initReactI18next");const k=(F,O)=>xh(O)?O:ift(O)&&xh(O.defaultValue)?O.defaultValue:Array.isArray(F)?F[F.length-1]:F,$=[k,{},!1];return $.t=k,$.i18n={},$.ready=!1,$}(x=s.options.react)!=null&&x.wait&&yM("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...cft(),...s.options.react,...t},{useSuspense:a,keyPrefix:l}=o;let u=i||((w=s.options)==null?void 0:w.defaultNS);u=xh(u)?[u]:u||["translation"],(S=(C=s.reportNamespaces).addUsedNamespaces)==null||S.call(C,u);const c=(s.isInitialized||s.initializedStoreOnce)&&u.every(k=>rft(k,s,o)),f=yft(s,t.lng||null,o.nsMode==="fallback"?u:u[0],l),d=()=>f,h=()=>Lpe(s,t.lng||null,o.nsMode==="fallback"?u:u[0],l),[p,g]=M.useState(d);let m=u.join();t.lng&&(m=`${t.lng}${m}`);const y=mft(m),v=M.useRef(!0);M.useEffect(()=>{const{bindI18n:k,bindI18nStore:$}=o;v.current=!0,!c&&!a&&(t.lng?XX(s,t.lng,u,()=>{v.current&&g(h)}):GX(s,u,()=>{v.current&&g(h)})),c&&y&&y!==m&&v.current&&g(h);const F=()=>{v.current&&g(h)};return k&&(s==null||s.on(k,F)),$&&(s==null||s.store.on($,F)),()=>{v.current=!1,s&&(k==null||k.split(" ").forEach(O=>s.off(O,F))),$&&s&&$.split(" ").forEach(O=>s.store.off(O,F))}},[s,m]),M.useEffect(()=>{v.current&&c&&g(d)},[s,l,c]);const b=[p,s,c];if(b.t=p,b.i18n=s,b.ready=c,c||!c&&!a)return b;throw new Promise(k=>{t.lng?XX(s,t.lng,u,()=>k()):GX(s,u,()=>k())})};function vft(){const{fileCache:e,writeFile:t}=Al(),{loadSession:n,filename:r}=st(),{apiKey:i,setApiKey:s}=Zle(),{colorMode:o,toggleColorMode:a}=ty(),[l,u]=M.useState(()=>Ki.getPythonType()),{t:c,i18n:f}=ec(),d=llt(),h=d7();return{python:l,handleServerButtonClick:async()=>{if(!Ki)return;const y=l==="pyodide"?"server":"pyodide";if(!Ki.setPython(y)){d({id:"server-not-available",title:c("toast.server_not_available_title"),description:c("toast.server_not_available_description"),status:"error",duration:3e3,isClosable:!0,position:"bottom",containerStyle:{margin:10}});return}u(y),e&&(await t(e),await n(r))},apiKey:i,handleApiKeyChange:y=>{s(y.target.value)},handleDownloadLogs:()=>{try{h.export()}catch(y){d({title:"Oh no!",description:JSON.stringify(y),status:"error",duration:3e3,isClosable:!0,position:"bottom",containerStyle:{margin:10}})}},colorMode:o,toggleColorMode:a,locale:f.language,setLocale:y=>f.changeLanguage(y)}}function bft(e,t,{signal:n}={}){let r=null;const i=function(...o){r!==null&&clearTimeout(r),!(n!=null&&n.aborted)&&(r=setTimeout(()=>{e(...o),r=null},t))},s=function(){i.cancel()};return i.cancel=function(){r!==null&&(clearTimeout(r),r=null)},n==null||n.addEventListener("abort",s,{once:!0}),i}function ng(e,t){const n={};for(const r of t)n[r]=e[r];return n}function iS(e,t){const n={};for(const[r,i]of Object.entries(e))t(i,r)&&(n[r]=i);return n}function xft(){const e=d7();M.useEffect(()=>{const t=Al.subscribe((s,o)=>{const a=ng(s,["filename"]),l=ng(o,["filename"]);P1(a,l)||e.log("data-store","state",c1(a,l))}),n=ci.subscribe((s,o)=>{const a=iS(s,u=>typeof u!="function"),l=iS(o,u=>typeof u!="function");P1(a,l)||e.log("interaction-store","state",c1(a,l))}),r=st.subscribe((s,o)=>{const a=ng({...s,charts:s.charts.map(u=>ng(u,["key","title","preferred","timestamp"]))},["charts","filename","timestamp","currentChartIndex"]),l=ng({...o,charts:o.charts.map(u=>ng(u,["key","title","preferred","timestamp"]))},["charts","filename","timestamp","currentChartIndex"]);P1(a,l)||e.log("session-store","state",c1(a,l))}),i=Zle.subscribe((s,o)=>{const a=iS(s,u=>typeof u!="function"),l=iS(o,u=>typeof u!="function");P1(a,l)||e.log("settings-store","state",c1(a,l))});return()=>{t(),n(),r(),i()}},[e])}function wft(e,t=100){const n=Al(s=>s.data),[r,i]=M.useState(e.thumbnail);return M.useEffect(()=>{!r&&n&&(async()=>{const o=await iWe(e.specs[0],n,t);i(o)})()},[e.specs,n,r,t]),r}/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */var Sft={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const $n=(e,t)=>{const n=M.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=1.5,className:o="",children:a,...l},u)=>{const c={ref:u,...Sft,width:i,height:i,strokeWidth:s,color:r,className:o,...l};return M.createElement("svg",c,(t==null?void 0:t.map(([f,d])=>M.createElement(f,{key:d.id,...d})))??[],...Array.isArray(a)?a:[a])});return n.displayName=`${e}Icon`,n};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const zpe=$n("ArrowDown01Icon",[["path",{d:"M18 9.00005C18 9.00005 13.5811 15 12 15C10.4188 15 6 9 6 9",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Eft=$n("ArrowUp01Icon",[["path",{d:"M18 15C18 15 13.5811 9.00001 12 9C10.4188 8.99999 6 15 6 15",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Cft=$n("Calendar03Icon",[["path",{d:"M18 2V4M6 2V4",stroke:"currentColor",key:"k0"}],["path",{d:"M11.9955 13H12.0045M11.9955 17H12.0045M15.991 13H16M8 13H8.00897M8 17H8.00897",stroke:"currentColor",key:"k1"}],["path",{d:"M3.5 8H20.5",stroke:"currentColor",key:"k2"}],["path",{d:"M2.5 12.2432C2.5 7.88594 2.5 5.70728 3.75212 4.35364C5.00424 3 7.01949 3 11.05 3H12.95C16.9805 3 18.9958 3 20.2479 4.35364C21.5 5.70728 21.5 7.88594 21.5 12.2432V12.7568C21.5 17.1141 21.5 19.2927 20.2479 20.6464C18.9958 22 16.9805 22 12.95 22H11.05C7.01949 22 5.00424 22 3.75212 20.6464C2.5 19.2927 2.5 17.1141 2.5 12.7568V12.2432Z",stroke:"currentColor",key:"k3"}],["path",{d:"M3 8H21",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const kft=$n("ChartIcon",[["path",{d:"M2 21.5L22 21.5",stroke:"currentColor",key:"k0"}],["path",{d:"M18 15.5H18.009M18 18.5H18.009",stroke:"currentColor",key:"k1"}],["path",{d:"M6 18.5H6.00898M6 15.5H6.00898M6 12.5H6.00898M6 9.5H6.00898",stroke:"currentColor",key:"k2"}],["path",{d:"M7.79063 5.39186L16.2183 9.5904M8 4.5C8 5.60457 7.10457 6.5 6 6.5C4.89543 6.5 4 5.60457 4 4.5C4 3.39543 4.89543 2.5 6 2.5C7.10457 2.5 8 3.39543 8 4.5ZM20 10.5C20 11.6046 19.1046 12.5 18 12.5C16.8954 12.5 16 11.6046 16 10.5C16 9.39543 16.8954 8.5 18 8.5C19.1046 8.5 20 9.39543 20 10.5Z",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const _ft=$n("CloudIcon",[["path",{d:"M17.4776 10.0001C17.485 10 17.4925 10 17.5 10C19.9853 10 22 12.0147 22 14.5C22 16.9853 19.9853 19 17.5 19H7C4.23858 19 2 16.7614 2 14C2 11.4003 3.98398 9.26407 6.52042 9.0227M17.4776 10.0001C17.4924 9.83536 17.5 9.66856 17.5 9.5C17.5 6.46243 15.0376 4 12 4C9.12324 4 6.76233 6.20862 6.52042 9.0227M17.4776 10.0001C17.3753 11.1345 16.9286 12.1696 16.2428 13M6.52042 9.0227C6.67826 9.00768 6.83823 9 7 9C8.12582 9 9.16474 9.37209 10.0005 10",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const $ft=$n("CompassIcon",[["circle",{cx:"12",cy:"13",r:"9",stroke:"currentColor",key:"k0"}],["path",{d:"M12 3.5V2",stroke:"currentColor",key:"k1"}],["path",{d:"M10 2H14",stroke:"currentColor",key:"k2"}],["path",{d:"M14.7728 10.2571C15.5061 10.9837 14.3328 16.8933 13.1289 16.9974C12.1189 17.0848 11.8041 15.0928 11.5914 14.4614C11.3815 13.8383 11.1478 13.6139 10.5298 13.4095C8.95989 12.8901 8.17492 12.6304 8.0195 12.2192C7.60796 11.1304 13.8362 9.32902 14.7728 10.2571Z",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Aft=$n("FileAttachmentIcon",[["path",{d:"M4 12.0004L4 14.5446C4 17.7896 4 19.4121 4.88607 20.5111C5.06508 20.7331 5.26731 20.9354 5.48933 21.1144C6.58831 22.0004 8.21082 22.0004 11.4558 22.0004C12.1614 22.0004 12.5141 22.0004 12.8372 21.8864C12.9044 21.8627 12.9702 21.8354 13.0345 21.8047C13.3436 21.6569 13.593 21.4074 14.0919 20.9085L18.8284 16.172C19.4065 15.5939 19.6955 15.3049 19.8478 14.9374C20 14.5698 20 14.1611 20 13.3436V10.0004C20 6.22919 20 4.34358 18.8284 3.172C17.7693 2.11284 16.1265 2.01122 13.0345 2.00146M13 21.5004V21.0004C13 18.172 13 16.7578 13.8787 15.8791C14.7574 15.0004 16.1716 15.0004 19 15.0004H19.5",stroke:"currentColor",key:"k0"}],["path",{d:"M4 8.23028V5.46105C4 3.54929 5.567 1.99951 7.5 1.99951C9.433 1.99951 11 3.54929 11 5.46105V9.26874C11 10.2246 10.2165 10.9995 9.25 10.9995C8.2835 10.9995 7.5 10.2246 7.5 9.26874V5.46105",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Tft=$n("GithubIcon",[["path",{d:"M10 20.5675C6.57143 21.7248 3.71429 20.5675 2 17",stroke:"currentColor",key:"k0"}],["path",{d:"M10 22V18.7579C10 18.1596 10.1839 17.6396 10.4804 17.1699C10.6838 16.8476 10.5445 16.3904 10.1771 16.2894C7.13394 15.4528 5 14.1077 5 9.64606C5 8.48611 5.38005 7.39556 6.04811 6.4464C6.21437 6.21018 6.29749 6.09208 6.31748 5.9851C6.33746 5.87813 6.30272 5.73852 6.23322 5.45932C5.95038 4.32292 5.96871 3.11619 6.39322 2.02823C6.39322 2.02823 7.27042 1.74242 9.26698 2.98969C9.72282 3.27447 9.95075 3.41686 10.1515 3.44871C10.3522 3.48056 10.6206 3.41384 11.1573 3.28041C11.8913 3.09795 12.6476 3 13.5 3C14.3524 3 15.1087 3.09795 15.8427 3.28041C16.3794 3.41384 16.6478 3.48056 16.8485 3.44871C17.0493 3.41686 17.2772 3.27447 17.733 2.98969C19.7296 1.74242 20.6068 2.02823 20.6068 2.02823C21.0313 3.11619 21.0496 4.32292 20.7668 5.45932C20.6973 5.73852 20.6625 5.87813 20.6825 5.9851C20.7025 6.09207 20.7856 6.21019 20.9519 6.4464C21.6199 7.39556 22 8.48611 22 9.64606C22 14.1077 19.8661 15.4528 16.8229 16.2894C16.4555 16.3904 16.3162 16.8476 16.5196 17.1699C16.8161 17.6396 17 18.1596 17 18.7579V22",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Rft=$n("GridIcon",[["path",{d:"M7 2V22",stroke:"currentColor",key:"k0"}],["path",{d:"M17 2V22",stroke:"currentColor",key:"k1"}],["path",{d:"M22 7L2 7",stroke:"currentColor",key:"k2"}],["path",{d:"M22 17L2 17",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=$n("HeartAddIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 17H22M18 13L18 21",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const tT=$n("HeartCheckIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 18C14 18 15 18 16 20C16 20 19.1765 15 22 14",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Fft=$n("LabelImportantIcon",[["path",{d:"M13 4H6.23456C3.79424 4 2.57407 4 2.14438 4.76649C2.13129 4.78984 2.11883 4.81353 2.10701 4.83754C1.71893 5.62592 2.41032 6.63129 3.7931 8.64204C4.89612 10.246 5.44763 11.048 5.4611 11.9555C5.46154 11.9852 5.46154 12.0148 5.4611 12.0445C5.44763 12.952 4.89612 13.754 3.7931 15.358C2.41032 17.3687 1.71893 18.3741 2.10701 19.1625C2.11883 19.1865 2.13129 19.2102 2.14438 19.2335C2.57407 20 3.79424 20 6.23456 20H13C14.9628 20 15.9443 20 16.7889 19.5777C17.6334 19.1554 18.2223 18.3703 19.4 16.8C21.1333 14.4889 22 13.3333 22 12C22 10.6667 21.1333 9.51111 19.4 7.2C18.2223 5.62972 17.6334 4.84458 16.7889 4.42229C15.9443 4 14.9628 4 13 4Z",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Pft=$n("Moon01Icon",[["path",{d:"M21.0985 7.84477C20.458 8.55417 19.5311 9 18.5 9C16.567 9 15 7.433 15 5.5C15 4.46895 15.4458 3.54203 16.1552 2.90149M21.0985 7.84477C21.6774 9.11025 22 10.5174 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C13.4826 2 14.8898 2.32262 16.1552 2.90149M21.0985 7.84477C20.0998 5.66155 18.3384 3.90018 16.1552 2.90149",stroke:"currentColor",key:"k0"}],["path",{d:"M10 8H10.0064",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14H7.00635",stroke:"currentColor",key:"k2"}],["path",{d:"M16 16C16 17.1046 15.1046 18 14 18C12.8954 18 12 17.1046 12 16C12 14.8954 12.8954 14 14 14C15.1046 14 16 14.8954 16 16Z",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Oft=$n("ProfileIcon",[["path",{d:"M2.5 12C2.5 7.52166 2.5 5.28249 3.89124 3.89124C5.28249 2.5 7.52166 2.5 12 2.5C16.4783 2.5 18.7175 2.5 20.1088 3.89124C21.5 5.28249 21.5 7.52166 21.5 12C21.5 16.4783 21.5 18.7175 20.1088 20.1088C18.7175 21.5 16.4783 21.5 12 21.5C7.52166 21.5 5.28249 21.5 3.89124 20.1088C2.5 18.7175 2.5 16.4783 2.5 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 7L17 7",stroke:"currentColor",key:"k1"}],["path",{d:"M7 7L8 7",stroke:"currentColor",key:"k2"}],["path",{d:"M7 12L8 12",stroke:"currentColor",key:"k3"}],["path",{d:"M7 17L8 17",stroke:"currentColor",key:"k4"}],["path",{d:"M11 12L17 12",stroke:"currentColor",key:"k5"}],["path",{d:"M11 17L17 17",stroke:"currentColor",key:"k6"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Bpe=$n("Sad02Icon",[["path",{d:"M9.5 21.685C10.299 21.8906 11.1368 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 12.3375 2.01672 12.6711 2.04938 13",stroke:"currentColor",key:"k0"}],["path",{d:"M5.02108 14L2.8602 16.0826C1.69974 17.2204 1.71976 19.0523 2.88023 20.1707C4.06071 21.2892 5.96146 21.2699 7.12193 20.1515C8.30241 19.0137 8.2824 17.1818 7.12193 16.0633L5.02108 14Z",stroke:"currentColor",key:"k1"}],["path",{d:"M8.00897 8.44238H8M16 8.44238H15.991",stroke:"currentColor",key:"k2"}],["path",{d:"M15 16C14.1644 15.3721 13.1256 15 12 15C11.0893 15 10.2354 15.2436 9.5 15.6692",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Upe=$n("Search01Icon",[["path",{d:"M17.5 17.5L22 22",stroke:"currentColor",key:"k0"}],["path",{d:"M20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C15.9706 20 20 15.9706 20 11Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const h7=$n("Settings01Icon",[["path",{d:"M21.3175 7.14139L20.8239 6.28479C20.4506 5.63696 20.264 5.31305 19.9464 5.18388C19.6288 5.05472 19.2696 5.15664 18.5513 5.36048L17.3311 5.70418C16.8725 5.80994 16.3913 5.74994 15.9726 5.53479L15.6357 5.34042C15.2766 5.11043 15.0004 4.77133 14.8475 4.37274L14.5136 3.37536C14.294 2.71534 14.1842 2.38533 13.9228 2.19657C13.6615 2.00781 13.3143 2.00781 12.6199 2.00781H11.5051C10.8108 2.00781 10.4636 2.00781 10.2022 2.19657C9.94085 2.38533 9.83106 2.71534 9.61149 3.37536L9.27753 4.37274C9.12465 4.77133 8.84845 5.11043 8.48937 5.34042L8.15249 5.53479C7.73374 5.74994 7.25259 5.80994 6.79398 5.70418L5.57375 5.36048C4.85541 5.15664 4.49625 5.05472 4.17867 5.18388C3.86109 5.31305 3.67445 5.63696 3.30115 6.28479L2.80757 7.14139C2.45766 7.74864 2.2827 8.05227 2.31666 8.37549C2.35061 8.69871 2.58483 8.95918 3.05326 9.48012L4.0843 10.6328C4.3363 10.9518 4.51521 11.5078 4.51521 12.0077C4.51521 12.5078 4.33636 13.0636 4.08433 13.3827L3.05326 14.5354C2.58483 15.0564 2.35062 15.3168 2.31666 15.6401C2.2827 15.9633 2.45766 16.2669 2.80757 16.8741L3.30114 17.7307C3.67443 18.3785 3.86109 18.7025 4.17867 18.8316C4.49625 18.9608 4.85542 18.8589 5.57377 18.655L6.79394 18.3113C7.25263 18.2055 7.73387 18.2656 8.15267 18.4808L8.4895 18.6752C8.84851 18.9052 9.12464 19.2442 9.2775 19.6428L9.61149 20.6403C9.83106 21.3003 9.94085 21.6303 10.2022 21.8191C10.4636 22.0078 10.8108 22.0078 11.5051 22.0078H12.6199C13.3143 22.0078 13.6615 22.0078 13.9228 21.8191C14.1842 21.6303 14.294 21.3003 14.5136 20.6403L14.8476 19.6428C15.0004 19.2442 15.2765 18.9052 15.6356 18.6752L15.9724 18.4808C16.3912 18.2656 16.8724 18.2055 17.3311 18.3113L18.5513 18.655C19.2696 18.8589 19.6288 18.9608 19.9464 18.8316C20.264 18.7025 20.4506 18.3785 20.8239 17.7307L21.3175 16.8741C21.6674 16.2669 21.8423 15.9633 21.8084 15.6401C21.7744 15.3168 21.5402 15.0564 21.0718 14.5354L20.0407 13.3827C19.7887 13.0636 19.6098 12.5078 19.6098 12.0077C19.6098 11.5078 19.7888 10.9518 20.0407 10.6328L21.0718 9.48012C21.5402 8.95918 21.7744 8.69871 21.8084 8.37549C21.8423 8.05227 21.6674 7.74864 21.3175 7.14139Z",stroke:"currentColor",key:"k0"}],["path",{d:"M15.5195 12C15.5195 13.933 13.9525 15.5 12.0195 15.5C10.0865 15.5 8.51953 13.933 8.51953 12C8.51953 10.067 10.0865 8.5 12.0195 8.5C13.9525 8.5 15.5195 10.067 15.5195 12Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Mft=$n("SmartPhone01Icon",[["path",{d:"M5 9C5 5.70017 5 4.05025 6.02513 3.02513C7.05025 2 8.70017 2 12 2C15.2998 2 16.9497 2 17.9749 3.02513C19 4.05025 19 5.70017 19 9V15C19 18.2998 19 19.9497 17.9749 20.9749C16.9497 22 15.2998 22 12 22C8.70017 22 7.05025 22 6.02513 20.9749C5 19.9497 5 18.2998 5 15V9Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 19H13",stroke:"currentColor",key:"k1"}],["path",{d:"M9 2L9.089 2.53402C9.28188 3.69129 9.37832 4.26993 9.77519 4.62204C10.1892 4.98934 10.7761 5 12 5C13.2239 5 13.8108 4.98934 14.2248 4.62204C14.6217 4.26993 14.7181 3.69129 14.911 2.53402L15 2",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Vpe=$n("StartUp02Icon",[["path",{d:"M7 11.2947C12.284 1.44656 18.8635 1.333 21.4928 2.50724C22.667 5.1365 22.5534 11.716 12.7053 17C12.6031 16.4129 12.0352 14.8749 10.5801 13.4199C9.12512 11.9648 7.58712 11.3969 7 11.2947Z",stroke:"currentColor",key:"k0"}],["path",{d:"M14 16.8C16.0428 17.7334 16.2609 19.4069 16.5439 21C16.5439 21 20.8223 18.0481 18.0856 14",stroke:"currentColor",key:"k1"}],["path",{d:"M7.19998 9.99987C6.26664 7.95709 4.59305 7.73899 3 7.45601C3 7.45601 5.95194 3.17753 10 5.91431",stroke:"currentColor",key:"k2"}],["path",{d:"M6.20866 13.9998C5.57677 14.6317 4.50255 16.4642 5.26082 18.739C7.53564 19.4973 9.36813 18.4231 10 17.7912",stroke:"currentColor",key:"k3"}],["path",{d:"M18.0952 7.753C18.0952 6.7328 17.2682 5.90578 16.248 5.90578C15.2278 5.90578 14.4008 6.7328 14.4008 7.753C14.4008 8.77319 15.2278 9.60022 16.248 9.60022C17.2682 9.60022 18.0952 8.77319 18.0952 7.753Z",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Dft=$n("Sun03Icon",[["path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M12 2V3.5M12 20.5V22M19.0708 19.0713L18.0101 18.0106M5.98926 5.98926L4.9286 4.9286M22 12H20.5M3.5 12H2M19.0713 4.92871L18.0106 5.98937M5.98975 18.0107L4.92909 19.0714",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Wpe=$n("SwipeUp02Icon",[["path",{d:"M18.5 2.00195V8.00195M18.5 2.00195C17.7998 2.00195 16.4915 3.99625 16 4.50195M18.5 2.00195C19.2002 2.00195 20.5085 3.99625 21 4.50195",stroke:"currentColor",key:"k0"}],["path",{d:"M15.3913 21.998C15.3395 20.084 15.4684 19.8535 15.6052 19.4277C15.7419 19.002 16.6982 17.4665 17.0366 16.3695C18.1313 12.8202 17.111 12.0653 15.7507 11.0588C14.2422 9.94257 11.3968 9.37728 9.98573 9.49966V3.7462C9.98573 2.78288 9.20481 2.00195 8.24148 2.00195C7.27816 2.00195 6.49723 2.78288 6.49723 3.7462V9.96607M6.49774 21.9988V20.9854C6.43328 20.041 5.49529 18.9235 4.32672 17.3166C3.12509 15.576 2.86688 14.6973 3.05591 13.8848C3.15329 13.4694 3.40594 12.7832 4.64647 11.6104L6.49723 9.96607M6.49723 14.0323V9.96607",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Nft=$n("Tag01Icon",[["circle",{cx:"1.5",cy:"1.5",r:"1.5",transform:"matrix(1 0 0 -1 16 8)",stroke:"currentColor",key:"k0"}],["path",{d:"M2.77423 11.1439C1.77108 12.2643 1.7495 13.9546 2.67016 15.1437C4.49711 17.5033 6.49674 19.5029 8.85633 21.3298C10.0454 22.2505 11.7357 22.2289 12.8561 21.2258C15.8979 18.5022 18.6835 15.6559 21.3719 12.5279C21.6377 12.2187 21.8039 11.8397 21.8412 11.4336C22.0062 9.63798 22.3452 4.46467 20.9403 3.05974C19.5353 1.65481 14.362 1.99377 12.5664 2.15876C12.1603 2.19608 11.7813 2.36233 11.472 2.62811C8.34412 5.31646 5.49781 8.10211 2.77423 11.1439Z",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14L10 17",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Ift=$n("TextFontIcon",[["path",{d:"M14 19L11.1069 10.7479C9.76348 6.91597 9.09177 5 8 5C6.90823 5 6.23652 6.91597 4.89309 10.7479L2 19M4.5 12H11.5",stroke:"currentColor",key:"k0"}],["path",{d:"M21.9692 13.9392V18.4392M21.9692 13.9392C22.0164 13.1161 22.0182 12.4891 21.9194 11.9773C21.6864 10.7709 20.4258 10.0439 19.206 9.89599C18.0385 9.75447 17.1015 10.055 16.1535 11.4363M21.9692 13.9392L19.1256 13.9392C18.6887 13.9392 18.2481 13.9603 17.8272 14.0773C15.2545 14.7925 15.4431 18.4003 18.0233 18.845C18.3099 18.8944 18.6025 18.9156 18.8927 18.9026C19.5703 18.8724 20.1955 18.545 20.7321 18.1301C21.3605 17.644 21.9692 16.9655 21.9692 15.9392V13.9392Z",stroke:"currentColor",key:"k1"}]]);function nT({chart:e,handleClick:t,thumbnailSize:n=70}){const{buttonColor:r}=Hs(),i=wft(e,n*1.5);return T.jsxs(fpe,{as:Zt,flexDir:"column",children:[T.jsxs(Zt,{p:1,gap:4,borderRadius:"md",alignItems:"center",onClick:()=>t(e),transition:"background-color 0.2s",_hover:{cursor:"pointer",bg:r},children:[!!i&&T.jsx(Zhe,{src:i,alt:`Chart thumbnail ${e.title}`,w:n,h:n}),T.jsx(Zt,{flexDir:"column",children:e.fields.map((s,o)=>T.jsx(un,{fontSize:o!==2?"lg":"md",fontWeight:o!==2?800:500,children:s.name},`${e.key}-field-name-${s.name}`))})]}),T.jsx(r7,{my:1})]},`bookmark-${e.key}`)}function Lft(e){const{preferredCharts:t,handleClickBookmark:n}=ZWe(),{t:r}=ec();return T.jsx(Zt,{w:"full",h:"full",...e,children:t.length?T.jsx(lw,{m:0,p:0,width:"full",overflowY:"auto",children:t.map(i=>T.jsx(nT,{chart:i,"data-log-click":`preferred-chart-${i.key}`,handleClick:n},`bookmark-${i.key}`))}):T.jsxs(Sa,{w:"full",flexDir:"column",gap:8,children:[T.jsx(wt,{boxSize:16,as:Bpe}),T.jsx(kp,{fontWeight:600,children:r("bookmarks.empty")})]})})}function zft(e){const{scrollbarStyle:t,buttonColor:n,borderColor:r,cardColor:i,accentSelected:s,accentSelectedHover:o,accentColor:a}=Hs(),{browsedCharts:l,inputDisabled:u,loading:c,fieldNameMatches:f,selectedFields:d,inputValue:h,setInputValue:p,appendBrowseField:g,appendBrowsedChart:m,handleKeydown:y,suggestionCursorIndex:v}=MHe();return T.jsxs(Au,{w:"full",alignItems:"center",...e,children:[T.jsxs(Vb,{w:"100%",position:"relative",children:[T.jsxs(ppe,{spacing:1,borderRadius:"md",alignItems:"flex-start",w:"100%",flexWrap:"wrap",border:"1px solid",borderBottomRadius:f.length>0?0:"md",borderColor:r,p:2,children:[d.map(b=>T.jsxs(u7,{borderRadius:"full",colorScheme:cr,children:[T.jsx(c7,{children:b}),T.jsx(Epe,{onClick:()=>g(b)})]},b)),T.jsx(Ub,{type:"text",w:"fit-content",h:"fit-content",px:2,minW:d.length>0?0:60,placeholder:d.length>0?"":"Input field names to search...",borderColor:"transparent",value:h,onChange:b=>p(b.target.value),disabled:u,_focusVisible:{borderColor:"transparent"},_hover:{borderColor:"transparent"},onKeyDown:y})]}),f.length>0&&T.jsx(Au,{alignItems:"flex-start",borderRadius:6,overflow:"hidden",gap:0,w:"full",borderTopRadius:0,borderColor:r,borderWidth:1,position:"absolute",zIndex:1,children:f.map((b,x)=>T.jsx(Vb,{onClick:()=>g(b.item),"data-log-click":`field-name-match-${b.item}`,bgColor:(()=>{const w=d.includes(b.item),C=x===v;return w?C?o:s:C?n:i})(),w:"100%",pl:2,cursor:"pointer",borderTopWidth:1,borderTopColor:r,children:b.item},b.item))})]}),c?T.jsx(aw,{size:"md",my:8,color:a}):T.jsx(lw,{m:0,p:0,width:"full",overflowY:"scroll",sx:t,flex:1,children:l.map(b=>T.jsx(nT,{chart:b,handleClick:()=>{m(b)}},`${b.key}-${b.timestamp}`))})]})}var rT={},iT={};iT.__esModule=!0;iT.default=jft;const YX={};function jft(e,t){e===void 0&&(e=YX),t===void 0&&(t=YX);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}var p7={},g7={},Hpe={exports:{}};const Bft=GY(lse),Uft=GY(Tle);(function(e,t){var n={};(function(r,i){e.exports=i(Bft,Uft)})(Zi,function(r,i){var K7;function s(E){var _=Object.create(null);return E&&Object.keys(E).forEach(function(R){if(R!=="default"){var L=Object.getOwnPropertyDescriptor(E,R);Object.defineProperty(_,R,L.get?L:{enumerable:!0,get:function(){return E[R]}})}}),_.default=E,Object.freeze(_)}var o=s(r),a=s(i);/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var l=function(){var E=function(_,R){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,q){L.__proto__=q}||function(L,q){for(var G in q)q.hasOwnProperty(G)&&(L[G]=q[G])},E(_,R)};return function(_,R){E(_,R);function L(){this.constructor=_}_.prototype=R===null?Object.create(R):(L.prototype=R.prototype,new L)}}(),u=Object.prototype.hasOwnProperty;function c(E,_){return u.call(E,_)}function f(E){if(Array.isArray(E)){for(var _=new Array(E.length),R=0;R<_.length;R++)_[R]=""+R;return _}if(Object.keys)return Object.keys(E);var L=[];for(var q in E)c(E,q)&&L.push(q);return L}function d(E){switch(typeof E){case"object":return JSON.parse(JSON.stringify(E));case"undefined":return null;default:return E}}function h(E){for(var _=0,R=E.length,L;_<R;){if(L=E.charCodeAt(_),L>=48&&L<=57){_++;continue}return!1}return!0}function p(E){return E.indexOf("/")===-1&&E.indexOf("~")===-1?E:E.replace(/~/g,"~0").replace(/\//g,"~1")}function g(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}function m(E){if(E===void 0)return!0;if(E){if(Array.isArray(E)){for(var _=0,R=E.length;_<R;_++)if(m(E[_]))return!0}else if(typeof E=="object"){for(var L=f(E),q=L.length,G=0;G<q;G++)if(m(E[L[G]]))return!0}}return!1}function y(E,_){var R=[E];for(var L in _){var q=typeof _[L]=="object"?JSON.stringify(_[L],null,2):_[L];typeof q<"u"&&R.push(L+": "+q)}return R.join(`
`)}var v=function(E){l(_,E);function _(R,L,q,G,re){var ie=this.constructor,Q=E.call(this,y(R,{name:L,index:q,operation:G,tree:re}))||this;return Q.name=L,Q.index=q,Q.operation=G,Q.tree=re,Object.setPrototypeOf(Q,ie.prototype),Q.message=y(R,{name:L,index:q,operation:G,tree:re}),Q}return _}(Error),b=v,x=d,w={add:function(E,_,R){return E[_]=this.value,{newDocument:R}},remove:function(E,_,R){var L=E[_];return delete E[_],{newDocument:R,removed:L}},replace:function(E,_,R){var L=E[_];return E[_]=this.value,{newDocument:R,removed:L}},move:function(E,_,R){var L=S(R,this.path);L&&(L=d(L));var q=k(R,{op:"remove",path:this.from}).removed;return k(R,{op:"add",path:this.path,value:q}),{newDocument:R,removed:L}},copy:function(E,_,R){var L=S(R,this.from);return k(R,{op:"add",path:this.path,value:d(L)}),{newDocument:R}},test:function(E,_,R){return{newDocument:R,test:D(E[_],this.value)}},_get:function(E,_,R){return this.value=E[_],{newDocument:R}}},C={add:function(E,_,R){return h(_)?E.splice(_,0,this.value):E[_]=this.value,{newDocument:R,index:_}},remove:function(E,_,R){var L=E.splice(_,1);return{newDocument:R,removed:L[0]}},replace:function(E,_,R){var L=E[_];return E[_]=this.value,{newDocument:R,removed:L}},move:w.move,copy:w.copy,test:w.test,_get:w._get};function S(E,_){if(_=="")return E;var R={op:"_get",path:_};return k(E,R),R.value}function k(E,_,R,L,q,G){if(R===void 0&&(R=!1),L===void 0&&(L=!0),q===void 0&&(q=!0),G===void 0&&(G=0),R&&(typeof R=="function"?R(_,0,E,_.path):O(_,0)),_.path===""){var re={newDocument:E};if(_.op==="add")return re.newDocument=_.value,re;if(_.op==="replace")return re.newDocument=_.value,re.removed=E,re;if(_.op==="move"||_.op==="copy")return re.newDocument=S(E,_.from),_.op==="move"&&(re.removed=E),re;if(_.op==="test"){if(re.test=D(E,_.value),re.test===!1)throw new b("Test operation failed","TEST_OPERATION_FAILED",G,_,E);return re.newDocument=E,re}else{if(_.op==="remove")return re.removed=E,re.newDocument=null,re;if(_.op==="_get")return _.value=E,re;if(R)throw new b("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",G,_,E);return re}}else{L||(E=d(E));var ie=_.path||"",Q=ie.split("/"),ne=E,ge=1,Pe=Q.length,Tt=void 0,dt=void 0,Re=void 0;for(typeof R=="function"?Re=R:Re=O;;){if(dt=Q[ge],dt&&dt.indexOf("~")!=-1&&(dt=g(dt)),q&&(dt=="__proto__"||dt=="prototype"&&ge>0&&Q[ge-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(R&&Tt===void 0&&(ne[dt]===void 0?Tt=Q.slice(0,ge).join("/"):ge==Pe-1&&(Tt=_.path),Tt!==void 0&&Re(_,0,E,Tt)),ge++,Array.isArray(ne)){if(dt==="-")dt=ne.length;else{if(R&&!h(dt))throw new b("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",G,_,E);h(dt)&&(dt=~~dt)}if(ge>=Pe){if(R&&_.op==="add"&&dt>ne.length)throw new b("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",G,_,E);var re=C[_.op].call(_,ne,dt,E);if(re.test===!1)throw new b("Test operation failed","TEST_OPERATION_FAILED",G,_,E);return re}}else if(ge>=Pe){var re=w[_.op].call(_,ne,dt,E);if(re.test===!1)throw new b("Test operation failed","TEST_OPERATION_FAILED",G,_,E);return re}if(ne=ne[dt],R&&ge<Pe&&(!ne||typeof ne!="object"))throw new b("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",G,_,E)}}}function $(E,_,R,L,q){if(L===void 0&&(L=!0),q===void 0&&(q=!0),R&&!Array.isArray(_))throw new b("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");L||(E=d(E));for(var G=new Array(_.length),re=0,ie=_.length;re<ie;re++)G[re]=k(E,_[re],R,!0,q,re),E=G[re].newDocument;return G.newDocument=E,G}function F(E,_,R){var L=k(E,_);if(L.test===!1)throw new b("Test operation failed","TEST_OPERATION_FAILED",R,_,E);return L.newDocument}function O(E,_,R,L){if(typeof E!="object"||E===null||Array.isArray(E))throw new b("Operation is not an object","OPERATION_NOT_AN_OBJECT",_,E,R);if(w[E.op]){if(typeof E.path!="string")throw new b("Operation `path` property is not a string","OPERATION_PATH_INVALID",_,E,R);if(E.path.indexOf("/")!==0&&E.path.length>0)throw new b('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",_,E,R);if((E.op==="move"||E.op==="copy")&&typeof E.from!="string")throw new b("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",_,E,R);if((E.op==="add"||E.op==="replace"||E.op==="test")&&E.value===void 0)throw new b("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",_,E,R);if((E.op==="add"||E.op==="replace"||E.op==="test")&&m(E.value))throw new b("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",_,E,R);if(R){if(E.op=="add"){var q=E.path.split("/").length,G=L.split("/").length;if(q!==G+1&&q!==G)throw new b("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",_,E,R)}else if(E.op==="replace"||E.op==="remove"||E.op==="_get"){if(E.path!==L)throw new b("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",_,E,R)}else if(E.op==="move"||E.op==="copy"){var re={op:"_get",path:E.from,value:void 0},ie=B([re],R);if(ie&&ie.name==="OPERATION_PATH_UNRESOLVABLE")throw new b("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",_,E,R)}}}else throw new b("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",_,E,R)}function B(E,_,R){try{if(!Array.isArray(E))throw new b("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(_)$(d(_),d(E),R||!0);else{R=R||O;for(var L=0;L<E.length;L++)R(E[L],L,_,void 0)}}catch(q){if(q instanceof b)return q;throw q}}function D(E,_){if(E===_)return!0;if(E&&_&&typeof E=="object"&&typeof _=="object"){var R=Array.isArray(E),L=Array.isArray(_),q,G,re;if(R&&L){if(G=E.length,G!=_.length)return!1;for(q=G;q--!==0;)if(!D(E[q],_[q]))return!1;return!0}if(R!=L)return!1;var ie=Object.keys(E);if(G=ie.length,G!==Object.keys(_).length)return!1;for(q=G;q--!==0;)if(!_.hasOwnProperty(ie[q]))return!1;for(q=G;q--!==0;)if(re=ie[q],!D(E[re],_[re]))return!1;return!0}return E!==E&&_!==_}var N=Object.freeze({__proto__:null,JsonPatchError:b,_areEquals:D,applyOperation:k,applyPatch:$,applyReducer:F,deepClone:x,getValueByPointer:S,validate:B,validator:O});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var A=new WeakMap,P=function(){function E(_){this.observers=new Map,this.obj=_}return E}(),j=function(){function E(_,R){this.callback=_,this.observer=R}return E}();function z(E){return A.get(E)}function U(E,_){return E.observers.get(_)}function X(E,_){E.observers.delete(_.callback)}function K(E,_){_.unobserve()}function pe(E,_){var R=[],L,q=z(E);if(!q)q=new P(E),A.set(E,q);else{var G=U(q,_);L=G&&G.observer}if(L)return L;if(L={},q.value=d(E),_){L.callback=_,L.next=null;var re=function(){se(L)},ie=function(){clearTimeout(L.next),L.next=setTimeout(re)};typeof window<"u"&&(window.addEventListener("mouseup",ie),window.addEventListener("keyup",ie),window.addEventListener("mousedown",ie),window.addEventListener("keydown",ie),window.addEventListener("change",ie))}return L.patches=R,L.object=E,L.unobserve=function(){se(L),clearTimeout(L.next),X(q,L),typeof window<"u"&&(window.removeEventListener("mouseup",ie),window.removeEventListener("keyup",ie),window.removeEventListener("mousedown",ie),window.removeEventListener("keydown",ie),window.removeEventListener("change",ie))},q.observers.set(_,new j(_,L)),L}function se(E,_){_===void 0&&(_=!1);var R=A.get(E.object);_e(R.value,E.object,E.patches,"",_),E.patches.length&&$(R.value,E.patches);var L=E.patches;return L.length>0&&(E.patches=[],E.callback&&E.callback(L)),L}function _e(E,_,R,L,q){if(_!==E){typeof _.toJSON=="function"&&(_=_.toJSON());for(var G=f(_),re=f(E),ie=!1,Q=re.length-1;Q>=0;Q--){var ne=re[Q],ge=E[ne];if(c(_,ne)&&!(_[ne]===void 0&&ge!==void 0&&Array.isArray(_)===!1)){var Pe=_[ne];typeof ge=="object"&&ge!=null&&typeof Pe=="object"&&Pe!=null&&Array.isArray(ge)===Array.isArray(Pe)?_e(ge,Pe,R,L+"/"+p(ne),q):ge!==Pe&&(q&&R.push({op:"test",path:L+"/"+p(ne),value:d(ge)}),R.push({op:"replace",path:L+"/"+p(ne),value:d(Pe)}))}else Array.isArray(E)===Array.isArray(_)?(q&&R.push({op:"test",path:L+"/"+p(ne),value:d(ge)}),R.push({op:"remove",path:L+"/"+p(ne)}),ie=!0):(q&&R.push({op:"test",path:L,value:E}),R.push({op:"replace",path:L,value:_}))}if(!(!ie&&G.length==re.length))for(var Q=0;Q<G.length;Q++){var ne=G[Q];!c(E,ne)&&_[ne]!==void 0&&R.push({op:"add",path:L+"/"+p(ne),value:d(_[ne])})}}}function Ze(E,_,R){R===void 0&&(R=!1);var L=[];return _e(E,_,L,"",R),L}var Ct=Object.freeze({__proto__:null,compare:Ze,generate:se,observe:pe,unobserve:K});Object.assign({},N,Ct,{JsonPatchError:v,deepClone:d,escapePathComponent:p,unescapePathComponent:g});function Nn(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var ur=/("(?:[^\\"]|\\.)*")|[:,]/g,be=function(_,R){var L,q,G;return R=R||{},L=JSON.stringify([1],void 0,R.indent===void 0?2:R.indent).slice(2,-3),q=L===""?1/0:R.maxLength===void 0?80:R.maxLength,G=R.replacer,function re(ie,Q,ne){var ge,Pe,Tt,dt,Re,gi,pn,bn,Kt,Wr,No,Rt;if(ie&&typeof ie.toJSON=="function"&&(ie=ie.toJSON()),No=JSON.stringify(ie,G),No===void 0)return No;if(pn=q-Q.length-ne,No.length<=pn&&(Kt=No.replace(ur,function(Qt,ut){return ut||Qt+" "}),Kt.length<=pn))return Kt;if(G!=null&&(ie=JSON.parse(No),G=void 0),typeof ie=="object"&&ie!==null){if(bn=Q+L,Tt=[],Pe=0,Array.isArray(ie))for(Wr="[",ge="]",pn=ie.length;Pe<pn;Pe++)Tt.push(re(ie[Pe],bn,Pe===pn-1?0:1)||"null");else for(Wr="{",ge="}",gi=Object.keys(ie),pn=gi.length;Pe<pn;Pe++)dt=gi[Pe],Re=JSON.stringify(dt)+": ",Rt=re(ie[dt],bn,Re.length+(Pe===pn-1?0:1)),Rt!==void 0&&Tt.push(Re+Rt);if(Tt.length>0)return[Wr,L+Tt.join(`,
`+bn),ge].join(`
`+Q)}return No}(_,"",0)},Ne=Nn(be);class We{constructor(){this.max=1e3,this.map=new Map}get(_){const R=this.map.get(_);if(R!==void 0)return this.map.delete(_),this.map.set(_,R),R}delete(_){return this.map.delete(_)}set(_,R){if(!this.delete(_)&&R!==void 0){if(this.map.size>=this.max){const q=this.map.keys().next().value;this.delete(q)}this.map.set(_,R)}return this}}var ae=We;const In=Object.freeze({loose:!0}),St=Object.freeze({});var hn=E=>E?typeof E!="object"?In:E:St,Vr={exports:{}};const nc="2.0.0",dw=256,_p=Number.MAX_SAFE_INTEGER||9007199254740991,ry=16,$p=dw-6;var Ap={MAX_LENGTH:dw,MAX_SAFE_COMPONENT_LENGTH:ry,MAX_SAFE_BUILD_LENGTH:$p,MAX_SAFE_INTEGER:_p,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:nc,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Tp=typeof process=="object"&&n&&n.NODE_DEBUG&&/\bsemver\b/i.test(n.NODE_DEBUG)?(...E)=>console.error("SEMVER",...E):()=>{};(function(E,_){const{MAX_SAFE_COMPONENT_LENGTH:R,MAX_SAFE_BUILD_LENGTH:L,MAX_LENGTH:q}=Ap,G=Tp;_=E.exports={};const re=_.re=[],ie=_.safeRe=[],Q=_.src=[],ne=_.t={};let ge=0;const Pe="[a-zA-Z0-9-]",Tt=[["\\s",1],["\\d",q],[Pe,L]],dt=gi=>{for(const[pn,bn]of Tt)gi=gi.split(`${pn}*`).join(`${pn}{0,${bn}}`).split(`${pn}+`).join(`${pn}{1,${bn}}`);return gi},Re=(gi,pn,bn)=>{const Kt=dt(pn),Wr=ge++;G(gi,Wr,pn),ne[gi]=Wr,Q[Wr]=pn,re[Wr]=new RegExp(pn,bn?"g":void 0),ie[Wr]=new RegExp(Kt,bn?"g":void 0)};Re("NUMERICIDENTIFIER","0|[1-9]\\d*"),Re("NUMERICIDENTIFIERLOOSE","\\d+"),Re("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Pe}*`),Re("MAINVERSION",`(${Q[ne.NUMERICIDENTIFIER]})\\.(${Q[ne.NUMERICIDENTIFIER]})\\.(${Q[ne.NUMERICIDENTIFIER]})`),Re("MAINVERSIONLOOSE",`(${Q[ne.NUMERICIDENTIFIERLOOSE]})\\.(${Q[ne.NUMERICIDENTIFIERLOOSE]})\\.(${Q[ne.NUMERICIDENTIFIERLOOSE]})`),Re("PRERELEASEIDENTIFIER",`(?:${Q[ne.NUMERICIDENTIFIER]}|${Q[ne.NONNUMERICIDENTIFIER]})`),Re("PRERELEASEIDENTIFIERLOOSE",`(?:${Q[ne.NUMERICIDENTIFIERLOOSE]}|${Q[ne.NONNUMERICIDENTIFIER]})`),Re("PRERELEASE",`(?:-(${Q[ne.PRERELEASEIDENTIFIER]}(?:\\.${Q[ne.PRERELEASEIDENTIFIER]})*))`),Re("PRERELEASELOOSE",`(?:-?(${Q[ne.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Q[ne.PRERELEASEIDENTIFIERLOOSE]})*))`),Re("BUILDIDENTIFIER",`${Pe}+`),Re("BUILD",`(?:\\+(${Q[ne.BUILDIDENTIFIER]}(?:\\.${Q[ne.BUILDIDENTIFIER]})*))`),Re("FULLPLAIN",`v?${Q[ne.MAINVERSION]}${Q[ne.PRERELEASE]}?${Q[ne.BUILD]}?`),Re("FULL",`^${Q[ne.FULLPLAIN]}$`),Re("LOOSEPLAIN",`[v=\\s]*${Q[ne.MAINVERSIONLOOSE]}${Q[ne.PRERELEASELOOSE]}?${Q[ne.BUILD]}?`),Re("LOOSE",`^${Q[ne.LOOSEPLAIN]}$`),Re("GTLT","((?:<|>)?=?)"),Re("XRANGEIDENTIFIERLOOSE",`${Q[ne.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),Re("XRANGEIDENTIFIER",`${Q[ne.NUMERICIDENTIFIER]}|x|X|\\*`),Re("XRANGEPLAIN",`[v=\\s]*(${Q[ne.XRANGEIDENTIFIER]})(?:\\.(${Q[ne.XRANGEIDENTIFIER]})(?:\\.(${Q[ne.XRANGEIDENTIFIER]})(?:${Q[ne.PRERELEASE]})?${Q[ne.BUILD]}?)?)?`),Re("XRANGEPLAINLOOSE",`[v=\\s]*(${Q[ne.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Q[ne.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Q[ne.XRANGEIDENTIFIERLOOSE]})(?:${Q[ne.PRERELEASELOOSE]})?${Q[ne.BUILD]}?)?)?`),Re("XRANGE",`^${Q[ne.GTLT]}\\s*${Q[ne.XRANGEPLAIN]}$`),Re("XRANGELOOSE",`^${Q[ne.GTLT]}\\s*${Q[ne.XRANGEPLAINLOOSE]}$`),Re("COERCEPLAIN",`(^|[^\\d])(\\d{1,${R}})(?:\\.(\\d{1,${R}}))?(?:\\.(\\d{1,${R}}))?`),Re("COERCE",`${Q[ne.COERCEPLAIN]}(?:$|[^\\d])`),Re("COERCEFULL",Q[ne.COERCEPLAIN]+`(?:${Q[ne.PRERELEASE]})?(?:${Q[ne.BUILD]})?(?:$|[^\\d])`),Re("COERCERTL",Q[ne.COERCE],!0),Re("COERCERTLFULL",Q[ne.COERCEFULL],!0),Re("LONETILDE","(?:~>?)"),Re("TILDETRIM",`(\\s*)${Q[ne.LONETILDE]}\\s+`,!0),_.tildeTrimReplace="$1~",Re("TILDE",`^${Q[ne.LONETILDE]}${Q[ne.XRANGEPLAIN]}$`),Re("TILDELOOSE",`^${Q[ne.LONETILDE]}${Q[ne.XRANGEPLAINLOOSE]}$`),Re("LONECARET","(?:\\^)"),Re("CARETTRIM",`(\\s*)${Q[ne.LONECARET]}\\s+`,!0),_.caretTrimReplace="$1^",Re("CARET",`^${Q[ne.LONECARET]}${Q[ne.XRANGEPLAIN]}$`),Re("CARETLOOSE",`^${Q[ne.LONECARET]}${Q[ne.XRANGEPLAINLOOSE]}$`),Re("COMPARATORLOOSE",`^${Q[ne.GTLT]}\\s*(${Q[ne.LOOSEPLAIN]})$|^$`),Re("COMPARATOR",`^${Q[ne.GTLT]}\\s*(${Q[ne.FULLPLAIN]})$|^$`),Re("COMPARATORTRIM",`(\\s*)${Q[ne.GTLT]}\\s*(${Q[ne.LOOSEPLAIN]}|${Q[ne.XRANGEPLAIN]})`,!0),_.comparatorTrimReplace="$1$2$3",Re("HYPHENRANGE",`^\\s*(${Q[ne.XRANGEPLAIN]})\\s+-\\s+(${Q[ne.XRANGEPLAIN]})\\s*$`),Re("HYPHENRANGELOOSE",`^\\s*(${Q[ne.XRANGEPLAINLOOSE]})\\s+-\\s+(${Q[ne.XRANGEPLAINLOOSE]})\\s*$`),Re("STAR","(<|>)?=?\\s*\\*"),Re("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),Re("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Vr,Vr.exports);var iy=Vr.exports;const rd=/^[0-9]+$/,sy=(E,_)=>{const R=rd.test(E),L=rd.test(_);return R&&L&&(E=+E,_=+_),E===_?0:R&&!L?-1:L&&!R?1:E<_?-1:1};var hw={compareIdentifiers:sy,rcompareIdentifiers:(E,_)=>sy(_,E)};const id=Tp,{MAX_LENGTH:pw,MAX_SAFE_INTEGER:Rp}=Ap,{safeRe:Fa,t:sd}=iy,fT=hn,{compareIdentifiers:Vl}=hw;var Fp=class Ba{constructor(_,R){if(R=fT(R),_ instanceof Ba){if(_.loose===!!R.loose&&_.includePrerelease===!!R.includePrerelease)return _;_=_.version}else if(typeof _!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof _}".`);if(_.length>pw)throw new TypeError(`version is longer than ${pw} characters`);id("SemVer",_,R),this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease;const L=_.trim().match(R.loose?Fa[sd.LOOSE]:Fa[sd.FULL]);if(!L)throw new TypeError(`Invalid Version: ${_}`);if(this.raw=_,this.major=+L[1],this.minor=+L[2],this.patch=+L[3],this.major>Rp||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Rp||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Rp||this.patch<0)throw new TypeError("Invalid patch version");L[4]?this.prerelease=L[4].split(".").map(q=>{if(/^[0-9]+$/.test(q)){const G=+q;if(G>=0&&G<Rp)return G}return q}):this.prerelease=[],this.build=L[5]?L[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(_){if(id("SemVer.compare",this.version,this.options,_),!(_ instanceof Ba)){if(typeof _=="string"&&_===this.version)return 0;_=new Ba(_,this.options)}return _.version===this.version?0:this.compareMain(_)||this.comparePre(_)}compareMain(_){return _ instanceof Ba||(_=new Ba(_,this.options)),Vl(this.major,_.major)||Vl(this.minor,_.minor)||Vl(this.patch,_.patch)}comparePre(_){if(_ instanceof Ba||(_=new Ba(_,this.options)),this.prerelease.length&&!_.prerelease.length)return-1;if(!this.prerelease.length&&_.prerelease.length)return 1;if(!this.prerelease.length&&!_.prerelease.length)return 0;let R=0;do{const L=this.prerelease[R],q=_.prerelease[R];if(id("prerelease compare",R,L,q),L===void 0&&q===void 0)return 0;if(q===void 0)return 1;if(L===void 0)return-1;if(L===q)continue;return Vl(L,q)}while(++R)}compareBuild(_){_ instanceof Ba||(_=new Ba(_,this.options));let R=0;do{const L=this.build[R],q=_.build[R];if(id("build compare",R,L,q),L===void 0&&q===void 0)return 0;if(q===void 0)return 1;if(L===void 0)return-1;if(L===q)continue;return Vl(L,q)}while(++R)}inc(_,R,L){switch(_){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",R,L);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",R,L);break;case"prepatch":this.prerelease.length=0,this.inc("patch",R,L),this.inc("pre",R,L);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",R,L),this.inc("pre",R,L);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const q=Number(L)?1:0;if(!R&&L===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[q];else{let G=this.prerelease.length;for(;--G>=0;)typeof this.prerelease[G]=="number"&&(this.prerelease[G]++,G=-2);if(G===-1){if(R===this.prerelease.join(".")&&L===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(q)}}if(R){let G=[R,q];L===!1&&(G=[R]),Vl(this.prerelease[0],R)===0?isNaN(this.prerelease[1])&&(this.prerelease=G):this.prerelease=G}break}default:throw new Error(`invalid increment argument: ${_}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const rc=Fp;var Vi=(E,_,R)=>new rc(E,R).compare(new rc(_,R));const dT=Vi;var hT=(E,_,R)=>dT(E,_,R)===0;const pT=Vi;var Oo=(E,_,R)=>pT(E,_,R)!==0;const gT=Vi;var mT=(E,_,R)=>gT(E,_,R)>0;const yT=Vi;var ic=(E,_,R)=>yT(E,_,R)>=0;const vT=Vi;var bT=(E,_,R)=>vT(E,_,R)<0;const xT=Vi;var sc=(E,_,R)=>xT(E,_,R)<=0;const wT=hT,ST=Oo,ET=mT,CT=ic,kT=bT,_T=sc;var $T=(E,_,R,L)=>{switch(_){case"===":return typeof E=="object"&&(E=E.version),typeof R=="object"&&(R=R.version),E===R;case"!==":return typeof E=="object"&&(E=E.version),typeof R=="object"&&(R=R.version),E!==R;case"":case"=":case"==":return wT(E,R,L);case"!=":return ST(E,R,L);case">":return ET(E,R,L);case">=":return CT(E,R,L);case"<":return kT(E,R,L);case"<=":return _T(E,R,L);default:throw new TypeError(`Invalid operator: ${_}`)}},oc,Pp;function AT(){if(Pp)return oc;Pp=1;const E=Symbol("SemVer ANY");class _{static get ANY(){return E}constructor(ge,Pe){if(Pe=R(Pe),ge instanceof _){if(ge.loose===!!Pe.loose)return ge;ge=ge.value}ge=ge.trim().split(/\s+/).join(" "),re("comparator",ge,Pe),this.options=Pe,this.loose=!!Pe.loose,this.parse(ge),this.semver===E?this.value="":this.value=this.operator+this.semver.version,re("comp",this)}parse(ge){const Pe=this.options.loose?L[q.COMPARATORLOOSE]:L[q.COMPARATOR],Tt=ge.match(Pe);if(!Tt)throw new TypeError(`Invalid comparator: ${ge}`);this.operator=Tt[1]!==void 0?Tt[1]:"",this.operator==="="&&(this.operator=""),Tt[2]?this.semver=new ie(Tt[2],this.options.loose):this.semver=E}toString(){return this.value}test(ge){if(re("Comparator.test",ge,this.options.loose),this.semver===E||ge===E)return!0;if(typeof ge=="string")try{ge=new ie(ge,this.options)}catch{return!1}return G(ge,this.operator,this.semver,this.options)}intersects(ge,Pe){if(!(ge instanceof _))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Q(ge.value,Pe).test(this.value):ge.operator===""?ge.value===""?!0:new Q(this.value,Pe).test(ge.semver):(Pe=R(Pe),Pe.includePrerelease&&(this.value==="<0.0.0-0"||ge.value==="<0.0.0-0")||!Pe.includePrerelease&&(this.value.startsWith("<0.0.0")||ge.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&ge.operator.startsWith(">")||this.operator.startsWith("<")&&ge.operator.startsWith("<")||this.semver.version===ge.semver.version&&this.operator.includes("=")&&ge.operator.includes("=")||G(this.semver,"<",ge.semver,Pe)&&this.operator.startsWith(">")&&ge.operator.startsWith("<")||G(this.semver,">",ge.semver,Pe)&&this.operator.startsWith("<")&&ge.operator.startsWith(">")))}}oc=_;const R=hn,{safeRe:L,t:q}=iy,G=$T,re=Tp,ie=Fp,Q=mw();return oc}var ac,oy;function mw(){if(oy)return ac;oy=1;class E{constructor(Ee,Ye){if(Ye=L(Ye),Ee instanceof E)return Ee.loose===!!Ye.loose&&Ee.includePrerelease===!!Ye.includePrerelease?Ee:new E(Ee.raw,Ye);if(Ee instanceof q)return this.raw=Ee.value,this.set=[[Ee]],this.format(),this;if(this.options=Ye,this.loose=!!Ye.loose,this.includePrerelease=!!Ye.includePrerelease,this.raw=Ee.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(qe=>this.parseRange(qe.trim())).filter(qe=>qe.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const qe=this.set[0];if(this.set=this.set.filter(Ge=>!Re(Ge[0])),this.set.length===0)this.set=[qe];else if(this.set.length>1){for(const Ge of this.set)if(Ge.length===1&&gi(Ge[0])){this.set=[Ge];break}}}this.format()}format(){return this.range=this.set.map(Ee=>Ee.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(Ee){const qe=((this.options.includePrerelease&&Tt)|(this.options.loose&&dt))+":"+Ee,Ge=R.get(qe);if(Ge)return Ge;const Le=this.options.loose,nt=Le?ie[Q.HYPHENRANGELOOSE]:ie[Q.HYPHENRANGE];Ee=Ee.replace(nt,i5(this.options.includePrerelease)),G("hyphen replace",Ee),Ee=Ee.replace(ie[Q.COMPARATORTRIM],ne),G("comparator trim",Ee),Ee=Ee.replace(ie[Q.TILDETRIM],ge),G("tilde trim",Ee),Ee=Ee.replace(ie[Q.CARETTRIM],Pe),G("caret trim",Ee);let Wt=Ee.split(" ").map(qn=>bn(qn,this.options)).join(" ").split(/\s+/).map(qn=>r5(qn,this.options));Le&&(Wt=Wt.filter(qn=>(G("loose invalid filter",qn,this.options),!!qn.match(ie[Q.COMPARATORLOOSE])))),G("range list",Wt);const ct=new Map,xn=Wt.map(qn=>new q(qn,this.options));for(const qn of xn){if(Re(qn))return[qn];ct.set(qn.value,qn)}ct.size>1&&ct.has("")&&ct.delete("");const vs=[...ct.values()];return R.set(qe,vs),vs}intersects(Ee,Ye){if(!(Ee instanceof E))throw new TypeError("a Range is required");return this.set.some(qe=>pn(qe,Ye)&&Ee.set.some(Ge=>pn(Ge,Ye)&&qe.every(Le=>Ge.every(nt=>Le.intersects(nt,Ye)))))}test(Ee){if(!Ee)return!1;if(typeof Ee=="string")try{Ee=new re(Ee,this.options)}catch{return!1}for(let Ye=0;Ye<this.set.length;Ye++)if(s5(this.set[Ye],Ee,this.options))return!0;return!1}}ac=E;const _=ae,R=new _,L=hn,q=AT(),G=Tp,re=Fp,{safeRe:ie,t:Q,comparatorTrimReplace:ne,tildeTrimReplace:ge,caretTrimReplace:Pe}=iy,{FLAG_INCLUDE_PRERELEASE:Tt,FLAG_LOOSE:dt}=Ap,Re=$e=>$e.value==="<0.0.0-0",gi=$e=>$e.value==="",pn=($e,Ee)=>{let Ye=!0;const qe=$e.slice();let Ge=qe.pop();for(;Ye&&qe.length;)Ye=qe.every(Le=>Ge.intersects(Le,Ee)),Ge=qe.pop();return Ye},bn=($e,Ee)=>(G("comp",$e,Ee),$e=Rt($e,Ee),G("caret",$e),$e=Wr($e,Ee),G("tildes",$e),$e=ut($e,Ee),G("xrange",$e),$e=Ks($e,Ee),G("stars",$e),$e),Kt=$e=>!$e||$e.toLowerCase()==="x"||$e==="*",Wr=($e,Ee)=>$e.trim().split(/\s+/).map(Ye=>No(Ye,Ee)).join(" "),No=($e,Ee)=>{const Ye=Ee.loose?ie[Q.TILDELOOSE]:ie[Q.TILDE];return $e.replace(Ye,(qe,Ge,Le,nt,Wt)=>{G("tilde",$e,qe,Ge,Le,nt,Wt);let ct;return Kt(Ge)?ct="":Kt(Le)?ct=`>=${Ge}.0.0 <${+Ge+1}.0.0-0`:Kt(nt)?ct=`>=${Ge}.${Le}.0 <${Ge}.${+Le+1}.0-0`:Wt?(G("replaceTilde pr",Wt),ct=`>=${Ge}.${Le}.${nt}-${Wt} <${Ge}.${+Le+1}.0-0`):ct=`>=${Ge}.${Le}.${nt} <${Ge}.${+Le+1}.0-0`,G("tilde return",ct),ct})},Rt=($e,Ee)=>$e.trim().split(/\s+/).map(Ye=>Qt(Ye,Ee)).join(" "),Qt=($e,Ee)=>{G("caret",$e,Ee);const Ye=Ee.loose?ie[Q.CARETLOOSE]:ie[Q.CARET],qe=Ee.includePrerelease?"-0":"";return $e.replace(Ye,(Ge,Le,nt,Wt,ct)=>{G("caret",$e,Ge,Le,nt,Wt,ct);let xn;return Kt(Le)?xn="":Kt(nt)?xn=`>=${Le}.0.0${qe} <${+Le+1}.0.0-0`:Kt(Wt)?Le==="0"?xn=`>=${Le}.${nt}.0${qe} <${Le}.${+nt+1}.0-0`:xn=`>=${Le}.${nt}.0${qe} <${+Le+1}.0.0-0`:ct?(G("replaceCaret pr",ct),Le==="0"?nt==="0"?xn=`>=${Le}.${nt}.${Wt}-${ct} <${Le}.${nt}.${+Wt+1}-0`:xn=`>=${Le}.${nt}.${Wt}-${ct} <${Le}.${+nt+1}.0-0`:xn=`>=${Le}.${nt}.${Wt}-${ct} <${+Le+1}.0.0-0`):(G("no pr"),Le==="0"?nt==="0"?xn=`>=${Le}.${nt}.${Wt}${qe} <${Le}.${nt}.${+Wt+1}-0`:xn=`>=${Le}.${nt}.${Wt}${qe} <${Le}.${+nt+1}.0-0`:xn=`>=${Le}.${nt}.${Wt} <${+Le+1}.0.0-0`),G("caret return",xn),xn})},ut=($e,Ee)=>(G("replaceXRanges",$e,Ee),$e.split(/\s+/).map(Ye=>Ln(Ye,Ee)).join(" ")),Ln=($e,Ee)=>{$e=$e.trim();const Ye=Ee.loose?ie[Q.XRANGELOOSE]:ie[Q.XRANGE];return $e.replace(Ye,(qe,Ge,Le,nt,Wt,ct)=>{G("xRange",$e,qe,Ge,Le,nt,Wt,ct);const xn=Kt(Le),vs=xn||Kt(nt),qn=vs||Kt(Wt),by=qn;return Ge==="="&&by&&(Ge=""),ct=Ee.includePrerelease?"-0":"",xn?Ge===">"||Ge==="<"?qe="<0.0.0-0":qe="*":Ge&&by?(vs&&(nt=0),Wt=0,Ge===">"?(Ge=">=",vs?(Le=+Le+1,nt=0,Wt=0):(nt=+nt+1,Wt=0)):Ge==="<="&&(Ge="<",vs?Le=+Le+1:nt=+nt+1),Ge==="<"&&(ct="-0"),qe=`${Ge+Le}.${nt}.${Wt}${ct}`):vs?qe=`>=${Le}.0.0${ct} <${+Le+1}.0.0-0`:qn&&(qe=`>=${Le}.${nt}.0${ct} <${Le}.${+nt+1}.0-0`),G("xRange return",qe),qe})},Ks=($e,Ee)=>(G("replaceStars",$e,Ee),$e.trim().replace(ie[Q.STAR],"")),r5=($e,Ee)=>(G("replaceGTE0",$e,Ee),$e.trim().replace(ie[Ee.includePrerelease?Q.GTE0PRE:Q.GTE0],"")),i5=$e=>(Ee,Ye,qe,Ge,Le,nt,Wt,ct,xn,vs,qn,by)=>(Kt(qe)?Ye="":Kt(Ge)?Ye=`>=${qe}.0.0${$e?"-0":""}`:Kt(Le)?Ye=`>=${qe}.${Ge}.0${$e?"-0":""}`:nt?Ye=`>=${Ye}`:Ye=`>=${Ye}${$e?"-0":""}`,Kt(xn)?ct="":Kt(vs)?ct=`<${+xn+1}.0.0-0`:Kt(qn)?ct=`<${xn}.${+vs+1}.0-0`:by?ct=`<=${xn}.${vs}.${qn}-${by}`:$e?ct=`<${xn}.${vs}.${+qn+1}-0`:ct=`<=${ct}`,`${Ye} ${ct}`.trim()),s5=($e,Ee,Ye)=>{for(let qe=0;qe<$e.length;qe++)if(!$e[qe].test(Ee))return!1;if(Ee.prerelease.length&&!Ye.includePrerelease){for(let qe=0;qe<$e.length;qe++)if(G($e[qe].semver),$e[qe].semver!==q.ANY&&$e[qe].semver.prerelease.length>0){const Ge=$e[qe].semver;if(Ge.major===Ee.major&&Ge.minor===Ee.minor&&Ge.patch===Ee.patch)return!0}return!1}return!0};return ac}const TT=mw();var yw=(E,_,R)=>{try{_=new TT(_,R)}catch{return!1}return _.test(E)},vw=Nn(yw);function RT(E,_,R){let L;_.x2&&(_.x?(R&&E.x>E.x2&&(L=E.x,E.x=E.x2,E.x2=L),E.width=E.x2-E.x):E.x=E.x2-(E.width||0)),_.xc&&(E.x=E.xc-(E.width||0)/2),_.y2&&(_.y?(R&&E.y>E.y2&&(L=E.y,E.y=E.y2,E.y2=L),E.height=E.y2-E.y):E.y=E.y2-(E.height||0)),_.yc&&(E.y=E.yc-(E.height||0)/2)}var FT={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},PT={"*":(E,_)=>E*_,"+":(E,_)=>E+_,"-":(E,_)=>E-_,"/":(E,_)=>E/_,"%":(E,_)=>E%_,">":(E,_)=>E>_,"<":(E,_)=>E<_,"<=":(E,_)=>E<=_,">=":(E,_)=>E>=_,"==":(E,_)=>E==_,"!=":(E,_)=>E!=_,"===":(E,_)=>E===_,"!==":(E,_)=>E!==_,"&":(E,_)=>E&_,"|":(E,_)=>E|_,"^":(E,_)=>E^_,"<<":(E,_)=>E<<_,">>":(E,_)=>E>>_,">>>":(E,_)=>E>>>_},OT={"+":E=>+E,"-":E=>-E,"~":E=>~E,"!":E=>!E};const MT=Array.prototype.slice,Wl=(E,_,R)=>{const L=R?R(_[0]):_[0];return L[E].apply(L,MT.call(_,1))},DT=(E,_,R,L,q,G,re)=>new Date(E,_||0,R??1,L||0,q||0,G||0,re||0);var NT={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(E,_,R)=>Math.max(_,Math.min(R,E)),now:Date.now,utc:Date.UTC,datetime:DT,date:E=>new Date(E).getDate(),day:E=>new Date(E).getDay(),year:E=>new Date(E).getFullYear(),month:E=>new Date(E).getMonth(),hours:E=>new Date(E).getHours(),minutes:E=>new Date(E).getMinutes(),seconds:E=>new Date(E).getSeconds(),milliseconds:E=>new Date(E).getMilliseconds(),time:E=>new Date(E).getTime(),timezoneoffset:E=>new Date(E).getTimezoneOffset(),utcdate:E=>new Date(E).getUTCDate(),utcday:E=>new Date(E).getUTCDay(),utcyear:E=>new Date(E).getUTCFullYear(),utcmonth:E=>new Date(E).getUTCMonth(),utchours:E=>new Date(E).getUTCHours(),utcminutes:E=>new Date(E).getUTCMinutes(),utcseconds:E=>new Date(E).getUTCSeconds(),utcmilliseconds:E=>new Date(E).getUTCMilliseconds(),length:E=>E.length,join:function(){return Wl("join",arguments)},indexof:function(){return Wl("indexOf",arguments)},lastindexof:function(){return Wl("lastIndexOf",arguments)},slice:function(){return Wl("slice",arguments)},reverse:E=>E.slice().reverse(),parseFloat,parseInt,upper:E=>String(E).toUpperCase(),lower:E=>String(E).toLowerCase(),substring:function(){return Wl("substring",arguments,String)},split:function(){return Wl("split",arguments,String)},replace:function(){return Wl("replace",arguments,String)},trim:E=>String(E).trim(),regexp:RegExp,test:(E,_)=>RegExp(E).test(_)};const IT=["view","item","group","xy","x","y"],lc=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&lc.add(setImmediate);const ay={Literal:(E,_)=>_.value,Identifier:(E,_)=>{const R=_.name;return E.memberDepth>0?R:R==="datum"?E.datum:R==="event"?E.event:R==="item"?E.item:FT[R]||E.params["$"+R]},MemberExpression:(E,_)=>{const R=!_.computed,L=E(_.object);R&&(E.memberDepth+=1);const q=E(_.property);if(R&&(E.memberDepth-=1),lc.has(L[q])){console.error(`Prevented interpretation of member "${q}" which could lead to insecure code execution`);return}return L[q]},CallExpression:(E,_)=>{const R=_.arguments;let L=_.callee.name;return L.startsWith("_")&&(L=L.slice(1)),L==="if"?E(R[0])?E(R[1]):E(R[2]):(E.fn[L]||NT[L]).apply(E.fn,R.map(E))},ArrayExpression:(E,_)=>_.elements.map(E),BinaryExpression:(E,_)=>PT[_.operator](E(_.left),E(_.right)),UnaryExpression:(E,_)=>OT[_.operator](E(_.argument)),ConditionalExpression:(E,_)=>E(_.test)?E(_.consequent):E(_.alternate),LogicalExpression:(E,_)=>_.operator==="&&"?E(_.left)&&E(_.right):E(_.left)||E(_.right),ObjectExpression:(E,_)=>_.properties.reduce((R,L)=>{E.memberDepth+=1;const q=E(L.key);return E.memberDepth-=1,lc.has(E(L.value))?console.error(`Prevented interpretation of property "${q}" which could lead to insecure code execution`):R[q]=E(L.value),R},{})};function od(E,_,R,L,q,G){const re=ie=>ay[ie.type](re,ie);return re.memberDepth=0,re.fn=Object.create(_),re.params=R,re.datum=L,re.event=q,re.item=G,IT.forEach(ie=>re.fn[ie]=function(){return q.vega[ie](...arguments)}),re(E)}var LT={operator(E,_){const R=_.ast,L=E.functions;return q=>od(R,L,q)},parameter(E,_){const R=_.ast,L=E.functions;return(q,G)=>od(R,L,G,q)},event(E,_){const R=_.ast,L=E.functions;return q=>od(R,L,void 0,void 0,q)},handler(E,_){const R=_.ast,L=E.functions;return(q,G)=>{const re=G.item&&G.item.datum;return od(R,L,q,re,G)}},encode(E,_){const{marktype:R,channels:L}=_,q=E.functions,G=R==="group"||R==="image"||R==="rect";return(re,ie)=>{const Q=re.datum;let ne=0,ge;for(const Pe in L)ge=od(L[Pe].ast,q,ie,Q,void 0,re),re[Pe]!==ge&&(re[Pe]=ge,ne=1);return R!=="rule"&&RT(re,L,G),ne}}};function ly(E){const[_,R]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(E).slice(1,3);return{library:_,version:R}}var zT="vega-themes",jT="2.15.0",BT="Themes for stylized Vega and Vega-Lite visualizations.",bw=["vega","vega-lite","themes","style"],UT="BSD-3-Clause",VT={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},WT=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],uy="build/vega-themes.js",HT="build/vega-themes.module.js",qT="build/vega-themes.min.js",GT="build/vega-themes.min.js",Op="build/vega-themes.module.d.ts",cy={type:"git",url:"https://github.com/vega/vega-themes.git"},fy=["src","build"],dy={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},XT={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},xw={vega:"*","vega-lite":"*"},hy={},ww={name:zT,version:jT,description:BT,keywords:bw,license:UT,author:VT,contributors:WT,main:uy,module:HT,unpkg:qT,jsdelivr:GT,types:Op,repository:cy,files:fy,scripts:dy,devDependencies:XT,peerDependencies:xw,dependencies:hy};const Wi="#fff",uc="#888",YT={background:"#333",view:{stroke:uc},title:{color:Wi,subtitleColor:Wi},style:{"guide-label":{fill:Wi},"guide-title":{fill:Wi}},axis:{domainColor:Wi,gridColor:uc,tickColor:Wi}},Pa="#4572a7",KT={background:"#fff",arc:{fill:Pa},area:{fill:Pa},line:{stroke:Pa,strokeWidth:2},path:{stroke:Pa},rect:{fill:Pa},shape:{stroke:Pa},symbol:{fill:Pa,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Oa="#30a2da",py="#cbcbcb",QT="#999",Sw="#333",Ew="#f0f0f0",I="#333",V={arc:{fill:Oa},area:{fill:Oa},axis:{domainColor:py,grid:!0,gridColor:py,gridWidth:1,labelColor:QT,labelFontSize:10,titleColor:Sw,tickColor:py,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Ew,group:{fill:Ew},legend:{labelColor:I,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:I,titleFontSize:14,titlePadding:10},line:{stroke:Oa,strokeWidth:2},path:{stroke:Oa,strokeWidth:.5},rect:{fill:Oa},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Oa},bar:{binSpacing:2,fill:Oa,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Y="#000",ke={group:{fill:"#e5e5e5"},arc:{fill:Y},area:{fill:Y},line:{stroke:Y},path:{stroke:Y},rect:{fill:Y},shape:{stroke:Y},symbol:{fill:Y,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},lt=22,zt="normal",Yt="Benton Gothic, sans-serif",bt=11.5,en="normal",Jn="#82c6df",kr="Benton Gothic Bold, sans-serif",cc="normal",Mp=13,Hl={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Cw={background:"#ffffff",title:{anchor:"start",color:"#000000",font:kr,fontSize:lt,fontWeight:zt},arc:{fill:Jn},area:{fill:Jn},line:{stroke:Jn,strokeWidth:2},path:{stroke:Jn},rect:{fill:Jn},shape:{stroke:Jn},symbol:{fill:Jn,size:30},axis:{labelFont:Yt,labelFontSize:bt,labelFontWeight:en,titleFont:kr,titleFontSize:Mp,titleFontWeight:cc},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Yt,labelFontSize:bt,symbolType:"square",titleFont:kr,titleFontSize:Mp,titleFontWeight:cc},range:{category:Hl["category-6"],diverging:Hl["fireandice-6"],heatmap:Hl["fire-7"],ordinal:Hl["fire-7"],ramp:Hl["fire-7"]}},ad="#ab5787",kw="#979797",bge={background:"#f9f9f9",arc:{fill:ad},area:{fill:ad},line:{stroke:ad},path:{stroke:ad},rect:{fill:ad},shape:{stroke:ad},symbol:{fill:ad,size:30},axis:{domainColor:kw,domainWidth:.5,gridWidth:.2,labelColor:kw,tickColor:kw,tickWidth:.2,titleColor:kw},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},ld="#3e5c69",xge={background:"#fff",arc:{fill:ld},area:{fill:ld},line:{stroke:ld},path:{stroke:ld},rect:{fill:ld},shape:{stroke:ld},symbol:{fill:ld},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ys="#1696d2",R7="#000000",wge="#FFFFFF",_w="Lato",JT="Lato",Sge="Lato",Ege="#DEDDDD",Cge=18,gy={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},kge={background:wge,title:{anchor:"start",fontSize:Cge,font:_w},axisX:{domain:!0,domainColor:R7,domainWidth:1,grid:!1,labelFontSize:12,labelFont:JT,labelAngle:0,tickColor:R7,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:_w},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Ege,gridWidth:1,labelFontSize:12,labelFont:JT,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:_w,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:JT,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:_w,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:gy["six-groups-cat-1"],diverging:gy["diverging-colors"],heatmap:gy["diverging-colors"],ordinal:gy["six-groups-seq"],ramp:gy["shades-blue"]},area:{fill:Ys},rect:{fill:Ys},line:{color:Ys,stroke:Ys,strokeWidth:5},trail:{color:Ys,stroke:Ys,strokeWidth:0,size:1},path:{stroke:Ys,strokeWidth:.5},point:{filled:!0},text:{font:Sge,color:Ys,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ys,stroke:null}},arc:{fill:Ys},shape:{stroke:Ys},symbol:{fill:Ys,size:30}},ud="#3366CC",F7="#ccc",$w="Arial, sans-serif",_ge={arc:{fill:ud},area:{fill:ud},path:{stroke:ud},rect:{fill:ud},shape:{stroke:ud},symbol:{stroke:ud},circle:{fill:ud},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:$w,fontSize:12},"guide-title":{font:$w,fontSize:12},"group-title":{font:$w,fontSize:12}},title:{font:$w,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:F7,tickColor:F7,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ZT=E=>E*(1/3+1),P7=ZT(9),O7=ZT(10),M7=ZT(12),my="Segoe UI",D7="wf_standard-font, helvetica, arial, sans-serif",N7="#252423",yy="#605E5C",I7="transparent",$ge="#C8C6C4",Mo="#118DFF",Age="#12239E",Tge="#E66C37",Rge="#6B007B",Fge="#E044A7",Pge="#744EC2",Oge="#D9B300",Mge="#D64550",L7=Mo,z7="#DEEFFF",j7=[z7,L7],Dge={view:{stroke:I7},background:I7,font:my,header:{titleFont:D7,titleFontSize:M7,titleColor:N7,labelFont:my,labelFontSize:O7,labelColor:yy},axis:{ticks:!1,grid:!1,domain:!1,labelColor:yy,labelFontSize:P7,titleFont:D7,titleColor:N7,titleFontSize:M7,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:$ge,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Mo},line:{stroke:Mo,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:my,fontSize:P7,fill:yy},arc:{fill:Mo},area:{fill:Mo,line:!0,opacity:.6},path:{stroke:Mo},rect:{fill:Mo},point:{fill:Mo,filled:!0,size:75},shape:{stroke:Mo},symbol:{fill:Mo,strokeWidth:1.5,size:50},legend:{titleFont:my,titleFontWeight:"bold",titleColor:yy,labelFont:my,labelFontSize:O7,labelColor:yy,symbolType:"circle",symbolSize:75},range:{category:[Mo,Age,Tge,Rge,Fge,Pge,Oge,Mge],diverging:j7,heatmap:j7,ordinal:[z7,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",L7]}},e5='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Nge='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',t5=400,Aw={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Ige=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Lge=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Tw({theme:E,background:_}){const R=["white","g10"].includes(E)?"light":"dark",L=Aw.gridBg[E],q=Aw.textPrimary[E],G=Aw.textSecondary[E],re=R==="dark"?Ige:Lge,ie=R==="dark"?"#d4bbff":"#6929c4";return{background:_,arc:{fill:ie},area:{fill:ie},path:{stroke:ie},rect:{fill:ie},shape:{stroke:ie},symbol:{stroke:ie},circle:{fill:ie},view:{fill:L,stroke:L},group:{fill:L},title:{color:q,anchor:"start",dy:-15,fontSize:16,font:e5,fontWeight:600},axis:{labelColor:G,labelFontSize:12,labelFont:Nge,labelFontWeight:t5,titleColor:q,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Aw.layerAccent01[E],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:e5,fill:G,fontWeight:t5},"guide-title":{font:e5,fill:G,fontWeight:t5}},range:{category:re,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const zge=Tw({theme:"white",background:"#ffffff"}),jge=Tw({theme:"g10",background:"#f4f4f4"}),Bge=Tw({theme:"g90",background:"#262626"}),Uge=Tw({theme:"g100",background:"#161616"}),Vge=ww.version;var Wge=Object.freeze({__proto__:null,carbong10:jge,carbong100:Uge,carbong90:Bge,carbonwhite:zge,dark:YT,excel:KT,fivethirtyeight:V,ggplot2:ke,googlecharts:_ge,latimes:Cw,powerbi:Dge,quartz:bge,urbaninstitute:kge,version:Vge,vox:xge});function Dp(E,_,R){return E.fields=_||[],E.fname=R,E}function Hge(E){return E.length===1?qge(E[0]):Gge(E)}const qge=E=>function(_){return _[E]},Gge=E=>{const _=E.length;return function(R){for(let L=0;L<_;++L)R=R[E[L]];return R}};function n5(E){throw Error(E)}function Xge(E){const _=[],R=E.length;let L=null,q=0,G="",re,ie,Q;E=E+"";function ne(){_.push(G+E.substring(re,ie)),G="",re=ie+1}for(re=ie=0;ie<R;++ie)if(Q=E[ie],Q==="\\")G+=E.substring(re,ie++),re=ie;else if(Q===L)ne(),L=null,q=-1;else{if(L)continue;re===q&&Q==='"'||re===q&&Q==="'"?(re=ie+1,L=Q):Q==="."&&!q?ie>re?ne():re=ie+1:Q==="["?(ie>re&&ne(),q=re=ie+1):Q==="]"&&(q||n5("Access path missing open bracket: "+E),q>0&&ne(),q=0,re=ie+1)}return q&&n5("Access path missing closing bracket: "+E),L&&n5("Access path missing closing quote: "+E),ie>re&&(ie++,ne()),_}function Yge(E,_,R){const L=Xge(E);return E=L.length===1?L[0]:E,Dp(Hge(L),[E],E)}Yge("id"),Dp(E=>E,[],"identity"),Dp(()=>0,[],"zero"),Dp(()=>1,[],"one"),Dp(()=>!0,[],"true"),Dp(()=>!1,[],"false");var Kge=Array.isArray;function B7(E){return E===Object(E)}function Qge(E){return typeof E=="string"}function Jge(E,_,R,L){if(Kge(E))return`[${E.map(q=>_(Qge(q)?q:U7(q,R))).join(", ")}]`;if(B7(E)){let q="";const{title:G,image:re,...ie}=E;G&&(q+=`<h2>${_(G)}</h2>`),re&&(q+=`<img src="${new URL(_(re),L||location.href).href}">`);const Q=Object.keys(ie);if(Q.length>0){q+="<table>";for(const ne of Q){let ge=ie[ne];ge!==void 0&&(B7(ge)&&(ge=U7(ge,R)),q+=`<tr><td class="key">${_(ne)}</td><td class="value">${_(ge)}</td></tr>`)}q+="</table>"}return q||"{}"}return _(E)}function Zge(E){const _=[];return function(R,L){if(typeof L!="object"||L===null)return L;const q=_.indexOf(this)+1;return _.length=q,_.length>E?"[Object]":_.indexOf(L)>=0?"[Circular]":(_.push(L),L)}}function U7(E,_){return JSON.stringify(E,Zge(_))}var eme=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const V7="vg-tooltip-element",tme={offsetX:10,offsetY:10,id:V7,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:nme,maxDepth:2,formatTooltip:Jge,baseURL:""};function nme(E){return String(E).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function rme(E){if(!/^[A-Za-z]+[-:.\w]*$/.test(E))throw new Error("Invalid HTML ID");return eme.toString().replace(V7,E)}function ime(E,_,R,L){let q=E.clientX+R;q+_.width>window.innerWidth&&(q=+E.clientX-R-_.width);let G=E.clientY+L;return G+_.height>window.innerHeight&&(G=+E.clientY-L-_.height),{x:q,y:G}}class sme{constructor(_){this.options={...tme,..._};const R=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const L=document.createElement("style");L.setAttribute("id",this.options.styleId),L.innerHTML=rme(R);const q=document.head;q.childNodes.length>0?q.insertBefore(L,q.childNodes[0]):q.appendChild(L)}}tooltipHandler(_,R,L,q){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),q==null||q===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(q,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:G,y:re}=ime(R,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${re}px`,this.el.style.left=`${G}px`}}function ome(E,_,R){const L=E.open(_),q=1e4,G=250,{origin:re}=new URL(_);let ie=~~(q/G);function Q(ge){ge.source===L&&(ie=0,E.removeEventListener("message",Q,!1))}E.addEventListener("message",Q,!1);function ne(){ie<=0||(L.postMessage(R,re),setTimeout(ne,G),ie-=1)}setTimeout(ne,G)}var ame=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function lme(E){return E.startsWith("http://")||E.startsWith("https://")||E.startsWith("//")}function W7(E,..._){for(const R of _)ume(E,R);return E}function ume(E,_){for(const R of Object.keys(_))r.writeConfig(E,R,_[R],!0)}var cme="vega-embed",fme="6.26.0",dme="Publish Vega visualizations as embedded web components.",hme=["vega","data","visualization","component","embed"],pme={type:"git",url:"http://github.com/vega/vega-embed.git"},gme={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},mme=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],yme={url:"https://github.com/vega/vega-embed/issues"},vme="https://github.com/vega/vega-embed#readme",bme="BSD-3-Clause",xme="build/vega-embed.js",wme="build/vega-embed.module.js",Sme="build/vega-embed.min.js",Eme="build/vega-embed.min.js",Cme="build/vega-embed.module.d.ts",kme=["src","build"],_me={".":{import:{types:"./build/vega-embed.module.d.ts",default:"./build/vega-embed.module.js"},require:{default:"./build/vega-embed.js"}}},$me={"@babel/core":"^7.24.7","@babel/eslint-parser":"^7.24.7","@babel/plugin-transform-runtime":"^7.24.7","@babel/preset-env":"^7.24.7","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/semver":"^7.5.8","@typescript-eslint/parser":"^7.15.0","@vitest/coverage-v8":"^1.6.0","browser-sync":"^3.0.2",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^9.6.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","eslint-plugin-vitest":"^0.5.4",jsdom:"^24.1.0","postinstall-postinstall":"^2.1.0",prettier:"^3.3.2","release-it":"^17.4.1",rollup:"4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.77.6",typescript:"^5.5.3","typescript-eslint":"^7.15.0",vega:"^5.30.0","vega-lite":"^5.19.0",vitest:"^1.6.0","vitest-canvas-mock":"^0.3.3"},Ame={vega:"^5.21.0","vega-lite":"*"},Tme={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.6.2",tslib:"^2.6.3","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.15.0","vega-tooltip":"^0.34.0"},Rme={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"vitest run",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},Fme={name:cme,version:fme,description:dme,keywords:hme,repository:pme,author:gme,contributors:mme,bugs:yme,homepage:vme,license:bme,main:xme,module:wme,unpkg:Sme,jsdelivr:Eme,types:Cme,files:kme,exports:_me,devDependencies:$me,peerDependencies:Ame,dependencies:Tme,scripts:Rme};const Pme=Fme.version,Do=o;let cd=a;const Rw=typeof window<"u"?window:void 0;cd===void 0&&((K7=Rw==null?void 0:Rw.vl)!=null&&K7.compile)&&(cd=Rw.vl);const Ome={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Mme={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},vy={vega:"Vega","vega-lite":"Vega-Lite"},Fw={vega:Do.version,"vega-lite":cd?cd.version:"not available"},Dme={vega:E=>E,"vega-lite":(E,_)=>cd.compile(E,{config:_}).spec},Nme=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Ime="chart-wrapper";function Lme(E){return typeof E=="function"}function H7(E,_,R,L){const q=`<html><head>${_}</head><body><pre><code class="json">`,G=`</code></pre>${R}</body></html>`,re=window.open("");re.document.write(q+E+G),re.document.title=`${vy[L]} JSON Source`}function zme(E,_){if(E.$schema){const R=ly(E.$schema);_&&_!==R.library&&console.warn(`The given visualization spec is written in ${vy[R.library]}, but mode argument sets ${vy[_]??_}.`);const L=R.library;return vw(Fw[L],`^${R.version.slice(1)}`)||console.warn(`The input spec uses ${vy[L]} ${R.version}, but the current version of ${vy[L]} is v${Fw[L]}.`),L}return"mark"in E||"encoding"in E||"layer"in E||"hconcat"in E||"vconcat"in E||"facet"in E||"repeat"in E?"vega-lite":"marks"in E||"signals"in E||"scales"in E||"axes"in E?"vega":_??"vega"}function q7(E){return!!(E&&"load"in E)}function G7(E){return q7(E)?E:Do.loader(E)}function jme(E){var R;const _=((R=E.usermeta)==null?void 0:R.embedOptions)??{};return r.isString(_.defaultStyle)&&(_.defaultStyle=!1),_}async function Pw(E,_,R={}){let L,q;r.isString(_)?(q=G7(R.loader),L=JSON.parse(await q.load(_))):L=_;const G=jme(L),re=G.loader;(!q||re)&&(q=G7(R.loader??re));const ie=await X7(G,q),Q=await X7(R,q),ne={...W7(Q,ie),config:r.mergeConfig(Q.config??{},ie.config??{})};return await Ume(E,L,ne,q)}async function X7(E,_){const R=r.isString(E.config)?JSON.parse(await _.load(E.config)):E.config??{},L=r.isString(E.patch)?JSON.parse(await _.load(E.patch)):E.patch;return{...E,...L?{patch:L}:{},...R?{config:R}:{}}}function Bme(E){const _=E.getRootNode?E.getRootNode():document;return _ instanceof ShadowRoot?{root:_,rootContainer:_}:{root:document,rootContainer:document.head??document.body}}async function Ume(E,_,R={},L){const q=R.theme?r.mergeConfig(Wge[R.theme],R.config??{}):R.config,G=r.isBoolean(R.actions)?R.actions:W7({},Ome,R.actions??{}),re={...Mme,...R.i18n},ie=R.renderer??"canvas",Q=R.logLevel??Do.Warn,ne=R.downloadFileName??"visualization",ge=typeof E=="string"?document.querySelector(E):E;if(!ge)throw new Error(`${E} does not exist`);if(R.defaultStyle!==!1){const Rt="vega-embed-style",{root:Qt,rootContainer:ut}=Bme(ge);if(!Qt.getElementById(Rt)){const Ln=document.createElement("style");Ln.id=Rt,Ln.innerHTML=R.defaultStyle===void 0||R.defaultStyle===!0?ame.toString():R.defaultStyle,ut.appendChild(Ln)}}const Pe=zme(_,R.mode);let Tt=Dme[Pe](_,q);if(Pe==="vega-lite"&&Tt.$schema){const Rt=ly(Tt.$schema);vw(Fw.vega,`^${Rt.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${Rt.version}, but current version is v${Fw.vega}.`)}ge.classList.add("vega-embed"),G&&ge.classList.add("has-actions"),ge.innerHTML="";let dt=ge;if(G){const Rt=document.createElement("div");Rt.classList.add(Ime),ge.appendChild(Rt),dt=Rt}const Re=R.patch;if(Re&&(Tt=Re instanceof Function?Re(Tt):$(Tt,Re,!0,!1).newDocument),R.formatLocale&&Do.formatLocale(R.formatLocale),R.timeFormatLocale&&Do.timeFormatLocale(R.timeFormatLocale),R.expressionFunctions)for(const Rt in R.expressionFunctions){const Qt=R.expressionFunctions[Rt];"fn"in Qt?Do.expressionFunction(Rt,Qt.fn,Qt.visitor):Qt instanceof Function&&Do.expressionFunction(Rt,Qt)}const{ast:gi}=R,pn=Do.parse(Tt,Pe==="vega-lite"?{}:q,{ast:gi}),bn=new(R.viewClass||Do.View)(pn,{loader:L,logLevel:Q,renderer:ie,...gi?{expr:Do.expressionInterpreter??R.expr??LT}:{}});if(bn.addSignalListener("autosize",(Rt,Qt)=>{const{type:ut}=Qt;ut=="fit-x"?(dt.classList.add("fit-x"),dt.classList.remove("fit-y")):ut=="fit-y"?(dt.classList.remove("fit-x"),dt.classList.add("fit-y")):ut=="fit"?dt.classList.add("fit-x","fit-y"):dt.classList.remove("fit-x","fit-y")}),R.tooltip!==!1){const{loader:Rt,tooltip:Qt}=R,ut=Rt&&!q7(Rt)?Rt==null?void 0:Rt.baseURL:void 0,Ln=Lme(Qt)?Qt:new sme({baseURL:ut,...Qt===!0?{}:Qt}).call;bn.tooltip(Ln)}let{hover:Kt}=R;if(Kt===void 0&&(Kt=Pe==="vega"),Kt){const{hoverSet:Rt,updateSet:Qt}=typeof Kt=="boolean"?{}:Kt;bn.hover(Rt,Qt)}R&&(R.width!=null&&bn.width(R.width),R.height!=null&&bn.height(R.height),R.padding!=null&&bn.padding(R.padding)),await bn.initialize(dt,R.bind).runAsync();let Wr;if(G!==!1){let Rt=ge;if(R.defaultStyle!==!1||R.forceActionsMenu){const ut=document.createElement("details");ut.title=re.CLICK_TO_VIEW_ACTIONS,ge.append(ut),Rt=ut;const Ln=document.createElement("summary");Ln.innerHTML=Nme,ut.append(Ln),Wr=Ks=>{ut.contains(Ks.target)||ut.removeAttribute("open")},document.addEventListener("click",Wr)}const Qt=document.createElement("div");if(Rt.append(Qt),Qt.classList.add("vega-actions"),G===!0||G.export!==!1){for(const ut of["svg","png"])if(G===!0||G.export===!0||G.export[ut]){const Ln=re[`${ut.toUpperCase()}_ACTION`],Ks=document.createElement("a"),r5=r.isObject(R.scaleFactor)?R.scaleFactor[ut]:R.scaleFactor;Ks.text=Ln,Ks.href="#",Ks.target="_blank",Ks.download=`${ne}.${ut}`,Ks.addEventListener("mousedown",async function(i5){i5.preventDefault();const s5=await bn.toImageURL(ut,r5);this.href=s5}),Qt.append(Ks)}}if(G===!0||G.source!==!1){const ut=document.createElement("a");ut.text=re.SOURCE_ACTION,ut.href="#",ut.addEventListener("click",function(Ln){H7(Ne(_),R.sourceHeader??"",R.sourceFooter??"",Pe),Ln.preventDefault()}),Qt.append(ut)}if(Pe==="vega-lite"&&(G===!0||G.compiled!==!1)){const ut=document.createElement("a");ut.text=re.COMPILED_ACTION,ut.href="#",ut.addEventListener("click",function(Ln){H7(Ne(Tt),R.sourceHeader??"",R.sourceFooter??"","vega"),Ln.preventDefault()}),Qt.append(ut)}if(G===!0||G.editor!==!1){const ut=R.editorUrl??"https://vega.github.io/editor/",Ln=document.createElement("a");Ln.text=re.EDITOR_ACTION,Ln.href="#",Ln.addEventListener("click",function(Ks){ome(window,ut,{config:q,mode:Re?"vega":Pe,renderer:ie,spec:Ne(Re?Tt:_)}),Ks.preventDefault()}),Qt.append(Ln)}}function No(){Wr&&document.removeEventListener("click",Wr),bn.finalize()}return{view:bn,spec:_,vgSpec:Tt,finalize:No,embedOptions:R}}async function Y7(E,_={}){const R=document.createElement("div");R.classList.add("vega-embed-wrapper");const L=document.createElement("div");R.appendChild(L);const q=_.actions===!0||_.actions===!1?_.actions:{export:!0,source:!1,compiled:!0,editor:!0,..._.actions},G=await Pw(L,E,{actions:q,..._});return R.value=G.view,R}function Vme(E){return E instanceof HTMLElement}const fc=(...E)=>E.length>1&&(r.isString(E[0])&&!lme(E[0])||Vme(E[0])||E.length===3)?Pw(E[0],E[1],E[2]):Y7(E[0],E[1]);return fc.vegaLite=cd,fc.vl=cd,fc.container=Y7,fc.embed=Pw,fc.vega=Do,fc.default=Pw,fc.version=Pme,fc})})(Hpe);var qpe=Hpe.exports,m7={};m7.__esModule=!0;m7.default=Vft;function Vft(e){return!!e&&{}.toString.call(e)==="[object Function]"}g7.__esModule=!0;g7.default=Gft;var Wft=qpe,Hft=qft(m7);function qft(e){return e&&e.__esModule?e:{default:e}}function Gft(e,t,n){n&&((0,Hft.default)(n)?n(e.data(t)):e.change(t,Wft.vega.changeset().remove(()=>!0).insert(n)))}p7.__esModule=!0;p7.default=Kft;var Xft=Yft(g7);function Yft(e){return e&&e.__esModule?e:{default:e}}function Kft(e,t){Object.keys(t).forEach(n=>{(0,Xft.default)(e,n,t[n])})}var sT={},oT={};oT.__esModule=!0;oT.default=Qft;function Qft(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}var cw={};cw.__esModule=!0;cw.NOOP=void 0;const Jft=()=>{};cw.NOOP=Jft;var y7={};y7.__esModule=!0;y7.default=Zft;function Zft(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}var v7={},edt=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};v7.__esModule=!0;v7.default=rdt;var tdt=Gpe(edt),ndt=Gpe(oT);function Gpe(e){return e&&e.__esModule?e:{default:e}}function rdt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=(0,ndt.default)([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!(0,tdt.default)(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}var b7={};b7.__esModule=!0;b7.default=idt;function idt(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}var x7={};x7.__esModule=!0;x7.default=sdt;function sdt(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}sT.__esModule=!0;sT.default=void 0;var KX=tc(ape),KR=tc(M),odt=tc(qpe),QX=tc(iT),adt=tc(oT),ldt=cw,QR=tc(y7),udt=tc(v7),JX=tc(b7),JR=tc(x7);function tc(e){return e&&e.__esModule?e:{default:e}}function X1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Xpe extends KR.default.PureComponent{constructor(){super(...arguments),X1(this,"containerRef",KR.default.createRef()),X1(this,"resultPromise",void 0),X1(this,"handleError",t=>{const{onError:n=ldt.NOOP}=this.props;n(t,this.containerRef.current),console.warn(t)}),X1(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=(0,adt.default)([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=(0,udt.default)((0,JR.default)(this.props),(0,JR.default)(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!(0,QX.default)(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&(0,JX.default)(a,s),i&&(0,QR.default)(a,i)),a.run()})}else(0,QX.default)(i,s)||this.modifyView(o=>{s&&(0,JX.default)(o,s),i&&(0,QR.default)(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=(0,JR.default)(this.props);this.resultPromise=(0,odt.default)(this.containerRef.current,a,o).then(l=>{if(l){const{view:u}=l;(0,QR.default)(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return KR.default.createElement("div",{ref:this.containerRef,className:t,style:n})}}sT.default=Xpe;X1(Xpe,"propTypes",{className:KX.default.string,onError:KX.default.func});rT.__esModule=!0;rT.default=void 0;fw(ape);var ZR=fw(M),cdt=fw(iT),fdt=fw(p7),ddt=fw(sT),hdt=cw;function fw(e){return e&&e.__esModule?e:{default:e}}function bM(){return bM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bM.apply(this,arguments)}function xM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const pdt={};class Ype extends ZR.default.PureComponent{constructor(){super(...arguments),xM(this,"vegaEmbed",ZR.default.createRef()),xM(this,"handleNewView",t=>{this.update();const{onNewView:n=hdt.NOOP}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){(0,cdt.default)(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{(0,fdt.default)(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return ZR.default.createElement(ddt.default,bM({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}rT.default=Ype;xM(Ype,"defaultProps",{data:pdt});var gdt=vdt,mdt=Kpe(M),ydt=Kpe(rT);function Kpe(e){return e&&e.__esModule?e:{default:e}}function wM(){return wM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wM.apply(this,arguments)}function vdt(e){return mdt.default.createElement(ydt.default,wM({},e,{mode:"vega-lite"}))}const ZX=new Map;function bdt(e){const t=JSON.stringify(e.spec),n=ZX.get(t);return n?T.jsx("img",{src:n,alt:"cached"}):T.jsx(gdt,{...e,actions:!1,renderer:"canvas",onNewView:r=>{r.toImageURL("svg").then(i=>{ZX.set(t,i)})}})}function xdt({chart:e,...t}){const{data:n,chartTheme:r,spec:i}=Nut(e),s=e.preferred,o=st(c=>c.setChartPreferred),{mobile:a}=Hs(),l=()=>{e.key&&o(e.key,!s)},u=zut(l);return T.jsxs(Sa,{p:6,flexDir:"column",scrollSnapAlign:"start",...u,...t,children:[T.jsxs(Vb,{children:[T.jsx(kp,{fontSize:18,mb:4,textAlign:"center",children:e.title}),T.jsx(bdt,{spec:i,data:n,theme:r,actions:!1,logLevel:Zk})]}),a&&T.jsxs(T.Fragment,{children:[T.jsx(uw,{}),T.jsx(Zt,{justifyContent:"flex-end",w:"full",children:T.jsx(Qh,{variant:"ghost",icon:T.jsx(wt,{as:s?tT:jpe,boxSize:6}),py:8,size:"lg","aria-label":"Bookmark current chart",onClick:l,"data-log-click":"prefer-chart",colorScheme:s?"red":"gray"})})]})]})}const wdt=M.memo(xdt);function Sdt(e){const{sessionInitialized:t,chartDisplaying:n,currentChartPreferred:r,handleNextChart:i,handlePrevChart:s,handlePreferChart:o}=Iut(),{t:a}=ec();return T.jsxs(epe,{...e,children:[T.jsx(aa,{py:8,size:"lg",w:"full","aria-label":"Previous chart",onClick:s,"data-log-click":"prev-chart",isDisabled:!t||!n,variant:"ghost",children:T.jsxs(Au,{spacing:2,children:[T.jsx(wt,{as:Eft,boxSize:6}),T.jsx(un,{fontSize:"sm",children:a("navigator.prev")})]})}),T.jsx(aa,{py:8,size:"lg",w:"full","aria-label":"Next chart",onClick:i,"data-log-click":"next-chart",isDisabled:!t,variant:"ghost",children:T.jsxs(Au,{spacing:2,children:[T.jsx(wt,{as:zpe,boxSize:6}),T.jsx(un,{fontSize:"sm",children:a("navigator.next")})]})}),T.jsx(aa,{py:8,size:"lg",w:"full","aria-label":"Bookmark current chart",onClick:o,"data-log-click":"prefer-chart",colorScheme:r?"red":"gray",isDisabled:!t||!n,variant:r?"solid":"ghost",children:T.jsxs(Au,{spacing:2,children:[T.jsx(wt,{as:r?tT:jpe,boxSize:6}),T.jsx(un,{fontSize:"sm",children:a("bookmarks.action")})]})})]})}const Qpe=({fieldType:e,...t})=>{switch(e){case"numeric":return T.jsx(wt,{as:Rft,...t});case"categorical":return T.jsx(wt,{as:Ift,...t});case"datetime":return T.jsx(wt,{as:Cft,...t});case"name":return T.jsx(wt,{as:Nft,...t});default:return null}},s1=ex(".3~s");function Uo({children:e}){return T.jsx(Zt,{flexDir:"column",justify:"center",alignItems:"start",w:"full",h:"full",children:T.jsx(mpe,{children:e})})}function Edt({metadata:e}){switch(e.type){case"datetime":return T.jsxs(Rv,{gridTemplateColumns:"1fr 4fr",children:[T.jsx(Uo,{children:"min"}),T.jsx(un,{children:e.min}),T.jsx(Uo,{children:"max"}),T.jsx(un,{children:e.max})]});case"numeric":return T.jsxs(Rv,{gridTemplateColumns:"2fr 3fr 2fr 3fr",children:[T.jsx(Uo,{children:"min"}),T.jsx(un,{children:s1(e.min)}),T.jsx(Uo,{children:"max"}),T.jsx(un,{children:s1(e.max)}),T.jsx(Uo,{children:"mean"}),T.jsx(un,{children:s1(e.mean)}),T.jsx(Uo,{children:"median"}),T.jsx(un,{children:s1(e.median)}),T.jsx(Uo,{children:"std"}),T.jsx(un,{children:s1(e.std)})]});case"categorical":return T.jsxs(Rv,{gridTemplateColumns:"1fr 4fr",children:[T.jsx(Uo,{children:"top"}),T.jsx(un,{children:e.top}),T.jsx(Uo,{children:"freq"}),T.jsx(un,{children:e.freq})]});case"name":default:return null}}function Cdt({field:e}){const t=ci(r=>r.setTabByName),n=ci(r=>r.appendSearchTarget);return T.jsxs(Yhe,{children:[T.jsx(qhe,{borderRadius:"md","data-log-click":`open-field-${e.name}`,children:T.jsxs(Zt,{w:"full",gap:2,align:"center",children:[T.jsx(Qpe,{fieldType:e.type,boxSize:4}),T.jsx(kp,{fontSize:"md",children:e.name}),T.jsx(uw,{}),e.type!=="name"&&T.jsx(Qh,{variant:"ghost",p:0,m:0,size:"xs",icon:T.jsx(wt,{as:Upe}),"aria-label":`Search ${e.name}`,onClick:r=>{t("search"),n(e.name),r.stopPropagation()},"data-log-click":`search-field-${e.name}`}),T.jsx(Xhe,{})]})}),T.jsxs(Qhe,{px:2,pb:2,children:[T.jsxs(Rv,{gridTemplateColumns:"2fr 3fr 2fr 3fr",children:[T.jsx(Uo,{children:"unique"}),T.jsx(un,{children:e.metadata.unique}),T.jsx(Uo,{children:"missing"}),T.jsx(un,{children:e.metadata.missing})]}),T.jsx(Edt,{metadata:e.metadata})]})]})}function kdt(e){const t=st(r=>r.fields),n=M.useMemo(()=>Array.from(t).sort(VK),[t]);return T.jsx(eT,{as:Au,h:"full",...e,children:T.jsx(Zt,{h:"full",w:"full",overflowY:"auto",flexDir:"column",children:T.jsx(Jhe,{allowMultiple:!0,children:n.map(r=>T.jsx(Cdt,{field:r},r.name))})})})}function _dt({field:e,...t}){const{name:n,type:r}=e;return T.jsxs(u7,{gap:2,borderRadius:"full",colorScheme:cr,...t,children:[T.jsx(Qpe,{fieldType:r}),T.jsx(c7,{children:n})]})}function $dt(e){const{loading:t}=Mpe(),{loadingData:n,fileInputRef:r,pathInput:i,inputDisabled:s,handleFileButtonClick:o,handleFileChange:a,handleInputChange:l,handleSubmit:u}=Tct();return T.jsxs(Zt,{as:npe,...e,children:[T.jsxs(lpe,{children:[T.jsx(Ub,{placeholder:"https://...",onChange:l,value:i,borderRightRadius:0,_focusVisible:{borderColor:cr}}),T.jsxs(e7,{children:[T.jsx(Ub,{type:"file",display:"none",ref:r,onChange:a,accept:".csv,.json"}),T.jsx(Qh,{"aria-label":"Select File",icon:T.jsx(wt,{as:Aft}),variant:"link",onClick:o,"data-log-click":"file-attachment"})]})]}),T.jsx(Qh,{borderLeftRadius:0,colorScheme:cr,type:"submit",isLoading:n||t,icon:T.jsx(wt,{as:Vpe}),"aria-label":"Load Data",isDisabled:s,"data-log-click":"submit-data",onClick:u,children:s?"Please Input Data":"Load Data"})]})}function Adt(e){const{t}=ec();return T.jsxs(Sa,{flexDir:"column",p:2,...e,children:[T.jsxs(Sa,{gap:2,mb:4,children:[T.jsx(wt,{as:Wpe,boxSize:12}),T.jsx(kp,{fontSize:40,children:"Swipytics"})]}),T.jsx(un,{textColor:"gray",textAlign:"center",fontSize:"sm",children:t("home.description")}),T.jsxs(Au,{w:"full",color:"gray",gap:1,mt:8,p:0,children:[T.jsxs(Zt,{gap:1,children:[T.jsx(un,{fontSize:"xs",textAlign:"center",children:"Swipytics @ 2024"}),T.jsx(lE,{href:"https://jiwnchoi.me",isExternal:!0,children:T.jsx(un,{fontSize:"xs",textAlign:"center",textDecoration:"underline",children:"Jiwon Choi"})}),T.jsx(un,{fontSize:"xs",textAlign:"center",children:"All rights reserved."})]}),T.jsxs(Zt,{gap:4,children:[T.jsx(lE,{href:"https://github.com/jiwnchoi/Swipytics",isExternal:!0,children:T.jsx(aa,{leftIcon:T.jsx(wt,{as:Tft}),size:"xs",variant:"link",color:"gray",children:"Github"})}),T.jsx(lE,{href:"https://idclab.skku.edu",isExternal:!0,children:T.jsxs(aa,{variant:"link",size:"xs",leftIcon:T.jsx(wt,{as:Fft}),color:"gray",children:[T.jsx(un,{fontFamily:"Rajdhani",fontWeight:600,fontSize:"sm",children:"IDC"}),T.jsx(un,{fontFamily:"Rajdhani",fontWeight:500,fontSize:"sm",children:"Lab"})]})})]})]})]})}const Jpe=M.memo(Adt);function Tdt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zpe=Tdt,Rdt=typeof Zi=="object"&&Zi&&Zi.Object===Object&&Zi,Fdt=Rdt,Pdt=Fdt,Odt=typeof self=="object"&&self&&self.Object===Object&&self,Mdt=Pdt||Odt||Function("return this")(),ege=Mdt,Ddt=ege,Ndt=function(){return Ddt.Date.now()},Idt=Ndt,Ldt=/\s/;function zdt(e){for(var t=e.length;t--&&Ldt.test(e.charAt(t)););return t}var jdt=zdt,Bdt=jdt,Udt=/^\s+/;function Vdt(e){return e&&e.slice(0,Bdt(e)+1).replace(Udt,"")}var Wdt=Vdt,Hdt=ege,qdt=Hdt.Symbol,tge=qdt,eY=tge,nge=Object.prototype,Gdt=nge.hasOwnProperty,Xdt=nge.toString,o1=eY?eY.toStringTag:void 0;function Ydt(e){var t=Gdt.call(e,o1),n=e[o1];try{e[o1]=void 0;var r=!0}catch{}var i=Xdt.call(e);return r&&(t?e[o1]=n:delete e[o1]),i}var Kdt=Ydt,Qdt=Object.prototype,Jdt=Qdt.toString;function Zdt(e){return Jdt.call(e)}var eht=Zdt,tY=tge,tht=Kdt,nht=eht,rht="[object Null]",iht="[object Undefined]",nY=tY?tY.toStringTag:void 0;function sht(e){return e==null?e===void 0?iht:rht:nY&&nY in Object(e)?tht(e):nht(e)}var oht=sht;function aht(e){return e!=null&&typeof e=="object"}var lht=aht,uht=oht,cht=lht,fht="[object Symbol]";function dht(e){return typeof e=="symbol"||cht(e)&&uht(e)==fht}var hht=dht,pht=Wdt,rY=Zpe,ght=hht,iY=NaN,mht=/^[-+]0x[0-9a-f]+$/i,yht=/^0b[01]+$/i,vht=/^0o[0-7]+$/i,bht=parseInt;function xht(e){if(typeof e=="number")return e;if(ght(e))return iY;if(rY(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=rY(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=pht(e);var n=yht.test(e);return n||vht.test(e)?bht(e.slice(2),n?2:8):mht.test(e)?iY:+e}var wht=xht,Sht=Zpe,eF=Idt,sY=wht,Eht="Expected a function",Cht=Math.max,kht=Math.min;function _ht(e,t,n){var r,i,s,o,a,l,u=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Eht);t=sY(t)||0,Sht(n)&&(c=!!n.leading,f="maxWait"in n,s=f?Cht(sY(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(C){var S=r,k=i;return r=i=void 0,u=C,o=e.apply(k,S),o}function p(C){return u=C,a=setTimeout(y,t),c?h(C):o}function g(C){var S=C-l,k=C-u,$=t-S;return f?kht($,s-k):$}function m(C){var S=C-l,k=C-u;return l===void 0||S>=t||S<0||f&&k>=s}function y(){var C=eF();if(m(C))return v(C);a=setTimeout(y,g(C))}function v(C){return a=void 0,d&&r?h(C):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function x(){return a===void 0?o:v(eF())}function w(){var C=eF(),S=m(C);if(r=arguments,i=this,l=C,S){if(a===void 0)return p(l);if(f)return clearTimeout(a),a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),o}return w.cancel=b,w.flush=x,w}var $ht=_ht;const Aht=Zh($ht);function Vk(){return Vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vk.apply(this,arguments)}var Tht=[],oY={width:0,height:0,top:0,left:0};function Rht(e){var t=e===void 0?{}:e,n=t.initialSize,r=n===void 0?oY:n,i=t.debounceTime,s=i===void 0?300:i,o=t.ignoreDimensions,a=o===void 0?Tht:o,l=t.enableDebounceLeadingCall,u=l===void 0?!0:l,c=t.resizeObserverPolyfill,f=M.useRef(null),d=M.useRef(0),h=M.useState(Vk({},oY,r)),p=h[0],g=h[1],m=M.useMemo(function(){var y=Array.isArray(a)?a:[a];return Aht(function(v){g(function(b){var x=Object.keys(b),w=x.filter(function(S){return b[S]!==v[S]}),C=w.every(function(S){return y.includes(S)});return C?b:v})},s,{leading:u})},[s,u,a]);return M.useEffect(function(){var y=c||window.ResizeObserver,v=new y(function(b){b.forEach(function(x){var w,C=(w=x==null?void 0:x.contentRect)!=null?w:{},S=C.left,k=C.top,$=C.width,F=C.height;d.current=window.requestAnimationFrame(function(){m({width:$,height:F,top:k,left:S})})})});return f.current&&v.observe(f.current),function(){window.cancelAnimationFrame(d.current),v.disconnect(),m.cancel()}},[m,c]),Vk({parentRef:f,resize:m},p)}function Fht({width:e,height:t,r:n}){return eft({width:e,height:t,r:n}).map(({key:i,cx:s,cy:o,r:a,fill:l})=>T.jsx(XA.circle,{cy:o,fill:l,animate:{cx:s,cy:o,r:a,fill:l},transition:{type:"spring",stiffness:100,damping:20,fill:{duration:.2}}},i))}function rge(e){const{parentRef:t,width:n,height:r}=Rht({debounceTime:50});return T.jsx(Zt,{ref:t,position:"absolute",minH:`${12*2+4*2}px`,...e,children:T.jsx("svg",{width:n,height:r,children:T.jsx(Fht,{width:n,height:r,r:3})})})}const Pht={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class Wk{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||Pht,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,i){return i&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new Wk(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Wk(this.logger,t)}}var ul=new Wk;class aT{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(o=>{let[a,l]=o;for(let u=0;u<l;u++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let u=0;u<l;u++)a.apply(a,[t,...r])})}}const a1=()=>{let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},aY=e=>e==null?"":""+e,Oht=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},Mht=/###/g,lY=e=>e&&e.indexOf("###")>-1?e.replace(Mht,"."):e,uY=e=>!e||typeof e=="string",Fv=(e,t,n)=>{const r=typeof t!="string"?t:t.split(".");let i=0;for(;i<r.length-1;){if(uY(e))return{};const s=lY(r[i]);!e[s]&&n&&(e[s]=new n),Object.prototype.hasOwnProperty.call(e,s)?e=e[s]:e={},++i}return uY(e)?{}:{obj:e,k:lY(r[i])}},cY=(e,t,n)=>{const{obj:r,k:i}=Fv(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let s=t[t.length-1],o=t.slice(0,t.length-1),a=Fv(e,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=Fv(e,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},Dht=(e,t,n,r)=>{const{obj:i,k:s}=Fv(e,t,Object);i[s]=i[s]||[],i[s].push(n)},Hk=(e,t)=>{const{obj:n,k:r}=Fv(e,t);if(n)return n[r]},Nht=(e,t,n)=>{const r=Hk(e,n);return r!==void 0?r:Hk(t,n)},ige=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof t[r]=="string"||t[r]instanceof String?n&&(e[r]=t[r]):ige(e[r],t[r],n):e[r]=t[r]);return e},rg=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Iht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Lht=e=>typeof e=="string"?e.replace(/[&<>"'\/]/g,t=>Iht[t]):e;class zht{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const jht=[" ",",","?","!",";"],Bht=new zht(20),Uht=(e,t,n)=>{t=t||"",n=n||"";const r=jht.filter(o=>t.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=Bht.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(e);if(!s){const o=e.indexOf(n);o>0&&!i.test(e.substring(0,o))&&(s=!0)}return s},SM=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=o}return i},qk=e=>e&&e.indexOf("_")>0?e.replace("_","-"):e;class fY extends aT{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],r&&(Array.isArray(r)?a.push(...r):typeof r=="string"&&s?a.push(...r.split(s)):a.push(r)));const l=Hk(this.data,a);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||typeof r!="string"?l:SM(this.data&&this.data[t]&&this.data[t][n],r,s)}addResource(t,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[t,n];r&&(a=a.concat(o?r.split(o):r)),t.indexOf(".")>-1&&(a=t.split("."),i=n,n=a[1]),this.addNamespaces(n),cY(this.data,a,i),s.silent||this.emit("added",t,n,r,i)}addResources(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(typeof r[s]=="string"||Array.isArray(r[s]))&&this.addResource(t,n,s,r[s],{silent:!0});i.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=Hk(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?ige(l,r,s):l={...l,...r},cY(this.data,a,l),o.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var sge={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(s=>{this.processors[s]&&(t=this.processors[s].process(t,n,r,i))}),t}};const dY={};class Gk extends aT{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Oht(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ul.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const r=this.resolve(t,n);return r&&r.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&t.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Uht(t,r,i);if(o&&!a){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:s};const u=t.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),t=u.join(i)}return typeof s=="string"&&(s=[s]),{key:t,namespaces:s}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(t[t.length-1],n),l=a[a.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const x=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${x}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${x}${o}`}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const f=this.resolve(t,n);let d=f&&f.res;const h=f&&f.usedKey||o,p=f&&f.exactUsedKey||o,g=Object.prototype.toString.apply(d),m=["[object Number]","[object Function]","[object RegExp]"],y=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject;if(v&&d&&(typeof d!="string"&&typeof d!="boolean"&&typeof d!="number")&&m.indexOf(g)<0&&!(typeof y=="string"&&Array.isArray(d))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const x=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(f.res=x,f.usedParams=this.getUsedParamsDetails(n),f):x}if(s){const x=Array.isArray(d),w=x?[]:{},C=x?p:h;for(const S in d)if(Object.prototype.hasOwnProperty.call(d,S)){const k=`${C}${s}${S}`;w[S]=this.translate(k,{...n,joinArrays:!1,ns:a}),w[S]===k&&(w[S]=d[S])}d=w}}else if(v&&typeof y=="string"&&Array.isArray(d))d=d.join(y),d&&(d=this.extendTranslation(d,t,n,r));else{let x=!1,w=!1;const C=n.count!==void 0&&typeof n.count!="string",S=Gk.hasDefaultValue(n),k=C?this.pluralResolver.getSuffix(u,n.count,n):"",$=n.ordinal&&C?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",F=C&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),O=F&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${k}`]||n[`defaultValue${$}`]||n.defaultValue;!this.isValidLookup(d)&&S&&(x=!0,d=O),this.isValidLookup(d)||(w=!0,d=o);const D=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&w?void 0:d,N=S&&O!==d&&this.options.updateMissing;if(w||x||N){if(this.logger.log(N?"updateKey":"missingKey",u,l,o,N?O:d),s){const z=this.resolve(o,{...n,keySeparator:!1});z&&z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let A=[];const P=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&P&&P[0])for(let z=0;z<P.length;z++)A.push(P[z]);else this.options.saveMissingTo==="all"?A=this.languageUtils.toResolveHierarchy(n.lng||this.language):A.push(n.lng||this.language);const j=(z,U,X)=>{const K=S&&X!==d?X:D;this.options.missingKeyHandler?this.options.missingKeyHandler(z,l,U,K,N,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(z,l,U,K,N,n),this.emit("missingKey",z,l,U,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?A.forEach(z=>{const U=this.pluralResolver.getSuffixes(z,n);F&&n[`defaultValue${this.options.pluralSeparator}zero`]&&U.indexOf(`${this.options.pluralSeparator}zero`)<0&&U.push(`${this.options.pluralSeparator}zero`),U.forEach(X=>{j([z],o+X,n[`defaultValue${X}`]||O)})}):j(A,o,O))}d=this.extendTranslation(d,t,n,f,r),w&&d===o&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${o}`),(w||x)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,x?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(f.res=d,f.usedParams=this.getUsedParamsDetails(n),f):d}extendTranslation(t,n,r,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=typeof t=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const d=t.match(this.interpolator.nestingRegexp);c=d&&d.length}let f=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),t=this.interpolator.interpolate(t,f,r.lng||this.language||i.usedLng,r),u){const d=t.match(this.interpolator.nestingRegexp),h=d&&d.length;c<h&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];return s&&s[0]===h[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${n[0]}`),null):o.translate(...h,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=typeof a=="string"?[a]:a;return t!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(t=sge.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,s,o,a;return typeof t=="string"&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;i=c;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const d=n.count!==void 0&&typeof n.count!="string",h=d&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),p=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",g=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(m=>{this.isValidLookup(r)||(a=m,!dY[`${g[0]}-${m}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(dY[`${g[0]}-${m}`]=!0,this.logger.warn(`key "${i}" for languages "${g.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(y=>{if(this.isValidLookup(r))return;o=y;const v=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(v,c,y,m,n);else{let x;d&&(x=this.pluralResolver.getSuffix(y,n.count,n));const w=`${this.options.pluralSeparator}zero`,C=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(v.push(c+x),n.ordinal&&x.indexOf(C)===0&&v.push(c+x.replace(C,this.options.pluralSeparator)),h&&v.push(c+w)),p){const S=`${c}${this.options.contextSeparator}${n.context}`;v.push(S),d&&(v.push(S+x),n.ordinal&&x.indexOf(C)===0&&v.push(S+x.replace(C,this.options.pluralSeparator)),h&&v.push(S+w))}}let b;for(;b=v.pop();)this.isValidLookup(r)||(s=b,r=this.getResource(y,m,b,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,r,i):this.resourceStore.getResource(t,n,r,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&typeof t.replace!="string";let i=r?t.replace:t;if(r&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}const tF=e=>e.charAt(0).toUpperCase()+e.slice(1);class hY{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ul.create("languageUtils")}getScriptPartFromCode(t){if(t=qk(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=qk(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=t.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=tF(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=tF(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=tF(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):typeof t=="string"&&s(this.formatLanguageCode(t)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let Vht=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Wht={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const Hht=["v1","v2","v3"],qht=["v4"],pY={zero:0,one:1,two:2,few:3,many:4,other:5},Ght=()=>{const e={};return Vht.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:Wht[t.fc]}})}),e};class Xht{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=ul.create("pluralResolver"),(!this.options.compatibilityJSON||qht.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Ght(),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const r=qk(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];const o=new Intl.PluralRules(r,{type:i});return this.pluralRulesCache[s]=o,o}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(i=>`${n}${i}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,s)=>pY[i]-pY[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(t,i,n)):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){const r=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let i=t.numbers[r];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Hht.includes(this.options.compatibilityJSON)}}const gY=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Nht(e,t,n);return!s&&i&&typeof n=="string"&&(s=SM(e,n,r),s===void 0&&(s=SM(t,n,r))),s},nF=e=>e.replace(/\$/g,"$$$$");class Yht{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ul.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:f,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:y,alwaysFormat:v}=t.interpolation;this.escape=n!==void 0?n:Lht,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?rg(s):o||"{{",this.suffix=a?rg(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?rg(d):h||rg("$t("),this.nestingSuffix=p?rg(p):g||rg(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=y||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,i){let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=h=>{if(h.indexOf(this.formatSeparator)<0){const y=gY(n,l,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...i,...n,interpolationkey:h}):y}const p=h.split(this.formatSeparator),g=p.shift().trim(),m=p.join(this.formatSeparator).trim();return this.format(gY(n,l,g,this.options.keySeparator,this.options.ignoreJSONStructure),m,r,{...i,...n,interpolationkey:g})};this.resetRegExp();const c=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>nF(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?nF(this.escape(h)):nF(h)}].forEach(h=>{for(a=0;s=h.regex.exec(t);){const p=s[1].trim();if(o=u(p),o===void 0)if(typeof c=="function"){const m=c(t,s,i);o=typeof m=="string"?m:""}else if(i&&Object.prototype.hasOwnProperty.call(i,p))o="";else if(f){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${t}`),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=aY(o));const g=h.safeValue(o);if(t=t.replace(s[0],g),f?(h.regex.lastIndex+=o.length,h.regex.lastIndex-=s[0].length):h.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;const a=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const f=l.split(new RegExp(`${c}[ ]*{`));let d=`{${f[1]}`;l=f[0],d=this.interpolate(d,o);const h=d.match(/'/g),p=d.match(/"/g);(h&&h.length%2===0&&!p||p.length%2!==0)&&(d=d.replace(/'/g,'"'));try{o=JSON.parse(d),u&&(o={...u,...o})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${c}${d}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;i=this.nestingRegexp.exec(t);){let l=[];o={...r},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const c=i[1].split(this.formatSeparator).map(f=>f.trim());i[1]=c.shift(),l=c,u=!0}if(s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===t&&typeof s!="string")return s;typeof s!="string"&&(s=aY(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),s=""),u&&(s=l.reduce((c,f)=>this.format(c,f,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),t=t.replace(i[0],s),this.regexp.lastIndex=0}return t}}const Kht=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=a.trim();n[c]||(n[c]=u),u==="false"&&(n[c]=!1),u==="true"&&(n[c]=!0),isNaN(u)||(n[c]=parseInt(u,10))}})}return{formatName:t,formatOptions:n}},ig=e=>{const t={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=t[o];return a||(a=e(qk(r),i),t[o]=a),a(n)}};class Qht{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ul.create("formatter"),this.options=t,this.formats={number:ig((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return s=>i.format(s)}),currency:ig((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>i.format(s)}),datetime:ig((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return s=>i.format(s)}),relativetime:ig((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return s=>i.format(s,r.range||"day")}),list:ig((n,r)=>{const i=new Intl.ListFormat(n,{...r});return s=>i.format(s)})},this.init(t)}init(t){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=ig(n)}format(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{const{formatName:u,formatOptions:c}=Kht(l);if(this.formats[u]){let f=a;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},h=d.locale||d.lng||i.locale||i.lng||r;f=this.formats[u](a,h,{...c,...i,...d})}catch(d){this.logger.warn(d)}return f}else this.logger.warn(`there was no format function for ${u}`);return a},t)}}const Jht=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class Zht extends aT{constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ul.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(t,n,r,i){const s={},o={},a={},l={};return t.forEach(u=>{let c=!0;n.forEach(f=>{const d=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?o[d]===void 0&&(o[d]=!0):(this.state[d]=1,c=!1,o[d]===void 0&&(o[d]=!0),s[d]===void 0&&(s[d]=!0),l[f]===void 0&&(l[f]=!0)))}),c||(a[u]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const i=t.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const a={};this.queue.forEach(l=>{Dht(l.loaded,[s],o),Jht(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});const c=l.loaded[u];c.length&&c.forEach(f=>{a[u][f]===void 0&&(a[u][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&c&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,i+1,s*2,o)},s);return}o(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(t,n);u&&typeof u.then=="function"?u.then(c=>a(null,c)).catch(a):a(null,u)}catch(u){a(u)}return}return l(t,n,a)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof n=="string"&&(n=[n]);const s=this.queueLoad(t,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(t,o,a)})}saveMissing(t,n,r,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:s},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(t,n,r,i,l):c=u(t,n,r,i),c&&typeof c.then=="function"?c.then(f=>a(null,f)).catch(a):a(null,c)}catch(c){a(c)}else u(t,n,r,i,a,l)}!t||!t[0]||this.store.addResource(t[0],n,r,i)}}}const mY=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),yY=e=>(typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),sS=()=>{},ept=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class Wb extends aT{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=yY(t),this.services={},this.logger=ul,this.modules={external:[]},ept(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=mY();this.options={...i,...this.options,...yY(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?ul.init(s(this.modules.logger),this.options):ul.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=Qht);const f=new hY(this.options);this.store=new fY(this.options.resources,this.options);const d=this.services;d.logger=ul,d.resourceStore=this.store,d.languageUtils=f,d.pluralResolver=new Xht(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=s(c),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new Yht(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new Zht(s(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(h){for(var p=arguments.length,g=new Array(p>1?p-1:0),m=1;m<p;m++)g[m-1]=arguments[m];t.emit(h,...g)}),this.modules.languageDetector&&(d.languageDetector=s(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=s(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Gk(this.services,this.options),this.translator.on("*",function(h){for(var p=arguments.length,g=new Array(p>1?p-1:0),m=1;m<p;m++)g[m-1]=arguments[m];t.emit(h,...g)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,r||(r=sS),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return t.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return t.store[c](...arguments),t}});const l=a1(),u=()=>{const c=(f,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),r(f,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sS;const i=typeof t=="string"?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(u=>{u!=="cimode"&&s.indexOf(u)<0&&s.push(u)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(t,n,r){const i=a1();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=sS),this.services.backendConnector.reload(t,n,s=>{i.resolve(),r(s)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&sge.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const i=a1();this.emit("languageChanging",t);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(s(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{o(c,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),i}getFixedT(t,n,r){var i=this;const s=function(o,a){let l;if(typeof a!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),f=2;f<u;f++)c[f-2]=arguments[f];l=i.options.overloadTranslationOptionHandler([o,a].concat(c))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||s.keyPrefix);const d=i.options.keySeparator||".";let h;return l.keyPrefix&&Array.isArray(o)?h=o.map(p=>`${l.keyPrefix}${d}${p}`):h=l.keyPrefix?`${l.keyPrefix}${d}${o}`:o,i.t(h,l)};return typeof t=="string"?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,t)&&(!i||o(s,t)))}loadNamespaces(t,n){const r=a1();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=a1();typeof t=="string"&&(t=[t]);const i=this.options.preload||[],s=t.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new hY(mY());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Wb(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sS;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},s=new Wb(i);return(t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r&&(s.store=new fY(this.store.data,i),s.services.resourceStore=s.store),s.translator=new Gk(s.services,i),s.translator.on("*",function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];s.emit(a,...u)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const pi=Wb.createInstance();pi.createInstance=Wb.createInstance;pi.createInstance;pi.dir;pi.init;pi.loadResources;pi.reloadResources;pi.use;pi.changeLanguage;pi.getFixedT;const yc=pi.t;pi.exists;pi.setDefaultNamespace;pi.hasLoadedNamespace;pi.loadNamespaces;pi.loadLanguages;function sg({label:e,children:t,...n}){return T.jsxs(Zt,{w:"full",flexDir:"row",justify:"space-between",alignItems:"center",...n,children:[T.jsx(un,{minW:"130px",children:e}),t]})}function tpt(){const{handleSubmit:e,loading:t,selectedDemo:n,handleDemoSelect:r}=Lut(),{loading:i}=Mpe(),{t:s}=ec();return T.jsxs(T.Fragment,{children:[T.jsx(i7,{size:"sm",onChange:o=>r(tH.find(a=>a.name===o.target.value)??null),"data-log-change":"select-demo",placeholder:s("settings.select_demo"),variant:"outline",colorScheme:cr,icon:T.jsx(wt,{as:zpe}),borderRightRadius:0,children:tH.map(o=>T.jsx("option",{value:o.name,children:o.name},o.name))}),T.jsx(Qh,{borderLeftRadius:0,colorScheme:cr,type:"submit",isLoading:t||i,isDisabled:!n||i,icon:T.jsx(wt,{as:Vpe}),"aria-label":s("settings.load_data"),onClick:e,"data-log-click":"load-demo"})]})}function oge(e){const{python:t,handleServerButtonClick:n,handleDownloadLogs:r,colorMode:i,toggleColorMode:s,locale:o,setLocale:a}=vft();return T.jsxs(Au,{...e,children:[T.jsx(sg,{label:yc("settings.load_data"),children:T.jsx($dt,{w:"full"})}),T.jsx(sg,{label:yc("settings.load_demo"),children:T.jsx(tpt,{})}),T.jsx(r7,{my:4}),T.jsx(sg,{label:yc("settings.set_locale"),children:T.jsxs(i7,{size:"sm",variant:"outline",value:o,"data-log-change":"select-locale",onChange:l=>{a(l.target.value)},children:[T.jsx("option",{value:"en",children:"English"}),T.jsx("option",{value:"ko",children:"한국어"})]})}),T.jsx(sg,{label:yc("settings.set_color"),children:T.jsx(aa,{leftIcon:T.jsx(wt,{as:i==="light"?Dft:Pft}),onClick:s,"data-log-click":"toggle-color-mode",size:"sm",w:"full",children:i==="light"?"Light":"Dark"})}),T.jsx(sg,{label:yc("settings.set_backend"),children:T.jsx(aa,{leftIcon:T.jsx(wt,{as:t==="server"?_ft:Mft}),onClick:()=>{n()},"data-log-click":"toggle-server",size:"sm",w:"full",children:t&&t[0].toUpperCase()+(t==null?void 0:t.slice(1))})}),T.jsx(sg,{label:yc("settings.monitor_logs"),children:T.jsxs(Zt,{gap:2,w:"full",children:[T.jsx(aa,{w:"full",children:yc("settings.load_latest_logs")}),T.jsx(aa,{w:"full",onClick:r,"data-log-click":"download-logs",children:yc("settings.download_logs")})]})})]})}function npt({tabs:e,...t}){const{tabIconSize:n,tabPanelHeight:r,scrollbarStyle:i}=Hs(),o=st(f=>f.fields).length>0,a=ci(f=>f.tabIndex),l=ci(f=>f.setTabByIndex),{mobile:u}=Hs(),c=e.filter(f=>!(!u&&f.name==="charts"));return T.jsxs(s7,{display:"flex",w:"full",defaultIndex:c.length-1,index:a>=0?a:c.length+a,onChange:l,isFitted:!0,colorScheme:cr,...t,children:[T.jsx(o7,{my:2,children:c.map(f=>T.jsxs(l7,{gap:1,as:Sa,flexDir:"column",isDisabled:!o&&!f.displayingBeforeInit,"data-log-click":`tab-${f.name}`,children:[T.jsx(wt,{boxSize:n,as:f.icon}),T.jsx(un,{fontSize:"xs",children:f.displayName})]},`tab-${f.name}`))}),T.jsx(a7,{flex:1,overflow:"auto",maxH:r,sx:i,children:c.map(f=>T.jsx(eT,{children:f.Panel},`tabpanel-${f.name}`))})]})}function rpt({tabs:e,...t}){const{tabIconSize:n,cardWidth:r,cardHeight:i,cardColor:s,scrollbarStyle:o}=Hs(),l=st(d=>d.fields).length>0,u=ci(d=>d.tabIndex),c=ci(d=>d.setTabByIndex),f=e.filter(d=>d.name!=="settings");return T.jsxs(T.Fragment,{children:[T.jsxs(s7,{display:"flex",w:"full",index:u,onChange:c,isFitted:!0,isLazy:!0,colorScheme:cr,...t,children:[T.jsx(a7,{overflow:"hidden",children:e.map(d=>T.jsx(eT,{children:T.jsx(Z9,{in:d.name!=="charts",children:T.jsx(Zt,{maxW:r,bg:s,borderRadius:"md",flexDir:"column",h:i,sx:o,p:4,children:d.Panel})})},`tabpanel-${d.name}`))}),T.jsx(o7,{my:2,children:f.map(d=>T.jsxs(l7,{gap:1,as:Sa,flexDir:"column",isDisabled:!l&&!d.displayingBeforeInit,"data-log-click":`tab-${d.name}`,children:[T.jsx(wt,{boxSize:n,as:d.icon}),T.jsx(un,{fontSize:"xs",children:d.displayName})]},`tab-${d.name}`))})]}),T.jsx(rge,{left:2,w:8,h:i,visibility:u===1?"visible":"hidden"})]})}function ipt(){const e=st(g=>g.appendChart),t=st(g=>g.setCurrentChartIndex),n=st(g=>g.charts),r=Al(g=>g.data),i=Al(g=>g.filename),s=st(g=>g.fields),o=ci(g=>g.searchTargetFieldNames),a=ci(g=>g.setSearchTargetFieldNames),l=ci(g=>g.setTabByName),{data:u=[],isLoading:c}=due({queryKey:["getCharts",i,...o.sort()],queryFn:async()=>o.length===0||!r?[]:await Ki.call("getCharts",{fieldNames:o})??[]}),f=g=>{o.includes(g.name)?a(m=>m.filter(y=>y!==g.name)):o.length<3&&a(m=>[...m,g.name])},d=M.useMemo(()=>Array.from(s).filter(g=>g.type!=="name").sort(VK),[s]),h=M.useCallback(g=>o.includes(g.name)?"subtle":"outline",[o]),p=M.useCallback(async g=>{await e(g),t(n.length-1),l("charts"),a([])},[e,n.length,t,a,l]);return{loading:c,queriedCharts:u,handleFieldClick:f,handleChartClick:p,fields:d,getTagVariant:h}}function spt(){const{accentColor:e,scrollbarStyle:t}=Hs(),{getTagVariant:n,loading:r,queriedCharts:i,handleFieldClick:s,handleChartClick:o,fields:a}=ipt();return T.jsxs(Zt,{flexDir:"column",w:"full",h:"full",justify:"space-between",children:[T.jsx(Sa,{w:"full",children:r?T.jsx(aw,{size:"md",my:8,color:e}):T.jsx(lw,{m:0,p:0,width:"full",overflowY:"scroll",sx:t,flex:1,children:i.map(l=>T.jsx(Z9,{in:!0,children:T.jsx(nT,{thumbnailSize:130,chart:l,handleClick:()=>{o(l)}})},`discovered-chart-${l.key}-${l.timestamp}`))})}),T.jsx(Sa,{flexWrap:"wrap",gap:3,h:"fit-content",children:a.map(l=>T.jsx(_dt,{field:l,size:"lg",variant:n(l),onClick:()=>s(l)},`discover-badge-${l.name}`))})]})}function opt(){const e=st(o=>o.charts),{mobile:t}=Hs(),n=ci(o=>o.setTabByName),r=e.filter(o=>o.preferred),i=st(o=>o.setCurrentChartIndex);return{preferredCharts:r,handleClickChart:o=>{const a=e.findIndex(l=>l===o);i(a),t&&n("charts")}}}function apt({thumbnailSize:e,...t}){const{preferredCharts:n,handleClickChart:r}=opt(),{t:i}=ec();return T.jsx(Zt,{w:"full",h:"full",...t,children:n.length?T.jsx(lw,{m:0,p:0,width:"full",overflowY:"auto",children:n.map(s=>T.jsx(nT,{thumbnailSize:e,chart:s,"data-log-click":`preferred-chart-${s.key}`,handleClick:r},`bookmark-${s.key}`))}):T.jsxs(Sa,{w:"full",flexDir:"column",gap:8,children:[T.jsx(wt,{boxSize:16,as:Bpe}),T.jsx(kp,{fontWeight:600,children:i("bookmarks.empty")})]})})}function lpt({cardWidth:e,cardHeight:t,orientation:n="vertical"}){const r=st(h=>h.charts),i=st(h=>h.currentChartIndex),s=st(h=>h.appendNextChart),o=st(h=>h.setCurrentChartIndex),a=st(h=>h.setCurrentChartPreferred),l=n==="horizontal"?e:t,u=M.useRef(null),c=M.useRef(!0),f=d7(),d=bft(h=>{if(!h)return;const p=n==="horizontal"?h.scrollLeft:h.scrollTop,g=Math.round(p/l)-1;o(g),g===r.length-1&&s()},UWe);return M.useEffect(()=>{const h=u.current;if(!h)return;const p={[n==="horizontal"?"left":"top"]:(i+1)*l,behavior:c.current?"instant":"smooth"};h.scrollTo(p),c.current=!1},[i,l,n]),M.useEffect(()=>{const h={ArrowUp:()=>o(i-1),ArrowDown:()=>o(i+1),Enter:()=>a(!r[i].preferred)},p=g=>{const m=h[g.key];m&&(g.preventDefault(),f.log("chart-container","keydown",{key:g.key.toLowerCase().replace("arrow","")}),m())};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[i,r,o,a,f]),{charts:r,currentChartIndex:i,ref:u,scrollContainerCallback:d}}function age({orientation:e="vertical",...t}){const{cardHeight:n,cardColor:r,cardWidth:i}=Hs(),{charts:s,ref:o,scrollContainerCallback:a}=lpt({cardHeight:n,cardWidth:i,orientation:e});return T.jsxs(Zt,{ref:o,onScroll:l=>a(l.currentTarget),"data-log-scroll":"chart-container",scrollSnapType:`${e==="horizontal"?"x":"y"} mandatory`,flexDir:e==="horizontal"?"row":"column",gap:2,overflowX:"hidden",style:{WebkitOverflowScrolling:"touch"},sx:{"&::-webkit-scrollbar":{display:"none"}},...t,children:[T.jsx(Jpe,{flexDir:"column",minW:"full",w:i-8,maxW:i,h:n,minH:n,bgColor:r,borderRadius:"lg",scrollSnapAlign:"center"}),s.map(l=>T.jsx(wdt,{minH:n,maxH:n,minW:i-8,maxW:i-8,chart:l,bgColor:r,flexDirection:"column",borderRadius:"lg"},l.key))]})}const upt=M.memo(cpt);function cpt(){const{accentColor:e}=Hs(),t=ci(s=>s.tabIndex),n=ci(s=>s.setTabByName),{t:r}=ec(),i=st(s=>s.fields);return T.jsxs(Zt,{w:"full",justifyContent:"space-between",alignItems:"center",px:2,py:1,children:[t!==3?T.jsxs(Zt,{alignItems:"center",h:"full",gap:1,children:[T.jsx(wt,{as:Wpe,boxSize:6}),T.jsx(kp,{size:"xs",children:"Swipytics"})]}):T.jsx(Zt,{}),T.jsx(Qh,{variant:"ghost",padding:0,isDisabled:i.length===0,color:t===3?e:void 0,icon:T.jsx(wt,{as:h7,boxSize:4}),"aria-label":r("settings"),onClick:()=>{n(t===3?"fields":"settings")}})]})}function fpt(){const{t:e}=ec();return T.jsxs(Zt,{p:2,w:"100dvw",h:"100dvh",gap:2,flexDir:"column",children:[T.jsx(upt,{}),T.jsx(rpt,{flexDir:"column",variant:"soft-rounded",tabs:[{name:"likes",displayName:e("bookmarks.title"),icon:tT,Panel:T.jsx(apt,{thumbnailSize:120}),displayingBeforeInit:!1},{name:"fields",displayName:e("charts.title"),icon:kft,Panel:T.jsx(age,{orientation:"vertical"}),displayingBeforeInit:!1},{name:"search",displayName:e("search.title"),icon:$ft,Panel:T.jsx(spt,{}),displayingBeforeInit:!1},{name:"settings",displayName:e("settings.title"),icon:h7,Panel:T.jsxs(Zt,{flexDir:"column",justify:"space-between",p:4,h:"full",children:[T.jsx(Jpe,{h:"full"}),T.jsx(uw,{}),T.jsx(oge,{align:"start"})]}),displayingBeforeInit:!0}]})]})}function dpt(){const{cardHeight:e,cardColor:t,cardWidth:n,borderColor:r,tabPanelHeight:i}=Hs(),{t:s}=ec();return T.jsxs(Zt,{minW:"container.xl",maxH:e,gap:4,flexDir:"row",children:[T.jsxs(Zt,{position:"relative",w:n,h:e,children:[T.jsx(rge,{left:0,top:12,w:8,h:e}),T.jsx(age,{w:"full",gap:4,orientation:"vertical"})]}),T.jsxs(Zt,{position:"relative",borderTop:"none",borderColor:r,px:4,pb:2,flexDir:"column",bgColor:t,borderRadius:"lg",w:"sm",minW:"sm",children:[T.jsx(npt,{flexDir:"column",variant:"line",tabs:[{name:"likes",displayName:s("bookmarks.title"),icon:tT,Panel:T.jsx(Lft,{h:i,pt:4,m:0,gap:2,w:"full"}),displayingBeforeInit:!1},{name:"search",displayName:s("search.title"),icon:Upe,Panel:T.jsx(zft,{h:i,pt:4}),displayingBeforeInit:!1},{name:"fields",displayName:s("fields.title"),icon:Oft,Panel:T.jsx(kdt,{h:i,pt:4}),displayingBeforeInit:!1},{name:"settings",displayName:s("settings.title"),icon:h7,Panel:T.jsx(oge,{h:i,align:"start",py:4}),displayingBeforeInit:!0}]}),T.jsx(uw,{}),T.jsx(Sdt,{spacing:2,w:"full"})]})]})}function hpt(){const{mobile:e}=Hs();return xft(),e?T.jsx(fpt,{}):T.jsx(dpt,{})}const ppt=Wnt({initialColorMode:"dark",useSystemColorMode:!0,components:{Button:{defaultProps:{size:"sm"}},Input:{defaultProps:{size:"sm",focusBorderColor:Qc[200]},baseStyle:{field:{_focusVisible:{borderColor:Qc[200]}}}},Select:{defaultProps:{size:"sm",focusBorderColor:Qc[200]}},Tabs:{parts:["tabpanel"],baseStyle:{tabpanel:{p:0}}},Card:{baseStyle:e=>({container:{bg:e.colorMode==="light"?"white":"gray.900"}})}},styles:{global:e=>({body:{height:"100dvh",overflow:"smooth",overscrollBehavior:"none",bg:e.colorMode==="light"?"gray.100":"gray.800"},html:{height:"100dvh",overflow:"smooth",overscrollBehavior:"none",overflowY:"overlay",focusBorderColor:Qc[200]}})}});var lge,vY=p9;lge=vY.createRoot,vY.hydrateRoot;const EM=(e,t)=>t.some(n=>e instanceof n);let bY,xY;function gpt(){return bY||(bY=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mpt(){return xY||(xY=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CM=new WeakMap,rF=new WeakMap,lT=new WeakMap;function ypt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(wh(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return lT.set(t,e),t}function vpt(e){if(CM.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});CM.set(e,t)}let kM={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return CM.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wh(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function uge(e){kM=e(kM)}function bpt(e){return mpt().includes(e)?function(...t){return e.apply(_M(this),t),wh(this.request)}:function(...t){return wh(e.apply(_M(this),t))}}function xpt(e){return typeof e=="function"?bpt(e):(e instanceof IDBTransaction&&vpt(e),EM(e,gpt())?new Proxy(e,kM):e)}function wh(e){if(e instanceof IDBRequest)return ypt(e);if(rF.has(e))return rF.get(e);const t=xpt(e);return t!==e&&(rF.set(e,t),lT.set(t,e)),t}const _M=e=>lT.get(e);function wpt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=wh(o);return r&&o.addEventListener("upgradeneeded",l=>{r(wh(o.result),l.oldVersion,l.newVersion,wh(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Spt=["get","getKey","getAll","getAllKeys","count"],Ept=["put","add","delete","clear"],iF=new Map;function wY(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(iF.get(t))return iF.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ept.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Spt.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return iF.set(t,s),s}uge(e=>({...e,get:(t,n,r)=>wY(t,n)||e.get(t,n,r),has:(t,n)=>!!wY(t,n)||e.has(t,n)}));const Cpt=["continue","continuePrimaryKey","advance"],SY={},$M=new WeakMap,cge=new WeakMap,kpt={get(e,t){if(!Cpt.includes(t))return e[t];let n=SY[t];return n||(n=SY[t]=function(...r){$M.set(this,cge.get(this)[t](...r))}),n}};async function*_pt(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,kpt);for(cge.set(n,t),lT.set(n,_M(t));t;)yield n,t=await($M.get(n)||t.continue()),$M.delete(n)}function EY(e,t){return t===Symbol.asyncIterator&&EM(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&EM(e,[IDBIndex,IDBObjectStore])}uge(e=>({...e,get(t,n,r){return EY(t,n)?_pt:e.get(t,n,r)},has(t,n){return EY(t,n)||e.has(t,n)}}));const $pt=e=>wpt(e,1,{upgrade:t=>{t.objectStoreNames.contains(e)||t.createObjectStore(e,{keyPath:"timestamp"})}}),Xk=()=>new Map,fge=e=>{const t=localStorage.getItem(e)??"[]";try{const n=JSON.parse(t);return new Map(n)}catch(n){return console.error("Failed to parse existing logs:",n),localStorage.removeItem(e),Xk()}},CY=(e,t,n,r)=>{const i=fge(e);i.set(t,{...n,timestamp:t,version:r}),localStorage.setItem(e,JSON.stringify(Array.from(i.entries())))},Apt=async(e,t)=>{try{const n=e.transaction(t,"readonly"),r=n.objectStore(t),i=Xk(),s=await r.getAll();return await n.done,s.forEach(o=>{o.timestamp!==void 0&&i.set(o.timestamp,o)}),i}catch(n){return console.error("IndexedDB read error:",n),Xk()}},Tpt=(e,t,n,r,i)=>{e.transaction(t,"readwrite").objectStore(t).add({timestamp:n,...r,version:i})},Rpt=async(e,t)=>{const n=e?await Apt(e,t):Xk(),r=fge(t),i=new Map([...n,...r]);return Array.from(i.entries()).map(([s,o])=>({...o,timestamp:s})).sort((s,o)=>s.timestamp-o.timestamp)};class Fpt{constructor(t="logs",n="json",r=1,i="logger"){me(this,"indexedDB",null);me(this,"eventListeners",{});me(this,"scrollLogged",!1);me(this,"logFileName");me(this,"logFileFormat");me(this,"logVersion");me(this,"storageKey");me(this,"saveLog",(t,n)=>{if(!this.indexedDB){console.warn("IndexedDB is not initialized."),CY(this.storageKey,t,n,this.logVersion);return}try{Tpt(this.indexedDB,this.storageKey,t,n,this.logVersion)}catch(r){console.error("Failed to save log to IndexedDB:",r),CY(this.storageKey,t,n,this.logVersion)}});me(this,"createEventListener",(t,n)=>r=>{if(r.type!==t)return;const s=r.target.closest(`[data-log-${t}]`);if(!s)return;const o=s.getAttribute(`data-log-${t}`);if(typeof o=="string"){if(t==="scroll"){if(this.scrollLogged)return;this.scrollLogged=!0}else this.scrollLogged=!1;if(n){this.saveLog(Date.now(),{key:o,event:t,data:n()});return}else this.saveLog(Date.now(),{key:o,event:t})}});me(this,"registerEvent",(t,n,r)=>(n.forEach(i=>{this.eventListeners[i]||(this.eventListeners[i]=this.createEventListener(i,r)),i==="scroll"?t.addEventListener(i,this.eventListeners[i],{capture:!0}):t.addEventListener(i,this.eventListeners[i])}),()=>{this.detachEvent(t,n)}));me(this,"detachEvent",(t,n)=>{n.forEach(r=>{this.eventListeners[r]&&(r==="scroll"?t.removeEventListener(r,this.eventListeners[r],{capture:!0}):t.removeEventListener(r,this.eventListeners[r]))})});me(this,"export",async()=>{this.indexedDB||console.warn("IndexedDB is not initialized.");const t=await Rpt(this.indexedDB,this.storageKey),n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${this.logFileName}.${this.logFileFormat}`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)});me(this,"registerLogger",(t=[],n=window)=>(this.initializeDB().then(()=>{this.registerEvent(n,t)}),()=>{this.detachEvent(n,t)}));this.logFileName=t,this.logFileFormat=n,this.logVersion=r,this.storageKey=i,this.initializeDB()}async initializeDB(){try{this.indexedDB=await $pt(this.storageKey)}catch(t){console.warn("Failed to connect to IndexedDB:",t)}}log(t,n,r){this.saveLog(Date.now(),{key:t,event:n,data:r}),n!=="scroll"&&(this.scrollLogged=!1)}}const{slice:Ppt,forEach:Opt}=[];function Mpt(e){return Opt.call(Ppt.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}const kY=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Dpt=(e,t,n)=>{const r=n||{};r.path=r.path||"/";const i=encodeURIComponent(t);let s=`${e}=${i}`;if(r.maxAge>0){const o=r.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(o)}`}if(r.domain){if(!kY.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!kY.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},_Y={create(e,t,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=Dpt(e,encodeURIComponent(t),i)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove(e){this.create(e,"",-1)}};var Npt={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return _Y.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=t;n&&typeof document<"u"&&_Y.create(n,e,r,i,s)}},Ipt={name:"querystring",lookup(e){var r;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let a=0;a<o.length;a++){const l=o[a].indexOf("=");l>0&&o[a].substring(0,l)===t&&(n=o[a].substring(l+1))}}return n}};let l1=null;const $Y=()=>{if(l1!==null)return l1;try{l1=window!=="undefined"&&window.localStorage!==null;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{l1=!1}return l1};var Lpt={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&$Y())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&$Y()&&window.localStorage.setItem(n,e)}};let u1=null;const AY=()=>{if(u1!==null)return u1;try{u1=window!=="undefined"&&window.sessionStorage!==null;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{u1=!1}return u1};var zpt={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&AY())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&AY()&&window.sessionStorage.setItem(n,e)}},jpt={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let s=0;s<n.length;s++)t.push(n[s]);r&&t.push(r),i&&t.push(i)}return t.length>0?t:void 0}},Bpt={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const r=t||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Upt={name:"path",lookup(e){var i;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof t=="number"?t:0])==null?void 0:i.replace("/",""):void 0}},Vpt={name:"subdomain",lookup(e){var i,s;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};function Wpt(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}}class dge{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=Mpt(n,this.options||{},Wpt()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Npt),this.addDetector(Ipt),this.addDetector(Lpt),this.addDetector(zpt),this.addDetector(jpt),this.addDetector(Bpt),this.addDetector(Upt),this.addDetector(Vpt)}addDetector(t){return this.detectors[t.name]=t,this}detect(t){t||(t=this.options.order);let n=[];return t.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(t,this.options)}))}}dge.type="languageDetector";function AM(e){"@babel/helpers - typeof";return AM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AM(e)}function hge(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":AM(XMLHttpRequest))==="object"}function Hpt(e){return!!e&&typeof e.then=="function"}function qpt(e){return Hpt(e)?e:Promise.resolve(e)}function Gpt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var TM={exports:{}},oS={exports:{}},TY;function Xpt(){return TY||(TY=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Zi<"u"&&Zi,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof a<"u"&&a,l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(A){return A&&DataView.prototype.isPrototypeOf(A)}if(l.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(A){return A&&c.indexOf(Object.prototype.toString.call(A))>-1};function d(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(A)||A==="")throw new TypeError('Invalid character in header field name: "'+A+'"');return A.toLowerCase()}function h(A){return typeof A!="string"&&(A=String(A)),A}function p(A){var P={next:function(){var j=A.shift();return{done:j===void 0,value:j}}};return l.iterable&&(P[Symbol.iterator]=function(){return P}),P}function g(A){this.map={},A instanceof g?A.forEach(function(P,j){this.append(j,P)},this):Array.isArray(A)?A.forEach(function(P){this.append(P[0],P[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(P){this.append(P,A[P])},this)}g.prototype.append=function(A,P){A=d(A),P=h(P);var j=this.map[A];this.map[A]=j?j+", "+P:P},g.prototype.delete=function(A){delete this.map[d(A)]},g.prototype.get=function(A){return A=d(A),this.has(A)?this.map[A]:null},g.prototype.has=function(A){return this.map.hasOwnProperty(d(A))},g.prototype.set=function(A,P){this.map[d(A)]=h(P)},g.prototype.forEach=function(A,P){for(var j in this.map)this.map.hasOwnProperty(j)&&A.call(P,this.map[j],j,this)},g.prototype.keys=function(){var A=[];return this.forEach(function(P,j){A.push(j)}),p(A)},g.prototype.values=function(){var A=[];return this.forEach(function(P){A.push(P)}),p(A)},g.prototype.entries=function(){var A=[];return this.forEach(function(P,j){A.push([j,P])}),p(A)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function y(A){return new Promise(function(P,j){A.onload=function(){P(A.result)},A.onerror=function(){j(A.error)}})}function v(A){var P=new FileReader,j=y(P);return P.readAsArrayBuffer(A),j}function b(A){var P=new FileReader,j=y(P);return P.readAsText(A),j}function x(A){for(var P=new Uint8Array(A),j=new Array(P.length),z=0;z<P.length;z++)j[z]=String.fromCharCode(P[z]);return j.join("")}function w(A){if(A.slice)return A.slice(0);var P=new Uint8Array(A.byteLength);return P.set(new Uint8Array(A)),P.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(A){this.bodyUsed=this.bodyUsed,this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:l.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:l.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():l.arrayBuffer&&l.blob&&u(A)?(this._bodyArrayBuffer=w(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||f(A))?this._bodyArrayBuffer=w(A):this._bodyText=A=Object.prototype.toString.call(A):this._bodyText="",this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var A=m(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var A=m(this);return A||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(v)}),this.text=function(){var A=m(this);if(A)return A;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(A){var P=A.toUpperCase();return S.indexOf(P)>-1?P:A}function $(A,P){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P=P||{};var j=P.body;if(A instanceof $){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,P.headers||(this.headers=new g(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!j&&A._bodyInit!=null&&(j=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new g(P.headers)),this.method=k(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&j)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(j),(this.method==="GET"||this.method==="HEAD")&&(P.cache==="no-store"||P.cache==="no-cache")){var z=/([?&])_=[^&]*/;if(z.test(this.url))this.url=this.url.replace(z,"$1_="+new Date().getTime());else{var U=/\?/;this.url+=(U.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function F(A){var P=new FormData;return A.trim().split("&").forEach(function(j){if(j){var z=j.split("="),U=z.shift().replace(/\+/g," "),X=z.join("=").replace(/\+/g," ");P.append(decodeURIComponent(U),decodeURIComponent(X))}}),P}function O(A){var P=new g,j=A.replace(/\r?\n[\t ]+/g," ");return j.split("\r").map(function(z){return z.indexOf(`
`)===0?z.substr(1,z.length):z}).forEach(function(z){var U=z.split(":"),X=U.shift().trim();if(X){var K=U.join(":").trim();P.append(X,K)}}),P}C.call($.prototype);function B(A,P){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.ok=this.status>=200&&this.status<300,this.statusText=P.statusText===void 0?"":""+P.statusText,this.headers=new g(P.headers),this.url=P.url||"",this._initBody(A)}C.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},B.error=function(){var A=new B(null,{status:0,statusText:""});return A.type="error",A};var D=[301,302,303,307,308];B.redirect=function(A,P){if(D.indexOf(P)===-1)throw new RangeError("Invalid status code");return new B(null,{status:P,headers:{location:A}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(P,j){this.message=P,this.name=j;var z=Error(P);this.stack=z.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function N(A,P){return new Promise(function(j,z){var U=new $(A,P);if(U.signal&&U.signal.aborted)return z(new o.DOMException("Aborted","AbortError"));var X=new XMLHttpRequest;function K(){X.abort()}X.onload=function(){var se={status:X.status,statusText:X.statusText,headers:O(X.getAllResponseHeaders()||"")};se.url="responseURL"in X?X.responseURL:se.headers.get("X-Request-URL");var _e="response"in X?X.response:X.responseText;setTimeout(function(){j(new B(_e,se))},0)},X.onerror=function(){setTimeout(function(){z(new TypeError("Network request failed"))},0)},X.ontimeout=function(){setTimeout(function(){z(new TypeError("Network request failed"))},0)},X.onabort=function(){setTimeout(function(){z(new o.DOMException("Aborted","AbortError"))},0)};function pe(se){try{return se===""&&a.location.href?a.location.href:se}catch{return se}}X.open(U.method,pe(U.url),!0),U.credentials==="include"?X.withCredentials=!0:U.credentials==="omit"&&(X.withCredentials=!1),"responseType"in X&&(l.blob?X.responseType="blob":l.arrayBuffer&&U.headers.get("Content-Type")&&U.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(X.responseType="arraybuffer")),P&&typeof P.headers=="object"&&!(P.headers instanceof g)?Object.getOwnPropertyNames(P.headers).forEach(function(se){X.setRequestHeader(se,h(P.headers[se]))}):U.headers.forEach(function(se,_e){X.setRequestHeader(_e,se)}),U.signal&&(U.signal.addEventListener("abort",K),X.onreadystatechange=function(){X.readyState===4&&U.signal.removeEventListener("abort",K)}),X.send(typeof U._bodyInit>"u"?null:U._bodyInit)})}return N.polyfill=!0,a.fetch||(a.fetch=N,a.Headers=g,a.Request=$,a.Response=B),o.Headers=g,o.Request=$,o.Response=B,o.fetch=N,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(oS,oS.exports)),oS.exports}(function(e,t){var n;if(typeof fetch=="function"&&(typeof Zi<"u"&&Zi.fetch?n=Zi.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof Gpt<"u"&&typeof window>"u"){var r=n||Xpt();r.default&&(r=r.default),t.default=r,e.exports=t.default}})(TM,TM.exports);var pge=TM.exports;const gge=Zh(pge),RY=qY({__proto__:null,default:gge},[pge]);function FY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function PY(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FY(Object(n),!0).forEach(function(r){Ypt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ypt(e,t,n){return(t=Kpt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kpt(e){var t=Qpt(e,"string");return Jh(t)=="symbol"?t:t+""}function Qpt(e,t){if(Jh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jh(e){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(e)}var Tu;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?Tu=global.fetch:typeof window<"u"&&window.fetch?Tu=window.fetch:Tu=fetch);var Hb;hge()&&(typeof global<"u"&&global.XMLHttpRequest?Hb=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Hb=window.XMLHttpRequest));var Yk;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Yk=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Yk=window.ActiveXObject));!Tu&&RY&&!Hb&&!Yk&&(Tu=gge||RY);typeof Tu!="function"&&(Tu=void 0);var RM=function(t,n){if(n&&Jh(n)==="object"){var r="";for(var i in n)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);if(!r)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+r.slice(1)}return t},OY=function(t,n,r,i){var s=function(l){if(!l.ok)return r(l.statusText||"Error",{status:l.status});l.text().then(function(u){r(null,{status:l.status,data:u})}).catch(r)};if(i){var o=i(t,n);if(o instanceof Promise){o.then(s).catch(r);return}}typeof fetch=="function"?fetch(t,n).then(s).catch(r):Tu(t,n).then(s).catch(r)},MY=!1,Jpt=function(t,n,r,i){t.queryStringParams&&(n=RM(n,t.queryStringParams));var s=PY({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(s["Content-Type"]="application/json");var o=typeof t.requestOptions=="function"?t.requestOptions(r):t.requestOptions,a=PY({method:r?"POST":"GET",body:r?t.stringify(r):void 0,headers:s},MY?{}:o),l=typeof t.alternateFetch=="function"&&t.alternateFetch.length>=1?t.alternateFetch:void 0;try{OY(n,a,i,l)}catch(u){if(!o||Object.keys(o).length===0||!u.message||u.message.indexOf("not implemented")<0)return i(u);try{Object.keys(o).forEach(function(c){delete a[c]}),OY(n,a,i,l),MY=!0}catch(c){i(c)}}},Zpt=function(t,n,r,i){r&&Jh(r)==="object"&&(r=RM("",r).slice(1)),t.queryStringParams&&(n=RM(n,t.queryStringParams));try{var s;Hb?s=new Hb:s=new Yk("MSXML2.XMLHTTP.3.0"),s.open(r?"POST":"GET",n,1),t.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!t.withCredentials,r&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var o=t.customHeaders;if(o=typeof o=="function"?o():o,o)for(var a in o)s.setRequestHeader(a,o[a]);s.onreadystatechange=function(){s.readyState>3&&i(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(r)}catch(l){console&&console.log(l)}},egt=function(t,n,r,i){if(typeof r=="function"&&(i=r,r=void 0),i=i||function(){},Tu&&n.indexOf("file:")!==0)return Jpt(t,n,r,i);if(hge()||typeof ActiveXObject=="function")return Zpt(t,n,r,i);i(new Error("No fetch and no xhr implementation found!"))};function C0(e){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C0(e)}function DY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DY(Object(n),!0).forEach(function(r){mge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DY(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tgt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ngt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yge(r.key),r)}}function rgt(e,t,n){return t&&ngt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mge(e,t,n){return(t=yge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yge(e){var t=igt(e,"string");return C0(t)=="symbol"?t:t+""}function igt(e,t){if(C0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(C0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sgt=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,i){return mge({},r,i||"")},parseLoadPayload:function(n,r){},request:egt,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},vge=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};tgt(this,e),this.services=t,this.options=n,this.allOptions=r,this.type="backend",this.init(t,n,r)}return rgt(e,[{key:"init",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=sF(sF(sF({},sgt()),this.options||{}),i),this.allOptions=s,this.services&&this.options.reloadInterval){var o=setInterval(function(){return r.reload()},this.options.reloadInterval);C0(o)==="object"&&typeof o.unref=="function"&&o.unref()}}},{key:"readMulti",value:function(n,r,i){this._readAny(n,n,r,r,i)}},{key:"read",value:function(n,r,i){this._readAny([n],n,[r],r,i)}},{key:"_readAny",value:function(n,r,i,s,o){var a=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(n,i)),l=qpt(l),l.then(function(u){if(!u)return o(null,{});var c=a.services.interpolator.interpolate(u,{lng:n.join("+"),ns:i.join("+")});a.loadUrl(c,o,r,s)})}},{key:"loadUrl",value:function(n,r,i,s){var o=this,a=typeof i=="string"?[i]:i,l=typeof s=="string"?[s]:s,u=this.options.parseLoadPayload(a,l);this.options.request(this.options,n,u,function(c,f){if(f&&(f.status>=500&&f.status<600||!f.status))return r("failed loading "+n+"; status code: "+f.status,!0);if(f&&f.status>=400&&f.status<500)return r("failed loading "+n+"; status code: "+f.status,!1);if(!f&&c&&c.message&&c.message.toLowerCase().indexOf("failed")>-1&&(c.message.indexOf("fetch")>-1||c.message.toLowerCase().indexOf("network")>-1))return r("failed loading "+n+": "+c.message,!0);if(c)return r(c,!1);var d,h;try{typeof f.data=="string"?d=o.options.parse(f.data,i,s):d=f.data}catch{h="failed parsing "+n+" to json"}if(h)return r(h,!1);r(null,d)})}},{key:"create",value:function(n,r,i,s,o){var a=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var l=this.options.parsePayload(r,i,s),u=0,c=[],f=[];n.forEach(function(d){var h=a.options.addPath;typeof a.options.addPath=="function"&&(h=a.options.addPath(d,r));var p=a.services.interpolator.interpolate(h,{lng:d,ns:r});a.options.request(a.options,p,l,function(g,m){u+=1,c.push(g),f.push(m),u===n.length&&typeof o=="function"&&o(c,f)})})}}},{key:"reload",value:function(){var n=this,r=this.services,i=r.backendConnector,s=r.languageUtils,o=r.logger,a=i.language;if(!(a&&a.toLowerCase()==="cimode")){var l=[],u=function(f){var d=s.toResolveHierarchy(f);d.forEach(function(h){l.indexOf(h)<0&&l.push(h)})};u(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(c){return u(c)}),l.forEach(function(c){n.allOptions.ns.forEach(function(f){i.read(c,f,"read",null,null,function(d,h){d&&o.warn("loading namespace ".concat(f," for language ").concat(c," failed"),d),!d&&h&&o.log("loaded namespace ".concat(f," for language ").concat(c),h),i.loaded("".concat(c,"|").concat(f),d,h)})})})}}}])}();vge.type="backend";pi.use(vge).use(dge).use(hft).init({supportedLngs:["en","ko"],fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"/Swipytics/locales/{{lng}}/translation.json"},react:{useSuspense:!0}});const ogt=new mHe,agt=new Fpt;lge(document.getElementById("root")).render(T.jsx(M.StrictMode,{children:T.jsx(wHe,{client:ogt,children:T.jsx(tft,{client:agt,attachTo:window,eventTypes:["click","scroll","change"],children:T.jsx(clt,{theme:ppt,children:T.jsx(Sa,{flexDir:"column",minH:"100dvh",p:0,m:0,w:"full",children:T.jsx(hpt,{})})})})})}))});export default lgt();
