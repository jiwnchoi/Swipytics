var _ce=Object.defineProperty;var _9=e=>{throw TypeError(e)};var Ece=(e,t,n)=>t in e?_ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $ce=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var fe=(e,t,n)=>Ece(e,typeof t!="symbol"?t+"":t,n),EE=(e,t,n)=>t.has(e)||_9("Cannot "+n);var B=(e,t,n)=>(EE(e,t,"read from private field"),n?n.call(e):t.get(e)),Me=(e,t,n)=>t.has(e)?_9("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),pe=(e,t,n,r)=>(EE(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),je=(e,t,n)=>(EE(e,t,"access private method"),n);var ab=(e,t,n,r)=>({set _(i){pe(e,t,i,n)},get _(){return B(e,t,r)}});var Iot=$ce((Tst,GO)=>{function Ace(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var NW={exports:{}},dk={},IW={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1=Symbol.for("react.element"),Tce=Symbol.for("react.portal"),Mce=Symbol.for("react.fragment"),Fce=Symbol.for("react.strict_mode"),Pce=Symbol.for("react.profiler"),Rce=Symbol.for("react.provider"),Dce=Symbol.for("react.context"),Oce=Symbol.for("react.forward_ref"),Nce=Symbol.for("react.suspense"),Ice=Symbol.for("react.memo"),Lce=Symbol.for("react.lazy"),E9=Symbol.iterator;function zce(e){return e===null||typeof e!="object"?null:(e=E9&&e[E9]||e["@@iterator"],typeof e=="function"?e:null)}var LW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zW=Object.assign,BW={};function Ng(e,t,n){this.props=e,this.context=t,this.refs=BW,this.updater=n||LW}Ng.prototype.isReactComponent={};Ng.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ng.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jW(){}jW.prototype=Ng.prototype;function MM(e,t,n){this.props=e,this.context=t,this.refs=BW,this.updater=n||LW}var FM=MM.prototype=new jW;FM.constructor=MM;zW(FM,Ng.prototype);FM.isPureReactComponent=!0;var $9=Array.isArray,UW=Object.prototype.hasOwnProperty,PM={current:null},VW={key:!0,ref:!0,__self:!0,__source:!0};function WW(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)UW.call(t,r)&&!VW.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:z1,type:e,key:o,ref:s,props:i,_owner:PM.current}}function Bce(e,t){return{$$typeof:z1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function RM(e){return typeof e=="object"&&e!==null&&e.$$typeof===z1}function jce(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var A9=/\/+/g;function $E(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jce(""+e.key):t.toString(36)}function Fx(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case z1:case Tce:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+$E(s,0):r,$9(i)?(n="",e!=null&&(n=e.replace(A9,"$&/")+"/"),Fx(i,t,n,"",function(u){return u})):i!=null&&(RM(i)&&(i=Bce(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(A9,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",$9(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+$E(o,a);s+=Fx(o,t,n,l,i)}else if(l=zce(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+$E(o,a++),s+=Fx(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function lb(e,t,n){if(e==null)return e;var r=[],i=0;return Fx(e,r,"","",function(o){return t.call(n,o,i++)}),r}function Uce(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qr={current:null},Px={transition:null},Vce={ReactCurrentDispatcher:Qr,ReactCurrentBatchConfig:Px,ReactCurrentOwner:PM};function HW(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:lb,forEach:function(e,t,n){lb(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return lb(e,function(){t++}),t},toArray:function(e){return lb(e,function(t){return t})||[]},only:function(e){if(!RM(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=Ng;ze.Fragment=Mce;ze.Profiler=Pce;ze.PureComponent=MM;ze.StrictMode=Fce;ze.Suspense=Nce;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vce;ze.act=HW;ze.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=zW({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=PM.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)UW.call(t,l)&&!VW.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:z1,type:e.type,key:i,ref:o,props:r,_owner:s}};ze.createContext=function(e){return e={$$typeof:Dce,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Rce,_context:e},e.Consumer=e};ze.createElement=WW;ze.createFactory=function(e){var t=WW.bind(null,e);return t.type=e,t};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:Oce,render:e}};ze.isValidElement=RM;ze.lazy=function(e){return{$$typeof:Lce,_payload:{_status:-1,_result:e},_init:Uce}};ze.memo=function(e,t){return{$$typeof:Ice,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=Px.transition;Px.transition={};try{e()}finally{Px.transition=t}};ze.unstable_act=HW;ze.useCallback=function(e,t){return Qr.current.useCallback(e,t)};ze.useContext=function(e){return Qr.current.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e){return Qr.current.useDeferredValue(e)};ze.useEffect=function(e,t){return Qr.current.useEffect(e,t)};ze.useId=function(){return Qr.current.useId()};ze.useImperativeHandle=function(e,t,n){return Qr.current.useImperativeHandle(e,t,n)};ze.useInsertionEffect=function(e,t){return Qr.current.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return Qr.current.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return Qr.current.useMemo(e,t)};ze.useReducer=function(e,t,n){return Qr.current.useReducer(e,t,n)};ze.useRef=function(e){return Qr.current.useRef(e)};ze.useState=function(e){return Qr.current.useState(e)};ze.useSyncExternalStore=function(e,t,n){return Qr.current.useSyncExternalStore(e,t,n)};ze.useTransition=function(){return Qr.current.useTransition()};ze.version="18.3.1";IW.exports=ze;var F=IW.exports;const zi=Fl(F),T9=Ace({__proto__:null,default:zi},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wce=F,Hce=Symbol.for("react.element"),qce=Symbol.for("react.fragment"),Gce=Object.prototype.hasOwnProperty,Yce=Wce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xce={key:!0,ref:!0,__self:!0,__source:!0};function qW(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Gce.call(t,r)&&!Xce.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Hce,type:e,key:o,ref:s,props:i,_owner:Yce.current}}dk.Fragment=qce;dk.jsx=qW;dk.jsxs=qW;NW.exports=dk;var E=NW.exports,Kce=!1;function Qce(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Zce(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Jce=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!Kce:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Zce(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Qce(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e}(),lr="-ms-",R2="-moz-",rt="-webkit-",GW="comm",DM="rule",OM="decl",efe="@import",YW="@keyframes",tfe="@layer",nfe=Math.abs,hk=String.fromCharCode,rfe=Object.assign;function ife(e,t){return Vn(e,0)^45?(((t<<2^Vn(e,0))<<2^Vn(e,1))<<2^Vn(e,2))<<2^Vn(e,3):0}function XW(e){return e.trim()}function ofe(e,t){return(e=t.exec(e))?e[0]:e}function it(e,t,n){return e.replace(t,n)}function bA(e,t){return e.indexOf(t)}function Vn(e,t){return e.charCodeAt(t)|0}function _y(e,t,n){return e.slice(t,n)}function Xs(e){return e.length}function NM(e){return e.length}function ub(e,t){return t.push(e),e}function sfe(e,t){return e.map(t).join("")}var pk=1,Rp=1,KW=0,yi=0,fn=0,Ig="";function gk(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:pk,column:Rp,length:s,return:""}}function mm(e,t){return rfe(gk("",null,null,"",null,null,0),e,{length:-e.length},t)}function afe(){return fn}function lfe(){return fn=yi>0?Vn(Ig,--yi):0,Rp--,fn===10&&(Rp=1,pk--),fn}function Bi(){return fn=yi<KW?Vn(Ig,yi++):0,Rp++,fn===10&&(Rp=1,pk++),fn}function sa(){return Vn(Ig,yi)}function Rx(){return yi}function B1(e,t){return _y(Ig,e,t)}function Ey(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function QW(e){return pk=Rp=1,KW=Xs(Ig=e),yi=0,[]}function ZW(e){return Ig="",e}function Dx(e){return XW(B1(yi-1,xA(e===91?e+2:e===40?e+1:e)))}function ufe(e){for(;(fn=sa())&&fn<33;)Bi();return Ey(e)>2||Ey(fn)>3?"":" "}function cfe(e,t){for(;--t&&Bi()&&!(fn<48||fn>102||fn>57&&fn<65||fn>70&&fn<97););return B1(e,Rx()+(t<6&&sa()==32&&Bi()==32))}function xA(e){for(;Bi();)switch(fn){case e:return yi;case 34:case 39:e!==34&&e!==39&&xA(fn);break;case 40:e===41&&xA(e);break;case 92:Bi();break}return yi}function ffe(e,t){for(;Bi()&&e+fn!==57;)if(e+fn===84&&sa()===47)break;return"/*"+B1(t,yi-1)+"*"+hk(e===47?e:Bi())}function dfe(e){for(;!Ey(sa());)Bi();return B1(e,yi)}function hfe(e){return ZW(Ox("",null,null,null,[""],e=QW(e),0,[0],e))}function Ox(e,t,n,r,i,o,s,a,l){for(var u=0,c=0,f=s,d=0,h=0,p=0,g=1,m=1,y=1,v=0,b="",x=i,w=o,k=r,S=b;m;)switch(p=v,v=Bi()){case 40:if(p!=108&&Vn(S,f-1)==58){bA(S+=it(Dx(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:S+=Dx(v);break;case 9:case 10:case 13:case 32:S+=ufe(p);break;case 92:S+=cfe(Rx()-1,7);continue;case 47:switch(sa()){case 42:case 47:ub(pfe(ffe(Bi(),Rx()),t,n),l);break;default:S+="/"}break;case 123*g:a[u++]=Xs(S)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+c:y==-1&&(S=it(S,/\f/g,"")),h>0&&Xs(S)-f&&ub(h>32?F9(S+";",r,n,f-1):F9(it(S," ","")+";",r,n,f-2),l);break;case 59:S+=";";default:if(ub(k=M9(S,t,n,u,c,i,a,b,x=[],w=[],f),o),v===123)if(c===0)Ox(S,t,k,k,x,o,f,a,w);else switch(d===99&&Vn(S,3)===110?100:d){case 100:case 108:case 109:case 115:Ox(e,k,k,r&&ub(M9(e,k,k,0,0,i,a,b,i,x=[],f),w),i,w,f,a,r?x:w);break;default:Ox(S,k,k,k,[""],w,0,a,w)}}u=c=h=0,g=y=1,b=S="",f=s;break;case 58:f=1+Xs(S),h=p;default:if(g<1){if(v==123)--g;else if(v==125&&g++==0&&lfe()==125)continue}switch(S+=hk(v),v*g){case 38:y=c>0?1:(S+="\f",-1);break;case 44:a[u++]=(Xs(S)-1)*y,y=1;break;case 64:sa()===45&&(S+=Dx(Bi())),d=sa(),c=f=Xs(b=S+=dfe(Rx())),v++;break;case 45:p===45&&Xs(S)==2&&(g=0)}}return o}function M9(e,t,n,r,i,o,s,a,l,u,c){for(var f=i-1,d=i===0?o:[""],h=NM(d),p=0,g=0,m=0;p<r;++p)for(var y=0,v=_y(e,f+1,f=nfe(g=s[p])),b=e;y<h;++y)(b=XW(g>0?d[y]+" "+v:it(v,/&\f/g,d[y])))&&(l[m++]=b);return gk(e,t,n,i===0?DM:a,l,u,c)}function pfe(e,t,n){return gk(e,t,n,GW,hk(afe()),_y(e,2,-2),0)}function F9(e,t,n,r){return gk(e,t,n,OM,_y(e,0,r),_y(e,r+1,-1),r)}function Qh(e,t){for(var n="",r=NM(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function gfe(e,t,n,r){switch(e.type){case tfe:if(e.children.length)break;case efe:case OM:return e.return=e.return||e.value;case GW:return"";case YW:return e.return=e.value+"{"+Qh(e.children,r)+"}";case DM:e.value=e.props.join(",")}return Xs(n=Qh(e.children,r))?e.return=e.value+"{"+n+"}":""}function mfe(e){var t=NM(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}function yfe(e){return function(t){t.root||(t=t.return)&&e(t)}}var P9=function(t){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=t(r);return n.set(r,i),i}};function JW(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var vfe=function(t,n,r){for(var i=0,o=0;i=o,o=sa(),i===38&&o===12&&(n[r]=1),!Ey(o);)Bi();return B1(t,yi)},bfe=function(t,n){var r=-1,i=44;do switch(Ey(i)){case 0:i===38&&sa()===12&&(n[r]=1),t[r]+=vfe(yi-1,n,r);break;case 2:t[r]+=Dx(i);break;case 4:if(i===44){t[++r]=sa()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=hk(i)}while(i=Bi());return t},xfe=function(t,n){return ZW(bfe(QW(t),n))},R9=new WeakMap,wfe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!R9.get(r))&&!i){R9.set(t,!0);for(var o=[],s=xfe(n,o),a=r.props,l=0,u=0;l<s.length;l++)for(var c=0;c<a.length;c++,u++)t.props[u]=o[l]?s[l].replace(/&\f/g,a[c]):a[c]+" "+s[l]}}},Sfe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function eH(e,t){switch(ife(e,t)){case 5103:return rt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return rt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return rt+e+R2+e+lr+e+e;case 6828:case 4268:return rt+e+lr+e+e;case 6165:return rt+e+lr+"flex-"+e+e;case 5187:return rt+e+it(e,/(\w+).+(:[^]+)/,rt+"box-$1$2"+lr+"flex-$1$2")+e;case 5443:return rt+e+lr+"flex-item-"+it(e,/flex-|-self/,"")+e;case 4675:return rt+e+lr+"flex-line-pack"+it(e,/align-content|flex-|-self/,"")+e;case 5548:return rt+e+lr+it(e,"shrink","negative")+e;case 5292:return rt+e+lr+it(e,"basis","preferred-size")+e;case 6060:return rt+"box-"+it(e,"-grow","")+rt+e+lr+it(e,"grow","positive")+e;case 4554:return rt+it(e,/([^-])(transform)/g,"$1"+rt+"$2")+e;case 6187:return it(it(it(e,/(zoom-|grab)/,rt+"$1"),/(image-set)/,rt+"$1"),e,"")+e;case 5495:case 3959:return it(e,/(image-set\([^]*)/,rt+"$1$`$1");case 4968:return it(it(e,/(.+:)(flex-)?(.*)/,rt+"box-pack:$3"+lr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+rt+e+e;case 4095:case 3583:case 4068:case 2532:return it(e,/(.+)-inline(.+)/,rt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Xs(e)-1-t>6)switch(Vn(e,t+1)){case 109:if(Vn(e,t+4)!==45)break;case 102:return it(e,/(.+:)(.+)-([^]+)/,"$1"+rt+"$2-$3$1"+R2+(Vn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~bA(e,"stretch")?eH(it(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Vn(e,t+1)!==115)break;case 6444:switch(Vn(e,Xs(e)-3-(~bA(e,"!important")&&10))){case 107:return it(e,":",":"+rt)+e;case 101:return it(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+rt+(Vn(e,14)===45?"inline-":"")+"box$3$1"+rt+"$2$3$1"+lr+"$2box$3")+e}break;case 5936:switch(Vn(e,t+11)){case 114:return rt+e+lr+it(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return rt+e+lr+it(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return rt+e+lr+it(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return rt+e+lr+e+e}return e}var kfe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case OM:t.return=eH(t.value,t.length);break;case YW:return Qh([mm(t,{value:it(t.value,"@","@"+rt)})],i);case DM:if(t.length)return sfe(t.props,function(o){switch(ofe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Qh([mm(t,{props:[it(o,/:(read-\w+)/,":"+R2+"$1")]})],i);case"::placeholder":return Qh([mm(t,{props:[it(o,/:(plac\w+)/,":"+rt+"input-$1")]}),mm(t,{props:[it(o,/:(plac\w+)/,":"+R2+"$1")]}),mm(t,{props:[it(o,/:(plac\w+)/,lr+"input-$1")]})],i)}return""})}},Cfe=[kfe],_fe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var m=g.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||Cfe,o={},s,a=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var m=g.getAttribute("data-emotion").split(" "),y=1;y<m.length;y++)o[m[y]]=!0;a.push(g)});var l,u=[wfe,Sfe];{var c,f=[gfe,yfe(function(g){c.insert(g)})],d=mfe(u.concat(i,f)),h=function(m){return Qh(hfe(m),d)};l=function(m,y,v,b){c=v,h(m?m+"{"+y.styles+"}":y.styles),b&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new Jce({key:n,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return p.sheet.hydrate(a),p};function D2(){return D2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D2.apply(null,arguments)}var tH={exports:{}},ht={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var In=typeof Symbol=="function"&&Symbol.for,IM=In?Symbol.for("react.element"):60103,LM=In?Symbol.for("react.portal"):60106,mk=In?Symbol.for("react.fragment"):60107,yk=In?Symbol.for("react.strict_mode"):60108,vk=In?Symbol.for("react.profiler"):60114,bk=In?Symbol.for("react.provider"):60109,xk=In?Symbol.for("react.context"):60110,zM=In?Symbol.for("react.async_mode"):60111,wk=In?Symbol.for("react.concurrent_mode"):60111,Sk=In?Symbol.for("react.forward_ref"):60112,kk=In?Symbol.for("react.suspense"):60113,Efe=In?Symbol.for("react.suspense_list"):60120,Ck=In?Symbol.for("react.memo"):60115,_k=In?Symbol.for("react.lazy"):60116,$fe=In?Symbol.for("react.block"):60121,Afe=In?Symbol.for("react.fundamental"):60117,Tfe=In?Symbol.for("react.responder"):60118,Mfe=In?Symbol.for("react.scope"):60119;function eo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case IM:switch(e=e.type,e){case zM:case wk:case mk:case vk:case yk:case kk:return e;default:switch(e=e&&e.$$typeof,e){case xk:case Sk:case _k:case Ck:case bk:return e;default:return t}}case LM:return t}}}function nH(e){return eo(e)===wk}ht.AsyncMode=zM;ht.ConcurrentMode=wk;ht.ContextConsumer=xk;ht.ContextProvider=bk;ht.Element=IM;ht.ForwardRef=Sk;ht.Fragment=mk;ht.Lazy=_k;ht.Memo=Ck;ht.Portal=LM;ht.Profiler=vk;ht.StrictMode=yk;ht.Suspense=kk;ht.isAsyncMode=function(e){return nH(e)||eo(e)===zM};ht.isConcurrentMode=nH;ht.isContextConsumer=function(e){return eo(e)===xk};ht.isContextProvider=function(e){return eo(e)===bk};ht.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===IM};ht.isForwardRef=function(e){return eo(e)===Sk};ht.isFragment=function(e){return eo(e)===mk};ht.isLazy=function(e){return eo(e)===_k};ht.isMemo=function(e){return eo(e)===Ck};ht.isPortal=function(e){return eo(e)===LM};ht.isProfiler=function(e){return eo(e)===vk};ht.isStrictMode=function(e){return eo(e)===yk};ht.isSuspense=function(e){return eo(e)===kk};ht.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===mk||e===wk||e===vk||e===yk||e===kk||e===Efe||typeof e=="object"&&e!==null&&(e.$$typeof===_k||e.$$typeof===Ck||e.$$typeof===bk||e.$$typeof===xk||e.$$typeof===Sk||e.$$typeof===Afe||e.$$typeof===Tfe||e.$$typeof===Mfe||e.$$typeof===$fe)};ht.typeOf=eo;tH.exports=ht;var Ffe=tH.exports,rH=Ffe,Pfe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Rfe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},iH={};iH[rH.ForwardRef]=Pfe;iH[rH.Memo]=Rfe;var Dfe=!0;function Ofe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var oH=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||Dfe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},sH=function(t,n,r){oH(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function Nfe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Ife={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Lfe=!1,zfe=/[A-Z]|^ms/g,Bfe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,aH=function(t){return t.charCodeAt(1)===45},D9=function(t){return t!=null&&typeof t!="boolean"},AE=JW(function(e){return aH(e)?e:e.replace(zfe,"-$&").toLowerCase()}),O9=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Bfe,function(r,i,o){return Ks={name:i,styles:o,next:Ks},i})}return Ife[t]!==1&&!aH(t)&&typeof n=="number"&&n!==0?n+"px":n},jfe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function $y(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Ks={name:i.name,styles:i.styles,next:Ks},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Ks={name:s.name,styles:s.styles,next:Ks},s=s.next;var a=o.styles+";";return a}return Ufe(e,t,n)}case"function":{if(e!==void 0){var l=Ks,u=n(e);return Ks=l,$y(e,t,u)}break}}var c=n;if(t==null)return c;var f=t[c];return f!==void 0?f:c}function Ufe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=$y(e,t,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var a=s;t!=null&&t[a]!==void 0?r+=o+"{"+t[a]+"}":D9(a)&&(r+=AE(o)+":"+O9(o,a)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&Lfe)throw new Error(jfe);if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var l=0;l<s.length;l++)D9(s[l])&&(r+=AE(o)+":"+O9(o,s[l])+";");else{var u=$y(e,t,s);switch(o){case"animation":case"animationName":{r+=AE(o)+":"+u+";";break}default:r+=o+"{"+u+"}"}}}}return r}var N9=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ks;function BM(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";Ks=void 0;var o=e[0];if(o==null||o.raw===void 0)r=!1,i+=$y(n,t,o);else{var s=o;i+=s[0]}for(var a=1;a<e.length;a++)if(i+=$y(n,t,e[a]),r){var l=o;i+=l[a]}N9.lastIndex=0;for(var u="",c;(c=N9.exec(i))!==null;)u+="-"+c[1];var f=Nfe(i)+u;return{name:f,styles:i,next:Ks}}var Vfe=function(t){return t()},lH=T9.useInsertionEffect?T9.useInsertionEffect:!1,Wfe=lH||Vfe,I9=lH||F.useLayoutEffect,uH=F.createContext(typeof HTMLElement<"u"?_fe({key:"css"}):null);uH.Provider;var cH=function(t){return F.forwardRef(function(n,r){var i=F.useContext(uH);return t(n,i,r)})},Ay=F.createContext({}),Hfe=function(t,n){if(typeof n=="function"){var r=n(t);return r}return D2({},t,n)},qfe=P9(function(e){return P9(function(t){return Hfe(e,t)})}),Gfe=function(t){var n=F.useContext(Ay);return t.theme!==n&&(n=qfe(n)(t.theme)),F.createElement(Ay.Provider,{value:n},t.children)},Ek=cH(function(e,t){var n=e.styles,r=BM([n],void 0,F.useContext(Ay)),i=F.useRef();return I9(function(){var o=t.key+"-global",s=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return t.sheet.tags.length&&(s.before=t.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[t]),I9(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&sH(t,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}t.insert("",r,s,!1)},[t,r.name]),null});function Yfe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return BM(t)}var Xfe=function(){var t=Yfe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},fH=String.raw,dH=fH`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Kfe=()=>E.jsx(Ek,{styles:dH}),Qfe=({scope:e=""})=>E.jsx(Ek,{styles:fH`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${dH}
    `});function Zfe(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function tr(e={}){const{name:t,strict:n=!0,hookName:r="useContext",providerName:i="Provider",errorMessage:o,defaultValue:s}=e,a=F.createContext(s);a.displayName=t;function l(){var u;const c=F.useContext(a);if(!c&&n){const f=new Error(o??Zfe(r,i));throw f.name="ContextError",(u=Error.captureStackTrace)==null||u.call(Error,f,l),f}return c}return[a.Provider,l,a]}var[Jfe,ede]=tr({strict:!1,name:"PortalManagerContext"});function hH(e){const{children:t,zIndex:n}=e;return E.jsx(Jfe,{value:{zIndex:n},children:t})}hH.displayName="PortalManager";var Dp=globalThis!=null&&globalThis.document?F.useLayoutEffect:F.useEffect,pH={exports:{}},to={},gH={exports:{}},mH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,j){var Y=O.length;O.push(j);e:for(;0<Y;){var W=Y-1>>>1,oe=O[W];if(0<i(oe,j))O[W]=j,O[Y]=oe,Y=W;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var j=O[0],Y=O.pop();if(Y!==j){O[0]=Y;e:for(var W=0,oe=O.length,re=oe>>>1;W<re;){var we=2*(W+1)-1,Re=O[we],lt=we+1,_n=O[lt];if(0>i(Re,Y))lt<oe&&0>i(_n,Re)?(O[W]=_n,O[lt]=Y,W=lt):(O[W]=Re,O[we]=Y,W=we);else if(lt<oe&&0>i(_n,Y))O[W]=_n,O[lt]=Y,W=lt;else break e}}return j}function i(O,j){var Y=O.sortIndex-j.sortIndex;return Y!==0?Y:O.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=O)r(u),j.sortIndex=j.expirationTime,t(l,j);else break;j=n(u)}}function x(O){if(g=!1,b(O),!p)if(n(l)!==null)p=!0,D(w);else{var j=n(u);j!==null&&I(x,j.startTime-O)}}function w(O,j){p=!1,g&&(g=!1,y(C),C=-1),h=!0;var Y=d;try{for(b(j),f=n(l);f!==null&&(!(f.expirationTime>j)||O&&!A());){var W=f.callback;if(typeof W=="function"){f.callback=null,d=f.priorityLevel;var oe=W(f.expirationTime<=j);j=e.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(l)&&r(l),b(j)}else r(l);f=n(l)}if(f!==null)var re=!0;else{var we=n(u);we!==null&&I(x,we.startTime-j),re=!1}return re}finally{f=null,d=Y,h=!1}}var k=!1,S=null,C=-1,_=5,$=-1;function A(){return!(e.unstable_now()-$<_)}function N(){if(S!==null){var O=e.unstable_now();$=O;var j=!0;try{j=S(!0,O)}finally{j?M():(k=!1,S=null)}}else k=!1}var M;if(typeof v=="function")M=function(){v(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,M=function(){P.postMessage(null)}}else M=function(){m(N,0)};function D(O){S=O,k||(k=!0,M())}function I(O,j){C=m(function(){O(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,D(w))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(O){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var Y=d;d=j;try{return O()}finally{d=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,j){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=d;d=O;try{return j()}finally{d=Y}},e.unstable_scheduleCallback=function(O,j,Y){var W=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?W+Y:W):Y=W,O){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Y+oe,O={id:c++,callback:j,priorityLevel:O,startTime:Y,expirationTime:oe,sortIndex:-1},Y>W?(O.sortIndex=Y,t(u,O),n(l)===null&&O===n(u)&&(g?(y(C),C=-1):g=!0,I(x,Y-W))):(O.sortIndex=oe,t(l,O),p||h||(p=!0,D(w))),O},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(O){var j=d;return function(){var Y=d;d=j;try{return O.apply(this,arguments)}finally{d=Y}}}})(mH);gH.exports=mH;var tde=gH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nde=F,qi=tde;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yH=new Set,Ty={};function _d(e,t){Op(e,t),Op(e+"Capture",t)}function Op(e,t){for(Ty[e]=t,e=0;e<t.length;e++)yH.add(t[e])}var xl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wA=Object.prototype.hasOwnProperty,rde=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L9={},z9={};function ide(e){return wA.call(z9,e)?!0:wA.call(L9,e)?!1:rde.test(e)?z9[e]=!0:(L9[e]=!0,!1)}function ode(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sde(e,t,n,r){if(t===null||typeof t>"u"||ode(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Zr(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Jn[e]=new Zr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Jn[t]=new Zr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Jn[e]=new Zr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Jn[e]=new Zr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Jn[e]=new Zr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Jn[e]=new Zr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Jn[e]=new Zr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Jn[e]=new Zr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Jn[e]=new Zr(e,5,!1,e.toLowerCase(),null,!1,!1)});var jM=/[\-:]([a-z])/g;function UM(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jM,UM);Jn[t]=new Zr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jM,UM);Jn[t]=new Zr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jM,UM);Jn[t]=new Zr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Jn[e]=new Zr(e,1,!1,e.toLowerCase(),null,!1,!1)});Jn.xlinkHref=new Zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Jn[e]=new Zr(e,1,!1,e.toLowerCase(),null,!0,!0)});function VM(e,t,n,r){var i=Jn.hasOwnProperty(t)?Jn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sde(t,n,i,r)&&(n=null),r||i===null?ide(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Pl=nde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cb=Symbol.for("react.element"),Sh=Symbol.for("react.portal"),kh=Symbol.for("react.fragment"),WM=Symbol.for("react.strict_mode"),SA=Symbol.for("react.profiler"),vH=Symbol.for("react.provider"),bH=Symbol.for("react.context"),HM=Symbol.for("react.forward_ref"),kA=Symbol.for("react.suspense"),CA=Symbol.for("react.suspense_list"),qM=Symbol.for("react.memo"),eu=Symbol.for("react.lazy"),xH=Symbol.for("react.offscreen"),B9=Symbol.iterator;function ym(e){return e===null||typeof e!="object"?null:(e=B9&&e[B9]||e["@@iterator"],typeof e=="function"?e:null)}var Vt=Object.assign,TE;function o0(e){if(TE===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);TE=t&&t[1]||""}return`
`+TE+e}var ME=!1;function FE(e,t){if(!e||ME)return"";ME=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{ME=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?o0(e):""}function ade(e){switch(e.tag){case 5:return o0(e.type);case 16:return o0("Lazy");case 13:return o0("Suspense");case 19:return o0("SuspenseList");case 0:case 2:case 15:return e=FE(e.type,!1),e;case 11:return e=FE(e.type.render,!1),e;case 1:return e=FE(e.type,!0),e;default:return""}}function _A(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kh:return"Fragment";case Sh:return"Portal";case SA:return"Profiler";case WM:return"StrictMode";case kA:return"Suspense";case CA:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case bH:return(e.displayName||"Context")+".Consumer";case vH:return(e._context.displayName||"Context")+".Provider";case HM:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qM:return t=e.displayName||null,t!==null?t:_A(e.type)||"Memo";case eu:t=e._payload,e=e._init;try{return _A(e(t))}catch{}}return null}function lde(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _A(t);case 8:return t===WM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wH(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ude(e){var t=wH(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fb(e){e._valueTracker||(e._valueTracker=ude(e))}function SH(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=wH(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function O2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function EA(e,t){var n=t.checked;return Vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function j9(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Xu(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kH(e,t){t=t.checked,t!=null&&VM(e,"checked",t,!1)}function $A(e,t){kH(e,t);var n=Xu(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?AA(e,t.type,n):t.hasOwnProperty("defaultValue")&&AA(e,t.type,Xu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function U9(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function AA(e,t,n){(t!=="number"||O2(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var s0=Array.isArray;function Zh(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Xu(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function TA(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function V9(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ee(92));if(s0(n)){if(1<n.length)throw Error(ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Xu(n)}}function CH(e,t){var n=Xu(t.value),r=Xu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function W9(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _H(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function MA(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_H(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var db,EH=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(db=db||document.createElement("div"),db.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=db.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function My(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var U0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cde=["Webkit","ms","Moz","O"];Object.keys(U0).forEach(function(e){cde.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),U0[t]=U0[e]})});function $H(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||U0.hasOwnProperty(e)&&U0[e]?(""+t).trim():t+"px"}function AH(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=$H(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var fde=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function FA(e,t){if(t){if(fde[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function PA(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RA=null;function GM(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var DA=null,Jh=null,ep=null;function H9(e){if(e=V1(e)){if(typeof DA!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=Fk(t),DA(e.stateNode,e.type,t))}}function TH(e){Jh?ep?ep.push(e):ep=[e]:Jh=e}function MH(){if(Jh){var e=Jh,t=ep;if(ep=Jh=null,H9(e),t)for(e=0;e<t.length;e++)H9(t[e])}}function FH(e,t){return e(t)}function PH(){}var PE=!1;function RH(e,t,n){if(PE)return e(t,n);PE=!0;try{return FH(e,t,n)}finally{PE=!1,(Jh!==null||ep!==null)&&(PH(),MH())}}function Fy(e,t){var n=e.stateNode;if(n===null)return null;var r=Fk(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ee(231,t,typeof n));return n}var OA=!1;if(xl)try{var vm={};Object.defineProperty(vm,"passive",{get:function(){OA=!0}}),window.addEventListener("test",vm,vm),window.removeEventListener("test",vm,vm)}catch{OA=!1}function dde(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var V0=!1,N2=null,I2=!1,NA=null,hde={onError:function(e){V0=!0,N2=e}};function pde(e,t,n,r,i,o,s,a,l){V0=!1,N2=null,dde.apply(hde,arguments)}function gde(e,t,n,r,i,o,s,a,l){if(pde.apply(this,arguments),V0){if(V0){var u=N2;V0=!1,N2=null}else throw Error(ee(198));I2||(I2=!0,NA=u)}}function Ed(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function DH(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function q9(e){if(Ed(e)!==e)throw Error(ee(188))}function mde(e){var t=e.alternate;if(!t){if(t=Ed(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return q9(i),e;if(o===r)return q9(i),t;o=o.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?e:t}function OH(e){return e=mde(e),e!==null?NH(e):null}function NH(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=NH(e);if(t!==null)return t;e=e.sibling}return null}var IH=qi.unstable_scheduleCallback,G9=qi.unstable_cancelCallback,yde=qi.unstable_shouldYield,vde=qi.unstable_requestPaint,en=qi.unstable_now,bde=qi.unstable_getCurrentPriorityLevel,YM=qi.unstable_ImmediatePriority,LH=qi.unstable_UserBlockingPriority,L2=qi.unstable_NormalPriority,xde=qi.unstable_LowPriority,zH=qi.unstable_IdlePriority,$k=null,aa=null;function wde(e){if(aa&&typeof aa.onCommitFiberRoot=="function")try{aa.onCommitFiberRoot($k,e,void 0,(e.current.flags&128)===128)}catch{}}var ds=Math.clz32?Math.clz32:Cde,Sde=Math.log,kde=Math.LN2;function Cde(e){return e>>>=0,e===0?32:31-(Sde(e)/kde|0)|0}var hb=64,pb=4194304;function a0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function z2(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=a0(a):(o&=s,o!==0&&(r=a0(o)))}else s=n&~i,s!==0?r=a0(s):o!==0&&(r=a0(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ds(t),i=1<<n,r|=e[n],t&=~i;return r}function _de(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ede(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-ds(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=_de(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function IA(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BH(){var e=hb;return hb<<=1,!(hb&4194240)&&(hb=64),e}function RE(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function j1(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ds(t),e[t]=n}function $de(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ds(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function XM(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ds(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var dt=0;function jH(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var UH,KM,VH,WH,HH,LA=!1,gb=[],Du=null,Ou=null,Nu=null,Py=new Map,Ry=new Map,uu=[],Ade="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y9(e,t){switch(e){case"focusin":case"focusout":Du=null;break;case"dragenter":case"dragleave":Ou=null;break;case"mouseover":case"mouseout":Nu=null;break;case"pointerover":case"pointerout":Py.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ry.delete(t.pointerId)}}function bm(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=V1(t),t!==null&&KM(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Tde(e,t,n,r,i){switch(t){case"focusin":return Du=bm(Du,e,t,n,r,i),!0;case"dragenter":return Ou=bm(Ou,e,t,n,r,i),!0;case"mouseover":return Nu=bm(Nu,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Py.set(o,bm(Py.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ry.set(o,bm(Ry.get(o)||null,e,t,n,r,i)),!0}return!1}function qH(e){var t=mf(e.target);if(t!==null){var n=Ed(t);if(n!==null){if(t=n.tag,t===13){if(t=DH(n),t!==null){e.blockedOn=t,HH(e.priority,function(){VH(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Nx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zA(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);RA=r,n.target.dispatchEvent(r),RA=null}else return t=V1(n),t!==null&&KM(t),e.blockedOn=n,!1;t.shift()}return!0}function X9(e,t,n){Nx(e)&&n.delete(t)}function Mde(){LA=!1,Du!==null&&Nx(Du)&&(Du=null),Ou!==null&&Nx(Ou)&&(Ou=null),Nu!==null&&Nx(Nu)&&(Nu=null),Py.forEach(X9),Ry.forEach(X9)}function xm(e,t){e.blockedOn===t&&(e.blockedOn=null,LA||(LA=!0,qi.unstable_scheduleCallback(qi.unstable_NormalPriority,Mde)))}function Dy(e){function t(i){return xm(i,e)}if(0<gb.length){xm(gb[0],e);for(var n=1;n<gb.length;n++){var r=gb[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Du!==null&&xm(Du,e),Ou!==null&&xm(Ou,e),Nu!==null&&xm(Nu,e),Py.forEach(t),Ry.forEach(t),n=0;n<uu.length;n++)r=uu[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<uu.length&&(n=uu[0],n.blockedOn===null);)qH(n),n.blockedOn===null&&uu.shift()}var tp=Pl.ReactCurrentBatchConfig,B2=!0;function Fde(e,t,n,r){var i=dt,o=tp.transition;tp.transition=null;try{dt=1,QM(e,t,n,r)}finally{dt=i,tp.transition=o}}function Pde(e,t,n,r){var i=dt,o=tp.transition;tp.transition=null;try{dt=4,QM(e,t,n,r)}finally{dt=i,tp.transition=o}}function QM(e,t,n,r){if(B2){var i=zA(e,t,n,r);if(i===null)VE(e,t,r,j2,n),Y9(e,r);else if(Tde(i,e,t,n,r))r.stopPropagation();else if(Y9(e,r),t&4&&-1<Ade.indexOf(e)){for(;i!==null;){var o=V1(i);if(o!==null&&UH(o),o=zA(e,t,n,r),o===null&&VE(e,t,r,j2,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else VE(e,t,r,null,n)}}var j2=null;function zA(e,t,n,r){if(j2=null,e=GM(r),e=mf(e),e!==null)if(t=Ed(e),t===null)e=null;else if(n=t.tag,n===13){if(e=DH(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return j2=e,null}function GH(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bde()){case YM:return 1;case LH:return 4;case L2:case xde:return 16;case zH:return 536870912;default:return 16}default:return 16}}var xu=null,ZM=null,Ix=null;function YH(){if(Ix)return Ix;var e,t=ZM,n=t.length,r,i="value"in xu?xu.value:xu.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return Ix=i.slice(e,1<r?1-r:void 0)}function Lx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mb(){return!0}function K9(){return!1}function no(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?mb:K9,this.isPropagationStopped=K9,this}return Vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mb)},persist:function(){},isPersistent:mb}),t}var Lg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JM=no(Lg),U1=Vt({},Lg,{view:0,detail:0}),Rde=no(U1),DE,OE,wm,Ak=Vt({},U1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eF,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wm&&(wm&&e.type==="mousemove"?(DE=e.screenX-wm.screenX,OE=e.screenY-wm.screenY):OE=DE=0,wm=e),DE)},movementY:function(e){return"movementY"in e?e.movementY:OE}}),Q9=no(Ak),Dde=Vt({},Ak,{dataTransfer:0}),Ode=no(Dde),Nde=Vt({},U1,{relatedTarget:0}),NE=no(Nde),Ide=Vt({},Lg,{animationName:0,elapsedTime:0,pseudoElement:0}),Lde=no(Ide),zde=Vt({},Lg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bde=no(zde),jde=Vt({},Lg,{data:0}),Z9=no(jde),Ude={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vde={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wde={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hde(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wde[e])?!!t[e]:!1}function eF(){return Hde}var qde=Vt({},U1,{key:function(e){if(e.key){var t=Ude[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Lx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vde[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eF,charCode:function(e){return e.type==="keypress"?Lx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Lx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gde=no(qde),Yde=Vt({},Ak,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J9=no(Yde),Xde=Vt({},U1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eF}),Kde=no(Xde),Qde=Vt({},Lg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zde=no(Qde),Jde=Vt({},Ak,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ehe=no(Jde),the=[9,13,27,32],tF=xl&&"CompositionEvent"in window,W0=null;xl&&"documentMode"in document&&(W0=document.documentMode);var nhe=xl&&"TextEvent"in window&&!W0,XH=xl&&(!tF||W0&&8<W0&&11>=W0),eN=" ",tN=!1;function KH(e,t){switch(e){case"keyup":return the.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QH(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ch=!1;function rhe(e,t){switch(e){case"compositionend":return QH(t);case"keypress":return t.which!==32?null:(tN=!0,eN);case"textInput":return e=t.data,e===eN&&tN?null:e;default:return null}}function ihe(e,t){if(Ch)return e==="compositionend"||!tF&&KH(e,t)?(e=YH(),Ix=ZM=xu=null,Ch=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return XH&&t.locale!=="ko"?null:t.data;default:return null}}var ohe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ohe[e.type]:t==="textarea"}function ZH(e,t,n,r){TH(r),t=U2(t,"onChange"),0<t.length&&(n=new JM("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var H0=null,Oy=null;function she(e){uq(e,0)}function Tk(e){var t=$h(e);if(SH(t))return e}function ahe(e,t){if(e==="change")return t}var JH=!1;if(xl){var IE;if(xl){var LE="oninput"in document;if(!LE){var rN=document.createElement("div");rN.setAttribute("oninput","return;"),LE=typeof rN.oninput=="function"}IE=LE}else IE=!1;JH=IE&&(!document.documentMode||9<document.documentMode)}function iN(){H0&&(H0.detachEvent("onpropertychange",eq),Oy=H0=null)}function eq(e){if(e.propertyName==="value"&&Tk(Oy)){var t=[];ZH(t,Oy,e,GM(e)),RH(she,t)}}function lhe(e,t,n){e==="focusin"?(iN(),H0=t,Oy=n,H0.attachEvent("onpropertychange",eq)):e==="focusout"&&iN()}function uhe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tk(Oy)}function che(e,t){if(e==="click")return Tk(t)}function fhe(e,t){if(e==="input"||e==="change")return Tk(t)}function dhe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ms=typeof Object.is=="function"?Object.is:dhe;function Ny(e,t){if(ms(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wA.call(t,i)||!ms(e[i],t[i]))return!1}return!0}function oN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sN(e,t){var n=oN(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oN(n)}}function tq(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tq(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nq(){for(var e=window,t=O2();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=O2(e.document)}return t}function nF(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hhe(e){var t=nq(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&tq(n.ownerDocument.documentElement,n)){if(r!==null&&nF(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=sN(n,o);var s=sN(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var phe=xl&&"documentMode"in document&&11>=document.documentMode,_h=null,BA=null,q0=null,jA=!1;function aN(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jA||_h==null||_h!==O2(r)||(r=_h,"selectionStart"in r&&nF(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),q0&&Ny(q0,r)||(q0=r,r=U2(BA,"onSelect"),0<r.length&&(t=new JM("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=_h)))}function yb(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Eh={animationend:yb("Animation","AnimationEnd"),animationiteration:yb("Animation","AnimationIteration"),animationstart:yb("Animation","AnimationStart"),transitionend:yb("Transition","TransitionEnd")},zE={},rq={};xl&&(rq=document.createElement("div").style,"AnimationEvent"in window||(delete Eh.animationend.animation,delete Eh.animationiteration.animation,delete Eh.animationstart.animation),"TransitionEvent"in window||delete Eh.transitionend.transition);function Mk(e){if(zE[e])return zE[e];if(!Eh[e])return e;var t=Eh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in rq)return zE[e]=t[n];return e}var iq=Mk("animationend"),oq=Mk("animationiteration"),sq=Mk("animationstart"),aq=Mk("transitionend"),lq=new Map,lN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mc(e,t){lq.set(e,t),_d(t,[e])}for(var BE=0;BE<lN.length;BE++){var jE=lN[BE],ghe=jE.toLowerCase(),mhe=jE[0].toUpperCase()+jE.slice(1);mc(ghe,"on"+mhe)}mc(iq,"onAnimationEnd");mc(oq,"onAnimationIteration");mc(sq,"onAnimationStart");mc("dblclick","onDoubleClick");mc("focusin","onFocus");mc("focusout","onBlur");mc(aq,"onTransitionEnd");Op("onMouseEnter",["mouseout","mouseover"]);Op("onMouseLeave",["mouseout","mouseover"]);Op("onPointerEnter",["pointerout","pointerover"]);Op("onPointerLeave",["pointerout","pointerover"]);_d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_d("onBeforeInput",["compositionend","keypress","textInput","paste"]);_d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var l0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yhe=new Set("cancel close invalid load scroll toggle".split(" ").concat(l0));function uN(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,gde(r,t,void 0,e),e.currentTarget=null}function uq(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;uN(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;uN(i,a,u),o=l}}}if(I2)throw e=NA,I2=!1,NA=null,e}function _t(e,t){var n=t[qA];n===void 0&&(n=t[qA]=new Set);var r=e+"__bubble";n.has(r)||(cq(t,e,2,!1),n.add(r))}function UE(e,t,n){var r=0;t&&(r|=4),cq(n,e,r,t)}var vb="_reactListening"+Math.random().toString(36).slice(2);function Iy(e){if(!e[vb]){e[vb]=!0,yH.forEach(function(n){n!=="selectionchange"&&(yhe.has(n)||UE(n,!1,e),UE(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vb]||(t[vb]=!0,UE("selectionchange",!1,t))}}function cq(e,t,n,r){switch(GH(t)){case 1:var i=Fde;break;case 4:i=Pde;break;default:i=QM}n=i.bind(null,t,n,e),i=void 0,!OA||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function VE(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=mf(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}RH(function(){var u=o,c=GM(n),f=[];e:{var d=lq.get(e);if(d!==void 0){var h=JM,p=e;switch(e){case"keypress":if(Lx(n)===0)break e;case"keydown":case"keyup":h=Gde;break;case"focusin":p="focus",h=NE;break;case"focusout":p="blur",h=NE;break;case"beforeblur":case"afterblur":h=NE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Q9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Ode;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Kde;break;case iq:case oq:case sq:h=Lde;break;case aq:h=Zde;break;case"scroll":h=Rde;break;case"wheel":h=ehe;break;case"copy":case"cut":case"paste":h=Bde;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=J9}var g=(t&4)!==0,m=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=Fy(v,y),x!=null&&g.push(Ly(v,x,b)))),m)break;v=v.return}0<g.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==RA&&(p=n.relatedTarget||n.fromElement)&&(mf(p)||p[wl]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?mf(p):null,p!==null&&(m=Ed(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(g=Q9,x="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=J9,x="onPointerLeave",y="onPointerEnter",v="pointer"),m=h==null?d:$h(h),b=p==null?d:$h(p),d=new g(x,v+"leave",h,n,c),d.target=m,d.relatedTarget=b,x=null,mf(c)===u&&(g=new g(y,v+"enter",p,n,c),g.target=b,g.relatedTarget=m,x=g),m=x,h&&p)t:{for(g=h,y=p,v=0,b=g;b;b=Jd(b))v++;for(b=0,x=y;x;x=Jd(x))b++;for(;0<v-b;)g=Jd(g),v--;for(;0<b-v;)y=Jd(y),b--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Jd(g),y=Jd(y)}g=null}else g=null;h!==null&&cN(f,d,h,g,!1),p!==null&&m!==null&&cN(f,m,p,g,!0)}}e:{if(d=u?$h(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=ahe;else if(nN(d))if(JH)w=fhe;else{w=uhe;var k=lhe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=che);if(w&&(w=w(e,u))){ZH(f,w,n,c);break e}k&&k(e,d,u),e==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&AA(d,"number",d.value)}switch(k=u?$h(u):window,e){case"focusin":(nN(k)||k.contentEditable==="true")&&(_h=k,BA=u,q0=null);break;case"focusout":q0=BA=_h=null;break;case"mousedown":jA=!0;break;case"contextmenu":case"mouseup":case"dragend":jA=!1,aN(f,n,c);break;case"selectionchange":if(phe)break;case"keydown":case"keyup":aN(f,n,c)}var S;if(tF)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ch?KH(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(XH&&n.locale!=="ko"&&(Ch||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ch&&(S=YH()):(xu=c,ZM="value"in xu?xu.value:xu.textContent,Ch=!0)),k=U2(u,C),0<k.length&&(C=new Z9(C,e,null,n,c),f.push({event:C,listeners:k}),S?C.data=S:(S=QH(n),S!==null&&(C.data=S)))),(S=nhe?rhe(e,n):ihe(e,n))&&(u=U2(u,"onBeforeInput"),0<u.length&&(c=new Z9("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=S))}uq(f,t)})}function Ly(e,t,n){return{instance:e,listener:t,currentTarget:n}}function U2(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Fy(e,n),o!=null&&r.unshift(Ly(e,o,i)),o=Fy(e,t),o!=null&&r.push(Ly(e,o,i))),e=e.return}return r}function Jd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cN(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Fy(n,o),l!=null&&s.unshift(Ly(n,l,a))):i||(l=Fy(n,o),l!=null&&s.push(Ly(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var vhe=/\r\n?/g,bhe=/\u0000|\uFFFD/g;function fN(e){return(typeof e=="string"?e:""+e).replace(vhe,`
`).replace(bhe,"")}function bb(e,t,n){if(t=fN(t),fN(e)!==t&&n)throw Error(ee(425))}function V2(){}var UA=null,VA=null;function WA(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var HA=typeof setTimeout=="function"?setTimeout:void 0,xhe=typeof clearTimeout=="function"?clearTimeout:void 0,dN=typeof Promise=="function"?Promise:void 0,whe=typeof queueMicrotask=="function"?queueMicrotask:typeof dN<"u"?function(e){return dN.resolve(null).then(e).catch(She)}:HA;function She(e){setTimeout(function(){throw e})}function WE(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Dy(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Dy(t)}function Iu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var zg=Math.random().toString(36).slice(2),Zs="__reactFiber$"+zg,zy="__reactProps$"+zg,wl="__reactContainer$"+zg,qA="__reactEvents$"+zg,khe="__reactListeners$"+zg,Che="__reactHandles$"+zg;function mf(e){var t=e[Zs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wl]||n[Zs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hN(e);e!==null;){if(n=e[Zs])return n;e=hN(e)}return t}e=n,n=e.parentNode}return null}function V1(e){return e=e[Zs]||e[wl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $h(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function Fk(e){return e[zy]||null}var GA=[],Ah=-1;function yc(e){return{current:e}}function Tt(e){0>Ah||(e.current=GA[Ah],GA[Ah]=null,Ah--)}function wt(e,t){Ah++,GA[Ah]=e.current,e.current=t}var Ku={},kr=yc(Ku),fi=yc(!1),Xf=Ku;function Np(e,t){var n=e.type.contextTypes;if(!n)return Ku;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function di(e){return e=e.childContextTypes,e!=null}function W2(){Tt(fi),Tt(kr)}function pN(e,t,n){if(kr.current!==Ku)throw Error(ee(168));wt(kr,t),wt(fi,n)}function fq(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ee(108,lde(e)||"Unknown",i));return Vt({},n,r)}function H2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ku,Xf=kr.current,wt(kr,e),wt(fi,fi.current),!0}function gN(e,t,n){var r=e.stateNode;if(!r)throw Error(ee(169));n?(e=fq(e,t,Xf),r.__reactInternalMemoizedMergedChildContext=e,Tt(fi),Tt(kr),wt(kr,e)):Tt(fi),wt(fi,n)}var qa=null,Pk=!1,HE=!1;function dq(e){qa===null?qa=[e]:qa.push(e)}function _he(e){Pk=!0,dq(e)}function vc(){if(!HE&&qa!==null){HE=!0;var e=0,t=dt;try{var n=qa;for(dt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qa=null,Pk=!1}catch(i){throw qa!==null&&(qa=qa.slice(e+1)),IH(YM,vc),i}finally{dt=t,HE=!1}}return null}var Th=[],Mh=0,q2=null,G2=0,go=[],mo=0,Kf=null,Ja=1,el="";function Qc(e,t){Th[Mh++]=G2,Th[Mh++]=q2,q2=e,G2=t}function hq(e,t,n){go[mo++]=Ja,go[mo++]=el,go[mo++]=Kf,Kf=e;var r=Ja;e=el;var i=32-ds(r)-1;r&=~(1<<i),n+=1;var o=32-ds(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ja=1<<32-ds(t)+i|n<<i|r,el=o+e}else Ja=1<<o|n<<i|r,el=e}function rF(e){e.return!==null&&(Qc(e,1),hq(e,1,0))}function iF(e){for(;e===q2;)q2=Th[--Mh],Th[Mh]=null,G2=Th[--Mh],Th[Mh]=null;for(;e===Kf;)Kf=go[--mo],go[mo]=null,el=go[--mo],go[mo]=null,Ja=go[--mo],go[mo]=null}var ji=null,Di=null,Dt=!1,Jo=null;function pq(e,t){var n=bo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function mN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ji=e,Di=Iu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ji=e,Di=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Kf!==null?{id:Ja,overflow:el}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ji=e,Di=null,!0):!1;default:return!1}}function YA(e){return(e.mode&1)!==0&&(e.flags&128)===0}function XA(e){if(Dt){var t=Di;if(t){var n=t;if(!mN(e,t)){if(YA(e))throw Error(ee(418));t=Iu(n.nextSibling);var r=ji;t&&mN(e,t)?pq(r,n):(e.flags=e.flags&-4097|2,Dt=!1,ji=e)}}else{if(YA(e))throw Error(ee(418));e.flags=e.flags&-4097|2,Dt=!1,ji=e}}}function yN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ji=e}function xb(e){if(e!==ji)return!1;if(!Dt)return yN(e),Dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!WA(e.type,e.memoizedProps)),t&&(t=Di)){if(YA(e))throw gq(),Error(ee(418));for(;t;)pq(e,t),t=Iu(t.nextSibling)}if(yN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Di=Iu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Di=null}}else Di=ji?Iu(e.stateNode.nextSibling):null;return!0}function gq(){for(var e=Di;e;)e=Iu(e.nextSibling)}function Ip(){Di=ji=null,Dt=!1}function oF(e){Jo===null?Jo=[e]:Jo.push(e)}var Ehe=Pl.ReactCurrentBatchConfig;function Sm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,e))}return e}function wb(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vN(e){var t=e._init;return t(e._payload)}function mq(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=ju(y,v),y.index=0,y.sibling=null,y}function o(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,x){return v===null||v.tag!==6?(v=ZE(b,y.mode,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function l(y,v,b,x){var w=b.type;return w===kh?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===eu&&vN(w)===v.type)?(x=i(v,b.props),x.ref=Sm(y,v,b),x.return=y,x):(x=Hx(b.type,b.key,b.props,null,y.mode,x),x.ref=Sm(y,v,b),x.return=y,x)}function u(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=JE(b,y.mode,x),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,w){return v===null||v.tag!==7?(v=Rf(b,y.mode,x,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ZE(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case cb:return b=Hx(v.type,v.key,v.props,null,y.mode,b),b.ref=Sm(y,null,v),b.return=y,b;case Sh:return v=JE(v,y.mode,b),v.return=y,v;case eu:var x=v._init;return f(y,x(v._payload),b)}if(s0(v)||ym(v))return v=Rf(v,y.mode,b,null),v.return=y,v;wb(y,v)}return null}function d(y,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case cb:return b.key===w?l(y,v,b,x):null;case Sh:return b.key===w?u(y,v,b,x):null;case eu:return w=b._init,d(y,v,w(b._payload),x)}if(s0(b)||ym(b))return w!==null?null:c(y,v,b,x,null);wb(y,b)}return null}function h(y,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case cb:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,w);case Sh:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,w);case eu:var k=x._init;return h(y,v,b,k(x._payload),w)}if(s0(x)||ym(x))return y=y.get(b)||null,c(v,y,x,w,null);wb(v,x)}return null}function p(y,v,b,x){for(var w=null,k=null,S=v,C=v=0,_=null;S!==null&&C<b.length;C++){S.index>C?(_=S,S=null):_=S.sibling;var $=d(y,S,b[C],x);if($===null){S===null&&(S=_);break}e&&S&&$.alternate===null&&t(y,S),v=o($,v,C),k===null?w=$:k.sibling=$,k=$,S=_}if(C===b.length)return n(y,S),Dt&&Qc(y,C),w;if(S===null){for(;C<b.length;C++)S=f(y,b[C],x),S!==null&&(v=o(S,v,C),k===null?w=S:k.sibling=S,k=S);return Dt&&Qc(y,C),w}for(S=r(y,S);C<b.length;C++)_=h(S,y,C,b[C],x),_!==null&&(e&&_.alternate!==null&&S.delete(_.key===null?C:_.key),v=o(_,v,C),k===null?w=_:k.sibling=_,k=_);return e&&S.forEach(function(A){return t(y,A)}),Dt&&Qc(y,C),w}function g(y,v,b,x){var w=ym(b);if(typeof w!="function")throw Error(ee(150));if(b=w.call(b),b==null)throw Error(ee(151));for(var k=w=null,S=v,C=v=0,_=null,$=b.next();S!==null&&!$.done;C++,$=b.next()){S.index>C?(_=S,S=null):_=S.sibling;var A=d(y,S,$.value,x);if(A===null){S===null&&(S=_);break}e&&S&&A.alternate===null&&t(y,S),v=o(A,v,C),k===null?w=A:k.sibling=A,k=A,S=_}if($.done)return n(y,S),Dt&&Qc(y,C),w;if(S===null){for(;!$.done;C++,$=b.next())$=f(y,$.value,x),$!==null&&(v=o($,v,C),k===null?w=$:k.sibling=$,k=$);return Dt&&Qc(y,C),w}for(S=r(y,S);!$.done;C++,$=b.next())$=h(S,y,C,$.value,x),$!==null&&(e&&$.alternate!==null&&S.delete($.key===null?C:$.key),v=o($,v,C),k===null?w=$:k.sibling=$,k=$);return e&&S.forEach(function(N){return t(y,N)}),Dt&&Qc(y,C),w}function m(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===kh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case cb:e:{for(var w=b.key,k=v;k!==null;){if(k.key===w){if(w=b.type,w===kh){if(k.tag===7){n(y,k.sibling),v=i(k,b.props.children),v.return=y,y=v;break e}}else if(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===eu&&vN(w)===k.type){n(y,k.sibling),v=i(k,b.props),v.ref=Sm(y,k,b),v.return=y,y=v;break e}n(y,k);break}else t(y,k);k=k.sibling}b.type===kh?(v=Rf(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=Hx(b.type,b.key,b.props,null,y.mode,x),x.ref=Sm(y,v,b),x.return=y,y=x)}return s(y);case Sh:e:{for(k=b.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=JE(b,y.mode,x),v.return=y,y=v}return s(y);case eu:return k=b._init,m(y,v,k(b._payload),x)}if(s0(b))return p(y,v,b,x);if(ym(b))return g(y,v,b,x);wb(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=ZE(b,y.mode,x),v.return=y,y=v),s(y)):n(y,v)}return m}var Lp=mq(!0),yq=mq(!1),Y2=yc(null),X2=null,Fh=null,sF=null;function aF(){sF=Fh=X2=null}function lF(e){var t=Y2.current;Tt(Y2),e._currentValue=t}function KA(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function np(e,t){X2=e,sF=Fh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ui=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(sF!==e)if(e={context:e,memoizedValue:t,next:null},Fh===null){if(X2===null)throw Error(ee(308));Fh=e,X2.dependencies={lanes:0,firstContext:e}}else Fh=Fh.next=e;return t}var yf=null;function uF(e){yf===null?yf=[e]:yf.push(e)}function vq(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,uF(t)):(n.next=i.next,i.next=n),t.interleaved=n,Sl(e,r)}function Sl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var tu=!1;function cF(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bq(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ll(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lu(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ye&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Sl(e,n)}return i=r.interleaved,i===null?(t.next=t,uF(r)):(t.next=i.next,i.next=t),r.interleaved=t,Sl(e,n)}function zx(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,XM(e,n)}}function bN(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function K2(e,t,n,r){var i=e.updateQueue;tu=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Vt({},f,d);break e;case 2:tu=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Zf|=s,e.lanes=s,e.memoizedState=f}}function xN(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var W1={},la=yc(W1),By=yc(W1),jy=yc(W1);function vf(e){if(e===W1)throw Error(ee(174));return e}function fF(e,t){switch(wt(jy,t),wt(By,e),wt(la,W1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:MA(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=MA(t,e)}Tt(la),wt(la,t)}function zp(){Tt(la),Tt(By),Tt(jy)}function xq(e){vf(jy.current);var t=vf(la.current),n=MA(t,e.type);t!==n&&(wt(By,e),wt(la,n))}function dF(e){By.current===e&&(Tt(la),Tt(By))}var zt=yc(0);function Q2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qE=[];function hF(){for(var e=0;e<qE.length;e++)qE[e]._workInProgressVersionPrimary=null;qE.length=0}var Bx=Pl.ReactCurrentDispatcher,GE=Pl.ReactCurrentBatchConfig,Qf=0,Ut=null,gn=null,$n=null,Z2=!1,G0=!1,Uy=0,$he=0;function ir(){throw Error(ee(321))}function pF(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ms(e[n],t[n]))return!1;return!0}function gF(e,t,n,r,i,o){if(Qf=o,Ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Bx.current=e===null||e.memoizedState===null?Fhe:Phe,e=n(r,i),G0){o=0;do{if(G0=!1,Uy=0,25<=o)throw Error(ee(301));o+=1,$n=gn=null,t.updateQueue=null,Bx.current=Rhe,e=n(r,i)}while(G0)}if(Bx.current=J2,t=gn!==null&&gn.next!==null,Qf=0,$n=gn=Ut=null,Z2=!1,t)throw Error(ee(300));return e}function mF(){var e=Uy!==0;return Uy=0,e}function js(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?Ut.memoizedState=$n=e:$n=$n.next=e,$n}function To(){if(gn===null){var e=Ut.alternate;e=e!==null?e.memoizedState:null}else e=gn.next;var t=$n===null?Ut.memoizedState:$n.next;if(t!==null)$n=t,gn=e;else{if(e===null)throw Error(ee(310));gn=e,e={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},$n===null?Ut.memoizedState=$n=e:$n=$n.next=e}return $n}function Vy(e,t){return typeof t=="function"?t(e):t}function YE(e){var t=To(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=gn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Qf&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,Ut.lanes|=c,Zf|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,ms(r,t.memoizedState)||(ui=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Ut.lanes|=o,Zf|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function XE(e){var t=To(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);ms(o,t.memoizedState)||(ui=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function wq(){}function Sq(e,t){var n=Ut,r=To(),i=t(),o=!ms(r.memoizedState,i);if(o&&(r.memoizedState=i,ui=!0),r=r.queue,yF(_q.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||$n!==null&&$n.memoizedState.tag&1){if(n.flags|=2048,Wy(9,Cq.bind(null,n,r,i,t),void 0,null),Dn===null)throw Error(ee(349));Qf&30||kq(n,t,i)}return i}function kq(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Cq(e,t,n,r){t.value=n,t.getSnapshot=r,Eq(t)&&$q(e)}function _q(e,t,n){return n(function(){Eq(t)&&$q(e)})}function Eq(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ms(e,n)}catch{return!0}}function $q(e){var t=Sl(e,1);t!==null&&hs(t,e,1,-1)}function wN(e){var t=js();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vy,lastRenderedState:e},t.queue=e,e=e.dispatch=Mhe.bind(null,Ut,e),[t.memoizedState,e]}function Wy(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ut.updateQueue,t===null?(t={lastEffect:null,stores:null},Ut.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Aq(){return To().memoizedState}function jx(e,t,n,r){var i=js();Ut.flags|=e,i.memoizedState=Wy(1|t,n,void 0,r===void 0?null:r)}function Rk(e,t,n,r){var i=To();r=r===void 0?null:r;var o=void 0;if(gn!==null){var s=gn.memoizedState;if(o=s.destroy,r!==null&&pF(r,s.deps)){i.memoizedState=Wy(t,n,o,r);return}}Ut.flags|=e,i.memoizedState=Wy(1|t,n,o,r)}function SN(e,t){return jx(8390656,8,e,t)}function yF(e,t){return Rk(2048,8,e,t)}function Tq(e,t){return Rk(4,2,e,t)}function Mq(e,t){return Rk(4,4,e,t)}function Fq(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pq(e,t,n){return n=n!=null?n.concat([e]):null,Rk(4,4,Fq.bind(null,t,e),n)}function vF(){}function Rq(e,t){var n=To();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pF(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Dq(e,t){var n=To();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&pF(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Oq(e,t,n){return Qf&21?(ms(n,t)||(n=BH(),Ut.lanes|=n,Zf|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ui=!0),e.memoizedState=n)}function Ahe(e,t){var n=dt;dt=n!==0&&4>n?n:4,e(!0);var r=GE.transition;GE.transition={};try{e(!1),t()}finally{dt=n,GE.transition=r}}function Nq(){return To().memoizedState}function The(e,t,n){var r=Bu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Iq(e))Lq(t,n);else if(n=vq(e,t,n,r),n!==null){var i=Wr();hs(n,e,r,i),zq(n,t,r)}}function Mhe(e,t,n){var r=Bu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Iq(e))Lq(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ms(a,s)){var l=t.interleaved;l===null?(i.next=i,uF(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=vq(e,t,i,r),n!==null&&(i=Wr(),hs(n,e,r,i),zq(n,t,r))}}function Iq(e){var t=e.alternate;return e===Ut||t!==null&&t===Ut}function Lq(e,t){G0=Z2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zq(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,XM(e,n)}}var J2={readContext:Ao,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},Fhe={readContext:Ao,useCallback:function(e,t){return js().memoizedState=[e,t===void 0?null:t],e},useContext:Ao,useEffect:SN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,jx(4194308,4,Fq.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jx(4194308,4,e,t)},useInsertionEffect:function(e,t){return jx(4,2,e,t)},useMemo:function(e,t){var n=js();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=js();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=The.bind(null,Ut,e),[r.memoizedState,e]},useRef:function(e){var t=js();return e={current:e},t.memoizedState=e},useState:wN,useDebugValue:vF,useDeferredValue:function(e){return js().memoizedState=e},useTransition:function(){var e=wN(!1),t=e[0];return e=Ahe.bind(null,e[1]),js().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ut,i=js();if(Dt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=t(),Dn===null)throw Error(ee(349));Qf&30||kq(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,SN(_q.bind(null,r,o,e),[e]),r.flags|=2048,Wy(9,Cq.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=js(),t=Dn.identifierPrefix;if(Dt){var n=el,r=Ja;n=(r&~(1<<32-ds(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Uy++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$he++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Phe={readContext:Ao,useCallback:Rq,useContext:Ao,useEffect:yF,useImperativeHandle:Pq,useInsertionEffect:Tq,useLayoutEffect:Mq,useMemo:Dq,useReducer:YE,useRef:Aq,useState:function(){return YE(Vy)},useDebugValue:vF,useDeferredValue:function(e){var t=To();return Oq(t,gn.memoizedState,e)},useTransition:function(){var e=YE(Vy)[0],t=To().memoizedState;return[e,t]},useMutableSource:wq,useSyncExternalStore:Sq,useId:Nq,unstable_isNewReconciler:!1},Rhe={readContext:Ao,useCallback:Rq,useContext:Ao,useEffect:yF,useImperativeHandle:Pq,useInsertionEffect:Tq,useLayoutEffect:Mq,useMemo:Dq,useReducer:XE,useRef:Aq,useState:function(){return XE(Vy)},useDebugValue:vF,useDeferredValue:function(e){var t=To();return gn===null?t.memoizedState=e:Oq(t,gn.memoizedState,e)},useTransition:function(){var e=XE(Vy)[0],t=To().memoizedState;return[e,t]},useMutableSource:wq,useSyncExternalStore:Sq,useId:Nq,unstable_isNewReconciler:!1};function Go(e,t){if(e&&e.defaultProps){t=Vt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function QA(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Vt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Dk={isMounted:function(e){return(e=e._reactInternals)?Ed(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Wr(),i=Bu(e),o=ll(r,i);o.payload=t,n!=null&&(o.callback=n),t=Lu(e,o,i),t!==null&&(hs(t,e,i,r),zx(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Wr(),i=Bu(e),o=ll(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Lu(e,o,i),t!==null&&(hs(t,e,i,r),zx(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wr(),r=Bu(e),i=ll(n,r);i.tag=2,t!=null&&(i.callback=t),t=Lu(e,i,r),t!==null&&(hs(t,e,r,n),zx(t,e,r))}};function kN(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Ny(n,r)||!Ny(i,o):!0}function Bq(e,t,n){var r=!1,i=Ku,o=t.contextType;return typeof o=="object"&&o!==null?o=Ao(o):(i=di(t)?Xf:kr.current,r=t.contextTypes,o=(r=r!=null)?Np(e,i):Ku),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Dk,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function CN(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Dk.enqueueReplaceState(t,t.state,null)}function ZA(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},cF(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Ao(o):(o=di(t)?Xf:kr.current,i.context=Np(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(QA(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Dk.enqueueReplaceState(i,i.state,null),K2(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Bp(e,t){try{var n="",r=t;do n+=ade(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function KE(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function JA(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Dhe=typeof WeakMap=="function"?WeakMap:Map;function jq(e,t,n){n=ll(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){tw||(tw=!0,u3=r),JA(e,t)},n}function Uq(e,t,n){n=ll(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){JA(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){JA(e,t),typeof r!="function"&&(zu===null?zu=new Set([this]):zu.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function _N(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Dhe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Yhe.bind(null,e,t,n),t.then(e,e))}function EN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $N(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ll(-1,1),t.tag=2,Lu(n,t,1))),n.lanes|=1),e)}var Ohe=Pl.ReactCurrentOwner,ui=!1;function Dr(e,t,n,r){t.child=e===null?yq(t,null,n,r):Lp(t,e.child,n,r)}function AN(e,t,n,r,i){n=n.render;var o=t.ref;return np(t,i),r=gF(e,t,n,r,o,i),n=mF(),e!==null&&!ui?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,kl(e,t,i)):(Dt&&n&&rF(t),t.flags|=1,Dr(e,t,r,i),t.child)}function TN(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!EF(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Vq(e,t,o,r,i)):(e=Hx(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ny,n(s,r)&&e.ref===t.ref)return kl(e,t,i)}return t.flags|=1,e=ju(o,r),e.ref=t.ref,e.return=t,t.child=e}function Vq(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Ny(o,r)&&e.ref===t.ref)if(ui=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(ui=!0);else return t.lanes=e.lanes,kl(e,t,i)}return e3(e,t,n,r,i)}function Wq(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(Rh,Mi),Mi|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wt(Rh,Mi),Mi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,wt(Rh,Mi),Mi|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,wt(Rh,Mi),Mi|=r;return Dr(e,t,i,n),t.child}function Hq(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function e3(e,t,n,r,i){var o=di(n)?Xf:kr.current;return o=Np(t,o),np(t,i),n=gF(e,t,n,r,o,i),r=mF(),e!==null&&!ui?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,kl(e,t,i)):(Dt&&r&&rF(t),t.flags|=1,Dr(e,t,n,i),t.child)}function MN(e,t,n,r,i){if(di(n)){var o=!0;H2(t)}else o=!1;if(np(t,i),t.stateNode===null)Ux(e,t),Bq(t,n,r),ZA(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ao(u):(u=di(n)?Xf:kr.current,u=Np(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&CN(t,s,r,u),tu=!1;var d=t.memoizedState;s.state=d,K2(t,r,s,i),l=t.memoizedState,a!==r||d!==l||fi.current||tu?(typeof c=="function"&&(QA(t,n,c,r),l=t.memoizedState),(a=tu||kN(t,n,a,r,d,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,bq(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Go(t.type,a),s.props=u,f=t.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ao(l):(l=di(n)?Xf:kr.current,l=Np(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==l)&&CN(t,s,r,l),tu=!1,d=t.memoizedState,s.state=d,K2(t,r,s,i);var p=t.memoizedState;a!==f||d!==p||fi.current||tu?(typeof h=="function"&&(QA(t,n,h,r),p=t.memoizedState),(u=tu||kN(t,n,u,r,d,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return t3(e,t,n,r,o,i)}function t3(e,t,n,r,i,o){Hq(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&gN(t,n,!1),kl(e,t,o);r=t.stateNode,Ohe.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Lp(t,e.child,null,o),t.child=Lp(t,null,a,o)):Dr(e,t,a,o),t.memoizedState=r.state,i&&gN(t,n,!0),t.child}function qq(e){var t=e.stateNode;t.pendingContext?pN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pN(e,t.context,!1),fF(e,t.containerInfo)}function FN(e,t,n,r,i){return Ip(),oF(i),t.flags|=256,Dr(e,t,n,r),t.child}var n3={dehydrated:null,treeContext:null,retryLane:0};function r3(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gq(e,t,n){var r=t.pendingProps,i=zt.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),wt(zt,i&1),e===null)return XA(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Ik(s,r,0,null),e=Rf(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=r3(n),t.memoizedState=n3,e):bF(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Nhe(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ju(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ju(a,o):(o=Rf(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?r3(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=n3,r}return o=e.child,e=o.sibling,r=ju(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function bF(e,t){return t=Ik({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Sb(e,t,n,r){return r!==null&&oF(r),Lp(t,e.child,null,n),e=bF(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nhe(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=KE(Error(ee(422))),Sb(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ik({mode:"visible",children:r.children},i,0,null),o=Rf(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Lp(t,e.child,null,s),t.child.memoizedState=r3(s),t.memoizedState=n3,o);if(!(t.mode&1))return Sb(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ee(419)),r=KE(o,r,void 0),Sb(e,t,s,r)}if(a=(s&e.childLanes)!==0,ui||a){if(r=Dn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Sl(e,i),hs(r,e,i,-1))}return _F(),r=KE(Error(ee(421))),Sb(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Xhe.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Di=Iu(i.nextSibling),ji=t,Dt=!0,Jo=null,e!==null&&(go[mo++]=Ja,go[mo++]=el,go[mo++]=Kf,Ja=e.id,el=e.overflow,Kf=t),t=bF(t,r.children),t.flags|=4096,t)}function PN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),KA(e.return,t,n)}function QE(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Yq(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Dr(e,t,r.children,n),r=zt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&PN(e,n,t);else if(e.tag===19)PN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(wt(zt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Q2(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),QE(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Q2(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}QE(t,!0,n,null,o);break;case"together":QE(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ux(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zf|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,n=ju(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ju(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ihe(e,t,n){switch(t.tag){case 3:qq(t),Ip();break;case 5:xq(t);break;case 1:di(t.type)&&H2(t);break;case 4:fF(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;wt(Y2,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(wt(zt,zt.current&1),t.flags|=128,null):n&t.child.childLanes?Gq(e,t,n):(wt(zt,zt.current&1),e=kl(e,t,n),e!==null?e.sibling:null);wt(zt,zt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Yq(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wt(zt,zt.current),r)break;return null;case 22:case 23:return t.lanes=0,Wq(e,t,n)}return kl(e,t,n)}var Xq,i3,Kq,Qq;Xq=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};i3=function(){};Kq=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,vf(la.current);var o=null;switch(n){case"input":i=EA(e,i),r=EA(e,r),o=[];break;case"select":i=Vt({},i,{value:void 0}),r=Vt({},r,{value:void 0}),o=[];break;case"textarea":i=TA(e,i),r=TA(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=V2)}FA(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ty.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ty.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&_t("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Qq=function(e,t,n,r){n!==r&&(t.flags|=4)};function km(e,t){if(!Dt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function or(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Lhe(e,t,n){var r=t.pendingProps;switch(iF(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(t),null;case 1:return di(t.type)&&W2(),or(t),null;case 3:return r=t.stateNode,zp(),Tt(fi),Tt(kr),hF(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jo!==null&&(d3(Jo),Jo=null))),i3(e,t),or(t),null;case 5:dF(t);var i=vf(jy.current);if(n=t.type,e!==null&&t.stateNode!=null)Kq(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ee(166));return or(t),null}if(e=vf(la.current),xb(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Zs]=t,r[zy]=o,e=(t.mode&1)!==0,n){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(i=0;i<l0.length;i++)_t(l0[i],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":j9(r,o),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},_t("invalid",r);break;case"textarea":V9(r,o),_t("invalid",r)}FA(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&bb(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&bb(r.textContent,a,e),i=["children",""+a]):Ty.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&_t("scroll",r)}switch(n){case"input":fb(r),U9(r,o,!0);break;case"textarea":fb(r),W9(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=V2)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_H(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Zs]=t,e[zy]=r,Xq(e,t,!1,!1),t.stateNode=e;e:{switch(s=PA(n,r),n){case"dialog":_t("cancel",e),_t("close",e),i=r;break;case"iframe":case"object":case"embed":_t("load",e),i=r;break;case"video":case"audio":for(i=0;i<l0.length;i++)_t(l0[i],e);i=r;break;case"source":_t("error",e),i=r;break;case"img":case"image":case"link":_t("error",e),_t("load",e),i=r;break;case"details":_t("toggle",e),i=r;break;case"input":j9(e,r),i=EA(e,r),_t("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Vt({},r,{value:void 0}),_t("invalid",e);break;case"textarea":V9(e,r),i=TA(e,r),_t("invalid",e);break;default:i=r}FA(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?AH(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&EH(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&My(e,l):typeof l=="number"&&My(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ty.hasOwnProperty(o)?l!=null&&o==="onScroll"&&_t("scroll",e):l!=null&&VM(e,o,l,s))}switch(n){case"input":fb(e),U9(e,r,!1);break;case"textarea":fb(e),W9(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Xu(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Zh(e,!!r.multiple,o,!1):r.defaultValue!=null&&Zh(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=V2)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return or(t),null;case 6:if(e&&t.stateNode!=null)Qq(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ee(166));if(n=vf(jy.current),vf(la.current),xb(t)){if(r=t.stateNode,n=t.memoizedProps,r[Zs]=t,(o=r.nodeValue!==n)&&(e=ji,e!==null))switch(e.tag){case 3:bb(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bb(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zs]=t,t.stateNode=r}return or(t),null;case 13:if(Tt(zt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Dt&&Di!==null&&t.mode&1&&!(t.flags&128))gq(),Ip(),t.flags|=98560,o=!1;else if(o=xb(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ee(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[Zs]=t}else Ip(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;or(t),o=!1}else Jo!==null&&(d3(Jo),Jo=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||zt.current&1?vn===0&&(vn=3):_F())),t.updateQueue!==null&&(t.flags|=4),or(t),null);case 4:return zp(),i3(e,t),e===null&&Iy(t.stateNode.containerInfo),or(t),null;case 10:return lF(t.type._context),or(t),null;case 17:return di(t.type)&&W2(),or(t),null;case 19:if(Tt(zt),o=t.memoizedState,o===null)return or(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)km(o,!1);else{if(vn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Q2(e),s!==null){for(t.flags|=128,km(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return wt(zt,zt.current&1|2),t.child}e=e.sibling}o.tail!==null&&en()>jp&&(t.flags|=128,r=!0,km(o,!1),t.lanes=4194304)}else{if(!r)if(e=Q2(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),km(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Dt)return or(t),null}else 2*en()-o.renderingStartTime>jp&&n!==1073741824&&(t.flags|=128,r=!0,km(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=en(),t.sibling=null,n=zt.current,wt(zt,r?n&1|2:n&1),t):(or(t),null);case 22:case 23:return CF(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Mi&1073741824&&(or(t),t.subtreeFlags&6&&(t.flags|=8192)):or(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function zhe(e,t){switch(iF(t),t.tag){case 1:return di(t.type)&&W2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zp(),Tt(fi),Tt(kr),hF(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dF(t),null;case 13:if(Tt(zt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));Ip()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tt(zt),null;case 4:return zp(),null;case 10:return lF(t.type._context),null;case 22:case 23:return CF(),null;case 24:return null;default:return null}}var kb=!1,gr=!1,Bhe=typeof WeakSet=="function"?WeakSet:Set,de=null;function Ph(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xt(e,t,r)}else n.current=null}function o3(e,t,n){try{n()}catch(r){Xt(e,t,r)}}var RN=!1;function jhe(e,t){if(UA=B2,e=nq(),nF(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(VA={focusedElem:e,selectionRange:n},B2=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Go(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(x){Xt(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return p=RN,RN=!1,p}function Y0(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&o3(t,n,o)}i=i.next}while(i!==r)}}function Ok(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function s3(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Zq(e){var t=e.alternate;t!==null&&(e.alternate=null,Zq(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zs],delete t[zy],delete t[qA],delete t[khe],delete t[Che])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jq(e){return e.tag===5||e.tag===3||e.tag===4}function DN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jq(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function a3(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=V2));else if(r!==4&&(e=e.child,e!==null))for(a3(e,t,n),e=e.sibling;e!==null;)a3(e,t,n),e=e.sibling}function l3(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(l3(e,t,n),e=e.sibling;e!==null;)l3(e,t,n),e=e.sibling}var jn=null,Ko=!1;function Wl(e,t,n){for(n=n.child;n!==null;)eG(e,t,n),n=n.sibling}function eG(e,t,n){if(aa&&typeof aa.onCommitFiberUnmount=="function")try{aa.onCommitFiberUnmount($k,n)}catch{}switch(n.tag){case 5:gr||Ph(n,t);case 6:var r=jn,i=Ko;jn=null,Wl(e,t,n),jn=r,Ko=i,jn!==null&&(Ko?(e=jn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):jn.removeChild(n.stateNode));break;case 18:jn!==null&&(Ko?(e=jn,n=n.stateNode,e.nodeType===8?WE(e.parentNode,n):e.nodeType===1&&WE(e,n),Dy(e)):WE(jn,n.stateNode));break;case 4:r=jn,i=Ko,jn=n.stateNode.containerInfo,Ko=!0,Wl(e,t,n),jn=r,Ko=i;break;case 0:case 11:case 14:case 15:if(!gr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&o3(n,t,s),i=i.next}while(i!==r)}Wl(e,t,n);break;case 1:if(!gr&&(Ph(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xt(n,t,a)}Wl(e,t,n);break;case 21:Wl(e,t,n);break;case 22:n.mode&1?(gr=(r=gr)||n.memoizedState!==null,Wl(e,t,n),gr=r):Wl(e,t,n);break;default:Wl(e,t,n)}}function ON(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Bhe),t.forEach(function(r){var i=Khe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function jo(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:jn=a.stateNode,Ko=!1;break e;case 3:jn=a.stateNode.containerInfo,Ko=!0;break e;case 4:jn=a.stateNode.containerInfo,Ko=!0;break e}a=a.return}if(jn===null)throw Error(ee(160));eG(o,s,i),jn=null,Ko=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Xt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tG(t,e),t=t.sibling}function tG(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jo(t,e),Os(e),r&4){try{Y0(3,e,e.return),Ok(3,e)}catch(g){Xt(e,e.return,g)}try{Y0(5,e,e.return)}catch(g){Xt(e,e.return,g)}}break;case 1:jo(t,e),Os(e),r&512&&n!==null&&Ph(n,n.return);break;case 5:if(jo(t,e),Os(e),r&512&&n!==null&&Ph(n,n.return),e.flags&32){var i=e.stateNode;try{My(i,"")}catch(g){Xt(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&kH(i,o),PA(a,s);var u=PA(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?AH(i,f):c==="dangerouslySetInnerHTML"?EH(i,f):c==="children"?My(i,f):VM(i,c,f,u)}switch(a){case"input":$A(i,o);break;case"textarea":CH(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?Zh(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?Zh(i,!!o.multiple,o.defaultValue,!0):Zh(i,!!o.multiple,o.multiple?[]:"",!1))}i[zy]=o}catch(g){Xt(e,e.return,g)}}break;case 6:if(jo(t,e),Os(e),r&4){if(e.stateNode===null)throw Error(ee(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Xt(e,e.return,g)}}break;case 3:if(jo(t,e),Os(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dy(t.containerInfo)}catch(g){Xt(e,e.return,g)}break;case 4:jo(t,e),Os(e);break;case 13:jo(t,e),Os(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(SF=en())),r&4&&ON(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(gr=(u=gr)||c,jo(t,e),gr=u):jo(t,e),Os(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(de=e,c=e.child;c!==null;){for(f=de=c;de!==null;){switch(d=de,h=d.child,d.tag){case 0:case 11:case 14:case 15:Y0(4,d,d.return);break;case 1:Ph(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Xt(r,n,g)}}break;case 5:Ph(d,d.return);break;case 22:if(d.memoizedState!==null){IN(f);continue}}h!==null?(h.return=d,de=h):IN(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$H("display",s))}catch(g){Xt(e,e.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Xt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:jo(t,e),Os(e),r&4&&ON(e);break;case 21:break;default:jo(t,e),Os(e)}}function Os(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jq(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(My(i,""),r.flags&=-33);var o=DN(e);l3(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=DN(e);a3(e,a,s);break;default:throw Error(ee(161))}}catch(l){Xt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uhe(e,t,n){de=e,nG(e)}function nG(e,t,n){for(var r=(e.mode&1)!==0;de!==null;){var i=de,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||kb;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||gr;a=kb;var u=gr;if(kb=s,(gr=l)&&!u)for(de=i;de!==null;)s=de,l=s.child,s.tag===22&&s.memoizedState!==null?LN(i):l!==null?(l.return=s,de=l):LN(i);for(;o!==null;)de=o,nG(o),o=o.sibling;de=i,kb=a,gr=u}NN(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,de=o):NN(e)}}function NN(e){for(;de!==null;){var t=de;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gr||Ok(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Go(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&xN(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}xN(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Dy(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}gr||t.flags&512&&s3(t)}catch(d){Xt(t,t.return,d)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function IN(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function LN(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ok(4,t)}catch(l){Xt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Xt(t,i,l)}}var o=t.return;try{s3(t)}catch(l){Xt(t,o,l)}break;case 5:var s=t.return;try{s3(t)}catch(l){Xt(t,s,l)}}}catch(l){Xt(t,t.return,l)}if(t===e){de=null;break}var a=t.sibling;if(a!==null){a.return=t.return,de=a;break}de=t.return}}var Vhe=Math.ceil,ew=Pl.ReactCurrentDispatcher,xF=Pl.ReactCurrentOwner,_o=Pl.ReactCurrentBatchConfig,Ye=0,Dn=null,dn=null,Kn=0,Mi=0,Rh=yc(0),vn=0,Hy=null,Zf=0,Nk=0,wF=0,X0=null,oi=null,SF=0,jp=1/0,Wa=null,tw=!1,u3=null,zu=null,Cb=!1,wu=null,nw=0,K0=0,c3=null,Vx=-1,Wx=0;function Wr(){return Ye&6?en():Vx!==-1?Vx:Vx=en()}function Bu(e){return e.mode&1?Ye&2&&Kn!==0?Kn&-Kn:Ehe.transition!==null?(Wx===0&&(Wx=BH()),Wx):(e=dt,e!==0||(e=window.event,e=e===void 0?16:GH(e.type)),e):1}function hs(e,t,n,r){if(50<K0)throw K0=0,c3=null,Error(ee(185));j1(e,n,r),(!(Ye&2)||e!==Dn)&&(e===Dn&&(!(Ye&2)&&(Nk|=n),vn===4&&cu(e,Kn)),hi(e,r),n===1&&Ye===0&&!(t.mode&1)&&(jp=en()+500,Pk&&vc()))}function hi(e,t){var n=e.callbackNode;Ede(e,t);var r=z2(e,e===Dn?Kn:0);if(r===0)n!==null&&G9(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&G9(n),t===1)e.tag===0?_he(zN.bind(null,e)):dq(zN.bind(null,e)),whe(function(){!(Ye&6)&&vc()}),n=null;else{switch(jH(r)){case 1:n=YM;break;case 4:n=LH;break;case 16:n=L2;break;case 536870912:n=zH;break;default:n=L2}n=cG(n,rG.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rG(e,t){if(Vx=-1,Wx=0,Ye&6)throw Error(ee(327));var n=e.callbackNode;if(rp()&&e.callbackNode!==n)return null;var r=z2(e,e===Dn?Kn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=rw(e,r);else{t=r;var i=Ye;Ye|=2;var o=oG();(Dn!==e||Kn!==t)&&(Wa=null,jp=en()+500,Pf(e,t));do try{qhe();break}catch(a){iG(e,a)}while(!0);aF(),ew.current=o,Ye=i,dn!==null?t=0:(Dn=null,Kn=0,t=vn)}if(t!==0){if(t===2&&(i=IA(e),i!==0&&(r=i,t=f3(e,i))),t===1)throw n=Hy,Pf(e,0),cu(e,r),hi(e,en()),n;if(t===6)cu(e,r);else{if(i=e.current.alternate,!(r&30)&&!Whe(i)&&(t=rw(e,r),t===2&&(o=IA(e),o!==0&&(r=o,t=f3(e,o))),t===1))throw n=Hy,Pf(e,0),cu(e,r),hi(e,en()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ee(345));case 2:Zc(e,oi,Wa);break;case 3:if(cu(e,r),(r&130023424)===r&&(t=SF+500-en(),10<t)){if(z2(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Wr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=HA(Zc.bind(null,e,oi,Wa),t);break}Zc(e,oi,Wa);break;case 4:if(cu(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ds(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=en()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vhe(r/1960))-r,10<r){e.timeoutHandle=HA(Zc.bind(null,e,oi,Wa),r);break}Zc(e,oi,Wa);break;case 5:Zc(e,oi,Wa);break;default:throw Error(ee(329))}}}return hi(e,en()),e.callbackNode===n?rG.bind(null,e):null}function f3(e,t){var n=X0;return e.current.memoizedState.isDehydrated&&(Pf(e,t).flags|=256),e=rw(e,t),e!==2&&(t=oi,oi=n,t!==null&&d3(t)),e}function d3(e){oi===null?oi=e:oi.push.apply(oi,e)}function Whe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ms(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cu(e,t){for(t&=~wF,t&=~Nk,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ds(t),r=1<<n;e[n]=-1,t&=~r}}function zN(e){if(Ye&6)throw Error(ee(327));rp();var t=z2(e,0);if(!(t&1))return hi(e,en()),null;var n=rw(e,t);if(e.tag!==0&&n===2){var r=IA(e);r!==0&&(t=r,n=f3(e,r))}if(n===1)throw n=Hy,Pf(e,0),cu(e,t),hi(e,en()),n;if(n===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zc(e,oi,Wa),hi(e,en()),null}function kF(e,t){var n=Ye;Ye|=1;try{return e(t)}finally{Ye=n,Ye===0&&(jp=en()+500,Pk&&vc())}}function Jf(e){wu!==null&&wu.tag===0&&!(Ye&6)&&rp();var t=Ye;Ye|=1;var n=_o.transition,r=dt;try{if(_o.transition=null,dt=1,e)return e()}finally{dt=r,_o.transition=n,Ye=t,!(Ye&6)&&vc()}}function CF(){Mi=Rh.current,Tt(Rh)}function Pf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,xhe(n)),dn!==null)for(n=dn.return;n!==null;){var r=n;switch(iF(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&W2();break;case 3:zp(),Tt(fi),Tt(kr),hF();break;case 5:dF(r);break;case 4:zp();break;case 13:Tt(zt);break;case 19:Tt(zt);break;case 10:lF(r.type._context);break;case 22:case 23:CF()}n=n.return}if(Dn=e,dn=e=ju(e.current,null),Kn=Mi=t,vn=0,Hy=null,wF=Nk=Zf=0,oi=X0=null,yf!==null){for(t=0;t<yf.length;t++)if(n=yf[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}yf=null}return e}function iG(e,t){do{var n=dn;try{if(aF(),Bx.current=J2,Z2){for(var r=Ut.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Z2=!1}if(Qf=0,$n=gn=Ut=null,G0=!1,Uy=0,xF.current=null,n===null||n.return===null){vn=1,Hy=t,dn=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=Kn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=EN(s);if(h!==null){h.flags&=-257,$N(h,s,a,o,t),h.mode&1&&_N(o,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}else{if(!(t&1)){_N(o,u,t),_F();break e}l=Error(ee(426))}}else if(Dt&&a.mode&1){var m=EN(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),$N(m,s,a,o,t),oF(Bp(l,a));break e}}o=l=Bp(l,a),vn!==4&&(vn=2),X0===null?X0=[o]:X0.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=jq(o,l,t);bN(o,y);break e;case 1:a=l;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zu===null||!zu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=Uq(o,a,t);bN(o,x);break e}}o=o.return}while(o!==null)}aG(n)}catch(w){t=w,dn===n&&n!==null&&(dn=n=n.return);continue}break}while(!0)}function oG(){var e=ew.current;return ew.current=J2,e===null?J2:e}function _F(){(vn===0||vn===3||vn===2)&&(vn=4),Dn===null||!(Zf&268435455)&&!(Nk&268435455)||cu(Dn,Kn)}function rw(e,t){var n=Ye;Ye|=2;var r=oG();(Dn!==e||Kn!==t)&&(Wa=null,Pf(e,t));do try{Hhe();break}catch(i){iG(e,i)}while(!0);if(aF(),Ye=n,ew.current=r,dn!==null)throw Error(ee(261));return Dn=null,Kn=0,vn}function Hhe(){for(;dn!==null;)sG(dn)}function qhe(){for(;dn!==null&&!yde();)sG(dn)}function sG(e){var t=uG(e.alternate,e,Mi);e.memoizedProps=e.pendingProps,t===null?aG(e):dn=t,xF.current=null}function aG(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=zhe(n,t),n!==null){n.flags&=32767,dn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vn=6,dn=null;return}}else if(n=Lhe(n,t,Mi),n!==null){dn=n;return}if(t=t.sibling,t!==null){dn=t;return}dn=t=e}while(t!==null);vn===0&&(vn=5)}function Zc(e,t,n){var r=dt,i=_o.transition;try{_o.transition=null,dt=1,Ghe(e,t,n,r)}finally{_o.transition=i,dt=r}return null}function Ghe(e,t,n,r){do rp();while(wu!==null);if(Ye&6)throw Error(ee(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if($de(e,o),e===Dn&&(dn=Dn=null,Kn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cb||(Cb=!0,cG(L2,function(){return rp(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=_o.transition,_o.transition=null;var s=dt;dt=1;var a=Ye;Ye|=4,xF.current=null,jhe(e,n),tG(n,e),hhe(VA),B2=!!UA,VA=UA=null,e.current=n,Uhe(n),vde(),Ye=a,dt=s,_o.transition=o}else e.current=n;if(Cb&&(Cb=!1,wu=e,nw=i),o=e.pendingLanes,o===0&&(zu=null),wde(n.stateNode),hi(e,en()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tw)throw tw=!1,e=u3,u3=null,e;return nw&1&&e.tag!==0&&rp(),o=e.pendingLanes,o&1?e===c3?K0++:(K0=0,c3=e):K0=0,vc(),null}function rp(){if(wu!==null){var e=jH(nw),t=_o.transition,n=dt;try{if(_o.transition=null,dt=16>e?16:e,wu===null)var r=!1;else{if(e=wu,wu=null,nw=0,Ye&6)throw Error(ee(331));var i=Ye;for(Ye|=4,de=e.current;de!==null;){var o=de,s=o.child;if(de.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(de=u;de!==null;){var c=de;switch(c.tag){case 0:case 11:case 15:Y0(8,c,o)}var f=c.child;if(f!==null)f.return=c,de=f;else for(;de!==null;){c=de;var d=c.sibling,h=c.return;if(Zq(c),c===u){de=null;break}if(d!==null){d.return=h,de=d;break}de=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}de=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,de=s;else e:for(;de!==null;){if(o=de,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Y0(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,de=y;break e}de=o.return}}var v=e.current;for(de=v;de!==null;){s=de;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,de=b;else e:for(s=v;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ok(9,a)}}catch(w){Xt(a,a.return,w)}if(a===s){de=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,de=x;break e}de=a.return}}if(Ye=i,vc(),aa&&typeof aa.onPostCommitFiberRoot=="function")try{aa.onPostCommitFiberRoot($k,e)}catch{}r=!0}return r}finally{dt=n,_o.transition=t}}return!1}function BN(e,t,n){t=Bp(n,t),t=jq(e,t,1),e=Lu(e,t,1),t=Wr(),e!==null&&(j1(e,1,t),hi(e,t))}function Xt(e,t,n){if(e.tag===3)BN(e,e,n);else for(;t!==null;){if(t.tag===3){BN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zu===null||!zu.has(r))){e=Bp(n,e),e=Uq(t,e,1),t=Lu(t,e,1),e=Wr(),t!==null&&(j1(t,1,e),hi(t,e));break}}t=t.return}}function Yhe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Wr(),e.pingedLanes|=e.suspendedLanes&n,Dn===e&&(Kn&n)===n&&(vn===4||vn===3&&(Kn&130023424)===Kn&&500>en()-SF?Pf(e,0):wF|=n),hi(e,t)}function lG(e,t){t===0&&(e.mode&1?(t=pb,pb<<=1,!(pb&130023424)&&(pb=4194304)):t=1);var n=Wr();e=Sl(e,t),e!==null&&(j1(e,t,n),hi(e,n))}function Xhe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lG(e,n)}function Khe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(t),lG(e,n)}var uG;uG=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||fi.current)ui=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ui=!1,Ihe(e,t,n);ui=!!(e.flags&131072)}else ui=!1,Dt&&t.flags&1048576&&hq(t,G2,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ux(e,t),e=t.pendingProps;var i=Np(t,kr.current);np(t,n),i=gF(null,t,r,e,i,n);var o=mF();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,di(r)?(o=!0,H2(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cF(t),i.updater=Dk,t.stateNode=i,i._reactInternals=t,ZA(t,r,e,n),t=t3(null,t,r,!0,o,n)):(t.tag=0,Dt&&o&&rF(t),Dr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ux(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Zhe(r),e=Go(r,e),i){case 0:t=e3(null,t,r,e,n);break e;case 1:t=MN(null,t,r,e,n);break e;case 11:t=AN(null,t,r,e,n);break e;case 14:t=TN(null,t,r,Go(r.type,e),n);break e}throw Error(ee(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Go(r,i),e3(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Go(r,i),MN(e,t,r,i,n);case 3:e:{if(qq(t),e===null)throw Error(ee(387));r=t.pendingProps,o=t.memoizedState,i=o.element,bq(e,t),K2(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Bp(Error(ee(423)),t),t=FN(e,t,r,n,i);break e}else if(r!==i){i=Bp(Error(ee(424)),t),t=FN(e,t,r,n,i);break e}else for(Di=Iu(t.stateNode.containerInfo.firstChild),ji=t,Dt=!0,Jo=null,n=yq(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ip(),r===i){t=kl(e,t,n);break e}Dr(e,t,r,n)}t=t.child}return t;case 5:return xq(t),e===null&&XA(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,WA(r,i)?s=null:o!==null&&WA(r,o)&&(t.flags|=32),Hq(e,t),Dr(e,t,s,n),t.child;case 6:return e===null&&XA(t),null;case 13:return Gq(e,t,n);case 4:return fF(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Lp(t,null,r,n):Dr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Go(r,i),AN(e,t,r,i,n);case 7:return Dr(e,t,t.pendingProps,n),t.child;case 8:return Dr(e,t,t.pendingProps.children,n),t.child;case 12:return Dr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,wt(Y2,r._currentValue),r._currentValue=s,o!==null)if(ms(o.value,s)){if(o.children===i.children&&!fi.current){t=kl(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=ll(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),KA(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ee(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),KA(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Dr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,np(t,n),i=Ao(i),r=r(i),t.flags|=1,Dr(e,t,r,n),t.child;case 14:return r=t.type,i=Go(r,t.pendingProps),i=Go(r.type,i),TN(e,t,r,i,n);case 15:return Vq(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Go(r,i),Ux(e,t),t.tag=1,di(r)?(e=!0,H2(t)):e=!1,np(t,n),Bq(t,r,i),ZA(t,r,i,n),t3(null,t,r,!0,e,n);case 19:return Yq(e,t,n);case 22:return Wq(e,t,n)}throw Error(ee(156,t.tag))};function cG(e,t){return IH(e,t)}function Qhe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(e,t,n,r){return new Qhe(e,t,n,r)}function EF(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zhe(e){if(typeof e=="function")return EF(e)?1:0;if(e!=null){if(e=e.$$typeof,e===HM)return 11;if(e===qM)return 14}return 2}function ju(e,t){var n=e.alternate;return n===null?(n=bo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hx(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")EF(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case kh:return Rf(n.children,i,o,t);case WM:s=8,i|=8;break;case SA:return e=bo(12,n,t,i|2),e.elementType=SA,e.lanes=o,e;case kA:return e=bo(13,n,t,i),e.elementType=kA,e.lanes=o,e;case CA:return e=bo(19,n,t,i),e.elementType=CA,e.lanes=o,e;case xH:return Ik(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vH:s=10;break e;case bH:s=9;break e;case HM:s=11;break e;case qM:s=14;break e;case eu:s=16,r=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=bo(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Rf(e,t,n,r){return e=bo(7,e,r,t),e.lanes=n,e}function Ik(e,t,n,r){return e=bo(22,e,r,t),e.elementType=xH,e.lanes=n,e.stateNode={isHidden:!1},e}function ZE(e,t,n){return e=bo(6,e,null,t),e.lanes=n,e}function JE(e,t,n){return t=bo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jhe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=RE(0),this.expirationTimes=RE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=RE(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $F(e,t,n,r,i,o,s,a,l){return e=new Jhe(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=bo(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cF(o),e}function epe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sh,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function fG(e){if(!e)return Ku;e=e._reactInternals;e:{if(Ed(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var n=e.type;if(di(n))return fq(e,n,t)}return t}function dG(e,t,n,r,i,o,s,a,l){return e=$F(n,r,!0,e,i,o,s,a,l),e.context=fG(null),n=e.current,r=Wr(),i=Bu(n),o=ll(r,i),o.callback=t??null,Lu(n,o,i),e.current.lanes=i,j1(e,i,r),hi(e,r),e}function Lk(e,t,n,r){var i=t.current,o=Wr(),s=Bu(i);return n=fG(n),t.context===null?t.context=n:t.pendingContext=n,t=ll(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Lu(i,t,s),e!==null&&(hs(e,i,s,o),zx(e,i,s)),s}function iw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function AF(e,t){jN(e,t),(e=e.alternate)&&jN(e,t)}function tpe(){return null}var hG=typeof reportError=="function"?reportError:function(e){console.error(e)};function TF(e){this._internalRoot=e}zk.prototype.render=TF.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));Lk(e,t,null,null)};zk.prototype.unmount=TF.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jf(function(){Lk(null,e,null,null)}),t[wl]=null}};function zk(e){this._internalRoot=e}zk.prototype.unstable_scheduleHydration=function(e){if(e){var t=WH();e={blockedOn:null,target:e,priority:t};for(var n=0;n<uu.length&&t!==0&&t<uu[n].priority;n++);uu.splice(n,0,e),n===0&&qH(e)}};function MF(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function UN(){}function npe(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=iw(s);o.call(u)}}var s=dG(t,r,e,0,null,!1,!1,"",UN);return e._reactRootContainer=s,e[wl]=s.current,Iy(e.nodeType===8?e.parentNode:e),Jf(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=iw(l);a.call(u)}}var l=$F(e,0,!1,null,null,!1,!1,"",UN);return e._reactRootContainer=l,e[wl]=l.current,Iy(e.nodeType===8?e.parentNode:e),Jf(function(){Lk(t,l,n,r)}),l}function jk(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=iw(s);a.call(l)}}Lk(t,s,e,i)}else s=npe(n,t,e,i,r);return iw(s)}UH=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=a0(t.pendingLanes);n!==0&&(XM(t,n|1),hi(t,en()),!(Ye&6)&&(jp=en()+500,vc()))}break;case 13:Jf(function(){var r=Sl(e,1);if(r!==null){var i=Wr();hs(r,e,1,i)}}),AF(e,1)}};KM=function(e){if(e.tag===13){var t=Sl(e,134217728);if(t!==null){var n=Wr();hs(t,e,134217728,n)}AF(e,134217728)}};VH=function(e){if(e.tag===13){var t=Bu(e),n=Sl(e,t);if(n!==null){var r=Wr();hs(n,e,t,r)}AF(e,t)}};WH=function(){return dt};HH=function(e,t){var n=dt;try{return dt=e,t()}finally{dt=n}};DA=function(e,t,n){switch(t){case"input":if($A(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Fk(r);if(!i)throw Error(ee(90));SH(r),$A(r,i)}}}break;case"textarea":CH(e,n);break;case"select":t=n.value,t!=null&&Zh(e,!!n.multiple,t,!1)}};FH=kF;PH=Jf;var rpe={usingClientEntryPoint:!1,Events:[V1,$h,Fk,TH,MH,kF]},Cm={findFiberByHostInstance:mf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ipe={bundleType:Cm.bundleType,version:Cm.version,rendererPackageName:Cm.rendererPackageName,rendererConfig:Cm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=OH(e),e===null?null:e.stateNode},findFiberByHostInstance:Cm.findFiberByHostInstance||tpe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_b.isDisabled&&_b.supportsFiber)try{$k=_b.inject(ipe),aa=_b}catch{}}to.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rpe;to.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!MF(t))throw Error(ee(200));return epe(e,t,null,n)};to.createRoot=function(e,t){if(!MF(e))throw Error(ee(299));var n=!1,r="",i=hG;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=$F(e,1,!1,null,null,n,!1,r,i),e[wl]=t.current,Iy(e.nodeType===8?e.parentNode:e),new TF(t)};to.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=OH(t),e=e===null?null:e.stateNode,e};to.flushSync=function(e){return Jf(e)};to.hydrate=function(e,t,n){if(!Bk(t))throw Error(ee(200));return jk(null,e,t,!0,n)};to.hydrateRoot=function(e,t,n){if(!MF(e))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=hG;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=dG(t,null,e,1,n??null,i,!1,o,s),e[wl]=t.current,Iy(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new zk(t)};to.render=function(e,t,n){if(!Bk(t))throw Error(ee(200));return jk(null,e,t,!1,n)};to.unmountComponentAtNode=function(e){if(!Bk(e))throw Error(ee(40));return e._reactRootContainer?(Jf(function(){jk(null,null,e,!1,function(){e._reactRootContainer=null,e[wl]=null})}),!0):!1};to.unstable_batchedUpdates=kF;to.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bk(n))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return jk(e,t,n,!1,r)};to.version="18.3.1-next-f1338f8080-20240426";function pG(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pG)}catch(e){console.error(e)}}pG(),pH.exports=to;var FF=pH.exports,[gG,ope]=tr({strict:!1,name:"PortalContext"}),PF="chakra-portal",spe=".chakra-portal",ape=e=>E.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),lpe=e=>{const{appendToParentPortal:t,children:n}=e,[r,i]=F.useState(null),o=F.useRef(null),[,s]=F.useState({});F.useEffect(()=>s({}),[]);const a=ope(),l=ede();Dp(()=>{if(!r)return;const c=r.ownerDocument,f=t?a??c.body:c.body;if(!f)return;o.current=c.createElement("div"),o.current.className=PF,f.appendChild(o.current),s({});const d=o.current;return()=>{f.contains(d)&&f.removeChild(d)}},[r]);const u=l!=null&&l.zIndex?E.jsx(ape,{zIndex:l==null?void 0:l.zIndex,children:n}):n;return o.current?FF.createPortal(E.jsx(gG,{value:o.current,children:u}),o.current):E.jsx("span",{ref:c=>{c&&i(c)}})},upe=e=>{const{children:t,containerRef:n,appendToParentPortal:r}=e,i=n.current,o=i??(typeof window<"u"?document.body:void 0),s=F.useMemo(()=>{const l=i==null?void 0:i.ownerDocument.createElement("div");return l&&(l.className=PF),l},[i]),[,a]=F.useState({});return Dp(()=>a({}),[]),Dp(()=>{if(!(!s||!o))return o.appendChild(s),()=>{o.removeChild(s)}},[s,o]),o&&s?FF.createPortal(E.jsx(gG,{value:r?s:null,children:t}),s):null};function H1(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...r}=t;return n?E.jsx(upe,{containerRef:n,...r}):E.jsx(lpe,{...r})}H1.className=PF;H1.selector=spe;H1.displayName="Portal";function RF(){const e=F.useContext(Ay);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var DF=F.createContext({});DF.displayName="ColorModeContext";function Bg(){const e=F.useContext(DF);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function Jc(e,t){const{colorMode:n}=Bg();return n==="dark"?t:e}var Eb={light:"chakra-ui-light",dark:"chakra-ui-dark"};function cpe(e={}){const{preventTransition:t=!0}=e,n={setDataset:r=>{const i=t?n.preventTransition():void 0;document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,i==null||i()},setClassName(r){document.body.classList.add(r?Eb.dark:Eb.light),document.body.classList.remove(r?Eb.light:Eb.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(r){var i;return((i=n.query().matches)!=null?i:r==="dark")?"dark":"light"},addListener(r){const i=n.query(),o=s=>{r(s.matches?"dark":"light")};return typeof i.addListener=="function"?i.addListener(o):i.addEventListener("change",o),()=>{typeof i.removeListener=="function"?i.removeListener(o):i.removeEventListener("change",o)}},preventTransition(){const r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(r)})})}}};return n}var fpe="chakra-ui-color-mode";function dpe(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let n;try{n=localStorage.getItem(e)||t}catch{}return n||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var hpe=dpe(fpe),VN=()=>{};function WN(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function mG(e){const{value:t,children:n,options:{useSystemColorMode:r,initialColorMode:i,disableTransitionOnChange:o}={},colorModeManager:s=hpe}=e,a=i==="dark"?"dark":"light",[l,u]=F.useState(()=>WN(s,a)),[c,f]=F.useState(()=>WN(s)),{getSystemTheme:d,setClassName:h,setDataset:p,addListener:g}=F.useMemo(()=>cpe({preventTransition:o}),[o]),m=i==="system"&&!l?c:l,y=F.useCallback(x=>{const w=x==="system"?d():x;u(w),h(w==="dark"),p(w),s.set(w)},[s,d,h,p]);Dp(()=>{i==="system"&&f(d())},[]),F.useEffect(()=>{const x=s.get();if(x){y(x);return}if(i==="system"){y("system");return}y(a)},[s,a,i,y]);const v=F.useCallback(()=>{y(m==="dark"?"light":"dark")},[m,y]);F.useEffect(()=>{if(r)return g(y)},[r,g,y]);const b=F.useMemo(()=>({colorMode:t??m,toggleColorMode:t?VN:v,setColorMode:t?VN:y,forced:t!==void 0}),[m,v,y,t]);return E.jsx(DF.Provider,{value:b,children:n})}mG.displayName="ColorModeProvider";function yG(){const e=Bg(),t=RF();return{...e,theme:t}}var Xe=(...e)=>e.filter(Boolean).join(" ");function ppe(){return!1}function pi(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}var q1=e=>{const{condition:t,message:n}=e;t&&ppe()&&console.warn(n)};function ra(e,...t){return gpe(e)?e(...t):e}var gpe=e=>typeof e=="function",fo=e=>e?"":void 0,e$=e=>e?!0:void 0;function Uu(...e){return function(n){e.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}var ow={exports:{}};ow.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",m="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",x="[object RegExp]",w="[object Set]",k="[object String]",S="[object Undefined]",C="[object WeakMap]",_="[object ArrayBuffer]",$="[object DataView]",A="[object Float32Array]",N="[object Float64Array]",M="[object Int8Array]",R="[object Int16Array]",P="[object Int32Array]",D="[object Uint8Array]",I="[object Uint8ClampedArray]",O="[object Uint16Array]",j="[object Uint32Array]",Y=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,re={};re[A]=re[N]=re[M]=re[R]=re[P]=re[D]=re[I]=re[O]=re[j]=!0,re[a]=re[l]=re[_]=re[c]=re[$]=re[f]=re[d]=re[h]=re[g]=re[m]=re[v]=re[x]=re[w]=re[k]=re[C]=!1;var we=typeof bu=="object"&&bu&&bu.Object===Object&&bu,Re=typeof self=="object"&&self&&self.Object===Object&&self,lt=we||Re||Function("return this")(),_n=t&&!t.nodeType&&t,rr=_n&&!0&&e&&!e.nodeType&&e,ue=rr&&rr.exports===_n,_e=ue&&we.process,Ee=function(){try{var T=rr&&rr.require&&rr.require("util").types;return T||_e&&_e.binding&&_e.binding("util")}catch{}}(),Q=Ee&&Ee.isTypedArray;function pn(T,z,U){switch(U.length){case 0:return T.call(z);case 1:return T.call(z,U[0]);case 2:return T.call(z,U[0],U[1]);case 3:return T.call(z,U[0],U[1],U[2])}return T.apply(z,U)}function et(T,z){for(var U=-1,he=Array(T);++U<T;)he[U]=z(U);return he}function En(T){return function(z){return T(z)}}function an(T,z){return T==null?void 0:T[z]}function ro(T,z){return function(U){return T(z(U))}}var Kd=Array.prototype,vue=Function.prototype,Jv=Object.prototype,gE=lt["__core-js_shared__"],eb=vue.toString,Vl=Jv.hasOwnProperty,a9=function(){var T=/[^.]+$/.exec(gE&&gE.keys&&gE.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),l9=Jv.toString,bue=eb.call(Object),xue=RegExp("^"+eb.call(Vl).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tb=ue?lt.Buffer:void 0,u9=lt.Symbol,c9=lt.Uint8Array;tb&&tb.allocUnsafe;var f9=ro(Object.getPrototypeOf,Object),d9=Object.create,wue=Jv.propertyIsEnumerable,Sue=Kd.splice,Oc=u9?u9.toStringTag:void 0,nb=function(){try{var T=vE(Object,"defineProperty");return T({},"",{}),T}catch{}}(),kue=tb?tb.isBuffer:void 0,h9=Math.max,Cue=Date.now,p9=vE(lt,"Map"),hm=vE(Object,"create"),_ue=function(){function T(){}return function(z){if(!Ic(z))return{};if(d9)return d9(z);T.prototype=z;var U=new T;return T.prototype=void 0,U}}();function Nc(T){var z=-1,U=T==null?0:T.length;for(this.clear();++z<U;){var he=T[z];this.set(he[0],he[1])}}function Eue(){this.__data__=hm?hm(null):{},this.size=0}function $ue(T){var z=this.has(T)&&delete this.__data__[T];return this.size-=z?1:0,z}function Aue(T){var z=this.__data__;if(hm){var U=z[T];return U===r?void 0:U}return Vl.call(z,T)?z[T]:void 0}function Tue(T){var z=this.__data__;return hm?z[T]!==void 0:Vl.call(z,T)}function Mue(T,z){var U=this.__data__;return this.size+=this.has(T)?0:1,U[T]=hm&&z===void 0?r:z,this}Nc.prototype.clear=Eue,Nc.prototype.delete=$ue,Nc.prototype.get=Aue,Nc.prototype.has=Tue,Nc.prototype.set=Mue;function Ia(T){var z=-1,U=T==null?0:T.length;for(this.clear();++z<U;){var he=T[z];this.set(he[0],he[1])}}function Fue(){this.__data__=[],this.size=0}function Pue(T){var z=this.__data__,U=rb(z,T);if(U<0)return!1;var he=z.length-1;return U==he?z.pop():Sue.call(z,U,1),--this.size,!0}function Rue(T){var z=this.__data__,U=rb(z,T);return U<0?void 0:z[U][1]}function Due(T){return rb(this.__data__,T)>-1}function Oue(T,z){var U=this.__data__,he=rb(U,T);return he<0?(++this.size,U.push([T,z])):U[he][1]=z,this}Ia.prototype.clear=Fue,Ia.prototype.delete=Pue,Ia.prototype.get=Rue,Ia.prototype.has=Due,Ia.prototype.set=Oue;function Qd(T){var z=-1,U=T==null?0:T.length;for(this.clear();++z<U;){var he=T[z];this.set(he[0],he[1])}}function Nue(){this.size=0,this.__data__={hash:new Nc,map:new(p9||Ia),string:new Nc}}function Iue(T){var z=ob(this,T).delete(T);return this.size-=z?1:0,z}function Lue(T){return ob(this,T).get(T)}function zue(T){return ob(this,T).has(T)}function Bue(T,z){var U=ob(this,T),he=U.size;return U.set(T,z),this.size+=U.size==he?0:1,this}Qd.prototype.clear=Nue,Qd.prototype.delete=Iue,Qd.prototype.get=Lue,Qd.prototype.has=zue,Qd.prototype.set=Bue;function Zd(T){var z=this.__data__=new Ia(T);this.size=z.size}function jue(){this.__data__=new Ia,this.size=0}function Uue(T){var z=this.__data__,U=z.delete(T);return this.size=z.size,U}function Vue(T){return this.__data__.get(T)}function Wue(T){return this.__data__.has(T)}function Hue(T,z){var U=this.__data__;if(U instanceof Ia){var he=U.__data__;if(!p9||he.length<n-1)return he.push([T,z]),this.size=++U.size,this;U=this.__data__=new Qd(he)}return U.set(T,z),this.size=U.size,this}Zd.prototype.clear=jue,Zd.prototype.delete=Uue,Zd.prototype.get=Vue,Zd.prototype.has=Wue,Zd.prototype.set=Hue;function que(T,z){var U=wE(T),he=!U&&xE(T),qe=!U&&!he&&b9(T),bt=!U&&!he&&!qe&&w9(T),Ft=U||he||qe||bt,tt=Ft?et(T.length,String):[],Pt=tt.length;for(var Bo in T)Ft&&(Bo=="length"||qe&&(Bo=="offset"||Bo=="parent")||bt&&(Bo=="buffer"||Bo=="byteLength"||Bo=="byteOffset")||y9(Bo,Pt))||tt.push(Bo);return tt}function mE(T,z,U){(U!==void 0&&!sb(T[z],U)||U===void 0&&!(z in T))&&yE(T,z,U)}function Gue(T,z,U){var he=T[z];(!(Vl.call(T,z)&&sb(he,U))||U===void 0&&!(z in T))&&yE(T,z,U)}function rb(T,z){for(var U=T.length;U--;)if(sb(T[U][0],z))return U;return-1}function yE(T,z,U){z=="__proto__"&&nb?nb(T,z,{configurable:!0,enumerable:!0,value:U,writable:!0}):T[z]=U}var Yue=ace();function ib(T){return T==null?T===void 0?S:y:Oc&&Oc in Object(T)?lce(T):pce(T)}function g9(T){return pm(T)&&ib(T)==a}function Xue(T){if(!Ic(T)||dce(T))return!1;var z=kE(T)?xue:W;return z.test(vce(T))}function Kue(T){return pm(T)&&x9(T.length)&&!!re[ib(T)]}function Que(T){if(!Ic(T))return hce(T);var z=v9(T),U=[];for(var he in T)he=="constructor"&&(z||!Vl.call(T,he))||U.push(he);return U}function m9(T,z,U,he,qe){T!==z&&Yue(z,function(bt,Ft){if(qe||(qe=new Zd),Ic(bt))Zue(T,z,Ft,U,m9,he,qe);else{var tt=he?he(bE(T,Ft),bt,Ft+"",T,z,qe):void 0;tt===void 0&&(tt=bt),mE(T,Ft,tt)}},S9)}function Zue(T,z,U,he,qe,bt,Ft){var tt=bE(T,U),Pt=bE(z,U),Bo=Ft.get(Pt);if(Bo){mE(T,U,Bo);return}var $i=bt?bt(tt,Pt,U+"",T,z,Ft):void 0,gm=$i===void 0;if(gm){var CE=wE(Pt),_E=!CE&&b9(Pt),C9=!CE&&!_E&&w9(Pt);$i=Pt,CE||_E||C9?wE(tt)?$i=tt:bce(tt)?$i=ice(tt):_E?(gm=!1,$i=tce(Pt)):C9?(gm=!1,$i=rce(Pt)):$i=[]:xce(Pt)||xE(Pt)?($i=tt,xE(tt)?$i=wce(tt):(!Ic(tt)||kE(tt))&&($i=uce(Pt))):gm=!1}gm&&(Ft.set(Pt,$i),qe($i,Pt,he,bt,Ft),Ft.delete(Pt)),mE(T,U,$i)}function Jue(T,z){return mce(gce(T,z,k9),T+"")}var ece=nb?function(T,z){return nb(T,"toString",{configurable:!0,enumerable:!1,value:kce(z),writable:!0})}:k9;function tce(T,z){return T.slice()}function nce(T){var z=new T.constructor(T.byteLength);return new c9(z).set(new c9(T)),z}function rce(T,z){var U=nce(T.buffer);return new T.constructor(U,T.byteOffset,T.length)}function ice(T,z){var U=-1,he=T.length;for(z||(z=Array(he));++U<he;)z[U]=T[U];return z}function oce(T,z,U,he){var qe=!U;U||(U={});for(var bt=-1,Ft=z.length;++bt<Ft;){var tt=z[bt],Pt=void 0;Pt===void 0&&(Pt=T[tt]),qe?yE(U,tt,Pt):Gue(U,tt,Pt)}return U}function sce(T){return Jue(function(z,U){var he=-1,qe=U.length,bt=qe>1?U[qe-1]:void 0,Ft=qe>2?U[2]:void 0;for(bt=T.length>3&&typeof bt=="function"?(qe--,bt):void 0,Ft&&cce(U[0],U[1],Ft)&&(bt=qe<3?void 0:bt,qe=1),z=Object(z);++he<qe;){var tt=U[he];tt&&T(z,tt,he,bt)}return z})}function ace(T){return function(z,U,he){for(var qe=-1,bt=Object(z),Ft=he(z),tt=Ft.length;tt--;){var Pt=Ft[++qe];if(U(bt[Pt],Pt,bt)===!1)break}return z}}function ob(T,z){var U=T.__data__;return fce(z)?U[typeof z=="string"?"string":"hash"]:U.map}function vE(T,z){var U=an(T,z);return Xue(U)?U:void 0}function lce(T){var z=Vl.call(T,Oc),U=T[Oc];try{T[Oc]=void 0;var he=!0}catch{}var qe=l9.call(T);return he&&(z?T[Oc]=U:delete T[Oc]),qe}function uce(T){return typeof T.constructor=="function"&&!v9(T)?_ue(f9(T)):{}}function y9(T,z){var U=typeof T;return z=z??s,!!z&&(U=="number"||U!="symbol"&&oe.test(T))&&T>-1&&T%1==0&&T<z}function cce(T,z,U){if(!Ic(U))return!1;var he=typeof z;return(he=="number"?SE(U)&&y9(z,U.length):he=="string"&&z in U)?sb(U[z],T):!1}function fce(T){var z=typeof T;return z=="string"||z=="number"||z=="symbol"||z=="boolean"?T!=="__proto__":T===null}function dce(T){return!!a9&&a9 in T}function v9(T){var z=T&&T.constructor,U=typeof z=="function"&&z.prototype||Jv;return T===U}function hce(T){var z=[];if(T!=null)for(var U in Object(T))z.push(U);return z}function pce(T){return l9.call(T)}function gce(T,z,U){return z=h9(z===void 0?T.length-1:z,0),function(){for(var he=arguments,qe=-1,bt=h9(he.length-z,0),Ft=Array(bt);++qe<bt;)Ft[qe]=he[z+qe];qe=-1;for(var tt=Array(z+1);++qe<z;)tt[qe]=he[qe];return tt[z]=U(Ft),pn(T,this,tt)}}function bE(T,z){if(!(z==="constructor"&&typeof T[z]=="function")&&z!="__proto__")return T[z]}var mce=yce(ece);function yce(T){var z=0,U=0;return function(){var he=Cue(),qe=o-(he-U);if(U=he,qe>0){if(++z>=i)return arguments[0]}else z=0;return T.apply(void 0,arguments)}}function vce(T){if(T!=null){try{return eb.call(T)}catch{}try{return T+""}catch{}}return""}function sb(T,z){return T===z||T!==T&&z!==z}var xE=g9(function(){return arguments}())?g9:function(T){return pm(T)&&Vl.call(T,"callee")&&!wue.call(T,"callee")},wE=Array.isArray;function SE(T){return T!=null&&x9(T.length)&&!kE(T)}function bce(T){return pm(T)&&SE(T)}var b9=kue||Cce;function kE(T){if(!Ic(T))return!1;var z=ib(T);return z==h||z==p||z==u||z==b}function x9(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=s}function Ic(T){var z=typeof T;return T!=null&&(z=="object"||z=="function")}function pm(T){return T!=null&&typeof T=="object"}function xce(T){if(!pm(T)||ib(T)!=v)return!1;var z=f9(T);if(z===null)return!0;var U=Vl.call(z,"constructor")&&z.constructor;return typeof U=="function"&&U instanceof U&&eb.call(U)==bue}var w9=Q?En(Q):Kue;function wce(T){return oce(T,S9(T))}function S9(T){return SE(T)?que(T):Que(T)}var Sce=sce(function(T,z,U,he){m9(T,z,U,he)});function kce(T){return function(){return T}}function k9(T){return T}function Cce(){return!1}e.exports=Sce})(ow,ow.exports);var mpe=ow.exports;const xo=Fl(mpe);var ype=e=>/!(important)?$/.test(e),HN=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,vpe=(e,t)=>n=>{const r=String(t),i=ype(r),o=HN(r),s=e?`${e}.${o}`:o;let a=pi(n.__cssMap)&&s in n.__cssMap?n.__cssMap[s].varRef:t;return a=HN(a),i?`${a} !important`:a};function OF(e){const{scale:t,transform:n,compose:r}=e;return(o,s)=>{var a;const l=vpe(t,o)(s);let u=(a=n==null?void 0:n(l,s))!=null?a:l;return r&&(u=r(u,s)),u}}var $b=(...e)=>t=>e.reduce((n,r)=>r(n),t);function io(e,t){return n=>{const r={property:n,scale:e};return r.transform=OF({scale:e,transform:t}),r}}var bpe=({rtl:e,ltr:t})=>n=>n.direction==="rtl"?e:t;function xpe(e){const{property:t,scale:n,transform:r}=e;return{scale:n,property:bpe(t),transform:n?OF({scale:n,compose:r}):r}}var vG=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function wpe(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...vG].join(" ")}function Spe(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...vG].join(" ")}var kpe={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},Cpe={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function _pe(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var Epe={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},h3={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},$pe=new Set(Object.values(h3)),p3=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),Ape=e=>e.trim();function Tpe(e,t){if(e==null||p3.has(e))return e;if(!(g3(e)||p3.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),o=i==null?void 0:i[1],s=i==null?void 0:i[2];if(!o||!s)return e;const a=o.includes("-gradient")?o:`${o}-gradient`,[l,...u]=s.split(",").map(Ape).filter(Boolean);if((u==null?void 0:u.length)===0)return e;const c=l in h3?h3[l]:l;u.unshift(c);const f=u.map(d=>{if($pe.has(d))return d;const h=d.indexOf(" "),[p,g]=h!==-1?[d.substr(0,h),d.substr(h+1)]:[d],m=g3(g)?g:g&&g.split(" "),y=`colors.${p}`,v=y in t.__cssMap?t.__cssMap[y].varRef:p;return m?[v,...Array.isArray(m)?m:[m]].join(" "):v});return`${a}(${f.join(", ")})`}var g3=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),Mpe=(e,t)=>Tpe(e,t??{});function Fpe(e){return/^var\(--.+\)$/.test(e)}var Ppe=e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}},Ns=e=>t=>`${e}(${t})`,Ve={filter(e){return e!=="auto"?e:kpe},backdropFilter(e){return e!=="auto"?e:Cpe},ring(e){return _pe(Ve.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?wpe():e==="auto-gpu"?Spe():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=Ppe(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const n={left:"right",right:"left"};return t.direction==="rtl"?n[e]:e},degree(e){if(Fpe(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:Mpe,blur:Ns("blur"),opacity:Ns("opacity"),brightness:Ns("brightness"),contrast:Ns("contrast"),dropShadow:Ns("drop-shadow"),grayscale:Ns("grayscale"),hueRotate:e=>Ns("hue-rotate")(Ve.degree(e)),invert:Ns("invert"),saturate:Ns("saturate"),sepia:Ns("sepia"),bgImage(e){return e==null||g3(e)||p3.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:r}=(t=Epe[e])!=null?t:{},i={flexDirection:e};return n&&(i[n]=1),r&&(i[r]=1),i}},L={borderWidths:io("borderWidths"),borderStyles:io("borderStyles"),colors:io("colors"),borders:io("borders"),gradients:io("gradients",Ve.gradient),radii:io("radii",Ve.px),space:io("space",$b(Ve.vh,Ve.px)),spaceT:io("space",$b(Ve.vh,Ve.px)),degreeT(e){return{property:e,transform:Ve.degree}},prop(e,t,n){return{property:e,scale:t,...t&&{transform:OF({scale:t,transform:n})}}},propT(e,t){return{property:e,transform:t}},sizes:io("sizes",$b(Ve.vh,Ve.px)),sizesT:io("sizes",$b(Ve.vh,Ve.fraction)),shadows:io("shadows"),logical:xpe,blur:io("blur",Ve.blur)},qx={background:L.colors("background"),backgroundColor:L.colors("backgroundColor"),backgroundImage:L.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Ve.bgClip},bgSize:L.prop("backgroundSize"),bgPosition:L.prop("backgroundPosition"),bg:L.colors("background"),bgColor:L.colors("backgroundColor"),bgPos:L.prop("backgroundPosition"),bgRepeat:L.prop("backgroundRepeat"),bgAttachment:L.prop("backgroundAttachment"),bgGradient:L.gradients("backgroundImage"),bgClip:{transform:Ve.bgClip}};Object.assign(qx,{bgImage:qx.backgroundImage,bgImg:qx.backgroundImage});var nt={border:L.borders("border"),borderWidth:L.borderWidths("borderWidth"),borderStyle:L.borderStyles("borderStyle"),borderColor:L.colors("borderColor"),borderRadius:L.radii("borderRadius"),borderTop:L.borders("borderTop"),borderBlockStart:L.borders("borderBlockStart"),borderTopLeftRadius:L.radii("borderTopLeftRadius"),borderStartStartRadius:L.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:L.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:L.radii("borderTopRightRadius"),borderStartEndRadius:L.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:L.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:L.borders("borderRight"),borderInlineEnd:L.borders("borderInlineEnd"),borderBottom:L.borders("borderBottom"),borderBlockEnd:L.borders("borderBlockEnd"),borderBottomLeftRadius:L.radii("borderBottomLeftRadius"),borderBottomRightRadius:L.radii("borderBottomRightRadius"),borderLeft:L.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:L.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:L.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:L.borders(["borderLeft","borderRight"]),borderInline:L.borders("borderInline"),borderY:L.borders(["borderTop","borderBottom"]),borderBlock:L.borders("borderBlock"),borderTopWidth:L.borderWidths("borderTopWidth"),borderBlockStartWidth:L.borderWidths("borderBlockStartWidth"),borderTopColor:L.colors("borderTopColor"),borderBlockStartColor:L.colors("borderBlockStartColor"),borderTopStyle:L.borderStyles("borderTopStyle"),borderBlockStartStyle:L.borderStyles("borderBlockStartStyle"),borderBottomWidth:L.borderWidths("borderBottomWidth"),borderBlockEndWidth:L.borderWidths("borderBlockEndWidth"),borderBottomColor:L.colors("borderBottomColor"),borderBlockEndColor:L.colors("borderBlockEndColor"),borderBottomStyle:L.borderStyles("borderBottomStyle"),borderBlockEndStyle:L.borderStyles("borderBlockEndStyle"),borderLeftWidth:L.borderWidths("borderLeftWidth"),borderInlineStartWidth:L.borderWidths("borderInlineStartWidth"),borderLeftColor:L.colors("borderLeftColor"),borderInlineStartColor:L.colors("borderInlineStartColor"),borderLeftStyle:L.borderStyles("borderLeftStyle"),borderInlineStartStyle:L.borderStyles("borderInlineStartStyle"),borderRightWidth:L.borderWidths("borderRightWidth"),borderInlineEndWidth:L.borderWidths("borderInlineEndWidth"),borderRightColor:L.colors("borderRightColor"),borderInlineEndColor:L.colors("borderInlineEndColor"),borderRightStyle:L.borderStyles("borderRightStyle"),borderInlineEndStyle:L.borderStyles("borderInlineEndStyle"),borderTopRadius:L.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:L.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:L.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:L.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(nt,{rounded:nt.borderRadius,roundedTop:nt.borderTopRadius,roundedTopLeft:nt.borderTopLeftRadius,roundedTopRight:nt.borderTopRightRadius,roundedTopStart:nt.borderStartStartRadius,roundedTopEnd:nt.borderStartEndRadius,roundedBottom:nt.borderBottomRadius,roundedBottomLeft:nt.borderBottomLeftRadius,roundedBottomRight:nt.borderBottomRightRadius,roundedBottomStart:nt.borderEndStartRadius,roundedBottomEnd:nt.borderEndEndRadius,roundedLeft:nt.borderLeftRadius,roundedRight:nt.borderRightRadius,roundedStart:nt.borderInlineStartRadius,roundedEnd:nt.borderInlineEndRadius,borderStart:nt.borderInlineStart,borderEnd:nt.borderInlineEnd,borderTopStartRadius:nt.borderStartStartRadius,borderTopEndRadius:nt.borderStartEndRadius,borderBottomStartRadius:nt.borderEndStartRadius,borderBottomEndRadius:nt.borderEndEndRadius,borderStartRadius:nt.borderInlineStartRadius,borderEndRadius:nt.borderInlineEndRadius,borderStartWidth:nt.borderInlineStartWidth,borderEndWidth:nt.borderInlineEndWidth,borderStartColor:nt.borderInlineStartColor,borderEndColor:nt.borderInlineEndColor,borderStartStyle:nt.borderInlineStartStyle,borderEndStyle:nt.borderInlineEndStyle});var Rpe={color:L.colors("color"),textColor:L.colors("color"),fill:L.colors("fill"),stroke:L.colors("stroke")},m3={boxShadow:L.shadows("boxShadow"),mixBlendMode:!0,blendMode:L.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:L.prop("backgroundBlendMode"),opacity:!0};Object.assign(m3,{shadow:m3.boxShadow});var Dpe={filter:{transform:Ve.filter},blur:L.blur("--chakra-blur"),brightness:L.propT("--chakra-brightness",Ve.brightness),contrast:L.propT("--chakra-contrast",Ve.contrast),hueRotate:L.propT("--chakra-hue-rotate",Ve.hueRotate),invert:L.propT("--chakra-invert",Ve.invert),saturate:L.propT("--chakra-saturate",Ve.saturate),dropShadow:L.propT("--chakra-drop-shadow",Ve.dropShadow),backdropFilter:{transform:Ve.backdropFilter},backdropBlur:L.blur("--chakra-backdrop-blur"),backdropBrightness:L.propT("--chakra-backdrop-brightness",Ve.brightness),backdropContrast:L.propT("--chakra-backdrop-contrast",Ve.contrast),backdropHueRotate:L.propT("--chakra-backdrop-hue-rotate",Ve.hueRotate),backdropInvert:L.propT("--chakra-backdrop-invert",Ve.invert),backdropSaturate:L.propT("--chakra-backdrop-saturate",Ve.saturate)},sw={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Ve.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:L.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:L.space("gap"),rowGap:L.space("rowGap"),columnGap:L.space("columnGap")};Object.assign(sw,{flexDir:sw.flexDirection});var bG={gridGap:L.space("gridGap"),gridColumnGap:L.space("gridColumnGap"),gridRowGap:L.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},Ope={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Ve.outline},outlineOffset:!0,outlineColor:L.colors("outlineColor")},lo={width:L.sizesT("width"),inlineSize:L.sizesT("inlineSize"),height:L.sizes("height"),blockSize:L.sizes("blockSize"),boxSize:L.sizes(["width","height"]),minWidth:L.sizes("minWidth"),minInlineSize:L.sizes("minInlineSize"),minHeight:L.sizes("minHeight"),minBlockSize:L.sizes("minBlockSize"),maxWidth:L.sizes("maxWidth"),maxInlineSize:L.sizes("maxInlineSize"),maxHeight:L.sizes("maxHeight"),maxBlockSize:L.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (min-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r.minW)!=null?i:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (max-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r._minW)!=null?i:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:L.propT("float",Ve.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(lo,{w:lo.width,h:lo.height,minW:lo.minWidth,maxW:lo.maxWidth,minH:lo.minHeight,maxH:lo.maxHeight,overscroll:lo.overscrollBehavior,overscrollX:lo.overscrollBehaviorX,overscrollY:lo.overscrollBehaviorY});var Npe={listStyleType:!0,listStylePosition:!0,listStylePos:L.prop("listStylePosition"),listStyleImage:!0,listStyleImg:L.prop("listStyleImage")};function Ipe(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var Lpe=e=>{const t=new WeakMap;return(r,i,o,s)=>{if(typeof r>"u")return e(r,i,o);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,o,s);return a.set(i,l),l}},zpe=Lpe(Ipe),Bpe={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},jpe={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},t$=(e,t,n)=>{const r={},i=zpe(e,t,{});for(const o in i)o in n&&n[o]!=null||(r[o]=i[o]);return r},Upe={srOnly:{transform(e){return e===!0?Bpe:e==="focusable"?jpe:{}}},layerStyle:{processResult:!0,transform:(e,t,n)=>t$(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>t$(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>t$(t,e,n)}},Q0={position:!0,pos:L.prop("position"),zIndex:L.prop("zIndex","zIndices"),inset:L.spaceT("inset"),insetX:L.spaceT(["left","right"]),insetInline:L.spaceT("insetInline"),insetY:L.spaceT(["top","bottom"]),insetBlock:L.spaceT("insetBlock"),top:L.spaceT("top"),insetBlockStart:L.spaceT("insetBlockStart"),bottom:L.spaceT("bottom"),insetBlockEnd:L.spaceT("insetBlockEnd"),left:L.spaceT("left"),insetInlineStart:L.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:L.spaceT("right"),insetInlineEnd:L.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(Q0,{insetStart:Q0.insetInlineStart,insetEnd:Q0.insetInlineEnd});var Vpe={ring:{transform:Ve.ring},ringColor:L.colors("--chakra-ring-color"),ringOffset:L.prop("--chakra-ring-offset-width"),ringOffsetColor:L.colors("--chakra-ring-offset-color"),ringInset:L.prop("--chakra-ring-inset")},Et={margin:L.spaceT("margin"),marginTop:L.spaceT("marginTop"),marginBlockStart:L.spaceT("marginBlockStart"),marginRight:L.spaceT("marginRight"),marginInlineEnd:L.spaceT("marginInlineEnd"),marginBottom:L.spaceT("marginBottom"),marginBlockEnd:L.spaceT("marginBlockEnd"),marginLeft:L.spaceT("marginLeft"),marginInlineStart:L.spaceT("marginInlineStart"),marginX:L.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:L.spaceT("marginInline"),marginY:L.spaceT(["marginTop","marginBottom"]),marginBlock:L.spaceT("marginBlock"),padding:L.space("padding"),paddingTop:L.space("paddingTop"),paddingBlockStart:L.space("paddingBlockStart"),paddingRight:L.space("paddingRight"),paddingBottom:L.space("paddingBottom"),paddingBlockEnd:L.space("paddingBlockEnd"),paddingLeft:L.space("paddingLeft"),paddingInlineStart:L.space("paddingInlineStart"),paddingInlineEnd:L.space("paddingInlineEnd"),paddingX:L.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:L.space("paddingInline"),paddingY:L.space(["paddingTop","paddingBottom"]),paddingBlock:L.space("paddingBlock")};Object.assign(Et,{m:Et.margin,mt:Et.marginTop,mr:Et.marginRight,me:Et.marginInlineEnd,marginEnd:Et.marginInlineEnd,mb:Et.marginBottom,ml:Et.marginLeft,ms:Et.marginInlineStart,marginStart:Et.marginInlineStart,mx:Et.marginX,my:Et.marginY,p:Et.padding,pt:Et.paddingTop,py:Et.paddingY,px:Et.paddingX,pb:Et.paddingBottom,pl:Et.paddingLeft,ps:Et.paddingInlineStart,paddingStart:Et.paddingInlineStart,pr:Et.paddingRight,pe:Et.paddingInlineEnd,paddingEnd:Et.paddingInlineEnd});var Wpe={textDecorationColor:L.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:L.shadows("textShadow")},Hpe={clipPath:!0,transform:L.propT("transform",Ve.transform),transformOrigin:!0,translateX:L.spaceT("--chakra-translate-x"),translateY:L.spaceT("--chakra-translate-y"),skewX:L.degreeT("--chakra-skew-x"),skewY:L.degreeT("--chakra-skew-y"),scaleX:L.prop("--chakra-scale-x"),scaleY:L.prop("--chakra-scale-y"),scale:L.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:L.degreeT("--chakra-rotate")},qpe={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:L.prop("transitionDuration","transition.duration"),transitionProperty:L.prop("transitionProperty","transition.property"),transitionTimingFunction:L.prop("transitionTimingFunction","transition.easing")},Gpe={fontFamily:L.prop("fontFamily","fonts"),fontSize:L.prop("fontSize","fontSizes",Ve.px),fontWeight:L.prop("fontWeight","fontWeights"),lineHeight:L.prop("lineHeight","lineHeights"),letterSpacing:L.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Ype={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:L.spaceT("scrollMargin"),scrollMarginTop:L.spaceT("scrollMarginTop"),scrollMarginBottom:L.spaceT("scrollMarginBottom"),scrollMarginLeft:L.spaceT("scrollMarginLeft"),scrollMarginRight:L.spaceT("scrollMarginRight"),scrollMarginX:L.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:L.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:L.spaceT("scrollPadding"),scrollPaddingTop:L.spaceT("scrollPaddingTop"),scrollPaddingBottom:L.spaceT("scrollPaddingBottom"),scrollPaddingLeft:L.spaceT("scrollPaddingLeft"),scrollPaddingRight:L.spaceT("scrollPaddingRight"),scrollPaddingX:L.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:L.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function xG(e){return pi(e)&&e.reference?e.reference:String(e)}var Uk=(e,...t)=>t.map(xG).join(` ${e} `).replace(/calc/g,""),qN=(...e)=>`calc(${Uk("+",...e)})`,GN=(...e)=>`calc(${Uk("-",...e)})`,y3=(...e)=>`calc(${Uk("*",...e)})`,YN=(...e)=>`calc(${Uk("/",...e)})`,XN=e=>{const t=xG(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:y3(t,-1)},lf=Object.assign(e=>({add:(...t)=>lf(qN(e,...t)),subtract:(...t)=>lf(GN(e,...t)),multiply:(...t)=>lf(y3(e,...t)),divide:(...t)=>lf(YN(e,...t)),negate:()=>lf(XN(e)),toString:()=>e.toString()}),{add:qN,subtract:GN,multiply:y3,divide:YN,negate:XN});function Xpe(e,t="-"){return e.replace(/\s+/g,t)}function Kpe(e){const t=Xpe(e.toString());return Zpe(Qpe(t))}function Qpe(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function Zpe(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function Jpe(e,t=""){return[t,e].filter(Boolean).join("-")}function ege(e,t){return`var(${e}${t?`, ${t}`:""})`}function tge(e,t=""){return Kpe(`--${Jpe(e,t)}`)}function Ce(e,t,n){const r=tge(e,n);return{variable:r,reference:ege(r,t)}}function nge(e,t){const n={};for(const r of t){if(Array.isArray(r)){const[i,o]=r;n[i]=Ce(`${e}-${i}`,o);continue}n[r]=Ce(`${e}-${r}`)}return n}function rge(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function ige(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}function v3(e){if(e==null)return e;const{unitless:t}=ige(e);return t||typeof e=="number"?`${e}px`:e}var wG=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,NF=e=>Object.fromEntries(Object.entries(e).sort(wG));function KN(e){const t=NF(e);return Object.assign(Object.values(t),t)}function oge(e){const t=Object.keys(NF(e));return new Set(t)}function QN(e){var t;if(!e)return e;e=(t=v3(e))!=null?t:e;const n=-.02;return typeof e=="number"?`${e+n}`:e.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function u0(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${v3(e)})`),t&&n.push("and",`(max-width: ${v3(t)})`),n.join(" ")}function sge(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const n=KN(e),r=Object.entries(e).sort(wG).map(([s,a],l,u)=>{var c;let[,f]=(c=u[l+1])!=null?c:[];return f=parseFloat(f)>0?QN(f):void 0,{_minW:QN(a),breakpoint:s,minW:a,maxW:f,maxWQuery:u0(null,f),minWQuery:u0(a),minMaxQuery:u0(a,f)}}),i=oge(e),o=Array.from(i.values());return{keys:i,normalized:n,isResponsive(s){const a=Object.keys(s);return a.length>0&&a.every(l=>i.has(l))},asObject:NF(e),asArray:KN(e),details:r,get(s){return r.find(a=>a.breakpoint===s)},media:[null,...n.map(s=>u0(s)).slice(1)],toArrayValue(s){if(!pi(s))throw new Error("toArrayValue: value must be an object");const a=o.map(l=>{var u;return(u=s[l])!=null?u:null});for(;rge(a)===null;)a.pop();return a},toObjectValue(s){if(!Array.isArray(s))throw new Error("toObjectValue: value must be an array");return s.reduce((a,l,u)=>{const c=o[u];return c!=null&&l!=null&&(a[c]=l),a},{})}}}var Bn={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},Hl=e=>SG(t=>e(t,"&"),"[role=group]","[data-group]",".group"),La=e=>SG(t=>e(t,"~ &"),"[data-peer]",".peer"),SG=(e,...t)=>t.map(e).join(", "),Vk={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:Hl(Bn.hover),_peerHover:La(Bn.hover),_groupFocus:Hl(Bn.focus),_peerFocus:La(Bn.focus),_groupFocusVisible:Hl(Bn.focusVisible),_peerFocusVisible:La(Bn.focusVisible),_groupActive:Hl(Bn.active),_peerActive:La(Bn.active),_groupDisabled:Hl(Bn.disabled),_peerDisabled:La(Bn.disabled),_groupInvalid:Hl(Bn.invalid),_peerInvalid:La(Bn.invalid),_groupChecked:Hl(Bn.checked),_peerChecked:La(Bn.checked),_groupFocusWithin:Hl(Bn.focusWithin),_peerFocusWithin:La(Bn.focusWithin),_peerPlaceholderShown:La(Bn.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},kG=Object.keys(Vk);function ZN(e,t){return Ce(String(e).replace(/\./g,"-"),void 0,t)}function age(e,t){let n={};const r={};for(const[i,o]of Object.entries(e)){const{isSemantic:s,value:a}=o,{variable:l,reference:u}=ZN(i,t==null?void 0:t.cssVarPrefix);if(!s){if(i.startsWith("space")){const d=i.split("."),[h,...p]=d,g=`${h}.-${p.join(".")}`,m=lf.negate(a),y=lf.negate(u);r[g]={value:m,var:l,varRef:y}}n[l]=a,r[i]={value:a,var:l,varRef:u};continue}const c=d=>{const p=[String(i).split(".")[0],d].join(".");if(!e[p])return d;const{reference:m}=ZN(p,t==null?void 0:t.cssVarPrefix);return m},f=pi(a)?a:{default:a};n=xo(n,Object.entries(f).reduce((d,[h,p])=>{var g,m;if(!p)return d;const y=c(`${p}`);if(h==="default")return d[l]=y,d;const v=(m=(g=Vk)==null?void 0:g[h])!=null?m:h;return d[v]={[l]:y},d},{})),r[i]={value:u,var:l,varRef:u}}return{cssVars:n,cssMap:r}}function lge(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}function uge(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function cge(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function JN(e,t,n={}){const{stop:r,getKey:i}=n;function o(s,a=[]){var l;if(cge(s)||Array.isArray(s)){const u={};for(const[c,f]of Object.entries(s)){const d=(l=i==null?void 0:i(c))!=null?l:c,h=[...a,d];if(r!=null&&r(s,h))return t(s,a);u[d]=o(f,h)}return u}return t(s,a)}return o(e)}var fge=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function dge(e){return uge(e,fge)}function hge(e){return e.semanticTokens}function pge(e){const{__cssMap:t,__cssVars:n,__breakpoints:r,...i}=e;return i}var gge=e=>kG.includes(e)||e==="default";function mge({tokens:e,semanticTokens:t}){const n={};return JN(e,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!1,value:r})}),JN(t,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!0,value:r})},{stop:r=>Object.keys(r).every(gge)}),n}function yge(e){var t;const n=pge(e),r=dge(n),i=hge(n),o=mge({tokens:r,semanticTokens:i}),s=(t=n.config)==null?void 0:t.cssVarPrefix,{cssMap:a,cssVars:l}=age(o,{cssVarPrefix:s});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...l},__cssMap:a,__breakpoints:sge(n.breakpoints)}),n}var IF=xo({},qx,nt,Rpe,sw,lo,Dpe,Vpe,Ope,bG,Upe,Q0,m3,Et,Ype,Gpe,Wpe,Hpe,Npe,qpe),vge=Object.assign({},Et,lo,sw,bG,Q0),bge=Object.keys(vge),xge=[...Object.keys(IF),...kG],wge={...IF,...Vk},Sge=e=>e in wge,kge=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:r,media:i}=t.__breakpoints,o={};for(const s in e){let a=ra(e[s],t);if(a==null)continue;if(a=pi(a)&&n(a)?r(a):a,!Array.isArray(a)){o[s]=a;continue}const l=a.slice(0,i.length).length;for(let u=0;u<l;u+=1){const c=i==null?void 0:i[u];if(!c){o[s]=a[u];continue}o[c]=o[c]||{},a[u]!=null&&(o[c][s]=a[u])}}return o};function Cge(e){const t=[];let n="",r=!1;for(let i=0;i<e.length;i++){const o=e[i];o==="("?(r=!0,n+=o):o===")"?(r=!1,n+=o):o===","&&!r?(t.push(n),n=""):n+=o}return n=n.trim(),n&&t.push(n),t}function _ge(e){return/^var\(--.+\)$/.test(e)}var Ege=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!_ge(t),$ge=(e,t)=>{var n,r;if(t==null)return t;const i=l=>{var u,c;return(c=(u=e.__cssMap)==null?void 0:u[l])==null?void 0:c.varRef},o=l=>{var u;return(u=i(l))!=null?u:l},[s,a]=Cge(t);return t=(r=(n=i(s))!=null?n:o(a))!=null?r:o(t),t};function Age(e){const{configs:t={},pseudos:n={},theme:r}=e,i=(o,s=!1)=>{var a,l,u;const c=ra(o,r),f=kge(c)(r);let d={};for(let h in f){const p=f[h];let g=ra(p,r);h in n&&(h=n[h]),Ege(h,g)&&(g=$ge(r,g));let m=t[h];if(m===!0&&(m={property:h}),pi(g)){d[h]=(a=d[h])!=null?a:{},d[h]=xo({},d[h],i(g,!0));continue}let y=(u=(l=m==null?void 0:m.transform)==null?void 0:l.call(m,g,r,c))!=null?u:g;y=m!=null&&m.processResult?i(y,!0):y;const v=ra(m==null?void 0:m.property,r);if(!s&&(m!=null&&m.static)){const b=ra(m.static,r);d=xo({},d,b)}if(v&&Array.isArray(v)){for(const b of v)d[b]=y;continue}if(v){v==="&"&&pi(y)?d=xo({},d,y):d[v]=y;continue}if(pi(y)){d=xo({},d,y);continue}d[h]=y}return d};return i}var CG=e=>t=>Age({theme:t,pseudos:Vk,configs:IF})(e);function Ct(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function Tge(e,t){if(Array.isArray(e))return e;if(pi(e))return t(e);if(e!=null)return[e]}function Mge(e,t){for(let n=t+1;n<e.length;n++)if(e[n]!=null)return n;return-1}function Fge(e){const t=e.__breakpoints;return function(r,i,o,s){var a,l;if(!t)return;const u={},c=Tge(o,t.toArrayValue);if(!c)return u;const f=c.length,d=f===1,h=!!r.parts;for(let p=0;p<f;p++){const g=t.details[p],m=t.details[Mge(c,p)],y=u0(g.minW,m==null?void 0:m._minW),v=ra((a=r[i])==null?void 0:a[c[p]],s);if(v){if(h){(l=r.parts)==null||l.forEach(b=>{xo(u,{[b]:d?v[b]:{[y]:v[b]}})});continue}if(!h){d?xo(u,v):u[y]=v;continue}u[y]=v}}return u}}function Pge(e){return t=>{var n;const{variant:r,size:i,theme:o}=t,s=Fge(o);return xo({},ra((n=e.baseStyle)!=null?n:{},t),s(e,"sizes",i,t),s(e,"variants",r,t))}}function Er(e){return lge(e,["styleConfig","size","variant","colorScheme"])}var Rge=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function Dge(e){return pi(e)?Rge.every(t=>Object.prototype.hasOwnProperty.call(e,t)):!1}var Oge={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},Nge={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},Ige={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},Lge={property:Oge,easing:Nge,duration:Ige},zge=Lge,Bge={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},jge=Bge,Uge={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},Vge=Uge,Wge={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},Hge=Wge,qge={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},Gge=qge,Yge={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},Xge=Yge,Kge={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},Qge=Kge,Zge={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},Jge=Zge,eme={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},_G=eme,EG={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},tme={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},nme={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},rme={...EG,...tme,container:nme},$G=rme,ime={breakpoints:Hge,zIndices:jge,radii:Xge,blur:Jge,colors:Gge,..._G,sizes:$G,shadows:Qge,space:EG,borders:Vge,transition:zge},{defineMultiStyleConfig:ome,definePartsStyle:c0}=Ct(["stepper","step","title","description","indicator","separator","icon","number"]),Xa=Ce("stepper-indicator-size"),Dh=Ce("stepper-icon-size"),Oh=Ce("stepper-title-font-size"),f0=Ce("stepper-description-font-size"),_m=Ce("stepper-accent-color"),sme=c0(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[_m.variable]:`colors.${e}.500`,_dark:{[_m.variable]:`colors.${e}.200`}},title:{fontSize:Oh.reference,fontWeight:"medium"},description:{fontSize:f0.reference,color:"chakra-subtle-text"},number:{fontSize:Oh.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Dh.reference,height:Dh.reference},indicator:{flexShrink:0,borderRadius:"full",width:Xa.reference,height:Xa.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:_m.reference},"&[data-status=complete]":{bg:_m.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:_m.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${Xa.reference} - 8px)`,top:`calc(${Xa.reference} + 4px)`,insetStart:`calc(${Xa.reference} / 2 - 1px)`}}})),ame=ome({baseStyle:sme,sizes:{xs:c0({stepper:{[Xa.variable]:"sizes.4",[Dh.variable]:"sizes.3",[Oh.variable]:"fontSizes.xs",[f0.variable]:"fontSizes.xs"}}),sm:c0({stepper:{[Xa.variable]:"sizes.6",[Dh.variable]:"sizes.4",[Oh.variable]:"fontSizes.sm",[f0.variable]:"fontSizes.xs"}}),md:c0({stepper:{[Xa.variable]:"sizes.8",[Dh.variable]:"sizes.5",[Oh.variable]:"fontSizes.md",[f0.variable]:"fontSizes.sm"}}),lg:c0({stepper:{[Xa.variable]:"sizes.10",[Dh.variable]:"sizes.6",[Oh.variable]:"fontSizes.lg",[f0.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function at(e,t={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...c){r();for(const f of c)t[f]=l(f);return at(e,t)}function o(...c){for(const f of c)f in t||(t[f]=l(f));return at(e,t)}function s(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.selector]))}function a(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.className]))}function l(c){const h=`chakra-${(["container","root"].includes(c??"")?[e]:[e,c]).filter(Boolean).join("__")}`;return{className:h,selector:`.${h}`,toString:()=>c}}return{parts:i,toPart:l,extend:o,selectors:s,classnames:a,get keys(){return Object.keys(t)},__type:{}}}var lme=at("accordion").parts("root","container","button","panel").extend("icon"),ume=at("alert").parts("title","description","container").extend("icon","spinner"),cme=at("avatar").parts("label","badge","container").extend("excessLabel","group"),fme=at("breadcrumb").parts("link","item","container").extend("separator");at("button").parts();var dme=at("checkbox").parts("control","icon","container").extend("label");at("progress").parts("track","filledTrack").extend("label");var hme=at("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),pme=at("editable").parts("preview","input","textarea"),gme=at("form").parts("container","requiredIndicator","helperText"),mme=at("formError").parts("text","icon"),yme=at("input").parts("addon","field","element","group"),vme=at("list").parts("container","item","icon"),bme=at("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),xme=at("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),wme=at("numberinput").parts("root","field","stepperGroup","stepper");at("pininput").parts("field");var Sme=at("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),kme=at("progress").parts("label","filledTrack","track"),Cme=at("radio").parts("container","control","label"),_me=at("select").parts("field","icon"),Eme=at("slider").parts("container","track","thumb","filledTrack","mark"),$me=at("stat").parts("container","label","helpText","number","icon"),Ame=at("switch").parts("container","track","thumb","label"),Tme=at("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Mme=at("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Fme=at("tag").parts("container","label","closeButton"),Pme=at("card").parts("container","header","body","footer");at("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function bf(e,t,n){return Math.min(Math.max(e,n),t)}class Rme extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var d0=Rme;function LF(e){if(typeof e!="string")throw new d0(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=jme.test(e)?Nme(e):e;const n=Ime.exec(t);if(n){const s=Array.from(n).slice(1);return[...s.slice(0,3).map(a=>parseInt(qy(a,2),16)),parseInt(qy(s[3]||"f",2),16)/255]}const r=Lme.exec(t);if(r){const s=Array.from(r).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,16)),parseInt(s[3]||"ff",16)/255]}const i=zme.exec(t);if(i){const s=Array.from(i).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,10)),parseFloat(s[3]||"1")]}const o=Bme.exec(t);if(o){const[s,a,l,u]=Array.from(o).slice(1).map(parseFloat);if(bf(0,100,a)!==a)throw new d0(e);if(bf(0,100,l)!==l)throw new d0(e);return[...Ume(s,a,l),Number.isNaN(u)?1:u]}throw new d0(e)}function Dme(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const eI=e=>parseInt(e.replace(/_/g,""),36),Ome="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=eI(t.substring(0,3)),r=eI(t.substring(3)).toString(16);let i="";for(let o=0;o<6-r.length;o++)i+="0";return e[n]=`${i}${r}`,e},{});function Nme(e){const t=e.toLowerCase().trim(),n=Ome[Dme(t)];if(!n)throw new d0(e);return`#${n}`}const qy=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),Ime=new RegExp(`^#${qy("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Lme=new RegExp(`^#${qy("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),zme=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${qy(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Bme=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,jme=/^[a-z]+$/i,tI=e=>Math.round(e*255),Ume=(e,t,n)=>{let r=n/100;if(t===0)return[r,r,r].map(tI);const i=(e%360+360)%360/60,o=(1-Math.abs(2*r-1))*(t/100),s=o*(1-Math.abs(i%2-1));let a=0,l=0,u=0;i>=0&&i<1?(a=o,l=s):i>=1&&i<2?(a=s,l=o):i>=2&&i<3?(l=o,u=s):i>=3&&i<4?(l=s,u=o):i>=4&&i<5?(a=s,u=o):i>=5&&i<6&&(a=o,u=s);const c=r-o/2,f=a+c,d=l+c,h=u+c;return[f,d,h].map(tI)};function Vme(e,t,n,r){return`rgba(${bf(0,255,e).toFixed()}, ${bf(0,255,t).toFixed()}, ${bf(0,255,n).toFixed()}, ${parseFloat(bf(0,1,r).toFixed(3))})`}function Wme(e,t){const[n,r,i,o]=LF(e);return Vme(n,r,i,o-t)}function Hme(e){const[t,n,r,i]=LF(e);let o=s=>{const a=bf(0,255,s).toString(16);return a.length===1?`0${a}`:a};return`#${o(t)}${o(n)}${o(r)}${i<1?o(Math.round(i*255)):""}`}function qme(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var Gme=e=>Object.keys(e).length===0,jr=(e,t,n)=>{const r=qme(e,`colors.${t}`,t);try{return Hme(r),r}catch{return n??"#000000"}},Yme=e=>{const[t,n,r]=LF(e);return(t*299+n*587+r*114)/1e3},Xme=e=>t=>{const n=jr(t,e);return Yme(n)<128?"dark":"light"},Kme=e=>t=>Xme(e)(t)==="dark",Up=(e,t)=>n=>{const r=jr(n,e);return Wme(r,1-t)};function nI(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var Qme=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function Zme(e){const t=Qme();return!e||Gme(e)?t:e.string&&e.colors?e0e(e.string,e.colors):e.string&&!e.colors?Jme(e.string):e.colors&&!e.string?t0e(e.colors):t}function Jme(e){let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t=t&t;let n="#";for(let r=0;r<3;r+=1){const i=t>>r*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function e0e(e,t){let n=0;if(e.length===0)return t[0];for(let r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%t.length+t.length)%t.length,t[n]}function t0e(e){return e[Math.floor(Math.random()*e.length)]}function ke(e,t){return n=>n.colorMode==="dark"?t:e}function zF(e){const{orientation:t,vertical:n,horizontal:r}=e;return t?t==="vertical"?n:r:{}}function AG(e){return pi(e)&&e.reference?e.reference:String(e)}var Wk=(e,...t)=>t.map(AG).join(` ${e} `).replace(/calc/g,""),rI=(...e)=>`calc(${Wk("+",...e)})`,iI=(...e)=>`calc(${Wk("-",...e)})`,b3=(...e)=>`calc(${Wk("*",...e)})`,oI=(...e)=>`calc(${Wk("/",...e)})`,sI=e=>{const t=AG(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:b3(t,-1)},Ka=Object.assign(e=>({add:(...t)=>Ka(rI(e,...t)),subtract:(...t)=>Ka(iI(e,...t)),multiply:(...t)=>Ka(b3(e,...t)),divide:(...t)=>Ka(oI(e,...t)),negate:()=>Ka(sI(e)),toString:()=>e.toString()}),{add:rI,subtract:iI,multiply:b3,divide:oI,negate:sI});function n0e(e){return!Number.isInteger(parseFloat(e.toString()))}function r0e(e,t="-"){return e.replace(/\s+/g,t)}function TG(e){const t=r0e(e.toString());return t.includes("\\.")?e:n0e(e)?t.replace(".","\\."):e}function i0e(e,t=""){return[t,TG(e)].filter(Boolean).join("-")}function o0e(e,t){return`var(${TG(e)}${t?`, ${t}`:""})`}function s0e(e,t=""){return`--${i0e(e,t)}`}function Sn(e,t){const n=s0e(e,void 0);return{variable:n,reference:o0e(n,a0e(void 0))}}function a0e(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:l0e,definePartsStyle:Gx}=Ct(Ame.keys),Z0=Sn("switch-track-width"),Df=Sn("switch-track-height"),n$=Sn("switch-track-diff"),u0e=Ka.subtract(Z0,Df),x3=Sn("switch-thumb-x"),Em=Sn("switch-bg"),c0e=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[Z0.reference],height:[Df.reference],transitionProperty:"common",transitionDuration:"fast",[Em.variable]:"colors.gray.300",_dark:{[Em.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[Em.variable]:`colors.${t}.500`,_dark:{[Em.variable]:`colors.${t}.200`}},bg:Em.reference}},f0e={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Df.reference],height:[Df.reference],_checked:{transform:`translateX(${x3.reference})`}},d0e=Gx(e=>({container:{[n$.variable]:u0e,[x3.variable]:n$.reference,_rtl:{[x3.variable]:Ka(n$).negate().toString()}},track:c0e(e),thumb:f0e})),h0e={sm:Gx({container:{[Z0.variable]:"1.375rem",[Df.variable]:"sizes.3"}}),md:Gx({container:{[Z0.variable]:"1.875rem",[Df.variable]:"sizes.4"}}),lg:Gx({container:{[Z0.variable]:"2.875rem",[Df.variable]:"sizes.6"}})},p0e=l0e({baseStyle:d0e,sizes:h0e,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:g0e,definePartsStyle:ip}=Ct(Tme.keys),m0e=ip({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),aw={"&[data-is-numeric=true]":{textAlign:"end"}},y0e=ip(e=>{const{colorScheme:t}=e;return{th:{color:ke("gray.600","gray.400")(e),borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...aw},td:{borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...aw},caption:{color:ke("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),v0e=ip(e=>{const{colorScheme:t}=e;return{th:{color:ke("gray.600","gray.400")(e),borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...aw},td:{borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...aw},caption:{color:ke("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e)},td:{background:ke(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),b0e={simple:y0e,striped:v0e,unstyled:{}},x0e={sm:ip({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:ip({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:ip({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},w0e=g0e({baseStyle:m0e,variants:b0e,sizes:x0e,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),ai=Ce("tabs-color"),rs=Ce("tabs-bg"),Ab=Ce("tabs-border-color"),{defineMultiStyleConfig:S0e,definePartsStyle:ua}=Ct(Mme.keys),k0e=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},C0e=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},_0e=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:n==="vertical"?"column":"row"}},E0e={p:4},$0e=ua(e=>({root:k0e(e),tab:C0e(e),tablist:_0e(e),tabpanel:E0e})),A0e={sm:ua({tab:{py:1,px:4,fontSize:"sm"}}),md:ua({tab:{fontSize:"md",py:2,px:4}}),lg:ua({tab:{fontSize:"lg",py:3,px:4}})},T0e=ua(e=>{const{colorScheme:t,orientation:n}=e,r=n==="vertical",i=r?"borderStart":"borderBottom",o=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[ai.variable]:`colors.${t}.600`,_dark:{[ai.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[rs.variable]:"colors.gray.200",_dark:{[rs.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:ai.reference,bg:rs.reference}}}),M0e=ua(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[Ab.variable]:"transparent",_selected:{[ai.variable]:`colors.${t}.600`,[Ab.variable]:"colors.white",_dark:{[ai.variable]:`colors.${t}.300`,[Ab.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:Ab.reference},color:ai.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),F0e=ua(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[rs.variable]:"colors.gray.50",_dark:{[rs.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[rs.variable]:"colors.white",[ai.variable]:`colors.${t}.600`,_dark:{[rs.variable]:"colors.gray.800",[ai.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:ai.reference,bg:rs.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),P0e=ua(e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:jr(n,`${t}.700`),bg:jr(n,`${t}.100`)}}}}),R0e=ua(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[ai.variable]:"colors.gray.600",_dark:{[ai.variable]:"inherit"},_selected:{[ai.variable]:"colors.white",[rs.variable]:`colors.${t}.600`,_dark:{[ai.variable]:"colors.gray.800",[rs.variable]:`colors.${t}.300`}},color:ai.reference,bg:rs.reference}}}),D0e=ua({}),O0e={line:T0e,enclosed:M0e,"enclosed-colored":F0e,"soft-rounded":P0e,"solid-rounded":R0e,unstyled:D0e},N0e=S0e({baseStyle:$0e,sizes:A0e,variants:O0e,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),nn=nge("badge",["bg","color","shadow"]),I0e={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:nn.bg.reference,color:nn.color.reference,boxShadow:nn.shadow.reference},L0e=e=>{const{colorScheme:t,theme:n}=e,r=Up(`${t}.500`,.6)(n);return{[nn.bg.variable]:`colors.${t}.500`,[nn.color.variable]:"colors.white",_dark:{[nn.bg.variable]:r,[nn.color.variable]:"colors.whiteAlpha.800"}}},z0e=e=>{const{colorScheme:t,theme:n}=e,r=Up(`${t}.200`,.16)(n);return{[nn.bg.variable]:`colors.${t}.100`,[nn.color.variable]:`colors.${t}.800`,_dark:{[nn.bg.variable]:r,[nn.color.variable]:`colors.${t}.200`}}},B0e=e=>{const{colorScheme:t,theme:n}=e,r=Up(`${t}.200`,.8)(n);return{[nn.color.variable]:`colors.${t}.500`,_dark:{[nn.color.variable]:r},[nn.shadow.variable]:`inset 0 0 0px 1px ${nn.color.reference}`}},j0e={solid:L0e,subtle:z0e,outline:B0e},J0={baseStyle:I0e,variants:j0e,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:U0e,definePartsStyle:Of}=Ct(Fme.keys),aI=Ce("tag-bg"),lI=Ce("tag-color"),r$=Ce("tag-shadow"),Yx=Ce("tag-min-height"),Xx=Ce("tag-min-width"),Kx=Ce("tag-font-size"),Qx=Ce("tag-padding-inline"),V0e={fontWeight:"medium",lineHeight:1.2,outline:0,[lI.variable]:nn.color.reference,[aI.variable]:nn.bg.reference,[r$.variable]:nn.shadow.reference,color:lI.reference,bg:aI.reference,boxShadow:r$.reference,borderRadius:"md",minH:Yx.reference,minW:Xx.reference,fontSize:Kx.reference,px:Qx.reference,_focusVisible:{[r$.variable]:"shadows.outline"}},W0e={lineHeight:1.2,overflow:"visible"},H0e={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},q0e=Of({container:V0e,label:W0e,closeButton:H0e}),G0e={sm:Of({container:{[Yx.variable]:"sizes.5",[Xx.variable]:"sizes.5",[Kx.variable]:"fontSizes.xs",[Qx.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:Of({container:{[Yx.variable]:"sizes.6",[Xx.variable]:"sizes.6",[Kx.variable]:"fontSizes.sm",[Qx.variable]:"space.2"}}),lg:Of({container:{[Yx.variable]:"sizes.8",[Xx.variable]:"sizes.8",[Kx.variable]:"fontSizes.md",[Qx.variable]:"space.3"}})},Y0e={subtle:Of(e=>{var t;return{container:(t=J0.variants)==null?void 0:t.subtle(e)}}),solid:Of(e=>{var t;return{container:(t=J0.variants)==null?void 0:t.solid(e)}}),outline:Of(e=>{var t;return{container:(t=J0.variants)==null?void 0:t.outline(e)}})},X0e=U0e({variants:Y0e,baseStyle:q0e,sizes:G0e,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:tl,defineMultiStyleConfig:K0e}=Ct(yme.keys),Nh=Ce("input-height"),Ih=Ce("input-font-size"),Lh=Ce("input-padding"),zh=Ce("input-border-radius"),Q0e=tl({addon:{height:Nh.reference,fontSize:Ih.reference,px:Lh.reference,borderRadius:zh.reference},field:{width:"100%",height:Nh.reference,fontSize:Ih.reference,px:Lh.reference,borderRadius:zh.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),ql={lg:{[Ih.variable]:"fontSizes.lg",[Lh.variable]:"space.4",[zh.variable]:"radii.md",[Nh.variable]:"sizes.12"},md:{[Ih.variable]:"fontSizes.md",[Lh.variable]:"space.4",[zh.variable]:"radii.md",[Nh.variable]:"sizes.10"},sm:{[Ih.variable]:"fontSizes.sm",[Lh.variable]:"space.3",[zh.variable]:"radii.sm",[Nh.variable]:"sizes.8"},xs:{[Ih.variable]:"fontSizes.xs",[Lh.variable]:"space.2",[zh.variable]:"radii.sm",[Nh.variable]:"sizes.6"}},Z0e={lg:tl({field:ql.lg,group:ql.lg}),md:tl({field:ql.md,group:ql.md}),sm:tl({field:ql.sm,group:ql.sm}),xs:tl({field:ql.xs,group:ql.xs})};function BF(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||ke("blue.500","blue.300")(e),errorBorderColor:n||ke("red.500","red.300")(e)}}var J0e=tl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=BF(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:ke("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:jr(t,r),boxShadow:`0 0 0 1px ${jr(t,r)}`},_focusVisible:{zIndex:1,borderColor:jr(t,n),boxShadow:`0 0 0 1px ${jr(t,n)}`}},addon:{border:"1px solid",borderColor:ke("inherit","whiteAlpha.50")(e),bg:ke("gray.100","whiteAlpha.300")(e)}}}),eye=tl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=BF(e);return{field:{border:"2px solid",borderColor:"transparent",bg:ke("gray.100","whiteAlpha.50")(e),_hover:{bg:ke("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:jr(t,r)},_focusVisible:{bg:"transparent",borderColor:jr(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:ke("gray.100","whiteAlpha.50")(e)}}}),tye=tl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=BF(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:jr(t,r),boxShadow:`0px 1px 0px 0px ${jr(t,r)}`},_focusVisible:{borderColor:jr(t,n),boxShadow:`0px 1px 0px 0px ${jr(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),nye=tl({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),rye={outline:J0e,filled:eye,flushed:tye,unstyled:nye},ot=K0e({baseStyle:Q0e,sizes:Z0e,variants:rye,defaultProps:{size:"md",variant:"outline"}}),uI,iye={...(uI=ot.baseStyle)==null?void 0:uI.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},cI,fI,oye={outline:e=>{var t,n;return(n=(t=ot.variants)==null?void 0:t.outline(e).field)!=null?n:{}},flushed:e=>{var t,n;return(n=(t=ot.variants)==null?void 0:t.flushed(e).field)!=null?n:{}},filled:e=>{var t,n;return(n=(t=ot.variants)==null?void 0:t.filled(e).field)!=null?n:{}},unstyled:(fI=(cI=ot.variants)==null?void 0:cI.unstyled.field)!=null?fI:{}},dI,hI,pI,gI,mI,yI,vI,bI,sye={xs:(hI=(dI=ot.sizes)==null?void 0:dI.xs.field)!=null?hI:{},sm:(gI=(pI=ot.sizes)==null?void 0:pI.sm.field)!=null?gI:{},md:(yI=(mI=ot.sizes)==null?void 0:mI.md.field)!=null?yI:{},lg:(bI=(vI=ot.sizes)==null?void 0:vI.lg.field)!=null?bI:{}},aye={baseStyle:iye,sizes:sye,variants:oye,defaultProps:{size:"md",variant:"outline"}},Tb=Sn("tooltip-bg"),i$=Sn("tooltip-fg"),lye=Sn("popper-arrow-bg"),uye={bg:Tb.reference,color:i$.reference,[Tb.variable]:"colors.gray.700",[i$.variable]:"colors.whiteAlpha.900",_dark:{[Tb.variable]:"colors.gray.300",[i$.variable]:"colors.gray.900"},[lye.variable]:Tb.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},cye={baseStyle:uye},{defineMultiStyleConfig:fye,definePartsStyle:h0}=Ct(kme.keys),dye=e=>{const{colorScheme:t,theme:n,isIndeterminate:r,hasStripe:i}=e,o=ke(nI(),nI("1rem","rgba(0,0,0,0.1)"))(e),s=ke(`${t}.500`,`${t}.200`)(e),a=`linear-gradient(
    to right,
    transparent 0%,
    ${jr(n,s)} 50%,
    transparent 100%
  )`;return{...!r&&i&&o,...r?{bgImage:a}:{bgColor:s}}},hye={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},pye=e=>({bg:ke("gray.100","whiteAlpha.300")(e)}),gye=e=>({transitionProperty:"common",transitionDuration:"slow",...dye(e)}),mye=h0(e=>({label:hye,filledTrack:gye(e),track:pye(e)})),yye={xs:h0({track:{h:"1"}}),sm:h0({track:{h:"2"}}),md:h0({track:{h:"3"}}),lg:h0({track:{h:"4"}})},vye=fye({sizes:yye,baseStyle:mye,defaultProps:{size:"md",colorScheme:"blue"}}),bye=e=>typeof e=="function";function Hr(e,...t){return bye(e)?e(...t):e}var{definePartsStyle:Zx,defineMultiStyleConfig:xye}=Ct(dme.keys),ey=Ce("checkbox-size"),wye=e=>{const{colorScheme:t}=e;return{w:ey.reference,h:ey.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:ke(`${t}.500`,`${t}.200`)(e),borderColor:ke(`${t}.500`,`${t}.200`)(e),color:ke("white","gray.900")(e),_hover:{bg:ke(`${t}.600`,`${t}.300`)(e),borderColor:ke(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:ke("gray.200","transparent")(e),bg:ke("gray.200","whiteAlpha.300")(e),color:ke("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:ke(`${t}.500`,`${t}.200`)(e),borderColor:ke(`${t}.500`,`${t}.200`)(e),color:ke("white","gray.900")(e)},_disabled:{bg:ke("gray.100","whiteAlpha.100")(e),borderColor:ke("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:ke("red.500","red.300")(e)}}},Sye={_disabled:{cursor:"not-allowed"}},kye={userSelect:"none",_disabled:{opacity:.4}},Cye={transitionProperty:"transform",transitionDuration:"normal"},_ye=Zx(e=>({icon:Cye,container:Sye,control:Hr(wye,e),label:kye})),Eye={sm:Zx({control:{[ey.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:Zx({control:{[ey.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:Zx({control:{[ey.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},lw=xye({baseStyle:_ye,sizes:Eye,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:$ye,definePartsStyle:Jx}=Ct(Cme.keys),Aye=e=>{var t;const n=(t=Hr(lw.baseStyle,e))==null?void 0:t.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},Tye=Jx(e=>{var t,n,r,i;return{label:(n=(t=lw).baseStyle)==null?void 0:n.call(t,e).label,container:(i=(r=lw).baseStyle)==null?void 0:i.call(r,e).container,control:Aye(e)}}),Mye={md:Jx({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:Jx({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:Jx({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},Fye=$ye({baseStyle:Tye,sizes:Mye,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Pye,definePartsStyle:Rye}=Ct(_me.keys),Mb=Ce("select-bg"),xI,Dye={...(xI=ot.baseStyle)==null?void 0:xI.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:Mb.reference,[Mb.variable]:"colors.white",_dark:{[Mb.variable]:"colors.gray.700"},"> option, > optgroup":{bg:Mb.reference}},Oye={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},Nye=Rye({field:Dye,icon:Oye}),Fb={paddingInlineEnd:"8"},wI,SI,kI,CI,_I,EI,$I,AI,Iye={lg:{...(wI=ot.sizes)==null?void 0:wI.lg,field:{...(SI=ot.sizes)==null?void 0:SI.lg.field,...Fb}},md:{...(kI=ot.sizes)==null?void 0:kI.md,field:{...(CI=ot.sizes)==null?void 0:CI.md.field,...Fb}},sm:{...(_I=ot.sizes)==null?void 0:_I.sm,field:{...(EI=ot.sizes)==null?void 0:EI.sm.field,...Fb}},xs:{...($I=ot.sizes)==null?void 0:$I.xs,field:{...(AI=ot.sizes)==null?void 0:AI.xs.field,...Fb},icon:{insetEnd:"1"}}},Lye=Pye({baseStyle:Nye,sizes:Iye,variants:ot.variants,defaultProps:ot.defaultProps}),o$=Ce("skeleton-start-color"),s$=Ce("skeleton-end-color"),zye={[o$.variable]:"colors.gray.100",[s$.variable]:"colors.gray.400",_dark:{[o$.variable]:"colors.gray.800",[s$.variable]:"colors.gray.600"},background:o$.reference,borderColor:s$.reference,opacity:.7,borderRadius:"sm"},Bye={baseStyle:zye},a$=Ce("skip-link-bg"),jye={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[a$.variable]:"colors.white",_dark:{[a$.variable]:"colors.gray.700"},bg:a$.reference}},Uye={baseStyle:jye},{defineMultiStyleConfig:Vye,definePartsStyle:Hk}=Ct(Eme.keys),Gy=Ce("slider-thumb-size"),Yy=Ce("slider-track-size"),fu=Ce("slider-bg"),Wye=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...zF({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},Hye=e=>({...zF({orientation:e.orientation,horizontal:{h:Yy.reference},vertical:{w:Yy.reference}}),overflow:"hidden",borderRadius:"sm",[fu.variable]:"colors.gray.200",_dark:{[fu.variable]:"colors.whiteAlpha.200"},_disabled:{[fu.variable]:"colors.gray.300",_dark:{[fu.variable]:"colors.whiteAlpha.300"}},bg:fu.reference}),qye=e=>{const{orientation:t}=e;return{...zF({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:Gy.reference,h:Gy.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},Gye=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[fu.variable]:`colors.${t}.500`,_dark:{[fu.variable]:`colors.${t}.200`},bg:fu.reference}},Yye=Hk(e=>({container:Wye(e),track:Hye(e),thumb:qye(e),filledTrack:Gye(e)})),Xye=Hk({container:{[Gy.variable]:"sizes.4",[Yy.variable]:"sizes.1"}}),Kye=Hk({container:{[Gy.variable]:"sizes.3.5",[Yy.variable]:"sizes.1"}}),Qye=Hk({container:{[Gy.variable]:"sizes.2.5",[Yy.variable]:"sizes.0.5"}}),Zye={lg:Xye,md:Kye,sm:Qye},Jye=Vye({baseStyle:Yye,sizes:Zye,defaultProps:{size:"md",colorScheme:"blue"}}),uf=Sn("spinner-size"),e1e={width:[uf.reference],height:[uf.reference]},t1e={xs:{[uf.variable]:"sizes.3"},sm:{[uf.variable]:"sizes.4"},md:{[uf.variable]:"sizes.6"},lg:{[uf.variable]:"sizes.8"},xl:{[uf.variable]:"sizes.12"}},n1e={baseStyle:e1e,sizes:t1e,defaultProps:{size:"md"}},{defineMultiStyleConfig:r1e,definePartsStyle:MG}=Ct($me.keys),i1e={fontWeight:"medium"},o1e={opacity:.8,marginBottom:"2"},s1e={verticalAlign:"baseline",fontWeight:"semibold"},a1e={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},l1e=MG({container:{},label:i1e,helpText:o1e,number:s1e,icon:a1e}),u1e={md:MG({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},c1e=r1e({baseStyle:l1e,sizes:u1e,defaultProps:{size:"md"}}),l$=Ce("kbd-bg"),f1e={[l$.variable]:"colors.gray.100",_dark:{[l$.variable]:"colors.whiteAlpha.100"},bg:l$.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},d1e={baseStyle:f1e},h1e={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},p1e={baseStyle:h1e},{defineMultiStyleConfig:g1e,definePartsStyle:m1e}=Ct(vme.keys),y1e={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},v1e=m1e({icon:y1e}),b1e=g1e({baseStyle:v1e}),{defineMultiStyleConfig:x1e,definePartsStyle:w1e}=Ct(bme.keys),Us=Ce("menu-bg"),u$=Ce("menu-shadow"),S1e={[Us.variable]:"#fff",[u$.variable]:"shadows.sm",_dark:{[Us.variable]:"colors.gray.700",[u$.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:Us.reference,boxShadow:u$.reference},k1e={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Us.variable]:"colors.gray.100",_dark:{[Us.variable]:"colors.whiteAlpha.100"}},_active:{[Us.variable]:"colors.gray.200",_dark:{[Us.variable]:"colors.whiteAlpha.200"}},_expanded:{[Us.variable]:"colors.gray.100",_dark:{[Us.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Us.reference},C1e={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},_1e={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},E1e={opacity:.6},$1e={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},A1e={transitionProperty:"common",transitionDuration:"normal"},T1e=w1e({button:A1e,list:S1e,item:k1e,groupTitle:C1e,icon:_1e,command:E1e,divider:$1e}),M1e=x1e({baseStyle:T1e}),{defineMultiStyleConfig:F1e,definePartsStyle:w3}=Ct(xme.keys),c$=Ce("modal-bg"),f$=Ce("modal-shadow"),P1e={bg:"blackAlpha.600",zIndex:"modal"},R1e=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},D1e=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[c$.variable]:"colors.white",[f$.variable]:"shadows.lg",_dark:{[c$.variable]:"colors.gray.700",[f$.variable]:"shadows.dark-lg"},bg:c$.reference,boxShadow:f$.reference}},O1e={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},N1e={position:"absolute",top:"2",insetEnd:"3"},I1e=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},L1e={px:"6",py:"4"},z1e=w3(e=>({overlay:P1e,dialogContainer:Hr(R1e,e),dialog:Hr(D1e,e),header:O1e,closeButton:N1e,body:Hr(I1e,e),footer:L1e}));function Uo(e){return w3(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var B1e={xs:Uo("xs"),sm:Uo("sm"),md:Uo("md"),lg:Uo("lg"),xl:Uo("xl"),"2xl":Uo("2xl"),"3xl":Uo("3xl"),"4xl":Uo("4xl"),"5xl":Uo("5xl"),"6xl":Uo("6xl"),full:Uo("full")},j1e=F1e({baseStyle:z1e,sizes:B1e,defaultProps:{size:"md"}}),{defineMultiStyleConfig:U1e,definePartsStyle:FG}=Ct(wme.keys),jF=Sn("number-input-stepper-width"),PG=Sn("number-input-input-padding"),V1e=Ka(jF).add("0.5rem").toString(),d$=Sn("number-input-bg"),h$=Sn("number-input-color"),p$=Sn("number-input-border-color"),W1e={[jF.variable]:"sizes.6",[PG.variable]:V1e},H1e=e=>{var t,n;return(n=(t=Hr(ot.baseStyle,e))==null?void 0:t.field)!=null?n:{}},q1e={width:jF.reference},G1e={borderStart:"1px solid",borderStartColor:p$.reference,color:h$.reference,bg:d$.reference,[h$.variable]:"colors.chakra-body-text",[p$.variable]:"colors.chakra-border-color",_dark:{[h$.variable]:"colors.whiteAlpha.800",[p$.variable]:"colors.whiteAlpha.300"},_active:{[d$.variable]:"colors.gray.200",_dark:{[d$.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Y1e=FG(e=>{var t;return{root:W1e,field:(t=Hr(H1e,e))!=null?t:{},stepperGroup:q1e,stepper:G1e}});function Pb(e){var t,n,r;const i=(t=ot.sizes)==null?void 0:t[e],o={lg:"md",md:"md",sm:"sm",xs:"sm"},s=(r=(n=i.field)==null?void 0:n.fontSize)!=null?r:"md",a=_G.fontSizes[s];return FG({field:{...i.field,paddingInlineEnd:PG.reference,verticalAlign:"top"},stepper:{fontSize:Ka(a).multiply(.75).toString(),_first:{borderTopEndRadius:o[e]},_last:{borderBottomEndRadius:o[e],mt:"-1px",borderTopWidth:1}}})}var X1e={xs:Pb("xs"),sm:Pb("sm"),md:Pb("md"),lg:Pb("lg")},K1e=U1e({baseStyle:Y1e,sizes:X1e,variants:ot.variants,defaultProps:ot.defaultProps}),TI,Q1e={...(TI=ot.baseStyle)==null?void 0:TI.field,textAlign:"center"},Z1e={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},MI,FI,J1e={outline:e=>{var t,n,r;return(r=(n=Hr((t=ot.variants)==null?void 0:t.outline,e))==null?void 0:n.field)!=null?r:{}},flushed:e=>{var t,n,r;return(r=(n=Hr((t=ot.variants)==null?void 0:t.flushed,e))==null?void 0:n.field)!=null?r:{}},filled:e=>{var t,n,r;return(r=(n=Hr((t=ot.variants)==null?void 0:t.filled,e))==null?void 0:n.field)!=null?r:{}},unstyled:(FI=(MI=ot.variants)==null?void 0:MI.unstyled.field)!=null?FI:{}},eve={baseStyle:Q1e,sizes:Z1e,variants:J1e,defaultProps:ot.defaultProps},{defineMultiStyleConfig:tve,definePartsStyle:nve}=Ct(Sme.keys),Rb=Sn("popper-bg"),rve=Sn("popper-arrow-bg"),PI=Sn("popper-arrow-shadow-color"),ive={zIndex:10},ove={[Rb.variable]:"colors.white",bg:Rb.reference,[rve.variable]:Rb.reference,[PI.variable]:"colors.gray.200",_dark:{[Rb.variable]:"colors.gray.700",[PI.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},sve={px:3,py:2,borderBottomWidth:"1px"},ave={px:3,py:2},lve={px:3,py:2,borderTopWidth:"1px"},uve={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},cve=nve({popper:ive,content:ove,header:sve,body:ave,footer:lve,closeButton:uve}),fve=tve({baseStyle:cve}),{definePartsStyle:S3,defineMultiStyleConfig:dve}=Ct(hme.keys),g$=Ce("drawer-bg"),m$=Ce("drawer-box-shadow");function eh(e){return S3(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var hve={bg:"blackAlpha.600",zIndex:"modal"},pve={display:"flex",zIndex:"modal",justifyContent:"center"},gve=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[g$.variable]:"colors.white",[m$.variable]:"shadows.lg",_dark:{[g$.variable]:"colors.gray.700",[m$.variable]:"shadows.dark-lg"},bg:g$.reference,boxShadow:m$.reference}},mve={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},yve={position:"absolute",top:"2",insetEnd:"3"},vve={px:"6",py:"2",flex:"1",overflow:"auto"},bve={px:"6",py:"4"},xve=S3(e=>({overlay:hve,dialogContainer:pve,dialog:Hr(gve,e),header:mve,closeButton:yve,body:vve,footer:bve})),wve={xs:eh("xs"),sm:eh("md"),md:eh("lg"),lg:eh("2xl"),xl:eh("4xl"),full:eh("full")},Sve=dve({baseStyle:xve,sizes:wve,defaultProps:{size:"xs"}}),{definePartsStyle:kve,defineMultiStyleConfig:Cve}=Ct(pme.keys),_ve={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},Eve={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},$ve={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Ave=kve({preview:_ve,input:Eve,textarea:$ve}),Tve=Cve({baseStyle:Ave}),{definePartsStyle:Mve,defineMultiStyleConfig:Fve}=Ct(gme.keys),op=Ce("form-control-color"),Pve={marginStart:"1",[op.variable]:"colors.red.500",_dark:{[op.variable]:"colors.red.300"},color:op.reference},Rve={mt:"2",[op.variable]:"colors.gray.600",_dark:{[op.variable]:"colors.whiteAlpha.600"},color:op.reference,lineHeight:"normal",fontSize:"sm"},Dve=Mve({container:{width:"100%",position:"relative"},requiredIndicator:Pve,helperText:Rve}),Ove=Fve({baseStyle:Dve}),{definePartsStyle:Nve,defineMultiStyleConfig:Ive}=Ct(mme.keys),sp=Ce("form-error-color"),Lve={[sp.variable]:"colors.red.500",_dark:{[sp.variable]:"colors.red.300"},color:sp.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},zve={marginEnd:"0.5em",[sp.variable]:"colors.red.500",_dark:{[sp.variable]:"colors.red.300"},color:sp.reference},Bve=Nve({text:Lve,icon:zve}),jve=Ive({baseStyle:Bve}),Uve={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},Vve={baseStyle:Uve},Wve={fontFamily:"heading",fontWeight:"bold"},Hve={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},qve={baseStyle:Wve,sizes:Hve,defaultProps:{size:"xl"}},{defineMultiStyleConfig:Gve,definePartsStyle:Yve}=Ct(fme.keys),y$=Ce("breadcrumb-link-decor"),Xve={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:y$.reference,[y$.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[y$.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Kve=Yve({link:Xve}),Qve=Gve({baseStyle:Kve}),Zve={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},RG=e=>{const{colorScheme:t,theme:n}=e;if(t==="gray")return{color:ke("gray.800","whiteAlpha.900")(e),_hover:{bg:ke("gray.100","whiteAlpha.200")(e)},_active:{bg:ke("gray.200","whiteAlpha.300")(e)}};const r=Up(`${t}.200`,.12)(n),i=Up(`${t}.200`,.24)(n);return{color:ke(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:ke(`${t}.50`,r)(e)},_active:{bg:ke(`${t}.100`,i)(e)}}},Jve=e=>{const{colorScheme:t}=e,n=ke("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Hr(RG,e)}},ebe={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},tbe=e=>{var t;const{colorScheme:n}=e;if(n==="gray"){const l=ke("gray.100","whiteAlpha.200")(e);return{bg:l,color:ke("gray.800","whiteAlpha.900")(e),_hover:{bg:ke("gray.200","whiteAlpha.300")(e),_disabled:{bg:l}},_active:{bg:ke("gray.300","whiteAlpha.400")(e)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:o=`${n}.600`,activeBg:s=`${n}.700`}=(t=ebe[n])!=null?t:{},a=ke(r,`${n}.200`)(e);return{bg:a,color:ke(i,"gray.800")(e),_hover:{bg:ke(o,`${n}.300`)(e),_disabled:{bg:a}},_active:{bg:ke(s,`${n}.400`)(e)}}},nbe=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:ke(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:ke(`${t}.700`,`${t}.500`)(e)}}},rbe={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},ibe={ghost:RG,outline:Jve,solid:tbe,link:nbe,unstyled:rbe},obe={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},sbe={baseStyle:Zve,variants:ibe,sizes:obe,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Nf,defineMultiStyleConfig:abe}=Ct(Pme.keys),uw=Ce("card-bg"),ul=Ce("card-padding"),DG=Ce("card-shadow"),e2=Ce("card-radius"),OG=Ce("card-border-width","0"),NG=Ce("card-border-color"),lbe=Nf({container:{[uw.variable]:"colors.chakra-body-bg",backgroundColor:uw.reference,boxShadow:DG.reference,borderRadius:e2.reference,color:"chakra-body-text",borderWidth:OG.reference,borderColor:NG.reference},body:{padding:ul.reference,flex:"1 1 0%"},header:{padding:ul.reference},footer:{padding:ul.reference}}),ube={sm:Nf({container:{[e2.variable]:"radii.base",[ul.variable]:"space.3"}}),md:Nf({container:{[e2.variable]:"radii.md",[ul.variable]:"space.5"}}),lg:Nf({container:{[e2.variable]:"radii.xl",[ul.variable]:"space.7"}})},cbe={elevated:Nf({container:{[DG.variable]:"shadows.base",_dark:{[uw.variable]:"colors.gray.700"}}}),outline:Nf({container:{[OG.variable]:"1px",[NG.variable]:"colors.chakra-border-color"}}),filled:Nf({container:{[uw.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[ul.variable]:0},header:{[ul.variable]:0},footer:{[ul.variable]:0}}},fbe=abe({baseStyle:lbe,variants:cbe,sizes:ube,defaultProps:{variant:"elevated",size:"md"}}),ty=Sn("close-button-size"),$m=Sn("close-button-bg"),dbe={w:[ty.reference],h:[ty.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[$m.variable]:"colors.blackAlpha.100",_dark:{[$m.variable]:"colors.whiteAlpha.100"}},_active:{[$m.variable]:"colors.blackAlpha.200",_dark:{[$m.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:$m.reference},hbe={lg:{[ty.variable]:"sizes.10",fontSize:"md"},md:{[ty.variable]:"sizes.8",fontSize:"xs"},sm:{[ty.variable]:"sizes.6",fontSize:"2xs"}},pbe={baseStyle:dbe,sizes:hbe,defaultProps:{size:"md"}},{variants:gbe,defaultProps:mbe}=J0,ybe={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:nn.bg.reference,color:nn.color.reference,boxShadow:nn.shadow.reference},vbe={baseStyle:ybe,variants:gbe,defaultProps:mbe},bbe={w:"100%",mx:"auto",maxW:"prose",px:"4"},xbe={baseStyle:bbe},wbe={opacity:.6,borderColor:"inherit"},Sbe={borderStyle:"solid"},kbe={borderStyle:"dashed"},Cbe={solid:Sbe,dashed:kbe},_be={baseStyle:wbe,variants:Cbe,defaultProps:{variant:"solid"}},{definePartsStyle:Ebe,defineMultiStyleConfig:$be}=Ct(lme.keys),Abe={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},Tbe={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},Mbe={pt:"2",px:"4",pb:"5"},Fbe={fontSize:"1.25em"},Pbe=Ebe({container:Abe,button:Tbe,panel:Mbe,icon:Fbe}),Rbe=$be({baseStyle:Pbe}),{definePartsStyle:G1,defineMultiStyleConfig:Dbe}=Ct(ume.keys),Ui=Ce("alert-fg"),Cl=Ce("alert-bg"),Obe=G1({container:{bg:Cl.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Ui.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Ui.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function UF(e){const{theme:t,colorScheme:n}=e,r=Up(`${n}.200`,.16)(t);return{light:`colors.${n}.100`,dark:r}}var Nbe=G1(e=>{const{colorScheme:t}=e,n=UF(e);return{container:{[Ui.variable]:`colors.${t}.600`,[Cl.variable]:n.light,_dark:{[Ui.variable]:`colors.${t}.200`,[Cl.variable]:n.dark}}}}),Ibe=G1(e=>{const{colorScheme:t}=e,n=UF(e);return{container:{[Ui.variable]:`colors.${t}.600`,[Cl.variable]:n.light,_dark:{[Ui.variable]:`colors.${t}.200`,[Cl.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Ui.reference}}}),Lbe=G1(e=>{const{colorScheme:t}=e,n=UF(e);return{container:{[Ui.variable]:`colors.${t}.600`,[Cl.variable]:n.light,_dark:{[Ui.variable]:`colors.${t}.200`,[Cl.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Ui.reference}}}),zbe=G1(e=>{const{colorScheme:t}=e;return{container:{[Ui.variable]:"colors.white",[Cl.variable]:`colors.${t}.600`,_dark:{[Ui.variable]:"colors.gray.900",[Cl.variable]:`colors.${t}.200`},color:Ui.reference}}}),Bbe={subtle:Nbe,"left-accent":Ibe,"top-accent":Lbe,solid:zbe},jbe=Dbe({baseStyle:Obe,variants:Bbe,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:IG,defineMultiStyleConfig:Ube}=Ct(cme.keys),ap=Ce("avatar-border-color"),ny=Ce("avatar-bg"),Xy=Ce("avatar-font-size"),Vp=Ce("avatar-size"),Vbe={borderRadius:"full",border:"0.2em solid",borderColor:ap.reference,[ap.variable]:"white",_dark:{[ap.variable]:"colors.gray.800"}},Wbe={bg:ny.reference,fontSize:Xy.reference,width:Vp.reference,height:Vp.reference,lineHeight:"1",[ny.variable]:"colors.gray.200",_dark:{[ny.variable]:"colors.whiteAlpha.400"}},Hbe=e=>{const{name:t,theme:n}=e,r=t?Zme({string:t}):"colors.gray.400",i=Kme(r)(n);let o="white";return i||(o="gray.800"),{bg:ny.reference,fontSize:Xy.reference,color:o,borderColor:ap.reference,verticalAlign:"top",width:Vp.reference,height:Vp.reference,"&:not([data-loaded])":{[ny.variable]:r},[ap.variable]:"colors.white",_dark:{[ap.variable]:"colors.gray.800"}}},qbe={fontSize:Xy.reference,lineHeight:"1"},Gbe=IG(e=>({badge:Hr(Vbe,e),excessLabel:Hr(Wbe,e),container:Hr(Hbe,e),label:qbe}));function Gl(e){const t=e!=="100%"?$G[e]:void 0;return IG({container:{[Vp.variable]:t??e,[Xy.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[Vp.variable]:t??e,[Xy.variable]:`calc(${t??e} / 2.5)`}})}var Ybe={"2xs":Gl(4),xs:Gl(6),sm:Gl(8),md:Gl(12),lg:Gl(16),xl:Gl(24),"2xl":Gl(32),full:Gl("100%")},Xbe=Ube({baseStyle:Gbe,sizes:Ybe,defaultProps:{size:"md"}}),Kbe={Accordion:Rbe,Alert:jbe,Avatar:Xbe,Badge:J0,Breadcrumb:Qve,Button:sbe,Checkbox:lw,CloseButton:pbe,Code:vbe,Container:xbe,Divider:_be,Drawer:Sve,Editable:Tve,Form:Ove,FormError:jve,FormLabel:Vve,Heading:qve,Input:ot,Kbd:d1e,Link:p1e,List:b1e,Menu:M1e,Modal:j1e,NumberInput:K1e,PinInput:eve,Popover:fve,Progress:vye,Radio:Fye,Select:Lye,Skeleton:Bye,SkipLink:Uye,Slider:Jye,Spinner:n1e,Stat:c1e,Switch:p0e,Table:w0e,Tabs:N0e,Tag:X0e,Textarea:aye,Tooltip:cye,Card:fbe,Stepper:ame},Qbe={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},Zbe={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},Jbe="ltr",exe={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},LG={semanticTokens:Qbe,direction:Jbe,...ime,components:Kbe,styles:Zbe,config:exe};function p0(e){return typeof e=="function"}function txe(...e){return t=>e.reduce((n,r)=>r(n),t)}var nxe=e=>function(...n){let r=[...n],i=n[n.length-1];return Dge(i)&&r.length>1?r=r.slice(0,r.length-1):i=e,txe(...r.map(o=>s=>p0(o)?o(s):ixe(s,o)))(i)},rxe=nxe(LG);function ixe(...e){return xo({},...e,zG)}function zG(e,t,n,r){if((p0(e)||p0(t))&&Object.prototype.hasOwnProperty.call(r,n))return(...i)=>{const o=p0(e)?e(...i):e,s=p0(t)?t(...i):t;return xo({},o,s,zG)}}function oxe(e,t){const n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}function sxe(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var axe=e=>{const t=new WeakMap;return(r,i,o,s)=>{if(typeof r>"u")return e(r,i,o);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,o,s);return a.set(i,l),l}},BG=axe(sxe);function jG(e,t){const n={};return Object.keys(e).forEach(r=>{const i=e[r];t(i,r,e)&&(n[r]=i)}),n}var UG=e=>jG(e,t=>t!=null);function lxe(e){return typeof e=="function"}function VG(e,...t){return lxe(e)?e(...t):e}var uxe=typeof Element<"u",cxe=typeof Map=="function",fxe=typeof Set=="function",dxe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function t2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!t2(e[r],t[r]))return!1;return!0}var o;if(cxe&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!t2(r.value[1],t.get(r.value[0])))return!1;return!0}if(fxe&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(dxe&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(uxe&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!t2(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var hxe=function(t,n){try{return t2(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const pxe=Fl(hxe);function WG(e,t={}){var n;const{styleConfig:r,...i}=t,{theme:o,colorMode:s}=yG(),a=e?BG(o,`components.${e}`):void 0,l=r||a,u=xo({theme:o,colorMode:s},(n=l==null?void 0:l.defaultProps)!=null?n:{},UG(oxe(i,["children"]))),c=F.useRef({});if(l){const d=Pge(l)(u);pxe(c.current,d)||(c.current=d)}return c.current}function Rl(e,t={}){return WG(e,t)}function bc(e,t={}){return WG(e,t)}var gxe=new Set([...xge,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),mxe=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function yxe(e){return mxe.has(e)||!gxe.has(e)}function vxe(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const n={...e};for(const r of t)if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(i in n&&delete n[i],n[i]=r[i]);return n}function HG(e){const t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}var bxe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,xxe=JW(function(e){return bxe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),wxe=xxe,Sxe=function(t){return t!=="theme"},RI=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?wxe:Sxe},DI=function(t,n,r){var i;if(n){var o=n.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(s){return t.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},kxe=!1,Cxe=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return oH(n,r,i),Wfe(function(){return sH(n,r,i)}),null},_xe=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,o,s;n!==void 0&&(o=n.label,s=n.target);var a=DI(t,n,r),l=a||RI(i),u=!l("as");return function(){var c=arguments,f=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&f.push("label:"+o+";"),c[0]==null||c[0].raw===void 0)f.push.apply(f,c);else{f.push(c[0][0]);for(var d=c.length,h=1;h<d;h++)f.push(c[h],c[0][h])}var p=cH(function(g,m,y){var v=u&&g.as||i,b="",x=[],w=g;if(g.theme==null){w={};for(var k in g)w[k]=g[k];w.theme=F.useContext(Ay)}typeof g.className=="string"?b=Ofe(m.registered,x,g.className):g.className!=null&&(b=g.className+" ");var S=BM(f.concat(x),m.registered,w);b+=m.key+"-"+S.name,s!==void 0&&(b+=" "+s);var C=u&&a===void 0?RI(v):l,_={};for(var $ in g)u&&$==="as"||C($)&&(_[$]=g[$]);return _.className=b,y&&(_.ref=y),F.createElement(F.Fragment,null,F.createElement(Cxe,{cache:m,serialized:S,isStringTag:typeof v=="string"}),F.createElement(v,_))});return p.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=f,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return s===void 0&&kxe?"NO_COMPONENT_SELECTOR":"."+s}}),p.withComponent=function(g,m){return e(g,D2({},n,m,{shouldForwardProp:DI(p,m,!0)})).apply(void 0,f)},p}},Exe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],cw=_xe.bind();Exe.forEach(function(e){cw[e]=cw(e)});var OI,$xe=(OI=cw.default)!=null?OI:cw,Axe=({baseStyle:e})=>t=>{const{theme:n,css:r,__css:i,sx:o,...s}=t,a=jG(s,(f,d)=>Sge(d)),l=VG(e,t),u=vxe({},i,l,UG(a),o),c=CG(u)(t.theme);return r?[c,r]:c};function v$(e,t){const{baseStyle:n,...r}=t??{};r.shouldForwardProp||(r.shouldForwardProp=yxe);const i=Axe({baseStyle:n}),o=$xe(e,r)(i);return zi.forwardRef(function(l,u){const{colorMode:c,forced:f}=Bg();return zi.createElement(o,{ref:u,"data-theme":f?c:void 0,...l})})}function Txe(){const e=new Map;return new Proxy(v$,{apply(t,n,r){return v$(...r)},get(t,n){return e.has(n)||e.set(n,v$(n)),e.get(n)}})}var Ae=Txe();function Pe(e){return F.forwardRef(e)}function Mxe(e={}){const{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=e,i=F.createContext(void 0);i.displayName=r;function o(){var s;const a=F.useContext(i);if(!a&&t){const l=new Error(n);throw l.name="ContextError",(s=Error.captureStackTrace)==null||s.call(Error,l,o),l}return a}return[i.Provider,o,i]}function Fxe(e){const{cssVarsRoot:t,theme:n,children:r}=e,i=F.useMemo(()=>yge(n),[n]);return E.jsxs(Gfe,{theme:i,children:[E.jsx(Pxe,{root:t}),r]})}function Pxe({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return E.jsx(Ek,{styles:n=>({[t]:n.__cssVars})})}Mxe({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function Rxe(){const{colorMode:e}=Bg();return E.jsx(Ek,{styles:t=>{const n=BG(t,"styles.global"),r=VG(n,{theme:t,colorMode:e});return r?CG(r)(t):void 0}})}var VF=F.createContext({getDocument(){return document},getWindow(){return window}});VF.displayName="EnvironmentContext";function Dxe({defer:e}={}){const[,t]=F.useReducer(n=>n+1,0);return Dp(()=>{e&&t()},[e]),F.useContext(VF)}function qG(e){const{children:t,environment:n,disabled:r}=e,i=F.useRef(null),o=F.useMemo(()=>n||{getDocument:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument)!=null?l:document},getWindow:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument.defaultView)!=null?l:window}},[n]),s=!r||!n;return E.jsxs(VF.Provider,{value:o,children:[t,s&&E.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}qG.displayName="EnvironmentProvider";var Oxe=e=>{const{children:t,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:o=!0,theme:s={},environment:a,cssVarsRoot:l,disableEnvironment:u,disableGlobalStyle:c}=e,f=E.jsx(qG,{environment:a,disabled:u,children:t});return E.jsx(Fxe,{theme:s,cssVarsRoot:l,children:E.jsxs(mG,{colorModeManager:n,options:s.config,children:[o?E.jsx(Qfe,{scope:i}):E.jsx(Kfe,{}),!c&&E.jsx(Rxe,{}),r?E.jsx(hH,{zIndex:r,children:f}):f]})})},Nxe=(e,t)=>e.find(n=>n.id===t);function NI(e,t){const n=GG(e,t),r=n?e[n].findIndex(i=>i.id===t):-1;return{position:n,index:r}}function GG(e,t){for(const[n,r]of Object.entries(e))if(Nxe(r,t))return n}function Ixe(e){const t=e.includes("right"),n=e.includes("left");let r="center";return t&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function Lxe(e){const n=e==="top"||e==="bottom"?"0 auto":void 0,r=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,o=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",s=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:i,right:o,left:s}}function n2(e,t=[]){const n=F.useRef(e);return F.useEffect(()=>{n.current=e}),F.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},t)}function zxe(e,t){const n=n2(e);F.useEffect(()=>{if(t==null)return;let r=null;return r=window.setTimeout(()=>{n()},t),()=>{r&&window.clearTimeout(r)}},[t,n])}function II(e,t){const n=F.useRef(!1),r=F.useRef(!1);F.useEffect(()=>{if(n.current&&r.current)return e();r.current=!0},t),F.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const YG=F.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),qk=F.createContext({}),Y1=F.createContext(null),Gk=typeof document<"u",WF=Gk?F.useLayoutEffect:F.useEffect,XG=F.createContext({strict:!1}),HF=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Bxe="framerAppearId",KG="data-"+HF(Bxe);function jxe(e,t,n,r){const{visualElement:i}=F.useContext(qk),o=F.useContext(XG),s=F.useContext(Y1),a=F.useContext(YG).reducedMotion,l=F.useRef();r=r||o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:i,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;F.useInsertionEffect(()=>{u&&u.update(n,s)});const c=F.useRef(!!(n[KG]&&!window.HandoffComplete));return WF(()=>{u&&(u.render(),c.current&&u.animationState&&u.animationState.animateChanges())}),F.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}function Bh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Uxe(e,t,n){return F.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Bh(n)&&(n.current=r))},[t])}function Ky(e){return typeof e=="string"||Array.isArray(e)}function Yk(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const qF=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],GF=["initial",...qF];function Xk(e){return Yk(e.animate)||GF.some(t=>Ky(e[t]))}function QG(e){return!!(Xk(e)||e.variants)}function Vxe(e,t){if(Xk(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ky(n)?n:void 0,animate:Ky(r)?r:void 0}}return e.inherit!==!1?t:{}}function Wxe(e){const{initial:t,animate:n}=Vxe(e,F.useContext(qk));return F.useMemo(()=>({initial:t,animate:n}),[LI(t),LI(n)])}function LI(e){return Array.isArray(e)?e.join(" "):e}const zI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qy={};for(const e in zI)Qy[e]={isEnabled:t=>zI[e].some(n=>!!t[n])};function Hxe(e){for(const t in e)Qy[t]={...Qy[t],...e[t]}}const YF=F.createContext({}),ZG=F.createContext({}),qxe=Symbol.for("motionComponentSymbol");function Gxe({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&Hxe(e);function o(a,l){let u;const c={...F.useContext(YG),...a,layoutId:Yxe(a)},{isStatic:f}=c,d=Wxe(a),h=r(a,f);if(!f&&Gk){d.visualElement=jxe(i,h,c,t);const p=F.useContext(ZG),g=F.useContext(XG).strict;d.visualElement&&(u=d.visualElement.loadFeatures(c,g,e,p))}return F.createElement(qk.Provider,{value:d},u&&d.visualElement?F.createElement(u,{visualElement:d.visualElement,...c}):null,n(i,a,Uxe(h,d.visualElement,l),h,f,d.visualElement))}const s=F.forwardRef(o);return s[qxe]=i,s}function Yxe({layoutId:e}){const t=F.useContext(YF).id;return t&&e!==void 0?t+"-"+e:e}function Xxe(e){function t(r,i={}){return Gxe(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const Kxe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function XF(e){return typeof e!="string"||e.includes("-")?!1:!!(Kxe.indexOf(e)>-1||/[A-Z]/.test(e))}const fw={};function Qxe(e){Object.assign(fw,e)}const X1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$d=new Set(X1);function JG(e,{layout:t,layoutId:n}){return $d.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!fw[e]||e==="opacity")}const vi=e=>!!(e&&e.getVelocity),Zxe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Jxe=X1.length;function e2e(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let o="";for(let s=0;s<Jxe;s++){const a=X1[s];if(e[a]!==void 0){const l=Zxe[a]||a;o+=`${l}(${e[a]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(e,r?"":o):n&&r&&(o="none"),o}const eY=e=>t=>typeof t=="string"&&t.startsWith(e),tY=eY("--"),k3=eY("var(--"),t2e=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,n2e=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Qu=(e,t,n)=>Math.min(Math.max(n,e),t),Ad={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ry={...Ad,transform:e=>Qu(0,1,e)},Db={...Ad,default:1},iy=e=>Math.round(e*1e5)/1e5,Kk=/(-)?([\d]*\.?[\d])+/g,nY=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,r2e=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function K1(e){return typeof e=="string"}const Q1=e=>({test:t=>K1(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Xl=Q1("deg"),ca=Q1("%"),$e=Q1("px"),i2e=Q1("vh"),o2e=Q1("vw"),BI={...ca,parse:e=>ca.parse(e)/100,transform:e=>ca.transform(e*100)},jI={...Ad,transform:Math.round},rY={borderWidth:$e,borderTopWidth:$e,borderRightWidth:$e,borderBottomWidth:$e,borderLeftWidth:$e,borderRadius:$e,radius:$e,borderTopLeftRadius:$e,borderTopRightRadius:$e,borderBottomRightRadius:$e,borderBottomLeftRadius:$e,width:$e,maxWidth:$e,height:$e,maxHeight:$e,size:$e,top:$e,right:$e,bottom:$e,left:$e,padding:$e,paddingTop:$e,paddingRight:$e,paddingBottom:$e,paddingLeft:$e,margin:$e,marginTop:$e,marginRight:$e,marginBottom:$e,marginLeft:$e,rotate:Xl,rotateX:Xl,rotateY:Xl,rotateZ:Xl,scale:Db,scaleX:Db,scaleY:Db,scaleZ:Db,skew:Xl,skewX:Xl,skewY:Xl,distance:$e,translateX:$e,translateY:$e,translateZ:$e,x:$e,y:$e,z:$e,perspective:$e,transformPerspective:$e,opacity:ry,originX:BI,originY:BI,originZ:$e,zIndex:jI,fillOpacity:ry,strokeOpacity:ry,numOctaves:jI};function KF(e,t,n,r){const{style:i,vars:o,transform:s,transformOrigin:a}=e;let l=!1,u=!1,c=!0;for(const f in t){const d=t[f];if(tY(f)){o[f]=d;continue}const h=rY[f],p=n2e(d,h);if($d.has(f)){if(l=!0,s[f]=p,!c)continue;d!==(h.default||0)&&(c=!1)}else f.startsWith("origin")?(u=!0,a[f]=p):i[f]=p}if(t.transform||(l||r?i.transform=e2e(e.transform,n,c,r):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:d="50%",originZ:h=0}=a;i.transformOrigin=`${f} ${d} ${h}`}}const QF=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iY(e,t,n){for(const r in t)!vi(t[r])&&!JG(r,n)&&(e[r]=t[r])}function s2e({transformTemplate:e},t,n){return F.useMemo(()=>{const r=QF();return KF(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function a2e(e,t,n){const r=e.style||{},i={};return iY(i,r,e),Object.assign(i,s2e(e,t,n)),e.transformValues?e.transformValues(i):i}function l2e(e,t,n){const r={},i=a2e(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const u2e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function dw(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||u2e.has(e)}let oY=e=>!dw(e);function c2e(e){e&&(oY=t=>t.startsWith("on")?!dw(t):e(t))}try{c2e(require("@emotion/is-prop-valid").default)}catch{}function f2e(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(oY(i)||n===!0&&dw(i)||!t&&!dw(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function UI(e,t,n){return typeof e=="string"?e:$e.transform(t+n*e)}function d2e(e,t,n){const r=UI(t,e.x,e.width),i=UI(n,e.y,e.height);return`${r} ${i}`}const h2e={offset:"stroke-dashoffset",array:"stroke-dasharray"},p2e={offset:"strokeDashoffset",array:"strokeDasharray"};function g2e(e,t,n=1,r=0,i=!0){e.pathLength=1;const o=i?h2e:p2e;e[o.offset]=$e.transform(-r);const s=$e.transform(t),a=$e.transform(n);e[o.array]=`${s} ${a}`}function ZF(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},c,f,d){if(KF(e,u,c,d),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:g}=e;h.transform&&(g&&(p.transform=h.transform),delete h.transform),g&&(i!==void 0||o!==void 0||p.transform)&&(p.transformOrigin=d2e(g,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&g2e(h,s,a,l,!1)}const sY=()=>({...QF(),attrs:{}}),JF=e=>typeof e=="string"&&e.toLowerCase()==="svg";function m2e(e,t,n,r){const i=F.useMemo(()=>{const o=sY();return ZF(o,t,{enableHardwareAcceleration:!1},JF(r),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};iY(o,e.style,e),i.style={...o,...i.style}}return i}function y2e(e=!1){return(n,r,i,{latestValues:o},s)=>{const l=(XF(n)?m2e:l2e)(r,o,s,n),c={...f2e(r,typeof n=="string",e),...l,ref:i},{children:f}=r,d=F.useMemo(()=>vi(f)?f.get():f,[f]);return F.createElement(n,{...c,children:d})}}function aY(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const o in n)e.style.setProperty(o,n[o])}const lY=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uY(e,t,n,r){aY(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(lY.has(i)?i:HF(i),t.attrs[i])}function eP(e,t){const{style:n}=e,r={};for(const i in n)(vi(n[i])||t.style&&vi(t.style[i])||JG(i,e))&&(r[i]=n[i]);return r}function cY(e,t){const n=eP(e,t);for(const r in e)if(vi(e[r])||vi(t[r])){const i=X1.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function tP(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function nP(e){const t=F.useRef(null);return t.current===null&&(t.current=e()),t.current}const hw=e=>Array.isArray(e),v2e=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),b2e=e=>hw(e)?e[e.length-1]||0:e;function r2(e){const t=vi(e)?e.get():e;return v2e(t)?t.toValue():t}function x2e({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,o){const s={latestValues:w2e(r,i,o,e),renderState:t()};return n&&(s.mount=a=>n(r,a,s)),s}const fY=e=>(t,n)=>{const r=F.useContext(qk),i=F.useContext(Y1),o=()=>x2e(e,t,r,i);return n?o():nP(o)};function w2e(e,t,n,r){const i={},o=r(e,{});for(const d in o)i[d]=r2(o[d]);let{initial:s,animate:a}=e;const l=Xk(e),u=QG(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const f=c?a:s;return f&&typeof f!="boolean"&&!Yk(f)&&(Array.isArray(f)?f:[f]).forEach(h=>{const p=tP(e,h);if(!p)return;const{transitionEnd:g,transition:m,...y}=p;for(const v in y){let b=y[v];if(Array.isArray(b)){const x=c?b.length-1:0;b=b[x]}b!==null&&(i[v]=b)}for(const v in g)i[v]=g[v]}),i}const tn=e=>e;class VI{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function S2e(e){let t=new VI,n=new VI,r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const f=c&&i,d=f?t:n;return u&&s.add(l),d.add(l)&&f&&i&&(r=t.order.length),l},cancel:l=>{n.remove(l),s.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const c=t.order[u];c(l),s.has(c)&&(a.schedule(c),e())}i=!1,o&&(o=!1,a.process(l))}};return a}const Ob=["prepare","read","update","preRender","render","postRender"],k2e=40;function C2e(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=Ob.reduce((f,d)=>(f[d]=S2e(()=>n=!0),f),{}),s=f=>o[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,k2e),1),i.timestamp=f,i.isProcessing=!0,Ob.forEach(s),i.isProcessing=!1,n&&t&&(r=!1,e(a))},l=()=>{n=!0,r=!0,i.isProcessing||e(a)};return{schedule:Ob.reduce((f,d)=>{const h=o[d];return f[d]=(p,g=!1,m=!1)=>(n||l(),h.schedule(p,g,m)),f},{}),cancel:f=>Ob.forEach(d=>o[d].cancel(f)),state:i,steps:o}}const{schedule:St,cancel:_l,state:dr,steps:b$}=C2e(typeof requestAnimationFrame<"u"?requestAnimationFrame:tn,!0),_2e={useVisualState:fY({scrapeMotionValuesFromProps:cY,createRenderState:sY,onMount:(e,t,{renderState:n,latestValues:r})=>{St.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),St.render(()=>{ZF(n,r,{enableHardwareAcceleration:!1},JF(t.tagName),e.transformTemplate),uY(t,n)})}})},E2e={useVisualState:fY({scrapeMotionValuesFromProps:eP,createRenderState:QF})};function $2e(e,{forwardMotionProps:t=!1},n,r){return{...XF(e)?_2e:E2e,preloadedFeatures:n,useRender:y2e(t),createVisualElement:r,Component:e}}function nl(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const dY=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Qk(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const A2e=e=>t=>dY(t)&&e(t,Qk(t));function cl(e,t,n,r){return nl(e,t,A2e(n),r)}const T2e=(e,t)=>n=>t(e(n)),Vu=(...e)=>e.reduce(T2e);function hY(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const WI=hY("dragHorizontal"),HI=hY("dragVertical");function pY(e){let t=!1;if(e==="y")t=HI();else if(e==="x")t=WI();else{const n=WI(),r=HI();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function gY(){const e=pY(!0);return e?(e(),!1):!0}let xc=class{constructor(t){this.isMounted=!1,this.node=t}update(){}};function qI(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(o,s)=>{if(o.pointerType==="touch"||gY())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&St.update(()=>a[r](o,s))};return cl(e.current,n,i,{passive:!e.getProps()[r]})}class M2e extends xc{mount(){this.unmount=Vu(qI(this.node,!0),qI(this.node,!1))}unmount(){}}class F2e extends xc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vu(nl(this.node.current,"focus",()=>this.onFocus()),nl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const mY=(e,t)=>t?e===t?!0:mY(e,t.parentElement):!1;function x$(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Qk(n))}class P2e extends xc{constructor(){super(...arguments),this.removeStartListeners=tn,this.removeEndListeners=tn,this.removeAccessibleListeners=tn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=cl(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:f}=this.node.getProps();St.update(()=>{!f&&!mY(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),s=cl(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Vu(o,s),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const s=a=>{a.key!=="Enter"||!this.checkPressEnd()||x$("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&St.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=nl(this.node.current,"keyup",s),x$("down",(a,l)=>{this.startPress(a,l)})},n=nl(this.node.current,"keydown",t),r=()=>{this.isPressing&&x$("cancel",(o,s)=>this.cancelPress(o,s))},i=nl(this.node.current,"blur",r);this.removeAccessibleListeners=Vu(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&St.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!gY()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&St.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=cl(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=nl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Vu(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const C3=new WeakMap,w$=new WeakMap,R2e=e=>{const t=C3.get(e.target);t&&t(e)},D2e=e=>{e.forEach(R2e)};function O2e({root:e,...t}){const n=e||document;w$.has(n)||w$.set(n,{});const r=w$.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(D2e,{root:e,...t})),r[i]}function N2e(e,t,n){const r=O2e(t);return C3.set(e,n),r.observe(e),()=>{C3.delete(e),r.unobserve(e)}}const I2e={some:0,all:1};class L2e extends xc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:I2e[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=u?c:f;d&&d(l)};return N2e(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(z2e(t,n))&&this.startObserver()}unmount(){}}function z2e({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const B2e={inView:{Feature:L2e},tap:{Feature:P2e},focus:{Feature:F2e},hover:{Feature:M2e}};function yY(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function j2e(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function U2e(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Zk(e,t,n){const r=e.getProps();return tP(r,t,n!==void 0?n:r.custom,j2e(e),U2e(e))}let pw=tn;const If=e=>e*1e3,fl=e=>e/1e3,V2e={current:!1},vY=e=>Array.isArray(e)&&typeof e[0]=="number";function bY(e){return!!(!e||typeof e=="string"&&xY[e]||vY(e)||Array.isArray(e)&&e.every(bY))}const g0=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,xY={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:g0([0,.65,.55,1]),circOut:g0([.55,0,1,.45]),backIn:g0([.31,.01,.66,-.59]),backOut:g0([.33,1.53,.69,.99])};function wY(e){if(e)return vY(e)?g0(e):Array.isArray(e)?e.map(wY):xY[e]}function W2e(e,t,n,{delay:r=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=wY(a);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}function H2e(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const SY=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,q2e=1e-7,G2e=12;function Y2e(e,t,n,r,i){let o,s,a=0;do s=t+(n-t)/2,o=SY(s,r,i)-e,o>0?n=s:t=s;while(Math.abs(o)>q2e&&++a<G2e);return s}function Z1(e,t,n,r){if(e===t&&n===r)return tn;const i=o=>Y2e(o,0,1,e,n);return o=>o===0||o===1?o:SY(i(o),t,r)}const X2e=Z1(.42,0,1,1),K2e=Z1(0,0,.58,1),kY=Z1(.42,0,.58,1),Q2e=e=>Array.isArray(e)&&typeof e[0]!="number",CY=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,_Y=e=>t=>1-e(1-t),rP=e=>1-Math.sin(Math.acos(e)),EY=_Y(rP),Z2e=CY(rP),$Y=Z1(.33,1.53,.69,.99),iP=_Y($Y),J2e=CY(iP),ewe=e=>(e*=2)<1?.5*iP(e):.5*(2-Math.pow(2,-10*(e-1))),GI={linear:tn,easeIn:X2e,easeInOut:kY,easeOut:K2e,circIn:rP,circInOut:Z2e,circOut:EY,backIn:iP,backInOut:J2e,backOut:$Y,anticipate:ewe},YI=e=>{if(Array.isArray(e)){pw(e.length===4);const[t,n,r,i]=e;return Z1(t,n,r,i)}else if(typeof e=="string")return pw(GI[e]!==void 0),GI[e];return e},oP=(e,t)=>n=>!!(K1(n)&&r2e.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),AY=(e,t,n)=>r=>{if(!K1(r))return r;const[i,o,s,a]=r.match(Kk);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},twe=e=>Qu(0,255,e),S$={...Ad,transform:e=>Math.round(twe(e))},xf={test:oP("rgb","red"),parse:AY("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+S$.transform(e)+", "+S$.transform(t)+", "+S$.transform(n)+", "+iy(ry.transform(r))+")"};function nwe(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const _3={test:oP("#"),parse:nwe,transform:xf.transform},jh={test:oP("hsl","hue"),parse:AY("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ca.transform(iy(t))+", "+ca.transform(iy(n))+", "+iy(ry.transform(r))+")"},Fr={test:e=>xf.test(e)||_3.test(e)||jh.test(e),parse:e=>xf.test(e)?xf.parse(e):jh.test(e)?jh.parse(e):_3.parse(e),transform:e=>K1(e)?e:e.hasOwnProperty("red")?xf.transform(e):jh.transform(e)},jt=(e,t,n)=>-n*e+n*t+e;function k$(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function rwe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,o=0,s=0;if(!t)i=o=s=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=k$(l,a,e+1/3),o=k$(l,a,e),s=k$(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}const C$=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},iwe=[_3,xf,jh],owe=e=>iwe.find(t=>t.test(e));function XI(e){const t=owe(e);let n=t.parse(e);return t===jh&&(n=rwe(n)),n}const TY=(e,t)=>{const n=XI(e),r=XI(t),i={...n};return o=>(i.red=C$(n.red,r.red,o),i.green=C$(n.green,r.green,o),i.blue=C$(n.blue,r.blue,o),i.alpha=jt(n.alpha,r.alpha,o),xf.transform(i))};function swe(e){var t,n;return isNaN(e)&&K1(e)&&(((t=e.match(Kk))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(nY))===null||n===void 0?void 0:n.length)||0)>0}const MY={regex:t2e,countKey:"Vars",token:"${v}",parse:tn},FY={regex:nY,countKey:"Colors",token:"${c}",parse:Fr.parse},PY={regex:Kk,countKey:"Numbers",token:"${n}",parse:Ad.parse};function _$(e,{regex:t,countKey:n,token:r,parse:i}){const o=e.tokenised.match(t);o&&(e["num"+n]=o.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...o.map(i)))}function gw(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&_$(n,MY),_$(n,FY),_$(n,PY),n}function RY(e){return gw(e).values}function DY(e){const{values:t,numColors:n,numVars:r,tokenised:i}=gw(e),o=t.length;return s=>{let a=i;for(let l=0;l<o;l++)l<r?a=a.replace(MY.token,s[l]):l<r+n?a=a.replace(FY.token,Fr.transform(s[l])):a=a.replace(PY.token,iy(s[l]));return a}}const awe=e=>typeof e=="number"?0:e;function lwe(e){const t=RY(e);return DY(e)(t.map(awe))}const Zu={test:swe,parse:RY,createTransformer:DY,getAnimatableNone:lwe},OY=(e,t)=>n=>`${n>0?t:e}`;function NY(e,t){return typeof e=="number"?n=>jt(e,t,n):Fr.test(e)?TY(e,t):e.startsWith("var(")?OY(e,t):LY(e,t)}const IY=(e,t)=>{const n=[...e],r=n.length,i=e.map((o,s)=>NY(o,t[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}},uwe=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=NY(e[i],t[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},LY=(e,t)=>{const n=Zu.createTransformer(t),r=gw(e),i=gw(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Vu(IY(r.values,i.values),n):OY(e,t)},Zy=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},KI=(e,t)=>n=>jt(e,t,n);function cwe(e){return typeof e=="number"?KI:typeof e=="string"?Fr.test(e)?TY:LY:Array.isArray(e)?IY:typeof e=="object"?uwe:KI}function fwe(e,t,n){const r=[],i=n||cwe(e[0]),o=e.length-1;for(let s=0;s<o;s++){let a=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||tn:t;a=Vu(l,a)}r.push(a)}return r}function zY(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const o=e.length;if(pw(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=fwe(t,r,i),a=s.length,l=u=>{let c=0;if(a>1)for(;c<e.length-2&&!(u<e[c+1]);c++);const f=Zy(e[c],e[c+1],u);return s[c](f)};return n?u=>l(Qu(e[0],e[o-1],u)):l}function dwe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Zy(0,t,r);e.push(jt(n,1,i))}}function hwe(e){const t=[0];return dwe(t,e.length-1),t}function pwe(e,t){return e.map(n=>n*t)}function gwe(e,t){return e.map(()=>t||kY).splice(0,e.length-1)}function mw({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=Q2e(r)?r.map(YI):YI(r),o={done:!1,value:t[0]},s=pwe(n&&n.length===t.length?n:hwe(t),e),a=zY(s,t,{ease:Array.isArray(i)?i:gwe(t,i)});return{calculatedDuration:e,next:l=>(o.value=a(l),o.done=l>=e,o)}}function BY(e,t){return t?e*(1e3/t):0}const mwe=5;function jY(e,t,n){const r=Math.max(t-mwe,0);return BY(n-e(r),t-r)}const E$=.001,ywe=.01,vwe=10,bwe=.05,xwe=1;function wwe({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,o,s=1-t;s=Qu(bwe,xwe,s),e=Qu(ywe,vwe,fl(e)),s<1?(i=u=>{const c=u*s,f=c*e,d=c-n,h=E3(u,s),p=Math.exp(-f);return E$-d/h*p},o=u=>{const f=u*s*e,d=f*n+n,h=Math.pow(s,2)*Math.pow(u,2)*e,p=Math.exp(-f),g=E3(Math.pow(u,2),s);return(-i(u)+E$>0?-1:1)*((d-h)*p)/g}):(i=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-E$+c*f},o=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=kwe(i,o,a);if(e=If(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const Swe=12;function kwe(e,t,n){let r=n;for(let i=1;i<Swe;i++)r=r-e(r)/t(r);return r}function E3(e,t){return e*Math.sqrt(1-t*t)}const Cwe=["duration","bounce"],_we=["stiffness","damping","mass"];function QI(e,t){return t.some(n=>e[n]!==void 0)}function Ewe(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!QI(e,_we)&&QI(e,Cwe)){const n=wwe(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function UY({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],o=e[e.length-1],s={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:f,isResolvedFromDuration:d}=Ewe({...r,velocity:-fl(r.velocity||0)}),h=f||0,p=l/(2*Math.sqrt(a*u)),g=o-i,m=fl(Math.sqrt(a/u)),y=Math.abs(g)<5;n||(n=y?.01:2),t||(t=y?.005:.5);let v;if(p<1){const b=E3(m,p);v=x=>{const w=Math.exp(-p*m*x);return o-w*((h+p*m*g)/b*Math.sin(b*x)+g*Math.cos(b*x))}}else if(p===1)v=b=>o-Math.exp(-m*b)*(g+(h+m*g)*b);else{const b=m*Math.sqrt(p*p-1);v=x=>{const w=Math.exp(-p*m*x),k=Math.min(b*x,300);return o-w*((h+p*m*g)*Math.sinh(k)+b*g*Math.cosh(k))/b}}return{calculatedDuration:d&&c||null,next:b=>{const x=v(b);if(d)s.done=b>=c;else{let w=h;b!==0&&(p<1?w=jY(v,b,x):w=0);const k=Math.abs(w)<=n,S=Math.abs(o-x)<=t;s.done=k&&S}return s.value=s.done?o:x,s}}}function ZI({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],d={done:!1,value:f},h=C=>a!==void 0&&C<a||l!==void 0&&C>l,p=C=>a===void 0?l:l===void 0||Math.abs(a-C)<Math.abs(l-C)?a:l;let g=n*t;const m=f+g,y=s===void 0?m:s(m);y!==m&&(g=y-f);const v=C=>-g*Math.exp(-C/r),b=C=>y+v(C),x=C=>{const _=v(C),$=b(C);d.done=Math.abs(_)<=u,d.value=d.done?y:$};let w,k;const S=C=>{h(d.value)&&(w=C,k=UY({keyframes:[d.value,p(d.value)],velocity:jY(b,C,d.value),damping:i,stiffness:o,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:C=>{let _=!1;return!k&&w===void 0&&(_=!0,x(C),S(C)),w!==void 0&&C>w?k.next(C-w):(!_&&x(C),d)}}}const $we=e=>{const t=({timestamp:n})=>e(n);return{start:()=>St.update(t,!0),stop:()=>_l(t),now:()=>dr.isProcessing?dr.timestamp:performance.now()}},JI=2e4;function e7(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<JI;)t+=n,r=e.next(t);return t>=JI?1/0:t}const Awe={decay:ZI,inertia:ZI,tween:mw,keyframes:mw,spring:UY};function yw({autoplay:e=!0,delay:t=0,driver:n=$we,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:f,...d}){let h=1,p=!1,g,m;const y=()=>{m=new Promise(W=>{g=W})};y();let v;const b=Awe[i]||mw;let x;b!==mw&&typeof r[0]!="number"&&(x=zY([0,100],r,{clamp:!1}),r=[0,100]);const w=b({...d,keyframes:r});let k;a==="mirror"&&(k=b({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let S="idle",C=null,_=null,$=null;w.calculatedDuration===null&&o&&(w.calculatedDuration=e7(w));const{calculatedDuration:A}=w;let N=1/0,M=1/0;A!==null&&(N=A+s,M=N*(o+1)-s);let R=0;const P=W=>{if(_===null)return;h>0&&(_=Math.min(_,W)),h<0&&(_=Math.min(W-M/h,_)),C!==null?R=C:R=Math.round(W-_)*h;const oe=R-t*(h>=0?1:-1),re=h>=0?oe<0:oe>M;R=Math.max(oe,0),S==="finished"&&C===null&&(R=M);let we=R,Re=w;if(o){const ue=Math.min(R,M)/N;let _e=Math.floor(ue),Ee=ue%1;!Ee&&ue>=1&&(Ee=1),Ee===1&&_e--,_e=Math.min(_e,o+1),!!(_e%2)&&(a==="reverse"?(Ee=1-Ee,s&&(Ee-=s/N)):a==="mirror"&&(Re=k)),we=Qu(0,1,Ee)*N}const lt=re?{done:!1,value:r[0]}:Re.next(we);x&&(lt.value=x(lt.value));let{done:_n}=lt;!re&&A!==null&&(_n=h>=0?R>=M:R<=0);const rr=C===null&&(S==="finished"||S==="running"&&_n);return f&&f(lt.value),rr&&O(),lt},D=()=>{v&&v.stop(),v=void 0},I=()=>{S="idle",D(),g(),y(),_=$=null},O=()=>{S="finished",c&&c(),D(),g()},j=()=>{if(p)return;v||(v=n(P));const W=v.now();l&&l(),C!==null?_=W-C:(!_||S==="finished")&&(_=W),S==="finished"&&y(),$=_,C=null,S="running",v.start()};e&&j();const Y={then(W,oe){return m.then(W,oe)},get time(){return fl(R)},set time(W){W=If(W),R=W,C!==null||!v||h===0?C=W:_=v.now()-W/h},get duration(){const W=w.calculatedDuration===null?e7(w):w.calculatedDuration;return fl(W)},get speed(){return h},set speed(W){W===h||!v||(h=W,Y.time=fl(R))},get state(){return S},play:j,pause:()=>{S="paused",C=R},stop:()=>{p=!0,S!=="idle"&&(S="idle",u&&u(),I())},cancel:()=>{$!==null&&P($),I()},complete:()=>{S="finished"},sample:W=>(_=0,P(W))};return Y}function Twe(e){let t;return()=>(t===void 0&&(t=e()),t)}const Mwe=Twe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Fwe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Nb=10,Pwe=2e4,Rwe=(e,t)=>t.type==="spring"||e==="backgroundColor"||!bY(t.ease);function Dwe(e,t,{onUpdate:n,onComplete:r,...i}){if(!(Mwe()&&Fwe.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let s=!1,a,l,u=!1;const c=()=>{l=new Promise(b=>{a=b})};c();let{keyframes:f,duration:d=300,ease:h,times:p}=i;if(Rwe(t,i)){const b=yw({...i,repeat:0,delay:0});let x={done:!1,value:f[0]};const w=[];let k=0;for(;!x.done&&k<Pwe;)x=b.sample(k),w.push(x.value),k+=Nb;p=void 0,f=w,d=k-Nb,h="linear"}const g=W2e(e.owner.current,t,f,{...i,duration:d,ease:h,times:p}),m=()=>{u=!1,g.cancel()},y=()=>{u=!0,St.update(m),a(),c()};return g.onfinish=()=>{u||(e.set(H2e(f,i)),r&&r(),y())},{then(b,x){return l.then(b,x)},attachTimeline(b){return g.timeline=b,g.onfinish=null,tn},get time(){return fl(g.currentTime||0)},set time(b){g.currentTime=If(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return fl(d)},play:()=>{s||(g.play(),_l(m))},pause:()=>g.pause(),stop:()=>{if(s=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const x=yw({...i,autoplay:!1});e.setWithVelocity(x.sample(b-Nb).value,x.sample(b).value,Nb)}y()},complete:()=>{u||g.finish()},cancel:y}}function Owe({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:tn,pause:tn,stop:tn,then:o=>(o(),Promise.resolve()),cancel:tn,complete:tn});return t?yw({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const Nwe={type:"spring",stiffness:500,damping:25,restSpeed:10},Iwe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Lwe={type:"keyframes",duration:.8},zwe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Bwe=(e,{keyframes:t})=>t.length>2?Lwe:$d.has(e)?e.startsWith("scale")?Iwe(t[1]):Nwe:zwe,$3=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zu.test(t)||t==="0")&&!t.startsWith("url(")),jwe=new Set(["brightness","contrast","saturate","opacity"]);function Uwe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Kk)||[];if(!r)return e;const i=n.replace(r,"");let o=jwe.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const Vwe=/([a-z-]*)\(.*?\)/g,A3={...Zu,getAnimatableNone:e=>{const t=e.match(Vwe);return t?t.map(Uwe).join(" "):e}},Wwe={...rY,color:Fr,backgroundColor:Fr,outlineColor:Fr,fill:Fr,stroke:Fr,borderColor:Fr,borderTopColor:Fr,borderRightColor:Fr,borderBottomColor:Fr,borderLeftColor:Fr,filter:A3,WebkitFilter:A3},sP=e=>Wwe[e];function VY(e,t){let n=sP(e);return n!==A3&&(n=Zu),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const WY=e=>/^0[^.\s]+$/.test(e);function Hwe(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||WY(e)}function qwe(e,t,n,r){const i=$3(t,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const s=r.from!==void 0?r.from:e.get();let a;const l=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?s:o[u-1]),Hwe(o[u])&&l.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(a=o[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];o[c]=VY(t,a)}return o}function Gwe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function aP(e,t){return e[t]||e.default||e}const Ywe={skipAnimations:!1},lP=(e,t,n,r={})=>i=>{const o=aP(r,e)||{},s=o.delay||r.delay||0;let{elapsed:a=0}=r;a=a-If(s);const l=qwe(t,e,n,o),u=l[0],c=l[l.length-1],f=$3(e,u),d=$3(e,c);let h={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:p=>{t.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(Gwe(o)||(h={...h,...Bwe(e,h)}),h.duration&&(h.duration=If(h.duration)),h.repeatDelay&&(h.repeatDelay=If(h.repeatDelay)),!f||!d||V2e.current||o.type===!1||Ywe.skipAnimations)return Owe(h);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=Dwe(t,e,h);if(p)return p}return yw(h)};function vw(e){return!!(vi(e)&&e.add)}const HY=e=>/^\-?\d*\.?\d+$/.test(e);function uP(e,t){e.indexOf(t)===-1&&e.push(t)}function cP(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class fP{constructor(){this.subscriptions=[]}add(t){return uP(this.subscriptions,t),()=>cP(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xwe=e=>!isNaN(parseFloat(e));class Kwe{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:s}=dr;this.lastUpdated!==s&&(this.timeDelta=o,this.lastUpdated=s,St.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>St.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Xwe(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new fP);const r=this.events[t].add(n);return t==="change"?()=>{r(),St.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?BY(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wp(e,t){return new Kwe(e,t)}const qY=e=>t=>t.test(e),Qwe={test:e=>e==="auto",parse:e=>e},GY=[Ad,$e,ca,Xl,o2e,i2e,Qwe],Am=e=>GY.find(qY(e)),Zwe=[...GY,Fr,Zu],Jwe=e=>Zwe.find(qY(e));function eSe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Wp(n))}function tSe(e,t){const n=Zk(e,t);let{transitionEnd:r={},transition:i={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const s in o){const a=b2e(o[s]);eSe(e,s,a)}}function nSe(e,t,n){var r,i;const o=Object.keys(t).filter(a=>!e.hasValue(a)),s=o.length;if(s)for(let a=0;a<s;a++){const l=o[a],u=t[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(i=(r=n[l])!==null&&r!==void 0?r:e.readValue(l))!==null&&i!==void 0?i:t[l]),c!=null&&(typeof c=="string"&&(HY(c)||WY(c))?c=parseFloat(c):!Jwe(c)&&Zu.test(u)&&(c=VY(l,u)),e.addValue(l,Wp(c,{owner:e})),n[l]===void 0&&(n[l]=c),c!==null&&e.setBaseTarget(l,c))}}function rSe(e,t){return t?(t[e]||t.default||t).from:void 0}function iSe(e,t,n){const r={};for(const i in e){const o=rSe(i,t);if(o!==void 0)r[i]=o;else{const s=n.getValue(i);s&&(r[i]=s.get())}}return r}function oSe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function sSe(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function YY(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:s,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(o=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const f in a){const d=e.getValue(f),h=a[f];if(!d||h===void 0||c&&oSe(c,f))continue;const p={delay:n,elapsed:0,...aP(o||{},f)};if(window.HandoffAppearAnimations){const y=e.getProps()[KG];if(y){const v=window.HandoffAppearAnimations(y,f,d,St);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let g=!p.isHandoff&&!sSe(d,h);if(p.type==="spring"&&(d.getVelocity()||p.velocity)&&(g=!1),d.animation&&(g=!1),g)continue;d.start(lP(f,d,h,e.shouldReduceMotion&&$d.has(f)?{type:!1}:p));const m=d.animation;vw(l)&&(l.add(f),m.then(()=>l.remove(f))),u.push(m)}return s&&Promise.all(u).then(()=>{s&&tSe(e,s)}),u}function T3(e,t,n={}){const r=Zk(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(YY(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:f}=i;return aSe(e,t,u+l,c,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[o,s]:[s,o];return l().then(()=>u())}else return Promise.all([o(),s(n.delay)])}function aSe(e,t,n=0,r=0,i=1,o){const s=[],a=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(lSe).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(T3(u,t,{...o,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function lSe(e,t){return e.sortNodePosition(t)}function uSe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(o=>T3(e,o,n));r=Promise.all(i)}else if(typeof t=="string")r=T3(e,t,n);else{const i=typeof t=="function"?Zk(e,t,n.custom):t;r=Promise.all(YY(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const cSe=[...qF].reverse(),fSe=qF.length;function dSe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>uSe(e,n,r)))}function hSe(e){let t=dSe(e);const n=gSe();let r=!0;const i=(l,u)=>{const c=Zk(e,u);if(c){const{transition:f,transitionEnd:d,...h}=c;l={...l,...h,...d}}return l};function o(l){t=l(e)}function s(l,u){const c=e.getProps(),f=e.getVariantContext(!0)||{},d=[],h=new Set;let p={},g=1/0;for(let y=0;y<fSe;y++){const v=cSe[y],b=n[v],x=c[v]!==void 0?c[v]:f[v],w=Ky(x),k=v===u?b.isActive:null;k===!1&&(g=y);let S=x===f[v]&&x!==c[v]&&w;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...p},!b.isActive&&k===null||!x&&!b.prevProp||Yk(x)||typeof x=="boolean")continue;let _=pSe(b.prevProp,x)||v===u&&b.isActive&&!S&&w||y>g&&w,$=!1;const A=Array.isArray(x)?x:[x];let N=A.reduce(i,{});k===!1&&(N={});const{prevResolvedValues:M={}}=b,R={...M,...N},P=D=>{_=!0,h.has(D)&&($=!0,h.delete(D)),b.needsAnimating[D]=!0};for(const D in R){const I=N[D],O=M[D];if(p.hasOwnProperty(D))continue;let j=!1;hw(I)&&hw(O)?j=!yY(I,O):j=I!==O,j?I!==void 0?P(D):h.add(D):I!==void 0&&h.has(D)?P(D):b.protectedKeys[D]=!0}b.prevProp=x,b.prevResolvedValues=N,b.isActive&&(p={...p,...N}),r&&e.blockInitialAnimation&&(_=!1),_&&(!S||$)&&d.push(...A.map(D=>({animation:D,options:{type:v,...l}})))}if(h.size){const y={};h.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(y[v]=b)}),d.push({animation:y})}let m=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(d):Promise.resolve()}function a(l,u,c){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const d=s(c,l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n}}function pSe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!yY(t,e):!1}function Lc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gSe(){return{animate:Lc(!0),whileInView:Lc(),whileHover:Lc(),whileTap:Lc(),whileDrag:Lc(),whileFocus:Lc(),exit:Lc()}}class mSe extends xc{constructor(t){super(t),t.animationState||(t.animationState=hSe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Yk(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let ySe=0;class vSe extends xc{constructor(){super(...arguments),this.id=ySe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const bSe={animation:{Feature:mSe},exit:{Feature:vSe}},t7=(e,t)=>Math.abs(e-t);function xSe(e,t){const n=t7(e.x,t.x),r=t7(e.y,t.y);return Math.sqrt(n**2+r**2)}class XY{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=A$(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=xSe(f.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:p}=f,{timestamp:g}=dr;this.history.push({...p,timestamp:g});const{onStart:m,onMove:y}=this.handlers;d||(m&&m(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=$$(d,this.transformPagePoint),St.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=A$(f.type==="pointercancel"?this.lastMoveEventInfo:$$(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,m),p&&p(f,m)},!dY(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Qk(t),a=$$(s,this.transformPagePoint),{point:l}=a,{timestamp:u}=dr;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,A$(a,this.history)),this.removeListeners=Vu(cl(this.contextWindow,"pointermove",this.handlePointerMove),cl(this.contextWindow,"pointerup",this.handlePointerUp),cl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),_l(this.updatePoint)}}function $$(e,t){return t?{point:t(e.point)}:e}function n7(e,t){return{x:e.x-t.x,y:e.y-t.y}}function A$({point:e},t){return{point:e,delta:n7(e,KY(t)),offset:n7(e,wSe(t)),velocity:SSe(t,.1)}}function wSe(e){return e[0]}function KY(e){return e[e.length-1]}function SSe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=KY(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>If(t)));)n--;if(!r)return{x:0,y:0};const o=fl(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Gi(e){return e.max-e.min}function M3(e,t=0,n=.01){return Math.abs(e-t)<=n}function r7(e,t,n,r=.5){e.origin=r,e.originPoint=jt(t.min,t.max,e.origin),e.scale=Gi(n)/Gi(t),(M3(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=jt(n.min,n.max,e.origin)-e.originPoint,(M3(e.translate)||isNaN(e.translate))&&(e.translate=0)}function oy(e,t,n,r){r7(e.x,t.x,n.x,r?r.originX:void 0),r7(e.y,t.y,n.y,r?r.originY:void 0)}function i7(e,t,n){e.min=n.min+t.min,e.max=e.min+Gi(t)}function kSe(e,t,n){i7(e.x,t.x,n.x),i7(e.y,t.y,n.y)}function o7(e,t,n){e.min=t.min-n.min,e.max=e.min+Gi(t)}function sy(e,t,n){o7(e.x,t.x,n.x),o7(e.y,t.y,n.y)}function CSe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?jt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?jt(n,e,r.max):Math.min(e,n)),e}function s7(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function _Se(e,{top:t,left:n,bottom:r,right:i}){return{x:s7(e.x,n,i),y:s7(e.y,t,r)}}function a7(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function ESe(e,t){return{x:a7(e.x,t.x),y:a7(e.y,t.y)}}function $Se(e,t){let n=.5;const r=Gi(e),i=Gi(t);return i>r?n=Zy(t.min,t.max-r,e.min):r>i&&(n=Zy(e.min,e.max-i,t.min)),Qu(0,1,n)}function ASe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const F3=.35;function TSe(e=F3){return e===!1?e=0:e===!0&&(e=F3),{x:l7(e,"left","right"),y:l7(e,"top","bottom")}}function l7(e,t,n){return{min:u7(e,t),max:u7(e,n)}}function u7(e,t){return typeof e=="number"?e:e[t]||0}const c7=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uh=()=>({x:c7(),y:c7()}),f7=()=>({min:0,max:0}),ln=()=>({x:f7(),y:f7()});function uo(e){return[e("x"),e("y")]}function QY({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function MSe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function FSe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function T$(e){return e===void 0||e===1}function P3({scale:e,scaleX:t,scaleY:n}){return!T$(e)||!T$(t)||!T$(n)}function ef(e){return P3(e)||ZY(e)||e.z||e.rotate||e.rotateX||e.rotateY}function ZY(e){return d7(e.x)||d7(e.y)}function d7(e){return e&&e!=="0%"}function bw(e,t,n){const r=e-n,i=t*r;return n+i}function h7(e,t,n,r,i){return i!==void 0&&(e=bw(e,i,r)),bw(e,n,r)+t}function R3(e,t=0,n=1,r,i){e.min=h7(e.min,t,n,r,i),e.max=h7(e.max,t,n,r,i)}function JY(e,{x:t,y:n}){R3(e.x,t.translate,t.scale,t.originPoint),R3(e.y,n.translate,n.scale,n.originPoint)}function PSe(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Vh(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,JY(e,s)),r&&ef(o.latestValues)&&Vh(e,o.latestValues))}t.x=p7(t.x),t.y=p7(t.y)}function p7(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function nu(e,t){e.min=e.min+t,e.max=e.max+t}function g7(e,t,[n,r,i]){const o=t[i]!==void 0?t[i]:.5,s=jt(e.min,e.max,o);R3(e,t[n],t[r],s,t.scale)}const RSe=["x","scaleX","originX"],DSe=["y","scaleY","originY"];function Vh(e,t){g7(e.x,t,RSe),g7(e.y,t,DSe)}function eX(e,t){return QY(FSe(e.getBoundingClientRect(),t))}function OSe(e,t,n){const r=eX(e,n),{scroll:i}=t;return i&&(nu(r.x,i.offset.x),nu(r.y,i.offset.y)),r}const tX=({current:e})=>e?e.ownerDocument.defaultView:null,NSe=new WeakMap;class ISe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Qk(c,"page").point)},o=(c,f)=>{const{drag:d,dragPropagation:h,onDragStart:p}=this.getProps();if(d&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=pY(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),uo(m=>{let y=this.getAxisMotionValue(m).get()||0;if(ca.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[m];b&&(y=Gi(b)*(parseFloat(y)/100))}}this.originPoint[m]=y}),p&&St.update(()=>p(c,f),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(c,f)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:p,onDrag:g}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:m}=f;if(h&&this.currentDirection===null){this.currentDirection=LSe(m),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,m),this.updateAxis("y",f.point,m),this.visualElement.render(),g&&g(c,f)},a=(c,f)=>this.stop(c,f),l=()=>uo(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new XY(t,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:tX(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&St.update(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Ib(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=CSe(s,this.constraints[t],this.elastic[t])),o.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;n&&Bh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=_Se(i.layoutBox,n):this.constraints=!1,this.elastic=TSe(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&uo(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=ASe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Bh(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=OSe(r,i.root,this.visualElement.getTransformPagePoint());let s=ESe(i.layout.layoutBox,o);if(n){const a=n(MSe(s));this.hasMutatedConstraints=!!a,a&&(s=QY(a))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=uo(c=>{if(!Ib(c,n,this.currentDirection))return;let f=l&&l[c]||{};s&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(lP(t,r,0,n))}stopAnimation(){uo(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){uo(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){uo(n=>{const{drag:r}=this.getProps();if(!Ib(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(t[n]-jt(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Bh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};uo(s=>{const a=this.getAxisMotionValue(s);if(a){const l=a.get();i[s]=$Se({min:l,max:l},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),uo(s=>{if(!Ib(s,t,null))return;const a=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];a.set(jt(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;NSe.set(this.visualElement,this);const t=this.visualElement.current,n=cl(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Bh(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const s=nl(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(uo(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=F3,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function Ib(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function LSe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class zSe extends xc{constructor(t){super(t),this.removeGroupControls=tn,this.removeListeners=tn,this.controls=new ISe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tn}unmount(){this.removeGroupControls(),this.removeListeners()}}const m7=e=>(t,n)=>{e&&St.update(()=>e(t,n))};class BSe extends xc{constructor(){super(...arguments),this.removePointerDownListener=tn}onPointerDown(t){this.session=new XY(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tX(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:m7(t),onStart:m7(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&St.update(()=>i(o,s))}}}mount(){this.removePointerDownListener=cl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function jSe(){const e=F.useContext(Y1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=F.useId();return F.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}function USe(){return VSe(F.useContext(Y1))}function VSe(e){return e===null?!0:e.isPresent}const i2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function y7(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Tm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if($e.test(e))e=parseFloat(e);else return e;const n=y7(e,t.target.x),r=y7(e,t.target.y);return`${n}% ${r}%`}},WSe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Zu.parse(e);if(i.length>5)return r;const o=Zu.createTransformer(e),s=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=a,i[1+s]/=l;const u=jt(a,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),o(i)}};class HSe extends zi.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=t;Qxe(qSe),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),i2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?s.promote():s.relegate()||St.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function nX(e){const[t,n]=jSe(),r=F.useContext(YF);return zi.createElement(HSe,{...e,layoutGroup:r,switchLayoutGroup:F.useContext(ZG),isPresent:t,safeToRemove:n})}const qSe={borderRadius:{...Tm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tm,borderTopRightRadius:Tm,borderBottomLeftRadius:Tm,borderBottomRightRadius:Tm,boxShadow:WSe},rX=["TopLeft","TopRight","BottomLeft","BottomRight"],GSe=rX.length,v7=e=>typeof e=="string"?parseFloat(e):e,b7=e=>typeof e=="number"||$e.test(e);function YSe(e,t,n,r,i,o){i?(e.opacity=jt(0,n.opacity!==void 0?n.opacity:1,XSe(r)),e.opacityExit=jt(t.opacity!==void 0?t.opacity:1,0,KSe(r))):o&&(e.opacity=jt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<GSe;s++){const a=`border${rX[s]}Radius`;let l=x7(t,a),u=x7(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||b7(l)===b7(u)?(e[a]=Math.max(jt(v7(l),v7(u),r),0),(ca.test(u)||ca.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=jt(t.rotate||0,n.rotate||0,r))}function x7(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const XSe=iX(0,.5,EY),KSe=iX(.5,.95,tn);function iX(e,t,n){return r=>r<e?0:r>t?1:n(Zy(e,t,r))}function w7(e,t){e.min=t.min,e.max=t.max}function oo(e,t){w7(e.x,t.x),w7(e.y,t.y)}function S7(e,t,n,r,i){return e-=t,e=bw(e,1/n,r),i!==void 0&&(e=bw(e,1/i,r)),e}function QSe(e,t=0,n=1,r=.5,i,o=e,s=e){if(ca.test(t)&&(t=parseFloat(t),t=jt(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=jt(o.min,o.max,r);e===o&&(a-=t),e.min=S7(e.min,t,n,a,i),e.max=S7(e.max,t,n,a,i)}function k7(e,t,[n,r,i],o,s){QSe(e,t[n],t[r],t[i],t.scale,o,s)}const ZSe=["x","scaleX","originX"],JSe=["y","scaleY","originY"];function C7(e,t,n,r){k7(e.x,t,ZSe,n?n.x:void 0,r?r.x:void 0),k7(e.y,t,JSe,n?n.y:void 0,r?r.y:void 0)}function _7(e){return e.translate===0&&e.scale===1}function oX(e){return _7(e.x)&&_7(e.y)}function eke(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function sX(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function E7(e){return Gi(e.x)/Gi(e.y)}class tke{constructor(){this.members=[]}add(t){uP(this.members,t),t.scheduleRender()}remove(t){if(cP(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $7(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const s=e.x.scale*t.x,a=e.y.scale*t.y;return(s!==1||a!==1)&&(r+=`scale(${s}, ${a})`),r||"none"}const nke=(e,t)=>e.depth-t.depth;class rke{constructor(){this.children=[],this.isDirty=!1}add(t){uP(this.children,t),this.isDirty=!0}remove(t){cP(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(nke),this.isDirty=!1,this.children.forEach(t)}}function ike(e,t){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=t&&(_l(r),e(o-t))};return St.read(r,!0),()=>_l(r)}function oke(e){window.MotionDebug&&window.MotionDebug.record(e)}function ske(e){return e instanceof SVGElement&&e.tagName!=="svg"}function ake(e,t,n){const r=vi(e)?e:Wp(e);return r.start(lP("",r,t,n)),r.animation}const A7=["","X","Y","Z"],lke={visibility:"hidden"},T7=1e3;let uke=0;const tf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function aX({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=t==null?void 0:t()){this.id=uke++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,tf.totalNodes=tf.resolvedTargetDeltas=tf.recalculatedProjection=0,this.nodes.forEach(dke),this.nodes.forEach(yke),this.nodes.forEach(vke),this.nodes.forEach(hke),oke(tf)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new rke)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new fP),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=ske(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),e){let f;const d=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=ike(d,250),i2.hasAnimatedSinceResize&&(i2.hasAnimatedSinceResize=!1,this.nodes.forEach(F7))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||kke,{onLayoutAnimationStart:m,onLayoutAnimationComplete:y}=c.getProps(),v=!this.targetLayout||!sX(this.targetLayout,p)||h,b=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const x={...aP(g,"layout"),onPlay:m,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||F7(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,_l(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bke),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(M7);return}this.isUpdating||this.nodes.forEach(gke),this.isUpdating=!1,this.nodes.forEach(mke),this.nodes.forEach(cke),this.nodes.forEach(fke),this.clearAllSnapshots();const a=performance.now();dr.delta=Qu(0,1e3/60,a-dr.timestamp),dr.timestamp=a,dr.isProcessing=!0,b$.update.process(dr),b$.preRender.process(dr),b$.render.process(dr),dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(pke),this.sharedNodes.forEach(xke)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,St.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){St.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!oX(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(a||ef(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),Cke(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return ln();const a=s.measureViewportBox(),{scroll:l}=this.root;return l&&(nu(a.x,l.offset.x),nu(a.y,l.offset.y)),a}removeElementScroll(s){const a=ln();oo(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:f}=u;if(u!==this.root&&c&&f.layoutScroll){if(c.isRoot){oo(a,s);const{scroll:d}=this.root;d&&(nu(a.x,-d.offset.x),nu(a.y,-d.offset.y))}nu(a.x,c.offset.x),nu(a.y,c.offset.y)}}return a}applyTransform(s,a=!1){const l=ln();oo(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Vh(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),ef(c.latestValues)&&Vh(l,c.latestValues)}return ef(this.latestValues)&&Vh(l,this.latestValues),l}removeTransform(s){const a=ln();oo(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!ef(u.latestValues))continue;P3(u.latestValues)&&u.updateSnapshot();const c=ln(),f=u.measurePageBox();oo(c,f),C7(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return ef(this.latestValues)&&C7(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=dr.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),sy(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),oo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kSe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):oo(this.target,this.layout.layoutBox),JY(this.target,this.targetDelta)):oo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),sy(this.relativeTargetOrigin,this.target,h.target),oo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}tf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||P3(this.parent.latestValues)||ZY(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===dr.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;oo(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;PSe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=Uh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Uh(),this.projectionDeltaWithTransform=Uh());const g=this.projectionTransform;oy(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=$7(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==d||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),tf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=Uh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=ln(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=h!==p,m=this.getStack(),y=!m||m.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(Ske));this.animationProgress=0;let b;this.mixTargetDelta=x=>{const w=x/1e3;P7(f.x,s.x,w),P7(f.y,s.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sy(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wke(this.relativeTarget,this.relativeTargetOrigin,d,w),b&&eke(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ln()),oo(b,this.relativeTarget)),g&&(this.animationValues=c,YSe(c,u,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(_l(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=St.update(()=>{i2.hasAnimatedSinceResize=!0,this.currentAnimation=ake(0,T7,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(T7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=s;if(!(!a||!l||!u)){if(this!==s&&this.layout&&u&&lX(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ln();const f=Gi(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const d=Gi(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+d}oo(a,l),Vh(a,c),oy(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new tke),this.sharedNodes.get(s).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<A7.length;c++){const f="rotate"+A7[c];l[f]&&(u[f]=l[f],s.setStaticValue(f,0))}s.render();for(const c in u)s.setStaticValue(c,u[c]);s.scheduleRender()}getProjectionStyles(s){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return lke;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=r2(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=r2(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!ef(this.latestValues)&&(g.transform=c?c({},""):"none",this.hasProjected=!1),g}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=$7(this.projectionDeltaWithTransform,this.treeScale,d),c&&(u.transform=c(d,u.transform));const{x:h,y:p}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in fw){if(d[g]===void 0)continue;const{correct:m,applyTo:y}=fw[g],v=u.transform==="none"?d[g]:m(d[g],f);if(y){const b=y.length;for(let x=0;x<b;x++)u[y[x]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=f===this?r2(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(M7),this.root.sharedNodes.clear()}}}function cke(e){e.updateLayout()}function fke(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:o}=e.options,s=n.source!==e.layout.source;o==="size"?uo(f=>{const d=s?n.measuredBox[f]:n.layoutBox[f],h=Gi(d);d.min=r[f].min,d.max=d.min+h}):lX(o,n.layoutBox,r)&&uo(f=>{const d=s?n.measuredBox[f]:n.layoutBox[f],h=Gi(r[f]);d.max=d.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+h)});const a=Uh();oy(a,r,n.layoutBox);const l=Uh();s?oy(l,e.applyTransform(i,!0),n.measuredBox):oy(l,r,n.layoutBox);const u=!oX(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=ln();sy(p,n.layoutBox,d.layoutBox);const g=ln();sy(g,r,h.layoutBox),sX(p,g)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function dke(e){tf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function hke(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function pke(e){e.clearSnapshot()}function M7(e){e.clearMeasurements()}function gke(e){e.isLayoutDirty=!1}function mke(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function F7(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function yke(e){e.resolveTargetDelta()}function vke(e){e.calcProjection()}function bke(e){e.resetRotation()}function xke(e){e.removeLeadSnapshot()}function P7(e,t,n){e.translate=jt(t.translate,0,n),e.scale=jt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function R7(e,t,n,r){e.min=jt(t.min,n.min,r),e.max=jt(t.max,n.max,r)}function wke(e,t,n,r){R7(e.x,t.x,n.x,r),R7(e.y,t.y,n.y,r)}function Ske(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const kke={duration:.45,ease:[.4,0,.1,1]},D7=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),O7=D7("applewebkit/")&&!D7("chrome/")?Math.round:tn;function N7(e){e.min=O7(e.min),e.max=O7(e.max)}function Cke(e){N7(e.x),N7(e.y)}function lX(e,t,n){return e==="position"||e==="preserve-aspect"&&!M3(E7(t),E7(n),.2)}const _ke=aX({attachResizeListener:(e,t)=>nl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),M$={current:void 0},uX=aX({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!M$.current){const e=new _ke({});e.mount(window),e.setOptions({layoutScroll:!0}),M$.current=e}return M$.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Eke={pan:{Feature:BSe},drag:{Feature:zSe,ProjectionNode:uX,MeasureLayout:nX}},$ke=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Ake(e){const t=$ke.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function D3(e,t,n=1){const[r,i]=Ake(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const s=o.trim();return HY(s)?parseFloat(s):s}else return k3(i)?D3(i,t,n+1):i}function Tke(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const o=i.get();if(!k3(o))return;const s=D3(o,r);s&&i.set(s)});for(const i in t){const o=t[i];if(!k3(o))continue;const s=D3(o,r);s&&(t[i]=s,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:t,transitionEnd:n}}const Mke=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),cX=e=>Mke.has(e),Fke=e=>Object.keys(e).some(cX),I7=e=>e===Ad||e===$e,L7=(e,t)=>parseFloat(e.split(", ")[t]),z7=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return L7(i[1],t);{const o=r.match(/^matrix\((.+)\)$/);return o?L7(o[1],e):0}},Pke=new Set(["x","y","z"]),Rke=X1.filter(e=>!Pke.has(e));function Dke(e){const t=[];return Rke.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Hp={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:z7(4,13),y:z7(5,14)};Hp.translateX=Hp.x;Hp.translateY=Hp.y;const Oke=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:s}=o,a={};s==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=Hp[u](r,o)}),t.render();const l=t.measureViewportBox();return n.forEach(u=>{const c=t.getValue(u);c&&c.jump(a[u]),e[u]=Hp[u](l,o)}),e},Nke=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(cX);let o=[],s=!1;const a=[];if(i.forEach(l=>{const u=e.getValue(l);if(!e.hasValue(l))return;let c=n[l],f=Am(c);const d=t[l];let h;if(hw(d)){const p=d.length,g=d[0]===null?1:0;c=d[g],f=Am(c);for(let m=g;m<p&&d[m]!==null;m++)h?pw(Am(d[m])===h):h=Am(d[m])}else h=Am(d);if(f!==h)if(I7(f)&&I7(h)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof d=="string"?t[l]=parseFloat(d):Array.isArray(d)&&h===$e&&(t[l]=d.map(parseFloat))}else f!=null&&f.transform&&(h!=null&&h.transform)&&(c===0||d===0)?c===0?u.set(h.transform(c)):t[l]=f.transform(d):(s||(o=Dke(e),s=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:t[l],u.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=Oke(t,e,a);return o.length&&o.forEach(([c,f])=>{e.getValue(c).set(f)}),e.render(),Gk&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function Ike(e,t,n,r){return Fke(t)?Nke(e,t,n,r):{target:t,transitionEnd:r}}const Lke=(e,t,n,r)=>{const i=Tke(e,t,r);return t=i.target,r=i.transitionEnd,Ike(e,t,n,r)},O3={current:null},fX={current:!1};function zke(){if(fX.current=!0,!!Gk)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>O3.current=e.matches;e.addListener(t),t()}else O3.current=!1}function Bke(e,t,n){const{willChange:r}=t;for(const i in t){const o=t[i],s=n[i];if(vi(o))e.addValue(i,o),vw(r)&&r.add(i);else if(vi(s))e.addValue(i,Wp(o,{owner:e})),vw(r)&&r.remove(i);else if(s!==o)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(o)}else{const a=e.getStaticValue(i);e.addValue(i,Wp(a!==void 0?a:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const B7=new WeakMap,dX=Object.keys(Qy),jke=dX.length,j7=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Uke=GF.length;class Vke{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>St.render(this.render,!1,!0);const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=Xk(n),this.isVariantNode=QG(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const f in c){const d=c[f];a[f]!==void 0&&vi(d)&&(d.set(a[f],!1),vw(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,B7.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),fX.current||zke(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:O3.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){B7.delete(this.current),this.projection&&this.projection.unmount(),_l(this.notifyUpdate),_l(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=$d.has(t),i=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&St.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,o){let s,a;for(let l=0;l<jke;l++){const u=dX[l],{isEnabled:c,Feature:f,ProjectionNode:d,MeasureLayout:h}=Qy[u];d&&(s=d),c(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:h}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||f&&Bh(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:d,layoutRoot:h})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<j7.length;r++){const i=j7[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=t["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Bke(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Uke;r++){const i=GF[r],o=this.props[i];(Ky(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Wp(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=tP(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!vi(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new fP),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class hX extends Vke{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},o){let s=iSe(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),s&&(s=i(s))),o){nSe(this,r,s);const a=Lke(this,r,s,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function Wke(e){return window.getComputedStyle(e)}class Hke extends hX{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if($d.has(n)){const r=sP(n);return r&&r.default||0}else{const r=Wke(t),i=(tY(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return eX(t,n)}build(t,n,r,i){KF(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return eP(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;vi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){aY(t,n,r,i)}}class qke extends hX{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if($d.has(n)){const r=sP(n);return r&&r.default||0}return n=lY.has(n)?n:HF(n),t.getAttribute(n)}measureInstanceViewportBox(){return ln()}scrapeMotionValuesFromProps(t,n){return cY(t,n)}build(t,n,r,i){ZF(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){uY(t,n,r,i)}mount(t){this.isSVGTag=JF(t.tagName),super.mount(t)}}const Gke=(e,t)=>XF(e)?new qke(t,{enableHardwareAcceleration:!1}):new Hke(t,{enableHardwareAcceleration:!0}),Yke={layout:{ProjectionNode:uX,MeasureLayout:nX}},Xke={...bSe,...B2e,...Eke,...Yke},Jk=Xxe((e,t)=>$2e(e,t,Xke,Gke));function pX(){const e=F.useRef(!1);return WF(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Kke(){const e=pX(),[t,n]=F.useState(0),r=F.useCallback(()=>{e.current&&n(t+1)},[t]);return[F.useCallback(()=>St.postRender(r),[r]),t]}class Qke extends F.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Zke({children:e,isPresent:t}){const n=F.useId(),r=F.useRef(null),i=F.useRef({width:0,height:0,top:0,left:0});return F.useInsertionEffect(()=>{const{width:o,height:s,top:a,left:l}=i.current;if(t||!r.current||!o||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),F.createElement(Qke,{isPresent:t,childRef:r,sizeRef:i},F.cloneElement(e,{ref:r}))}const F$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s})=>{const a=nP(Jke),l=F.useId(),u=F.useMemo(()=>({id:l,initial:t,isPresent:n,custom:i,onExitComplete:c=>{a.set(c,!0);for(const f of a.values())if(!f)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),o?void 0:[n]);return F.useMemo(()=>{a.forEach((c,f)=>a.set(f,!1))},[n]),F.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),s==="popLayout"&&(e=F.createElement(Zke,{isPresent:n},e)),F.createElement(Y1.Provider,{value:u},e)};function Jke(){return new Map}function eCe(e){return F.useEffect(()=>()=>e(),[])}const nf=e=>e.key||"";function tCe(e,t){e.forEach(n=>{const r=nf(n);t.set(r,n)})}function nCe(e){const t=[];return F.Children.forEach(e,n=>{F.isValidElement(n)&&t.push(n)}),t}const gX=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:s="sync"})=>{const a=F.useContext(YF).forceRender||Kke()[0],l=pX(),u=nCe(e);let c=u;const f=F.useRef(new Map).current,d=F.useRef(c),h=F.useRef(new Map).current,p=F.useRef(!0);if(WF(()=>{p.current=!1,tCe(u,h),d.current=c}),eCe(()=>{p.current=!0,h.clear(),f.clear()}),p.current)return F.createElement(F.Fragment,null,c.map(v=>F.createElement(F$,{key:nf(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:s},v)));c=[...c];const g=d.current.map(nf),m=u.map(nf),y=g.length;for(let v=0;v<y;v++){const b=g[v];m.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return s==="wait"&&f.size&&(c=[]),f.forEach((v,b)=>{if(m.indexOf(b)!==-1)return;const x=h.get(b);if(!x)return;const w=g.indexOf(b);let k=v;if(!k){const S=()=>{f.delete(b);const C=Array.from(h.keys()).filter(_=>!m.includes(_));if(C.forEach(_=>h.delete(_)),d.current=u.filter(_=>{const $=nf(_);return $===b||C.includes($)}),!f.size){if(l.current===!1)return;a(),r&&r()}};k=F.createElement(F$,{key:nf(x),isPresent:!1,onExitComplete:S,custom:t,presenceAffectsLayout:o,mode:s},x),f.set(b,k)}c.splice(w,0,k)}),c=c.map(v=>{const b=v.key;return f.has(b)?v:F.createElement(F$,{key:nf(v),isPresent:!0,presenceAffectsLayout:o,mode:s},v)}),F.createElement(F.Fragment,null,f.size?c:c.map(v=>F.cloneElement(v)))};class rCe{constructor(){this.componentControls=new Set}subscribe(t){return this.componentControls.add(t),()=>this.componentControls.delete(t)}start(t,n){this.componentControls.forEach(r=>{r.start(t.nativeEvent||t,n)})}}const iCe=()=>new rCe;function oCe(){return nP(iCe)}var sCe={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let r=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},mX=F.memo(e=>{const{id:t,message:n,onCloseComplete:r,onRequestRemove:i,requestClose:o=!1,position:s="bottom",duration:a=5e3,containerStyle:l,motionVariants:u=sCe,toastSpacing:c="0.5rem"}=e,[f,d]=F.useState(a),h=USe();II(()=>{h||r==null||r()},[h]),II(()=>{d(a)},[a]);const p=()=>d(null),g=()=>d(a),m=()=>{h&&i()};F.useEffect(()=>{h&&o&&i()},[h,o,i]),zxe(m,f);const y=F.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:c,...l}),[l,c]),v=F.useMemo(()=>Ixe(s),[s]);return E.jsx(Jk.div,{layout:!0,className:"chakra-toast",variants:u,initial:"initial",animate:"animate",exit:"exit",onHoverStart:p,onHoverEnd:g,custom:{position:s},style:v,children:E.jsx(Ae.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:y,children:ra(n,{id:t,onClose:m})})})});mX.displayName="ToastComponent";function aCe(e,t){var n;const r=e??"bottom",o={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(n=o==null?void 0:o[t])!=null?n:r}var U7={path:E.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[E.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),E.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),E.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Mt=Pe((e,t)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:o=!1,children:s,className:a,__css:l,...u}=e,c=Xe("chakra-icon",a),f=Rl("Icon",e),d={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...l,...f},h={ref:t,focusable:o,className:c,__css:d},p=r??U7.viewBox;if(n&&typeof n!="string")return E.jsx(Ae.svg,{as:n,...h,...u});const g=s??U7.path;return E.jsx(Ae.svg,{verticalAlign:"middle",viewBox:p,...h,...u,children:g})});Mt.displayName="Icon";function lCe(e){return E.jsx(Mt,{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function uCe(e){return E.jsx(Mt,{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function V7(e){return E.jsx(Mt,{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var cCe=Xfe({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),dP=Pe((e,t)=>{const n=Rl("Spinner",e),{label:r="Loading...",thickness:i="2px",speed:o="0.45s",emptyColor:s="transparent",className:a,...l}=Er(e),u=Xe("chakra-spinner",a),c={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:s,borderLeftColor:s,animation:`${cCe} ${o} linear infinite`,...n};return E.jsx(Ae.div,{ref:t,__css:c,className:u,...l,children:r&&E.jsx(Ae.span,{srOnly:!0,children:r})})});dP.displayName="Spinner";var[fCe,hP]=tr({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[dCe,pP]=tr({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),yX={info:{icon:uCe,colorScheme:"blue"},warning:{icon:V7,colorScheme:"orange"},success:{icon:lCe,colorScheme:"green"},error:{icon:V7,colorScheme:"red"},loading:{icon:dP,colorScheme:"blue"}};function hCe(e){return yX[e].colorScheme}function pCe(e){return yX[e].icon}var vX=Pe(function(t,n){const r=pP(),{status:i}=hP(),o={display:"inline",...r.description};return E.jsx(Ae.div,{ref:n,"data-status":i,...t,className:Xe("chakra-alert__desc",t.className),__css:o})});vX.displayName="AlertDescription";function bX(e){const{status:t}=hP(),n=pCe(t),r=pP(),i=t==="loading"?r.spinner:r.icon;return E.jsx(Ae.span,{display:"inherit","data-status":t,...e,className:Xe("chakra-alert__icon",e.className),__css:i,children:e.children||E.jsx(n,{h:"100%",w:"100%"})})}bX.displayName="AlertIcon";var xX=Pe(function(t,n){const r=pP(),{status:i}=hP();return E.jsx(Ae.div,{ref:n,"data-status":i,...t,className:Xe("chakra-alert__title",t.className),__css:r.title})});xX.displayName="AlertTitle";var wX=Pe(function(t,n){var r;const{status:i="info",addRole:o=!0,...s}=Er(t),a=(r=t.colorScheme)!=null?r:hCe(i),l=bc("Alert",{...t,colorScheme:a}),u={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...l.container};return E.jsx(fCe,{value:{status:i},children:E.jsx(dCe,{value:l,children:E.jsx(Ae.div,{"data-status":i,role:o?"alert":void 0,ref:n,...s,className:Xe("chakra-alert",t.className),__css:u})})})});wX.displayName="Alert";function gCe(e){return E.jsx(Mt,{focusable:"false","aria-hidden":!0,...e,children:E.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var SX=Pe(function(t,n){const r=Rl("CloseButton",t),{children:i,isDisabled:o,__css:s,...a}=Er(t),l={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return E.jsx(Ae.button,{type:"button","aria-label":"Close",ref:n,disabled:o,__css:{...l,...r,...s},...a,children:i||E.jsx(gCe,{width:"1em",height:"1em"})})});SX.displayName="CloseButton";var mCe={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Js=yCe(mCe);function yCe(e){let t=e;const n=new Set,r=i=>{t=i(t),n.forEach(o=>o())};return{getState:()=>t,subscribe:i=>(n.add(i),()=>{r(()=>e),n.delete(i)}),removeToast:(i,o)=>{r(s=>({...s,[o]:s[o].filter(a=>a.id!=i)}))},notify:(i,o)=>{const s=vCe(i,o),{position:a,id:l}=s;return r(u=>{var c,f;const h=a.includes("top")?[s,...(c=u[a])!=null?c:[]]:[...(f=u[a])!=null?f:[],s];return{...u,[a]:h}}),l},update:(i,o)=>{i&&r(s=>{const a={...s},{position:l,index:u}=NI(a,i);return l&&u!==-1&&(a[l][u]={...a[l][u],...o,message:kX(o)}),a})},closeAll:({positions:i}={})=>{r(o=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((l,u)=>(l[u]=o[u].map(c=>({...c,requestClose:!0})),l),{...o}))},close:i=>{r(o=>{const s=GG(o,i);return s?{...o,[s]:o[s].map(a=>a.id==i?{...a,requestClose:!0}:a)}:o})},isActive:i=>!!NI(Js.getState(),i).position}}var W7=0;function vCe(e,t={}){var n,r;W7+=1;const i=(n=t.id)!=null?n:W7,o=(r=t.position)!=null?r:"bottom";return{id:i,message:e,position:o,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>Js.removeToast(String(i),o),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var bCe=e=>{const{status:t,variant:n="solid",id:r,title:i,isClosable:o,onClose:s,description:a,colorScheme:l,icon:u}=e,c=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return E.jsxs(wX,{addRole:!1,status:t,variant:n,id:c==null?void 0:c.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[E.jsx(bX,{children:u}),E.jsxs(Ae.div,{flex:"1",maxWidth:"100%",children:[i&&E.jsx(xX,{id:c==null?void 0:c.title,children:i}),a&&E.jsx(vX,{id:c==null?void 0:c.description,display:"block",children:a})]}),o&&E.jsx(SX,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function kX(e={}){const{render:t,toastComponent:n=bCe}=e;return i=>typeof t=="function"?t({...i,...e}):E.jsx(n,{...i,...e})}function xCe(e,t){const n=i=>{var o;return{...t,...i,position:aCe((o=i==null?void 0:i.position)!=null?o:t==null?void 0:t.position,e)}},r=i=>{const o=n(i),s=kX(o);return Js.notify(s,o)};return r.update=(i,o)=>{Js.update(i,n(o))},r.promise=(i,o)=>{const s=r({...o.loading,status:"loading",duration:null});i.then(a=>r.update(s,{status:"success",duration:5e3,...ra(o.success,a)})).catch(a=>r.update(s,{status:"error",duration:5e3,...ra(o.error,a)}))},r.closeAll=Js.closeAll,r.close=Js.close,r.isActive=Js.isActive,r}var[wCe,SCe]=tr({name:"ToastOptionsContext",strict:!1}),kCe=e=>{const t=F.useSyncExternalStore(Js.subscribe,Js.getState,Js.getState),{motionVariants:n,component:r=mX,portalProps:i}=e,s=Object.keys(t).map(a=>{const l=t[a];return E.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${a}`,id:`chakra-toast-manager-${a}`,style:Lxe(a),children:E.jsx(gX,{initial:!1,children:l.map(u=>E.jsx(r,{motionVariants:n,...u},u.id))})},a)});return E.jsx(H1,{...i,children:s})};function CCe(e){const{theme:t}=yG(),n=SCe();return F.useMemo(()=>xCe(t.direction,{...n,...e}),[e,t.direction,n])}var _Ce=e=>function({children:n,theme:r=e,toastOptions:i,...o}){return E.jsxs(Oxe,{theme:r,...o,children:[E.jsx(wCe,{value:i==null?void 0:i.defaultOptions,children:n}),E.jsx(kCe,{...i})]})},ECe=_Ce(LG),$Ce=Object.defineProperty,ACe=(e,t,n)=>t in e?$Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ht=(e,t,n)=>(ACe(e,typeof t!="symbol"?t+"":t,n),n);function H7(e){return e.sort((t,n)=>{const r=t.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var TCe=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function q7(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function G7(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var N3=typeof window<"u"?F.useLayoutEffect:F.useEffect,xw=e=>e,MCe=class{constructor(){Ht(this,"descendants",new Map),Ht(this,"register",e=>{if(e!=null)return TCe(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),Ht(this,"unregister",e=>{this.descendants.delete(e);const t=H7(Array.from(this.descendants.keys()));this.assignIndex(t)}),Ht(this,"destroy",()=>{this.descendants.clear()}),Ht(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})}),Ht(this,"count",()=>this.descendants.size),Ht(this,"enabledCount",()=>this.enabledValues().length),Ht(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index)),Ht(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),Ht(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),Ht(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),Ht(this,"first",()=>this.item(0)),Ht(this,"firstEnabled",()=>this.enabledItem(0)),Ht(this,"last",()=>this.item(this.descendants.size-1)),Ht(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),Ht(this,"indexOf",e=>{var t,n;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1}),Ht(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),Ht(this,"next",(e,t=!0)=>{const n=q7(e,this.count(),t);return this.item(n)}),Ht(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=q7(r,this.enabledCount(),t);return this.enabledItem(i)}),Ht(this,"prev",(e,t=!0)=>{const n=G7(e,this.count()-1,t);return this.item(n)}),Ht(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=G7(r,this.enabledCount()-1,t);return this.enabledItem(i)}),Ht(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),r=H7(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(r)})}};function FCe(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function ed(...e){return t=>{e.forEach(n=>{FCe(n,t)})}}function PCe(...e){return F.useMemo(()=>ed(...e),e)}function RCe(){const e=F.useRef(new MCe);return N3(()=>()=>e.current.destroy()),e.current}var[DCe,CX]=tr({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function OCe(e){const t=CX(),[n,r]=F.useState(-1),i=F.useRef(null);N3(()=>()=>{i.current&&t.unregister(i.current)},[]),N3(()=>{if(!i.current)return;const s=Number(i.current.dataset.index);n!=s&&!Number.isNaN(s)&&r(s)});const o=xw(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(i.current),register:ed(o,i)}}function _X(){return[xw(DCe),()=>xw(CX()),()=>RCe(),i=>OCe(i)]}var[NCe,eC]=tr({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[ICe,gP]=tr({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[LCe,jot,zCe,BCe]=_X(),EX=Pe(function(t,n){const{getButtonProps:r}=gP(),i=r(t,n),s={display:"flex",alignItems:"center",width:"100%",outline:0,...eC().button};return E.jsx(Ae.button,{...i,className:Xe("chakra-accordion__button",t.className),__css:s})});EX.displayName="AccordionButton";function $X(e){const{value:t,defaultValue:n,onChange:r,shouldUpdate:i=(d,h)=>d!==h}=e,o=n2(r),s=n2(i),[a,l]=F.useState(n),u=t!==void 0,c=u?t:a,f=n2(d=>{const p=typeof d=="function"?d(c):d;s(c,p)&&(u||l(p),o(p))},[u,o,c,s]);return[c,f]}function jCe(e){const{onChange:t,defaultIndex:n,index:r,allowMultiple:i,allowToggle:o,...s}=e;WCe(e),HCe(e);const a=zCe(),[l,u]=F.useState(-1);F.useEffect(()=>()=>{u(-1)},[]);const[c,f]=$X({value:r,defaultValue(){return i?n??[]:n??-1},onChange:t});return{index:c,setIndex:f,htmlProps:s,getAccordionItemProps:h=>{let p=!1;return h!==null&&(p=Array.isArray(c)?c.includes(h):c===h),{isOpen:p,onChange:m=>{if(h!==null)if(i&&Array.isArray(c)){const y=m?c.concat(h):c.filter(v=>v!==h);f(y)}else m?f(h):o&&f(-1)}}},focusedIndex:l,setFocusedIndex:u,descendants:a}}var[UCe,mP]=tr({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function VCe(e){const{isDisabled:t,isFocusable:n,id:r,...i}=e,{getAccordionItemProps:o,setFocusedIndex:s}=mP(),a=F.useRef(null),l=F.useId(),u=r??l,c=`accordion-button-${u}`,f=`accordion-panel-${u}`;qCe(e);const{register:d,index:h,descendants:p}=BCe({disabled:t&&!n}),{isOpen:g,onChange:m}=o(h===-1?null:h);GCe({isOpen:g,isDisabled:t});const y=()=>{m==null||m(!0)},v=()=>{m==null||m(!1)},b=F.useCallback(()=>{m==null||m(!g),s(h)},[h,s,g,m]),x=F.useCallback(C=>{const $={ArrowDown:()=>{const A=p.nextEnabled(h);A==null||A.node.focus()},ArrowUp:()=>{const A=p.prevEnabled(h);A==null||A.node.focus()},Home:()=>{const A=p.firstEnabled();A==null||A.node.focus()},End:()=>{const A=p.lastEnabled();A==null||A.node.focus()}}[C.key];$&&(C.preventDefault(),$(C))},[p,h]),w=F.useCallback(()=>{s(h)},[s,h]),k=F.useCallback(function(_={},$=null){return{..._,type:"button",ref:ed(d,a,$),id:c,disabled:!!t,"aria-expanded":!!g,"aria-controls":f,onClick:Uu(_.onClick,b),onFocus:Uu(_.onFocus,w),onKeyDown:Uu(_.onKeyDown,x)}},[c,t,g,b,w,x,f,d]),S=F.useCallback(function(_={},$=null){return{..._,ref:$,role:"region",id:f,"aria-labelledby":c,hidden:!g}},[c,g,f]);return{isOpen:g,isDisabled:t,isFocusable:n,onOpen:y,onClose:v,getButtonProps:k,getPanelProps:S,htmlProps:i}}function WCe(e){const t=e.index||e.defaultIndex,n=t!=null&&!Array.isArray(t)&&e.allowMultiple;q1({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof t},`})}function HCe(e){q1({condition:!!(e.allowMultiple&&e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function qCe(e){q1({condition:!!(e.isFocusable&&!e.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function GCe(e){q1({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}function AX(e){const{isOpen:t,isDisabled:n}=gP(),{reduceMotion:r}=mP(),i=Xe("chakra-accordion__icon",e.className),o=eC(),s={opacity:n?.4:1,transform:t?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center",...o.icon};return E.jsx(Mt,{viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:s,...e,children:E.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}AX.displayName="AccordionIcon";var TX=Pe(function(t,n){const{children:r,className:i}=t,{htmlProps:o,...s}=VCe(t),l={...eC().container,overflowAnchor:"none"},u=F.useMemo(()=>s,[s]);return E.jsx(ICe,{value:u,children:E.jsx(Ae.div,{ref:n,...o,className:Xe("chakra-accordion__item",i),__css:l,children:typeof r=="function"?r({isExpanded:!!s.isOpen,isDisabled:!!s.isDisabled}):r})})});TX.displayName="AccordionItem";var Lb={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},Y7={enter:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.enter}),exit:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.exit})},YCe=e=>e!=null&&parseInt(e.toString(),10)>0,X7={exit:{height:{duration:.2,ease:Lb.ease},opacity:{duration:.3,ease:Lb.ease}},enter:{height:{duration:.3,ease:Lb.ease},opacity:{duration:.4,ease:Lb.ease}}},XCe={exit:({animateOpacity:e,startingHeight:t,transition:n,transitionEnd:r,delay:i})=>{var o;return{...e&&{opacity:YCe(t)?1:0},height:t,transitionEnd:r==null?void 0:r.exit,transition:(o=n==null?void 0:n.exit)!=null?o:Y7.exit(X7.exit,i)}},enter:({animateOpacity:e,endingHeight:t,transition:n,transitionEnd:r,delay:i})=>{var o;return{...e&&{opacity:1},height:t,transitionEnd:r==null?void 0:r.enter,transition:(o=n==null?void 0:n.enter)!=null?o:Y7.enter(X7.enter,i)}}},MX=F.forwardRef((e,t)=>{const{in:n,unmountOnExit:r,animateOpacity:i=!0,startingHeight:o=0,endingHeight:s="auto",style:a,className:l,transition:u,transitionEnd:c,...f}=e,[d,h]=F.useState(!1);F.useEffect(()=>{const v=setTimeout(()=>{h(!0)});return()=>clearTimeout(v)},[]),q1({condition:Number(o)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const p=parseFloat(o.toString())>0,g={startingHeight:o,endingHeight:s,animateOpacity:i,transition:d?u:{enter:{duration:0}},transitionEnd:{enter:c==null?void 0:c.enter,exit:r?c==null?void 0:c.exit:{...c==null?void 0:c.exit,display:p?"block":"none"}}},m=r?n:!0,y=n||r?"enter":"exit";return E.jsx(gX,{initial:!1,custom:g,children:m&&E.jsx(Jk.div,{ref:t,...f,className:Xe("chakra-collapse",l),style:{overflow:"hidden",display:"block",...a},custom:g,variants:XCe,initial:r?"exit":!1,animate:y,exit:"exit"})})});MX.displayName="Collapse";var FX=Pe(function(t,n){const{className:r,motionProps:i,...o}=t,{reduceMotion:s}=mP(),{getPanelProps:a,isOpen:l}=gP(),u=a(o,n),c=Xe("chakra-accordion__panel",r),f=eC();s||delete u.hidden;const d=E.jsx(Ae.div,{...u,__css:f.panel,className:c});return s?d:E.jsx(MX,{in:l,...i,children:d})});FX.displayName="AccordionPanel";var PX=Pe(function({children:t,reduceMotion:n,...r},i){const o=bc("Accordion",r),s=Er(r),{htmlProps:a,descendants:l,...u}=jCe(s),c=F.useMemo(()=>({...u,reduceMotion:!!n}),[u,n]);return E.jsx(LCe,{value:l,children:E.jsx(UCe,{value:c,children:E.jsx(NCe,{value:o,children:E.jsx(Ae.div,{ref:i,...a,className:Xe("chakra-accordion",r.className),__css:o.root,children:t})})})})});PX.displayName="Accordion";var I3=Pe(function(t,n){const{htmlWidth:r,htmlHeight:i,alt:o,...s}=t;return E.jsx("img",{width:r,height:i,ref:n,alt:o,...s})});I3.displayName="NativeImage";function KCe(e){const{loading:t,src:n,srcSet:r,onLoad:i,onError:o,crossOrigin:s,sizes:a,ignoreFallback:l}=e,[u,c]=F.useState("pending");F.useEffect(()=>{c(n?"loading":"pending")},[n]);const f=F.useRef(),d=F.useCallback(()=>{if(!n)return;h();const p=new Image;p.src=n,s&&(p.crossOrigin=s),r&&(p.srcset=r),a&&(p.sizes=a),t&&(p.loading=t),p.onload=g=>{h(),c("loaded"),i==null||i(g)},p.onerror=g=>{h(),c("failed"),o==null||o(g)},f.current=p},[n,s,r,a,i,o,t]),h=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return Dp(()=>{if(!l)return u==="loading"&&d(),()=>{h()}},[u,d,l]),l?"loaded":u}var QCe=(e,t)=>e!=="loaded"&&t==="beforeLoadOrError"||e==="failed"&&t==="onError";function ZCe(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}var RX=Pe(function(t,n){const{fallbackSrc:r,fallback:i,src:o,srcSet:s,align:a,fit:l,loading:u,ignoreFallback:c,crossOrigin:f,fallbackStrategy:d="beforeLoadOrError",referrerPolicy:h,...p}=t,g=r!==void 0||i!==void 0,m=u!=null||c||!g,y=KCe({...t,crossOrigin:f,ignoreFallback:m}),v=QCe(y,d),b={ref:n,objectFit:l,objectPosition:a,...m?p:ZCe(p,["onError","onLoad"])};return v?i||E.jsx(Ae.img,{as:I3,className:"chakra-image__placeholder",src:r,...b}):E.jsx(Ae.img,{as:I3,src:o,srcSet:s,crossOrigin:f,loading:u,referrerPolicy:h,className:"chakra-image",...b})});RX.displayName="Image";function tC(e){return F.Children.toArray(e).filter(t=>F.isValidElement(t))}var[Uot,JCe]=tr({strict:!1,name:"ButtonGroupContext"});function e_e(e){const[t,n]=F.useState(!e);return{ref:F.useCallback(o=>{o&&n(o.tagName==="BUTTON")},[]),type:t?"button":void 0}}function L3(e){const{children:t,className:n,...r}=e,i=F.isValidElement(t)?F.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,o=Xe("chakra-button__icon",n);return E.jsx(Ae.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:o,children:i})}L3.displayName="ButtonIcon";function z3(e){const{label:t,placement:n,spacing:r="0.5rem",children:i=E.jsx(dP,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:s,...a}=e,l=Xe("chakra-button__spinner",o),u=n==="start"?"marginEnd":"marginStart",c=F.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[u]:t?r:0,fontSize:"1em",lineHeight:"normal",...s}),[s,t,u,r]);return E.jsx(Ae.div,{className:l,...a,__css:c,children:i})}z3.displayName="ButtonSpinner";var Su=Pe((e,t)=>{const n=JCe(),r=Rl("Button",{...n,...e}),{isDisabled:i=n==null?void 0:n.isDisabled,isLoading:o,isActive:s,children:a,leftIcon:l,rightIcon:u,loadingText:c,iconSpacing:f="0.5rem",type:d,spinner:h,spinnerPlacement:p="start",className:g,as:m,...y}=Er(e),v=F.useMemo(()=>{const k={...r==null?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:k}}},[r,n]),{ref:b,type:x}=e_e(m),w={rightIcon:u,leftIcon:l,iconSpacing:f,children:a};return E.jsxs(Ae.button,{ref:PCe(t,b),as:m,type:d??x,"data-active":fo(s),"data-loading":fo(o),__css:v,className:Xe("chakra-button",g),...y,disabled:i||o,children:[o&&p==="start"&&E.jsx(z3,{className:"chakra-button__spinner--start",label:c,placement:"start",spacing:f,children:h}),o?c||E.jsx(Ae.span,{opacity:0,children:E.jsx(K7,{...w})}):E.jsx(K7,{...w}),o&&p==="end"&&E.jsx(z3,{className:"chakra-button__spinner--end",label:c,placement:"end",spacing:f,children:h})]})});Su.displayName="Button";function K7(e){const{leftIcon:t,rightIcon:n,children:r,iconSpacing:i}=e;return E.jsxs(E.Fragment,{children:[t&&E.jsx(L3,{marginEnd:i,children:t}),r,n&&E.jsx(L3,{marginStart:i,children:n})]})}var ku=Pe((e,t)=>{const{icon:n,children:r,isRound:i,"aria-label":o,...s}=e,a=n||r,l=F.isValidElement(a)?F.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return E.jsx(Su,{padding:"0",borderRadius:i?"full":void 0,ref:t,"aria-label":o,...s,children:l})});ku.displayName="IconButton";var[t_e,n_e]=tr({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[r_e,DX]=tr({strict:!1,name:"FormControlContext"});function i_e(e){const{id:t,isRequired:n,isInvalid:r,isDisabled:i,isReadOnly:o,...s}=e,a=F.useId(),l=t||`field-${a}`,u=`${l}-label`,c=`${l}-feedback`,f=`${l}-helptext`,[d,h]=F.useState(!1),[p,g]=F.useState(!1),[m,y]=F.useState(!1),v=F.useCallback((S={},C=null)=>({id:f,...S,ref:ed(C,_=>{_&&g(!0)})}),[f]),b=F.useCallback((S={},C=null)=>({...S,ref:C,"data-focus":fo(m),"data-disabled":fo(i),"data-invalid":fo(r),"data-readonly":fo(o),id:S.id!==void 0?S.id:u,htmlFor:S.htmlFor!==void 0?S.htmlFor:l}),[l,i,m,r,o,u]),x=F.useCallback((S={},C=null)=>({id:c,...S,ref:ed(C,_=>{_&&h(!0)}),"aria-live":"polite"}),[c]),w=F.useCallback((S={},C=null)=>({...S,...s,ref:C,role:"group","data-focus":fo(m),"data-disabled":fo(i),"data-invalid":fo(r),"data-readonly":fo(o)}),[s,i,m,r,o]),k=F.useCallback((S={},C=null)=>({...S,ref:C,role:"presentation","aria-hidden":!0,children:S.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!o,isDisabled:!!i,isFocused:!!m,onFocus:()=>y(!0),onBlur:()=>y(!1),hasFeedbackText:d,setHasFeedbackText:h,hasHelpText:p,setHasHelpText:g,id:l,labelId:u,feedbackId:c,helpTextId:f,htmlProps:s,getHelpTextProps:v,getErrorMessageProps:x,getRootProps:w,getLabelProps:b,getRequiredIndicatorProps:k}}var OX=Pe(function(t,n){const r=bc("Form",t),i=Er(t),{getRootProps:o,htmlProps:s,...a}=i_e(i),l=Xe("chakra-form-control",t.className);return E.jsx(r_e,{value:a,children:E.jsx(t_e,{value:r,children:E.jsx(Ae.div,{...o({},n),className:l,__css:r.container})})})});OX.displayName="FormControl";var o_e=Pe(function(t,n){const r=DX(),i=n_e(),o=Xe("chakra-form__helper-text",t.className);return E.jsx(Ae.div,{...r==null?void 0:r.getHelpTextProps(t,n),__css:i.helperText,className:o})});o_e.displayName="FormHelperText";function NX(e){const{isDisabled:t,isInvalid:n,isReadOnly:r,isRequired:i,...o}=s_e(e);return{...o,disabled:t,readOnly:r,required:i,"aria-invalid":e$(n),"aria-required":e$(i),"aria-readonly":e$(r)}}function s_e(e){var t,n,r;const i=DX(),{id:o,disabled:s,readOnly:a,required:l,isRequired:u,isInvalid:c,isReadOnly:f,isDisabled:d,onFocus:h,onBlur:p,...g}=e,m=e["aria-describedby"]?[e["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&m.push(i.feedbackId),i!=null&&i.hasHelpText&&m.push(i.helpTextId),{...g,"aria-describedby":m.join(" ")||void 0,id:o??(i==null?void 0:i.id),isDisabled:(t=s??d)!=null?t:i==null?void 0:i.isDisabled,isReadOnly:(n=a??f)!=null?n:i==null?void 0:i.isReadOnly,isRequired:(r=l??u)!=null?r:i==null?void 0:i.isRequired,isInvalid:c??(i==null?void 0:i.isInvalid),onFocus:Uu(i==null?void 0:i.onFocus,h),onBlur:Uu(i==null?void 0:i.onBlur,p)}}var IX={exports:{}},a_e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",l_e=a_e,u_e=l_e;function LX(){}function zX(){}zX.resetWarningCache=LX;var c_e=function(){function e(r,i,o,s,a,l){if(l!==u_e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:zX,resetWarningCache:LX};return n.PropTypes=n,n};IX.exports=c_e();var f_e=IX.exports;const Q7=Fl(f_e);var[d_e,h_e]=tr({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),BX=Pe(function(t,n){const r=bc("Input",t),{children:i,className:o,...s}=Er(t),a=Xe("chakra-input__group",o),l={},u=tC(i),c=r.field;u.forEach(d=>{var h,p;r&&(c&&d.type.id==="InputLeftElement"&&(l.paddingStart=(h=c.height)!=null?h:c.h),c&&d.type.id==="InputRightElement"&&(l.paddingEnd=(p=c.height)!=null?p:c.h),d.type.id==="InputRightAddon"&&(l.borderEndRadius=0),d.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const f=u.map(d=>{var h,p;const g=HG({size:((h=d.props)==null?void 0:h.size)||t.size,variant:((p=d.props)==null?void 0:p.variant)||t.variant});return d.type.id!=="Input"?F.cloneElement(d,g):F.cloneElement(d,Object.assign(g,l,d.props))});return E.jsx(Ae.div,{className:a,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...s,children:E.jsx(d_e,{value:r,children:f})})});BX.displayName="InputGroup";var p_e=Ae("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),nC=Pe(function(t,n){var r,i;const{placement:o="left",...s}=t,a=h_e(),l=a.field,c={[o==="left"?"insetStart":"insetEnd"]:"0",width:(r=l==null?void 0:l.height)!=null?r:l==null?void 0:l.h,height:(i=l==null?void 0:l.height)!=null?i:l==null?void 0:l.h,fontSize:l==null?void 0:l.fontSize,...a.element};return E.jsx(p_e,{ref:n,__css:c,...s})});nC.id="InputElement";nC.displayName="InputElement";var jX=Pe(function(t,n){const{className:r,...i}=t,o=Xe("chakra-input__left-element",r);return E.jsx(nC,{ref:n,placement:"left",className:o,...i})});jX.id="InputLeftElement";jX.displayName="InputLeftElement";var yP=Pe(function(t,n){const{className:r,...i}=t,o=Xe("chakra-input__right-element",r);return E.jsx(nC,{ref:n,placement:"right",className:o,...i})});yP.id="InputRightElement";yP.displayName="InputRightElement";var Jy=Pe(function(t,n){const{htmlSize:r,...i}=t,o=bc("Input",i),s=Er(i),a=NX(s),l=Xe("chakra-input",t.className);return E.jsx(Ae.input,{size:r,...a,__css:o.field,ref:n,className:l})});Jy.displayName="Input";Jy.id="Input";var o2=Pe(function(t,n){const r=Rl("Link",t),{className:i,isExternal:o,...s}=Er(t);return E.jsx(Ae.a,{target:o?"_blank":void 0,rel:o?"noopener":void 0,ref:n,className:Xe("chakra-link",i),...s,__css:r})});o2.displayName="Link";var[g_e,UX]=tr({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),vP=Pe(function(t,n){const r=bc("List",t),{children:i,styleType:o="none",stylePosition:s,spacing:a,...l}=Er(t),u=tC(i),f=a?{["& > *:not(style) ~ *:not(style)"]:{mt:a}}:{};return E.jsx(g_e,{value:r,children:E.jsx(Ae.ul,{ref:n,listStyleType:o,listStylePosition:s,role:"list",__css:{...r.container,...f},...l,children:u})})});vP.displayName="List";var VX=Pe((e,t)=>{const{as:n,...r}=e;return E.jsx(vP,{ref:t,as:"ol",styleType:"decimal",marginStart:"1em",...r})});VX.displayName="OrderedList";var m_e=Pe(function(t,n){const{as:r,...i}=t;return E.jsx(vP,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...i})});m_e.displayName="UnorderedList";var WX=Pe(function(t,n){const r=UX();return E.jsx(Ae.li,{ref:n,...t,__css:r.item})});WX.displayName="ListItem";var y_e=Pe(function(t,n){const r=UX();return E.jsx(Mt,{ref:n,role:"presentation",...t,__css:r.icon})});y_e.displayName="ListIcon";var ay=Pe(function(t,n){const{templateAreas:r,gap:i,rowGap:o,columnGap:s,column:a,row:l,autoFlow:u,autoRows:c,templateRows:f,autoColumns:d,templateColumns:h,...p}=t,g={display:"grid",gridTemplateAreas:r,gridGap:i,gridRowGap:o,gridColumnGap:s,gridAutoColumns:d,gridColumn:a,gridRow:l,gridAutoFlow:u,gridAutoRows:c,gridTemplateRows:f,gridTemplateColumns:h};return E.jsx(Ae.div,{ref:n,__css:g,...p})});ay.displayName="Grid";var HX=Object.freeze(["base","sm","md","lg","xl","2xl"]);function v_e(e,t){return Array.isArray(e)?e.map(n=>n===null?null:t(n)):pi(e)?Object.keys(e).reduce((n,r)=>(n[r]=t(e[r]),n),{}):e!=null?t(e):null}function b_e(e,t=HX){const n={};return e.forEach((r,i)=>{const o=t[i];r!=null&&(n[o]=r)}),n}var bP=Ae("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});bP.displayName="Spacer";var un=Pe(function(t,n){const r=Rl("Text",t),{className:i,align:o,decoration:s,casing:a,...l}=Er(t),u=HG({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return E.jsx(Ae.p,{ref:n,className:Xe("chakra-text",t.className),...u,...l,__css:r})});un.displayName="Text";var qX=e=>E.jsx(Ae.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});qX.displayName="StackItem";function x_e(e){const{spacing:t,direction:n}=e,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":v_e(n,i=>r[i])}}var GX=Pe((e,t)=>{const{isInline:n,direction:r,align:i,justify:o,spacing:s="0.5rem",wrap:a,children:l,divider:u,className:c,shouldWrapChildren:f,...d}=e,h=n?"row":r??"column",p=F.useMemo(()=>x_e({spacing:s,direction:h}),[s,h]),g=!!u,m=!f&&!g,y=F.useMemo(()=>{const b=tC(l);return m?b:b.map((x,w)=>{const k=typeof x.key<"u"?x.key:w,S=w+1===b.length,_=f?E.jsx(qX,{children:x},k):x;if(!g)return _;const $=F.cloneElement(u,{__css:p}),A=S?null:$;return E.jsxs(F.Fragment,{children:[_,A]},k)})},[u,p,g,m,f,l]),v=Xe("chakra-stack",c);return E.jsx(Ae.div,{ref:t,display:"flex",alignItems:i,justifyContent:o,flexDirection:h,flexWrap:a,gap:g?void 0:s,className:v,...d,children:y})});GX.displayName="Stack";var J1=Pe((e,t)=>E.jsx(GX,{align:"center",...e,direction:"column",ref:t}));J1.displayName="VStack";var ev=Pe(function(t,n){const r=Rl("Heading",t),{className:i,...o}=Er(t);return E.jsx(Ae.h2,{ref:n,className:Xe("chakra-heading",t.className),...o,__css:r})});ev.displayName="Heading";var YX=Pe(function(t,n){const r=Rl("Badge",t),{className:i,...o}=Er(t);return E.jsx(Ae.span,{ref:n,className:Xe("chakra-badge",t.className),...o,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...r}})});YX.displayName="Badge";var qp=Ae("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});qp.displayName="Center";var w_e={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Pe(function(t,n){const{axis:r="both",...i}=t;return E.jsx(Ae.div,{ref:n,__css:w_e[r],...i,position:"absolute"})});var xP=Pe(function(t,n){const{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:o,borderRightWidth:s,borderWidth:a,borderStyle:l,borderColor:u,...c}=Rl("Divider",t),{className:f,orientation:d="horizontal",__css:h,...p}=Er(t),g={vertical:{borderLeftWidth:r||s||a||"1px",height:"100%"},horizontal:{borderBottomWidth:i||o||a||"1px",width:"100%"}};return E.jsx(Ae.hr,{ref:n,"aria-orientation":d,...p,__css:{...c,border:"0",borderColor:u,borderStyle:l,...g[d],...h},className:Xe("chakra-divider",f)})});xP.displayName="Divider";var Ot=Pe(function(t,n){const{direction:r,align:i,justify:o,wrap:s,basis:a,grow:l,shrink:u,...c}=t,f={display:"flex",flexDirection:r,alignItems:i,justifyContent:o,flexWrap:s,flexBasis:a,flexGrow:l,flexShrink:u};return E.jsx(Ae.div,{ref:n,__css:f,...c})});Ot.displayName="Flex";function S_e(e,t={}){const{ssr:n=!0,fallback:r}=t,{getWindow:i}=Dxe(),o=Array.isArray(e)?e:[e];let s=Array.isArray(r)?r:[r];s=s.filter(u=>u!=null);const[a,l]=F.useState(()=>o.map((u,c)=>({media:u,matches:n?!!s[c]:i().matchMedia(u).matches})));return F.useEffect(()=>{const u=i();l(o.map(d=>({media:d,matches:u.matchMedia(d).matches})));const c=o.map(d=>u.matchMedia(d)),f=d=>{l(h=>h.slice().map(p=>p.media===d.media?{...p,matches:d.matches}:p))};return c.forEach(d=>{typeof d.addListener=="function"?d.addListener(f):d.addEventListener("change",f)}),()=>{c.forEach(d=>{typeof d.removeListener=="function"?d.removeListener(f):d.removeEventListener("change",f)})}},[i]),a.map(u=>u.matches)}function k_e(e,t,n=HX){let r=Object.keys(e).indexOf(t);if(r!==-1)return e[t];let i=n.indexOf(t);for(;i>=0;){const o=n[i];if(e.hasOwnProperty(o)){r=i;break}i-=1}if(r!==-1){const o=n[r];return e[o]}}function C_e(e){var t,n;const r=pi(e)?e:{fallback:e??"base"},o=RF().__breakpoints.details.map(({minMaxQuery:u,breakpoint:c})=>({breakpoint:c,query:u.replace("@media screen and ","")})),s=o.map(u=>u.breakpoint===r.fallback),l=S_e(o.map(u=>u.query),{fallback:s,ssr:r.ssr}).findIndex(u=>u==!0);return(n=(t=o[l])==null?void 0:t.breakpoint)!=null?n:r.fallback}function vh(e,t){var n;const r=pi(t)?t:{fallback:"base"},i=C_e(r),o=RF();if(!i)return;const s=Array.from(((n=o.__breakpoints)==null?void 0:n.keys)||[]),a=Array.isArray(e)?Object.fromEntries(Object.entries(b_e(e,s)).map(([l,u])=>[l,u])):e;return k_e(a,i,s)}function __e(){const e=F.useRef(new Map),t=e.current,n=F.useCallback((i,o,s,a)=>{e.current.set(s,{type:o,el:i,options:a}),i.addEventListener(o,s,a)},[]),r=F.useCallback((i,o,s,a)=>{i.removeEventListener(o,s,a),e.current.delete(s)},[]);return F.useEffect(()=>()=>{t.forEach((i,o)=>{r(i.el,i.type,o,i.options)})},[r,t]),{add:n,remove:r}}function P$(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function E_e(e={}){const{ref:t,isDisabled:n,isFocusable:r,clickOnEnter:i=!0,clickOnSpace:o=!0,onMouseDown:s,onMouseUp:a,onClick:l,onKeyDown:u,onKeyUp:c,tabIndex:f,onMouseOver:d,onMouseLeave:h,...p}=e,[g,m]=F.useState(!0),[y,v]=F.useState(!1),b=__e(),x=I=>{I&&I.tagName!=="BUTTON"&&m(!1)},w=g?f:f||0,k=n&&!r,S=F.useCallback(I=>{if(n){I.stopPropagation(),I.preventDefault();return}I.currentTarget.focus(),l==null||l(I)},[n,l]),C=F.useCallback(I=>{y&&P$(I)&&(I.preventDefault(),I.stopPropagation(),v(!1),b.remove(document,"keyup",C,!1))},[y,b]),_=F.useCallback(I=>{if(u==null||u(I),n||I.defaultPrevented||I.metaKey||!P$(I.nativeEvent)||g)return;const O=i&&I.key==="Enter";o&&I.key===" "&&(I.preventDefault(),v(!0)),O&&(I.preventDefault(),I.currentTarget.click()),b.add(document,"keyup",C,!1)},[n,g,u,i,o,b,C]),$=F.useCallback(I=>{if(c==null||c(I),n||I.defaultPrevented||I.metaKey||!P$(I.nativeEvent)||g)return;o&&I.key===" "&&(I.preventDefault(),v(!1),I.currentTarget.click())},[o,g,n,c]),A=F.useCallback(I=>{I.button===0&&(v(!1),b.remove(document,"mouseup",A,!1))},[b]),N=F.useCallback(I=>{if(I.button!==0)return;if(n){I.stopPropagation(),I.preventDefault();return}g||v(!0),I.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",A,!1),s==null||s(I)},[n,g,s,b,A]),M=F.useCallback(I=>{I.button===0&&(g||v(!1),a==null||a(I))},[a,g]),R=F.useCallback(I=>{if(n){I.preventDefault();return}d==null||d(I)},[n,d]),P=F.useCallback(I=>{y&&(I.preventDefault(),v(!1)),h==null||h(I)},[y,h]),D=ed(t,x);return g?{...p,ref:D,type:"button","aria-disabled":k?void 0:n,disabled:k,onClick:S,onMouseDown:s,onMouseUp:a,onKeyUp:c,onKeyDown:u,onMouseOver:d,onMouseLeave:h}:{...p,ref:D,role:"button","data-active":fo(y),"aria-disabled":n?"true":void 0,tabIndex:k?void 0:w,onClick:S,onMouseDown:N,onMouseUp:M,onKeyUp:$,onKeyDown:_,onMouseOver:R,onMouseLeave:P}}function $_e(e){const{wasSelected:t,enabled:n,isSelected:r,mode:i="unmount"}=e;return!!(!n||r||i==="keepMounted"&&t)}var XX=Pe(function(t,n){const{children:r,placeholder:i,className:o,...s}=t;return E.jsxs(Ae.select,{...s,ref:n,className:Xe("chakra-select",o),children:[i&&E.jsx("option",{value:"",children:i}),r]})});XX.displayName="SelectField";function A_e(e,t){const n={},r={};for(const[i,o]of Object.entries(e))t.includes(i)?n[i]=o:r[i]=o;return[n,r]}var wP=Pe((e,t)=>{var n;const r=bc("Select",e),{rootProps:i,placeholder:o,icon:s,color:a,height:l,h:u,minH:c,minHeight:f,iconColor:d,iconSize:h,...p}=Er(e),[g,m]=A_e(p,bge),y=NX(m),v={width:"100%",height:"fit-content",position:"relative",color:a},b={paddingEnd:"2rem",...r.field,_focus:{zIndex:"unset",...(n=r.field)==null?void 0:n._focus}};return E.jsxs(Ae.div,{className:"chakra-select__wrapper",__css:v,...g,...i,children:[E.jsx(XX,{ref:t,height:u??l,minH:c??f,placeholder:o,...y,__css:b,children:e.children}),E.jsx(KX,{"data-disabled":fo(y.disabled),...(d||a)&&{color:d||a},__css:r.icon,...h&&{fontSize:h},children:s})]})});wP.displayName="Select";var T_e=e=>E.jsx("svg",{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),M_e=Ae("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),KX=e=>{const{children:t=E.jsx(T_e,{}),...n}=e,r=F.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return E.jsx(M_e,{...n,className:"chakra-select__icon-wrapper",children:F.isValidElement(t)?r:null})};KX.displayName="SelectIcon";var[F_e,P_e,R_e,D_e]=_X();function O_e(e){var t;const{defaultIndex:n,onChange:r,index:i,isManual:o,isLazy:s,lazyBehavior:a="unmount",orientation:l="horizontal",direction:u="ltr",...c}=e,[f,d]=F.useState(n??0),[h,p]=$X({defaultValue:n??0,value:i,onChange:r});F.useEffect(()=>{i!=null&&d(i)},[i]);const g=R_e(),m=F.useId();return{id:`tabs-${(t=e.id)!=null?t:m}`,selectedIndex:h,focusedIndex:f,setSelectedIndex:p,setFocusedIndex:d,isManual:o,isLazy:s,lazyBehavior:a,orientation:l,descendants:g,direction:u,htmlProps:c}}var[N_e,rC]=tr({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function I_e(e){const{focusedIndex:t,orientation:n,direction:r}=rC(),i=P_e(),o=F.useCallback(s=>{const a=()=>{var v;const b=i.nextEnabled(t);b&&((v=b.node)==null||v.focus())},l=()=>{var v;const b=i.prevEnabled(t);b&&((v=b.node)==null||v.focus())},u=()=>{var v;const b=i.firstEnabled();b&&((v=b.node)==null||v.focus())},c=()=>{var v;const b=i.lastEnabled();b&&((v=b.node)==null||v.focus())},f=n==="horizontal",d=n==="vertical",h=s.key,p=r==="ltr"?"ArrowLeft":"ArrowRight",g=r==="ltr"?"ArrowRight":"ArrowLeft",y={[p]:()=>f&&l(),[g]:()=>f&&a(),ArrowDown:()=>d&&a(),ArrowUp:()=>d&&l(),Home:u,End:c}[h];y&&(s.preventDefault(),y(s))},[i,t,n,r]);return{...e,role:"tablist","aria-orientation":n,onKeyDown:Uu(e.onKeyDown,o)}}function L_e(e){const{isDisabled:t=!1,isFocusable:n=!1,...r}=e,{setSelectedIndex:i,isManual:o,id:s,setFocusedIndex:a,selectedIndex:l}=rC(),{index:u,register:c}=D_e({disabled:t&&!n}),f=u===l,d=()=>{i(u)},h=()=>{a(u),!o&&!(t&&n)&&i(u)};return{...E_e({...r,ref:ed(c,e.ref),isDisabled:t,isFocusable:n,onClick:Uu(e.onClick,d)}),id:QX(s,u),role:"tab",tabIndex:f?0:-1,type:"button","aria-selected":f,"aria-controls":ZX(s,u),onFocus:t?void 0:Uu(e.onFocus,h)}}var[z_e,B_e]=tr({});function j_e(e){const t=rC(),{id:n,selectedIndex:r}=t,o=tC(e.children).map((s,a)=>F.createElement(z_e,{key:a,value:{isSelected:a===r,id:ZX(n,a),tabId:QX(n,a),selectedIndex:r}},s));return{...e,children:o}}function U_e(e){const{children:t,...n}=e,{isLazy:r,lazyBehavior:i}=rC(),{isSelected:o,id:s,tabId:a}=B_e(),l=F.useRef(!1);o&&(l.current=!0);const u=$_e({wasSelected:l.current,isSelected:o,enabled:r,mode:i});return{tabIndex:0,...n,children:u?t:null,role:"tabpanel","aria-labelledby":a,hidden:!o,id:s}}function QX(e,t){return`${e}--tab-${t}`}function ZX(e,t){return`${e}--tabpanel-${t}`}var[V_e,iC]=tr({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),JX=Pe(function(t,n){const r=bc("Tabs",t),{children:i,className:o,...s}=Er(t),{htmlProps:a,descendants:l,...u}=O_e(s),c=F.useMemo(()=>u,[u]),{isFitted:f,...d}=a,h={position:"relative",...r.root};return E.jsx(F_e,{value:l,children:E.jsx(N_e,{value:c,children:E.jsx(V_e,{value:r,children:E.jsx(Ae.div,{className:Xe("chakra-tabs",o),ref:n,...d,__css:h,children:i})})})})});JX.displayName="Tabs";var eK=Pe(function(t,n){const r=I_e({...t,ref:n}),o={display:"flex",...iC().tablist};return E.jsx(Ae.div,{...r,className:Xe("chakra-tabs__tablist",t.className),__css:o})});eK.displayName="TabList";var td=Pe(function(t,n){const r=U_e({...t,ref:n}),i=iC();return E.jsx(Ae.div,{outline:"0",...r,className:Xe("chakra-tabs__tab-panel",t.className),__css:i.tabpanel})});td.displayName="TabPanel";var tK=Pe(function(t,n){const r=j_e(t),i=iC();return E.jsx(Ae.div,{...r,width:"100%",ref:n,className:Xe("chakra-tabs__tab-panels",t.className),__css:i.tabpanels})});tK.displayName="TabPanels";var nK=Pe(function(t,n){const r=iC(),i=L_e({...t,ref:n}),o={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...r.tab};return E.jsx(Ae.button,{...i,className:Xe("chakra-tabs__tab",t.className),__css:o})});nK.displayName="Tab";function Z7(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const rK=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),J7=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);J7&&parseFloat(J7[1]);const zb=globalThis,th=globalThis.process||{};function W_e(e){var r,i;if(typeof window<"u"&&((r=window.process)==null?void 0:r.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function SP(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||W_e()}const iK="4.0.7";function H_e(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch{return null}}class q_e{constructor(t,n,r="sessionStorage"){this.storage=H_e(r),this.id=t,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let t={};if(this.storage){const n=this.storage.getItem(this.id);t=n?JSON.parse(n):{}}return Object.assign(this.config,t),this}}function G_e(e){let t;return e<10?t=`${e.toFixed(2)}ms`:e<100?t=`${e.toFixed(1)}ms`:e<1e3?t=`${e.toFixed(0)}ms`:t=`${(e/1e3).toFixed(2)}s`,t}function Y_e(e,t=8){const n=Math.max(t-e.length,0);return`${" ".repeat(n)}${e}`}var ww;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(ww||(ww={}));const X_e=10;function eL(e){return typeof e!="string"?e:(e=e.toUpperCase(),ww[e]||ww.WHITE)}function K_e(e,t,n){return!SP&&typeof e=="string"&&(t&&(e=`\x1B[${eL(t)}m${e}\x1B[39m`),n&&(e=`\x1B[${eL(n)+X_e}m${e}\x1B[49m`)),e}function Q_e(e,t=["constructor"]){const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=e;for(const o of r){const s=i[o];typeof s=="function"&&(t.find(a=>o===a)||(i[o]=s.bind(e)))}}function kP(e,t){if(!e)throw new Error("Assertion failed")}function nh(){var t,n,r;let e;if(SP()&&zb.performance)e=(n=(t=zb==null?void 0:zb.performance)==null?void 0:t.now)==null?void 0:n.call(t);else if("hrtime"in th){const i=(r=th==null?void 0:th.hrtime)==null?void 0:r.call(th);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const rh={debug:SP()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Z_e={enabled:!0,level:0};function ih(){}const tL={},nL={once:!0};let CP=class{constructor({id:t}={id:""}){this.VERSION=iK,this._startTs=nh(),this._deltaTs=nh(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new q_e(`__probe-${this.id}__`,Z_e),this.timeStamp(`${this.id} started`),Q_e(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((nh()-this._startTs).toPrecision(10))}getDelta(){return Number((nh()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,n){this._storage.setConfiguration({[t]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,n){if(!t)throw new Error(n||"Assertion failed")}warn(t){return this._getLogFunction(0,t,rh.warn,arguments,nL)}error(t){return this._getLogFunction(0,t,rh.error,arguments)}deprecated(t,n){return this.warn(`\`${t}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(t,n){return this.error(`\`${t}\` has been removed. Use \`${n}\` instead`)}probe(t,n){return this._getLogFunction(t,n,rh.log,arguments,{time:!0,once:!0})}log(t,n){return this._getLogFunction(t,n,rh.debug,arguments)}info(t,n){return this._getLogFunction(t,n,console.info,arguments)}once(t,n){return this._getLogFunction(t,n,rh.debug||rh.info,arguments,nL)}table(t,n,r){return n?this._getLogFunction(t,n,console.table||ih,r&&[r],{tag:eEe(n)}):ih}time(t,n){return this._getLogFunction(t,n,console.time?console.time:console.info)}timeEnd(t,n){return this._getLogFunction(t,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,n){return this._getLogFunction(t,n,console.timeStamp||ih)}group(t,n,r={collapsed:!1}){const i=rL({logLevel:t,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,n,r={}){return this.group(t,n,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||ih)}withGroup(t,n,r){this.group(t,n)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=oK(t)}_getLogFunction(t,n,r,i,o){if(this._shouldLog(t)){o=rL({logLevel:t,message:n,args:i,opts:o}),r=r||o.method,kP(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=nh();const s=o.tag||o.message;if(o.once&&s)if(!tL[s])tL[s]=nh();else return ih;return n=J_e(this.id,o.message,o),r.bind(console,n,...o.args)}return ih}};CP.VERSION=iK;function oK(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return kP(Number.isFinite(t)&&t>=0),t}function rL(e){const{logLevel:t,message:n}=e;e.logLevel=oK(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":n!==void 0&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return kP(i==="string"||i==="object"),Object.assign(e,{args:r},e.opts)}function J_e(e,t,n){if(typeof t=="string"){const r=n.time?Y_e(G_e(n.total)):"";t=n.time?`${e}: ${r}  ${t}`:`${e}: ${t}`,t=K_e(t,n.color,n.background)}return t}function eEe(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}function tEe(e,t){return sK(e||{},t)}function sK(e,t,n=0){if(n>3)return t;const r={...e};for(const[i,o]of Object.entries(t))o&&typeof o=="object"&&!Array.isArray(o)?r[i]=sK(r[i]||{},t[i],n+1):r[i]=t[i];return r}const nEe="latest";function rEe(){var e;return(e=globalThis._loadersgl_)!=null&&e.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version}const iEe=rEe();function Ju(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const Lf=typeof process!="object"||String(process)!=="[object process]"||process.browser,oEe=typeof window<"u"&&typeof window.orientation<"u",iL=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);iL&&parseFloat(iL[1]);class sEe{constructor(t,n){fe(this,"name");fe(this,"workerThread");fe(this,"isRunning",!0);fe(this,"result");fe(this,"_resolve",()=>{});fe(this,"_reject",()=>{});this.name=t,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(t,n){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:n})}done(t){Ju(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Ju(this.isRunning),this.isRunning=!1,this._reject(t)}}class R${terminate(){}}const D$=new Map;function aEe(e){Ju(e.source&&!e.url||!e.source&&e.url);let t=D$.get(e.source||e.url);return t||(e.url&&(t=lEe(e.url),D$.set(e.url,t)),e.source&&(t=aK(e.source),D$.set(e.source,t))),Ju(t),t}function lEe(e){if(!e.startsWith("http"))return e;const t=uEe(e);return aK(t)}function aK(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function uEe(e){return`try {
  importScripts('${e}');
} catch (error) {
  console.error(error);
  throw error;
}`}function lK(e,t=!0,n){const r=n||new Set;if(e){if(oL(e))r.add(e);else if(oL(e.buffer))r.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)lK(e[i],t,r)}}return n===void 0?Array.from(r):[]}function oL(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const O$=()=>{};class B3{constructor(t){fe(this,"name");fe(this,"source");fe(this,"url");fe(this,"terminated",!1);fe(this,"worker");fe(this,"onMessage");fe(this,"onError");fe(this,"_loadableURL","");const{name:n,source:r,url:i}=t;Ju(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=O$,this.onError=o=>console.log(o),this.worker=Lf?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&Lf||typeof R$<"u"&&!Lf}destroy(){this.onMessage=O$,this.onError=O$,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,n){n=n||lK(t),this.worker.postMessage(t,n)}_getErrorFromErrorEvent(t){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,t.message&&(n+=`${t.message} in `),t.lineno&&(n+=`:${t.lineno}:${t.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=aEe({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},t.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},t.onmessageerror=n=>console.error(n),t}_createNodeWorker(){let t;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new R$(r,{eval:!1})}else if(this.source)t=new R$(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",n=>{this.onMessage(n)}),t.on("error",n=>{this.onError(n)}),t.on("exit",n=>{}),t}}class cEe{constructor(t){fe(this,"name","unnamed");fe(this,"source");fe(this,"url");fe(this,"maxConcurrency",1);fe(this,"maxMobileConcurrency",1);fe(this,"onDebug",()=>{});fe(this,"reuseWorkers",!0);fe(this,"props",{});fe(this,"jobQueue",[]);fe(this,"idleQueue",[]);fe(this,"count",0);fe(this,"isDestroyed",!1);this.source=t.source,this.url=t.url,this.setProps(t)}static isSupported(){return B3.isSupported()}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,n=(i,o,s)=>i.done(s),r=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:n,onError:r,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:t,backlog:this.jobQueue.length});const r=new sEe(n.name,t);t.onMessage=i=>n.onMessage(r,i.type,i.payload),t.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!Lf||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new B3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return oEe?this.maxMobileConcurrency:this.maxConcurrency}}const fEe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},lu=class lu{constructor(t){fe(this,"props");fe(this,"workerPools",new Map);this.props={...fEe},this.setProps(t),this.workerPools=new Map}static isSupported(){return B3.isSupported()}static getWorkerFarm(t={}){return lu._workerFarm=lu._workerFarm||new lu({}),lu._workerFarm.setProps(t),lu._workerFarm}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:n,source:r,url:i}=t;let o=this.workerPools.get(n);return o||(o=new cEe({name:n,source:r,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};fe(lu,"_workerFarm");let Sw=lu;function dEe(e,t={}){const n=t[e.id]||{},r=Lf?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let i=n.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(Lf?i=`modules/${e.module}/dist/${r}`:i=`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!i){let o=e.version;o==="latest"&&(o=nEe);const s=o?`@${o}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${s}/dist/${r}`}return Ju(i),i}function hEe(e,t=iEe){Ju(e,"no worker provided");const n=e.version;return!(!t||!n)}function pEe(e,t){return!Sw.isSupported()||!Lf&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function gEe(e,t,n,r,i){const o=e.id,s=dEe(e,n),l=Sw.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const u=await l.startJob("process-on-worker",mEe.bind(null,i));return u.postMessage("process",{input:t,options:n,context:r}),await(await u.result).result}async function mEe(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(new Error(r.error));break;case"process":const{id:i,input:o,options:s}=r;try{const a=await e(o,s);t.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function yEe(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function vEe(...e){return bEe(e)}function bEe(e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),n=t.reduce((o,s)=>o+s.byteLength,0),r=new Uint8Array(n);let i=0;for(const o of t)r.set(o,i),i+=o.byteLength;return r.buffer}async function xEe(e){const t=[];for await(const n of e)t.push(n);return vEe(...t)}let wEe="";const sL={};function SEe(e){for(const t in sL)if(e.startsWith(t)){const n=sL[t];e=e.replace(t,n)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e=`${wEe}${e}`),e}const kEe="4.2.1",CEe={dataType:null,batchType:null,name:"JSON",id:"json",module:"json",version:kEe,extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:aL,parse:async e=>aL(new TextDecoder().decode(e)),options:{}};function aL(e){return JSON.parse(e)}function _Ee(e){return e&&typeof e=="object"&&e.isBuffer}function uK(e){if(_Ee(e))return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function cK(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function EEe(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}const $Ee=e=>typeof e=="boolean",ly=e=>typeof e=="function",tv=e=>e!==null&&typeof e=="object",lL=e=>tv(e)&&e.constructor==={}.constructor,AEe=e=>!!e&&typeof e[Symbol.iterator]=="function",TEe=e=>e&&typeof e[Symbol.asyncIterator]=="function",Td=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,jg=e=>typeof Blob<"u"&&e instanceof Blob,MEe=e=>e&&typeof e=="object"&&e.isBuffer,FEe=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||tv(e)&&ly(e.tee)&&ly(e.cancel)&&ly(e.getReader),PEe=e=>tv(e)&&ly(e.read)&&ly(e.pipe)&&$Ee(e.readable),fK=e=>FEe(e)||PEe(e);class REe extends Error{constructor(n,r){super(n);fe(this,"reason");fe(this,"url");fe(this,"response");this.reason=r.reason,this.url=r.url,this.response=r.response}}const DEe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,OEe=/^([-\w.]+\/[-\w.+]+)/;function uL(e,t){return e.toLowerCase()===t.toLowerCase()}function NEe(e){const t=OEe.exec(e);return t?t[1]:e}function cL(e){const t=DEe.exec(e);return t?t[1]:""}const dK=/\?.*/;function IEe(e){const t=e.match(dK);return t&&t[0]}function _P(e){return e.replace(dK,"")}function LEe(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}function oC(e){return Td(e)?e.url:jg(e)?e.name||"":typeof e=="string"?e:""}function EP(e){if(Td(e)){const t=e,n=t.headers.get("content-type")||"",r=_P(t.url);return NEe(n)||cL(r)}return jg(e)?e.type||"":typeof e=="string"?cL(e):""}function zEe(e){return Td(e)?e.headers["content-length"]||-1:jg(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}async function hK(e){if(Td(e))return e;const t={},n=zEe(e);n>=0&&(t["content-length"]=String(n));const r=oC(e),i=EP(e);i&&(t["content-type"]=i);const o=await UEe(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:r}),s}async function BEe(e){if(!e.ok)throw await jEe(e)}async function jEe(e){const t=LEe(e.url);let n=`Failed to fetch resource (${e.status}) ${e.statusText}: ${t}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:e.statusText,url:e.url,response:e};try{const i=e.headers.get("Content-Type");r.reason=i!=null&&i.includes("application/json")?await e.json():e.text()}catch{}return new REe(n,r)}async function UEe(e){if(typeof e=="string")return`data:,${e.slice(0,5)}`;if(e instanceof Blob){const n=e.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=o=>{var s;return r((s=o==null?void 0:o.target)==null?void 0:s.result)},i.readAsDataURL(n)})}if(e instanceof ArrayBuffer){const n=e.slice(0,5);return`data:base64,${VEe(n)}`}return null}function VEe(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}function WEe(e){return!HEe(e)&&!qEe(e)}function HEe(e){return e.startsWith("http:")||e.startsWith("https:")}function qEe(e){return e.startsWith("data:")}async function j3(e,t){var n,r;if(typeof e=="string"){const i=SEe(e);return WEe(i)&&(n=globalThis.loaders)!=null&&n.fetchNode?(r=globalThis.loaders)==null?void 0:r.fetchNode(i,t):await fetch(i,t)}return await hK(e)}const fL=new CP({id:"loaders.gl"});class GEe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class YEe{constructor(){fe(this,"console");this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const pK={fetch:null,mimeType:void 0,nothrow:!1,log:new YEe,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:rK,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},XEe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function gK(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function mK(){const e=gK();return e.globalOptions=e.globalOptions||{...pK},e.globalOptions}function KEe(e,t,n,r){return n=n||[],n=Array.isArray(n)?n:[n],QEe(e,n),JEe(t,e,r)}function QEe(e,t){dL(e,null,pK,XEe,t);for(const n of t){const r=e&&e[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};dL(r,n.id,i,o,t)}}function dL(e,t,n,r,i){const o=t||"Top level",s=t?`${t}.`:"";for(const a in e){const l=!t&&tv(e[a]),u=a==="baseUri"&&!t,c=a==="workerUrl"&&t;if(!(a in n)&&!u&&!c){if(a in r)fL.warn(`${o} loader option '${s}${a}' no longer supported, use '${r[a]}'`)();else if(!l){const f=ZEe(a,i);fL.warn(`${o} loader option '${s}${a}' not recognized. ${f}`)()}}}}function ZEe(e,t){const n=e.toLowerCase();let r="";for(const i of t)for(const o in i.options){if(e===o)return`Did you mean '${i.id}.${o}'?`;const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||`Did you mean '${i.id}.${o}'?`)}return r}function JEe(e,t,n){const i={...e.options||{}};return e$e(i,n),i.log===null&&(i.log=new GEe),hL(i,mK()),hL(i,t),i}function hL(e,t){for(const n in t)if(n in t){const r=t[n];lL(r)&&lL(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function e$e(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function yK(e){return e?(Array.isArray(e)&&(e=e[0]),Array.isArray(e==null?void 0:e.extensions)):!1}function vK(e){Z7(e,"null loader"),Z7(yK(e),"invalid loader");let t;return Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e!=null&&e.parseTextSync||e!=null&&e.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const t$e=()=>{const e=gK();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function n$e(){return t$e()}const r$e=new CP({id:"loaders.gl"}),i$e=/\.([^.]+)$/;async function o$e(e,t=[],n,r){if(!bK(e))return null;let i=pL(e,t,{...n,nothrow:!0},r);if(i)return i;if(jg(e)&&(e=await e.slice(0,10).arrayBuffer(),i=pL(e,t,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(xK(e));return i}function pL(e,t=[],n,r){if(!bK(e))return null;if(t&&!Array.isArray(t))return vK(t);let i=[];t&&(i=i.concat(t)),n!=null&&n.ignoreRegisteredLoaders||i.push(...n$e()),a$e(i);const o=s$e(e,i,n,r);if(!o&&!(n!=null&&n.nothrow))throw new Error(xK(e));return o}function s$e(e,t,n,r){const i=oC(e),o=EP(e),s=_P(i)||(r==null?void 0:r.url);let a=null,l="";return n!=null&&n.mimeType&&(a=N$(t,n==null?void 0:n.mimeType),l=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),a=a||l$e(t,s),l=l||(a?`matched url ${s}`:""),a=a||N$(t,o),l=l||(a?`matched MIME type ${o}`:""),a=a||c$e(t,e),l=l||(a?`matched initial data ${wK(e)}`:""),n!=null&&n.fallbackMimeType&&(a=a||N$(t,n==null?void 0:n.fallbackMimeType),l=l||(a?`matched fallback MIME type ${o}`:"")),l&&r$e.log(1,`selectLoader selected ${a==null?void 0:a.name}: ${l}.`),a}function bK(e){return!(e instanceof Response&&e.status===204)}function xK(e){const t=oC(e),n=EP(e);let r="No valid loader found (";r+=t?`${cK(t)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const i=e?wK(e):"";return r+=i?` first bytes: "${i}"`:"first bytes: not available",r+=")",r}function a$e(e){for(const t of e)vK(t)}function l$e(e,t){const n=t&&i$e.exec(t),r=n&&n[1];return r?u$e(e,r):null}function u$e(e,t){t=t.toLowerCase();for(const n of e)for(const r of n.extensions)if(r.toLowerCase()===t)return n;return null}function N$(e,t){var n;for(const r of e)if((n=r.mimeTypes)!=null&&n.some(i=>uL(t,i))||uL(t,`application/x.${r.id}`))return r;return null}function c$e(e,t){if(!t)return null;for(const n of e)if(typeof t=="string"){if(f$e(t,n))return n}else if(ArrayBuffer.isView(t)){if(gL(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer&&gL(t,0,n))return n;return null}function f$e(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>e.startsWith(r))}function gL(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>d$e(e,t,n,i))}function d$e(e,t,n,r){if(r instanceof ArrayBuffer)return yEe(r,e,r.byteLength);switch(typeof r){case"function":return r(e);case"string":const i=U3(e,t,r.length);return r===i;default:return!1}}function wK(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?U3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?U3(e,0,t):""}function U3(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}const h$e=256*1024;function*p$e(e,t){const n=(t==null?void 0:t.chunkSize)||h$e;let r=0;const i=new TextEncoder;for(;r<e.length;){const o=Math.min(e.length-r,n),s=e.slice(r,r+o);r+=o,yield i.encode(s)}}const g$e=256*1024;function*m$e(e,t={}){const{chunkSize:n=g$e}=t;let r=0;for(;r<e.byteLength;){const i=Math.min(e.byteLength-r,n),o=new ArrayBuffer(i),s=new Uint8Array(e,r,i);new Uint8Array(o).set(s),r+=i,yield o}}const y$e=1024*1024;async function*v$e(e,t){const n=(t==null?void 0:t.chunkSize)||y$e;let r=0;for(;r<e.size;){const i=r+n,o=await e.slice(r,i).arrayBuffer();r=i,yield o}}function mL(e,t){return rK?b$e(e,t):x$e(e)}async function*b$e(e,t){const n=e.getReader();let r;try{for(;;){const i=r||n.read();t!=null&&t._streamReadAhead&&(r=n.read());const{done:o,value:s}=await i;if(o)return;yield uK(s)}}catch{n.releaseLock()}}async function*x$e(e,t){for await(const n of e)yield uK(n)}function w$e(e,t){if(typeof e=="string")return p$e(e,t);if(e instanceof ArrayBuffer)return m$e(e,t);if(jg(e))return v$e(e,t);if(fK(e))return mL(e,t);if(Td(e))return mL(e.body,t);throw new Error("makeIterator")}const SK="Cannot convert supplied data type";function S$e(e,t,n){if(t.text&&typeof e=="string")return e;if(MEe(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(e.byteOffset,e.byteOffset+i)),r}throw new Error(SK)}async function k$e(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||r)return S$e(e,t);if(jg(e)&&(e=await hK(e)),Td(e)){const i=e;return await BEe(i),t.binary?await i.arrayBuffer():await i.text()}if(fK(e)&&(e=w$e(e,n)),AEe(e)||TEe(e))return xEe(e);throw new Error(SK)}function C$e(e,t){const n=mK(),r=e||n;return typeof r.fetch=="function"?r.fetch:tv(r.fetch)?i=>j3(i,r.fetch):t!=null&&t.fetch?t==null?void 0:t.fetch:j3}function _$e(e,t,n){if(n)return n;const r={fetch:C$e(t,e),...e};if(r.url){const i=_P(r.url);r.baseUrl=i,r.queryString=IEe(r.url),r.filename=cK(i),r.baseUrl=EEe(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function E$e(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const r=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function $P(e,t,n,r){t&&!Array.isArray(t)&&!yK(t)&&(r=void 0,n=t,t=void 0),e=await e,n=n||{};const i=oC(e),s=E$e(t,r),a=await o$e(e,s,n);return a?(n=KEe(n,a,s,i),r=_$e({url:i,_parse:$P,loaders:s},n,r||null),await $$e(a,e,n,r)):null}async function $$e(e,t,n,r){if(hEe(e),n=tEe(e.options,n),Td(t)){const o=t,{ok:s,redirected:a,status:l,statusText:u,type:c,url:f}=o,d=Object.fromEntries(o.headers.entries());r.response={headers:d,ok:s,redirected:a,status:l,statusText:u,type:c,url:f}}t=await k$e(t,e,n);const i=e;if(i.parseTextSync&&typeof t=="string")return i.parseTextSync(t,n,r);if(pEe(e,n))return await gEe(e,t,n,r,$P);if(i.parseText&&typeof t=="string")return await i.parseText(t,n,r);if(i.parse)return await i.parse(t,n,r);throw Ju(!i.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}const yL=100;class A$e{constructor(t,n){fe(this,"schema");fe(this,"options");fe(this,"shape");fe(this,"length",0);fe(this,"rows",null);fe(this,"cursor",0);fe(this,"_headers",[]);if(this.options=n,this.schema=t,!Array.isArray(t)){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="array-row-table",this.rows=this.rows||new Array(yL),this.rows[this.length]=t,this.length++}addObjectRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="object-row-table",this.rows=this.rows||new Array(yL),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;return t?(t=t.slice(0,this.length),this.rows=null,{shape:this.shape||"array-row-table",batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}function kK(e,t){if(!e)throw new Error("null row");const n={};if(t)for(let r=0;r<t.length;r++)n[t[r]]=e[r];else for(let r=0;r<e.length;r++){const i=`column-${r}`;n[i]=e[r]}return n}function CK(e,t){if(!e)throw new Error("null row");if(t){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=e[t[r]];return n}return Object.values(e)}function T$e(e){const t=[];for(let n=0;n<e.length;n++){const r=`column-${n}`;t.push(r)}return t}function M$e(e){return Object.keys(e)}const vL=100;class F$e{constructor(t,n){fe(this,"schema");fe(this,"options");fe(this,"length",0);fe(this,"objectRows",null);fe(this,"arrayRows",null);fe(this,"cursor",0);fe(this,"_headers",null);if(this.options=n,this.schema=t,t){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=T$e(t)),this.options.shape){case"object-row-table":const r=kK(t,this._headers);this.addObjectRow(r,n);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(vL),this.arrayRows[this.length]=t,this.length++;break}}addObjectRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=M$e(t)),this.options.shape){case"array-row-table":const r=CK(t,this._headers);this.addArrayRow(r,n);break;case"object-row-table":this.objectRows=this.objectRows||new Array(vL),this.objectRows[this.length]=t,this.length++;break}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}const P$e=100;class R$e{constructor(t,n){fe(this,"schema");fe(this,"length",0);fe(this,"allocated",0);fe(this,"columns",{});this.schema=t,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let n=0;for(const r in this.columns)this.columns[r][this.length]=t[n++];this.length++}addObjectRow(t){this._reallocateColumns();for(const n in t)this.columns[n][this.length]=t[n];this.length++}getBatch(){this._pruneColumns();const t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const r in this.schema){const i=this.schema[r];t[i.name]=this.columns[i.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:P$e,this.columns={};for(const t in this.schema){const n=this.schema[t],r=n.type||Float32Array,i=this.columns[n.index];if(i&&ArrayBuffer.isView(i)){const o=new r(this.allocated);o.set(i),this.columns[n.index]=o}else i?(i.length=this.allocated,this.columns[n.index]=i):this.columns[n.index]=new r(this.allocated)}}}_pruneColumns(){for(const[t,n]of Object.entries(this.columns))this.columns[t]=n.slice(0,this.length)}}const D$e={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},O$e="TableBatchBuilder",Cy=class Cy{constructor(t,n){fe(this,"schema");fe(this,"options");fe(this,"aggregator",null);fe(this,"batchCount",0);fe(this,"bytesUsed",0);fe(this,"isChunkComplete",!1);fe(this,"lastBatchEmittedMs",Date.now());fe(this,"totalLength",0);fe(this,"totalBytes",0);fe(this,"rowBytes",0);this.schema=t,this.options={...D$e,...n}}limitReached(){var t,n;return!!((t=this.options)!=null&&t.limit&&this.totalLength>=this.options.limit||(n=this.options)!=null&&n._limitMB&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),typeof t=="string"&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?t.length*8:Object.keys(t).length*8}_isFull(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;t!=null&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);const n=this.aggregator.getBatch();return n.count=this.batchCount,n.bytesUsed=this.bytesUsed,Object.assign(n,t),this.batchCount++,this.aggregator=null,n}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return F$e;case"columnar-table":return R$e;case"arrow-table":if(!Cy.ArrowBatch)throw new Error(O$e);return Cy.ArrowBatch;default:return A$e}}};fe(Cy,"ArrowBatch");let V3=Cy;class bL extends Array{enqueue(t){return this.push(t)}dequeue(){return this.shift()}}class N$e{constructor(){fe(this,"_values");fe(this,"_settlers");fe(this,"_closed");this._values=new bL,this._settlers=new bL,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[Symbol.asyncIterator](){return this}enqueue(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");const n=this._settlers.dequeue();t instanceof Error?n.reject(t):n.resolve({value:t})}else this._values.enqueue(t)}next(){if(this._values.length>0){const t=this._values.dequeue();return t instanceof Error?Promise.reject(t):Promise.resolve({value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((t,n)=>{this._settlers.enqueue({resolve:t,reject:n})})}}/* @license
Papa Parse
v5.0.0-beta.0
https://github.com/mholt/PapaParse
License: MIT
*/const xL="\uFEFF",Oi={parse:I$e,unparse:L$e,RECORD_SEP:"",UNIT_SEP:"",BYTE_ORDER_MARK:xL,BAD_DELIMITERS:["\r",`
`,'"',xL],WORKERS_SUPPORTED:!1,NODE_STREAM_INPUT:1,LocalChunkSize:1024*1024*10,RemoteChunkSize:1024*1024*5,DefaultDelimiter:",",Parser:W3,ParserHandle:EK,ChunkStreamer:_K,StringStreamer:Gp};function I$e(e,t,n){t=t||{};var r=t.dynamicTyping||!1;if(Nr(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=Nr(t.transform)?t.transform:!1,t.worker&&Oi.WORKERS_SUPPORTED){var i=newWorker();i.userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=Nr(t.step),t.chunk=Nr(t.chunk),t.complete=Nr(t.complete),t.error=Nr(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id});return}var o=null;return typeof e=="string"&&(o=new Gp(t)),o||(o=new n(t)),o.stream(e)}function L$e(e,t){var n=!1,r=!0,i=",",o=`\r
`,s='"',a=s+s,l=!1,u=null;f();var c=new RegExp(e1(s),"g");if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,l);if(typeof e[0]=="object")return h(u||d(e[0]),e,l)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:d(e.data[0])),!Array.isArray(e.data[0])&&typeof e.data[0]!="object"&&(e.data=[e.data])),h(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function f(){if(typeof t=="object"){if(typeof t.delimiter=="string"&&!Oi.BAD_DELIMITERS.filter(function(m){return t.delimiter.indexOf(m)!==-1}).length&&(i=t.delimiter),(typeof t.quotes=="boolean"||Array.isArray(t.quotes))&&(n=t.quotes),(typeof t.skipEmptyLines=="boolean"||typeof t.skipEmptyLines=="string")&&(l=t.skipEmptyLines),typeof t.newline=="string"&&(o=t.newline),typeof t.quoteChar=="string"&&(s=t.quoteChar),typeof t.header=="boolean"&&(r=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");u=t.columns}t.escapeChar!==void 0&&(a=t.escapeChar+s)}}function d(m){if(typeof m!="object")return[];var y=[];for(var v in m)y.push(v);return y}function h(m,y,v){var b="";typeof m=="string"&&(m=JSON.parse(m)),typeof y=="string"&&(y=JSON.parse(y));var x=Array.isArray(m)&&m.length>0,w=!Array.isArray(y[0]);if(x&&r){for(var k=0;k<m.length;k++)k>0&&(b+=i),b+=p(m[k],k);y.length>0&&(b+=o)}for(var S=0;S<y.length;S++){var C=x?m.length:y[S].length,_=!1,$=x?Object.keys(y[S]).length===0:y[S].length===0;if(v&&!x&&(_=v==="greedy"?y[S].join("").trim()==="":y[S].length===1&&y[S][0].length===0),v==="greedy"&&x){for(var A=[],N=0;N<C;N++){var M=w?m[N]:N;A.push(y[S][M])}_=A.join("").trim()===""}if(!_){for(var R=0;R<C;R++){R>0&&!$&&(b+=i);var P=x&&w?m[R]:R;b+=p(y[S][P],R)}S<y.length-1&&(!v||C>0&&!$)&&(b+=o)}}return b}function p(m,y){if(typeof m>"u"||m===null)return"";if(m.constructor===Date)return JSON.stringify(m).slice(1,25);m=m.toString().replace(c,a);var v=typeof n=="boolean"&&n||Array.isArray(n)&&n[y]||g(m,Oi.BAD_DELIMITERS)||m.indexOf(i)>-1||m.charAt(0)===" "||m.charAt(m.length-1)===" ";return v?s+m+s:m}function g(m,y){for(var v=0;v<y.length;v++)if(m.indexOf(y[v])>-1)return!0;return!1}}function _K(e){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},t.call(this,e),this.parseChunk=function(n,r){if(this.isFirstChunk&&Nr(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(n);i!==void 0&&(n=i)}this.isFirstChunk=!1;var o=this._partialLine+n;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!(this._handle.paused()||this._handle.aborted())){var a=s.meta.cursor;this._finished||(this._partialLine=o.substring(a-this._baseIndex),this._baseIndex=a),s&&s.data&&(this._rowCount+=s.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Nr(this._config.chunk)&&!r){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return;s=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),!this._completed&&l&&Nr(this._config.complete)&&(!s||!s.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!l&&(!s||!s.meta.paused)&&this._nextChunk(),s}},this._sendError=function(n){Nr(this._config.error)&&this._config.error(n)};function t(n){var r=AP(n);r.chunkSize=parseInt(r.chunkSize),!n.step&&!n.chunk&&(r.chunkSize=null),this._handle=new EK(r),this._handle.streamer=this,this._config=r}}function Gp(e){e=e||{},_K.call(this,e);var t;this.stream=function(n){return t=n,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var n=this._config.chunkSize,r=n?t.substr(0,n):t;return t=n?t.substr(n):"",this._finished=!t,this.parseChunk(r)}}}Gp.prototype=Object.create(Gp.prototype);Gp.prototype.constructor=Gp;function EK(e){var t=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,r=this,i=0,o=0,s,a,l=!1,u=!1,c,f=[],d={data:[],errors:[],meta:{}};if(Nr(e.step)){var h=e.step;e.step=function(C){if(d=C,m())g();else{if(g(),!d.data||d.data.length===0)return;i+=C.data.length,e.preview&&i>e.preview?a.abort():h(d,r)}}}this.parse=function(C,_,$){var A=e.quoteChar||'"';if(e.newline||(e.newline=k(C,A)),c=!1,e.delimiter)Nr(e.delimiter)&&(e.delimiter=e.delimiter(C),d.meta.delimiter=e.delimiter);else{var N=w(C,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);N.successful?e.delimiter=N.bestDelimiter:(c=!0,e.delimiter=Oi.DefaultDelimiter),d.meta.delimiter=e.delimiter}var M=AP(e);return e.preview&&e.header&&M.preview++,s=C,a=new W3(M),d=a.parse(s,_,$),g(),l?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,a.abort(),s=s.substr(a.getCharIndex())},this.resume=function(){l=!1,r.streamer.parseChunk(s,!0)},this.aborted=function(){return u},this.abort=function(){u=!0,a.abort(),d.meta.aborted=!0,Nr(e.complete)&&e.complete(d),s=""};function p(C){return e.skipEmptyLines==="greedy"?C.join("").trim()==="":C.length===1&&C[0].length===0}function g(){if(d&&c&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+Oi.DefaultDelimiter+"'"),c=!1),e.skipEmptyLines)for(var C=0;C<d.data.length;C++)p(d.data[C])&&d.data.splice(C--,1);return m()&&y(),x()}function m(){return e.header&&f.length===0}function y(){if(!d)return;function C($){Nr(e.transformHeader)&&($=e.transformHeader($)),f.push($)}if(Array.isArray(d.data[0])){for(var _=0;m()&&_<d.data.length;_++)d.data[_].forEach(C);d.data.splice(0,1)}else d.data.forEach(C)}function v(C){return e.dynamicTypingFunction&&e.dynamicTyping[C]===void 0&&(e.dynamicTyping[C]=e.dynamicTypingFunction(C)),(e.dynamicTyping[C]||e.dynamicTyping)===!0}function b(C,_){return v(C)?_==="true"||_==="TRUE"?!0:_==="false"||_==="FALSE"?!1:t.test(_)?parseFloat(_):n.test(_)?new Date(_):_===""?null:_:_}function x(){if(!d||!d.data||!e.header&&!e.dynamicTyping&&!e.transform)return d;function C($,A){var N=e.header?{}:[],M;for(M=0;M<$.length;M++){var R=M,P=$[M];e.header&&(R=M>=f.length?"__parsed_extra":f[M]),e.transform&&(P=e.transform(P,R)),P=b(R,P),R==="__parsed_extra"?(N[R]=N[R]||[],N[R].push(P)):N[R]=P}return e.header&&(M>f.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+M,o+A):M<f.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+M,o+A)),N}var _=1;return!d.data[0]||Array.isArray(d.data[0])?(d.data=d.data.map(C),_=d.data.length):d.data=C(d.data,0),e.header&&d.meta&&(d.meta.fields=f),o+=_,d}function w(C,_,$,A,N){var M,R,P;N=N||[",","	","|",";",Oi.RECORD_SEP,Oi.UNIT_SEP];for(var D=0;D<N.length;D++){var I=N[D],O=0,j=0,Y=0;P=void 0;for(var W=new W3({comments:A,delimiter:I,newline:_,preview:10}).parse(C),oe=0;oe<W.data.length;oe++){if($&&p(W.data[oe])){Y++;continue}var re=W.data[oe].length;if(j+=re,typeof P>"u"){P=0;continue}else re>1&&(O+=Math.abs(re-P),P=re)}W.data.length>0&&(j/=W.data.length-Y),(typeof R>"u"||O>R)&&j>1.99&&(R=O,M=I)}return e.delimiter=M,{successful:!!M,bestDelimiter:M}}function k(C,_){C=C.substr(0,1024*1024);var $=new RegExp(e1(_)+"([^]*?)"+e1(_),"gm");C=C.replace($,"");var A=C.split("\r"),N=C.split(`
`),M=N.length>1&&N[0].length<A[0].length;if(A.length===1||M)return`
`;for(var R=0,P=0;P<A.length;P++)A[P][0]===`
`&&R++;return R>=A.length/2?`\r
`:"\r"}function S(C,_,$,A){d.errors.push({type:C,code:_,message:$,row:A})}}function e1(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function W3(e){e=e||{};var t=e.delimiter,n=e.newline,r=e.comments,i=e.step,o=e.preview,s=e.fastMode,a;e.quoteChar===void 0?a='"':a=e.quoteChar;var l=a;if(e.escapeChar!==void 0&&(l=e.escapeChar),(typeof t!="string"||Oi.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),r===t)throw new Error("Comment character same as delimiter");r===!0?r="#":(typeof r!="string"||Oi.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),n!==`
`&&n!=="\r"&&n!==`\r
`&&(n=`
`);var u=0,c=!1;this.parse=function(f,d,h){if(typeof f!="string")throw new Error("Input must be a string");var p=f.length,g=t.length,m=n.length,y=r.length,v=Nr(i);u=0;var b=[],x=[],w=[],k=0;if(!f)return W();if(s||s!==!1&&f.indexOf(a)===-1){for(var S=f.split(n),C=0;C<S.length;C++){if(w=S[C],u+=w.length,C!==S.length-1)u+=n.length;else if(h)return W();if(!(r&&w.substr(0,y)===r)){if(v){if(b=[],I(w.split(t)),oe(),c)return W()}else I(w.split(t));if(o&&C>=o)return b=b.slice(0,o),W(!0)}}return W()}for(var _=f.indexOf(t,u),$=f.indexOf(n,u),A=new RegExp(e1(l)+e1(a),"g"),N;;){if(f[u]===a){for(N=u,u++;;){if(N=f.indexOf(a,N+1),N===-1)return h||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),j();if(N===p-1){var M=f.substring(u,N).replace(A,a);return j(M)}if(a===l&&f[N+1]===l){N++;continue}if(!(a!==l&&N!==0&&f[N-1]===l)){var R=$===-1?_:Math.min(_,$),P=O(R);if(f[N+1+P]===t){if(w.push(f.substring(u,N).replace(A,a)),u=N+1+P+g,_=f.indexOf(t,u),$=f.indexOf(n,u),v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);break}var D=O($);if(f.substr(N+1+D,m)===n){if(w.push(f.substring(u,N).replace(A,a)),Y(N+1+D+m),_=f.indexOf(t,u),v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),N++}}if(v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);continue}if(r&&w.length===0&&f.substr(u,y)===r){if($===-1)return W();u=$+m,$=f.indexOf(n,u),_=f.indexOf(t,u);continue}if(_!==-1&&(_<$||$===-1)){w.push(f.substring(u,_)),u=_+g,_=f.indexOf(t,u);continue}if($!==-1){if(w.push(f.substring(u,$)),Y($+m),v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);continue}break}return j();function I(re){b.push(re),k=u}function O(re){var we=0;if(re!==-1){var Re=f.substring(N+1,re);Re&&Re.trim()===""&&(we=Re.length)}return we}function j(re){return h||(typeof re>"u"&&(re=f.substr(u)),w.push(re),u=p,I(w),v&&oe()),W()}function Y(re){u=re,I(w),w=[],$=f.indexOf(n,u)}function W(re,we){var Re=we||!1;return{data:Re?b[0]:b,errors:x,meta:{delimiter:t,linebreak:n,aborted:c,truncated:!!re,cursor:k+(d||0)}}}function oe(){i(W(void 0,!0)),b=[],x=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return u}}function AP(e){if(typeof e!="object"||e===null)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=AP(e[n]);return t}function Nr(e){return typeof e=="function"}const{ChunkStreamer:$K}=Oi;function kw(e){e=e||{},$K.call(this,e),this.textDecoder=new TextDecoder(this._config.encoding),this.stream=async function(t){this._input=t;try{for await(const n of t)this.parseChunk(this.getStringChunk(n));this._finished=!0,this.parseChunk("")}catch(n){this._sendError(n)}},this._nextChunk=function(){},this.getStringChunk=function(t){return typeof t=="string"?t:this.textDecoder.decode(t,{stream:!0})}}kw.prototype=Object.create($K.prototype);kw.prototype.constructor=kw;const z$e="4.2.1",TP="object-row-table",MP={dataType:null,batchType:null,id:"csv",module:"csv",name:"CSV",version:z$e,extensions:["csv","tsv","dsv"],mimeTypes:["text/csv","text/tab-separated-values","text/dsv"],category:"table",parse:async(e,t)=>wL(new TextDecoder().decode(e),t),parseText:(e,t)=>wL(e,t),parseInBatches:B$e,options:{csv:{shape:TP,optimizeMemoryUsage:!1,header:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!0,delimitersToGuess:[",","	","|",";"]}}};async function wL(e,t){const n={...MP.options.csv,...t==null?void 0:t.csv},r=j$e(e),o=n.header==="auto"?AK(r):!!n.header,s={...n,header:o,download:!1,transformHeader:o?TK():void 0,error:f=>{throw new Error(f)}},a=Oi.parse(e,s),l=a.data,u=a.meta.fields||MK(n.columnPrefix,r.length),c=n.shape||TP;switch(c){case"object-row-table":return{shape:"object-row-table",data:l.map(f=>Array.isArray(f)?kK(f,u):f)};case"array-row-table":return{shape:"array-row-table",data:l.map(f=>Array.isArray(f)?f:CK(f,u))};default:throw new Error(c)}}function B$e(e,t){t={...t},t.batchSize==="auto"&&(t.batchSize=4e3);const n={...MP.options.csv,...t==null?void 0:t.csv},r=new N$e;let i=!0,o=null,s=null,a=null;const l={...n,header:!1,download:!1,chunkSize:1024*1024*5,skipEmptyLines:!1,step(u){let c=u.data;if(n.skipEmptyLines&&c.flat().join("").trim()==="")return;const f=u.meta.cursor;if(i&&!o&&(n.header==="auto"?AK(c):!!n.header)){o=c.map(TK());return}i&&(i=!1,o||(o=MK(n.columnPrefix,c.length)),a=U$e(c,o)),n.optimizeMemoryUsage&&(c=JSON.parse(JSON.stringify(c)));const d=n.shape||TP;s=s||new V3(a,{shape:d,...t});try{s.addRow(c);const h=s&&s.getFullBatch({bytesUsed:f});h&&r.enqueue(h)}catch(h){r.enqueue(h)}},complete(u){try{const c=u.meta.cursor,f=s&&s.getFinalBatch({bytesUsed:c});f&&r.enqueue(f)}catch(c){r.enqueue(c)}r.close()}};return Oi.parse(e,l,kw),r}function AK(e){return e&&e.every(t=>typeof t=="string")}function j$e(e){return Oi.parse(e,{download:!1,dynamicTyping:!0,preview:1}).data[0]}function TK(){const e=new Set;return t=>{let n=t,r=1;for(;e.has(n);)n=`${t}.${r}`,r++;return e.add(n),n}}function MK(e,t=0){const n=[];for(let r=0;r<t;r++)n.push(`${e}${r+1}`);return n}function U$e(e,t){const n=t?{}:[];for(let r=0;r<e.length;r++){const i=t&&t[r]||r;switch(typeof e[r]){case"number":case"boolean":n[i]={name:String(i),index:r,type:Float32Array};break;case"string":default:n[i]={name:String(i),index:r,type:Array}}}return n}var SL={},I$={},L$=34,Mm=10,z$=13;function FK(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function V$e(e,t){var n=FK(e);return function(r,i){return t(n(r),i,e)}}function kL(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ti(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function W$e(e){return e<0?"-"+ti(-e,6):e>9999?"+"+ti(e,6):ti(e,4)}function H$e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":W$e(e.getUTCFullYear())+"-"+ti(e.getUTCMonth()+1,2)+"-"+ti(e.getUTCDate(),2)+(i?"T"+ti(t,2)+":"+ti(n,2)+":"+ti(r,2)+"."+ti(i,3)+"Z":r?"T"+ti(t,2)+":"+ti(n,2)+":"+ti(r,2)+"Z":n||t?"T"+ti(t,2)+":"+ti(n,2)+"Z":"")}function q$e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(m,y){if(h)return h(m,y-1);p=m,h=d?V$e(m,d):FK(m)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,m=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===Mm&&--p,f.charCodeAt(p-1)===z$&&--p;function x(){if(v)return I$;if(b)return b=!1,SL;var k,S=g,C;if(f.charCodeAt(S)===L$){for(;g++<p&&f.charCodeAt(g)!==L$||f.charCodeAt(++g)===L$;);return(k=g)>=p?v=!0:(C=f.charCodeAt(g++))===Mm?b=!0:C===z$&&(b=!0,f.charCodeAt(g)===Mm&&++g),f.slice(S+1,k-1).replace(/""/g,'"')}for(;g<p;){if((C=f.charCodeAt(k=g++))===Mm)b=!0;else if(C===z$)b=!0,f.charCodeAt(g)===Mm&&++g;else if(C!==n)continue;return f.slice(S,k)}return v=!0,f.slice(S,p)}for(;(y=x())!==I$;){for(var w=[];y!==SL&&y!==I$;)w.push(y),y=x();d&&(w=d(w,m++))==null||h.push(w)}return h}function o(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function s(f,d){return d==null&&(d=kL(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=kL(f)),o(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?H$e(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var G$e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y$e=Object.prototype.hasOwnProperty;function H3(e,t){return Y$e.call(e,t)}function q3(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)H3(e,i)&&r.push(i);return r}function Ni(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function G3(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function rf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function PK(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Y3(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Y3(e[t]))return!0}else if(typeof e=="object"){for(var r=q3(e),i=r.length,o=0;o<i;o++)if(Y3(e[r[o]]))return!0}}return!1}function CL(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var RK=function(e){G$e(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,CL(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=CL(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),Yt=RK,X$e=Ni,Wh={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Cw(n,this.path);r&&(r=Ni(r));var i=zf(n,{op:"remove",path:this.from}).removed;return zf(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Cw(n,this.from);return zf(n,{op:"add",path:this.path,value:Ni(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:t1(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},K$e={add:function(e,t,n){return G3(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Wh.move,copy:Wh.copy,test:Wh.test,_get:Wh._get};function Cw(e,t){if(t=="")return e;var n={op:"_get",path:t};return zf(e,n),n.value}function zf(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):_w(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Cw(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=t1(e,t.value),s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Ni(e));var a=t.path||"",l=a.split("/"),u=e,c=1,f=l.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=_w;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=PK(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!G3(h))throw new Yt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);G3(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>u.length)throw new Yt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=K$e[t.op].call(t,u,h,e);if(s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=Wh[t.op].call(t,u,h,e);if(s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&c<f&&(!u||typeof u!="object"))throw new Yt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function sC(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ni(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=zf(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function Q$e(e,t,n){var r=zf(e,t);if(r.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function _w(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Yt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Wh[e.op]){if(typeof e.path!="string")throw new Yt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Yt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Yt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Y3(e.value))throw new Yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Yt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Yt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=DK([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Yt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function DK(e,t,n){try{if(!Array.isArray(e))throw new Yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)sC(Ni(t),Ni(e),n||!0);else{n=n||_w;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Yt)return i;throw i}}function t1(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!t1(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!t1(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const Z$e=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Yt,_areEquals:t1,applyOperation:zf,applyPatch:sC,applyReducer:Q$e,deepClone:X$e,getValueByPointer:Cw,validate:DK,validator:_w},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var FP=new WeakMap,J$e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),e5e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function t5e(e){return FP.get(e)}function n5e(e,t){return e.observers.get(t)}function r5e(e,t){e.observers.delete(t.callback)}function i5e(e,t){t.unobserve()}function o5e(e,t){var n=[],r,i=t5e(e);if(!i)i=new J$e(e),FP.set(e,i);else{var o=n5e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Ni(e),t){r.callback=t,r.next=null;var s=function(){X3(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){X3(r),clearTimeout(r.next),r5e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new e5e(t,r)),r}function X3(e,t){t===void 0&&(t=!1);var n=FP.get(e.object);PP(n.value,e.object,e.patches,"",t),e.patches.length&&sC(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function PP(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=q3(t),s=q3(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],c=e[u];if(H3(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[u];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?PP(c,f,n,r+"/"+rf(u),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+rf(u),value:Ni(c)}),n.push({op:"replace",path:r+"/"+rf(u),value:Ni(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+rf(u),value:Ni(c)}),n.push({op:"remove",path:r+"/"+rf(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!H3(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+rf(u),value:Ni(t[u])})}}}function s5e(e,t,n){n===void 0&&(n=!1);var r=[];return PP(e,t,r,"",n),r}const a5e=Object.freeze(Object.defineProperty({__proto__:null,compare:s5e,generate:X3,observe:o5e,unobserve:i5e},Symbol.toStringTag,{value:"Module"}));Object.assign({},Z$e,a5e,{JsonPatchError:RK,deepClone:Ni,escapePathComponent:rf,unescapePathComponent:PK});var l5e=/("(?:[^\\"]|\\.)*")|[:,]/g,u5e=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function s(a,l,u){var c,f,d,h,p,g,m,y,v,b,x,w;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,o),x===void 0)return x;if(m=i-l.length-u,x.length<=m&&(v=x.replace(l5e,function(k,S){return S||k+" "}),v.length<=m))return v;if(o!=null&&(a=JSON.parse(x),o=void 0),typeof a=="object"&&a!==null){if(y=l+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",m=a.length;f<m;f++)d.push(s(a[f],y,f===m-1?0:1)||"null");else for(b="{",c="}",g=Object.keys(a),m=g.length;f<m;f++)h=g[f],p=JSON.stringify(h)+": ",w=s(a[h],y,p.length+(f===m-1?0:1)),w!==void 0&&d.push(p+w);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+l)}return x}(t,"",0)};const B$=Fl(u5e);function _i(e,t,n){return e.fields=t||[],e.fname=n,e}function Zt(e){return e==null?null:e.fname}function br(e){return e==null?null:e.fields}function OK(e){return e.length===1?c5e(e[0]):f5e(e)}const c5e=e=>function(t){return t[e]},f5e=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function q(e){throw Error(e)}function Ca(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||q("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&q("Access path missing closing bracket: "+e),r&&q("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Mo(e,t,n){const r=Ca(e);return e=r.length===1?r[0]:e,_i((n&&n.get||OK)(r),[e],t||e)}const nv=Mo("id"),Cr=_i(e=>e,[],"identity"),du=_i(()=>0,[],"zero"),Ug=_i(()=>1,[],"one"),Fo=_i(()=>!0,[],"true"),Kl=_i(()=>!1,[],"false");function d5e(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const NK=0,aC=1,RP=2,IK=3,LK=4;function DP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d5e,r=e||NK;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=aC&&n(t||"error","ERROR",arguments),this},warn(){return r>=RP&&n(t||"warn","WARN",arguments),this},info(){return r>=IK&&n(t||"log","INFO",arguments),this},debug(){return r>=LK&&n(t||"log","DEBUG",arguments),this}}}var G=Array.isArray;function se(e){return e===Object(e)}const _L=e=>e!=="__proto__";function Vg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=h5e(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;Wg(r,o,i[o],s)}return r},{})}function Wg(e,t,n,r){if(!_L(t))return;let i,o;if(se(n)&&!G(n)){o=se(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Wg(o,i,n[i]):_L(i)&&(o[i]=n[i])}else e[t]=n}function h5e(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function He(e){return e[e.length-1]}function yr(e){return e==null||e===""?null:+e}const zK=e=>t=>e*Math.exp(t),BK=e=>t=>Math.log(e*t),jK=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),UK=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Ew=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function lC(e,t,n,r){const i=n(e[0]),o=n(He(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function VK(e,t){return lC(e,t,yr,Cr)}function WK(e,t){var n=Math.sign(e[0]);return lC(e,t,BK(n),zK(n))}function HK(e,t,n){return lC(e,t,Ew(n),Ew(1/n))}function qK(e,t,n){return lC(e,t,jK(n),UK(n))}function uC(e,t,n,r,i){const o=r(e[0]),s=r(He(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function OP(e,t,n){return uC(e,t,n,yr,Cr)}function NP(e,t,n){const r=Math.sign(e[0]);return uC(e,t,n,BK(r),zK(r))}function $w(e,t,n,r){return uC(e,t,n,Ew(r),Ew(1/r))}function IP(e,t,n,r){return uC(e,t,n,jK(r),UK(r))}function GK(e){return 1+~~(new Date(e).getMonth()/3)}function YK(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ae(e){return e!=null?G(e)?e:[e]:[]}function XK(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Oe(e){return typeof e=="function"}const p5e="descending";function LP(e,t,n){n=n||{},t=ae(t)||[];const r=[],i=[],o={},s=n.comparator||g5e;return ae(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===p5e?-1:1),i.push(a=Oe(a)?a:Mo(a,null,n)),(br(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:_i(s(i,r),Object.keys(o))}const cC=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),g5e=(e,t)=>e.length===1?m5e(e[0],t[0]):y5e(e,t,e.length),m5e=(e,t)=>function(n,r){return cC(e(n),e(r))*t},y5e=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=cC(o(r),o(i));return s*t[a]});function _r(e){return Oe(e)?e:()=>e}function zP(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function De(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function ya(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function KK(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}const v5e=Object.prototype.hasOwnProperty;function ce(e,t){return v5e.call(e,t)}const Bb={};function Hg(e){let t={},n;function r(o){return ce(t,o)&&t[o]!==Bb}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===Bb&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=Bb),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==Bb&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function QK(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=He(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=s?r:c<=s?i:o}function ne(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),De(r,n)}function Hh(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function wc(e){return typeof e=="boolean"}function Wu(e){return Object.prototype.toString.call(e)==="[object Date]"}function ZK(e){return e&&Oe(e[Symbol.iterator])}function Qe(e){return typeof e=="number"}function JK(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function le(e){return typeof e=="string"}function BP(e,t,n){e&&(e=t?ae(e).map(a=>a.replace(/\\(.)/g,"$1")):ae(e));const r=e&&e.length,i=n&&n.get||OK,o=a=>i(t?[a]:Ca(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return _i(s,e,"key")}function eQ(e,t){const n=e[0],r=He(e),i=+t;return i?i===1?r:n+i*(r-n):n}const b5e=1e4;function tQ(e){e=+e||b5e;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>ce(t,s)||ce(n,s),get:s=>ce(t,s)?t[s]:ce(n,s)?o(s,n[s]):void 0,set:(s,a)=>ce(t,s)?t[s]=a:o(s,a)}}function nQ(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function m0(e,t){let n="";for(;--t>=0;)n+=e;return n}function rQ(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?m0(i,s)+o:r==="center"?m0(i,~~(s/2))+o+m0(i,Math.ceil(s/2)):o+m0(i,s)}function rv(e){return e&&He(e)-e[0]||0}function te(e){return G(e)?"["+e.map(te)+"]":se(e)||le(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function jP(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const x5e=e=>Qe(e)||Wu(e)?e:Date.parse(e);function UP(e,t){return t=t||x5e,e==null||e===""?null:t(e)}function VP(e){return e==null||e===""?null:e+""}function ys(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function iQ(e,t,n,r){const i=r??"…",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function ru(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function w5e(e){return e}function S5e(e){if(e==null)return w5e;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;u<c;)f[u]=a[u],++u;return f}}function k5e(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function C5e(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return EL(e,n)})}:EL(e,t)}function EL(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=oQ(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function oQ(e,t){var n=S5e(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&k5e(f,p)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(a)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(t)}function _5e(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=u,t[c]=d)}),t.forEach(function(u){var c=a(u),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,p=i[f]){delete i[p.end];var m=p===h?h:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function a(u){var c=e.arcs[u<0?~u:u],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function E5e(e){return oQ(e,$5e.apply(this,arguments))}function $5e(e,t,n){var r,i,o;if(arguments.length>1)r=A5e(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:_5e(e,r)}}function A5e(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function l(f){f.forEach(a)}function u(f){f.forEach(l)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function dl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function T5e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qg(e){let t,n,r;e.length!==2?(t=dl,n=(a,l)=>dl(e(a),l),r=(a,l)=>e(a)-l):(t=e===dl||e===T5e?e:M5e,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function M5e(){return 0}function sQ(e){return e===null?NaN:+e}function*F5e(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const aQ=qg(dl),ec=aQ.right,P5e=aQ.left;qg(sQ).center;function R5e(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function D5e(e,t){const n=R5e(e,t);return n&&Math.sqrt(n)}class qr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class $L extends Map{constructor(t,n=cQ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(K3(this,t))}has(t){return super.has(K3(this,t))}set(t,n){return super.set(lQ(this,t),n)}delete(t){return super.delete(uQ(this,t))}}class Aw extends Set{constructor(t,n=cQ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(K3(this,t))}add(t){return super.add(lQ(this,t))}delete(t){return super.delete(uQ(this,t))}}function K3({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function lQ({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function uQ({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function cQ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function O5e(e,t){return Array.from(t,n=>e[n])}function N5e(e=dl){if(e===dl)return fQ;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function fQ(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const I5e=Math.sqrt(50),L5e=Math.sqrt(10),z5e=Math.sqrt(2);function Tw(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=I5e?10:o>=L5e?5:o>=z5e?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?Tw(e,t,n*2):[a,l,u]}function Q3(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?Tw(t,e,n):Tw(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(i+u)/-s;else for(let u=0;u<a;++u)l[u]=(i+u)*s;return l}function Z3(e,t,n){return t=+t,e=+e,n=+n,Tw(e,t,n)[2]}function tc(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Z3(t,e,n):Z3(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Bf(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function J3(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function dQ(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?fQ:N5e(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*f/l+d)),p=Math.min(r,Math.floor(t+(l-u)*f/l+d));dQ(e,t,h,p,i)}const o=e[t];let s=n,a=r;for(Fm(e,n,t),i(e[r],o)>0&&Fm(e,n,r);s<a;){for(Fm(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?Fm(e,n,a):(++a,Fm(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Fm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function eT(e,t,n){if(e=Float64Array.from(F5e(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return J3(e);if(t>=1)return Bf(e);var r,i=(r-1)*t,o=Math.floor(i),s=Bf(dQ(e,o).subarray(0,o+1)),a=J3(e.subarray(o+1));return s+(a-s)*(i-o)}}function hQ(e,t,n=sQ){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function B5e(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function pQ(e,t){return eT(e,.5,t)}function*j5e(e){for(const t of e)yield*t}function gQ(e){return Array.from(j5e(e))}function Ii(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function mQ(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function U5e(e,...t){e=new Aw(e),t=t.map(V5e);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function V5e(e){return e instanceof Aw?e:new Aw(e)}function W5e(...e){const t=new Aw;for(const n of e)for(const r of n)t.add(r);return t}function H5e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Mw(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Yp(e){return e=Mw(Math.abs(e)),e?e[1]:NaN}function q5e(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function G5e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Y5e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nd(e){if(!(t=Y5e.exec(e)))throw new Error("invalid format: "+e);var t;return new WP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nd.prototype=WP.prototype;function WP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}WP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function X5e(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var yQ;function K5e(e,t){var n=Mw(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(yQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Mw(e,Math.max(0,t+o-1))[0]}function AL(e,t){var n=Mw(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const TL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:H5e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>AL(e*100,t),r:AL,s:K5e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ML(e){return e}var FL=Array.prototype.map,PL=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vQ(e){var t=e.grouping===void 0||e.thousands===void 0?ML:q5e(FL.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?ML:G5e(FL.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=nd(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(v=!0,w="g"):TL[w]||(b===void 0&&(b=12),x=!0,w="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var k=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=g==="$"?r:/[%p]/.test(w)?s:"",C=TL[w],_=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function $(A){var N=k,M=S,R,P,D;if(w==="c")M=C(A)+M,A="";else{A=+A;var I=A<0||1/A<0;if(A=isNaN(A)?l:C(Math.abs(A),b),x&&(A=X5e(A)),I&&+A==0&&p!=="+"&&(I=!1),N=(I?p==="("?p:a:p==="-"||p==="("?"":p)+N,M=(w==="s"?PL[8+yQ/3]:"")+M+(I&&p==="("?")":""),_){for(R=-1,P=A.length;++R<P;)if(D=A.charCodeAt(R),48>D||D>57){M=(D===46?i+A.slice(R+1):A.slice(R))+M,A=A.slice(0,R);break}}}v&&!m&&(A=t(A,1/0));var O=N.length+A.length+M.length,j=O<y?new Array(y-O+1).join(d):"";switch(v&&m&&(A=t(j+A,j.length?y-M.length:1/0),j=""),h){case"<":A=N+A+M+j;break;case"=":A=N+j+A+M;break;case"^":A=j.slice(0,O=j.length>>1)+N+A+M+j.slice(O);break;default:A=j+N+A+M;break}return o(A)}return $.toString=function(){return f+""},$}function c(f,d){var h=u((f=nd(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Yp(d)/3)))*3,g=Math.pow(10,-p),m=PL[8+p/3];return function(y){return h(g*y)+m}}return{format:u,formatPrefix:c}}var jb,iv,HP;Q5e({thousands:",",grouping:[3],currency:["$",""]});function Q5e(e){return jb=vQ(e),iv=jb.format,HP=jb.formatPrefix,jb}function bQ(e){return Math.max(0,-Yp(Math.abs(e)))}function xQ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yp(t)/3)))*3-Yp(Math.abs(e)))}function wQ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Yp(t)-Yp(e))+1}const j$=new Date,U$=new Date;function kn(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=o=>kn(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(j$.setTime(+o),U$.setTime(+s),e(j$),e(U$),Math.floor(n(j$,U$))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const Xp=kn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Xp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?kn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Xp);Xp.range;const rl=1e3,wo=rl*60,il=wo*60,El=il*24,qP=El*7,RL=El*30,V$=El*365,as=kn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*rl)},(e,t)=>(t-e)/rl,e=>e.getUTCSeconds());as.range;const ov=kn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*rl)},(e,t)=>{e.setTime(+e+t*wo)},(e,t)=>(t-e)/wo,e=>e.getMinutes());ov.range;const sv=kn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wo)},(e,t)=>(t-e)/wo,e=>e.getUTCMinutes());sv.range;const av=kn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*rl-e.getMinutes()*wo)},(e,t)=>{e.setTime(+e+t*il)},(e,t)=>(t-e)/il,e=>e.getHours());av.range;const lv=kn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*il)},(e,t)=>(t-e)/il,e=>e.getUTCHours());lv.range;const fa=kn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wo)/El,e=>e.getDate()-1);fa.range;const hl=kn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/El,e=>e.getUTCDate()-1);hl.range;const SQ=kn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/El,e=>Math.floor(e/El));SQ.range;function Md(e){return kn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wo)/qP)}const Fd=Md(0),Fw=Md(1),Z5e=Md(2),J5e=Md(3),Kp=Md(4),eAe=Md(5),tAe=Md(6);Fd.range;Fw.range;Z5e.range;J5e.range;Kp.range;eAe.range;tAe.range;function Pd(e){return kn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/qP)}const Rd=Pd(0),Pw=Pd(1),nAe=Pd(2),rAe=Pd(3),Qp=Pd(4),iAe=Pd(5),oAe=Pd(6);Rd.range;Pw.range;nAe.range;rAe.range;Qp.range;iAe.range;oAe.range;const Zp=kn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Zp.range;const Jp=kn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Jp.range;const vs=kn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:kn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});vs.range;const bs=kn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());bs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:kn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});bs.range;function kQ(e,t,n,r,i,o){const s=[[as,1,rl],[as,5,5*rl],[as,15,15*rl],[as,30,30*rl],[o,1,wo],[o,5,5*wo],[o,15,15*wo],[o,30,30*wo],[i,1,il],[i,3,3*il],[i,6,6*il],[i,12,12*il],[r,1,El],[r,2,2*El],[n,1,qP],[t,1,RL],[t,3,3*RL],[e,1,V$]];function a(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),p=h?h.range(u,+c+1):[];return d?p.reverse():p}function l(u,c,f){const d=Math.abs(c-u)/f,h=qg(([,,m])=>m).right(s,d);if(h===s.length)return e.every(tc(u/V$,c/V$,f));if(h===0)return Xp.every(Math.max(tc(u,c,f),1));const[p,g]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[sAe,aAe]=kQ(bs,Jp,Rd,SQ,lv,sv),[lAe,uAe]=kQ(vs,Zp,Fd,fa,av,ov),Qn="year",bi="quarter",xr="month",bn="week",xi="date",mr="day",va="dayofyear",Yi="hours",Xi="minutes",Po="seconds",xs="milliseconds",GP=[Qn,bi,xr,bn,xi,mr,va,Yi,Xi,Po,xs],W$=GP.reduce((e,t,n)=>(e[t]=1+n,e),{});function YP(e){const t=ae(e).slice(),n={};return t.length||q("Missing time unit."),t.forEach(i=>{ce(W$,i)?n[i]=1:q(`Invalid time unit: ${i}.`)}),(n[bn]||n[mr]?1:0)+(n[bi]||n[xr]||n[xi]?1:0)+(n[va]?1:0)>1&&q(`Incompatible time units: ${e}`),t.sort((i,o)=>W$[i]-W$[o]),t}const cAe={[Qn]:"%Y ",[bi]:"Q%q ",[xr]:"%b ",[xi]:"%d ",[bn]:"W%U ",[mr]:"%a ",[va]:"%j ",[Yi]:"%H:00",[Xi]:"00:%M",[Po]:":%S",[xs]:".%L",[`${Qn}-${xr}`]:"%Y-%m ",[`${Qn}-${xr}-${xi}`]:"%Y-%m-%d ",[`${Yi}-${Xi}`]:"%H:%M"};function CQ(e,t){const n=De({},cAe,t),r=YP(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const cf=new Date;function XP(e){return cf.setFullYear(e),cf.setMonth(0),cf.setDate(1),cf.setHours(0,0,0,0),cf}function _Q(e){return $Q(new Date(e))}function EQ(e){return tT(new Date(e))}function $Q(e){return fa.count(XP(e.getFullYear())-1,e)}function tT(e){return Fd.count(XP(e.getFullYear())-1,e)}function nT(e){return XP(e).getDay()}function fAe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function AQ(e){return MQ(new Date(e))}function TQ(e){return rT(new Date(e))}function MQ(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return hl.count(t-1,e)}function rT(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Rd.count(t-1,e)}function iT(e){return cf.setTime(Date.UTC(e,0,1)),cf.getUTCDay()}function dAe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function FQ(e,t,n,r,i){const o=t||1,s=He(e),a=(y,v,b)=>(b=b||y,hAe(n[b],r[b],y===s&&o,v)),l=new Date,u=ys(e),c=u[Qn]?a(Qn):_r(2012),f=u[xr]?a(xr):u[bi]?a(bi):du,d=u[bn]&&u[mr]?a(mr,1,bn+mr):u[bn]?a(bn,1):u[mr]?a(mr,1):u[xi]?a(xi,1):u[va]?a(va,1):Ug,h=u[Yi]?a(Yi):du,p=u[Xi]?a(Xi):du,g=u[Po]?a(Po):du,m=u[xs]?a(xs):du;return function(y){l.setTime(+y);const v=c(l);return i(v,f(l),d(l,v),h(l),p(l),g(l),m(l))}}function hAe(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function eg(e,t,n){return t+e*7-(n+6)%7}const pAe={[Qn]:e=>e.getFullYear(),[bi]:e=>Math.floor(e.getMonth()/3),[xr]:e=>e.getMonth(),[xi]:e=>e.getDate(),[Yi]:e=>e.getHours(),[Xi]:e=>e.getMinutes(),[Po]:e=>e.getSeconds(),[xs]:e=>e.getMilliseconds(),[va]:e=>$Q(e),[bn]:e=>tT(e),[bn+mr]:(e,t)=>eg(tT(e),e.getDay(),nT(t)),[mr]:(e,t)=>eg(1,e.getDay(),nT(t))},gAe={[bi]:e=>3*e,[bn]:(e,t)=>eg(e,0,nT(t))};function PQ(e,t){return FQ(e,t||1,pAe,gAe,fAe)}const mAe={[Qn]:e=>e.getUTCFullYear(),[bi]:e=>Math.floor(e.getUTCMonth()/3),[xr]:e=>e.getUTCMonth(),[xi]:e=>e.getUTCDate(),[Yi]:e=>e.getUTCHours(),[Xi]:e=>e.getUTCMinutes(),[Po]:e=>e.getUTCSeconds(),[xs]:e=>e.getUTCMilliseconds(),[va]:e=>MQ(e),[bn]:e=>rT(e),[mr]:(e,t)=>eg(1,e.getUTCDay(),iT(t)),[bn+mr]:(e,t)=>eg(rT(e),e.getUTCDay(),iT(t))},yAe={[bi]:e=>3*e,[bn]:(e,t)=>eg(e,0,iT(t))};function RQ(e,t){return FQ(e,t||1,mAe,yAe,dAe)}const vAe={[Qn]:vs,[bi]:Zp.every(3),[xr]:Zp,[bn]:Fd,[xi]:fa,[mr]:fa,[va]:fa,[Yi]:av,[Xi]:ov,[Po]:as,[xs]:Xp},bAe={[Qn]:bs,[bi]:Jp.every(3),[xr]:Jp,[bn]:Rd,[xi]:hl,[mr]:hl,[va]:hl,[Yi]:lv,[Xi]:sv,[Po]:as,[xs]:Xp};function Gg(e){return vAe[e]}function Yg(e){return bAe[e]}function DQ(e,t,n){return e?e.offset(t,n):void 0}function OQ(e,t,n){return DQ(Gg(e),t,n)}function NQ(e,t,n){return DQ(Yg(e),t,n)}function IQ(e,t,n,r){return e?e.range(t,n,r):void 0}function LQ(e,t,n,r){return IQ(Gg(e),t,n,r)}function zQ(e,t,n,r){return IQ(Yg(e),t,n,r)}const y0=1e3,v0=y0*60,b0=v0*60,fC=b0*24,xAe=fC*7,DL=fC*30,oT=fC*365,BQ=[Qn,xr,xi,Yi,Xi,Po,xs],x0=BQ.slice(0,-1),w0=x0.slice(0,-1),S0=w0.slice(0,-1),wAe=S0.slice(0,-1),SAe=[Qn,bn],OL=[Qn,xr],jQ=[Qn],Pm=[[x0,1,y0],[x0,5,5*y0],[x0,15,15*y0],[x0,30,30*y0],[w0,1,v0],[w0,5,5*v0],[w0,15,15*v0],[w0,30,30*v0],[S0,1,b0],[S0,3,3*b0],[S0,6,6*b0],[S0,12,12*b0],[wAe,1,fC],[SAe,1,xAe],[OL,1,DL],[OL,3,3*DL],[jQ,1,oT]];function UQ(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(rv(t))/n;let i=qg(a=>a[2]).right(Pm,r),o,s;return i===Pm.length?(o=jQ,s=tc(t[0]/oT,t[1]/oT,n)):i?(i=Pm[r/Pm[i-1][2]<Pm[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=BQ,s=Math.max(tc(t[0],t[1],n),1)),{units:o,step:s}}function H$(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function q$(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Rm(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function VQ(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=Dm(i),c=Om(i),f=Dm(o),d=Om(o),h=Dm(s),p=Om(s),g=Dm(a),m=Om(a),y=Dm(l),v=Om(l),b={a:I,A:O,b:j,B:Y,c:null,d:jL,e:jL,f:HAe,g:t3e,G:r3e,H:UAe,I:VAe,j:WAe,L:WQ,m:qAe,M:GAe,p:W,q:oe,Q:WL,s:HL,S:YAe,u:XAe,U:KAe,V:QAe,w:ZAe,W:JAe,x:null,X:null,y:e3e,Y:n3e,Z:i3e,"%":VL},x={a:re,A:we,b:Re,B:lt,c:null,d:UL,e:UL,f:l3e,g:v3e,G:x3e,H:o3e,I:s3e,j:a3e,L:qQ,m:u3e,M:c3e,p:_n,q:rr,Q:WL,s:HL,S:f3e,u:d3e,U:h3e,V:p3e,w:g3e,W:m3e,x:null,X:null,y:y3e,Y:b3e,Z:w3e,"%":VL},w={a:$,A,b:N,B:M,c:R,d:zL,e:zL,f:LAe,g:LL,G:IL,H:BL,I:BL,j:DAe,L:IAe,m:RAe,M:OAe,p:_,q:PAe,Q:BAe,s:jAe,S:NAe,u:$Ae,U:AAe,V:TAe,w:EAe,W:MAe,x:P,X:D,y:LL,Y:IL,Z:FAe,"%":zAe};b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x);function k(ue,_e){return function(Ee){var Q=[],pn=-1,et=0,En=ue.length,an,ro,Kd;for(Ee instanceof Date||(Ee=new Date(+Ee));++pn<En;)ue.charCodeAt(pn)===37&&(Q.push(ue.slice(et,pn)),(ro=NL[an=ue.charAt(++pn)])!=null?an=ue.charAt(++pn):ro=an==="e"?" ":"0",(Kd=_e[an])&&(an=Kd(Ee,ro)),Q.push(an),et=pn+1);return Q.push(ue.slice(et,pn)),Q.join("")}}function S(ue,_e){return function(Ee){var Q=Rm(1900,void 0,1),pn=C(Q,ue,Ee+="",0),et,En;if(pn!=Ee.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(_e&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(et=q$(Rm(Q.y,0,1)),En=et.getUTCDay(),et=En>4||En===0?Pw.ceil(et):Pw(et),et=hl.offset(et,(Q.V-1)*7),Q.y=et.getUTCFullYear(),Q.m=et.getUTCMonth(),Q.d=et.getUTCDate()+(Q.w+6)%7):(et=H$(Rm(Q.y,0,1)),En=et.getDay(),et=En>4||En===0?Fw.ceil(et):Fw(et),et=fa.offset(et,(Q.V-1)*7),Q.y=et.getFullYear(),Q.m=et.getMonth(),Q.d=et.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),En="Z"in Q?q$(Rm(Q.y,0,1)).getUTCDay():H$(Rm(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(En+5)%7:Q.w+Q.U*7-(En+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,q$(Q)):H$(Q)}}function C(ue,_e,Ee,Q){for(var pn=0,et=_e.length,En=Ee.length,an,ro;pn<et;){if(Q>=En)return-1;if(an=_e.charCodeAt(pn++),an===37){if(an=_e.charAt(pn++),ro=w[an in NL?_e.charAt(pn++):an],!ro||(Q=ro(ue,Ee,Q))<0)return-1}else if(an!=Ee.charCodeAt(Q++))return-1}return Q}function _(ue,_e,Ee){var Q=u.exec(_e.slice(Ee));return Q?(ue.p=c.get(Q[0].toLowerCase()),Ee+Q[0].length):-1}function $(ue,_e,Ee){var Q=h.exec(_e.slice(Ee));return Q?(ue.w=p.get(Q[0].toLowerCase()),Ee+Q[0].length):-1}function A(ue,_e,Ee){var Q=f.exec(_e.slice(Ee));return Q?(ue.w=d.get(Q[0].toLowerCase()),Ee+Q[0].length):-1}function N(ue,_e,Ee){var Q=y.exec(_e.slice(Ee));return Q?(ue.m=v.get(Q[0].toLowerCase()),Ee+Q[0].length):-1}function M(ue,_e,Ee){var Q=g.exec(_e.slice(Ee));return Q?(ue.m=m.get(Q[0].toLowerCase()),Ee+Q[0].length):-1}function R(ue,_e,Ee){return C(ue,t,_e,Ee)}function P(ue,_e,Ee){return C(ue,n,_e,Ee)}function D(ue,_e,Ee){return C(ue,r,_e,Ee)}function I(ue){return s[ue.getDay()]}function O(ue){return o[ue.getDay()]}function j(ue){return l[ue.getMonth()]}function Y(ue){return a[ue.getMonth()]}function W(ue){return i[+(ue.getHours()>=12)]}function oe(ue){return 1+~~(ue.getMonth()/3)}function re(ue){return s[ue.getUTCDay()]}function we(ue){return o[ue.getUTCDay()]}function Re(ue){return l[ue.getUTCMonth()]}function lt(ue){return a[ue.getUTCMonth()]}function _n(ue){return i[+(ue.getUTCHours()>=12)]}function rr(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var _e=k(ue+="",b);return _e.toString=function(){return ue},_e},parse:function(ue){var _e=S(ue+="",!1);return _e.toString=function(){return ue},_e},utcFormat:function(ue){var _e=k(ue+="",x);return _e.toString=function(){return ue},_e},utcParse:function(ue){var _e=S(ue+="",!0);return _e.toString=function(){return ue},_e}}}var NL={"-":"",_:" ",0:"0"},Ln=/^\s*\d+/,kAe=/^%/,CAe=/[\\^$*+?|[\]().{}]/g;function Ze(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function _Ae(e){return e.replace(CAe,"\\$&")}function Dm(e){return new RegExp("^(?:"+e.map(_Ae).join("|")+")","i")}function Om(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function EAe(e,t,n){var r=Ln.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function $Ae(e,t,n){var r=Ln.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function AAe(e,t,n){var r=Ln.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function TAe(e,t,n){var r=Ln.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function MAe(e,t,n){var r=Ln.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function IL(e,t,n){var r=Ln.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function LL(e,t,n){var r=Ln.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function FAe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function PAe(e,t,n){var r=Ln.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function RAe(e,t,n){var r=Ln.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function zL(e,t,n){var r=Ln.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function DAe(e,t,n){var r=Ln.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function BL(e,t,n){var r=Ln.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function OAe(e,t,n){var r=Ln.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function NAe(e,t,n){var r=Ln.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function IAe(e,t,n){var r=Ln.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function LAe(e,t,n){var r=Ln.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function zAe(e,t,n){var r=kAe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function BAe(e,t,n){var r=Ln.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function jAe(e,t,n){var r=Ln.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function jL(e,t){return Ze(e.getDate(),t,2)}function UAe(e,t){return Ze(e.getHours(),t,2)}function VAe(e,t){return Ze(e.getHours()%12||12,t,2)}function WAe(e,t){return Ze(1+fa.count(vs(e),e),t,3)}function WQ(e,t){return Ze(e.getMilliseconds(),t,3)}function HAe(e,t){return WQ(e,t)+"000"}function qAe(e,t){return Ze(e.getMonth()+1,t,2)}function GAe(e,t){return Ze(e.getMinutes(),t,2)}function YAe(e,t){return Ze(e.getSeconds(),t,2)}function XAe(e){var t=e.getDay();return t===0?7:t}function KAe(e,t){return Ze(Fd.count(vs(e)-1,e),t,2)}function HQ(e){var t=e.getDay();return t>=4||t===0?Kp(e):Kp.ceil(e)}function QAe(e,t){return e=HQ(e),Ze(Kp.count(vs(e),e)+(vs(e).getDay()===4),t,2)}function ZAe(e){return e.getDay()}function JAe(e,t){return Ze(Fw.count(vs(e)-1,e),t,2)}function e3e(e,t){return Ze(e.getFullYear()%100,t,2)}function t3e(e,t){return e=HQ(e),Ze(e.getFullYear()%100,t,2)}function n3e(e,t){return Ze(e.getFullYear()%1e4,t,4)}function r3e(e,t){var n=e.getDay();return e=n>=4||n===0?Kp(e):Kp.ceil(e),Ze(e.getFullYear()%1e4,t,4)}function i3e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ze(t/60|0,"0",2)+Ze(t%60,"0",2)}function UL(e,t){return Ze(e.getUTCDate(),t,2)}function o3e(e,t){return Ze(e.getUTCHours(),t,2)}function s3e(e,t){return Ze(e.getUTCHours()%12||12,t,2)}function a3e(e,t){return Ze(1+hl.count(bs(e),e),t,3)}function qQ(e,t){return Ze(e.getUTCMilliseconds(),t,3)}function l3e(e,t){return qQ(e,t)+"000"}function u3e(e,t){return Ze(e.getUTCMonth()+1,t,2)}function c3e(e,t){return Ze(e.getUTCMinutes(),t,2)}function f3e(e,t){return Ze(e.getUTCSeconds(),t,2)}function d3e(e){var t=e.getUTCDay();return t===0?7:t}function h3e(e,t){return Ze(Rd.count(bs(e)-1,e),t,2)}function GQ(e){var t=e.getUTCDay();return t>=4||t===0?Qp(e):Qp.ceil(e)}function p3e(e,t){return e=GQ(e),Ze(Qp.count(bs(e),e)+(bs(e).getUTCDay()===4),t,2)}function g3e(e){return e.getUTCDay()}function m3e(e,t){return Ze(Pw.count(bs(e)-1,e),t,2)}function y3e(e,t){return Ze(e.getUTCFullYear()%100,t,2)}function v3e(e,t){return e=GQ(e),Ze(e.getUTCFullYear()%100,t,2)}function b3e(e,t){return Ze(e.getUTCFullYear()%1e4,t,4)}function x3e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Qp(e):Qp.ceil(e),Ze(e.getUTCFullYear()%1e4,t,4)}function w3e(){return"+0000"}function VL(){return"%"}function WL(e){return+e}function HL(e){return Math.floor(+e/1e3)}var oh,KP,YQ,QP,XQ;S3e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function S3e(e){return oh=VQ(e),KP=oh.format,YQ=oh.parse,QP=oh.utcFormat,XQ=oh.utcParse,oh}function k0(e){const t={};return n=>t[n]||(t[n]=e(n))}function k3e(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=C3e(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function C3e(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function KQ(e){const t=k0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=nd(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return k3e(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=nd(s??",f");const a=tc(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=xQ(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=wQ(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=bQ(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let sT;QQ();function QQ(){return sT=KQ({format:iv,formatPrefix:HP})}function ZQ(e){return KQ(vQ(e))}function Rw(e){return arguments.length?sT=ZQ(e):sT}function qL(e,t,n){n=n||{},se(n)||q(`Invalid time multi-format specifier: ${n}`);const r=t(Po),i=t(Xi),o=t(Yi),s=t(xi),a=t(bn),l=t(xr),u=t(bi),c=t(Qn),f=e(n[xs]||".%L"),d=e(n[Po]||":%S"),h=e(n[Xi]||"%I:%M"),p=e(n[Yi]||"%I %p"),g=e(n[xi]||n[mr]||"%a %d"),m=e(n[bn]||"%b %d"),y=e(n[xr]||"%B"),v=e(n[bi]||"%B"),b=e(n[Qn]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:o(x)<x?h:s(x)<x?p:l(x)<x?a(x)<x?g:m:c(x)<x?u(x)<x?y:v:b)(x)}function JQ(e){const t=k0(e.format),n=k0(e.utcFormat);return{timeFormat:r=>le(r)?t(r):qL(t,Gg,r),utcFormat:r=>le(r)?n(r):qL(n,Yg,r),timeParse:k0(e.parse),utcParse:k0(e.utcParse)}}let aT;eZ();function eZ(){return aT=JQ({format:KP,parse:YQ,utcFormat:QP,utcParse:XQ})}function tZ(e){return JQ(VQ(e))}function n1(e){return arguments.length?aT=tZ(e):aT}const lT=(e,t)=>De({},e,t);function nZ(e,t){const n=e?ZQ(e):Rw(),r=t?tZ(t):n1();return lT(n,r)}function ZP(e,t){const n=arguments.length;return n&&n!==2&&q("defaultLocale expects either zero or two arguments."),n?lT(Rw(e),n1(t)):lT(Rw(),n1())}function _3e(){return QQ(),eZ(),ZP()}const E3e=/^(data:|([A-Za-z]+:)?\/\/)/,$3e=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,A3e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,GL="file://";function T3e(e,t){return n=>({options:n||{},sanitize:F3e,load:M3e,fileAccess:!!t,file:P3e(t),http:D3e(e)})}async function M3e(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function F3e(e,t){t=De({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=$3e.test(e.replace(A3e,""));(e==null||typeof e!="string"||!a)&&q("Sanitize failure, invalid URI: "+te(e));const l=E3e.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(GL))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(GL.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function P3e(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):R3e}async function R3e(){q("No file system access.")}function D3e(e){return e?async function(t,n){const r=De({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Oe(o[i])?o[i]():o.text():q(o.status+""+o.statusText)}:O3e}async function O3e(){q("No HTTP fetch method available.")}const N3e=e=>e!=null&&e===e,I3e=e=>e==="true"||e==="false"||e===!0||e===!1,L3e=e=>!Number.isNaN(Date.parse(e)),rZ=e=>!Number.isNaN(+e)&&!(e instanceof Date),z3e=e=>rZ(e)&&Number.isInteger(+e),uT={boolean:jP,integer:yr,number:yr,date:UP,string:VP,unknown:Cr},Ub=[I3e,z3e,rZ,L3e],B3e=["boolean","integer","number","date"];function iZ(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Ub.length,i=Ub.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&N3e(l)&&!Ub[a](l)&&(i[a]=0,++s,s===Ub.length))return"string";return B3e[i.reduce((o,s)=>o===0?s:o,0)-1]}function oZ(e,t){return t.reduce((n,r)=>(n[r]=iZ(e,r),n),{})}function YL(e){const t=function(n,r){const i={delimiter:e};return JP(n,r?De(r,i):i)};return t.responseType="text",t}function JP(e,t){return t.header&&(e=t.header.map(te).join(t.delimiter)+`
`+e),q$e(t.delimiter).parse(e+"")}JP.responseType="text";function j3e(e){return typeof Buffer=="function"&&Oe(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function e6(e,t){const n=t&&t.property?Mo(t.property):Cr;return se(e)&&!j3e(e)?U3e(n(e),t):n(JSON.parse(e))}e6.responseType="json";function U3e(e,t){return!G(e)&&ZK(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const V3e={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function sZ(e,t){let n,r,i,o;return e=e6(e,t),t&&t.feature?(n=C5e,i=t.feature):t&&t.mesh?(n=E5e,i=t.mesh,o=V3e[t.filter]):q("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):q("Invalid TopoJSON object: "+i),r&&r.features||[r]}sZ.responseType="json";const s2={dsv:JP,csv:YL(","),tsv:YL("	"),json:e6,topojson:sZ};function t6(e,t){return arguments.length>1?(s2[e]=t,this):ce(s2,e)?s2[e]:null}function aZ(e){const t=t6(e);return t&&t.responseType||"text"}function lZ(e,t,n,r){t=t||{};const i=t6(t.type||"json");return i||q("Unknown data format type: "+t.type),e=i(e,t),t.parse&&W3e(e,t.parse,n,r),ce(e,"columns")&&delete e.columns,e}function W3e(e,t,n,r){if(!e.length)return;const i=n1();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,c,f;t==="auto"&&(t=oZ(e,o)),o=Object.keys(t);const d=o.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!uT[p])throw Error("Illegal format pattern: "+h+":"+p);return uT[p]});for(l=0,c=e.length,f=o.length;l<c;++l)for(s=e[l],u=0;u<f;++u)a=o[u],s[a]=d[u](s[a])}const dC=T3e(typeof fetch<"u"&&fetch,null);function hC(e){const t=e||Cr,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function a2(e,t){try{await t(e)}catch(n){e.error(n)}}const uZ=Symbol("vega_id");let H3e=1;function pC(e){return!!(e&&ve(e))}function ve(e){return e[uZ]}function cZ(e,t){return e[uZ]=t,e}function st(e){const t=e===Object(e)?e:{data:e};return ve(t)?t:cZ(t,H3e++)}function n6(e){return gC(e,st({}))}function gC(e,t){for(const n in e)t[n]=e[n];return t}function fZ(e,t){return cZ(t,ve(e))}function Dd(e,t){return e?t?(n,r)=>e(n,r)||ve(t(n))-ve(t(r)):(n,r)=>e(n,r)||ve(n)-ve(r):null}function dZ(e){return e&&e.constructor===Od}function Od(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:Od,insert(a){const l=ae(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=Oe(a)?r:t,u=ae(a),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(a,l,u){const c={field:l,value:_r(u)};return Oe(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return Oe(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let f,d,h,p,g,m;for(f=0,d=l.length;f<d;++f)u[ve(l[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],u[ve(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],l.forEach(v=>{p(v)&&(u[ve(v)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],m=ve(g),u[m]?u[m]=1:a.add.push(st(e[f]));for(f=0,d=l.length;f<d;++f)g=l[f],u[ve(g)]<0&&a.rem.push(g);function y(v,b,x){x?v[b]=x(v):a.encode=b,s||(c[ve(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=u[ve(g)],m>0&&(y(g,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,l.forEach(v=>{p(v)&&u[ve(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?l.filter(v=>u[ve(v)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const l2="_:mod:_";function mC(){Object.defineProperty(this,l2,{writable:!0,value:{}})}mC.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[l2];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=G(n)?1+n.length:-1),i},modified(e,t){const n=this[l2];if(arguments.length){if(G(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[l2]={},this}};let q3e=0;const G3e="pulse",Y3e=new mC,X3e=1,K3e=2;function xt(e,t,n,r){this.id=++q3e,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function XL(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}xt.prototype={targets(){return this._targets||(this._targets=hC(nv))},set(e){return this.value!==e?(this.value=e,1):0},skip:XL(X3e),modified:XL(K3e),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new mC,i=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(f,d,h)=>{h instanceof xt?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===G3e)ae(a).forEach(f=>{f instanceof xt?f!==this&&(f.targets().add(this),o.push(f)):q("Pulse parameters must be operator instances.")}),this.source=a;else if(G(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||Y3e,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Q3e(e,t,n,r){let i=1,o;return e instanceof xt?o=e:e&&e.prototype instanceof xt?o=new e:Oe(e)?o=new xt(null,e):(i=0,o=new xt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function Z3e(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let J3e=0;function yC(e,t,n){this.id=++J3e,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ql(e,t,n){return new yC(e,t,n)}yC.prototype={_filter:Fo,_apply:Cr,targets(){return this._targets||(this._targets=hC(nv))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ql(e);return this.targets().add(t),t},apply(e){const t=Ql(null,e);return this.targets().add(t),t},merge(){const e=Ql();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ql();return this.targets().add(Ql(null,null,zP(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ql(null,null,()=>n=!0)),t.targets().add(Ql(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Fo,this._targets=null}};function eTe(e,t,n,r){const i=this,o=Ql(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ae(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function tTe(e,t){const n=this.locale();return lZ(e,t,n.timeParse,n.utcParse)}function nTe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function rTe(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:aZ(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function iTe(e,t,n){const r=this,i=r._pending||oTe(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(Fo).insert(o.data||[])),i.done(),o}function oTe(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const sTe={skip:!0};function aTe(e,t,n,r,i){return(e instanceof xt?uTe:lTe)(this,e,t,n,r,i),this}function lTe(e,t,n,r,i,o){const s=De({},o,sTe);let a,l;Oe(n)||(n=_r(n)),r===void 0?a=u=>e.touch(n(u)):Oe(r)?(l=new xt(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),f=l.value;dZ(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function uTe(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new xt(null,cTe(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function cTe(e,t){return t=Oe(t)?t:_r(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function fTe(e){e.rank=++this._rank}function dTe(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&q("Cycle detected in dataflow graph.")}const Dw={},Vs=1,iu=2,Ha=4,hTe=Vs|iu,KL=Vs|Ha,sh=Vs|iu|Ha,QL=8,Nm=16,ZL=32,JL=64;function Hu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function G$(e,t){const n=[];return ru(e,t,r=>n.push(r)),n}function ez(e,t){const n={};return e.visit(t,r=>{n[ve(r)]=1}),r=>n[ve(r)]?null:r}function Vb(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Hu.prototype={StopPropagation:Dw,ADD:Vs,REM:iu,MOD:Ha,ADD_REM:hTe,ADD_MOD:KL,ALL:sh,REFLOW:QL,SOURCE:Nm,NO_SOURCE:ZL,NO_FIELDS:JL,fork(e){return new Hu(this.dataflow).init(this,e)},clone(){const e=this.fork(sh);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(sh|Nm)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Hu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&JL)&&(n.fields=e.fields),t&Vs?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&iu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ha?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&ZL?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||sh;return t&Vs&&this.add.length||t&iu&&this.rem.length||t&Ha&&this.mod.length},reflow(e){if(e)return this.fork(sh).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ha,ez(this,Vs))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return G(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?G(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Vs&&(n.addF=Vb(n.addF,t)),e&iu&&(n.remF=Vb(n.remF,t)),e&Ha&&(n.modF=Vb(n.modF,t)),e&Nm&&(n.srcF=Vb(n.srcF,t)),n},materialize(e){e=e||sh;const t=this;return e&Vs&&t.addF&&(t.add=G$(t.add,t.addF),t.addF=null),e&iu&&t.remF&&(t.rem=G$(t.rem,t.remF),t.remF=null),e&Ha&&t.modF&&(t.mod=G$(t.mod,t.modF),t.modF=null),e&Nm&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&Nm)return ru(n.source,n.srcF,r),n;e&Vs&&ru(n.add,n.addF,r),e&iu&&ru(n.rem,n.remF,r),e&Ha&&ru(n.mod,n.modF,r);const i=n.source;if(e&QL&&i){const o=n.add.length+n.mod.length;o===i.length||(o?ru(i,ez(n,KL),r):ru(i,n.srcF,r))}return n}};function r6(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ne(r6,Hu,{fork(e){const t=new Hu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?G(e)?e.some(r=>n[r]):n[e]:0},filter(){q("MultiPulse does not support filtering.")},materialize(){q("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function pTe(e,t,n){const r=this,i=[];if(r._pulse)return hZ(r);if(r._pending&&await r._pending,t&&await a2(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Hu(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=hC(nv);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=Dw),l!==Dw&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await a2(r,c[f].callback)}return n&&await a2(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function gTe(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function mTe(e,t,n){return this._pulse?hZ(this):(this.evaluate(e,t,n),this)}function yTe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function hZ(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function vTe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function bTe(e,t){const n=e.source,r=this._clock;return n&&G(n)?new r6(this,r,n.map(i=>i.pulse),t):this._input[e.id]||xTe(this._pulse,n&&n.pulse)}function xTe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Dw&&(e.source=t.source),e)}const i6={skip:!1,force:!1};function wTe(e,t){const n=t||i6;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function STe(e,t,n){const r=n||i6;return(e.set(t)||r.force)&&this.touch(e,r),this}function kTe(e,t,n){this.touch(e,n||i6);const r=new Hu(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function CTe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),pZ(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,_Te(t,0,e)):r=n,r}}}function pZ(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function _Te(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,pZ(e,r,t,n)}function lp(){this.logger(DP()),this.logLevel(aC),this._clock=0,this._rank=0,this._locale=ZP();try{this._loader=dC()}catch{}this._touched=hC(nv),this._input={},this._pulse=null,this._heap=CTe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Im(e){return function(){return this._log[e].apply(this,arguments)}}lp.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Im("error"),warn:Im("warn"),info:Im("info"),debug:Im("debug"),logLevel:Im("level"),cleanThreshold:1e4,add:Q3e,connect:Z3e,rank:fTe,rerank:dTe,pulse:kTe,touch:wTe,update:STe,changeset:Od,ingest:nTe,parse:tTe,preload:iTe,request:rTe,events:eTe,on:aTe,evaluate:pTe,run:mTe,runAsync:gTe,runAfter:yTe,_enqueue:vTe,_getPulse:bTe};function V(e,t){xt.call(this,e,null,t)}ne(V,xt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const tg={};function gZ(e){const t=mZ(e);return t&&t.Definition||null}function mZ(e){return e=e&&e.toLowerCase(),ce(tg,e)?tg[e]:null}function*yZ(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function o6(e,t,n){const r=Float64Array.from(yZ(e,n));return r.sort(dl),t.map(i=>hQ(r,i))}function s6(e,t){return o6(e,[.25,.5,.75],t)}function a6(e,t){const n=e.length,r=D5e(e,t),i=s6(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function vZ(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+g)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Ro=Math.random;function ETe(e){Ro=e}function bZ(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(yZ(e,r)),o=i.length,s=t;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(Ro()*o)];c[u]=a/o}return c.sort(dl),[eT(c,n/2),eT(c,1-n/2)]}function xZ(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,c=l+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?$Te(o,t+t/4):o}function $Te(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function ATe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function TTe(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*Ro())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const wZ=Math.sqrt(2*Math.PI),MTe=Math.SQRT2;let Lm=NaN;function vC(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(Lm===Lm)n=Lm,Lm=NaN;else{do n=Ro()*2-1,r=Ro()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Lm=r*o}return e+n*t}function l6(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*wZ)}function bC(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function xC(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*MTe*FTe(2*e-1)}function FTe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function u6(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>vC(n,r),pdf:o=>l6(o,n,r),cdf:o=>bC(o,n,r),icdf:o=>xC(o,n,r)};return i.mean(e).stdev(t)}function c6(e,t){const n=u6();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=a6(e)),i):t},sample(){return e[~~(Ro()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function f6(e,t){return e=e||0,t=t??1,Math.exp(e+vC()*t)}function d6(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*wZ*e)}function h6(e,t,n){return bC(Math.log(e),t,n)}function p6(e,t,n){return Math.exp(xC(e,t,n))}function SZ(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>f6(n,r),pdf:o=>d6(o,n,r),cdf:o=>h6(o,n,r),icdf:o=>p6(o,n,r)};return i.mean(e).stdev(t)}function kZ(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Ro();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function g6(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ro()}function m6(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function y6(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function v6(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function CZ(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>g6(n,r),pdf:o=>m6(o,n,r),cdf:o=>y6(o,n,r),icdf:o=>v6(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function b6(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function uv(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function wC(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,l+=(c-l)/a,u+=(f-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function cv(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function Xg(e,t,n,r,i){let o=0,s=0;return cv(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;o+=u*u,s+=c*c}),1-o/s}function x6(e,t,n){let r=0,i=0,o=0,s=0,a=0;cv(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=uv(r,i,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Xg(e,t,n,i,u)}}function _Z(e,t,n){let r=0,i=0,o=0,s=0,a=0;cv(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=uv(r,i,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Xg(e,t,n,i,u)}}function EZ(e,t,n){const[r,i,o,s]=wC(e,t,n);let a=0,l=0,u=0,c=0,f=0,d,h,p;cv(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,l+=(p-l)/f,u+=(p*h-u)/f,c+=(d*p-c)/f});const[g,m]=uv(l/s,a/s,u/s,c/s),y=v=>Math.exp(g+m*(v-o));return{coef:[Math.exp(g-m*o),m],predict:y,rSquared:Xg(e,t,n,s,y)}}function $Z(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;cv(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++l,r+=(h-r)/l,i+=(p-i)/l,o+=(h*p-o)/l,s+=(h*h-s)/l,a+=(d-a)/l});const u=uv(r,i,o,s),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Xg(e,t,n,a,c)}}function w6(e,t,n){const[r,i,o,s]=wC(e,t,n),a=r.length;let l=0,u=0,c=0,f=0,d=0,h,p,g,m;for(h=0;h<a;)p=r[h],g=i[h++],m=p*p,l+=(m-l)/h,u+=(m*p-u)/h,c+=(m*m-c)/h,f+=(p*g-f)/h,d+=(m*g-d)/h;const y=c-l*l,v=l*y-u*u,b=(d*l-f*u)/v,x=(f*y-d*u)/v,w=-b*l,k=S=>(S=S-o,b*S*S+x*S+w+s);return{coef:[w-x*o+b*o*o+s,x-2*b*o,b],predict:k,rSquared:Xg(e,t,n,s,k)}}function AZ(e,t,n,r){if(r===0)return b6(e,t,n);if(r===1)return x6(e,t,n);if(r===2)return w6(e,t,n);const[i,o,s,a]=wC(e,t,n),l=i.length,u=[],c=[],f=r+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d)*o[p];for(u.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d+h);m[h]=g}c.push(m)}c.push(u);const y=RTe(c),v=b=>{b-=s;let x=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)x+=y[d]*Math.pow(b,d);return x};return{coef:PTe(f,y,-s,a),predict:v,rSquared:Xg(e,t,n,a,v)}}function PTe(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function RTe(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const tz=2,nz=1e-12;function TZ(e,t,n,r){const[i,o,s,a]=wC(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=tz;){const p=[0,u-1];for(let m=0;m<l;++m){const y=i[m],v=p[0],b=p[1],x=y-i[v]>i[b]-y?v:b;let w=0,k=0,S=0,C=0,_=0;const $=1/Math.abs(i[x]-y||1);for(let M=v;M<=b;++M){const R=i[M],P=o[M],D=DTe(Math.abs(y-R)*$)*d[M],I=R*D;w+=D,k+=I,S+=P*D,C+=P*I,_+=R*I}const[A,N]=uv(k/w,S/w,C/w,_/w);c[m]=A+N*y,f[m]=Math.abs(o[m]-c[m]),OTe(i,m+1,p)}if(h===tz)break;const g=pQ(f);if(Math.abs(g)<nz)break;for(let m=0,y,v;m<l;++m)y=f[m]/(6*g),d[m]=y>=1?nz:(v=1-y*y)*v}return NTe(i,c,s,a)}function DTe(e){return(e=1-e*e*e)*e*e}function OTe(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function NTe(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const ITe=.5*Math.PI/180;function SC(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],c=[];if(n===r){for(let g=1;g<r;++g)u.push(i(o+g/n*a));return u.push(i(s)),u}else{c.push(i(s));for(let g=n;--g>0;)c.push(i(o+g/n*a))}let f=u[0],d=c[c.length-1];const h=1/a,p=LTe(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=l&&zTe(f,g,d,h,p)>ITe?c.push(g):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function LTe(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function zTe(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function BTe(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function cT(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:BTe(e)}function MZ(e,t,n){return n||e+(t?"_"+t:"")}const Y$=()=>{},jTe={init:Y$,add:Y$,rem:Y$,idx:0},r1={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},fv=Object.keys(r1).filter(e=>e!=="__count__");function UTe(e,t){return(n,r)=>De({name:e,aggregate_param:r,out:n||e},jTe,t)}[...fv,"__count__"].forEach(e=>{r1[e]=UTe(e,r1[e])});function FZ(e,t,n){return r1[e](n,t)}function PZ(e,t){return e.idx-t.idx}function VTe(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=r1[i]())})};return e.forEach(n),Object.values(t).sort(PZ)}function WTe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function HTe(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function qTe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function GTe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function RZ(e,t){const n=t||Cr,r=VTe(e),i=e.slice().sort(PZ);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=WTe,o.prototype.add=HTe,o.prototype.rem=qTe,o.prototype.set=GTe,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function S6(e){this._key=e?Mo(e):ve,this.reset()}const nr=S6.prototype;nr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};nr.add=function(e){this._add.push(e)};nr.rem=function(e){this._rem.push(e)};nr.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};nr.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",ce(n,o)||(n[o]=1,++i);return i};nr.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=KK(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};nr.argmin=function(e){return this.extent(e)[0]||{}};nr.argmax=function(e){return this.extent(e)[1]||{}};nr.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};nr.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};nr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=s6(this.values(),e),this._get=e),this._q};nr.q1=function(e){return this.quartile(e)[0]};nr.q2=function(e){return this.quartile(e)[1]};nr.q3=function(e){return this.quartile(e)[2]};nr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=bZ(this.values(),1e3,.05,e),this._get=e),this._ci};nr.ci0=function(e){return this.ci(e)[0]};nr.ci1=function(e){return this.ci(e)[1]};function nc(e){V.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}nc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:fv},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ne(nc,V,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,c,f;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][f=c[n[u]]]=f}o(e._prev),o(t);function s(a,l,u){const c=n[u],f=r[u++];for(const d in f){const h=a?a+"|"+d:d;l[c]=f[d],u<i?s(h,l,u):t[h]||e.cell(h,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=ae(br(v)),x=b.length;let w=0,k;for(;w<x;++w)r[k=b[w]]||(r[k]=1,t.push(k))}this._dims=ae(e.groupby),this._dnames=this._dims.map(v=>{const b=Zt(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:cT(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let f,d,h,p,g,m,y;for(u!==s.length&&q("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(f=o[y],d=s[y],h=a[y]||null,f==null&&d!=="count"&&q("Null aggregate field specified."),g=Zt(f),m=MZ(d,g,l[y]),n.push(m),d==="count"){this._counts.push(m);continue}p=c[g],p||(i(f),p=c[g]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(FZ(d,h,m))}return this._measures=this._measures.map(v=>RZ(v,v.field)),Object.create(null)},cellkey:cT(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new S6),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?fZ(t.tuple,o):st(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,c,f;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&i?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const YTe=1e-14;function k6(e){V.call(this,null,e)}k6.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ne(k6,V,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(br(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const f=r(c);c[a]=f,c[l]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=vZ(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let c=yr(t(u));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(YTe+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=_i(l,br(t),e.name||"bin_"+Zt(t))}});function DZ(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?nQ(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function C6(e){V.call(this,[],e)}C6.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ne(C6,V,{transform(e,t){const n=t.fork(t.ALL),r=DZ(ve,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Dd(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function OZ(e){xt.call(this,null,XTe,e)}ne(OZ,xt);function XTe(e){return this.value&&!e.modified()?this.value:LP(e.fields,e.orders)}function _6(e){V.call(this,null,e)}_6.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function KTe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ne(_6,V,{transform(e,t){const n=f=>d=>{for(var h=KTe(a(d),e.case,o)||[],p,g=0,m=h.length;g<m;++g)s.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=st({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function E6(e){V.call(this,null,e)}E6.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ne(E6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=QTe(a,i,o,e.filter||Fo)):n.mod=a,n.source=this.value,n.modifies(r)}});function QTe(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(st(o)),o={},o[t]=u);return i}const rz={kde:c6,mixture:kZ,normal:u6,lognormal:SZ,uniform:CZ},ZTe="distributions",iz="function",JTe="field";function NZ(e,t){const n=e[iz];ce(rz,n)||q("Unknown distribution function: "+n);const r=rz[n]();for(const i in e)i===JTe?r.data((e.from||t()).map(e[i])):i===ZTe?r[i](e[i].map(o=>NZ(o,t))):typeof r[i]===iz&&r[i](e[i]);return r}function $6(e){V.call(this,null,e)}const IZ=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],e4e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:IZ},{name:"weights",type:"number",array:!0}]};$6.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:IZ.concat(e4e)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ne($6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=NZ(e.distribution,t4e(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&q("Invalid density method: "+s),!e.extent&&!r.data&&q("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||ya(r.data()),u=SC(s,l,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],st(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function t4e(e){return()=>e.materialize(e.SOURCE).source}function LZ(e,t){return e?e.map((n,r)=>t[r]||Zt(n)):null}function A6(e,t,n){const r=[],i=f=>f(l);let o,s,a,l,u,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),c=o[u],c||(o[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const zZ="bin";function T6(e){V.call(this,null,e)}T6.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:zZ}]};const n4e=(e,t)=>rv(ya(e,t))/30;ne(T6,V,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=A6(t.source,e.groupby,Cr),i=e.smooth||!1,o=e.field,s=e.step||n4e(n,o),a=Dd((p,g)=>o(p)-o(g)),l=e.as||zZ,u=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<u;++d){const p=r[d].sort(a);h=-1;for(const g of xZ(p,s,i,o))g<c&&(c=g),g>f&&(f=g),p[++h][l]=g}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(l)}});function BZ(e){xt.call(this,null,r4e,e),this.modified(!0)}ne(BZ,xt);function r4e(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:_i(n=>t(n,e),br(t),Zt(t))}function M6(e){V.call(this,[void 0,void 0],e)}M6.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ne(M6,V,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=yr(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Zt(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function F6(e,t){xt.call(this,e),this.parent=t,this.count=0}ne(F6,xt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function kC(e){V.call(this,{},e),this._keys=Hg();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ne(kC,V,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=ce(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new F6(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=ve(l),c=o.get(u);c!==void 0&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(ve(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=ve(l),c=o.get(u),f=r(l);c===f?a(f).mod(l):(o.set(u,f),a(c).rem(l),a(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(ve(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=ve(l),c=o.get(u),f=r(l);c!==f&&(o.set(u,f),a(c).rem(l),a(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function jZ(e){xt.call(this,null,i4e,e)}ne(jZ,xt);function i4e(e){return this.value&&!e.modified()?this.value:G(e.name)?ae(e.name).map(t=>Mo(t)):Mo(e.name,e.as)}function P6(e){V.call(this,Hg(),e)}P6.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ne(P6,V,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,f=>{const d=ve(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{l(f,e)?o.push(f):r.set(ve(f),1)});function c(f){const d=ve(f),h=l(f,e),p=r.get(d);h&&p?(r.delete(d),o.push(f)):!h&&!p?(r.set(d,1),s.push(f)):u&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function R6(e){V.call(this,[],e)}R6.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ne(R6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=LZ(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<u;++c){for(d=n6(a),f=0;f<s;++f)d[i[f]]=(h=l[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function D6(e){V.call(this,[],e)}D6.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ne(D6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Zt),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=n6(u),f[s]=i[c],f[a]=r[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function O6(e){V.call(this,null,e)}O6.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ne(O6,V,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function UZ(e){V.call(this,[],e)}ne(UZ,V,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=st(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const Wb={value:"value",median:pQ,mean:B5e,min:J3,max:Bf},o4e=[];function N6(e){V.call(this,[],e)}N6.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function s4e(e){var t=e.method||Wb.value,n;if(Wb[t]==null)q("Unrecognized imputation method: "+t);else return t===Wb.value?(n=e.value!==void 0?e.value:0,()=>n):Wb[t]}function a4e(e){const t=e.field;return n=>n?t(n):NaN}ne(N6,V,{transform(e,t){var n=t.fork(t.ALL),r=s4e(e),i=a4e(e),o=Zt(e.field),s=Zt(e.key),a=(e.groupby||[]).map(Zt),l=l4e(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,d,h,p,g,m,y,v,b,x,w;for(m=0,b=l.length;m<b;++m)for(d=l[m],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(g=l.domain[v],w={_impute:!0},y=0,x=p.length;y<x;++y)w[a[y]]=p[y];w[s]=g,w[o]=Number.isNaN(h)?h=r(d,i):h,u.push(st(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function l4e(e,t,n,r){var i=y=>y(m),o=[],s=r?r.slice():[],a={},l={},u,c,f,d,h,p,g,m;for(s.forEach((y,v)=>a[y]=v+1),d=0,g=e.length;d<g;++d)m=e[d],p=n(m),h=a[p]||(a[p]=s.push(p)),c=(u=t?t.map(i):o4e)+"",(f=l[c])||(f=l[c]=[],o.push(f),f.values=u),f[h-1]=m;return o.domain=s,o}function I6(e){nc.call(this,e)}I6.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:fv},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ne(I6,nc,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{De(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function L6(e){V.call(this,null,e)}L6.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ne(L6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=A6(r,e.groupby,e.field),o=(e.groupby||[]).map(Zt),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&q("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=ya(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=c6(h,s)[a],g=e.counts?h.length:1,m=c||ya(h);SC(p,m,f,d).forEach(y=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[l[0]]=y[0],v[l[1]]=y[1]*g,u.push(st(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function VZ(e){xt.call(this,null,u4e,e)}ne(VZ,xt);function u4e(e){return this.value&&!e.modified()?this.value:BP(e.fields,e.flat)}function WZ(e){V.call(this,[],e),this._pending=null}ne(WZ,V,{transform(e,t){const n=t.dataflow;return this._pending?X$(this,t,this._pending):c4e(e)?t.StopPropagation:e.values?X$(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ae(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>X$(this,t,ae(r.data)))}});function c4e(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function X$(e,t,n){n.forEach(st);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function z6(e){V.call(this,{},e)}z6.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ne(z6,V,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&q('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&q('The "as" parameter has too few output field names.'),c=c||i.map(Zt),f=function(p){for(var g=0,m=0,y,v;g<a;++g)if(v=r.get(n[g](p)),v==null)for(y=0;y<d;++y,++m)p[c[m]]=o;else for(y=0;y<d;++y,++m)p[c[m]]=i[y](v)}):(c||q("Missing output field names."),f=function(p){for(var g=0,m;g<a;++g)m=r.get(n[g](p)),p[c[g]]=m??o}),s?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,f),u.modifies(c)}});function HZ(e){xt.call(this,null,f4e,e)}ne(HZ,xt);function f4e(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function qZ(e){xt.call(this,null,d4e,e)}ne(qZ,xt);function d4e(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function GZ(e){V.call(this,null,e)}ne(GZ,V,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function B6(e){nc.call(this,e)}B6.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:fv,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ne(B6,nc,{_transform:nc.prototype.transform,transform(e,t){return this._transform(h4e(e,t),t)}});function h4e(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=br(n).concat(br(r)),s=g4e(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>p4e(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function p4e(e,t,n,r){return _i(i=>t(i)===e?n(i):NaN,r,e+"")}function g4e(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(cC),t?i.slice(0,t):i}function YZ(e){kC.call(this,e)}ne(YZ,kC,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(ve(o),n,t,o);return(e.modified("field")||r&&t.modified(br(r)))&&q("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(st(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function j6(e){V.call(this,null,e)}j6.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ne(j6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=LZ(e.fields,e.as||[]),o=r?(a,l)=>m4e(a,l,r,i):gC;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=ve(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,st({}));s[ve(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[ve(a)]))}),n}});function m4e(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function XZ(e){V.call(this,null,e)}ne(XZ,V,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function U6(e){V.call(this,null,e)}U6.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const y4e=1e-14;ne(U6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=A6(i,e.groupby,e.field),s=(e.groupby||[]).map(Zt),a=[],l=e.step||.01,u=e.probs||Ii(l/2,1-y4e,l),c=u.length;return o.forEach(f=>{const d=o6(f,u);for(let h=0;h<c;++h){const p={};for(let g=0;g<s.length;++g)p[s[g]]=f.dims[g];p[r[0]]=u[h],p[r[1]]=d[h],a.push(st(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function KZ(e){V.call(this,null,e)}ne(KZ,V,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=ve(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=n6(i);r[ve(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[ve(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function V6(e){V.call(this,[],e),this.count=0}V6.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ne(V6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[ve(f)]=1,c),{});let s=this.value,a=this.count,l=0;function u(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*Ro()),d<s.length&&d>=l&&(f=s[d],o[ve(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=ve(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[ve(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[ve(c)]||u(c)}),l=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[ve(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[ve(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(c=>!o[ve(c)])),this.count=a,this.value=n.source=s,n}});function W6(e){V.call(this,null,e)}W6.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ne(W6,V,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ii(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,st(o)}),n.add=t.add.concat(this.value),n}});function QZ(e){V.call(this,null,e),this.modified(!0)}ne(QZ,V,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function H6(e){V.call(this,null,e)}const ZZ=["unit0","unit1"];H6.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:GP,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:ZZ}]};ne(H6,V,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?Yg:Gg)(o.unit).offset,a=e.as||ZZ,l=a[0],u=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(br(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let m,y;g==null?(p[l]=null,r&&(p[u]=null)):(p[l]=m=y=o(g),r&&(p[u]=y=s(m,c)),m<f&&(f=m),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:UQ({extent:e.extent||ya(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=YP(r),s=this.value||{},a=(n?RQ:PQ)(o,i);return a.unit=He(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function JZ(e){V.call(this,Hg(),e)}ne(JZ,V,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function eJ(e){V.call(this,null,e)}ne(eJ,V,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Dd(e.sort)):t.source).map(e.field))}});function v4e(e,t,n,r){const i=i1[e](t,n);return{init:i.init||du,update:function(o,s){s[r]=i.next(o)}}}const i1={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=i1.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||q("ntile num must be greater than zero.");const n=i1.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||q("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=b4e(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function b4e(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const x4e=Object.keys(i1);function tJ(e){const t=ae(e.ops),n=ae(e.fields),r=ae(e.params),i=ae(e.aggregate_params),o=ae(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[];let d=!0;function h(p){ae(br(p)).forEach(g=>l[g]=1)}h(e.sort),t.forEach((p,g)=>{const m=n[g],y=r[g],v=i[g]||null,b=Zt(m),x=MZ(p,b,o[g]);if(h(m),s.push(x),ce(i1,p))a.push(v4e(p,m,y,x));else{if(m==null&&p!=="count"&&q("Null aggregate field specified."),p==="count"){c.push(x);return}d=!1;let w=u[b];w||(w=u[b]=[],w.field=m,f.push(w)),w.push(FZ(p,v,x))}}),(c.length||f.length)&&(this.cell=w4e(f,c,d)),this.inputs=Object.keys(l)}const nJ=tJ.prototype;nJ.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};nJ.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function w4e(e,t,n){e=e.map(l=>RZ(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new S6;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function q6(e){V.call(this,{},e),this._mlen=0,this._mods=[]}q6.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:x4e.concat(fv)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ne(q6,V,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Dd(e.sort),i=cT(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new tJ(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)S4e(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=DZ(ve),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function S4e(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?qg(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||_r(-1)};t.init();for(let f=0;f<l;++f)k4e(c,s,f,l),o&&C4e(c,u),t.update(c,a[f])}function k4e(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function C4e(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const _4e=Object.freeze(Object.defineProperty({__proto__:null,aggregate:nc,bin:k6,collect:C6,compare:OZ,countpattern:_6,cross:E6,density:$6,dotbin:T6,expression:BZ,extent:M6,facet:kC,field:jZ,filter:P6,flatten:R6,fold:D6,formula:O6,generate:UZ,impute:N6,joinaggregate:I6,kde:L6,key:VZ,load:WZ,lookup:z6,multiextent:HZ,multivalues:qZ,params:GZ,pivot:B6,prefacet:YZ,project:j6,proxy:XZ,quantile:U6,relay:KZ,sample:V6,sequence:W6,sieve:QZ,subflow:F6,timeunit:H6,tupleindex:JZ,values:eJ,window:q6},Symbol.toStringTag,{value:"Module"}));function ut(e){return function(){return e}}const oz=Math.abs,sr=Math.atan2,zc=Math.cos,E4e=Math.max,K$=Math.min,Is=Math.sin,wf=Math.sqrt,ur=1e-12,ng=Math.PI,Ow=ng/2,rJ=2*ng;function $4e(e){return e>1?0:e<-1?ng:Math.acos(e)}function sz(e){return e>=1?Ow:e<=-1?-Ow:Math.asin(e)}const fT=Math.PI,dT=2*fT,of=1e-6,A4e=dT-of;function iJ(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function T4e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iJ;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let G6=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?iJ:T4e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,u=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>of)if(!(Math.abs(f*l-u*c)>of)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,p=i-a,g=l*l+u*u,m=h*h+p*p,y=Math.sqrt(g),v=Math.sqrt(d),b=o*Math.tan((fT-Math.acos((g+d-m)/(2*y*v)))/2),x=b/v,w=b/y;Math.abs(x-1)>of&&this._append`L${t+x*c},${n+x*f}`,this._append`A${o},${o},0,0,${+(f*h>c*p)},${this._x1=t+w*l},${this._y1=n+w*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>of||Math.abs(this._y1-c)>of)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%dT+dT),d>A4e?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>of&&this._append`A${r},${r},0,${+(d>=fT)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function CC(){return new G6}CC.prototype=G6.prototype;function _C(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new G6(t)}function M4e(e){return e.innerRadius}function F4e(e){return e.outerRadius}function P4e(e){return e.startAngle}function R4e(e){return e.endAngle}function D4e(e){return e&&e.padAngle}function O4e(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,c=s-i,f=a-o,d=f*l-c*u;if(!(d*d<ur))return d=(c*(t-o)-f*(e-i))/d,[e+d*l,t+d*u]}function Hb(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/wf(a*a+l*l),c=u*l,f=-u*a,d=e+c,h=t+f,p=n+c,g=r+f,m=(d+p)/2,y=(h+g)/2,v=p-d,b=g-h,x=v*v+b*b,w=i-o,k=d*g-p*h,S=(b<0?-1:1)*wf(E4e(0,w*w*x-k*k)),C=(k*b-v*S)/x,_=(-k*v-b*S)/x,$=(k*b+v*S)/x,A=(-k*v+b*S)/x,N=C-m,M=_-y,R=$-m,P=A-y;return N*N+M*M>R*R+P*P&&(C=$,_=A),{cx:C,cy:_,x01:-c,y01:-f,x11:C*(i/w-1),y11:_*(i/w-1)}}function N4e(){var e=M4e,t=F4e,n=ut(0),r=null,i=P4e,o=R4e,s=D4e,a=null,l=_C(u);function u(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-Ow,g=o.apply(this,arguments)-Ow,m=oz(g-p),y=g>p;if(a||(a=c=l()),h<d&&(f=h,h=d,d=f),!(h>ur))a.moveTo(0,0);else if(m>rJ-ur)a.moveTo(h*zc(p),h*Is(p)),a.arc(0,0,h,p,g,!y),d>ur&&(a.moveTo(d*zc(g),d*Is(g)),a.arc(0,0,d,g,p,y));else{var v=p,b=g,x=p,w=g,k=m,S=m,C=s.apply(this,arguments)/2,_=C>ur&&(r?+r.apply(this,arguments):wf(d*d+h*h)),$=K$(oz(h-d)/2,+n.apply(this,arguments)),A=$,N=$,M,R;if(_>ur){var P=sz(_/d*Is(C)),D=sz(_/h*Is(C));(k-=P*2)>ur?(P*=y?1:-1,x+=P,w-=P):(k=0,x=w=(p+g)/2),(S-=D*2)>ur?(D*=y?1:-1,v+=D,b-=D):(S=0,v=b=(p+g)/2)}var I=h*zc(v),O=h*Is(v),j=d*zc(w),Y=d*Is(w);if($>ur){var W=h*zc(b),oe=h*Is(b),re=d*zc(x),we=d*Is(x),Re;if(m<ng)if(Re=O4e(I,O,re,we,W,oe,j,Y)){var lt=I-Re[0],_n=O-Re[1],rr=W-Re[0],ue=oe-Re[1],_e=1/Is($4e((lt*rr+_n*ue)/(wf(lt*lt+_n*_n)*wf(rr*rr+ue*ue)))/2),Ee=wf(Re[0]*Re[0]+Re[1]*Re[1]);A=K$($,(d-Ee)/(_e-1)),N=K$($,(h-Ee)/(_e+1))}else A=N=0}S>ur?N>ur?(M=Hb(re,we,I,O,h,N,y),R=Hb(W,oe,j,Y,h,N,y),a.moveTo(M.cx+M.x01,M.cy+M.y01),N<$?a.arc(M.cx,M.cy,N,sr(M.y01,M.x01),sr(R.y01,R.x01),!y):(a.arc(M.cx,M.cy,N,sr(M.y01,M.x01),sr(M.y11,M.x11),!y),a.arc(0,0,h,sr(M.cy+M.y11,M.cx+M.x11),sr(R.cy+R.y11,R.cx+R.x11),!y),a.arc(R.cx,R.cy,N,sr(R.y11,R.x11),sr(R.y01,R.x01),!y))):(a.moveTo(I,O),a.arc(0,0,h,v,b,!y)):a.moveTo(I,O),!(d>ur)||!(k>ur)?a.lineTo(j,Y):A>ur?(M=Hb(j,Y,W,oe,d,-A,y),R=Hb(I,O,re,we,d,-A,y),a.lineTo(M.cx+M.x01,M.cy+M.y01),A<$?a.arc(M.cx,M.cy,A,sr(M.y01,M.x01),sr(R.y01,R.x01),!y):(a.arc(M.cx,M.cy,A,sr(M.y01,M.x01),sr(M.y11,M.x11),!y),a.arc(0,0,d,sr(M.cy+M.y11,M.cx+M.x11),sr(R.cy+R.y11,R.cx+R.x11),y),a.arc(R.cx,R.cy,A,sr(R.y11,R.x11),sr(R.y01,R.x01),!y))):a.arc(0,0,d,w,x,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-ng/2;return[zc(f)*c,Is(f)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:ut(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:ut(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:ut(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:ut(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:ut(+c),u):i},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:ut(+c),u):o},u.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:ut(+c),u):s},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function oJ(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sJ(e){this._context=e}sJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Y6(e){return new sJ(e)}function aJ(e){return e[0]}function lJ(e){return e[1]}function uJ(e,t){var n=ut(!0),r=null,i=Y6,o=null,s=_C(a);e=typeof e=="function"?e:e===void 0?aJ:ut(e),t=typeof t=="function"?t:t===void 0?lJ:ut(t);function a(l){var u,c=(l=oJ(l)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,u,l),+t(f,u,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ut(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ut(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ut(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function cJ(e,t,n){var r=null,i=ut(!0),o=null,s=Y6,a=null,l=_C(u);e=typeof e=="function"?e:e===void 0?aJ:ut(+e),t=typeof t=="function"?t:ut(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?lJ:ut(+n);function u(f){var d,h,p,g=(f=oJ(f)).length,m,y=!1,v,b=new Array(g),x=new Array(g);for(o==null&&(a=s(v=l())),d=0;d<=g;++d){if(!(d<g&&i(m=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(m,d,f),x[d]=+t(m,d,f),a.point(r?+r(m,d,f):b[d],n?+n(m,d,f):x[d]))}if(v)return a=null,v+""||null}function c(){return uJ().defined(i).curve(s).context(o)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ut(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ut(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ut(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:ut(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ut(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ut(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ut(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),u):s},u.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),u):o},u}const I4e={draw(e,t){const n=wf(t/ng);e.moveTo(n,0),e.arc(0,0,n,0,rJ)}};function L4e(e,t){let n=null,r=_C(i);e=typeof e=="function"?e:ut(e||I4e),t=typeof t=="function"?t:ut(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:ut(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:ut(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function rc(){}function Nw(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function EC(e){this._context=e}EC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Nw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Nw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function z4e(e){return new EC(e)}function fJ(e){this._context=e}fJ.prototype={areaStart:rc,areaEnd:rc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Nw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function B4e(e){return new fJ(e)}function dJ(e){this._context=e}dJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Nw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function j4e(e){return new dJ(e)}function hJ(e,t){this._basis=new EC(e),this._beta=t}hJ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const U4e=function e(t){function n(r){return t===1?new EC(r):new hJ(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Iw(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function X6(e,t){this._context=e,this._k=(1-t)/6}X6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Iw(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Iw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const V4e=function e(t){function n(r){return new X6(r,t)}return n.tension=function(r){return e(+r)},n}(0);function K6(e,t){this._context=e,this._k=(1-t)/6}K6.prototype={areaStart:rc,areaEnd:rc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Iw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const W4e=function e(t){function n(r){return new K6(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Q6(e,t){this._context=e,this._k=(1-t)/6}Q6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Iw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const H4e=function e(t){function n(r){return new Q6(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Z6(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>ur){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ur){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function pJ(e,t){this._context=e,this._alpha=t}pJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Z6(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const q4e=function e(t){function n(r){return t?new pJ(r,t):new X6(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function gJ(e,t){this._context=e,this._alpha=t}gJ.prototype={areaStart:rc,areaEnd:rc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Z6(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const G4e=function e(t){function n(r){return t?new gJ(r,t):new K6(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function mJ(e,t){this._context=e,this._alpha=t}mJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Z6(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Y4e=function e(t){function n(r){return t?new mJ(r,t):new Q6(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function yJ(e){this._context=e}yJ.prototype={areaStart:rc,areaEnd:rc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function X4e(e){return new yJ(e)}function az(e){return e<0?-1:1}function lz(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(az(o)+az(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function uz(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Q$(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function Lw(e){this._context=e}Lw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Q$(this,this._t0,uz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Q$(this,uz(this,n=lz(this,e,t)),n);break;default:Q$(this,this._t0,n=lz(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function vJ(e){this._context=new bJ(e)}(vJ.prototype=Object.create(Lw.prototype)).point=function(e,t){Lw.prototype.point.call(this,t,e)};function bJ(e){this._context=e}bJ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function K4e(e){return new Lw(e)}function Q4e(e){return new vJ(e)}function xJ(e){this._context=e}xJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=cz(e),i=cz(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function cz(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function Z4e(e){return new xJ(e)}function $C(e,t){this._context=e,this._t=t}$C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function J4e(e){return new $C(e,.5)}function eMe(e){return new $C(e,0)}function tMe(e){return new $C(e,1)}function qu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const nMe=()=>typeof Image<"u"?Image:null;function _a(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Sc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hT=Symbol("implicit");function J6(){var e=new $L,t=[],n=[],r=hT;function i(o){let s=e.get(o);if(s===void 0){if(r!==hT)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new $L;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return J6(t,n).unknown(r)},_a.apply(i,arguments),i}function Kg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function dv(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kc(){}var rd=.7,rg=1/rd,up="\\s*([+-]?\\d+)\\s*",o1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rMe=/^#([0-9a-f]{3,8})$/,iMe=new RegExp(`^rgb\\(${up},${up},${up}\\)$`),oMe=new RegExp(`^rgb\\(${da},${da},${da}\\)$`),sMe=new RegExp(`^rgba\\(${up},${up},${up},${o1}\\)$`),aMe=new RegExp(`^rgba\\(${da},${da},${da},${o1}\\)$`),lMe=new RegExp(`^hsl\\(${o1},${da},${da}\\)$`),uMe=new RegExp(`^hsla\\(${o1},${da},${da},${o1}\\)$`),fz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kg(kc,s1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dz,formatHex:dz,formatHex8:cMe,formatHsl:fMe,formatRgb:hz,toString:hz});function dz(){return this.rgb().formatHex()}function cMe(){return this.rgb().formatHex8()}function fMe(){return wJ(this).formatHsl()}function hz(){return this.rgb().formatRgb()}function s1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rMe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pz(t):n===3?new Tn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?qb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?qb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iMe.exec(e))?new Tn(t[1],t[2],t[3],1):(t=oMe.exec(e))?new Tn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sMe.exec(e))?qb(t[1],t[2],t[3],t[4]):(t=aMe.exec(e))?qb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lMe.exec(e))?yz(t[1],t[2]/100,t[3]/100,1):(t=uMe.exec(e))?yz(t[1],t[2]/100,t[3]/100,t[4]):fz.hasOwnProperty(e)?pz(fz[e]):e==="transparent"?new Tn(NaN,NaN,NaN,0):null}function pz(e){return new Tn(e>>16&255,e>>8&255,e&255,1)}function qb(e,t,n,r){return r<=0&&(e=t=n=NaN),new Tn(e,t,n,r)}function eR(e){return e instanceof kc||(e=s1(e)),e?(e=e.rgb(),new Tn(e.r,e.g,e.b,e.opacity)):new Tn}function ic(e,t,n,r){return arguments.length===1?eR(e):new Tn(e,t,n,r??1)}function Tn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Kg(Tn,ic,dv(kc,{brighter(e){return e=e==null?rg:Math.pow(rg,e),new Tn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rd:Math.pow(rd,e),new Tn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Tn(jf(this.r),jf(this.g),jf(this.b),zw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gz,formatHex:gz,formatHex8:dMe,formatRgb:mz,toString:mz}));function gz(){return`#${Sf(this.r)}${Sf(this.g)}${Sf(this.b)}`}function dMe(){return`#${Sf(this.r)}${Sf(this.g)}${Sf(this.b)}${Sf((isNaN(this.opacity)?1:this.opacity)*255)}`}function mz(){const e=zw(this.opacity);return`${e===1?"rgb(":"rgba("}${jf(this.r)}, ${jf(this.g)}, ${jf(this.b)}${e===1?")":`, ${e})`}`}function zw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sf(e){return e=jf(e),(e<16?"0":"")+e.toString(16)}function yz(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new is(e,t,n,r)}function wJ(e){if(e instanceof is)return new is(e.h,e.s,e.l,e.opacity);if(e instanceof kc||(e=s1(e)),!e)return new is;if(e instanceof is)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new is(s,a,l,e.opacity)}function Bw(e,t,n,r){return arguments.length===1?wJ(e):new is(e,t,n,r??1)}function is(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Kg(is,Bw,dv(kc,{brighter(e){return e=e==null?rg:Math.pow(rg,e),new is(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rd:Math.pow(rd,e),new is(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Tn(Z$(e>=240?e-240:e+120,i,r),Z$(e,i,r),Z$(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new is(vz(this.h),Gb(this.s),Gb(this.l),zw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zw(this.opacity);return`${e===1?"hsl(":"hsla("}${vz(this.h)}, ${Gb(this.s)*100}%, ${Gb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vz(e){return e=(e||0)%360,e<0?e+360:e}function Gb(e){return Math.max(0,Math.min(1,e||0))}function Z$(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const SJ=Math.PI/180,kJ=180/Math.PI,jw=18,CJ=.96422,_J=1,EJ=.82521,$J=4/29,cp=6/29,AJ=3*cp*cp,hMe=cp*cp*cp;function TJ(e){if(e instanceof ha)return new ha(e.l,e.a,e.b,e.opacity);if(e instanceof ol)return MJ(e);e instanceof Tn||(e=eR(e));var t=n5(e.r),n=n5(e.g),r=n5(e.b),i=J$((.2225045*t+.7168786*n+.0606169*r)/_J),o,s;return t===n&&n===r?o=s=i:(o=J$((.4360747*t+.3850649*n+.1430804*r)/CJ),s=J$((.0139322*t+.0971045*n+.7141733*r)/EJ)),new ha(116*i-16,500*(o-i),200*(i-s),e.opacity)}function Uw(e,t,n,r){return arguments.length===1?TJ(e):new ha(e,t,n,r??1)}function ha(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Kg(ha,Uw,dv(kc,{brighter(e){return new ha(this.l+jw*(e??1),this.a,this.b,this.opacity)},darker(e){return new ha(this.l-jw*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=CJ*e5(t),e=_J*e5(e),n=EJ*e5(n),new Tn(t5(3.1338561*t-1.6168667*e-.4906146*n),t5(-.9787684*t+1.9161415*e+.033454*n),t5(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function J$(e){return e>hMe?Math.pow(e,1/3):e/AJ+$J}function e5(e){return e>cp?e*e*e:AJ*(e-$J)}function t5(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function n5(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pMe(e){if(e instanceof ol)return new ol(e.h,e.c,e.l,e.opacity);if(e instanceof ha||(e=TJ(e)),e.a===0&&e.b===0)return new ol(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*kJ;return new ol(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Vw(e,t,n,r){return arguments.length===1?pMe(e):new ol(e,t,n,r??1)}function ol(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function MJ(e){if(isNaN(e.h))return new ha(e.l,0,0,e.opacity);var t=e.h*SJ;return new ha(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Kg(ol,Vw,dv(kc,{brighter(e){return new ol(this.h,this.c,this.l+jw*(e??1),this.opacity)},darker(e){return new ol(this.h,this.c,this.l-jw*(e??1),this.opacity)},rgb(){return MJ(this).rgb()}}));var FJ=-.14861,tR=1.78277,nR=-.29227,AC=-.90649,a1=1.97294,bz=a1*AC,xz=a1*tR,wz=tR*nR-AC*FJ;function gMe(e){if(e instanceof Uf)return new Uf(e.h,e.s,e.l,e.opacity);e instanceof Tn||(e=eR(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(wz*r+bz*t-xz*n)/(wz+bz-xz),o=r-i,s=(a1*(n-i)-nR*o)/AC,a=Math.sqrt(s*s+o*o)/(a1*i*(1-i)),l=a?Math.atan2(s,o)*kJ-120:NaN;return new Uf(l<0?l+360:l,a,i,e.opacity)}function pT(e,t,n,r){return arguments.length===1?gMe(e):new Uf(e,t,n,r??1)}function Uf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Kg(Uf,pT,dv(kc,{brighter(e){return e=e==null?rg:Math.pow(rg,e),new Uf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rd:Math.pow(rd,e),new Uf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*SJ,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Tn(255*(t+n*(FJ*r+tR*i)),255*(t+n*(nR*r+AC*i)),255*(t+n*(a1*r)),this.opacity)}}));function PJ(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function RJ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return PJ((n-r/t)*t,s,i,o,a)}}function DJ(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return PJ((n-r/t)*t,i,o,s,a)}}const TC=e=>()=>e;function OJ(e,t){return function(n){return e+n*t}}function mMe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function MC(e,t){var n=t-e;return n?OJ(e,n>180||n<-180?n-360*Math.round(n/360):n):TC(isNaN(e)?t:e)}function yMe(e){return(e=+e)==1?Mn:function(t,n){return n-t?mMe(t,n,e):TC(isNaN(t)?n:t)}}function Mn(e,t){var n=t-e;return n?OJ(e,n):TC(isNaN(e)?t:e)}const Ww=function e(t){var n=yMe(t);function r(i,o){var s=n((i=ic(i)).r,(o=ic(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=Mn(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function NJ(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=ic(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var vMe=NJ(RJ),bMe=NJ(DJ);function rR(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function IJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xMe(e,t){return(IJ(t)?rR:LJ)(e,t)}function LJ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Cc(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function zJ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function es(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function BJ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Cc(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var gT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,r5=new RegExp(gT.source,"g");function wMe(e){return function(){return e}}function SMe(e){return function(t){return e(t)+""}}function jJ(e,t){var n=gT.lastIndex=r5.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=gT.exec(e))&&(i=r5.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:es(r,i)})),n=r5.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?SMe(l[0].x):wMe(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function Cc(e,t){var n=typeof t,r;return t==null||n==="boolean"?TC(t):(n==="number"?es:n==="string"?(r=s1(t))?(t=r,Ww):jJ:t instanceof s1?Ww:t instanceof Date?zJ:IJ(t)?rR:Array.isArray(t)?LJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?BJ:es)(e,t)}function kMe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function CMe(e,t){var n=MC(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Qg(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Sz=180/Math.PI,mT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function UJ(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Sz,skewX:Math.atan(l)*Sz,scaleX:s,scaleY:a}}var Yb;function _Me(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?mT:UJ(t.a,t.b,t.c,t.d,t.e,t.f)}function EMe(e){return e==null||(Yb||(Yb=document.createElementNS("http://www.w3.org/2000/svg","g")),Yb.setAttribute("transform",e),!(e=Yb.transform.baseVal.consolidate()))?mT:(e=e.matrix,UJ(e.a,e.b,e.c,e.d,e.e,e.f))}function VJ(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:es(u,f)},{i:g-2,x:es(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:es(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:es(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:es(u,f)},{i:g-2,x:es(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),s(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)f[(m=d[p]).i]=m.x(h);return f.join("")}}}var $Me=VJ(_Me,"px, ","px)","deg)"),AMe=VJ(EMe,", ",")",")"),TMe=1e-12;function kz(e){return((e=Math.exp(e))+1/e)/2}function MMe(e){return((e=Math.exp(e))-1/e)/2}function FMe(e){return((e=Math.exp(2*e))-1)/(e+1)}const PMe=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],d=s[2],h=c-a,p=f-l,g=h*h+p*p,m,y;if(g<TMe)y=Math.log(d/u)/t,m=function(S){return[a+S*h,l+S*p,u*Math.exp(t*S*y)]};else{var v=Math.sqrt(g),b=(d*d-u*u+r*g)/(2*u*n*v),x=(d*d-u*u-r*g)/(2*d*n*v),w=Math.log(Math.sqrt(b*b+1)-b),k=Math.log(Math.sqrt(x*x+1)-x);y=(k-w)/t,m=function(S){var C=S*y,_=kz(w),$=u/(n*v)*(_*FMe(t*C+w)-MMe(w));return[a+$*h,l+$*p,u*_/kz(t*C+w)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function WJ(e){return function(t,n){var r=e((t=Bw(t)).h,(n=Bw(n)).h),i=Mn(t.s,n.s),o=Mn(t.l,n.l),s=Mn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const HJ=WJ(MC);var qJ=WJ(Mn);function GJ(e,t){var n=Mn((e=Uw(e)).l,(t=Uw(t)).l),r=Mn(e.a,t.a),i=Mn(e.b,t.b),o=Mn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function YJ(e){return function(t,n){var r=e((t=Vw(t)).h,(n=Vw(n)).h),i=Mn(t.c,n.c),o=Mn(t.l,n.l),s=Mn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const XJ=YJ(MC);var KJ=YJ(Mn);function QJ(e){return function t(n){n=+n;function r(i,o){var s=e((i=pT(i)).h,(o=pT(o)).h),a=Mn(i.s,o.s),l=Mn(i.l,o.l),u=Mn(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const ZJ=QJ(MC);var JJ=QJ(Mn);function iR(e,t){t===void 0&&(t=e,e=Cc);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function RMe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const DMe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Cc,interpolateArray:xMe,interpolateBasis:RJ,interpolateBasisClosed:DJ,interpolateCubehelix:ZJ,interpolateCubehelixLong:JJ,interpolateDate:zJ,interpolateDiscrete:kMe,interpolateHcl:XJ,interpolateHclLong:KJ,interpolateHsl:HJ,interpolateHslLong:qJ,interpolateHue:CMe,interpolateLab:GJ,interpolateNumber:es,interpolateNumberArray:rR,interpolateObject:BJ,interpolateRgb:Ww,interpolateRgbBasis:vMe,interpolateRgbBasisClosed:bMe,interpolateRound:Qg,interpolateString:jJ,interpolateTransformCss:$Me,interpolateTransformSvg:AMe,interpolateZoom:PMe,piecewise:iR,quantize:RMe},Symbol.toStringTag,{value:"Module"}));function OMe(e){return function(){return e}}function yT(e){return+e}var Cz=[0,1];function ci(e){return e}function vT(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:OMe(isNaN(t)?NaN:.5)}function NMe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function IMe(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=vT(i,r),o=n(s,o)):(r=vT(r,i),o=n(o,s)),function(a){return o(r(a))}}function LMe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=vT(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=ec(e,a,1,r)-1;return o[l](i[l](a))}}function hv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function FC(){var e=Cz,t=Cz,n=Cc,r,i,o,s=ci,a,l,u;function c(){var d=Math.min(e.length,t.length);return s!==ci&&(s=NMe(e[0],e[d-1])),a=d>2?LMe:IMe,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((u||(u=a(t,e.map(r),es)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,yT),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Qg,c()},f.clamp=function(d){return arguments.length?(s=d?!0:ci,c()):s!==ci},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function eee(){return FC()(ci,ci)}function tee(e,t,n,r){var i=tc(e,t,n),o;switch(r=nd(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=xQ(i,s))&&(r.precision=o),HP(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=wQ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=bQ(i))&&(r.precision=o-(r.type==="%")*2);break}}return iv(r)}function Nd(e){var t=e.domain;return e.ticks=function(n){var r=t();return Q3(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return tee(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,c=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);c-- >0;){if(u=Z3(s,a,n),u===l)return r[i]=s,r[o]=a,t(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function oR(){var e=eee();return e.copy=function(){return hv(e,oR())},_a.apply(e,arguments),Nd(e)}function nee(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,yT),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return nee(e).unknown(t)},e=arguments.length?Array.from(e,yT):[0,1],Nd(n)}function ree(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function _z(e){return Math.log(e)}function Ez(e){return Math.exp(e)}function zMe(e){return-Math.log(-e)}function BMe(e){return-Math.exp(-e)}function jMe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function UMe(e){return e===10?jMe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function VMe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function $z(e){return(t,n)=>-e(-t,n)}function sR(e){const t=e(_z,Ez),n=t.domain;let r=10,i,o;function s(){return i=VMe(r),o=UMe(r),n()[0]<0?(i=$z(i),o=$z(o),e(zMe,BMe)):e(_z,Ez),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=i(u),h=i(c),p,g;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/o(-d):p*o(d),!(g<u)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/o(-d):p*o(d),!(g<u)){if(g>c)break;y.push(g)}y.length*2<m&&(y=Q3(u,c,m))}else y=Q3(d,h,Math.min(h-d,m)).map(o);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=nd(l)).precision==null&&(l.trim=!0),l=iv(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=()=>n(ree(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function iee(){const e=sR(FC()).domain([1,10]);return e.copy=()=>hv(e,iee()).base(e.base()),_a.apply(e,arguments),e}function Az(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Tz(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function aR(e){var t=1,n=e(Az(t),Tz(t));return n.constant=function(r){return arguments.length?e(Az(t=+r),Tz(t)):t},Nd(n)}function oee(){var e=aR(FC());return e.copy=function(){return hv(e,oee()).constant(e.constant())},_a.apply(e,arguments)}function Mz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function WMe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function HMe(e){return e<0?-e*e:e*e}function lR(e){var t=e(ci,ci),n=1;function r(){return n===1?e(ci,ci):n===.5?e(WMe,HMe):e(Mz(n),Mz(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Nd(t)}function uR(){var e=lR(FC());return e.copy=function(){return hv(e,uR()).exponent(e.exponent())},_a.apply(e,arguments),e}function qMe(){return uR.apply(null,arguments).exponent(.5)}function see(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=hQ(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[ec(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(dl),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return see().domain(e).range(t).unknown(r)},_a.apply(o,arguments)}function aee(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[ec(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return aee().domain([e,t]).range(i).unknown(o)},_a.apply(Nd(s),arguments)}function lee(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[ec(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return lee().domain(e).range(t).unknown(n)},_a.apply(i,arguments)}function GMe(e){return new Date(e)}function YMe(e){return e instanceof Date?+e:+new Date(+e)}function cR(e,t,n,r,i,o,s,a,l,u){var c=eee(),f=c.invert,d=c.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(k){return(l(k)<k?h:a(k)<k?p:s(k)<k?g:o(k)<k?m:r(k)<k?i(k)<k?y:v:n(k)<k?b:x)(k)}return c.invert=function(k){return new Date(f(k))},c.domain=function(k){return arguments.length?d(Array.from(k,YMe)):d().map(GMe)},c.ticks=function(k){var S=d();return e(S[0],S[S.length-1],k??10)},c.tickFormat=function(k,S){return S==null?w:u(S)},c.nice=function(k){var S=d();return(!k||typeof k.range!="function")&&(k=t(S[0],S[S.length-1],k??10)),k?d(ree(S,k)):c},c.copy=function(){return hv(c,cR(e,t,n,r,i,o,s,a,l,u))},c}function XMe(){return _a.apply(cR(lAe,uAe,vs,Zp,Fd,fa,av,ov,as,KP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function KMe(){return _a.apply(cR(sAe,aAe,bs,Jp,Rd,hl,lv,sv,as,QP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function PC(){var e=0,t=1,n,r,i,o,s=ci,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(s=f,u):s};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,s=f(h,p),u):[s(0),s(1)]}}return u.range=c(Cc),u.rangeRound=c(Qg),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function _c(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fR(){var e=Nd(PC()(ci));return e.copy=function(){return _c(e,fR())},Sc.apply(e,arguments)}function uee(){var e=sR(PC()).domain([1,10]);return e.copy=function(){return _c(e,uee()).base(e.base())},Sc.apply(e,arguments)}function cee(){var e=aR(PC());return e.copy=function(){return _c(e,cee()).constant(e.constant())},Sc.apply(e,arguments)}function dR(){var e=lR(PC());return e.copy=function(){return _c(e,dR()).exponent(e.exponent())},Sc.apply(e,arguments)}function QMe(){return dR.apply(null,arguments).exponent(.5)}function RC(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=ci,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-o)*(r*g<r*o?a:l),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(m){var y,v,b;return arguments.length?([y,v,b]=m,u=iR(g,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(Cc),h.rangeRound=p(Qg),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),o=g(t),s=g(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function fee(){var e=Nd(RC()(ci));return e.copy=function(){return _c(e,fee())},Sc.apply(e,arguments)}function dee(){var e=sR(RC()).domain([.1,1,10]);return e.copy=function(){return _c(e,dee()).base(e.base())},Sc.apply(e,arguments)}function hee(){var e=aR(RC());return e.copy=function(){return _c(e,hee()).constant(e.constant())},Sc.apply(e,arguments)}function hR(){var e=lR(RC());return e.copy=function(){return _c(e,hR()).exponent(e.exponent())},Sc.apply(e,arguments)}function ZMe(){return hR.apply(null,arguments).exponent(.5)}function Ea(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const JMe=Ea("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),eFe=Ea("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),tFe=Ea("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),nFe=Ea("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),rFe=Ea("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),iFe=Ea("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),oFe=Ea("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),sFe=Ea("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),aFe=Ea("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),lFe=Ea("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function pR(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const uFe="identity",ig="linear",$l="log",pv="pow",gv="sqrt",DC="symlog",id="time",od="utc",pa="sequential",Zg="diverging",og="quantile",OC="quantize",NC="threshold",gR="ordinal",bT="point",pee="band",mR="bin-ordinal",Cn="continuous",mv="discrete",yv="discretizing",Io="interpolating",yR="temporal";function cFe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function fFe(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function vR(){const e=J6().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=pR(f,a,l);let g=r[d-0];i=(h-g)/(p||1),s&&(i=Math.floor(i)),g+=(h-g-i*(f-a))*u,o=i*(1-a),s&&(g=Math.round(g),o=Math.round(o));const m=Ii(f).map(y=>g+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],m=+f[1],y,v,b;if(!(g!==g||m!==m)&&(m<g&&(b=g,g=m,m=b),!(m<h[0]||g>r[1-d])))return y=Math.max(0,ec(h,g)-1),v=g===m?y:ec(h,m)-1,g-h[y]>o+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return vR().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function gee(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return gee(t())},e}function dFe(){return gee(vR().paddingInner(1))}var hFe=Array.prototype.map;function pFe(e){return hFe.call(e,yr)}const gFe=Array.prototype.slice;function mee(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(ec(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=pFe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=gFe.call(r),n):t.slice()},n.tickFormat=function(r,i){return tee(e[0],He(e),r??10,i)},n.copy=function(){return mee().domain(n.domain()).range(n.range())},n}const Hw=new Map,yee=Symbol("vega_scale");function vee(e){return e[yee]=!0,e}function mFe(e){return e&&e[yee]===!0}function yFe(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?cFe(o):o.invertExtent?fFe(o):void 0),o.type=e,vee(o)};return r.metadata=ys(ae(n)),r}function Je(e,t,n){return arguments.length>1?(Hw.set(e,yFe(e,t,n)),this):bee(e)?Hw.get(e):void 0}Je(uFe,nee);Je(ig,oR,Cn);Je($l,iee,[Cn,$l]);Je(pv,uR,Cn);Je(gv,qMe,Cn);Je(DC,oee,Cn);Je(id,XMe,[Cn,yR]);Je(od,KMe,[Cn,yR]);Je(pa,fR,[Cn,Io]);Je(`${pa}-${ig}`,fR,[Cn,Io]);Je(`${pa}-${$l}`,uee,[Cn,Io,$l]);Je(`${pa}-${pv}`,dR,[Cn,Io]);Je(`${pa}-${gv}`,QMe,[Cn,Io]);Je(`${pa}-${DC}`,cee,[Cn,Io]);Je(`${Zg}-${ig}`,fee,[Cn,Io]);Je(`${Zg}-${$l}`,dee,[Cn,Io,$l]);Je(`${Zg}-${pv}`,hR,[Cn,Io]);Je(`${Zg}-${gv}`,ZMe,[Cn,Io]);Je(`${Zg}-${DC}`,hee,[Cn,Io]);Je(og,see,[yv,og]);Je(OC,aee,yv);Je(NC,lee,yv);Je(mR,mee,[mv,yv]);Je(gR,J6,mv);Je(pee,vR,mv);Je(bT,dFe,mv);function bee(e){return Hw.has(e)}function Id(e,t){const n=Hw.get(e);return n&&n.metadata[t]}function bR(e){return Id(e,Cn)}function sg(e){return Id(e,mv)}function xT(e){return Id(e,yv)}function xee(e){return Id(e,$l)}function vFe(e){return Id(e,yR)}function wee(e){return Id(e,Io)}function See(e){return Id(e,og)}const bFe=["clamp","base","constant","exponent"];function kee(e,t){const n=t[0],r=He(t)-n;return function(i){return e(n+i*r)}}function IC(e,t,n){return iR(xR(t||"rgb",n),e)}function Cee(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function _ee(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?_r(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=Je(o)().domain([t,n]).range([0,1]),bFe.forEach(a=>e[a]?s[a](e[a]()):0),s)}function xR(e,t){const n=DMe[xFe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function xFe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const wFe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},SFe={accent:eFe,category10:JMe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:tFe,observable10:nFe,paired:rFe,pastel1:iFe,pastel2:oFe,set1:sFe,set2:aFe,set3:lFe,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function Eee(e){if(G(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function $ee(e,t){for(const n in e)wR(n,t(e[n]))}const Fz={};$ee(SFe,Eee);$ee(wFe,e=>IC(Eee(e)));function wR(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Fz[e]=t,this):Fz[e]}const u2="symbol",kFe="discrete",CFe="gradient",_Fe=e=>G(e)?e.map(t=>String(t)):String(e),EFe=(e,t)=>e[1]-t[1],$Fe=(e,t)=>t[1]-e[1];function SR(e,t,n){let r;return Qe(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(rv(e.domain())/n||1)+1))),se(t)&&(r=t.step,t=t.interval),le(t)&&(t=e.type===id?Gg(t):e.type==od?Yg(t):q("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function Aee(e,t,n){let r=e.range(),i=r[0],o=He(r),s=EFe;if(i>o&&(r=o,o=i,i=r,s=$Fe),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],He(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function kR(e,t){return e.bins?Aee(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function Tee(e,t,n,r,i,o){const s=t.type;let a=_Fe;if(s===id||i===id)a=e.timeFormat(r);else if(s===od||i===od)a=e.utcFormat(r);else if(xee(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=Mee(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function Mee(e,t,n){const r=kR(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const wT={[og]:"quantiles",[OC]:"thresholds",[NC]:"domain"},Fee={[og]:"quantiles",[OC]:"domain"};function Pee(e,t){return e.bins?MFe(e.bins):e.type===$l?Mee(e,t,!0):wT[e.type]?TFe(e[wT[e.type]]()):kR(e,t)}function AFe(e,t,n){const r=t[Fee[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function TFe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function MFe(e){const t=e.slice(0,-1);return t.max=He(e),t}const FFe=e=>wT[e.type]||e.bins;function Ree(e,t,n,r,i,o,s){const a=Fee[t.type]&&o!==id&&o!==od?AFe(e,t,i):Tee(e,t,n,i,o,s);return r===u2&&FFe(t)?PFe(a):r===kFe?RFe(a):DFe(a)}const PFe=e=>(t,n,r)=>{const i=Pz(r[n+1],Pz(r.max,1/0)),o=Rz(t,e),s=Rz(i,e);return o&&s?o+" – "+s:s?"< "+s:"≥ "+o},Pz=(e,t)=>e??t,RFe=e=>(t,n)=>n?e(t):null,DFe=e=>t=>e(t),Rz=(e,t)=>Number.isFinite(e)?t(e):null;function OFe(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+He(t),o=i-r;if(e.type===NC){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function NFe(e,t,n,r){const i=r||t.type;return le(n)&&vFe(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===id?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===od?e.utcFormat("%A, %d %B %Y, %X UTC"):Ree(e,t,5,null,n,r,!0)}function Dee(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=NFe(e,t,n.format,n.formatType);if(xT(t.type)){const o=Pee(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(sg(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(He(o))}`}}let Oee=0;function IFe(){Oee=0}const qw="p_";function CR(e){return e&&e.gradient}function Nee(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?qw:"";return i||(i=e.id="gradient_"+Oee++,r==="radial"?(e.x1=Ls(e.x1,.5),e.y1=Ls(e.y1,.5),e.r1=Ls(e.r1,0),e.x2=Ls(e.x2,.5),e.y2=Ls(e.y2,.5),e.r2=Ls(e.r2,.5),o=qw):(e.x1=Ls(e.x1,0),e.y1=Ls(e.y1,0),e.x2=Ls(e.x2,1),e.y2=Ls(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Ls(e,t){return e??t}function Iee(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const Dz={basis:{curve:z4e},"basis-closed":{curve:B4e},"basis-open":{curve:j4e},bundle:{curve:U4e,tension:"beta",value:.85},cardinal:{curve:V4e,tension:"tension",value:0},"cardinal-open":{curve:H4e,tension:"tension",value:0},"cardinal-closed":{curve:W4e,tension:"tension",value:0},"catmull-rom":{curve:q4e,tension:"alpha",value:.5},"catmull-rom-closed":{curve:G4e,tension:"alpha",value:.5},"catmull-rom-open":{curve:Y4e,tension:"alpha",value:.5},linear:{curve:Y6},"linear-closed":{curve:X4e},monotone:{horizontal:Q4e,vertical:K4e},natural:{curve:Z4e},step:{curve:J4e},"step-after":{curve:tMe},"step-before":{curve:eMe}};function _R(e,t,n){var r=ce(Dz,e)&&Dz[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const LFe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},zFe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,BFe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,jFe=/^((\s+,?\s*)|(,\s*))/,UFe=/^[01]/;function ag(e){const t=[];return(e.match(zFe)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=LFe[o],a=VFe(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function VFe(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?UFe:BFe,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(jFe);l!==null&&(i+=l[0].length)}return r}const oc=Math.PI/180,WFe=1e-14,ff=Math.PI/2,ea=Math.PI*2,ah=Math.sqrt(3)/2;var i5={},o5={},Lee=[].join;function HFe(e,t,n,r,i,o,s,a,l){const u=Lee.call(arguments);if(i5[u])return i5[u];const c=s*oc,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(l-t)*.5,p=d*(l-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,y=f/n,v=-f/r,b=d/r,x=m*a+y*l,w=v*a+b*l,k=m*e+y*t,S=v*e+b*t;let _=1/((k-x)*(k-x)+(S-w)*(S-w))-.25;_<0&&(_=0);let $=Math.sqrt(_);o==i&&($=-$);const A=.5*(x+k)-$*(S-w),N=.5*(w+S)+$*(k-x),M=Math.atan2(w-N,x-A);let P=Math.atan2(S-N,k-A)-M;P<0&&o===1?P+=ea:P>0&&o===0&&(P-=ea);const D=Math.ceil(Math.abs(P/(ff+.001))),I=[];for(let O=0;O<D;++O){const j=M+O*P/D,Y=M+(O+1)*P/D;I[O]=[A,N,j,Y,n,r,f,d]}return i5[u]=I}function qFe(e){const t=Lee.call(e);if(o5[t])return o5[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const c=u*s,f=-l*a,d=l*s,h=u*a,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(v*.5),x=8/3*b*b/Math.sin(v),w=n+p-x*g,k=r+g+x*p,S=n+m,C=r+y,_=S+x*y,$=C-x*m;return o5[t]=[c*w+f*k,d*w+h*k,c*_+f*$,d*_+h*$,c*S+f*C,d*S+h*C]}const so=["l",0,0,0,0,0,0,0];function GFe(e,t,n){const r=so[0]=e[0];if(r==="a"||r==="A")so[1]=t*e[1],so[2]=n*e[2],so[3]=e[3],so[4]=e[4],so[5]=e[5],so[6]=t*e[6],so[7]=n*e[7];else if(r==="h"||r==="H")so[1]=t*e[1];else if(r==="v"||r==="V")so[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)so[i]=(i%2==1?t:n)*e[i];return so}function l1(e,t,n,r,i,o){var s,a=null,l=0,u=0,c=0,f=0,d,h,p,g,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(s=t[v],(i!==1||o!==1)&&(s=GFe(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"c":d=l+s[5],h=u+s[6],c=l+s[3],f=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=s[5],u=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+s[3],h=u+s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+s[1]+n,u+s[2]+r,d+n,h+r),c=l+s[1],f=u+s[2],l=d,u=h;break;case"S":d=s[3],h=s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"q":d=l+s[3],h=u+s[4],c=l+s[1],f=u+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"t":d=l+s[1],h=u+s[2],a[0].match(/[QqTt]/)===null?(c=l,f=u):a[0]==="t"?(c=2*l-p,f=2*u-g):a[0]==="q"&&(c=2*l-c,f=2*u-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+s[1],f=u+s[2];break;case"T":d=s[1],h=s[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":Oz(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":Oz(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=m,u=y,e.closePath();break}a=s}}function Oz(e,t,n,r){const i=HFe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=qFe(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const Nz=.5773502691896257,Iz={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ea)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=ah*n,i=r-n*Nz,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=ah*n,i=r-n*Nz;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ah*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ah*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ah*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ah*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function zee(e){return ce(Iz,e)?Iz[e]:YFe(e)}var s5={};function YFe(e){if(!ce(s5,e)){const t=ag(e);s5[e]={draw:function(n,r){l1(n,t,0,0,Math.sqrt(r)/2)}}}return s5[e]}const Yl=.448084975506;function XFe(e){return e.x}function KFe(e){return e.y}function QFe(e){return e.width}function ZFe(e){return e.height}function za(e){return typeof e=="function"?e:()=>+e}function Xb(e,t,n){return Math.max(t,Math.min(e,n))}function Bee(){var e=XFe,t=KFe,n=QFe,r=ZFe,i=za(0),o=i,s=i,a=i,l=null;function u(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),v=Math.min(m,y)/2,b=Xb(+i.call(this,c),0,v),x=Xb(+o.call(this,c),0,v),w=Xb(+s.call(this,c),0,v),k=Xb(+a.call(this,c),0,v);if(l||(l=h=CC()),b<=0&&x<=0&&w<=0&&k<=0)l.rect(p,g,m,y);else{var S=p+m,C=g+y;l.moveTo(p+b,g),l.lineTo(S-x,g),l.bezierCurveTo(S-Yl*x,g,S,g+Yl*x,S,g+x),l.lineTo(S,C-k),l.bezierCurveTo(S,C-Yl*k,S-Yl*k,C,S-k,C),l.lineTo(p+w,C),l.bezierCurveTo(p+Yl*w,C,p,C-Yl*w,p,C-w),l.lineTo(p,g+b),l.bezierCurveTo(p,g+Yl*b,p+Yl*b,g,p+b,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=za(c),u):e},u.y=function(c){return arguments.length?(t=za(c),u):t},u.width=function(c){return arguments.length?(n=za(c),u):n},u.height=function(c){return arguments.length?(r=za(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=za(c),o=f!=null?za(f):i,a=d!=null?za(d):i,s=h!=null?za(h):o,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function jee(){var e,t,n,r,i=null,o,s,a,l;function u(f,d,h){const p=h/2;if(o){var g=a-d,m=f-s;if(g||m){var y=Math.hypot(g,m),v=(g/=y)*l,b=(m/=y)*l,x=Math.atan2(m,g);i.moveTo(s-v,a-b),i.lineTo(f-g*p,d-m*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(s+v,a+b),i.arc(s,a,l,x,x+Math.PI)}else i.arc(f,d,p,0,ea);i.closePath()}else o=1;s=f,a=d,l=p}function c(f){var d,h=f.length,p,g=!1,m;for(i==null&&(i=m=CC()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(o=0),g&&u(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function vv(e,t){return e??t}const bv=e=>e.x||0,xv=e=>e.y||0,JFe=e=>e.width||0,ePe=e=>e.height||0,tPe=e=>(e.x||0)+(e.width||0),nPe=e=>(e.y||0)+(e.height||0),rPe=e=>e.startAngle||0,iPe=e=>e.endAngle||0,oPe=e=>e.padAngle||0,sPe=e=>e.innerRadius||0,aPe=e=>e.outerRadius||0,lPe=e=>e.cornerRadius||0,uPe=e=>vv(e.cornerRadiusTopLeft,e.cornerRadius)||0,cPe=e=>vv(e.cornerRadiusTopRight,e.cornerRadius)||0,fPe=e=>vv(e.cornerRadiusBottomRight,e.cornerRadius)||0,dPe=e=>vv(e.cornerRadiusBottomLeft,e.cornerRadius)||0,hPe=e=>vv(e.size,64),pPe=e=>e.size||1,LC=e=>e.defined!==!1,gPe=e=>zee(e.shape||"circle"),mPe=N4e().startAngle(rPe).endAngle(iPe).padAngle(oPe).innerRadius(sPe).outerRadius(aPe).cornerRadius(lPe),yPe=cJ().x(bv).y1(xv).y0(nPe).defined(LC),vPe=cJ().y(xv).x1(bv).x0(tPe).defined(LC),bPe=uJ().x(bv).y(xv).defined(LC),xPe=Bee().x(bv).y(xv).width(JFe).height(ePe).cornerRadius(uPe,cPe,fPe,dPe),wPe=L4e().type(gPe).size(hPe),SPe=jee().x(bv).y(xv).defined(LC).size(pPe);function ER(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function kPe(e,t){return mPe.context(e)(t)}function CPe(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?vPe:yPe).curve(_R(r,n.orient,n.tension)).context(e)(t)}function _Pe(e,t){const n=t[0],r=n.interpolate||"linear";return bPe.curve(_R(r,n.orient,n.tension)).context(e)(t)}function Jg(e,t,n,r){return xPe.context(e)(t,n,r)}function EPe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function $Pe(e,t){return wPe.context(e)(t)}function APe(e,t){return SPe.context(e)(t)}var Uee=1;function Vee(){Uee=1}function $R(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+Uee++),s=i.clipping[o]||(i.clipping[o]={id:o});return Oe(r)?s.path=r(null):ER(n)?s.path=Jg(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function hn(e){this.clear(),e&&this.union(e)}hn.prototype={clone(){return new hn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*s+u,l*r+a*s+c,a*o-l*i+u,l*o+a*i+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function zC(e){this.mark=e,this.bounds=this.bounds||new hn}function BC(e){zC.call(this,e),this.items=this.items||[]}ne(BC,zC);class Wee{constructor(t){this._pending=0,this._loader=t||dC()}pending(){return this._pending}sanitizeURL(t){const n=this;return Lz(n),n._loader.sanitize(t,{context:"href"}).then(r=>(zm(n),r)).catch(()=>(zm(n),null))}loadImage(t){const n=this,r=nMe();return Lz(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=ce(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>zm(n),s.onerror=()=>zm(n),s.src=o,s}).catch(i=>(zm(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Lz(e){e._pending+=1}function zm(e){e._pending-=1}function Dl(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?TPe(t,r):0))}return e}function TPe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const MPe=ea-1e-8;let jC,c2,f2,kf,ST,d2,kT,CT;const Cu=(e,t)=>jC.add(e,t),h2=(e,t)=>Cu(c2=e,f2=t),zz=e=>Cu(e,jC.y1),Bz=e=>Cu(jC.x1,e),df=(e,t)=>ST*e+kT*t,hf=(e,t)=>d2*e+CT*t,a5=(e,t)=>Cu(df(e,t),hf(e,t)),l5=(e,t)=>h2(df(e,t),hf(e,t));function wv(e,t){return jC=e,t?(kf=t*oc,ST=CT=Math.cos(kf),d2=Math.sin(kf),kT=-d2):(ST=CT=1,kf=d2=kT=0),FPe}const FPe={beginPath(){},closePath(){},moveTo:l5,lineTo:l5,rect(e,t,n,r){kf?(a5(e+n,t),a5(e+n,t+r),a5(e,t+r),l5(e,t)):(Cu(e+n,t+r),h2(e,t))},quadraticCurveTo(e,t,n,r){const i=df(e,t),o=hf(e,t),s=df(n,r),a=hf(n,r);jz(c2,i,s,zz),jz(f2,o,a,Bz),h2(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=df(e,t),a=hf(e,t),l=df(n,r),u=hf(n,r),c=df(i,o),f=hf(i,o);Uz(c2,s,l,c,zz),Uz(f2,a,u,f,Bz),h2(c,f)},arc(e,t,n,r,i,o){if(r+=kf,i+=kf,c2=n*Math.cos(i)+e,f2=n*Math.sin(i)+t,Math.abs(i-r)>MPe)Cu(e-n,t-n),Cu(e+n,t+n);else{const s=u=>Cu(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%ea,r<0&&(r+=ea),i=i%ea,i<0&&(i+=ea),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=ea,a=r-r%ff,l=0;l<4&&a>i;++l,a-=ff)s(a);else for(a=r-r%ff+ff,l=0;l<4&&a<i;++l,a=a+ff)s(a)}}};function jz(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Uz(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(o)>WFe?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&i(Vz(l,e,t,n,r)),0<u&&u<1&&i(Vz(u,e,t,n,r))}function Vz(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var Gu=(Gu=qu(1,1))?Gu.getContext("2d"):null;const _T=new hn;function AR(e){return function(t,n){if(!Gu)return!0;e(Gu,t),_T.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=_T;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(Gu.isPointInPath(l,a))return!0;return!1}}function TR(e,t){return t.contains(e.x||0,e.y||0)}function Hee(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(_T.set(n,r,n+i,r+o))}function qee(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return qh(t,n,r,i,o)}function qh(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,p,g,m;for(m=0;m<4;++m){if(m===0&&(h=-u,p=-(o-t)),m===1&&(h=u,p=a-t),m===2&&(h=-c,p=-(s-n)),m===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function lg(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Wo(e,t){return e??t}function Wz(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function PPe(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Wo(t.x1,.5)*r,n.y1+Wo(t.y1,.5)*i,Math.max(r,i)*Wo(t.r1,0),n.x1+Wo(t.x2,.5)*r,n.y1+Wo(t.y2,.5)*i,Math.max(r,i)*Wo(t.r2,.5));else{const s=Wo(t.x1,0),a=Wo(t.y1,0),l=Wo(t.x2,1),u=Wo(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=qu(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Wz(f.createLinearGradient(s,a,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Wz(o,t.stops)}function Gee(e,t,n){return CR(n)?PPe(e,n,t.bounds):n}function Gw(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Gee(e,t,t.fill),!0):!1}var RPe=[];function ug(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Gee(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||RPe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function DPe(e,t){return e.zindex-t.zindex||e.index-t.index}function MR(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(DPe)}function ws(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=MR(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function Yw(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=MR(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function FR(e){return function(t,n,r){ws(n,i=>{(!r||r.intersects(i.bounds))&&Yee(e,t,i,i)})}}function OPe(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&Yee(e,t,n.items[0],n.items)}}function Yee(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(lg(t,n),n.fill&&Gw(t,n,i)&&t.fill(),n.stroke&&ug(t,n,i)&&t.stroke()))}function UC(e){return e=e||Fo,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,Yw(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function Sv(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,u,c;return l&&(u=s.strokeWidth,c=s.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function PR(e){return UC(Sv(e))}function Vf(e,t){return"translate("+e+","+t+")"}function RR(e){return"rotate("+e+")"}function NPe(e,t){return"scale("+e+","+t+")"}function Xee(e){return Vf(e.x||0,e.y||0)}function IPe(e){return Vf(e.x||0,e.y||0)+(e.angle?" "+RR(e.angle):"")}function LPe(e){return Vf(e.x||0,e.y||0)+(e.angle?" "+RR(e.angle):"")+(e.scaleX||e.scaleY?" "+NPe(e.scaleX||1,e.scaleY||1):"")}function DR(e,t,n){function r(s,a){s("transform",IPe(a)),s("d",t(null,a))}function i(s,a){return t(wv(s,a.angle),a),Dl(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=oc),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:FR(o),pick:PR(o),isect:n||AR(o)}}var zPe=DR("arc",kPe);function BPe(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function jPe(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function UPe(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function OR(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(wv(l),c),Dl(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=Sv(o);function a(l,u,c,f,d,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,s(l,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:OPe(o),pick:a,isect:TR,tip:n}}var VPe=OR("area",CPe,BPe);function WPe(e,t){var n=t.clip;e.save(),Oe(n)?(e.beginPath(),n(e),e.clip()):Kee(e,t.group)}function Kee(e,t){e.beginPath(),ER(t)?Jg(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Qee(e){const t=Wo(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function HPe(e,t){e("transform",Xee(t))}function Zee(e,t){const n=Qee(t);e("d",Jg(null,t,n,n))}function qPe(e,t){e("class","background"),e("aria-hidden",!0),Zee(e,t)}function GPe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Zee(e,t):e("d","")}function YPe(e,t,n){const r=t.clip?$R(n,t,t):null;e("clip-path",r)}function XPe(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Dl(e,t),e.translate(t.x||0,t.y||0)}function u1(e,t,n,r){const i=Qee(t);e.beginPath(),Jg(e,t,(n||0)+i,(r||0)+i)}const KPe=Sv(u1),QPe=Sv(u1,!1),ZPe=Sv(u1,!0);function JPe(e,t,n,r){ws(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(u1(e,i,o,s),lg(e,i),i.fill&&Gw(e,i,l)&&e.fill(),i.stroke&&!a&&ug(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&Kee(e,i),n&&n.translate(-o,-s),ws(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(u1(e,i,o,s),lg(e,i),ug(e,i,l)&&e.stroke())})}function e6e(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return Yw(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,o))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),p=f+(l.height||0),g=l.clip;if(g&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,g&&ER(l)&&!ZPe(e,l,s,a))return e.restore(),null;const m=l.strokeForeground,y=t.interactive!==!1;return y&&m&&l.stroke&&QPe(e,l,s,a)?(e.restore(),l):(u=Yw(l,v=>t6e(v,c,f)?this.pick(v,n,r,c,f):null),!u&&y&&(l.fill||!m&&l.stroke)&&KPe(e,l,s,a)&&(u=l),e.restore(),u||null)})}function t6e(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var n6e={type:"group",tag:"g",nested:!1,attr:HPe,bound:XPe,draw:JPe,pick:e6e,isect:Hee,content:YPe,background:qPe,foreground:GPe},c1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function NR(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function IR(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function LR(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function VC(e,t){return e==="center"?t/2:e==="right"?t:0}function WC(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function r6e(e,t,n){const r=NR(t,n),i=IR(t,r),o=LR(t,r),s=(t.x||0)-VC(t.align,i),a=(t.y||0)-WC(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,c1["xmlns:xlink"],"xlink:href"),e("transform",Vf(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function i6e(e,t){const n=t.image,r=IR(t,n),i=LR(t,n),o=(t.x||0)-VC(t.align,r),s=(t.y||0)-WC(t.baseline,i);return e.set(o,s,o+r,s+i)}function o6e(e,t,n){ws(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=NR(r,this);let o=IR(r,i),s=LR(r,i);if(o===0||s===0)return;let a=(r.x||0)-VC(r.align,o),l=(r.y||0)-WC(r.baseline,s),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,l+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(lg(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var s6e={type:"image",tag:"image",nested:!1,attr:r6e,bound:i6e,draw:o6e,pick:UC(),isect:Fo,get:NR,xOffset:VC,yOffset:WC},a6e=OR("line",_Pe,jPe);function l6e(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",LPe(t)),e("d",t.path)}function p2(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*oc,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=ag(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),l1(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):l1(e,l,r,i,o,s)}function u6e(e,t){return p2(wv(e,t.angle),t)?e.set(0,0,0,0):Dl(e,t,!0)}var c6e={type:"path",tag:"path",nested:!1,attr:l6e,bound:u6e,draw:FR(p2),pick:PR(p2),isect:AR(p2)};function f6e(e,t){e("d",Jg(null,t))}function d6e(e,t){var n,r;return Dl(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Hz(e,t){e.beginPath(),Jg(e,t)}var h6e={type:"rect",tag:"path",nested:!1,attr:f6e,bound:d6e,draw:FR(Hz),pick:PR(Hz),isect:Hee};function p6e(e,t){e("transform",Xee(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function g6e(e,t){var n,r;return Dl(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function Jee(e,t,n){var r,i,o,s;return t.stroke&&ug(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function m6e(e,t,n){ws(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Jee(e,r,i)&&(lg(e,r),e.stroke())}})}function y6e(e,t,n,r){return e.isPointInStroke?Jee(e,t,1)&&e.isPointInStroke(n,r):!1}var v6e={type:"rule",tag:"line",nested:!1,attr:p6e,bound:g6e,draw:m6e,pick:UC(y6e),isect:qee},b6e=DR("shape",EPe),x6e=DR("symbol",$Pe,TR);const qz=tQ();var Vi={height:$a,measureWidth:zR,estimateWidth:Xw,width:Xw,canvas:ete};ete(!0);function ete(e){Vi.width=e&&Gu?zR:Xw}function Xw(e,t){return tte(ac(e,t),$a(e))}function tte(e,t){return~~(.8*e.length*t)}function zR(e,t){return $a(e)<=0||!(t=ac(e,t))?0:nte(t,HC(e))}function nte(e,t){const n=`(${t}) ${e}`;let r=qz.get(n);return r===void 0&&(Gu.font=t,r=Gu.measureText(e).width,qz.set(n,r)),r}function $a(e){return e.fontSize!=null?+e.fontSize||0:11}function sc(e){return e.lineHeight!=null?e.lineHeight:$a(e)+2}function w6e(e){return G(e)?e.length>1?e:e[0]:e}function kv(e){return w6e(e.lineBreak&&e.text&&!G(e.text)?e.text.split(e.lineBreak):e.text)}function BR(e){const t=kv(e);return(G(t)?t.length-1:0)*sc(e)}function ac(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?k6e(e,n):n}function S6e(e){if(Vi.width===zR){const t=HC(e);return n=>nte(n,t)}else if(Vi.width===Xw){const t=$a(e);return n=>tte(n,t)}else return t=>Vi.width(e,t)}function k6e(e,t){var n=+e.limit,r=S6e(e);if(r(t)<n)return t;var i=e.ellipsis||"…",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function Cv(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function HC(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+$a(e)+"px "+Cv(e,t)}function jR(e){var t=e.baseline,n=$a(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*sc(e):t==="line-bottom"?.29*n-.5*sc(e):0)}const C6e={left:"start",center:"middle",right:"end"},uy=new hn;function qC(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-ff,t+=r*Math.cos(i),n+=r*Math.sin(i)),uy.x1=t,uy.y1=n,uy}function _6e(e,t){var n=t.dx||0,r=(t.dy||0)+jR(t),i=qC(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",C6e[t.align]||"start"),a?(l=Vf(o,s)+" "+RR(a),(n||r)&&(l+=" "+Vf(n,r))):l=Vf(o+n,s+r),e("transform",l)}function UR(e,t,n){var r=Vi.height(t),i=t.align,o=qC(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+jR(t)-Math.round(.8*r),c=kv(t),f;if(G(c)?(r+=sc(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Vi.width(t,h)),0)):f=Vi.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=s,u+=a,l+f,u+r),t.angle&&!n)e.rotate(t.angle*oc,s,a);else if(n===2)return e.rotatedPoints(t.angle*oc,s,a);return e}function E6e(e,t,n){ws(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=HC(r),e.textAlign=r.align||"left",o=qC(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*oc),s=a=0),s+=r.dx||0,a+=(r.dy||0)+jR(r),c=kv(r),lg(e,r),G(c))for(u=sc(r),l=0;l<c.length;++l)f=ac(r,c[l]),r.fill&&Gw(e,r,i)&&e.fillText(f,s,a),r.stroke&&ug(e,r,i)&&e.strokeText(f,s,a),a+=u;else f=ac(r,c),r.fill&&Gw(e,r,i)&&e.fillText(f,s,a),r.stroke&&ug(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function $6e(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=qC(t),a=s.x1,l=s.y1,u=UR(uy,t,1),c=-t.angle*oc,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*l),p=d*i+f*o+(l-d*a-f*l);return u.contains(h,p)}function A6e(e,t){const n=UR(uy,e,2);return qh(t,n[0],n[1],n[2],n[3])||qh(t,n[0],n[1],n[4],n[5])||qh(t,n[4],n[5],n[6],n[7])||qh(t,n[2],n[3],n[6],n[7])}var T6e={type:"text",tag:"text",nested:!1,attr:_6e,bound:UR,draw:E6e,pick:UC($6e),isect:A6e},M6e=OR("trail",APe,UPe),Ki={arc:zPe,area:VPe,group:n6e,image:s6e,line:a6e,path:c6e,rect:h6e,rule:v6e,shape:b6e,symbol:x6e,text:T6e,trail:M6e};function ET(e,t,n){var r=Ki[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new hn),e,n)}var Gz={mark:null};function rte(e,t,n){var r=Ki[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,c;if(r.nested)return s?u=o[0]:(Gz.mark=e,u=Gz),c=ET(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new hn,s)for(a=0,l=o.length;a<l;++a)t.union(ET(o[a],i,n));return e.bounds=t}const F6e=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function ite(e,t){return JSON.stringify(e,F6e,t)}function ote(e){const t=typeof e=="string"?JSON.parse(e):e;return ste(t)}function ste(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&ste(n[i]);return t&&rte(e),e}class ate{constructor(t){arguments.length?this.root=ote(t):(this.root=Yz({marktype:"group",name:"root",role:"frame"}),this.root.items=[new BC(this.root)])}toJSON(t){return ite(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Yz(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Yz(e,t){const n={bounds:new hn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function _u(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function VR(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function yn(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=_u(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function yo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function lte(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function GC(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function P6e(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Ki[i.marktype]).tip){for(s=GC(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let WR=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||dC(),this._tooltip=n||R6e}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=_u(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=P6e(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function R6e(e,t,n,r){e.element().setAttribute("title",r||"")}class _v{constructor(t){this._el=null,this._bgcolor=null,this._loader=new Wee(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const D6e="keydown",O6e="keypress",N6e="keyup",ute="dragenter",g2="dragleave",cte="dragover",$T="pointerdown",I6e="pointerup",Kw="pointermove",m2="pointerout",fte="pointerover",AT="mousedown",L6e="mouseup",dte="mousemove",Qw="mouseout",hte="mouseover",Zw="click",z6e="dblclick",B6e="wheel",pte="mousewheel",Jw="touchstart",eS="touchmove",tS="touchend",j6e=[D6e,O6e,N6e,ute,g2,cte,$T,I6e,Kw,m2,fte,AT,L6e,dte,Qw,hte,Zw,z6e,B6e,pte,Jw,eS,tS],TT=Kw,cy=Qw,MT=Zw;class Ev extends WR{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=j6e,this.pointermove=Kz([Kw,dte],[fte,hte],[m2,Qw]),this.dragover=Kz([cte],[ute],[g2]),this.pointerout=Qz([m2,Qw]),this.dragleave=Qz([g2])}initialize(t,n,r){return this._canvas=t&&VR(t,"canvas"),[Zw,AT,$T,Kw,m2,g2].forEach(i=>Xz(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(pte,t)}pointerdown(t){this._down=this._active,this.fire($T,t)}mousedown(t){this._down=this._active,this.fire(AT,t)}click(t){this._down===this._active&&(this.fire(Zw,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Jw,t,!0)}touchmove(t){this.fire(eS,t,!0)}touchend(t){this.fire(tS,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===MT&&i&&i.href?this.handleHref(n,i,i.href):(t===TT||t===cy)&&this.handleTooltip(n,i,t!==cy),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Xz(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=GC(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return Ki[t.marktype].pick.call(this,s,t,n,r,i,o)}}const U6e=e=>e===Jw||e===eS||e===tS?[Jw,eS,tS]:[e];function Xz(e,t){U6e(t).forEach(n=>V6e(e,n))}function V6e(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function C0(e,t,n){t.forEach(r=>e.fire(r,n))}function Kz(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?C0(this,e,r):((!i||!i.exit)&&C0(this,n,r),this._active=o,C0(this,t,r),C0(this,e,r))}}function Qz(e){return function(t){C0(this,e,t),this._active=null}}function W6e(){return typeof window<"u"&&window.devicePixelRatio||1}function H6e(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?W6e():i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class nS extends _v{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new hn,this._tempb=new hn}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:qu(1,1,this._options.type),t&&this._canvas&&(yo(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)H6e(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||q("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=q6e(i,o,s);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):G6e(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=Ki[n.marktype];n.clip&&WPe(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const q6e=(e,t,n)=>new hn().set(0,0,t,n).translate(-e[0],-e[1]);function G6e(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class gte extends WR{constructor(t,n){super(t,n);const r=this;r._hrefHandler=u5(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=u5(r,(i,o)=>{r.handleTooltip(i,o,i.type!==cy)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(MT,this._hrefHandler),i.removeEventListener(TT,this._tooltipHandler),i.removeEventListener(cy,this._tooltipHandler)),this._svg=i=t&&VR(t,"svg"),i&&(i.addEventListener(MT,this._hrefHandler),i.addEventListener(TT,this._tooltipHandler),i.addEventListener(cy,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:u5(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const u5=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},mte="aria-hidden",HR="aria-label",qR="role",GR="aria-roledescription",yte="graphics-object",YR="graphics-symbol",vte=(e,t,n)=>({[qR]:e,[GR]:t,[HR]:n||void 0}),Y6e=ys(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Zz={axis:{desc:"axis",caption:Q6e},legend:{desc:"legend",caption:Z6e},"title-text":{desc:"title",caption:e=>`Title text '${eB(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${eB(e)}'`}},Jz={ariaRole:qR,ariaRoleDescription:GR,description:HR};function bte(e,t){const n=t.aria===!1;if(e(mte,n||void 0),n||t.description==null)for(const r in Jz)e(Jz[r],void 0);else{const r=t.mark.marktype;e(HR,t.description),e(qR,t.ariaRole||(r==="group"?yte:YR)),e(GR,t.ariaRoleDescription||`${r} mark`)}}function xte(e){return e.aria===!1?{[mte]:!0}:Y6e[e.role]?null:Zz[e.role]?K6e(e,Zz[e.role]):X6e(e)}function X6e(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return vte(n?yte:YR,`${t} mark container`,e.description)}function K6e(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return vte(t.role||YR,t.desc,n.description||r(n))}catch{return null}}function eB(e){return ae(e.text).join(" ")}function Q6e(e){const t=e.datum,n=e.orient,r=t.title?wte(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${sg(a)?"discrete":a} scale with ${Dee(s,o,e)}`}function Z6e(e){const t=e.datum,n=t.title?wte(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return eRe(r)+(n?` titled '${n}'`:"")+` for ${J6e(o)} with ${Dee(l,a,e)}`}function wte(e){try{return ae(He(e.items).items[0].text).join(" ")}catch{return null}}function J6e(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+He(e)}function eRe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const Ste=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),tRe=e=>Ste(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function XR(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${tRe(u)}"`),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=Ste(l),a),toString:()=>e};return a}const kte=e=>Cte(XR(),e)+"";function Cte(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):Cte(e,r)}return e.close()}const rS={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},iS={blend:"mix-blend-mode"},_te={fill:"none","stroke-miterlimit":10},Bm=0,tB="http://www.w3.org/2000/xmlns/",mn=c1.xmlns;class KR extends _v{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=yn(t,0,"svg",mn),this._svg.setAttributeNS(tB,"xmlns",mn),this._svg.setAttributeNS(tB,"xmlns:xlink",c1["xmlns:xlink"]),this._svg.setAttribute("version",c1.version),this._svg.setAttribute("class","marks"),yo(t,1),this._root=yn(this._svg,Bm,"g",mn),Eu(this._root,_te),yo(this._svg,Bm+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Eu(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=yn(t,Bm,"rect",mn),Eu(r,{width:this._width,height:this._height,fill:n}));const i=kte(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),yo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=Ki[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,nB(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,nB(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=Ki[s],l=n.interactive===!1?"none":null,u=a.tag==="g",c=rB(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return yo(c,0),n._svg;c.setAttribute("class",lte(n));const f=xte(n);for(const g in f)Pr(c,g,f[g]);u||Pr(c,"pointer-events",l),Pr(c,"clip-path",n.clip?$R(this,n,n.group):null);let d=null,h=0;const p=g=>{const m=this.isDirty(g),y=rB(g,c,d,a.tag,o);m&&(this._update(a,y,g),u&&iRe(this,y,g,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):ws(n,p),yo(c,h),c}_update(t,n,r){sl=n,hr=n.__values__,bte(fy,r),t.attr(fy,r,this);const i=sRe[t.type];i&&i.call(this,t,n,r),sl&&this.style(sl,r)}style(t,n){if(n!=null){for(const r in rS){let i=r==="font"?Cv(n):n[r];if(i===hr[r])continue;const o=rS[r];i==null?t.removeAttribute(o):(CR(i)&&(i=Nee(i,this._defs.gradient,Ete())),t.setAttribute(o,i+"")),hr[r]=i}for(const r in iS)y2(t,iS[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=yn(t,Bm+1,"defs",mn)),i=nRe(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=yn(t,Bm+1,"defs",mn)),i=rRe(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):yo(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function nB(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function nRe(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=yn(e,n++,"pattern",mn);Eu(s,{id:qw+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=yn(s,0,"rect",mn),Eu(s,{width:1,height:1,fill:`url(${Ete()}#${t.id})`}),e=yn(e,n++,"radialGradient",mn),Eu(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=yn(e,n++,"linearGradient",mn),Eu(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=yn(e,r,"stop",mn),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return yo(e,r),n}function rRe(e,t,n){let r;return e=yn(e,n,"clipPath",mn),e.setAttribute("id",t.id),t.path?(r=yn(e,0,"path",mn),r.setAttribute("d",t.path)):(r=yn(e,0,"rect",mn),Eu(r,{x:0,y:0,width:t.width,height:t.height})),yo(e,1),n+1}function iRe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;ws(n,s=>{i=e.mark(t,s,i,r),++o}),yo(t,1+o)}function rB(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=_u(s,r,mn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=_u(s,"path",mn);o.appendChild(a),a.__data__=e;const l=_u(s,"g",mn);o.appendChild(l),l.__data__=e;const u=_u(s,"path",mn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||oRe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function oRe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let sl=null,hr=null;const sRe={group(e,t,n){const r=sl=t.childNodes[2];hr=r.__values__,e.foreground(fy,n,this),hr=t.__values__,sl=t.childNodes[1],e.content(fy,n,this);const i=sl=t.childNodes[0];e.background(fy,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==hr.events&&(Pr(r,"pointer-events",o),Pr(i,"pointer-events",o),hr.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Pr(r,"display",null),this.style(i,n),Pr(i,"stroke",null),s&&(n.fill=null),hr=r.__values__,this.style(r,n),s&&(n.fill=s),sl=null}else Pr(r,"display","none")},image(e,t,n){n.smooth===!1?(y2(t,"image-rendering","optimizeSpeed"),y2(t,"image-rendering","pixelated")):y2(t,"image-rendering",null)},text(e,t,n){const r=kv(n);let i,o,s,a;G(r)?(o=r.map(l=>ac(n,l)),i=o.join(`
`),i!==hr.text&&(yo(t,0),s=t.ownerDocument,a=sc(n),o.forEach((l,u)=>{const c=_u(s,"tspan",mn);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),hr.text=i)):(o=ac(n,r),o!==hr.text&&(t.textContent=o,hr.text=o)),Pr(t,"font-family",Cv(n)),Pr(t,"font-size",$a(n)+"px"),Pr(t,"font-style",n.fontStyle),Pr(t,"font-variant",n.fontVariant),Pr(t,"font-weight",n.fontWeight)}};function fy(e,t,n){t!==hr[e]&&(n?aRe(sl,e,t,n):Pr(sl,e,t),hr[e]=t)}function y2(e,t,n){n!==hr[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),hr[t]=n)}function Eu(e,t){for(const n in t)Pr(e,n,t[n])}function Pr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function aRe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Ete(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class $te extends _v{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=XR();n.open("svg",De({},c1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",_te,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Ki[n.marktype],i=r.tag,o=[bte,r.attr];t.open("g",{class:lte(n),"clip-path":n.clip?$R(this,n,n.group):null},xte(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const u=kv(a);if(G(u)){const c={x:0,dy:sc(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(ac(a,u[f])).close()}else t.text(ac(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),ws(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):ws(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,u,c)=>{o[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&lRe(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:qw+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function lRe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Cv(t),e["font-size"]=$a(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in rS){let a=t[s];const l=rS[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(CR(a)&&(a=Nee(a,i.gradient,"")),e[l]=a)}for(const s in iS){const a=t[s];a!=null&&(o=o||[],o.push(`${iS[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const Qo={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function uRe(e){Qo.svgMarkTypes=e.svgMarkTypes??["text"],Qo.svgOnTop=e.svgOnTop??!0,Qo.debug=e.debug??!1}class FT extends _v{constructor(t){super(t),this._svgRenderer=new KR(t),this._canvasRenderer=new nS(t)}initialize(t,n,r,i,o){this._root_el=yn(t,0,"div");const s=yn(this._root_el,0,"div"),a=yn(this._root_el,1,"div");return this._root_el.style.position="relative",Qo.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Qo.svgOnTop?a:s,this._canvasEl=Qo.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return Qo.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!Qo.svgMarkTypes.includes(o));this._svgRenderer.render(t,Qo.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Qo.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class Ate extends Ev{constructor(t,n){super(t,n)}initialize(t,n,r){const i=yn(yn(t,0,"div"),Qo.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const Tte="canvas",Mte="hybrid",Fte="png",Pte="svg",Rte="none",$u={Canvas:Tte,PNG:Fte,SVG:Pte,Hybrid:Mte,None:Rte},sd={};sd[Tte]=sd[Fte]={renderer:nS,headless:nS,handler:Ev};sd[Pte]={renderer:KR,headless:$te,handler:gte};sd[Mte]={renderer:FT,headless:FT,handler:Ate};sd[Rte]={};function YC(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(sd[e]=t,this):sd[e]}function Dte(e,t,n){const r=[],i=new hn().union(t),o=e.marktype;return o?Ote(e,i,n,r):o==="group"?Nte(e,i,n,r):q("Intersect scene must be mark node or group item.")}function Ote(e,t,n,r){if(cRe(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)Nte(i[a],t,n,r);else for(const l=Ki[o].isect;a<s;++a){const u=i[a];Ite(u,t,l)&&r.push(u)}}return r}function cRe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Nte(e,t,n,r){n&&n(e.mark)&&Ite(e,t,Ki.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)Ote(i[l],t,n,r);t.translate(s,a)}return r}function Ite(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const c5=new hn;function Lte(e){const t=e.clip;if(Oe(t))t(wv(c5.clear()));else if(t)c5.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(c5)}const fRe=1e-9;function QR(e,t,n){return e===t?!0:n==="path"?zte(e,t):e instanceof Date&&t instanceof Date?+e==+t:Qe(e)&&Qe(t)?Math.abs(e-t)<=fRe:!e||!t||!se(e)&&!se(t)?e==t:dRe(e,t)}function zte(e,t){return QR(ag(e),ag(t))}function dRe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!QR(e[i],t[i],i))return!1;return typeof e==typeof t}function hRe(){Vee(),IFe()}const cg="top",os="left",ls="right",lc="bottom",pRe="top-left",gRe="top-right",mRe="bottom-left",yRe="bottom-right",ZR="start",PT="middle",Or="end",vRe="x",bRe="y",XC="group",JR="axis",eD="title",xRe="frame",wRe="scope",tD="legend",Bte="row-header",jte="row-footer",Ute="row-title",Vte="column-header",Wte="column-footer",Hte="column-title",SRe="padding",kRe="symbol",qte="fit",Gte="fit-x",Yte="fit-y",CRe="pad",nD="none",Kb="all",RT="each",rD="flush",Au="column",Tu="row";function Xte(e){V.call(this,null,e)}ne(Xte,V,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Ki[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=Qb(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===XC||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(Qb(u,s))),r.role){case JR:case tD:case eD:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(Qb(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(Qb(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return Lte(r),t.modifies("bounds")}});function Qb(e,t,n){return t(e.bounds.clear(),e,n)}const iB=":vega_identifier:";function iD(e){V.call(this,0,e)}iD.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ne(iD,V,{transform(e,t){const n=_Re(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function _Re(e){return e._signals[iB]||(e._signals[iB]=e.add(0))}function Kte(e){V.call(this,null,e)}ne(Kte,V,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,ERe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===XC?BC:zC;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function ERe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Qte(e){V.call(this,null,e)}const oB={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Zte(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Zte=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),sB=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(Zte(i,o=e[n].bounds,t))return!0},$Re=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},ARe=(e,t,n)=>{var r=e.range(),i=new hn;return t===cg||t===lc?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},aB=e=>(e.forEach(t=>t.opacity=1),e),lB=(e,t)=>e.reflow(t.modified()).modifies("opacity");ne(Qte,V,{transform(e,t){const n=oB[e.method]||oB.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(aB(i),t=lB(t,e)),t;if(i=i.filter($Re),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=aB(i),t=lB(t,e),o.length>=3&&sB(o,r)){do o=n(o,r);while(o.length>=3&&sB(o,r));o.length<3&&!He(i).opacity&&(o.length>1&&(He(o).opacity=0),He(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=ARe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function Jte(e){V.call(this,null,e)}ne(Jte,V,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const cr=new hn;function Gh(e,t,n){return e[t]===n?0:(e[t]=n,1)}function TRe(e){var t=e.items[0].orient;return t===os||t===ls}function MRe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function FRe(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=MRe(o),u=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=o.title&&i.items[l[2]].items[0],g=i.titlePadding,m=i.bounds,y=p&&BR(p),v=0,b=0,x,w;switch(cr.clear().union(m),m.clear(),(x=l[0])>-1&&m.union(i.items[x].bounds),(x=l[1])>-1&&m.union(i.items[x].bounds),a){case cg:v=f||0,b=-c,w=Math.max(d,Math.min(h,-m.y1)),m.add(0,-w).add(u,0),p&&Zb(e,p,w,g,y,0,-1,m);break;case os:v=-c,b=f||0,w=Math.max(d,Math.min(h,-m.x1)),m.add(-w,0).add(0,u),p&&Zb(e,p,w,g,y,1,-1,m);break;case ls:v=n+c,b=f||0,w=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(w,u),p&&Zb(e,p,w,g,y,1,1,m);break;case lc:v=f||0,b=r+c,w=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(u,w),p&&Zb(e,p,w,g,0,0,1,m);break;default:v=i.x,b=i.y}return Dl(m.translate(v,b),i),Gh(i,"x",v+s)|Gh(i,"y",b+s)&&(i.bounds=cr,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function Zb(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}a.union(l)}const uB=(e,t)=>Math.floor(Math.min(e,t)),cB=(e,t)=>Math.ceil(Math.max(e,t));function PRe(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===XC)switch(i.role){case JR:case tD:case eD:break;case Bte:s.rowheaders.push(...o);break;case jte:s.rowfooters.push(...o);break;case Vte:s.colheaders.push(...o);break;case Wte:s.colfooters.push(...o);break;case Ute:s.rowtitle=o[0];break;case Hte:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function RRe(e){return new hn().set(0,0,e.width||0,e.height||0)}function DRe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Rt(e,t,n){const r=se(e)?e[t]:e;return r??(n!==void 0?n:0)}function fB(e){return e<0?Math.ceil(-e):0}function ene(e,t,n){var r=!n.nodirty,i=n.bounds===rD?RRe:DRe,o=cr.set(0,0,0,0),s=Rt(n.align,Au),a=Rt(n.align,Tu),l=Rt(n.padding,Au),u=Rt(n.padding,Tu),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,m=Array(d),y=Array(f),v=0,b=Array(d),x=Array(d),w=Array(d),k,S,C,_,$,A,N,M,R,P,D;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)A=t[S],$=w[S]=i(A),A.x=A.x||0,b[S]=0,A.y=A.y||0,x[S]=0,C=S%c,_=~~(S/c),g=Math.max(g,N=Math.ceil($.x2)),v=Math.max(v,M=Math.ceil($.y2)),p[C]=Math.max(p[C],N),y[_]=Math.max(y[_],M),h[S]=l+fB($.x1),m[S]=u+fB($.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(m[S]=0);if(s===RT)for(C=1;C<c;++C){for(D=0,S=C;S<d;S+=c)D<h[S]&&(D=h[S]);for(S=C;S<d;S+=c)h[S]=D+p[C-1]}else if(s===Kb){for(D=0,S=0;S<d;++S)S%c&&D<h[S]&&(D=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=D+g)}else for(s=!1,C=1;C<c;++C)for(S=C;S<d;S+=c)h[S]+=p[C-1];if(a===RT)for(_=1;_<f;++_){for(D=0,S=_*c,k=S+c;S<k;++S)D<m[S]&&(D=m[S]);for(S=_*c;S<k;++S)m[S]=D+y[_-1]}else if(a===Kb){for(D=0,S=c;S<d;++S)D<m[S]&&(D=m[S]);for(S=c;S<d;++S)m[S]=D+v}else for(a=!1,_=1;_<f;++_)for(S=_*c,k=S+c;S<k;++S)m[S]+=y[_-1];for(R=0,S=0;S<d;++S)R=h[S]+(S%c?R:0),b[S]+=R-t[S].x;for(C=0;C<c;++C)for(P=0,S=C;S<d;S+=c)P+=m[S],x[S]+=P-t[S].y;if(s&&Rt(n.center,Au)&&f>1)for(S=0;S<d;++S)$=s===Kb?g:p[S%c],R=$-w[S].x2-t[S].x-b[S],R>0&&(b[S]+=R/2);if(a&&Rt(n.center,Tu)&&c!==1)for(S=0;S<d;++S)$=a===Kb?v:y[~~(S/c)],P=$-w[S].y2-t[S].y-x[S],P>0&&(x[S]+=P/2);for(S=0;S<d;++S)o.union(w[S].translate(b[S],x[S]));switch(R=Rt(n.anchor,vRe),P=Rt(n.anchor,bRe),Rt(n.anchor,Au)){case Or:R-=o.width();break;case PT:R-=o.width()/2}switch(Rt(n.anchor,Tu)){case Or:P-=o.height();break;case PT:P-=o.height()/2}for(R=Math.round(R),P=Math.round(P),o.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)A=t[S],A.x+=b[S]+=R,A.y+=x[S]+=P,o.union(A.mark.bounds.union(A.bounds.translate(b[S],x[S]))),r&&e.dirty(A);return o}function ORe(e,t,n){var r=PRe(t),i=r.marks,o=n.bounds===rD?NRe:IRe,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,f,d,h,p,g,m;const y=ene(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=Rt(n.headerBand,Tu,null),c=Jb(e,r.rowheaders,i,a,l,-Rt(s,"rowHeader"),uB,0,o,"x1",0,a,1,g)),r.colheaders&&(g=Rt(n.headerBand,Au,null),f=Jb(e,r.colheaders,i,a,a,-Rt(s,"columnHeader"),uB,1,o,"y1",0,1,a,g)),r.rowfooters&&(g=Rt(n.footerBand,Tu,null),d=Jb(e,r.rowfooters,i,a,l,Rt(s,"rowFooter"),cB,0,o,"x2",a-1,a,1,g)),r.colfooters&&(g=Rt(n.footerBand,Au,null),h=Jb(e,r.colfooters,i,a,a,Rt(s,"columnFooter"),cB,1,o,"y2",u-a,1,a,g)),r.rowtitle&&(p=Rt(n.titleAnchor,Tu),m=Rt(s,"rowTitle"),m=p===Or?d+m:c-m,g=Rt(n.titleBand,Tu,.5),dB(e,r.rowtitle,m,0,y,g)),r.coltitle&&(p=Rt(n.titleAnchor,Au),m=Rt(s,"columnTitle"),m=p===Or?h+m:f-m,g=Rt(n.titleBand,Au,.5),dB(e,r.coltitle,m,1,y,g))}function NRe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function IRe(e,t){return e.bounds[t]}function Jb(e,t,n,r,i,o,s,a,l,u,c,f,d,h){var p=n.length,g=0,m=0,y,v,b,x,w,k,S,C,_;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=s(g,l(n[y],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=o,v=0,x=t.length;v<x;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,x=t.length;v<x;++v,y+=f){for(k=t[v],w=k.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),_=g):(C=g,_=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),w.union(k.bounds.translate(C-(k.x||0),_-(k.y||0))),k.x=C,k.y=_,e.dirty(k),m=s(m,w[u])}return m}function dB(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function LRe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function zRe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function BRe(e,t,n,r,i,o,s){const a=LRe(n,t),l=zRe(e,a("offset",0)),u=a("anchor",ZR),c=u===Or?1:u===PT?.5:0,f={align:RT,bounds:a("bounds",rD),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case os:f.anchor={x:Math.floor(r.x1)-l,column:Or,y:c*(s||r.height()+2*r.y1),row:u};break;case ls:f.anchor={x:Math.ceil(r.x2)+l,y:c*(s||r.height()+2*r.y1),row:u};break;case cg:f.anchor={y:Math.floor(i.y1)-l,row:Or,x:c*(o||i.width()+2*i.x1),column:u};break;case lc:f.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case pRe:f.anchor={x:l,y:l};break;case gRe:f.anchor={x:o-l,y:l,column:Or};break;case mRe:f.anchor={x:l,y:s-l,row:Or};break;case yRe:f.anchor={x:o-l,y:s-l,column:Or,row:Or};break}return f}function jRe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),VRe(e,n,n.items[0].items[0]),o=URe(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===kRe&&WRe(n.items[0].items[0].items[0].items),i!==nD&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,Dl(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function URe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function VRe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&jm(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,c=r-s.y;switch(s.orient){case os:i+=Math.ceil(s.bounds.width())+l;break;case ls:case lc:break;default:o+=s.bounds.height()+l}switch((i||o)&&jm(e,n,i,o),s.orient){case os:c+=lh(t,n,s,a,1,1);break;case ls:u+=lh(t,n,s,Or,0,0)+l,c+=lh(t,n,s,a,1,1);break;case lc:u+=lh(t,n,s,a,0,0),c+=lh(t,n,s,Or,-1,0,1)+l;break;default:u+=lh(t,n,s,a,0,0)}(u||c)&&jm(e,s,u,c),(u=Math.round(s.bounds.x1-r))<0&&(jm(e,n,-u,0),jm(e,s,-u,0))}}function lh(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,f=l&&o?c:0,d=l&&o?0:c,h=i<=0?0:BR(n);return Math.round(r===ZR?f:r===Or?d-h:.5*(c-h))}function jm(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function WRe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function HRe(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===os||a===ls?r:n,p=0,g=0,m=0,y=0,v=0,b;if(s!==XC?a===os?(p=i.y2,h=i.y1):a===ls?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===os&&(p=r,h=0),b=l===ZR?p:l===Or?h:(p+h)/2,d&&d.text){switch(a){case cg:case lc:v=f.bounds.height()+c;break;case os:y=f.bounds.width()+c;break;case ls:y=-f.bounds.width()-c;break}cr.clear().union(d.bounds),cr.translate(y-(d.x||0),v-(d.y||0)),Gh(d,"x",y)|Gh(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(cr),d.mark.bounds.clear().union(cr),e.dirty(d)),cr.clear().union(d.bounds)}else cr.clear();switch(cr.union(f.bounds),a){case cg:g=b,m=i.y1-cr.height()-u;break;case os:g=i.x1-cr.width()-u,m=b;break;case ls:g=i.x2+cr.width()+u,m=b;break;case lc:g=b,m=i.y2+u;break;default:g=o.x,m=o.y}return Gh(o,"x",g)|Gh(o,"y",m)&&(cr.translate(g,m),e.dirty(o),o.bounds.clear().union(cr),t.bounds.clear().union(cr),e.dirty(o)),o.bounds}function tne(e){V.call(this,null,e)}ne(tne,V,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&ORe(n,r,e.layout),GRe(n,r,e)}),qRe(e.mark.group)?t.reflow():t}});function qRe(e){return e&&e.mark.role!=="legend-entry"}function GRe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new hn().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case JR:h=TRe(f)?a:l,h.union(FRe(e,f,i,o));break;case eD:c=f;break;case tD:u.push(jRe(e,f));break;case xRe:case wRe:case Bte:case jte:case Ute:case Vte:case Wte:case Hte:a.union(f.bounds),l.union(f.bounds);break;default:s.union(f.bounds)}if(u.length){const m={};u.forEach(y=>{d=y.orient||ls,d!==nD&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];ene(e,v,BRe(v,y,n.legends,a,l,i,o))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===qte||n.autosize.type===Gte||n.autosize.type===Yte))switch(y.orient){case os:case ls:s.add(v.x1,0).add(v.x2,0);break;case cg:case lc:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(l),c&&s.union(HRe(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),YRe(e,t,s,n)}function YRe(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===SRe){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===nD?(u=0,f=0,l=s,c=a):o===qte?(l=Math.max(0,s-u-d),c=Math.max(0,a-f-h)):o===Gte?(l=Math.max(0,s-u-d),a=c+f+h):o===Yte?(s=l+u+d,c=Math.max(0,a-f-h)):o===CRe&&(s=l+u+d,a=c+f+h),e._resizeView(s,a,l,c,[u,f],i.resize)}const XRe=Object.freeze(Object.defineProperty({__proto__:null,bound:Xte,identifier:iD,mark:Kte,overlap:Qte,render:Jte,viewlayout:tne},Symbol.toStringTag,{value:"Module"}));function nne(e){V.call(this,null,e)}ne(nne,V,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=SR(o,s,e.minstep),l=e.format||Tee(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?Aee(o,e.values,a):kR(o,a);return i&&(r.rem=i),i=u.map((c,f)=>st({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(st({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function rne(e){V.call(this,null,e)}function KRe(){return st({})}function QRe(e){const t=Hg().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ne(rne,V,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||KRe,o=e.key||ve,s=this.value;return G(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&q("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=QRe(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function ine(e){V.call(this,null,e)}ne(ine,V,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(G(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||Kl,l=i.enter||Kl,u=i.exit||Kl,c=(o&&!s?i[o]:a)||Kl;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),a(f,e)}),n.modifies(l.output),n.modifies(a.output),c!==Kl&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==Kl&&(t.visit(t.REM,f=>{u(f,e)}),n.modifies(u.output)),s||c!==Kl){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=l(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function one(e){V.call(this,[],e)}ne(one,V,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||u2,s=e.scale,a=+e.limit,l=SR(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===u2,c=e.format||Ree(n,s,l,o,e.formatSpecifier,e.formatType,u),f=e.values||Pee(s,l),d,h,p,g,m;return i&&(r.rem=i),o===u2?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,Oe(p=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=_r(g=p||8),i=i.map((y,v)=>st({index:v,label:c(y,v,i),value:y,offset:g,size:p(y,e)})),m&&(m=f[i.length],i.push(st({index:i.length,label:`…${f.length-i.length} entries`,value:m,offset:g,size:p(m,e)})))):o===CFe?(d=s.domain(),h=_ee(s,d[0],He(d)),f.length<3&&!e.values&&d[0]!==He(d)&&(f=[d[0],He(d)]),i=f.map((y,v)=>st({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=OFe(s),i=f.map((y,v)=>st({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const ZRe=e=>e.source.x,JRe=e=>e.source.y,eDe=e=>e.target.x,tDe=e=>e.target.y;function oD(e){V.call(this,{},e)}oD.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ne(oD,V,{transform(e,t){var n=e.sourceX||ZRe,r=e.sourceY||JRe,i=e.targetX||eDe,o=e.targetY||tDe,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=hB.get(l+"-"+a)||hB.get(l);return u||q("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const sne=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,nDe=(e,t,n,r)=>sne(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ane=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},rDe=(e,t,n,r)=>ane(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),lne=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},iDe=(e,t,n,r)=>lne(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),oDe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,sDe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,aDe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},lDe=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},uDe=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},cDe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},hB=Hg({line:sne,"line-radial":nDe,arc:ane,"arc-radial":rDe,curve:lne,"curve-radial":iDe,"orthogonal-horizontal":oDe,"orthogonal-vertical":sDe,"orthogonal-radial":aDe,"diagonal-horizontal":lDe,"diagonal-vertical":uDe,"diagonal-radial":cDe});function sD(e){V.call(this,null,e)}sD.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ne(sD,V,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Ug,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,f=s,d=(a-s)/mQ(u),h=Ii(c),p,g,m;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),p=0;p<c;++p)m=u[h[p]],g=l[h[p]],g[r]=f,g[i]=f+=m*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const fDe=5;function dDe(e){const t=e.type;return!e.bins&&(t===ig||t===pv||t===gv)}function une(e){return bR(e)&&e!==pa}const hDe=ys(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function cne(e){V.call(this,null,e),this.modified(!0)}ne(cne,V,{transform(e,t){var n=t.dataflow,r=this.value,i=pDe(e);(!r||i!==r.type)&&(this.value=r=Je(i)());for(i in e)if(!hDe[i]){if(i==="padding"&&une(r.type))continue;Oe(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return xDe(r,e,bDe(r,e,mDe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function pDe(e){var t=e.type,n="",r;return t===pa?pa+"-"+ig:(gDe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?pa+"-":r===3?Zg+"-":""),(n+t||ig).toLowerCase())}function gDe(e){const t=e.type;return bR(t)&&t!==id&&t!==od&&(e.scheme||e.range&&e.range.length&&e.range.every(le))}function mDe(e,t,n){const r=yDe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&dDe(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return une(o)&&t.padding&&i[0]!==He(i)&&(i=vDe(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(fne(o,i,n)),o===gR&&e.unknown(t.domainImplicit?hT:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&SR(e,t.nice)||null),i.length}function yDe(e,t,n){return t?(e.domain(fne(e.type,t,n)),t.length):-1}function vDe(e,t,n,r,i,o){var s=Math.abs(He(n)-n[0]),a=s/(s-2*r),l=e===$l?NP(t,null,a):e===gv?$w(t,null,a,.5):e===pv?$w(t,null,a,i||1):e===DC?IP(t,null,a,o||1):OP(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function fne(e,t,n){if(xee(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+te(t))}return t}function bDe(e,t,n){let r=t.bins;if(r&&!G(r)){const i=e.domain(),o=i[0],s=He(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||q("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=Ii(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===mR&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function xDe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=wDe(r,t,n);else if(t.scheme&&(o=SDe(r,t,n),Oe(o))){if(e.interpolator)return e.interpolator(o);q(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&wee(r))return e.interpolator(IC(DT(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(xR(t.interpolate,t.interpolateGamma)):Oe(e.round)?e.round(i):Oe(e.rangeRound)&&e.interpolate(i?Qg:Cc),o&&e.range(DT(o,t.reverse))}function wDe(e,t,n){e!==pee&&e!==bT&&q("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===bT?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*pR(n,i,r)]}function SDe(e,t,n){var r=t.schemeExtent,i,o;return G(t.scheme)?o=IC(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=wR(i),o||q(`Unrecognized scheme name: ${t.scheme}`)),n=e===NC?n+1:e===mR?n-1:e===og||e===OC?+t.schemeCount||fDe:n,wee(e)?pB(o,r,t.reverse):Oe(o)?Cee(pB(o,r),n):e===gR?o:o.slice(0,n)}function pB(e,t,n){return Oe(e)&&(t||n)?kee(e,DT(t||[0,1],n)):e}function DT(e,t){return t?e.slice().reverse():e}function dne(e){V.call(this,null,e)}ne(dne,V,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Dd(e.sort)),this.modified(n),t}});const gB="zero",hne="center",pne="normalize",gne=["y0","y1"];function aD(e){V.call(this,null,e)}aD.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:gB,values:[gB,hne,pne]},{name:"as",type:"string",array:!0,length:2,default:gne}]};ne(aD,V,{transform(e,t){var n=e.as||gne,r=n[0],i=n[1],o=Dd(e.sort),s=e.field||Ug,a=e.offset===hne?kDe:e.offset===pne?CDe:_De,l,u,c,f;for(l=EDe(t.source,e.groupby,o,s),u=0,c=l.length,f=l.max;u<c;++u)a(l[u],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function kDe(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function CDe(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=s,c[i]=s=o*(u+=Math.abs(n(c)))}function _De(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=s,c[i]=s+=u):(c[r]=o,c[i]=o+=u)}function EDe(e,t,n,r){var i=[],o=g=>g(c),s,a,l,u,c,f,d,h,p;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,u=i.length;f<u;++f){for(d=i[f],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const $De=Object.freeze(Object.defineProperty({__proto__:null,axisticks:nne,datajoin:rne,encode:ine,legendentries:one,linkpath:oD,pie:sD,scale:cne,sortitems:dne,stack:aD},Symbol.toStringTag,{value:"Module"}));var xe=1e-6,oS=1e-12,Ie=Math.PI,Kt=Ie/2,sS=Ie/4,Yr=Ie*2,Jt=180/Ie,Ne=Ie/180,We=Math.abs,em=Math.atan,Do=Math.atan2,Se=Math.cos,ex=Math.ceil,mne=Math.exp,OT=Math.hypot,aS=Math.log,f5=Math.pow,be=Math.sin,So=Math.sign||function(e){return e>0?1:e<0?-1:0},Xr=Math.sqrt,lD=Math.tan;function yne(e){return e>1?0:e<-1?Ie:Math.acos(e)}function wi(e){return e>1?Kt:e<-1?-Kt:Math.asin(e)}function Yn(){}function lS(e,t){e&&yB.hasOwnProperty(e.type)&&yB[e.type](e,t)}var mB={Feature:function(e,t){lS(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)lS(n[r].geometry,t)}},yB={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){NT(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)NT(n[r],t,0)},Polygon:function(e,t){vB(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vB(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)lS(n[r],t)}};function NT(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function vB(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)NT(e[n],t,1);t.polygonEnd()}function Qa(e,t){e&&mB.hasOwnProperty(e.type)?mB[e.type](e,t):lS(e,t)}var uS=new qr,cS=new qr,vne,bne,IT,LT,zT,ba={point:Yn,lineStart:Yn,lineEnd:Yn,polygonStart:function(){uS=new qr,ba.lineStart=ADe,ba.lineEnd=TDe},polygonEnd:function(){var e=+uS;cS.add(e<0?Yr+e:e),this.lineStart=this.lineEnd=this.point=Yn},sphere:function(){cS.add(Yr)}};function ADe(){ba.point=MDe}function TDe(){xne(vne,bne)}function MDe(e,t){ba.point=xne,vne=e,bne=t,e*=Ne,t*=Ne,IT=e,LT=Se(t=t/2+sS),zT=be(t)}function xne(e,t){e*=Ne,t*=Ne,t=t/2+sS;var n=e-IT,r=n>=0?1:-1,i=r*n,o=Se(t),s=be(t),a=zT*s,l=LT*o+a*Se(i),u=a*r*be(i);uS.add(Do(u,l)),IT=e,LT=o,zT=s}function FDe(e){return cS=new qr,Qa(e,ba),cS*2}function fS(e){return[Do(e[1],e[0]),wi(e[2])]}function ad(e){var t=e[0],n=e[1],r=Se(n);return[r*Se(t),r*be(t),be(n)]}function tx(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function fg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function d5(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function nx(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function dS(e){var t=Xr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Lt,si,Gt,Pi,sf,wne,Sne,fp,dy,ou,Al,Ga={point:BT,lineStart:bB,lineEnd:xB,polygonStart:function(){Ga.point=Cne,Ga.lineStart=PDe,Ga.lineEnd=RDe,dy=new qr,ba.polygonStart()},polygonEnd:function(){ba.polygonEnd(),Ga.point=BT,Ga.lineStart=bB,Ga.lineEnd=xB,uS<0?(Lt=-(Gt=180),si=-(Pi=90)):dy>xe?Pi=90:dy<-xe&&(si=-90),Al[0]=Lt,Al[1]=Gt},sphere:function(){Lt=-(Gt=180),si=-(Pi=90)}};function BT(e,t){ou.push(Al=[Lt=e,Gt=e]),t<si&&(si=t),t>Pi&&(Pi=t)}function kne(e,t){var n=ad([e*Ne,t*Ne]);if(fp){var r=fg(fp,n),i=[r[1],-r[0],0],o=fg(i,r);dS(o),o=fS(o);var s=e-sf,a=s>0?1:-1,l=o[0]*Jt*a,u,c=We(s)>180;c^(a*sf<l&&l<a*e)?(u=o[1]*Jt,u>Pi&&(Pi=u)):(l=(l+360)%360-180,c^(a*sf<l&&l<a*e)?(u=-o[1]*Jt,u<si&&(si=u)):(t<si&&(si=t),t>Pi&&(Pi=t))),c?e<sf?Fi(Lt,e)>Fi(Lt,Gt)&&(Gt=e):Fi(e,Gt)>Fi(Lt,Gt)&&(Lt=e):Gt>=Lt?(e<Lt&&(Lt=e),e>Gt&&(Gt=e)):e>sf?Fi(Lt,e)>Fi(Lt,Gt)&&(Gt=e):Fi(e,Gt)>Fi(Lt,Gt)&&(Lt=e)}else ou.push(Al=[Lt=e,Gt=e]);t<si&&(si=t),t>Pi&&(Pi=t),fp=n,sf=e}function bB(){Ga.point=kne}function xB(){Al[0]=Lt,Al[1]=Gt,Ga.point=BT,fp=null}function Cne(e,t){if(fp){var n=e-sf;dy.add(We(n)>180?n+(n>0?360:-360):n)}else wne=e,Sne=t;ba.point(e,t),kne(e,t)}function PDe(){ba.lineStart()}function RDe(){Cne(wne,Sne),ba.lineEnd(),We(dy)>xe&&(Lt=-(Gt=180)),Al[0]=Lt,Al[1]=Gt,fp=null}function Fi(e,t){return(t-=e)<0?t+360:t}function DDe(e,t){return e[0]-t[0]}function wB(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ODe(e){var t,n,r,i,o,s,a;if(Pi=Gt=-(Lt=si=1/0),ou=[],Qa(e,Ga),n=ou.length){for(ou.sort(DDe),t=1,r=ou[0],o=[r];t<n;++t)i=ou[t],wB(r,i[0])||wB(r,i[1])?(Fi(r[0],i[1])>Fi(r[0],r[1])&&(r[1]=i[1]),Fi(i[0],r[1])>Fi(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Fi(r[1],i[0]))>s&&(s=a,Lt=i[0],Gt=r[1])}return ou=Al=null,Lt===1/0||si===1/0?[[NaN,NaN],[NaN,NaN]]:[[Lt,si],[Gt,Pi]]}var _0,hS,pS,gS,mS,yS,vS,bS,jT,UT,VT,_ne,Ene,Ir,Lr,zr,us={sphere:Yn,point:uD,lineStart:SB,lineEnd:kB,polygonStart:function(){us.lineStart=LDe,us.lineEnd=zDe},polygonEnd:function(){us.lineStart=SB,us.lineEnd=kB}};function uD(e,t){e*=Ne,t*=Ne;var n=Se(t);$v(n*Se(e),n*be(e),be(t))}function $v(e,t,n){++_0,pS+=(e-pS)/_0,gS+=(t-gS)/_0,mS+=(n-mS)/_0}function SB(){us.point=NDe}function NDe(e,t){e*=Ne,t*=Ne;var n=Se(t);Ir=n*Se(e),Lr=n*be(e),zr=be(t),us.point=IDe,$v(Ir,Lr,zr)}function IDe(e,t){e*=Ne,t*=Ne;var n=Se(t),r=n*Se(e),i=n*be(e),o=be(t),s=Do(Xr((s=Lr*o-zr*i)*s+(s=zr*r-Ir*o)*s+(s=Ir*i-Lr*r)*s),Ir*r+Lr*i+zr*o);hS+=s,yS+=s*(Ir+(Ir=r)),vS+=s*(Lr+(Lr=i)),bS+=s*(zr+(zr=o)),$v(Ir,Lr,zr)}function kB(){us.point=uD}function LDe(){us.point=BDe}function zDe(){$ne(_ne,Ene),us.point=uD}function BDe(e,t){_ne=e,Ene=t,e*=Ne,t*=Ne,us.point=$ne;var n=Se(t);Ir=n*Se(e),Lr=n*be(e),zr=be(t),$v(Ir,Lr,zr)}function $ne(e,t){e*=Ne,t*=Ne;var n=Se(t),r=n*Se(e),i=n*be(e),o=be(t),s=Lr*o-zr*i,a=zr*r-Ir*o,l=Ir*i-Lr*r,u=OT(s,a,l),c=wi(u),f=u&&-c/u;jT.add(f*s),UT.add(f*a),VT.add(f*l),hS+=c,yS+=c*(Ir+(Ir=r)),vS+=c*(Lr+(Lr=i)),bS+=c*(zr+(zr=o)),$v(Ir,Lr,zr)}function jDe(e){_0=hS=pS=gS=mS=yS=vS=bS=0,jT=new qr,UT=new qr,VT=new qr,Qa(e,us);var t=+jT,n=+UT,r=+VT,i=OT(t,n,r);return i<oS&&(t=yS,n=vS,r=bS,hS<xe&&(t=pS,n=gS,r=mS),i=OT(t,n,r),i<oS)?[NaN,NaN]:[Do(n,t)*Jt,wi(r/i)*Jt]}function WT(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function HT(e,t){return We(e)>Ie&&(e-=Math.round(e/Yr)*Yr),[e,t]}HT.invert=HT;function Ane(e,t,n){return(e%=Yr)?t||n?WT(_B(e),EB(t,n)):_B(e):t||n?EB(t,n):HT}function CB(e){return function(t,n){return t+=e,We(t)>Ie&&(t-=Math.round(t/Yr)*Yr),[t,n]}}function _B(e){var t=CB(e);return t.invert=CB(-e),t}function EB(e,t){var n=Se(e),r=be(e),i=Se(t),o=be(t);function s(a,l){var u=Se(l),c=Se(a)*u,f=be(a)*u,d=be(l),h=d*n+c*r;return[Do(f*i-h*o,c*n-d*r),wi(h*i+f*o)]}return s.invert=function(a,l){var u=Se(l),c=Se(a)*u,f=be(a)*u,d=be(l),h=d*i-f*o;return[Do(f*i+d*o,c*n+h*r),wi(h*n-c*r)]},s}function UDe(e){e=Ane(e[0]*Ne,e[1]*Ne,e.length>2?e[2]*Ne:0);function t(n){return n=e(n[0]*Ne,n[1]*Ne),n[0]*=Jt,n[1]*=Jt,n}return t.invert=function(n){return n=e.invert(n[0]*Ne,n[1]*Ne),n[0]*=Jt,n[1]*=Jt,n},t}function VDe(e,t,n,r,i,o){if(n){var s=Se(t),a=be(t),l=r*n;i==null?(i=t+r*Yr,o=t-l/2):(i=$B(s,i),o=$B(s,o),(r>0?i<o:i>o)&&(i+=r*Yr));for(var u,c=i;r>0?c>o:c<o;c-=l)u=fS([s,-a*Se(c),-a*be(c)]),e.point(u[0],u[1])}}function $B(e,t){t=ad(t),t[0]-=e,dS(t);var n=yne(-t[1]);return((-t[2]<0?-n:n)+Yr-xe)%Yr}function Tne(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Yn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function v2(e,t){return We(e[0]-t[0])<xe&&We(e[1]-t[1])<xe}function rx(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Mne(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],v;if(v2(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((m=p[a])[0],m[1]);i.lineEnd();return}y[0]+=2*xe}o.push(v=new rx(m,p,null,!0)),s.push(v.o=new rx(m,null,v,!1)),o.push(v=new rx(y,p,null,!1)),s.push(v.o=new rx(y,null,v,!0))}}),!!o.length){for(s.sort(t),AB(o),AB(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function AB(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function h5(e){return We(e[0])<=Ie?e[0]:So(e[0])*((We(e[0])+Ie)%Yr-Ie)}function WDe(e,t){var n=h5(t),r=t[1],i=be(r),o=[be(n),-Se(n),0],s=0,a=0,l=new qr;i===1?r=Kt+xe:i===-1&&(r=-Kt-xe);for(var u=0,c=e.length;u<c;++u)if(d=(f=e[u]).length)for(var f,d,h=f[d-1],p=h5(h),g=h[1]/2+sS,m=be(g),y=Se(g),v=0;v<d;++v,p=x,m=k,y=S,h=b){var b=f[v],x=h5(b),w=b[1]/2+sS,k=be(w),S=Se(w),C=x-p,_=C>=0?1:-1,$=_*C,A=$>Ie,N=m*k;if(l.add(Do(N*_*be($),y*S+N*Se($))),s+=A?C+_*Yr:C,A^p>=n^x>=n){var M=fg(ad(h),ad(b));dS(M);var R=fg(o,M);dS(R);var P=(A^C>=0?-1:1)*wi(R[2]);(r>P||r===P&&(M[0]||M[1]))&&(a+=A^C>=0?1:-1)}}return(s<-xe||s<xe&&l<-oS)^a&1}function Fne(e,t,n,r){return function(i){var o=t(i),s=Tne(),a=t(s),l=!1,u,c,f,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=gQ(c);var x=WDe(u,r);c.length?(l||(i.polygonStart(),l=!0),Mne(c,qDe,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,w){e(x,w)&&i.point(x,w)}function p(x,w){o.point(x,w)}function g(){d.point=p,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(x,w){f.push([x,w]),a.point(x,w)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),w=s.result(),k,S=w.length,C,_,$;if(f.pop(),u.push(f),f=null,!!S){if(x&1){if(_=w[0],(C=_.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),k=0;k<C;++k)i.point(($=_[k])[0],$[1]);i.lineEnd()}return}S>1&&x&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(HDe))}}return d}}function HDe(e){return e.length>1}function qDe(e,t){return((e=e.x)[0]<0?e[1]-Kt-xe:Kt-e[1])-((t=t.x)[0]<0?t[1]-Kt-xe:Kt-t[1])}const TB=Fne(function(){return!0},GDe,XDe,[-Ie,-Kt]);function GDe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Ie:-Ie,l=We(o-t);We(l-Ie)<xe?(e.point(t,n=(n+s)/2>0?Kt:-Kt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=Ie&&(We(t-r)<xe&&(t-=r*xe),We(o-a)<xe&&(o-=a*xe),n=YDe(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function YDe(e,t,n,r){var i,o,s=be(e-n);return We(s)>xe?em((be(t)*(o=Se(r))*be(n)-be(r)*(i=Se(t))*be(e))/(i*o*s)):(t+r)/2}function XDe(e,t,n,r){var i;if(e==null)i=n*Kt,r.point(-Ie,i),r.point(0,i),r.point(Ie,i),r.point(Ie,0),r.point(Ie,-i),r.point(0,-i),r.point(-Ie,-i),r.point(-Ie,0),r.point(-Ie,i);else if(We(e[0]-t[0])>xe){var o=e[0]<t[0]?Ie:-Ie;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function KDe(e){var t=Se(e),n=2*Ne,r=t>0,i=We(t)>xe;function o(c,f,d,h){VDe(h,e,n,d,c,f)}function s(c,f){return Se(c)*Se(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var v=[m,y],b,x=s(m,y),w=r?x?0:u(m,y):x?u(m+(m<0?Ie:-Ie),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=l(f,v),(!b||v2(f,b)||v2(v,b))&&(v[2]=1)),x!==h)g=0,x?(c.lineStart(),b=l(v,f),c.point(b[0],b[1])):(b=l(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var k;!(w&d)&&(k=l(v,f,!0))&&(g=0,r?(c.lineStart(),c.point(k[0][0],k[0][1]),c.point(k[1][0],k[1][1]),c.lineEnd()):(c.point(k[1][0],k[1][1]),c.lineEnd(),c.lineStart(),c.point(k[0][0],k[0][1],3)))}x&&(!f||!v2(f,v))&&c.point(v[0],v[1]),f=v,h=x,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(c,f,d){var h=ad(c),p=ad(f),g=[1,0,0],m=fg(h,p),y=tx(m,m),v=m[0],b=y-v*v;if(!b)return!d&&c;var x=t*y/b,w=-t*v/b,k=fg(g,m),S=nx(g,x),C=nx(m,w);d5(S,C);var _=k,$=tx(S,_),A=tx(_,_),N=$*$-A*(tx(S,S)-1);if(!(N<0)){var M=Xr(N),R=nx(_,(-$-M)/A);if(d5(R,S),R=fS(R),!d)return R;var P=c[0],D=f[0],I=c[1],O=f[1],j;D<P&&(j=P,P=D,D=j);var Y=D-P,W=We(Y-Ie)<xe,oe=W||Y<xe;if(!W&&O<I&&(j=I,I=O,O=j),oe?W?I+O>0^R[1]<(We(R[0]-P)<xe?I:O):I<=R[1]&&R[1]<=O:Y>Ie^(P<=R[0]&&R[0]<=D)){var re=nx(_,(-$+M)/A);return d5(re,S),[R,fS(re)]}}}function u(c,f){var d=r?e:Ie-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Fne(s,a,o,r?[0,-e]:[-Ie,e-Ie])}function QDe(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],c=0,f=1,d=l-s,h=u-a,p;if(p=n-s,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=o-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var E0=1e9,ix=-E0;function Pne(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function o(u,c,f,d){var h=0,p=0;if(u==null||(h=s(u,f))!==(p=s(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function s(u,c){return We(u[0]-e)<xe?c>0?0:3:We(u[0]-n)<xe?c>0?2:1:We(u[1]-t)<xe?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=s(u,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=Tne(),d,h,p,g,m,y,v,b,x,w,k,S={point:C,lineStart:N,lineEnd:M,polygonStart:$,polygonEnd:A};function C(P,D){i(P,D)&&c.point(P,D)}function _(){for(var P=0,D=0,I=h.length;D<I;++D)for(var O=h[D],j=1,Y=O.length,W=O[0],oe,re,we=W[0],Re=W[1];j<Y;++j)oe=we,re=Re,W=O[j],we=W[0],Re=W[1],re<=r?Re>r&&(we-oe)*(r-re)>(Re-re)*(e-oe)&&++P:Re<=r&&(we-oe)*(r-re)<(Re-re)*(e-oe)&&--P;return P}function $(){c=f,d=[],h=[],k=!0}function A(){var P=_(),D=k&&P,I=(d=gQ(d)).length;(D||I)&&(u.polygonStart(),D&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),I&&Mne(d,a,P,o,u),u.polygonEnd()),c=u,d=h=p=null}function N(){S.point=R,h&&h.push(p=[]),w=!0,x=!1,v=b=NaN}function M(){d&&(R(g,m),y&&x&&f.rejoin(),d.push(f.result())),S.point=C,x&&c.lineEnd()}function R(P,D){var I=i(P,D);if(h&&p.push([P,D]),w)g=P,m=D,y=I,w=!1,I&&(c.lineStart(),c.point(P,D));else if(I&&x)c.point(P,D);else{var O=[v=Math.max(ix,Math.min(E0,v)),b=Math.max(ix,Math.min(E0,b))],j=[P=Math.max(ix,Math.min(E0,P)),D=Math.max(ix,Math.min(E0,D))];QDe(O,j,e,t,n,r)?(x||(c.lineStart(),c.point(O[0],O[1])),c.point(j[0],j[1]),I||c.lineEnd(),k=!1):I&&(c.lineStart(),c.point(P,D),k=!1)}v=P,b=D,x=I}return S}}function MB(e,t,n){var r=Ii(e,t-xe,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function FB(e,t,n){var r=Ii(e,t-xe,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function ZDe(){var e,t,n,r,i,o,s,a,l=10,u=l,c=90,f=360,d,h,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ii(ex(r/c)*c,n,c).map(p).concat(Ii(ex(a/f)*f,s,f).map(g)).concat(Ii(ex(t/l)*l,e,l).filter(function(b){return We(b%c)>xe}).map(d)).concat(Ii(ex(o/u)*u,i,u).filter(function(b){return We(b%f)>xe}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(s).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],s=+b[1][1],r>n&&(b=r,r=n,n=b),a>s&&(b=a,a=s,s=b),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],o=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),o>i&&(b=o,o=i,i=b),y.precision(m)):[[t,o],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],u=+b[1],y):[l,u]},y.precision=function(b){return arguments.length?(m=+b,d=MB(o,i,90),h=FB(t,e,m),p=MB(a,s,90),g=FB(r,n,m),y):m},y.extentMajor([[-180,-90+xe],[180,90-xe]]).extentMinor([[-180,-80-xe],[180,80+xe]])}const f1=e=>e;var p5=new qr,qT=new qr,Rne,Dne,GT,YT,Za={point:Yn,lineStart:Yn,lineEnd:Yn,polygonStart:function(){Za.lineStart=JDe,Za.lineEnd=t8e},polygonEnd:function(){Za.lineStart=Za.lineEnd=Za.point=Yn,p5.add(We(qT)),qT=new qr},result:function(){var e=p5/2;return p5=new qr,e}};function JDe(){Za.point=e8e}function e8e(e,t){Za.point=One,Rne=GT=e,Dne=YT=t}function One(e,t){qT.add(YT*e-GT*t),GT=e,YT=t}function t8e(){One(Rne,Dne)}var dg=1/0,xS=dg,d1=-dg,wS=d1,SS={point:n8e,lineStart:Yn,lineEnd:Yn,polygonStart:Yn,polygonEnd:Yn,result:function(){var e=[[dg,xS],[d1,wS]];return d1=wS=-(xS=dg=1/0),e}};function n8e(e,t){e<dg&&(dg=e),e>d1&&(d1=e),t<xS&&(xS=t),t>wS&&(wS=t)}var XT=0,KT=0,$0=0,kS=0,CS=0,Yh=0,QT=0,ZT=0,A0=0,Nne,Ine,ta,na,vo={point:ld,lineStart:PB,lineEnd:RB,polygonStart:function(){vo.lineStart=o8e,vo.lineEnd=s8e},polygonEnd:function(){vo.point=ld,vo.lineStart=PB,vo.lineEnd=RB},result:function(){var e=A0?[QT/A0,ZT/A0]:Yh?[kS/Yh,CS/Yh]:$0?[XT/$0,KT/$0]:[NaN,NaN];return XT=KT=$0=kS=CS=Yh=QT=ZT=A0=0,e}};function ld(e,t){XT+=e,KT+=t,++$0}function PB(){vo.point=r8e}function r8e(e,t){vo.point=i8e,ld(ta=e,na=t)}function i8e(e,t){var n=e-ta,r=t-na,i=Xr(n*n+r*r);kS+=i*(ta+e)/2,CS+=i*(na+t)/2,Yh+=i,ld(ta=e,na=t)}function RB(){vo.point=ld}function o8e(){vo.point=a8e}function s8e(){Lne(Nne,Ine)}function a8e(e,t){vo.point=Lne,ld(Nne=ta=e,Ine=na=t)}function Lne(e,t){var n=e-ta,r=t-na,i=Xr(n*n+r*r);kS+=i*(ta+e)/2,CS+=i*(na+t)/2,Yh+=i,i=na*e-ta*t,QT+=i*(ta+e),ZT+=i*(na+t),A0+=i*3,ld(ta=e,na=t)}function zne(e){this._context=e}zne.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yr);break}}},result:Yn};var JT=new qr,g5,Bne,jne,T0,M0,h1={point:Yn,lineStart:function(){h1.point=l8e},lineEnd:function(){g5&&Une(Bne,jne),h1.point=Yn},polygonStart:function(){g5=!0},polygonEnd:function(){g5=null},result:function(){var e=+JT;return JT=new qr,e}};function l8e(e,t){h1.point=Une,Bne=T0=e,jne=M0=t}function Une(e,t){T0-=e,M0-=t,JT.add(Xr(T0*T0+M0*M0)),T0=e,M0=t}let DB,_S,OB,NB;class IB{constructor(t){this._append=t==null?Vne:u8e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==OB||this._append!==_S){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,OB=r,_S=this._append,NB=this._,this._=i}this._+=NB;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Vne(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function u8e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Vne;if(t!==DB){const n=10**t;DB=t,_S=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return _S}function Wne(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Qa(a,i(o))),o.result()}return s.area=function(a){return Qa(a,i(Za)),Za.result()},s.measure=function(a){return Qa(a,i(h1)),h1.result()},s.bounds=function(a){return Qa(a,i(SS)),SS.result()},s.centroid=function(a){return Qa(a,i(vo)),vo.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,f1):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new IB(n)):new zne(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new IB(n)),s},s.projection(e).digits(n).context(t)}function KC(e){return function(t){var n=new e4;for(var r in e)n[r]=e[r];return n.stream=t,n}}function e4(){}e4.prototype={constructor:e4,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function cD(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Qa(n,e.stream(SS)),t(SS.result()),r!=null&&e.clipExtent(r),e}function QC(e,t,n){return cD(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function fD(e,t,n){return QC(e,[[0,0],t],n)}function dD(e,t,n){return cD(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function hD(e,t,n){return cD(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var LB=16,c8e=Se(30*Ne);function zB(e,t){return+t?d8e(e,t):f8e(e)}function f8e(e){return KC({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function d8e(e,t){function n(r,i,o,s,a,l,u,c,f,d,h,p,g,m){var y=u-r,v=c-i,b=y*y+v*v;if(b>4*t&&g--){var x=s+d,w=a+h,k=l+p,S=Xr(x*x+w*w+k*k),C=wi(k/=S),_=We(We(k)-1)<xe||We(o-f)<xe?(o+f)/2:Do(w,x),$=e(_,C),A=$[0],N=$[1],M=A-r,R=N-i,P=v*M-y*R;(P*P/b>t||We((y*M+v*R)/b-.5)>.3||s*d+a*h+l*p<c8e)&&(n(r,i,o,s,a,l,A,N,_,x/=S,w/=S,k,g,m),m.point(A,N),n(A,N,_,x,w,k,u,c,f,d,h,p,g,m))}}return function(r){var i,o,s,a,l,u,c,f,d,h,p,g,m={point:y,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),m.lineStart=w},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(C,_){C=e(C,_),r.point(C[0],C[1])}function v(){f=NaN,m.point=b,r.lineStart()}function b(C,_){var $=ad([C,_]),A=e(C,_);n(f,d,c,h,p,g,f=A[0],d=A[1],c=C,h=$[0],p=$[1],g=$[2],LB,r),r.point(f,d)}function x(){m.point=y,r.lineEnd()}function w(){v(),m.point=k,m.lineEnd=S}function k(C,_){b(i=C,_),o=f,s=d,a=h,l=p,u=g,m.point=b}function S(){n(f,d,c,h,p,g,o,s,i,a,l,u,LB,r),m.lineEnd=x,x()}return m}}var h8e=KC({point:function(e,t){this.stream.point(e*Ne,t*Ne)}});function p8e(e){return KC({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function g8e(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function BB(e,t,n,r,i,o){if(!o)return g8e(e,t,n,r,i);var s=Se(o),a=be(o),l=s*e,u=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(g,m){return g*=r,m*=i,[l*g-u*m+t,n-u*g-l*m]}return p.invert=function(g,m){return[r*(c*g-f*m+d),i*(h-f*g-c*m)]},p}function Aa(e){return Hne(function(){return e})()}function Hne(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,c,f=0,d=1,h=1,p=null,g=TB,m=null,y,v,b,x=f1,w=.5,k,S,C,_,$;function A(P){return C(P[0]*Ne,P[1]*Ne)}function N(P){return P=C.invert(P[0],P[1]),P&&[P[0]*Jt,P[1]*Jt]}A.stream=function(P){return _&&$===P?_:_=h8e(p8e(c)(g(k(x($=P)))))},A.preclip=function(P){return arguments.length?(g=P,p=void 0,R()):g},A.postclip=function(P){return arguments.length?(x=P,m=y=v=b=null,R()):x},A.clipAngle=function(P){return arguments.length?(g=+P?KDe(p=P*Ne):(p=null,TB),R()):p*Jt},A.clipExtent=function(P){return arguments.length?(x=P==null?(m=y=v=b=null,f1):Pne(m=+P[0][0],y=+P[0][1],v=+P[1][0],b=+P[1][1]),R()):m==null?null:[[m,y],[v,b]]},A.scale=function(P){return arguments.length?(n=+P,M()):n},A.translate=function(P){return arguments.length?(r=+P[0],i=+P[1],M()):[r,i]},A.center=function(P){return arguments.length?(o=P[0]%360*Ne,s=P[1]%360*Ne,M()):[o*Jt,s*Jt]},A.rotate=function(P){return arguments.length?(a=P[0]%360*Ne,l=P[1]%360*Ne,u=P.length>2?P[2]%360*Ne:0,M()):[a*Jt,l*Jt,u*Jt]},A.angle=function(P){return arguments.length?(f=P%360*Ne,M()):f*Jt},A.reflectX=function(P){return arguments.length?(d=P?-1:1,M()):d<0},A.reflectY=function(P){return arguments.length?(h=P?-1:1,M()):h<0},A.precision=function(P){return arguments.length?(k=zB(S,w=P*P),R()):Xr(w)},A.fitExtent=function(P,D){return QC(A,P,D)},A.fitSize=function(P,D){return fD(A,P,D)},A.fitWidth=function(P,D){return dD(A,P,D)},A.fitHeight=function(P,D){return hD(A,P,D)};function M(){var P=BB(n,0,0,d,h,f).apply(null,t(o,s)),D=BB(n,r-P[0],i-P[1],d,h,f);return c=Ane(a,l,u),S=WT(t,D),C=WT(c,S),k=zB(S,w),R()}function R(){return _=$=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&N,M()}}function pD(e){var t=0,n=Ie/3,r=Hne(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ne,n=o[1]*Ne):[t*Jt,n*Jt]},i}function m8e(e){var t=Se(e);function n(r,i){return[r*t,be(i)/t]}return n.invert=function(r,i){return[r/t,wi(i*t)]},n}function y8e(e,t){var n=be(e),r=(n+be(t))/2;if(We(r)<xe)return m8e(e);var i=1+n*(2*r-n),o=Xr(i)/r;function s(a,l){var u=Xr(i-2*r*be(l))/r;return[u*be(a*=r),o-u*Se(a)]}return s.invert=function(a,l){var u=o-l,c=Do(a,We(u))*So(u);return u*r<0&&(c-=Ie*So(a)*So(u)),[c/r,wi((i-(a*a+u*u)*r*r)/(2*r))]},s}function ES(){return pD(y8e).scale(155.424).center([0,33.6442])}function qne(){return ES().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function v8e(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function b8e(){var e,t,n=qne(),r,i=ES().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=ES().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(o.point(h,p),l)||(a.point(h,p),l)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=v8e([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),o=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+xe,g+.12*h+xe],[p-.214*h-xe,g+.234*h-xe]]).stream(u),a=s.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+xe,g+.166*h+xe],[p-.115*h-xe,g+.234*h-xe]]).stream(u),f()},c.fitExtent=function(d,h){return QC(c,d,h)},c.fitSize=function(d,h){return fD(c,d,h)},c.fitWidth=function(d,h){return dD(c,d,h)},c.fitHeight=function(d,h){return hD(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function Gne(e){return function(t,n){var r=Se(t),i=Se(n),o=e(r*i);return o===1/0?[2,0]:[o*i*be(t),o*be(n)]}}function Av(e){return function(t,n){var r=Xr(t*t+n*n),i=e(r),o=be(i),s=Se(i);return[Do(t*o,r*s),wi(r&&n*o/r)]}}var Yne=Gne(function(e){return Xr(2/(1+e))});Yne.invert=Av(function(e){return 2*wi(e/2)});function x8e(){return Aa(Yne).scale(124.75).clipAngle(180-.001)}var Xne=Gne(function(e){return(e=yne(e))&&e/be(e)});Xne.invert=Av(function(e){return e});function w8e(){return Aa(Xne).scale(79.4188).clipAngle(180-.001)}function ZC(e,t){return[e,aS(lD((Kt+t)/2))]}ZC.invert=function(e,t){return[e,2*em(mne(t))-Kt]};function S8e(){return Kne(ZC).scale(961/Yr)}function Kne(e){var t=Aa(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=l=u=null:(s=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):s==null?null:[[s,a],[l,u]]};function c(){var f=Ie*r(),d=t(UDe(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===ZC?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,l),u]]:[[s,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,u)]])}return c()}function ox(e){return lD((Kt+e)/2)}function k8e(e,t){var n=Se(e),r=e===t?be(e):aS(n/Se(t))/aS(ox(t)/ox(e)),i=n*f5(ox(e),r)/r;if(!r)return ZC;function o(s,a){i>0?a<-Kt+xe&&(a=-Kt+xe):a>Kt-xe&&(a=Kt-xe);var l=i/f5(ox(a),r);return[l*be(r*s),i-l*Se(r*s)]}return o.invert=function(s,a){var l=i-a,u=So(r)*Xr(s*s+l*l),c=Do(s,We(l))*So(l);return l*r<0&&(c-=Ie*So(s)*So(l)),[c/r,2*em(f5(i/u,1/r))-Kt]},o}function C8e(){return pD(k8e).scale(109.5).parallels([30,30])}function $S(e,t){return[e,t]}$S.invert=$S;function _8e(){return Aa($S).scale(152.63)}function E8e(e,t){var n=Se(e),r=e===t?be(e):(n-Se(t))/(t-e),i=n/r+e;if(We(r)<xe)return $S;function o(s,a){var l=i-a,u=r*s;return[l*be(u),i-l*Se(u)]}return o.invert=function(s,a){var l=i-a,u=Do(s,We(l))*So(l);return l*r<0&&(u-=Ie*So(s)*So(l)),[u/r,i-So(r)*Xr(s*s+l*l)]},o}function $8e(){return pD(E8e).scale(131.154).center([0,13.9389])}var hy=1.340264,py=-.081106,gy=893e-6,my=.003796,AS=Xr(3)/2,A8e=12;function Qne(e,t){var n=wi(AS*be(t)),r=n*n,i=r*r*r;return[e*Se(n)/(AS*(hy+3*py*r+i*(7*gy+9*my*r))),n*(hy+py*r+i*(gy+my*r))]}Qne.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<A8e&&(a=n*(hy+py*r+i*(gy+my*r))-t,l=hy+3*py*r+i*(7*gy+9*my*r),n-=s=a/l,r=n*n,i=r*r*r,!(We(s)<oS));++o);return[AS*e*(hy+3*py*r+i*(7*gy+9*my*r))/Se(n),wi(be(n)/AS)]};function T8e(){return Aa(Qne).scale(177.158)}function Zne(e,t){var n=Se(t),r=Se(e)*n;return[n*be(e)/r,be(t)/r]}Zne.invert=Av(em);function M8e(){return Aa(Zne).scale(144.049).clipAngle(60)}function F8e(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,c,f,d=1,h=1,p=KC({point:function(x,w){var k=b([x,w]);this.stream.point(k[0],k[1])}}),g=f1,m,y;function v(){return d=e*r,h=e*i,m=y=null,b}function b(x){var w=x[0]*d,k=x[1]*h;if(o){var S=k*s-w*a;w=w*s+k*a,k=S}return[w+t,k+n]}return b.invert=function(x){var w=x[0]-t,k=x[1]-n;if(o){var S=k*s+w*a;w=w*s-k*a,k=S}return[w/d,k/h]},b.stream=function(x){return m&&y===x?m:m=p(g(y=x))},b.postclip=function(x){return arguments.length?(g=x,l=u=c=f=null,v()):g},b.clipExtent=function(x){return arguments.length?(g=x==null?(l=u=c=f=null,f1):Pne(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),v()):l==null?null:[[l,u],[c,f]]},b.scale=function(x){return arguments.length?(e=+x,v()):e},b.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],v()):[t,n]},b.angle=function(x){return arguments.length?(o=x%360*Ne,a=be(o),s=Se(o),v()):o*Jt},b.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,v()):i<0},b.fitExtent=function(x,w){return QC(b,x,w)},b.fitSize=function(x,w){return fD(b,x,w)},b.fitWidth=function(x,w){return dD(b,x,w)},b.fitHeight=function(x,w){return hD(b,x,w)},b}function Jne(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Jne.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(We(i)>xe&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function P8e(){return Aa(Jne).scale(175.295)}function ere(e,t){return[Se(t)*be(e),be(t)]}ere.invert=Av(wi);function R8e(){return Aa(ere).scale(249.5).clipAngle(90+xe)}function tre(e,t){var n=Se(t),r=1+Se(e)*n;return[n*be(e)/r,be(t)/r]}tre.invert=Av(function(e){return 2*em(e)});function D8e(){return Aa(tre).scale(250).clipAngle(142)}function nre(e,t){return[aS(lD((Kt+t)/2)),-e]}nre.invert=function(e,t){return[-t,2*em(mne(e))-Kt]};function O8e(){var e=Kne(nre),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var N8e=Math.abs,t4=Math.cos,TS=Math.sin,I8e=1e-6,rre=Math.PI,n4=rre/2,jB=L8e(2);function UB(e){return e>1?n4:e<-1?-n4:Math.asin(e)}function L8e(e){return e>0?Math.sqrt(e):0}function z8e(e,t){var n=e*TS(t),r=30,i;do t-=i=(t+TS(t)-n)/(1+t4(t));while(N8e(i)>I8e&&--r>0);return t/2}function B8e(e,t,n){function r(i,o){return[e*i*t4(o=z8e(n,o)),t*TS(o)]}return r.invert=function(i,o){return o=UB(o/t),[i/(e*t4(o)),UB((2*o+TS(2*o))/n)]},r}var j8e=B8e(jB/n4,jB,rre);function U8e(){return Aa(j8e).scale(169.529)}const V8e=Wne(),r4=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function W8e(e,t){return function n(){const r=t();return r.type=e,r.path=Wne().projection(r),r.copy=r.copy||function(){const i=n();return r4.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},vee(r)}}function gD(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(MS[e]=W8e(e,t),this):MS[e]||null}function ire(e){return e&&e.path||V8e}const MS={albers:qne,albersusa:b8e,azimuthalequalarea:x8e,azimuthalequidistant:w8e,conicconformal:C8e,conicequalarea:ES,conicequidistant:$8e,equalEarth:T8e,equirectangular:_8e,gnomonic:M8e,identity:F8e,mercator:S8e,mollweide:U8e,naturalEarth1:P8e,orthographic:R8e,stereographic:D8e,transversemercator:O8e};for(const e in MS)gD(e,MS[e]);function H8e(){}const Ba=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ore(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],f=[];return o(l,u,d=>{n(d,l,u),q8e(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(G8e((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var f=[],d=[],h,p,g,m,y,v;for(h=p=-1,m=l[0]>=u,Ba[m<<1].forEach(b);++h<e-1;)g=m,m=l[h+1]>=u,Ba[g|m<<1].forEach(b);for(Ba[m<<0].forEach(b);++p<t-1;){for(h=-1,m=l[p*e+e]>=u,y=l[p*e]>=u,Ba[m<<1|y<<2].forEach(b);++h<e-1;)g=m,m=l[p*e+e+h+1]>=u,v=y,y=l[p*e+h+1]>=u,Ba[g|m<<1|y<<2|v<<3].forEach(b);Ba[m|y<<3].forEach(b)}for(h=-1,y=l[p*e]>=u,Ba[y<<2].forEach(b);++h<e-1;)v=y,y=l[p*e+h+1]>=u,Ba[y<<2|v<<3].forEach(b);Ba[y<<3].forEach(b);function b(x){var w=[x[0][0]+h,x[0][1]+p],k=[x[1][0]+h,x[1][1]+p],S=s(w),C=s(k),_,$;(_=d[S])?($=f[C])?(delete d[_.end],delete f[$.start],_===$?(_.ring.push(k),c(_.ring)):f[_.start]=d[$.end]={start:_.start,end:$.end,ring:_.ring.concat($.ring)}):(delete d[_.end],_.ring.push(k),d[_.end=C]=_):(_=f[C])?($=d[S])?(delete f[_.start],delete d[$.end],_===$?(_.ring.push(k),c(_.ring)):f[$.start]=d[_.end]={start:$.start,end:_.end,ring:$.ring.concat(_.ring)}):(delete f[_.start],_.ring.unshift(w),f[_.start=S]=_):f[S]=d[C]={start:S,end:C,ring:[w,k]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,m,y=u[g*e+p];d>0&&d<e&&p===d&&(m=u[g*e+p-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&g===h&&(m=u[(g-1)*e+p],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||q("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:H8e,r):n===a},r}function q8e(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function G8e(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Y8e(e,t[n]))return i;return 0}function Y8e(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],f=e[a],d=f[0],h=f[1];if(X8e(l,f,t))return 0;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function X8e(e,t,n){var r;return K8e(e,t,n)&&Q8e(e[r=+(e[0]===t[0])],n[r],t[r])}function K8e(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Q8e(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function sre(e,t,n){return function(r){var i=ya(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?tc(o,s,e):a/(e+1);return Ii(o+l,s,l)}}function mD(e){V.call(this,null,e)}mD.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ne(mD,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Cr,o=ore().smooth(e.smooth!==!1),s=e.thresholds||Z8e(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),f=o.size([c.width,c.height])(c.values,G(s)?s:s(c.values));J8e(f,c,u,e),f.forEach(d=>{l.push(gC(u,st(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Z8e(e,t,n){const r=sre(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Bf(t(i).values)))}function J8e(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Oe(i)&&(i=i(n,r)),Oe(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(Qe(i)?i:i[0])||1,a=(Qe(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(are(t,s,a,l,u))}function are(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(f){f.forEach(u)}function u(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(l),f}}function VB(e,t,n){const r=e>=0?e:a6(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function m5(e){return Oe(e)?e:_r(+e)}function lre(){var e=l=>l[0],t=l=>l[1],n=Ug,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const c=VB(r[0],l,e)>>s,f=VB(r[1],l,t)>>s,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>s),g=2*h+(o>>s),m=new Float32Array(p*g),y=new Float32Array(p*g);let v=m;l.forEach(x=>{const w=d+(+e(x)>>s),k=h+(+t(x)>>s);w>=0&&w<p&&k>=0&&k<g&&(m[w+k*p]+=+n(x))}),c>0&&f>0?(uh(p,g,m,y,c),ch(p,g,y,m,f),uh(p,g,m,y,c),ch(p,g,y,m,f),uh(p,g,m,y,c),ch(p,g,y,m,f)):c>0?(uh(p,g,m,y,c),uh(p,g,y,m,c),uh(p,g,m,y,c),v=y):f>0&&(ch(p,g,m,y,f),ch(p,g,y,m,f),ch(p,g,m,y,f),v=y);const b=u?Math.pow(2,-2*s):1/mQ(v);for(let x=0,w=p*g;x<w;++x)v[x]*=b;return{values:v,scale:1<<s,width:p,height:g,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=m5(l),a):e},a.y=function(l){return arguments.length?(t=m5(l),a):t},a.weight=function(l){return arguments.length?(n=m5(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||q("invalid size"),i=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||q("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=ae(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&q("invalid bandwidth"),r=l,a):r},a}function uh(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function ch(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function yD(e){V.call(this,null,e)}yD.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const eOe=["x","y","weight","size","cellSize","bandwidth"];function ure(e,t){return eOe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ne(yD,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=tOe(r,e.groupby),o=(e.groupby||[]).map(Zt),s=ure(lre(),e),a=e.as||"grid",l=[];function u(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return l=i.map(c=>st(u({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function tOe(e,t){var n=[],r=c=>c(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function vD(e){V.call(this,null,e)}vD.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ne(vD,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=ore().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||sre(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=ure(lre(),e)(i,!0),l=are(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=G(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(st),n}});const i4="Feature",bD="FeatureCollection",nOe="MultiPoint";function xD(e){V.call(this,null,e)}xD.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ne(xD,V,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&Cr,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(br(a))||o&&t.modified(br(o))||s&&t.modified(br(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),o&&s&&(t.visit(l,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:i4,geometry:{type:nOe,coordinates:r}})),this.value={type:bD,features:n}}});function wD(e){V.call(this,null,e)}wD.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ne(wD,V,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Cr,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=ire(e.projection),n.materialize().reflow()):s=i===Cr||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=rOe(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function rOe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function SD(e){V.call(this,null,e)}SD.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ne(SD,V,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function kD(e){V.call(this,null,e)}kD.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ne(kD,V,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=iOe(ire(e.projection),e.field||Mo("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function iOe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function CD(e){V.call(this,[],e),this.generator=ZDe()}CD.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ne(CD,V,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Oe(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(fZ(n[0],i)):t.add.push(st(i)),n[0]=i,t}});function _D(e){V.call(this,null,e)}_D.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ne(_D,V,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Cr,o=sOe(e.opacity,e),s=oOe(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Bf(n.map(u=>Bf(i(u).values))):0};return n.forEach(u=>{const c=i(u),f=De({},u,l);r||(f.$max=Bf(c.values||[])),u[a]=aOe(c,f,s.dep?s:_r(s(f)),o.dep?o:_r(o(f)))}),t.reflow(!0).modifies(a)}});function oOe(e,t){let n;return Oe(e)?(n=r=>ic(e(r,t)),n.dep=cre(e)):n=_r(ic(e||"#888")),n}function sOe(e,t){let n;return Oe(e)?(n=r=>e(r,t),n.dep=cre(e)):e?n=_r(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function cre(e){if(!Oe(e))return!1;const t=ys(br(e));return t.$x||t.$y||t.$value||t.$max}function aOe(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,c=e.values,f=c?m=>c[m]:du,d=qu(l-s,u-a),h=d.getContext("2d"),p=h.getImageData(0,0,l-s,u-a),g=p.data;for(let m=a,y=0;m<u;++m){t.$y=m-a;for(let v=s,b=m*i;v<l;++v,y+=4){t.$x=v-s,t.$value=f(v+b);const x=n(t);g[y+0]=x.r,g[y+1]=x.g,g[y+2]=x.b,g[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function fre(e){V.call(this,null,e),this.modified(!0)}ne(fre,V,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=uOe(e.type),r4.forEach(r=>{e[r]!=null&&WB(n,r,e[r])})):r4.forEach(r=>{e.modified(r)&&WB(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&lOe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function lOe(e,t){const n=cOe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function uOe(e){const t=gD((e||"mercator").toLowerCase());return t||q("Unrecognized projection type: "+e),t()}function WB(e,t,n){Oe(e[t])&&e[t](n)}function cOe(e){return e=ae(e),e.length===1?e[0]:{type:bD,features:e.reduce((t,n)=>t.concat(fOe(n)),[])}}function fOe(e){return e.type===bD?e.features:ae(e).filter(t=>t!=null).map(t=>t.type===i4?t:{type:i4,geometry:t})}const dOe=Object.freeze(Object.defineProperty({__proto__:null,contour:vD,geojson:xD,geopath:wD,geopoint:SD,geoshape:kD,graticule:CD,heatmap:_D,isocontour:mD,kde2d:yD,projection:fre},Symbol.toStringTag,{value:"Module"}));function hOe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function pOe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return dre(this.cover(t,n),t,n,e)}function dre(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,f,d,h,p,g,m,y,v;if(!o)return e._root=s,e;for(;o.length;)if((g=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d,i=o,!(o=o[y=m<<1|g]))return i[y]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d;while((y=m<<1|g)===(v=(p>=d)<<1|h>=f));return i[v]=o,i[y]=s,e}function gOe(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>f&&(f=o));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)dre(this,s[n],a[n],e[n]);return this}function mOe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function yOe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function vOe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Br(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function bOe(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Br(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>f||(l=p.x1)<i||(u=p.y1)<o))if(h.length){var m=(s+l)/2,y=(a+u)/2;d.push(new Br(h[3],m,y,l,u),new Br(h[2],s,y,m,u),new Br(h[1],m,a,l,y),new Br(h[0],s,a,m,y)),(g=(t>=y)<<1|e>=m)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);i=e-w,o=t-w,c=e+w,f=t+w,r=h.data}}return r}function xOe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,d,h,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(s+l)/2))?s=d:l=d,(g=f>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function wOe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function SOe(){return this._root}function kOe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function COe(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new Br(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,c=(s+l)/2;(i=r[3])&&t.push(new Br(i,u,c,a,l)),(i=r[2])&&t.push(new Br(i,o,c,u,l)),(i=r[1])&&t.push(new Br(i,u,s,a,c)),(i=r[0])&&t.push(new Br(i,o,s,u,c))}return this}function _Oe(e){var t=[],n=[],r;for(this._root&&t.push(new Br(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(s+l)/2,f=(a+u)/2;(o=i[0])&&t.push(new Br(o,s,a,c,f)),(o=i[1])&&t.push(new Br(o,c,a,l,f)),(o=i[2])&&t.push(new Br(o,s,f,c,u)),(o=i[3])&&t.push(new Br(o,c,f,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function EOe(e){return e[0]}function $Oe(e){return arguments.length?(this._x=e,this):this._x}function AOe(e){return e[1]}function TOe(e){return arguments.length?(this._y=e,this):this._y}function ED(e,t,n){var r=new $D(t??EOe,n??AOe,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function $D(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function HB(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Jr=ED.prototype=$D.prototype;Jr.copy=function(){var e=new $D(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=HB(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=HB(r));return e};Jr.add=pOe;Jr.addAll=gOe;Jr.cover=mOe;Jr.data=yOe;Jr.extent=vOe;Jr.find=bOe;Jr.remove=xOe;Jr.removeAll=wOe;Jr.root=SOe;Jr.size=kOe;Jr.visit=COe;Jr.visitAfter=_Oe;Jr.x=$Oe;Jr.y=TOe;function Ur(e){return function(){return e}}function Mu(e){return(e()-.5)*1e-6}function MOe(e){return e.x+e.vx}function FOe(e){return e.y+e.vy}function POe(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Ur(e==null?1:+e));function s(){for(var u,c=t.length,f,d,h,p,g,m,y=0;y<o;++y)for(f=ED(t,MOe,FOe).visitAfter(a),u=0;u<c;++u)d=t[u],g=n[d.index],m=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,x,w,k,S){var C=b.data,_=b.r,$=g+_;if(C){if(C.index>d.index){var A=h-C.x-C.vx,N=p-C.y-C.vy,M=A*A+N*N;M<$*$&&(A===0&&(A=Mu(r),M+=A*A),N===0&&(N=Mu(r),M+=N*N),M=($-(M=Math.sqrt(M)))/M*i,d.vx+=(A*=M)*($=(_*=_)/(m+_)),d.vy+=(N*=M)*$,C.vx-=A*($=1-$),C.vy-=N*$)}return}return x>h+$||k<h-$||w>p+$||S<p-$}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return s.initialize=function(u,c){t=u,r=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Ur(+u),l(),s):e},s}function ROe(e){return e.index}function qB(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function DOe(e){var t=ROe,n=f,r,i=Ur(30),o,s,a,l,u,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,v=e.length;y<c;++y)for(var b=0,x,w,k,S,C,_,$;b<v;++b)x=e[b],w=x.source,k=x.target,S=k.x+k.vx-w.x-w.vx||Mu(u),C=k.y+k.vy-w.y-w.vy||Mu(u),_=Math.sqrt(S*S+C*C),_=(_-o[b])/_*m*r[b],S*=_,C*=_,k.vx-=S*($=l[b]),k.vy-=C*$,w.vx+=S*($=1-$),w.vy+=C*$}function h(){if(s){var m,y=s.length,v=e.length,b=new Map(s.map((w,k)=>[t(w,k,s),w])),x;for(m=0,a=new Array(y);m<v;++m)x=e[m],x.index=m,typeof x.source!="object"&&(x.source=qB(b,x.source)),typeof x.target!="object"&&(x.target=qB(b,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)x=e[m],l[m]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(v),p(),o=new Array(v),g()}}function p(){if(s)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function g(){if(s)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){s=m,u=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Ur(+m),p(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Ur(+m),g(),d):i},d}var OOe={value:()=>{}};function hre(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new b2(n)}function b2(e){this._=e}function NOe(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}b2.prototype=hre.prototype={constructor:b2,on:function(e,t){var n=this._,r=NOe(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=IOe(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=GB(n[i],e.name,t);else if(t==null)for(i in n)n[i]=GB(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new b2(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function IOe(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function GB(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=OOe,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var hg=0,F0=0,Um=0,pre=1e3,FS,P0,PS=0,ud=0,JC=0,p1=typeof performance=="object"&&performance.now?performance:Date,gre=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function AD(){return ud||(gre(LOe),ud=p1.now()+JC)}function LOe(){ud=0}function RS(){this._call=this._time=this._next=null}RS.prototype=mre.prototype={constructor:RS,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?AD():+n)+(t==null?0:+t),!this._next&&P0!==this&&(P0?P0._next=this:FS=this,P0=this),this._call=e,this._time=n,o4()},stop:function(){this._call&&(this._call=null,this._time=1/0,o4())}};function mre(e,t,n){var r=new RS;return r.restart(e,t,n),r}function zOe(){AD(),++hg;for(var e=FS,t;e;)(t=ud-e._time)>=0&&e._call.call(void 0,t),e=e._next;--hg}function YB(){ud=(PS=p1.now())+JC,hg=F0=0;try{zOe()}finally{hg=0,jOe(),ud=0}}function BOe(){var e=p1.now(),t=e-PS;t>pre&&(JC-=t,PS=e)}function jOe(){for(var e,t=FS,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:FS=n);P0=e,o4(r)}function o4(e){if(!hg){F0&&(F0=clearTimeout(F0));var t=e-ud;t>24?(e<1/0&&(F0=setTimeout(YB,e-p1.now()-JC)),Um&&(Um=clearInterval(Um))):(Um||(PS=p1.now(),Um=setInterval(BOe,pre)),hg=1,gre(YB))}}function UOe(e,t,n){var r=new RS,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?AD():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const VOe=1664525,WOe=1013904223,XB=4294967296;function HOe(){let e=1;return()=>(e=(VOe*e+WOe)%XB)/XB}function qOe(e){return e.x}function GOe(e){return e.y}var YOe=10,XOe=Math.PI*(3-Math.sqrt(5));function KOe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=mre(f),u=hre("tick","end"),c=HOe();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(g){var m,y=e.length,v;g===void 0&&(g=1);for(var b=0;b<g;++b)for(n+=(o-n)*i,a.forEach(function(x){x(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=YOe*Math.sqrt(.5+g),b=g*XOe;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(s=1-g,t):1-s},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,p(m)),t):a.get(g)},find:function(g,m,y){var v=0,b=e.length,x,w,k,S,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],x=g-S.x,w=m-S.y,k=x*x+w*w,k<y&&(C=S,y=k);return C},on:function(g,m){return arguments.length>1?(u.on(g,m),t):u.on(g)}}}function QOe(){var e,t,n,r,i=Ur(-30),o,s=1,a=1/0,l=.81;function u(h){var p,g=e.length,m=ED(e,qOe,GOe).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],m.visit(d)}function c(){if(e){var h,p=e.length,g;for(o=new Array(p),h=0;h<p;++h)g=e[h],o[g.index]=+i(g,h,e)}}function f(h){var p=0,g,m,y=0,v,b,x;if(h.length){for(v=b=x=0;x<4;++x)(g=h[x])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,v+=m*g.x,b+=m*g.y);h.x=v/y,h.y=b/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=o[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,m){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=m-p,x=y*y+v*v;if(b*b/l<x)return x<a&&(y===0&&(y=Mu(n),x+=y*y),v===0&&(v=Mu(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)),t.vx+=y*h.value*r/x,t.vy+=v*h.value*r/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Mu(n),x+=y*y),v===0&&(v=Mu(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)));do h.data!==t&&(b=o[h.data.index]*r/x,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ur(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function ZOe(e){var t=Ur(.1),n,r,i;typeof e!="function"&&(e=Ur(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ur(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ur(+a),s(),o):e},o}function JOe(e){var t=Ur(.1),n,r,i;typeof e!="function"&&(e=Ur(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ur(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ur(+a),s(),o):e},o}const KB={center:hOe,collide:POe,nbody:QOe,link:DOe,x:ZOe,y:JOe},R0="forces",s4=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],e9e=["static","iterations"],yre=["x","y","vx","vy"];function TD(e){V.call(this,null,e)}TD.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:yre}]};ne(TD,V,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(s4),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&vre(n,e,0,t)):(this.value=n=n9e(t.source,e),n.on("tick",t9e(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(e9e)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==R0||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(yre)}});function t9e(e,t){return()=>e.touch(t).run()}function n9e(e,t){const n=KOe(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),vre(n,t,!0).on("end",()=>o=!0)}function vre(e,t,n,r){var i=ae(t.forces),o,s,a,l;for(o=0,s=s4.length;o<s;++o)a=s4[o],a!==R0&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=R0+o,a=n||t.modified(R0,o)?i9e(i[o]):r&&r9e(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(R0+o,null);return e.numForces=i.length,e}function r9e(e,t){var n,r;for(n in e)if(Oe(r=e[n])&&t.modified(br(r)))return 1;return 0}function i9e(e){var t,n;ce(KB,e.force)||q("Unrecognized force: "+e.force),t=KB[e.force]();for(n in e)Oe(t[n])&&o9e(t[n],e[n],e);return t}function o9e(e,t,n){e(Oe(t)?r=>t(r,n):t)}const s9e=Object.freeze(Object.defineProperty({__proto__:null,force:TD},Symbol.toStringTag,{value:"Module"}));function a9e(e,t){return e.parent===t.parent?1:2}function l9e(e){return e.reduce(u9e,0)/e.length}function u9e(e,t){return e+t.x}function c9e(e){return 1+e.reduce(f9e,0)}function f9e(e,t){return Math.max(e,t.y)}function d9e(e){for(var t;t=e.children;)e=t[0];return e}function h9e(e){for(var t;t=e.children;)e=t[t.length-1];return e}function p9e(){var e=a9e,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=l9e(h),d.y=c9e(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var l=d9e(o),u=h9e(o),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function g9e(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function m9e(){return this.eachAfter(g9e)}function y9e(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function v9e(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function b9e(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function x9e(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function w9e(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function S9e(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function k9e(e){for(var t=this,n=C9e(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function C9e(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function _9e(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function E9e(){return Array.from(this)}function $9e(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function A9e(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*T9e(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function MD(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=P9e)):t===void 0&&(t=F9e);for(var n=new pg(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new pg(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(bre)}function M9e(){return MD(this).eachBefore(R9e)}function F9e(e){return e.children}function P9e(e){return Array.isArray(e)?e[1]:null}function R9e(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function bre(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function pg(e){this.data=e,this.depth=this.height=0,this.parent=null}pg.prototype=MD.prototype={constructor:pg,count:m9e,each:y9e,eachAfter:b9e,eachBefore:v9e,find:x9e,sum:w9e,sort:S9e,path:k9e,ancestors:_9e,descendants:E9e,leaves:$9e,links:A9e,copy:M9e,[Symbol.iterator]:T9e};function x2(e){return e==null?null:xre(e)}function xre(e){if(typeof e!="function")throw new Error;return e}function pf(){return 0}function bh(e){return function(){return e}}const D9e=1664525,O9e=1013904223,QB=4294967296;function N9e(){let e=1;return()=>(e=(D9e*e+O9e)%QB)/QB}function I9e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function L9e(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function z9e(e,t){for(var n=0,r=(e=L9e(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&wre(s,o)?++n:(s=j9e(i=B9e(i,o)),n=0);return s}function B9e(e,t){var n,r;if(y5(t,e))return[t];for(n=0;n<e.length;++n)if(sx(t,e[n])&&y5(D0(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(sx(D0(e[n],e[r]),t)&&sx(D0(e[n],t),e[r])&&sx(D0(e[r],t),e[n])&&y5(Sre(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function sx(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function wre(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function y5(e,t){for(var n=0;n<t.length;++n)if(!wre(e,t[n]))return!1;return!0}function j9e(e){switch(e.length){case 1:return U9e(e[0]);case 2:return D0(e[0],e[1]);case 3:return Sre(e[0],e[1],e[2])}}function U9e(e){return{x:e.x,y:e.y,r:e.r}}function D0(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,c=a-i,f=Math.sqrt(l*l+u*u);return{x:(n+o+l/f*c)/2,y:(r+s+u/f*c)/2,r:(f+i+a)/2}}function Sre(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-s,h=r-u,p=i-a,g=i-c,m=l-o,y=f-o,v=r*r+i*i-o*o,b=v-s*s-a*a+l*l,x=v-u*u-c*c+f*f,w=h*p-d*g,k=(p*x-g*b)/(w*2)-r,S=(g*m-p*y)/w,C=(h*b-d*x)/(w*2)-i,_=(d*y-h*m)/w,$=S*S+_*_-1,A=2*(o+k*S+C*_),N=k*k+C*C-o*o,M=-(Math.abs($)>1e-6?(A+Math.sqrt(A*A-4*$*N))/(2*$):N/A);return{x:r+k+S*M,y:i+C+_*M,r:M}}function ZB(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function JB(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ej(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function ax(e){this._=e,this.next=null,this.previous=null}function V9e(e,t){if(!(o=(e=I9e(e)).length))return 0;var n,r,i,o,s,a,l,u,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;ZB(r,n,i=e[2]),n=new ax(n),r=new ax(r),i=new ax(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){ZB(n._,r._,i=e[l]),i=new ax(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(JB(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(JB(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=ej(n);(i=i.next)!==r;)(a=ej(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=z9e(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function W9e(e){return Math.sqrt(e.value)}function H9e(){var e=null,t=1,n=1,r=pf;function i(o){const s=N9e();return o.x=t/2,o.y=n/2,e?o.eachBefore(tj(e)).eachAfter(v5(r,.5,s)).eachBefore(nj(1)):o.eachBefore(tj(W9e)).eachAfter(v5(pf,1,s)).eachAfter(v5(r,o.r/Math.min(t,n),s)).eachBefore(nj(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=x2(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:bh(+o),i):r},i}function tj(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function v5(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=V9e(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function nj(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function kre(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Tv(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function q9e(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(kre),s}function o(s,a){return function(l){l.children&&Tv(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var G9e={depth:-1},rj={},b5={};function Y9e(e){return e.id}function X9e(e){return e.parentId}function ij(){var e=Y9e,t=X9e,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,c,f,d,h,p,g,m=new Map;if(n!=null){const y=o.map((x,w)=>K9e(n(x,w,i))),v=y.map(oj),b=new Set(y).add("");for(const x of v)b.has(x)||(b.add(x),y.push(x),v.push(oj(x)),o.push(b5));s=(x,w)=>y[w],a=(x,w)=>v[w]}for(c=0,l=o.length;c<l;++c)u=o[c],h=o[c]=new pg(u),(p=s(u,c,i))!=null&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?rj:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=o[c],p=h.parent){if(d=m.get(p),!d)throw new Error("missing: "+p);if(d===rj)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===b5&&f.children.length===1;)f=f.children[0],--l;for(let y=o.length-1;y>=0&&(h=o[y],h.data===b5);--y)h.data=null}if(f.parent=G9e,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(bre),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=x2(i),r):e},r.parentId=function(i){return arguments.length?(t=x2(i),r):t},r.path=function(i){return arguments.length?(n=x2(i),r):n},r}function K9e(e){e=`${e}`;let t=e.length;return a4(e,t-1)&&!a4(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function oj(e){let t=e.length;if(t<2)return"";for(;--t>1&&!a4(e,t););return e.slice(0,t)}function a4(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Q9e(e,t){return e.parent===t.parent?1:2}function x5(e){var t=e.children;return t?t[0]:e.t}function w5(e){var t=e.children;return t?t[t.length-1]:e.t}function Z9e(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function J9e(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function eNe(e,t,n){return e.a.parent===t.parent?e.a:n}function w2(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}w2.prototype=Object.create(pg.prototype);function tNe(e){for(var t=new w2(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new w2(o[s],s)),i.parent=n;return(t.parent=new w2(null,0)).children=[t],t}function nNe(){var e=Q9e,t=1,n=1,r=null;function i(u){var c=tNe(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,g=p-f.x,m=t/(d.x+p+g),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return u}function o(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){J9e(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||f[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var d=u,h=u,p=c,g=d.parent.children[0],m=d.m,y=h.m,v=p.m,b=g.m,x;p=w5(p),d=x5(d),p&&d;)g=x5(g),h=w5(h),h.a=u,x=p.z+v-d.z-m+e(p._,d._),x>0&&(Z9e(eNe(p,u,f),u,x),m+=x,y+=x),v+=p.m,m+=d.m,b+=g.m,y+=h.m;p&&!w5(h)&&(h.t=p,h.m+=v-y),d&&!x5(g)&&(g.t=d,g.m+=m-b,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function e_(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var Cre=(1+Math.sqrt(5))/2;function _re(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,c=0,f=0,d=a.length,h,p,g=t.value,m,y,v,b,x,w,k;c<d;){h=i-n,p=o-r;do m=a[f++].value;while(!m&&f<d);for(y=v=m,w=Math.max(p/h,h/p)/(g*e),k=m*m*w,x=Math.max(v/k,k/y);f<d;++f){if(m+=u=a[f].value,u<y&&(y=u),u>v&&(v=u),k=m*m*w,b=Math.max(v/k,k/y),b>x){m-=u;break}x=b}s.push(l={value:m,dice:h<p,children:a.slice(c,f)}),l.dice?Tv(l,n,r,i,g?r+=p*m/g:o):e_(l,n,r,g?n+=h*m/g:i,o),g-=m,c=f}return s}const Ere=function e(t){function n(r,i,o,s,a){_re(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Cre);function rNe(){var e=Ere,t=!1,n=1,r=1,i=[0],o=pf,s=pf,a=pf,l=pf,u=pf;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(kre),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,m=d.x1-h,y=d.y1-h;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,p+=u(d)-h,g+=s(d)-h,m-=a(d)-h,y-=l(d)-h,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=xre(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:bh(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:bh(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:bh(+d),c):a},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:bh(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:bh(+d),c):u},c}function iNe(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,g,m,y){if(f>=d-1){var v=o[f];v.x0=p,v.y0=g,v.x1=m,v.y1=y;return}for(var b=u[f],x=h/2+b,w=f+1,k=d-1;w<k;){var S=w+k>>>1;u[S]<x?w=S+1:k=S}x-u[w-1]<u[w]-x&&f+1<w&&--w;var C=u[w]-b,_=h-C;if(m-p>y-g){var $=h?(p*_+m*C)/h:m;c(f,w,C,p,g,$,y),c(w,d,_,$,g,m,y)}else{var A=h?(g*_+y*C)/h:y;c(f,w,C,p,g,m,A),c(w,d,_,p,A,m,y)}}}function oNe(e,t,n,r,i){(e.depth&1?e_:Tv)(e,t,n,r,i)}const sNe=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,p=l.length,g=r.value;++d<p;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?Tv(u,i,o,s,g?o+=(a-o)*u.value/g:a):e_(u,i,o,g?i+=(s-i)*u.value/g:s,a),g-=u.value}else r._squarify=l=_re(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Cre);function l4(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function FD(e){V.call(this,null,e)}FD.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const aNe=e=>e.values;ne(FD,V,{transform(e,t){t.source||q("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&pC(s.data)&&i.rem.push(s.data)}),this.value=o=MD({values:ae(e.keys).reduce((s,a)=>(s.key(a),s),lNe()).entries(i.source)},aNe),n&&o.each(s=>{s.children&&(s=st(s.data),i.add.push(s),i.source.push(s))}),l4(o,ve,ve)),i.source.root=o,i}});function lNe(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=l[f])?h.push(d):l[f]=[d];for(f in l)u[f]=n(l[f],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function Ol(e){V.call(this,null,e)}const uNe=(e,t)=>e.parent===t.parent?1:2;ne(Ol,V,{transform(e,t){(!t.source||!t.source.root)&&q(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Dd(e.sort,s=>s.data)),cNe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?uNe:Ug);try{this.value=n(i)}catch(s){q(s)}return i.each(s=>fNe(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function cNe(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function fNe(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const u4=["x","y","r","depth","children"];function PD(e){Ol.call(this,e)}PD.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:u4.length,default:u4}]};ne(PD,Ol,{layout:H9e,params:["radius","size","padding"],fields:u4});const c4=["x0","y0","x1","y1","depth","children"];function RD(e){Ol.call(this,e)}RD.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:c4.length,default:c4}]};ne(RD,Ol,{layout:q9e,params:["size","round","padding"],fields:c4});function DD(e){V.call(this,null,e)}DD.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ne(DD,V,{transform(e,t){t.source||q("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?l4(ij().id(e.key).parentId(e.parentKey)(i.source),e.key,Fo):l4(ij()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const sj={tidy:nNe,cluster:p9e},f4=["x","y","depth","children"];function OD(e){Ol.call(this,e)}OD.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:f4.length,default:f4}]};ne(OD,Ol,{layout(e){const t=e||"tidy";if(ce(sj,t))return sj[t]();q("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:f4});function ND(e){V.call(this,[],e)}ND.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ne(ND,V,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||q("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[ve(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[ve(a)]&&o[ve(l)]&&i.add.push(st({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[ve(s)]=1),n.forEach(s=>{(o[ve(s.source)]||o[ve(s.target)])&&i.mod.push(s)})),i}});const aj={binary:iNe,dice:Tv,slice:e_,slicedice:oNe,squarify:Ere,resquarify:sNe},d4=["x0","y0","x1","y1","depth","children"];function ID(e){Ol.call(this,e)}ID.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:d4.length,default:d4}]};ne(ID,Ol,{layout(){const e=rNe();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ce(aj,t)?e.tile(aj[t]):q("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:d4});const dNe=Object.freeze(Object.defineProperty({__proto__:null,nest:FD,pack:PD,partition:RD,stratify:DD,tree:OD,treelinks:ND,treemap:ID},Symbol.toStringTag,{value:"Module"})),S5=4278190080;function hNe(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function pNe(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=qu(o,s).getContext("2d"),u=qu(o,s).getContext("2d"),c=a&&qu(o,s).getContext("2d");n.forEach(C=>S2(l,C,!1)),S2(u,t,!1),a&&S2(c,t,!0);const f=k5(l,o,s),d=k5(u,o,s),h=a&&k5(c,o,s),p=e.bitmap(),g=a&&e.bitmap();let m,y,v,b,x,w,k,S;for(y=0;y<s;++y)for(m=0;m<o;++m)x=y*o+m,w=f[x]&S5,S=d[x]&S5,k=a&&h[x]&S5,(w||k||S)&&(v=e(m),b=e(y),!i&&(w||S)&&p.set(v,b),a&&(w||k)&&g.set(v,b));return[p,g]}function k5(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function S2(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>S2(e,o.items,n))}):Ki[r].draw(e,{items:n?t.map(gNe):t})}function gNe(e){const t=gC(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const ja=5,$r=31,g1=32,su=new Uint32Array(g1+1),ts=new Uint32Array(g1+1);ts[0]=0;su[0]=~ts[0];for(let e=1;e<=g1;++e)ts[e]=ts[e-1]<<1|1,su[e]=~ts[e];function mNe(e,t){const n=new Uint32Array(~~((e*t+g1)/g1));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>ja]&1<<(a&$r)},set:(o,s)=>{const a=s*e+o;r(a>>>ja,1<<(a&$r))},clear:(o,s)=>{const a=s*e+o;i(a>>>ja,~(1<<(a&$r)))},getRange:(o,s,a,l)=>{let u=l,c,f,d,h;for(;u>=s;--u)if(c=u*e+o,f=u*e+a,d=c>>>ja,h=f>>>ja,d===h){if(n[d]&su[c&$r]&ts[(f&$r)+1])return!0}else{if(n[d]&su[c&$r]||n[h]&ts[(f&$r)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>ja,d=c>>>ja,f===d)r(f,su[u&$r]&ts[(c&$r)+1]);else for(r(f,su[u&$r]),r(d,ts[(c&$r)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>ja,d=c>>>ja,f===d)i(f,ts[u&$r]|su[(c&$r)+1]);else for(i(f,ts[u&$r]),i(d,su[(c&$r)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function yNe(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>mNe(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function vNe(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,c=Vi.width(s.datum,s.datum.text);let f=0,d,h,p,g,m,y,v;for(let b=0;b<l;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,g=a[b].y2===void 0?p:a[b].y2,m=(d+h)/2,y=(p+g)/2,v=Math.abs(h-d+g-p),v>=f&&(f=v,s.x=m,s.y=y);return m=c/2,y=u/2,d=s.x-m,h=s.x+m,p=s.y-y,g=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",p<0&&g<=o?s.baseline="top":0<=p&&o<g&&(s.baseline="bottom"),!0}}function DS(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Fu(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),c=e(t+l),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(u,f,c,d)||s.getRange(u,f,c,d)||a&&a.getRange(u,f,c,d)}function bNe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,c,f,d,h){const p=e.invert(u),g=e.invert(c);let m=f,y=o,v;if(!DS(p,g,d,h,i,o)&&!Fu(e,p,g,h,d,m,s,a)&&!Fu(e,p,g,h,d,h,s,null)){for(;y-m>=1;)v=(m+y)/2,Fu(e,p,g,h,d,v,s,a)?y=v:m=v;if(m>f)return[p,g,m,!0]}}return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Vi.width(u.datum,u.datum.text);let p=n?d:0,g=!1,m=!1,y=0,v,b,x,w,k,S,C,_,$,A,N,M,R,P,D,I,O;for(let j=0;j<f;++j){for(v=c[j].x,x=c[j].y,b=c[j].x2===void 0?v:c[j].x2,w=c[j].y2===void 0?x:c[j].y2,v>b&&(O=v,v=b,b=O),x>w&&(O=x,x=w,w=O),$=e(v),N=e(b),A=~~(($+N)/2),M=e(x),P=e(w),R=~~((M+P)/2),C=A;C>=$;--C)for(_=R;_>=M;--_)I=l(C,_,p,h,d),I&&([u.x,u.y,p,g]=I);for(C=A;C<=N;++C)for(_=R;_<=P;++_)I=l(C,_,p,h,d),I&&([u.x,u.y,p,g]=I);!g&&!n&&(D=Math.abs(b-v+w-x),k=(v+b)/2,S=(x+w)/2,D>=y&&!DS(k,S,h,d,i,o)&&!Fu(e,k,S,d,h,d,s,null)&&(y=D,u.x=k,u.y=S,m=!0))}return g||m?(k=h/2,S=d/2,s.setRange(e(u.x-k),e(u.y-S),e(u.x+k),e(u.y+S)),u.align="center",u.baseline="middle",!0):!1}}const xNe=[-1,-1,1,1],wNe=[-1,1,-1,1];function SNe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Vi.width(u.datum,u.datum.text),p=[];let g=n?d:0,m=!1,y=!1,v=0,b,x,w,k,S,C,_,$,A,N,M,R;for(let P=0;P<f;++P){for(b=c[P].x,w=c[P].y,x=c[P].x2===void 0?b:c[P].x2,k=c[P].y2===void 0?w:c[P].y2,p.push([e((b+x)/2),e((w+k)/2)]);p.length;)if([_,$]=p.pop(),!(s.get(_,$)||a.get(_,$)||l.get(_,$))){l.set(_,$);for(let D=0;D<4;++D)S=_+xNe[D],C=$+wNe[D],l.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(_),C=e.invert($),A=g,N=o,!DS(S,C,h,d,i,o)&&!Fu(e,S,C,d,h,A,s,a)&&!Fu(e,S,C,d,h,d,s,null)){for(;N-A>=1;)M=(A+N)/2,Fu(e,S,C,d,h,M,s,a)?N=M:A=M;A>g&&(u.x=S,u.y=C,g=A,m=!0)}}!m&&!n&&(R=Math.abs(x-b+k-w),S=(b+x)/2,C=(w+k)/2,R>=v&&!DS(S,C,h,d,i,o)&&!Fu(e,S,C,d,h,d,s,null)&&(v=R,u.x=S,u.y=C,y=!0))}return m||y?(S=h/2,C=d/2,s.setRange(e(u.x-S),e(u.y-C),e(u.x+S),e(u.y+C)),u.align="center",u.baseline="middle",!0):!1}}const kNe=["right","center","left"],CNe=["bottom","middle","top"];function _Ne(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,f=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=u.textWidth??0,h,p,g,m,y,v,b,x,w,k,S,C,_,$,A;for(let N=0;N<l;++N){if(h=(n[N]&3)-1,p=(n[N]>>>2&3)-1,g=h===0&&p===0||r[N]<0,m=h&&p?Math.SQRT1_2:1,y=r[N]<0?-1:1,v=c[1+h]+r[N]*h*m,S=c[4+p]+y*f*p/2+r[N]*p*m,x=S-f/2,w=S+f/2,C=e(v),$=e(x),A=e(w),!d)if(lj(C,C,$,A,s,a,v,v,x,w,c,g))d=Vi.width(u.datum,u.datum.text);else continue;if(k=v+y*d*h/2,v=k-d/2,b=k+d/2,C=e(v),_=e(b),lj(C,_,$,A,s,a,v,b,x,w,c,g))return u.x=h?h*y<0?b:v:k,u.y=p?p*y<0?w:x:S,u.align=kNe[h*y+1],u.baseline=CNe[p*y+1],s.setRange(C,$,_,A),!0}return!1}}function lj(e,t,n,r,i,o,s,a,l,u,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const C5=0,_5=4,E5=8,$5=0,A5=1,T5=2,ENe={"top-left":C5+$5,top:C5+A5,"top-right":C5+T5,left:_5+$5,middle:_5+A5,right:_5+T5,"bottom-left":E5+$5,bottom:E5+A5,"bottom-right":E5+T5},$Ne={naive:vNe,"reduced-search":bNe,floodfill:SNe};function ANe(e,t,n,r,i,o,s,a,l,u,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=TNe(r,f),h=MNe(i,f),p=FNe(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,m=g==="area",y=PNe(p,g,a,l),v=u===null||u===1/0,b=m&&c==="naive";let x=-1,w=-1;const k=e.map($=>{const A=v?Vi.width($,$.text):void 0;return x=Math.max(x,A),w=Math.max(w,$.fontSize),{datum:$,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y($),textWidth:A}});u=u===null||u===1/0?Math.max(x,w)+Math.max(...r):u;const S=yNe(t[0],t[1],u);let C;if(!b){n&&k.sort((N,M)=>n(N.datum,M.datum));let $=!1;for(let N=0;N<h.length&&!$;++N)$=h[N]===5||d[N]<0;const A=(p&&s||m)&&e.map(N=>N.datum);C=o.length||A?pNe(S,A||[],o,$,m):hNe(S,s&&k)}const _=m?$Ne[c](S,C,s,l):_Ne(S,C,h,d);return k.forEach($=>$.opacity=+_($)),k}function TNe(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function MNe(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=ENe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function FNe(e){return e&&e.mark&&e.mark.marktype}function PNe(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const h4=["x","y","opacity","align","baseline"],$re=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function LD(e){V.call(this,null,e)}LD.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:$re},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:h4.length,default:h4}]};ne(LD,V,{transform(e,t){function n(o){const s=e[o];return Oe(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&q("Size parameter should be specified as a [width, height] array.");const i=e.as||h4;return ANe(t.materialize(t.SOURCE).source||[],e.size,e.sort,ae(e.offset==null?1:e.offset),ae(e.anchor||$re),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const RNe=Object.freeze(Object.defineProperty({__proto__:null,label:LD},Symbol.toStringTag,{value:"Module"}));function Are(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function zD(e){V.call(this,null,e)}zD.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ne(zD,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Are(r,e.groupby),o=(e.groupby||[]).map(Zt),s=o.length,a=e.as||[Zt(e.x),Zt(e.y)],l=[];i.forEach(u=>{TZ(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=u.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],l.push(st(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const p4={constant:b6,linear:x6,log:_Z,exp:EZ,pow:$Z,quad:w6,poly:AZ},DNe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function BD(e){V.call(this,null,e)}BD.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(p4)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ne(BD,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Are(r,e.groupby),o=(e.groupby||[]).map(Zt),s=e.method||"linear",a=e.order==null?3:e.order,l=DNe(s,a),u=e.as||[Zt(e.x),Zt(e.y)],c=p4[s],f=[];let d=e.extent;ce(p4,s)||q("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(st({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||ya(h,e.x),y=v=>{const b={};for(let x=0;x<o.length;++x)b[o[x]]=h.dims[x];b[u[0]]=v[0],b[u[1]]=v[1],f.push(st(b))};s==="linear"||s==="constant"?m.forEach(v=>y([v,g.predict(v)])):SC(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const ONe=Object.freeze(Object.defineProperty({__proto__:null,loess:zD,regression:BD},Symbol.toStringTag,{value:"Module"})),pl=11102230246251565e-32,ar=134217729,NNe=(3+8*pl)*pl;function M5(e,t,n,r,i){let o,s,a,l,u=t[0],c=r[0],f=0,d=0;c>u==c>-u?(o=u,u=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>u==c>-u?(s=u+o,a=o-(s-u),u=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>u==c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function INe(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Mv(e){return new Float64Array(e)}const LNe=(3+16*pl)*pl,zNe=(2+12*pl)*pl,BNe=(9+64*pl)*pl*pl,fh=Mv(4),uj=Mv(8),cj=Mv(12),fj=Mv(16),Ar=Mv(4);function jNe(e,t,n,r,i,o,s){let a,l,u,c,f,d,h,p,g,m,y,v,b,x,w,k,S,C;const _=e-i,$=n-i,A=t-o,N=r-o;x=_*N,d=ar*_,h=d-(d-_),p=_-h,d=ar*N,g=d-(d-N),m=N-g,w=p*m-(x-h*g-p*g-h*m),k=A*$,d=ar*A,h=d-(d-A),p=A-h,d=ar*$,g=d-(d-$),m=$-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,fh[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,fh[1]=b-(y+f)+(f-k),C=v+y,f=C-v,fh[2]=v-(C-f)+(y-f),fh[3]=C;let M=INe(4,fh),R=zNe*s;if(M>=R||-M>=R||(f=e-_,a=e-(_+f)+(f-i),f=n-$,u=n-($+f)+(f-i),f=t-A,l=t-(A+f)+(f-o),f=r-N,c=r-(N+f)+(f-o),a===0&&l===0&&u===0&&c===0)||(R=BNe*s+NNe*Math.abs(M),M+=_*c+N*a-(A*u+$*l),M>=R||-M>=R))return M;x=a*N,d=ar*a,h=d-(d-a),p=a-h,d=ar*N,g=d-(d-N),m=N-g,w=p*m-(x-h*g-p*g-h*m),k=l*$,d=ar*l,h=d-(d-l),p=l-h,d=ar*$,g=d-(d-$),m=$-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,Ar[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,Ar[1]=b-(y+f)+(f-k),C=v+y,f=C-v,Ar[2]=v-(C-f)+(y-f),Ar[3]=C;const P=M5(4,fh,4,Ar,uj);x=_*c,d=ar*_,h=d-(d-_),p=_-h,d=ar*c,g=d-(d-c),m=c-g,w=p*m-(x-h*g-p*g-h*m),k=A*u,d=ar*A,h=d-(d-A),p=A-h,d=ar*u,g=d-(d-u),m=u-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,Ar[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,Ar[1]=b-(y+f)+(f-k),C=v+y,f=C-v,Ar[2]=v-(C-f)+(y-f),Ar[3]=C;const D=M5(P,uj,4,Ar,cj);x=a*c,d=ar*a,h=d-(d-a),p=a-h,d=ar*c,g=d-(d-c),m=c-g,w=p*m-(x-h*g-p*g-h*m),k=l*u,d=ar*l,h=d-(d-l),p=l-h,d=ar*u,g=d-(d-u),m=u-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,Ar[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,Ar[1]=b-(y+f)+(f-k),C=v+y,f=C-v,Ar[2]=v-(C-f)+(y-f),Ar[3]=C;const I=M5(D,cj,4,Ar,fj);return fj[I-1]}function lx(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=LNe*u?l:-jNe(e,t,n,r,i,o,u)}const dj=Math.pow(2,-52),ux=new Uint32Array(512);class OS{static from(t,n=qNe,r=GNe){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new OS(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let _=0;_<s;_++){const $=t[2*_],A=t[2*_+1];$<a&&(a=$),A<l&&(l=A),$>u&&(u=$),A>c&&(c=A),this._ids[_]=_}const f=(a+u)/2,d=(l+c)/2;let h,p,g;for(let _=0,$=1/0;_<s;_++){const A=F5(f,d,t[2*_],t[2*_+1]);A<$&&(h=_,$=A)}const m=t[2*h],y=t[2*h+1];for(let _=0,$=1/0;_<s;_++){if(_===h)continue;const A=F5(m,y,t[2*_],t[2*_+1]);A<$&&A>0&&(p=_,$=A)}let v=t[2*p],b=t[2*p+1],x=1/0;for(let _=0;_<s;_++){if(_===h||_===p)continue;const $=WNe(m,y,v,b,t[2*_],t[2*_+1]);$<x&&(g=_,x=$)}let w=t[2*g],k=t[2*g+1];if(x===1/0){for(let A=0;A<s;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];Xh(this._ids,this._dists,0,s-1);const _=new Uint32Array(s);let $=0;for(let A=0,N=-1/0;A<s;A++){const M=this._ids[A],R=this._dists[M];R>N&&(_[$++]=M,N=R)}this.hull=_.subarray(0,$),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(lx(m,y,v,b,w,k)<0){const _=p,$=v,A=b;p=g,v=w,b=k,g=_,w=$,k=A}const S=HNe(m,y,v,b,w,k);this._cx=S.x,this._cy=S.y;for(let _=0;_<s;_++)this._dists[_]=F5(t[2*_],t[2*_+1],S.x,S.y);Xh(this._ids,this._dists,0,s-1),this._hullStart=h;let C=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,o.fill(-1),o[this._hashKey(m,y)]=h,o[this._hashKey(v,b)]=p,o[this._hashKey(w,k)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let _=0,$,A;_<this._ids.length;_++){const N=this._ids[_],M=t[2*N],R=t[2*N+1];if(_>0&&Math.abs(M-$)<=dj&&Math.abs(R-A)<=dj||($=M,A=R,N===h||N===p||N===g))continue;let P=0;for(let Y=0,W=this._hashKey(M,R);Y<this._hashSize&&(P=o[(W+Y)%this._hashSize],!(P!==-1&&P!==r[P]));Y++);P=n[P];let D=P,I;for(;I=r[D],lx(M,R,t[2*D],t[2*D+1],t[2*I],t[2*I+1])>=0;)if(D=I,D===P){D=-1;break}if(D===-1)continue;let O=this._addTriangle(D,N,r[D],-1,-1,i[D]);i[N]=this._legalize(O+2),i[D]=O,C++;let j=r[D];for(;I=r[j],lx(M,R,t[2*j],t[2*j+1],t[2*I],t[2*I+1])<0;)O=this._addTriangle(j,N,I,i[N],-1,i[j]),i[N]=this._legalize(O+2),r[j]=j,C--,j=I;if(D===P)for(;I=n[D],lx(M,R,t[2*I],t[2*I+1],t[2*D],t[2*D+1])<0;)O=this._addTriangle(I,N,D,-1,i[D],i[I]),this._legalize(O+2),i[I]=O,r[D]=D,C--,D=I;this._hullStart=n[N]=D,r[D]=n[j]=N,r[N]=j,o[this._hashKey(M,R)]=N,o[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array(C);for(let _=0,$=this._hullStart;_<C;_++)this.hull[_]=$,$=r[$];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(UNe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=ux[--o];continue}const u=a-a%3,c=l+(t+1)%3,f=u+(a+2)%3,d=n[s],h=n[t],p=n[c],g=n[f];if(VNe(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,f);const v=u+(a+1)%3;o<ux.length&&(ux[o++]=v)}else{if(o===0)break;t=ux[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function UNe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function F5(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function VNe(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,c=n-s,f=r-a,d=i-s,h=o-a,p=l*l+u*u,g=c*c+f*f,m=d*d+h*h;return l*(f*m-g*h)-u*(c*m-g*d)+p*(c*h-f*d)<0}function WNe(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=(u*c-a*f)*d,p=(s*f-l*c)*d;return h*h+p*p}function HNe(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=e+(u*c-a*f)*d,p=t+(s*f-l*c)*d;return{x:h,y:p}}function Xh(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;Vm(e,i,o),t[e[n]]>t[e[r]]&&Vm(e,n,r),t[e[o]]>t[e[r]]&&Vm(e,o,r),t[e[n]]>t[e[o]]&&Vm(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;Vm(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Xh(e,t,o,r),Xh(e,t,n,s-1)):(Xh(e,t,n,s-1),Xh(e,t,o,r))}}function Vm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function qNe(e){return e[0]}function GNe(e){return e[1]}const hj=1e-6;class Cf{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>hj||Math.abs(this._y1-o)>hj)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class g4{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let YNe=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,m=0,y=r.length,v,b;g<y;g+=3,m+=2){const x=r[g]*2,w=r[g+1]*2,k=r[g+2]*2,S=t[x],C=t[x+1],_=t[w],$=t[w+1],A=t[k],N=t[k+1],M=_-S,R=$-C,P=A-S,D=N-C,I=(M*D-R*P)*2;if(Math.abs(I)<1e-9){if(o===void 0){o=s=0;for(const j of n)o+=t[j*2],s+=t[j*2+1];o/=n.length,s/=n.length}const O=1e9*Math.sign((o-S)*D-(s-C)*P);v=(S+A)/2-O*D,b=(C+N)/2+O*P}else{const O=1/I,j=M*M+R*R,Y=P*P+D*D;v=S+(D*j-R*Y)*O,b=C+(M*Y-P*j)*O}a[m]=v,a[m+1]=b}let l=n[n.length-1],u,c=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=c,f=d,h=p,c=l*4,d=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Cf:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=s[h],m=s[h+1],y=s[p],v=s[p+1];this._renderSegment(g,m,y,v,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const f=Math.floor(i[u]/3)*2,d=s[f],h=s[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Cf:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Cf:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new g4;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,m,y,v;if(u===0){if((p=this._clipSegment(o,s,a,l,u,c))===null)continue;[g,m,y,v]=p}else{if((p=this._clipSegment(a,l,o,s,c,u))===null)continue;[y,v,g,m]=p,f=d,d=this._edgecode(g,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,m):i=[g,m]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,u,c=o||s;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=d,d=this._edgecode(a[u],a[u+1]),f&&d&&(u=this._edge(t,f,d,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const XNe=2*Math.PI,dh=Math.pow;function KNe(e){return e[0]}function QNe(e){return e[1]}function ZNe(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function JNe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class jD{static from(t,n=KNe,r=QNe,i){return new jD("length"in t?eIe(t,n,r,i):Float64Array.from(tIe(t,n,r,i)))}constructor(t){this._delaunator=new OS(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&ZNe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=JNe(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new OS(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(r[l]===-1||s[c]===-1)&&(s[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new YNe(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=dh(n-u[t*2],2)+dh(r-u[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=dh(n-u[p*2],2)+dh(r-u[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==p&&dh(n-u[h*2],2)+dh(r-u[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Cf:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,c=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Cf:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,XNe)}return r&&r.value()}renderHull(t){const n=t==null?t=new Cf:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new g4;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Cf:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new g4;return this.renderTriangle(t,n),n.value()}}function eIe(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*tIe(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function UD(e){V.call(this,null,e)}UD.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const nIe=[-1e5,-1e5,1e5,1e5];ne(UD,V,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:nIe;const o=this.value=jD.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!iIe(l)?rIe(l):null}return t.reflow(e.modified()).modifies(n)}});function rIe(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function iIe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const oIe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:UD},Symbol.toStringTag,{value:"Module"}));var P5=Math.PI/180,O0=64,k2=2048;function sIe(){var e=[256,256],t,n,r,i,o,s,a,l=Tre,u=[],c=Math.random,f={};f.layout=function(){for(var p=d(qu()),g=dIe((e[0]>>5)*e[1]),m=null,y=u.length,v=-1,b=[],x=u.map(k=>({text:t(k),font:n(k),style:i(k),weight:o(k),rotate:s(k),size:~~(r(k)+1e-14),padding:a(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,S)=>S.size-k.size);++v<y;){var w=x[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,aIe(p,w,x,v),w.hasText&&h(g,w,m)&&(b.push(w),m?uIe(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(O0<<5)/g,p.height=k2/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function h(p,g,m){for(var y=g.x,v=g.y,b=Math.hypot(e[0],e[1]),x=l(e),w=c()<.5?1:-1,k=-w,S,C,_;(S=x(k+=w))&&(C=~~S[0],_=~~S[1],!(Math.min(Math.abs(C),Math.abs(_))>=b));)if(g.x=y+C,g.y=v+_,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!lIe(g,p,e[0]))&&(!m||cIe(g,m))){for(var $=g.sprite,A=g.width>>5,N=e[0]>>5,M=g.x-(A<<4),R=M&127,P=32-R,D=g.y1-g.y0,I=(g.y+g.y0)*N+(M>>5),O,j=0;j<D;j++){O=0;for(var Y=0;Y<=A;Y++)p[I+Y]|=O<<P|(Y<A?(O=$[j*A+Y])>>>R:0);I+=N}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(u=p,f):u},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Bc(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Bc(p),f):i},f.fontWeight=function(p){return arguments.length?(o=Bc(p),f):o},f.rotate=function(p){return arguments.length?(s=Bc(p),f):s},f.text=function(p){return arguments.length?(t=Bc(p),f):t},f.spiral=function(p){return arguments.length?(l=hIe[p]||p,f):l},f.fontSize=function(p){return arguments.length?(r=Bc(p),f):r},f.padding=function(p){return arguments.length?(a=Bc(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function aIe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(O0<<5)/o,k2/o);var s=0,a=0,l=0,u=n.length,c,f,d,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*P5),m=Math.cos(t.rotate*P5),y=c*m,v=c*g,b=d*m,x=d*g;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>l&&(l=d),s+c>=O0<<5&&(s=0,a+=l,l=0),a+d>=k2)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*P5),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var w=i.getImageData(0,0,(O0<<5)/o,k2/o).data,k=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)k[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var _=f*p+(h>>5),$=w[(a+p)*(O0<<5)+(s+h)<<2]?1<<31-h%32:0;k[_]|=$,S|=$}S?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=k.slice(0,(t.y1-t.y0)*f)}}}function lIe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[u+d])return!0;u+=n}return!1}function uIe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function cIe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Tre(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function fIe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function dIe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Bc(e){return typeof e=="function"?e:function(){return e}}var hIe={archimedean:Tre,rectangular:fIe};const Mre=["x","y","font","fontSize","fontStyle","fontWeight","angle"],pIe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function VD(e){V.call(this,sIe(),e)}VD.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Mre}]};ne(VD,V,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&q("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return Oe(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||pIe.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||Mre;let a=e.fontSize||14,l;if(Oe(a)?l=e.fontSizeRange:a=_r(a),l){const p=a,g=Je("sqrt")().domain(ya(i,p)).range(l);a=m=>g(p(m))}i.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Ro).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=u.length;for(let p=0,g,m;p<h;++p)g=u[p],m=g.datum,m[s[0]]=g.x+f,m[s[1]]=g.y+d,m[s[2]]=g.font,m[s[3]]=g.size,m[s[4]]=g.style,m[s[5]]=g.weight,m[s[6]]=g.rotate;return t.reflow(r).modifies(s)}});const gIe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:VD},Symbol.toStringTag,{value:"Module"})),mIe=e=>new Uint8Array(e),yIe=e=>new Uint16Array(e),yy=e=>new Uint32Array(e);function vIe(){let e=8,t=[],n=yy(0),r=cx(0,e),i=cx(0,e);return{data:()=>t,seen:()=>n=bIe(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)l[f]=t[f],u[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?u[f]=-1:(u[f]=d,r[d]=r[f],i[d]=i[f],l[d]=c,c._index=d++),r[f]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=cx(o,e,r),i=cx(o,e))}}}function bIe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function cx(e,t,n){const r=(t<257?mIe:t<65537?yIe:yy)(e);return n&&r.set(n),r}function pj(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],c=a[1],f=l.length;let d;for(d=0;d<u;++d)o[l[d]]|=r;for(d=c;d<f;++d)o[l[d]]|=r;return s}}}function gj(){let e=yy(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,f=l.length,d=yy(f);let h=Array(f),p,g,m;for(m=0;m<f;++m)h[m]=a(l[m]),d[m]=m;if(h=xIe(h,d),c)p=t,g=e,t=Array(c+f),e=yy(c+f),wIe(u,p,g,c,h,d,f,t,e);else{if(u>0)for(m=0;m<f;++m)d[m]+=u;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,l){const u=n;let c,f,d;for(f=0;!l[e[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[P5e(l,a[0],0,u),ec(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function xIe(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),O5e(e,t)}function wIe(e,t,n,r,i,o,s,a,l){let u=0,c=0,f;for(f=0;u<r&&c<s;++f)t[u]<i[c]?(a[f]=t[u],l[f]=n[u++]):(a[f]=i[c],l[f]=o[c++]+e);for(;u<r;++u,++f)a[f]=t[u],l[f]=n[u];for(;c<s;++c,++f)a[f]=i[c],l[f]=o[c]+e}function WD(e){V.call(this,vIe(),e),this._indices=null,this._dims=null}WD.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ne(WD,V,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=gj()),o.push(pj(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,m,y,v,b,x,w,k,S;if(u.set(l),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,k=v.length;w<k;++w)x[v[w]._index]=1;for(w=0;w<h;++w)S=r[w],(!s[w]||e.modified("fields",w)||t.modified(S.fields))&&(y=S.fname,(g=p[y])||(o[y]=m=gj(),p[y]=g=m.insert(S,t.source,0)),s[w]=pj(m,w,i[w]).onAdd(g,l));for(w=0,k=a.data().length;w<k;++w)b[w]||(u[w]!==l[w]?f.push(w):x[w]&&l[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,g=l[p]||(l[p]=s[p].insert(a[h],r,d)),o[h].onAdd(g,m);for(;d<c;++d)y[d]=v,m[d]!==v&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=u[0],p=u[1],g=e.one;let m,y,v;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(f>h)for(m=h,y=Math.min(f,p);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;if(d>p)for(m=Math.max(f,p),y=d;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(d<p)for(m=Math.max(h,d),y=p;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=a[0],d=a[1],h=e.one;let p,g,m;if(u<f)for(p=u,g=Math.min(f,c);p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(u>f)for(p=f,g=Math.min(u,d);p<g;++p)m=s[p],o[m]^=h,r.push(m);if(c>d)for(p=Math.max(u,d),g=c;p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)m=s[p],o[m]^=h,r.push(m);e.range=t.slice()}});function HD(e){V.call(this,null,e)}HD.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ne(HD,V,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:s[c];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^l[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^l[c]&n))?s[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const SIe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:WD,resolvefilter:HD},Symbol.toStringTag,{value:"Module"})),kIe="RawCode",cd="Literal",CIe="Property",_Ie="Identifier",EIe="ArrayExpression",$Ie="BinaryExpression",Fre="CallExpression",AIe="ConditionalExpression",TIe="LogicalExpression",MIe="MemberExpression",FIe="ObjectExpression",PIe="UnaryExpression";function Es(e){this.type=e}Es.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=RIe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function RIe(e){switch(e.type){case EIe:return e.elements;case $Ie:case TIe:return[e.left,e.right];case Fre:return[e.callee].concat(e.arguments);case AIe:return[e.test,e.consequent,e.alternate];case MIe:return[e.object,e.property];case FIe:return e.properties;case CIe:return[e.key,e.value];case PIe:return[e.argument];case _Ie:case cd:case kIe:default:return[]}}var Ta,ge,H,wr,ft,t_=1,Fv=2,fd=3,Ec=4,n_=5,Ld=6,ii=7,Pv=8,DIe=9;Ta={};Ta[t_]="Boolean";Ta[Fv]="<end>";Ta[fd]="Identifier";Ta[Ec]="Keyword";Ta[n_]="Null";Ta[Ld]="Numeric";Ta[ii]="Punctuator";Ta[Pv]="String";Ta[DIe]="RegularExpression";var OIe="ArrayExpression",NIe="BinaryExpression",IIe="CallExpression",LIe="ConditionalExpression",Pre="Identifier",zIe="Literal",BIe="LogicalExpression",jIe="MemberExpression",UIe="ObjectExpression",VIe="Property",WIe="UnaryExpression",Fn="Unexpected token %0",HIe="Unexpected number",qIe="Unexpected string",GIe="Unexpected identifier",YIe="Unexpected reserved word",XIe="Unexpected end of input",m4="Invalid regular expression",R5="Invalid regular expression: missing /",Rre="Octal literals are not allowed in strict mode.",KIe="Duplicate data property in object literal not allowed in strict mode",Xn="ILLEGAL",m1="Disabled.",QIe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ZIe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function r_(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ya(e){return e>=48&&e<=57}function qD(e){return"0123456789abcdefABCDEF".includes(e)}function vy(e){return"01234567".includes(e)}function JIe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function y1(e){return e===10||e===13||e===8232||e===8233}function Rv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&QIe.test(String.fromCharCode(e))}function NS(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&ZIe.test(String.fromCharCode(e))}const e7e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Dre(){for(;H<wr;){const e=ge.charCodeAt(H);if(JIe(e)||y1(e))++H;else break}}function y4(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)H<wr&&qD(ge[H])?(r=ge[H++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ke({},Fn,Xn);return String.fromCharCode(i)}function t7e(){var e,t,n,r;for(e=ge[H],t=0,e==="}"&&Ke({},Fn,Xn);H<wr&&(e=ge[H++],!!qD(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ke({},Fn,Xn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Ore(){var e,t;for(e=ge.charCodeAt(H++),t=String.fromCharCode(e),e===92&&(ge.charCodeAt(H)!==117&&Ke({},Fn,Xn),++H,e=y4("u"),(!e||e==="\\"||!Rv(e.charCodeAt(0)))&&Ke({},Fn,Xn),t=e);H<wr&&(e=ge.charCodeAt(H),!!NS(e));)++H,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ge.charCodeAt(H)!==117&&Ke({},Fn,Xn),++H,e=y4("u"),(!e||e==="\\"||!NS(e.charCodeAt(0)))&&Ke({},Fn,Xn),t+=e);return t}function n7e(){var e,t;for(e=H++;H<wr;){if(t=ge.charCodeAt(H),t===92)return H=e,Ore();if(NS(t))++H;else break}return ge.slice(e,H)}function r7e(){var e,t,n;return e=H,t=ge.charCodeAt(H)===92?Ore():n7e(),t.length===1?n=fd:e7e.hasOwnProperty(t)?n=Ec:t==="null"?n=n_:t==="true"||t==="false"?n=t_:n=fd,{type:n,value:t,start:e,end:H}}function D5(){var e=H,t=ge.charCodeAt(H),n,r=ge[H],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++H,{type:ii,value:String.fromCharCode(t),start:e,end:H};default:if(n=ge.charCodeAt(H+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return H+=2,{type:ii,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:H};case 33:case 61:return H+=2,ge.charCodeAt(H)===61&&++H,{type:ii,value:ge.slice(e,H),start:e,end:H}}}if(s=ge.substr(H,4),s===">>>=")return H+=4,{type:ii,value:s,start:e,end:H};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return H+=3,{type:ii,value:o,start:e,end:H};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return H+=2,{type:ii,value:i,start:e,end:H};if(i==="//"&&Ke({},Fn,Xn),"<>=!+-*%&|^/".includes(r))return++H,{type:ii,value:r,start:e,end:H};Ke({},Fn,Xn)}function i7e(e){let t="";for(;H<wr&&qD(ge[H]);)t+=ge[H++];return t.length===0&&Ke({},Fn,Xn),Rv(ge.charCodeAt(H))&&Ke({},Fn,Xn),{type:Ld,value:parseInt("0x"+t,16),start:e,end:H}}function o7e(e){let t="0"+ge[H++];for(;H<wr&&vy(ge[H]);)t+=ge[H++];return(Rv(ge.charCodeAt(H))||Ya(ge.charCodeAt(H)))&&Ke({},Fn,Xn),{type:Ld,value:parseInt(t,8),octal:!0,start:e,end:H}}function mj(){var e,t,n;if(n=ge[H],r_(Ya(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=H,e="",n!=="."){if(e=ge[H++],n=ge[H],e==="0"){if(n==="x"||n==="X")return++H,i7e(t);if(vy(n))return o7e(t);n&&Ya(n.charCodeAt(0))&&Ke({},Fn,Xn)}for(;Ya(ge.charCodeAt(H));)e+=ge[H++];n=ge[H]}if(n==="."){for(e+=ge[H++];Ya(ge.charCodeAt(H));)e+=ge[H++];n=ge[H]}if(n==="e"||n==="E")if(e+=ge[H++],n=ge[H],(n==="+"||n==="-")&&(e+=ge[H++]),Ya(ge.charCodeAt(H)))for(;Ya(ge.charCodeAt(H));)e+=ge[H++];else Ke({},Fn,Xn);return Rv(ge.charCodeAt(H))&&Ke({},Fn,Xn),{type:Ld,value:parseFloat(e),start:t,end:H}}function s7e(){var e="",t,n,r,i,o=!1;for(t=ge[H],r_(t==="'"||t==='"',"String literal must starts with a quote"),n=H,++H;H<wr;)if(r=ge[H++],r===t){t="";break}else if(r==="\\")if(r=ge[H++],!r||!y1(r.charCodeAt(0)))switch(r){case"u":case"x":ge[H]==="{"?(++H,e+=t7e()):e+=y4(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:vy(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),H<wr&&vy(ge[H])&&(o=!0,i=i*8+"01234567".indexOf(ge[H++]),"0123".includes(r)&&H<wr&&vy(ge[H])&&(i=i*8+"01234567".indexOf(ge[H++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ge[H]===`
`&&++H;else{if(y1(r.charCodeAt(0)))break;e+=r}return t!==""&&Ke({},Fn,Xn),{type:Pv,value:e,octal:o,start:n,end:H}}function a7e(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ke({},m4)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ke({},m4)}try{return new RegExp(e,t)}catch{return null}}function l7e(){var e,t,n,r,i;for(e=ge[H],r_(e==="/","Regular expression literal must start with a slash"),t=ge[H++],n=!1,r=!1;H<wr;)if(e=ge[H++],t+=e,e==="\\")e=ge[H++],y1(e.charCodeAt(0))&&Ke({},R5),t+=e;else if(y1(e.charCodeAt(0)))Ke({},R5);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ke({},R5),i=t.substr(1,t.length-2),{value:i,literal:t}}function u7e(){var e,t,n;for(t="",n="";H<wr&&(e=ge[H],!!NS(e.charCodeAt(0)));)++H,e==="\\"&&H<wr?Ke({},Fn,Xn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ke({},m4,n),{value:n,literal:t}}function c7e(){var e,t,n,r;return ft=null,Dre(),e=H,t=l7e(),n=u7e(),r=a7e(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:H}}function f7e(e){return e.type===fd||e.type===Ec||e.type===t_||e.type===n_}function Nre(){if(Dre(),H>=wr)return{type:Fv,start:H,end:H};const e=ge.charCodeAt(H);return Rv(e)?r7e():e===40||e===41||e===59?D5():e===39||e===34?s7e():e===46?Ya(ge.charCodeAt(H+1))?mj():D5():Ya(e)?mj():D5()}function li(){const e=ft;return H=e.end,ft=Nre(),H=e.end,e}function Ire(){const e=H;ft=Nre(),H=e}function d7e(e){const t=new Es(OIe);return t.elements=e,t}function yj(e,t,n){const r=new Es(e==="||"||e==="&&"?BIe:NIe);return r.operator=e,r.left=t,r.right=n,r}function h7e(e,t){const n=new Es(IIe);return n.callee=e,n.arguments=t,n}function p7e(e,t,n){const r=new Es(LIe);return r.test=e,r.consequent=t,r.alternate=n,r}function GD(e){const t=new Es(Pre);return t.name=e,t}function N0(e){const t=new Es(zIe);return t.value=e.value,t.raw=ge.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function vj(e,t,n){const r=new Es(jIe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function g7e(e){const t=new Es(UIe);return t.properties=e,t}function bj(e,t,n){const r=new Es(VIe);return r.key=t,r.value=n,r.kind=e,r}function m7e(e,t){const n=new Es(WIe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ke(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(r_(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=H,n.description=i,n}function i_(e){e.type===Fv&&Ke(e,XIe),e.type===Ld&&Ke(e,HIe),e.type===Pv&&Ke(e,qIe),e.type===fd&&Ke(e,GIe),e.type===Ec&&Ke(e,YIe),Ke(e,Fn,e.value)}function Sr(e){const t=li();(t.type!==ii||t.value!==e)&&i_(t)}function $t(e){return ft.type===ii&&ft.value===e}function O5(e){return ft.type===Ec&&ft.value===e}function y7e(){const e=[];for(H=ft.start,Sr("[");!$t("]");)$t(",")?(li(),e.push(null)):(e.push(dd()),$t("]")||Sr(","));return li(),d7e(e)}function xj(){H=ft.start;const e=li();return e.type===Pv||e.type===Ld?(e.octal&&Ke(e,Rre),N0(e)):GD(e.value)}function v7e(){var e,t,n,r;if(H=ft.start,e=ft,e.type===fd)return n=xj(),Sr(":"),r=dd(),bj("init",n,r);if(e.type===Fv||e.type===ii)i_(e);else return t=xj(),Sr(":"),r=dd(),bj("init",t,r)}function b7e(){var e=[],t,n,r,i={},o=String;for(H=ft.start,Sr("{");!$t("}");)t=v7e(),t.key.type===Pre?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ke({},KIe):i[r]=!0,e.push(t),$t("}")||Sr(",");return Sr("}"),g7e(e)}function x7e(){Sr("(");const e=YD();return Sr(")"),e}const w7e={if:1};function S7e(){var e,t,n;if($t("("))return x7e();if($t("["))return y7e();if($t("{"))return b7e();if(e=ft.type,H=ft.start,e===fd||w7e[ft.value])n=GD(li().value);else if(e===Pv||e===Ld)ft.octal&&Ke(ft,Rre),n=N0(li());else{if(e===Ec)throw new Error(m1);e===t_?(t=li(),t.value=t.value==="true",n=N0(t)):e===n_?(t=li(),t.value=null,n=N0(t)):$t("/")||$t("/=")?(n=N0(c7e()),Ire()):i_(li())}return n}function k7e(){const e=[];if(Sr("("),!$t(")"))for(;H<wr&&(e.push(dd()),!$t(")"));)Sr(",");return Sr(")"),e}function C7e(){H=ft.start;const e=li();return f7e(e)||i_(e),GD(e.value)}function _7e(){return Sr("."),C7e()}function E7e(){Sr("[");const e=YD();return Sr("]"),e}function $7e(){var e,t,n;for(e=S7e();;)if($t("."))n=_7e(),e=vj(".",e,n);else if($t("("))t=k7e(),e=h7e(e,t);else if($t("["))n=E7e(),e=vj("[",e,n);else break;return e}function wj(){const e=$7e();if(ft.type===ii&&($t("++")||$t("--")))throw new Error(m1);return e}function C2(){var e,t;if(ft.type!==ii&&ft.type!==Ec)t=wj();else{if($t("++")||$t("--"))throw new Error(m1);if($t("+")||$t("-")||$t("~")||$t("!"))e=li(),t=C2(),t=m7e(e.value,t);else{if(O5("delete")||O5("void")||O5("typeof"))throw new Error(m1);t=wj()}}return t}function Sj(e){let t=0;if(e.type!==ii&&e.type!==Ec)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function A7e(){var e,t,n,r,i,o,s,a,l,u;if(e=ft,l=C2(),r=ft,i=Sj(r),i===0)return l;for(r.prec=i,li(),t=[e,ft],s=C2(),o=[l,r,s];(i=Sj(ft))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=yj(a,l,s),o.push(n);r=li(),r.prec=i,o.push(r),t.push(ft),n=C2(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=yj(o[u-1].value,o[u-2],n),u-=2;return n}function dd(){var e,t,n;return e=A7e(),$t("?")&&(li(),t=dd(),Sr(":"),n=dd(),e=p7e(e,t,n)),e}function YD(){const e=dd();if($t(","))throw new Error(m1);return e}function XD(e){ge=e,H=0,wr=ge.length,ft=null,Ire();const t=YD();if(ft.type!==Fv)throw new Error("Unexpect token after expression.");return t}var Lre={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function zre(e){function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&q("Missing arguments to clamp function."),s.length>3&&q("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&q("Missing arguments to if function."),s.length>3&&q("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function T7e(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Bre(e){e=e||{};const t=e.allowed?ys(e.allowed):{},n=e.forbidden?ys(e.forbidden):{},r=e.constants||Lre,i=(e.functions||zre)(f),o=e.globalvar,s=e.fieldvar,a=Oe(o)?o:p=>`${o}["${p}"]`;let l={},u={},c=0;function f(p){if(le(p))return p;const g=d[p.type];return g==null&&q("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:ce(n,g)?q("Illegal identifier: "+g):ce(r,g)?r[g]:ce(t,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===s&&(u[T7e(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&q("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=ce(i,g)&&i[g];return y||q("Unrecognized function: "+g),Oe(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}const kj=Symbol("vega_selection_getter");function jre(e){return(!e.getter||!e.getter[kj])&&(e.getter=Mo(e.field),e.getter[kj]=!0),e.getter}const KD="intersect",Cj="union",M7e="vlMulti",F7e="vlPoint",_j="or",P7e="and",Qs="_vgsid_",v1=Mo(Qs),R7e="E",D7e="R",O7e="R-E",N7e="R-LE",I7e="R-RE",IS="index:unit";function Ej(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=jre(a)(e),Wu(s)&&(s=yr(s)),Wu(r[o])&&(r[o]=yr(r[o])),G(r[o])&&Wu(r[o][0])&&(r[o]=r[o].map(yr)),a.type===R7e){if(G(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===D7e){if(!Hh(s,r[o]))return!1}else if(a.type===I7e){if(!Hh(s,r[o],!0,!1))return!1}else if(a.type===O7e){if(!Hh(s,r[o],!1,!1))return!1}else if(a.type===N7e&&!Hh(s,r[o],!1,!0))return!1;return!0}function L7e(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[IS]&&r[IS].value:void 0,s=n===KD,a=i.length,l=0,u,c,f,d,h;l<a;++l)if(u=i[l],o&&s){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=Ej(t,u),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=Ej(t,u),s^h)return h;return a&&s}const Ure=qg(v1),z7e=Ure.left,B7e=Ure.right;function j7e(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[IS]&&r[IS].value:void 0,s=n===KD,a=v1(t),l=z7e(i,a);if(l===i.length||v1(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(B7e(i,a)-l<o.size)return!1}return!0}function U7e(e,t){return e.map(n=>De(t.fields?{values:t.fields.map(r=>jre(r)(n.datum))}:{[Qs]:v1(n.datum)},t))}function V7e(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,c,f,d,h,p,g,m,y,v,b=o.length,x=0,w,k;x<b;++x)if(u=o[x],d=u.unit,c=u.fields,f=u.values,c&&f){for(w=0,k=c.length;w<k;++w)h=c[w],g=s[h.field]||(s[h.field]={}),m=g[d]||(g[d]=[]),l[h.field]=y=h.type.charAt(0),v=N5[`${y}_union`],g[d]=v(m,ae(f[w]));n&&(m=a[d]||(a[d]=[]),m.push(ae(f).reduce((S,C,_)=>(S[c[_].field]=C,S),{})))}else h=Qs,p=v1(u),g=s[h]||(s[h]={}),m=g[d]||(g[d]=[]),m.push(p),n&&(m=a[d]||(a[d]=[]),m.push({[Qs]:p}));if(t=t||Cj,s[Qs]?s[Qs]=N5[`${Qs}_${t}`](...Object.values(s[Qs])):Object.keys(s).forEach(S=>{s[S]=Object.keys(s[S]).map(C=>s[S][C]).reduce((C,_)=>C===void 0?_:N5[`${l[S]}_${t}`](C,_))}),o=Object.keys(a),n&&o.length){const S=r?F7e:M7e;s[S]=t===Cj?{[_j]:o.reduce((C,_)=>(C.push(...a[_]),C),[])}:{[P7e]:o.map(C=>({[_j]:a[C]}))}}return s}var N5={[`${Qs}_union`]:W5e,[`${Qs}_intersect`]:U5e,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=yr(t[0]),r=yr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=yr(t[0]),r=yr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const W7e=":",H7e="@";function QD(e,t,n,r){t[0].type!==cd&&q("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&He(t).value,s="unit",a=H7e+s,l=W7e+i;o===KD&&!ce(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),ce(r,l)||(r[l]=n.getData(i).tuplesRef())}function Vre(e){const t=this.context.data[e];return t?t.values.value:[]}function q7e(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function G7e(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Fo).insert(t)),1}function Y7e(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Dv=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},X7e=Dv("format"),Wre=Dv("timeFormat"),K7e=Dv("utcFormat"),Q7e=Dv("timeParse"),Z7e=Dv("utcParse"),fx=new Date(2e3,0,1);function o_(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(fx.setYear(2e3),fx.setMonth(e),fx.setDate(t),Wre.call(this,fx,n))}function J7e(e){return o_.call(this,e,1,"%B")}function eLe(e){return o_.call(this,e,1,"%b")}function tLe(e){return o_.call(this,0,2+e,"%A")}function nLe(e){return o_.call(this,0,2+e,"%a")}const rLe=":",iLe="@",v4="%",Hre="$";function ZD(e,t,n,r){t[0].type!==cd&&q("First argument to data functions must be a string literal.");const i=t[0].value,o=rLe+i;if(!ce(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function oLe(e,t,n,r){t[0].type!==cd&&q("First argument to indata must be a string literal."),t[1].type!==cd&&q("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=iLe+o;ce(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function Gr(e,t,n,r){if(t[0].type===cd)$j(n,r,t[0].value);else for(e in n.scales)$j(n,r,e)}function $j(e,t,n){const r=v4+n;if(!ce(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Ma(e,t){if(Oe(e))return e;if(le(e)){const n=t.scales[e];return n&&mFe(n.value)?n.value:void 0}}function sLe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Gr,n._range=Gr,n._scale=Gr;const r=i=>"_["+(i.type===cd?te(v4+i.value):te(v4)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function JD(e,t){return function(n,r,i){if(n){const o=Ma(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const aLe=JD("area",FDe),lLe=JD("bounds",ODe),uLe=JD("centroid",jDe);function cLe(e,t){const n=Ma(e,(t||this).context);return n&&n.scale()}function fLe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function e8(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function dLe(){return e8(this.context.dataflow,"warn",arguments)}function hLe(){return e8(this.context.dataflow,"info",arguments)}function pLe(){return e8(this.context.dataflow,"debug",arguments)}function I5(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function b4(e){const t=ic(e),n=I5(t.r),r=I5(t.g),i=I5(t.b);return .2126*n+.7152*r+.0722*i}function gLe(e,t){const n=b4(e),r=b4(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function mLe(){const e=[].slice.call(arguments);return e.unshift({}),De(...e)}function qre(e,t){return e===t||e!==e&&t!==t?!0:G(e)?G(t)&&e.length===t.length?yLe(e,t):!1:se(e)&&se(t)?Gre(e,t):!1}function yLe(e,t){for(let n=0,r=e.length;n<r;++n)if(!qre(e[n],t[n]))return!1;return!0}function Gre(e,t){for(const n in e)if(!qre(e[n],t[n]))return!1;return!0}function Aj(e){return t=>Gre(e,t)}function vLe(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(f=n===!0?Fo:G(n)||pC(n)?n:Aj(n),c.remove(f)),t&&c.insert(t),r&&(f=Aj(r),l.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function bLe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function xLe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Tj={};function wLe(e,t){const n=Tj[t]||(Tj[t]=Mo(t));return G(e)?e.map(n):n(e)}function t8(e){return G(e)||ArrayBuffer.isView(e)?e:null}function n8(e){return t8(e)||(le(e)?e:null)}function SLe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return t8(e).join(...n)}function kLe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n8(e).indexOf(...n)}function CLe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n8(e).lastIndexOf(...n)}function _Le(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n8(e).slice(...n)}function ELe(e,t,n){return Oe(n)&&q("Function argument passed to replace."),String(e).replace(t,n)}function $Le(e){return t8(e).slice().reverse()}function ALe(e,t,n){return pR(e||0,t||0,n||0)}function TLe(e,t){const n=Ma(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function MLe(e,t){const n=Ma(e,(t||this).context);return n?n.copy():void 0}function FLe(e,t){const n=Ma(e,(t||this).context);return n?n.domain():[]}function PLe(e,t,n){const r=Ma(e,(n||this).context);return r?G(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function RLe(e,t){const n=Ma(e,(t||this).context);return n&&n.range?n.range():[]}function DLe(e,t,n){const r=Ma(e,(n||this).context);return r?r(t):void 0}function OLe(e,t,n,r,i){e=Ma(e,(i||this).context);const o=Iee(t,n);let s=e.domain(),a=s[0],l=He(s),u=Cr;return l-a?u=_ee(e,a,l):e=(e.interpolator?Je("sequential")().interpolator(e.interpolator()):Je("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==He(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o}function NLe(e,t,n){const r=Ma(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function ILe(e){let t=null;return function(n){return n?l1(n,t=t||ag(e)):e}}const Yre=e=>e.data;function Xre(e,t){const n=Vre.call(t,e);return n.root&&n.root.lookup||{}}function LLe(e,t,n){const r=Xre(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(Yre):void 0}function zLe(e,t){const n=Xre(e,this)[t];return n?n.ancestors().map(Yre):void 0}const Kre=()=>typeof window<"u"&&window||null;function BLe(){const e=Kre();return e?e.screen:{}}function jLe(){const e=Kre();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function ULe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Qre(e,t,n){if(!e)return[];const[r,i]=e,o=new hn().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return Dte(s,o,VLe(t))}function VLe(e){let t=null;if(e){const n=ae(e.marktype),r=ae(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function WLe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ae(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function HLe(e){return ae(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function qLe(e,t,n){const{x:r,y:i,mark:o}=n,s=new hn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),Qre([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>GLe(l.x,l.y,t))}function GLe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const b1={random(){return Ro()},cumulativeNormal:bC,cumulativeLogNormal:h6,cumulativeUniform:y6,densityNormal:l6,densityLogNormal:d6,densityUniform:m6,quantileNormal:xC,quantileLogNormal:p6,quantileUniform:v6,sampleNormal:vC,sampleLogNormal:f6,sampleUniform:g6,isArray:G,isBoolean:wc,isDate:Wu,isDefined(e){return e!==void 0},isNumber:Qe,isObject:se,isRegExp:JK,isString:le,isTuple:pC,isValid(e){return e!=null&&e===e},toBoolean:jP,toDate(e){return UP(e)},toNumber:yr,toString:VP,indexof:kLe,join:SLe,lastindexof:CLe,replace:ELe,reverse:$Le,slice:_Le,flush:QK,lerp:eQ,merge:mLe,pad:rQ,peek:He,pluck:wLe,span:rv,inrange:Hh,truncate:iQ,rgb:ic,lab:Uw,hcl:Vw,hsl:Bw,luminance:b4,contrast:gLe,sequence:Ii,format:X7e,utcFormat:K7e,utcParse:Z7e,utcOffset:NQ,utcSequence:zQ,timeFormat:Wre,timeParse:Q7e,timeOffset:OQ,timeSequence:LQ,timeUnitSpecifier:CQ,monthFormat:J7e,monthAbbrevFormat:eLe,dayFormat:tLe,dayAbbrevFormat:nLe,quarter:GK,utcquarter:YK,week:EQ,utcweek:TQ,dayofyear:_Q,utcdayofyear:AQ,warn:dLe,info:hLe,debug:pLe,extent(e){return ya(e)},inScope:fLe,intersect:Qre,clampRange:XK,pinchDistance:bLe,pinchAngle:xLe,screen:BLe,containerSize:ULe,windowSize:jLe,bandspace:ALe,setdata:G7e,pathShape:ILe,panLinear:VK,panLog:WK,panPow:HK,panSymlog:qK,zoomLinear:OP,zoomLog:NP,zoomPow:$w,zoomSymlog:IP,encode:Y7e,modify:vLe,lassoAppend:WLe,lassoPath:HLe,intersectLasso:qLe},YLe=["view","item","group","xy","x","y"],XLe="event.vega.",Zre="this.",r8={},Jre={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${te(Hre+e)}]`,functions:KLe,constants:Lre,visitors:r8},x4=Bre(Jre);function KLe(e){const t=zre(e);YLe.forEach(n=>t[n]=XLe+n);for(const n in b1)t[n]=Zre+n;return De(t,sLe(e,b1,r8)),t}function sn(e,t,n){return arguments.length===1?b1[e]:(b1[e]=t,n&&(r8[e]=n),x4&&(x4.functions[e]=Zre+e),this)}sn("bandwidth",TLe,Gr);sn("copy",MLe,Gr);sn("domain",FLe,Gr);sn("range",RLe,Gr);sn("invert",PLe,Gr);sn("scale",DLe,Gr);sn("gradient",OLe,Gr);sn("geoArea",aLe,Gr);sn("geoBounds",lLe,Gr);sn("geoCentroid",uLe,Gr);sn("geoShape",NLe,Gr);sn("geoScale",cLe,Gr);sn("indata",q7e,oLe);sn("data",Vre,ZD);sn("treePath",LLe,ZD);sn("treeAncestors",zLe,ZD);sn("vlSelectionTest",L7e,QD);sn("vlSelectionIdTest",j7e,QD);sn("vlSelectionResolve",V7e,QD);sn("vlSelectionTuples",U7e);function xa(e,t){const n={};let r;try{e=le(e)?e:te(e)+"",r=XD(e)}catch{q("Expression parse error: "+e)}r.visit(o=>{if(o.type!==Fre)return;const s=o.callee.name,a=Jre.visitors[s];a&&a(s,o.arguments,t,n)});const i=x4(r);return i.globals.forEach(o=>{const s=Hre+o;!ce(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:De({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function QLe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const ZLe=ys(["rule"]),Mj=ys(["group","image","rect"]);function JLe(e,t){let n="";return ZLe[t]||(e.x2&&(e.x?(Mj[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Mj[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function i8(e){return(e+"").toLowerCase()}function eze(e){return i8(e)==="operator"}function tze(e){return i8(e)==="collect"}function Wm(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function nze(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var rze={operator:(e,t)=>Wm(e,["_"],t.code),parameter:(e,t)=>Wm(e,["datum","_"],t.code),event:(e,t)=>Wm(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Wm(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+te(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=JLe(r,n),i+="return m;",Wm(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(te).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),nze(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function ize(e){const t=this;eze(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function oze(e){const t=this;if(e.params){const n=t.get(e.id);n||q("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function sze(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=G(i)?i.map(o=>Fj(o,n,t)):Fj(i,n,t)}return t}function Fj(e,t,n){if(!e||!se(e))return e;for(let r=0,i=Pj.length,o;r<i;++r)if(o=Pj[r],ce(e,o.key))return o.parse(e,t,n);return e}var Pj=[{key:"$ref",parse:aze},{key:"$key",parse:uze},{key:"$expr",parse:lze},{key:"$field",parse:cze},{key:"$encode",parse:dze},{key:"$compare",parse:fze},{key:"$context",parse:hze},{key:"$subflow",parse:pze},{key:"$tupleid",parse:gze}];function aze(e,t){return t.get(e.$ref)||q("Operator not defined: "+e.$ref)}function lze(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=_i(t.parameterExpression(e.$expr),e.$fields))}function uze(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=BP(e.$key,e.$flat,t.expr.codegen))}function cze(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Mo(e.$field,e.$name,t.expr.codegen))}function fze(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ae(e.$compare).map(i=>i&&i.$tupleid?ve:i);return t.fn[n]||(t.fn[n]=LP(r,e.$order,t.expr.codegen))}function dze(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=_i(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function hze(e,t){return t}function pze(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function gze(){return ve}function mze(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&q("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function yze(e){var t=this,n=se(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||q("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const vze={skip:!0};function bze(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function xze(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],vze)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Fo).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function eie(e,t,n,r){return new tie(e,t,n,r)}function tie(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||rze,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Rj(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}tie.prototype=Rj.prototype={fork(){const e=new Rj(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),tze(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[i8(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:QLe,parseOperator:ize,parseOperatorParameters:oze,parseParameters:sze,parseStream:mze,parseUpdate:yze,getState:bze,setState:xze};function wze(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),nie(t,e.description()))}function nie(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Sze(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const L5="default";function kze(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:L5,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?le(i)?i:i.user:L5,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return le(r)||(i=r.item,r=r.user),w4(e,r&&r!==L5?r:i||r),i},{cursor:t})}function w4(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function LS(e,t){var n=e._runtime.data;return ce(n,t)||q("Unrecognized data set: "+t),n[t]}function Cze(e,t){return arguments.length<2?LS(this,e).values.value:s_.call(this,e,Od().remove(Fo).insert(t))}function s_(e,t){dZ(t)||q("Second argument to changes must be a changeset.");const n=LS(this,e);return n.modified=!0,this.pulse(n.input,t)}function _ze(e,t){return s_.call(this,e,Od().insert(t))}function Eze(e,t){return s_.call(this,e,Od().remove(t))}function rie(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function iie(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function a_(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function $ze(e){var t=a_(e),n=rie(e),r=iie(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function Aze(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=a_(e),s=t.changedTouches?t.changedTouches[0]:t,o=GC(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Tze(e,n,o),t}function Tze(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;le(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:_r(e),item:_r(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const Dj="view",Mze="timer",Fze="window",Pze={trap:!1};function Rze(e){const t=De({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{G(r[o])&&(r[o]=ys(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function oie(e,t,n,r){e._eventListeners.push({type:n,sources:ae(t),handler:r})}function Dze(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function dx(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||se(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Oze(e,t,n){var r=this,i=new yC(n),o=function(u,c){r.runAsync(null,()=>{e===Dj&&Dze(r,t)&&u.preventDefault(),i.receive(Aze(r,u,c))})},s;if(e===Mze)dx(r,"timer",t)&&r.timer(o,t);else if(e===Dj)dx(r,"view",t)&&r.addEventListener(t,o,Pze);else if(e===Fze?dx(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&dx(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);oie(r,s,t,o)}return i}function Oj(e){return e.item}function Nj(e){return e.item.mark.source}function Ij(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Nze(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Oj),Nj,Ij(e)),this.on(this.events("view","pointerout",Oj),Nj,Ij(t)),this}function Ize(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Wi(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Lze="vega-bind",zze="vega-bind-name",Bze="vega-bind-radio";function jze(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=zP(r.debounce,i.update))),(r.input==null&&r.element?Uze:Wze)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Uze(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),oie(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(Vze(i))}}function Vze(e){return typeof Event<"u"?new Event(e):{type:e}}function Wze(e,t,n,r){const i=r.signal(n.signal),o=Wi("div",{class:Lze}),s=n.input==="radio"?o:o.appendChild(Wi("label"));s.appendChild(Wi("span",{class:zze},n.name||n.signal)),t.appendChild(o);let a=Hze;switch(n.input){case"checkbox":a=qze;break;case"select":a=Gze;break;case"radio":a=Yze;break;case"range":a=Xze;break}a(e,s,n,i)}function Hze(e,t,n,r){const i=Wi("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function qze(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=Wi("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function Gze(e,t,n,r){const i=Wi("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};zS(s,r)&&(l.selected=!0),i.appendChild(Wi("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(zS(n.options[a],s)){i.selectedIndex=a;return}}}function Yze(e,t,n,r){const i=Wi("span",{class:Bze}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};zS(s,r)&&(l.checked=!0);const u=Wi("input",l);u.addEventListener("change",()=>e.update(s));const c=Wi("label",{},(o[a]||s)+"");return c.prepend(u),i.appendChild(c),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)zS(a[u].value,s)&&(a[u].checked=!0)}}function Xze(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||tc(o,i,100),a=Wi("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=Wi("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function zS(e,t){return e===t||e+""==t+""}function sie(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,rie(e),iie(e),a_(e),i,o).background(e.background())}function o8(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Kze(e,t,n,r){const i=new r(e.loader(),o8(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,a_(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function Qze(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=YC(r);e=n._el=e?z5(n,e,!0):null,wze(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||Ev,a=e?o.renderer:o.headless;return n._renderer=a?sie(n,n._renderer,e,a):null,n._handler=Kze(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=z5(n,t,!0):e.appendChild(Wi("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=z5(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{jze(n,l.element||t,l)})),n}function z5(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const Hm=e=>+e||0,Zze=e=>({top:e,bottom:e,left:e,right:e});function Lj(e){return se(e)?{top:Hm(e.top),bottom:Hm(e.bottom),left:Hm(e.left),right:Hm(e.right)}:Zze(Hm(e))}async function s8(e,t,n,r){const i=YC(t),o=i&&i.headless;return o||q("Unrecognized renderer type: "+t),await e.runAsync(),sie(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function Jze(e,t){e!==$u.Canvas&&e!==$u.SVG&&e!==$u.PNG&&q("Unrecognized image type: "+e);const n=await s8(this,e,t);return e===$u.SVG?eBe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function eBe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function tBe(e,t){return(await s8(this,$u.Canvas,e,t)).canvas()}async function nBe(e){return(await s8(this,$u.SVG,e)).svg()}function rBe(e,t,n){return eie(e,tg,b1,n).parse(t)}function iBe(e){var t=this._runtime.scales;return ce(t,e)||q("Unrecognized scale or projection: "+e),t[e].value}var aie="width",lie="height",a8="padding",zj={skip:!0};function uie(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===a8?r.left+r.right:0)}function cie(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===a8?r.top+r.bottom:0)}function oBe(e){var t=e._signals,n=t[aie],r=t[lie],i=t[a8];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=uie(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=cie(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function sBe(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(aie,n,zj),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(lie,r,zj),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function aBe(e){return this._runtime.getState(e||{data:lBe,signals:uBe,recurse:!0})}function lBe(e,t){return t.modified&&G(t.input.value)&&!e.startsWith("_:vega:_")}function uBe(e,t){return!(e==="parent"||t instanceof tg.proxy)}function cBe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function fBe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(UOe(n,t))}function dBe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",hBe(r))}function hBe(e){return e==null?"":G(e)?fie(e):se(e)&&!Wu(e)?pBe(e):e+""}function pBe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(G(n)?fie(n):die(n))}).join(`
`)}function fie(e){return"["+e.map(die).join(", ")+"]"}function die(e){return G(e)?"[…]":se(e)&&!Wu(e)?"{…}":e}function gBe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function hie(e,t){const n=this;if(t=t||{},lp.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=De({},e.locale,t.locale);n.locale(nZ(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||$u.Canvas,n._scenegraph=new ate;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||dBe,n._redraw=!0,n._handler=new Ev().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Rze(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=rBe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:De({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=uie(n,n._width),n._viewHeight=cie(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,oBe(n),Sze(n),kze(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function hx(e,t){return ce(e._signals,t)?e._signals[t]:q("Unrecognized signal name: "+te(t))}function pie(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Bj(e,t,n,r){let i=pie(n,r);return i||(i=o8(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function jj(e,t,n){const r=pie(t,n);return r&&t._targets.remove(r),e}ne(hie,lp,{async evaluate(e,t,n){if(await lp.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,$ze(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&a2(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&nie(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=hx(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Lj(e)):Lj(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(YC(e)||q("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(lp.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(hx(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:sBe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=o8(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Bj(this,e,hx(this,e),t)},removeSignalListener(e,t){return jj(this,hx(this,e),t)},addDataListener(e,t){return Bj(this,e,LS(this,e).values,t)},removeDataListener(e,t){return jj(this,LS(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=w4(this,null);this._globalCursor=!!e,t&&w4(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:fBe,events:Oze,finalize:Ize,hover:Nze,data:Cze,change:s_,insert:_ze,remove:Eze,scale:iBe,initialize:Qze,toImageURL:Jze,toCanvas:tBe,toSVG:nBe,getState:aBe,setState:cBe,_watchPixelRatio:gBe});const mBe="view",BS="[",jS="]",gie="{",mie="}",yBe=":",yie=",",vBe="@",bBe=">",xBe=/[[\]{}]/,wBe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let vie,bie;function $c(e,t,n){return vie=t||mBe,bie=n||wBe,xie(e.trim()).map(S4)}function SBe(e){return bie[e]}function by(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function xie(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=by(e,i,yie,BS+gie,jS+mie),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function S4(e){return e[0]==="["?kBe(e):CBe(e)}function kBe(e){const t=e.length;let n=1,r;if(n=by(e,n,jS,BS,jS),n===t)throw"Empty between selector: "+e;if(r=xie(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==bBe)throw"Expected '>' after between selector: "+e;r=r.map(S4);const i=S4(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function CBe(e){const t={source:vie},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===mie){if(a=e.lastIndexOf(gie),a>=0){try{r=_Be(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===vBe&&(i=++a),l=by(e,a,yBe),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=by(e,a,BS),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=by(e,a,jS),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==BS)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||xBe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):SBe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function _Be(e){const t=e.split(yie);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function EBe(e){return se(e)?e:{type:e||"pad"}}const qm=e=>+e||0,$Be=e=>({top:e,bottom:e,left:e,right:e});function ABe(e){return se(e)?e.signal?e:{top:qm(e.top),bottom:qm(e.bottom),left:qm(e.left),right:qm(e.right)}:$Be(qm(e))}const Pn=e=>se(e)&&!G(e)?De({},e):{value:e};function Uj(e,t,n,r){return n!=null?(se(n)&&!G(n)||G(n)&&n.length&&se(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function er(e,t,n){for(const r in t)Uj(e,r,t[r]);for(const r in n)Uj(e,r,n[r],"update")}function tm(e,t,n){for(const r in t)n&&ce(n,r)||(e[r]=De(e[r]||{},t[r]));return e}function xh(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const l8="mark",u8="frame",c8="scope",TBe="axis",MBe="axis-domain",FBe="axis-grid",PBe="axis-label",RBe="axis-tick",DBe="axis-title",OBe="legend",NBe="legend-band",IBe="legend-entry",LBe="legend-gradient",wie="legend-label",zBe="legend-symbol",BBe="legend-title",jBe="title",UBe="title-text",VBe="title-subtitle";function WBe(e,t,n,r,i){const o={},s={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!xh(l,e)&&B5(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===u8?i.group:n===l8?De({},i.mark,i[t]):null;for(l in c)u=xh(l,e)||(l==="fill"||l==="stroke")&&(xh("fill",e)||xh("stroke",e)),u||B5(o,l,c[l]);ae(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)xh(h,e)||B5(o,h,d[h])}),e=De({},e);for(l in o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=De(s,e.enter),a&&(e.update=De(a,e.update)),e}function B5(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Sie=e=>le(e)?te(e):e.signal?`(${e.signal})`:kie(e);function l_(e){if(e.gradient!=null)return qBe(e);let t=e.signal?`(${e.signal})`:e.color?HBe(e.color):e.field!=null?kie(e.field):e.value!==void 0?te(e.value):void 0;return e.scale!=null&&(t=GBe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${_2(e.exponent)})`),e.mult!=null&&(t+=`*${_2(e.mult)}`),e.offset!=null&&(t+=`+${_2(e.offset)}`),e.round&&(t=`round(${t})`),t}const px=(e,t,n,r)=>`(${e}(${[t,n,r].map(l_).join(",")})+'')`;function HBe(e){return e.c?px("hcl",e.h,e.c,e.l):e.h||e.s?px("hsl",e.h,e.s,e.l):e.l||e.a?px("lab",e.l,e.a,e.b):e.r||e.g||e.b?px("rgb",e.r,e.g,e.b):null}function qBe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:te(n));for(;t.length&&He(t)==null;)t.pop();return t.unshift(Sie(e.gradient)),`gradient(${t.join(",")})`}function _2(e){return se(e)?"("+l_(e)+")":e}function kie(e){return Cie(se(e)?e:{datum:e})}function Cie(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):q("Invalid field reference: "+te(e));return e.signal||(r=le(r)?Ca(r).map(te).join("]["):Cie(r)),t+"["+r+"]"}function GBe(e,t){const n=Sie(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+_2(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function YBe(e){let t="";return e.forEach(n=>{const r=l_(n);t+=n.test?`(${n.test})?${r}:`:r}),He(t)===":"&&(t+="null"),t}function _ie(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=WBe(e,t,n,r,i.config);for(const a in e)s[a]=XBe(e[a],t,o,i);return o}function XBe(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=QBe(KBe(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function KBe(e){return G(e)?YBe(e):l_(e)}function QBe(e,t,n,r){const i=xa(e,t);return i.$fields.forEach(o=>r[o]=1),De(n,i.$params),i.$expr}const ZBe="outer",JBe=["value","update","init","react","bind"];function Vj(e,t){q(e+' for "outer" push: '+te(t))}function Eie(e,t){const n=e.name;if(e.push===ZBe)t.signals[n]||Vj("No prior signal definition",n),JBe.forEach(r=>{e[r]!==void 0&&Vj("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function k4(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function u_(e,t,n,r){return new k4(e,t,n,r)}function US(e,t){return u_("operator",e,t)}function ye(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function x1(e,t){return t?{$field:e,$name:t}:{$field:e}}const C4=x1("key");function Wj(e,t){return{$compare:e,$order:t}}function eje(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const tje="ascending",nje="descending";function rje(e){return se(e)?(e.order===nje?"-":"+")+c_(e.op,e.field):""}function c_(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const f8="scope",_4="view";function wn(e){return e&&e.signal}function ije(e){return e&&e.expr}function E2(e){if(wn(e))return!0;if(se(e)){for(const t in e)if(E2(e[t]))return!0}return!1}function Zo(e,t){return e??t}function Wf(e){return e&&e.signal||e}const Hj="timer";function w1(e,t){return(e.merge?sje:e.stream?aje:e.type?lje:q("Invalid stream specification: "+te(e)))(e,t)}function oje(e){return e===f8?_4:e||_4}function sje(e,t){const n=e.merge.map(i=>w1(i,t)),r=d8({merge:n},e,t);return t.addStream(r).id}function aje(e,t){const n=w1(e.stream,t),r=d8({stream:n},e,t);return t.addStream(r).id}function lje(e,t){let n;e.type===Hj?(n=t.event(Hj,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(oje(e.source),e.type);const r=d8({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function d8(e,t,n){let r=t.between;return r&&(r.length!==2&&q('Stream "between" parameter must have 2 entries: '+te(t)),e.between=[w1(r[0],n),w1(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(uje(t.marktype,t.markname,t.markrole)),t.source===f8&&r.push("inScope(event.item)"),r.length&&(e.filter=xa("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function uje(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const cje={code:"_.$value",ast:{type:"Identifier",value:"value"}};function fje(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||q("Signal update missing events specification."),le(o)&&(o=$c(o,t.isSubscope()?f8:_4)),o=ae(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[hje(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&q("Signal encode and update are mutually exclusive."),s="encode(item(),"+te(r)+")"),i.update=le(s)?xa(s,t):s.expr!=null?xa(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:cje,$params:{$value:t.signalRef(s.signal)}}:q("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(De(dje(l,t),i)))}function dje(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):w1(e,t)}}function hje(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function pje(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?q("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=xa(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>fje(i,t,n.id))}const vt=e=>(t,n,r)=>u_(e,n,t||void 0,r),$ie=vt("aggregate"),gje=vt("axisticks"),Aie=vt("bound"),$s=vt("collect"),qj=vt("compare"),mje=vt("datajoin"),Tie=vt("encode"),yje=vt("expression"),vje=vt("facet"),bje=vt("field"),xje=vt("key"),wje=vt("legendentries"),Sje=vt("load"),kje=vt("mark"),Cje=vt("multiextent"),_je=vt("multivalues"),Eje=vt("overlap"),$je=vt("params"),Mie=vt("prefacet"),Aje=vt("projection"),Tje=vt("proxy"),Mje=vt("relay"),Fie=vt("render"),Fje=vt("scale"),zd=vt("sieve"),Pje=vt("sortitems"),Pie=vt("viewlayout"),Rje=vt("values");let Dje=0;const Rie={min:"min",max:"max",count:"sum"};function Oje(e,t){const n=e.type||"linear";bee(n)||q("Unrecognized scale type: "+te(n)),t.addScale(e.name,{type:n,domain:void 0})}function Nje(e,t){const n=t.getScale(e.name).params;let r;n.domain=Die(e.domain,e,t),e.range!=null&&(n.range=Nie(e,t,n)),e.interpolate!=null&&qje(e.interpolate,n),e.nice!=null&&(n.nice=Hje(e.nice,t)),e.bins!=null&&(n.bins=Wje(e.bins,t));for(r in e)ce(n,r)||r==="name"||(n[r]=ko(e[r],t))}function ko(e,t){return se(e)?e.signal?t.signalRef(e.signal):q("Unsupported object: "+te(e)):e}function $2(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ko(n,t))}function f_(e){q("Can not find data set: "+te(e))}function Die(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&q("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(G(e)?Ije:e.fields?zje:Lje)(e,t,n)}function Ije(e,t,n){return e.map(r=>ko(r,n))}function Lje(e,t,n){const r=n.getData(e.data);return r||f_(e.data),sg(t.type)?r.valuesRef(n,e.field,Oie(e.sort,!1)):See(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function zje(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=le(s)?{data:r,field:s}:G(s)||s.signal?Bje(s,n):s,o.push(s),o),[]);return(sg(t.type)?jje:See(t.type)?Uje:Vje)(e,n,i)}function Bje(e,t){const n="_:vega:_"+Dje++,r=$s({});if(G(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+te(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,zd({})]),{data:n,field:"data"}}function jje(e,t,n){const r=Oie(e.sort,!0);let i,o;const s=n.map(u=>{const c=t.getData(u.data);return c||f_(u.data),c.countsRef(t,u.field,r)}),a={groupby:C4,pulse:s};r&&(i=r.op||"count",o=r.field?c_(i,r.field):"count",a.ops=[Rie[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add($ie(a));const l=t.add($s({pulse:ye(i)}));return o=t.add(Rje({field:C4,sort:t.sortRef(r),pulse:ye(l)})),ye(o)}function Oie(e,t){return e&&(!e.field&&!e.op?se(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?q("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Rie[e.op]&&q("Multiple domain scales can not be sorted using "+e.op)),e}function Uje(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||f_(i.data),o.domainRef(t,i.field)});return ye(t.add(_je({values:r})))}function Vje(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||f_(i.data),o.extentRef(t,i.field)});return ye(t.add(Cje({extents:r})))}function Wje(e,t){return e.signal||G(e)?$2(e,t):t.objectProperty(e)}function Hje(e,t){return e.signal?t.signalRef(e.signal):se(e)?{interval:ko(e.interval),step:ko(e.step)}:ko(e)}function qje(e,t){t.interpolate=ko(e.type||e),e.gamma!=null&&(t.interpolateGamma=ko(e.gamma))}function Nie(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(le(i)){if(r&&ce(r,i))return e=De({},e,{range:r[i]}),Nie(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=sg(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:q("Unrecognized scale range value: "+te(i))}else if(i.scheme){n.scheme=G(i.scheme)?$2(i.scheme,t):ko(i.scheme,t),i.extent&&(n.schemeExtent=$2(i.extent,t)),i.count&&(n.schemeCount=ko(i.count,t));return}else if(i.step){n.rangeStep=ko(i.step,t);return}else{if(sg(e.type)&&!G(i))return Die(i,e,t);G(i)||q("Unsupported range type: "+te(i))}return i.map(o=>(G(o)?$2:ko)(o,t))}function Gje(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=E4(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=E4(n[i],i,t));t.addProjection(e.name,r)}function E4(e,t,n){return G(e)?e.map(r=>E4(r,t,n)):se(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:q("Unsupported parameter object: "+te(e)):e}const As="top",nm="left",rm="right",uc="bottom",Iie="center",Yje="vertical",Xje="start",Kje="middle",Qje="end",$4="index",h8="label",Zje="offset",gg="perc",Jje="perc2",Eo="value",Ov="guide-label",p8="guide-title",eUe="group-title",tUe="group-subtitle",Gj="symbol",A2="gradient",A4="discrete",T4="size",nUe="shape",rUe="fill",iUe="stroke",oUe="strokeWidth",sUe="strokeDash",aUe="opacity",g8=[T4,nUe,rUe,iUe,oUe,sUe,aUe],Nv={name:1,style:1,interactive:1},Ge={value:0},$o={value:1},d_="group",Lie="rect",m8="rule",lUe="symbol",Bd="text";function S1(e){return e.type=d_,e.interactive=e.interactive||!1,e}function Ei(e,t){const n=(r,i)=>Zo(e[r],Zo(t[r],i));return n.isVertical=r=>Yje===Zo(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Zo(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Zo(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Zo(e.columns,Zo(t.columns,+n.isVertical(!0))),n}function zie(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function uUe(e,t,n){const r=t.config.style[n];return r&&r[e]}function h_(e,t,n){return`item.anchor === '${Xje}' ? ${e} : item.anchor === '${Qje}' ? ${t} : ${n}`}const y8=h_(te(nm),te(rm),te(Iie));function cUe(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},se(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Bie(e,t){return t?e?se(e)?Object.assign({},e,{offset:Bie(e.offset,t)}):{value:e,offset:t}:t:e}function Qi(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=tm(e.encode,t,Nv)):e.interactive=!1,e}function fUe(e,t,n,r){const i=Ei(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,c,f,d;o?(u=[0,1],c=[0,0],f=s,d=a):(u=[0,0],c=[1,0],f=a,d=s);const h={enter:l={opacity:Ge,x:Ge,y:Ge,width:Pn(f),height:Pn(d)},update:De({},l,{opacity:$o,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Ge}};return er(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Qi({type:Lie,role:LBe,encode:h},r)}function dUe(e,t,n,r,i){const o=Ei(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,f,d,h="";s?(u="y",f="y2",c="x",d="width",h="1-"):(u="x",f="x2",c="y",d="height");const p={opacity:Ge,fill:{scale:t,field:Eo}};p[u]={signal:h+"datum."+gg,mult:l},p[c]=Ge,p[f]={signal:h+"datum."+Jje,mult:l},p[d]=Pn(a);const g={enter:p,update:De({},p,{opacity:$o}),exit:{opacity:Ge}};return er(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Qi({type:Lie,role:NBe,key:Eo,from:i,encode:g},r)}const hUe=`datum.${gg}<=0?"${nm}":datum.${gg}>=1?"${rm}":"${Iie}"`,pUe=`datum.${gg}<=0?"${uc}":datum.${gg}>=1?"${As}":"${Kje}"`;function Yj(e,t,n,r){const i=Ei(e,t),o=i.isVertical(),s=Pn(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,f,d,h="";const p={enter:u={opacity:Ge},update:c={opacity:$o,text:{field:h8}},exit:{opacity:Ge}};return er(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Zo(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:pUe},f="y",d="x",h="1-"):(u.align=c.align={signal:hUe},u.baseline={value:"top"},f="x",d="y"),u[f]=c[f]={signal:h+"datum."+gg,mult:a},u[d]=c[d]=s,s.offset=Zo(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+$4}:void 0,Qi({type:Bd,role:wie,style:Ov,key:Eo,from:r,encode:p,overlap:l},n)}function gUe(e,t,n,r,i){const o=Ei(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Zje} : datum.${T4}`,h=u?Pn(u):{field:T4},p=`datum.${$4}`,g=`max(1, ${i})`;let m,y,v,b,x;h.mult=.5,m={enter:y={opacity:Ge,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:$o,x:y.x,y:y.y},exit:{opacity:Ge}};let w=null,k=null;e.fill||(w=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),er(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",k),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),g8.forEach($=>{e[$]&&(v[$]=y[$]={scale:e[$],field:Eo})});const S=Qi({type:lUe,role:zBe,key:Eo,from:f,clip:u?!0:void 0,encode:m},n.symbols),C=Pn(c);C.offset=o("labelOffset"),m={enter:y={opacity:Ge,x:{signal:d,offset:C},y:h},update:v={opacity:$o,text:{field:h8},x:y.x,y:y.y},exit:{opacity:Ge}},er(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const _=Qi({type:Bd,role:wie,style:Ov,key:Eo,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:Ge,height:u?Pn(u):Ge,opacity:Ge},exit:{opacity:Ge},update:v={opacity:$o,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,x={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,x={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:$4}},S1({role:c8,from:r,encode:tm(m,s,Nv),marks:[S,_],name:l,interactive:a,sort:x})}function mUe(e,t){const n=Ei(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const v8='item.orient === "left"',b8='item.orient === "right"',p_=`(${v8} || ${b8})`,yUe=`datum.vgrad && ${p_}`,vUe=h_('"top"','"bottom"','"middle"'),bUe=h_('"right"','"left"','"center"'),xUe=`datum.vgrad && ${b8} ? (${bUe}) : (${p_} && !(datum.vgrad && ${v8})) ? "left" : ${y8}`,wUe=`item._anchor || (${p_} ? "middle" : "start")`,SUe=`${yUe} ? (${v8} ? -90 : 90) : 0`,kUe=`${p_} ? (datum.vgrad ? (${b8} ? "bottom" : "top") : ${vUe}) : "top"`;function CUe(e,t,n,r){const i=Ei(e,t),o={enter:{opacity:Ge},update:{opacity:$o,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ge}};return er(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:wUe},angle:{signal:SUe},align:{signal:xUe},baseline:{signal:kUe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Qi({type:Bd,role:BBe,style:p8,from:r,encode:o},n)}function _Ue(e,t){let n;return se(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Xj(e.path)+")":e.sphere&&(n="geoShape("+Xj(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Xj(e){return se(e)&&e.signal?e.signal:te(e)}function jie(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===d_?c8:t||l8}function EUe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||jie(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function $Ue(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function x8(e,t){const n=gZ(e.type);n||q("Unrecognized transform type: "+te(e.type));const r=u_(n.type.toLowerCase(),null,Uie(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Uie(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=AUe(s,t,n)}return r}function AUe(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return TUe(e,t,n);if(i===void 0){e.required&&q("Missing required "+te(t.type)+" parameter: "+te(e.name));return}else{if(r==="param")return MUe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!wn(i)?i.map(o=>Kj(e,o,n)):Kj(e,i,n)}function Kj(e,t,n){const r=e.type;if(wn(t))return Zj(r)?q("Expression references can not be signals."):j5(r)?n.fieldRef(t):Jj(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||j5(r);return i&&FUe(t)?n.exprRef(t.expr,t.as):i&&PUe(t)?x1(t.field,t.as):Zj(r)?xa(t,n):RUe(r)?ye(n.getData(t).values):j5(r)?x1(t):Jj(r)?n.compareRef(t):t}}function TUe(e,t,n){return le(t.from)||q('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function MUe(e,t,n){const r=t[e.name];return e.array?(G(r)||q("Expected an array of sub-parameters. Instead: "+te(r)),r.map(i=>Qj(e,i,n))):Qj(e,r,n)}function Qj(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||q("Unsupported parameter: "+te(t));const o=De(Uie(i,t,n),i.key);return ye(n.add($je(o)))}const FUe=e=>e&&e.expr,PUe=e=>e&&e.field,RUe=e=>e==="data",Zj=e=>e==="expr",j5=e=>e==="field",Jj=e=>e==="compare";function DUe(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||q("Only group marks can be faceted."),r.field!=null?s=a=T2(r,n):(e.data?a=ye(n.getData(e.data).aggregate):(o=x8(De({type:"aggregate",groupby:ae(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=T2(r,n),s=a=ye(n.add(o))),i=n.keyRef(r.groupby,!0))):s=ye(n.add($s(null,[{}]))),s||(s=T2(e,n)),{key:i,pulse:s,parent:a}}function T2(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ye(t.getData(e.data).output)}function hd(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}hd.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=ye(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new hd(e,o,i,r,s)};function Vie(e){return le(e)?e:null}function eU(e,t,n){const r=c_(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Gm(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=rje(o);let u=Vie(i),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const d=o?{field:C4,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:ye(t.output)};l&&(d.sort=e.sortRef(o)),f=e.add(u_(r,void 0,d)),s&&(t.index[i]=f),c=ye(f),u!=null&&(a[u]=c)}return c}hd.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=Vie(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&eU(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:ye(r.output)},n&&n.field&&eU(e,l,n),a=e.add($ie(l)),s=e.add($s({pulse:ye(a)})),s={agg:a,ref:ye(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return ye(this.values)},extentRef(e,t){return Gm(e,this,"extent","extent",t,!1)},domainRef(e,t){return Gm(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Gm(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Gm(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Gm(e,this,"indata","tupleindex",t,!0,!0)}};function OUe(e,t,n){const r=e.from.facet,i=r.name,o=T2(r,t);let s;r.name||q("Facet must have a name: "+te(r)),r.data||q("Facet must reference a data set: "+te(r)),r.field?s=t.add(Mie({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(vje({key:t.keyRef(r.groupby),group:ye(t.proxy(n.parent)),pulse:o})):q("Facet must specify groupby or field: "+te(r));const a=t.fork(),l=a.add($s()),u=a.add(zd({pulse:ye(l)}));a.addData(i,new hd(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function NUe(e,t,n){const r=t.add(Mie({pulse:n.pulse})),i=t.fork();i.add(zd()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Wie(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(US()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=xa(u,t);l.update=c.$expr,l.params=c.$params}function g_(e,t){const n=jie(e),r=e.type===d_,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===c8||n===u8,a,l,u,c,f,d,h;const p=n===l8||s||i,g=DUe(e.from,r,t);l=t.add(mje({key:g.key||(e.key?x1(e.key):void 0),pulse:g.pulse,clean:!r}));const m=ye(l);l=u=t.add($s({pulse:m})),l=t.add(kje({markdef:EUe(e),interactive:$Ue(e.interactive,t),clip:_Ue(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ye(l)}));const y=ye(l);l=c=t.add(Tie(_ie(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const S=x8(k,t),C=S.metadata;(C.generates||C.changes)&&q("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=ye(l),t.add(l=S)}),e.sort&&(l=t.add(Pje({sort:t.compareRef(e.sort),pulse:ye(l)})));const v=ye(l);(i||s)&&(s=t.add(Pie({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=ye(s));const b=t.add(Aie({mark:y,pulse:d||v}));h=ye(b),r&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||h,m),i?OUe(e,t,g):p?NUe(e,t,g):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(b))),o&&(h=IUe(o,h,t));const x=t.add(Fie({pulse:h})),w=t.add(zd({pulse:ye(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new hd(t,u,x,w)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&q("Marks only support modify triggers."),Wie(k,t,f)}))}function IUe(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:wn(o)?n.signalRef(o.signal):o,method:wn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=wn(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return ye(n.add(Eje(s)))}function LUe(e,t){const n=t.config.legend,r=e.encode||{},i=Ei(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let c=0,f,d,h;g8.forEach(b=>e[b]?(u[b]=e[b],c=c||e[b]):0),c||q("Missing valid scale for legend.");const p=zUe(e,t.scaleType(c)),g={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},m=ye(t.add($s(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},v=ye(t.add(wje(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===A2?(h=[fUe(e,c,n,r.gradient),Yj(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Wf(i.gradientLength())})/100))`)):p===A4?h=[dUe(e,c,n,r.gradient,v),Yj(e,n,r.labels,v)]:(f=mUe(e,n),h=[gUe(e,n,r,v,Wf(f.columns))],d.size=UUe(e,t,h[0].marks)),h=[S1({role:IBe,from:m,encode:y,marks:h,layout:f,interactive:a})],g.title&&h.push(CUe(e,n,r.title,m)),g_(S1({role:OBe,from:m,encode:tm(jUe(i,e,n),o,Nv),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function zUe(e,t){let n=e.type||Gj;return!e.type&&BUe(e)===1&&(e.fill||e.stroke)&&(n=bR(t)?A2:xT(t)?A4:Gj),n!==A2?n:xT(t)?A4:A2}function BUe(e){return g8.reduce((t,n)=>t+(e[n]?1:0),0)}function jUe(e,t,n){const r={enter:{},update:{}};return er(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function UUe(e,t,n){const r=Wf(tU("size",e,n)),i=Wf(tU("strokeWidth",e,n)),o=Wf(VUe(n[1].encode,t,Ov));return xa(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function tU(e,t,n){return t[e]?`scale("${t[e]}",datum)`:zie(e,n[0].encode)}function VUe(e,t,n){return zie("fontSize",e)||uUe("fontSize",t,n)}const WUe=`item.orient==="${nm}"?-90:item.orient==="${rm}"?90:0`;function HUe(e,t){e=le(e)?{text:e}:e;const n=Ei(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},c=ye(t.add($s(null,[u])));return l.push(YUe(e,n,qUe(e),c)),e.subtitle&&l.push(XUe(e,n,r.subtitle,c)),g_(S1({role:jBe,from:c,encode:GUe(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function qUe(e){const t=e.encode;return t&&t.title||De({name:e.name,interactive:e.interactive,style:e.style},t)}function GUe(e,t){const n={enter:{},update:{}};return er(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:y8},angle:{signal:WUe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),tm(n,t,Nv)}function YUe(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return er(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Qi({type:Bd,role:UBe,style:eUe,from:r,encode:s},n)}function XUe(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return er(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Qi({type:Bd,role:VBe,style:tUe,from:r,encode:s},n)}function KUe(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(x8(r,t))}),e.on&&e.on.forEach(r=>{Wie(r,t,e.name)}),t.addDataPipeline(e.name,QUe(e,t,n))}function QUe(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,c,f;for(e.values?wn(e.values)||E2(e.format)?(r.push(nU(t,e)),r.push(i=jc())):r.push(i=jc({$ingest:e.values,$format:e.format})):e.url?E2(e.url)||E2(e.format)?(r.push(nU(t,e)),r.push(i=jc())):r.push(i=jc({$request:e.url,$format:e.format})):e.source&&(i=a=ae(e.source).map(d=>ye(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!i&&!f.source&&r.push(i=jc()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(u=a.length-1,r[0]=Mje({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,jc())),i||r.push(jc()),r.push(zd({})),r}function jc(e){const t=$s({},e);return t.metadata={source:!0},t}function nU(e,t){return Sje({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Hie=e=>e===uc||e===As,m_=(e,t,n)=>wn(e)?tVe(e.signal,t,n):e===nm||e===As?t:n,Rn=(e,t,n)=>wn(e)?JUe(e.signal,t,n):Hie(e)?t:n,ps=(e,t,n)=>wn(e)?eVe(e.signal,t,n):Hie(e)?n:t,qie=(e,t,n)=>wn(e)?nVe(e.signal,t,n):e===As?{value:t}:{value:n},ZUe=(e,t,n)=>wn(e)?rVe(e.signal,t,n):e===rm?{value:t}:{value:n},JUe=(e,t,n)=>Gie(`${e} === '${As}' || ${e} === '${uc}'`,t,n),eVe=(e,t,n)=>Gie(`${e} !== '${As}' && ${e} !== '${uc}'`,t,n),tVe=(e,t,n)=>w8(`${e} === '${nm}' || ${e} === '${As}'`,t,n),nVe=(e,t,n)=>w8(`${e} === '${As}'`,t,n),rVe=(e,t,n)=>w8(`${e} === '${rm}'`,t,n),Gie=(e,t,n)=>(t=t!=null?Pn(t):t,n=n!=null?Pn(n):n,rU(t)&&rU(n)?(t=t?t.signal||te(t.value):null,n=n?n.signal||te(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[De({test:e},t)].concat(n||[])),rU=e=>e==null||Object.keys(e).length===1,w8=(e,t,n)=>({signal:`${e} ? (${Kh(t)}) : (${Kh(n)})`}),iVe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${nm}' ? (${Kh(r)}) : `:"")+(n!=null?`${e} === '${uc}' ? (${Kh(n)}) : `:"")+(i!=null?`${e} === '${rm}' ? (${Kh(i)}) : `:"")+(t!=null?`${e} === '${As}' ? (${Kh(t)}) : `:"")+"(null)"}),Kh=e=>wn(e)?e.signal:e==null?null:te(e),oVe=(e,t)=>t===0?0:wn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},dp=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function hh(e,t,n,r){let i;if(t&&ce(t,e))return t[e];if(ce(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[p8][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Ov][i]}return null}function iU(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function sVe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(wn(s)){const f=iU([n.axisX,n.axisY]),d=iU([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of f)a[u]=Rn(s,hh(u,n.axisX,i,r),hh(u,n.axisY,i,r));l={};for(u of d)l[u]=iVe(s.signal,hh(u,n.axisTop,i,r),hh(u,n.axisBottom,i,r),hh(u,n.axisLeft,i,r),hh(u,n.axisRight,i,r))}else a=s===As||s===uc?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?De({},i,a,l,o):i}function aVe(e,t,n,r){const i=Ei(e,t),o=e.orient;let s,a;const l={enter:s={opacity:Ge},update:a={opacity:$o},exit:{opacity:Ge}};er(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=oU(e,0),c=oU(e,1);return s.x=a.x=Rn(o,u,Ge),s.x2=a.x2=Rn(o,c),s.y=a.y=ps(o,u,Ge),s.y2=a.y2=ps(o,c),Qi({type:m8,role:MBe,from:r,encode:l},n)}function oU(e,t){return{scale:e.scale,range:t}}function lVe(e,t,n,r,i){const o=Ei(e,t),s=e.orient,a=e.gridScale,l=m_(s,1,-1),u=uVe(e.offset,l);let c,f,d;const h={enter:c={opacity:Ge},update:d={opacity:$o},exit:f={opacity:Ge}};er(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:Eo,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},g=Rn(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:De(g,{mult:l,offset:u});return c.x=d.x=Rn(s,p,m),c.y=d.y=ps(s,p,m),c.x2=d.x2=ps(s,y),c.y2=d.y2=Rn(s,y),f.x=Rn(s,p),f.y=ps(s,p),Qi({type:m8,role:FBe,key:Eo,from:r,encode:h},n)}function uVe(e,t){if(t!==1)if(!se(e))e=wn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=De({},e);for(;n.mult!=null;)if(se(n.mult))n=n.mult=De({},n.mult);else return n.mult=wn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function cVe(e,t,n,r,i,o){const s=Ei(e,t),a=e.orient,l=m_(a,-1,1);let u,c,f;const d={enter:u={opacity:Ge},update:f={opacity:$o},exit:c={opacity:Ge}};er(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=Pn(i);h.mult=l;const p={scale:e.scale,field:Eo,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=u.y=Rn(a,Ge,p),f.y2=u.y2=Rn(a,h),c.x=Rn(a,p),f.x=u.x=ps(a,Ge,p),f.x2=u.x2=ps(a,h),c.y=ps(a,p),Qi({type:m8,role:RBe,key:Eo,from:r,encode:d},n)}function U5(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function fVe(e,t,n,r,i,o){const s=Ei(e,t),a=e.orient,l=e.scale,u=m_(a,-1,1),c=Wf(s("labelFlush")),f=Wf(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let p=c===0||!!c,g;const m=Pn(i);m.mult=u,m.offset=Pn(s("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:Eo,band:.5,offset:Bie(o.offset,s("labelOffset"))},v=Rn(a,p?U5(l,c,'"left"','"right"','"center"'):{value:"center"},ZUe(a,"left","right")),b=Rn(a,qie(a,"bottom","top"),p?U5(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=U5(l,c,`-(${f})`,f,0);p=p&&f;const w={opacity:Ge,x:Rn(a,y,m),y:ps(a,y,m)},k={enter:w,update:g={opacity:$o,text:{field:h8},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:Ge,x:w.x,y:w.y}};er(k,{dx:!d&&p?Rn(a,x):null,dy:!h&&p?ps(a,x):null}),er(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const S=s("labelBound");let C=s("labelOverlap");return C=C||S?{separation:s("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:l,orient:a,tolerance:S}:null}:void 0,g.align!==v&&(g.align=dp(g.align,v)),g.baseline!==b&&(g.baseline=dp(g.baseline,b)),Qi({type:Bd,role:PBe,style:Ov,key:Eo,from:r,encode:k,overlap:C},n)}function dVe(e,t,n,r){const i=Ei(e,t),o=e.orient,s=m_(o,-1,1);let a,l;const u={enter:a={opacity:Ge,anchor:Pn(i("titleAnchor",null)),align:{signal:y8}},update:l=De({},a,{opacity:$o,text:Pn(e.title)}),exit:{opacity:Ge}},c={signal:`lerp(range("${e.scale}"), ${h_(0,1,.5)})`};return l.x=Rn(o,c),l.y=ps(o,c),a.angle=Rn(o,Ge,oVe(s,90)),a.baseline=Rn(o,qie(o,uc,As),{value:uc}),l.angle=a.angle,l.baseline=a.baseline,er(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),hVe(i,o,u,n),u.update.align=dp(u.update.align,a.align),u.update.angle=dp(u.update.angle,a.angle),u.update.baseline=dp(u.update.baseline,a.baseline),Qi({type:Bd,role:DBe,style:p8,from:r,encode:u},n)}function hVe(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=dp(Pn(a),n.update[l]),!1):!xh(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?Pn(s):Rn(t,Pn(s),Pn(o))}function pVe(e,t){const n=sVe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=Ei(e,n),u=cUe(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=ye(t.add($s({},[c]))),d=ye(t.add(gje({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(lVe(e,n,r.grid,d,u)),c.ticks&&(p=l("tickSize"),h.push(cVe(e,n,r.ticks,d,p,u))),c.labels&&(p=c.ticks?p:0,h.push(fVe(e,n,r.labels,d,p,u))),c.domain&&h.push(aVe(e,n,r.domain,f)),c.title&&h.push(dVe(e,n,r.title,f)),g_(S1({role:TBe,from:f,encode:tm(gVe(l,e),i,Nv),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function gVe(e,t){const n={enter:{},update:{}};return er(n,{orient:e("orient"),offset:e("offset")||0,position:Zo(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Yie(e,t,n){const r=ae(e.signals),i=ae(e.scales);return n||r.forEach(o=>Eie(o,t)),ae(e.projections).forEach(o=>Gje(o,t)),i.forEach(o=>Oje(o,t)),ae(e.data).forEach(o=>KUe(o,t)),i.forEach(o=>Nje(o,t)),(n||r).forEach(o=>pje(o,t)),ae(e.axes).forEach(o=>pVe(o,t)),ae(e.marks).forEach(o=>g_(o,t)),ae(e.legends).forEach(o=>LUe(o,t)),e.title&&HUe(e.title,t),t.parseLambdas(),t}const mVe=e=>tm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function yVe(e,t){const n=t.config,r=ye(t.root=t.add(US())),i=vVe(e,n);i.forEach(u=>Eie(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add($s()),s=t.add(Tie(_ie(mVe(e.encode),d_,u8,e.style,t,{pulse:ye(o)}))),a=t.add(Pie({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:ye(s)}));t.operators.pop(),t.pushState(ye(s),ye(a),null),Yie(e,t,i),t.operators.push(a);let l=t.add(Aie({mark:r,pulse:ye(a)}));return l=t.add(Fie({pulse:ye(l)})),l=t.add(zd({pulse:ye(l)})),t.addData("root",new hd(t,o,o,l)),t}function Ym(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function vVe(e,t){const n=s=>Zo(e[s],t[s]),r=[Ym("background",n("background")),Ym("autosize",EBe(n("autosize"))),Ym("padding",ABe(n("padding"))),Ym("width",n("width")||0),Ym("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return ae(e.signals).forEach(s=>{ce(i,s.name)?s=De(i[s.name],s):r.push(s),o[s.name]=s}),ae(t.signals).forEach(s=>{!ce(o,s.name)&&!ce(i,s.name)&&r.push(s)}),r}function Xie(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function sU(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Xie.prototype=sU.prototype={parse(e){return Yie(e,this)},fork(){return new sU(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof k4?ye(e):e;return this.add(Tje({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(ye(this.add(zd({pulse:e})))),this._parent.push(t),this._lookup.push(n?ye(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return He(this._parent)},encode(){return He(this._encode)},lookup(){return He(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(le(e))return x1(e,t);e.signal||q("Unsupported field reference: "+te(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=ye(this.add(bje(i)))}return r},compareRef(e){let t=!1;const n=o=>wn(o)?(t=!0,this.signalRef(o.signal)):ije(o)?(t=!0,this.exprRef(o.expr)):o,r=ae(e.field).map(n),i=ae(e.order).map(n);return t?ye(this.add(qj({fields:r,orders:i}))):Wj(r,i)},keyRef(e,t){let n=!1;const r=o=>wn(o)?(n=!0,ye(i[o.signal])):o,i=this.signals;return e=ae(e).map(r),n?ye(this.add(xje({fields:e,flat:t}))):eje(e,t)},sortRef(e){if(!e)return e;const t=c_(e.op,e.field),n=e.order||tje;return n.signal?ye(this.add(qj({fields:t,orders:this.signalRef(n.signal)}))):Wj(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return ce(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&q("Duplicate signal name: "+te(e));const n=t instanceof k4?t:this.add(US(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||q("Unrecognized signal name: "+te(e)),this.signals[e]},signalRef(e){return this.signals[e]?ye(this.signals[e]):(ce(this.lambdas,e)||(this.lambdas[e]=this.add(US(null))),ye(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=xa(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!se(e)?e:this.signalRef(e.signal||S8(e))},exprRef(e,t){const n={expr:xa(e,this)};return t&&(n.expr.$name=t),ye(this.add(yje(n)))},addBinding(e,t){this.bindings||q("Nested signals do not support binding: "+te(e)),this.bindings.push(De({signal:e},t))},addScaleProj(e,t){ce(this.scales,e)&&q("Duplicate scale or projection name: "+te(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Fje(t))},addProjection(e,t){this.addScaleProj(e,Aje(t))},getScale(e){return this.scales[e]||q("Unrecognized scale name: "+te(e)),this.scales[e]},scaleRef(e){return ye(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ce(this.data,e)&&q("Duplicate data set name: "+te(e)),this.data[e]=t},getData(e){return this.data[e]||q("Undefined data set name: "+te(e)),this.data[e]},addDataPipeline(e,t){return ce(this.data,e)&&q("Duplicate data set name: "+te(e)),this.addData(e,hd.fromEntries(this,t))}};function S8(e){return(G(e)?bVe:xVe)(e)}function bVe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(se(i)?i.signal||S8(i):te(i))}return n+"]"}function xVe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+te(r)+":"+(se(i)?i.signal||S8(i):te(i));return t+"}"}function wVe(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function SVe(e,t,n){return se(e)||q("Input Vega specification must be an object."),t=Vg(wVe(),t,e.config),yVe(e,new Xie(t,n)).toRuntime()}var kVe="5.30.0";De(tg,_4e,XRe,$De,dOe,s9e,RNe,dNe,ONe,oIe,gIe,SIe);const CVe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:hn,CanvasHandler:Ev,CanvasRenderer:nS,DATE:xi,DAY:mr,DAYOFYEAR:va,Dataflow:lp,Debug:LK,Error:aC,EventStream:yC,Gradient:Iee,GroupItem:BC,HOURS:Yi,Handler:WR,HybridHandler:Ate,HybridRenderer:FT,Info:IK,Item:zC,MILLISECONDS:xs,MINUTES:Xi,MONTH:xr,Marks:Ki,MultiPulse:r6,None:NK,Operator:xt,Parameters:mC,Pulse:Hu,QUARTER:bi,RenderType:$u,Renderer:_v,ResourceLoader:Wee,SECONDS:Po,SVGHandler:gte,SVGRenderer:KR,SVGStringRenderer:$te,Scenegraph:ate,TIME_UNITS:GP,Transform:V,View:hie,WEEK:bn,Warn:RP,YEAR:Qn,accessor:_i,accessorFields:br,accessorName:Zt,array:ae,ascending:cC,bandwidthNRD:a6,bin:vZ,bootstrapCI:bZ,boundClip:Lte,boundContext:wv,boundItem:ET,boundMark:rte,boundStroke:Dl,changeset:Od,clampRange:XK,codegenExpression:Bre,compare:LP,constant:_r,cumulativeLogNormal:h6,cumulativeNormal:bC,cumulativeUniform:y6,dayofyear:_Q,debounce:zP,defaultLocale:ZP,definition:gZ,densityLogNormal:d6,densityNormal:l6,densityUniform:m6,domChild:yn,domClear:yo,domCreate:_u,domFind:VR,dotbin:xZ,error:q,expressionFunction:sn,extend:De,extent:ya,extentIndex:KK,falsy:Kl,fastmap:Hg,field:Mo,flush:QK,font:HC,fontFamily:Cv,fontSize:$a,format:s2,formatLocale:Rw,formats:t6,hasOwnProperty:ce,id:nv,identity:Cr,inferType:iZ,inferTypes:oZ,ingest:st,inherits:ne,inrange:Hh,interpolate:xR,interpolateColors:IC,interpolateRange:kee,intersect:Dte,intersectBoxLine:qh,intersectPath:AR,intersectPoint:TR,intersectRule:qee,isArray:G,isBoolean:wc,isDate:Wu,isFunction:Oe,isIterable:ZK,isNumber:Qe,isObject:se,isRegExp:JK,isString:le,isTuple:pC,key:BP,lerp:eQ,lineHeight:sc,loader:dC,locale:nZ,logger:DP,lruCache:tQ,markup:XR,merge:nQ,mergeConfig:Vg,multiLineOffset:BR,one:Ug,pad:rQ,panLinear:VK,panLog:WK,panPow:HK,panSymlog:qK,parse:SVe,parseExpression:XD,parseSelector:$c,path:CC,pathCurves:_R,pathEqual:zte,pathParse:ag,pathRectangle:Bee,pathRender:l1,pathSymbols:zee,pathTrail:jee,peek:He,point:GC,projection:gD,quantileLogNormal:p6,quantileNormal:xC,quantileUniform:v6,quantiles:o6,quantizeInterpolator:Cee,quarter:GK,quartiles:s6,get random(){return Ro},randomInteger:TTe,randomKDE:c6,randomLCG:ATe,randomLogNormal:SZ,randomMixture:kZ,randomNormal:u6,randomUniform:CZ,read:lZ,regressionConstant:b6,regressionExp:EZ,regressionLinear:x6,regressionLoess:TZ,regressionLog:_Z,regressionPoly:AZ,regressionPow:$Z,regressionQuad:w6,renderModule:YC,repeat:m0,resetDefaultLocale:_3e,resetSVGClipId:Vee,resetSVGDefIds:hRe,responseType:aZ,runtimeContext:eie,sampleCurve:SC,sampleLogNormal:f6,sampleNormal:vC,sampleUniform:g6,scale:Je,sceneEqual:QR,sceneFromJSON:ote,scenePickVisit:Yw,sceneToJSON:ite,sceneVisit:ws,sceneZOrder:MR,scheme:wR,serializeXML:kte,setHybridRendererOptions:uRe,setRandom:ETe,span:rv,splitAccessPath:Ca,stringValue:te,textMetrics:Vi,timeBin:UQ,timeFloor:PQ,timeFormatLocale:n1,timeInterval:Gg,timeOffset:OQ,timeSequence:LQ,timeUnitSpecifier:CQ,timeUnits:YP,toBoolean:jP,toDate:UP,toNumber:yr,toSet:ys,toString:VP,transform:mZ,transforms:tg,truncate:iQ,truthy:Fo,tupleid:ve,typeParsers:uT,utcFloor:RQ,utcInterval:Yg,utcOffset:NQ,utcSequence:zQ,utcdayofyear:AQ,utcquarter:YK,utcweek:TQ,version:kVe,visitArray:ru,week:EQ,writeConfig:Wg,zero:du,zoomLinear:OP,zoomLog:NP,zoomPow:$w,zoomSymlog:IP},Symbol.toStringTag,{value:"Module"}));function _Ve(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var EVe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},$Ve={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},AVe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const TVe=Array.prototype.slice,Uc=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,TVe.call(t,1))},MVe=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var FVe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:MVe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Uc("join",arguments)},indexof:function(){return Uc("indexOf",arguments)},lastindexof:function(){return Uc("lastIndexOf",arguments)},slice:function(){return Uc("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Uc("substring",arguments,String)},split:function(){return Uc("split",arguments,String)},replace:function(){return Uc("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const PVe=["view","item","group","xy","x","y"],M4=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&M4.add(setImmediate);const RVe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:EVe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),M4.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||FVe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>$Ve[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>AVe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,M4.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Xm(e,t,n,r,i,o){const s=a=>RVe[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,PVe.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var DVe={operator(e,t){const n=t.ast,r=e.functions;return i=>Xm(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>Xm(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>Xm(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return Xm(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,c;for(const f in r)c=Xm(r[f].ast,i,a,l,void 0,s),s[f]!==c&&(s[f]=c,u=1);return n!=="rule"&&_Ve(s,r,o),u}}};const OVe="vega-lite",NVe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',IVe="5.21.0",LVe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],zVe="https://vega.github.io/vega-lite/",BVe="Vega-Lite is a concise high-level language for interactive visualization.",jVe=["vega","chart","visualization"],UVe="build/vega-lite.js",VVe="build/vega-lite.min.js",WVe="build/vega-lite.min.js",HVe="build/src/index",qVe="build/src/index.d.ts",GVe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},YVe=["bin","build","src","vega-lite*","tsconfig.json"],XVe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},KVe={type:"git",url:"https://github.com/vega/vega-lite.git"},QVe="BSD-3-Clause",ZVe={url:"https://github.com/vega/vega-lite/issues"},JVe={"@babel/core":"^7.24.9","@babel/preset-env":"^7.25.0","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.6.0",rollup:"^4.19.1","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.3","ts-jest":"^29.2.3","ts-json-schema-generator":"^2.3.0",typescript:"~5.5.4","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.26.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},eWe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},tWe={vega:"^5.24.0"},nWe={node:">=18"},rWe="yarn@1.22.19",iWe={name:OVe,author:NVe,version:IVe,collaborators:LVe,homepage:zVe,description:BVe,keywords:jVe,main:UVe,unpkg:VVe,jsdelivr:WVe,module:HVe,types:qVe,bin:GVe,files:YVe,scripts:XVe,repository:KVe,license:QVe,bugs:ZVe,devDependencies:JVe,dependencies:eWe,peerDependencies:tWe,engines:nWe,packageManager:rWe};function k8(e){return K(e,"or")}function C8(e){return K(e,"and")}function _8(e){return K(e,"not")}function M2(e,t){if(_8(e))M2(e.not,t);else if(C8(e))for(const n of e.and)M2(n,t);else if(k8(e))for(const n of e.or)M2(n,t);else t(e)}function hp(e,t){return _8(e)?{not:hp(e.not,t)}:C8(e)?{and:e.and.map(n=>hp(n,t))}:k8(e)?{or:e.or.map(n=>hp(n,t))}:t(e)}const Te=structuredClone;function Kie(e){throw new Error(e)}function mg(e,t){const n={};for(const r of t)ce(e,r)&&(n[r]=e[r]);return n}function gi(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>yt(e)).join(",")})`};function Be(e){if(Qe(e))return e;const t=le(e)?e:yt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function F4(e){return e===!1||e===null}function Le(e,t){return e.includes(t)}function yg(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function E8(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Qie(e,...t){for(const n of t)oWe(e,n??{});return e}function oWe(e,t){for(const n of X(t))Wg(e,n,t[n],!0)}function ia(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function sWe(e,t){const n=X(e),r=X(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Zie(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function $8(e,t){for(const n of e)if(t.has(n))return!0;return!1}function P4(e){const t=new Set;for(const n of e){const i=Ca(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function A8(e,t){return e===void 0||t===void 0?!0:$8(P4(e),P4(t))}function mt(e){return X(e).length===0}const X=Object.keys,Zn=Object.values,cc=Object.entries;function k1(e){return e===!0||e===!1}function Nt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function xy(e,t){return _8(e)?`!(${xy(e.not,t)})`:C8(e)?`(${e.and.map(n=>xy(n,t)).join(") && (")})`:k8(e)?`(${e.or.map(n=>xy(n,t)).join(") || (")})`:t(e)}function VS(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&VS(e[n],t)&&delete e[n],mt(e)}function Iv(e){return e.charAt(0).toUpperCase()+e.substr(1)}function T8(e,t="datum"){const n=Ca(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(te).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function Jie(e,t="datum"){return`${t}[${te(Ca(e).join("."))}]`}function aWe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Oo(e){return`${Ca(e).map(aWe).join("\\.")}`}function pd(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function im(e){return`${Ca(e).join(".")}`}function vg(e){return e?Ca(e).length:0}function rn(...e){return e.find(t=>t!==void 0)}let eoe=42;function toe(e){const t=++eoe;return e?String(e)+t:t}function lWe(){eoe=42}function noe(e){return roe(e)?e:`__${e}`}function roe(e){return e.startsWith("__")}function C1(e){if(e!==void 0)return(e%360+360)%360}function y_(e){return Qe(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const aU=Object.getPrototypeOf(structuredClone({}));function Li(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Li(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!Li(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==aU.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==aU.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!Li(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function yt(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(s,1),`{${o}}`}(e)}function K(e,t){return se(e)&&ce(e,t)&&e[t]!==void 0}const gl="row",ml="column",v_="facet",It="x",zn="y",Ts="x2",Fa="y2",Ac="xOffset",om="yOffset",Ms="radius",Nl="radius2",Lo="theta",Il="theta2",Fs="latitude",Ps="longitude",Rs="latitude2",No="longitude2",Si="color",Pa="fill",Ra="stroke",ki="shape",Ll="size",jd="angle",zl="opacity",Tc="fillOpacity",Mc="strokeOpacity",Fc="strokeWidth",Pc="strokeDash",Lv="text",bg="order",zv="detail",b_="key",gd="tooltip",x_="href",w_="url",S_="description",uWe={x:1,y:1,x2:1,y2:1},ioe={theta:1,theta2:1,radius:1,radius2:1};function ooe(e){return ce(ioe,e)}const M8={longitude:1,longitude2:1,latitude:1,latitude2:1};function soe(e){switch(e){case Fs:return"y";case Rs:return"y2";case Ps:return"x";case No:return"x2"}}function aoe(e){return ce(M8,e)}const cWe=X(M8),F8={...uWe,...ioe,...M8,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function pp(e){return e===Si||e===Pa||e===Ra}const loe={row:1,column:1,facet:1},Co=X(loe),P8={...F8,...loe},fWe=X(P8),{order:Got,detail:Yot,tooltip:Xot,...dWe}=P8,{row:Kot,column:Qot,facet:Zot,...hWe}=dWe;function pWe(e){return ce(hWe,e)}function uoe(e){return ce(P8,e)}const gWe=[Ts,Fa,Rs,No,Il,Nl];function coe(e){return Ud(e)!==e}function Ud(e){switch(e){case Ts:return It;case Fa:return zn;case Rs:return Fs;case No:return Ps;case Il:return Lo;case Nl:return Ms}return e}function fc(e){if(ooe(e))switch(e){case Lo:return"startAngle";case Il:return"endAngle";case Ms:return"outerRadius";case Nl:return"innerRadius"}return e}function Da(e){switch(e){case It:return Ts;case zn:return Fa;case Fs:return Rs;case Ps:return No;case Lo:return Il;case Ms:return Nl}}function Ci(e){switch(e){case It:case Ts:return"width";case zn:case Fa:return"height"}}function foe(e){switch(e){case It:return"xOffset";case zn:return"yOffset";case Ts:return"x2Offset";case Fa:return"y2Offset";case Lo:return"thetaOffset";case Ms:return"radiusOffset";case Il:return"theta2Offset";case Nl:return"radius2Offset"}}function R8(e){switch(e){case It:return"xOffset";case zn:return"yOffset"}}function mWe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const yWe=X(F8),{x:Jot,y:est,x2:tst,y2:nst,xOffset:rst,yOffset:ist,latitude:ost,longitude:sst,latitude2:ast,longitude2:lst,theta:ust,theta2:cst,radius:fst,radius2:dst,...D8}=F8,vWe=X(D8),O8={x:1,y:1},Bl=X(O8);function on(e){return ce(O8,e)}const N8={theta:1,radius:1},bWe=X(N8);function k_(e){return e==="width"?It:zn}const doe={xOffset:1,yOffset:1};function Bv(e){return ce(doe,e)}const{text:hst,tooltip:pst,href:gst,url:mst,description:yst,detail:vst,key:bst,order:xst,...hoe}=D8,xWe=X(hoe);function wWe(e){return ce(D8,e)}function SWe(e){switch(e){case Si:case Pa:case Ra:case Ll:case ki:case zl:case Fc:case Pc:return!0;case Tc:case Mc:case jd:return!1}}const poe={...O8,...N8,...doe,...hoe},I8=X(poe);function Oa(e){return ce(poe,e)}function kWe(e,t){return _We(e)[t]}const goe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:wst,...CWe}=goe;function _We(e){switch(e){case Si:case Pa:case Ra:case S_:case zv:case b_:case gd:case x_:case bg:case zl:case Tc:case Mc:case Fc:case v_:case gl:case ml:return goe;case It:case zn:case Ac:case om:case Fs:case Ps:return CWe;case Ts:case Fa:case Rs:case No:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ll:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Pc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ki:return{point:"always",geoshape:"always"};case Lv:return{text:"always"};case jd:return{point:"always",square:"always",text:"always"};case w_:return{image:"always"};case Lo:return{text:"always",arc:"always"};case Ms:return{text:"always",arc:"always"};case Il:case Nl:return{arc:"always"}}}function V5(e){switch(e){case It:case zn:case Lo:case Ms:case Ac:case om:case Ll:case jd:case Fc:case zl:case Tc:case Mc:case Ts:case Fa:case Il:case Nl:return;case v_:case gl:case ml:case ki:case Pc:case Lv:case gd:case x_:case w_:case S_:return"discrete";case Si:case Pa:case Ra:return"flexible";case Fs:case Ps:case Rs:case No:case zv:case b_:case bg:return}}const EWe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},$We={count:1,min:1,max:1};function Tl(e){return K(e,"argmin")}function Rc(e){return K(e,"argmax")}function L8(e){return le(e)&&ce(EWe,e)}const AWe=new Set(["count","valid","missing","distinct"]);function C_(e){return le(e)&&AWe.has(e)}function TWe(e){return le(e)&&Le(["min","max"],e)}const MWe=new Set(["count","sum","distinct","valid","missing"]),FWe=new Set(["mean","average","median","q1","q3","min","max"]);function moe(e){return wc(e)&&(e=N_(e,void 0)),"bin"+X(e).map(t=>__(e[t])?Nt(`_${t}_${cc(e[t])}`):Nt(`_${t}_${e[t]}`)).join("")}function kt(e){return e===!0||Vd(e)&&!e.binned}function Un(e){return e==="binned"||Vd(e)&&e.binned===!0}function Vd(e){return se(e)}function __(e){return K(e,"param")}function lU(e){switch(e){case gl:case ml:case Ll:case Si:case Pa:case Ra:case Fc:case zl:case Tc:case Mc:case ki:return 6;case Pc:return 4;default:return 10}}function jv(e){return K(e,"expr")}function Wn(e,{level:t}={level:0}){const n=X(e||{}),r={};for(const i of n)r[i]=t===0?Ri(e[i]):Wn(e[i],{level:t-1});return r}function yoe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,m={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=mg(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function au(e){return le(e)||G(e)&&le(e[0])}function me(e){return K(e,"signal")}function Wd(e){return K(e,"step")}function PWe(e){return G(e)?!1:K(e,"fields")&&!K(e,"data")}function RWe(e){return G(e)?!1:K(e,"fields")&&K(e,"data")}function al(e){return G(e)?!1:K(e,"field")&&K(e,"data")}const DWe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},OWe=X(DWe),NWe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},R4=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function voe(e){const t=G(e.condition)?e.condition.map(uU):uU(e.condition);return{...Ri(e),condition:t}}function Ri(e){if(jv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function uU(e){if(jv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function At(e){if(jv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return me(e)?e:e!==void 0?{value:e}:void 0}function IWe(e){return me(e)?e.signal:te(e)}function cU(e){return me(e)?e.signal:te(e.value)}function cs(e){return me(e)?e.signal:e==null?null:te(e)}function LWe(e,t,n){for(const r of n){const i=wa(r,t.markDef,t.config);i!==void 0&&(e[r]=At(i))}return e}function boe(e){return[].concat(e.type,e.style??[])}function gt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&K(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:wa(e,t,n,r)}function wa(e,t,n,{vgChannel:r}={}){const i=D4(e,t,n.style);return rn(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function D4(e,t,n){return xoe(e,boe(t),n)}function xoe(e,t,n){t=ae(t);let r;for(const i of t){const o=n[i];K(o,e)&&(r=o[e])}return r}function woe(e,t){return ae(e).reduce((n,r)=>(n.field.push(ie(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function Soe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Li(i,r))return;n.push(r)}),n}function koe(e,t){return Li(e,t)||!t?e:e?[...ae(e),...ae(t)].join(", "):t}function Coe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((au(n)||me(n))&&(au(r)||me(r)))return{explicit:e.explicit,value:koe(n,r)};if(au(n)||me(n))return{explicit:e.explicit,value:n};if(au(r)||me(r))return{explicit:e.explicit,value:r};if(!au(n)&&!me(n)&&!au(r)&&!me(r))return{explicit:e.explicit,value:Soe(n,r)};throw new Error("It should never reach here")}function z8(e){return`Invalid specification ${yt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const zWe='Autosize "fit" only works for single views and layered views.';function fU(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function dU(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function hU(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ci(e)}.`:'Dropping "fit" because spec has discrete size.'}function B8(e){return`Unknown field for ${e}. Cannot calculate view size.`}function pU(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function BWe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function jWe(e){return`The "nearest" transform is not supported for ${e} marks.`}function _oe(e){return`Selection not supported for ${e} yet.`}function UWe(e){return`Cannot find a selection named "${e}".`}const VWe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",WWe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",HWe="Legend bindings are only supported for selections over an individual field or encoding channel.";function qWe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function GWe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const YWe="The same selection must be used to override scale domains in a layered view.",XWe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function KWe(e){return`Unknown repeated value "${e}".`}function gU(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const QWe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function ZWe(e){return`Unrecognized parse "${e}".`}function mU(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const JWe="Attempt to add the same child twice.";function eHe(e){return`Ignoring an invalid transform: ${yt(e)}.`}const tHe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function yU(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function nHe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${yt(t)} is overridden by a child projection ${yt(n)}.`}const rHe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function iHe(e){return`${e}Offset dropped because ${e} is continuous`}function oHe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${yt(n)}}.`}function Eoe(e){return`Invalid field type "${e}".`}function sHe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function aHe(e){return`Invalid aggregation operator "${e}".`}function $oe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function lHe(e){return`Position range does not support relative band size for ${e}.`}function O4(e,t){return`Dropping ${yt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const uHe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function E_(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function cHe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function fHe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function dHe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function hHe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function W5(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function pHe(e){return`The ${e} for range marks cannot be an expression`}function gHe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function mHe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function yHe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function vHe(e){return`Cannot use the relative band size with ${e} scale.`}function bHe(e){return`Using unaggregated domain with raw field has no effect (${yt(e)}).`}function xHe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function wHe(e){return`Unaggregated domain is currently unsupported for log scale (${yt(e)}).`}function SHe(e){return`Cannot apply size to non-oriented mark "${e}".`}function kHe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function CHe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function Aoe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Toe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function _He(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${yt(n)} and ${yt(r)}). Using ${yt(n)}.`}function EHe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${yt(n)} and ${yt(r)}). Using the union of the two domains.`}function $He(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function AHe(e){return`Dropping sort property ${yt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const vU="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",THe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",MHe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",FHe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function PHe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function RHe(e){return`Stack is applied to a non-linear scale (${e}).`}function DHe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function WS(e,t){return`Invalid ${e}: ${yt(t)}.`}function OHe(e){return`Dropping day from datetime ${yt(e)} as day cannot be combined with other units.`}function NHe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function IHe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function LHe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function bU(e){return`1D error band does not support ${e}.`}function Moe(e){return`Channel ${e} is required for "binned" bin.`}function zHe(e){return`Channel ${e} should not be used with "binned" bin.`}function BHe(e){return`Domain for ${e} is required for threshold scale.`}const Foe=DP(RP);let xg=Foe;function jHe(e){return xg=e,xg}function UHe(){return xg=Foe,xg}function Z(...e){xg.warn(...e)}function VHe(...e){xg.debug(...e)}function Hd(e){if(e&&se(e)){for(const t of U8)if(K(e,t))return!0}return!1}const Poe=["january","february","march","april","may","june","july","august","september","october","november","december"],WHe=Poe.map(e=>e.substr(0,3)),Roe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],HHe=Roe.map(e=>e.substr(0,3));function qHe(e){if(y_(e)&&(e=+e),Qe(e))return e>4&&Z(WS("quarter",e)),e-1;throw new Error(WS("quarter",e))}function GHe(e){if(y_(e)&&(e=+e),Qe(e))return e-1;{const t=e.toLowerCase(),n=Poe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=WHe.indexOf(r);if(i!==-1)return i;throw new Error(WS("month",e))}}function YHe(e){if(y_(e)&&(e=+e),Qe(e))return e%7;{const t=e.toLowerCase(),n=Roe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=HHe.indexOf(r);if(i!==-1)return i;throw new Error(WS("day",e))}}function j8(e,t){const n=[];if(t&&e.day!==void 0&&X(e).length>1&&(Z(OHe(e)),e=Te(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?GHe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?qHe(e.quarter):e.quarter;n.push(Qe(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?YHe(e.day):e.day;n.push(Qe(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function md(e){const n=j8(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function XHe(e){const n=j8(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function KHe(e){const t=j8(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const Doe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},U8=X(Doe);function QHe(e){return ce(Doe,e)}function qd(e){return se(e)?e.binned:Ooe(e)}function Ooe(e){return e&&e.startsWith("binned")}function V8(e){return e.startsWith("utc")}function ZHe(e){return e.substring(3)}const JHe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function $_(e){return U8.filter(t=>Ioe(e,t))}function Noe(e){const t=$_(e);return t[t.length-1]}function Ioe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function eqe(e,t,{end:n}={end:!1}){const r=T8(t),i=V8(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of U8)Ioe(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),XHe(a)}function Loe(e){if(!e)return;const t=$_(e);return`timeUnitSpecifier(${yt(t)}, ${yt(JHe)})`}function tqe(e,t,n){if(!e)return;const r=Loe(e);return`${n||V8(e)?"utc":"time"}Format(${t}, ${r})`}function On(e){if(!e)return;let t;return le(e)?Ooe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:se(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),V8(t.unit)&&(t.utc=!0,t.unit=ZHe(t.unit)),t}function nqe(e){const{utc:t,...n}=On(e);return n.unit?(t?"utc":"")+X(n).map(r=>Nt(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+X(n).map(r=>Nt(`_${r}_${n[r]}`)).join("")}function zoe(e,t=n=>n){const n=On(e),r=Noe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=Boe(r,n.step),a={...i,[s]:+i[s]+o};return`${t(md(a))} - ${t(md(i))}`}}const rqe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function iqe(e){return ce(rqe,e)}function Boe(e,t=1){if(iqe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function oqe(e){return K(e,"param")}function W8(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function H8(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function q8(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function G8(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Y8(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function X8(e){if(e!=null&&e.field){if(G(e.range)&&e.range.length===2)return!0;if(me(e.range))return!0}return!1}function K8(e){return!!(e!=null&&e.field)&&(G(e.oneOf)||G(e.in))}function sqe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function joe(e){return K8(e)||W8(e)||X8(e)||H8(e)||G8(e)||q8(e)||Y8(e)}function zs(e,t){return I_(e,{timeUnit:t,wrapTime:!0})}function aqe(e,t){return e.map(n=>zs(n,t))}function Uoe(e,t=!0){const{field:n}=e,r=On(e.timeUnit),{unit:i,binned:o}=r||{},s=ie(e,{expr:"datum"}),a=i?`time(${o?s:eqe(i,n)})`:s;if(W8(e))return`${a}===${zs(e.equal,i)}`;if(H8(e)){const l=e.lt;return`${a}<${zs(l,i)}`}else if(G8(e)){const l=e.gt;return`${a}>${zs(l,i)}`}else if(q8(e)){const l=e.lte;return`${a}<=${zs(l,i)}`}else if(Y8(e)){const l=e.gte;return`${a}>=${zs(l,i)}`}else{if(K8(e))return`indexof([${aqe(e.oneOf,i).join(",")}], ${a}) !== -1`;if(sqe(e))return A_(a,e.valid);if(X8(e)){const{range:l}=Wn(e),u=me(l)?{signal:`${l.signal}[0]`}:l[0],c=me(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+zs(u,i)+", "+zs(c,i)+"])";const f=[];return u!==null&&f.push(`${a} >= ${zs(u,i)}`),c!==null&&f.push(`${a} <= ${zs(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${yt(e)}`)}function A_(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function lqe(e){return joe(e)&&e.timeUnit?{...e,timeUnit:On(e.timeUnit)}:e}const Uv={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function uqe(e){return e==="quantitative"||e==="temporal"}function Voe(e){return e==="ordinal"||e==="nominal"}const yd=Uv.quantitative,Q8=Uv.ordinal,wg=Uv.temporal,Z8=Uv.nominal,sm=Uv.geojson;function cqe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case yd:return"quantitative";case"t":case wg:return"temporal";case"o":case Q8:return"ordinal";case"n":case Z8:return"nominal";case sm:return"geojson"}}const Hn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},N4={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function fqe(e,t){const n=N4[e],r=N4[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const dqe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function xU(e){return dqe[e]}const Woe=new Set(["linear","log","pow","sqrt","symlog"]),Hoe=new Set([...Woe,"time","utc"]);function qoe(e){return Woe.has(e)}const Goe=new Set(["quantile","quantize","threshold"]),hqe=new Set([...Hoe,...Goe,"sequential","identity"]),pqe=new Set(["ordinal","bin-ordinal","point","band"]);function Nn(e){return pqe.has(e)}function Ss(e){return hqe.has(e)}function oa(e){return Hoe.has(e)}function Sg(e){return Goe.has(e)}const gqe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function mqe(e){return!le(e)&&K(e,"name")}function Yoe(e){return K(e,"param")}function yqe(e){return K(e,"unionWith")}function vqe(e){return se(e)&&"field"in e}const bqe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Sst,domain:kst,range:Cst,rangeMax:_st,rangeMin:Est,scheme:$st,...xqe}=bqe,wqe=X(xqe);function I4(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return oa(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return oa(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return oa(e);case"nice":return oa(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Ss(e)&&!Le(["log","time","utc","threshold","quantile"],e)}}function Xoe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return pp(e)?void 0:yHe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Sqe(e,t){return Le([Q8,Z8],t)?e===void 0||Nn(e):t===wg?Le([Hn.TIME,Hn.UTC,void 0],e):t===yd?qoe(e)||Sg(e)||e===void 0:!0}function kqe(e,t,n=!1){if(!Oa(e))return!1;switch(e){case It:case zn:case Ac:case om:case Lo:case Ms:return oa(t)||t==="band"?!0:t==="point"?!n:!1;case Ll:case Fc:case zl:case Tc:case Mc:case jd:return oa(t)||Sg(t)||Le(["band","point","ordinal"],t);case Si:case Pa:case Ra:return t!=="band";case Pc:case ki:return t==="ordinal"||Sg(t)}}function Cqe(e){return se(e)&&"value"in e}const ei={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Koe=ei.arc,T_=ei.area,M_=ei.bar,_qe=ei.image,F_=ei.line,P_=ei.point,Eqe=ei.rect,HS=ei.rule,Qoe=ei.text,J8=ei.tick,$qe=ei.trail,eO=ei.circle,tO=ei.square,Zoe=ei.geoshape;function Dc(e){return["line","area","trail"].includes(e)}function _1(e){return["rect","bar","image","arc","tick"].includes(e)}const Aqe=new Set(X(ei));function Sa(e){return K(e,"type")}const Tqe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Mqe=["fill","fillOpacity"],Fqe=[...Tqe,...Mqe],Pqe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},wU=X(Pqe),H5=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],Rqe={area:["line","point"],bar:H5,rect:H5,line:["point"],tick:["bandSize","thickness",...H5]},Dqe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Oqe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Joe=X(Oqe);function vd(e){return K(e,"band")}const Nqe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Iqe=5,nO={binSpacing:0,continuousBandSize:Iqe,minBandSize:.25,timeUnitBandPosition:.5},Lqe={...nO,binSpacing:1},zqe={...nO,thickness:1};function Bqe(e){return Sa(e)?e.type:e}function ese(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function rO({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!Ss(r)||i)return"always-valid";const o=ese(gt("invalid",e,t),{isPath:Dc(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function jqe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function tse({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function nse({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var c;const s=n==null?void 0:n.get("type"),a=Cs(t),l=C_(a==null?void 0:a.aggregate),u=rO({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){const f=((c=o.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:A_(ie(a,{expr:"datum"}),!1),...Uqe(f,n,r)}}}function Uqe(e,t,n){if(Cqe(e)){const{value:r}=e;return me(r)?{signal:r.signal}:{value:r}}return tse({scale:t,scaleName:n,mode:"zeroOrMin"})}function iO(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=Ud(t),l=oO(e),u=nse({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return u!==void 0?[u,l]:l}function Vqe(e){const{datum:t}=e;return Hd(t)?md(t):`${yt(t)}`}function Hf(e,t,n,r){const i={};if(t&&(i.scale=t),Na(e)){const{datum:o}=e;Hd(o)?i.signal=md(o):me(o)?i.signal=o.signal:jv(o)?i.signal=o.expr:i.value=o}else i.field=ie(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function qS({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!me(s)&&0<s&&s<1?"datum":void 0,l=ie(t,{expr:a,suffix:i}),u=n!==void 0?ie(n,{expr:a}):ie(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;const f=s===0?l:u;c.field=f}else{const f=me(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function Wqe({scaleName:e,fieldDef:t}){const n=ie(t,{expr:"datum"}),r=ie(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function oO({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(Fe(t)){const f=s==null?void 0:s.get("type");if(Kr(t)){c??(c=dc({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(kt(d)||c&&h&&p===wg)return a!=null&&a.impute?Hf(t,o,{binSuffix:"mid"},{offset:l}):c&&!Nn(f)?qS({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Hf(t,o,Gv(t,e)?{binSuffix:"range"}:{},{offset:l});if(Un(d)){if(J(n))return qS({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});Z(Moe(e===It?Ts:Fa))}}return Hf(t,o,Nn(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(ks(t)){const f=t.value,d=l?{offset:l}:{};return{...wy(e,f),...d}}}return Oe(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function wy(e,t){return Le(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Le(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:At(t)}function bd(e){return e&&e!=="number"&&e!=="time"}function rse(e,t,n){return`${e}(${t}${n?`, ${yt(n)}`:""})`}const Hqe=" – ";function sO({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var l,u;if(bd(n))return fs({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=ise(e,r,i),a=kg(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return fs({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return fs({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&J(e)&&e.timeUnit===void 0)return fs({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(_g(e)){const c=Gqe({field:s,timeUnit:J(e)?(l=On(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Gd(e)&&((u=e.scale)==null?void 0:u.type)===Hn.UTC});return c?{signal:c}:void 0}if(t=L4({type:a,specifiedFormat:t,config:o,normalizeStack:i}),J(e)&&kt(e.bin)){const c=ie(e,{expr:r,binSuffix:"end"});return{signal:Vv(s,c,t,n,o)}}else return t||kg(e)==="quantitative"?{signal:`${ase(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function ise(e,t,n){return J(e)?n?`${ie(e,{expr:t,suffix:"end"})}-${ie(e,{expr:t,suffix:"start"})}`:ie(e,{expr:t}):Vqe(e)}function fs({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=ise(e,r,i)),s!=="datum.value"&&J(e)&&kt(e.bin)){const a=ie(e,{expr:r,binSuffix:"end"});return{signal:Vv(s,a,t,n,o)}}return{signal:rse(n,s,t)}}function ose(e,t,n,r,i,o){var s;if(!(le(r)&&bd(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&kg(e)==="quantitative"&&(i.normalizedNumberFormatType&&Cg(e)&&e.stack==="normalize"||i.numberFormatType))){if(Cg(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return L4({type:"quantitative",config:i,normalizeStack:!0});if(_g(e)){const a=J(e)?(s=On(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:qqe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return L4({type:t,specifiedFormat:n,config:i})}}function sse(e,t,n){var r;if(e&&(me(e)||e==="number"||e==="time"))return e;if(_g(t)&&n!=="time"&&n!=="utc")return J(t)&&((r=On(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function L4({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(le(t))return t;if(e===yd)return r?n.normalizedNumberFormat:n.numberFormat}function qqe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:Loe(t)}:r?void 0:n.timeFormat)}function ase(e,t){return`format(${e}, "${t||""}")`}function SU(e,t,n,r){return bd(n)?rse(n,e,t):ase(e,(le(t)?t:void 0)??r.numberFormat)}function Vv(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return Vv(e,t,i.numberFormat,i.numberFormatType,i);const o=SU(e,n,r,i),s=SU(t,n,r,i);return`${A_(e,!1)} ? "null" : ${o} + "${Hqe}" + ${s}`}function Gqe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=le(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):tqe(t,e,o)}const R_="min",Yqe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function kU(e){return ce(Yqe,e)}function Xqe(e){return K(e,"encoding")}function yl(e){return e&&(e.op==="count"||K(e,"field"))}function lse(e){return e&&G(e)}function Wv(e){return K(e,"row")||K(e,"column")}function aO(e){return K(e,"header")}function D_(e){return K(e,"facet")}function Kqe(e){return K(e,"param")}function Qqe(e){return!le(e)&&K(e,"repeat")}function CU(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function lO(e){return K(e,"sort")}function dc({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Fe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(J(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return wa("timeUnitBandPosition",n,r);if(kt(o))return .5}}function use({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var u,c,f;const a=Ci(e),l=gt(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(J(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:wa("timeUnitBandSize",r,i)};if(kt(h)&&!Nn(o))return{band:1}}if(_1(r.type))return o?Nn(o)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function cse(e,t,n,r){return kt(e.bin)||e.timeUnit&&Kr(e)&&e.type==="temporal"?dc({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function fse(e){return K(e,"sort")&&!K(e,"field")}function Hv(e){return K(e,"condition")}function O_(e){const t=e==null?void 0:e.condition;return!!t&&!G(t)&&J(t)}function qv(e){const t=e==null?void 0:e.condition;return!!t&&!G(t)&&Fe(t)}function Zqe(e){const t=e==null?void 0:e.condition;return!!t&&(G(t)||ks(t))}function J(e){return K(e,"field")||(e==null?void 0:e.aggregate)==="count"}function kg(e){return e==null?void 0:e.type}function Na(e){return K(e,"datum")}function Pu(e){return Kr(e)&&!YS(e)||GS(e)}function _U(e){return Kr(e)&&e.type==="quantitative"&&!e.bin||GS(e)}function GS(e){return Na(e)&&Qe(e.datum)}function Fe(e){return J(e)||Na(e)}function Kr(e){return e&&(K(e,"field")||e.aggregate==="count")&&K(e,"type")}function ks(e){return K(e,"value")}function Gd(e){return K(e,"scale")||K(e,"sort")}function Cg(e){return K(e,"axis")||K(e,"stack")||K(e,"impute")}function dse(e){return K(e,"legend")}function hse(e){return K(e,"format")||K(e,"formatType")}function Jqe(e){return gi(e,["legend","axis","header","scale"])}function eGe(e){return K(e,"op")}function ie(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(nGe(e))n=noe("count");else{let s;if(!t.nofn)if(eGe(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;kt(a)?(s=moe(a),i=(t.binSuffix??"")+(t.suffix??"")):l?Rc(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Tl(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!qd(u)&&(s=nqe(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?im(n):t.expr?Jie(n,t.expr)+o:Oo(n)+o}function YS(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return J(e)&&!!e.bin;case"temporal":return!1}throw new Error(Eoe(e.type))}function tGe(e){var t;return Gd(e)&&Sg((t=e.scale)==null?void 0:t.type)}function nGe(e){return e.aggregate==="count"}function rGe(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(kt(r))return`${n} (binned)`;if(i&&!qd(i)){const a=(s=On(i))==null?void 0:s.unit;if(a)return`${n} (${$_(a).join("-")})`}else if(o)return Rc(o)?`${n} for max ${o.argmax}`:Tl(o)?`${n} for min ${o.argmin}`:`${Iv(o)} of ${n}`;return n}function iGe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Rc(t))return`${i} for argmax(${t.argmax})`;if(Tl(t))return`${i} for argmin(${t.argmin})`;const o=r&&!qd(r)?On(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||kt(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const pse=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return iGe(e);default:return rGe(e,t)}};let gse=pse;function mse(e){gse=e}function oGe(){mse(pse)}function gp(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=uO(e))==null?void 0:a.title;if(!J(e))return i??e.title;const o=e,s=r?cO(o,t):void 0;return n?rn(i,o.title,s):i??o.title??s}function uO(e){if(Cg(e)&&e.axis)return e.axis;if(dse(e)&&e.legend)return e.legend;if(aO(e)&&e.header)return e.header}function cO(e,t){return gse(e,t)}function XS(e){if(hse(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=uO(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function sGe(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(lO(e)&&G(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Rc(n)&&!Tl(n))return"quantitative";if(Gd(e)&&((o=e.scale)!=null&&o.type))switch(N4[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Cs(e){if(J(e))return e;if(O_(e))return e.condition}function xn(e){if(Fe(e))return e;if(qv(e))return e.condition}function yse(e,t,n,r={}){if(le(e)||Qe(e)||wc(e)){const i=le(e)?"string":Qe(e)?"number":"boolean";return Z(oHe(t,i,e)),{value:e}}return Fe(e)?KS(e,t,n,r):qv(e)?{...e,condition:KS(e.condition,t,n,r)}:e}function KS(e,t,n,r){if(hse(e)){const{format:i,formatType:o,...s}=e;if(bd(o)&&!n.customFormatTypes)return Z(yU(t)),KS(s,t,n,r)}else{const i=Cg(e)?"axis":dse(e)?"legend":aO(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(bd(s)&&!n.customFormatTypes)return Z(yU(t)),KS({...e,[i]:a},t,n,r)}}return J(e)?fO(e,t,r):aGe(e)}function aGe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Qe(n)?"quantitative":le(n)?"nominal":Hd(n)?"temporal":void 0,{...e,type:t}}function fO(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!L8(r)&&!Rc(r)&&!Tl(r)&&(Z(aHe(r)),delete a.aggregate),i&&(a.timeUnit=On(i)),s&&(a.field=`${s}`),kt(o)&&(a.bin=N_(o,t)),Un(o)&&!on(t)&&Z(zHe(t)),Kr(a)){const{type:l}=a,u=cqe(l);l!==u&&(a.type=u),l!=="quantitative"&&C_(r)&&(Z(sHe(l,r)),a.type="quantitative")}else if(!coe(t)){const l=sGe(a,t);a.type=l}if(Kr(a)){const{compatible:l,warning:u}=lGe(a,t)||{};l===!1&&Z(u)}if(lO(a)&&le(a.sort)){const{sort:l}=a;if(kU(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&kU(u))return{...a,sort:{encoding:u,order:"descending"}}}if(aO(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function N_(e,t){return wc(e)?{maxbins:lU(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:lU(t)}:e}const ph={compatible:!0};function lGe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case gl:case ml:case v_:return YS(e)?ph:{compatible:!1,warning:fHe(t)};case It:case zn:case Ac:case om:case Si:case Pa:case Ra:case Lv:case zv:case b_:case gd:case x_:case w_:case jd:case Lo:case Ms:case S_:return ph;case Ps:case No:case Fs:case Rs:return n!==yd?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:ph;case zl:case Tc:case Mc:case Fc:case Ll:case Il:case Nl:case Ts:case Fa:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:ph;case ki:case Pc:return!YS(e)&&!tGe(e)?{compatible:!1,warning:dHe(t)}:ph;case bg:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:ph}}function _g(e){const{formatType:t}=XS(e);return t==="time"||!t&&uGe(e)}function uGe(e){return e&&(e.type==="temporal"||J(e)&&!!e.timeUnit)}function I_(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=On(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return jv(e)?a=e.expr:me(e)?a=e.signal:Hd(e)?(s=!0,a=md(e)):(le(e)||Qe(e))&&s&&(a=`datetime(${yt(e)})`,QHe(o)&&(Qe(e)&&e<1e4||le(e)&&isNaN(Date.parse(e)))&&(a=md({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:yt(e)}function vse(e,t){const{type:n}=e;return t.map(r=>{const i=J(e)&&!qd(e.timeUnit)?e.timeUnit:void 0,o=I_(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function Gv(e,t){return kt(e.bin)?Oa(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const EU={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Yv(e){return e==null?void 0:e.condition}const bse=["domain","grid","labels","ticks","title"],cGe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},xse={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},fGe={...xse,style:1,labelExpr:1,encoding:1};function $U(e){return ce(fGe,e)}const dGe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},wse=X(dGe);function jl(e){return K(e,"mark")}class L_{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return jl(t)?Bqe(t.mark)===this.name:!1}}function qf(e,t){const n=e&&e[t];return n?G(n)?yg(n,r=>!!r.field):J(n)||O_(n):!1}function Sse(e,t){const n=e&&e[t];return n?G(n)?yg(n,r=>!!r.field):J(n)||Na(n)||qv(n):!1}function kse(e,t){if(on(t)){const n=e[t];if((J(n)||Na(n))&&(Voe(n.type)||J(n)&&n.timeUnit)){const r=R8(t);return Sse(e,r)}}return!1}function Cse(e){return yg(fWe,t=>{if(qf(e,t)){const n=e[t];if(G(n))return yg(n,r=>!!r.aggregate);{const r=Cs(n);return r&&!!r.aggregate}}return!1})}function _se(e,t){const n=[],r=[],i=[],o=[],s={};return dO(e,(a,l)=>{if(J(a)){const{field:u,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=uO(a),g=p==null?void 0:p.title;let m=ie(a,{forAs:!0});const y={...g?[]:{title:gp(a,t,{allowDisabling:!0})},...h,field:m};if(c){let v;if(Rc(c)?(v="argmax",m=ie({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${u}`):Tl(c)?(v="argmin",m=ie({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:m};u&&(b.field=u),o.push(b)}}else if(n.push(m),Kr(a)&&kt(f)){if(r.push({bin:f,field:u,as:m}),n.push(ie(a,{binSuffix:"end"})),Gv(a,l)&&n.push(ie(a,{binSuffix:"range"})),on(l)){const v={field:`${m}_end`};s[`${l}2`]=v}y.bin="binned",coe(l)||(y.type=yd)}else if(d&&!qd(d)){i.push({timeUnit:d,field:u,as:m});const v=Kr(a)&&a.type!==wg&&"time";v&&(l===Lv||l===gd?y.formatType=v:wWe(l)?y.legend={formatType:v,...y.legend}:on(l)&&(y.axis={formatType:v,...y.axis}))}s[l]=y}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function hGe(e,t,n){const r=kWe(t,n);if(r){if(r==="binned"){const i=e[t===Ts?It:zn];return!!(J(i)&&J(e[t])&&Un(i.bin))}}else return!1;return!0}function pGe(e,t,n,r){const i={};for(const o of X(e))uoe(o)||Z(cHe(o));for(let o of yWe){if(!e[o])continue;const s=e[o];if(Bv(o)){const a=mWe(o),l=i[a];if(J(l)&&uqe(l.type)&&J(s)&&!l.timeUnit){Z(iHe(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(Z(rHe),o=Lo),!hGe(e,o,t)){Z(E_(o,t));continue}if(o===Ll&&t==="line"){const a=Cs(e[o]);if(a!=null&&a.aggregate){Z(uHe);continue}}if(o===Si&&(n?"fill"in e:"stroke"in e)){Z($oe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===zv||o===bg&&!G(s)&&!ks(s)||o===gd&&G(s)){if(s){if(o===bg){const a=e[o];if(fse(a)){i[o]=a;continue}}i[o]=ae(s).reduce((a,l)=>(J(l)?a.push(fO(l,o)):Z(O4(l,o)),a),[])}}else{if(o===gd&&s===null)i[o]=null;else if(!J(s)&&!Na(s)&&!ks(s)&&!Hv(s)&&!me(s)){Z(O4(s,o));continue}i[o]=yse(s,o,r)}}return i}function z_(e,t){const n={};for(const r of X(e)){const i=yse(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function gGe(e){const t=[];for(const n of X(e))if(qf(e,n)){const r=e[n],i=ae(r);for(const o of i)J(o)?t.push(o):O_(o)&&t.push(o.condition)}return t}function dO(e,t,n){if(e)for(const r of X(e)){const i=e[r];if(G(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function mGe(e,t,n,r){return e?X(e).reduce((i,o)=>{const s=e[o];return G(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function Ese(e,t){return X(t).reduce((n,r)=>{switch(r){case It:case zn:case x_:case S_:case w_:case Ts:case Fa:case Ac:case om:case Lo:case Il:case Ms:case Nl:case Fs:case Ps:case Rs:case No:case Lv:case ki:case jd:case gd:return n;case bg:if(e==="line"||e==="trail")return n;case zv:case b_:{const i=t[r];if(G(i)||J(i))for(const o of ae(i))o.aggregate||n.push(ie(o,{}));return n}case Ll:if(e==="trail")return n;case Si:case Pa:case Ra:case zl:case Tc:case Mc:case Pc:case Fc:{const i=Cs(t[r]);return i&&!i.aggregate&&n.push(ie(i,{})),n}}},[])}function yGe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(G(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return G(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function z4(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${hO(t)}`:"";return{field:s+t.field,type:t.type,title:me(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=gGe(n).map(Jqe);return{tooltip:[...i,...ia(o,Be)]}}function hO(e){const{title:t,field:n}=e;return rn(t,n)}function pO(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=hO(n);return $se(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...le(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function $se(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...Sa(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...wc(e[t])?{}:e[t]}}]:[]}function Ase(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:gx(o,n),continuousAxisChannelDef2:gx(s,n),continuousAxisChannelDefError:gx(a,n),continuousAxisChannelDefError2:gx(l,n),continuousAxis:i}}function gx(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Z(LHe(n,t)),r}else return e}function Tse(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(Sa(n)&&n.orient)return n.orient;if(Pu(i)){if(Pu(o)){const s=J(i)&&i.aggregate,a=J(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return _g(o)&&!_g(i)?"horizontal":"vertical"}return"horizontal"}else{if(Pu(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const QS="boxplot",vGe=["box","median","outliers","rule","ticks"],bGe=new L_(QS,Fse);function Mse(e){return Qe(e)?"tukey":e}function Fse(e,{config:t}){e={...e,encoding:z_(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=Sa(n)?n:{type:n};i&&Z(_oe("boxplot"));const l=a.extent??t.boxplot.extent,u=gt("size",a,t),c=a.invalid,f=Mse(l),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:k}=xGe(e,l,t),S=im(g.field),{color:C,size:_,...$}=b,A=Kd=>pO(a,m,g,Kd,t.boxplot),N=A($),M=A(b),R=(se(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",P=A({...$,..._?{size:_}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...C||{value:R}}}}),D=z4([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,b),I={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},O=f==="min-max"?D:z4([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,b),j=[...N({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:O}),...N({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:O}),...N({partName:"ticks",mark:I,positionPrefix:"lower_whisker",extraEncoding:O}),...N({partName:"ticks",mark:I,positionPrefix:"upper_whisker",extraEncoding:O})],Y=[...f!=="tukey"?j:[],...M({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:D}),...P({partName:"median",mark:{type:"tick",invalid:c,...se(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:D})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(p),layer:Y};const W=`datum["lower_box_${g.field}"]`,oe=`datum["upper_box_${g.field}"]`,re=`(${oe} - ${W})`,we=`${W} - ${l} * ${re}`,Re=`${oe} + ${l} * ${re}`,lt=`datum["${g.field}"]`,_n={joinaggregate:Pse(g.field),groupby:y},rr={transform:[{filter:`(${we} <= ${lt}) && (${lt} <= ${Re})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${S}`},{op:"max",field:g.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:j},{tooltip:ue,..._e}=$,{scale:Ee,axis:Q}=g,pn=hO(g),et=gi(Q,["title"]),En=$se(a,"outliers",t.boxplot,{transform:[{filter:`(${lt} < ${we}) || (${lt} > ${Re})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...pn!==void 0?{title:pn}:{},...Ee!==void 0?{scale:Ee}:{},...mt(et)?{}:{axis:et}},..._e,...C?{color:C}:{},...k?{tooltip:k}:{}}})[0];let an;const ro=[...d,...h,_n];return En?an={transform:ro,layer:[En,rr]}:(an=rr,an.transform.unshift(...ro)),{...s,layer:[an,{transform:p,layer:Y}]}}function Pse(e){const t=im(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function xGe(e,t,n){const r=Tse(e,QS),{continuousAxisChannelDef:i,continuousAxis:o}=Ase(e,r,QS),s=i.field,a=im(s),l=Mse(t),u=[...Pse(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=yGe(d),{bins:g,timeUnits:m,aggregate:y,groupby:v,encoding:b}=_se(p,n),x=r==="vertical"?"horizontal":"vertical",w=r,k=[...g,...m,{aggregate:[...y,...u],groupby:v},...c];return{bins:g,timeUnits:m,transform:k,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:h}}const gO="errorbar",wGe=["ticks","rule"],SGe=new L_(gO,Rse);function Rse(e,{config:t}){e={...e,encoding:z_(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=Dse(e,gO,t);delete o.size;const c=pO(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function kGe(e,t){const{encoding:n}=e;if(CGe(n))return{orient:Tse(e,t),inputType:"raw"};const r=_Ge(n),i=EGe(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Fe(a)&&Fe(l))throw new Error(`${t} cannot have both x2 and y2`);if(Fe(a)){if(Pu(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Fe(l)){if(Pu(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(Fe(l)&&!Fe(a))throw new Error(`${t} cannot have xError2 without xError`);if(Fe(c)&&!Fe(u))throw new Error(`${t} cannot have yError2 without yError`);if(Fe(a)&&Fe(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Fe(a)){if(Pu(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Fe(u)){if(Pu(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function CGe(e){return(Fe(e.x)||Fe(e.y))&&!Fe(e.x2)&&!Fe(e.y2)&&!Fe(e.xError)&&!Fe(e.xError2)&&!Fe(e.yError)&&!Fe(e.yError2)}function _Ge(e){return Fe(e.x2)||Fe(e.y2)}function EGe(e){return Fe(e.xError)||Fe(e.xError2)||Fe(e.yError)||Fe(e.yError2)}function Dse(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=Sa(r)?r:{type:r};o&&Z(_oe(t));const{orient:u,inputType:c}=kGe(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=Ase(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=$Ge(l,f,d,h,p,c,t,n),{[g]:x,[g==="x"?"x2":"y2"]:w,[g==="x"?"xError":"yError"]:k,[g==="x"?"xError2":"yError2"]:S,...C}=i,{bins:_,timeUnits:$,aggregate:A,groupby:N,encoding:M}=_se(C,n),R=[...A,...m],P=c!=="raw"?[]:N,D=z4(v,f,M,b);return{transform:[...a.transform??[],..._,...$,...R.length===0?[]:[{aggregate:R,groupby:P}],...y],groupby:P,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:M,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:D}}function $Ge(e,t,n,r,i,o,s,a){let l=[],u=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Z(IHe(h,p,s)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Iv(h)},{fieldPrefix:"upper_",titlePrefix:AU(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:AU(h,p,"-")}],d=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:gp({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:gp({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:gp({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Z(NHe(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:pd(pd(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}function AU(e,t,n){return`${Iv(e)} ${n} ${t}`}const mO="errorband",AGe=["band","borders"],TGe=new L_(mO,Ose);function Ose(e,{config:t}){e={...e,encoding:z_(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=Dse(e,mO,t),u=s,c=pO(u,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?Z(bU("interpolate")):u.tension&&Z(bU("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const Nse={};function yO(e,t,n){const r=new L_(e,t);Nse[e]={normalizer:r,parts:n}}function MGe(){return X(Nse)}yO(QS,Fse,vGe);yO(gO,Rse,wGe);yO(mO,Ose,AGe);const FGe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Ise={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Lse={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},PGe=X(Ise),RGe=X(Lse),DGe={header:1,headerRow:1,headerColumn:1,headerFacet:1},zse=X(DGe),Bse=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],OGe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},NGe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},_s="_vgsid_",IGe={point:{on:"click",fields:[_s],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function vO(e){return e==="legend"||!!(e!=null&&e.legend)}function q5(e){return vO(e)&&se(e)}function bO(e){return!!(e!=null&&e.select)}function jse(e){const t=[];for(const n of e||[]){if(bO(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function LGe(e){return B_(e)||wO(e)||xO(e)}function xO(e){return K(e,"concat")}function B_(e){return K(e,"vconcat")}function wO(e){return K(e,"hconcat")}function Use({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ka(e){return K(e,"step")}function TU(e){return K(e,"view")||K(e,"width")||K(e,"height")}const MU=20,zGe={align:1,bounds:1,center:1,columns:1,spacing:1},BGe=X(zGe);function jGe(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(D_(e)&&!Wv(e.facet)||xO(e))&&(i.columns=s),B_(e)&&(i.columns=1);for(const a of BGe)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=Qe(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function B4(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function j4(e,t){const n=ZS(e,t);return ka(n)?n.step:Vse}function ZS(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return rn(n,{step:e.step})}const Vse=20,UGe={continuousWidth:200,continuousHeight:200,step:Vse},VGe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:UGe,mark:Dqe,arc:{},area:{},bar:Lqe,circle:{},geoshape:{},image:{},line:{},point:{},rect:nO,rule:{color:"black"},square:{},text:{color:"black"},tick:zqe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:gqe,projection:{},legend:OGe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:IGe,style:{},title:{},facet:{spacing:MU},concat:{spacing:MU},normalizedNumberFormat:".0%"},Ua=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],FU={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},PU={blue:Ua[0],orange:Ua[1],red:Ua[2],teal:Ua[3],green:Ua[4],yellow:Ua[5],purple:Ua[6],pink:Ua[7],brown:Ua[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function WGe(e={}){return{signals:[{name:"color",value:se(e)?{...PU,...e}:PU}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function HGe(e){return{signals:[{name:"fontSize",value:se(e)?{...FU,...e}:FU}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function qGe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Wse(e){const t=X(e||{}),n={};for(const r of t){const i=e[r];n[r]=Yv(i)?voe(i):Ri(i)}return n}function GGe(e){const t=X(e),n={};for(const r of t)n[r]=Wse(e[r]);return n}const YGe=[...Joe,...wse,...zse,"background","padding","legend","lineBreak","scale","style","title","view"];function Hse(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=Vg({},Te(VGe),n?qGe(n):{},t?WGe(t):{},r?HGe(r):{},o||{});i&&Wg(s,"selection",i,!0);const a=gi(s,YGe);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Ri(s[l]));for(const l of Joe)s[l]&&(a[l]=Wn(s[l]));for(const l of wse)s[l]&&(a[l]=Wse(s[l]));for(const l of zse)s[l]&&(a[l]=Wn(s[l]));if(s.legend&&(a.legend=Wn(s.legend)),s.scale){const{invalid:l,...u}=s.scale,c=Wn(l,{level:1});a.scale={...Wn(u),...X(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=GGe(s.style)),s.title&&(a.title=Wn(s.title)),s.view&&(a.view=Wn(s.view)),a}const XGe=new Set(["view",...Aqe]),KGe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],QGe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Rqe};function ZGe(e){e=Te(e);for(const t of KGe)delete e[t];if(e.axis)for(const t in e.axis)Yv(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of FGe)delete e.legend[t];if(e.mark){for(const t of wU)delete e.mark[t];e.mark.tooltip&&se(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(jse(e.params)),delete e.params);for(const t of XGe){for(const r of wU)delete e[t][r];const n=QGe[t];if(n)for(const r of n)delete e[t][r];eYe(e,t)}for(const t of MGe())delete e[t];JGe(e);for(const t in e)se(e[t])&&mt(e[t])&&delete e[t];return mt(e)?void 0:e}function JGe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=yoe(e.title);mt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),mt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),mt(r)?delete e.title:e.title=r}function eYe(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};mt(o)||(e.style[n??t]=o),delete e[t]}function j_(e){return K(e,"layer")}function tYe(e){return K(e,"repeat")}function nYe(e){return!G(e.repeat)&&K(e.repeat,"layer")}class SO{map(t,n){return D_(t)?this.mapFacet(t,n):tYe(t)?this.mapRepeat(t,n):wO(t)?this.mapHConcat(t,n):B_(t)?this.mapVConcat(t,n):xO(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(j_(t))return this.mapLayer(t,n);if(jl(t))return this.mapUnit(t,n);throw new Error(z8(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const rYe={zero:1,center:1,normalize:1};function iYe(e){return ce(rYe,e)}const oYe=new Set([Koe,M_,T_,HS,P_,eO,tO,F_,Qoe,J8]),sYe=new Set([M_,T_,Koe]);function gh(e){return J(e)&&kg(e)==="quantitative"&&!e.bin}function RU(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(J(s)&&J(a))if(gh(s)&&gh(a)){if(s.stack)return t;if(a.stack)return i;const l=J(s)&&!!s.aggregate,u=J(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(gh(s))return t;if(gh(a))return i}else{if(gh(s))return o&&n==="vertical"?void 0:t;if(gh(a))return o&&n==="horizontal"?void 0:i}}function aYe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function qse(e,t){var g,m;const n=Sa(e)?e:{type:e},r=n.type;if(!oYe.has(r))return null;const i=RU(t,"x",n)||RU(t,"theta",n);if(!i)return null;const o=t[i],s=J(o)?ie(o,{}):void 0,a=aYe(i),l=[],u=new Set;if(t[a]){const y=t[a],v=J(y)?ie(y,{}):void 0;v&&v!==s&&(l.push(a),u.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=J(f)?ie(f,{}):void 0;d&&d!==s&&(l.push(c),u.add(d));const h=vWe.reduce((y,v)=>{if(v!=="tooltip"&&qf(t,v)){const b=t[v];for(const x of ae(b)){const w=Cs(x);if(w.aggregate)continue;const k=ie(w,{});(!k||!u.has(k))&&y.push({channel:v,fieldDef:w})}}return y},[]);let p;return o.stack!==void 0?wc(o.stack)?p=o.stack?"zero":null:p=o.stack:sYe.has(r)&&(p="zero"),!p||!iYe(p)||Cse(t)&&h.length===0?null:((g=o==null?void 0:o.scale)!=null&&g.type&&((m=o==null?void 0:o.scale)==null?void 0:m.type)!==Hn.LINEAR&&o!=null&&o.stack&&Z(RHe(o.scale.type)),Fe(t[Da(i)])?(o.stack!==void 0&&Z(PHe(i)),null):(J(o)&&o.aggregate&&!MWe.has(o.aggregate)&&Z(DHe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:Dc(r),stackBy:h,offset:p}))}function Gse(e,t,n){const r=Wn(e),i=gt("orient",r,n);if(r.orient=fYe(r.type,t,i),i!==void 0&&i!==r.orient&&Z(mHe(r.orient,i)),r.type==="bar"&&r.orient){const l=gt("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Nqe[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=gt("opacity",r,n),s=gt("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=uYe(r.type,t)),gt("cursor",r,n)===void 0&&(r.cursor=lYe(r,t,n)),r}function lYe(e,t,n){return t.href||e.href||gt("href",e,n)?"pointer":e.cursor}function uYe(e,t){if(Le([P_,J8,eO,tO],e)&&!Cse(t))return .7}function cYe(e,t,{graticule:n}){if(n)return!1;const r=wa("filled",e,t),i=e.type;return rn(r,i!==P_&&i!==F_&&i!==HS)}function fYe(e,t,n){switch(e){case P_:case eO:case tO:case Qoe:case Eqe:case _qe:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case M_:if(J(r)&&(Un(r.bin)||J(i)&&i.aggregate&&!r.aggregate))return"vertical";if(J(i)&&(Un(i.bin)||J(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(J(r)&&r.type===yd&&!kt(r.bin)||GS(r))&&J(i)&&Un(i.bin)?"horizontal":"vertical";if(!s)return(J(i)&&i.type===yd&&!kt(i.bin)||GS(i))&&J(r)&&Un(r.bin)?"vertical":"horizontal"}case HS:if(o&&!(J(r)&&Un(r.bin))&&s&&!(J(i)&&Un(i.bin)))return;case T_:if(s)return J(i)&&Un(i.bin)?"horizontal":"vertical";if(o)return J(r)&&Un(r.bin)?"vertical":"horizontal";if(e===HS){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case F_:case J8:{const a=_U(r),l=_U(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=Kr(r)&&r.type===wg,c=Kr(i)&&i.type===wg;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function dYe(e){const{point:t,line:n,...r}=e;return X(r).length>1?r:r.type}function hYe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:gi(e[t],["point","line"])});return e}function G5(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?se(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?se(t.point)?t.point:{}:void 0}function DU(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class pYe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(jl(t)){const{mark:r,encoding:i}=t,o=Sa(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!G5(o,n[o.type],i);case"area":return!!G5(o,n[o.type],i)||!!DU(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...c}=t,f=z_(u,i),d=Sa(a)?a:{type:a},h=G5(d,i[d.type],f),p=d.type==="area"&&DU(d,i[d.type]),g=[{name:l,...o?{params:o}:{},mark:dYe({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:gi(f,["shape"])}],m=qse(Gse(d,f,i),f);let y=f;if(m){const{fieldChannel:v,offset:b}=m;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=gi(y,["y2","x2"]),p&&g.push({...s?{projection:s}:{},mark:{type:"line",...mg(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...mg(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:g},{...n,config:hYe(i)})}}function gYe(e,t){return t?Wv(e)?Xse(e,t):Yse(e,t):e}function Y5(e,t){return t?Xse(e,t):e}function U4(e,t,n){const r=t[e];if(Qqe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Z(KWe(r.repeat));return}return t}function Yse(e,t){if(e=U4("field",e,t),e!==void 0){if(e===null)return null;if(lO(e)&&yl(e.sort)){const n=U4("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function OU(e,t){if(J(e))return Yse(e,t);{const n=U4("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function NU(e,t){if(Fe(e)){const n=OU(e,t);if(n)return n;if(Hv(e))return{condition:e.condition}}else{if(qv(e)){const n=OU(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function Xse(e,t){const n={};for(const r in e)if(K(e,r)){const i=e[r];if(G(i))n[r]=i.map(o=>NU(o,t)).filter(o=>o);else{const o=NU(i,t);o!==void 0&&(n[r]=o)}}return n}class mYe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(jl(t)){const{encoding:n,mark:r}=t;if(r==="line"||Sa(r)&&r.type==="line")for(const i of gWe){const o=Ud(i),s=n[o];if(n[i]&&(J(s)&&!Un(s.bin)||Na(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return Z(gHe(!!i.x2,!!i.y2)),r({...t,mark:se(o)?{...o,type:"rule"}:"rule"},n)}}class yYe extends SO{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[bGe,SGe,TGe,new pYe,new mYe]}map(t,n){if(jl(t)){const r=qf(t.encoding,gl),i=qf(t.encoding,ml),o=qf(t.encoding,v_);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=Y5(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return nYe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...o,layer:l.map(f=>{const d={...u,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Nt(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!G(r)&&t.columns&&(t=gi(t,["columns"]),Z(gU("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!G(r)&&r.row||[l?l.row:null],f=!G(r)&&r.column||[l?l.column:null],d=G(r)&&r||[l?l.repeat:null];for(const p of d)for(const g of c)for(const m of f){const y={repeat:p,row:g,column:m,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(G(r)?`${Nt(p)}`:(r.row?`row_${Nt(g)}`:"")+(r.column?`column_${Nt(m)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(gi(b,["data"]))}const h=G(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return Wv(r)&&t.columns&&(t=gi(t,["columns"]),Z(gU("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=LU({parentProjection:s,projection:i}),u=IU({parentEncoding:o,encoding:Y5(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:l,projection:u,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),y=Y5(s,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...c?{height:c}:{},...f?{view:f}:{},...u?{projection:u}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&Z(hHe([...r?[gl]:[],...i?[ml]:[]]));const s={},a={};for(const l of[gl,ml]){const u=t[l];if(u){const{align:c,center:f,spacing:d,columns:h,...p}=u;s[l]=p;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:l,columns:u,...c}=o;return{facetMapping:gYe(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,l={...i,parentEncoding:IU({parentEncoding:n,encoding:o,layer:!0}),parentProjection:LU({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function IU({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...X(e),...X(t)]);for(const o of i){const s=t[o],a=e[o];if(Fe(s)){const l={...a,...s};r[o]=l}else qv(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||ks(a)||me(a)||Fe(a)||G(a))&&(r[o]=a)}}else r=t;return!r||mt(r)?void 0:r}function LU(e){const{parentProjection:t,projection:n}=e;return t&&n&&Z(nHe({parentProjection:t,projection:n})),n??t}function kO(e){return K(e,"filter")}function vYe(e){return K(e,"stop")}function Kse(e){return K(e,"lookup")}function bYe(e){return K(e,"data")}function xYe(e){return K(e,"param")}function wYe(e){return K(e,"pivot")}function SYe(e){return K(e,"density")}function kYe(e){return K(e,"quantile")}function CYe(e){return K(e,"regression")}function _Ye(e){return K(e,"loess")}function EYe(e){return K(e,"sample")}function $Ye(e){return K(e,"window")}function AYe(e){return K(e,"joinaggregate")}function TYe(e){return K(e,"flatten")}function MYe(e){return K(e,"calculate")}function Qse(e){return K(e,"bin")}function FYe(e){return K(e,"impute")}function PYe(e){return K(e,"timeUnit")}function RYe(e){return K(e,"aggregate")}function DYe(e){return K(e,"stack")}function OYe(e){return K(e,"fold")}function NYe(e){return K(e,"extent")&&!K(e,"density")&&!K(e,"regression")}function IYe(e){return e.map(t=>kO(t)?{filter:hp(t.filter,lqe)}:t)}class LYe extends SO{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=zU(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=zU(t,n),t.encoding){const r={};for(const[i,o]of cc(t.encoding))r[i]=Zse(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:cc(r).map(([o,s])=>{const{init:a,bind:l,empty:u,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=u!=="none";for(const f of Zn(n.selectionPredicates[o]??{}))f.empty=u!=="none";return{name:o,value:a,select:c,bind:l}})}:t}}function zU(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(kO(o))return{filter:V4(o,t)};if(Qse(o)&&Vd(o.bin))return{...o,bin:Jse(o.bin)};if(Kse(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function Zse(e,t){var r,i;const n=Te(e);if(J(n)&&Vd(n.bin)&&(n.bin=Jse(n.bin)),Gd(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(Hv(n))if(G(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...u}=o;return a?o:{...u,test:V4(o,t)}});else{const{selection:o,param:s,test:a,...l}=Zse(n.condition,t);n.condition=s?n.condition:{...l,test:V4(n.condition,t)}}return n}function Jse(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function V4(e,t){const n=r=>hp(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):hp(e.test||e.filter,r=>r.selection?n(r.selection):r)}class W4 extends SO{map(t,n){const r=n.selections??[];if(t.params&&!jl(t)){const i=[];for(const o of t.params)bO(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(le(a)&&(a===t.name||i.includes(a))||G(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=W4.prototype[e];W4.prototype[e]=function(n,r){return t.call(this,n,zYe(n,r))}}function zYe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function eae(e,t){t===void 0&&(t=Hse(e.config));const n=VYe(e,t),{width:r,height:i}=e,o=WYe(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const BYe=new yYe,jYe=new LYe,UYe=new W4;function VYe(e,t={}){const n={config:t};return UYe.map(BYe.map(jYe.map(e,n),n),n)}function BU(e){return le(e)?{type:e}:e??{}}function WYe(e,t,n){let{width:r,height:i}=t;const o=jl(e)||j_(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(Z(fU("width")),r=void 0),i=="container"&&(Z(fU("height")),i=void 0));const a={type:"pad",...s,...n?BU(n.autosize):{},...BU(e.autosize)};if(a.type==="fit"&&!o&&(Z(zWe),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Z(dU("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Z(dU("height")),!Li(a,{type:"pad"}))return a}function HYe(e){return["fit","fit-x","fit-y"].includes(e)}function qYe(e){return e?`fit-${k_(e)}`:"fit"}const GYe=["background","padding"];function jU(e,t){const n={};for(const r of GYe)e&&e[r]!==void 0&&(n[r]=Ri(e[r]));return t&&(n.params=e.params),n}class Ul{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Ul(Te(this.explicit),Te(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return rn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of X(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ws(e){return{explicit:!0,value:e}}function Ai(e){return{explicit:!1,value:e}}function tae(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:U_(t,n,r,i)}}function U_(e,t,n,r){return e.explicit&&t.explicit&&Z(_He(n,r,e.value,t.value)),e}function hc(e,t,n,r,i=U_){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Li(e.value,t.value)?e:i(e,t,n,r)}class YYe extends Ul{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Eg(e){return K(e,"url")}function E1(e){return K(e,"values")}function nae(e){return K(e,"name")&&!Eg(e)&&!E1(e)&&!Yu(e)}function Yu(e){return e&&(rae(e)||iae(e)||CO(e))}function rae(e){return K(e,"sequence")}function iae(e){return K(e,"sphere")}function CO(e){return K(e,"graticule")}var Qt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Qt||(Qt={}));function oae({invalid:e,isPath:t}){switch(ese(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function XYe(e){const{marks:t,scales:n}=oae(e);return t===n?Qt.Main:n==="include-invalid-values"?Qt.PreFilterInvalid:Qt.PostFilterInvalid}function sae(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Oo(i.field),i}function xd(e,t=!0,n=Cr){if(G(e)){const r=e.map(i=>xd(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Hd(e))return n(t?md(e):KHe(e));return t?n(yt(e)):e}function KYe(e,t){for(const n of Zn(e.component.selection??{})){const r=n.name;let i=`${r}${pc}, ${n.resolve==="global"?"true":`{unit: ${Gf(e)}}`}`;for(const o of q_)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+EXe,on:[{events:{signal:n.name+pc},update:`modify(${te(n.name+wd)}, ${i})`}]})}return _O(t)}function QYe(e,t){if(e.component.selection&&X(e.component.selection).length){const n=te(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:$c("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return _O(t)}function ZYe(e,t){let n=!1;for(const r of Zn(e.component.selection??{})){const i=r.name,o=te(i+wd);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Cae}(${o}, ${te(a)}${l}`})}n=!0;for(const a of q_)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),_O(t)}function JYe(e,t){const n=[...t],r=Gf(e,{escape:!1});for(const i of Zn(e.component.selection??{})){const o={name:i.name+wd};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:_s}}]),i.init){const a=i.project.items.map(sae);o.values=i.project.hasSelectionId?i.init.map(l=>({unit:r,[_s]:xd(l,!1)[0]})):i.init.map(l=>({unit:r,fields:a,values:xd(l,!1)}))}n.filter(a=>a.name===i.name+wd).length||n.push(o)}return n}function aae(e,t){for(const n of Zn(e.component.selection??{}))for(const r of q_)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function eXe(e,t){for(const n of e.children)Bt(n)&&(t=aae(n,t));return t}function tXe(e,t,n,r){const i=Tae(e,t.param,t);return{signal:Ss(n.get("type"))&&G(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function _O(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class pt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Z(JWe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class mi extends pt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${toe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function X5(e){return e.as!==void 0}function UU(e){return`${e}_end`}class ga extends pt{clone(){return new ga(null,Te(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:l}=o;if(l){let u;if(qd(l)){if(Bt(n)){const{mark:c,markDef:f,config:d}=n,h=dc({fieldDef:o,markDef:f,config:d});(_1(c)||h)&&(u={timeUnit:On(l),field:a})}}else u={as:ie(o,{forAs:!0}),field:a,timeUnit:l};if(Bt(n)){const{mark:c,markDef:f,config:d}=n,h=dc({fieldDef:o,markDef:f,config:d});_1(c)&&on(s)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Be(u)]=u)}return i},{});return mt(r)?null:new ga(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=On(r),s={...i,timeUnit:o};return new ga(t,{[Be(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of cc(this.timeUnits)){const o=X5(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Zn(this.timeUnits).map(t=>X5(t)?t.as:UU(t.field)))}dependentFields(){return new Set(Zn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Be(this.timeUnits)}`}assemble(){const t=[];for(const n of Zn(this.timeUnits)){const{rectBandPosition:r}=n,i=On(n.timeUnit);if(X5(n)){const{field:o,as:s}=n,{unit:a,utc:l,...u}=i,c=[s,`${s}_end`];t.push({field:Oo(o),type:"timeunit",...a?{units:$_(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...VU(c,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=lae({timeUnit:i,field:s}),l=UU(s);t.push({type:"formula",expr:a,as:l}),t.push(...VU([s,l],r,i))}}return t}}const V_="offsetted_rect_start",W_="offsetted_rect_end";function lae({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=Noe(r),{part:s,step:a}=Boe(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', datum['${t}'], ${n?-a:a})`}function VU([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:WU([lae({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${V_}`},{type:"formula",expr:WU([i,o],n+.5),as:`${e}_${W_}`}]}return[]}function WU([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Xv="_tuple_fields";class nXe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const rXe={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new nXe),o={},s={},a=new Set,l=(p,g)=>{const m=g==="visual"?p.channel:p.field;let y=Nt(`${r}_${m}`);for(let v=1;a.has(y);v++)y=Nt(`${r}_${m}_${v}`);return a.add(y),{[g]:y}},u=t.type,c=e.config.selection[u],f=n.value!==void 0?ae(n.value):null;let{fields:d,encodings:h}=se(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(se(p))for(const g of X(p))pWe(g)?(h||(h=[])).push(g):u==="interval"?(Z(XWe),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){Z(BWe(p,g.aggregate));continue}else if(!m){Z(pU(p));continue}if(g.timeUnit&&!qd(g.timeUnit)){m=e.vgField(p);const y={timeUnit:g.timeUnit,as:m,field:g.field};s[Be(y)]=y}if(!o[m]){const y=u==="interval"&&Oa(p)&&Ss(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:p,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(o[m]=v),i.hasField[m]=o[m],i.hasSelectionId=i.hasSelectionId||m===_s,aoe(p)?(v.geoChannel=p,v.channel=soe(p),i.hasChannel[v.channel]=o[m]):i.hasChannel[p]=o[m]}}else Z(pU(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===_s}f&&(t.init=f.map(p=>i.items.map(g=>se(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),mt(s)||(i.timeUnit=new ga(null,s))},signals:(e,t,n)=>{const r=t.name+Xv;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(sae)})}},vl={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Oa(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&Z(WWe),!o||!Ss(s)){Z(VWe);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||HU(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(Cae))i.update=`{${r.map(s=>`${te(Oo(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${te(Oo(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!HU(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function H4(e,t){return`domain(${te(e.scaleName(t))})`}function HU(e){return e.parent&&fm(e.parent)&&!e.parent.parent}const mp="_brush",uae="_scale_trigger",Km="geo_interval_init_tick",cae="_init",iXe="_center",oXe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...se(n.select)?n.select:{}};i.fields=[_s],i.encodings||(i.encodings=n.value?X(n.value):[Ps,Fs]),n.select={type:"interval",...i}}if(t.translate&&!vl.defined(t)){const i=`!event.item || event.item.mark.name !== ${te(t.name+mp)}`;for(const o of t.events){if(!o.between){Z(`${o} is not an ordered event stream for interval selections.`);continue}const s=ae((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+pc,o=Zn(t.project.hasChannel).filter(a=>a.channel===It||a.channel===zn),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(sXe(e,t,l,s&&s[l.index])),[])),e.hasProjection){const a=te(e.projectionName()),l=e.projectionName()+iXe,{x:u,y:c}=t.project.hasChannel,f=u&&u.signals.visual,d=c&&c.signals.visual,h=u?s&&s[u.index]:`${l}[0]`,p=c?s&&s[c.index]:`${l}[1]`,g=w=>e.getSizeSignalRef(w).signal,m=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;s&&(n.unshift({name:r+cae,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(k=>k.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${m}, {markname: ${te(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Gf(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,x=o.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...s?[{signal:Km}]:[]],update:b}]})}else{if(!vl.defined(t)){const u=r+uae,c=o.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=te(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=Ss(m)?"+":"";return`(!isArray(${h}) || (${y}invert(${g}, ${p})[0] === ${y}${h}[0] && ${y}invert(${g}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${Gf(e)}, fields: ${r+Xv}, values`;return n.concat({name:i,...s?{init:`{${l}: ${xd(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Bt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Km).length||n.unshift({name:Km,value:null,on:[{events:"timer{1}",update:`${Km} === null ? {} : ${Km}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${te(t.name+wd)})`;if(vl.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of X(u))u[m]=[{test:`${l}.length && ${l}[0].unit === ${Gf(e)}`,...u[m]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=X(h).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],m),{}),g=d??(t.translate?"move":null);return[{name:`${r+mp}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:u}},...n,{name:r+mp,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function sXe(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=te(i?e.scaleName(o):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(o===It?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,h=vl.defined(t),p=e.getScaleComponent(o),g=p?p.get("type"):void 0,m=r?{init:xd(r,!0,l)}:{value:[]};return f.push({events:{signal:t.name+uae},update:Ss(g)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...m,on:f},{name:d,...r?{init:xd(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===It?0:1,h=t.name+cae,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...p,on:f}]}}const aXe={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+Xv,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=Zn(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+mp):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Gf(e)}, `;if(t.project.hasSelectionId)u+=`${_s}: ${s}[${te(_s)}]`;else{const f=o.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${s}[${te(e.vgField(d.channel,{}))}], ${s}[${te(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${s}[${te(d.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+pc,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function am({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=Hv(t)&&t.condition;let s=[];o&&(s=ae(o).map(u=>{const c=i(u);if(Kqe(u)){const{param:f,empty:d}=u;return{test:Aae(e,{param:f,empty:d}),...c}}else return{test:tk(e,u.test),...c}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function EO(e,t="text"){const n=e.encoding[t];return am({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>H_(r,e.config),invalidValueRef:void 0})}function H_(e,t,n="datum"){if(e){if(ks(e))return At(e.value);if(Fe(e)){const{format:r,formatType:i}=XS(e);return sO({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function fae(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(G(s))return{tooltip:qU({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return am({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const c=H_(u,i,a);if(c)return c;if(u===null)return;let f=gt("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),le(f))return{value:f};if(se(f))return me(f)?f:f.content==="encoding"?qU(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function dae(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(c,f){const d=Ud(f),h=Kr(c)?c:{...c,type:e[d].type},p=h.title||cO(h,i),g=ae(p).join(", ").replaceAll(/"/g,'\\"');let m;if(on(f)){const y=f==="x"?"x2":"y2",v=Cs(e[y]);if(Un(h.bin)&&v){const b=ie(h,{expr:s}),x=ie(v,{expr:s}),{format:w,formatType:k}=XS(h);m=Vv(b,x,w,k,i),o.add(y)}}if((on(f)||f===Lo||f===Ms)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=XS(h);m=sO({fieldOrDatumDef:h,format:y,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}m??(m=H_(h,i,s).signal),a.push({channel:f,key:g,value:m})}dO(e,(c,f)=>{J(c)?l(c,f):O_(c)&&l(c.condition,f)});const u={};for(const{channel:c,key:f,value:d}of a)!o.has(c)&&!u[f]&&(u[f]=d);return u}function qU(e,t,n,{reactiveGeom:r}={}){const i=dae(e,t,n,{reactiveGeom:r}),o=cc(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function lXe(e){const{markDef:t,config:n}=e,r=gt("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...uXe(e),...cXe(e)}}function uXe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=gt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:ce(NWe,t)?{}:{ariaRoleDescription:{value:t}}}function cXe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return am({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>H_(l,e.config),invalidValueRef:void 0});const s=gt("description",n,r);if(s!=null)return{description:At(s)};if(r.aria===!1)return{};const a=dae(t,i,r);if(!mt(a))return{description:{signal:cc(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Gn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=gt(e,r,o,{vgChannel:s,ignoreVgConfig:!Hv(u)})),l!==void 0&&(a=At(l)));const c={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=nse({...c,scaleChannel:e,channelDef:u});return am({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:f,mainRefFn:h=>oO({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function hae(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??gt("filled",n,i),a=Le(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=gt(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,u=gt(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...l?{fill:At(l)}:{},...u?{stroke:At(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&Z($oe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Gn("color",e,{vgChannel:c,defaultValue:s?l:u}),...Gn("fill",e,{defaultValue:r.fill?l:void 0}),...Gn("stroke",e,{defaultValue:r.stroke?u:void 0})}}function fXe(e){const{encoding:t,mark:n}=e,r=t.order;return!Dc(n)&&ks(r)?am({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>At(i.value),invalidValueRef:void 0}):{}}function $g({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:oO({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:At(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Vr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[Da(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=$g({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),p=$O({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!l&&on(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:dXe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function dXe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Fe(n)&&i&&t===i.fieldChannel){if(J(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return qS({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Hf(n,r,{suffix:"end"},{offset:o})}return iO(e)}function $O({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=Ud(n),l=fc(n),u=gt(n,o,s,{vgChannel:l});if(u!==void 0)return wy(n,u);switch(t){case"zeroOrMin":return GU({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return GU({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[Ci(n)],mult:.5}}}}function GU({mainChannel:e,config:t,...n}){const r=tse(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const hXe={left:"x",center:"xc",right:"x2"},pXe={top:"y",middle:"yc",bottom:"y2"};function pae(e,t,n,r="middle"){if(e==="radius"||e==="theta")return fc(e);const i=e==="x"?"align":"baseline",o=gt(i,t,n);let s;return me(o)?(Z(pHe(i)),s=void 0):s=o,e==="x"?hXe[s||(r==="top"?"left":"center")]:pXe[s||r]}function JS(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?gae(e,t,{defaultPos:n,defaultPos2:r}):Vr(e,t,{defaultPos:n})}function gae(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=Da(e),a=Ci(e),l=gXe(t,r,s),u=l[a]?pae(e,i,o):fc(e);return{...Vr(e,t,{defaultPos:n,vgChannel:u}),...l}}function gXe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=Ud(n),u=Ci(n),c=fc(n),f=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in o?$g({channel:n,markDef:o,encoding:r,model:e}):$g({channel:l,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=Ci(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const g=mXe({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:mx(n,o)||mx(n,{[n]:D4(n,o,a.style),[u]:D4(u,o,a.style)})||mx(n,a[i])||mx(n,a.mark)||{[c]:$O({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function mXe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Fe(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Hf(t,o,{suffix:"start"},{offset:l}):iO({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function mx(e,t){const n=Ci(e),r=fc(e);if(t[r]!==void 0)return{[r]:wy(e,t[r])};if(t[e]!==void 0)return{[r]:wy(e,t[e])};if(t[n]){const i=t[n];if(vd(i))Z(lHe(n));else return{[n]:wy(e,i)}}}function Ml(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=Da(t),a=Ci(t),l=r[t],u=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??gt("size",i,n,{vgChannel:a}),p=foe(t),g=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return J(l)&&(kt(l.bin)||Un(l.bin)||l.timeUnit&&!u)&&!(h&&!vd(h))&&!r[p]&&!Nn(f)?bXe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Fe(l)&&Nn(f)||g)&&!u?vXe(l,t,e):gae(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function yXe(e,t,n,r,i,o,s){if(vd(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=wa("minBandSize",{type:s},r);return{signal:c?`max(${cs(c)}, ${u})`:u}}else i.band!==1&&(Z(vHe(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(me(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(Wd(l)&&Qe(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=rn(l,s==="tick"?f:s==="bar"?u:c);if(me(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Qe(d))return{signal:`${1-d} * ${e}`}}return{value:j4(r.view,e)-2}}function vXe(e,t,n){var _,$;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=Ci(t),f=Da(t),d=foe(t),h=n.scaleName(d),p=n.getScaleComponent(R8(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(i.size||r.size)&&(g?m=Gn("size",n,{vgChannel:c,defaultRef:At(r.size)}):Z(SHe(r.type)));const y=!!m,v=use({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(_=u||p)==null?void 0:_.get("type"),useVlSizeChannel:g});m=m||{[c]:yXe(c,h||l,p||u,o,v,!!e,r.type)};const b=(($=u||p)==null?void 0:$.get("type"))==="band"&&vd(v)&&!y?"top":"middle",x=pae(t,r,o,b),w=x==="xc"||x==="yc",{offset:k,offsetType:S}=$g({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),C=iO({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:k,defaultRef:$O({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:w?S==="encoding"?0:.5:me(v)?{signal:`(1-${v})/2`}:vd(v)?(1-v.band)/2:0});if(c)return{[x]:C,...m};{const A=fc(f),N=m[c],M=k?{...N,offset:k}:N;return{[x]:C,[A]:G(C)?[C[0],{...C[1],offset:M}]:{...C,offset:M}}}}function YU(e,t,n,r,i,o,s){if(ooe(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(me(n)||me(i)||me(r)||o){const u=cs(n),c=cs(i),f=cs(r),d=cs(o),p=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${l})`:l,g=f?`${f} + `:"",m=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:g+m+y}}else return i=i||0,r+(n?-i-l:+i+l)}function bXe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var $;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),f=use({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),d=($=r.component.axes[n])==null?void 0:$[0],h=(d==null?void 0:d.get("translate"))??.5,p=on(n)?gt("binSpacing",o,i)??0:0,g=Da(n),m=fc(n),y=fc(g),v=wa("minBandSize",o,i),{offset:b}=$g({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:x}=$g({channel:g,markDef:o,encoding:s,model:r,bandPosition:0}),w=Wqe({fieldDef:e,scaleName:l}),k=YU(n,p,c,h,b,v,w),S=YU(g,p,c,h,x??b,v,w),C=me(f)?{signal:`(1-${f.signal})/2`}:vd(f)?(1-f.band)/2:.5,_=dc({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(kt(e.bin)||e.timeUnit){const A=e.timeUnit&&_!==.5;return{[y]:XU({fieldDef:e,scaleName:l,bandPosition:C,offset:S,useRectOffsetField:A}),[m]:XU({fieldDef:e,scaleName:l,bandPosition:me(C)?{signal:`1-${C.signal}`}:1-C,offset:k,useRectOffsetField:A})}}else if(Un(e.bin)){const A=Hf(e,l,{},{offset:S});if(J(t))return{[y]:A,[m]:Hf(t,l,{},{offset:k})};if(Vd(e.bin)&&e.bin.step)return{[y]:A,[m]:{signal:`scale("${l}", ${ie(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}Z(Moe(g))}function XU({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return qS({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:V_,endSuffix:W_}:{}})}const xXe=new Set(["aria","width","height"]);function zo(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?hae(e):{};return{...wXe(e.markDef,t),...KU("fill",n),...KU("stroke",r),...Gn("opacity",e),...Gn("fillOpacity",e),...Gn("strokeOpacity",e),...Gn("strokeWidth",e),...Gn("strokeDash",e),...fXe(e),...fae(e),...EO(e,"href"),...lXe(e)}}function KU(e,t){return t?{[e]:t}:{}}function wXe(e,t){return OWe.reduce((n,r)=>(!xXe.has(r)&&K(e,r)&&t[r]!=="ignore"&&(n[r]=At(e[r])),n),{})}function AO(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var u;let s;if(!Oa(o)||!(s=e.getScaleType(o)))return;const a=C_(i.aggregate),l=rO({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(jqe(l)){const c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(o=>A_(o,!0)).join(" && ")}}}function QU(e,t){if(t!==void 0)return{[e]:At(t)}}const K5="voronoi",mae={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(K5)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Dc(o))return Z(jWe(o)),n;const s={name:e.getName(K5),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...fae(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const f=u.name??"";f===e.component.mark[0].name?a=c:f.includes(K5)&&(l=!0)}),l||n.splice(a+1,0,s),n}},yae={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!vO(e.bind),parse:(e,t,n)=>_ae(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=mae.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=Nt(`${r}_${l.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...s?{init:xd(s[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${te(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+pc),s=r+Xv,a=i.items.map(u=>Nt(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},ek="_toggle",vae={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+ek,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+pc,r=t.name+ek;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Gf(e)}}, `)+`${r} ? ${n} : null`}},SXe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=le(t.clear)?$c(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(yae.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===Nt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+pc);r(i,"null"),vae.defined(t)&&(i=n.findIndex(o=>o.name===t.name+ek),r(i,"false"))}return n}},bae={defined:e=>{const t=e.resolve==="global"&&e.bind&&vO(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==_s;return t&&!n&&Z(HWe),t&&n},parse:(e,t,n)=>{const r=Te(n);if(r.select=le(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},_ae(t,r),se(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ae(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=q5(t.bind)?t.bind.legend:"click",o=le(i)?$c(i,"view"):ae(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=q5(t.bind)&&t.bind.legend,o=s=>a=>{const l=Te(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${Nt(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+pc),s=r+Xv,a=i.items.filter(d=>d.hasLegend).map(d=>Nt(`${r}_${Nt(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(d=>d.name===r+ek),f=q5(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function kXe(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of Zn(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&bae.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const xae="_translate_anchor",wae="_translate_delta",CXe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=vl.defined(t),o=r+xae,{x:s,y:a}=t.project.hasChannel;let l=$c(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+mp,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?H4(e,It):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?H4(e,zn):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+wae,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&ZU(e,t,s,"width",n),a!==void 0&&ZU(e,t,a,"height",n),n}};function ZU(e,t,n,r,i){const o=t.name,s=o+xae,a=o+wae,l=n.channel,u=vl.defined(t),c=i.find(w=>w.name===n.signals[u?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d&&d.get("type"),p=d&&d.get("reverse"),g=u?l===It?p?"":"-":p?"-":"":"",m=`${s}.extent_${l}`,y=`${g}${a}.${l} / ${u?`${f}`:`span(${m})`}`,v=!u||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",x=`${v}(${m}, ${y}${b})`;c.on.push({events:{signal:a},update:u?x:`clampRange(${x}, 0, ${f})`})}const Sae="_zoom_anchor",kae="_zoom_delta",_Xe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=vl.defined(t),o=r+kae,{x:s,y:a}=t.project.hasChannel,l=te(e.scaleName(It)),u=te(e.scaleName(zn));let c=$c(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+mp,f))),n.push({name:r+Sae,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&JU(e,t,s,"width",n),a!==void 0&&JU(e,t,a,"height",n),n}};function JU(e,t,n,r,i){const o=t.name,s=n.channel,a=vl.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),d=a?H4(e,s):l.name,h=o+kae,p=`${o}${Sae}.${s}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${g}(${d}, ${p}, ${h}${m})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const wd="_store",pc="_tuple",EXe="_modify",Cae="vlSelectionResolve",q_=[aXe,oXe,rXe,vae,yae,vl,bae,SXe,CXe,_Xe,mae];function $Xe(e){let t=e.parent;for(;t&&!Hi(t);)t=t.parent;return t}function Gf(e,{escape:t}={escape:!0}){let n=t?te(e.name):e.name;const r=$Xe(e);if(r){const{facet:i}=r;for(const o of Co)i[o]&&(n+=` + '__facet_${o}_' + (facet[${te(r.vgField(o))}])`)}return n}function TO(e){return Zn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function _ae(e,t){(le(t.select)||!t.select.on)&&delete e.events,(le(t.select)||!t.select.clear)&&delete e.clear,(le(t.select)||!t.select.toggle)&&delete e.toggle}function q4(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...q4(e.object)),t.push(...q4(e.property))),t)}function Eae(e){return e.object.type==="MemberExpression"?Eae(e.object):e.object.name==="datum"}function $ae(e){const t=XD(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Eae(r)&&n.add(q4(r).slice(1).join("."))}),n}class lm extends pt{clone(){return new lm(null,this.model,Te(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=tk(this.model,this.filter,this),this._dependentFields=$ae(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function AXe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const o=Nt(i.name),s=i.select,a=le(s)?s:s.type,l=se(s)?Te(s):{type:a},u=r[a];for(const d in u)d==="fields"||d==="encodings"||(d==="mark"&&(l.mark={...u.mark,...l.mark}),(l[d]===void 0||l[d]===!0)&&(l[d]=Te(u[d]??l[d])));const c=n[o]={...l,name:o,type:a,init:i.value,bind:i.bind,events:le(l.on)?$c(l.on,"scope"):ae(Te(l.on))},f=Te(i);for(const d of q_)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function Aae(e,t,n,r="datum"){const i=le(t)?t:t.param,o=Nt(i),s=te(o+wd);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${te(a.resolve)})`,c=`${l}${s}, ${r}${u}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function Tae(e,t,n){const r=Nt(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&Z(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${te(o)}.`);else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,Z((a.length?"Multiple ":"No ")+`matching ${te(i)} encoding found for selection ${te(n.param)}. Using "field": ${te(o)}.`)):o=a[0].field}return`${s.name}[${te(Oo(o))}]`}function TXe(e,t){for(const[n,r]of cc(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new mi(new lm(t,e,{param:n}),i,Qt.Lookup,e.component.data.outputNodeRefCounts)}}function tk(e,t,n){return xy(t,r=>le(r)?r:oqe(r)?Aae(e,r,n):Uoe(r))}function MXe(e,t){if(e)return G(e)&&!au(e)?e.map(n=>cO(n,t)).join(", "):e}function Q5(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function I0(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const p=h,g=cGe[p],m=c[p];if(g&&g!==t&&g!=="both")delete c[p];else if(Yv(m)){const{condition:y,...v}=m,b=ae(y),x=EU[p];if(x){const{vgProp:w,part:k}=x,S=[...b.map(C=>{const{test:_,...$}=C;return{test:tk(null,_),...$}}),v];Q5(c,k,w,S),delete c[p]}else if(x===null){const w={signal:b.map(k=>{const{test:S,...C}=k;return`${tk(null,S)} ? ${cU(C)} : `}).join("")+cU(v)};c[p]=w}}else if(me(m)){const y=EU[p];if(y){const{vgProp:v,part:b}=y;Q5(c,b,v,m),delete c[p]}}Le(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},mt(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:rn(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&me(c.encode.labels.update.text)&&(p=pd(a,"datum.label",c.encode.labels.update.text.signal)),Q5(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of bse)e.hasAxisPart(p)||delete c.encode[p];mt(c.encode)&&delete c.encode}const h=MXe(l,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:rn(u,0)}}}}function Mae(e){const{axes:t}=e.component,n=[];for(const r of Bl)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function FXe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>I0(i,"grid",t)),...r.map(i=>I0(i,"grid",t)),...n.map(i=>I0(i,"main",t)),...r.map(i=>I0(i,"main",t))].filter(i=>i)}function eV(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...X(s),...X(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${o}" ? ${cs(s[c])} : ${cs(a[c])}`};return u}return t[i]})])}function PXe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:qoe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=me(n)?"axisOrient":`axis${Iv(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:eV(a,r,e,n),vgAxisConfig:eV(l,r,e,n),axisConfigStyle:RXe([...l,...a],r)}}function RXe(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=ae(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function G4(e,t,n,r={}){var o;const i=xoe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const tV={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??DXe(n,e),gridScale:({model:e,channel:t})=>OXe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Pae(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Fae(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??IXe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??LXe(t.type,n,J(t)&&!!t.timeUnit,J(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??BXe({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:jXe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=Rae(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return Soe(i?[CU(i)]:[],J(s)?[CU(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>UXe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??VXe(n,t)};function DXe(e,t){return!Nn(e)&&J(t)&&!kt(t==null?void 0:t.bin)&&!Un(t==null?void 0:t.bin)}function OXe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function NXe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return me(o)?o:C1(o);{const{configValue:s}=G4("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?C1(s):n===It&&Le([Z8,Q8],e.type)&&!(J(e)&&e.timeUnit)?270:void 0}}function Y4(e){return`(((${e.signal} % 360) + 360) % 360)`}function Fae(e,t,n,r){if(e!==void 0)if(n==="x"){if(me(e)){const i=Y4(e),o=me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(me(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(me(e)){const i=Y4(e),o=me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(me(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Pae(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(me(e)){const s=Y4(e),a=me(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(me(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function IXe(e,t){if(t==="x"&&Le(["quantitative","temporal"],e))return!0}function LXe(e,t,n,r){if(n&&!se(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function zXe(e){return e==="x"?"bottom":"left"}function BXe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Nn(t)&&t!=="log"){if(J(e)){if(kt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Le(["month","hours","day","quarter"],(i=On(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function jXe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(J(t)){const{timeUnit:n}=t;if(n){const r=zoe(n);if(r)return{signal:r}}}}function Rae(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return koe(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function UXe(e,t){const n=e.values;if(G(n))return vse(t,n);if(me(n))return n}function VXe(e,t){return e==="rect"&&YS(t)?1:0}class Ag extends pt{clone(){return new Ag(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=$ae(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Gd(r)&&lse(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,l=a.map((u,c)=>`${Uoe({field:o,timeUnit:s,equal:u})} ? ${c} : `).join("")+a.length;t=new Ag(t,{calculate:l,as:Tg(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Be(this.transform)}`}}function Tg(e,t,n){return ie(e,{prefix:t,suffix:"sort_index",...n})}function G_(e,t){return Le(["top","bottom"],t)?"column":Le(["left","right"],t)||e==="row"?"row":"column"}function Mg(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return rn((t||{})[e],i[e],n.header[e])}function Y_(e,t,n,r){const i={};for(const o of e){const s=Mg(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const MO=["row","column"],FO=["header","footer"];function WXe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=Y_(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=G_(t,a),u=C1(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Oae(u,l),...Dae(l,u,o),...Nae(r,i,t,PGe,Ise)}}}function Dae(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Pae(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Oae(e,t){const n=Fae(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function HXe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of FO)if(n[i])for(const o of n[i]){const s=GXe(e,t,i,n,o);s!=null&&r.push(s)}return r}function qXe(e,t){const{sort:n}=e;return yl(n)?{field:ie(n,{expr:"datum"}),order:n.order??"ascending"}:G(n)?{field:Tg(e,t,{expr:"datum"}),order:"ascending"}:{field:ie(e,{expr:"datum"}),order:n??"ascending"}}function X4(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=Y_(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=sO({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=G_(t,a);return{text:{signal:l?pd(pd(l,"datum.label",u),"datum.value",ie(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Oae(o,c),...Dae(c,o,s),...Nae(n,e,t,RGe,Lse)}}function GXe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=Y_(["labelOrient"],s.header,a,t);(t==="row"&&!Le(["top","bottom"],f)||t==="column"&&!Le(["left","right"],f))&&(o=X4(s,t,a))}const l=Hi(e)&&!Wv(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:qXe(s,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const YXe={column:{start:0,end:1},row:{start:1,end:0}};function XXe(e,t){return YXe[t][e]}function KXe(e,t){const n={};for(const r of Co){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=Y_(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=G_(r,s),l=XXe(o,a);l!==void 0&&(n[a]=l)}}return mt(n)?void 0:n}function Nae(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=Mg(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function PO(e){return[...yx(e,"width"),...yx(e,"height"),...yx(e,"childWidth"),...yx(e,"childHeight")]}function yx(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(Nn(s)&&Wd(a)){const l=e.scaleName(n);return Hi(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[nV(l,a)]:[nV(l,a),{name:i,update:Iae(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=B4(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function nV(e,t){const n=`${e}_step`;return me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Iae(e,t,n){const r=t.get("type"),i=t.get("padding"),o=rn(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${cs(s)}, ${cs(o)}) * ${e}_step`}function Lae(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function zae(e,t){return X(e).reduce((n,r)=>({...n,...am({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>At(i.value),invalidValueRef:void 0})}),{})}function Bae(e,t){if(Hi(t))return e==="theta"?"independent":"shared";if(fm(t))return"shared";if(zO(t))return on(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function RO(e,t){const n=e.scale[t],r=on(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Z($He(t)),"independent"):e[r][t]||"shared"}const QXe={...NGe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},jae=X(QXe);class ZXe extends Ul{}const rV={symbols:JXe,gradient:eKe,labels:tKe,entries:nKe};function JXe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:u}=n,c=s.filled&&u!=="trail";let f={...LWe({},n,Fqe),...hae(n,{filled:c})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=d===void 0?Uae(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Si)delete f.fill;else if(K(f.fill,"field"))h?delete f.fill:(f.fill=At(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=At(g??1));else if(G(f.fill)){const m=K4(a.fill??a.color)??s.fill??(c&&s.color);m&&(f.fill=At(m))}}if(f.stroke){if(r==="stroke"||!c&&r===Si)delete f.stroke;else if(K(f.stroke,"field")||p)delete f.stroke;else if(G(f.stroke)){const m=rn(K4(a.stroke||a.color),s.stroke,c?s.color:void 0);m&&(f.stroke={value:m})}}if(r!==zl){const m=J(t)&&Wae(n,i,t);m?f.opacity=[{test:m,...At(g??1)},At(l.legend.unselectedOpacity)]:g&&(f.opacity=At(g))}return f={...f,...e},mt(f)?void 0:f}function eKe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Uae(s.opacity)||o.opacity:void 0;return u&&(a.opacity=At(u)),a={...a,...e},mt(a)?void 0:a}function tKe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=J(t)?Wae(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let f;bd(c)?f=fs({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):u===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=fs({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&J(t)&&t.timeUnit===void 0&&(f=fs({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...l?{opacity:l}:{},...f?{text:f}:{},...e};return mt(d)?void 0:d}function nKe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function Uae(e){return Vae(e,(t,n)=>Math.max(t,n.value))}function K4(e){return Vae(e,(t,n)=>rn(t,n.value))}function Vae(e,t){if(Zqe(e))return ae(e.condition).reduce(t,e.value);if(ks(e))return e.value}function Wae(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=te(n.field);return r.map(o=>`(!length(data(${te(Nt(o)+wd)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const iV={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return ose(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return sse(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??uKe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??cKe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??iKe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>gp(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(pp(n)&&oa(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>rKe(t,e)};function rKe(e,t){const n=e.values;if(G(n))return vse(t,n);if(me(n))return n}function iKe(e,t,n,r){if(t!=="shape"){const i=K4(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function oKe(e){const{legend:t}=e;return rn(t.type,sKe(e))}function sKe({channel:e,timeUnit:t,scaleType:n}){if(pp(e)){if(Le(["quarter","month","day"],t))return"symbol";if(oa(n))return"gradient"}return"symbol"}function aKe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??lKe(n,t)}function lKe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function uKe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(oa(i))return n==="horizontal"?r==="top"||r==="bottom"?oV(t,"width",s,o):s:oV(t,"height",l,a)}function oV(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function cKe(e){if(Le(["quantile","threshold","log","symlog"],e))return"greedy"}function Hae(e){const t=Bt(e)?fKe(e):gKe(e);return e.component.legends=t,t}function fKe(e){const{encoding:t}=e,n={};for(const r of[Si,...Bse]){const i=xn(t[r]);!i||!e.getScaleComponent(r)||r===ki&&J(i)&&i.type===sm||(n[r]=pKe(e,r))}return n}function dKe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function hKe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function pKe(e,t){var x;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new ZXe({},dKe(e,t));kXe(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=xn(i[t]),f=J(c)?(x=On(c.timeUnit))==null?void 0:x.unit:void 0,d=n.orient||o.legend.orient||"right",h=oKe({legend:n,channel:t,timeUnit:f,scaleType:u}),p=aKe({legend:n,legendType:h,orient:d,legendConfig:s}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:u,orient:d,legendType:h,direction:p};for(const w of jae){if(h==="gradient"&&w.startsWith("symbol")||h==="symbol"&&w.startsWith("gradient"))continue;const k=w in iV?iV[w](g):n[w];if(k!==void 0){const S=hKe(k,w,n,e.fieldDef(t));(S||o.legend[w]===void 0)&&a.set(w,k,S)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const w of["labels","legend","title","symbols","gradient","entries"]){const k=zae(m[w]??{},e),S=w in rV?rV[w](k,b):k;S!==void 0&&!mt(S)&&(v[w]={...y!=null&&y.length&&J(c)?{name:`${Nt(c.field)}_legend_${w}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return mt(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function gKe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Hae(r);for(const i of X(r.component.legends))n.legend[i]=RO(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=qae(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of X(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function qae(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of jae){const c=hc(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(f,d)=>{switch(u){case"symbolType":return mKe(f,d);case"title":return Coe(f,d);case"type":return i=!0,Ai("symbol")}return U_(f,d,u,"legend")});e.setWithExplicit(u,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&VS(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&VS(e.explicit,["encode","gradient"])),e}function mKe(e,t){return t.value==="circle"?t:e}function yKe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Gae(e){const t=e.component.legends,n={};for(const i of X(t)){const o=e.getScaleComponent(i),s=yt(o.get("domains"));if(n[s])for(const a of n[s])qae(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return Zn(n).flat().map(i=>vKe(i,e.config)).filter(i=>i!==void 0)}function vKe(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const c of Bse)o[c]&&delete u[c]}if(o.title||delete o.title,r!==void 0){let u=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&me(o.encode.labels.update.text)&&(u=pd(r,"datum.label",o.encode.labels.update.text.signal)),yKe(o,"labels","text",{signal:u})}return o}}function bKe(e){return fm(e)||zO(e)?xKe(e):Yae(e)}function xKe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Yae(e))}function Yae(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=me(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Le(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const wKe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Xae extends Ul{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Kae(e){e.component.projection=Bt(e)?SKe(e):_Ke(e)}function SKe(e){if(e.hasProjection){const t=Wn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?kKe(e):void 0,o=new Xae(e.projectionName(!0),{...Wn(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function kKe(e){const t=[],{encoding:n}=e;for(const r of[[Ps,Fs],[No,Rs]])(xn(n[r[0]])||xn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ki)&&e.typedFieldDef(ki).type===sm&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Qt.Main)),t}function CKe(e,t){const n=E8(wKe,i=>!!(!ce(e.explicit,i)&&!ce(t.explicit,i)||ce(e.explicit,i)&&ce(t.explicit,i)&&Li(e.get(i),t.get(i))));if(Li(e.size,t.size)){if(n)return e;if(Li(e.explicit,{}))return t;if(Li(t.explicit,{}))return e}return null}function _Ke(e){if(e.children.length===0)return;let t;for(const r of e.children)Kae(r);const n=E8(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=CKe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Xae(r,t.specifiedProjection,t.size,Te(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function EKe(e,t,n,r){if(Gv(t,n)){const i=Bt(e)?e.axis(n)??e.legend(n)??{}:{},o=ie(t,{expr:"datum"}),s=ie(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ie(t,{binSuffix:"range",forAs:!0}),formula:Vv(o,s,i.format,i.formatType,r)}}return{}}function Qae(e,t){return`${moe(e)}_${t}`}function $Ke(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function DO(e,t,n){const r=N_(n,void 0)??{},i=Qae(r,t);return e.getName(`${i}_bins`)}function AKe(e){return"as"in e}function sV(e,t,n){let r,i;AKe(e)?r=le(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ie(e,{forAs:!0}),ie(e,{binSuffix:"end",forAs:!0})];const o={...N_(t,void 0)},s=Qae(o,e.field),{signal:a,extentSignal:l}=$Ke(n,s);if(__(o.extent)){const c=o.extent;i=Tae(n,c.param,c),delete o.extent}const u={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:u}}class ma extends pt{clone(){return new ma(null,Te(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(Kr(o)&&kt(o.bin)){const{key:a,binComponent:l}=sV(o,o.bin,n);i[a]={...l,...i[a],...EKe(n,o,s,n.config)}}return i},{});return mt(r)?null:new ma(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=sV(n,n.bin,r);return new ma(t,{[i]:o})}merge(t,n){for(const r of X(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=ia([...this.bins[r].as,...t.bins[r].as],Be)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Zn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Zn(this.bins).map(t=>t.field))}hash(){return`Bin ${Be(this.bins)}`}assemble(){return Zn(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:Oo(t.field),as:r,signal:t.signal,...__(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:Oo(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:ie({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function TKe(e,t,n,r){var o;const i=Bt(r)?r.encoding[Da(t)]:void 0;if(Kr(n)&&Bt(r)&&cse(n,i,r.markDef,r.config)){e.add(ie(n,{})),e.add(ie(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,u=dc({fieldDef:n,markDef:a,config:l});_1(s)&&u!==.5&&on(t)&&(e.add(ie(n,{suffix:V_})),e.add(ie(n,{suffix:W_}))),n.bin&&Gv(n,t)&&e.add(ie(n,{binSuffix:"range"}))}else if(aoe(t)){const s=soe(t);e.add(r.getName(s))}else e.add(ie(n));return Gd(n)&&vqe((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function MKe(e,t){for(const n of X(t)){const r=t[n];for(const i of X(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class gs extends pt{clone(){return new gs(null,new Set(this.dimensions),Te(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:l,field:u}=s;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ie(s,{forAs:!0})]);else{if(Tl(l)||Rc(l)){const c=Tl(l)?"argmin":"argmax",f=l[c];i[f]??(i[f]={}),i[f][c]=new Set([ie({op:c,field:f},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([ie(s,{forAs:!0})]);Oa(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([ie({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([ie({field:u,aggregate:"max"},{forAs:!0})]))}else TKe(o,a,s,n)}),o.size+X(i).length===0)?null:new gs(t,o,i)}static makeFromTransform(t,n){var r;const i=new Set,o={};for(const s of n.aggregate){const{op:a,field:l,as:u}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([u||ie(s,{forAs:!0})])):(o[l]??(o[l]={}),(r=o[l])[a]??(r[a]=new Set),o[l][a].add(u||ie(s,{forAs:!0}))))}for(const s of n.groupby??[])i.add(s);return i.size+X(o).length===0?null:new gs(t,i,o)}merge(t){return Zie(this.dimensions,t.dimensions)?(MKe(this.measures,t.measures),!0):(VHe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...X(this.measures)])}producedFields(){const t=new Set;for(const n of X(this.measures))for(const r of X(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Be({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of X(this.measures))for(const s of X(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:Oo(o));return{type:"aggregate",groupby:[...this.dimensions].map(Oo),ops:t,fields:n,as:r}}}class um extends pt{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of Co){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:n.getName(`${o}_domain`),fields:[ie(s),...kt(a)?[ie(s,{binSuffix:"end"})]:[]],...yl(l)?{sortField:l}:G(l)?{sortIndexField:Tg(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Co)this[n]&&(t+=` ${n.charAt(0)}:${Be(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Co)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Co)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Bl){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(Nn(i)&&Wd(o)){const s=X_(this.childModel,n),a=LO(s);a?t[n]=a:Z(B8(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=R_,field:f}=l;o.push(f),s.push(c),a.push(ie(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const u of MO){for(const c of FO){const f=(r[u]&&r[u][c])??[];for(const d of f)if(((l=d.axes)==null?void 0:l.length)>0){o[u]=!0;break}}if(o[u]){const c=`length(data("${this.facet.name}"))`,f=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[ml,gl])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function aV(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function FKe(e,t){const n=T8(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=aV(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=aV(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Z(ZWe(t)),null}function PKe(e){const t={};return M2(e.filter,n=>{if(joe(n)){let r=null;W8(n)?r=Ri(n.equal):q8(n)?r=Ri(n.lte):H8(n)?r=Ri(n.lt):G8(n)?r=Ri(n.gt):Y8(n)?r=Ri(n.gte):X8(n)?r=n.range[0]:K8(n)&&(r=(n.oneOf??n.in)[0]),r&&(Hd(r)?t[n.field]="date":Qe(r)?t[n.field]="number":le(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function RKe(e){const t={};function n(r){_g(r)?t[r.field]="date":r.type==="quantitative"&&TWe(r.aggregate)?t[r.field]="number":vg(r.field)>1?r.field in t||(t[r.field]="flatten"):Gd(r)&&yl(r.sort)&&vg(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Bt(e)||Hi(e))&&e.forEachFieldDef((r,i)=>{if(Kr(r))n(r);else{const o=Ud(i),s=e.fieldDef(o);n({...r,type:s.type})}}),Bt(e)){const{mark:r,markDef:i,encoding:o}=e;if(Dc(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];J(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function DKe(e){const t={};if(Bt(e)&&e.component.selection)for(const n of X(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&vg(i.field)>1&&(t[i.field]="flatten")}return t}class vr extends pt{clone(){return new vr(null,Te(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Be(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!Yu(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of X(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:Z(mU(a,r[a],l.value)))}for(const a of X(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:Z(mU(a,n[a],l)))}const o=new Ul(n,r);i.copyAll(o);const s={};for(const a of X(o.combine())){const l=o.get(a);l!==null&&(s[a]=l)}return X(s).length===0||i.parseNothing?null:new vr(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of X(this._parse)){const r=this._parse[n];vg(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(X(this._parse))}dependentFields(){return new Set(X(this._parse))}assembleTransforms(t=!1){return X(this._parse).filter(n=>t?vg(n)>1:!0).map(n=>{const r=FKe(n,this._parse[n]);return r?{type:"formula",expr:r,as:im(n)}:null}).filter(n=>n!==null)}}class gc extends pt{clone(){return new gc(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([_s])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:_s}}}class Kv extends pt{clone(){return new Kv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Be(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Qv extends pt{clone(){return new Qv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Be(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Sd extends pt{constructor(t){super(null),t??(t={name:"source"});let n;if(Yu(t)||(n=t.format?{...gi(t.format,["parse"])}:{}),E1(t))this._data={values:t.values};else if(Eg(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Le(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else iae(t)?this._data={values:[{type:"Sphere"}]}:(nae(t)||Yu(t))&&(this._data={});this._generator=Yu(t),t.name&&(this._name=t.name),n&&!mt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var lV=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},OKe=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},L0;function OO(e){return e instanceof Sd||e instanceof Kv||e instanceof Qv}class NO{constructor(){L0.set(this,void 0),lV(this,L0,!1,"f")}setModified(){lV(this,L0,!0,"f")}get modifiedFlag(){return OKe(this,L0,"f")}}L0=new WeakMap;class Yd extends NO{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class IO extends NO{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class NKe extends IO{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of X(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class IKe extends IO{constructor(t){super(),this.requiresSelectionId=t&&TO(t)}run(t){t instanceof gc&&(this.requiresSelectionId&&(OO(t.parent)||t.parent instanceof gs||t.parent instanceof vr)||(this.setModified(),t.remove()))}}class LKe extends NO{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof ga&&(r=t.producedFields(),$8(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class zKe extends IO{constructor(){super()}run(t){t instanceof mi&&!t.isRequired()&&(this.setModified(),t.remove())}}class BKe extends Yd{run(t){if(!OO(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof vr)if(t instanceof vr)this.setModified(),t.merge(n);else{if(A8(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class jKe extends Yd{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof vr);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of X(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!mt(i)){this.setModified();const s=new vr(t,i);for(const a of n){if(a instanceof vr)for(const l of X(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof vr&&X(a.parse).length===0&&a.remove()}}}}}class UKe extends Yd{run(t){t instanceof mi||t.numChildren()>0||t instanceof um||t instanceof Sd||(this.setModified(),t.remove())}}class VKe extends Yd{run(t){const n=t.children.filter(i=>i instanceof ga),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class WKe extends Yd{run(t){const n=t.children.filter(i=>i instanceof gs),r={};for(const i of n){const o=Be(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of X(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class HKe extends Yd{constructor(t){super(),this.model=t}run(t){const n=!(OO(t)||t instanceof lm||t instanceof vr||t instanceof gc),r=[],i=[];for(const o of t.children)o instanceof ma&&(n&&!A8(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ma?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class qKe extends Yd{run(t){const n=[...t.children];if(!yg(n,s=>s instanceof mi)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof mi){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof mi)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class Xd extends pt{clone(){return new Xd(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ia(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ie(t)}hash(){return`JoinAggregateTransform ${Be(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class Fg extends pt{clone(){return new Fg(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:s,scales:a}=r;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,f)=>{const d=Oa(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,g=rO({scaleChannel:f,markDef:o,config:i,scaleType:h,isCountAggregate:C_(p)});g!=="show"&&g!=="always-valid"&&(u[c.field]=c)}return u},{});return X(l).length?new Fg(t,l):null}dependentFields(){return new Set(X(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Be(this.filter)}`}assemble(){const t=X(this.filter).reduce((n,r)=>{const i=this.filter[r],o=ie(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${Q4(o)}))`):i.type==="quantitative"&&n.push(Q4(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function Q4(e){return`isValid(${e}) && isFinite(+${e})`}function GKe(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ie(r);return i&&t.push(i),t},[])}function YKe(e){return G(e)&&e.every(t=>le(t))&&e.length>1}class bl extends pt{clone(){return new bl(null,Te(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),l.push(rn(f.order,"ascending"));const u={field:a,order:l};let c;return YKe(o)?c=o:le(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new bl(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=r,u=o.map(h=>{const p=i[h];return Cs(p)}).filter(h=>!!h),c=GKe(n),f=n.encoding.order;let d;if(G(f)||J(f))d=woe(f);else{const h=fse(f)?f.sort:s==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new bl(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Be(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ie(i,{binSuffix:"mid"})]:[ie(i,{}),ie(i,{binSuffix:"end"})]:[ie(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ie(c,{expr:"datum"}),p=ie(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${Q4(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:ie(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:ie(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:u,offset:a}),t}}class cm extends pt{clone(){return new cm(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ia(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ie(t)}hash(){return`WindowTransform ${Be(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>L8(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),l.push(f.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function XKe(e){function t(n){if(!(n instanceof um)){const r=n.clone();if(r instanceof mi){const i=J4+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof gs||r instanceof bl||r instanceof cm||r instanceof Xd)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Z4(e){if(e instanceof um)if(e.numChildren()===1&&!(e.children[0]instanceof mi)){const t=e.children[0];(t instanceof gs||t instanceof bl||t instanceof cm||t instanceof Xd)&&t.addDimensions(e.fields),t.swapWithParent(),Z4(e)}else{const t=e.model.component.data.main;Zae(t);const n=XKe(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Z4)}function Zae(e){if(e instanceof mi&&e.type===Qt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof um||(t.swapWithParent(),Zae(e))}}const J4="scale_",vx=5;function eM(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!eM(t.children))return!1}return!0}function Vo(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function uV(e,t,n){let r=e.sources,i=!1;return i=Vo(new zKe,r)||i,i=Vo(new IKe(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Vo(new UKe,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Vo(new BKe,r)||i,i=Vo(new HKe(t),r)||i,i=Vo(new LKe,r)||i,i=Vo(new jKe,r)||i,i=Vo(new WKe,r)||i,i=Vo(new VKe,r)||i,i=Vo(new NKe,r)||i,i=Vo(new qKe,r)||i),e.sources=r,i}function KKe(e,t){eM(e.sources);let n=0,r=0;for(let i=0;i<vx&&uV(e,t,!0);i++)n++;e.sources.map(Z4);for(let i=0;i<vx&&uV(e,t,!1);i++)r++;eM(e.sources),Math.max(n,r)===vx&&Z(`Maximum optimization runs(${vx}) reached.`)}class An{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new An(()=>t(n))}}function Jae(e){Bt(e)?QKe(e):ZKe(e)}function QKe(e){const t=e.component.scales;for(const n of X(t)){const r=eQe(e,n);if(t[n].setWithExplicit("domains",r),nQe(e,n),e.component.data.isFaceted){let o=e;for(;!Hi(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)al(a)&&(a.data=J4+a.data.replace(J4,""))}}}function ZKe(e){for(const n of e.children)Jae(n);const t=e.component.scales;for(const n of X(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=hc(r,s.getWithExplicit("domains"),"domains","scale",tM);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&Z(YWe),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function JKe(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=cV(t,n);if(!i){Z(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=cV(t,n);if(i)return"unaggregated"}return e}function eQe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=JKe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&xn(r.x2)?xn(r.x)?hc(Zl(n,i,e,"x"),Zl(n,i,e,"x2"),"domain","scale",tM):Zl(n,i,e,"x2"):t==="y"&&xn(r.y2)?xn(r.y)?hc(Zl(n,i,e,"y"),Zl(n,i,e,"y2"),"domain","scale",tM):Zl(n,i,e,"y2"):Zl(n,i,e,t)}function tQe(e,t,n){return e.map(r=>({signal:`{data: ${I_(r,{timeUnit:n,type:t})}}`}))}function Z5(e,t,n){var i;const r=(i=On(n))==null?void 0:i.unit;return t==="temporal"||r?tQe(e,t,r):[e]}function Zl(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,u=xn(i[r]),{type:c}=u,f=u.timeUnit,d=XYe({invalid:wa("invalid",o,a),isPath:Dc(s)});if(yqe(t)){const g=Zl(e,void 0,n,r),m=Z5(t.unionWith,c,f);return Ws([...m,...g.value])}else{if(me(t))return Ws([t]);if(t&&t!=="unaggregated"&&!Yoe(t))return Ws(Z5(t,c,f))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Ai([[0,1]]);const g=n.requestDataName(d);return Ai([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=Oa(r)&&J(u)?rQe(n,r,e):void 0;if(Na(u)){const g=Z5([u.datum],c,f);return Ai(g)}const p=u;if(t==="unaggregated"){const{field:g}=u;return Ai([{data:n.requestDataName(d),field:ie({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:ie({field:g,aggregate:"max"})}])}else if(kt(p.bin)){if(Nn(e))return Ai(e==="bin-ordinal"?[]:[{data:k1(h)?n.requestDataName(d):n.requestDataName(Qt.Raw),field:n.vgField(r,Gv(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!se(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if(kt(g)){const m=DO(n,p.field,g);return Ai([new An(()=>{const y=n.getSignalName(m);return`[${y}.start, ${y}.stop]`})])}else return Ai([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Le(["time","utc"],e)){const g=i[Da(r)];if(cse(p,g,o,a)){const m=n.requestDataName(d),y=dc({fieldDef:p,fieldDef2:g,markDef:o,config:a}),v=_1(s)&&y!==.5&&on(r);return Ai([{data:m,field:n.vgField(r,v?{suffix:V_}:{})},{data:m,field:n.vgField(r,{suffix:v?W_:"end"})}])}}return Ai(h?[{data:k1(h)?n.requestDataName(d):n.requestDataName(Qt.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function J5(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":R_),...r?{field:Oo(r)}:{},...i?{order:i}:{}}}function nQe(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=Yoe(r)?r:void 0,s=Vd(i)&&__(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function rQe(e,t,n){if(!Nn(n))return;const r=e.fieldDef(t),i=r.sort;if(lse(i))return{op:"min",field:Tg(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(yl(i)){const a=o&&!s.has(i.field);return J5(i,a)}else if(Xqe(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:f}=u,d=o&&!s.has(f);if(Tl(c)||Rc(c))return J5({field:ie(u),order:l},d);if(L8(c)||!c)return J5({op:c,field:f,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Le(["ascending",void 0],i))return!0}}function cV(e,t){const{aggregate:n,type:r}=e;return n?le(n)&&!FWe.has(n)?{valid:!1,reason:xHe(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:wHe(e)}:{valid:!0}:{valid:!1,reason:bHe(e)}}function tM(e,t,n,r){return e.explicit&&t.explicit&&Z(EHe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function iQe(e){const t=ia(e.map(s=>{if(al(s)){const{sort:a,...l}=s;return l}return s}),Be),n=ia(e.map(s=>{if(al(s)){const a=s.sort;return a!==void 0&&!k1(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Be);if(t.length===0)return;if(t.length===1){const s=e[0];if(al(s)&&n.length>0){let a=n[0];if(n.length>1){Z(vU);const l=n.filter(u=>se(u)&&"op"in u&&u.op!=="min");n.every(u=>se(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(se(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=ia(n.map(s=>k1(s)||!("op"in s)||le(s.op)&&ce($We,s.op)?s:(Z(AHe(s)),!0)),Be);let i;r.length===1?i=r[0]:r.length>1&&(Z(vU),i=!0);const o=ia(e.map(s=>al(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function LO(e){if(al(e)&&le(e.field))return e.field;if(PWe(e)){let t;for(const n of e.fields)if(al(n)&&le(n.field)){if(!t)t=n.field;else if(t!==n.field)return Z(THe),t}return Z(MHe),t}else if(RWe(e)){Z(FHe);const t=e.fields[0];return le(t)?t:void 0}}function X_(e,t){const r=e.component.scales[t].get("domains").map(i=>(al(i)&&(i.data=e.lookupDataSource(i.data)),i));return iQe(r)}function ele(e){return fm(e)||zO(e)?e.children.reduce((t,n)=>t.concat(ele(n)),fV(e)):fV(e)}function fV(e){return X(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:c,...f}=i,d=oQe(i.range,o,n,e),h=X_(e,n),p=a?tXe(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function oQe(e,t,n,r){if(on(n)){if(Wd(e))return{step:{signal:`${t}_step`}}}else if(se(e)&&al(e))return{...e,data:r.lookupDataSource(e.data)};return e}class tle extends Ul{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Le([Hn.LOG,Hn.TIME,Hn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Le([Hn.LINEAR,Hn.SQRT,Hn.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,s=!1;for(const a of r){if(G(a)){const l=a[0],u=a[a.length-1];if(Qe(l)&&Qe(u))if(l<=0&&u>=0){i=!0;continue}else{o=!0;continue}}s=!0}if(i)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const sQe=["range","scheme"];function aQe(e){const t=e.component.scales;for(const n of I8){const r=t[n];if(!r)continue;const i=lQe(n,e);r.setWithExplicit("range",i)}}function dV(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=Ci(t),s=e.getName(o);if(se(r)&&r.binned&&r.step!==void 0)return new An(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(kt(r)){const a=DO(e,i,r);return new An(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function lQe(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of sQe)if(n[f]!==void 0){const d=I4(o,f),h=Xoe(e,f);if(!d)Z(Aoe(o,f,e));else if(h)Z(h);else switch(f){case"range":{const p=n.range;if(G(p)){if(on(e))return Ws(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return An.fromName(y,m)}return g}))}else if(se(p))return Ws({data:t.requestDataName(Qt.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Ws(p)}case"scheme":return Ws(uQe(n[f]))}}const s=e===It||e==="xOffset"?"width":"height",a=r[s];if(ka(a)){if(on(e))if(Nn(o)){const f=rle(a,t,e);if(f)return Ws({step:f})}else Z(Toe(s));else if(Bv(e)){const f=e===Ac?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=ile(a,o);if(p)return Ws(p)}}}const{rangeMin:l,rangeMax:u}=n,c=cQe(e,t);return(l!==void 0||u!==void 0)&&I4(o,"rangeMin")&&G(c)&&c.length===2?Ws([l??c[0],u??c[1]]):Ai(c)}function uQe(e){return mqe(e)?{scheme:e.name,...gi(e,["name"])}:{scheme:e}}function nle(e,t,n,{center:r}={}){const i=Ci(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===zn&&Ss(n)?r?[An.fromName(a=>`${s(a)}/2`,o),An.fromName(a=>`-${s(a)}/2`,o)]:[An.fromName(s,o),0]:r?[An.fromName(a=>`-${s(a)}/2`,o),An.fromName(a=>`${s(a)}/2`,o)]:[0,An.fromName(s,o)]}function cQe(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=xn(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case It:case zn:{if(Le(["point","band"],l)){const f=ole(e,n,r.view);if(ka(f))return{step:rle(f,t,e)}}return nle(e,t,l)}case Ac:case om:return fQe(e,t,l);case Ll:{const f=pQe(i,r),d=gQe(i,n,t,r);return Sg(l)?hQe(f,d,dQe(l,r,u,e)):[f,d]}case Lo:return[0,Math.PI*2];case jd:return[0,360];case Ms:return[0,new An(()=>{const f=t.getSignalName(Hi(t.parent)?"child_width":"width"),d=t.getSignalName(Hi(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Fc:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Pc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ki:return"symbol";case Si:case Pa:case Ra:return l==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case zl:case Tc:case Mc:return[r.scale.minOpacity,r.scale.maxOpacity]}}function rle(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=R8(n),s=r[o];if(Use({step:e,offsetIsDiscrete:Fe(s)&&Voe(s.type)})==="offset"&&Sse(r,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${IWe(f)})`}}else return e.step}function ile(e,t){if(Use({step:e,offsetIsDiscrete:Nn(t)})==="offset")return{step:e.step}}function fQe(e,t,n){const r=e===Ac?"x":"y",i=t.getScaleComponent(r);if(!i)return nle(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const u=ole(r,t.size,t.config.view);if(ka(u)){const c=ile(u,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{const u=t.encoding[r];if(J(u)&&u.timeUnit){const c=zoe(u.timeUnit,p=>`scale('${s}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=dc({fieldDef:u,markDef:a,config:l})-.5,h=d!==0?` + ${d}`:"";if(f){const p=me(f)?`${f.signal}/2`+h:`${f/2+d}`,g=me(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${g} * (${c})`}]}return[0,{signal:c}]}return Kie(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function ole(e,t,n){const r=e===It?"width":"height",i=t[r];return i||ZS(n,r)}function dQe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&G(n)?n.length+1:(Z(BHe(r)),3)}}function hQe(e,t,n){const r=()=>{const i=cs(t),o=cs(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return me(t)?new An(r):{signal:r()}}function pQe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(E_("size",e))}const hV=.95;function gQe(e,t,n,r){const i={x:dV(n,"x"),y:dV(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=pV(t,i,r.view);return Qe(o)?o-1:new An(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=pV(t,i,r.view);return Qe(o)?Math.pow(hV*o,2):new An(()=>`pow(${hV} * ${o.signal}, 2)`)}}throw new Error(E_("size",e))}function pV(e,t,n){const r=ka(e.width)?e.width.step:j4(n,"width"),i=ka(e.height)?e.height.step:j4(n,"height");return t.x||t.y?new An(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function sle(e,t){Bt(e)?mQe(e,t):lle(e,t)}function mQe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of X(n)){const l=s[a],u=n[a],c=e.getScaleComponent(a),f=xn(i[a]),d=l[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=I4(h,t),y=Xoe(a,t);if(d!==void 0&&(m?y&&Z(y):Z(Aoe(h,t,a))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Hd(l[t])||b==="temporal"||v?u.set(t,{signal:I_(l[t],{type:b,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=K(gV,t)?gV[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:kse(i,a),hasSecondaryRangeChannel:!!i[Da(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const gV={bins:({model:e,fieldOrDatumDef:t})=>J(t)?yQe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>vQe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>bQe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>xQe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>wQe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>SQe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=J(e)?e.sort:void 0;return kQe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>CQe(e,t,n,r,i,o.scale,s)};function ale(e){Bt(e)?aQe(e):lle(e,"range")}function lle(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?ale(r):sle(r,t);for(const r of X(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=hc(i,a,t,"scale",tae((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function yQe(e,t){const n=t.bin;if(kt(n)){const r=DO(e,t.field,n);return new An(()=>e.getSignalName(r))}else if(Un(n)&&Vd(n)&&n.step!==void 0)return{step:n.step}}function vQe(e,t){if(Le([Si,Pa,Ra],e)&&t!=="nominal")return"hcl"}function bQe(e,t,n,r,i,o){var s;if(!((s=Cs(o))!=null&&s.bin||G(n)||i!=null||r!=null||Le([Hn.TIME,Hn.UTC],e)))return on(t)?!0:void 0}function xQe(e,t,n,r,i,o){if(on(e)){if(oa(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(J(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Hn.POINT)return n.pointPadding}}function wQe(e,t,n,r,i,o=!1){if(e===void 0){if(on(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=i;return o?c:rn(s,n==="bar"?a:n==="tick"?u:l)}else if(Bv(t)&&r===Hn.BAND)return i.offsetBandPaddingInner}}function SQe(e,t,n,r,i,o=!1){if(e===void 0){if(on(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===Hn.BAND)return rn(s,me(r)?{signal:`${r.signal}/2`}:r/2)}else if(Bv(t)){if(n===Hn.POINT)return .5;if(n===Hn.BAND)return i.offsetBandPaddingOuter}}}function kQe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Ss(e)&&t==="descending"?me(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Ss(e)&&t==="descending")return!0}function CQe(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&Ss(i)){if(G(n)){const l=n[0],u=n[n.length-1];if(Qe(l)&&l<=0&&Qe(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Sg(i))return!0;if(!(J(t)&&t.bin)&&Le([...Bl,...bWe],e)){const{orient:l,type:u}=r;return Le(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Le(["bar","area"],u)&&!s?!0:o==null?void 0:o.zero}return!1}function _Qe(e,t,n,r,i=!1){const o=EQe(t,n,r,i),{type:s}=e;return Oa(t)?s!==void 0?kqe(t,s)?J(n)&&!Sqe(s,n.type)?(Z(CHe(s,o)),o):s:(Z(kHe(t,s,o)),o):o:null}function EQe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(pp(e)||V5(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Z(W5(e,"ordinal")),"ordinal";if(on(e)||Bv(e)){if(Le(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in N8)return"band";const o=n[Ci(e)];return vd(o)||Cg(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return pp(e)?"time":V5(e)==="discrete"?(Z(W5(e,"temporal")),"ordinal"):J(t)&&t.timeUnit&&On(t.timeUnit).utc?"utc":"time";case"quantitative":return pp(e)?J(t)&&kt(t.bin)?"bin-ordinal":"linear":V5(e)==="discrete"?(Z(W5(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(Eoe(t.type))}function $Qe(e,{ignoreRange:t}={}){ule(e),Jae(e);for(const n of wqe)sle(e,n);t||ale(e)}function ule(e){Bt(e)?e.component.scales=AQe(e):e.component.scales=MQe(e)}function AQe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of I8){const s=xn(t[o]);if(s&&n===Zoe&&o===ki&&s.type===sm)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=kse(t,o),u=_Qe(a,o,s,r,l);i[o]=new tle(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const TQe=tae((e,t)=>xU(e)-xU(t));function MQe(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){ule(o);for(const s of X(o.component.scales))if((t=i.scale)[s]??(t[s]=Bae(s,e)),i.scale[s]==="shared"){const a=r[s],l=o.component.scales[s].getWithExplicit("type");a?fqe(a.value,l.value)?r[s]=hc(a,l,"type","scale",TQe):(i.scale[s]="independent",delete r[s]):r[s]=l}}for(const o of X(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new tle(s,a);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return n}class eA{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Bt(e){return(e==null?void 0:e.type)==="unit"}function Hi(e){return(e==null?void 0:e.type)==="facet"}function zO(e){return(e==null?void 0:e.type)==="concat"}function fm(e){return(e==null?void 0:e.type)==="layer"}class BO{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.correctDataNames=l=>{var u,c,f;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(f=(c=l.from)==null?void 0:c.facet)!=null&&f.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=r,this.config=o,this.view=Wn(a),this.name=t.name??i,this.title=au(t.title)?{text:t.title}:t.title?Wn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new eA,this.projectionNameMap=r?r.projectionNameMap:new eA,this.signalNameMap=r?r.signalNameMap:new eA,this.data=t.data,this.description=t.description,this.transforms=IYe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:jGe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:D_(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Ul,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Te(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){$Qe(this)}parseProjection(){Kae(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Hae(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of X(r)){const s=r[o];s!==void 0&&(i[o]=At(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=At(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:mt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=KXe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Co)t[r].title&&n.push(WXe(this,r));for(const r of MO)n=n.concat(HXe(this,r));return n}assembleAxes(){return FXe(this.component.axes,this.config)}assembleLegends(){return Gae(this)}assembleProjections(){return bKe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...yoe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Le(["unit","layer"],this.type)?Le(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),mt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Hi(this.parent)?ele(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Nt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Qt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Hi(this.parent)){const n=Lae(t),r=k_(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(Nn(o)&&Wd(s)){const a=i.get("name"),l=X_(this,r),u=LO(l);if(u){const c=ie({aggregate:"distinct",field:u},{expr:"datum"});return{signal:Iae(a,i,c)}}else return Z(B8(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(uoe(t)&&Oa(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(UWe(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class cle extends BO{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ie(r,n)}reduceFieldDef(t,n){return mGe(this.getMapping(),(r,i,o)=>{const s=Cs(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){dO(this.getMapping(),(r,i)=>{const o=Cs(r);o&&t(o,i)},n)}}class K_ extends pt{clone(){return new K_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Be(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Q_ extends pt{clone(){return new Q_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Be(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Z_ extends pt{clone(){return new Z_(this.parent,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Be(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class J_ extends pt{clone(){return new J_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Be(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class yp extends pt{clone(){return new yp(null,Te(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Ps,Fs],[No,Rs]]){const o=i.map(s=>{const a=xn(n.encoding[s]);return J(a)?a.field:Na(a)?{expr:`${a.datum}`}:ks(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new yp(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ki)){const i=n.typedFieldDef(ki);i.type===sm&&(t=new yp(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(le);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Be(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class $1 extends pt{clone(){return new $1(null,this.projection,Te(this.fields),Te(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Ps,Fs],[No,Rs]]){const i=r.map(s=>{const a=xn(n.encoding[s]);return J(a)?a.field:Na(a)?{expr:`${a.datum}`}:ks(a)?{expr:`${a.value}`}:void 0}),o=r[0]===No?"2":"";(i[0]||i[1])&&(t=new $1(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(le))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Be(this.fields)} ${Be(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Yf extends pt{clone(){return new Yf(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Yf(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(J(i)&&J(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:l,value:u,frame:c,keyvals:f}=s.impute,d=Ese(n.mark,r);return new Yf(t,{impute:s.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Be(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:vYe(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class eE extends pt{clone(){return new eE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Be(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class A1 extends pt{clone(){return new A1(null,Te(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(bYe(s)){let l=hle(s.data,o);l||(l=new Sd(s.data),o.push(l));const u=n.getName(`lookup_${i}`);a=new mi(l,u,Qt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(xYe(s)){const l=s.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(Nt(l),l)}catch{throw new Error(qWe(l))}if(a=u.materialized,!a)throw new Error(GWe(l))}return new A1(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ae(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Be({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ae(this.transform.as)}:{}};else{let n=this.transform.as;le(n)||(Z(tHe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class tE extends pt{clone(){return new tE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Be(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class nE extends pt{clone(){return new nE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Be(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class rE extends pt{clone(){return new rE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ia((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Be(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class iE extends pt{clone(){return new iE(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Be(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function fle(e){let t=0;function n(r,i){if(r instanceof Sd&&!r.isGenerator&&!Eg(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof vr&&(r.parent instanceof Sd&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof um){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof Kv||r instanceof Qv||r instanceof Fg||r instanceof lm||r instanceof Ag||r instanceof $1||r instanceof gs||r instanceof A1||r instanceof cm||r instanceof Xd||r instanceof J_||r instanceof Z_||r instanceof K_||r instanceof eE||r instanceof tE||r instanceof nE||r instanceof gc||r instanceof iE||r instanceof rE||r instanceof Q_)&&i.transform.push(r.assemble()),(r instanceof ma||r instanceof ga||r instanceof Yf||r instanceof bl||r instanceof yp)&&i.transform.push(...r.assemble()),r instanceof mi&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof mi?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof mi&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function FQe(e){const t=[],n=fle(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function PQe(e,t){const n=[],r=fle(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function RQe(e){return e==="top"||e==="left"||me(e)?"header":"footer"}function DQe(e){for(const t of Co)OQe(e,t);mV(e,"x"),mV(e,"y")}function OQe(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=Mg("title",null,r,t);let u=gp(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=G(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Mg("labelOrient",a.header,r,t),f=a.header!==null?rn((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=Le(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[dle(e,t,f)]}}}function dle(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function mV(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=RO(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=RQe(a.get("orient"));s[l]??(s[l]=[dle(e,o,!1)]);const u=I0(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function NQe(e){jO(e),nk(e,"width"),nk(e,"height")}function IQe(e){jO(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";nk(e,t),nk(e,n)}function jO(e){for(const t of e.children)t.parseLayoutSize()}function nk(e,t){const n=Lae(t),r=k_(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??Bae(r,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=hc(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function LQe(e){const{size:t,component:n}=e;for(const r of Bl){const i=Ci(r);if(t[i]){const o=t[i];n.layoutSize.set(i,ka(o)?"step":o,!0)}else{const o=zQe(e,i);n.layoutSize.set(i,o,!1)}}}function zQe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(Nn(o)){const a=ZS(r.view,t);return Wd(s)||ka(a)?"step":a}else return B4(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return B4(r.view,t);{const o=ZS(r.view,t);return ka(o)?o.step:o}}}function nM(e,t,n){return ie(t,{suffix:`by_${ie(e)}`,...n})}class Sy extends cle{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=qO(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Wv(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=X(t),r={};for(const i of n){if(![gl,ml].includes(i)){Z(E_(i,"facet"));break}const o=t[i];if(o.field===void 0){Z(O4(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=fO(t,n);return r.header?r.header=Wn(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return K(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=oE(this),this.child.parseData()}parseLayoutSize(){jO(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),DQe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Co)for(const r of FO){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=Mg("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const l=G_(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Sy))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Sy?{...this.channelHasField("column")?{encode:{update:{columns:{field:ie(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Sy){if(this.child.channelHasField("column")){const i=ie(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Bl){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(Nn(s)&&Wd(a)){const l=X_(this.child,i),u=LO(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):Z(B8(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Co){const f=this.facet[c];if(f){l.push(ie(f));const{bin:d,sort:h}=f;if(kt(d)&&l.push(ie(f,{binSuffix:"end"})),yl(h)){const{field:p,op:g=R_}=h,m=nM(f,h);r&&i?(o.push(m),s.push("max"),a.push(m)):(o.push(p),s.push(g),a.push(m))}else if(G(h)){const p=Tg(f,c);o.push(p),s.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?yl(r.sort)?[nM(r,r.sort,{expr:"datum"})]:G(r.sort)?[Tg(r,t,{expr:"datum"})]:[ie(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(yl(i)?i.order:!G(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return X4(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of MO)if(t[o]){const s=Mg("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return X4(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=FQe(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Co.map(l=>this.facetSortFields(l)).flat(),order:Co.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(QYe(this,[]))}]}getMapping(){return this.facet}}function BQe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(yl(o.sort)){const{field:s,op:a=R_}=o.sort;e=i=new Xd(e,{joinaggregate:[{op:a,field:s,as:nM(o,o.sort,{forAs:!0})}],groupby:[ie(o)]})}return i}return null}function hle(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((l||f)&&l!==f)){if(E1(e)&&E1(a)){if(Li(e.values,a.values))return s}else if(Eg(e)&&Eg(a)){if(e.url===a.url)return s}else if(nae(e)&&e.name===s.dataName)return s}}return null}function jQe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Sd({values:[]});return t.push(r),r}const n=hle(e.data,t);if(n)return Yu(e.data)||(n.data.format=Qie({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Sd(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function UQe(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(MYe(i))s=e=new Ag(e,i),o="derived";else if(kO(i)){const a=PKe(i);s=e=vr.makeWithAncestors(e,{},a,n)??e,e=new lm(e,t,i.filter)}else if(Qse(i))s=e=ma.makeFromTransform(e,i,t),o="number";else if(PYe(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new vr(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=ga.makeFromTransform(e,i);else if(RYe(i))s=e=gs.makeFromTransform(e,i),o="number",TO(t)&&(e=new gc(e));else if(Kse(i))s=e=A1.make(e,t,i,r++),o="derived";else if($Ye(i))s=e=new cm(e,i),o="number";else if(AYe(i))s=e=new Xd(e,i),o="number";else if(DYe(i))s=e=bl.makeFromTransform(e,i),o="derived";else if(OYe(i))s=e=new J_(e,i),o="derived";else if(NYe(i))s=e=new Q_(e,i),o="derived";else if(TYe(i))s=e=new Z_(e,i),o="derived";else if(wYe(i))s=e=new rE(e,i),o="derived";else if(EYe(i))e=new iE(e,i);else if(FYe(i))s=e=Yf.makeFromTransform(e,i),o="derived";else if(SYe(i))s=e=new K_(e,i),o="derived";else if(kYe(i))s=e=new tE(e,i),o="derived";else if(CYe(i))s=e=new nE(e,i),o="derived";else if(_Ye(i))s=e=new eE(e,i),o="derived";else{Z(eHe(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function oE(e){var m;let t=jQe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(Yu(i)||Eg(i)||E1(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new YYe;Yu(i)?(rae(i)?t=new Qv(t,i.sequence):CO(i)&&(t=new Kv(t,i.graticule)),s.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(s.parseNothing=!0),t=vr.makeExplicit(t,e,s)??t,t=new gc(t);const a=e.parent&&fm(e.parent);(Bt(e)||Hi(e))&&a&&(t=ma.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=UQe(t,e,s));const l=DKe(e),u=RKe(e);t=vr.makeWithAncestors(t,{},{...l,...u},s)??t,Bt(e)&&(t=yp.parseAll(t,e),t=$1.parseAll(t,e)),(Bt(e)||Hi(e))&&(a||(t=ma.makeFromEncoding(t,e)??t),t=ga.makeFromEncoding(t,e)??t,t=Ag.parseAllForSortIndex(t,e));const c=t=bx(Qt.Raw,e,t);if(Bt(e)){const y=gs.makeFromEncoding(t,e);y&&(t=y,TO(e)&&(t=new gc(t))),t=Yf.makeFromEncoding(t,e)??t,t=bl.makeFromEncoding(t,e)??t}let f,d;if(Bt(e)){const{markDef:y,mark:v,config:b}=e,x=gt("invalid",y,b),{marks:w,scales:k}=d=oae({invalid:x,isPath:Dc(v)});w!==k&&k==="include-invalid-values"&&(f=t=bx(Qt.PreFilterInvalid,e,t)),w==="exclude-invalid-values"&&(t=Fg.make(t,e,d)??t)}const h=t=bx(Qt.Main,e,t);let p;if(Bt(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=Fg.make(t,e,d)??t,p=t=bx(Qt.PostFilterInvalid,e,t))}Bt(e)&&TXe(e,h);let g=null;if(Hi(e)){const y=e.getName("facet");t=BQe(t,e.facet)??t,g=new um(t,e,y,h.getSource()),n[y]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:g,ancestorParse:s,preFilterInvalid:f,postFilterInvalid:p}}function bx(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new mi(n,o,e,i);return r[o]=s,s}class VQe extends BO{constructor(t,n,r,i){var o,s,a,l;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&Z(QWe),this.children=this.getChildren(t).map((u,c)=>qO(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=oE(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of X(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return B_(t)?t.vconcat:wO(t)?t.hconcat:t.concat}parseLayoutSize(){IQe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=PO(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function WQe(e){return e===!1||e===null}const HQe={disable:1,gridScale:1,scale:1,...xse,labelExpr:1,encode:1},ple=X(HQe);class UO extends Ul{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new UO(Te(this.explicit),Te(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!WQe(this.get(t))}hasOrientSignalRef(){return me(this.explicit.orient)}}function qQe(e,t,n){const{encoding:r,config:i}=e,o=xn(r[t])??xn(r[Da(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(bd(l))return{text:fs({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(kg(o)==="quantitative"){if(Cg(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:fs({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:fs({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(kg(o)==="temporal"&&i.timeFormatType&&J(o)&&!o.timeUnit)return{text:fs({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function GQe(e){return Bl.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[eZe(n,e)]),t),{})}const YQe={bottom:"top",top:"bottom",left:"right",right:"left"};function XQe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of X(i.component.axes))n.axis[o]=RO(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=KQe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of Bl){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!me(a)){if(r[a]>0&&!l){const u=YQe[a];r[a]>r[u]&&s.set("orient",u,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function KQe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=QQe(i,o)}}}else return t.map(n=>n.clone());return e}function QQe(e,t){for(const n of ple){const r=hc(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return Coe(i,o);case"gridScale":return{explicit:i.explicit,value:rn(i.value,o.value)}}return U_(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function ZQe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(me(n.labelAngle)?n.labelAngle:C1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Rae(r,i))return!0}return e===n[t]}const JQe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function eZe(e,t){var y,v;let n=t.axis(e);const r=new UO,i=xn(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((y=s[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=s.axis)==null?void 0:v.orient)||zXe(e),l=t.getScaleComponent(e).get("type"),u=PXe(e,l,a,t.config),c=n!==void 0?!n:G4("disable",s.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=NXe(i,n,e,s.style,u),d=sse(n.formatType,i,l),h=ose(i,i.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const b of ple){const x=b in tV?tV[b](p):$U(b)?n[b]:void 0,w=x!==void 0,k=ZQe(x,b,n,t,e);if(w&&k)r.set(b,x,k);else{const{configValue:S=void 0,configFrom:C=void 0}=$U(b)&&b!=="values"?G4(b,s.style,n.style,u):{},_=S!==void 0;w&&!_?r.set(b,x,k):(C!=="vgAxisConfig"||JQe.has(b)&&_||Yv(S)||me(S))&&r.set(b,S,!1)}}const g=n.encoding??{},m=bse.reduce((b,x)=>{if(!r.hasAxisPart(x))return b;const w=zae(g[x]??{},t),k=x==="labels"?qQe(t,e,w):w;return k!==void 0&&!mt(k)&&(b[x]={update:k}),b},{});return mt(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function tZe({encoding:e,size:t}){for(const n of Bl){const r=Ci(n);ka(t[r])&&Pu(e[n])&&(delete t[r],Z(Toe(r)))}return t}const nZe={vgMark:"arc",encodeEntry:e=>({...zo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Vr("x",e,{defaultPos:"mid"}),...Vr("y",e,{defaultPos:"mid"}),...Ml(e,"radius"),...Ml(e,"theta")})},rZe={vgMark:"area",encodeEntry:e=>({...zo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...JS("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...JS("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...AO(e)})},iZe={vgMark:"rect",encodeEntry:e=>({...zo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ml(e,"x"),...Ml(e,"y")})},oZe={vgMark:"shape",encodeEntry:e=>({...zo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&J(n)&&n.type===sm?{field:ie(n,{expr:"datum"})}:{}}]}},sZe={vgMark:"image",encodeEntry:e=>({...zo(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Ml(e,"x"),...Ml(e,"y"),...EO(e,"url")})},aZe={vgMark:"line",encodeEntry:e=>({...zo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Vr("x",e,{defaultPos:"mid"}),...Vr("y",e,{defaultPos:"mid"}),...Gn("size",e,{vgChannel:"strokeWidth"}),...AO(e)})},lZe={vgMark:"trail",encodeEntry:e=>({...zo(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Vr("x",e,{defaultPos:"mid"}),...Vr("y",e,{defaultPos:"mid"}),...Gn("size",e),...AO(e)})};function VO(e,t){const{config:n}=e;return{...zo(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Vr("x",e,{defaultPos:"mid"}),...Vr("y",e,{defaultPos:"mid"}),...Gn("size",e),...Gn("angle",e),...uZe(e,n,t)}}function uZe(e,t,n){return n?{shape:{value:n}}:Gn("shape",e)}const cZe={vgMark:"symbol",encodeEntry:e=>VO(e)},fZe={vgMark:"symbol",encodeEntry:e=>VO(e,"circle")},dZe={vgMark:"symbol",encodeEntry:e=>VO(e,"square")},hZe={vgMark:"rect",encodeEntry:e=>({...zo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ml(e,"x"),...Ml(e,"y")})},pZe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...zo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...JS("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...JS("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Gn("size",e,{vgChannel:"strokeWidth"})}}},gZe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...zo(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Vr("x",e,{defaultPos:"mid"}),...Vr("y",e,{defaultPos:"mid"}),...EO(e),...Gn("size",e,{vgChannel:"fontSize"}),...Gn("angle",e),...QU("align",mZe(e.markDef,n,t)),...QU("baseline",yZe(e.markDef,n,t)),...Vr("radius",e,{defaultPos:null}),...Vr("theta",e,{defaultPos:null})}}};function mZe(e,t,n){if(gt("align",e,n)===void 0)return"center"}function yZe(e,t,n){if(gt("baseline",e,n)===void 0)return"middle"}const vZe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...zo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ml(e,i),...Vr(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:At(gt("thickness",n,t))}}},xx={arc:nZe,area:rZe,bar:iZe,circle:fZe,geoshape:oZe,image:sZe,line:aZe,point:cZe,rect:hZe,rule:pZe,square:dZe,text:gZe,tick:vZe,trail:lZe};function bZe(e){if(Le([F_,T_,$qe],e.mark)){const t=Ese(e.mark,e.encoding);if(t.length>0)return xZe(e,t)}else if(e.mark===M_){const t=R4.some(n=>gt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return wZe(e)}return WO(e)}const yV="faceted_path_";function xZe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:yV+e.requestDataName(Qt.Main),data:e.requestDataName(Qt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:WO(e,{fromPrefix:yV})}]}const vV="stack_group_";function wZe(e){var u;const[t]=WO(e,{fromPrefix:vV}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...mg(t.encode.update,["y","yc","y2","height",...R4]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...gi(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...mg(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...gi(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of R4){const f=wa(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=At(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ie(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ie(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=wa(f,e.markDef,e.config);return d!==void 0?{...c,[f]:At(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Qt.Main),name:vV+e.requestDataName(Qt.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function SZe(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!G(s)&&ks(s)&&F4(s.value)||!s&&F4(gt("order",i,o)))){if((G(s)||J(s))&&!n)return woe(s,{expr:"datum"});if(Dc(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(J(l))return{field:a}}}}function WO(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=rn(r.clip,kZe(e),CZe(e)),a=boe(r),l=i.key,u=SZe(e),c=_Ze(e),f=gt("aria",r,o),d=xx[n].postEncodingTransform?xx[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:xx[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Qt.Main)},encode:{update:xx[n].encodeEntry(e)},...d?{transform:d}:{}}]}function kZe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function CZe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function _Ze(e){if(!e.component.selection)return null;const t=X(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=X(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class gle extends cle{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,TU(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=Sa(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=cYe(s,o,{graticule:t.data&&CO(t.data)}));const l=this.encoding=pGe(t.encoding||{},a,s.filled,o);this.markDef=Gse(s,l,o),this.size=tZe({encoding:l,size:TU(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=qse(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>bO(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===Zoe,r=t&&cWe.some(i=>Fe(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return I8.reduce((r,i)=>{const o=xn(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Wn(t);return G(n)&&(i.domain=n.map(Ri)),G(r)&&(i.range=r.map(Ri)),i}initAxes(t){return Bl.reduce((n,r)=>{const i=t[r];if(Fe(i)||r===It&&Fe(t.x2)||r===zn&&Fe(t.y2)){const o=Fe(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=X(t),r={};for(const i of n){const o=t[i];r[i]=Yv(o)?voe(o):Ri(o)}return r}initLegends(t){return xWe.reduce((n,r)=>{const i=xn(t[r]);if(i&&SWe(r)){const o=i.legend;n[r]=o&&Wn(o)}return n},{})}parseData(){this.component.data=oE(this)}parseLayoutSize(){LQe(this)}parseSelections(){this.component.selection=AXe(this,this.selection)}parseMarkGroup(){this.component.mark=bZe(this)}parseAxesAndHeaders(){this.component.axes=GQe(this)}assembleSelectionTopLevelSignals(t){return ZYe(this,t)}assembleSignals(){return[...Mae(this),...KYe(this,[])]}assembleSelectionData(t){return JYe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return PO(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!fm(this.parent))&&(t=aae(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return qf(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Cs(n)}typedFieldDef(t){const n=this.fieldDef(t);return Kr(n)?n:null}}class HO extends BO{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(j_(a))return new HO(a,this,this.getName(`layer_${l}`),s,o);if(jl(a))return new gle(a,this,this.getName(`layer_${l}`),s,o);throw new Error(z8(a))})}parseData(){this.component.data=oE(this);for(const t of this.children)t.parseData()}parseLayoutSize(){NQe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of X(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){XQe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Mae(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),PO(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ae(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return eXe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Gae(this))}}function qO(e,t,n,r,i){if(D_(e))return new Sy(e,t,n,i);if(j_(e))return new HO(e,t,n,r,i);if(jl(e))return new gle(e,t,n,r,i);if(LGe(e))return new VQe(e,t,n,i);throw new Error(z8(e))}function EZe(e,t={}){t.logger&&jHe(t.logger),t.fieldTitle&&mse(t.fieldTitle);try{const n=Hse(Vg(t.config,e.config)),r=eae(e,n),i=qO(r,null,"",void 0,n);return i.parse(),KKe(i.component.data,i),{spec:AZe(i,$Ze(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&UHe(),t.fieldTitle&&oGe()}}function $Ze(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):le(t)&&(t={type:t}),i&&o&&HYe(t.type)){if(i==="step"&&o==="step")Z(hU()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";Z(hU(k_(s)));const a=s==="width"?"height":"width";t.type=qYe(a)}}return{...X(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...jU(n,!1),...jU(e,!0)}}function AZe(e,t,n={},r){const i=e.config?ZGe(e.config):void 0,o=[].concat(e.assembleSelectionData([]),PQe(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...jse(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const TZe=iWe.version,MZe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:vg,accessPathWithDatum:T8,compile:EZe,contains:Le,deepEqual:Li,deleteNestedProperty:VS,duplicate:Te,entries:cc,every:E8,fieldIntersection:A8,flatAccessWithDatum:Jie,getFirstDefined:rn,hasIntersection:$8,hasProperty:K,hash:Be,internalField:noe,isBoolean:k1,isEmpty:mt,isEqual:sWe,isInternalField:roe,isNullOrFalse:F4,isNumeric:y_,keys:X,logicalExpr:xy,mergeDeep:Qie,never:Kie,normalize:eae,normalizeAngle:C1,omit:gi,pick:mg,prefixGenerator:P4,removePathFromField:im,replaceAll:pd,replacePathInField:Oo,resetIdCounter:lWe,setEqual:Zie,some:yg,stringify:yt,titleCase:Iv,unique:ia,uniqueId:toe,vals:Zn,varName:Nt,version:TZe},Symbol.toStringTag,{value:"Module"}));function mle(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var FZe="vega-themes",PZe="2.15.0",RZe="Themes for stylized Vega and Vega-Lite visualizations.",DZe=["vega","vega-lite","themes","style"],OZe="BSD-3-Clause",NZe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},IZe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],LZe="build/vega-themes.js",GO="build/vega-themes.module.js",zZe="build/vega-themes.min.js",BZe="build/vega-themes.min.js",jZe="build/vega-themes.module.d.ts",UZe={type:"git",url:"https://github.com/vega/vega-themes.git"},VZe=["src","build"],WZe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},HZe={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},qZe={vega:"*","vega-lite":"*"},GZe={},YZe={name:FZe,version:PZe,description:RZe,keywords:DZe,license:OZe,author:NZe,contributors:IZe,main:LZe,module:GO,unpkg:zZe,jsdelivr:BZe,types:jZe,repository:UZe,files:VZe,scripts:WZe,devDependencies:HZe,peerDependencies:qZe,dependencies:GZe};const mh="#fff",bV="#888",XZe={background:"#333",view:{stroke:bV},title:{color:mh,subtitleColor:mh},style:{"guide-label":{fill:mh},"guide-title":{fill:mh}},axis:{domainColor:mh,gridColor:bV,tickColor:mh}},Vc="#4572a7",KZe={background:"#fff",arc:{fill:Vc},area:{fill:Vc},line:{stroke:Vc,strokeWidth:2},path:{stroke:Vc},rect:{fill:Vc},shape:{stroke:Vc},symbol:{fill:Vc,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Wc="#30a2da",tA="#cbcbcb",QZe="#999",ZZe="#333",xV="#f0f0f0",wV="#333",JZe={arc:{fill:Wc},area:{fill:Wc},axis:{domainColor:tA,grid:!0,gridColor:tA,gridWidth:1,labelColor:QZe,labelFontSize:10,titleColor:ZZe,tickColor:tA,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:xV,group:{fill:xV},legend:{labelColor:wV,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:wV,titleFontSize:14,titlePadding:10},line:{stroke:Wc,strokeWidth:2},path:{stroke:Wc,strokeWidth:.5},rect:{fill:Wc},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Wc},bar:{binSpacing:2,fill:Wc,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Hc="#000",eJe={group:{fill:"#e5e5e5"},arc:{fill:Hc},area:{fill:Hc},line:{stroke:Hc},path:{stroke:Hc},rect:{fill:Hc},shape:{stroke:Hc},symbol:{fill:Hc,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},tJe=22,nJe="normal",SV="Benton Gothic, sans-serif",kV=11.5,rJe="normal",qc="#82c6df",nA="Benton Gothic Bold, sans-serif",CV="normal",_V=13,Qm={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},iJe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:nA,fontSize:tJe,fontWeight:nJe},arc:{fill:qc},area:{fill:qc},line:{stroke:qc,strokeWidth:2},path:{stroke:qc},rect:{fill:qc},shape:{stroke:qc},symbol:{fill:qc,size:30},axis:{labelFont:SV,labelFontSize:kV,labelFontWeight:rJe,titleFont:nA,titleFontSize:_V,titleFontWeight:CV},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:SV,labelFontSize:kV,symbolType:"square",titleFont:nA,titleFontSize:_V,titleFontWeight:CV},range:{category:Qm["category-6"],diverging:Qm["fireandice-6"],heatmap:Qm["fire-7"],ordinal:Qm["fire-7"],ramp:Qm["fire-7"]}},Gc="#ab5787",wx="#979797",oJe={background:"#f9f9f9",arc:{fill:Gc},area:{fill:Gc},line:{stroke:Gc},path:{stroke:Gc},rect:{fill:Gc},shape:{stroke:Gc},symbol:{fill:Gc,size:30},axis:{domainColor:wx,domainWidth:.5,gridWidth:.2,labelColor:wx,tickColor:wx,tickWidth:.2,titleColor:wx},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Yc="#3e5c69",sJe={background:"#fff",arc:{fill:Yc},area:{fill:Yc},line:{stroke:Yc},path:{stroke:Yc},rect:{fill:Yc},shape:{stroke:Yc},symbol:{fill:Yc},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},ao="#1696d2",EV="#000000",aJe="#FFFFFF",Sx="Lato",rA="Lato",lJe="Lato",uJe="#DEDDDD",cJe=18,Zm={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},fJe={background:aJe,title:{anchor:"start",fontSize:cJe,font:Sx},axisX:{domain:!0,domainColor:EV,domainWidth:1,grid:!1,labelFontSize:12,labelFont:rA,labelAngle:0,tickColor:EV,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Sx},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:uJe,gridWidth:1,labelFontSize:12,labelFont:rA,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Sx,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:rA,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Sx,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Zm["six-groups-cat-1"],diverging:Zm["diverging-colors"],heatmap:Zm["diverging-colors"],ordinal:Zm["six-groups-seq"],ramp:Zm["shades-blue"]},area:{fill:ao},rect:{fill:ao},line:{color:ao,stroke:ao,strokeWidth:5},trail:{color:ao,stroke:ao,strokeWidth:0,size:1},path:{stroke:ao,strokeWidth:.5},point:{filled:!0},text:{font:lJe,color:ao,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:ao,stroke:null}},arc:{fill:ao},shape:{stroke:ao},symbol:{fill:ao,size:30}},Xc="#3366CC",$V="#ccc",kx="Arial, sans-serif",dJe={arc:{fill:Xc},area:{fill:Xc},path:{stroke:Xc},rect:{fill:Xc},shape:{stroke:Xc},symbol:{stroke:Xc},circle:{fill:Xc},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:kx,fontSize:12},"guide-title":{font:kx,fontSize:12},"group-title":{font:kx,fontSize:12}},title:{font:kx,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:$V,tickColor:$V,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},YO=e=>e*(1/3+1),AV=YO(9),TV=YO(10),MV=YO(12),Jm="Segoe UI",FV="wf_standard-font, helvetica, arial, sans-serif",PV="#252423",e0="#605E5C",RV="transparent",hJe="#C8C6C4",Ho="#118DFF",pJe="#12239E",gJe="#E66C37",mJe="#6B007B",yJe="#E044A7",vJe="#744EC2",bJe="#D9B300",xJe="#D64550",yle=Ho,vle="#DEEFFF",DV=[vle,yle],wJe=[vle,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",yle],SJe={view:{stroke:RV},background:RV,font:Jm,header:{titleFont:FV,titleFontSize:MV,titleColor:PV,labelFont:Jm,labelFontSize:TV,labelColor:e0},axis:{ticks:!1,grid:!1,domain:!1,labelColor:e0,labelFontSize:AV,titleFont:FV,titleColor:PV,titleFontSize:MV,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:hJe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ho},line:{stroke:Ho,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Jm,fontSize:AV,fill:e0},arc:{fill:Ho},area:{fill:Ho,line:!0,opacity:.6},path:{stroke:Ho},rect:{fill:Ho},point:{fill:Ho,filled:!0,size:75},shape:{stroke:Ho},symbol:{fill:Ho,strokeWidth:1.5,size:50},legend:{titleFont:Jm,titleFontWeight:"bold",titleColor:e0,labelFont:Jm,labelFontSize:TV,labelColor:e0,symbolType:"circle",symbolSize:75},range:{category:[Ho,pJe,gJe,mJe,yJe,vJe,bJe,xJe],diverging:DV,heatmap:DV,ordinal:wJe}},iA='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',kJe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',oA=400,Cx={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},CJe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],_Je=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function sE({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=Cx.gridBg[e],i=Cx.textPrimary[e],o=Cx.textSecondary[e],s=n==="dark"?CJe:_Je,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:iA,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:kJe,labelFontWeight:oA,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Cx.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:iA,fill:o,fontWeight:oA},"guide-title":{font:iA,fill:o,fontWeight:oA}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const EJe=sE({theme:"white",background:"#ffffff"}),$Je=sE({theme:"g10",background:"#f4f4f4"}),AJe=sE({theme:"g90",background:"#262626"}),TJe=sE({theme:"g100",background:"#161616"}),MJe=YZe.version,FJe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:$Je,carbong100:TJe,carbong90:AJe,carbonwhite:EJe,dark:XZe,excel:KZe,fivethirtyeight:JZe,ggplot2:eJe,googlecharts:dJe,latimes:iJe,powerbi:SJe,quartz:oJe,urbaninstitute:fJe,version:MJe,vox:sJe},Symbol.toStringTag,{value:"Module"}));function PJe(e,t,n,r){if(G(e))return`[${e.map(i=>t(le(i)?i:OV(i,n))).join(", ")}]`;if(se(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(se(c)&&(c=OV(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function RJe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function OV(e,t){return JSON.stringify(e,RJe(t))}var DJe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const ble="vg-tooltip-element",OJe={offsetX:10,offsetY:10,id:ble,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:NJe,maxDepth:2,formatTooltip:PJe,baseURL:""};function NJe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function IJe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return DJe.toString().replace(ble,e)}function LJe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class zJe{constructor(t){this.options={...OJe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=IJe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=LJe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var sA={};function BJe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class jJe{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var UJe=jJe;const VJe=Object.freeze({loose:!0}),WJe=Object.freeze({}),HJe=e=>e?typeof e!="object"?VJe:e:WJe;var XO=HJe,rM={exports:{}};const qJe="2.0.0",xle=256,GJe=Number.MAX_SAFE_INTEGER||9007199254740991,YJe=16,XJe=xle-6,KJe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var KO={MAX_LENGTH:xle,MAX_SAFE_COMPONENT_LENGTH:YJe,MAX_SAFE_BUILD_LENGTH:XJe,MAX_SAFE_INTEGER:GJe,RELEASE_TYPES:KJe,SEMVER_SPEC_VERSION:qJe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const QJe=typeof process=="object"&&sA&&sA.NODE_DEBUG&&/\bsemver\b/i.test(sA.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var aE=QJe;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=KO,o=aE;t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=g=>{for(const[m,y]of d)g=g.split(`${m}*`).join(`${m}{0,${y}}`).split(`${m}+`).join(`${m}{1,${y}}`);return g},p=(g,m,y)=>{const v=h(m),b=c++;o(g,b,m),u[g]=b,l[b]=m,s[b]=new RegExp(m,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(rM,rM.exports);var QO=rM.exports;const NV=/^[0-9]+$/,wle=(e,t)=>{const n=NV.test(e),r=NV.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},ZJe=(e,t)=>wle(t,e);var JJe={compareIdentifiers:wle,rcompareIdentifiers:ZJe};const _x=aE,{MAX_LENGTH:IV,MAX_SAFE_INTEGER:Ex}=KO,{safeRe:LV,t:zV}=QO,eet=XO,{compareIdentifiers:yh}=JJe;let tet=class Bs{constructor(t,n){if(n=eet(n),t instanceof Bs){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>IV)throw new TypeError(`version is longer than ${IV} characters`);_x("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?LV[zV.LOOSE]:LV[zV.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ex||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ex||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ex||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<Ex)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(_x("SemVer.compare",this.version,this.options,t),!(t instanceof Bs)){if(typeof t=="string"&&t===this.version)return 0;t=new Bs(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Bs||(t=new Bs(t,this.options)),yh(this.major,t.major)||yh(this.minor,t.minor)||yh(this.patch,t.patch)}comparePre(t){if(t instanceof Bs||(t=new Bs(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(_x("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return yh(r,i)}while(++n)}compareBuild(t){t instanceof Bs||(t=new Bs(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(_x("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return yh(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),yh(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var ZO=tet;const BV=ZO,net=(e,t,n)=>new BV(e,n).compare(new BV(t,n));var dm=net;const ret=dm,iet=(e,t,n)=>ret(e,t,n)===0;var oet=iet;const set=dm,aet=(e,t,n)=>set(e,t,n)!==0;var uet=aet;const cet=dm,fet=(e,t,n)=>cet(e,t,n)>0;var det=fet;const het=dm,pet=(e,t,n)=>het(e,t,n)>=0;var get=pet;const met=dm,yet=(e,t,n)=>met(e,t,n)<0;var vet=yet;const bet=dm,xet=(e,t,n)=>bet(e,t,n)<=0;var wet=xet;const ket=oet,Cet=uet,_et=det,Eet=get,$et=vet,Aet=wet,Tet=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return ket(e,n,r);case"!=":return Cet(e,n,r);case">":return _et(e,n,r);case">=":return Eet(e,n,r);case"<":return $et(e,n,r);case"<=":return Aet(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Met=Tet,aA,jV;function Fet(){if(jV)return aA;jV=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}aA=t;const n=XO,{safeRe:r,t:i}=QO,o=Met,s=aE,a=ZO,l=Sle();return aA}var lA,UV;function Sle(){if(UV)return lA;UV=1;class e{constructor(R,P){if(P=r(P),R instanceof e)return R.loose===!!P.loose&&R.includePrerelease===!!P.includePrerelease?R:new e(R.raw,P);if(R instanceof i)return this.raw=R.value,this.set=[[R]],this.format(),this;if(this.options=P,this.loose=!!P.loose,this.includePrerelease=!!P.includePrerelease,this.raw=R.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(I=>!p(I[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const I of this.set)if(I.length===1&&g(I[0])){this.set=[I];break}}}this.format()}format(){return this.range=this.set.map(R=>R.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(R){const D=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+R,I=n.get(D);if(I)return I;const O=this.options.loose,j=O?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];R=R.replace(j,A(this.options.includePrerelease)),o("hyphen replace",R),R=R.replace(a[l.COMPARATORTRIM],u),o("comparator trim",R),R=R.replace(a[l.TILDETRIM],c),o("tilde trim",R),R=R.replace(a[l.CARETTRIM],f),o("caret trim",R);let Y=R.split(" ").map(we=>y(we,this.options)).join(" ").split(/\s+/).map(we=>$(we,this.options));O&&(Y=Y.filter(we=>(o("loose invalid filter",we,this.options),!!we.match(a[l.COMPARATORLOOSE])))),o("range list",Y);const W=new Map,oe=Y.map(we=>new i(we,this.options));for(const we of oe){if(p(we))return[we];W.set(we.value,we)}W.size>1&&W.has("")&&W.delete("");const re=[...W.values()];return n.set(D,re),re}intersects(R,P){if(!(R instanceof e))throw new TypeError("a Range is required");return this.set.some(D=>m(D,P)&&R.set.some(I=>m(I,P)&&D.every(O=>I.every(j=>O.intersects(j,P)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new s(R,this.options)}catch{return!1}for(let P=0;P<this.set.length;P++)if(N(this.set[P],R,this.options))return!0;return!1}}lA=e;const t=UJe,n=new t,r=XO,i=Fet(),o=aE,s=ZO,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:f}=QO,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=KO,p=M=>M.value==="<0.0.0-0",g=M=>M.value==="",m=(M,R)=>{let P=!0;const D=M.slice();let I=D.pop();for(;P&&D.length;)P=D.every(O=>I.intersects(O,R)),I=D.pop();return P},y=(M,R)=>(o("comp",M,R),M=w(M,R),o("caret",M),M=b(M,R),o("tildes",M),M=S(M,R),o("xrange",M),M=_(M,R),o("stars",M),M),v=M=>!M||M.toLowerCase()==="x"||M==="*",b=(M,R)=>M.trim().split(/\s+/).map(P=>x(P,R)).join(" "),x=(M,R)=>{const P=R.loose?a[l.TILDELOOSE]:a[l.TILDE];return M.replace(P,(D,I,O,j,Y)=>{o("tilde",M,D,I,O,j,Y);let W;return v(I)?W="":v(O)?W=`>=${I}.0.0 <${+I+1}.0.0-0`:v(j)?W=`>=${I}.${O}.0 <${I}.${+O+1}.0-0`:Y?(o("replaceTilde pr",Y),W=`>=${I}.${O}.${j}-${Y} <${I}.${+O+1}.0-0`):W=`>=${I}.${O}.${j} <${I}.${+O+1}.0-0`,o("tilde return",W),W})},w=(M,R)=>M.trim().split(/\s+/).map(P=>k(P,R)).join(" "),k=(M,R)=>{o("caret",M,R);const P=R.loose?a[l.CARETLOOSE]:a[l.CARET],D=R.includePrerelease?"-0":"";return M.replace(P,(I,O,j,Y,W)=>{o("caret",M,I,O,j,Y,W);let oe;return v(O)?oe="":v(j)?oe=`>=${O}.0.0${D} <${+O+1}.0.0-0`:v(Y)?O==="0"?oe=`>=${O}.${j}.0${D} <${O}.${+j+1}.0-0`:oe=`>=${O}.${j}.0${D} <${+O+1}.0.0-0`:W?(o("replaceCaret pr",W),O==="0"?j==="0"?oe=`>=${O}.${j}.${Y}-${W} <${O}.${j}.${+Y+1}-0`:oe=`>=${O}.${j}.${Y}-${W} <${O}.${+j+1}.0-0`:oe=`>=${O}.${j}.${Y}-${W} <${+O+1}.0.0-0`):(o("no pr"),O==="0"?j==="0"?oe=`>=${O}.${j}.${Y}${D} <${O}.${j}.${+Y+1}-0`:oe=`>=${O}.${j}.${Y}${D} <${O}.${+j+1}.0-0`:oe=`>=${O}.${j}.${Y} <${+O+1}.0.0-0`),o("caret return",oe),oe})},S=(M,R)=>(o("replaceXRanges",M,R),M.split(/\s+/).map(P=>C(P,R)).join(" ")),C=(M,R)=>{M=M.trim();const P=R.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return M.replace(P,(D,I,O,j,Y,W)=>{o("xRange",M,D,I,O,j,Y,W);const oe=v(O),re=oe||v(j),we=re||v(Y),Re=we;return I==="="&&Re&&(I=""),W=R.includePrerelease?"-0":"",oe?I===">"||I==="<"?D="<0.0.0-0":D="*":I&&Re?(re&&(j=0),Y=0,I===">"?(I=">=",re?(O=+O+1,j=0,Y=0):(j=+j+1,Y=0)):I==="<="&&(I="<",re?O=+O+1:j=+j+1),I==="<"&&(W="-0"),D=`${I+O}.${j}.${Y}${W}`):re?D=`>=${O}.0.0${W} <${+O+1}.0.0-0`:we&&(D=`>=${O}.${j}.0${W} <${O}.${+j+1}.0-0`),o("xRange return",D),D})},_=(M,R)=>(o("replaceStars",M,R),M.trim().replace(a[l.STAR],"")),$=(M,R)=>(o("replaceGTE0",M,R),M.trim().replace(a[R.includePrerelease?l.GTE0PRE:l.GTE0],"")),A=M=>(R,P,D,I,O,j,Y,W,oe,re,we,Re)=>(v(D)?P="":v(I)?P=`>=${D}.0.0${M?"-0":""}`:v(O)?P=`>=${D}.${I}.0${M?"-0":""}`:j?P=`>=${P}`:P=`>=${P}${M?"-0":""}`,v(oe)?W="":v(re)?W=`<${+oe+1}.0.0-0`:v(we)?W=`<${oe}.${+re+1}.0-0`:Re?W=`<=${oe}.${re}.${we}-${Re}`:M?W=`<${oe}.${re}.${+we+1}-0`:W=`<=${W}`,`${P} ${W}`.trim()),N=(M,R,P)=>{for(let D=0;D<M.length;D++)if(!M[D].test(R))return!1;if(R.prerelease.length&&!P.includePrerelease){for(let D=0;D<M.length;D++)if(o(M[D].semver),M[D].semver!==i.ANY&&M[D].semver.prerelease.length>0){const I=M[D].semver;if(I.major===R.major&&I.minor===R.minor&&I.patch===R.patch)return!0}return!1}return!0};return lA}const Pet=Sle(),Ret=(e,t,n)=>{try{t=new Pet(t,n)}catch{return!1}return t.test(e)};var Det=Ret,kle=BJe(Det);function Oet(e,t,n){const r=e.open(t),i=1e4,o=250,{origin:s}=new URL(t);let a=~~(i/o);function l(c){c.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,s),setTimeout(u,o),a-=1)}setTimeout(u,o)}var Net=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Cle(e,...t){for(const n of t)Iet(e,n);return e}function Iet(e,t){for(const n of Object.keys(t))Wg(e,n,t[n],!0)}const Yo=CVe;let T1=MZe;const $x=typeof window<"u"?window:void 0;var EW;T1===void 0&&((EW=$x==null?void 0:$x.vl)!=null&&EW.compile)&&(T1=$x.vl);const Let={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},zet={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},z0={vega:"Vega","vega-lite":"Vega-Lite"},rk={vega:Yo.version,"vega-lite":T1?T1.version:"not available"},Bet={vega:e=>e,"vega-lite":(e,t)=>T1.compile(e,{config:t}).spec},jet=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Uet="chart-wrapper";function Vet(e){return typeof e=="function"}function VV(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${z0[r]} JSON Source`}function Wet(e,t){if(e.$schema){const n=mle(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${z0[n.library]}, but mode argument sets ${z0[t]??t}.`);const r=n.library;return kle(rk[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${z0[r]} ${n.version}, but the current version of ${z0[r]} is v${rk[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function _le(e){return!!(e&&"load"in e)}function WV(e){return _le(e)?e:Yo.loader(e)}function Het(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return le(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Ele(e,t,n={}){let r,i;le(t)?(i=WV(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=Het(r),s=o.loader;(!i||s)&&(i=WV(n.loader??s));const a=await HV(o,i),l=await HV(n,i),u={...Cle(l,a),config:Vg(l.config??{},a.config??{})};return await Get(e,r,u,i)}async function HV(e,t){const n=le(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=le(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function qet(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Get(e,t,n={},r){const i=n.theme?Vg(FJe[n.theme],n.config??{}):n.config,o=wc(n.actions)?n.actions:Cle({},Let,n.actions??{}),s={...zet,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??Yo.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const w="vega-embed-style",{root:k,rootContainer:S}=qet(c);if(!k.getElementById(w)){const C=document.createElement("style");C.id=w,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Net.toString():n.defaultStyle,S.appendChild(C)}}const f=Wet(t,n.mode);let d=Bet[f](t,i);if(f==="vega-lite"&&d.$schema){const w=mle(d.$schema);kle(rk.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${rk.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const w=document.createElement("div");w.classList.add(Uet),c.appendChild(w),h=w}const p=n.patch;if(p&&(d=p instanceof Function?p(d):sC(d,p,!0,!1).newDocument),n.formatLocale&&Yo.formatLocale(n.formatLocale),n.timeFormatLocale&&Yo.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const k=n.expressionFunctions[w];"fn"in k?Yo.expressionFunction(w,k.fn,k.visitor):k instanceof Function&&Yo.expressionFunction(w,k)}const{ast:g}=n,m=Yo.parse(d,f==="vega-lite"?{}:i,{ast:g}),y=new(n.viewClass||Yo.View)(m,{loader:r,logLevel:l,renderer:a,...g?{expr:Yo.expressionInterpreter??n.expr??DVe}:{}});if(y.addSignalListener("autosize",(w,k)=>{const{type:S}=k;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:w,tooltip:k}=n,S=w&&!_le(w)?w==null?void 0:w.baseURL:void 0,C=Vet(k)?k:new zJe({baseURL:S,...k===!0?{}:k}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:w,updateSet:k}=typeof v=="boolean"?{}:v;y.hover(w,k)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(o!==!1){let w=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=s.CLICK_TO_VIEW_ACTIONS,c.append(S),w=S;const C=document.createElement("summary");C.innerHTML=jet,S.append(C),b=_=>{S.contains(_.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const k=document.createElement("div");if(w.append(k),k.classList.add("vega-actions"),o===!0||o.export!==!1){for(const S of["svg","png"])if(o===!0||o.export===!0||o.export[S]){const C=s[`${S.toUpperCase()}_ACTION`],_=document.createElement("a"),$=se(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;_.text=C,_.href="#",_.target="_blank",_.download=`${u}.${S}`,_.addEventListener("mousedown",async function(A){A.preventDefault();const N=await y.toImageURL(S,$);this.href=N}),k.append(_)}}if(o===!0||o.source!==!1){const S=document.createElement("a");S.text=s.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){VV(B$(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),k.append(S)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const S=document.createElement("a");S.text=s.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){VV(B$(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),k.append(S)}if(o===!0||o.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=s.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(_){Oet(window,S,{config:i,mode:p?"vega":f,renderer:a,spec:B$(p?d:t)}),_.preventDefault()}),k.append(C)}}function x(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:x,embedOptions:n}}async function Yet(e,t){if(!("mark"in e)||!e||!t)return;const n={disable:!0,title:"",grid:!1,ticks:!1,labels:!1},r={...e,width:100,height:100,config:{...e.config,mark:{strokeWidth:e.mark==="line"?4:0},legend:{disable:!0},axis:{disable:!0},style:{view:{stroke:"transparent"},cell:{stroke:"transparent"}}},data:{values:t},background:"transparent",title:void 0,encoding:Object.fromEntries(Object.entries(e.encoding??{}).map(([o,s])=>[o,{...s,legend:null,axis:n}]))};return(await(await Ele(document.createElement("div"),r,{actions:!1}).then(o=>o.view)).toCanvas()).toDataURL()}function Xet(e){try{return new URL(e),!0}catch{return!1}}function Ket(e){try{const n=new URL(e).pathname.split("/"),r=n[n.length-1];return decodeURIComponent(r)}catch{throw new Error("Invalid URL")}}const Qet={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},qV=e=>{let t;const n=new Set,r=(c,f)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(p=>p(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(Qet?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},Zet=e=>e?qV(e):qV;var $le={exports:{}},Ale={},Tle={exports:{}},Mle={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg=F;function Jet(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ett=typeof Object.is=="function"?Object.is:Jet,ttt=Pg.useState,ntt=Pg.useEffect,rtt=Pg.useLayoutEffect,itt=Pg.useDebugValue;function ott(e,t){var n=t(),r=ttt({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return rtt(function(){i.value=n,i.getSnapshot=t,uA(i)&&o({inst:i})},[e,n,t]),ntt(function(){return uA(i)&&o({inst:i}),e(function(){uA(i)&&o({inst:i})})},[e]),itt(n),n}function uA(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ett(e,n)}catch{return!0}}function stt(e,t){return t()}var att=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?stt:ott;Mle.useSyncExternalStore=Pg.useSyncExternalStore!==void 0?Pg.useSyncExternalStore:att;Tle.exports=Mle;var ltt=Tle.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE=F,utt=ltt;function ctt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ftt=typeof Object.is=="function"?Object.is:ctt,dtt=utt.useSyncExternalStore,htt=lE.useRef,ptt=lE.useEffect,gtt=lE.useMemo,mtt=lE.useDebugValue;Ale.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=htt(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=gtt(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&s.hasValue){var p=s.value;if(i(p,h))return f=p}return f=h}if(p=f,ftt(c,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(c=h,f=g)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,i]);var a=dtt(e,o[0],o[1]);return ptt(function(){s.hasValue=!0,s.value=a},[a]),mtt(a),a};$le.exports=Ale;var ytt=$le.exports;const vtt=Fl(ytt),Fle={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:btt}=zi,{useSyncExternalStoreWithSelector:xtt}=vtt;let GV=!1;const wtt=e=>e;function Stt(e,t=wtt,n){(Fle?"production":void 0)!=="production"&&n&&!GV&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),GV=!0);const r=xtt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return btt(r),r}const YV=e=>{(Fle?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Zet(e):e,n=(r,i)=>Stt(t,r,i);return Object.assign(n,t),n},uE=e=>e?YV(e):YV,F2={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},iM=new Map,Ax=e=>{const t=iM.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},ktt=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=iM.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return iM.set(n.name,i),{type:"tracked",store:e,...i}},Ctt=(e,t={})=>(n,r,i)=>{const{enabled:o,anonymousActionType:s,store:a,...l}=t;let u;try{u=(o??(F2?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(F2?"production":void 0)!=="production"&&o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,i);const{connection:c,...f}=ktt(a,u,l);let d=!0;i.setState=(g,m,y)=>{const v=n(g,m);if(!d)return v;const b=y===void 0?{type:s||"anonymous"}:typeof y=="string"?{type:y}:y;return a===void 0?(c==null||c.send(b,r()),v):(c==null||c.send({...b,type:`${a}/${b.type}`},{...Ax(l.name),[a]:i.getState()}),v)};const h=(...g)=>{const m=d;d=!1,n(...g),d=m},p=e(i.setState,r,i);if(f.type==="untracked"?c==null||c.init(p):(f.stores[f.store]=i,c==null||c.init(Object.fromEntries(Object.entries(f.stores).map(([g,m])=>[g,g===f.store?p:m.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let g=!1;const m=i.dispatch;i.dispatch=(...y)=>{(F2?"production":void 0)!=="production"&&y[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),m(...y)}}return c.subscribe(g=>{var m;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return cA(g.payload,y=>{if(y.type==="__setState"){if(a===void 0){h(y.state);return}Object.keys(y.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const v=y.state[a];if(v==null)return;JSON.stringify(i.getState())!==JSON.stringify(v)&&h(v);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(y)});case"DISPATCH":switch(g.payload.type){case"RESET":return h(p),a===void 0?c==null?void 0:c.init(i.getState()):c==null?void 0:c.init(Ax(l.name));case"COMMIT":if(a===void 0){c==null||c.init(i.getState());return}return c==null?void 0:c.init(Ax(l.name));case"ROLLBACK":return cA(g.state,y=>{if(a===void 0){h(y),c==null||c.init(i.getState());return}h(y[a]),c==null||c.init(Ax(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return cA(g.state,y=>{if(a===void 0){h(y);return}JSON.stringify(i.getState())!==JSON.stringify(y[a])&&h(y[a])});case"IMPORT_STATE":{const{nextLiftedState:y}=g.payload,v=(m=y.computedStates.slice(-1)[0])==null?void 0:m.state;if(!v)return;h(a===void 0?v:v[a]),c==null||c.send(null,y);return}case"PAUSE_RECORDING":return d=!d}return}}),p},JO=Ctt,cA=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function _tt(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var o;const s=l=>l===null?null:JSON.parse(l,void 0),a=(o=n.getItem(i))!=null?o:null;return a instanceof Promise?a.then(s):s(a)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>n.removeItem(i)}}const M1=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return M1(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return M1(r)(n)}}}},Ett=(e,t)=>(n,r,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,y)=>({...y,...m}),...t},s=!1;const a=new Set,l=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...m)},r,i);const c=M1(o.serialize),f=()=>{const m=o.partialize({...r()});let y;const v=c({state:m,version:o.version}).then(b=>u.setItem(o.name,b)).catch(b=>{y=b});if(y)throw y;return v},d=i.setState;i.setState=(m,y)=>{d(m,y),f()};const h=e((...m)=>{n(...m),f()},r,i);let p;const g=()=>{var m;if(!u)return;s=!1,a.forEach(v=>v(r()));const y=((m=o.onRehydrateStorage)==null?void 0:m.call(o,r()))||void 0;return M1(u.getItem.bind(u))(o.name).then(v=>{if(v)return o.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return o.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var b;return p=o.merge(v,(b=r())!=null?b:h),n(p,!0),f()}).then(()=>{y==null||y(p,void 0),s=!0,l.forEach(v=>v(p))}).catch(v=>{y==null||y(void 0,v)})};return i.persist={setOptions:m=>{o={...o,...m},m.getStorage&&(u=m.getStorage())},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},g(),p||h},$tt=(e,t)=>(n,r,i)=>{let o={storage:_tt(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...t},s=!1;const a=new Set,l=new Set;let u=o.storage;if(!u)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...g)},r,i);const c=()=>{const g=o.partialize({...r()});return u.setItem(o.name,{state:g,version:o.version})},f=i.setState;i.setState=(g,m)=>{f(g,m),c()};const d=e((...g)=>{n(...g),c()},r,i);i.getInitialState=()=>d;let h;const p=()=>{var g,m;if(!u)return;s=!1,a.forEach(v=>{var b;return v((b=r())!=null?b:d)});const y=((m=o.onRehydrateStorage)==null?void 0:m.call(o,(g=r())!=null?g:d))||void 0;return M1(u.getItem.bind(u))(o.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return[!0,o.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[x,w]=v;if(h=o.merge(w,(b=r())!=null?b:d),n(h,!0),x)return c()}).then(()=>{y==null||y(h,void 0),h=r(),s=!0,l.forEach(v=>v(h))}).catch(v=>{y==null||y(void 0,v)})};return i.persist={setOptions:g=>{o={...o,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},o.skipHydration||p(),h||d},Att=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((F2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Ett(e,t)):$tt(e,t),Ttt=Att,Mtt={json:CEe,csv:MP},vp=uE(JO(e=>({filename:null,fileBuffer:null,data:void 0,schema:null,loading:!1,loadData:async t=>{e({loading:!0,filename:null,fileBuffer:null,data:void 0,schema:null});const n=t instanceof File?t.name:Ket(t),r=n.split(".").pop(),o=await(await j3(t)).arrayBuffer(),s=new Uint8Array(o),a=await $P(o,Mtt[r],{worker:!0,fetch:{mode:"no-cors"}});e({filename:n,fileBuffer:s,data:a,schema:a.schema,loading:!1})}}))),oM=uE()(e=>({drawerExpanded:!0,setDrawerExpanded:t=>e({drawerExpanded:t})})),ri={black:"#000000",white:"#FFFFFF","blackAlpha.50":"rgba(0, 0, 0, 0.04)","blackAlpha.100":"rgba(0, 0, 0, 0.06)","blackAlpha.200":"rgba(0, 0, 0, 0.08)","blackAlpha.300":"rgba(0, 0, 0, 0.16)","blackAlpha.400":"rgba(0, 0, 0, 0.24)","blackAlpha.500":"rgba(0, 0, 0, 0.36)","blackAlpha.600":"rgba(0, 0, 0, 0.48)","blackAlpha.700":"rgba(0, 0, 0, 0.64)","blackAlpha.800":"rgba(0, 0, 0, 0.80)","blackAlpha.900":"rgba(0, 0, 0, 0.92)","whiteAlpha.50":"rgba(255, 255, 255, 0.04)","whiteAlpha.100":"rgba(255, 255, 255, 0.06)","whiteAlpha.200":"rgba(255, 255, 255, 0.08)","whiteAlpha.300":"rgba(255, 255, 255, 0.16)","whiteAlpha.400":"rgba(255, 255, 255, 0.24)","whiteAlpha.500":"rgba(255, 255, 255, 0.36)","whiteAlpha.600":"rgba(255, 255, 255, 0.48)","whiteAlpha.700":"rgba(255, 255, 255, 0.64)","whiteAlpha.800":"rgba(255, 255, 255, 0.80)","whiteAlpha.900":"rgba(255, 255, 255, 0.92)","gray.50":"#F7FAFC","gray.100":"#EDF2F7","gray.200":"#E2E8F0","gray.300":"#CBD5E0","gray.400":"#A0AEC0","gray.500":"#718096","gray.600":"#4A5568","gray.700":"#2D3748","gray.800":"#1A202C","gray.900":"#171923","red.50":"#FFF5F5","red.100":"#FED7D7","red.200":"#FEB2B2","red.300":"#FC8181","red.400":"#F56565","red.500":"#E53E3E","red.600":"#C53030","red.700":"#9B2C2C","red.800":"#822727","red.900":"#63171B","orange.50":"#FFFAF0","orange.100":"#FEEBC8","orange.200":"#FBD38D","orange.300":"#F6AD55","orange.400":"#ED8936","orange.500":"#DD6B20","orange.600":"#C05621","orange.700":"#9C4221","orange.800":"#7B341E","orange.900":"#652B19","yellow.50":"#FFFFF0","yellow.100":"#FEFCBF","yellow.200":"#FAF089","yellow.300":"#F6E05E","yellow.400":"#ECC94B","yellow.500":"#D69E2E","yellow.600":"#B7791F","yellow.700":"#975A16","yellow.800":"#744210","yellow.900":"#5F370E","green.50":"#F0FFF4","green.100":"#C6F6D5","green.200":"#9AE6B4","green.300":"#68D391","green.400":"#48BB78","green.500":"#38A169","green.600":"#2F855A","green.700":"#276749","green.800":"#22543D","green.900":"#1C4532","teal.50":"#E6FFFA","teal.100":"#B2F5EA","teal.200":"#81E6D9","teal.300":"#4FD1C5","teal.400":"#38B2AC","teal.500":"#319795","teal.600":"#2C7A7B","teal.700":"#285E61","teal.800":"#234E52","teal.900":"#1D4044","blue.50":"#EBF8FF","blue.100":"#BEE3F8","blue.200":"#90CDF4","blue.300":"#63B3ED","blue.400":"#4299E1","blue.500":"#3182CE","blue.600":"#2B6CB0","blue.700":"#2C5282","blue.800":"#2A4365","blue.900":"#1A365D","cyan.50":"#EDFDFD","cyan.100":"#C4F1F9","cyan.200":"#9DECF9","cyan.300":"#76E4F7","cyan.400":"#0BC5EA","cyan.500":"#00B5D8","cyan.600":"#00A3C4","cyan.700":"#0987A0","cyan.800":"#086F83","cyan.900":"#065666","purple.50":"#FAF5FF","purple.100":"#E9D8FD","purple.200":"#D6BCFA","purple.300":"#B794F4","purple.400":"#9F7AEA","purple.500":"#805AD5","purple.600":"#6B46C1","purple.700":"#553C9A","purple.800":"#44337A","purple.900":"#322659","pink.50":"#FFF5F7","pink.100":"#FED7E2","pink.200":"#FBB6CE","pink.300":"#F687B3","pink.400":"#ED64A6","pink.500":"#D53F8C","pink.600":"#B83280","pink.700":"#97266D","pink.800":"#702459","pink.900":"#521B41"},XV=[{name:"Barley",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/barley.json"},{name:"Cars",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/cars.json"},{name:"Crimea",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/crimea.json"},{name:"Jobs",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/jobs.json"},{name:"Population",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/population.json"},{name:"Movies",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/movies.json"},{name:"Birdstrikes",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/birdstrikes.csv"},{name:"Burtin",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/burtin.json"}],KV=50,Ftt=50,Ptt=1,Rr="orange",Ru={50:ri[`${Rr}.50`],100:ri[`${Rr}.100`],200:ri[`${Rr}.200`],300:ri[`${Rr}.300`],400:ri[`${Rr}.400`],500:ri[`${Rr}.500`],600:ri[`${Rr}.600`],700:ri[`${Rr}.700`],800:ri[`${Rr}.800`],900:ri[`${Rr}.900`]},QV="table";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ple=Symbol("Comlink.proxy"),Rtt=Symbol("Comlink.endpoint"),Rle=Symbol("Comlink.releaseProxy"),fA=Symbol("Comlink.finalizer"),P2=Symbol("Comlink.thrown"),Dle=e=>typeof e=="object"&&e!==null||typeof e=="function",Dtt={canHandle:e=>Dle(e)&&e[Ple],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Nle(e,t),[n,[n]]},deserialize(e){return e.start(),Lle(e)}},Ott={canHandle:e=>Dle(e)&&P2 in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Ole=new Map([["proxy",Dtt],["throw",Ott]]);function Ntt(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function Nle(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(i){if(!i||!i.data)return;if(!Ntt(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:o,type:s,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(gf);let u;try{const c=a.slice(0,-1).reduce((d,h)=>d[h],e),f=a.reduce((d,h)=>d[h],e);switch(s){case"GET":u=f;break;case"SET":c[a.slice(-1)[0]]=gf(i.data.value),u=!0;break;case"APPLY":u=f.apply(c,l);break;case"CONSTRUCT":{const d=new f(...l);u=Utt(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;Nle(e,h),u=jtt(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[P2]:0}}Promise.resolve(u).catch(c=>({value:c,[P2]:0})).then(c=>{const[f,d]=sk(c);t.postMessage(Object.assign(Object.assign({},f),{id:o}),d),s==="RELEASE"&&(t.removeEventListener("message",r),Ile(t),fA in e&&typeof e[fA]=="function"&&e[fA]())}).catch(c=>{const[f,d]=sk({value:new TypeError("Unserializable return value"),[P2]:0});t.postMessage(Object.assign(Object.assign({},f),{id:o}),d)})}),t.start&&t.start()}function Itt(e){return e.constructor.name==="MessagePort"}function Ile(e){Itt(e)&&e.close()}function Lle(e,t){return sM(e,[],t)}function Tx(e){if(e)throw new Error("Proxy has been released and is not useable")}function zle(e){return wh(e,{type:"RELEASE"}).then(()=>{Ile(e)})}const ik=new WeakMap,ok="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(ik.get(e)||0)-1;ik.set(e,t),t===0&&zle(e)});function Ltt(e,t){const n=(ik.get(t)||0)+1;ik.set(t,n),ok&&ok.register(e,t,e)}function ztt(e){ok&&ok.unregister(e)}function sM(e,t=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(o,s){if(Tx(r),s===Rle)return()=>{ztt(i),zle(e),r=!0};if(s==="then"){if(t.length===0)return{then:()=>i};const a=wh(e,{type:"GET",path:t.map(l=>l.toString())}).then(gf);return a.then.bind(a)}return sM(e,[...t,s])},set(o,s,a){Tx(r);const[l,u]=sk(a);return wh(e,{type:"SET",path:[...t,s].map(c=>c.toString()),value:l},u).then(gf)},apply(o,s,a){Tx(r);const l=t[t.length-1];if(l===Rtt)return wh(e,{type:"ENDPOINT"}).then(gf);if(l==="bind")return sM(e,t.slice(0,-1));const[u,c]=ZV(a);return wh(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},c).then(gf)},construct(o,s){Tx(r);const[a,l]=ZV(s);return wh(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:a},l).then(gf)}});return Ltt(i,e),i}function Btt(e){return Array.prototype.concat.apply([],e)}function ZV(e){const t=e.map(sk);return[t.map(n=>n[0]),Btt(t.map(n=>n[1]))]}const Ble=new WeakMap;function jtt(e,t){return Ble.set(e,t),e}function Utt(e){return Object.assign(e,{[Ple]:!0})}function sk(e){for(const[t,n]of Ole)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},Ble.get(e)||[]]}function gf(e){switch(e.type){case"HANDLER":return Ole.get(e.name).deserialize(e.value);case"RAW":return e.value}}function wh(e,t,n){return new Promise(r=>{const i=Vtt();e.addEventListener("message",function o(s){!s.data||!s.data.id||s.data.id!==i||(e.removeEventListener("message",o),r(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)})}function Vtt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function Wtt(e){return new Worker("/Swipytics/assets/pyodide-worker-BBSifKST.js",{type:"module",name:e==null?void 0:e.name})}let ho=null,pr=null;const Htt=async(e,t)=>{if(!ho||!pr)throw new Error("pyodide isn't loaded yet");return await pr.runPython(e,t)},qtt=async(e,t)=>{if(!ho||!pr)throw new Error("pyodide isn't loaded yet");return pr.callPythonFunction(e,t)},Gtt=async(e,t)=>{if(!ho||!pr)throw new Error("pyodide isn't loaded yet");return pr.writeFile(e,t)},Ytt=async e=>{if(!ho||!pr)throw new Error("pyodide isn't loaded yet");return pr.readFile(e)},Xtt=async e=>(ho||(ho=new Wtt({name:"pyodide-worker"}),pr=Lle(ho),await pr.initialize(e)),{runPython:Htt,callPythonFunction:qtt,writeFile:Gtt,readFile:Ytt,terminate:()=>{ho==null||ho.terminate(),ho=null,pr==null||pr[Rle](),pr=null},initialize:async t=>{if(!ho||!pr)throw new Error("pyodide isn't loaded yet");await pr.initialize(t)}});let ky;async function Ktt(e){const{packages:t}=e||{};return ky===void 0&&(ky=await Qtt(t)),ky}const Qtt=async e=>(ky=await Xtt(e),ky),e9=async()=>await Ktt({packages:["draco"]});var jle=Symbol.for("immer-nothing"),JV=Symbol.for("immer-draftable"),Zi=Symbol.for("immer-state");function ss(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Rg=Object.getPrototypeOf;function Dg(e){return!!e&&!!e[Zi]}function kd(e){var t;return e?Ule(e)||Array.isArray(e)||!!e[JV]||!!((t=e.constructor)!=null&&t[JV])||fE(e)||dE(e):!1}var Ztt=Object.prototype.constructor.toString();function Ule(e){if(!e||typeof e!="object")return!1;const t=Rg(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Ztt}function ak(e,t){cE(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function cE(e){const t=e[Zi];return t?t.type_:Array.isArray(e)?1:fE(e)?2:dE(e)?3:0}function aM(e,t){return cE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Vle(e,t,n){const r=cE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Jtt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function fE(e){return e instanceof Map}function dE(e){return e instanceof Set}function af(e){return e.copy_||e.base_}function lM(e,t){if(fE(e))return new Map(e);if(dE(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Ule(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Zi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(Rg(e),r)}else{const r=Rg(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function t9(e,t=!1){return hE(e)||Dg(e)||!kd(e)||(cE(e)>1&&(e.set=e.add=e.clear=e.delete=ent),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>t9(r,!0))),e}function ent(){ss(2)}function hE(e){return Object.isFrozen(e)}var tnt={};function Cd(e){const t=tnt[e];return t||ss(0,e),t}var F1;function Wle(){return F1}function nnt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function eW(e,t){t&&(Cd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function uM(e){cM(e),e.drafts_.forEach(rnt),e.drafts_=null}function cM(e){e===F1&&(F1=e.parent_)}function tW(e){return F1=nnt(F1,e)}function rnt(e){const t=e[Zi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function nW(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Zi].modified_&&(uM(t),ss(4)),kd(e)&&(e=lk(t,e),t.parent_||uk(t,e)),t.patches_&&Cd("Patches").generateReplacementPatches_(n[Zi].base_,e,t.patches_,t.inversePatches_)):e=lk(t,n,[]),uM(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==jle?e:void 0}function lk(e,t,n){if(hE(t))return t;const r=t[Zi];if(!r)return ak(t,(i,o)=>rW(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return uk(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),ak(o,(a,l)=>rW(e,r,i,a,l,n,s)),uk(e,i,!1),n&&e.patches_&&Cd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function rW(e,t,n,r,i,o,s){if(Dg(i)){const a=o&&t&&t.type_!==3&&!aM(t.assigned_,r)?o.concat(r):void 0,l=lk(e,i,a);if(Vle(n,r,l),Dg(l))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(kd(i)&&!hE(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;lk(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&uk(e,i)}}function uk(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&t9(t,n)}function int(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Wle(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=n9;n&&(i=[r],o=P1);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var n9={get(e,t){if(t===Zi)return e;const n=af(e);if(!aM(n,t))return ont(e,n,t);const r=n[t];return e.finalized_||!kd(r)?r:r===dA(e.base_,t)?(hA(e),e.copy_[t]=dM(r,e)):r},has(e,t){return t in af(e)},ownKeys(e){return Reflect.ownKeys(af(e))},set(e,t,n){const r=Hle(af(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=dA(af(e),t),o=i==null?void 0:i[Zi];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Jtt(n,i)&&(n!==void 0||aM(e.base_,t)))return!0;hA(e),fM(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return dA(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,hA(e),fM(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=af(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ss(11)},getPrototypeOf(e){return Rg(e.base_)},setPrototypeOf(){ss(12)}},P1={};ak(n9,(e,t)=>{P1[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});P1.deleteProperty=function(e,t){return P1.set.call(this,e,t,void 0)};P1.set=function(e,t,n){return n9.set.call(this,e[0],t,n,e[0])};function dA(e,t){const n=e[Zi];return(n?af(n):e)[t]}function ont(e,t,n){var i;const r=Hle(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Hle(e,t){if(!(t in e))return;let n=Rg(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Rg(n)}}function fM(e){e.modified_||(e.modified_=!0,e.parent_&&fM(e.parent_))}function hA(e){e.copy_||(e.copy_=lM(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var snt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(l=o,...u){return s.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&ss(6),r!==void 0&&typeof r!="function"&&ss(7);let i;if(kd(t)){const o=tW(this),s=dM(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?uM(o):cM(o)}return eW(o,r),nW(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===jle&&(i=void 0),this.autoFreeze_&&t9(i,!0),r){const o=[],s=[];Cd("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else ss(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){kd(e)||ss(8),Dg(e)&&(e=ant(e));const t=tW(this),n=dM(e,void 0);return n[Zi].isManual_=!0,cM(t),n}finishDraft(e,t){const n=e&&e[Zi];(!n||!n.isManual_)&&ss(9);const{scope_:r}=n;return eW(r,t),nW(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Cd("Patches").applyPatches_;return Dg(e)?r(e,t):this.produce(e,i=>r(i,t))}};function dM(e,t){const n=fE(e)?Cd("MapSet").proxyMap_(e,t):dE(e)?Cd("MapSet").proxySet_(e,t):int(e,t);return(t?t.scope_:Wle()).drafts_.push(n),n}function ant(e){return Dg(e)||ss(10,e),qle(e)}function qle(e){if(!kd(e)||hE(e))return e;const t=e[Zi];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=lM(e,t.scope_.immer_.useStrictShallowCopy_)}else n=lM(e,!0);return ak(n,(r,i)=>{Vle(n,r,qle(i))}),t&&(t.finalized_=!1),n}var Ji=new snt,t0=Ji.produce;Ji.produceWithPatches.bind(Ji);Ji.setAutoFreeze.bind(Ji);Ji.setUseStrictShallowCopy.bind(Ji);Ji.applyPatches.bind(Ji);Ji.createDraft.bind(Ji);Ji.finishDraft.bind(Ji);const pE=uE()(JO(Ttt(e=>({apiKey:"sk-...",setApiKey:t=>e({apiKey:t}),python:"pyodide",setPython:async t=>t==="server"&&!(await fetch("/api")).ok?!1:(e({python:t}),!0)}),{name:"settings-storage"}))),cn=uE(JO((e,t)=>({filename:"",timestamp:0,charts:[],fields:[],currentChartIndex:-1,increaseCurrentChartIndex:()=>{t().setCurrentChartIndex(t().currentChartIndex+1)},decreaseCurrentChartIndex:()=>{t().setCurrentChartIndex(t().currentChartIndex-1)},setCurrentChartIndex:async n=>{const r=t();n<-1||(n>r.charts.length-Ptt-1&&await t().appendNextChart(),e({currentChartIndex:n}))},loadingSession:!1,loadSession:async()=>{e({loadingSession:!0,charts:[],filename:"",timestamp:0,currentChartIndex:-1,fields:[]});const n=vp.getState().filename,r=vp.getState().fileBuffer;if(!(n&&r))throw new Error("No file buffer found");const i=await dnt(n,r);e(t0(o=>{o.filename=i.filename,o.timestamp=i.timestamp,o.fields=i.fields,o.charts=i.charts,o.loadingSession=!1}))},appendingChart:!1,appendNextChart:async()=>{e({appendingChart:!0});const n=await hnt();e(t0(r=>{r.charts.push(n),r.appendingChart=!1}))},renewCurrentChart:()=>e(t0(n=>{const r=n.charts[n.currentChartIndex];r.specIndex=(r.specIndex+1)%r.specs.length})),setCurrentChartPreferred:async n=>{const r=t().charts[t().currentChartIndex],i=vp.getState().data;if(i)if(r.thumbnail)e(t0(o=>{o.charts[o.currentChartIndex].preferred=n}));else{const o=r.specs[r.specIndex],s=await Yet(o,i);e(t0(a=>{a.charts[a.currentChartIndex].thumbnail=s,a.charts[a.currentChartIndex].preferred=n}))}}})));async function lnt(e,t){const n=await e9();return await n.writeFile(e,t),await n.callPythonFunction("loadData",{filename:e})}async function unt(e,t){const n=new Blob([t]),r=new FormData;return r.append("file",n,e),await(await fetch("/api/loadData",{method:"POST",body:r})).json()}async function cnt(){return await(await e9()).callPythonFunction("appendNextChart",{})}async function fnt(){return await(await fetch("/api/appendNextChart")).json()}const dnt=pE.getState().python==="pyodide"?lnt:unt,hnt=pE.getState().python==="pyodide"?cnt:fnt;function pnt(){const e=cn(i=>i.charts),t=e.filter(i=>i.preferred),n=cn(i=>i.setCurrentChartIndex);return{preferredCharts:t,handleClickBookmark:i=>{const o=e.findIndex(s=>s===i);n(o)}}}function gnt(e){const{colorMode:t}=Bg(),n=vp(u=>u.data),r=e.specs[e.specIndex],i=t==="dark"?"dark":void 0,[o,s]=vh({base:[300,300],lg:[600,600]})??[300,300],a={...r,width:o,height:s,background:"transparent",data:{name:QV},config:{..."config"in r?r.config:{},axis:{labelFontSize:14,titleFontSize:16,titlePadding:16},autosize:{type:"fit"}}};return{data:{[QV]:n},chartTheme:i,spec:a}}function mnt(e,t,{signal:n}={}){let r=null;const i=function(...s){r!==null&&clearTimeout(r),!(n!=null&&n.aborted)&&(r=setTimeout(()=>{e(...s),r=null},t))},o=function(){i.cancel()};return i.cancel=function(){r!==null&&(clearTimeout(r),r=null)},n==null||n.addEventListener("abort",o,{once:!0}),i}function iW(e){if(!e)return 0;const t=window.getComputedStyle(e),n=parseFloat(t.gap);return e.clientWidth+n}function ynt(){const e=cn(s=>s.charts),t=cn(s=>s.currentChartIndex),n=cn(s=>s.setCurrentChartIndex),r=cn(s=>s.increaseCurrentChartIndex),i=cn(s=>s.decreaseCurrentChartIndex),o=F.useRef(null);return F.useEffect(()=>{const s=o.current;if(!s)return;const a=mnt(()=>{const l=s.scrollLeft,u=iW(s),c=Math.round(l/u);n(c-1)},Ftt);return s.addEventListener("scroll",a),()=>s.removeEventListener("scroll",a)},[n]),F.useEffect(()=>{const s=o.current;if(!s)return;const a=iW(s);s.scrollTo({left:(t+1)*a,behavior:"smooth"})},[t]),F.useEffect(()=>{const s=a=>{a.key==="ArrowLeft"&&(a.preventDefault(),i()),a.key==="ArrowRight"&&(a.preventDefault(),r())};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[r,i]),{charts:e,currentChartIndex:t,ref:o}}function vnt(){const e=cn(p=>p.charts),t=cn(p=>p.fields),n=cn(p=>p.increaseCurrentChartIndex),r=cn(p=>p.decreaseCurrentChartIndex),i=cn(p=>p.renewCurrentChart),o=cn(p=>p.currentChartIndex),s=o!==-1,a=o!==-1&&e[o].preferred,l=cn(p=>p.setCurrentChartPreferred),u=i,c=n,f=r,d=()=>{l(!a)};return{sessionInitialized:t.length>0,chartDisplaying:s,currentChartPreferred:a,handleRenewChart:u,handleNextChart:c,handlePrevChart:f,handlePreferChart:d}}function hM(e,t,n){var r,i,o,s,a;t==null&&(t=100);function l(){var c=Date.now()-s;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(a=e.apply(o,i),o=i=null))}var u=function(){o=this,i=arguments,s=Date.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(a=e.apply(o,i),o=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}hM.debounce=hM;var bnt=hM;const oW=Fl(bnt);function pA(e){let{debounce:t,scroll:n,polyfill:r,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1};const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=F.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=F.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),u=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,f=F.useRef(!1);F.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,h,p]=F.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:b,top:x,width:w,height:k,bottom:S,right:C,x:_,y:$}=l.current.element.getBoundingClientRect(),A={left:b,top:x,width:w,height:k,bottom:S,right:C,x:_,y:$};l.current.element instanceof HTMLElement&&i&&(A.height=l.current.element.offsetHeight,A.width=l.current.element.offsetWidth),Object.freeze(A),f.current&&!knt(l.current.lastBounds,A)&&a(l.current.lastBounds=A)};return[v,c?oW(v,c):v,u?oW(v,u):v]},[a,i,u,c]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function m(){l.current.element&&(l.current.resizeObserver=new o(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",p,{capture:!0,passive:!0})))}const y=v=>{!v||v===l.current.element||(g(),l.current.element=v,l.current.scrollContainers=Gle(v),m())};return wnt(p,!!n),xnt(h),F.useEffect(()=>{g(),m()},[n,p,h]),F.useEffect(()=>g,[]),[y,s,d]}function xnt(e){F.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function wnt(e,t){F.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function Gle(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&t.push(e),[...t,...Gle(e.parentElement)]}const Snt=["x","y","top","bottom","left","right","width","height"],knt=(e,t)=>Snt.every(n=>e[n]===t[n]);function Cnt(){const e=oM(p=>p.drawerExpanded),t=oM(p=>p.setDrawerExpanded),n=oCe(),[r,i]=pA(),[o,s]=pA(),[a,l]=pA(),[u,c]=F.useState(!1),f=F.useMemo(()=>({expanded:{top:`calc(100dvh - ${l.height+s.height+i.height}px)`},collapsed:{top:`calc(100dvh - ${l.height+s.height+16}px)`},loadExpanded:{top:`calc(100dvh - ${l.height+s.height+i.height-200}px)`}}),[l,i,s]);return{animate:u?e?"expanded":"collapsed":"loadExpanded",dragControls:n,handleDragEnd:(p,g)=>{u||c(!0),t(g.offset.y>KV?!1:g.offset.y<-KV?!0:e)},bodyRef:r,handleRef:o,navigatorRef:a,navigatorBounds:l,variants:f}}function Yle(){const e=vp(s=>s.loading),t=vp(s=>s.loadData),n=cn(s=>s.loadingSession),r=cn(s=>s.loadSession),i=oM(s=>s.setDrawerExpanded);return{loading:e||n,initializeSession:async s=>{await t(s),await r(),i(!1)}}}function _nt(){const{loading:e,initializeSession:t}=Yle(),[n,r]=F.useState(null);return{loading:e,selectedDemo:n,handleSubmit:()=>{n!=null&&n.href&&t(n.href)},handleDemoSelect:s=>{r(s)}}}function Ent(){var c,f;const{loading:e,initializeSession:t}=Yle(),[n,r]=F.useState(""),i=F.useRef(null),o=d=>{var p,g;const h=((g=d.target.files)==null?void 0:g[((p=d.target.files)==null?void 0:p.length)-1].name)??"";r(h)},s=d=>{r(d.target.value),i.current&&(i.current.value="",i.current.files=null)},a=()=>{i.current&&i.current.click()},l=()=>{var d,h;if((h=(d=i.current)==null?void 0:d.files)!=null&&h.length){const p=i.current.files[0];t(p)}else Xet(n)&&t(n)},u=!n&&!((f=(c=i.current)==null?void 0:c.files)!=null&&f.length);return{fileInputRef:i,inputDisabled:u,loadingData:e,pathInput:n,handleInputChange:s,handleSubmit:l,handleFileChange:o,handleFileButtonClick:a}}function $nt(e,t){t.domain&&("nice"in e||"quantiles"in e||"padding"in e,e.domain(t.domain))}function Ant(e,t){t.range&&("padding"in e,e.range(t.range))}function Tnt(e,t){"align"in e&&"align"in t&&typeof t.align<"u"&&e.align(t.align)}function Mnt(e,t){"base"in e&&"base"in t&&typeof t.base<"u"&&e.base(t.base)}function Fnt(e,t){"clamp"in e&&"clamp"in t&&typeof t.clamp<"u"&&e.clamp(t.clamp)}function Pnt(e,t){"constant"in e&&"constant"in t&&typeof t.constant<"u"&&e.constant(t.constant)}function Rnt(e,t){"exponent"in e&&"exponent"in t&&typeof t.exponent<"u"&&e.exponent(t.exponent)}var sW={lab:GJ,hcl:XJ,"hcl-long":KJ,hsl:HJ,"hsl-long":qJ,cubehelix:ZJ,"cubehelix-long":JJ,rgb:Ww};function Dnt(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return sW[e]}var t=e.type,n=e.gamma,r=sW[t];return typeof n>"u"?r:r.gamma(n)}function Ont(e,t){if("interpolate"in t&&"interpolate"in e&&typeof t.interpolate<"u"){var n=Dnt(t.interpolate);e.interpolate(n)}}var Nnt=new Date(Date.UTC(2020,1,2,3,4,5)),Int="%Y-%m-%d %H:%M";function Lnt(e){var t=e.tickFormat(1,Int)(Nnt);return t==="2020-02-02 03:04"}var aW={day:fa,hour:av,minute:ov,month:Zp,second:as,week:Fd,year:vs},lW={day:hl,hour:lv,minute:sv,month:Jp,second:as,week:Rd,year:bs};function znt(e,t){if("nice"in t&&typeof t.nice<"u"&&"nice"in e){var n=t.nice;if(typeof n=="boolean")n&&e.nice();else if(typeof n=="number")e.nice(n);else{var r=e,i=Lnt(r);if(typeof n=="string")r.nice(i?lW[n]:aW[n]);else{var o=n.interval,s=n.step,a=(i?lW[o]:aW[o]).every(s);a!=null&&r.nice(a)}}}}function Bnt(e,t){"padding"in e&&"padding"in t&&typeof t.padding<"u"&&e.padding(t.padding),"paddingInner"in e&&"paddingInner"in t&&typeof t.paddingInner<"u"&&e.paddingInner(t.paddingInner),"paddingOuter"in e&&"paddingOuter"in t&&typeof t.paddingOuter<"u"&&e.paddingOuter(t.paddingOuter)}function jnt(e,t){if(t.reverse){var n=e.range().slice().reverse();"padding"in e,e.range(n)}}function Unt(e,t){"round"in t&&typeof t.round<"u"&&(t.round&&"interpolate"in t&&typeof t.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",t):"round"in e?e.round(t.round):"interpolate"in e&&t.round&&e.interpolate(Qg))}function Vnt(e,t){"unknown"in e&&"unknown"in t&&typeof t.unknown<"u"&&e.unknown(t.unknown)}function Wnt(e,t){if("zero"in t&&t.zero===!0){var n=e.domain(),r=n[0],i=n[1],o=i<r,s=o?[i,r]:[r,i],a=s[0],l=s[1],u=[Math.min(0,a),Math.max(0,l)];e.domain(o?u.reverse():u)}}var Hnt=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],qnt={domain:$nt,nice:znt,zero:Wnt,interpolate:Ont,round:Unt,align:Tnt,base:Mnt,clamp:Fnt,constant:Pnt,exponent:Rnt,padding:Bnt,range:Ant,reverse:jnt,unknown:Vnt};function Gnt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Set(t),i=Hnt.filter(function(o){return r.has(o)});return function(s,a){return typeof a<"u"&&i.forEach(function(l){qnt[l](s,a)}),s}}var Ynt=Gnt("domain","range","reverse","clamp","interpolate","nice","round","zero");function Xnt(e){return Ynt(oR(),e)}const n0={TOP:12,RIGHT:10,BOTTOM:12,LEFT:10},Knt=6;function Qnt({width:e,height:t,r:n}){const r=cn(p=>p.charts),i=cn(p=>p.currentChartIndex),{preferredColor:o}=Ds(),s=Jc(ri["gray.400"],ri["gray.600"]),a=Math.min(e-n0.LEFT-n0.RIGHT,(Knt+2*n)*r.length),l=t-n0.TOP-n0.BOTTOM,u=e/2,c=l/2+n0.TOP,f=n-Math.floor(r.length/40),d=Xnt({domain:[0,r.length-1],range:[u-a/2,u+a/2]});return r.map((p,g)=>({key:`indicator-${p.key}`,cx:d(g),cy:c,r:g===i?2*f:f,fill:p.preferred?o:s,isActive:g===i}))}function Ds(){const e=vh({base:0,lg:"18px"}),t=vh({base:window.innerWidth,lg:880}),n=vh({base:"100vh",lg:"calc(80vh - 18px)"}),r=Jc("#FFFFFF","#171923"),i=vh({base:!0,lg:!1}),o=Jc("#FFFFFF","#171923"),s=vh({base:320,lg:576}),a=5,l=50,u=Jc("#EDF2F7","#1A202C"),c=Jc(`${Ru[500]}`,`${Ru[400]}`),f=Jc(`${Ru[600]}`,`${Ru[300]}`),d=Jc(ri["red.500"],ri["red.300"]);return{accentColor:c,accentHoverColor:f,preferredColor:d,buttonColor:u,cardPadding:e,cardWidth:t,cardHeight:n,cardColor:r,drawerBgColor:o,tabPanelHeight:s,tabIconSize:a,thumbnailSize:l,mobile:i,scrollbarStyle:{"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:c,borderRadius:"5px"},"&::-webkit-scrollbar-thumb:hover":{background:f}}}}var Zv=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Og=typeof window>"u"||"Deno"in globalThis;function po(){}function Znt(e,t){return typeof e=="function"?e(t):e}function pM(e){return typeof e=="number"&&e>=0&&e!==1/0}function Xle(e,t){return Math.max(e+(t||0)-Date.now(),0)}function bp(e,t){return typeof e=="function"?e(t):e}function ns(e,t){return typeof e=="function"?e(t):e}function uW(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(s){if(r){if(t.queryHash!==r9(s,t.options))return!1}else if(!D1(t.queryKey,s))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||o&&!o(t))}function cW(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(R1(t.options.mutationKey)!==R1(o))return!1}else if(!D1(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function r9(e,t){return((t==null?void 0:t.queryKeyHashFn)||R1)(e)}function R1(e){return JSON.stringify(e,(t,n)=>mM(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function D1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!D1(e[n],t[n])):!1}function Kle(e,t){if(e===t)return e;const n=fW(e)&&fW(t);if(n||mM(e)&&mM(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),s=o.length,a=n?[]:{};let l=0;for(let u=0;u<s;u++){const c=n?u:o[u];(!n&&r.includes(c)||n)&&e[c]===void 0&&t[c]===void 0?(a[c]=void 0,l++):(a[c]=Kle(e[c],t[c]),a[c]===e[c]&&e[c]!==void 0&&l++)}return i===s&&l===i?e:a}return t}function gM(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function fW(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function mM(e){if(!dW(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!dW(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function dW(e){return Object.prototype.toString.call(e)==="[object Object]"}function Jnt(e){return new Promise(t=>{setTimeout(t,e)})}function yM(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Kle(e,t):t}function ert(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function trt(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Qle=Symbol();function Zle(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Qle?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var _f,hu,xp,$W,nrt=($W=class extends Zv{constructor(){super();Me(this,_f);Me(this,hu);Me(this,xp);pe(this,xp,t=>{if(!Og&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,hu)||this.setEventListener(B(this,xp))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,hu))==null||t.call(this),pe(this,hu,void 0))}setEventListener(t){var n;pe(this,xp,t),(n=B(this,hu))==null||n.call(this),pe(this,hu,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){B(this,_f)!==t&&(pe(this,_f,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof B(this,_f)=="boolean"?B(this,_f):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},_f=new WeakMap,hu=new WeakMap,xp=new WeakMap,$W),i9=new nrt,wp,pu,Sp,AW,rrt=(AW=class extends Zv{constructor(){super();Me(this,wp,!0);Me(this,pu);Me(this,Sp);pe(this,Sp,t=>{if(!Og&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){B(this,pu)||this.setEventListener(B(this,Sp))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,pu))==null||t.call(this),pe(this,pu,void 0))}setEventListener(t){var n;pe(this,Sp,t),(n=B(this,pu))==null||n.call(this),pe(this,pu,t(this.setOnline.bind(this)))}setOnline(t){B(this,wp)!==t&&(pe(this,wp,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return B(this,wp)}},wp=new WeakMap,pu=new WeakMap,Sp=new WeakMap,AW),ck=new rrt;function irt(e){return Math.min(1e3*2**e,3e4)}function Jle(e){return(e??"online")==="online"?ck.isOnline():!0}var eue=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function gA(e){return e instanceof eue}function tue(e){let t=!1,n=0,r=!1,i,o,s;const a=new Promise((y,v)=>{o=y,s=v}),l=y=>{var v;r||(p(new eue(y)),(v=e.abort)==null||v.call(e))},u=()=>{t=!0},c=()=>{t=!1},f=()=>i9.isFocused()&&(e.networkMode==="always"||ck.isOnline())&&e.canRun(),d=()=>Jle(e.networkMode)&&e.canRun(),h=y=>{var v;r||(r=!0,(v=e.onSuccess)==null||v.call(e,y),i==null||i(),o(y))},p=y=>{var v;r||(r=!0,(v=e.onError)==null||v.call(e,y),i==null||i(),s(y))},g=()=>new Promise(y=>{var v;i=b=>{(r||f())&&y(b)},(v=e.onPause)==null||v.call(e)}).then(()=>{var y;i=void 0,r||(y=e.onContinue)==null||y.call(e)}),m=()=>{if(r)return;let y;const v=n===0?e.initialPromise:void 0;try{y=v??e.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(h).catch(b=>{var C;if(r)return;const x=e.retry??(Og?0:3),w=e.retryDelay??irt,k=typeof w=="function"?w(n,b):w,S=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(t||!S){p(b);return}n++,(C=e.onFail)==null||C.call(e,n,b),Jnt(k).then(()=>f()?void 0:g()).then(()=>{t?p(b):m()})})};return{promise:a,cancel:l,continue:()=>(i==null||i(),a),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?m():g().then(m),a)}}function ort(){let e=[],t=0,n=d=>{d()},r=d=>{d()},i=d=>setTimeout(d,0);const o=d=>{i=d},s=d=>{let h;t++;try{h=d()}finally{t--,t||u()}return h},a=d=>{t?e.push(d):i(()=>{n(d)})},l=d=>(...h)=>{a(()=>{d(...h)})},u=()=>{const d=e;e=[],d.length&&i(()=>{r(()=>{d.forEach(h=>{n(h)})})})};return{batch:s,batchCalls:l,schedule:a,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:o}}var qn=ort(),Ef,TW,nue=(TW=class{constructor(){Me(this,Ef)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pM(this.gcTime)&&pe(this,Ef,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Og?1/0:5*60*1e3))}clearGcTimeout(){B(this,Ef)&&(clearTimeout(B(this,Ef)),pe(this,Ef,void 0))}},Ef=new WeakMap,TW),kp,Cp,co,fr,O1,$f,Xo,Va,MW,srt=(MW=class extends nue{constructor(t){super();Me(this,Xo);Me(this,kp);Me(this,Cp);Me(this,co);Me(this,fr);Me(this,O1);Me(this,$f);pe(this,$f,!1),pe(this,O1,t.defaultOptions),this.setOptions(t.options),this.observers=[],pe(this,co,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,pe(this,kp,art(this.options)),this.state=t.state??B(this,kp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,fr))==null?void 0:t.promise}setOptions(t){this.options={...B(this,O1),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,co).remove(this)}setData(t,n){const r=yM(this.state.data,t,this.options);return je(this,Xo,Va).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){je(this,Xo,Va).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=B(this,fr))==null?void 0:r.promise;return(i=B(this,fr))==null||i.cancel(t),n?n.then(po).catch(po):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,kp))}isActive(){return this.observers.some(t=>ns(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Xle(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,fr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,fr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,co).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(B(this,fr)&&(B(this,$f)?B(this,fr).cancel({revert:!0}):B(this,fr).cancelRetry()),this.scheduleGc()),B(this,co).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||je(this,Xo,Va).call(this,{type:"invalidate"})}fetch(t,n){var l,u,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(B(this,fr))return B(this,fr).continueRetry(),B(this,fr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(d=>d.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(pe(this,$f,!0),r.signal)})},o=()=>{const f=Zle(this.options,n),d={queryKey:this.queryKey,meta:this.meta};return i(d),pe(this,$f,!1),this.options.persister?this.options.persister(f,d,this):f(d)},s={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(s),(l=this.options.behavior)==null||l.onFetch(s,this),pe(this,Cp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=s.fetchOptions)==null?void 0:u.meta))&&je(this,Xo,Va).call(this,{type:"fetch",meta:(c=s.fetchOptions)==null?void 0:c.meta});const a=f=>{var d,h,p,g;gA(f)&&f.silent||je(this,Xo,Va).call(this,{type:"error",error:f}),gA(f)||((h=(d=B(this,co).config).onError)==null||h.call(d,f,this),(g=(p=B(this,co).config).onSettled)==null||g.call(p,this.state.data,f,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return pe(this,fr,tue({initialPromise:n==null?void 0:n.initialPromise,fn:s.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var d,h,p,g;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(f),(h=(d=B(this,co).config).onSuccess)==null||h.call(d,f,this),(g=(p=B(this,co).config).onSettled)==null||g.call(p,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(f,d)=>{je(this,Xo,Va).call(this,{type:"failed",failureCount:f,error:d})},onPause:()=>{je(this,Xo,Va).call(this,{type:"pause"})},onContinue:()=>{je(this,Xo,Va).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0})),B(this,fr).start()}},kp=new WeakMap,Cp=new WeakMap,co=new WeakMap,fr=new WeakMap,O1=new WeakMap,$f=new WeakMap,Xo=new WeakSet,Va=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...rue(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return gA(i)&&i.revert&&B(this,Cp)?{...B(this,Cp),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),qn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),B(this,co).notify({query:this,type:"updated",action:t})})},MW);function rue(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Jle(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function art(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Hs,FW,lrt=(FW=class extends Zv{constructor(t={}){super();Me(this,Hs);this.config=t,pe(this,Hs,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??r9(i,n);let s=this.get(o);return s||(s=new srt({cache:this,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){B(this,Hs).has(t.queryHash)||(B(this,Hs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=B(this,Hs).get(t.queryHash);n&&(t.destroy(),n===t&&B(this,Hs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){qn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,Hs).get(t)}getAll(){return[...B(this,Hs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>uW(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>uW(t,r)):n}notify(t){qn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){qn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){qn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Hs=new WeakMap,FW),qs,Tr,Af,Gs,Jl,PW,urt=(PW=class extends nue{constructor(t){super();Me(this,Gs);Me(this,qs);Me(this,Tr);Me(this,Af);this.mutationId=t.mutationId,pe(this,Tr,t.mutationCache),pe(this,qs,[]),this.state=t.state||crt(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,qs).includes(t)||(B(this,qs).push(t),this.clearGcTimeout(),B(this,Tr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){pe(this,qs,B(this,qs).filter(n=>n!==t)),this.scheduleGc(),B(this,Tr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){B(this,qs).length||(this.state.status==="pending"?this.scheduleGc():B(this,Tr).remove(this))}continue(){var t;return((t=B(this,Af))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,s,a,l,u,c,f,d,h,p,g,m,y,v,b,x,w,k,S;pe(this,Af,tue({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,_)=>{je(this,Gs,Jl).call(this,{type:"failed",failureCount:C,error:_})},onPause:()=>{je(this,Gs,Jl).call(this,{type:"pause"})},onContinue:()=>{je(this,Gs,Jl).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,Tr).canRun(this)}));const n=this.state.status==="pending",r=!B(this,Af).canStart();try{if(!n){je(this,Gs,Jl).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(i=B(this,Tr).config).onMutate)==null?void 0:o.call(i,t,this));const _=await((a=(s=this.options).onMutate)==null?void 0:a.call(s,t));_!==this.state.context&&je(this,Gs,Jl).call(this,{type:"pending",context:_,variables:t,isPaused:r})}const C=await B(this,Af).start();return await((u=(l=B(this,Tr).config).onSuccess)==null?void 0:u.call(l,C,t,this.state.context,this)),await((f=(c=this.options).onSuccess)==null?void 0:f.call(c,C,t,this.state.context)),await((h=(d=B(this,Tr).config).onSettled)==null?void 0:h.call(d,C,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,C,null,t,this.state.context)),je(this,Gs,Jl).call(this,{type:"success",data:C}),C}catch(C){try{throw await((y=(m=B(this,Tr).config).onError)==null?void 0:y.call(m,C,t,this.state.context,this)),await((b=(v=this.options).onError)==null?void 0:b.call(v,C,t,this.state.context)),await((w=(x=B(this,Tr).config).onSettled)==null?void 0:w.call(x,void 0,C,this.state.variables,this.state.context,this)),await((S=(k=this.options).onSettled)==null?void 0:S.call(k,void 0,C,t,this.state.context)),C}finally{je(this,Gs,Jl).call(this,{type:"error",error:C})}}finally{B(this,Tr).runNext(this)}}},qs=new WeakMap,Tr=new WeakMap,Af=new WeakMap,Gs=new WeakSet,Jl=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),qn.batch(()=>{B(this,qs).forEach(r=>{r.onMutationUpdate(t)}),B(this,Tr).notify({mutation:this,type:"updated",action:t})})},PW);function crt(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ti,N1,RW,frt=(RW=class extends Zv{constructor(t={}){super();Me(this,Ti);Me(this,N1);this.config=t,pe(this,Ti,new Map),pe(this,N1,Date.now())}build(t,n,r){const i=new urt({mutationCache:this,mutationId:++ab(this,N1)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=Mx(t),r=B(this,Ti).get(n)??[];r.push(t),B(this,Ti).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Mx(t);if(B(this,Ti).has(n)){const i=(r=B(this,Ti).get(n))==null?void 0:r.filter(o=>o!==t);i&&(i.length===0?B(this,Ti).delete(n):B(this,Ti).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=B(this,Ti).get(Mx(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=B(this,Ti).get(Mx(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){qn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...B(this,Ti).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>cW(n,r))}findAll(t={}){return this.getAll().filter(n=>cW(t,n))}notify(t){qn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return qn.batch(()=>Promise.all(t.map(n=>n.continue().catch(po))))}},Ti=new WeakMap,N1=new WeakMap,RW);function Mx(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function drt(e){return{onFetch:(t,n)=>{const r=async()=>{var p,g,m,y,v;const i=t.options,o=(m=(g=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:m.direction,s=((y=t.state.data)==null?void 0:y.pages)||[],a=((v=t.state.data)==null?void 0:v.pageParams)||[],l={pages:[],pageParams:[]};let u=!1;const c=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},f=Zle(t.options,t.fetchOptions),d=async(b,x,w)=>{if(u)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const k={queryKey:t.queryKey,pageParam:x,direction:w?"backward":"forward",meta:t.options.meta};c(k);const S=await f(k),{maxPages:C}=t.options,_=w?trt:ert;return{pages:_(b.pages,S,C),pageParams:_(b.pageParams,x,C)}};let h;if(o&&s.length){const b=o==="backward",x=b?hrt:hW,w={pages:s,pageParams:a},k=x(i,w);h=await d(w,k,b)}else{h=await d(l,a[0]??i.initialPageParam);const b=e??s.length;for(let x=1;x<b;x++){const w=hW(i,h);if(w==null)break;h=await d(h,w)}}return h};t.options.persister?t.fetchFn=()=>{var i,o;return(o=(i=t.options).persister)==null?void 0:o.call(i,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function hW(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function hrt(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var qt,gu,mu,_p,Ep,yu,$p,Ap,DW,prt=(DW=class{constructor(e={}){Me(this,qt);Me(this,gu);Me(this,mu);Me(this,_p);Me(this,Ep);Me(this,yu);Me(this,$p);Me(this,Ap);pe(this,qt,e.queryCache||new lrt),pe(this,gu,e.mutationCache||new frt),pe(this,mu,e.defaultOptions||{}),pe(this,_p,new Map),pe(this,Ep,new Map),pe(this,yu,0)}mount(){ab(this,yu)._++,B(this,yu)===1&&(pe(this,$p,i9.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,qt).onFocus())})),pe(this,Ap,ck.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,qt).onOnline())})))}unmount(){var e,t;ab(this,yu)._--,B(this,yu)===0&&((e=B(this,$p))==null||e.call(this),pe(this,$p,void 0),(t=B(this,Ap))==null||t.call(this),pe(this,Ap,void 0))}isFetching(e){return B(this,qt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,gu).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,qt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=B(this,qt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(bp(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return B(this,qt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=B(this,qt).get(r.queryHash),o=i==null?void 0:i.state.data,s=Znt(t,o);if(s!==void 0)return B(this,qt).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return qn.batch(()=>B(this,qt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,qt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=B(this,qt);qn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=B(this,qt),r={type:"active",...e};return qn.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=qn.batch(()=>B(this,qt).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(po).catch(po)}invalidateQueries(e={},t={}){return qn.batch(()=>{if(B(this,qt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=qn.batch(()=>B(this,qt).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(po)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(po)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=B(this,qt).build(this,t);return n.isStaleByTime(bp(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(po).catch(po)}fetchInfiniteQuery(e){return e.behavior=drt(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(po).catch(po)}resumePausedMutations(){return ck.isOnline()?B(this,gu).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,qt)}getMutationCache(){return B(this,gu)}getDefaultOptions(){return B(this,mu)}setDefaultOptions(e){pe(this,mu,e)}setQueryDefaults(e,t){B(this,_p).set(R1(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,_p).values()];let n={};return t.forEach(r=>{D1(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){B(this,Ep).set(R1(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,Ep).values()];let n={};return t.forEach(r=>{D1(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,mu).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=r9(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Qle&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,mu).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,qt).clear(),B(this,gu).clear()}},qt=new WeakMap,gu=new WeakMap,mu=new WeakMap,_p=new WeakMap,Ep=new WeakMap,yu=new WeakMap,$p=new WeakMap,Ap=new WeakMap,DW),ni,Ue,I1,Mr,Tf,Tp,Ys,L1,Mp,Fp,Mf,Ff,vu,Pp,ct,B0,vM,bM,xM,wM,SM,kM,CM,iue,OW,grt=(OW=class extends Zv{constructor(t,n){super();Me(this,ct);Me(this,ni);Me(this,Ue);Me(this,I1);Me(this,Mr);Me(this,Tf);Me(this,Tp);Me(this,Ys);Me(this,L1);Me(this,Mp);Me(this,Fp);Me(this,Mf);Me(this,Ff);Me(this,vu);Me(this,Pp,new Set);this.options=n,pe(this,ni,t),pe(this,Ys,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,Ue).addObserver(this),pW(B(this,Ue),this.options)?je(this,ct,B0).call(this):this.updateResult(),je(this,ct,wM).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return _M(B(this,Ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _M(B(this,Ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,je(this,ct,SM).call(this),je(this,ct,kM).call(this),B(this,Ue).removeObserver(this)}setOptions(t,n){const r=this.options,i=B(this,Ue);if(this.options=B(this,ni).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ns(this.options.enabled,B(this,Ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");je(this,ct,CM).call(this),B(this,Ue).setOptions(this.options),r._defaulted&&!gM(this.options,r)&&B(this,ni).getQueryCache().notify({type:"observerOptionsUpdated",query:B(this,Ue),observer:this});const o=this.hasListeners();o&&gW(B(this,Ue),i,this.options,r)&&je(this,ct,B0).call(this),this.updateResult(n),o&&(B(this,Ue)!==i||ns(this.options.enabled,B(this,Ue))!==ns(r.enabled,B(this,Ue))||bp(this.options.staleTime,B(this,Ue))!==bp(r.staleTime,B(this,Ue)))&&je(this,ct,vM).call(this);const s=je(this,ct,bM).call(this);o&&(B(this,Ue)!==i||ns(this.options.enabled,B(this,Ue))!==ns(r.enabled,B(this,Ue))||s!==B(this,vu))&&je(this,ct,xM).call(this,s)}getOptimisticResult(t){const n=B(this,ni).getQueryCache().build(B(this,ni),t),r=this.createResult(n,t);return yrt(this,r)&&(pe(this,Mr,r),pe(this,Tp,this.options),pe(this,Tf,B(this,Ue).state)),r}getCurrentResult(){return B(this,Mr)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){B(this,Pp).add(t)}getCurrentQuery(){return B(this,Ue)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=B(this,ni).defaultQueryOptions(t),r=B(this,ni).getQueryCache().build(B(this,ni),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return je(this,ct,B0).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,Mr)))}createResult(t,n){var S;const r=B(this,Ue),i=this.options,o=B(this,Mr),s=B(this,Tf),a=B(this,Tp),u=t!==r?t.state:B(this,I1),{state:c}=t;let f={...c},d=!1,h;if(n._optimisticResults){const C=this.hasListeners(),_=!C&&pW(t,n),$=C&&gW(t,r,n,i);(_||$)&&(f={...f,...rue(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:m}=f;if(n.select&&f.data!==void 0)if(o&&f.data===(s==null?void 0:s.data)&&n.select===B(this,L1))h=B(this,Mp);else try{pe(this,L1,n.select),h=n.select(f.data),h=yM(o==null?void 0:o.data,h,n),pe(this,Mp,h),pe(this,Ys,null)}catch(C){pe(this,Ys,C)}else h=f.data;if(n.placeholderData!==void 0&&h===void 0&&m==="pending"){let C;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))C=o.data;else if(C=typeof n.placeholderData=="function"?n.placeholderData((S=B(this,Fp))==null?void 0:S.state.data,B(this,Fp)):n.placeholderData,n.select&&C!==void 0)try{C=n.select(C),pe(this,Ys,null)}catch(_){pe(this,Ys,_)}C!==void 0&&(m="success",h=yM(o==null?void 0:o.data,C,n),d=!0)}B(this,Ys)&&(p=B(this,Ys),h=B(this,Mp),g=Date.now(),m="error");const y=f.fetchStatus==="fetching",v=m==="pending",b=m==="error",x=v&&y,w=h!==void 0;return{status:m,fetchStatus:f.fetchStatus,isPending:v,isSuccess:m==="success",isError:b,isInitialLoading:x,isLoading:x,data:h,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:b&&!w,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:b&&w,isStale:o9(t,n),refetch:this.refetch}}updateResult(t){const n=B(this,Mr),r=this.createResult(B(this,Ue),this.options);if(pe(this,Tf,B(this,Ue).state),pe(this,Tp,this.options),B(this,Tf).data!==void 0&&pe(this,Fp,B(this,Ue)),gM(r,n))return;pe(this,Mr,r);const i={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!B(this,Pp).size)return!0;const l=new Set(a??B(this,Pp));return this.options.throwOnError&&l.add("error"),Object.keys(B(this,Mr)).some(u=>{const c=u;return B(this,Mr)[c]!==n[c]&&l.has(c)})};(t==null?void 0:t.listeners)!==!1&&o()&&(i.listeners=!0),je(this,ct,iue).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&je(this,ct,wM).call(this)}},ni=new WeakMap,Ue=new WeakMap,I1=new WeakMap,Mr=new WeakMap,Tf=new WeakMap,Tp=new WeakMap,Ys=new WeakMap,L1=new WeakMap,Mp=new WeakMap,Fp=new WeakMap,Mf=new WeakMap,Ff=new WeakMap,vu=new WeakMap,Pp=new WeakMap,ct=new WeakSet,B0=function(t){je(this,ct,CM).call(this);let n=B(this,Ue).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(po)),n},vM=function(){je(this,ct,SM).call(this);const t=bp(this.options.staleTime,B(this,Ue));if(Og||B(this,Mr).isStale||!pM(t))return;const r=Xle(B(this,Mr).dataUpdatedAt,t)+1;pe(this,Mf,setTimeout(()=>{B(this,Mr).isStale||this.updateResult()},r))},bM=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(B(this,Ue)):this.options.refetchInterval)??!1},xM=function(t){je(this,ct,kM).call(this),pe(this,vu,t),!(Og||ns(this.options.enabled,B(this,Ue))===!1||!pM(B(this,vu))||B(this,vu)===0)&&pe(this,Ff,setInterval(()=>{(this.options.refetchIntervalInBackground||i9.isFocused())&&je(this,ct,B0).call(this)},B(this,vu)))},wM=function(){je(this,ct,vM).call(this),je(this,ct,xM).call(this,je(this,ct,bM).call(this))},SM=function(){B(this,Mf)&&(clearTimeout(B(this,Mf)),pe(this,Mf,void 0))},kM=function(){B(this,Ff)&&(clearInterval(B(this,Ff)),pe(this,Ff,void 0))},CM=function(){const t=B(this,ni).getQueryCache().build(B(this,ni),this.options);if(t===B(this,Ue))return;const n=B(this,Ue);pe(this,Ue,t),pe(this,I1,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},iue=function(t){qn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(B(this,Mr))}),B(this,ni).getQueryCache().notify({query:B(this,Ue),type:"observerResultsUpdated"})})},OW);function mrt(e,t){return ns(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function pW(e,t){return mrt(e,t)||e.state.data!==void 0&&_M(e,t,t.refetchOnMount)}function _M(e,t,n){if(ns(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&o9(e,t)}return!1}function gW(e,t,n,r){return(e!==t||ns(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&o9(e,n)}function o9(e,t){return ns(t.enabled,e)!==!1&&e.isStaleByTime(bp(t.staleTime,e))}function yrt(e,t){return!gM(e.getCurrentResult(),t)}var oue=F.createContext(void 0),vrt=e=>{const t=F.useContext(oue);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},brt=({client:e,children:t})=>(F.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),E.jsx(oue.Provider,{value:e,children:t})),sue=F.createContext(!1),xrt=()=>F.useContext(sue);sue.Provider;function wrt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Srt=F.createContext(wrt()),krt=()=>F.useContext(Srt);function Crt(e,t){return typeof e=="function"?e(...t):!!e}var _rt=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Ert=e=>{F.useEffect(()=>{e.clearReset()},[e])},$rt=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Crt(n,[e.error,r]),Art=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Trt=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Mrt=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Frt(e,t,n){var u,c,f,d;const r=vrt(),i=xrt(),o=krt(),s=r.defaultQueryOptions(e);(c=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||c.call(u,s),s._optimisticResults=i?"isRestoring":"optimistic",Art(s),_rt(s,o),Ert(o);const[a]=F.useState(()=>new t(r,s)),l=a.getOptimisticResult(s);if(F.useSyncExternalStore(F.useCallback(h=>{const p=i?()=>{}:a.subscribe(qn.batchCalls(h));return a.updateResult(),p},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),F.useEffect(()=>{a.setOptions(s,{listeners:!1})},[s,a]),Trt(s,l))throw Mrt(s,a,o);if($rt({result:l,errorResetBoundary:o,throwOnError:s.throwOnError,query:r.getQueryCache().get(s.queryHash)}))throw l.error;return(d=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||d.call(f,s,l),s.notifyOnChangeProps?l:a.trackResult(l)}function Prt(e,t){return Frt(e,grt)}function s9(){const e=pE(r=>r.python),{isLoading:t,data:n}=Prt({queryKey:["loadPyodide",e],queryFn:async()=>e==="server"?null:await e9()});return{loadingPyodide:e==="pyodide"&&t,pyodide:n}}function Rrt(){const{apiKey:e,setApiKey:t,python:n,setPython:r}=pE(),{loadingPyodide:i}=s9(),{colorMode:o,toggleColorMode:s}=Bg(),a=CCe(),l=p=>{t(p.target.value)},u=()=>{console.log("Downloading logs...")},[c,f]=F.useState("en"),d=async()=>{!await r(n==="pyodide"?"server":"pyodide")&&!a.isActive("server-not-available")&&a({id:"server-not-available",position:"bottom",title:"Server is not available.",description:"Failed to access Python backend. Only local Pyodide is available. Please refer the GitHub README for more information.",status:"error",duration:3e3,isClosable:!0,containerStyle:{margin:10}})};return{python:n,handleServerButtonClick:()=>{d()},apiKey:e,loadingPyodide:i,handleApiKeyChange:l,handleDownloadLogs:u,colorMode:o,toggleColorMode:s,locale:c,setLocale:f}}function Drt({chart:e,handleClickBookmark:t}){const{drawerBgColor:n,thumbnailSize:r}=Ds();return E.jsxs(WX,{as:Ot,flexDir:"column",children:[E.jsxs(Ot,{p:1,gap:2,borderRadius:"md",onClick:()=>t(e),_hover:{cursor:"pointer",bg:n},children:[!!e.thumbnail&&E.jsx(RX,{src:e.thumbnail,alt:`Chart thumbnail ${e.title}`,w:r,h:r}),E.jsxs(Ot,{flexDir:"column",children:[E.jsx(ev,{size:"sm",children:e.fields.map(i=>i.name).join(" & ")}),E.jsx(un,{size:"xs",children:"This chart is very good"})]})]}),E.jsx(xP,{my:1})]},`bookmark-${e.key}`)}function Ort({...e}){const{preferredCharts:t,handleClickBookmark:n}=pnt(),{scrollbarStyle:r}=Ds();return E.jsx(td,{...e,display:"flex",flexDirection:"column",height:"full",children:E.jsx(VX,{m:0,p:0,width:"full",overflowY:"auto",sx:r,children:t.map(i=>E.jsx(Drt,{chart:i,handleClickBookmark:n},`bookmark-${i.key}`))})})}const mW={};function EM(e,t){e===void 0&&(e=mW),t===void 0&&(t=mW);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}function Nrt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Irt(e,t,n){n&&(Nrt(n)?n(e.data(t)):e.change(t,Yo.changeset().remove(()=>!0).insert(n)))}function Lrt(e,t){Object.keys(t).forEach(n=>{Irt(e,n,t[n])})}function aue(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const lue=()=>{};function mA(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}var zrt=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const Brt=Fl(zrt);function jrt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=aue([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!Brt(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function yW(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function yA(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function j0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class uue extends zi.PureComponent{constructor(){super(...arguments),j0(this,"containerRef",zi.createRef()),j0(this,"resultPromise",void 0),j0(this,"handleError",t=>{const{onError:n=lue}=this.props;n(t,this.containerRef.current),console.warn(t)}),j0(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=aue([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=jrt(yA(this.props),yA(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!EM(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&yW(a,o),i&&mA(a,i)),a.run()})}else EM(i,o)||this.modifyView(s=>{o&&yW(s,o),i&&mA(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=yA(this.props);this.resultPromise=Ele(this.containerRef.current,a,s).then(l=>{if(l){const{view:u}=l;mA(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return zi.createElement("div",{ref:this.containerRef,className:t,style:n})}}j0(uue,"propTypes",{className:Q7.string,onError:Q7.func});function $M(){return $M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$M.apply(this,arguments)}function AM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Urt={};class cue extends zi.PureComponent{constructor(){super(...arguments),AM(this,"vegaEmbed",zi.createRef()),AM(this,"handleNewView",t=>{this.update();const{onNewView:n=lue}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){EM(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Lrt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return zi.createElement(uue,$M({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}AM(cue,"defaultProps",{data:Urt});function TM(){return TM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TM.apply(this,arguments)}function Vrt(e){return zi.createElement(cue,TM({},e,{mode:"vega-lite"}))}function Wrt({chart:e,...t}){const{data:n,chartTheme:r,spec:i}=gnt(e);return E.jsxs(qp,{maxW:"800px",scrollSnapAlign:"start",...t,children:[E.jsx(ev,{children:e.title}),E.jsx(Vrt,{spec:i,data:n,theme:r,actions:!1,renderer:"canvas",logLevel:aC}),E.jsx(Ot,{minH:{base:"300px",lg:"0px"}})]})}const Hrt=F.memo(Wrt);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */var qrt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=(e,t)=>{const n=F.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=1.5,className:s="",children:a,...l},u)=>{const c={ref:u,...qrt,width:i,height:i,strokeWidth:o,color:r,className:s,...l};return F.createElement("svg",c,(t==null?void 0:t.map(([f,d])=>F.createElement(f,{key:d.id,...d})))??[],...Array.isArray(a)?a:[a])});return n.displayName=`${e}Icon`,n};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Grt=Wt("ArrowDown01Icon",[["path",{d:"M18 9.00005C18 9.00005 13.5811 15 12 15C10.4188 15 6 9 6 9",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Yrt=Wt("ArrowLeft01Icon",[["path",{d:"M15 6C15 6 9.00001 10.4189 9 12C8.99999 13.5812 15 18 15 18",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Xrt=Wt("ArrowRight01Icon",[["path",{d:"M9.00005 6C9.00005 6 15 10.4189 15 12C15 13.5812 9 18 9 18",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Krt=Wt("Calendar03Icon",[["path",{d:"M18 2V4M6 2V4",stroke:"currentColor",key:"k0"}],["path",{d:"M11.9955 13H12.0045M11.9955 17H12.0045M15.991 13H16M8 13H8.00897M8 17H8.00897",stroke:"currentColor",key:"k1"}],["path",{d:"M3.5 8H20.5",stroke:"currentColor",key:"k2"}],["path",{d:"M2.5 12.2432C2.5 7.88594 2.5 5.70728 3.75212 4.35364C5.00424 3 7.01949 3 11.05 3H12.95C16.9805 3 18.9958 3 20.2479 4.35364C21.5 5.70728 21.5 7.88594 21.5 12.2432V12.7568C21.5 17.1141 21.5 19.2927 20.2479 20.6464C18.9958 22 16.9805 22 12.95 22H11.05C7.01949 22 5.00424 22 3.75212 20.6464C2.5 19.2927 2.5 17.1141 2.5 12.7568V12.2432Z",stroke:"currentColor",key:"k3"}],["path",{d:"M3 8H21",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Qrt=Wt("CloudIcon",[["path",{d:"M17.4776 10.0001C17.485 10 17.4925 10 17.5 10C19.9853 10 22 12.0147 22 14.5C22 16.9853 19.9853 19 17.5 19H7C4.23858 19 2 16.7614 2 14C2 11.4003 3.98398 9.26407 6.52042 9.0227M17.4776 10.0001C17.4924 9.83536 17.5 9.66856 17.5 9.5C17.5 6.46243 15.0376 4 12 4C9.12324 4 6.76233 6.20862 6.52042 9.0227M17.4776 10.0001C17.3753 11.1345 16.9286 12.1696 16.2428 13M6.52042 9.0227C6.67826 9.00768 6.83823 9 7 9C8.12582 9 9.16474 9.37209 10.0005 10",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Zrt=Wt("DiscoverCircleIcon",[["path",{d:"M22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M12.4014 8.29796L15.3213 7.32465C16.2075 7.02924 16.6507 6.88153 16.8846 7.11544C17.1185 7.34935 16.9708 7.79247 16.6753 8.67871L15.702 11.5986C15.1986 13.1088 14.9469 13.8639 14.4054 14.4054C13.8639 14.9469 13.1088 15.1986 11.5986 15.702L8.67871 16.6753C7.79247 16.9708 7.34935 17.1185 7.11544 16.8846C6.88153 16.6507 7.02924 16.2075 7.32465 15.3213L8.29796 12.4014C8.80136 10.8912 9.05306 10.1361 9.59457 9.59457C10.1361 9.05306 10.8912 8.80136 12.4014 8.29796Z",stroke:"currentColor",key:"k1"}],["path",{d:"M12 12L11.9936 12.0064",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Jrt=Wt("Exchange01Icon",[["path",{d:"M16.9767 19.5C19.4017 17.8876 21 15.1305 21 12C21 7.02944 16.9706 3 12 3C11.3126 3 10.6432 3.07706 10 3.22302M16.9767 19.5V16M16.9767 19.5H20.5M7 4.51555C4.58803 6.13007 3 8.87958 3 12C3 16.9706 7.02944 21 12 21C12.6874 21 13.3568 20.9229 14 20.777M7 4.51555V8M7 4.51555H3.5",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const eit=Wt("FileAttachmentIcon",[["path",{d:"M4 12.0004L4 14.5446C4 17.7896 4 19.4121 4.88607 20.5111C5.06508 20.7331 5.26731 20.9354 5.48933 21.1144C6.58831 22.0004 8.21082 22.0004 11.4558 22.0004C12.1614 22.0004 12.5141 22.0004 12.8372 21.8864C12.9044 21.8627 12.9702 21.8354 13.0345 21.8047C13.3436 21.6569 13.593 21.4074 14.0919 20.9085L18.8284 16.172C19.4065 15.5939 19.6955 15.3049 19.8478 14.9374C20 14.5698 20 14.1611 20 13.3436V10.0004C20 6.22919 20 4.34358 18.8284 3.172C17.7693 2.11284 16.1265 2.01122 13.0345 2.00146M13 21.5004V21.0004C13 18.172 13 16.7578 13.8787 15.8791C14.7574 15.0004 16.1716 15.0004 19 15.0004H19.5",stroke:"currentColor",key:"k0"}],["path",{d:"M4 8.23028V5.46105C4 3.54929 5.567 1.99951 7.5 1.99951C9.433 1.99951 11 3.54929 11 5.46105V9.26874C11 10.2246 10.2165 10.9995 9.25 10.9995C8.2835 10.9995 7.5 10.2246 7.5 9.26874V5.46105",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const tit=Wt("GithubIcon",[["path",{d:"M10 20.5675C6.57143 21.7248 3.71429 20.5675 2 17",stroke:"currentColor",key:"k0"}],["path",{d:"M10 22V18.7579C10 18.1596 10.1839 17.6396 10.4804 17.1699C10.6838 16.8476 10.5445 16.3904 10.1771 16.2894C7.13394 15.4528 5 14.1077 5 9.64606C5 8.48611 5.38005 7.39556 6.04811 6.4464C6.21437 6.21018 6.29749 6.09208 6.31748 5.9851C6.33746 5.87813 6.30272 5.73852 6.23322 5.45932C5.95038 4.32292 5.96871 3.11619 6.39322 2.02823C6.39322 2.02823 7.27042 1.74242 9.26698 2.98969C9.72282 3.27447 9.95075 3.41686 10.1515 3.44871C10.3522 3.48056 10.6206 3.41384 11.1573 3.28041C11.8913 3.09795 12.6476 3 13.5 3C14.3524 3 15.1087 3.09795 15.8427 3.28041C16.3794 3.41384 16.6478 3.48056 16.8485 3.44871C17.0493 3.41686 17.2772 3.27447 17.733 2.98969C19.7296 1.74242 20.6068 2.02823 20.6068 2.02823C21.0313 3.11619 21.0496 4.32292 20.7668 5.45932C20.6973 5.73852 20.6625 5.87813 20.6825 5.9851C20.7025 6.09207 20.7856 6.21019 20.9519 6.4464C21.6199 7.39556 22 8.48611 22 9.64606C22 14.1077 19.8661 15.4528 16.8229 16.2894C16.4555 16.3904 16.3162 16.8476 16.5196 17.1699C16.8161 17.6396 17 18.1596 17 18.7579V22",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const nit=Wt("GridIcon",[["path",{d:"M7 2V22",stroke:"currentColor",key:"k0"}],["path",{d:"M17 2V22",stroke:"currentColor",key:"k1"}],["path",{d:"M22 7L2 7",stroke:"currentColor",key:"k2"}],["path",{d:"M22 17L2 17",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const rit=Wt("HeartAddIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 17H22M18 13L18 21",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const fue=Wt("HeartCheckIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 18C14 18 15 18 16 20C16 20 19.1765 15 22 14",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const iit=Wt("LabelImportantIcon",[["path",{d:"M13 4H6.23456C3.79424 4 2.57407 4 2.14438 4.76649C2.13129 4.78984 2.11883 4.81353 2.10701 4.83754C1.71893 5.62592 2.41032 6.63129 3.7931 8.64204C4.89612 10.246 5.44763 11.048 5.4611 11.9555C5.46154 11.9852 5.46154 12.0148 5.4611 12.0445C5.44763 12.952 4.89612 13.754 3.7931 15.358C2.41032 17.3687 1.71893 18.3741 2.10701 19.1625C2.11883 19.1865 2.13129 19.2102 2.14438 19.2335C2.57407 20 3.79424 20 6.23456 20H13C14.9628 20 15.9443 20 16.7889 19.5777C17.6334 19.1554 18.2223 18.3703 19.4 16.8C21.1333 14.4889 22 13.3333 22 12C22 10.6667 21.1333 9.51111 19.4 7.2C18.2223 5.62972 17.6334 4.84458 16.7889 4.42229C15.9443 4 14.9628 4 13 4Z",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const oit=Wt("Moon01Icon",[["path",{d:"M21.0985 7.84477C20.458 8.55417 19.5311 9 18.5 9C16.567 9 15 7.433 15 5.5C15 4.46895 15.4458 3.54203 16.1552 2.90149M21.0985 7.84477C21.6774 9.11025 22 10.5174 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C13.4826 2 14.8898 2.32262 16.1552 2.90149M21.0985 7.84477C20.0998 5.66155 18.3384 3.90018 16.1552 2.90149",stroke:"currentColor",key:"k0"}],["path",{d:"M10 8H10.0064",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14H7.00635",stroke:"currentColor",key:"k2"}],["path",{d:"M16 16C16 17.1046 15.1046 18 14 18C12.8954 18 12 17.1046 12 16C12 14.8954 12.8954 14 14 14C15.1046 14 16 14.8954 16 16Z",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const sit=Wt("PresentationBarChart01Icon",[["path",{d:"M12 18V22",stroke:"currentColor",key:"k0"}],["path",{d:"M10 18L5 22",stroke:"currentColor",key:"k1"}],["path",{d:"M14 18L19 22",stroke:"currentColor",key:"k2"}],["path",{d:"M2.5 12C2.5 14.8284 2.5 16.2426 3.37868 17.1213C4.25736 18 5.67157 18 8.5 18H15.5C18.3284 18 19.7426 18 20.6213 17.1213C21.5 16.2426 21.5 14.8284 21.5 12V8C21.5 5.17157 21.5 3.75736 20.6213 2.87868C19.7426 2 18.3284 2 15.5 2H8.5C5.67157 2 4.25736 2 3.37868 2.87868C2.5 3.75736 2.5 5.17157 2.5 8V12Z",stroke:"currentColor",key:"k3"}],["path",{d:"M8 13V10M12 13V7M16 13V11",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const ait=Wt("ProfileIcon",[["path",{d:"M2.5 12C2.5 7.52166 2.5 5.28249 3.89124 3.89124C5.28249 2.5 7.52166 2.5 12 2.5C16.4783 2.5 18.7175 2.5 20.1088 3.89124C21.5 5.28249 21.5 7.52166 21.5 12C21.5 16.4783 21.5 18.7175 20.1088 20.1088C18.7175 21.5 16.4783 21.5 12 21.5C7.52166 21.5 5.28249 21.5 3.89124 20.1088C2.5 18.7175 2.5 16.4783 2.5 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 7L17 7",stroke:"currentColor",key:"k1"}],["path",{d:"M7 7L8 7",stroke:"currentColor",key:"k2"}],["path",{d:"M7 12L8 12",stroke:"currentColor",key:"k3"}],["path",{d:"M7 17L8 17",stroke:"currentColor",key:"k4"}],["path",{d:"M11 12L17 12",stroke:"currentColor",key:"k5"}],["path",{d:"M11 17L17 17",stroke:"currentColor",key:"k6"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const lit=Wt("Settings01Icon",[["path",{d:"M21.3175 7.14139L20.8239 6.28479C20.4506 5.63696 20.264 5.31305 19.9464 5.18388C19.6288 5.05472 19.2696 5.15664 18.5513 5.36048L17.3311 5.70418C16.8725 5.80994 16.3913 5.74994 15.9726 5.53479L15.6357 5.34042C15.2766 5.11043 15.0004 4.77133 14.8475 4.37274L14.5136 3.37536C14.294 2.71534 14.1842 2.38533 13.9228 2.19657C13.6615 2.00781 13.3143 2.00781 12.6199 2.00781H11.5051C10.8108 2.00781 10.4636 2.00781 10.2022 2.19657C9.94085 2.38533 9.83106 2.71534 9.61149 3.37536L9.27753 4.37274C9.12465 4.77133 8.84845 5.11043 8.48937 5.34042L8.15249 5.53479C7.73374 5.74994 7.25259 5.80994 6.79398 5.70418L5.57375 5.36048C4.85541 5.15664 4.49625 5.05472 4.17867 5.18388C3.86109 5.31305 3.67445 5.63696 3.30115 6.28479L2.80757 7.14139C2.45766 7.74864 2.2827 8.05227 2.31666 8.37549C2.35061 8.69871 2.58483 8.95918 3.05326 9.48012L4.0843 10.6328C4.3363 10.9518 4.51521 11.5078 4.51521 12.0077C4.51521 12.5078 4.33636 13.0636 4.08433 13.3827L3.05326 14.5354C2.58483 15.0564 2.35062 15.3168 2.31666 15.6401C2.2827 15.9633 2.45766 16.2669 2.80757 16.8741L3.30114 17.7307C3.67443 18.3785 3.86109 18.7025 4.17867 18.8316C4.49625 18.9608 4.85542 18.8589 5.57377 18.655L6.79394 18.3113C7.25263 18.2055 7.73387 18.2656 8.15267 18.4808L8.4895 18.6752C8.84851 18.9052 9.12464 19.2442 9.2775 19.6428L9.61149 20.6403C9.83106 21.3003 9.94085 21.6303 10.2022 21.8191C10.4636 22.0078 10.8108 22.0078 11.5051 22.0078H12.6199C13.3143 22.0078 13.6615 22.0078 13.9228 21.8191C14.1842 21.6303 14.294 21.3003 14.5136 20.6403L14.8476 19.6428C15.0004 19.2442 15.2765 18.9052 15.6356 18.6752L15.9724 18.4808C16.3912 18.2656 16.8724 18.2055 17.3311 18.3113L18.5513 18.655C19.2696 18.8589 19.6288 18.9608 19.9464 18.8316C20.264 18.7025 20.4506 18.3785 20.8239 17.7307L21.3175 16.8741C21.6674 16.2669 21.8423 15.9633 21.8084 15.6401C21.7744 15.3168 21.5402 15.0564 21.0718 14.5354L20.0407 13.3827C19.7887 13.0636 19.6098 12.5078 19.6098 12.0077C19.6098 11.5078 19.7888 10.9518 20.0407 10.6328L21.0718 9.48012C21.5402 8.95918 21.7744 8.69871 21.8084 8.37549C21.8423 8.05227 21.6674 7.74864 21.3175 7.14139Z",stroke:"currentColor",key:"k0"}],["path",{d:"M15.5195 12C15.5195 13.933 13.9525 15.5 12.0195 15.5C10.0865 15.5 8.51953 13.933 8.51953 12C8.51953 10.067 10.0865 8.5 12.0195 8.5C13.9525 8.5 15.5195 10.067 15.5195 12Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const uit=Wt("SmartPhone01Icon",[["path",{d:"M5 9C5 5.70017 5 4.05025 6.02513 3.02513C7.05025 2 8.70017 2 12 2C15.2998 2 16.9497 2 17.9749 3.02513C19 4.05025 19 5.70017 19 9V15C19 18.2998 19 19.9497 17.9749 20.9749C16.9497 22 15.2998 22 12 22C8.70017 22 7.05025 22 6.02513 20.9749C5 19.9497 5 18.2998 5 15V9Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 19H13",stroke:"currentColor",key:"k1"}],["path",{d:"M9 2L9.089 2.53402C9.28188 3.69129 9.37832 4.26993 9.77519 4.62204C10.1892 4.98934 10.7761 5 12 5C13.2239 5 13.8108 4.98934 14.2248 4.62204C14.6217 4.26993 14.7181 3.69129 14.911 2.53402L15 2",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const due=Wt("StartUp02Icon",[["path",{d:"M7 11.2947C12.284 1.44656 18.8635 1.333 21.4928 2.50724C22.667 5.1365 22.5534 11.716 12.7053 17C12.6031 16.4129 12.0352 14.8749 10.5801 13.4199C9.12512 11.9648 7.58712 11.3969 7 11.2947Z",stroke:"currentColor",key:"k0"}],["path",{d:"M14 16.8C16.0428 17.7334 16.2609 19.4069 16.5439 21C16.5439 21 20.8223 18.0481 18.0856 14",stroke:"currentColor",key:"k1"}],["path",{d:"M7.19998 9.99987C6.26664 7.95709 4.59305 7.73899 3 7.45601C3 7.45601 5.95194 3.17753 10 5.91431",stroke:"currentColor",key:"k2"}],["path",{d:"M6.20866 13.9998C5.57677 14.6317 4.50255 16.4642 5.26082 18.739C7.53564 19.4973 9.36813 18.4231 10 17.7912",stroke:"currentColor",key:"k3"}],["path",{d:"M18.0952 7.753C18.0952 6.7328 17.2682 5.90578 16.248 5.90578C15.2278 5.90578 14.4008 6.7328 14.4008 7.753C14.4008 8.77319 15.2278 9.60022 16.248 9.60022C17.2682 9.60022 18.0952 8.77319 18.0952 7.753Z",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const cit=Wt("Sun03Icon",[["path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M12 2V3.5M12 20.5V22M19.0708 19.0713L18.0101 18.0106M5.98926 5.98926L4.9286 4.9286M22 12H20.5M3.5 12H2M19.0713 4.92871L18.0106 5.98937M5.98975 18.0107L4.92909 19.0714",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const fit=Wt("SwipeLeft02Icon",[["path",{d:"M15 4.50195H21M15 4.50195C15 3.80172 16.9943 2.49348 17.5 2.00195M15 4.50195C15 5.20218 16.9943 6.51042 17.5 7.00195",stroke:"currentColor",key:"k0"}],["path",{d:"M15.3913 21.998C15.3395 20.084 15.4684 19.8535 15.6052 19.4277C15.7419 19.002 16.6982 17.4665 17.0366 16.3695C18.1313 12.8202 17.111 12.0653 15.7507 11.0588C14.2422 9.94257 11.3968 9.37728 9.98573 9.49966V3.7462C9.98573 2.78288 9.20481 2.00195 8.24148 2.00195C7.27816 2.00195 6.49723 2.78288 6.49723 3.7462V9.96607M6.49774 21.9988V20.9854C6.43328 20.041 5.49529 18.9235 4.32672 17.3166C3.12509 15.576 2.86688 14.6973 3.05591 13.8848C3.15329 13.4694 3.40594 12.7832 4.64647 11.6104L6.49723 9.96607M6.49723 14.0323V9.96607",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const dit=Wt("Tag01Icon",[["circle",{cx:"1.5",cy:"1.5",r:"1.5",transform:"matrix(1 0 0 -1 16 8)",stroke:"currentColor",key:"k0"}],["path",{d:"M2.77423 11.1439C1.77108 12.2643 1.7495 13.9546 2.67016 15.1437C4.49711 17.5033 6.49674 19.5029 8.85633 21.3298C10.0454 22.2505 11.7357 22.2289 12.8561 21.2258C15.8979 18.5022 18.6835 15.6559 21.3719 12.5279C21.6377 12.2187 21.8039 11.8397 21.8412 11.4336C22.0062 9.63798 22.3452 4.46467 20.9403 3.05974C19.5353 1.65481 14.362 1.99377 12.5664 2.15876C12.1603 2.19608 11.7813 2.36233 11.472 2.62811C8.34412 5.31646 5.49781 8.10211 2.77423 11.1439Z",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14L10 17",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const hit=Wt("TextFontIcon",[["path",{d:"M14 19L11.1069 10.7479C9.76348 6.91597 9.09177 5 8 5C6.90823 5 6.23652 6.91597 4.89309 10.7479L2 19M4.5 12H11.5",stroke:"currentColor",key:"k0"}],["path",{d:"M21.9692 13.9392V18.4392M21.9692 13.9392C22.0164 13.1161 22.0182 12.4891 21.9194 11.9773C21.6864 10.7709 20.4258 10.0439 19.206 9.89599C18.0385 9.75447 17.1015 10.055 16.1535 11.4363M21.9692 13.9392L19.1256 13.9392C18.6887 13.9392 18.2481 13.9603 17.8272 14.0773C15.2545 14.7925 15.4431 18.4003 18.0233 18.845C18.3099 18.8944 18.6025 18.9156 18.8927 18.9026C19.5703 18.8724 20.1955 18.545 20.7321 18.1301C21.3605 17.644 21.9692 16.9655 21.9692 15.9392V13.9392Z",stroke:"currentColor",key:"k1"}]]);function pit(){return E.jsxs(J1,{w:"full",color:"gray",gap:1,mt:4,p:0,children:[E.jsxs(Ot,{gap:1,children:[E.jsx(un,{fontSize:"xs",textAlign:"center",children:"Swipytics @ 2024"}),E.jsx(o2,{href:"https://jiwnchoi.me",isExternal:!0,children:E.jsx(un,{fontSize:"xs",textAlign:"center",textDecoration:"underline",children:"Jiwon Choi"})}),E.jsx(un,{fontSize:"xs",textAlign:"center",children:"All rights reserved."})]}),E.jsxs(Ot,{gap:4,children:[E.jsx(o2,{href:"https://github.com/jiwnchoi/Swipytics",isExternal:!0,children:E.jsx(Su,{leftIcon:E.jsx(Mt,{as:tit}),size:"xs",variant:"link",color:"gray",children:"Github"})}),E.jsx(o2,{href:"https://idclab.skku.edu",isExternal:!0,children:E.jsxs(Su,{variant:"link",size:"xs",leftIcon:E.jsx(Mt,{as:iit}),color:"gray",children:[E.jsx(un,{fontFamily:"Rajdhani",fontWeight:600,fontSize:"sm",children:"IDC"}),E.jsx(un,{fontFamily:"Rajdhani",fontWeight:500,fontSize:"sm",children:"Lab"})]})})]})]})}function git(e){const{mobile:t}=Ds();return E.jsxs(Ot,{justify:t?"start":"center",...e,children:[E.jsxs(qp,{flexDir:"column",minH:"400px",children:[E.jsxs(qp,{gap:2,mb:4,children:[E.jsx(Mt,{as:fit,boxSize:16}),E.jsx(ev,{fontSize:48,children:"Swipytics"})]}),E.jsx(un,{textColor:"gray",textAlign:"center",children:"The Simplest On-the-fly Exploratory Analytics"})]}),E.jsx(pit,{})]})}const mit=F.memo(git);function yit(e){const{charts:t,ref:n}=ynt(),{cardHeight:r,cardColor:i,cardWidth:o}=Ds();return E.jsxs(Ot,{ref:n,scrollSnapType:"x mandatory",overflowX:"auto",style:{WebkitOverflowScrolling:"touch"},sx:{"&::-webkit-scrollbar":{display:"none"}},...e,children:[E.jsx(mit,{flexDir:"column",minW:"full",w:o,maxW:o,minH:r,bgColor:i,borderRadius:"lg",scrollSnapAlign:"center"}),t.map(s=>E.jsx(Hrt,{minW:o,maxW:o,chart:s,minH:r,bgColor:i,flexDirection:"column",borderRadius:"lg"},s.key))]})}function vit(e){const{sessionInitialized:t,chartDisplaying:n,currentChartPreferred:r,handleNextChart:i,handlePrevChart:o,handleRenewChart:s,handlePreferChart:a}=vnt();return E.jsxs(Ot,{...e,children:[E.jsx(ku,{size:"lg",w:"full","aria-label":"Previous chart",icon:E.jsx(Mt,{as:Yrt}),onClick:o,isDisabled:!t||!n}),E.jsx(ku,{size:"lg",w:"full","aria-label":"Next chart",icon:E.jsx(Mt,{as:Xrt}),onClick:i,isDisabled:!t}),E.jsx(ku,{size:"lg",w:"full","aria-label":"Renew current chart",icon:E.jsx(Mt,{as:Jrt}),onClick:s,isDisabled:!t||!n}),E.jsx(ku,{size:"lg",w:"full","aria-label":"Bookmark current chart",icon:E.jsx(Mt,{as:r?fue:rit}),onClick:a,colorScheme:r?"red":"gray",isDisabled:!t||!n})]})}function bit({children:e,controller:t,...n}){const{animate:r,dragControls:i,handleDragEnd:o,bodyRef:s,handleRef:a,navigatorRef:l,navigatorBounds:u,variants:c}=Cnt(),{drawerBgColor:f}=Ds();return E.jsxs(Jk.div,{dragControls:i,style:{width:"100%",left:0,position:"fixed"},variants:c,initial:r,animate:r,drag:"y",dragListener:!0,dragConstraints:{bottom:0,top:0},dragElastic:0,onDragEnd:o,whileTap:{cursor:"grabbing"},children:[E.jsxs(qp,{...n,h:"fit-content",flexDir:"column",gap:0,borderRadius:"xl",boxShadow:"0px -4px 10px rgba(0, 0, 0, 0.1)",bgColor:f,children:[E.jsx(Ot,{bgColor:"gray",minH:1,mt:2,borderRadius:4,minW:10,ref:a}),E.jsx(Ot,{w:"full",ref:s,p:4,flexDir:"column",children:e}),E.jsx(Ot,{minH:"100dvh"})]}),E.jsx(H1,{children:E.jsx(Ot,{onPointerDown:d=>i.start(d),bgColor:f,ref:l,position:"absolute",top:`calc(100dvh - ${u.height}px)`,p:4,pb:8,left:0,zIndex:500,w:"full",children:t})})]})}function xit({children:e,...t}){const{tabPanelHeight:n}=Ds();return E.jsx(Ot,{...t,children:E.jsx(J1,{w:"full",h:n,gap:4,rounded:"lg",p:4,align:"start",minH:"full",children:e})})}function wit({children:e,controller:t,...n}){const{mobile:r}=Ds();return r?E.jsx(bit,{...n,controller:t,children:e}):E.jsxs(xit,{...n,children:[e,E.jsx(bP,{}),t]})}function Sit(e){const{loadingPyodide:t}=s9(),{loadingData:n,fileInputRef:r,pathInput:i,inputDisabled:o,handleFileButtonClick:s,handleFileChange:a,handleInputChange:l,handleSubmit:u}=Ent();return E.jsxs(Ot,{as:OX,...e,children:[E.jsxs(BX,{children:[E.jsx(Jy,{placeholder:"https://...",onChange:l,value:i,borderRightRadius:0,_focusVisible:{borderColor:Rr}}),E.jsxs(yP,{children:[E.jsx(Jy,{type:"file",display:"none",ref:r,onChange:a,accept:".csv,.json"}),E.jsx(ku,{"aria-label":"Select File",icon:E.jsx(Mt,{as:eit}),variant:"link",onClick:s})]})]}),E.jsx(ku,{borderLeftRadius:0,colorScheme:Rr,type:"submit",isLoading:n||t,icon:E.jsx(Mt,{as:due}),"aria-label":"Load Data",isDisabled:o,onClick:u,children:o?"Please Input Data":"Load Data"})]})}const kit=({metadataType:e,...t})=>{switch(e){case"numeric":return E.jsx(Mt,{as:nit,...t});case"categorical":return E.jsx(Mt,{as:hit,...t});case"datetime":return E.jsx(Mt,{as:Krt,...t});case"name":return E.jsx(Mt,{as:dit,...t});default:return null}},r0=iv(".3~s");function qo({children:e}){return E.jsx(Ot,{flexDir:"column",justify:"center",alignItems:"start",w:"full",h:"full",children:E.jsx(YX,{children:e})})}function Cit({metadata:e}){switch(e.type){case"datetime":return E.jsxs(ay,{gridTemplateColumns:"1fr 4fr",children:[E.jsx(qo,{children:"min"}),E.jsx(un,{children:e.min}),E.jsx(qo,{children:"max"}),E.jsx(un,{children:e.max})]});case"numeric":return E.jsxs(ay,{gridTemplateColumns:"2fr 3fr 2fr 3fr",children:[E.jsx(qo,{children:"min"}),E.jsx(un,{children:r0(e.min)}),E.jsx(qo,{children:"max"}),E.jsx(un,{children:r0(e.max)}),E.jsx(qo,{children:"mean"}),E.jsx(un,{children:r0(e.mean)}),E.jsx(qo,{children:"median"}),E.jsx(un,{children:r0(e.median)}),E.jsx(qo,{children:"std"}),E.jsx(un,{children:r0(e.std)})]});case"categorical":return E.jsxs(ay,{gridTemplateColumns:"1fr 4fr",children:[E.jsx(qo,{children:"top"}),E.jsx(un,{children:e.top}),E.jsx(qo,{children:"freq"}),E.jsx(un,{children:e.freq})]});case"name":default:return null}}function _it({field:e}){return E.jsxs(TX,{children:[E.jsx(EX,{borderRadius:"md",children:E.jsxs(Ot,{w:"full",gap:2,align:"center",children:[E.jsx(kit,{metadataType:e.type,boxSize:4}),E.jsx(ev,{fontSize:"md",children:e.name}),E.jsx(bP,{}),E.jsx(AX,{})]})}),E.jsxs(FX,{px:2,pb:2,children:[E.jsxs(ay,{gridTemplateColumns:"2fr 3fr 2fr 3fr",children:[E.jsx(qo,{children:"unique"}),E.jsx(un,{children:e.metadata.unique}),E.jsx(qo,{children:"missing"}),E.jsx(un,{children:e.metadata.missing})]}),E.jsx(Cit,{metadata:e.metadata})]})]})}function Eit(e){const t=cn(r=>r.fields),{scrollbarStyle:n}=Ds();return E.jsx(td,{as:J1,h:"full",...e,children:E.jsx(Ot,{h:"full",w:"full",sx:n,overflowY:"auto",flexDir:"column",children:E.jsx(PX,{allowMultiple:!0,children:t.map(r=>E.jsx(_it,{field:r},r.name))})})})}function $it(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var hue=$it,Ait=typeof bu=="object"&&bu&&bu.Object===Object&&bu,Tit=Ait,Mit=Tit,Fit=typeof self=="object"&&self&&self.Object===Object&&self,Pit=Mit||Fit||Function("return this")(),pue=Pit,Rit=pue,Dit=function(){return Rit.Date.now()},Oit=Dit,Nit=/\s/;function Iit(e){for(var t=e.length;t--&&Nit.test(e.charAt(t)););return t}var Lit=Iit,zit=Lit,Bit=/^\s+/;function jit(e){return e&&e.slice(0,zit(e)+1).replace(Bit,"")}var Uit=jit,Vit=pue,Wit=Vit.Symbol,gue=Wit,vW=gue,mue=Object.prototype,Hit=mue.hasOwnProperty,qit=mue.toString,i0=vW?vW.toStringTag:void 0;function Git(e){var t=Hit.call(e,i0),n=e[i0];try{e[i0]=void 0;var r=!0}catch{}var i=qit.call(e);return r&&(t?e[i0]=n:delete e[i0]),i}var Yit=Git,Xit=Object.prototype,Kit=Xit.toString;function Qit(e){return Kit.call(e)}var Zit=Qit,bW=gue,Jit=Yit,eot=Zit,tot="[object Null]",not="[object Undefined]",xW=bW?bW.toStringTag:void 0;function rot(e){return e==null?e===void 0?not:tot:xW&&xW in Object(e)?Jit(e):eot(e)}var iot=rot;function oot(e){return e!=null&&typeof e=="object"}var sot=oot,aot=iot,lot=sot,uot="[object Symbol]";function cot(e){return typeof e=="symbol"||lot(e)&&aot(e)==uot}var fot=cot,dot=Uit,wW=hue,hot=fot,SW=NaN,pot=/^[-+]0x[0-9a-f]+$/i,got=/^0b[01]+$/i,mot=/^0o[0-7]+$/i,yot=parseInt;function vot(e){if(typeof e=="number")return e;if(hot(e))return SW;if(wW(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=wW(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=dot(e);var n=got.test(e);return n||mot.test(e)?yot(e.slice(2),n?2:8):pot.test(e)?SW:+e}var bot=vot,xot=hue,vA=Oit,kW=bot,wot="Expected a function",Sot=Math.max,kot=Math.min;function Cot(e,t,n){var r,i,o,s,a,l,u=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(wot);t=kW(t)||0,xot(n)&&(c=!!n.leading,f="maxWait"in n,o=f?Sot(kW(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d);function h(k){var S=r,C=i;return r=i=void 0,u=k,s=e.apply(C,S),s}function p(k){return u=k,a=setTimeout(y,t),c?h(k):s}function g(k){var S=k-l,C=k-u,_=t-S;return f?kot(_,o-C):_}function m(k){var S=k-l,C=k-u;return l===void 0||S>=t||S<0||f&&C>=o}function y(){var k=vA();if(m(k))return v(k);a=setTimeout(y,g(k))}function v(k){return a=void 0,d&&r?h(k):(r=i=void 0,s)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function x(){return a===void 0?s:v(vA())}function w(){var k=vA(),S=m(k);if(r=arguments,i=this,l=k,S){if(a===void 0)return p(l);if(f)return clearTimeout(a),a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),s}return w.cancel=b,w.flush=x,w}var _ot=Cot;const Eot=Fl(_ot);function fk(){return fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fk.apply(this,arguments)}var $ot=[],CW={width:0,height:0,top:0,left:0};function Aot(e){var t=e===void 0?{}:e,n=t.initialSize,r=n===void 0?CW:n,i=t.debounceTime,o=i===void 0?300:i,s=t.ignoreDimensions,a=s===void 0?$ot:s,l=t.enableDebounceLeadingCall,u=l===void 0?!0:l,c=t.resizeObserverPolyfill,f=F.useRef(null),d=F.useRef(0),h=F.useState(fk({},CW,r)),p=h[0],g=h[1],m=F.useMemo(function(){var y=Array.isArray(a)?a:[a];return Eot(function(v){g(function(b){var x=Object.keys(b),w=x.filter(function(S){return b[S]!==v[S]}),k=w.every(function(S){return y.includes(S)});return k?b:v})},o,{leading:u})},[o,u,a]);return F.useEffect(function(){var y=c||window.ResizeObserver,v=new y(function(b){b.forEach(function(x){var w,k=(w=x==null?void 0:x.contentRect)!=null?w:{},S=k.left,C=k.top,_=k.width,$=k.height;d.current=window.requestAnimationFrame(function(){m({width:_,height:$,top:C,left:S})})})});return f.current&&v.observe(f.current),function(){window.cancelAnimationFrame(d.current),v.disconnect(),m.cancel()}},[m,c]),fk({parentRef:f,resize:m},p)}function Tot({width:e,height:t,r:n}){return Qnt({width:e,height:t,r:n}).map(({key:i,cx:o,cy:s,r:a,fill:l})=>E.jsx(Jk.circle,{cy:s,initial:{r:0},animate:{cx:o,r:a,fill:l},transition:{type:"spring",stiffness:100,damping:20,fill:{duration:.3}}},i))}function Mot(e){const{parentRef:t,width:n,height:r}=Aot({debounceTime:50});return E.jsx(Ot,{ref:t,position:"absolute",minH:`${12*2+4*2}px`,...e,children:E.jsx("svg",{width:n,height:r,children:E.jsx(Tot,{width:n,height:r,r:3})})})}function Kc({label:e,children:t,...n}){return E.jsxs(Ot,{w:"full",flexDir:"row",justify:"space-between",alignItems:"center",...n,children:[E.jsx(un,{minW:"130px",children:e}),t]})}function Fot(){const{handleSubmit:e,loading:t,selectedDemo:n,handleDemoSelect:r}=_nt(),{loadingPyodide:i}=s9();return E.jsxs(E.Fragment,{children:[E.jsx(wP,{size:"sm",onChange:o=>r(XV.find(s=>s.name===o.target.value)??null),placeholder:"Select Demo",variant:"outline",colorScheme:Rr,icon:E.jsx(Mt,{as:Grt}),borderRightRadius:0,children:XV.map(o=>E.jsx("option",{value:o.name,children:o.name},o.name))}),E.jsx(ku,{borderLeftRadius:0,colorScheme:Rr,type:"submit",isLoading:t||i,isDisabled:!n||i,icon:E.jsx(Mt,{as:due}),"aria-label":"Load Data",onClick:e})]})}function Pot(e){const{python:t,handleServerButtonClick:n,apiKey:r,handleApiKeyChange:i,handleDownloadLogs:o,colorMode:s,toggleColorMode:a,locale:l,setLocale:u}=Rrt();return E.jsxs(td,{as:J1,...e,children:[E.jsx(Kc,{label:"Load Data",children:E.jsx(Sit,{w:"full"})}),E.jsx(Kc,{label:"Load Demo",children:E.jsx(Fot,{})}),E.jsx(Kc,{label:"OpenAI Key",children:E.jsx(Jy,{w:"full",placeholder:"sk-...",value:r,onChange:i})}),E.jsx(xP,{my:4}),E.jsx(Kc,{label:"Locale",children:E.jsxs(wP,{size:"sm",variant:"outline",value:l,onChange:c=>{u(c.target.value)},children:[E.jsx("option",{value:"en",children:"English"}),E.jsx("option",{value:"ko",children:"한국어"})]})}),E.jsx(Kc,{label:"Color Mode",children:E.jsx(Su,{leftIcon:E.jsx(Mt,{as:s==="light"?cit:oit}),onClick:a,size:"sm",w:"full",children:s==="light"?"Light":"Dark"})}),E.jsx(Kc,{label:"Backend",children:E.jsx(Su,{leftIcon:E.jsx(Mt,{as:t==="server"?Qrt:uit}),onClick:n,size:"sm",w:"full",children:t[0].toUpperCase()+t.slice(1)})}),E.jsx(Kc,{label:"System Logs",children:E.jsxs(Ot,{gap:2,w:"full",children:[E.jsx(Su,{w:"full",onClick:o,children:"Load Latest"}),E.jsx(Su,{w:"full",onClick:o,children:"Download"})]})})]})}function Rot({tabs:e,...t}){const{tabIconSize:n,tabPanelHeight:r}=Ds(),o=cn(a=>a.fields).length>0,s=e.findIndex(a=>a.type==="settings");return E.jsxs(JX,{w:"full",defaultIndex:s,isFitted:!0,colorScheme:Rr,...t,children:[E.jsx(eK,{children:e.map(a=>E.jsx(nK,{isDisabled:!o&&!a.displayingBeforeInit,children:E.jsx(Mt,{boxSize:n,as:a.icon})},`tab-${a.type}`))}),E.jsx(tK,{mt:4,flex:1,overflow:"auto",h:r,children:e.map(a=>E.jsx(td,{children:a.panel},`tabpanel-${a.type}`))})]})}function Dot(){const{cardHeight:e,cardColor:t,cardWidth:n,mobile:r}=Ds();return E.jsxs(Ot,{minW:{base:"full",lg:"container.xl"},maxH:e,position:"relative",gap:4,flexDir:{base:"column",lg:"row"},children:[E.jsxs(Ot,{position:"relative",w:n,children:[E.jsx(Mot,{top:r?0:void 0,bottom:r?void 0:0,h:8,w:"full",p:2}),E.jsx(yit,{w:"full",gap:{base:0,lg:4}})]}),E.jsx(wit,{bgColor:t,borderRadius:"lg",w:{base:"full",lg:"sm"},minW:{base:"full",lg:"sm"},controller:E.jsx(vit,{gap:2,w:"full"}),children:E.jsx(Rot,{tabs:[{type:"bookmarks",icon:fue,panel:E.jsx(Ort,{p:0,m:0,gap:2,w:"full"}),displayingBeforeInit:!1},{type:"browseChart",icon:Zrt,panel:E.jsx(td,{children:"Chart Browser for Manual Chart query at here"}),displayingBeforeInit:!1},{type:"chart-info",icon:sit,panel:E.jsx(td,{children:"Chart Description and Explanation at Here"}),displayingBeforeInit:!1},{type:"metadata",icon:ait,panel:E.jsx(Eit,{}),displayingBeforeInit:!1},{type:"settings",icon:lit,panel:E.jsx(Pot,{align:"start"}),displayingBeforeInit:!0}]})})]})}const Oot=rxe({initialColorMode:"dark",useSystemColorMode:!0,components:{Button:{defaultProps:{size:"sm"}},Input:{defaultProps:{size:"sm",focusBorderColor:Ru[200]},baseStyle:{field:{_focusVisible:{borderColor:Ru[200]}}}},Select:{defaultProps:{size:"sm",focusBorderColor:Ru[200]}},Tabs:{parts:["tabpanel"],baseStyle:{tabpanel:{p:0}}},Card:{baseStyle:e=>({container:{bg:e.colorMode==="light"?"white":"gray.900"}})}},styles:{global:e=>({body:{height:"100lvh",overflow:"hidden",overscrollBehavior:"smooth",bg:e.colorMode==="light"?"gray.100":"gray.800"},html:{height:"100lvh",overflow:"hidden",overscrollBehavior:"smooth",focusBorderColor:Ru[200]}})}});var yue,_W=FF;yue=_W.createRoot,_W.hydrateRoot;const Not=new prt;yue(document.getElementById("root")).render(E.jsx(F.StrictMode,{children:E.jsx(brt,{client:Not,children:E.jsx(ECe,{theme:Oot,children:E.jsx(qp,{flexDir:"column",minH:"100dvh",p:0,m:0,w:"full",children:E.jsx(Dot,{})})})})}))});export default Iot();
