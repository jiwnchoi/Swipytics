var Jue=Object.defineProperty;var b9=e=>{throw TypeError(e)};var ece=(e,t,n)=>t in e?Jue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tce=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var fe=(e,t,n)=>ece(e,typeof t!="symbol"?t+"":t,n),wE=(e,t,n)=>t.has(e)||b9("Cannot "+n);var B=(e,t,n)=>(wE(e,t,"read from private field"),n?n.call(e):t.get(e)),Me=(e,t,n)=>t.has(e)?b9("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),pe=(e,t,n,r)=>(wE(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),je=(e,t,n)=>(wE(e,t,"access private method"),n);var eb=(e,t,n,r)=>({set _(i){pe(e,t,i,n)},get _(){return B(e,t,r)}});var zrt=tce((Pit,j8)=>{function nce(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xW={exports:{}},ik={},wW={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1=Symbol.for("react.element"),rce=Symbol.for("react.portal"),ice=Symbol.for("react.fragment"),oce=Symbol.for("react.strict_mode"),sce=Symbol.for("react.profiler"),ace=Symbol.for("react.provider"),lce=Symbol.for("react.context"),uce=Symbol.for("react.forward_ref"),cce=Symbol.for("react.suspense"),fce=Symbol.for("react.memo"),dce=Symbol.for("react.lazy"),x9=Symbol.iterator;function hce(e){return e===null||typeof e!="object"?null:(e=x9&&e[x9]||e["@@iterator"],typeof e=="function"?e:null)}var SW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kW=Object.assign,CW={};function Ag(e,t,n){this.props=e,this.context=t,this.refs=CW,this.updater=n||SW}Ag.prototype.isReactComponent={};Ag.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ag.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _W(){}_W.prototype=Ag.prototype;function _M(e,t,n){this.props=e,this.context=t,this.refs=CW,this.updater=n||SW}var EM=_M.prototype=new _W;EM.constructor=_M;kW(EM,Ag.prototype);EM.isPureReactComponent=!0;var w9=Array.isArray,EW=Object.prototype.hasOwnProperty,$M={current:null},$W={key:!0,ref:!0,__self:!0,__source:!0};function AW(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)EW.call(t,r)&&!$W.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:D1,type:e,key:o,ref:s,props:i,_owner:$M.current}}function pce(e,t){return{$$typeof:D1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function AM(e){return typeof e=="object"&&e!==null&&e.$$typeof===D1}function gce(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var S9=/\/+/g;function SE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gce(""+e.key):t.toString(36)}function _x(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case D1:case rce:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+SE(s,0):r,w9(i)?(n="",e!=null&&(n=e.replace(S9,"$&/")+"/"),_x(i,t,n,"",function(u){return u})):i!=null&&(AM(i)&&(i=pce(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(S9,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",w9(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+SE(o,a);s+=_x(o,t,n,l,i)}else if(l=hce(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+SE(o,a++),s+=_x(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function nb(e,t,n){if(e==null)return e;var r=[],i=0;return _x(e,r,"","",function(o){return t.call(n,o,i++)}),r}function mce(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qr={current:null},Ex={transition:null},yce={ReactCurrentDispatcher:Qr,ReactCurrentBatchConfig:Ex,ReactCurrentOwner:$M};function TW(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:nb,forEach:function(e,t,n){nb(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return nb(e,function(){t++}),t},toArray:function(e){return nb(e,function(t){return t})||[]},only:function(e){if(!AM(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=Ag;ze.Fragment=ice;ze.Profiler=sce;ze.PureComponent=_M;ze.StrictMode=oce;ze.Suspense=cce;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yce;ze.act=TW;ze.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=kW({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=$M.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)EW.call(t,l)&&!$W.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:D1,type:e.type,key:i,ref:o,props:r,_owner:s}};ze.createContext=function(e){return e={$$typeof:lce,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ace,_context:e},e.Consumer=e};ze.createElement=AW;ze.createFactory=function(e){var t=AW.bind(null,e);return t.type=e,t};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:uce,render:e}};ze.isValidElement=AM;ze.lazy=function(e){return{$$typeof:dce,_payload:{_status:-1,_result:e},_init:mce}};ze.memo=function(e,t){return{$$typeof:fce,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=Ex.transition;Ex.transition={};try{e()}finally{Ex.transition=t}};ze.unstable_act=TW;ze.useCallback=function(e,t){return Qr.current.useCallback(e,t)};ze.useContext=function(e){return Qr.current.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e){return Qr.current.useDeferredValue(e)};ze.useEffect=function(e,t){return Qr.current.useEffect(e,t)};ze.useId=function(){return Qr.current.useId()};ze.useImperativeHandle=function(e,t,n){return Qr.current.useImperativeHandle(e,t,n)};ze.useInsertionEffect=function(e,t){return Qr.current.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return Qr.current.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return Qr.current.useMemo(e,t)};ze.useReducer=function(e,t,n){return Qr.current.useReducer(e,t,n)};ze.useRef=function(e){return Qr.current.useRef(e)};ze.useState=function(e){return Qr.current.useState(e)};ze.useSyncExternalStore=function(e,t,n){return Qr.current.useSyncExternalStore(e,t,n)};ze.useTransition=function(){return Qr.current.useTransition()};ze.version="18.3.1";wW.exports=ze;var P=wW.exports;const Li=dc(P),k9=nce({__proto__:null,default:Li},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vce=P,bce=Symbol.for("react.element"),xce=Symbol.for("react.fragment"),wce=Object.prototype.hasOwnProperty,Sce=vce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kce={key:!0,ref:!0,__self:!0,__source:!0};function MW(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)wce.call(t,r)&&!kce.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:bce,type:e,key:o,ref:s,props:i,_owner:Sce.current}}ik.Fragment=xce;ik.jsx=MW;ik.jsxs=MW;xW.exports=ik;var E=xW.exports,Cce=!1;function _ce(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Ece(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var $ce=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!Cce:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Ece(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=_ce(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e}(),lr="-ms-",$2="-moz-",rt="-webkit-",PW="comm",TM="rule",MM="decl",Ace="@import",FW="@keyframes",Tce="@layer",Mce=Math.abs,ok=String.fromCharCode,Pce=Object.assign;function Fce(e,t){return Un(e,0)^45?(((t<<2^Un(e,0))<<2^Un(e,1))<<2^Un(e,2))<<2^Un(e,3):0}function RW(e){return e.trim()}function Rce(e,t){return(e=t.exec(e))?e[0]:e}function it(e,t,n){return e.replace(t,n)}function h5(e,t){return e.indexOf(t)}function Un(e,t){return e.charCodeAt(t)|0}function vy(e,t,n){return e.slice(t,n)}function Ws(e){return e.length}function PM(e){return e.length}function rb(e,t){return t.push(e),e}function Dce(e,t){return e.map(t).join("")}var sk=1,$p=1,DW=0,mi=0,cn=0,Tg="";function ak(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:sk,column:$p,length:s,return:""}}function um(e,t){return Pce(ak("",null,null,"",null,null,0),e,{length:-e.length},t)}function Oce(){return cn}function Nce(){return cn=mi>0?Un(Tg,--mi):0,$p--,cn===10&&($p=1,sk--),cn}function zi(){return cn=mi<DW?Un(Tg,mi++):0,$p++,cn===10&&($p=1,sk++),cn}function ta(){return Un(Tg,mi)}function $x(){return mi}function O1(e,t){return vy(Tg,e,t)}function by(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function OW(e){return sk=$p=1,DW=Ws(Tg=e),mi=0,[]}function NW(e){return Tg="",e}function Ax(e){return RW(O1(mi-1,p5(e===91?e+2:e===40?e+1:e)))}function Ice(e){for(;(cn=ta())&&cn<33;)zi();return by(e)>2||by(cn)>3?"":" "}function Lce(e,t){for(;--t&&zi()&&!(cn<48||cn>102||cn>57&&cn<65||cn>70&&cn<97););return O1(e,$x()+(t<6&&ta()==32&&zi()==32))}function p5(e){for(;zi();)switch(cn){case e:return mi;case 34:case 39:e!==34&&e!==39&&p5(cn);break;case 40:e===41&&p5(e);break;case 92:zi();break}return mi}function zce(e,t){for(;zi()&&e+cn!==57;)if(e+cn===84&&ta()===47)break;return"/*"+O1(t,mi-1)+"*"+ok(e===47?e:zi())}function Bce(e){for(;!by(ta());)zi();return O1(e,mi)}function jce(e){return NW(Tx("",null,null,null,[""],e=OW(e),0,[0],e))}function Tx(e,t,n,r,i,o,s,a,l){for(var u=0,c=0,f=s,d=0,h=0,p=0,g=1,m=1,y=1,v=0,b="",x=i,w=o,k=r,S=b;m;)switch(p=v,v=zi()){case 40:if(p!=108&&Un(S,f-1)==58){h5(S+=it(Ax(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:S+=Ax(v);break;case 9:case 10:case 13:case 32:S+=Ice(p);break;case 92:S+=Lce($x()-1,7);continue;case 47:switch(ta()){case 42:case 47:rb(Uce(zce(zi(),$x()),t,n),l);break;default:S+="/"}break;case 123*g:a[u++]=Ws(S)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+c:y==-1&&(S=it(S,/\f/g,"")),h>0&&Ws(S)-f&&rb(h>32?_9(S+";",r,n,f-1):_9(it(S," ","")+";",r,n,f-2),l);break;case 59:S+=";";default:if(rb(k=C9(S,t,n,u,c,i,a,b,x=[],w=[],f),o),v===123)if(c===0)Tx(S,t,k,k,x,o,f,a,w);else switch(d===99&&Un(S,3)===110?100:d){case 100:case 108:case 109:case 115:Tx(e,k,k,r&&rb(C9(e,k,k,0,0,i,a,b,i,x=[],f),w),i,w,f,a,r?x:w);break;default:Tx(S,k,k,k,[""],w,0,a,w)}}u=c=h=0,g=y=1,b=S="",f=s;break;case 58:f=1+Ws(S),h=p;default:if(g<1){if(v==123)--g;else if(v==125&&g++==0&&Nce()==125)continue}switch(S+=ok(v),v*g){case 38:y=c>0?1:(S+="\f",-1);break;case 44:a[u++]=(Ws(S)-1)*y,y=1;break;case 64:ta()===45&&(S+=Ax(zi())),d=ta(),c=f=Ws(b=S+=Bce($x())),v++;break;case 45:p===45&&Ws(S)==2&&(g=0)}}return o}function C9(e,t,n,r,i,o,s,a,l,u,c){for(var f=i-1,d=i===0?o:[""],h=PM(d),p=0,g=0,m=0;p<r;++p)for(var y=0,v=vy(e,f+1,f=Mce(g=s[p])),b=e;y<h;++y)(b=RW(g>0?d[y]+" "+v:it(v,/&\f/g,d[y])))&&(l[m++]=b);return ak(e,t,n,i===0?TM:a,l,u,c)}function Uce(e,t,n){return ak(e,t,n,PW,ok(Oce()),vy(e,2,-2),0)}function _9(e,t,n,r){return ak(e,t,n,MM,vy(e,0,r),vy(e,r+1,-1),r)}function Hh(e,t){for(var n="",r=PM(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Vce(e,t,n,r){switch(e.type){case Tce:if(e.children.length)break;case Ace:case MM:return e.return=e.return||e.value;case PW:return"";case FW:return e.return=e.value+"{"+Hh(e.children,r)+"}";case TM:e.value=e.props.join(",")}return Ws(n=Hh(e.children,r))?e.return=e.value+"{"+n+"}":""}function Wce(e){var t=PM(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}function Hce(e){return function(t){t.root||(t=t.return)&&e(t)}}var E9=function(t){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=t(r);return n.set(r,i),i}};function IW(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var qce=function(t,n,r){for(var i=0,o=0;i=o,o=ta(),i===38&&o===12&&(n[r]=1),!by(o);)zi();return O1(t,mi)},Gce=function(t,n){var r=-1,i=44;do switch(by(i)){case 0:i===38&&ta()===12&&(n[r]=1),t[r]+=qce(mi-1,n,r);break;case 2:t[r]+=Ax(i);break;case 4:if(i===44){t[++r]=ta()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=ok(i)}while(i=zi());return t},Yce=function(t,n){return NW(Gce(OW(t),n))},$9=new WeakMap,Xce=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!$9.get(r))&&!i){$9.set(t,!0);for(var o=[],s=Yce(n,o),a=r.props,l=0,u=0;l<s.length;l++)for(var c=0;c<a.length;c++,u++)t.props[u]=o[l]?s[l].replace(/&\f/g,a[c]):a[c]+" "+s[l]}}},Kce=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function LW(e,t){switch(Fce(e,t)){case 5103:return rt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return rt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return rt+e+$2+e+lr+e+e;case 6828:case 4268:return rt+e+lr+e+e;case 6165:return rt+e+lr+"flex-"+e+e;case 5187:return rt+e+it(e,/(\w+).+(:[^]+)/,rt+"box-$1$2"+lr+"flex-$1$2")+e;case 5443:return rt+e+lr+"flex-item-"+it(e,/flex-|-self/,"")+e;case 4675:return rt+e+lr+"flex-line-pack"+it(e,/align-content|flex-|-self/,"")+e;case 5548:return rt+e+lr+it(e,"shrink","negative")+e;case 5292:return rt+e+lr+it(e,"basis","preferred-size")+e;case 6060:return rt+"box-"+it(e,"-grow","")+rt+e+lr+it(e,"grow","positive")+e;case 4554:return rt+it(e,/([^-])(transform)/g,"$1"+rt+"$2")+e;case 6187:return it(it(it(e,/(zoom-|grab)/,rt+"$1"),/(image-set)/,rt+"$1"),e,"")+e;case 5495:case 3959:return it(e,/(image-set\([^]*)/,rt+"$1$`$1");case 4968:return it(it(e,/(.+:)(flex-)?(.*)/,rt+"box-pack:$3"+lr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+rt+e+e;case 4095:case 3583:case 4068:case 2532:return it(e,/(.+)-inline(.+)/,rt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ws(e)-1-t>6)switch(Un(e,t+1)){case 109:if(Un(e,t+4)!==45)break;case 102:return it(e,/(.+:)(.+)-([^]+)/,"$1"+rt+"$2-$3$1"+$2+(Un(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~h5(e,"stretch")?LW(it(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Un(e,t+1)!==115)break;case 6444:switch(Un(e,Ws(e)-3-(~h5(e,"!important")&&10))){case 107:return it(e,":",":"+rt)+e;case 101:return it(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+rt+(Un(e,14)===45?"inline-":"")+"box$3$1"+rt+"$2$3$1"+lr+"$2box$3")+e}break;case 5936:switch(Un(e,t+11)){case 114:return rt+e+lr+it(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return rt+e+lr+it(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return rt+e+lr+it(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return rt+e+lr+e+e}return e}var Qce=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case MM:t.return=LW(t.value,t.length);break;case FW:return Hh([um(t,{value:it(t.value,"@","@"+rt)})],i);case TM:if(t.length)return Dce(t.props,function(o){switch(Rce(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hh([um(t,{props:[it(o,/:(read-\w+)/,":"+$2+"$1")]})],i);case"::placeholder":return Hh([um(t,{props:[it(o,/:(plac\w+)/,":"+rt+"input-$1")]}),um(t,{props:[it(o,/:(plac\w+)/,":"+$2+"$1")]}),um(t,{props:[it(o,/:(plac\w+)/,lr+"input-$1")]})],i)}return""})}},Zce=[Qce],Jce=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var m=g.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||Zce,o={},s,a=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var m=g.getAttribute("data-emotion").split(" "),y=1;y<m.length;y++)o[m[y]]=!0;a.push(g)});var l,u=[Xce,Kce];{var c,f=[Vce,Hce(function(g){c.insert(g)})],d=Wce(u.concat(i,f)),h=function(m){return Hh(jce(m),d)};l=function(m,y,v,b){c=v,h(m?m+"{"+y.styles+"}":y.styles),b&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new $ce({key:n,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return p.sheet.hydrate(a),p};function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A2.apply(null,arguments)}var zW={exports:{}},ht={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nn=typeof Symbol=="function"&&Symbol.for,FM=Nn?Symbol.for("react.element"):60103,RM=Nn?Symbol.for("react.portal"):60106,lk=Nn?Symbol.for("react.fragment"):60107,uk=Nn?Symbol.for("react.strict_mode"):60108,ck=Nn?Symbol.for("react.profiler"):60114,fk=Nn?Symbol.for("react.provider"):60109,dk=Nn?Symbol.for("react.context"):60110,DM=Nn?Symbol.for("react.async_mode"):60111,hk=Nn?Symbol.for("react.concurrent_mode"):60111,pk=Nn?Symbol.for("react.forward_ref"):60112,gk=Nn?Symbol.for("react.suspense"):60113,efe=Nn?Symbol.for("react.suspense_list"):60120,mk=Nn?Symbol.for("react.memo"):60115,yk=Nn?Symbol.for("react.lazy"):60116,tfe=Nn?Symbol.for("react.block"):60121,nfe=Nn?Symbol.for("react.fundamental"):60117,rfe=Nn?Symbol.for("react.responder"):60118,ife=Nn?Symbol.for("react.scope"):60119;function Ji(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case FM:switch(e=e.type,e){case DM:case hk:case lk:case ck:case uk:case gk:return e;default:switch(e=e&&e.$$typeof,e){case dk:case pk:case yk:case mk:case fk:return e;default:return t}}case RM:return t}}}function BW(e){return Ji(e)===hk}ht.AsyncMode=DM;ht.ConcurrentMode=hk;ht.ContextConsumer=dk;ht.ContextProvider=fk;ht.Element=FM;ht.ForwardRef=pk;ht.Fragment=lk;ht.Lazy=yk;ht.Memo=mk;ht.Portal=RM;ht.Profiler=ck;ht.StrictMode=uk;ht.Suspense=gk;ht.isAsyncMode=function(e){return BW(e)||Ji(e)===DM};ht.isConcurrentMode=BW;ht.isContextConsumer=function(e){return Ji(e)===dk};ht.isContextProvider=function(e){return Ji(e)===fk};ht.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===FM};ht.isForwardRef=function(e){return Ji(e)===pk};ht.isFragment=function(e){return Ji(e)===lk};ht.isLazy=function(e){return Ji(e)===yk};ht.isMemo=function(e){return Ji(e)===mk};ht.isPortal=function(e){return Ji(e)===RM};ht.isProfiler=function(e){return Ji(e)===ck};ht.isStrictMode=function(e){return Ji(e)===uk};ht.isSuspense=function(e){return Ji(e)===gk};ht.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===lk||e===hk||e===ck||e===uk||e===gk||e===efe||typeof e=="object"&&e!==null&&(e.$$typeof===yk||e.$$typeof===mk||e.$$typeof===fk||e.$$typeof===dk||e.$$typeof===pk||e.$$typeof===nfe||e.$$typeof===rfe||e.$$typeof===ife||e.$$typeof===tfe)};ht.typeOf=Ji;zW.exports=ht;var ofe=zW.exports,jW=ofe,sfe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},afe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},UW={};UW[jW.ForwardRef]=sfe;UW[jW.Memo]=afe;var lfe=!0;function ufe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var VW=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||lfe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},WW=function(t,n,r){VW(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function cfe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var ffe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},dfe=!1,hfe=/[A-Z]|^ms/g,pfe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,HW=function(t){return t.charCodeAt(1)===45},A9=function(t){return t!=null&&typeof t!="boolean"},kE=IW(function(e){return HW(e)?e:e.replace(hfe,"-$&").toLowerCase()}),T9=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(pfe,function(r,i,o){return Hs={name:i,styles:o,next:Hs},i})}return ffe[t]!==1&&!HW(t)&&typeof n=="number"&&n!==0?n+"px":n},gfe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function xy(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Hs={name:i.name,styles:i.styles,next:Hs},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Hs={name:s.name,styles:s.styles,next:Hs},s=s.next;var a=o.styles+";";return a}return mfe(e,t,n)}case"function":{if(e!==void 0){var l=Hs,u=n(e);return Hs=l,xy(e,t,u)}break}}var c=n;if(t==null)return c;var f=t[c];return f!==void 0?f:c}function mfe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=xy(e,t,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var a=s;t!=null&&t[a]!==void 0?r+=o+"{"+t[a]+"}":A9(a)&&(r+=kE(o)+":"+T9(o,a)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&dfe)throw new Error(gfe);if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var l=0;l<s.length;l++)A9(s[l])&&(r+=kE(o)+":"+T9(o,s[l])+";");else{var u=xy(e,t,s);switch(o){case"animation":case"animationName":{r+=kE(o)+":"+u+";";break}default:r+=o+"{"+u+"}"}}}}return r}var M9=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Hs;function OM(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";Hs=void 0;var o=e[0];if(o==null||o.raw===void 0)r=!1,i+=xy(n,t,o);else{var s=o;i+=s[0]}for(var a=1;a<e.length;a++)if(i+=xy(n,t,e[a]),r){var l=o;i+=l[a]}M9.lastIndex=0;for(var u="",c;(c=M9.exec(i))!==null;)u+="-"+c[1];var f=cfe(i)+u;return{name:f,styles:i,next:Hs}}var yfe=function(t){return t()},qW=k9.useInsertionEffect?k9.useInsertionEffect:!1,vfe=qW||yfe,P9=qW||P.useLayoutEffect,GW=P.createContext(typeof HTMLElement<"u"?Jce({key:"css"}):null);GW.Provider;var YW=function(t){return P.forwardRef(function(n,r){var i=P.useContext(GW);return t(n,i,r)})},wy=P.createContext({}),bfe=function(t,n){if(typeof n=="function"){var r=n(t);return r}return A2({},t,n)},xfe=E9(function(e){return E9(function(t){return bfe(e,t)})}),wfe=function(t){var n=P.useContext(wy);return t.theme!==n&&(n=xfe(n)(t.theme)),P.createElement(wy.Provider,{value:n},t.children)},vk=YW(function(e,t){var n=e.styles,r=OM([n],void 0,P.useContext(wy)),i=P.useRef();return P9(function(){var o=t.key+"-global",s=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return t.sheet.tags.length&&(s.before=t.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[t]),P9(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&WW(t,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}t.insert("",r,s,!1)},[t,r.name]),null});function Sfe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return OM(t)}var kfe=function(){var t=Sfe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},XW=String.raw,KW=XW`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Cfe=()=>E.jsx(vk,{styles:KW}),_fe=({scope:e=""})=>E.jsx(vk,{styles:XW`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${KW}
    `});function Efe(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function tr(e={}){const{name:t,strict:n=!0,hookName:r="useContext",providerName:i="Provider",errorMessage:o,defaultValue:s}=e,a=P.createContext(s);a.displayName=t;function l(){var u;const c=P.useContext(a);if(!c&&n){const f=new Error(o??Efe(r,i));throw f.name="ContextError",(u=Error.captureStackTrace)==null||u.call(Error,f,l),f}return c}return[a.Provider,l,a]}var[$fe,Afe]=tr({strict:!1,name:"PortalManagerContext"});function QW(e){const{children:t,zIndex:n}=e;return E.jsx($fe,{value:{zIndex:n},children:t})}QW.displayName="PortalManager";var Ap=globalThis!=null&&globalThis.document?P.useLayoutEffect:P.useEffect,ZW={exports:{}},eo={},JW={exports:{}},eH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,j){var Y=O.length;O.push(j);e:for(;0<Y;){var W=Y-1>>>1,oe=O[W];if(0<i(oe,j))O[W]=j,O[Y]=oe,Y=W;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var j=O[0],Y=O.pop();if(Y!==j){O[0]=Y;e:for(var W=0,oe=O.length,re=oe>>>1;W<re;){var we=2*(W+1)-1,Re=O[we],lt=we+1,Cn=O[lt];if(0>i(Re,Y))lt<oe&&0>i(Cn,Re)?(O[W]=Cn,O[lt]=Y,W=lt):(O[W]=Re,O[we]=Y,W=we);else if(lt<oe&&0>i(Cn,Y))O[W]=Cn,O[lt]=Y,W=lt;else break e}}return j}function i(O,j){var Y=O.sortIndex-j.sortIndex;return Y!==0?Y:O.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=O)r(u),j.sortIndex=j.expirationTime,t(l,j);else break;j=n(u)}}function x(O){if(g=!1,b(O),!p)if(n(l)!==null)p=!0,D(w);else{var j=n(u);j!==null&&I(x,j.startTime-O)}}function w(O,j){p=!1,g&&(g=!1,y(C),C=-1),h=!0;var Y=d;try{for(b(j),f=n(l);f!==null&&(!(f.expirationTime>j)||O&&!A());){var W=f.callback;if(typeof W=="function"){f.callback=null,d=f.priorityLevel;var oe=W(f.expirationTime<=j);j=e.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(l)&&r(l),b(j)}else r(l);f=n(l)}if(f!==null)var re=!0;else{var we=n(u);we!==null&&I(x,we.startTime-j),re=!1}return re}finally{f=null,d=Y,h=!1}}var k=!1,S=null,C=-1,_=5,$=-1;function A(){return!(e.unstable_now()-$<_)}function N(){if(S!==null){var O=e.unstable_now();$=O;var j=!0;try{j=S(!0,O)}finally{j?M():(k=!1,S=null)}}else k=!1}var M;if(typeof v=="function")M=function(){v(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,F=R.port2;R.port1.onmessage=N,M=function(){F.postMessage(null)}}else M=function(){m(N,0)};function D(O){S=O,k||(k=!0,M())}function I(O,j){C=m(function(){O(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,D(w))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(O){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var Y=d;d=j;try{return O()}finally{d=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,j){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=d;d=O;try{return j()}finally{d=Y}},e.unstable_scheduleCallback=function(O,j,Y){var W=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?W+Y:W):Y=W,O){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Y+oe,O={id:c++,callback:j,priorityLevel:O,startTime:Y,expirationTime:oe,sortIndex:-1},Y>W?(O.sortIndex=Y,t(u,O),n(l)===null&&O===n(u)&&(g?(y(C),C=-1):g=!0,I(x,Y-W))):(O.sortIndex=oe,t(l,O),p||h||(p=!0,D(w))),O},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(O){var j=d;return function(){var Y=d;d=j;try{return O.apply(this,arguments)}finally{d=Y}}}})(eH);JW.exports=eH;var Tfe=JW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mfe=P,Hi=Tfe;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tH=new Set,Sy={};function wd(e,t){Tp(e,t),Tp(e+"Capture",t)}function Tp(e,t){for(Sy[e]=t,e=0;e<t.length;e++)tH.add(t[e])}var yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g5=Object.prototype.hasOwnProperty,Pfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F9={},R9={};function Ffe(e){return g5.call(R9,e)?!0:g5.call(F9,e)?!1:Pfe.test(e)?R9[e]=!0:(F9[e]=!0,!1)}function Rfe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Dfe(e,t,n,r){if(t===null||typeof t>"u"||Rfe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Zr(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Jn[e]=new Zr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Jn[t]=new Zr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Jn[e]=new Zr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Jn[e]=new Zr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Jn[e]=new Zr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Jn[e]=new Zr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Jn[e]=new Zr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Jn[e]=new Zr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Jn[e]=new Zr(e,5,!1,e.toLowerCase(),null,!1,!1)});var NM=/[\-:]([a-z])/g;function IM(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(NM,IM);Jn[t]=new Zr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(NM,IM);Jn[t]=new Zr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(NM,IM);Jn[t]=new Zr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Jn[e]=new Zr(e,1,!1,e.toLowerCase(),null,!1,!1)});Jn.xlinkHref=new Zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Jn[e]=new Zr(e,1,!1,e.toLowerCase(),null,!0,!0)});function LM(e,t,n,r){var i=Jn.hasOwnProperty(t)?Jn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Dfe(t,n,i,r)&&(n=null),r||i===null?Ffe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Al=Mfe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ib=Symbol.for("react.element"),mh=Symbol.for("react.portal"),yh=Symbol.for("react.fragment"),zM=Symbol.for("react.strict_mode"),m5=Symbol.for("react.profiler"),nH=Symbol.for("react.provider"),rH=Symbol.for("react.context"),BM=Symbol.for("react.forward_ref"),y5=Symbol.for("react.suspense"),v5=Symbol.for("react.suspense_list"),jM=Symbol.for("react.memo"),Kl=Symbol.for("react.lazy"),iH=Symbol.for("react.offscreen"),D9=Symbol.iterator;function cm(e){return e===null||typeof e!="object"?null:(e=D9&&e[D9]||e["@@iterator"],typeof e=="function"?e:null)}var Ut=Object.assign,CE;function Qm(e){if(CE===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);CE=t&&t[1]||""}return`
`+CE+e}var _E=!1;function EE(e,t){if(!e||_E)return"";_E=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{_E=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Qm(e):""}function Ofe(e){switch(e.tag){case 5:return Qm(e.type);case 16:return Qm("Lazy");case 13:return Qm("Suspense");case 19:return Qm("SuspenseList");case 0:case 2:case 15:return e=EE(e.type,!1),e;case 11:return e=EE(e.type.render,!1),e;case 1:return e=EE(e.type,!0),e;default:return""}}function b5(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yh:return"Fragment";case mh:return"Portal";case m5:return"Profiler";case zM:return"StrictMode";case y5:return"Suspense";case v5:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rH:return(e.displayName||"Context")+".Consumer";case nH:return(e._context.displayName||"Context")+".Provider";case BM:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jM:return t=e.displayName||null,t!==null?t:b5(e.type)||"Memo";case Kl:t=e._payload,e=e._init;try{return b5(e(t))}catch{}}return null}function Nfe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b5(t);case 8:return t===zM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Hu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oH(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ife(e){var t=oH(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ob(e){e._valueTracker||(e._valueTracker=Ife(e))}function sH(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=oH(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function T2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function x5(e,t){var n=t.checked;return Ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function O9(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Hu(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function aH(e,t){t=t.checked,t!=null&&LM(e,"checked",t,!1)}function w5(e,t){aH(e,t);var n=Hu(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?S5(e,t.type,n):t.hasOwnProperty("defaultValue")&&S5(e,t.type,Hu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function N9(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function S5(e,t,n){(t!=="number"||T2(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Zm=Array.isArray;function qh(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Hu(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function k5(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function I9(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ee(92));if(Zm(n)){if(1<n.length)throw Error(ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Hu(n)}}function lH(e,t){var n=Hu(t.value),r=Hu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function L9(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uH(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C5(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uH(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sb,cH=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(sb=sb||document.createElement("div"),sb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ky(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var O0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lfe=["Webkit","ms","Moz","O"];Object.keys(O0).forEach(function(e){Lfe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),O0[t]=O0[e]})});function fH(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||O0.hasOwnProperty(e)&&O0[e]?(""+t).trim():t+"px"}function dH(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fH(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var zfe=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _5(e,t){if(t){if(zfe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function E5(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $5=null;function UM(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var A5=null,Gh=null,Yh=null;function z9(e){if(e=L1(e)){if(typeof A5!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=kk(t),A5(e.stateNode,e.type,t))}}function hH(e){Gh?Yh?Yh.push(e):Yh=[e]:Gh=e}function pH(){if(Gh){var e=Gh,t=Yh;if(Yh=Gh=null,z9(e),t)for(e=0;e<t.length;e++)z9(t[e])}}function gH(e,t){return e(t)}function mH(){}var $E=!1;function yH(e,t,n){if($E)return e(t,n);$E=!0;try{return gH(e,t,n)}finally{$E=!1,(Gh!==null||Yh!==null)&&(mH(),pH())}}function Cy(e,t){var n=e.stateNode;if(n===null)return null;var r=kk(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ee(231,t,typeof n));return n}var T5=!1;if(yl)try{var fm={};Object.defineProperty(fm,"passive",{get:function(){T5=!0}}),window.addEventListener("test",fm,fm),window.removeEventListener("test",fm,fm)}catch{T5=!1}function Bfe(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var N0=!1,M2=null,P2=!1,M5=null,jfe={onError:function(e){N0=!0,M2=e}};function Ufe(e,t,n,r,i,o,s,a,l){N0=!1,M2=null,Bfe.apply(jfe,arguments)}function Vfe(e,t,n,r,i,o,s,a,l){if(Ufe.apply(this,arguments),N0){if(N0){var u=M2;N0=!1,M2=null}else throw Error(ee(198));P2||(P2=!0,M5=u)}}function Sd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vH(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function B9(e){if(Sd(e)!==e)throw Error(ee(188))}function Wfe(e){var t=e.alternate;if(!t){if(t=Sd(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return B9(i),e;if(o===r)return B9(i),t;o=o.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?e:t}function bH(e){return e=Wfe(e),e!==null?xH(e):null}function xH(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xH(e);if(t!==null)return t;e=e.sibling}return null}var wH=Hi.unstable_scheduleCallback,j9=Hi.unstable_cancelCallback,Hfe=Hi.unstable_shouldYield,qfe=Hi.unstable_requestPaint,Jt=Hi.unstable_now,Gfe=Hi.unstable_getCurrentPriorityLevel,VM=Hi.unstable_ImmediatePriority,SH=Hi.unstable_UserBlockingPriority,F2=Hi.unstable_NormalPriority,Yfe=Hi.unstable_LowPriority,kH=Hi.unstable_IdlePriority,bk=null,na=null;function Xfe(e){if(na&&typeof na.onCommitFiberRoot=="function")try{na.onCommitFiberRoot(bk,e,void 0,(e.current.flags&128)===128)}catch{}}var cs=Math.clz32?Math.clz32:Zfe,Kfe=Math.log,Qfe=Math.LN2;function Zfe(e){return e>>>=0,e===0?32:31-(Kfe(e)/Qfe|0)|0}var ab=64,lb=4194304;function Jm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function R2(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Jm(a):(o&=s,o!==0&&(r=Jm(o)))}else s=n&~i,s!==0?r=Jm(s):o!==0&&(r=Jm(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-cs(t),i=1<<n,r|=e[n],t&=~i;return r}function Jfe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ede(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-cs(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=Jfe(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function P5(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function CH(){var e=ab;return ab<<=1,!(ab&4194240)&&(ab=64),e}function AE(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function N1(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-cs(t),e[t]=n}function tde(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-cs(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function WM(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-cs(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var dt=0;function _H(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var EH,HM,$H,AH,TH,F5=!1,ub=[],Tu=null,Mu=null,Pu=null,_y=new Map,Ey=new Map,ou=[],nde="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U9(e,t){switch(e){case"focusin":case"focusout":Tu=null;break;case"dragenter":case"dragleave":Mu=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":_y.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ey.delete(t.pointerId)}}function dm(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=L1(t),t!==null&&HM(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function rde(e,t,n,r,i){switch(t){case"focusin":return Tu=dm(Tu,e,t,n,r,i),!0;case"dragenter":return Mu=dm(Mu,e,t,n,r,i),!0;case"mouseover":return Pu=dm(Pu,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return _y.set(o,dm(_y.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ey.set(o,dm(Ey.get(o)||null,e,t,n,r,i)),!0}return!1}function MH(e){var t=hf(e.target);if(t!==null){var n=Sd(t);if(n!==null){if(t=n.tag,t===13){if(t=vH(n),t!==null){e.blockedOn=t,TH(e.priority,function(){$H(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=R5(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);$5=r,n.target.dispatchEvent(r),$5=null}else return t=L1(n),t!==null&&HM(t),e.blockedOn=n,!1;t.shift()}return!0}function V9(e,t,n){Mx(e)&&n.delete(t)}function ide(){F5=!1,Tu!==null&&Mx(Tu)&&(Tu=null),Mu!==null&&Mx(Mu)&&(Mu=null),Pu!==null&&Mx(Pu)&&(Pu=null),_y.forEach(V9),Ey.forEach(V9)}function hm(e,t){e.blockedOn===t&&(e.blockedOn=null,F5||(F5=!0,Hi.unstable_scheduleCallback(Hi.unstable_NormalPriority,ide)))}function $y(e){function t(i){return hm(i,e)}if(0<ub.length){hm(ub[0],e);for(var n=1;n<ub.length;n++){var r=ub[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Tu!==null&&hm(Tu,e),Mu!==null&&hm(Mu,e),Pu!==null&&hm(Pu,e),_y.forEach(t),Ey.forEach(t),n=0;n<ou.length;n++)r=ou[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ou.length&&(n=ou[0],n.blockedOn===null);)MH(n),n.blockedOn===null&&ou.shift()}var Xh=Al.ReactCurrentBatchConfig,D2=!0;function ode(e,t,n,r){var i=dt,o=Xh.transition;Xh.transition=null;try{dt=1,qM(e,t,n,r)}finally{dt=i,Xh.transition=o}}function sde(e,t,n,r){var i=dt,o=Xh.transition;Xh.transition=null;try{dt=4,qM(e,t,n,r)}finally{dt=i,Xh.transition=o}}function qM(e,t,n,r){if(D2){var i=R5(e,t,n,r);if(i===null)LE(e,t,r,O2,n),U9(e,r);else if(rde(i,e,t,n,r))r.stopPropagation();else if(U9(e,r),t&4&&-1<nde.indexOf(e)){for(;i!==null;){var o=L1(i);if(o!==null&&EH(o),o=R5(e,t,n,r),o===null&&LE(e,t,r,O2,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else LE(e,t,r,null,n)}}var O2=null;function R5(e,t,n,r){if(O2=null,e=UM(r),e=hf(e),e!==null)if(t=Sd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vH(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return O2=e,null}function PH(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gfe()){case VM:return 1;case SH:return 4;case F2:case Yfe:return 16;case kH:return 536870912;default:return 16}default:return 16}}var gu=null,GM=null,Px=null;function FH(){if(Px)return Px;var e,t=GM,n=t.length,r,i="value"in gu?gu.value:gu.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return Px=i.slice(e,1<r?1-r:void 0)}function Fx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cb(){return!0}function W9(){return!1}function to(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?cb:W9,this.isPropagationStopped=W9,this}return Ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cb)},persist:function(){},isPersistent:cb}),t}var Mg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},YM=to(Mg),I1=Ut({},Mg,{view:0,detail:0}),ade=to(I1),TE,ME,pm,xk=Ut({},I1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:XM,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pm&&(pm&&e.type==="mousemove"?(TE=e.screenX-pm.screenX,ME=e.screenY-pm.screenY):ME=TE=0,pm=e),TE)},movementY:function(e){return"movementY"in e?e.movementY:ME}}),H9=to(xk),lde=Ut({},xk,{dataTransfer:0}),ude=to(lde),cde=Ut({},I1,{relatedTarget:0}),PE=to(cde),fde=Ut({},Mg,{animationName:0,elapsedTime:0,pseudoElement:0}),dde=to(fde),hde=Ut({},Mg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pde=to(hde),gde=Ut({},Mg,{data:0}),q9=to(gde),mde={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yde={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vde={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bde(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vde[e])?!!t[e]:!1}function XM(){return bde}var xde=Ut({},I1,{key:function(e){if(e.key){var t=mde[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yde[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:XM,charCode:function(e){return e.type==="keypress"?Fx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wde=to(xde),Sde=Ut({},xk,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G9=to(Sde),kde=Ut({},I1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:XM}),Cde=to(kde),_de=Ut({},Mg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ede=to(_de),$de=Ut({},xk,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ade=to($de),Tde=[9,13,27,32],KM=yl&&"CompositionEvent"in window,I0=null;yl&&"documentMode"in document&&(I0=document.documentMode);var Mde=yl&&"TextEvent"in window&&!I0,RH=yl&&(!KM||I0&&8<I0&&11>=I0),Y9=" ",X9=!1;function DH(e,t){switch(e){case"keyup":return Tde.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OH(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vh=!1;function Pde(e,t){switch(e){case"compositionend":return OH(t);case"keypress":return t.which!==32?null:(X9=!0,Y9);case"textInput":return e=t.data,e===Y9&&X9?null:e;default:return null}}function Fde(e,t){if(vh)return e==="compositionend"||!KM&&DH(e,t)?(e=FH(),Px=GM=gu=null,vh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return RH&&t.locale!=="ko"?null:t.data;default:return null}}var Rde={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K9(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rde[e.type]:t==="textarea"}function NH(e,t,n,r){hH(r),t=N2(t,"onChange"),0<t.length&&(n=new YM("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var L0=null,Ay=null;function Dde(e){GH(e,0)}function wk(e){var t=wh(e);if(sH(t))return e}function Ode(e,t){if(e==="change")return t}var IH=!1;if(yl){var FE;if(yl){var RE="oninput"in document;if(!RE){var Q9=document.createElement("div");Q9.setAttribute("oninput","return;"),RE=typeof Q9.oninput=="function"}FE=RE}else FE=!1;IH=FE&&(!document.documentMode||9<document.documentMode)}function Z9(){L0&&(L0.detachEvent("onpropertychange",LH),Ay=L0=null)}function LH(e){if(e.propertyName==="value"&&wk(Ay)){var t=[];NH(t,Ay,e,UM(e)),yH(Dde,t)}}function Nde(e,t,n){e==="focusin"?(Z9(),L0=t,Ay=n,L0.attachEvent("onpropertychange",LH)):e==="focusout"&&Z9()}function Ide(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wk(Ay)}function Lde(e,t){if(e==="click")return wk(t)}function zde(e,t){if(e==="input"||e==="change")return wk(t)}function Bde(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ps=typeof Object.is=="function"?Object.is:Bde;function Ty(e,t){if(ps(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!g5.call(t,i)||!ps(e[i],t[i]))return!1}return!0}function J9(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eN(e,t){var n=J9(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=J9(n)}}function zH(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zH(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function BH(){for(var e=window,t=T2();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=T2(e.document)}return t}function QM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function jde(e){var t=BH(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zH(n.ownerDocument.documentElement,n)){if(r!==null&&QM(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=eN(n,o);var s=eN(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ude=yl&&"documentMode"in document&&11>=document.documentMode,bh=null,D5=null,z0=null,O5=!1;function tN(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;O5||bh==null||bh!==T2(r)||(r=bh,"selectionStart"in r&&QM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),z0&&Ty(z0,r)||(z0=r,r=N2(D5,"onSelect"),0<r.length&&(t=new YM("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=bh)))}function fb(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xh={animationend:fb("Animation","AnimationEnd"),animationiteration:fb("Animation","AnimationIteration"),animationstart:fb("Animation","AnimationStart"),transitionend:fb("Transition","TransitionEnd")},DE={},jH={};yl&&(jH=document.createElement("div").style,"AnimationEvent"in window||(delete xh.animationend.animation,delete xh.animationiteration.animation,delete xh.animationstart.animation),"TransitionEvent"in window||delete xh.transitionend.transition);function Sk(e){if(DE[e])return DE[e];if(!xh[e])return e;var t=xh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in jH)return DE[e]=t[n];return e}var UH=Sk("animationend"),VH=Sk("animationiteration"),WH=Sk("animationstart"),HH=Sk("transitionend"),qH=new Map,nN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hc(e,t){qH.set(e,t),wd(t,[e])}for(var OE=0;OE<nN.length;OE++){var NE=nN[OE],Vde=NE.toLowerCase(),Wde=NE[0].toUpperCase()+NE.slice(1);hc(Vde,"on"+Wde)}hc(UH,"onAnimationEnd");hc(VH,"onAnimationIteration");hc(WH,"onAnimationStart");hc("dblclick","onDoubleClick");hc("focusin","onFocus");hc("focusout","onBlur");hc(HH,"onTransitionEnd");Tp("onMouseEnter",["mouseout","mouseover"]);Tp("onMouseLeave",["mouseout","mouseover"]);Tp("onPointerEnter",["pointerout","pointerover"]);Tp("onPointerLeave",["pointerout","pointerover"]);wd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wd("onBeforeInput",["compositionend","keypress","textInput","paste"]);wd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var e0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hde=new Set("cancel close invalid load scroll toggle".split(" ").concat(e0));function rN(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Vfe(r,t,void 0,e),e.currentTarget=null}function GH(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;rN(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;rN(i,a,u),o=l}}}if(P2)throw e=M5,P2=!1,M5=null,e}function Et(e,t){var n=t[B5];n===void 0&&(n=t[B5]=new Set);var r=e+"__bubble";n.has(r)||(YH(t,e,2,!1),n.add(r))}function IE(e,t,n){var r=0;t&&(r|=4),YH(n,e,r,t)}var db="_reactListening"+Math.random().toString(36).slice(2);function My(e){if(!e[db]){e[db]=!0,tH.forEach(function(n){n!=="selectionchange"&&(Hde.has(n)||IE(n,!1,e),IE(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[db]||(t[db]=!0,IE("selectionchange",!1,t))}}function YH(e,t,n,r){switch(PH(t)){case 1:var i=ode;break;case 4:i=sde;break;default:i=qM}n=i.bind(null,t,n,e),i=void 0,!T5||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function LE(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=hf(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}yH(function(){var u=o,c=UM(n),f=[];e:{var d=qH.get(e);if(d!==void 0){var h=YM,p=e;switch(e){case"keypress":if(Fx(n)===0)break e;case"keydown":case"keyup":h=wde;break;case"focusin":p="focus",h=PE;break;case"focusout":p="blur",h=PE;break;case"beforeblur":case"afterblur":h=PE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=H9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=ude;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Cde;break;case UH:case VH:case WH:h=dde;break;case HH:h=Ede;break;case"scroll":h=ade;break;case"wheel":h=Ade;break;case"copy":case"cut":case"paste":h=pde;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=G9}var g=(t&4)!==0,m=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=Cy(v,y),x!=null&&g.push(Py(v,x,b)))),m)break;v=v.return}0<g.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==$5&&(p=n.relatedTarget||n.fromElement)&&(hf(p)||p[vl]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?hf(p):null,p!==null&&(m=Sd(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(g=H9,x="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=G9,x="onPointerLeave",y="onPointerEnter",v="pointer"),m=h==null?d:wh(h),b=p==null?d:wh(p),d=new g(x,v+"leave",h,n,c),d.target=m,d.relatedTarget=b,x=null,hf(c)===u&&(g=new g(y,v+"enter",p,n,c),g.target=b,g.relatedTarget=m,x=g),m=x,h&&p)t:{for(g=h,y=p,v=0,b=g;b;b=Gd(b))v++;for(b=0,x=y;x;x=Gd(x))b++;for(;0<v-b;)g=Gd(g),v--;for(;0<b-v;)y=Gd(y),b--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=Gd(g),y=Gd(y)}g=null}else g=null;h!==null&&iN(f,d,h,g,!1),p!==null&&m!==null&&iN(f,m,p,g,!0)}}e:{if(d=u?wh(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=Ode;else if(K9(d))if(IH)w=zde;else{w=Ide;var k=Nde}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=Lde);if(w&&(w=w(e,u))){NH(f,w,n,c);break e}k&&k(e,d,u),e==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&S5(d,"number",d.value)}switch(k=u?wh(u):window,e){case"focusin":(K9(k)||k.contentEditable==="true")&&(bh=k,D5=u,z0=null);break;case"focusout":z0=D5=bh=null;break;case"mousedown":O5=!0;break;case"contextmenu":case"mouseup":case"dragend":O5=!1,tN(f,n,c);break;case"selectionchange":if(Ude)break;case"keydown":case"keyup":tN(f,n,c)}var S;if(KM)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else vh?DH(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(RH&&n.locale!=="ko"&&(vh||C!=="onCompositionStart"?C==="onCompositionEnd"&&vh&&(S=FH()):(gu=c,GM="value"in gu?gu.value:gu.textContent,vh=!0)),k=N2(u,C),0<k.length&&(C=new q9(C,e,null,n,c),f.push({event:C,listeners:k}),S?C.data=S:(S=OH(n),S!==null&&(C.data=S)))),(S=Mde?Pde(e,n):Fde(e,n))&&(u=N2(u,"onBeforeInput"),0<u.length&&(c=new q9("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=S))}GH(f,t)})}function Py(e,t,n){return{instance:e,listener:t,currentTarget:n}}function N2(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Cy(e,n),o!=null&&r.unshift(Py(e,o,i)),o=Cy(e,t),o!=null&&r.push(Py(e,o,i))),e=e.return}return r}function Gd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function iN(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Cy(n,o),l!=null&&s.unshift(Py(n,l,a))):i||(l=Cy(n,o),l!=null&&s.push(Py(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var qde=/\r\n?/g,Gde=/\u0000|\uFFFD/g;function oN(e){return(typeof e=="string"?e:""+e).replace(qde,`
`).replace(Gde,"")}function hb(e,t,n){if(t=oN(t),oN(e)!==t&&n)throw Error(ee(425))}function I2(){}var N5=null,I5=null;function L5(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var z5=typeof setTimeout=="function"?setTimeout:void 0,Yde=typeof clearTimeout=="function"?clearTimeout:void 0,sN=typeof Promise=="function"?Promise:void 0,Xde=typeof queueMicrotask=="function"?queueMicrotask:typeof sN<"u"?function(e){return sN.resolve(null).then(e).catch(Kde)}:z5;function Kde(e){setTimeout(function(){throw e})}function zE(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),$y(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$y(t)}function Fu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function aN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pg=Math.random().toString(36).slice(2),Gs="__reactFiber$"+Pg,Fy="__reactProps$"+Pg,vl="__reactContainer$"+Pg,B5="__reactEvents$"+Pg,Qde="__reactListeners$"+Pg,Zde="__reactHandles$"+Pg;function hf(e){var t=e[Gs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vl]||n[Gs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=aN(e);e!==null;){if(n=e[Gs])return n;e=aN(e)}return t}e=n,n=e.parentNode}return null}function L1(e){return e=e[Gs]||e[vl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function kk(e){return e[Fy]||null}var j5=[],Sh=-1;function pc(e){return{current:e}}function Mt(e){0>Sh||(e.current=j5[Sh],j5[Sh]=null,Sh--)}function St(e,t){Sh++,j5[Sh]=e.current,e.current=t}var qu={},kr=pc(qu),ci=pc(!1),qf=qu;function Mp(e,t){var n=e.type.contextTypes;if(!n)return qu;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function fi(e){return e=e.childContextTypes,e!=null}function L2(){Mt(ci),Mt(kr)}function lN(e,t,n){if(kr.current!==qu)throw Error(ee(168));St(kr,t),St(ci,n)}function XH(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ee(108,Nfe(e)||"Unknown",i));return Ut({},n,r)}function z2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qu,qf=kr.current,St(kr,e),St(ci,ci.current),!0}function uN(e,t,n){var r=e.stateNode;if(!r)throw Error(ee(169));n?(e=XH(e,t,qf),r.__reactInternalMemoizedMergedChildContext=e,Mt(ci),Mt(kr),St(kr,e)):Mt(ci),St(ci,n)}var Ua=null,Ck=!1,BE=!1;function KH(e){Ua===null?Ua=[e]:Ua.push(e)}function Jde(e){Ck=!0,KH(e)}function gc(){if(!BE&&Ua!==null){BE=!0;var e=0,t=dt;try{var n=Ua;for(dt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ua=null,Ck=!1}catch(i){throw Ua!==null&&(Ua=Ua.slice(e+1)),wH(VM,gc),i}finally{dt=t,BE=!1}}return null}var kh=[],Ch=0,B2=null,j2=0,po=[],go=0,Gf=null,Xa=1,Ka="";function Xc(e,t){kh[Ch++]=j2,kh[Ch++]=B2,B2=e,j2=t}function QH(e,t,n){po[go++]=Xa,po[go++]=Ka,po[go++]=Gf,Gf=e;var r=Xa;e=Ka;var i=32-cs(r)-1;r&=~(1<<i),n+=1;var o=32-cs(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xa=1<<32-cs(t)+i|n<<i|r,Ka=o+e}else Xa=1<<o|n<<i|r,Ka=e}function ZM(e){e.return!==null&&(Xc(e,1),QH(e,1,0))}function JM(e){for(;e===B2;)B2=kh[--Ch],kh[Ch]=null,j2=kh[--Ch],kh[Ch]=null;for(;e===Gf;)Gf=po[--go],po[go]=null,Ka=po[--go],po[go]=null,Xa=po[--go],po[go]=null}var Bi=null,Ri=null,Dt=!1,Zo=null;function ZH(e,t){var n=vo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function cN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bi=e,Ri=Fu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bi=e,Ri=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Gf!==null?{id:Xa,overflow:Ka}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=vo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Bi=e,Ri=null,!0):!1;default:return!1}}function U5(e){return(e.mode&1)!==0&&(e.flags&128)===0}function V5(e){if(Dt){var t=Ri;if(t){var n=t;if(!cN(e,t)){if(U5(e))throw Error(ee(418));t=Fu(n.nextSibling);var r=Bi;t&&cN(e,t)?ZH(r,n):(e.flags=e.flags&-4097|2,Dt=!1,Bi=e)}}else{if(U5(e))throw Error(ee(418));e.flags=e.flags&-4097|2,Dt=!1,Bi=e}}}function fN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bi=e}function pb(e){if(e!==Bi)return!1;if(!Dt)return fN(e),Dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!L5(e.type,e.memoizedProps)),t&&(t=Ri)){if(U5(e))throw JH(),Error(ee(418));for(;t;)ZH(e,t),t=Fu(t.nextSibling)}if(fN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ri=Fu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ri=null}}else Ri=Bi?Fu(e.stateNode.nextSibling):null;return!0}function JH(){for(var e=Ri;e;)e=Fu(e.nextSibling)}function Pp(){Ri=Bi=null,Dt=!1}function eP(e){Zo===null?Zo=[e]:Zo.push(e)}var ehe=Al.ReactCurrentBatchConfig;function gm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,e))}return e}function gb(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dN(e){var t=e._init;return t(e._payload)}function eq(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Nu(y,v),y.index=0,y.sibling=null,y}function o(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,x){return v===null||v.tag!==6?(v=GE(b,y.mode,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function l(y,v,b,x){var w=b.type;return w===yh?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Kl&&dN(w)===v.type)?(x=i(v,b.props),x.ref=gm(y,v,b),x.return=y,x):(x=zx(b.type,b.key,b.props,null,y.mode,x),x.ref=gm(y,v,b),x.return=y,x)}function u(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=YE(b,y.mode,x),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,w){return v===null||v.tag!==7?(v=Mf(b,y.mode,x,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=GE(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ib:return b=zx(v.type,v.key,v.props,null,y.mode,b),b.ref=gm(y,null,v),b.return=y,b;case mh:return v=YE(v,y.mode,b),v.return=y,v;case Kl:var x=v._init;return f(y,x(v._payload),b)}if(Zm(v)||cm(v))return v=Mf(v,y.mode,b,null),v.return=y,v;gb(y,v)}return null}function d(y,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ib:return b.key===w?l(y,v,b,x):null;case mh:return b.key===w?u(y,v,b,x):null;case Kl:return w=b._init,d(y,v,w(b._payload),x)}if(Zm(b)||cm(b))return w!==null?null:c(y,v,b,x,null);gb(y,b)}return null}function h(y,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ib:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,w);case mh:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,w);case Kl:var k=x._init;return h(y,v,b,k(x._payload),w)}if(Zm(x)||cm(x))return y=y.get(b)||null,c(v,y,x,w,null);gb(v,x)}return null}function p(y,v,b,x){for(var w=null,k=null,S=v,C=v=0,_=null;S!==null&&C<b.length;C++){S.index>C?(_=S,S=null):_=S.sibling;var $=d(y,S,b[C],x);if($===null){S===null&&(S=_);break}e&&S&&$.alternate===null&&t(y,S),v=o($,v,C),k===null?w=$:k.sibling=$,k=$,S=_}if(C===b.length)return n(y,S),Dt&&Xc(y,C),w;if(S===null){for(;C<b.length;C++)S=f(y,b[C],x),S!==null&&(v=o(S,v,C),k===null?w=S:k.sibling=S,k=S);return Dt&&Xc(y,C),w}for(S=r(y,S);C<b.length;C++)_=h(S,y,C,b[C],x),_!==null&&(e&&_.alternate!==null&&S.delete(_.key===null?C:_.key),v=o(_,v,C),k===null?w=_:k.sibling=_,k=_);return e&&S.forEach(function(A){return t(y,A)}),Dt&&Xc(y,C),w}function g(y,v,b,x){var w=cm(b);if(typeof w!="function")throw Error(ee(150));if(b=w.call(b),b==null)throw Error(ee(151));for(var k=w=null,S=v,C=v=0,_=null,$=b.next();S!==null&&!$.done;C++,$=b.next()){S.index>C?(_=S,S=null):_=S.sibling;var A=d(y,S,$.value,x);if(A===null){S===null&&(S=_);break}e&&S&&A.alternate===null&&t(y,S),v=o(A,v,C),k===null?w=A:k.sibling=A,k=A,S=_}if($.done)return n(y,S),Dt&&Xc(y,C),w;if(S===null){for(;!$.done;C++,$=b.next())$=f(y,$.value,x),$!==null&&(v=o($,v,C),k===null?w=$:k.sibling=$,k=$);return Dt&&Xc(y,C),w}for(S=r(y,S);!$.done;C++,$=b.next())$=h(S,y,C,$.value,x),$!==null&&(e&&$.alternate!==null&&S.delete($.key===null?C:$.key),v=o($,v,C),k===null?w=$:k.sibling=$,k=$);return e&&S.forEach(function(N){return t(y,N)}),Dt&&Xc(y,C),w}function m(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===yh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ib:e:{for(var w=b.key,k=v;k!==null;){if(k.key===w){if(w=b.type,w===yh){if(k.tag===7){n(y,k.sibling),v=i(k,b.props.children),v.return=y,y=v;break e}}else if(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Kl&&dN(w)===k.type){n(y,k.sibling),v=i(k,b.props),v.ref=gm(y,k,b),v.return=y,y=v;break e}n(y,k);break}else t(y,k);k=k.sibling}b.type===yh?(v=Mf(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=zx(b.type,b.key,b.props,null,y.mode,x),x.ref=gm(y,v,b),x.return=y,y=x)}return s(y);case mh:e:{for(k=b.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=YE(b,y.mode,x),v.return=y,y=v}return s(y);case Kl:return k=b._init,m(y,v,k(b._payload),x)}if(Zm(b))return p(y,v,b,x);if(cm(b))return g(y,v,b,x);gb(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=GE(b,y.mode,x),v.return=y,y=v),s(y)):n(y,v)}return m}var Fp=eq(!0),tq=eq(!1),U2=pc(null),V2=null,_h=null,tP=null;function nP(){tP=_h=V2=null}function rP(e){var t=U2.current;Mt(U2),e._currentValue=t}function W5(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kh(e,t){V2=e,tP=_h=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(li=!0),e.firstContext=null)}function $o(e){var t=e._currentValue;if(tP!==e)if(e={context:e,memoizedValue:t,next:null},_h===null){if(V2===null)throw Error(ee(308));_h=e,V2.dependencies={lanes:0,firstContext:e}}else _h=_h.next=e;return t}var pf=null;function iP(e){pf===null?pf=[e]:pf.push(e)}function nq(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,iP(t)):(n.next=i.next,i.next=n),t.interleaved=n,bl(e,r)}function bl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ql=!1;function oP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rq(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ol(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ru(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ye&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,bl(e,n)}return i=r.interleaved,i===null?(t.next=t,iP(r)):(t.next=i.next,i.next=t),r.interleaved=t,bl(e,n)}function Rx(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,WM(e,n)}}function hN(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function W2(e,t,n,r){var i=e.updateQueue;Ql=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ut({},f,d);break e;case 2:Ql=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Xf|=s,e.lanes=s,e.memoizedState=f}}function pN(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var z1={},ra=pc(z1),Ry=pc(z1),Dy=pc(z1);function gf(e){if(e===z1)throw Error(ee(174));return e}function sP(e,t){switch(St(Dy,t),St(Ry,e),St(ra,z1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C5(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=C5(t,e)}Mt(ra),St(ra,t)}function Rp(){Mt(ra),Mt(Ry),Mt(Dy)}function iq(e){gf(Dy.current);var t=gf(ra.current),n=C5(t,e.type);t!==n&&(St(Ry,e),St(ra,n))}function aP(e){Ry.current===e&&(Mt(ra),Mt(Ry))}var Lt=pc(0);function H2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jE=[];function lP(){for(var e=0;e<jE.length;e++)jE[e]._workInProgressVersionPrimary=null;jE.length=0}var Dx=Al.ReactCurrentDispatcher,UE=Al.ReactCurrentBatchConfig,Yf=0,jt=null,pn=null,En=null,q2=!1,B0=!1,Oy=0,the=0;function ir(){throw Error(ee(321))}function uP(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ps(e[n],t[n]))return!1;return!0}function cP(e,t,n,r,i,o){if(Yf=o,jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Dx.current=e===null||e.memoizedState===null?ohe:she,e=n(r,i),B0){o=0;do{if(B0=!1,Oy=0,25<=o)throw Error(ee(301));o+=1,En=pn=null,t.updateQueue=null,Dx.current=ahe,e=n(r,i)}while(B0)}if(Dx.current=G2,t=pn!==null&&pn.next!==null,Yf=0,En=pn=jt=null,q2=!1,t)throw Error(ee(300));return e}function fP(){var e=Oy!==0;return Oy=0,e}function Ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?jt.memoizedState=En=e:En=En.next=e,En}function Ao(){if(pn===null){var e=jt.alternate;e=e!==null?e.memoizedState:null}else e=pn.next;var t=En===null?jt.memoizedState:En.next;if(t!==null)En=t,pn=e;else{if(e===null)throw Error(ee(310));pn=e,e={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},En===null?jt.memoizedState=En=e:En=En.next=e}return En}function Ny(e,t){return typeof t=="function"?t(e):t}function VE(e){var t=Ao(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=pn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Yf&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,jt.lanes|=c,Xf|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,ps(r,t.memoizedState)||(li=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,jt.lanes|=o,Xf|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function WE(e){var t=Ao(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);ps(o,t.memoizedState)||(li=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function oq(){}function sq(e,t){var n=jt,r=Ao(),i=t(),o=!ps(r.memoizedState,i);if(o&&(r.memoizedState=i,li=!0),r=r.queue,dP(uq.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||En!==null&&En.memoizedState.tag&1){if(n.flags|=2048,Iy(9,lq.bind(null,n,r,i,t),void 0,null),Rn===null)throw Error(ee(349));Yf&30||aq(n,t,i)}return i}function aq(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lq(e,t,n,r){t.value=n,t.getSnapshot=r,cq(t)&&fq(e)}function uq(e,t,n){return n(function(){cq(t)&&fq(e)})}function cq(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ps(e,n)}catch{return!0}}function fq(e){var t=bl(e,1);t!==null&&fs(t,e,1,-1)}function gN(e){var t=Ns();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ny,lastRenderedState:e},t.queue=e,e=e.dispatch=ihe.bind(null,jt,e),[t.memoizedState,e]}function Iy(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function dq(){return Ao().memoizedState}function Ox(e,t,n,r){var i=Ns();jt.flags|=e,i.memoizedState=Iy(1|t,n,void 0,r===void 0?null:r)}function _k(e,t,n,r){var i=Ao();r=r===void 0?null:r;var o=void 0;if(pn!==null){var s=pn.memoizedState;if(o=s.destroy,r!==null&&uP(r,s.deps)){i.memoizedState=Iy(t,n,o,r);return}}jt.flags|=e,i.memoizedState=Iy(1|t,n,o,r)}function mN(e,t){return Ox(8390656,8,e,t)}function dP(e,t){return _k(2048,8,e,t)}function hq(e,t){return _k(4,2,e,t)}function pq(e,t){return _k(4,4,e,t)}function gq(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mq(e,t,n){return n=n!=null?n.concat([e]):null,_k(4,4,gq.bind(null,t,e),n)}function hP(){}function yq(e,t){var n=Ao();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&uP(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function vq(e,t){var n=Ao();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&uP(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bq(e,t,n){return Yf&21?(ps(n,t)||(n=CH(),jt.lanes|=n,Xf|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,li=!0),e.memoizedState=n)}function nhe(e,t){var n=dt;dt=n!==0&&4>n?n:4,e(!0);var r=UE.transition;UE.transition={};try{e(!1),t()}finally{dt=n,UE.transition=r}}function xq(){return Ao().memoizedState}function rhe(e,t,n){var r=Ou(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wq(e))Sq(t,n);else if(n=nq(e,t,n,r),n!==null){var i=Wr();fs(n,e,r,i),kq(n,t,r)}}function ihe(e,t,n){var r=Ou(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wq(e))Sq(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ps(a,s)){var l=t.interleaved;l===null?(i.next=i,iP(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=nq(e,t,i,r),n!==null&&(i=Wr(),fs(n,e,r,i),kq(n,t,r))}}function wq(e){var t=e.alternate;return e===jt||t!==null&&t===jt}function Sq(e,t){B0=q2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kq(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,WM(e,n)}}var G2={readContext:$o,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},ohe={readContext:$o,useCallback:function(e,t){return Ns().memoizedState=[e,t===void 0?null:t],e},useContext:$o,useEffect:mN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ox(4194308,4,gq.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ox(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ox(4,2,e,t)},useMemo:function(e,t){var n=Ns();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ns();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=rhe.bind(null,jt,e),[r.memoizedState,e]},useRef:function(e){var t=Ns();return e={current:e},t.memoizedState=e},useState:gN,useDebugValue:hP,useDeferredValue:function(e){return Ns().memoizedState=e},useTransition:function(){var e=gN(!1),t=e[0];return e=nhe.bind(null,e[1]),Ns().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=jt,i=Ns();if(Dt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=t(),Rn===null)throw Error(ee(349));Yf&30||aq(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,mN(uq.bind(null,r,o,e),[e]),r.flags|=2048,Iy(9,lq.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ns(),t=Rn.identifierPrefix;if(Dt){var n=Ka,r=Xa;n=(r&~(1<<32-cs(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Oy++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=the++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},she={readContext:$o,useCallback:yq,useContext:$o,useEffect:dP,useImperativeHandle:mq,useInsertionEffect:hq,useLayoutEffect:pq,useMemo:vq,useReducer:VE,useRef:dq,useState:function(){return VE(Ny)},useDebugValue:hP,useDeferredValue:function(e){var t=Ao();return bq(t,pn.memoizedState,e)},useTransition:function(){var e=VE(Ny)[0],t=Ao().memoizedState;return[e,t]},useMutableSource:oq,useSyncExternalStore:sq,useId:xq,unstable_isNewReconciler:!1},ahe={readContext:$o,useCallback:yq,useContext:$o,useEffect:dP,useImperativeHandle:mq,useInsertionEffect:hq,useLayoutEffect:pq,useMemo:vq,useReducer:WE,useRef:dq,useState:function(){return WE(Ny)},useDebugValue:hP,useDeferredValue:function(e){var t=Ao();return pn===null?t.memoizedState=e:bq(t,pn.memoizedState,e)},useTransition:function(){var e=WE(Ny)[0],t=Ao().memoizedState;return[e,t]},useMutableSource:oq,useSyncExternalStore:sq,useId:xq,unstable_isNewReconciler:!1};function qo(e,t){if(e&&e.defaultProps){t=Ut({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function H5(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ut({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ek={isMounted:function(e){return(e=e._reactInternals)?Sd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Wr(),i=Ou(e),o=ol(r,i);o.payload=t,n!=null&&(o.callback=n),t=Ru(e,o,i),t!==null&&(fs(t,e,i,r),Rx(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Wr(),i=Ou(e),o=ol(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ru(e,o,i),t!==null&&(fs(t,e,i,r),Rx(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wr(),r=Ou(e),i=ol(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ru(e,i,r),t!==null&&(fs(t,e,r,n),Rx(t,e,r))}};function yN(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Ty(n,r)||!Ty(i,o):!0}function Cq(e,t,n){var r=!1,i=qu,o=t.contextType;return typeof o=="object"&&o!==null?o=$o(o):(i=fi(t)?qf:kr.current,r=t.contextTypes,o=(r=r!=null)?Mp(e,i):qu),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ek,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function vN(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ek.enqueueReplaceState(t,t.state,null)}function q5(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},oP(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=$o(o):(o=fi(t)?qf:kr.current,i.context=Mp(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(H5(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ek.enqueueReplaceState(i,i.state,null),W2(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Dp(e,t){try{var n="",r=t;do n+=Ofe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function HE(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function G5(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var lhe=typeof WeakMap=="function"?WeakMap:Map;function _q(e,t,n){n=ol(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){X2||(X2=!0,r3=r),G5(e,t)},n}function Eq(e,t,n){n=ol(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){G5(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){G5(e,t),typeof r!="function"&&(Du===null?Du=new Set([this]):Du.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function bN(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new lhe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=She.bind(null,e,t,n),t.then(e,e))}function xN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wN(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ol(-1,1),t.tag=2,Ru(n,t,1))),n.lanes|=1),e)}var uhe=Al.ReactCurrentOwner,li=!1;function Dr(e,t,n,r){t.child=e===null?tq(t,null,n,r):Fp(t,e.child,n,r)}function SN(e,t,n,r,i){n=n.render;var o=t.ref;return Kh(t,i),r=cP(e,t,n,r,o,i),n=fP(),e!==null&&!li?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,xl(e,t,i)):(Dt&&n&&ZM(t),t.flags|=1,Dr(e,t,r,i),t.child)}function kN(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!wP(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,$q(e,t,o,r,i)):(e=zx(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ty,n(s,r)&&e.ref===t.ref)return xl(e,t,i)}return t.flags|=1,e=Nu(o,r),e.ref=t.ref,e.return=t,t.child=e}function $q(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Ty(o,r)&&e.ref===t.ref)if(li=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(li=!0);else return t.lanes=e.lanes,xl(e,t,i)}return Y5(e,t,n,r,i)}function Aq(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},St($h,Ti),Ti|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,St($h,Ti),Ti|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,St($h,Ti),Ti|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,St($h,Ti),Ti|=r;return Dr(e,t,i,n),t.child}function Tq(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Y5(e,t,n,r,i){var o=fi(n)?qf:kr.current;return o=Mp(t,o),Kh(t,i),n=cP(e,t,n,r,o,i),r=fP(),e!==null&&!li?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,xl(e,t,i)):(Dt&&r&&ZM(t),t.flags|=1,Dr(e,t,n,i),t.child)}function CN(e,t,n,r,i){if(fi(n)){var o=!0;z2(t)}else o=!1;if(Kh(t,i),t.stateNode===null)Nx(e,t),Cq(t,n,r),q5(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=$o(u):(u=fi(n)?qf:kr.current,u=Mp(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&vN(t,s,r,u),Ql=!1;var d=t.memoizedState;s.state=d,W2(t,r,s,i),l=t.memoizedState,a!==r||d!==l||ci.current||Ql?(typeof c=="function"&&(H5(t,n,c,r),l=t.memoizedState),(a=Ql||yN(t,n,a,r,d,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rq(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:qo(t.type,a),s.props=u,f=t.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=$o(l):(l=fi(n)?qf:kr.current,l=Mp(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==l)&&vN(t,s,r,l),Ql=!1,d=t.memoizedState,s.state=d,W2(t,r,s,i);var p=t.memoizedState;a!==f||d!==p||ci.current||Ql?(typeof h=="function"&&(H5(t,n,h,r),p=t.memoizedState),(u=Ql||yN(t,n,u,r,d,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return X5(e,t,n,r,o,i)}function X5(e,t,n,r,i,o){Tq(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&uN(t,n,!1),xl(e,t,o);r=t.stateNode,uhe.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Fp(t,e.child,null,o),t.child=Fp(t,null,a,o)):Dr(e,t,a,o),t.memoizedState=r.state,i&&uN(t,n,!0),t.child}function Mq(e){var t=e.stateNode;t.pendingContext?lN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lN(e,t.context,!1),sP(e,t.containerInfo)}function _N(e,t,n,r,i){return Pp(),eP(i),t.flags|=256,Dr(e,t,n,r),t.child}var K5={dehydrated:null,treeContext:null,retryLane:0};function Q5(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pq(e,t,n){var r=t.pendingProps,i=Lt.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),St(Lt,i&1),e===null)return V5(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Tk(s,r,0,null),e=Mf(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Q5(n),t.memoizedState=K5,e):pP(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return che(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Nu(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Nu(a,o):(o=Mf(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?Q5(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=K5,r}return o=e.child,e=o.sibling,r=Nu(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function pP(e,t){return t=Tk({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mb(e,t,n,r){return r!==null&&eP(r),Fp(t,e.child,null,n),e=pP(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function che(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=HE(Error(ee(422))),mb(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Tk({mode:"visible",children:r.children},i,0,null),o=Mf(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Fp(t,e.child,null,s),t.child.memoizedState=Q5(s),t.memoizedState=K5,o);if(!(t.mode&1))return mb(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ee(419)),r=HE(o,r,void 0),mb(e,t,s,r)}if(a=(s&e.childLanes)!==0,li||a){if(r=Rn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,bl(e,i),fs(r,e,i,-1))}return xP(),r=HE(Error(ee(421))),mb(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=khe.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ri=Fu(i.nextSibling),Bi=t,Dt=!0,Zo=null,e!==null&&(po[go++]=Xa,po[go++]=Ka,po[go++]=Gf,Xa=e.id,Ka=e.overflow,Gf=t),t=pP(t,r.children),t.flags|=4096,t)}function EN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),W5(e.return,t,n)}function qE(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Fq(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Dr(e,t,r.children,n),r=Lt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&EN(e,n,t);else if(e.tag===19)EN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(St(Lt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&H2(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qE(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&H2(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qE(t,!0,n,null,o);break;case"together":qE(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nx(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Xf|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,n=Nu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Nu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fhe(e,t,n){switch(t.tag){case 3:Mq(t),Pp();break;case 5:iq(t);break;case 1:fi(t.type)&&z2(t);break;case 4:sP(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;St(U2,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(St(Lt,Lt.current&1),t.flags|=128,null):n&t.child.childLanes?Pq(e,t,n):(St(Lt,Lt.current&1),e=xl(e,t,n),e!==null?e.sibling:null);St(Lt,Lt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Fq(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),St(Lt,Lt.current),r)break;return null;case 22:case 23:return t.lanes=0,Aq(e,t,n)}return xl(e,t,n)}var Rq,Z5,Dq,Oq;Rq=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Z5=function(){};Dq=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,gf(ra.current);var o=null;switch(n){case"input":i=x5(e,i),r=x5(e,r),o=[];break;case"select":i=Ut({},i,{value:void 0}),r=Ut({},r,{value:void 0}),o=[];break;case"textarea":i=k5(e,i),r=k5(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=I2)}_5(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sy.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sy.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Et("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Oq=function(e,t,n,r){n!==r&&(t.flags|=4)};function mm(e,t){if(!Dt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function or(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function dhe(e,t,n){var r=t.pendingProps;switch(JM(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(t),null;case 1:return fi(t.type)&&L2(),or(t),null;case 3:return r=t.stateNode,Rp(),Mt(ci),Mt(kr),lP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(pb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zo!==null&&(s3(Zo),Zo=null))),Z5(e,t),or(t),null;case 5:aP(t);var i=gf(Dy.current);if(n=t.type,e!==null&&t.stateNode!=null)Dq(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ee(166));return or(t),null}if(e=gf(ra.current),pb(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Gs]=t,r[Fy]=o,e=(t.mode&1)!==0,n){case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":case"embed":Et("load",r);break;case"video":case"audio":for(i=0;i<e0.length;i++)Et(e0[i],r);break;case"source":Et("error",r);break;case"img":case"image":case"link":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"input":O9(r,o),Et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Et("invalid",r);break;case"textarea":I9(r,o),Et("invalid",r)}_5(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&hb(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&hb(r.textContent,a,e),i=["children",""+a]):Sy.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Et("scroll",r)}switch(n){case"input":ob(r),N9(r,o,!0);break;case"textarea":ob(r),L9(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=I2)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uH(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Gs]=t,e[Fy]=r,Rq(e,t,!1,!1),t.stateNode=e;e:{switch(s=E5(n,r),n){case"dialog":Et("cancel",e),Et("close",e),i=r;break;case"iframe":case"object":case"embed":Et("load",e),i=r;break;case"video":case"audio":for(i=0;i<e0.length;i++)Et(e0[i],e);i=r;break;case"source":Et("error",e),i=r;break;case"img":case"image":case"link":Et("error",e),Et("load",e),i=r;break;case"details":Et("toggle",e),i=r;break;case"input":O9(e,r),i=x5(e,r),Et("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ut({},r,{value:void 0}),Et("invalid",e);break;case"textarea":I9(e,r),i=k5(e,r),Et("invalid",e);break;default:i=r}_5(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?dH(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cH(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ky(e,l):typeof l=="number"&&ky(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Sy.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Et("scroll",e):l!=null&&LM(e,o,l,s))}switch(n){case"input":ob(e),N9(e,r,!1);break;case"textarea":ob(e),L9(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Hu(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?qh(e,!!r.multiple,o,!1):r.defaultValue!=null&&qh(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=I2)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return or(t),null;case 6:if(e&&t.stateNode!=null)Oq(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ee(166));if(n=gf(Dy.current),gf(ra.current),pb(t)){if(r=t.stateNode,n=t.memoizedProps,r[Gs]=t,(o=r.nodeValue!==n)&&(e=Bi,e!==null))switch(e.tag){case 3:hb(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hb(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gs]=t,t.stateNode=r}return or(t),null;case 13:if(Mt(Lt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Dt&&Ri!==null&&t.mode&1&&!(t.flags&128))JH(),Pp(),t.flags|=98560,o=!1;else if(o=pb(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ee(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[Gs]=t}else Pp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;or(t),o=!1}else Zo!==null&&(s3(Zo),Zo=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Lt.current&1?yn===0&&(yn=3):xP())),t.updateQueue!==null&&(t.flags|=4),or(t),null);case 4:return Rp(),Z5(e,t),e===null&&My(t.stateNode.containerInfo),or(t),null;case 10:return rP(t.type._context),or(t),null;case 17:return fi(t.type)&&L2(),or(t),null;case 19:if(Mt(Lt),o=t.memoizedState,o===null)return or(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)mm(o,!1);else{if(yn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=H2(e),s!==null){for(t.flags|=128,mm(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return St(Lt,Lt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Jt()>Op&&(t.flags|=128,r=!0,mm(o,!1),t.lanes=4194304)}else{if(!r)if(e=H2(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),mm(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Dt)return or(t),null}else 2*Jt()-o.renderingStartTime>Op&&n!==1073741824&&(t.flags|=128,r=!0,mm(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Jt(),t.sibling=null,n=Lt.current,St(Lt,r?n&1|2:n&1),t):(or(t),null);case 22:case 23:return bP(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ti&1073741824&&(or(t),t.subtreeFlags&6&&(t.flags|=8192)):or(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function hhe(e,t){switch(JM(t),t.tag){case 1:return fi(t.type)&&L2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rp(),Mt(ci),Mt(kr),lP(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return aP(t),null;case 13:if(Mt(Lt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));Pp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Mt(Lt),null;case 4:return Rp(),null;case 10:return rP(t.type._context),null;case 22:case 23:return bP(),null;case 24:return null;default:return null}}var yb=!1,gr=!1,phe=typeof WeakSet=="function"?WeakSet:Set,de=null;function Eh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gt(e,t,r)}else n.current=null}function J5(e,t,n){try{n()}catch(r){Gt(e,t,r)}}var $N=!1;function ghe(e,t){if(N5=D2,e=BH(),QM(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(I5={focusedElem:e,selectionRange:n},D2=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:qo(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(x){Gt(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return p=$N,$N=!1,p}function j0(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&J5(t,n,o)}i=i.next}while(i!==r)}}function $k(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function e3(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Nq(e){var t=e.alternate;t!==null&&(e.alternate=null,Nq(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Gs],delete t[Fy],delete t[B5],delete t[Qde],delete t[Zde])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Iq(e){return e.tag===5||e.tag===3||e.tag===4}function AN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Iq(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function t3(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=I2));else if(r!==4&&(e=e.child,e!==null))for(t3(e,t,n),e=e.sibling;e!==null;)t3(e,t,n),e=e.sibling}function n3(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(n3(e,t,n),e=e.sibling;e!==null;)n3(e,t,n),e=e.sibling}var Bn=null,Xo=!1;function Bl(e,t,n){for(n=n.child;n!==null;)Lq(e,t,n),n=n.sibling}function Lq(e,t,n){if(na&&typeof na.onCommitFiberUnmount=="function")try{na.onCommitFiberUnmount(bk,n)}catch{}switch(n.tag){case 5:gr||Eh(n,t);case 6:var r=Bn,i=Xo;Bn=null,Bl(e,t,n),Bn=r,Xo=i,Bn!==null&&(Xo?(e=Bn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Bn.removeChild(n.stateNode));break;case 18:Bn!==null&&(Xo?(e=Bn,n=n.stateNode,e.nodeType===8?zE(e.parentNode,n):e.nodeType===1&&zE(e,n),$y(e)):zE(Bn,n.stateNode));break;case 4:r=Bn,i=Xo,Bn=n.stateNode.containerInfo,Xo=!0,Bl(e,t,n),Bn=r,Xo=i;break;case 0:case 11:case 14:case 15:if(!gr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&J5(n,t,s),i=i.next}while(i!==r)}Bl(e,t,n);break;case 1:if(!gr&&(Eh(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gt(n,t,a)}Bl(e,t,n);break;case 21:Bl(e,t,n);break;case 22:n.mode&1?(gr=(r=gr)||n.memoizedState!==null,Bl(e,t,n),gr=r):Bl(e,t,n);break;default:Bl(e,t,n)}}function TN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new phe),t.forEach(function(r){var i=Che.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bo(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Bn=a.stateNode,Xo=!1;break e;case 3:Bn=a.stateNode.containerInfo,Xo=!0;break e;case 4:Bn=a.stateNode.containerInfo,Xo=!0;break e}a=a.return}if(Bn===null)throw Error(ee(160));Lq(o,s,i),Bn=null,Xo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Gt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zq(t,e),t=t.sibling}function zq(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bo(t,e),Ms(e),r&4){try{j0(3,e,e.return),$k(3,e)}catch(g){Gt(e,e.return,g)}try{j0(5,e,e.return)}catch(g){Gt(e,e.return,g)}}break;case 1:Bo(t,e),Ms(e),r&512&&n!==null&&Eh(n,n.return);break;case 5:if(Bo(t,e),Ms(e),r&512&&n!==null&&Eh(n,n.return),e.flags&32){var i=e.stateNode;try{ky(i,"")}catch(g){Gt(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&aH(i,o),E5(a,s);var u=E5(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?dH(i,f):c==="dangerouslySetInnerHTML"?cH(i,f):c==="children"?ky(i,f):LM(i,c,f,u)}switch(a){case"input":w5(i,o);break;case"textarea":lH(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?qh(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?qh(i,!!o.multiple,o.defaultValue,!0):qh(i,!!o.multiple,o.multiple?[]:"",!1))}i[Fy]=o}catch(g){Gt(e,e.return,g)}}break;case 6:if(Bo(t,e),Ms(e),r&4){if(e.stateNode===null)throw Error(ee(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Gt(e,e.return,g)}}break;case 3:if(Bo(t,e),Ms(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$y(t.containerInfo)}catch(g){Gt(e,e.return,g)}break;case 4:Bo(t,e),Ms(e);break;case 13:Bo(t,e),Ms(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(yP=Jt())),r&4&&TN(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(gr=(u=gr)||c,Bo(t,e),gr=u):Bo(t,e),Ms(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(de=e,c=e.child;c!==null;){for(f=de=c;de!==null;){switch(d=de,h=d.child,d.tag){case 0:case 11:case 14:case 15:j0(4,d,d.return);break;case 1:Eh(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Gt(r,n,g)}}break;case 5:Eh(d,d.return);break;case 22:if(d.memoizedState!==null){PN(f);continue}}h!==null?(h.return=d,de=h):PN(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fH("display",s))}catch(g){Gt(e,e.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Gt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bo(t,e),Ms(e),r&4&&TN(e);break;case 21:break;default:Bo(t,e),Ms(e)}}function Ms(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Iq(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ky(i,""),r.flags&=-33);var o=AN(e);n3(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=AN(e);t3(e,a,s);break;default:throw Error(ee(161))}}catch(l){Gt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mhe(e,t,n){de=e,Bq(e)}function Bq(e,t,n){for(var r=(e.mode&1)!==0;de!==null;){var i=de,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||yb;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||gr;a=yb;var u=gr;if(yb=s,(gr=l)&&!u)for(de=i;de!==null;)s=de,l=s.child,s.tag===22&&s.memoizedState!==null?FN(i):l!==null?(l.return=s,de=l):FN(i);for(;o!==null;)de=o,Bq(o),o=o.sibling;de=i,yb=a,gr=u}MN(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,de=o):MN(e)}}function MN(e){for(;de!==null;){var t=de;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gr||$k(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!gr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:qo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&pN(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}pN(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&$y(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}gr||t.flags&512&&e3(t)}catch(d){Gt(t,t.return,d)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function PN(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function FN(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$k(4,t)}catch(l){Gt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Gt(t,i,l)}}var o=t.return;try{e3(t)}catch(l){Gt(t,o,l)}break;case 5:var s=t.return;try{e3(t)}catch(l){Gt(t,s,l)}}}catch(l){Gt(t,t.return,l)}if(t===e){de=null;break}var a=t.sibling;if(a!==null){a.return=t.return,de=a;break}de=t.return}}var yhe=Math.ceil,Y2=Al.ReactCurrentDispatcher,gP=Al.ReactCurrentOwner,Co=Al.ReactCurrentBatchConfig,Ye=0,Rn=null,fn=null,Kn=0,Ti=0,$h=pc(0),yn=0,Ly=null,Xf=0,Ak=0,mP=0,U0=null,ii=null,yP=0,Op=1/0,Ba=null,X2=!1,r3=null,Du=null,vb=!1,mu=null,K2=0,V0=0,i3=null,Ix=-1,Lx=0;function Wr(){return Ye&6?Jt():Ix!==-1?Ix:Ix=Jt()}function Ou(e){return e.mode&1?Ye&2&&Kn!==0?Kn&-Kn:ehe.transition!==null?(Lx===0&&(Lx=CH()),Lx):(e=dt,e!==0||(e=window.event,e=e===void 0?16:PH(e.type)),e):1}function fs(e,t,n,r){if(50<V0)throw V0=0,i3=null,Error(ee(185));N1(e,n,r),(!(Ye&2)||e!==Rn)&&(e===Rn&&(!(Ye&2)&&(Ak|=n),yn===4&&su(e,Kn)),di(e,r),n===1&&Ye===0&&!(t.mode&1)&&(Op=Jt()+500,Ck&&gc()))}function di(e,t){var n=e.callbackNode;ede(e,t);var r=R2(e,e===Rn?Kn:0);if(r===0)n!==null&&j9(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&j9(n),t===1)e.tag===0?Jde(RN.bind(null,e)):KH(RN.bind(null,e)),Xde(function(){!(Ye&6)&&gc()}),n=null;else{switch(_H(r)){case 1:n=VM;break;case 4:n=SH;break;case 16:n=F2;break;case 536870912:n=kH;break;default:n=F2}n=Yq(n,jq.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function jq(e,t){if(Ix=-1,Lx=0,Ye&6)throw Error(ee(327));var n=e.callbackNode;if(Qh()&&e.callbackNode!==n)return null;var r=R2(e,e===Rn?Kn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Q2(e,r);else{t=r;var i=Ye;Ye|=2;var o=Vq();(Rn!==e||Kn!==t)&&(Ba=null,Op=Jt()+500,Tf(e,t));do try{xhe();break}catch(a){Uq(e,a)}while(!0);nP(),Y2.current=o,Ye=i,fn!==null?t=0:(Rn=null,Kn=0,t=yn)}if(t!==0){if(t===2&&(i=P5(e),i!==0&&(r=i,t=o3(e,i))),t===1)throw n=Ly,Tf(e,0),su(e,r),di(e,Jt()),n;if(t===6)su(e,r);else{if(i=e.current.alternate,!(r&30)&&!vhe(i)&&(t=Q2(e,r),t===2&&(o=P5(e),o!==0&&(r=o,t=o3(e,o))),t===1))throw n=Ly,Tf(e,0),su(e,r),di(e,Jt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ee(345));case 2:Kc(e,ii,Ba);break;case 3:if(su(e,r),(r&130023424)===r&&(t=yP+500-Jt(),10<t)){if(R2(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Wr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=z5(Kc.bind(null,e,ii,Ba),t);break}Kc(e,ii,Ba);break;case 4:if(su(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-cs(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=Jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yhe(r/1960))-r,10<r){e.timeoutHandle=z5(Kc.bind(null,e,ii,Ba),r);break}Kc(e,ii,Ba);break;case 5:Kc(e,ii,Ba);break;default:throw Error(ee(329))}}}return di(e,Jt()),e.callbackNode===n?jq.bind(null,e):null}function o3(e,t){var n=U0;return e.current.memoizedState.isDehydrated&&(Tf(e,t).flags|=256),e=Q2(e,t),e!==2&&(t=ii,ii=n,t!==null&&s3(t)),e}function s3(e){ii===null?ii=e:ii.push.apply(ii,e)}function vhe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ps(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function su(e,t){for(t&=~mP,t&=~Ak,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-cs(t),r=1<<n;e[n]=-1,t&=~r}}function RN(e){if(Ye&6)throw Error(ee(327));Qh();var t=R2(e,0);if(!(t&1))return di(e,Jt()),null;var n=Q2(e,t);if(e.tag!==0&&n===2){var r=P5(e);r!==0&&(t=r,n=o3(e,r))}if(n===1)throw n=Ly,Tf(e,0),su(e,t),di(e,Jt()),n;if(n===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kc(e,ii,Ba),di(e,Jt()),null}function vP(e,t){var n=Ye;Ye|=1;try{return e(t)}finally{Ye=n,Ye===0&&(Op=Jt()+500,Ck&&gc())}}function Kf(e){mu!==null&&mu.tag===0&&!(Ye&6)&&Qh();var t=Ye;Ye|=1;var n=Co.transition,r=dt;try{if(Co.transition=null,dt=1,e)return e()}finally{dt=r,Co.transition=n,Ye=t,!(Ye&6)&&gc()}}function bP(){Ti=$h.current,Mt($h)}function Tf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Yde(n)),fn!==null)for(n=fn.return;n!==null;){var r=n;switch(JM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&L2();break;case 3:Rp(),Mt(ci),Mt(kr),lP();break;case 5:aP(r);break;case 4:Rp();break;case 13:Mt(Lt);break;case 19:Mt(Lt);break;case 10:rP(r.type._context);break;case 22:case 23:bP()}n=n.return}if(Rn=e,fn=e=Nu(e.current,null),Kn=Ti=t,yn=0,Ly=null,mP=Ak=Xf=0,ii=U0=null,pf!==null){for(t=0;t<pf.length;t++)if(n=pf[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}pf=null}return e}function Uq(e,t){do{var n=fn;try{if(nP(),Dx.current=G2,q2){for(var r=jt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}q2=!1}if(Yf=0,En=pn=jt=null,B0=!1,Oy=0,gP.current=null,n===null||n.return===null){yn=1,Ly=t,fn=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=Kn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=xN(s);if(h!==null){h.flags&=-257,wN(h,s,a,o,t),h.mode&1&&bN(o,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}else{if(!(t&1)){bN(o,u,t),xP();break e}l=Error(ee(426))}}else if(Dt&&a.mode&1){var m=xN(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),wN(m,s,a,o,t),eP(Dp(l,a));break e}}o=l=Dp(l,a),yn!==4&&(yn=2),U0===null?U0=[o]:U0.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=_q(o,l,t);hN(o,y);break e;case 1:a=l;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Du===null||!Du.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=Eq(o,a,t);hN(o,x);break e}}o=o.return}while(o!==null)}Hq(n)}catch(w){t=w,fn===n&&n!==null&&(fn=n=n.return);continue}break}while(!0)}function Vq(){var e=Y2.current;return Y2.current=G2,e===null?G2:e}function xP(){(yn===0||yn===3||yn===2)&&(yn=4),Rn===null||!(Xf&268435455)&&!(Ak&268435455)||su(Rn,Kn)}function Q2(e,t){var n=Ye;Ye|=2;var r=Vq();(Rn!==e||Kn!==t)&&(Ba=null,Tf(e,t));do try{bhe();break}catch(i){Uq(e,i)}while(!0);if(nP(),Ye=n,Y2.current=r,fn!==null)throw Error(ee(261));return Rn=null,Kn=0,yn}function bhe(){for(;fn!==null;)Wq(fn)}function xhe(){for(;fn!==null&&!Hfe();)Wq(fn)}function Wq(e){var t=Gq(e.alternate,e,Ti);e.memoizedProps=e.pendingProps,t===null?Hq(e):fn=t,gP.current=null}function Hq(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=hhe(n,t),n!==null){n.flags&=32767,fn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yn=6,fn=null;return}}else if(n=dhe(n,t,Ti),n!==null){fn=n;return}if(t=t.sibling,t!==null){fn=t;return}fn=t=e}while(t!==null);yn===0&&(yn=5)}function Kc(e,t,n){var r=dt,i=Co.transition;try{Co.transition=null,dt=1,whe(e,t,n,r)}finally{Co.transition=i,dt=r}return null}function whe(e,t,n,r){do Qh();while(mu!==null);if(Ye&6)throw Error(ee(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(tde(e,o),e===Rn&&(fn=Rn=null,Kn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vb||(vb=!0,Yq(F2,function(){return Qh(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Co.transition,Co.transition=null;var s=dt;dt=1;var a=Ye;Ye|=4,gP.current=null,ghe(e,n),zq(n,e),jde(I5),D2=!!N5,I5=N5=null,e.current=n,mhe(n),qfe(),Ye=a,dt=s,Co.transition=o}else e.current=n;if(vb&&(vb=!1,mu=e,K2=i),o=e.pendingLanes,o===0&&(Du=null),Xfe(n.stateNode),di(e,Jt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(X2)throw X2=!1,e=r3,r3=null,e;return K2&1&&e.tag!==0&&Qh(),o=e.pendingLanes,o&1?e===i3?V0++:(V0=0,i3=e):V0=0,gc(),null}function Qh(){if(mu!==null){var e=_H(K2),t=Co.transition,n=dt;try{if(Co.transition=null,dt=16>e?16:e,mu===null)var r=!1;else{if(e=mu,mu=null,K2=0,Ye&6)throw Error(ee(331));var i=Ye;for(Ye|=4,de=e.current;de!==null;){var o=de,s=o.child;if(de.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(de=u;de!==null;){var c=de;switch(c.tag){case 0:case 11:case 15:j0(8,c,o)}var f=c.child;if(f!==null)f.return=c,de=f;else for(;de!==null;){c=de;var d=c.sibling,h=c.return;if(Nq(c),c===u){de=null;break}if(d!==null){d.return=h,de=d;break}de=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}de=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,de=s;else e:for(;de!==null;){if(o=de,o.flags&2048)switch(o.tag){case 0:case 11:case 15:j0(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,de=y;break e}de=o.return}}var v=e.current;for(de=v;de!==null;){s=de;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,de=b;else e:for(s=v;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$k(9,a)}}catch(w){Gt(a,a.return,w)}if(a===s){de=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,de=x;break e}de=a.return}}if(Ye=i,gc(),na&&typeof na.onPostCommitFiberRoot=="function")try{na.onPostCommitFiberRoot(bk,e)}catch{}r=!0}return r}finally{dt=n,Co.transition=t}}return!1}function DN(e,t,n){t=Dp(n,t),t=_q(e,t,1),e=Ru(e,t,1),t=Wr(),e!==null&&(N1(e,1,t),di(e,t))}function Gt(e,t,n){if(e.tag===3)DN(e,e,n);else for(;t!==null;){if(t.tag===3){DN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Du===null||!Du.has(r))){e=Dp(n,e),e=Eq(t,e,1),t=Ru(t,e,1),e=Wr(),t!==null&&(N1(t,1,e),di(t,e));break}}t=t.return}}function She(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Wr(),e.pingedLanes|=e.suspendedLanes&n,Rn===e&&(Kn&n)===n&&(yn===4||yn===3&&(Kn&130023424)===Kn&&500>Jt()-yP?Tf(e,0):mP|=n),di(e,t)}function qq(e,t){t===0&&(e.mode&1?(t=lb,lb<<=1,!(lb&130023424)&&(lb=4194304)):t=1);var n=Wr();e=bl(e,t),e!==null&&(N1(e,t,n),di(e,n))}function khe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qq(e,n)}function Che(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(t),qq(e,n)}var Gq;Gq=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ci.current)li=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return li=!1,fhe(e,t,n);li=!!(e.flags&131072)}else li=!1,Dt&&t.flags&1048576&&QH(t,j2,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Nx(e,t),e=t.pendingProps;var i=Mp(t,kr.current);Kh(t,n),i=cP(null,t,r,e,i,n);var o=fP();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fi(r)?(o=!0,z2(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oP(t),i.updater=Ek,t.stateNode=i,i._reactInternals=t,q5(t,r,e,n),t=X5(null,t,r,!0,o,n)):(t.tag=0,Dt&&o&&ZM(t),Dr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Nx(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Ehe(r),e=qo(r,e),i){case 0:t=Y5(null,t,r,e,n);break e;case 1:t=CN(null,t,r,e,n);break e;case 11:t=SN(null,t,r,e,n);break e;case 14:t=kN(null,t,r,qo(r.type,e),n);break e}throw Error(ee(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qo(r,i),Y5(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qo(r,i),CN(e,t,r,i,n);case 3:e:{if(Mq(t),e===null)throw Error(ee(387));r=t.pendingProps,o=t.memoizedState,i=o.element,rq(e,t),W2(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Dp(Error(ee(423)),t),t=_N(e,t,r,n,i);break e}else if(r!==i){i=Dp(Error(ee(424)),t),t=_N(e,t,r,n,i);break e}else for(Ri=Fu(t.stateNode.containerInfo.firstChild),Bi=t,Dt=!0,Zo=null,n=tq(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pp(),r===i){t=xl(e,t,n);break e}Dr(e,t,r,n)}t=t.child}return t;case 5:return iq(t),e===null&&V5(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,L5(r,i)?s=null:o!==null&&L5(r,o)&&(t.flags|=32),Tq(e,t),Dr(e,t,s,n),t.child;case 6:return e===null&&V5(t),null;case 13:return Pq(e,t,n);case 4:return sP(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fp(t,null,r,n):Dr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qo(r,i),SN(e,t,r,i,n);case 7:return Dr(e,t,t.pendingProps,n),t.child;case 8:return Dr(e,t,t.pendingProps.children,n),t.child;case 12:return Dr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,St(U2,r._currentValue),r._currentValue=s,o!==null)if(ps(o.value,s)){if(o.children===i.children&&!ci.current){t=xl(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=ol(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),W5(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ee(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),W5(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Dr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Kh(t,n),i=$o(i),r=r(i),t.flags|=1,Dr(e,t,r,n),t.child;case 14:return r=t.type,i=qo(r,t.pendingProps),i=qo(r.type,i),kN(e,t,r,i,n);case 15:return $q(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qo(r,i),Nx(e,t),t.tag=1,fi(r)?(e=!0,z2(t)):e=!1,Kh(t,n),Cq(t,r,i),q5(t,r,i,n),X5(null,t,r,!0,e,n);case 19:return Fq(e,t,n);case 22:return Aq(e,t,n)}throw Error(ee(156,t.tag))};function Yq(e,t){return wH(e,t)}function _he(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vo(e,t,n,r){return new _he(e,t,n,r)}function wP(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ehe(e){if(typeof e=="function")return wP(e)?1:0;if(e!=null){if(e=e.$$typeof,e===BM)return 11;if(e===jM)return 14}return 2}function Nu(e,t){var n=e.alternate;return n===null?(n=vo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zx(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")wP(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case yh:return Mf(n.children,i,o,t);case zM:s=8,i|=8;break;case m5:return e=vo(12,n,t,i|2),e.elementType=m5,e.lanes=o,e;case y5:return e=vo(13,n,t,i),e.elementType=y5,e.lanes=o,e;case v5:return e=vo(19,n,t,i),e.elementType=v5,e.lanes=o,e;case iH:return Tk(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nH:s=10;break e;case rH:s=9;break e;case BM:s=11;break e;case jM:s=14;break e;case Kl:s=16,r=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=vo(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Mf(e,t,n,r){return e=vo(7,e,r,t),e.lanes=n,e}function Tk(e,t,n,r){return e=vo(22,e,r,t),e.elementType=iH,e.lanes=n,e.stateNode={isHidden:!1},e}function GE(e,t,n){return e=vo(6,e,null,t),e.lanes=n,e}function YE(e,t,n){return t=vo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $he(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=AE(0),this.expirationTimes=AE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=AE(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function SP(e,t,n,r,i,o,s,a,l){return e=new $he(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=vo(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oP(o),e}function Ahe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mh,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Xq(e){if(!e)return qu;e=e._reactInternals;e:{if(Sd(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var n=e.type;if(fi(n))return XH(e,n,t)}return t}function Kq(e,t,n,r,i,o,s,a,l){return e=SP(n,r,!0,e,i,o,s,a,l),e.context=Xq(null),n=e.current,r=Wr(),i=Ou(n),o=ol(r,i),o.callback=t??null,Ru(n,o,i),e.current.lanes=i,N1(e,i,r),di(e,r),e}function Mk(e,t,n,r){var i=t.current,o=Wr(),s=Ou(i);return n=Xq(n),t.context===null?t.context=n:t.pendingContext=n,t=ol(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ru(i,t,s),e!==null&&(fs(e,i,s,o),Rx(e,i,s)),s}function Z2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ON(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kP(e,t){ON(e,t),(e=e.alternate)&&ON(e,t)}function The(){return null}var Qq=typeof reportError=="function"?reportError:function(e){console.error(e)};function CP(e){this._internalRoot=e}Pk.prototype.render=CP.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));Mk(e,t,null,null)};Pk.prototype.unmount=CP.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kf(function(){Mk(null,e,null,null)}),t[vl]=null}};function Pk(e){this._internalRoot=e}Pk.prototype.unstable_scheduleHydration=function(e){if(e){var t=AH();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ou.length&&t!==0&&t<ou[n].priority;n++);ou.splice(n,0,e),n===0&&MH(e)}};function _P(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function NN(){}function Mhe(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Z2(s);o.call(u)}}var s=Kq(t,r,e,0,null,!1,!1,"",NN);return e._reactRootContainer=s,e[vl]=s.current,My(e.nodeType===8?e.parentNode:e),Kf(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Z2(l);a.call(u)}}var l=SP(e,0,!1,null,null,!1,!1,"",NN);return e._reactRootContainer=l,e[vl]=l.current,My(e.nodeType===8?e.parentNode:e),Kf(function(){Mk(t,l,n,r)}),l}function Rk(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Z2(s);a.call(l)}}Mk(t,s,e,i)}else s=Mhe(n,t,e,i,r);return Z2(s)}EH=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Jm(t.pendingLanes);n!==0&&(WM(t,n|1),di(t,Jt()),!(Ye&6)&&(Op=Jt()+500,gc()))}break;case 13:Kf(function(){var r=bl(e,1);if(r!==null){var i=Wr();fs(r,e,1,i)}}),kP(e,1)}};HM=function(e){if(e.tag===13){var t=bl(e,134217728);if(t!==null){var n=Wr();fs(t,e,134217728,n)}kP(e,134217728)}};$H=function(e){if(e.tag===13){var t=Ou(e),n=bl(e,t);if(n!==null){var r=Wr();fs(n,e,t,r)}kP(e,t)}};AH=function(){return dt};TH=function(e,t){var n=dt;try{return dt=e,t()}finally{dt=n}};A5=function(e,t,n){switch(t){case"input":if(w5(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=kk(r);if(!i)throw Error(ee(90));sH(r),w5(r,i)}}}break;case"textarea":lH(e,n);break;case"select":t=n.value,t!=null&&qh(e,!!n.multiple,t,!1)}};gH=vP;mH=Kf;var Phe={usingClientEntryPoint:!1,Events:[L1,wh,kk,hH,pH,vP]},ym={findFiberByHostInstance:hf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fhe={bundleType:ym.bundleType,version:ym.version,rendererPackageName:ym.rendererPackageName,rendererConfig:ym.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Al.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bH(e),e===null?null:e.stateNode},findFiberByHostInstance:ym.findFiberByHostInstance||The,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bb.isDisabled&&bb.supportsFiber)try{bk=bb.inject(Fhe),na=bb}catch{}}eo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Phe;eo.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_P(t))throw Error(ee(200));return Ahe(e,t,null,n)};eo.createRoot=function(e,t){if(!_P(e))throw Error(ee(299));var n=!1,r="",i=Qq;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=SP(e,1,!1,null,null,n,!1,r,i),e[vl]=t.current,My(e.nodeType===8?e.parentNode:e),new CP(t)};eo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=bH(t),e=e===null?null:e.stateNode,e};eo.flushSync=function(e){return Kf(e)};eo.hydrate=function(e,t,n){if(!Fk(t))throw Error(ee(200));return Rk(null,e,t,!0,n)};eo.hydrateRoot=function(e,t,n){if(!_P(e))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=Qq;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Kq(t,null,e,1,n??null,i,!1,o,s),e[vl]=t.current,My(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Pk(t)};eo.render=function(e,t,n){if(!Fk(t))throw Error(ee(200));return Rk(null,e,t,!1,n)};eo.unmountComponentAtNode=function(e){if(!Fk(e))throw Error(ee(40));return e._reactRootContainer?(Kf(function(){Rk(null,null,e,!1,function(){e._reactRootContainer=null,e[vl]=null})}),!0):!1};eo.unstable_batchedUpdates=vP;eo.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Fk(n))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return Rk(e,t,n,!1,r)};eo.version="18.3.1-next-f1338f8080-20240426";function Zq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zq)}catch(e){console.error(e)}}Zq(),ZW.exports=eo;var EP=ZW.exports,[Jq,Rhe]=tr({strict:!1,name:"PortalContext"}),$P="chakra-portal",Dhe=".chakra-portal",Ohe=e=>E.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),Nhe=e=>{const{appendToParentPortal:t,children:n}=e,[r,i]=P.useState(null),o=P.useRef(null),[,s]=P.useState({});P.useEffect(()=>s({}),[]);const a=Rhe(),l=Afe();Ap(()=>{if(!r)return;const c=r.ownerDocument,f=t?a??c.body:c.body;if(!f)return;o.current=c.createElement("div"),o.current.className=$P,f.appendChild(o.current),s({});const d=o.current;return()=>{f.contains(d)&&f.removeChild(d)}},[r]);const u=l!=null&&l.zIndex?E.jsx(Ohe,{zIndex:l==null?void 0:l.zIndex,children:n}):n;return o.current?EP.createPortal(E.jsx(Jq,{value:o.current,children:u}),o.current):E.jsx("span",{ref:c=>{c&&i(c)}})},Ihe=e=>{const{children:t,containerRef:n,appendToParentPortal:r}=e,i=n.current,o=i??(typeof window<"u"?document.body:void 0),s=P.useMemo(()=>{const l=i==null?void 0:i.ownerDocument.createElement("div");return l&&(l.className=$P),l},[i]),[,a]=P.useState({});return Ap(()=>a({}),[]),Ap(()=>{if(!(!s||!o))return o.appendChild(s),()=>{o.removeChild(s)}},[s,o]),o&&s?EP.createPortal(E.jsx(Jq,{value:r?s:null,children:t}),s):null};function B1(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...r}=t;return n?E.jsx(Ihe,{containerRef:n,...r}):E.jsx(Nhe,{...r})}B1.className=$P;B1.selector=Dhe;B1.displayName="Portal";function AP(){const e=P.useContext(wy);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var TP=P.createContext({});TP.displayName="ColorModeContext";function Fg(){const e=P.useContext(TP);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function vm(e,t){const{colorMode:n}=Fg();return n==="dark"?t:e}var xb={light:"chakra-ui-light",dark:"chakra-ui-dark"};function Lhe(e={}){const{preventTransition:t=!0}=e,n={setDataset:r=>{const i=t?n.preventTransition():void 0;document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,i==null||i()},setClassName(r){document.body.classList.add(r?xb.dark:xb.light),document.body.classList.remove(r?xb.light:xb.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(r){var i;return((i=n.query().matches)!=null?i:r==="dark")?"dark":"light"},addListener(r){const i=n.query(),o=s=>{r(s.matches?"dark":"light")};return typeof i.addListener=="function"?i.addListener(o):i.addEventListener("change",o),()=>{typeof i.removeListener=="function"?i.removeListener(o):i.removeEventListener("change",o)}},preventTransition(){const r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(r)})})}}};return n}var zhe="chakra-ui-color-mode";function Bhe(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let n;try{n=localStorage.getItem(e)||t}catch{}return n||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var jhe=Bhe(zhe),IN=()=>{};function LN(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function eG(e){const{value:t,children:n,options:{useSystemColorMode:r,initialColorMode:i,disableTransitionOnChange:o}={},colorModeManager:s=jhe}=e,a=i==="dark"?"dark":"light",[l,u]=P.useState(()=>LN(s,a)),[c,f]=P.useState(()=>LN(s)),{getSystemTheme:d,setClassName:h,setDataset:p,addListener:g}=P.useMemo(()=>Lhe({preventTransition:o}),[o]),m=i==="system"&&!l?c:l,y=P.useCallback(x=>{const w=x==="system"?d():x;u(w),h(w==="dark"),p(w),s.set(w)},[s,d,h,p]);Ap(()=>{i==="system"&&f(d())},[]),P.useEffect(()=>{const x=s.get();if(x){y(x);return}if(i==="system"){y("system");return}y(a)},[s,a,i,y]);const v=P.useCallback(()=>{y(m==="dark"?"light":"dark")},[m,y]);P.useEffect(()=>{if(r)return g(y)},[r,g,y]);const b=P.useMemo(()=>({colorMode:t??m,toggleColorMode:t?IN:v,setColorMode:t?IN:y,forced:t!==void 0}),[m,v,y,t]);return E.jsx(TP.Provider,{value:b,children:n})}eG.displayName="ColorModeProvider";function tG(){const e=Fg(),t=AP();return{...e,theme:t}}var Xe=(...e)=>e.filter(Boolean).join(" ");function Uhe(){return!1}function hi(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}var j1=e=>{const{condition:t,message:n}=e;t&&Uhe()&&console.warn(n)};function Zs(e,...t){return Vhe(e)?e(...t):e}var Vhe=e=>typeof e=="function",co=e=>e?"":void 0,XE=e=>e?!0:void 0;function Iu(...e){return function(n){e.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}var J2={exports:{}};J2.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",m="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",x="[object RegExp]",w="[object Set]",k="[object String]",S="[object Undefined]",C="[object WeakMap]",_="[object ArrayBuffer]",$="[object DataView]",A="[object Float32Array]",N="[object Float64Array]",M="[object Int8Array]",R="[object Int16Array]",F="[object Int32Array]",D="[object Uint8Array]",I="[object Uint8ClampedArray]",O="[object Uint16Array]",j="[object Uint32Array]",Y=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,re={};re[A]=re[N]=re[M]=re[R]=re[F]=re[D]=re[I]=re[O]=re[j]=!0,re[a]=re[l]=re[_]=re[c]=re[$]=re[f]=re[d]=re[h]=re[g]=re[m]=re[v]=re[x]=re[w]=re[k]=re[C]=!1;var we=typeof tb=="object"&&tb&&tb.Object===Object&&tb,Re=typeof self=="object"&&self&&self.Object===Object&&self,lt=we||Re||Function("return this")(),Cn=t&&!t.nodeType&&t,rr=Cn&&!0&&e&&!e.nodeType&&e,ue=rr&&rr.exports===Cn,_e=ue&&we.process,Ee=function(){try{var T=rr&&rr.require&&rr.require("util").types;return T||_e&&_e.binding&&_e.binding("util")}catch{}}(),Q=Ee&&Ee.isTypedArray;function hn(T,z,U){switch(U.length){case 0:return T.call(z);case 1:return T.call(z,U[0]);case 2:return T.call(z,U[0],U[1]);case 3:return T.call(z,U[0],U[1],U[2])}return T.apply(z,U)}function et(T,z){for(var U=-1,he=Array(T);++U<T;)he[U]=z(U);return he}function _n(T){return function(z){return T(z)}}function an(T,z){return T==null?void 0:T[z]}function no(T,z){return function(U){return T(z(U))}}var Wd=Array.prototype,qle=Function.prototype,qv=Object.prototype,cE=lt["__core-js_shared__"],Gv=qle.toString,zl=qv.hasOwnProperty,t9=function(){var T=/[^.]+$/.exec(cE&&cE.keys&&cE.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),n9=qv.toString,Gle=Gv.call(Object),Yle=RegExp("^"+Gv.call(zl).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yv=ue?lt.Buffer:void 0,r9=lt.Symbol,i9=lt.Uint8Array;Yv&&Yv.allocUnsafe;var o9=no(Object.getPrototypeOf,Object),s9=Object.create,Xle=qv.propertyIsEnumerable,Kle=Wd.splice,Rc=r9?r9.toStringTag:void 0,Xv=function(){try{var T=hE(Object,"defineProperty");return T({},"",{}),T}catch{}}(),Qle=Yv?Yv.isBuffer:void 0,a9=Math.max,Zle=Date.now,l9=hE(lt,"Map"),sm=hE(Object,"create"),Jle=function(){function T(){}return function(z){if(!Oc(z))return{};if(s9)return s9(z);T.prototype=z;var U=new T;return T.prototype=void 0,U}}();function Dc(T){var z=-1,U=T==null?0:T.length;for(this.clear();++z<U;){var he=T[z];this.set(he[0],he[1])}}function eue(){this.__data__=sm?sm(null):{},this.size=0}function tue(T){var z=this.has(T)&&delete this.__data__[T];return this.size-=z?1:0,z}function nue(T){var z=this.__data__;if(sm){var U=z[T];return U===r?void 0:U}return zl.call(z,T)?z[T]:void 0}function rue(T){var z=this.__data__;return sm?z[T]!==void 0:zl.call(z,T)}function iue(T,z){var U=this.__data__;return this.size+=this.has(T)?0:1,U[T]=sm&&z===void 0?r:z,this}Dc.prototype.clear=eue,Dc.prototype.delete=tue,Dc.prototype.get=nue,Dc.prototype.has=rue,Dc.prototype.set=iue;function Ra(T){var z=-1,U=T==null?0:T.length;for(this.clear();++z<U;){var he=T[z];this.set(he[0],he[1])}}function oue(){this.__data__=[],this.size=0}function sue(T){var z=this.__data__,U=Kv(z,T);if(U<0)return!1;var he=z.length-1;return U==he?z.pop():Kle.call(z,U,1),--this.size,!0}function aue(T){var z=this.__data__,U=Kv(z,T);return U<0?void 0:z[U][1]}function lue(T){return Kv(this.__data__,T)>-1}function uue(T,z){var U=this.__data__,he=Kv(U,T);return he<0?(++this.size,U.push([T,z])):U[he][1]=z,this}Ra.prototype.clear=oue,Ra.prototype.delete=sue,Ra.prototype.get=aue,Ra.prototype.has=lue,Ra.prototype.set=uue;function Hd(T){var z=-1,U=T==null?0:T.length;for(this.clear();++z<U;){var he=T[z];this.set(he[0],he[1])}}function cue(){this.size=0,this.__data__={hash:new Dc,map:new(l9||Ra),string:new Dc}}function fue(T){var z=Zv(this,T).delete(T);return this.size-=z?1:0,z}function due(T){return Zv(this,T).get(T)}function hue(T){return Zv(this,T).has(T)}function pue(T,z){var U=Zv(this,T),he=U.size;return U.set(T,z),this.size+=U.size==he?0:1,this}Hd.prototype.clear=cue,Hd.prototype.delete=fue,Hd.prototype.get=due,Hd.prototype.has=hue,Hd.prototype.set=pue;function qd(T){var z=this.__data__=new Ra(T);this.size=z.size}function gue(){this.__data__=new Ra,this.size=0}function mue(T){var z=this.__data__,U=z.delete(T);return this.size=z.size,U}function yue(T){return this.__data__.get(T)}function vue(T){return this.__data__.has(T)}function bue(T,z){var U=this.__data__;if(U instanceof Ra){var he=U.__data__;if(!l9||he.length<n-1)return he.push([T,z]),this.size=++U.size,this;U=this.__data__=new Hd(he)}return U.set(T,z),this.size=U.size,this}qd.prototype.clear=gue,qd.prototype.delete=mue,qd.prototype.get=yue,qd.prototype.has=vue,qd.prototype.set=bue;function xue(T,z){var U=mE(T),he=!U&&gE(T),qe=!U&&!he&&h9(T),xt=!U&&!he&&!qe&&g9(T),Pt=U||he||qe||xt,tt=Pt?et(T.length,String):[],Ft=tt.length;for(var zo in T)Pt&&(zo=="length"||qe&&(zo=="offset"||zo=="parent")||xt&&(zo=="buffer"||zo=="byteLength"||zo=="byteOffset")||f9(zo,Ft))||tt.push(zo);return tt}function fE(T,z,U){(U!==void 0&&!Jv(T[z],U)||U===void 0&&!(z in T))&&dE(T,z,U)}function wue(T,z,U){var he=T[z];(!(zl.call(T,z)&&Jv(he,U))||U===void 0&&!(z in T))&&dE(T,z,U)}function Kv(T,z){for(var U=T.length;U--;)if(Jv(T[U][0],z))return U;return-1}function dE(T,z,U){z=="__proto__"&&Xv?Xv(T,z,{configurable:!0,enumerable:!0,value:U,writable:!0}):T[z]=U}var Sue=Oue();function Qv(T){return T==null?T===void 0?S:y:Rc&&Rc in Object(T)?Nue(T):Uue(T)}function u9(T){return am(T)&&Qv(T)==a}function kue(T){if(!Oc(T)||Bue(T))return!1;var z=vE(T)?Yle:W;return z.test(que(T))}function Cue(T){return am(T)&&p9(T.length)&&!!re[Qv(T)]}function _ue(T){if(!Oc(T))return jue(T);var z=d9(T),U=[];for(var he in T)he=="constructor"&&(z||!zl.call(T,he))||U.push(he);return U}function c9(T,z,U,he,qe){T!==z&&Sue(z,function(xt,Pt){if(qe||(qe=new qd),Oc(xt))Eue(T,z,Pt,U,c9,he,qe);else{var tt=he?he(pE(T,Pt),xt,Pt+"",T,z,qe):void 0;tt===void 0&&(tt=xt),fE(T,Pt,tt)}},m9)}function Eue(T,z,U,he,qe,xt,Pt){var tt=pE(T,U),Ft=pE(z,U),zo=Pt.get(Ft);if(zo){fE(T,U,zo);return}var Ei=xt?xt(tt,Ft,U+"",T,z,Pt):void 0,lm=Ei===void 0;if(lm){var bE=mE(Ft),xE=!bE&&h9(Ft),v9=!bE&&!xE&&g9(Ft);Ei=Ft,bE||xE||v9?mE(tt)?Ei=tt:Gue(tt)?Ei=Fue(tt):xE?(lm=!1,Ei=Tue(Ft)):v9?(lm=!1,Ei=Pue(Ft)):Ei=[]:Yue(Ft)||gE(Ft)?(Ei=tt,gE(tt)?Ei=Xue(tt):(!Oc(tt)||vE(tt))&&(Ei=Iue(Ft))):lm=!1}lm&&(Pt.set(Ft,Ei),qe(Ei,Ft,he,xt,Pt),Pt.delete(Ft)),fE(T,U,Ei)}function $ue(T,z){return Wue(Vue(T,z,y9),T+"")}var Aue=Xv?function(T,z){return Xv(T,"toString",{configurable:!0,enumerable:!1,value:Que(z),writable:!0})}:y9;function Tue(T,z){return T.slice()}function Mue(T){var z=new T.constructor(T.byteLength);return new i9(z).set(new i9(T)),z}function Pue(T,z){var U=Mue(T.buffer);return new T.constructor(U,T.byteOffset,T.length)}function Fue(T,z){var U=-1,he=T.length;for(z||(z=Array(he));++U<he;)z[U]=T[U];return z}function Rue(T,z,U,he){var qe=!U;U||(U={});for(var xt=-1,Pt=z.length;++xt<Pt;){var tt=z[xt],Ft=void 0;Ft===void 0&&(Ft=T[tt]),qe?dE(U,tt,Ft):wue(U,tt,Ft)}return U}function Due(T){return $ue(function(z,U){var he=-1,qe=U.length,xt=qe>1?U[qe-1]:void 0,Pt=qe>2?U[2]:void 0;for(xt=T.length>3&&typeof xt=="function"?(qe--,xt):void 0,Pt&&Lue(U[0],U[1],Pt)&&(xt=qe<3?void 0:xt,qe=1),z=Object(z);++he<qe;){var tt=U[he];tt&&T(z,tt,he,xt)}return z})}function Oue(T){return function(z,U,he){for(var qe=-1,xt=Object(z),Pt=he(z),tt=Pt.length;tt--;){var Ft=Pt[++qe];if(U(xt[Ft],Ft,xt)===!1)break}return z}}function Zv(T,z){var U=T.__data__;return zue(z)?U[typeof z=="string"?"string":"hash"]:U.map}function hE(T,z){var U=an(T,z);return kue(U)?U:void 0}function Nue(T){var z=zl.call(T,Rc),U=T[Rc];try{T[Rc]=void 0;var he=!0}catch{}var qe=n9.call(T);return he&&(z?T[Rc]=U:delete T[Rc]),qe}function Iue(T){return typeof T.constructor=="function"&&!d9(T)?Jle(o9(T)):{}}function f9(T,z){var U=typeof T;return z=z??s,!!z&&(U=="number"||U!="symbol"&&oe.test(T))&&T>-1&&T%1==0&&T<z}function Lue(T,z,U){if(!Oc(U))return!1;var he=typeof z;return(he=="number"?yE(U)&&f9(z,U.length):he=="string"&&z in U)?Jv(U[z],T):!1}function zue(T){var z=typeof T;return z=="string"||z=="number"||z=="symbol"||z=="boolean"?T!=="__proto__":T===null}function Bue(T){return!!t9&&t9 in T}function d9(T){var z=T&&T.constructor,U=typeof z=="function"&&z.prototype||qv;return T===U}function jue(T){var z=[];if(T!=null)for(var U in Object(T))z.push(U);return z}function Uue(T){return n9.call(T)}function Vue(T,z,U){return z=a9(z===void 0?T.length-1:z,0),function(){for(var he=arguments,qe=-1,xt=a9(he.length-z,0),Pt=Array(xt);++qe<xt;)Pt[qe]=he[z+qe];qe=-1;for(var tt=Array(z+1);++qe<z;)tt[qe]=he[qe];return tt[z]=U(Pt),hn(T,this,tt)}}function pE(T,z){if(!(z==="constructor"&&typeof T[z]=="function")&&z!="__proto__")return T[z]}var Wue=Hue(Aue);function Hue(T){var z=0,U=0;return function(){var he=Zle(),qe=o-(he-U);if(U=he,qe>0){if(++z>=i)return arguments[0]}else z=0;return T.apply(void 0,arguments)}}function que(T){if(T!=null){try{return Gv.call(T)}catch{}try{return T+""}catch{}}return""}function Jv(T,z){return T===z||T!==T&&z!==z}var gE=u9(function(){return arguments}())?u9:function(T){return am(T)&&zl.call(T,"callee")&&!Xle.call(T,"callee")},mE=Array.isArray;function yE(T){return T!=null&&p9(T.length)&&!vE(T)}function Gue(T){return am(T)&&yE(T)}var h9=Qle||Zue;function vE(T){if(!Oc(T))return!1;var z=Qv(T);return z==h||z==p||z==u||z==b}function p9(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=s}function Oc(T){var z=typeof T;return T!=null&&(z=="object"||z=="function")}function am(T){return T!=null&&typeof T=="object"}function Yue(T){if(!am(T)||Qv(T)!=v)return!1;var z=o9(T);if(z===null)return!0;var U=zl.call(z,"constructor")&&z.constructor;return typeof U=="function"&&U instanceof U&&Gv.call(U)==Gle}var g9=Q?_n(Q):Cue;function Xue(T){return Rue(T,m9(T))}function m9(T){return yE(T)?xue(T):_ue(T)}var Kue=Due(function(T,z,U,he){c9(T,z,U,he)});function Que(T){return function(){return T}}function y9(T){return T}function Zue(){return!1}e.exports=Kue})(J2,J2.exports);var Whe=J2.exports;const bo=dc(Whe);var Hhe=e=>/!(important)?$/.test(e),zN=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,qhe=(e,t)=>n=>{const r=String(t),i=Hhe(r),o=zN(r),s=e?`${e}.${o}`:o;let a=hi(n.__cssMap)&&s in n.__cssMap?n.__cssMap[s].varRef:t;return a=zN(a),i?`${a} !important`:a};function MP(e){const{scale:t,transform:n,compose:r}=e;return(o,s)=>{var a;const l=qhe(t,o)(s);let u=(a=n==null?void 0:n(l,s))!=null?a:l;return r&&(u=r(u,s)),u}}var wb=(...e)=>t=>e.reduce((n,r)=>r(n),t);function ro(e,t){return n=>{const r={property:n,scale:e};return r.transform=MP({scale:e,transform:t}),r}}var Ghe=({rtl:e,ltr:t})=>n=>n.direction==="rtl"?e:t;function Yhe(e){const{property:t,scale:n,transform:r}=e;return{scale:n,property:Ghe(t),transform:n?MP({scale:n,compose:r}):r}}var nG=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function Xhe(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...nG].join(" ")}function Khe(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...nG].join(" ")}var Qhe={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},Zhe={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function Jhe(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var epe={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},a3={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},tpe=new Set(Object.values(a3)),l3=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),npe=e=>e.trim();function rpe(e,t){if(e==null||l3.has(e))return e;if(!(u3(e)||l3.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),o=i==null?void 0:i[1],s=i==null?void 0:i[2];if(!o||!s)return e;const a=o.includes("-gradient")?o:`${o}-gradient`,[l,...u]=s.split(",").map(npe).filter(Boolean);if((u==null?void 0:u.length)===0)return e;const c=l in a3?a3[l]:l;u.unshift(c);const f=u.map(d=>{if(tpe.has(d))return d;const h=d.indexOf(" "),[p,g]=h!==-1?[d.substr(0,h),d.substr(h+1)]:[d],m=u3(g)?g:g&&g.split(" "),y=`colors.${p}`,v=y in t.__cssMap?t.__cssMap[y].varRef:p;return m?[v,...Array.isArray(m)?m:[m]].join(" "):v});return`${a}(${f.join(", ")})`}var u3=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),ipe=(e,t)=>rpe(e,t??{});function ope(e){return/^var\(--.+\)$/.test(e)}var spe=e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}},Ps=e=>t=>`${e}(${t})`,Ve={filter(e){return e!=="auto"?e:Qhe},backdropFilter(e){return e!=="auto"?e:Zhe},ring(e){return Jhe(Ve.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?Xhe():e==="auto-gpu"?Khe():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=spe(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const n={left:"right",right:"left"};return t.direction==="rtl"?n[e]:e},degree(e){if(ope(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:ipe,blur:Ps("blur"),opacity:Ps("opacity"),brightness:Ps("brightness"),contrast:Ps("contrast"),dropShadow:Ps("drop-shadow"),grayscale:Ps("grayscale"),hueRotate:e=>Ps("hue-rotate")(Ve.degree(e)),invert:Ps("invert"),saturate:Ps("saturate"),sepia:Ps("sepia"),bgImage(e){return e==null||u3(e)||l3.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:r}=(t=epe[e])!=null?t:{},i={flexDirection:e};return n&&(i[n]=1),r&&(i[r]=1),i}},L={borderWidths:ro("borderWidths"),borderStyles:ro("borderStyles"),colors:ro("colors"),borders:ro("borders"),gradients:ro("gradients",Ve.gradient),radii:ro("radii",Ve.px),space:ro("space",wb(Ve.vh,Ve.px)),spaceT:ro("space",wb(Ve.vh,Ve.px)),degreeT(e){return{property:e,transform:Ve.degree}},prop(e,t,n){return{property:e,scale:t,...t&&{transform:MP({scale:t,transform:n})}}},propT(e,t){return{property:e,transform:t}},sizes:ro("sizes",wb(Ve.vh,Ve.px)),sizesT:ro("sizes",wb(Ve.vh,Ve.fraction)),shadows:ro("shadows"),logical:Yhe,blur:ro("blur",Ve.blur)},Bx={background:L.colors("background"),backgroundColor:L.colors("backgroundColor"),backgroundImage:L.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Ve.bgClip},bgSize:L.prop("backgroundSize"),bgPosition:L.prop("backgroundPosition"),bg:L.colors("background"),bgColor:L.colors("backgroundColor"),bgPos:L.prop("backgroundPosition"),bgRepeat:L.prop("backgroundRepeat"),bgAttachment:L.prop("backgroundAttachment"),bgGradient:L.gradients("backgroundImage"),bgClip:{transform:Ve.bgClip}};Object.assign(Bx,{bgImage:Bx.backgroundImage,bgImg:Bx.backgroundImage});var nt={border:L.borders("border"),borderWidth:L.borderWidths("borderWidth"),borderStyle:L.borderStyles("borderStyle"),borderColor:L.colors("borderColor"),borderRadius:L.radii("borderRadius"),borderTop:L.borders("borderTop"),borderBlockStart:L.borders("borderBlockStart"),borderTopLeftRadius:L.radii("borderTopLeftRadius"),borderStartStartRadius:L.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:L.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:L.radii("borderTopRightRadius"),borderStartEndRadius:L.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:L.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:L.borders("borderRight"),borderInlineEnd:L.borders("borderInlineEnd"),borderBottom:L.borders("borderBottom"),borderBlockEnd:L.borders("borderBlockEnd"),borderBottomLeftRadius:L.radii("borderBottomLeftRadius"),borderBottomRightRadius:L.radii("borderBottomRightRadius"),borderLeft:L.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:L.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:L.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:L.borders(["borderLeft","borderRight"]),borderInline:L.borders("borderInline"),borderY:L.borders(["borderTop","borderBottom"]),borderBlock:L.borders("borderBlock"),borderTopWidth:L.borderWidths("borderTopWidth"),borderBlockStartWidth:L.borderWidths("borderBlockStartWidth"),borderTopColor:L.colors("borderTopColor"),borderBlockStartColor:L.colors("borderBlockStartColor"),borderTopStyle:L.borderStyles("borderTopStyle"),borderBlockStartStyle:L.borderStyles("borderBlockStartStyle"),borderBottomWidth:L.borderWidths("borderBottomWidth"),borderBlockEndWidth:L.borderWidths("borderBlockEndWidth"),borderBottomColor:L.colors("borderBottomColor"),borderBlockEndColor:L.colors("borderBlockEndColor"),borderBottomStyle:L.borderStyles("borderBottomStyle"),borderBlockEndStyle:L.borderStyles("borderBlockEndStyle"),borderLeftWidth:L.borderWidths("borderLeftWidth"),borderInlineStartWidth:L.borderWidths("borderInlineStartWidth"),borderLeftColor:L.colors("borderLeftColor"),borderInlineStartColor:L.colors("borderInlineStartColor"),borderLeftStyle:L.borderStyles("borderLeftStyle"),borderInlineStartStyle:L.borderStyles("borderInlineStartStyle"),borderRightWidth:L.borderWidths("borderRightWidth"),borderInlineEndWidth:L.borderWidths("borderInlineEndWidth"),borderRightColor:L.colors("borderRightColor"),borderInlineEndColor:L.colors("borderInlineEndColor"),borderRightStyle:L.borderStyles("borderRightStyle"),borderInlineEndStyle:L.borderStyles("borderInlineEndStyle"),borderTopRadius:L.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:L.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:L.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:L.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(nt,{rounded:nt.borderRadius,roundedTop:nt.borderTopRadius,roundedTopLeft:nt.borderTopLeftRadius,roundedTopRight:nt.borderTopRightRadius,roundedTopStart:nt.borderStartStartRadius,roundedTopEnd:nt.borderStartEndRadius,roundedBottom:nt.borderBottomRadius,roundedBottomLeft:nt.borderBottomLeftRadius,roundedBottomRight:nt.borderBottomRightRadius,roundedBottomStart:nt.borderEndStartRadius,roundedBottomEnd:nt.borderEndEndRadius,roundedLeft:nt.borderLeftRadius,roundedRight:nt.borderRightRadius,roundedStart:nt.borderInlineStartRadius,roundedEnd:nt.borderInlineEndRadius,borderStart:nt.borderInlineStart,borderEnd:nt.borderInlineEnd,borderTopStartRadius:nt.borderStartStartRadius,borderTopEndRadius:nt.borderStartEndRadius,borderBottomStartRadius:nt.borderEndStartRadius,borderBottomEndRadius:nt.borderEndEndRadius,borderStartRadius:nt.borderInlineStartRadius,borderEndRadius:nt.borderInlineEndRadius,borderStartWidth:nt.borderInlineStartWidth,borderEndWidth:nt.borderInlineEndWidth,borderStartColor:nt.borderInlineStartColor,borderEndColor:nt.borderInlineEndColor,borderStartStyle:nt.borderInlineStartStyle,borderEndStyle:nt.borderInlineEndStyle});var ape={color:L.colors("color"),textColor:L.colors("color"),fill:L.colors("fill"),stroke:L.colors("stroke")},c3={boxShadow:L.shadows("boxShadow"),mixBlendMode:!0,blendMode:L.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:L.prop("backgroundBlendMode"),opacity:!0};Object.assign(c3,{shadow:c3.boxShadow});var lpe={filter:{transform:Ve.filter},blur:L.blur("--chakra-blur"),brightness:L.propT("--chakra-brightness",Ve.brightness),contrast:L.propT("--chakra-contrast",Ve.contrast),hueRotate:L.propT("--chakra-hue-rotate",Ve.hueRotate),invert:L.propT("--chakra-invert",Ve.invert),saturate:L.propT("--chakra-saturate",Ve.saturate),dropShadow:L.propT("--chakra-drop-shadow",Ve.dropShadow),backdropFilter:{transform:Ve.backdropFilter},backdropBlur:L.blur("--chakra-backdrop-blur"),backdropBrightness:L.propT("--chakra-backdrop-brightness",Ve.brightness),backdropContrast:L.propT("--chakra-backdrop-contrast",Ve.contrast),backdropHueRotate:L.propT("--chakra-backdrop-hue-rotate",Ve.hueRotate),backdropInvert:L.propT("--chakra-backdrop-invert",Ve.invert),backdropSaturate:L.propT("--chakra-backdrop-saturate",Ve.saturate)},ew={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Ve.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:L.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:L.space("gap"),rowGap:L.space("rowGap"),columnGap:L.space("columnGap")};Object.assign(ew,{flexDir:ew.flexDirection});var rG={gridGap:L.space("gridGap"),gridColumnGap:L.space("gridColumnGap"),gridRowGap:L.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},upe={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Ve.outline},outlineOffset:!0,outlineColor:L.colors("outlineColor")},ao={width:L.sizesT("width"),inlineSize:L.sizesT("inlineSize"),height:L.sizes("height"),blockSize:L.sizes("blockSize"),boxSize:L.sizes(["width","height"]),minWidth:L.sizes("minWidth"),minInlineSize:L.sizes("minInlineSize"),minHeight:L.sizes("minHeight"),minBlockSize:L.sizes("minBlockSize"),maxWidth:L.sizes("maxWidth"),maxInlineSize:L.sizes("maxInlineSize"),maxHeight:L.sizes("maxHeight"),maxBlockSize:L.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (min-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r.minW)!=null?i:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (max-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r._minW)!=null?i:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:L.propT("float",Ve.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(ao,{w:ao.width,h:ao.height,minW:ao.minWidth,maxW:ao.maxWidth,minH:ao.minHeight,maxH:ao.maxHeight,overscroll:ao.overscrollBehavior,overscrollX:ao.overscrollBehaviorX,overscrollY:ao.overscrollBehaviorY});var cpe={listStyleType:!0,listStylePosition:!0,listStylePos:L.prop("listStylePosition"),listStyleImage:!0,listStyleImg:L.prop("listStyleImage")};function fpe(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var dpe=e=>{const t=new WeakMap;return(r,i,o,s)=>{if(typeof r>"u")return e(r,i,o);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,o,s);return a.set(i,l),l}},hpe=dpe(fpe),ppe={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},gpe={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},KE=(e,t,n)=>{const r={},i=hpe(e,t,{});for(const o in i)o in n&&n[o]!=null||(r[o]=i[o]);return r},mpe={srOnly:{transform(e){return e===!0?ppe:e==="focusable"?gpe:{}}},layerStyle:{processResult:!0,transform:(e,t,n)=>KE(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>KE(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>KE(t,e,n)}},W0={position:!0,pos:L.prop("position"),zIndex:L.prop("zIndex","zIndices"),inset:L.spaceT("inset"),insetX:L.spaceT(["left","right"]),insetInline:L.spaceT("insetInline"),insetY:L.spaceT(["top","bottom"]),insetBlock:L.spaceT("insetBlock"),top:L.spaceT("top"),insetBlockStart:L.spaceT("insetBlockStart"),bottom:L.spaceT("bottom"),insetBlockEnd:L.spaceT("insetBlockEnd"),left:L.spaceT("left"),insetInlineStart:L.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:L.spaceT("right"),insetInlineEnd:L.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(W0,{insetStart:W0.insetInlineStart,insetEnd:W0.insetInlineEnd});var ype={ring:{transform:Ve.ring},ringColor:L.colors("--chakra-ring-color"),ringOffset:L.prop("--chakra-ring-offset-width"),ringOffsetColor:L.colors("--chakra-ring-offset-color"),ringInset:L.prop("--chakra-ring-inset")},$t={margin:L.spaceT("margin"),marginTop:L.spaceT("marginTop"),marginBlockStart:L.spaceT("marginBlockStart"),marginRight:L.spaceT("marginRight"),marginInlineEnd:L.spaceT("marginInlineEnd"),marginBottom:L.spaceT("marginBottom"),marginBlockEnd:L.spaceT("marginBlockEnd"),marginLeft:L.spaceT("marginLeft"),marginInlineStart:L.spaceT("marginInlineStart"),marginX:L.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:L.spaceT("marginInline"),marginY:L.spaceT(["marginTop","marginBottom"]),marginBlock:L.spaceT("marginBlock"),padding:L.space("padding"),paddingTop:L.space("paddingTop"),paddingBlockStart:L.space("paddingBlockStart"),paddingRight:L.space("paddingRight"),paddingBottom:L.space("paddingBottom"),paddingBlockEnd:L.space("paddingBlockEnd"),paddingLeft:L.space("paddingLeft"),paddingInlineStart:L.space("paddingInlineStart"),paddingInlineEnd:L.space("paddingInlineEnd"),paddingX:L.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:L.space("paddingInline"),paddingY:L.space(["paddingTop","paddingBottom"]),paddingBlock:L.space("paddingBlock")};Object.assign($t,{m:$t.margin,mt:$t.marginTop,mr:$t.marginRight,me:$t.marginInlineEnd,marginEnd:$t.marginInlineEnd,mb:$t.marginBottom,ml:$t.marginLeft,ms:$t.marginInlineStart,marginStart:$t.marginInlineStart,mx:$t.marginX,my:$t.marginY,p:$t.padding,pt:$t.paddingTop,py:$t.paddingY,px:$t.paddingX,pb:$t.paddingBottom,pl:$t.paddingLeft,ps:$t.paddingInlineStart,paddingStart:$t.paddingInlineStart,pr:$t.paddingRight,pe:$t.paddingInlineEnd,paddingEnd:$t.paddingInlineEnd});var vpe={textDecorationColor:L.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:L.shadows("textShadow")},bpe={clipPath:!0,transform:L.propT("transform",Ve.transform),transformOrigin:!0,translateX:L.spaceT("--chakra-translate-x"),translateY:L.spaceT("--chakra-translate-y"),skewX:L.degreeT("--chakra-skew-x"),skewY:L.degreeT("--chakra-skew-y"),scaleX:L.prop("--chakra-scale-x"),scaleY:L.prop("--chakra-scale-y"),scale:L.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:L.degreeT("--chakra-rotate")},xpe={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:L.prop("transitionDuration","transition.duration"),transitionProperty:L.prop("transitionProperty","transition.property"),transitionTimingFunction:L.prop("transitionTimingFunction","transition.easing")},wpe={fontFamily:L.prop("fontFamily","fonts"),fontSize:L.prop("fontSize","fontSizes",Ve.px),fontWeight:L.prop("fontWeight","fontWeights"),lineHeight:L.prop("lineHeight","lineHeights"),letterSpacing:L.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Spe={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:L.spaceT("scrollMargin"),scrollMarginTop:L.spaceT("scrollMarginTop"),scrollMarginBottom:L.spaceT("scrollMarginBottom"),scrollMarginLeft:L.spaceT("scrollMarginLeft"),scrollMarginRight:L.spaceT("scrollMarginRight"),scrollMarginX:L.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:L.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:L.spaceT("scrollPadding"),scrollPaddingTop:L.spaceT("scrollPaddingTop"),scrollPaddingBottom:L.spaceT("scrollPaddingBottom"),scrollPaddingLeft:L.spaceT("scrollPaddingLeft"),scrollPaddingRight:L.spaceT("scrollPaddingRight"),scrollPaddingX:L.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:L.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function iG(e){return hi(e)&&e.reference?e.reference:String(e)}var Dk=(e,...t)=>t.map(iG).join(` ${e} `).replace(/calc/g,""),BN=(...e)=>`calc(${Dk("+",...e)})`,jN=(...e)=>`calc(${Dk("-",...e)})`,f3=(...e)=>`calc(${Dk("*",...e)})`,UN=(...e)=>`calc(${Dk("/",...e)})`,VN=e=>{const t=iG(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:f3(t,-1)},of=Object.assign(e=>({add:(...t)=>of(BN(e,...t)),subtract:(...t)=>of(jN(e,...t)),multiply:(...t)=>of(f3(e,...t)),divide:(...t)=>of(UN(e,...t)),negate:()=>of(VN(e)),toString:()=>e.toString()}),{add:BN,subtract:jN,multiply:f3,divide:UN,negate:VN});function kpe(e,t="-"){return e.replace(/\s+/g,t)}function Cpe(e){const t=kpe(e.toString());return Epe(_pe(t))}function _pe(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function Epe(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function $pe(e,t=""){return[t,e].filter(Boolean).join("-")}function Ape(e,t){return`var(${e}${t?`, ${t}`:""})`}function Tpe(e,t=""){return Cpe(`--${$pe(e,t)}`)}function Ce(e,t,n){const r=Tpe(e,n);return{variable:r,reference:Ape(r,t)}}function Mpe(e,t){const n={};for(const r of t){if(Array.isArray(r)){const[i,o]=r;n[i]=Ce(`${e}-${i}`,o);continue}n[r]=Ce(`${e}-${r}`)}return n}function Ppe(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function Fpe(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}function d3(e){if(e==null)return e;const{unitless:t}=Fpe(e);return t||typeof e=="number"?`${e}px`:e}var oG=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,PP=e=>Object.fromEntries(Object.entries(e).sort(oG));function WN(e){const t=PP(e);return Object.assign(Object.values(t),t)}function Rpe(e){const t=Object.keys(PP(e));return new Set(t)}function HN(e){var t;if(!e)return e;e=(t=d3(e))!=null?t:e;const n=-.02;return typeof e=="number"?`${e+n}`:e.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function t0(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${d3(e)})`),t&&n.push("and",`(max-width: ${d3(t)})`),n.join(" ")}function Dpe(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const n=WN(e),r=Object.entries(e).sort(oG).map(([s,a],l,u)=>{var c;let[,f]=(c=u[l+1])!=null?c:[];return f=parseFloat(f)>0?HN(f):void 0,{_minW:HN(a),breakpoint:s,minW:a,maxW:f,maxWQuery:t0(null,f),minWQuery:t0(a),minMaxQuery:t0(a,f)}}),i=Rpe(e),o=Array.from(i.values());return{keys:i,normalized:n,isResponsive(s){const a=Object.keys(s);return a.length>0&&a.every(l=>i.has(l))},asObject:PP(e),asArray:WN(e),details:r,get(s){return r.find(a=>a.breakpoint===s)},media:[null,...n.map(s=>t0(s)).slice(1)],toArrayValue(s){if(!hi(s))throw new Error("toArrayValue: value must be an object");const a=o.map(l=>{var u;return(u=s[l])!=null?u:null});for(;Ppe(a)===null;)a.pop();return a},toObjectValue(s){if(!Array.isArray(s))throw new Error("toObjectValue: value must be an array");return s.reduce((a,l,u)=>{const c=o[u];return c!=null&&l!=null&&(a[c]=l),a},{})}}}var zn={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},jl=e=>sG(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Da=e=>sG(t=>e(t,"~ &"),"[data-peer]",".peer"),sG=(e,...t)=>t.map(e).join(", "),Ok={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:jl(zn.hover),_peerHover:Da(zn.hover),_groupFocus:jl(zn.focus),_peerFocus:Da(zn.focus),_groupFocusVisible:jl(zn.focusVisible),_peerFocusVisible:Da(zn.focusVisible),_groupActive:jl(zn.active),_peerActive:Da(zn.active),_groupDisabled:jl(zn.disabled),_peerDisabled:Da(zn.disabled),_groupInvalid:jl(zn.invalid),_peerInvalid:Da(zn.invalid),_groupChecked:jl(zn.checked),_peerChecked:Da(zn.checked),_groupFocusWithin:jl(zn.focusWithin),_peerFocusWithin:Da(zn.focusWithin),_peerPlaceholderShown:Da(zn.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},aG=Object.keys(Ok);function qN(e,t){return Ce(String(e).replace(/\./g,"-"),void 0,t)}function Ope(e,t){let n={};const r={};for(const[i,o]of Object.entries(e)){const{isSemantic:s,value:a}=o,{variable:l,reference:u}=qN(i,t==null?void 0:t.cssVarPrefix);if(!s){if(i.startsWith("space")){const d=i.split("."),[h,...p]=d,g=`${h}.-${p.join(".")}`,m=of.negate(a),y=of.negate(u);r[g]={value:m,var:l,varRef:y}}n[l]=a,r[i]={value:a,var:l,varRef:u};continue}const c=d=>{const p=[String(i).split(".")[0],d].join(".");if(!e[p])return d;const{reference:m}=qN(p,t==null?void 0:t.cssVarPrefix);return m},f=hi(a)?a:{default:a};n=bo(n,Object.entries(f).reduce((d,[h,p])=>{var g,m;if(!p)return d;const y=c(`${p}`);if(h==="default")return d[l]=y,d;const v=(m=(g=Ok)==null?void 0:g[h])!=null?m:h;return d[v]={[l]:y},d},{})),r[i]={value:u,var:l,varRef:u}}return{cssVars:n,cssMap:r}}function Npe(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}function Ipe(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Lpe(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function GN(e,t,n={}){const{stop:r,getKey:i}=n;function o(s,a=[]){var l;if(Lpe(s)||Array.isArray(s)){const u={};for(const[c,f]of Object.entries(s)){const d=(l=i==null?void 0:i(c))!=null?l:c,h=[...a,d];if(r!=null&&r(s,h))return t(s,a);u[d]=o(f,h)}return u}return t(s,a)}return o(e)}var zpe=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function Bpe(e){return Ipe(e,zpe)}function jpe(e){return e.semanticTokens}function Upe(e){const{__cssMap:t,__cssVars:n,__breakpoints:r,...i}=e;return i}var Vpe=e=>aG.includes(e)||e==="default";function Wpe({tokens:e,semanticTokens:t}){const n={};return GN(e,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!1,value:r})}),GN(t,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!0,value:r})},{stop:r=>Object.keys(r).every(Vpe)}),n}function Hpe(e){var t;const n=Upe(e),r=Bpe(n),i=jpe(n),o=Wpe({tokens:r,semanticTokens:i}),s=(t=n.config)==null?void 0:t.cssVarPrefix,{cssMap:a,cssVars:l}=Ope(o,{cssVarPrefix:s});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...l},__cssMap:a,__breakpoints:Dpe(n.breakpoints)}),n}var FP=bo({},Bx,nt,ape,ew,ao,lpe,ype,upe,rG,mpe,W0,c3,$t,Spe,wpe,vpe,bpe,cpe,xpe),qpe=Object.assign({},$t,ao,ew,rG,W0),Gpe=Object.keys(qpe),Ype=[...Object.keys(FP),...aG],Xpe={...FP,...Ok},Kpe=e=>e in Xpe,Qpe=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:r,media:i}=t.__breakpoints,o={};for(const s in e){let a=Zs(e[s],t);if(a==null)continue;if(a=hi(a)&&n(a)?r(a):a,!Array.isArray(a)){o[s]=a;continue}const l=a.slice(0,i.length).length;for(let u=0;u<l;u+=1){const c=i==null?void 0:i[u];if(!c){o[s]=a[u];continue}o[c]=o[c]||{},a[u]!=null&&(o[c][s]=a[u])}}return o};function Zpe(e){const t=[];let n="",r=!1;for(let i=0;i<e.length;i++){const o=e[i];o==="("?(r=!0,n+=o):o===")"?(r=!1,n+=o):o===","&&!r?(t.push(n),n=""):n+=o}return n=n.trim(),n&&t.push(n),t}function Jpe(e){return/^var\(--.+\)$/.test(e)}var ege=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!Jpe(t),tge=(e,t)=>{var n,r;if(t==null)return t;const i=l=>{var u,c;return(c=(u=e.__cssMap)==null?void 0:u[l])==null?void 0:c.varRef},o=l=>{var u;return(u=i(l))!=null?u:l},[s,a]=Zpe(t);return t=(r=(n=i(s))!=null?n:o(a))!=null?r:o(t),t};function nge(e){const{configs:t={},pseudos:n={},theme:r}=e,i=(o,s=!1)=>{var a,l,u;const c=Zs(o,r),f=Qpe(c)(r);let d={};for(let h in f){const p=f[h];let g=Zs(p,r);h in n&&(h=n[h]),ege(h,g)&&(g=tge(r,g));let m=t[h];if(m===!0&&(m={property:h}),hi(g)){d[h]=(a=d[h])!=null?a:{},d[h]=bo({},d[h],i(g,!0));continue}let y=(u=(l=m==null?void 0:m.transform)==null?void 0:l.call(m,g,r,c))!=null?u:g;y=m!=null&&m.processResult?i(y,!0):y;const v=Zs(m==null?void 0:m.property,r);if(!s&&(m!=null&&m.static)){const b=Zs(m.static,r);d=bo({},d,b)}if(v&&Array.isArray(v)){for(const b of v)d[b]=y;continue}if(v){v==="&"&&hi(y)?d=bo({},d,y):d[v]=y;continue}if(hi(y)){d=bo({},d,y);continue}d[h]=y}return d};return i}var lG=e=>t=>nge({theme:t,pseudos:Ok,configs:FP})(e);function _t(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function rge(e,t){if(Array.isArray(e))return e;if(hi(e))return t(e);if(e!=null)return[e]}function ige(e,t){for(let n=t+1;n<e.length;n++)if(e[n]!=null)return n;return-1}function oge(e){const t=e.__breakpoints;return function(r,i,o,s){var a,l;if(!t)return;const u={},c=rge(o,t.toArrayValue);if(!c)return u;const f=c.length,d=f===1,h=!!r.parts;for(let p=0;p<f;p++){const g=t.details[p],m=t.details[ige(c,p)],y=t0(g.minW,m==null?void 0:m._minW),v=Zs((a=r[i])==null?void 0:a[c[p]],s);if(v){if(h){(l=r.parts)==null||l.forEach(b=>{bo(u,{[b]:d?v[b]:{[y]:v[b]}})});continue}if(!h){d?bo(u,v):u[y]=v;continue}u[y]=v}}return u}}function sge(e){return t=>{var n;const{variant:r,size:i,theme:o}=t,s=oge(o);return bo({},Zs((n=e.baseStyle)!=null?n:{},t),s(e,"sizes",i,t),s(e,"variants",r,t))}}function Er(e){return Npe(e,["styleConfig","size","variant","colorScheme"])}var age=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function lge(e){return hi(e)?age.every(t=>Object.prototype.hasOwnProperty.call(e,t)):!1}var uge={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},cge={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},fge={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},dge={property:uge,easing:cge,duration:fge},hge=dge,pge={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},gge=pge,mge={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},yge=mge,vge={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},bge=vge,xge={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},wge=xge,Sge={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},kge=Sge,Cge={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},_ge=Cge,Ege={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},$ge=Ege,Age={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},uG=Age,cG={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Tge={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},Mge={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},Pge={...cG,...Tge,container:Mge},fG=Pge,Fge={breakpoints:bge,zIndices:gge,radii:kge,blur:$ge,colors:wge,...uG,sizes:fG,shadows:_ge,space:cG,borders:yge,transition:hge},{defineMultiStyleConfig:Rge,definePartsStyle:n0}=_t(["stepper","step","title","description","indicator","separator","icon","number"]),Ha=Ce("stepper-indicator-size"),Ah=Ce("stepper-icon-size"),Th=Ce("stepper-title-font-size"),r0=Ce("stepper-description-font-size"),bm=Ce("stepper-accent-color"),Dge=n0(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[bm.variable]:`colors.${e}.500`,_dark:{[bm.variable]:`colors.${e}.200`}},title:{fontSize:Th.reference,fontWeight:"medium"},description:{fontSize:r0.reference,color:"chakra-subtle-text"},number:{fontSize:Th.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Ah.reference,height:Ah.reference},indicator:{flexShrink:0,borderRadius:"full",width:Ha.reference,height:Ha.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:bm.reference},"&[data-status=complete]":{bg:bm.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:bm.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${Ha.reference} - 8px)`,top:`calc(${Ha.reference} + 4px)`,insetStart:`calc(${Ha.reference} / 2 - 1px)`}}})),Oge=Rge({baseStyle:Dge,sizes:{xs:n0({stepper:{[Ha.variable]:"sizes.4",[Ah.variable]:"sizes.3",[Th.variable]:"fontSizes.xs",[r0.variable]:"fontSizes.xs"}}),sm:n0({stepper:{[Ha.variable]:"sizes.6",[Ah.variable]:"sizes.4",[Th.variable]:"fontSizes.sm",[r0.variable]:"fontSizes.xs"}}),md:n0({stepper:{[Ha.variable]:"sizes.8",[Ah.variable]:"sizes.5",[Th.variable]:"fontSizes.md",[r0.variable]:"fontSizes.sm"}}),lg:n0({stepper:{[Ha.variable]:"sizes.10",[Ah.variable]:"sizes.6",[Th.variable]:"fontSizes.lg",[r0.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function at(e,t={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...c){r();for(const f of c)t[f]=l(f);return at(e,t)}function o(...c){for(const f of c)f in t||(t[f]=l(f));return at(e,t)}function s(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.selector]))}function a(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.className]))}function l(c){const h=`chakra-${(["container","root"].includes(c??"")?[e]:[e,c]).filter(Boolean).join("__")}`;return{className:h,selector:`.${h}`,toString:()=>c}}return{parts:i,toPart:l,extend:o,selectors:s,classnames:a,get keys(){return Object.keys(t)},__type:{}}}var Nge=at("accordion").parts("root","container","button","panel").extend("icon"),Ige=at("alert").parts("title","description","container").extend("icon","spinner"),Lge=at("avatar").parts("label","badge","container").extend("excessLabel","group"),zge=at("breadcrumb").parts("link","item","container").extend("separator");at("button").parts();var Bge=at("checkbox").parts("control","icon","container").extend("label");at("progress").parts("track","filledTrack").extend("label");var jge=at("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),Uge=at("editable").parts("preview","input","textarea"),Vge=at("form").parts("container","requiredIndicator","helperText"),Wge=at("formError").parts("text","icon"),Hge=at("input").parts("addon","field","element","group"),qge=at("list").parts("container","item","icon"),Gge=at("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),Yge=at("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),Xge=at("numberinput").parts("root","field","stepperGroup","stepper");at("pininput").parts("field");var Kge=at("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),Qge=at("progress").parts("label","filledTrack","track"),Zge=at("radio").parts("container","control","label"),Jge=at("select").parts("field","icon"),eme=at("slider").parts("container","track","thumb","filledTrack","mark"),tme=at("stat").parts("container","label","helpText","number","icon"),nme=at("switch").parts("container","track","thumb","label"),rme=at("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),ime=at("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),ome=at("tag").parts("container","label","closeButton"),sme=at("card").parts("container","header","body","footer");at("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function mf(e,t,n){return Math.min(Math.max(e,n),t)}class ame extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var i0=ame;function RP(e){if(typeof e!="string")throw new i0(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=gme.test(e)?cme(e):e;const n=fme.exec(t);if(n){const s=Array.from(n).slice(1);return[...s.slice(0,3).map(a=>parseInt(zy(a,2),16)),parseInt(zy(s[3]||"f",2),16)/255]}const r=dme.exec(t);if(r){const s=Array.from(r).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,16)),parseInt(s[3]||"ff",16)/255]}const i=hme.exec(t);if(i){const s=Array.from(i).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,10)),parseFloat(s[3]||"1")]}const o=pme.exec(t);if(o){const[s,a,l,u]=Array.from(o).slice(1).map(parseFloat);if(mf(0,100,a)!==a)throw new i0(e);if(mf(0,100,l)!==l)throw new i0(e);return[...mme(s,a,l),Number.isNaN(u)?1:u]}throw new i0(e)}function lme(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const YN=e=>parseInt(e.replace(/_/g,""),36),ume="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=YN(t.substring(0,3)),r=YN(t.substring(3)).toString(16);let i="";for(let o=0;o<6-r.length;o++)i+="0";return e[n]=`${i}${r}`,e},{});function cme(e){const t=e.toLowerCase().trim(),n=ume[lme(t)];if(!n)throw new i0(e);return`#${n}`}const zy=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),fme=new RegExp(`^#${zy("([a-f0-9])",3)}([a-f0-9])?$`,"i"),dme=new RegExp(`^#${zy("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),hme=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${zy(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),pme=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,gme=/^[a-z]+$/i,XN=e=>Math.round(e*255),mme=(e,t,n)=>{let r=n/100;if(t===0)return[r,r,r].map(XN);const i=(e%360+360)%360/60,o=(1-Math.abs(2*r-1))*(t/100),s=o*(1-Math.abs(i%2-1));let a=0,l=0,u=0;i>=0&&i<1?(a=o,l=s):i>=1&&i<2?(a=s,l=o):i>=2&&i<3?(l=o,u=s):i>=3&&i<4?(l=s,u=o):i>=4&&i<5?(a=s,u=o):i>=5&&i<6&&(a=o,u=s);const c=r-o/2,f=a+c,d=l+c,h=u+c;return[f,d,h].map(XN)};function yme(e,t,n,r){return`rgba(${mf(0,255,e).toFixed()}, ${mf(0,255,t).toFixed()}, ${mf(0,255,n).toFixed()}, ${parseFloat(mf(0,1,r).toFixed(3))})`}function vme(e,t){const[n,r,i,o]=RP(e);return yme(n,r,i,o-t)}function bme(e){const[t,n,r,i]=RP(e);let o=s=>{const a=mf(0,255,s).toString(16);return a.length===1?`0${a}`:a};return`#${o(t)}${o(n)}${o(r)}${i<1?o(Math.round(i*255)):""}`}function xme(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var wme=e=>Object.keys(e).length===0,jr=(e,t,n)=>{const r=xme(e,`colors.${t}`,t);try{return bme(r),r}catch{return n??"#000000"}},Sme=e=>{const[t,n,r]=RP(e);return(t*299+n*587+r*114)/1e3},kme=e=>t=>{const n=jr(t,e);return Sme(n)<128?"dark":"light"},Cme=e=>t=>kme(e)(t)==="dark",Np=(e,t)=>n=>{const r=jr(n,e);return vme(r,1-t)};function KN(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var _me=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function Eme(e){const t=_me();return!e||wme(e)?t:e.string&&e.colors?Ame(e.string,e.colors):e.string&&!e.colors?$me(e.string):e.colors&&!e.string?Tme(e.colors):t}function $me(e){let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t=t&t;let n="#";for(let r=0;r<3;r+=1){const i=t>>r*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function Ame(e,t){let n=0;if(e.length===0)return t[0];for(let r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%t.length+t.length)%t.length,t[n]}function Tme(e){return e[Math.floor(Math.random()*e.length)]}function ke(e,t){return n=>n.colorMode==="dark"?t:e}function DP(e){const{orientation:t,vertical:n,horizontal:r}=e;return t?t==="vertical"?n:r:{}}function dG(e){return hi(e)&&e.reference?e.reference:String(e)}var Nk=(e,...t)=>t.map(dG).join(` ${e} `).replace(/calc/g,""),QN=(...e)=>`calc(${Nk("+",...e)})`,ZN=(...e)=>`calc(${Nk("-",...e)})`,h3=(...e)=>`calc(${Nk("*",...e)})`,JN=(...e)=>`calc(${Nk("/",...e)})`,eI=e=>{const t=dG(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:h3(t,-1)},qa=Object.assign(e=>({add:(...t)=>qa(QN(e,...t)),subtract:(...t)=>qa(ZN(e,...t)),multiply:(...t)=>qa(h3(e,...t)),divide:(...t)=>qa(JN(e,...t)),negate:()=>qa(eI(e)),toString:()=>e.toString()}),{add:QN,subtract:ZN,multiply:h3,divide:JN,negate:eI});function Mme(e){return!Number.isInteger(parseFloat(e.toString()))}function Pme(e,t="-"){return e.replace(/\s+/g,t)}function hG(e){const t=Pme(e.toString());return t.includes("\\.")?e:Mme(e)?t.replace(".","\\."):e}function Fme(e,t=""){return[t,hG(e)].filter(Boolean).join("-")}function Rme(e,t){return`var(${hG(e)}${t?`, ${t}`:""})`}function Dme(e,t=""){return`--${Fme(e,t)}`}function wn(e,t){const n=Dme(e,void 0);return{variable:n,reference:Rme(n,Ome(void 0))}}function Ome(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:Nme,definePartsStyle:jx}=_t(nme.keys),H0=wn("switch-track-width"),Pf=wn("switch-track-height"),QE=wn("switch-track-diff"),Ime=qa.subtract(H0,Pf),p3=wn("switch-thumb-x"),xm=wn("switch-bg"),Lme=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[H0.reference],height:[Pf.reference],transitionProperty:"common",transitionDuration:"fast",[xm.variable]:"colors.gray.300",_dark:{[xm.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[xm.variable]:`colors.${t}.500`,_dark:{[xm.variable]:`colors.${t}.200`}},bg:xm.reference}},zme={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Pf.reference],height:[Pf.reference],_checked:{transform:`translateX(${p3.reference})`}},Bme=jx(e=>({container:{[QE.variable]:Ime,[p3.variable]:QE.reference,_rtl:{[p3.variable]:qa(QE).negate().toString()}},track:Lme(e),thumb:zme})),jme={sm:jx({container:{[H0.variable]:"1.375rem",[Pf.variable]:"sizes.3"}}),md:jx({container:{[H0.variable]:"1.875rem",[Pf.variable]:"sizes.4"}}),lg:jx({container:{[H0.variable]:"2.875rem",[Pf.variable]:"sizes.6"}})},Ume=Nme({baseStyle:Bme,sizes:jme,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Vme,definePartsStyle:Zh}=_t(rme.keys),Wme=Zh({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),tw={"&[data-is-numeric=true]":{textAlign:"end"}},Hme=Zh(e=>{const{colorScheme:t}=e;return{th:{color:ke("gray.600","gray.400")(e),borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...tw},td:{borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...tw},caption:{color:ke("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),qme=Zh(e=>{const{colorScheme:t}=e;return{th:{color:ke("gray.600","gray.400")(e),borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...tw},td:{borderBottom:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e),...tw},caption:{color:ke("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:ke(`${t}.100`,`${t}.700`)(e)},td:{background:ke(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),Gme={simple:Hme,striped:qme,unstyled:{}},Yme={sm:Zh({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Zh({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Zh({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},Xme=Vme({baseStyle:Wme,variants:Gme,sizes:Yme,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),si=Ce("tabs-color"),ns=Ce("tabs-bg"),Sb=Ce("tabs-border-color"),{defineMultiStyleConfig:Kme,definePartsStyle:ia}=_t(ime.keys),Qme=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},Zme=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},Jme=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:n==="vertical"?"column":"row"}},e0e={p:4},t0e=ia(e=>({root:Qme(e),tab:Zme(e),tablist:Jme(e),tabpanel:e0e})),n0e={sm:ia({tab:{py:1,px:4,fontSize:"sm"}}),md:ia({tab:{fontSize:"md",py:2,px:4}}),lg:ia({tab:{fontSize:"lg",py:3,px:4}})},r0e=ia(e=>{const{colorScheme:t,orientation:n}=e,r=n==="vertical",i=r?"borderStart":"borderBottom",o=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[si.variable]:`colors.${t}.600`,_dark:{[si.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[ns.variable]:"colors.gray.200",_dark:{[ns.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:si.reference,bg:ns.reference}}}),i0e=ia(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[Sb.variable]:"transparent",_selected:{[si.variable]:`colors.${t}.600`,[Sb.variable]:"colors.white",_dark:{[si.variable]:`colors.${t}.300`,[Sb.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:Sb.reference},color:si.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),o0e=ia(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[ns.variable]:"colors.gray.50",_dark:{[ns.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[ns.variable]:"colors.white",[si.variable]:`colors.${t}.600`,_dark:{[ns.variable]:"colors.gray.800",[si.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:si.reference,bg:ns.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),s0e=ia(e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:jr(n,`${t}.700`),bg:jr(n,`${t}.100`)}}}}),a0e=ia(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[si.variable]:"colors.gray.600",_dark:{[si.variable]:"inherit"},_selected:{[si.variable]:"colors.white",[ns.variable]:`colors.${t}.600`,_dark:{[si.variable]:"colors.gray.800",[ns.variable]:`colors.${t}.300`}},color:si.reference,bg:ns.reference}}}),l0e=ia({}),u0e={line:r0e,enclosed:i0e,"enclosed-colored":o0e,"soft-rounded":s0e,"solid-rounded":a0e,unstyled:l0e},c0e=Kme({baseStyle:t0e,sizes:n0e,variants:u0e,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),tn=Mpe("badge",["bg","color","shadow"]),f0e={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:tn.bg.reference,color:tn.color.reference,boxShadow:tn.shadow.reference},d0e=e=>{const{colorScheme:t,theme:n}=e,r=Np(`${t}.500`,.6)(n);return{[tn.bg.variable]:`colors.${t}.500`,[tn.color.variable]:"colors.white",_dark:{[tn.bg.variable]:r,[tn.color.variable]:"colors.whiteAlpha.800"}}},h0e=e=>{const{colorScheme:t,theme:n}=e,r=Np(`${t}.200`,.16)(n);return{[tn.bg.variable]:`colors.${t}.100`,[tn.color.variable]:`colors.${t}.800`,_dark:{[tn.bg.variable]:r,[tn.color.variable]:`colors.${t}.200`}}},p0e=e=>{const{colorScheme:t,theme:n}=e,r=Np(`${t}.200`,.8)(n);return{[tn.color.variable]:`colors.${t}.500`,_dark:{[tn.color.variable]:r},[tn.shadow.variable]:`inset 0 0 0px 1px ${tn.color.reference}`}},g0e={solid:d0e,subtle:h0e,outline:p0e},q0={baseStyle:f0e,variants:g0e,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:m0e,definePartsStyle:Ff}=_t(ome.keys),tI=Ce("tag-bg"),nI=Ce("tag-color"),ZE=Ce("tag-shadow"),Ux=Ce("tag-min-height"),Vx=Ce("tag-min-width"),Wx=Ce("tag-font-size"),Hx=Ce("tag-padding-inline"),y0e={fontWeight:"medium",lineHeight:1.2,outline:0,[nI.variable]:tn.color.reference,[tI.variable]:tn.bg.reference,[ZE.variable]:tn.shadow.reference,color:nI.reference,bg:tI.reference,boxShadow:ZE.reference,borderRadius:"md",minH:Ux.reference,minW:Vx.reference,fontSize:Wx.reference,px:Hx.reference,_focusVisible:{[ZE.variable]:"shadows.outline"}},v0e={lineHeight:1.2,overflow:"visible"},b0e={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},x0e=Ff({container:y0e,label:v0e,closeButton:b0e}),w0e={sm:Ff({container:{[Ux.variable]:"sizes.5",[Vx.variable]:"sizes.5",[Wx.variable]:"fontSizes.xs",[Hx.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:Ff({container:{[Ux.variable]:"sizes.6",[Vx.variable]:"sizes.6",[Wx.variable]:"fontSizes.sm",[Hx.variable]:"space.2"}}),lg:Ff({container:{[Ux.variable]:"sizes.8",[Vx.variable]:"sizes.8",[Wx.variable]:"fontSizes.md",[Hx.variable]:"space.3"}})},S0e={subtle:Ff(e=>{var t;return{container:(t=q0.variants)==null?void 0:t.subtle(e)}}),solid:Ff(e=>{var t;return{container:(t=q0.variants)==null?void 0:t.solid(e)}}),outline:Ff(e=>{var t;return{container:(t=q0.variants)==null?void 0:t.outline(e)}})},k0e=m0e({variants:S0e,baseStyle:x0e,sizes:w0e,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:Qa,defineMultiStyleConfig:C0e}=_t(Hge.keys),Mh=Ce("input-height"),Ph=Ce("input-font-size"),Fh=Ce("input-padding"),Rh=Ce("input-border-radius"),_0e=Qa({addon:{height:Mh.reference,fontSize:Ph.reference,px:Fh.reference,borderRadius:Rh.reference},field:{width:"100%",height:Mh.reference,fontSize:Ph.reference,px:Fh.reference,borderRadius:Rh.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),Ul={lg:{[Ph.variable]:"fontSizes.lg",[Fh.variable]:"space.4",[Rh.variable]:"radii.md",[Mh.variable]:"sizes.12"},md:{[Ph.variable]:"fontSizes.md",[Fh.variable]:"space.4",[Rh.variable]:"radii.md",[Mh.variable]:"sizes.10"},sm:{[Ph.variable]:"fontSizes.sm",[Fh.variable]:"space.3",[Rh.variable]:"radii.sm",[Mh.variable]:"sizes.8"},xs:{[Ph.variable]:"fontSizes.xs",[Fh.variable]:"space.2",[Rh.variable]:"radii.sm",[Mh.variable]:"sizes.6"}},E0e={lg:Qa({field:Ul.lg,group:Ul.lg}),md:Qa({field:Ul.md,group:Ul.md}),sm:Qa({field:Ul.sm,group:Ul.sm}),xs:Qa({field:Ul.xs,group:Ul.xs})};function OP(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||ke("blue.500","blue.300")(e),errorBorderColor:n||ke("red.500","red.300")(e)}}var $0e=Qa(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=OP(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:ke("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:jr(t,r),boxShadow:`0 0 0 1px ${jr(t,r)}`},_focusVisible:{zIndex:1,borderColor:jr(t,n),boxShadow:`0 0 0 1px ${jr(t,n)}`}},addon:{border:"1px solid",borderColor:ke("inherit","whiteAlpha.50")(e),bg:ke("gray.100","whiteAlpha.300")(e)}}}),A0e=Qa(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=OP(e);return{field:{border:"2px solid",borderColor:"transparent",bg:ke("gray.100","whiteAlpha.50")(e),_hover:{bg:ke("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:jr(t,r)},_focusVisible:{bg:"transparent",borderColor:jr(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:ke("gray.100","whiteAlpha.50")(e)}}}),T0e=Qa(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=OP(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:jr(t,r),boxShadow:`0px 1px 0px 0px ${jr(t,r)}`},_focusVisible:{borderColor:jr(t,n),boxShadow:`0px 1px 0px 0px ${jr(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),M0e=Qa({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),P0e={outline:$0e,filled:A0e,flushed:T0e,unstyled:M0e},ot=C0e({baseStyle:_0e,sizes:E0e,variants:P0e,defaultProps:{size:"md",variant:"outline"}}),rI,F0e={...(rI=ot.baseStyle)==null?void 0:rI.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},iI,oI,R0e={outline:e=>{var t,n;return(n=(t=ot.variants)==null?void 0:t.outline(e).field)!=null?n:{}},flushed:e=>{var t,n;return(n=(t=ot.variants)==null?void 0:t.flushed(e).field)!=null?n:{}},filled:e=>{var t,n;return(n=(t=ot.variants)==null?void 0:t.filled(e).field)!=null?n:{}},unstyled:(oI=(iI=ot.variants)==null?void 0:iI.unstyled.field)!=null?oI:{}},sI,aI,lI,uI,cI,fI,dI,hI,D0e={xs:(aI=(sI=ot.sizes)==null?void 0:sI.xs.field)!=null?aI:{},sm:(uI=(lI=ot.sizes)==null?void 0:lI.sm.field)!=null?uI:{},md:(fI=(cI=ot.sizes)==null?void 0:cI.md.field)!=null?fI:{},lg:(hI=(dI=ot.sizes)==null?void 0:dI.lg.field)!=null?hI:{}},O0e={baseStyle:F0e,sizes:D0e,variants:R0e,defaultProps:{size:"md",variant:"outline"}},kb=wn("tooltip-bg"),JE=wn("tooltip-fg"),N0e=wn("popper-arrow-bg"),I0e={bg:kb.reference,color:JE.reference,[kb.variable]:"colors.gray.700",[JE.variable]:"colors.whiteAlpha.900",_dark:{[kb.variable]:"colors.gray.300",[JE.variable]:"colors.gray.900"},[N0e.variable]:kb.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},L0e={baseStyle:I0e},{defineMultiStyleConfig:z0e,definePartsStyle:o0}=_t(Qge.keys),B0e=e=>{const{colorScheme:t,theme:n,isIndeterminate:r,hasStripe:i}=e,o=ke(KN(),KN("1rem","rgba(0,0,0,0.1)"))(e),s=ke(`${t}.500`,`${t}.200`)(e),a=`linear-gradient(
    to right,
    transparent 0%,
    ${jr(n,s)} 50%,
    transparent 100%
  )`;return{...!r&&i&&o,...r?{bgImage:a}:{bgColor:s}}},j0e={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},U0e=e=>({bg:ke("gray.100","whiteAlpha.300")(e)}),V0e=e=>({transitionProperty:"common",transitionDuration:"slow",...B0e(e)}),W0e=o0(e=>({label:j0e,filledTrack:V0e(e),track:U0e(e)})),H0e={xs:o0({track:{h:"1"}}),sm:o0({track:{h:"2"}}),md:o0({track:{h:"3"}}),lg:o0({track:{h:"4"}})},q0e=z0e({sizes:H0e,baseStyle:W0e,defaultProps:{size:"md",colorScheme:"blue"}}),G0e=e=>typeof e=="function";function Hr(e,...t){return G0e(e)?e(...t):e}var{definePartsStyle:qx,defineMultiStyleConfig:Y0e}=_t(Bge.keys),G0=Ce("checkbox-size"),X0e=e=>{const{colorScheme:t}=e;return{w:G0.reference,h:G0.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:ke(`${t}.500`,`${t}.200`)(e),borderColor:ke(`${t}.500`,`${t}.200`)(e),color:ke("white","gray.900")(e),_hover:{bg:ke(`${t}.600`,`${t}.300`)(e),borderColor:ke(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:ke("gray.200","transparent")(e),bg:ke("gray.200","whiteAlpha.300")(e),color:ke("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:ke(`${t}.500`,`${t}.200`)(e),borderColor:ke(`${t}.500`,`${t}.200`)(e),color:ke("white","gray.900")(e)},_disabled:{bg:ke("gray.100","whiteAlpha.100")(e),borderColor:ke("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:ke("red.500","red.300")(e)}}},K0e={_disabled:{cursor:"not-allowed"}},Q0e={userSelect:"none",_disabled:{opacity:.4}},Z0e={transitionProperty:"transform",transitionDuration:"normal"},J0e=qx(e=>({icon:Z0e,container:K0e,control:Hr(X0e,e),label:Q0e})),eye={sm:qx({control:{[G0.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:qx({control:{[G0.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:qx({control:{[G0.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},nw=Y0e({baseStyle:J0e,sizes:eye,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:tye,definePartsStyle:Gx}=_t(Zge.keys),nye=e=>{var t;const n=(t=Hr(nw.baseStyle,e))==null?void 0:t.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},rye=Gx(e=>{var t,n,r,i;return{label:(n=(t=nw).baseStyle)==null?void 0:n.call(t,e).label,container:(i=(r=nw).baseStyle)==null?void 0:i.call(r,e).container,control:nye(e)}}),iye={md:Gx({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:Gx({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:Gx({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},oye=tye({baseStyle:rye,sizes:iye,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:sye,definePartsStyle:aye}=_t(Jge.keys),Cb=Ce("select-bg"),pI,lye={...(pI=ot.baseStyle)==null?void 0:pI.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:Cb.reference,[Cb.variable]:"colors.white",_dark:{[Cb.variable]:"colors.gray.700"},"> option, > optgroup":{bg:Cb.reference}},uye={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},cye=aye({field:lye,icon:uye}),_b={paddingInlineEnd:"8"},gI,mI,yI,vI,bI,xI,wI,SI,fye={lg:{...(gI=ot.sizes)==null?void 0:gI.lg,field:{...(mI=ot.sizes)==null?void 0:mI.lg.field,..._b}},md:{...(yI=ot.sizes)==null?void 0:yI.md,field:{...(vI=ot.sizes)==null?void 0:vI.md.field,..._b}},sm:{...(bI=ot.sizes)==null?void 0:bI.sm,field:{...(xI=ot.sizes)==null?void 0:xI.sm.field,..._b}},xs:{...(wI=ot.sizes)==null?void 0:wI.xs,field:{...(SI=ot.sizes)==null?void 0:SI.xs.field,..._b},icon:{insetEnd:"1"}}},dye=sye({baseStyle:cye,sizes:fye,variants:ot.variants,defaultProps:ot.defaultProps}),e$=Ce("skeleton-start-color"),t$=Ce("skeleton-end-color"),hye={[e$.variable]:"colors.gray.100",[t$.variable]:"colors.gray.400",_dark:{[e$.variable]:"colors.gray.800",[t$.variable]:"colors.gray.600"},background:e$.reference,borderColor:t$.reference,opacity:.7,borderRadius:"sm"},pye={baseStyle:hye},n$=Ce("skip-link-bg"),gye={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[n$.variable]:"colors.white",_dark:{[n$.variable]:"colors.gray.700"},bg:n$.reference}},mye={baseStyle:gye},{defineMultiStyleConfig:yye,definePartsStyle:Ik}=_t(eme.keys),By=Ce("slider-thumb-size"),jy=Ce("slider-track-size"),au=Ce("slider-bg"),vye=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...DP({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},bye=e=>({...DP({orientation:e.orientation,horizontal:{h:jy.reference},vertical:{w:jy.reference}}),overflow:"hidden",borderRadius:"sm",[au.variable]:"colors.gray.200",_dark:{[au.variable]:"colors.whiteAlpha.200"},_disabled:{[au.variable]:"colors.gray.300",_dark:{[au.variable]:"colors.whiteAlpha.300"}},bg:au.reference}),xye=e=>{const{orientation:t}=e;return{...DP({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:By.reference,h:By.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},wye=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[au.variable]:`colors.${t}.500`,_dark:{[au.variable]:`colors.${t}.200`},bg:au.reference}},Sye=Ik(e=>({container:vye(e),track:bye(e),thumb:xye(e),filledTrack:wye(e)})),kye=Ik({container:{[By.variable]:"sizes.4",[jy.variable]:"sizes.1"}}),Cye=Ik({container:{[By.variable]:"sizes.3.5",[jy.variable]:"sizes.1"}}),_ye=Ik({container:{[By.variable]:"sizes.2.5",[jy.variable]:"sizes.0.5"}}),Eye={lg:kye,md:Cye,sm:_ye},$ye=yye({baseStyle:Sye,sizes:Eye,defaultProps:{size:"md",colorScheme:"blue"}}),sf=wn("spinner-size"),Aye={width:[sf.reference],height:[sf.reference]},Tye={xs:{[sf.variable]:"sizes.3"},sm:{[sf.variable]:"sizes.4"},md:{[sf.variable]:"sizes.6"},lg:{[sf.variable]:"sizes.8"},xl:{[sf.variable]:"sizes.12"}},Mye={baseStyle:Aye,sizes:Tye,defaultProps:{size:"md"}},{defineMultiStyleConfig:Pye,definePartsStyle:pG}=_t(tme.keys),Fye={fontWeight:"medium"},Rye={opacity:.8,marginBottom:"2"},Dye={verticalAlign:"baseline",fontWeight:"semibold"},Oye={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},Nye=pG({container:{},label:Fye,helpText:Rye,number:Dye,icon:Oye}),Iye={md:pG({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},Lye=Pye({baseStyle:Nye,sizes:Iye,defaultProps:{size:"md"}}),r$=Ce("kbd-bg"),zye={[r$.variable]:"colors.gray.100",_dark:{[r$.variable]:"colors.whiteAlpha.100"},bg:r$.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},Bye={baseStyle:zye},jye={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},Uye={baseStyle:jye},{defineMultiStyleConfig:Vye,definePartsStyle:Wye}=_t(qge.keys),Hye={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},qye=Wye({icon:Hye}),Gye=Vye({baseStyle:qye}),{defineMultiStyleConfig:Yye,definePartsStyle:Xye}=_t(Gge.keys),Is=Ce("menu-bg"),i$=Ce("menu-shadow"),Kye={[Is.variable]:"#fff",[i$.variable]:"shadows.sm",_dark:{[Is.variable]:"colors.gray.700",[i$.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:Is.reference,boxShadow:i$.reference},Qye={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Is.variable]:"colors.gray.100",_dark:{[Is.variable]:"colors.whiteAlpha.100"}},_active:{[Is.variable]:"colors.gray.200",_dark:{[Is.variable]:"colors.whiteAlpha.200"}},_expanded:{[Is.variable]:"colors.gray.100",_dark:{[Is.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Is.reference},Zye={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},Jye={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},e1e={opacity:.6},t1e={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},n1e={transitionProperty:"common",transitionDuration:"normal"},r1e=Xye({button:n1e,list:Kye,item:Qye,groupTitle:Zye,icon:Jye,command:e1e,divider:t1e}),i1e=Yye({baseStyle:r1e}),{defineMultiStyleConfig:o1e,definePartsStyle:g3}=_t(Yge.keys),o$=Ce("modal-bg"),s$=Ce("modal-shadow"),s1e={bg:"blackAlpha.600",zIndex:"modal"},a1e=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},l1e=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[o$.variable]:"colors.white",[s$.variable]:"shadows.lg",_dark:{[o$.variable]:"colors.gray.700",[s$.variable]:"shadows.dark-lg"},bg:o$.reference,boxShadow:s$.reference}},u1e={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},c1e={position:"absolute",top:"2",insetEnd:"3"},f1e=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},d1e={px:"6",py:"4"},h1e=g3(e=>({overlay:s1e,dialogContainer:Hr(a1e,e),dialog:Hr(l1e,e),header:u1e,closeButton:c1e,body:Hr(f1e,e),footer:d1e}));function jo(e){return g3(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var p1e={xs:jo("xs"),sm:jo("sm"),md:jo("md"),lg:jo("lg"),xl:jo("xl"),"2xl":jo("2xl"),"3xl":jo("3xl"),"4xl":jo("4xl"),"5xl":jo("5xl"),"6xl":jo("6xl"),full:jo("full")},g1e=o1e({baseStyle:h1e,sizes:p1e,defaultProps:{size:"md"}}),{defineMultiStyleConfig:m1e,definePartsStyle:gG}=_t(Xge.keys),NP=wn("number-input-stepper-width"),mG=wn("number-input-input-padding"),y1e=qa(NP).add("0.5rem").toString(),a$=wn("number-input-bg"),l$=wn("number-input-color"),u$=wn("number-input-border-color"),v1e={[NP.variable]:"sizes.6",[mG.variable]:y1e},b1e=e=>{var t,n;return(n=(t=Hr(ot.baseStyle,e))==null?void 0:t.field)!=null?n:{}},x1e={width:NP.reference},w1e={borderStart:"1px solid",borderStartColor:u$.reference,color:l$.reference,bg:a$.reference,[l$.variable]:"colors.chakra-body-text",[u$.variable]:"colors.chakra-border-color",_dark:{[l$.variable]:"colors.whiteAlpha.800",[u$.variable]:"colors.whiteAlpha.300"},_active:{[a$.variable]:"colors.gray.200",_dark:{[a$.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},S1e=gG(e=>{var t;return{root:v1e,field:(t=Hr(b1e,e))!=null?t:{},stepperGroup:x1e,stepper:w1e}});function Eb(e){var t,n,r;const i=(t=ot.sizes)==null?void 0:t[e],o={lg:"md",md:"md",sm:"sm",xs:"sm"},s=(r=(n=i.field)==null?void 0:n.fontSize)!=null?r:"md",a=uG.fontSizes[s];return gG({field:{...i.field,paddingInlineEnd:mG.reference,verticalAlign:"top"},stepper:{fontSize:qa(a).multiply(.75).toString(),_first:{borderTopEndRadius:o[e]},_last:{borderBottomEndRadius:o[e],mt:"-1px",borderTopWidth:1}}})}var k1e={xs:Eb("xs"),sm:Eb("sm"),md:Eb("md"),lg:Eb("lg")},C1e=m1e({baseStyle:S1e,sizes:k1e,variants:ot.variants,defaultProps:ot.defaultProps}),kI,_1e={...(kI=ot.baseStyle)==null?void 0:kI.field,textAlign:"center"},E1e={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},CI,_I,$1e={outline:e=>{var t,n,r;return(r=(n=Hr((t=ot.variants)==null?void 0:t.outline,e))==null?void 0:n.field)!=null?r:{}},flushed:e=>{var t,n,r;return(r=(n=Hr((t=ot.variants)==null?void 0:t.flushed,e))==null?void 0:n.field)!=null?r:{}},filled:e=>{var t,n,r;return(r=(n=Hr((t=ot.variants)==null?void 0:t.filled,e))==null?void 0:n.field)!=null?r:{}},unstyled:(_I=(CI=ot.variants)==null?void 0:CI.unstyled.field)!=null?_I:{}},A1e={baseStyle:_1e,sizes:E1e,variants:$1e,defaultProps:ot.defaultProps},{defineMultiStyleConfig:T1e,definePartsStyle:M1e}=_t(Kge.keys),$b=wn("popper-bg"),P1e=wn("popper-arrow-bg"),EI=wn("popper-arrow-shadow-color"),F1e={zIndex:10},R1e={[$b.variable]:"colors.white",bg:$b.reference,[P1e.variable]:$b.reference,[EI.variable]:"colors.gray.200",_dark:{[$b.variable]:"colors.gray.700",[EI.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},D1e={px:3,py:2,borderBottomWidth:"1px"},O1e={px:3,py:2},N1e={px:3,py:2,borderTopWidth:"1px"},I1e={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},L1e=M1e({popper:F1e,content:R1e,header:D1e,body:O1e,footer:N1e,closeButton:I1e}),z1e=T1e({baseStyle:L1e}),{definePartsStyle:m3,defineMultiStyleConfig:B1e}=_t(jge.keys),c$=Ce("drawer-bg"),f$=Ce("drawer-box-shadow");function Yd(e){return m3(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var j1e={bg:"blackAlpha.600",zIndex:"modal"},U1e={display:"flex",zIndex:"modal",justifyContent:"center"},V1e=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[c$.variable]:"colors.white",[f$.variable]:"shadows.lg",_dark:{[c$.variable]:"colors.gray.700",[f$.variable]:"shadows.dark-lg"},bg:c$.reference,boxShadow:f$.reference}},W1e={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},H1e={position:"absolute",top:"2",insetEnd:"3"},q1e={px:"6",py:"2",flex:"1",overflow:"auto"},G1e={px:"6",py:"4"},Y1e=m3(e=>({overlay:j1e,dialogContainer:U1e,dialog:Hr(V1e,e),header:W1e,closeButton:H1e,body:q1e,footer:G1e})),X1e={xs:Yd("xs"),sm:Yd("md"),md:Yd("lg"),lg:Yd("2xl"),xl:Yd("4xl"),full:Yd("full")},K1e=B1e({baseStyle:Y1e,sizes:X1e,defaultProps:{size:"xs"}}),{definePartsStyle:Q1e,defineMultiStyleConfig:Z1e}=_t(Uge.keys),J1e={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},eve={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},tve={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},nve=Q1e({preview:J1e,input:eve,textarea:tve}),rve=Z1e({baseStyle:nve}),{definePartsStyle:ive,defineMultiStyleConfig:ove}=_t(Vge.keys),Jh=Ce("form-control-color"),sve={marginStart:"1",[Jh.variable]:"colors.red.500",_dark:{[Jh.variable]:"colors.red.300"},color:Jh.reference},ave={mt:"2",[Jh.variable]:"colors.gray.600",_dark:{[Jh.variable]:"colors.whiteAlpha.600"},color:Jh.reference,lineHeight:"normal",fontSize:"sm"},lve=ive({container:{width:"100%",position:"relative"},requiredIndicator:sve,helperText:ave}),uve=ove({baseStyle:lve}),{definePartsStyle:cve,defineMultiStyleConfig:fve}=_t(Wge.keys),ep=Ce("form-error-color"),dve={[ep.variable]:"colors.red.500",_dark:{[ep.variable]:"colors.red.300"},color:ep.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},hve={marginEnd:"0.5em",[ep.variable]:"colors.red.500",_dark:{[ep.variable]:"colors.red.300"},color:ep.reference},pve=cve({text:dve,icon:hve}),gve=fve({baseStyle:pve}),mve={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},yve={baseStyle:mve},vve={fontFamily:"heading",fontWeight:"bold"},bve={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},xve={baseStyle:vve,sizes:bve,defaultProps:{size:"xl"}},{defineMultiStyleConfig:wve,definePartsStyle:Sve}=_t(zge.keys),d$=Ce("breadcrumb-link-decor"),kve={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:d$.reference,[d$.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[d$.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Cve=Sve({link:kve}),_ve=wve({baseStyle:Cve}),Eve={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},yG=e=>{const{colorScheme:t,theme:n}=e;if(t==="gray")return{color:ke("gray.800","whiteAlpha.900")(e),_hover:{bg:ke("gray.100","whiteAlpha.200")(e)},_active:{bg:ke("gray.200","whiteAlpha.300")(e)}};const r=Np(`${t}.200`,.12)(n),i=Np(`${t}.200`,.24)(n);return{color:ke(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:ke(`${t}.50`,r)(e)},_active:{bg:ke(`${t}.100`,i)(e)}}},$ve=e=>{const{colorScheme:t}=e,n=ke("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Hr(yG,e)}},Ave={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Tve=e=>{var t;const{colorScheme:n}=e;if(n==="gray"){const l=ke("gray.100","whiteAlpha.200")(e);return{bg:l,color:ke("gray.800","whiteAlpha.900")(e),_hover:{bg:ke("gray.200","whiteAlpha.300")(e),_disabled:{bg:l}},_active:{bg:ke("gray.300","whiteAlpha.400")(e)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:o=`${n}.600`,activeBg:s=`${n}.700`}=(t=Ave[n])!=null?t:{},a=ke(r,`${n}.200`)(e);return{bg:a,color:ke(i,"gray.800")(e),_hover:{bg:ke(o,`${n}.300`)(e),_disabled:{bg:a}},_active:{bg:ke(s,`${n}.400`)(e)}}},Mve=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:ke(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:ke(`${t}.700`,`${t}.500`)(e)}}},Pve={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},Fve={ghost:yG,outline:$ve,solid:Tve,link:Mve,unstyled:Pve},Rve={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},Dve={baseStyle:Eve,variants:Fve,sizes:Rve,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Rf,defineMultiStyleConfig:Ove}=_t(sme.keys),rw=Ce("card-bg"),sl=Ce("card-padding"),vG=Ce("card-shadow"),Yx=Ce("card-radius"),bG=Ce("card-border-width","0"),xG=Ce("card-border-color"),Nve=Rf({container:{[rw.variable]:"colors.chakra-body-bg",backgroundColor:rw.reference,boxShadow:vG.reference,borderRadius:Yx.reference,color:"chakra-body-text",borderWidth:bG.reference,borderColor:xG.reference},body:{padding:sl.reference,flex:"1 1 0%"},header:{padding:sl.reference},footer:{padding:sl.reference}}),Ive={sm:Rf({container:{[Yx.variable]:"radii.base",[sl.variable]:"space.3"}}),md:Rf({container:{[Yx.variable]:"radii.md",[sl.variable]:"space.5"}}),lg:Rf({container:{[Yx.variable]:"radii.xl",[sl.variable]:"space.7"}})},Lve={elevated:Rf({container:{[vG.variable]:"shadows.base",_dark:{[rw.variable]:"colors.gray.700"}}}),outline:Rf({container:{[bG.variable]:"1px",[xG.variable]:"colors.chakra-border-color"}}),filled:Rf({container:{[rw.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[sl.variable]:0},header:{[sl.variable]:0},footer:{[sl.variable]:0}}},zve=Ove({baseStyle:Nve,variants:Lve,sizes:Ive,defaultProps:{variant:"elevated",size:"md"}}),Y0=wn("close-button-size"),wm=wn("close-button-bg"),Bve={w:[Y0.reference],h:[Y0.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[wm.variable]:"colors.blackAlpha.100",_dark:{[wm.variable]:"colors.whiteAlpha.100"}},_active:{[wm.variable]:"colors.blackAlpha.200",_dark:{[wm.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:wm.reference},jve={lg:{[Y0.variable]:"sizes.10",fontSize:"md"},md:{[Y0.variable]:"sizes.8",fontSize:"xs"},sm:{[Y0.variable]:"sizes.6",fontSize:"2xs"}},Uve={baseStyle:Bve,sizes:jve,defaultProps:{size:"md"}},{variants:Vve,defaultProps:Wve}=q0,Hve={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:tn.bg.reference,color:tn.color.reference,boxShadow:tn.shadow.reference},qve={baseStyle:Hve,variants:Vve,defaultProps:Wve},Gve={w:"100%",mx:"auto",maxW:"prose",px:"4"},Yve={baseStyle:Gve},Xve={opacity:.6,borderColor:"inherit"},Kve={borderStyle:"solid"},Qve={borderStyle:"dashed"},Zve={solid:Kve,dashed:Qve},Jve={baseStyle:Xve,variants:Zve,defaultProps:{variant:"solid"}},{definePartsStyle:ebe,defineMultiStyleConfig:tbe}=_t(Nge.keys),nbe={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},rbe={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},ibe={pt:"2",px:"4",pb:"5"},obe={fontSize:"1.25em"},sbe=ebe({container:nbe,button:rbe,panel:ibe,icon:obe}),abe=tbe({baseStyle:sbe}),{definePartsStyle:U1,defineMultiStyleConfig:lbe}=_t(Ige.keys),ji=Ce("alert-fg"),wl=Ce("alert-bg"),ube=U1({container:{bg:wl.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:ji.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:ji.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function IP(e){const{theme:t,colorScheme:n}=e,r=Np(`${n}.200`,.16)(t);return{light:`colors.${n}.100`,dark:r}}var cbe=U1(e=>{const{colorScheme:t}=e,n=IP(e);return{container:{[ji.variable]:`colors.${t}.600`,[wl.variable]:n.light,_dark:{[ji.variable]:`colors.${t}.200`,[wl.variable]:n.dark}}}}),fbe=U1(e=>{const{colorScheme:t}=e,n=IP(e);return{container:{[ji.variable]:`colors.${t}.600`,[wl.variable]:n.light,_dark:{[ji.variable]:`colors.${t}.200`,[wl.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:ji.reference}}}),dbe=U1(e=>{const{colorScheme:t}=e,n=IP(e);return{container:{[ji.variable]:`colors.${t}.600`,[wl.variable]:n.light,_dark:{[ji.variable]:`colors.${t}.200`,[wl.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:ji.reference}}}),hbe=U1(e=>{const{colorScheme:t}=e;return{container:{[ji.variable]:"colors.white",[wl.variable]:`colors.${t}.600`,_dark:{[ji.variable]:"colors.gray.900",[wl.variable]:`colors.${t}.200`},color:ji.reference}}}),pbe={subtle:cbe,"left-accent":fbe,"top-accent":dbe,solid:hbe},gbe=lbe({baseStyle:ube,variants:pbe,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:wG,defineMultiStyleConfig:mbe}=_t(Lge.keys),tp=Ce("avatar-border-color"),X0=Ce("avatar-bg"),Uy=Ce("avatar-font-size"),Ip=Ce("avatar-size"),ybe={borderRadius:"full",border:"0.2em solid",borderColor:tp.reference,[tp.variable]:"white",_dark:{[tp.variable]:"colors.gray.800"}},vbe={bg:X0.reference,fontSize:Uy.reference,width:Ip.reference,height:Ip.reference,lineHeight:"1",[X0.variable]:"colors.gray.200",_dark:{[X0.variable]:"colors.whiteAlpha.400"}},bbe=e=>{const{name:t,theme:n}=e,r=t?Eme({string:t}):"colors.gray.400",i=Cme(r)(n);let o="white";return i||(o="gray.800"),{bg:X0.reference,fontSize:Uy.reference,color:o,borderColor:tp.reference,verticalAlign:"top",width:Ip.reference,height:Ip.reference,"&:not([data-loaded])":{[X0.variable]:r},[tp.variable]:"colors.white",_dark:{[tp.variable]:"colors.gray.800"}}},xbe={fontSize:Uy.reference,lineHeight:"1"},wbe=wG(e=>({badge:Hr(ybe,e),excessLabel:Hr(vbe,e),container:Hr(bbe,e),label:xbe}));function Vl(e){const t=e!=="100%"?fG[e]:void 0;return wG({container:{[Ip.variable]:t??e,[Uy.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[Ip.variable]:t??e,[Uy.variable]:`calc(${t??e} / 2.5)`}})}var Sbe={"2xs":Vl(4),xs:Vl(6),sm:Vl(8),md:Vl(12),lg:Vl(16),xl:Vl(24),"2xl":Vl(32),full:Vl("100%")},kbe=mbe({baseStyle:wbe,sizes:Sbe,defaultProps:{size:"md"}}),Cbe={Accordion:abe,Alert:gbe,Avatar:kbe,Badge:q0,Breadcrumb:_ve,Button:Dve,Checkbox:nw,CloseButton:Uve,Code:qve,Container:Yve,Divider:Jve,Drawer:K1e,Editable:rve,Form:uve,FormError:gve,FormLabel:yve,Heading:xve,Input:ot,Kbd:Bye,Link:Uye,List:Gye,Menu:i1e,Modal:g1e,NumberInput:C1e,PinInput:A1e,Popover:z1e,Progress:q0e,Radio:oye,Select:dye,Skeleton:pye,SkipLink:mye,Slider:$ye,Spinner:Mye,Stat:Lye,Switch:Ume,Table:Xme,Tabs:c0e,Tag:k0e,Textarea:O0e,Tooltip:L0e,Card:zve,Stepper:Oge},_be={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},Ebe={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},$be="ltr",Abe={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},SG={semanticTokens:_be,direction:$be,...Fge,components:Cbe,styles:Ebe,config:Abe};function s0(e){return typeof e=="function"}function Tbe(...e){return t=>e.reduce((n,r)=>r(n),t)}var Mbe=e=>function(...n){let r=[...n],i=n[n.length-1];return lge(i)&&r.length>1?r=r.slice(0,r.length-1):i=e,Tbe(...r.map(o=>s=>s0(o)?o(s):Fbe(s,o)))(i)},Pbe=Mbe(SG);function Fbe(...e){return bo({},...e,kG)}function kG(e,t,n,r){if((s0(e)||s0(t))&&Object.prototype.hasOwnProperty.call(r,n))return(...i)=>{const o=s0(e)?e(...i):e,s=s0(t)?t(...i):t;return bo({},o,s,kG)}}function Rbe(e,t){const n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}function Dbe(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var Obe=e=>{const t=new WeakMap;return(r,i,o,s)=>{if(typeof r>"u")return e(r,i,o);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,o,s);return a.set(i,l),l}},CG=Obe(Dbe);function _G(e,t){const n={};return Object.keys(e).forEach(r=>{const i=e[r];t(i,r,e)&&(n[r]=i)}),n}var EG=e=>_G(e,t=>t!=null);function Nbe(e){return typeof e=="function"}function $G(e,...t){return Nbe(e)?e(...t):e}var Ibe=typeof Element<"u",Lbe=typeof Map=="function",zbe=typeof Set=="function",Bbe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Xx(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Xx(e[r],t[r]))return!1;return!0}var o;if(Lbe&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!Xx(r.value[1],t.get(r.value[0])))return!1;return!0}if(zbe&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(Bbe&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(Ibe&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!Xx(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var jbe=function(t,n){try{return Xx(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Ube=dc(jbe);function AG(e,t={}){var n;const{styleConfig:r,...i}=t,{theme:o,colorMode:s}=tG(),a=e?CG(o,`components.${e}`):void 0,l=r||a,u=bo({theme:o,colorMode:s},(n=l==null?void 0:l.defaultProps)!=null?n:{},EG(Rbe(i,["children"]))),c=P.useRef({});if(l){const d=sge(l)(u);Ube(c.current,d)||(c.current=d)}return c.current}function Tl(e,t={}){return AG(e,t)}function mc(e,t={}){return AG(e,t)}var Vbe=new Set([...Ype,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),Wbe=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function Hbe(e){return Wbe.has(e)||!Vbe.has(e)}function qbe(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const n={...e};for(const r of t)if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(i in n&&delete n[i],n[i]=r[i]);return n}function TG(e){const t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}var Gbe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ybe=IW(function(e){return Gbe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Xbe=Ybe,Kbe=function(t){return t!=="theme"},$I=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Xbe:Kbe},AI=function(t,n,r){var i;if(n){var o=n.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(s){return t.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},Qbe=!1,Zbe=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return VW(n,r,i),vfe(function(){return WW(n,r,i)}),null},Jbe=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,o,s;n!==void 0&&(o=n.label,s=n.target);var a=AI(t,n,r),l=a||$I(i),u=!l("as");return function(){var c=arguments,f=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&f.push("label:"+o+";"),c[0]==null||c[0].raw===void 0)f.push.apply(f,c);else{f.push(c[0][0]);for(var d=c.length,h=1;h<d;h++)f.push(c[h],c[0][h])}var p=YW(function(g,m,y){var v=u&&g.as||i,b="",x=[],w=g;if(g.theme==null){w={};for(var k in g)w[k]=g[k];w.theme=P.useContext(wy)}typeof g.className=="string"?b=ufe(m.registered,x,g.className):g.className!=null&&(b=g.className+" ");var S=OM(f.concat(x),m.registered,w);b+=m.key+"-"+S.name,s!==void 0&&(b+=" "+s);var C=u&&a===void 0?$I(v):l,_={};for(var $ in g)u&&$==="as"||C($)&&(_[$]=g[$]);return _.className=b,y&&(_.ref=y),P.createElement(P.Fragment,null,P.createElement(Zbe,{cache:m,serialized:S,isStringTag:typeof v=="string"}),P.createElement(v,_))});return p.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=f,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return s===void 0&&Qbe?"NO_COMPONENT_SELECTOR":"."+s}}),p.withComponent=function(g,m){return e(g,A2({},n,m,{shouldForwardProp:AI(p,m,!0)})).apply(void 0,f)},p}},exe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],iw=Jbe.bind();exe.forEach(function(e){iw[e]=iw(e)});var TI,txe=(TI=iw.default)!=null?TI:iw,nxe=({baseStyle:e})=>t=>{const{theme:n,css:r,__css:i,sx:o,...s}=t,a=_G(s,(f,d)=>Kpe(d)),l=$G(e,t),u=qbe({},i,l,EG(a),o),c=lG(u)(t.theme);return r?[c,r]:c};function h$(e,t){const{baseStyle:n,...r}=t??{};r.shouldForwardProp||(r.shouldForwardProp=Hbe);const i=nxe({baseStyle:n}),o=txe(e,r)(i);return Li.forwardRef(function(l,u){const{colorMode:c,forced:f}=Fg();return Li.createElement(o,{ref:u,"data-theme":f?c:void 0,...l})})}function rxe(){const e=new Map;return new Proxy(h$,{apply(t,n,r){return h$(...r)},get(t,n){return e.has(n)||e.set(n,h$(n)),e.get(n)}})}var Ae=rxe();function Fe(e){return P.forwardRef(e)}function ixe(e={}){const{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=e,i=P.createContext(void 0);i.displayName=r;function o(){var s;const a=P.useContext(i);if(!a&&t){const l=new Error(n);throw l.name="ContextError",(s=Error.captureStackTrace)==null||s.call(Error,l,o),l}return a}return[i.Provider,o,i]}function oxe(e){const{cssVarsRoot:t,theme:n,children:r}=e,i=P.useMemo(()=>Hpe(n),[n]);return E.jsxs(wfe,{theme:i,children:[E.jsx(sxe,{root:t}),r]})}function sxe({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return E.jsx(vk,{styles:n=>({[t]:n.__cssVars})})}ixe({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function axe(){const{colorMode:e}=Fg();return E.jsx(vk,{styles:t=>{const n=CG(t,"styles.global"),r=$G(n,{theme:t,colorMode:e});return r?lG(r)(t):void 0}})}var LP=P.createContext({getDocument(){return document},getWindow(){return window}});LP.displayName="EnvironmentContext";function lxe({defer:e}={}){const[,t]=P.useReducer(n=>n+1,0);return Ap(()=>{e&&t()},[e]),P.useContext(LP)}function MG(e){const{children:t,environment:n,disabled:r}=e,i=P.useRef(null),o=P.useMemo(()=>n||{getDocument:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument)!=null?l:document},getWindow:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument.defaultView)!=null?l:window}},[n]),s=!r||!n;return E.jsxs(LP.Provider,{value:o,children:[t,s&&E.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}MG.displayName="EnvironmentProvider";var uxe=e=>{const{children:t,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:o=!0,theme:s={},environment:a,cssVarsRoot:l,disableEnvironment:u,disableGlobalStyle:c}=e,f=E.jsx(MG,{environment:a,disabled:u,children:t});return E.jsx(oxe,{theme:s,cssVarsRoot:l,children:E.jsxs(eG,{colorModeManager:n,options:s.config,children:[o?E.jsx(_fe,{scope:i}):E.jsx(Cfe,{}),!c&&E.jsx(axe,{}),r?E.jsx(QW,{zIndex:r,children:f}):f]})})},cxe=(e,t)=>e.find(n=>n.id===t);function MI(e,t){const n=PG(e,t),r=n?e[n].findIndex(i=>i.id===t):-1;return{position:n,index:r}}function PG(e,t){for(const[n,r]of Object.entries(e))if(cxe(r,t))return n}function fxe(e){const t=e.includes("right"),n=e.includes("left");let r="center";return t&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function dxe(e){const n=e==="top"||e==="bottom"?"0 auto":void 0,r=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,o=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",s=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:i,right:o,left:s}}function Kx(e,t=[]){const n=P.useRef(e);return P.useEffect(()=>{n.current=e}),P.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},t)}function hxe(e,t){const n=Kx(e);P.useEffect(()=>{if(t==null)return;let r=null;return r=window.setTimeout(()=>{n()},t),()=>{r&&window.clearTimeout(r)}},[t,n])}function PI(e,t){const n=P.useRef(!1),r=P.useRef(!1);P.useEffect(()=>{if(n.current&&r.current)return e();r.current=!0},t),P.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const FG=P.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Lk=P.createContext({}),V1=P.createContext(null),zk=typeof document<"u",zP=zk?P.useLayoutEffect:P.useEffect,RG=P.createContext({strict:!1}),BP=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),pxe="framerAppearId",DG="data-"+BP(pxe);function gxe(e,t,n,r){const{visualElement:i}=P.useContext(Lk),o=P.useContext(RG),s=P.useContext(V1),a=P.useContext(FG).reducedMotion,l=P.useRef();r=r||o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:i,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;P.useInsertionEffect(()=>{u&&u.update(n,s)});const c=P.useRef(!!(n[DG]&&!window.HandoffComplete));return zP(()=>{u&&(u.render(),c.current&&u.animationState&&u.animationState.animateChanges())}),P.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}function Dh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function mxe(e,t,n){return P.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Dh(n)&&(n.current=r))},[t])}function Vy(e){return typeof e=="string"||Array.isArray(e)}function Bk(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const jP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],UP=["initial",...jP];function jk(e){return Bk(e.animate)||UP.some(t=>Vy(e[t]))}function OG(e){return!!(jk(e)||e.variants)}function yxe(e,t){if(jk(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Vy(n)?n:void 0,animate:Vy(r)?r:void 0}}return e.inherit!==!1?t:{}}function vxe(e){const{initial:t,animate:n}=yxe(e,P.useContext(Lk));return P.useMemo(()=>({initial:t,animate:n}),[FI(t),FI(n)])}function FI(e){return Array.isArray(e)?e.join(" "):e}const RI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wy={};for(const e in RI)Wy[e]={isEnabled:t=>RI[e].some(n=>!!t[n])};function bxe(e){for(const t in e)Wy[t]={...Wy[t],...e[t]}}const VP=P.createContext({}),NG=P.createContext({}),xxe=Symbol.for("motionComponentSymbol");function wxe({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&bxe(e);function o(a,l){let u;const c={...P.useContext(FG),...a,layoutId:Sxe(a)},{isStatic:f}=c,d=vxe(a),h=r(a,f);if(!f&&zk){d.visualElement=gxe(i,h,c,t);const p=P.useContext(NG),g=P.useContext(RG).strict;d.visualElement&&(u=d.visualElement.loadFeatures(c,g,e,p))}return P.createElement(Lk.Provider,{value:d},u&&d.visualElement?P.createElement(u,{visualElement:d.visualElement,...c}):null,n(i,a,mxe(h,d.visualElement,l),h,f,d.visualElement))}const s=P.forwardRef(o);return s[xxe]=i,s}function Sxe({layoutId:e}){const t=P.useContext(VP).id;return t&&e!==void 0?t+"-"+e:e}function kxe(e){function t(r,i={}){return wxe(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const Cxe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function WP(e){return typeof e!="string"||e.includes("-")?!1:!!(Cxe.indexOf(e)>-1||/[A-Z]/.test(e))}const ow={};function _xe(e){Object.assign(ow,e)}const W1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kd=new Set(W1);function IG(e,{layout:t,layoutId:n}){return kd.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!ow[e]||e==="opacity")}const yi=e=>!!(e&&e.getVelocity),Exe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$xe=W1.length;function Axe(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let o="";for(let s=0;s<$xe;s++){const a=W1[s];if(e[a]!==void 0){const l=Exe[a]||a;o+=`${l}(${e[a]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(e,r?"":o):n&&r&&(o="none"),o}const LG=e=>t=>typeof t=="string"&&t.startsWith(e),zG=LG("--"),y3=LG("var(--"),Txe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Mxe=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Gu=(e,t,n)=>Math.min(Math.max(n,e),t),Cd={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},K0={...Cd,transform:e=>Gu(0,1,e)},Ab={...Cd,default:1},Q0=e=>Math.round(e*1e5)/1e5,Uk=/(-)?([\d]*\.?[\d])+/g,BG=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Pxe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function H1(e){return typeof e=="string"}const q1=e=>({test:t=>H1(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Hl=q1("deg"),oa=q1("%"),$e=q1("px"),Fxe=q1("vh"),Rxe=q1("vw"),DI={...oa,parse:e=>oa.parse(e)/100,transform:e=>oa.transform(e*100)},OI={...Cd,transform:Math.round},jG={borderWidth:$e,borderTopWidth:$e,borderRightWidth:$e,borderBottomWidth:$e,borderLeftWidth:$e,borderRadius:$e,radius:$e,borderTopLeftRadius:$e,borderTopRightRadius:$e,borderBottomRightRadius:$e,borderBottomLeftRadius:$e,width:$e,maxWidth:$e,height:$e,maxHeight:$e,size:$e,top:$e,right:$e,bottom:$e,left:$e,padding:$e,paddingTop:$e,paddingRight:$e,paddingBottom:$e,paddingLeft:$e,margin:$e,marginTop:$e,marginRight:$e,marginBottom:$e,marginLeft:$e,rotate:Hl,rotateX:Hl,rotateY:Hl,rotateZ:Hl,scale:Ab,scaleX:Ab,scaleY:Ab,scaleZ:Ab,skew:Hl,skewX:Hl,skewY:Hl,distance:$e,translateX:$e,translateY:$e,translateZ:$e,x:$e,y:$e,z:$e,perspective:$e,transformPerspective:$e,opacity:K0,originX:DI,originY:DI,originZ:$e,zIndex:OI,fillOpacity:K0,strokeOpacity:K0,numOctaves:OI};function HP(e,t,n,r){const{style:i,vars:o,transform:s,transformOrigin:a}=e;let l=!1,u=!1,c=!0;for(const f in t){const d=t[f];if(zG(f)){o[f]=d;continue}const h=jG[f],p=Mxe(d,h);if(kd.has(f)){if(l=!0,s[f]=p,!c)continue;d!==(h.default||0)&&(c=!1)}else f.startsWith("origin")?(u=!0,a[f]=p):i[f]=p}if(t.transform||(l||r?i.transform=Axe(e.transform,n,c,r):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:d="50%",originZ:h=0}=a;i.transformOrigin=`${f} ${d} ${h}`}}const qP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function UG(e,t,n){for(const r in t)!yi(t[r])&&!IG(r,n)&&(e[r]=t[r])}function Dxe({transformTemplate:e},t,n){return P.useMemo(()=>{const r=qP();return HP(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function Oxe(e,t,n){const r=e.style||{},i={};return UG(i,r,e),Object.assign(i,Dxe(e,t,n)),e.transformValues?e.transformValues(i):i}function Nxe(e,t,n){const r={},i=Oxe(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const Ixe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sw(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ixe.has(e)}let VG=e=>!sw(e);function Lxe(e){e&&(VG=t=>t.startsWith("on")?!sw(t):e(t))}try{Lxe(require("@emotion/is-prop-valid").default)}catch{}function zxe(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(VG(i)||n===!0&&sw(i)||!t&&!sw(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function NI(e,t,n){return typeof e=="string"?e:$e.transform(t+n*e)}function Bxe(e,t,n){const r=NI(t,e.x,e.width),i=NI(n,e.y,e.height);return`${r} ${i}`}const jxe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Uxe={offset:"strokeDashoffset",array:"strokeDasharray"};function Vxe(e,t,n=1,r=0,i=!0){e.pathLength=1;const o=i?jxe:Uxe;e[o.offset]=$e.transform(-r);const s=$e.transform(t),a=$e.transform(n);e[o.array]=`${s} ${a}`}function GP(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},c,f,d){if(HP(e,u,c,d),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:g}=e;h.transform&&(g&&(p.transform=h.transform),delete h.transform),g&&(i!==void 0||o!==void 0||p.transform)&&(p.transformOrigin=Bxe(g,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&Vxe(h,s,a,l,!1)}const WG=()=>({...qP(),attrs:{}}),YP=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Wxe(e,t,n,r){const i=P.useMemo(()=>{const o=WG();return GP(o,t,{enableHardwareAcceleration:!1},YP(r),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};UG(o,e.style,e),i.style={...o,...i.style}}return i}function Hxe(e=!1){return(n,r,i,{latestValues:o},s)=>{const l=(WP(n)?Wxe:Nxe)(r,o,s,n),c={...zxe(r,typeof n=="string",e),...l,ref:i},{children:f}=r,d=P.useMemo(()=>yi(f)?f.get():f,[f]);return P.createElement(n,{...c,children:d})}}function HG(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const o in n)e.style.setProperty(o,n[o])}const qG=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function GG(e,t,n,r){HG(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(qG.has(i)?i:BP(i),t.attrs[i])}function XP(e,t){const{style:n}=e,r={};for(const i in n)(yi(n[i])||t.style&&yi(t.style[i])||IG(i,e))&&(r[i]=n[i]);return r}function YG(e,t){const n=XP(e,t);for(const r in e)if(yi(e[r])||yi(t[r])){const i=W1.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function KP(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function QP(e){const t=P.useRef(null);return t.current===null&&(t.current=e()),t.current}const aw=e=>Array.isArray(e),qxe=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Gxe=e=>aw(e)?e[e.length-1]||0:e;function Qx(e){const t=yi(e)?e.get():e;return qxe(t)?t.toValue():t}function Yxe({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,o){const s={latestValues:Xxe(r,i,o,e),renderState:t()};return n&&(s.mount=a=>n(r,a,s)),s}const XG=e=>(t,n)=>{const r=P.useContext(Lk),i=P.useContext(V1),o=()=>Yxe(e,t,r,i);return n?o():QP(o)};function Xxe(e,t,n,r){const i={},o=r(e,{});for(const d in o)i[d]=Qx(o[d]);let{initial:s,animate:a}=e;const l=jk(e),u=OG(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const f=c?a:s;return f&&typeof f!="boolean"&&!Bk(f)&&(Array.isArray(f)?f:[f]).forEach(h=>{const p=KP(e,h);if(!p)return;const{transitionEnd:g,transition:m,...y}=p;for(const v in y){let b=y[v];if(Array.isArray(b)){const x=c?b.length-1:0;b=b[x]}b!==null&&(i[v]=b)}for(const v in g)i[v]=g[v]}),i}const en=e=>e;class II{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function Kxe(e){let t=new II,n=new II,r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const f=c&&i,d=f?t:n;return u&&s.add(l),d.add(l)&&f&&i&&(r=t.order.length),l},cancel:l=>{n.remove(l),s.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const c=t.order[u];c(l),s.has(c)&&(a.schedule(c),e())}i=!1,o&&(o=!1,a.process(l))}};return a}const Tb=["prepare","read","update","preRender","render","postRender"],Qxe=40;function Zxe(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=Tb.reduce((f,d)=>(f[d]=Kxe(()=>n=!0),f),{}),s=f=>o[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,Qxe),1),i.timestamp=f,i.isProcessing=!0,Tb.forEach(s),i.isProcessing=!1,n&&t&&(r=!1,e(a))},l=()=>{n=!0,r=!0,i.isProcessing||e(a)};return{schedule:Tb.reduce((f,d)=>{const h=o[d];return f[d]=(p,g=!1,m=!1)=>(n||l(),h.schedule(p,g,m)),f},{}),cancel:f=>Tb.forEach(d=>o[d].cancel(f)),state:i,steps:o}}const{schedule:kt,cancel:Sl,state:dr,steps:p$}=Zxe(typeof requestAnimationFrame<"u"?requestAnimationFrame:en,!0),Jxe={useVisualState:XG({scrapeMotionValuesFromProps:YG,createRenderState:WG,onMount:(e,t,{renderState:n,latestValues:r})=>{kt.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),kt.render(()=>{GP(n,r,{enableHardwareAcceleration:!1},YP(t.tagName),e.transformTemplate),GG(t,n)})}})},e2e={useVisualState:XG({scrapeMotionValuesFromProps:XP,createRenderState:qP})};function t2e(e,{forwardMotionProps:t=!1},n,r){return{...WP(e)?Jxe:e2e,preloadedFeatures:n,useRender:Hxe(t),createVisualElement:r,Component:e}}function Za(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const KG=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Vk(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const n2e=e=>t=>KG(t)&&e(t,Vk(t));function al(e,t,n,r){return Za(e,t,n2e(n),r)}const r2e=(e,t)=>n=>t(e(n)),Lu=(...e)=>e.reduce(r2e);function QG(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const LI=QG("dragHorizontal"),zI=QG("dragVertical");function ZG(e){let t=!1;if(e==="y")t=zI();else if(e==="x")t=LI();else{const n=LI(),r=zI();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function JG(){const e=ZG(!0);return e?(e(),!1):!0}let yc=class{constructor(t){this.isMounted=!1,this.node=t}update(){}};function BI(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(o,s)=>{if(o.pointerType==="touch"||JG())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&kt.update(()=>a[r](o,s))};return al(e.current,n,i,{passive:!e.getProps()[r]})}class i2e extends yc{mount(){this.unmount=Lu(BI(this.node,!0),BI(this.node,!1))}unmount(){}}class o2e extends yc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lu(Za(this.node.current,"focus",()=>this.onFocus()),Za(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const eY=(e,t)=>t?e===t?!0:eY(e,t.parentElement):!1;function g$(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Vk(n))}class s2e extends yc{constructor(){super(...arguments),this.removeStartListeners=en,this.removeEndListeners=en,this.removeAccessibleListeners=en,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=al(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:f}=this.node.getProps();kt.update(()=>{!f&&!eY(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),s=al(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Lu(o,s),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const s=a=>{a.key!=="Enter"||!this.checkPressEnd()||g$("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&kt.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=Za(this.node.current,"keyup",s),g$("down",(a,l)=>{this.startPress(a,l)})},n=Za(this.node.current,"keydown",t),r=()=>{this.isPressing&&g$("cancel",(o,s)=>this.cancelPress(o,s))},i=Za(this.node.current,"blur",r);this.removeAccessibleListeners=Lu(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&kt.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!JG()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&kt.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=al(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Za(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Lu(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const v3=new WeakMap,m$=new WeakMap,a2e=e=>{const t=v3.get(e.target);t&&t(e)},l2e=e=>{e.forEach(a2e)};function u2e({root:e,...t}){const n=e||document;m$.has(n)||m$.set(n,{});const r=m$.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(l2e,{root:e,...t})),r[i]}function c2e(e,t,n){const r=u2e(t);return v3.set(e,n),r.observe(e),()=>{v3.delete(e),r.unobserve(e)}}const f2e={some:0,all:1};class d2e extends yc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:f2e[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=u?c:f;d&&d(l)};return c2e(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(h2e(t,n))&&this.startObserver()}unmount(){}}function h2e({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const p2e={inView:{Feature:d2e},tap:{Feature:s2e},focus:{Feature:o2e},hover:{Feature:i2e}};function tY(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function g2e(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function m2e(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Wk(e,t,n){const r=e.getProps();return KP(r,t,n!==void 0?n:r.custom,g2e(e),m2e(e))}let lw=en;const Df=e=>e*1e3,ll=e=>e/1e3,y2e={current:!1},nY=e=>Array.isArray(e)&&typeof e[0]=="number";function rY(e){return!!(!e||typeof e=="string"&&iY[e]||nY(e)||Array.isArray(e)&&e.every(rY))}const a0=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,iY={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:a0([0,.65,.55,1]),circOut:a0([.55,0,1,.45]),backIn:a0([.31,.01,.66,-.59]),backOut:a0([.33,1.53,.69,.99])};function oY(e){if(e)return nY(e)?a0(e):Array.isArray(e)?e.map(oY):iY[e]}function v2e(e,t,n,{delay:r=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=oY(a);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}function b2e(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const sY=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,x2e=1e-7,w2e=12;function S2e(e,t,n,r,i){let o,s,a=0;do s=t+(n-t)/2,o=sY(s,r,i)-e,o>0?n=s:t=s;while(Math.abs(o)>x2e&&++a<w2e);return s}function G1(e,t,n,r){if(e===t&&n===r)return en;const i=o=>S2e(o,0,1,e,n);return o=>o===0||o===1?o:sY(i(o),t,r)}const k2e=G1(.42,0,1,1),C2e=G1(0,0,.58,1),aY=G1(.42,0,.58,1),_2e=e=>Array.isArray(e)&&typeof e[0]!="number",lY=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,uY=e=>t=>1-e(1-t),ZP=e=>1-Math.sin(Math.acos(e)),cY=uY(ZP),E2e=lY(ZP),fY=G1(.33,1.53,.69,.99),JP=uY(fY),$2e=lY(JP),A2e=e=>(e*=2)<1?.5*JP(e):.5*(2-Math.pow(2,-10*(e-1))),jI={linear:en,easeIn:k2e,easeInOut:aY,easeOut:C2e,circIn:ZP,circInOut:E2e,circOut:cY,backIn:JP,backInOut:$2e,backOut:fY,anticipate:A2e},UI=e=>{if(Array.isArray(e)){lw(e.length===4);const[t,n,r,i]=e;return G1(t,n,r,i)}else if(typeof e=="string")return lw(jI[e]!==void 0),jI[e];return e},eF=(e,t)=>n=>!!(H1(n)&&Pxe.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),dY=(e,t,n)=>r=>{if(!H1(r))return r;const[i,o,s,a]=r.match(Uk);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},T2e=e=>Gu(0,255,e),y$={...Cd,transform:e=>Math.round(T2e(e))},yf={test:eF("rgb","red"),parse:dY("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+y$.transform(e)+", "+y$.transform(t)+", "+y$.transform(n)+", "+Q0(K0.transform(r))+")"};function M2e(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const b3={test:eF("#"),parse:M2e,transform:yf.transform},Oh={test:eF("hsl","hue"),parse:dY("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+oa.transform(Q0(t))+", "+oa.transform(Q0(n))+", "+Q0(K0.transform(r))+")"},Pr={test:e=>yf.test(e)||b3.test(e)||Oh.test(e),parse:e=>yf.test(e)?yf.parse(e):Oh.test(e)?Oh.parse(e):b3.parse(e),transform:e=>H1(e)?e:e.hasOwnProperty("red")?yf.transform(e):Oh.transform(e)},Bt=(e,t,n)=>-n*e+n*t+e;function v$(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function P2e({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,o=0,s=0;if(!t)i=o=s=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=v$(l,a,e+1/3),o=v$(l,a,e),s=v$(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}const b$=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},F2e=[b3,yf,Oh],R2e=e=>F2e.find(t=>t.test(e));function VI(e){const t=R2e(e);let n=t.parse(e);return t===Oh&&(n=P2e(n)),n}const hY=(e,t)=>{const n=VI(e),r=VI(t),i={...n};return o=>(i.red=b$(n.red,r.red,o),i.green=b$(n.green,r.green,o),i.blue=b$(n.blue,r.blue,o),i.alpha=Bt(n.alpha,r.alpha,o),yf.transform(i))};function D2e(e){var t,n;return isNaN(e)&&H1(e)&&(((t=e.match(Uk))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(BG))===null||n===void 0?void 0:n.length)||0)>0}const pY={regex:Txe,countKey:"Vars",token:"${v}",parse:en},gY={regex:BG,countKey:"Colors",token:"${c}",parse:Pr.parse},mY={regex:Uk,countKey:"Numbers",token:"${n}",parse:Cd.parse};function x$(e,{regex:t,countKey:n,token:r,parse:i}){const o=e.tokenised.match(t);o&&(e["num"+n]=o.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...o.map(i)))}function uw(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&x$(n,pY),x$(n,gY),x$(n,mY),n}function yY(e){return uw(e).values}function vY(e){const{values:t,numColors:n,numVars:r,tokenised:i}=uw(e),o=t.length;return s=>{let a=i;for(let l=0;l<o;l++)l<r?a=a.replace(pY.token,s[l]):l<r+n?a=a.replace(gY.token,Pr.transform(s[l])):a=a.replace(mY.token,Q0(s[l]));return a}}const O2e=e=>typeof e=="number"?0:e;function N2e(e){const t=yY(e);return vY(e)(t.map(O2e))}const Yu={test:D2e,parse:yY,createTransformer:vY,getAnimatableNone:N2e},bY=(e,t)=>n=>`${n>0?t:e}`;function xY(e,t){return typeof e=="number"?n=>Bt(e,t,n):Pr.test(e)?hY(e,t):e.startsWith("var(")?bY(e,t):SY(e,t)}const wY=(e,t)=>{const n=[...e],r=n.length,i=e.map((o,s)=>xY(o,t[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}},I2e=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=xY(e[i],t[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},SY=(e,t)=>{const n=Yu.createTransformer(t),r=uw(e),i=uw(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Lu(wY(r.values,i.values),n):bY(e,t)},Hy=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},WI=(e,t)=>n=>Bt(e,t,n);function L2e(e){return typeof e=="number"?WI:typeof e=="string"?Pr.test(e)?hY:SY:Array.isArray(e)?wY:typeof e=="object"?I2e:WI}function z2e(e,t,n){const r=[],i=n||L2e(e[0]),o=e.length-1;for(let s=0;s<o;s++){let a=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||en:t;a=Lu(l,a)}r.push(a)}return r}function kY(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const o=e.length;if(lw(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=z2e(t,r,i),a=s.length,l=u=>{let c=0;if(a>1)for(;c<e.length-2&&!(u<e[c+1]);c++);const f=Hy(e[c],e[c+1],u);return s[c](f)};return n?u=>l(Gu(e[0],e[o-1],u)):l}function B2e(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Hy(0,t,r);e.push(Bt(n,1,i))}}function j2e(e){const t=[0];return B2e(t,e.length-1),t}function U2e(e,t){return e.map(n=>n*t)}function V2e(e,t){return e.map(()=>t||aY).splice(0,e.length-1)}function cw({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=_2e(r)?r.map(UI):UI(r),o={done:!1,value:t[0]},s=U2e(n&&n.length===t.length?n:j2e(t),e),a=kY(s,t,{ease:Array.isArray(i)?i:V2e(t,i)});return{calculatedDuration:e,next:l=>(o.value=a(l),o.done=l>=e,o)}}function CY(e,t){return t?e*(1e3/t):0}const W2e=5;function _Y(e,t,n){const r=Math.max(t-W2e,0);return CY(n-e(r),t-r)}const w$=.001,H2e=.01,q2e=10,G2e=.05,Y2e=1;function X2e({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,o,s=1-t;s=Gu(G2e,Y2e,s),e=Gu(H2e,q2e,ll(e)),s<1?(i=u=>{const c=u*s,f=c*e,d=c-n,h=x3(u,s),p=Math.exp(-f);return w$-d/h*p},o=u=>{const f=u*s*e,d=f*n+n,h=Math.pow(s,2)*Math.pow(u,2)*e,p=Math.exp(-f),g=x3(Math.pow(u,2),s);return(-i(u)+w$>0?-1:1)*((d-h)*p)/g}):(i=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-w$+c*f},o=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=Q2e(i,o,a);if(e=Df(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const K2e=12;function Q2e(e,t,n){let r=n;for(let i=1;i<K2e;i++)r=r-e(r)/t(r);return r}function x3(e,t){return e*Math.sqrt(1-t*t)}const Z2e=["duration","bounce"],J2e=["stiffness","damping","mass"];function HI(e,t){return t.some(n=>e[n]!==void 0)}function ewe(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!HI(e,J2e)&&HI(e,Z2e)){const n=X2e(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function EY({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],o=e[e.length-1],s={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:f,isResolvedFromDuration:d}=ewe({...r,velocity:-ll(r.velocity||0)}),h=f||0,p=l/(2*Math.sqrt(a*u)),g=o-i,m=ll(Math.sqrt(a/u)),y=Math.abs(g)<5;n||(n=y?.01:2),t||(t=y?.005:.5);let v;if(p<1){const b=x3(m,p);v=x=>{const w=Math.exp(-p*m*x);return o-w*((h+p*m*g)/b*Math.sin(b*x)+g*Math.cos(b*x))}}else if(p===1)v=b=>o-Math.exp(-m*b)*(g+(h+m*g)*b);else{const b=m*Math.sqrt(p*p-1);v=x=>{const w=Math.exp(-p*m*x),k=Math.min(b*x,300);return o-w*((h+p*m*g)*Math.sinh(k)+b*g*Math.cosh(k))/b}}return{calculatedDuration:d&&c||null,next:b=>{const x=v(b);if(d)s.done=b>=c;else{let w=h;b!==0&&(p<1?w=_Y(v,b,x):w=0);const k=Math.abs(w)<=n,S=Math.abs(o-x)<=t;s.done=k&&S}return s.value=s.done?o:x,s}}}function qI({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],d={done:!1,value:f},h=C=>a!==void 0&&C<a||l!==void 0&&C>l,p=C=>a===void 0?l:l===void 0||Math.abs(a-C)<Math.abs(l-C)?a:l;let g=n*t;const m=f+g,y=s===void 0?m:s(m);y!==m&&(g=y-f);const v=C=>-g*Math.exp(-C/r),b=C=>y+v(C),x=C=>{const _=v(C),$=b(C);d.done=Math.abs(_)<=u,d.value=d.done?y:$};let w,k;const S=C=>{h(d.value)&&(w=C,k=EY({keyframes:[d.value,p(d.value)],velocity:_Y(b,C,d.value),damping:i,stiffness:o,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:C=>{let _=!1;return!k&&w===void 0&&(_=!0,x(C),S(C)),w!==void 0&&C>w?k.next(C-w):(!_&&x(C),d)}}}const twe=e=>{const t=({timestamp:n})=>e(n);return{start:()=>kt.update(t,!0),stop:()=>Sl(t),now:()=>dr.isProcessing?dr.timestamp:performance.now()}},GI=2e4;function YI(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<GI;)t+=n,r=e.next(t);return t>=GI?1/0:t}const nwe={decay:qI,inertia:qI,tween:cw,keyframes:cw,spring:EY};function fw({autoplay:e=!0,delay:t=0,driver:n=twe,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:f,...d}){let h=1,p=!1,g,m;const y=()=>{m=new Promise(W=>{g=W})};y();let v;const b=nwe[i]||cw;let x;b!==cw&&typeof r[0]!="number"&&(x=kY([0,100],r,{clamp:!1}),r=[0,100]);const w=b({...d,keyframes:r});let k;a==="mirror"&&(k=b({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let S="idle",C=null,_=null,$=null;w.calculatedDuration===null&&o&&(w.calculatedDuration=YI(w));const{calculatedDuration:A}=w;let N=1/0,M=1/0;A!==null&&(N=A+s,M=N*(o+1)-s);let R=0;const F=W=>{if(_===null)return;h>0&&(_=Math.min(_,W)),h<0&&(_=Math.min(W-M/h,_)),C!==null?R=C:R=Math.round(W-_)*h;const oe=R-t*(h>=0?1:-1),re=h>=0?oe<0:oe>M;R=Math.max(oe,0),S==="finished"&&C===null&&(R=M);let we=R,Re=w;if(o){const ue=Math.min(R,M)/N;let _e=Math.floor(ue),Ee=ue%1;!Ee&&ue>=1&&(Ee=1),Ee===1&&_e--,_e=Math.min(_e,o+1),!!(_e%2)&&(a==="reverse"?(Ee=1-Ee,s&&(Ee-=s/N)):a==="mirror"&&(Re=k)),we=Gu(0,1,Ee)*N}const lt=re?{done:!1,value:r[0]}:Re.next(we);x&&(lt.value=x(lt.value));let{done:Cn}=lt;!re&&A!==null&&(Cn=h>=0?R>=M:R<=0);const rr=C===null&&(S==="finished"||S==="running"&&Cn);return f&&f(lt.value),rr&&O(),lt},D=()=>{v&&v.stop(),v=void 0},I=()=>{S="idle",D(),g(),y(),_=$=null},O=()=>{S="finished",c&&c(),D(),g()},j=()=>{if(p)return;v||(v=n(F));const W=v.now();l&&l(),C!==null?_=W-C:(!_||S==="finished")&&(_=W),S==="finished"&&y(),$=_,C=null,S="running",v.start()};e&&j();const Y={then(W,oe){return m.then(W,oe)},get time(){return ll(R)},set time(W){W=Df(W),R=W,C!==null||!v||h===0?C=W:_=v.now()-W/h},get duration(){const W=w.calculatedDuration===null?YI(w):w.calculatedDuration;return ll(W)},get speed(){return h},set speed(W){W===h||!v||(h=W,Y.time=ll(R))},get state(){return S},play:j,pause:()=>{S="paused",C=R},stop:()=>{p=!0,S!=="idle"&&(S="idle",u&&u(),I())},cancel:()=>{$!==null&&F($),I()},complete:()=>{S="finished"},sample:W=>(_=0,F(W))};return Y}function rwe(e){let t;return()=>(t===void 0&&(t=e()),t)}const iwe=rwe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),owe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Mb=10,swe=2e4,awe=(e,t)=>t.type==="spring"||e==="backgroundColor"||!rY(t.ease);function lwe(e,t,{onUpdate:n,onComplete:r,...i}){if(!(iwe()&&owe.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let s=!1,a,l,u=!1;const c=()=>{l=new Promise(b=>{a=b})};c();let{keyframes:f,duration:d=300,ease:h,times:p}=i;if(awe(t,i)){const b=fw({...i,repeat:0,delay:0});let x={done:!1,value:f[0]};const w=[];let k=0;for(;!x.done&&k<swe;)x=b.sample(k),w.push(x.value),k+=Mb;p=void 0,f=w,d=k-Mb,h="linear"}const g=v2e(e.owner.current,t,f,{...i,duration:d,ease:h,times:p}),m=()=>{u=!1,g.cancel()},y=()=>{u=!0,kt.update(m),a(),c()};return g.onfinish=()=>{u||(e.set(b2e(f,i)),r&&r(),y())},{then(b,x){return l.then(b,x)},attachTimeline(b){return g.timeline=b,g.onfinish=null,en},get time(){return ll(g.currentTime||0)},set time(b){g.currentTime=Df(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return ll(d)},play:()=>{s||(g.play(),Sl(m))},pause:()=>g.pause(),stop:()=>{if(s=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const x=fw({...i,autoplay:!1});e.setWithVelocity(x.sample(b-Mb).value,x.sample(b).value,Mb)}y()},complete:()=>{u||g.finish()},cancel:y}}function uwe({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:en,pause:en,stop:en,then:o=>(o(),Promise.resolve()),cancel:en,complete:en});return t?fw({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const cwe={type:"spring",stiffness:500,damping:25,restSpeed:10},fwe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),dwe={type:"keyframes",duration:.8},hwe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pwe=(e,{keyframes:t})=>t.length>2?dwe:kd.has(e)?e.startsWith("scale")?fwe(t[1]):cwe:hwe,w3=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Yu.test(t)||t==="0")&&!t.startsWith("url(")),gwe=new Set(["brightness","contrast","saturate","opacity"]);function mwe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Uk)||[];if(!r)return e;const i=n.replace(r,"");let o=gwe.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const ywe=/([a-z-]*)\(.*?\)/g,S3={...Yu,getAnimatableNone:e=>{const t=e.match(ywe);return t?t.map(mwe).join(" "):e}},vwe={...jG,color:Pr,backgroundColor:Pr,outlineColor:Pr,fill:Pr,stroke:Pr,borderColor:Pr,borderTopColor:Pr,borderRightColor:Pr,borderBottomColor:Pr,borderLeftColor:Pr,filter:S3,WebkitFilter:S3},tF=e=>vwe[e];function $Y(e,t){let n=tF(e);return n!==S3&&(n=Yu),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const AY=e=>/^0[^.\s]+$/.test(e);function bwe(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||AY(e)}function xwe(e,t,n,r){const i=w3(t,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const s=r.from!==void 0?r.from:e.get();let a;const l=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?s:o[u-1]),bwe(o[u])&&l.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(a=o[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];o[c]=$Y(t,a)}return o}function wwe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function nF(e,t){return e[t]||e.default||e}const Swe={skipAnimations:!1},rF=(e,t,n,r={})=>i=>{const o=nF(r,e)||{},s=o.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Df(s);const l=xwe(t,e,n,o),u=l[0],c=l[l.length-1],f=w3(e,u),d=w3(e,c);let h={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:p=>{t.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(wwe(o)||(h={...h,...pwe(e,h)}),h.duration&&(h.duration=Df(h.duration)),h.repeatDelay&&(h.repeatDelay=Df(h.repeatDelay)),!f||!d||y2e.current||o.type===!1||Swe.skipAnimations)return uwe(h);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=lwe(t,e,h);if(p)return p}return fw(h)};function dw(e){return!!(yi(e)&&e.add)}const TY=e=>/^\-?\d*\.?\d+$/.test(e);function iF(e,t){e.indexOf(t)===-1&&e.push(t)}function oF(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class sF{constructor(){this.subscriptions=[]}add(t){return iF(this.subscriptions,t),()=>oF(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const kwe=e=>!isNaN(parseFloat(e));class Cwe{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:s}=dr;this.lastUpdated!==s&&(this.timeDelta=o,this.lastUpdated=s,kt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>kt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=kwe(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new sF);const r=this.events[t].add(n);return t==="change"?()=>{r(),kt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?CY(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lp(e,t){return new Cwe(e,t)}const MY=e=>t=>t.test(e),_we={test:e=>e==="auto",parse:e=>e},PY=[Cd,$e,oa,Hl,Rxe,Fxe,_we],Sm=e=>PY.find(MY(e)),Ewe=[...PY,Pr,Yu],$we=e=>Ewe.find(MY(e));function Awe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Lp(n))}function Twe(e,t){const n=Wk(e,t);let{transitionEnd:r={},transition:i={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const s in o){const a=Gxe(o[s]);Awe(e,s,a)}}function Mwe(e,t,n){var r,i;const o=Object.keys(t).filter(a=>!e.hasValue(a)),s=o.length;if(s)for(let a=0;a<s;a++){const l=o[a],u=t[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(i=(r=n[l])!==null&&r!==void 0?r:e.readValue(l))!==null&&i!==void 0?i:t[l]),c!=null&&(typeof c=="string"&&(TY(c)||AY(c))?c=parseFloat(c):!$we(c)&&Yu.test(u)&&(c=$Y(l,u)),e.addValue(l,Lp(c,{owner:e})),n[l]===void 0&&(n[l]=c),c!==null&&e.setBaseTarget(l,c))}}function Pwe(e,t){return t?(t[e]||t.default||t).from:void 0}function Fwe(e,t,n){const r={};for(const i in e){const o=Pwe(i,t);if(o!==void 0)r[i]=o;else{const s=n.getValue(i);s&&(r[i]=s.get())}}return r}function Rwe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Dwe(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function FY(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:s,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(o=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const f in a){const d=e.getValue(f),h=a[f];if(!d||h===void 0||c&&Rwe(c,f))continue;const p={delay:n,elapsed:0,...nF(o||{},f)};if(window.HandoffAppearAnimations){const y=e.getProps()[DG];if(y){const v=window.HandoffAppearAnimations(y,f,d,kt);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let g=!p.isHandoff&&!Dwe(d,h);if(p.type==="spring"&&(d.getVelocity()||p.velocity)&&(g=!1),d.animation&&(g=!1),g)continue;d.start(rF(f,d,h,e.shouldReduceMotion&&kd.has(f)?{type:!1}:p));const m=d.animation;dw(l)&&(l.add(f),m.then(()=>l.remove(f))),u.push(m)}return s&&Promise.all(u).then(()=>{s&&Twe(e,s)}),u}function k3(e,t,n={}){const r=Wk(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(FY(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:f}=i;return Owe(e,t,u+l,c,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[o,s]:[s,o];return l().then(()=>u())}else return Promise.all([o(),s(n.delay)])}function Owe(e,t,n=0,r=0,i=1,o){const s=[],a=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(Nwe).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(k3(u,t,{...o,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function Nwe(e,t){return e.sortNodePosition(t)}function Iwe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(o=>k3(e,o,n));r=Promise.all(i)}else if(typeof t=="string")r=k3(e,t,n);else{const i=typeof t=="function"?Wk(e,t,n.custom):t;r=Promise.all(FY(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const Lwe=[...jP].reverse(),zwe=jP.length;function Bwe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Iwe(e,n,r)))}function jwe(e){let t=Bwe(e);const n=Vwe();let r=!0;const i=(l,u)=>{const c=Wk(e,u);if(c){const{transition:f,transitionEnd:d,...h}=c;l={...l,...h,...d}}return l};function o(l){t=l(e)}function s(l,u){const c=e.getProps(),f=e.getVariantContext(!0)||{},d=[],h=new Set;let p={},g=1/0;for(let y=0;y<zwe;y++){const v=Lwe[y],b=n[v],x=c[v]!==void 0?c[v]:f[v],w=Vy(x),k=v===u?b.isActive:null;k===!1&&(g=y);let S=x===f[v]&&x!==c[v]&&w;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...p},!b.isActive&&k===null||!x&&!b.prevProp||Bk(x)||typeof x=="boolean")continue;let _=Uwe(b.prevProp,x)||v===u&&b.isActive&&!S&&w||y>g&&w,$=!1;const A=Array.isArray(x)?x:[x];let N=A.reduce(i,{});k===!1&&(N={});const{prevResolvedValues:M={}}=b,R={...M,...N},F=D=>{_=!0,h.has(D)&&($=!0,h.delete(D)),b.needsAnimating[D]=!0};for(const D in R){const I=N[D],O=M[D];if(p.hasOwnProperty(D))continue;let j=!1;aw(I)&&aw(O)?j=!tY(I,O):j=I!==O,j?I!==void 0?F(D):h.add(D):I!==void 0&&h.has(D)?F(D):b.protectedKeys[D]=!0}b.prevProp=x,b.prevResolvedValues=N,b.isActive&&(p={...p,...N}),r&&e.blockInitialAnimation&&(_=!1),_&&(!S||$)&&d.push(...A.map(D=>({animation:D,options:{type:v,...l}})))}if(h.size){const y={};h.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(y[v]=b)}),d.push({animation:y})}let m=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(d):Promise.resolve()}function a(l,u,c){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const d=s(c,l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n}}function Uwe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!tY(t,e):!1}function Nc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vwe(){return{animate:Nc(!0),whileInView:Nc(),whileHover:Nc(),whileTap:Nc(),whileDrag:Nc(),whileFocus:Nc(),exit:Nc()}}class Wwe extends yc{constructor(t){super(t),t.animationState||(t.animationState=jwe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Bk(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Hwe=0;class qwe extends yc{constructor(){super(...arguments),this.id=Hwe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Gwe={animation:{Feature:Wwe},exit:{Feature:qwe}},XI=(e,t)=>Math.abs(e-t);function Ywe(e,t){const n=XI(e.x,t.x),r=XI(e.y,t.y);return Math.sqrt(n**2+r**2)}class RY{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=k$(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=Ywe(f.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:p}=f,{timestamp:g}=dr;this.history.push({...p,timestamp:g});const{onStart:m,onMove:y}=this.handlers;d||(m&&m(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=S$(d,this.transformPagePoint),kt.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=k$(f.type==="pointercancel"?this.lastMoveEventInfo:S$(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,m),p&&p(f,m)},!KG(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Vk(t),a=S$(s,this.transformPagePoint),{point:l}=a,{timestamp:u}=dr;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,k$(a,this.history)),this.removeListeners=Lu(al(this.contextWindow,"pointermove",this.handlePointerMove),al(this.contextWindow,"pointerup",this.handlePointerUp),al(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Sl(this.updatePoint)}}function S$(e,t){return t?{point:t(e.point)}:e}function KI(e,t){return{x:e.x-t.x,y:e.y-t.y}}function k$({point:e},t){return{point:e,delta:KI(e,DY(t)),offset:KI(e,Xwe(t)),velocity:Kwe(t,.1)}}function Xwe(e){return e[0]}function DY(e){return e[e.length-1]}function Kwe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=DY(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Df(t)));)n--;if(!r)return{x:0,y:0};const o=ll(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function qi(e){return e.max-e.min}function C3(e,t=0,n=.01){return Math.abs(e-t)<=n}function QI(e,t,n,r=.5){e.origin=r,e.originPoint=Bt(t.min,t.max,e.origin),e.scale=qi(n)/qi(t),(C3(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Bt(n.min,n.max,e.origin)-e.originPoint,(C3(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Z0(e,t,n,r){QI(e.x,t.x,n.x,r?r.originX:void 0),QI(e.y,t.y,n.y,r?r.originY:void 0)}function ZI(e,t,n){e.min=n.min+t.min,e.max=e.min+qi(t)}function Qwe(e,t,n){ZI(e.x,t.x,n.x),ZI(e.y,t.y,n.y)}function JI(e,t,n){e.min=t.min-n.min,e.max=e.min+qi(t)}function J0(e,t,n){JI(e.x,t.x,n.x),JI(e.y,t.y,n.y)}function Zwe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Bt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Bt(n,e,r.max):Math.min(e,n)),e}function eL(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Jwe(e,{top:t,left:n,bottom:r,right:i}){return{x:eL(e.x,n,i),y:eL(e.y,t,r)}}function tL(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function eSe(e,t){return{x:tL(e.x,t.x),y:tL(e.y,t.y)}}function tSe(e,t){let n=.5;const r=qi(e),i=qi(t);return i>r?n=Hy(t.min,t.max-r,e.min):r>i&&(n=Hy(e.min,e.max-i,t.min)),Gu(0,1,n)}function nSe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const _3=.35;function rSe(e=_3){return e===!1?e=0:e===!0&&(e=_3),{x:nL(e,"left","right"),y:nL(e,"top","bottom")}}function nL(e,t,n){return{min:rL(e,t),max:rL(e,n)}}function rL(e,t){return typeof e=="number"?e:e[t]||0}const iL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nh=()=>({x:iL(),y:iL()}),oL=()=>({min:0,max:0}),ln=()=>({x:oL(),y:oL()});function lo(e){return[e("x"),e("y")]}function OY({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function iSe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function oSe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function C$(e){return e===void 0||e===1}function E3({scale:e,scaleX:t,scaleY:n}){return!C$(e)||!C$(t)||!C$(n)}function Qc(e){return E3(e)||NY(e)||e.z||e.rotate||e.rotateX||e.rotateY}function NY(e){return sL(e.x)||sL(e.y)}function sL(e){return e&&e!=="0%"}function hw(e,t,n){const r=e-n,i=t*r;return n+i}function aL(e,t,n,r,i){return i!==void 0&&(e=hw(e,i,r)),hw(e,n,r)+t}function $3(e,t=0,n=1,r,i){e.min=aL(e.min,t,n,r,i),e.max=aL(e.max,t,n,r,i)}function IY(e,{x:t,y:n}){$3(e.x,t.translate,t.scale,t.originPoint),$3(e.y,n.translate,n.scale,n.originPoint)}function sSe(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ih(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,IY(e,s)),r&&Qc(o.latestValues)&&Ih(e,o.latestValues))}t.x=lL(t.x),t.y=lL(t.y)}function lL(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Zl(e,t){e.min=e.min+t,e.max=e.max+t}function uL(e,t,[n,r,i]){const o=t[i]!==void 0?t[i]:.5,s=Bt(e.min,e.max,o);$3(e,t[n],t[r],s,t.scale)}const aSe=["x","scaleX","originX"],lSe=["y","scaleY","originY"];function Ih(e,t){uL(e.x,t,aSe),uL(e.y,t,lSe)}function LY(e,t){return OY(oSe(e.getBoundingClientRect(),t))}function uSe(e,t,n){const r=LY(e,n),{scroll:i}=t;return i&&(Zl(r.x,i.offset.x),Zl(r.y,i.offset.y)),r}const zY=({current:e})=>e?e.ownerDocument.defaultView:null,cSe=new WeakMap;class fSe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Vk(c,"page").point)},o=(c,f)=>{const{drag:d,dragPropagation:h,onDragStart:p}=this.getProps();if(d&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=ZG(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lo(m=>{let y=this.getAxisMotionValue(m).get()||0;if(oa.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[m];b&&(y=qi(b)*(parseFloat(y)/100))}}this.originPoint[m]=y}),p&&kt.update(()=>p(c,f),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(c,f)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:p,onDrag:g}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:m}=f;if(h&&this.currentDirection===null){this.currentDirection=dSe(m),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,m),this.updateAxis("y",f.point,m),this.visualElement.render(),g&&g(c,f)},a=(c,f)=>this.stop(c,f),l=()=>lo(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new RY(t,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:zY(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&kt.update(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Pb(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=Zwe(s,this.constraints[t],this.elastic[t])),o.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;n&&Dh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Jwe(i.layoutBox,n):this.constraints=!1,this.elastic=rSe(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&lo(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=nSe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Dh(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=uSe(r,i.root,this.visualElement.getTransformPagePoint());let s=eSe(i.layout.layoutBox,o);if(n){const a=n(iSe(s));this.hasMutatedConstraints=!!a,a&&(s=OY(a))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=lo(c=>{if(!Pb(c,n,this.currentDirection))return;let f=l&&l[c]||{};s&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(rF(t,r,0,n))}stopAnimation(){lo(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){lo(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){lo(n=>{const{drag:r}=this.getProps();if(!Pb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(t[n]-Bt(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Dh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};lo(s=>{const a=this.getAxisMotionValue(s);if(a){const l=a.get();i[s]=tSe({min:l,max:l},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),lo(s=>{if(!Pb(s,t,null))return;const a=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];a.set(Bt(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;cSe.set(this.visualElement,this);const t=this.visualElement.current,n=al(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Dh(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const s=Za(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(lo(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=_3,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function Pb(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function dSe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class hSe extends yc{constructor(t){super(t),this.removeGroupControls=en,this.removeListeners=en,this.controls=new fSe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||en}unmount(){this.removeGroupControls(),this.removeListeners()}}const cL=e=>(t,n)=>{e&&kt.update(()=>e(t,n))};class pSe extends yc{constructor(){super(...arguments),this.removePointerDownListener=en}onPointerDown(t){this.session=new RY(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zY(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:cL(t),onStart:cL(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&kt.update(()=>i(o,s))}}}mount(){this.removePointerDownListener=al(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function gSe(){const e=P.useContext(V1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=P.useId();return P.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}function mSe(){return ySe(P.useContext(V1))}function ySe(e){return e===null?!0:e.isPresent}const Zx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fL(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const km={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if($e.test(e))e=parseFloat(e);else return e;const n=fL(e,t.target.x),r=fL(e,t.target.y);return`${n}% ${r}%`}},vSe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Yu.parse(e);if(i.length>5)return r;const o=Yu.createTransformer(e),s=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=a,i[1+s]/=l;const u=Bt(a,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),o(i)}};class bSe extends Li.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=t;_xe(xSe),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Zx.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?s.promote():s.relegate()||kt.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function BY(e){const[t,n]=gSe(),r=P.useContext(VP);return Li.createElement(bSe,{...e,layoutGroup:r,switchLayoutGroup:P.useContext(NG),isPresent:t,safeToRemove:n})}const xSe={borderRadius:{...km,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:km,borderTopRightRadius:km,borderBottomLeftRadius:km,borderBottomRightRadius:km,boxShadow:vSe},jY=["TopLeft","TopRight","BottomLeft","BottomRight"],wSe=jY.length,dL=e=>typeof e=="string"?parseFloat(e):e,hL=e=>typeof e=="number"||$e.test(e);function SSe(e,t,n,r,i,o){i?(e.opacity=Bt(0,n.opacity!==void 0?n.opacity:1,kSe(r)),e.opacityExit=Bt(t.opacity!==void 0?t.opacity:1,0,CSe(r))):o&&(e.opacity=Bt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<wSe;s++){const a=`border${jY[s]}Radius`;let l=pL(t,a),u=pL(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||hL(l)===hL(u)?(e[a]=Math.max(Bt(dL(l),dL(u),r),0),(oa.test(u)||oa.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Bt(t.rotate||0,n.rotate||0,r))}function pL(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const kSe=UY(0,.5,cY),CSe=UY(.5,.95,en);function UY(e,t,n){return r=>r<e?0:r>t?1:n(Hy(e,t,r))}function gL(e,t){e.min=t.min,e.max=t.max}function io(e,t){gL(e.x,t.x),gL(e.y,t.y)}function mL(e,t,n,r,i){return e-=t,e=hw(e,1/n,r),i!==void 0&&(e=hw(e,1/i,r)),e}function _Se(e,t=0,n=1,r=.5,i,o=e,s=e){if(oa.test(t)&&(t=parseFloat(t),t=Bt(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=Bt(o.min,o.max,r);e===o&&(a-=t),e.min=mL(e.min,t,n,a,i),e.max=mL(e.max,t,n,a,i)}function yL(e,t,[n,r,i],o,s){_Se(e,t[n],t[r],t[i],t.scale,o,s)}const ESe=["x","scaleX","originX"],$Se=["y","scaleY","originY"];function vL(e,t,n,r){yL(e.x,t,ESe,n?n.x:void 0,r?r.x:void 0),yL(e.y,t,$Se,n?n.y:void 0,r?r.y:void 0)}function bL(e){return e.translate===0&&e.scale===1}function VY(e){return bL(e.x)&&bL(e.y)}function ASe(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function WY(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function xL(e){return qi(e.x)/qi(e.y)}class TSe{constructor(){this.members=[]}add(t){iF(this.members,t),t.scheduleRender()}remove(t){if(oF(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wL(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const s=e.x.scale*t.x,a=e.y.scale*t.y;return(s!==1||a!==1)&&(r+=`scale(${s}, ${a})`),r||"none"}const MSe=(e,t)=>e.depth-t.depth;class PSe{constructor(){this.children=[],this.isDirty=!1}add(t){iF(this.children,t),this.isDirty=!0}remove(t){oF(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(MSe),this.isDirty=!1,this.children.forEach(t)}}function FSe(e,t){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=t&&(Sl(r),e(o-t))};return kt.read(r,!0),()=>Sl(r)}function RSe(e){window.MotionDebug&&window.MotionDebug.record(e)}function DSe(e){return e instanceof SVGElement&&e.tagName!=="svg"}function OSe(e,t,n){const r=yi(e)?e:Lp(e);return r.start(rF("",r,t,n)),r.animation}const SL=["","X","Y","Z"],NSe={visibility:"hidden"},kL=1e3;let ISe=0;const Zc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function HY({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=t==null?void 0:t()){this.id=ISe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Zc.totalNodes=Zc.resolvedTargetDeltas=Zc.recalculatedProjection=0,this.nodes.forEach(BSe),this.nodes.forEach(HSe),this.nodes.forEach(qSe),this.nodes.forEach(jSe),RSe(Zc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new PSe)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new sF),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=DSe(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),e){let f;const d=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=FSe(d,250),Zx.hasAnimatedSinceResize&&(Zx.hasAnimatedSinceResize=!1,this.nodes.forEach(_L))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||QSe,{onLayoutAnimationStart:m,onLayoutAnimationComplete:y}=c.getProps(),v=!this.targetLayout||!WY(this.targetLayout,p)||h,b=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const x={...nF(g,"layout"),onPlay:m,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||_L(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Sl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GSe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(CL);return}this.isUpdating||this.nodes.forEach(VSe),this.isUpdating=!1,this.nodes.forEach(WSe),this.nodes.forEach(LSe),this.nodes.forEach(zSe),this.clearAllSnapshots();const a=performance.now();dr.delta=Gu(0,1e3/60,a-dr.timestamp),dr.timestamp=a,dr.isProcessing=!0,p$.update.process(dr),p$.preRender.process(dr),p$.render.process(dr),dr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(USe),this.sharedNodes.forEach(YSe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){kt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!VY(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(a||Qc(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),ZSe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return ln();const a=s.measureViewportBox(),{scroll:l}=this.root;return l&&(Zl(a.x,l.offset.x),Zl(a.y,l.offset.y)),a}removeElementScroll(s){const a=ln();io(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:f}=u;if(u!==this.root&&c&&f.layoutScroll){if(c.isRoot){io(a,s);const{scroll:d}=this.root;d&&(Zl(a.x,-d.offset.x),Zl(a.y,-d.offset.y))}Zl(a.x,c.offset.x),Zl(a.y,c.offset.y)}}return a}applyTransform(s,a=!1){const l=ln();io(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ih(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Qc(c.latestValues)&&Ih(l,c.latestValues)}return Qc(this.latestValues)&&Ih(l,this.latestValues),l}removeTransform(s){const a=ln();io(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Qc(u.latestValues))continue;E3(u.latestValues)&&u.updateSnapshot();const c=ln(),f=u.measurePageBox();io(c,f),vL(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Qc(this.latestValues)&&vL(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==dr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=dr.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),J0(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),io(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qwe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):io(this.target,this.layout.layoutBox),IY(this.target,this.targetDelta)):io(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),J0(this.relativeTargetOrigin,this.target,h.target),io(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Zc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||E3(this.parent.latestValues)||NY(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===dr.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;io(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;sSe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=Nh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Nh(),this.projectionDeltaWithTransform=Nh());const g=this.projectionTransform;Z0(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=wL(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==d||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Zc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=Nh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=ln(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=h!==p,m=this.getStack(),y=!m||m.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(KSe));this.animationProgress=0;let b;this.mixTargetDelta=x=>{const w=x/1e3;EL(f.x,s.x,w),EL(f.y,s.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(J0(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),XSe(this.relativeTarget,this.relativeTargetOrigin,d,w),b&&ASe(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ln()),io(b,this.relativeTarget)),g&&(this.animationValues=c,SSe(c,u,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Sl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=kt.update(()=>{Zx.hasAnimatedSinceResize=!0,this.currentAnimation=OSe(0,kL,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=s;if(!(!a||!l||!u)){if(this!==s&&this.layout&&u&&qY(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ln();const f=qi(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const d=qi(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+d}io(a,l),Ih(a,c),Z0(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new TSe),this.sharedNodes.get(s).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<SL.length;c++){const f="rotate"+SL[c];l[f]&&(u[f]=l[f],s.setStaticValue(f,0))}s.render();for(const c in u)s.setStaticValue(c,u[c]);s.scheduleRender()}getProjectionStyles(s){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return NSe;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Qx(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Qx(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Qc(this.latestValues)&&(g.transform=c?c({},""):"none",this.hasProjected=!1),g}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=wL(this.projectionDeltaWithTransform,this.treeScale,d),c&&(u.transform=c(d,u.transform));const{x:h,y:p}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in ow){if(d[g]===void 0)continue;const{correct:m,applyTo:y}=ow[g],v=u.transform==="none"?d[g]:m(d[g],f);if(y){const b=y.length;for(let x=0;x<b;x++)u[y[x]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=f===this?Qx(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(CL),this.root.sharedNodes.clear()}}}function LSe(e){e.updateLayout()}function zSe(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:o}=e.options,s=n.source!==e.layout.source;o==="size"?lo(f=>{const d=s?n.measuredBox[f]:n.layoutBox[f],h=qi(d);d.min=r[f].min,d.max=d.min+h}):qY(o,n.layoutBox,r)&&lo(f=>{const d=s?n.measuredBox[f]:n.layoutBox[f],h=qi(r[f]);d.max=d.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+h)});const a=Nh();Z0(a,r,n.layoutBox);const l=Nh();s?Z0(l,e.applyTransform(i,!0),n.measuredBox):Z0(l,r,n.layoutBox);const u=!VY(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=ln();J0(p,n.layoutBox,d.layoutBox);const g=ln();J0(g,r,h.layoutBox),WY(p,g)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function BSe(e){Zc.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function jSe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function USe(e){e.clearSnapshot()}function CL(e){e.clearMeasurements()}function VSe(e){e.isLayoutDirty=!1}function WSe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function _L(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function HSe(e){e.resolveTargetDelta()}function qSe(e){e.calcProjection()}function GSe(e){e.resetRotation()}function YSe(e){e.removeLeadSnapshot()}function EL(e,t,n){e.translate=Bt(t.translate,0,n),e.scale=Bt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function $L(e,t,n,r){e.min=Bt(t.min,n.min,r),e.max=Bt(t.max,n.max,r)}function XSe(e,t,n,r){$L(e.x,t.x,n.x,r),$L(e.y,t.y,n.y,r)}function KSe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const QSe={duration:.45,ease:[.4,0,.1,1]},AL=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),TL=AL("applewebkit/")&&!AL("chrome/")?Math.round:en;function ML(e){e.min=TL(e.min),e.max=TL(e.max)}function ZSe(e){ML(e.x),ML(e.y)}function qY(e,t,n){return e==="position"||e==="preserve-aspect"&&!C3(xL(t),xL(n),.2)}const JSe=HY({attachResizeListener:(e,t)=>Za(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_$={current:void 0},GY=HY({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!_$.current){const e=new JSe({});e.mount(window),e.setOptions({layoutScroll:!0}),_$.current=e}return _$.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),eke={pan:{Feature:pSe},drag:{Feature:hSe,ProjectionNode:GY,MeasureLayout:BY}},tke=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function nke(e){const t=tke.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function A3(e,t,n=1){const[r,i]=nke(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const s=o.trim();return TY(s)?parseFloat(s):s}else return y3(i)?A3(i,t,n+1):i}function rke(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const o=i.get();if(!y3(o))return;const s=A3(o,r);s&&i.set(s)});for(const i in t){const o=t[i];if(!y3(o))continue;const s=A3(o,r);s&&(t[i]=s,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:t,transitionEnd:n}}const ike=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),YY=e=>ike.has(e),oke=e=>Object.keys(e).some(YY),PL=e=>e===Cd||e===$e,FL=(e,t)=>parseFloat(e.split(", ")[t]),RL=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return FL(i[1],t);{const o=r.match(/^matrix\((.+)\)$/);return o?FL(o[1],e):0}},ske=new Set(["x","y","z"]),ake=W1.filter(e=>!ske.has(e));function lke(e){const t=[];return ake.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const zp={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:RL(4,13),y:RL(5,14)};zp.translateX=zp.x;zp.translateY=zp.y;const uke=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:s}=o,a={};s==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=zp[u](r,o)}),t.render();const l=t.measureViewportBox();return n.forEach(u=>{const c=t.getValue(u);c&&c.jump(a[u]),e[u]=zp[u](l,o)}),e},cke=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(YY);let o=[],s=!1;const a=[];if(i.forEach(l=>{const u=e.getValue(l);if(!e.hasValue(l))return;let c=n[l],f=Sm(c);const d=t[l];let h;if(aw(d)){const p=d.length,g=d[0]===null?1:0;c=d[g],f=Sm(c);for(let m=g;m<p&&d[m]!==null;m++)h?lw(Sm(d[m])===h):h=Sm(d[m])}else h=Sm(d);if(f!==h)if(PL(f)&&PL(h)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof d=="string"?t[l]=parseFloat(d):Array.isArray(d)&&h===$e&&(t[l]=d.map(parseFloat))}else f!=null&&f.transform&&(h!=null&&h.transform)&&(c===0||d===0)?c===0?u.set(h.transform(c)):t[l]=f.transform(d):(s||(o=lke(e),s=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:t[l],u.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=uke(t,e,a);return o.length&&o.forEach(([c,f])=>{e.getValue(c).set(f)}),e.render(),zk&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function fke(e,t,n,r){return oke(t)?cke(e,t,n,r):{target:t,transitionEnd:r}}const dke=(e,t,n,r)=>{const i=rke(e,t,r);return t=i.target,r=i.transitionEnd,fke(e,t,n,r)},T3={current:null},XY={current:!1};function hke(){if(XY.current=!0,!!zk)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>T3.current=e.matches;e.addListener(t),t()}else T3.current=!1}function pke(e,t,n){const{willChange:r}=t;for(const i in t){const o=t[i],s=n[i];if(yi(o))e.addValue(i,o),dw(r)&&r.add(i);else if(yi(s))e.addValue(i,Lp(o,{owner:e})),dw(r)&&r.remove(i);else if(s!==o)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(o)}else{const a=e.getStaticValue(i);e.addValue(i,Lp(a!==void 0?a:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const DL=new WeakMap,KY=Object.keys(Wy),gke=KY.length,OL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],mke=UP.length;class yke{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>kt.render(this.render,!1,!0);const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=jk(n),this.isVariantNode=OG(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const f in c){const d=c[f];a[f]!==void 0&&yi(d)&&(d.set(a[f],!1),dw(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,DL.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),XY.current||hke(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:T3.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){DL.delete(this.current),this.projection&&this.projection.unmount(),Sl(this.notifyUpdate),Sl(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=kd.has(t),i=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&kt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,o){let s,a;for(let l=0;l<gke;l++){const u=KY[l],{isEnabled:c,Feature:f,ProjectionNode:d,MeasureLayout:h}=Wy[u];d&&(s=d),c(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:h}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||f&&Dh(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:d,layoutRoot:h})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<OL.length;r++){const i=OL[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=t["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=pke(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<mke;r++){const i=UP[r],o=this.props[i];(Vy(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Lp(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=KP(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!yi(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new sF),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class QY extends yke{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},o){let s=Fwe(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),s&&(s=i(s))),o){Mwe(this,r,s);const a=dke(this,r,s,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function vke(e){return window.getComputedStyle(e)}class bke extends QY{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(kd.has(n)){const r=tF(n);return r&&r.default||0}else{const r=vke(t),i=(zG(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return LY(t,n)}build(t,n,r,i){HP(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return XP(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;yi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){HG(t,n,r,i)}}class xke extends QY{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(kd.has(n)){const r=tF(n);return r&&r.default||0}return n=qG.has(n)?n:BP(n),t.getAttribute(n)}measureInstanceViewportBox(){return ln()}scrapeMotionValuesFromProps(t,n){return YG(t,n)}build(t,n,r,i){GP(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){GG(t,n,r,i)}mount(t){this.isSVGTag=YP(t.tagName),super.mount(t)}}const wke=(e,t)=>WP(e)?new xke(t,{enableHardwareAcceleration:!1}):new bke(t,{enableHardwareAcceleration:!0}),Ske={layout:{ProjectionNode:GY,MeasureLayout:BY}},kke={...Gwe,...p2e,...eke,...Ske},aF=kxe((e,t)=>t2e(e,t,kke,wke));function ZY(){const e=P.useRef(!1);return zP(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Cke(){const e=ZY(),[t,n]=P.useState(0),r=P.useCallback(()=>{e.current&&n(t+1)},[t]);return[P.useCallback(()=>kt.postRender(r),[r]),t]}class _ke extends P.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Eke({children:e,isPresent:t}){const n=P.useId(),r=P.useRef(null),i=P.useRef({width:0,height:0,top:0,left:0});return P.useInsertionEffect(()=>{const{width:o,height:s,top:a,left:l}=i.current;if(t||!r.current||!o||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),P.createElement(_ke,{isPresent:t,childRef:r,sizeRef:i},P.cloneElement(e,{ref:r}))}const E$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s})=>{const a=QP($ke),l=P.useId(),u=P.useMemo(()=>({id:l,initial:t,isPresent:n,custom:i,onExitComplete:c=>{a.set(c,!0);for(const f of a.values())if(!f)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),o?void 0:[n]);return P.useMemo(()=>{a.forEach((c,f)=>a.set(f,!1))},[n]),P.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),s==="popLayout"&&(e=P.createElement(Eke,{isPresent:n},e)),P.createElement(V1.Provider,{value:u},e)};function $ke(){return new Map}function Ake(e){return P.useEffect(()=>()=>e(),[])}const Jc=e=>e.key||"";function Tke(e,t){e.forEach(n=>{const r=Jc(n);t.set(r,n)})}function Mke(e){const t=[];return P.Children.forEach(e,n=>{P.isValidElement(n)&&t.push(n)}),t}const JY=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:s="sync"})=>{const a=P.useContext(VP).forceRender||Cke()[0],l=ZY(),u=Mke(e);let c=u;const f=P.useRef(new Map).current,d=P.useRef(c),h=P.useRef(new Map).current,p=P.useRef(!0);if(zP(()=>{p.current=!1,Tke(u,h),d.current=c}),Ake(()=>{p.current=!0,h.clear(),f.clear()}),p.current)return P.createElement(P.Fragment,null,c.map(v=>P.createElement(E$,{key:Jc(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:s},v)));c=[...c];const g=d.current.map(Jc),m=u.map(Jc),y=g.length;for(let v=0;v<y;v++){const b=g[v];m.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return s==="wait"&&f.size&&(c=[]),f.forEach((v,b)=>{if(m.indexOf(b)!==-1)return;const x=h.get(b);if(!x)return;const w=g.indexOf(b);let k=v;if(!k){const S=()=>{f.delete(b);const C=Array.from(h.keys()).filter(_=>!m.includes(_));if(C.forEach(_=>h.delete(_)),d.current=u.filter(_=>{const $=Jc(_);return $===b||C.includes($)}),!f.size){if(l.current===!1)return;a(),r&&r()}};k=P.createElement(E$,{key:Jc(x),isPresent:!1,onExitComplete:S,custom:t,presenceAffectsLayout:o,mode:s},x),f.set(b,k)}c.splice(w,0,k)}),c=c.map(v=>{const b=v.key;return f.has(b)?v:P.createElement(E$,{key:Jc(v),isPresent:!0,presenceAffectsLayout:o,mode:s},v)}),P.createElement(P.Fragment,null,f.size?c:c.map(v=>P.cloneElement(v)))};class Pke{constructor(){this.componentControls=new Set}subscribe(t){return this.componentControls.add(t),()=>this.componentControls.delete(t)}start(t,n){this.componentControls.forEach(r=>{r.start(t.nativeEvent||t,n)})}}const Fke=()=>new Pke;function Rke(){return QP(Fke)}var Dke={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let r=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},eX=P.memo(e=>{const{id:t,message:n,onCloseComplete:r,onRequestRemove:i,requestClose:o=!1,position:s="bottom",duration:a=5e3,containerStyle:l,motionVariants:u=Dke,toastSpacing:c="0.5rem"}=e,[f,d]=P.useState(a),h=mSe();PI(()=>{h||r==null||r()},[h]),PI(()=>{d(a)},[a]);const p=()=>d(null),g=()=>d(a),m=()=>{h&&i()};P.useEffect(()=>{h&&o&&i()},[h,o,i]),hxe(m,f);const y=P.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:c,...l}),[l,c]),v=P.useMemo(()=>fxe(s),[s]);return E.jsx(aF.div,{layout:!0,className:"chakra-toast",variants:u,initial:"initial",animate:"animate",exit:"exit",onHoverStart:p,onHoverEnd:g,custom:{position:s},style:v,children:E.jsx(Ae.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:y,children:Zs(n,{id:t,onClose:m})})})});eX.displayName="ToastComponent";function Oke(e,t){var n;const r=e??"bottom",o={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(n=o==null?void 0:o[t])!=null?n:r}var NL={path:E.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[E.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),E.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),E.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},mt=Fe((e,t)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:o=!1,children:s,className:a,__css:l,...u}=e,c=Xe("chakra-icon",a),f=Tl("Icon",e),d={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...l,...f},h={ref:t,focusable:o,className:c,__css:d},p=r??NL.viewBox;if(n&&typeof n!="string")return E.jsx(Ae.svg,{as:n,...h,...u});const g=s??NL.path;return E.jsx(Ae.svg,{verticalAlign:"middle",viewBox:p,...h,...u,children:g})});mt.displayName="Icon";function Nke(e){return E.jsx(mt,{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function Ike(e){return E.jsx(mt,{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function IL(e){return E.jsx(mt,{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var Lke=kfe({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),lF=Fe((e,t)=>{const n=Tl("Spinner",e),{label:r="Loading...",thickness:i="2px",speed:o="0.45s",emptyColor:s="transparent",className:a,...l}=Er(e),u=Xe("chakra-spinner",a),c={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:s,borderLeftColor:s,animation:`${Lke} ${o} linear infinite`,...n};return E.jsx(Ae.div,{ref:t,__css:c,className:u,...l,children:r&&E.jsx(Ae.span,{srOnly:!0,children:r})})});lF.displayName="Spinner";var[zke,uF]=tr({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[Bke,cF]=tr({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),tX={info:{icon:Ike,colorScheme:"blue"},warning:{icon:IL,colorScheme:"orange"},success:{icon:Nke,colorScheme:"green"},error:{icon:IL,colorScheme:"red"},loading:{icon:lF,colorScheme:"blue"}};function jke(e){return tX[e].colorScheme}function Uke(e){return tX[e].icon}var nX=Fe(function(t,n){const r=cF(),{status:i}=uF(),o={display:"inline",...r.description};return E.jsx(Ae.div,{ref:n,"data-status":i,...t,className:Xe("chakra-alert__desc",t.className),__css:o})});nX.displayName="AlertDescription";function rX(e){const{status:t}=uF(),n=Uke(t),r=cF(),i=t==="loading"?r.spinner:r.icon;return E.jsx(Ae.span,{display:"inherit","data-status":t,...e,className:Xe("chakra-alert__icon",e.className),__css:i,children:e.children||E.jsx(n,{h:"100%",w:"100%"})})}rX.displayName="AlertIcon";var iX=Fe(function(t,n){const r=cF(),{status:i}=uF();return E.jsx(Ae.div,{ref:n,"data-status":i,...t,className:Xe("chakra-alert__title",t.className),__css:r.title})});iX.displayName="AlertTitle";var oX=Fe(function(t,n){var r;const{status:i="info",addRole:o=!0,...s}=Er(t),a=(r=t.colorScheme)!=null?r:jke(i),l=mc("Alert",{...t,colorScheme:a}),u={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...l.container};return E.jsx(zke,{value:{status:i},children:E.jsx(Bke,{value:l,children:E.jsx(Ae.div,{"data-status":i,role:o?"alert":void 0,ref:n,...s,className:Xe("chakra-alert",t.className),__css:u})})})});oX.displayName="Alert";function Vke(e){return E.jsx(mt,{focusable:"false","aria-hidden":!0,...e,children:E.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var sX=Fe(function(t,n){const r=Tl("CloseButton",t),{children:i,isDisabled:o,__css:s,...a}=Er(t),l={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return E.jsx(Ae.button,{type:"button","aria-label":"Close",ref:n,disabled:o,__css:{...l,...r,...s},...a,children:i||E.jsx(Vke,{width:"1em",height:"1em"})})});sX.displayName="CloseButton";var Wke={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Ys=Hke(Wke);function Hke(e){let t=e;const n=new Set,r=i=>{t=i(t),n.forEach(o=>o())};return{getState:()=>t,subscribe:i=>(n.add(i),()=>{r(()=>e),n.delete(i)}),removeToast:(i,o)=>{r(s=>({...s,[o]:s[o].filter(a=>a.id!=i)}))},notify:(i,o)=>{const s=qke(i,o),{position:a,id:l}=s;return r(u=>{var c,f;const h=a.includes("top")?[s,...(c=u[a])!=null?c:[]]:[...(f=u[a])!=null?f:[],s];return{...u,[a]:h}}),l},update:(i,o)=>{i&&r(s=>{const a={...s},{position:l,index:u}=MI(a,i);return l&&u!==-1&&(a[l][u]={...a[l][u],...o,message:aX(o)}),a})},closeAll:({positions:i}={})=>{r(o=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((l,u)=>(l[u]=o[u].map(c=>({...c,requestClose:!0})),l),{...o}))},close:i=>{r(o=>{const s=PG(o,i);return s?{...o,[s]:o[s].map(a=>a.id==i?{...a,requestClose:!0}:a)}:o})},isActive:i=>!!MI(Ys.getState(),i).position}}var LL=0;function qke(e,t={}){var n,r;LL+=1;const i=(n=t.id)!=null?n:LL,o=(r=t.position)!=null?r:"bottom";return{id:i,message:e,position:o,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>Ys.removeToast(String(i),o),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var Gke=e=>{const{status:t,variant:n="solid",id:r,title:i,isClosable:o,onClose:s,description:a,colorScheme:l,icon:u}=e,c=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return E.jsxs(oX,{addRole:!1,status:t,variant:n,id:c==null?void 0:c.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[E.jsx(rX,{children:u}),E.jsxs(Ae.div,{flex:"1",maxWidth:"100%",children:[i&&E.jsx(iX,{id:c==null?void 0:c.title,children:i}),a&&E.jsx(nX,{id:c==null?void 0:c.description,display:"block",children:a})]}),o&&E.jsx(sX,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function aX(e={}){const{render:t,toastComponent:n=Gke}=e;return i=>typeof t=="function"?t({...i,...e}):E.jsx(n,{...i,...e})}function Yke(e,t){const n=i=>{var o;return{...t,...i,position:Oke((o=i==null?void 0:i.position)!=null?o:t==null?void 0:t.position,e)}},r=i=>{const o=n(i),s=aX(o);return Ys.notify(s,o)};return r.update=(i,o)=>{Ys.update(i,n(o))},r.promise=(i,o)=>{const s=r({...o.loading,status:"loading",duration:null});i.then(a=>r.update(s,{status:"success",duration:5e3,...Zs(o.success,a)})).catch(a=>r.update(s,{status:"error",duration:5e3,...Zs(o.error,a)}))},r.closeAll=Ys.closeAll,r.close=Ys.close,r.isActive=Ys.isActive,r}var[Xke,Kke]=tr({name:"ToastOptionsContext",strict:!1}),Qke=e=>{const t=P.useSyncExternalStore(Ys.subscribe,Ys.getState,Ys.getState),{motionVariants:n,component:r=eX,portalProps:i}=e,s=Object.keys(t).map(a=>{const l=t[a];return E.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${a}`,id:`chakra-toast-manager-${a}`,style:dxe(a),children:E.jsx(JY,{initial:!1,children:l.map(u=>E.jsx(r,{motionVariants:n,...u},u.id))})},a)});return E.jsx(B1,{...i,children:s})};function Zke(e){const{theme:t}=tG(),n=Kke();return P.useMemo(()=>Yke(t.direction,{...n,...e}),[e,t.direction,n])}var Jke=e=>function({children:n,theme:r=e,toastOptions:i,...o}){return E.jsxs(uxe,{theme:r,...o,children:[E.jsx(Xke,{value:i==null?void 0:i.defaultOptions,children:n}),E.jsx(Qke,{...i})]})},eCe=Jke(SG),tCe=Object.defineProperty,nCe=(e,t,n)=>t in e?tCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vt=(e,t,n)=>(nCe(e,typeof t!="symbol"?t+"":t,n),n);function zL(e){return e.sort((t,n)=>{const r=t.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var rCe=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function BL(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function jL(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var M3=typeof window<"u"?P.useLayoutEffect:P.useEffect,pw=e=>e,iCe=class{constructor(){Vt(this,"descendants",new Map),Vt(this,"register",e=>{if(e!=null)return rCe(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),Vt(this,"unregister",e=>{this.descendants.delete(e);const t=zL(Array.from(this.descendants.keys()));this.assignIndex(t)}),Vt(this,"destroy",()=>{this.descendants.clear()}),Vt(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})}),Vt(this,"count",()=>this.descendants.size),Vt(this,"enabledCount",()=>this.enabledValues().length),Vt(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index)),Vt(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),Vt(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),Vt(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),Vt(this,"first",()=>this.item(0)),Vt(this,"firstEnabled",()=>this.enabledItem(0)),Vt(this,"last",()=>this.item(this.descendants.size-1)),Vt(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),Vt(this,"indexOf",e=>{var t,n;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1}),Vt(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),Vt(this,"next",(e,t=!0)=>{const n=BL(e,this.count(),t);return this.item(n)}),Vt(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=BL(r,this.enabledCount(),t);return this.enabledItem(i)}),Vt(this,"prev",(e,t=!0)=>{const n=jL(e,this.count()-1,t);return this.item(n)}),Vt(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=jL(r,this.enabledCount()-1,t);return this.enabledItem(i)}),Vt(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),r=zL(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(r)})}};function oCe(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function Qf(...e){return t=>{e.forEach(n=>{oCe(n,t)})}}function sCe(...e){return P.useMemo(()=>Qf(...e),e)}function aCe(){const e=P.useRef(new iCe);return M3(()=>()=>e.current.destroy()),e.current}var[lCe,lX]=tr({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function uCe(e){const t=lX(),[n,r]=P.useState(-1),i=P.useRef(null);M3(()=>()=>{i.current&&t.unregister(i.current)},[]),M3(()=>{if(!i.current)return;const s=Number(i.current.dataset.index);n!=s&&!Number.isNaN(s)&&r(s)});const o=pw(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(i.current),register:Qf(o,i)}}function uX(){return[pw(lCe),()=>pw(lX()),()=>aCe(),i=>uCe(i)]}var[cCe,Hk]=tr({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[fCe,fF]=tr({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[dCe,Vrt,hCe,pCe]=uX(),cX=Fe(function(t,n){const{getButtonProps:r}=fF(),i=r(t,n),s={display:"flex",alignItems:"center",width:"100%",outline:0,...Hk().button};return E.jsx(Ae.button,{...i,className:Xe("chakra-accordion__button",t.className),__css:s})});cX.displayName="AccordionButton";function fX(e){const{value:t,defaultValue:n,onChange:r,shouldUpdate:i=(d,h)=>d!==h}=e,o=Kx(r),s=Kx(i),[a,l]=P.useState(n),u=t!==void 0,c=u?t:a,f=Kx(d=>{const p=typeof d=="function"?d(c):d;s(c,p)&&(u||l(p),o(p))},[u,o,c,s]);return[c,f]}function gCe(e){const{onChange:t,defaultIndex:n,index:r,allowMultiple:i,allowToggle:o,...s}=e;vCe(e),bCe(e);const a=hCe(),[l,u]=P.useState(-1);P.useEffect(()=>()=>{u(-1)},[]);const[c,f]=fX({value:r,defaultValue(){return i?n??[]:n??-1},onChange:t});return{index:c,setIndex:f,htmlProps:s,getAccordionItemProps:h=>{let p=!1;return h!==null&&(p=Array.isArray(c)?c.includes(h):c===h),{isOpen:p,onChange:m=>{if(h!==null)if(i&&Array.isArray(c)){const y=m?c.concat(h):c.filter(v=>v!==h);f(y)}else m?f(h):o&&f(-1)}}},focusedIndex:l,setFocusedIndex:u,descendants:a}}var[mCe,dF]=tr({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function yCe(e){const{isDisabled:t,isFocusable:n,id:r,...i}=e,{getAccordionItemProps:o,setFocusedIndex:s}=dF(),a=P.useRef(null),l=P.useId(),u=r??l,c=`accordion-button-${u}`,f=`accordion-panel-${u}`;xCe(e);const{register:d,index:h,descendants:p}=pCe({disabled:t&&!n}),{isOpen:g,onChange:m}=o(h===-1?null:h);wCe({isOpen:g,isDisabled:t});const y=()=>{m==null||m(!0)},v=()=>{m==null||m(!1)},b=P.useCallback(()=>{m==null||m(!g),s(h)},[h,s,g,m]),x=P.useCallback(C=>{const $={ArrowDown:()=>{const A=p.nextEnabled(h);A==null||A.node.focus()},ArrowUp:()=>{const A=p.prevEnabled(h);A==null||A.node.focus()},Home:()=>{const A=p.firstEnabled();A==null||A.node.focus()},End:()=>{const A=p.lastEnabled();A==null||A.node.focus()}}[C.key];$&&(C.preventDefault(),$(C))},[p,h]),w=P.useCallback(()=>{s(h)},[s,h]),k=P.useCallback(function(_={},$=null){return{..._,type:"button",ref:Qf(d,a,$),id:c,disabled:!!t,"aria-expanded":!!g,"aria-controls":f,onClick:Iu(_.onClick,b),onFocus:Iu(_.onFocus,w),onKeyDown:Iu(_.onKeyDown,x)}},[c,t,g,b,w,x,f,d]),S=P.useCallback(function(_={},$=null){return{..._,ref:$,role:"region",id:f,"aria-labelledby":c,hidden:!g}},[c,g,f]);return{isOpen:g,isDisabled:t,isFocusable:n,onOpen:y,onClose:v,getButtonProps:k,getPanelProps:S,htmlProps:i}}function vCe(e){const t=e.index||e.defaultIndex,n=t!=null&&!Array.isArray(t)&&e.allowMultiple;j1({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof t},`})}function bCe(e){j1({condition:!!(e.allowMultiple&&e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function xCe(e){j1({condition:!!(e.isFocusable&&!e.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function wCe(e){j1({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}function dX(e){const{isOpen:t,isDisabled:n}=fF(),{reduceMotion:r}=dF(),i=Xe("chakra-accordion__icon",e.className),o=Hk(),s={opacity:n?.4:1,transform:t?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center",...o.icon};return E.jsx(mt,{viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:s,...e,children:E.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}dX.displayName="AccordionIcon";var hX=Fe(function(t,n){const{children:r,className:i}=t,{htmlProps:o,...s}=yCe(t),l={...Hk().container,overflowAnchor:"none"},u=P.useMemo(()=>s,[s]);return E.jsx(fCe,{value:u,children:E.jsx(Ae.div,{ref:n,...o,className:Xe("chakra-accordion__item",i),__css:l,children:typeof r=="function"?r({isExpanded:!!s.isOpen,isDisabled:!!s.isDisabled}):r})})});hX.displayName="AccordionItem";var Fb={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},UL={enter:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.enter}),exit:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.exit})},SCe=e=>e!=null&&parseInt(e.toString(),10)>0,VL={exit:{height:{duration:.2,ease:Fb.ease},opacity:{duration:.3,ease:Fb.ease}},enter:{height:{duration:.3,ease:Fb.ease},opacity:{duration:.4,ease:Fb.ease}}},kCe={exit:({animateOpacity:e,startingHeight:t,transition:n,transitionEnd:r,delay:i})=>{var o;return{...e&&{opacity:SCe(t)?1:0},height:t,transitionEnd:r==null?void 0:r.exit,transition:(o=n==null?void 0:n.exit)!=null?o:UL.exit(VL.exit,i)}},enter:({animateOpacity:e,endingHeight:t,transition:n,transitionEnd:r,delay:i})=>{var o;return{...e&&{opacity:1},height:t,transitionEnd:r==null?void 0:r.enter,transition:(o=n==null?void 0:n.enter)!=null?o:UL.enter(VL.enter,i)}}},pX=P.forwardRef((e,t)=>{const{in:n,unmountOnExit:r,animateOpacity:i=!0,startingHeight:o=0,endingHeight:s="auto",style:a,className:l,transition:u,transitionEnd:c,...f}=e,[d,h]=P.useState(!1);P.useEffect(()=>{const v=setTimeout(()=>{h(!0)});return()=>clearTimeout(v)},[]),j1({condition:Number(o)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const p=parseFloat(o.toString())>0,g={startingHeight:o,endingHeight:s,animateOpacity:i,transition:d?u:{enter:{duration:0}},transitionEnd:{enter:c==null?void 0:c.enter,exit:r?c==null?void 0:c.exit:{...c==null?void 0:c.exit,display:p?"block":"none"}}},m=r?n:!0,y=n||r?"enter":"exit";return E.jsx(JY,{initial:!1,custom:g,children:m&&E.jsx(aF.div,{ref:t,...f,className:Xe("chakra-collapse",l),style:{overflow:"hidden",display:"block",...a},custom:g,variants:kCe,initial:r?"exit":!1,animate:y,exit:"exit"})})});pX.displayName="Collapse";var gX=Fe(function(t,n){const{className:r,motionProps:i,...o}=t,{reduceMotion:s}=dF(),{getPanelProps:a,isOpen:l}=fF(),u=a(o,n),c=Xe("chakra-accordion__panel",r),f=Hk();s||delete u.hidden;const d=E.jsx(Ae.div,{...u,__css:f.panel,className:c});return s?d:E.jsx(pX,{in:l,...i,children:d})});gX.displayName="AccordionPanel";var mX=Fe(function({children:t,reduceMotion:n,...r},i){const o=mc("Accordion",r),s=Er(r),{htmlProps:a,descendants:l,...u}=gCe(s),c=P.useMemo(()=>({...u,reduceMotion:!!n}),[u,n]);return E.jsx(dCe,{value:l,children:E.jsx(mCe,{value:c,children:E.jsx(cCe,{value:o,children:E.jsx(Ae.div,{ref:i,...a,className:Xe("chakra-accordion",r.className),__css:o.root,children:t})})})})});mX.displayName="Accordion";var P3=Fe(function(t,n){const{htmlWidth:r,htmlHeight:i,alt:o,...s}=t;return E.jsx("img",{width:r,height:i,ref:n,alt:o,...s})});P3.displayName="NativeImage";function CCe(e){const{loading:t,src:n,srcSet:r,onLoad:i,onError:o,crossOrigin:s,sizes:a,ignoreFallback:l}=e,[u,c]=P.useState("pending");P.useEffect(()=>{c(n?"loading":"pending")},[n]);const f=P.useRef(),d=P.useCallback(()=>{if(!n)return;h();const p=new Image;p.src=n,s&&(p.crossOrigin=s),r&&(p.srcset=r),a&&(p.sizes=a),t&&(p.loading=t),p.onload=g=>{h(),c("loaded"),i==null||i(g)},p.onerror=g=>{h(),c("failed"),o==null||o(g)},f.current=p},[n,s,r,a,i,o,t]),h=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return Ap(()=>{if(!l)return u==="loading"&&d(),()=>{h()}},[u,d,l]),l?"loaded":u}var _Ce=(e,t)=>e!=="loaded"&&t==="beforeLoadOrError"||e==="failed"&&t==="onError";function ECe(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}var yX=Fe(function(t,n){const{fallbackSrc:r,fallback:i,src:o,srcSet:s,align:a,fit:l,loading:u,ignoreFallback:c,crossOrigin:f,fallbackStrategy:d="beforeLoadOrError",referrerPolicy:h,...p}=t,g=r!==void 0||i!==void 0,m=u!=null||c||!g,y=CCe({...t,crossOrigin:f,ignoreFallback:m}),v=_Ce(y,d),b={ref:n,objectFit:l,objectPosition:a,...m?p:ECe(p,["onError","onLoad"])};return v?i||E.jsx(Ae.img,{as:P3,className:"chakra-image__placeholder",src:r,...b}):E.jsx(Ae.img,{as:P3,src:o,srcSet:s,crossOrigin:f,loading:u,referrerPolicy:h,className:"chakra-image",...b})});yX.displayName="Image";function qk(e){return P.Children.toArray(e).filter(t=>P.isValidElement(t))}var[Wrt,$Ce]=tr({strict:!1,name:"ButtonGroupContext"});function ACe(e){const[t,n]=P.useState(!e);return{ref:P.useCallback(o=>{o&&n(o.tagName==="BUTTON")},[]),type:t?"button":void 0}}function F3(e){const{children:t,className:n,...r}=e,i=P.isValidElement(t)?P.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,o=Xe("chakra-button__icon",n);return E.jsx(Ae.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:o,children:i})}F3.displayName="ButtonIcon";function R3(e){const{label:t,placement:n,spacing:r="0.5rem",children:i=E.jsx(lF,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:s,...a}=e,l=Xe("chakra-button__spinner",o),u=n==="start"?"marginEnd":"marginStart",c=P.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[u]:t?r:0,fontSize:"1em",lineHeight:"normal",...s}),[s,t,u,r]);return E.jsx(Ae.div,{className:l,...a,__css:c,children:i})}R3.displayName="ButtonSpinner";var yu=Fe((e,t)=>{const n=$Ce(),r=Tl("Button",{...n,...e}),{isDisabled:i=n==null?void 0:n.isDisabled,isLoading:o,isActive:s,children:a,leftIcon:l,rightIcon:u,loadingText:c,iconSpacing:f="0.5rem",type:d,spinner:h,spinnerPlacement:p="start",className:g,as:m,...y}=Er(e),v=P.useMemo(()=>{const k={...r==null?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:k}}},[r,n]),{ref:b,type:x}=ACe(m),w={rightIcon:u,leftIcon:l,iconSpacing:f,children:a};return E.jsxs(Ae.button,{ref:sCe(t,b),as:m,type:d??x,"data-active":co(s),"data-loading":co(o),__css:v,className:Xe("chakra-button",g),...y,disabled:i||o,children:[o&&p==="start"&&E.jsx(R3,{className:"chakra-button__spinner--start",label:c,placement:"start",spacing:f,children:h}),o?c||E.jsx(Ae.span,{opacity:0,children:E.jsx(WL,{...w})}):E.jsx(WL,{...w}),o&&p==="end"&&E.jsx(R3,{className:"chakra-button__spinner--end",label:c,placement:"end",spacing:f,children:h})]})});yu.displayName="Button";function WL(e){const{leftIcon:t,rightIcon:n,children:r,iconSpacing:i}=e;return E.jsxs(E.Fragment,{children:[t&&E.jsx(F3,{marginEnd:i,children:t}),r,n&&E.jsx(F3,{marginStart:i,children:n})]})}var vu=Fe((e,t)=>{const{icon:n,children:r,isRound:i,"aria-label":o,...s}=e,a=n||r,l=P.isValidElement(a)?P.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return E.jsx(yu,{padding:"0",borderRadius:i?"full":void 0,ref:t,"aria-label":o,...s,children:l})});vu.displayName="IconButton";var[TCe,MCe]=tr({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[PCe,vX]=tr({strict:!1,name:"FormControlContext"});function FCe(e){const{id:t,isRequired:n,isInvalid:r,isDisabled:i,isReadOnly:o,...s}=e,a=P.useId(),l=t||`field-${a}`,u=`${l}-label`,c=`${l}-feedback`,f=`${l}-helptext`,[d,h]=P.useState(!1),[p,g]=P.useState(!1),[m,y]=P.useState(!1),v=P.useCallback((S={},C=null)=>({id:f,...S,ref:Qf(C,_=>{_&&g(!0)})}),[f]),b=P.useCallback((S={},C=null)=>({...S,ref:C,"data-focus":co(m),"data-disabled":co(i),"data-invalid":co(r),"data-readonly":co(o),id:S.id!==void 0?S.id:u,htmlFor:S.htmlFor!==void 0?S.htmlFor:l}),[l,i,m,r,o,u]),x=P.useCallback((S={},C=null)=>({id:c,...S,ref:Qf(C,_=>{_&&h(!0)}),"aria-live":"polite"}),[c]),w=P.useCallback((S={},C=null)=>({...S,...s,ref:C,role:"group","data-focus":co(m),"data-disabled":co(i),"data-invalid":co(r),"data-readonly":co(o)}),[s,i,m,r,o]),k=P.useCallback((S={},C=null)=>({...S,ref:C,role:"presentation","aria-hidden":!0,children:S.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!o,isDisabled:!!i,isFocused:!!m,onFocus:()=>y(!0),onBlur:()=>y(!1),hasFeedbackText:d,setHasFeedbackText:h,hasHelpText:p,setHasHelpText:g,id:l,labelId:u,feedbackId:c,helpTextId:f,htmlProps:s,getHelpTextProps:v,getErrorMessageProps:x,getRootProps:w,getLabelProps:b,getRequiredIndicatorProps:k}}var bX=Fe(function(t,n){const r=mc("Form",t),i=Er(t),{getRootProps:o,htmlProps:s,...a}=FCe(i),l=Xe("chakra-form-control",t.className);return E.jsx(PCe,{value:a,children:E.jsx(TCe,{value:r,children:E.jsx(Ae.div,{...o({},n),className:l,__css:r.container})})})});bX.displayName="FormControl";var RCe=Fe(function(t,n){const r=vX(),i=MCe(),o=Xe("chakra-form__helper-text",t.className);return E.jsx(Ae.div,{...r==null?void 0:r.getHelpTextProps(t,n),__css:i.helperText,className:o})});RCe.displayName="FormHelperText";function xX(e){const{isDisabled:t,isInvalid:n,isReadOnly:r,isRequired:i,...o}=DCe(e);return{...o,disabled:t,readOnly:r,required:i,"aria-invalid":XE(n),"aria-required":XE(i),"aria-readonly":XE(r)}}function DCe(e){var t,n,r;const i=vX(),{id:o,disabled:s,readOnly:a,required:l,isRequired:u,isInvalid:c,isReadOnly:f,isDisabled:d,onFocus:h,onBlur:p,...g}=e,m=e["aria-describedby"]?[e["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&m.push(i.feedbackId),i!=null&&i.hasHelpText&&m.push(i.helpTextId),{...g,"aria-describedby":m.join(" ")||void 0,id:o??(i==null?void 0:i.id),isDisabled:(t=s??d)!=null?t:i==null?void 0:i.isDisabled,isReadOnly:(n=a??f)!=null?n:i==null?void 0:i.isReadOnly,isRequired:(r=l??u)!=null?r:i==null?void 0:i.isRequired,isInvalid:c??(i==null?void 0:i.isInvalid),onFocus:Iu(i==null?void 0:i.onFocus,h),onBlur:Iu(i==null?void 0:i.onBlur,p)}}var wX={exports:{}},OCe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",NCe=OCe,ICe=NCe;function SX(){}function kX(){}kX.resetWarningCache=SX;var LCe=function(){function e(r,i,o,s,a,l){if(l!==ICe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:kX,resetWarningCache:SX};return n.PropTypes=n,n};wX.exports=LCe();var zCe=wX.exports;const HL=dc(zCe);var[BCe,jCe]=tr({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),CX=Fe(function(t,n){const r=mc("Input",t),{children:i,className:o,...s}=Er(t),a=Xe("chakra-input__group",o),l={},u=qk(i),c=r.field;u.forEach(d=>{var h,p;r&&(c&&d.type.id==="InputLeftElement"&&(l.paddingStart=(h=c.height)!=null?h:c.h),c&&d.type.id==="InputRightElement"&&(l.paddingEnd=(p=c.height)!=null?p:c.h),d.type.id==="InputRightAddon"&&(l.borderEndRadius=0),d.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const f=u.map(d=>{var h,p;const g=TG({size:((h=d.props)==null?void 0:h.size)||t.size,variant:((p=d.props)==null?void 0:p.variant)||t.variant});return d.type.id!=="Input"?P.cloneElement(d,g):P.cloneElement(d,Object.assign(g,l,d.props))});return E.jsx(Ae.div,{className:a,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...s,children:E.jsx(BCe,{value:r,children:f})})});CX.displayName="InputGroup";var UCe=Ae("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),Gk=Fe(function(t,n){var r,i;const{placement:o="left",...s}=t,a=jCe(),l=a.field,c={[o==="left"?"insetStart":"insetEnd"]:"0",width:(r=l==null?void 0:l.height)!=null?r:l==null?void 0:l.h,height:(i=l==null?void 0:l.height)!=null?i:l==null?void 0:l.h,fontSize:l==null?void 0:l.fontSize,...a.element};return E.jsx(UCe,{ref:n,__css:c,...s})});Gk.id="InputElement";Gk.displayName="InputElement";var _X=Fe(function(t,n){const{className:r,...i}=t,o=Xe("chakra-input__left-element",r);return E.jsx(Gk,{ref:n,placement:"left",className:o,...i})});_X.id="InputLeftElement";_X.displayName="InputLeftElement";var hF=Fe(function(t,n){const{className:r,...i}=t,o=Xe("chakra-input__right-element",r);return E.jsx(Gk,{ref:n,placement:"right",className:o,...i})});hF.id="InputRightElement";hF.displayName="InputRightElement";var qy=Fe(function(t,n){const{htmlSize:r,...i}=t,o=mc("Input",i),s=Er(i),a=xX(s),l=Xe("chakra-input",t.className);return E.jsx(Ae.input,{size:r,...a,__css:o.field,ref:n,className:l})});qy.displayName="Input";qy.id="Input";var Jx=Fe(function(t,n){const r=Tl("Link",t),{className:i,isExternal:o,...s}=Er(t);return E.jsx(Ae.a,{target:o?"_blank":void 0,rel:o?"noopener":void 0,ref:n,className:Xe("chakra-link",i),...s,__css:r})});Jx.displayName="Link";var[VCe,EX]=tr({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),pF=Fe(function(t,n){const r=mc("List",t),{children:i,styleType:o="none",stylePosition:s,spacing:a,...l}=Er(t),u=qk(i),f=a?{["& > *:not(style) ~ *:not(style)"]:{mt:a}}:{};return E.jsx(VCe,{value:r,children:E.jsx(Ae.ul,{ref:n,listStyleType:o,listStylePosition:s,role:"list",__css:{...r.container,...f},...l,children:u})})});pF.displayName="List";var $X=Fe((e,t)=>{const{as:n,...r}=e;return E.jsx(pF,{ref:t,as:"ol",styleType:"decimal",marginStart:"1em",...r})});$X.displayName="OrderedList";var WCe=Fe(function(t,n){const{as:r,...i}=t;return E.jsx(pF,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...i})});WCe.displayName="UnorderedList";var AX=Fe(function(t,n){const r=EX();return E.jsx(Ae.li,{ref:n,...t,__css:r.item})});AX.displayName="ListItem";var HCe=Fe(function(t,n){const r=EX();return E.jsx(mt,{ref:n,role:"presentation",...t,__css:r.icon})});HCe.displayName="ListIcon";var ey=Fe(function(t,n){const{templateAreas:r,gap:i,rowGap:o,columnGap:s,column:a,row:l,autoFlow:u,autoRows:c,templateRows:f,autoColumns:d,templateColumns:h,...p}=t,g={display:"grid",gridTemplateAreas:r,gridGap:i,gridRowGap:o,gridColumnGap:s,gridAutoColumns:d,gridColumn:a,gridRow:l,gridAutoFlow:u,gridAutoRows:c,gridTemplateRows:f,gridTemplateColumns:h};return E.jsx(Ae.div,{ref:n,__css:g,...p})});ey.displayName="Grid";var TX=Object.freeze(["base","sm","md","lg","xl","2xl"]);function qCe(e,t){return Array.isArray(e)?e.map(n=>n===null?null:t(n)):hi(e)?Object.keys(e).reduce((n,r)=>(n[r]=t(e[r]),n),{}):e!=null?t(e):null}function GCe(e,t=TX){const n={};return e.forEach((r,i)=>{const o=t[i];r!=null&&(n[o]=r)}),n}var MX=Ae("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});MX.displayName="Spacer";var un=Fe(function(t,n){const r=Tl("Text",t),{className:i,align:o,decoration:s,casing:a,...l}=Er(t),u=TG({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return E.jsx(Ae.p,{ref:n,className:Xe("chakra-text",t.className),...u,...l,__css:r})});un.displayName="Text";var PX=e=>E.jsx(Ae.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});PX.displayName="StackItem";function YCe(e){const{spacing:t,direction:n}=e,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":qCe(n,i=>r[i])}}var FX=Fe((e,t)=>{const{isInline:n,direction:r,align:i,justify:o,spacing:s="0.5rem",wrap:a,children:l,divider:u,className:c,shouldWrapChildren:f,...d}=e,h=n?"row":r??"column",p=P.useMemo(()=>YCe({spacing:s,direction:h}),[s,h]),g=!!u,m=!f&&!g,y=P.useMemo(()=>{const b=qk(l);return m?b:b.map((x,w)=>{const k=typeof x.key<"u"?x.key:w,S=w+1===b.length,_=f?E.jsx(PX,{children:x},k):x;if(!g)return _;const $=P.cloneElement(u,{__css:p}),A=S?null:$;return E.jsxs(P.Fragment,{children:[_,A]},k)})},[u,p,g,m,f,l]),v=Xe("chakra-stack",c);return E.jsx(Ae.div,{ref:t,display:"flex",alignItems:i,justifyContent:o,flexDirection:h,flexWrap:a,gap:g?void 0:s,className:v,...d,children:y})});FX.displayName="Stack";var Y1=Fe((e,t)=>E.jsx(FX,{align:"center",...e,direction:"column",ref:t}));Y1.displayName="VStack";var X1=Fe(function(t,n){const r=Tl("Heading",t),{className:i,...o}=Er(t);return E.jsx(Ae.h2,{ref:n,className:Xe("chakra-heading",t.className),...o,__css:r})});X1.displayName="Heading";var RX=Fe(function(t,n){const r=Tl("Badge",t),{className:i,...o}=Er(t);return E.jsx(Ae.span,{ref:n,className:Xe("chakra-badge",t.className),...o,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...r}})});RX.displayName="Badge";var Bp=Ae("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Bp.displayName="Center";var XCe={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Fe(function(t,n){const{axis:r="both",...i}=t;return E.jsx(Ae.div,{ref:n,__css:XCe[r],...i,position:"absolute"})});var gF=Fe(function(t,n){const{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:o,borderRightWidth:s,borderWidth:a,borderStyle:l,borderColor:u,...c}=Tl("Divider",t),{className:f,orientation:d="horizontal",__css:h,...p}=Er(t),g={vertical:{borderLeftWidth:r||s||a||"1px",height:"100%"},horizontal:{borderBottomWidth:i||o||a||"1px",width:"100%"}};return E.jsx(Ae.hr,{ref:n,"aria-orientation":d,...p,__css:{...c,border:"0",borderColor:u,borderStyle:l,...g[d],...h},className:Xe("chakra-divider",f)})});gF.displayName="Divider";var Xt=Fe(function(t,n){const{direction:r,align:i,justify:o,wrap:s,basis:a,grow:l,shrink:u,...c}=t,f={display:"flex",flexDirection:r,alignItems:i,justifyContent:o,flexWrap:s,flexBasis:a,flexGrow:l,flexShrink:u};return E.jsx(Ae.div,{ref:n,__css:f,...c})});Xt.displayName="Flex";function KCe(e,t={}){const{ssr:n=!0,fallback:r}=t,{getWindow:i}=lxe(),o=Array.isArray(e)?e:[e];let s=Array.isArray(r)?r:[r];s=s.filter(u=>u!=null);const[a,l]=P.useState(()=>o.map((u,c)=>({media:u,matches:n?!!s[c]:i().matchMedia(u).matches})));return P.useEffect(()=>{const u=i();l(o.map(d=>({media:d,matches:u.matchMedia(d).matches})));const c=o.map(d=>u.matchMedia(d)),f=d=>{l(h=>h.slice().map(p=>p.media===d.media?{...p,matches:d.matches}:p))};return c.forEach(d=>{typeof d.addListener=="function"?d.addListener(f):d.addEventListener("change",f)}),()=>{c.forEach(d=>{typeof d.removeListener=="function"?d.removeListener(f):d.removeEventListener("change",f)})}},[i]),a.map(u=>u.matches)}function QCe(e,t,n=TX){let r=Object.keys(e).indexOf(t);if(r!==-1)return e[t];let i=n.indexOf(t);for(;i>=0;){const o=n[i];if(e.hasOwnProperty(o)){r=i;break}i-=1}if(r!==-1){const o=n[r];return e[o]}}function ZCe(e){var t,n;const r=hi(e)?e:{fallback:e??"base"},o=AP().__breakpoints.details.map(({minMaxQuery:u,breakpoint:c})=>({breakpoint:c,query:u.replace("@media screen and ","")})),s=o.map(u=>u.breakpoint===r.fallback),l=KCe(o.map(u=>u.query),{fallback:s,ssr:r.ssr}).findIndex(u=>u==!0);return(n=(t=o[l])==null?void 0:t.breakpoint)!=null?n:r.fallback}function dh(e,t){var n;const r=hi(t)?t:{fallback:"base"},i=ZCe(r),o=AP();if(!i)return;const s=Array.from(((n=o.__breakpoints)==null?void 0:n.keys)||[]),a=Array.isArray(e)?Object.fromEntries(Object.entries(GCe(e,s)).map(([l,u])=>[l,u])):e;return QCe(a,i,s)}function JCe(){const e=P.useRef(new Map),t=e.current,n=P.useCallback((i,o,s,a)=>{e.current.set(s,{type:o,el:i,options:a}),i.addEventListener(o,s,a)},[]),r=P.useCallback((i,o,s,a)=>{i.removeEventListener(o,s,a),e.current.delete(s)},[]);return P.useEffect(()=>()=>{t.forEach((i,o)=>{r(i.el,i.type,o,i.options)})},[r,t]),{add:n,remove:r}}function $$(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function e_e(e={}){const{ref:t,isDisabled:n,isFocusable:r,clickOnEnter:i=!0,clickOnSpace:o=!0,onMouseDown:s,onMouseUp:a,onClick:l,onKeyDown:u,onKeyUp:c,tabIndex:f,onMouseOver:d,onMouseLeave:h,...p}=e,[g,m]=P.useState(!0),[y,v]=P.useState(!1),b=JCe(),x=I=>{I&&I.tagName!=="BUTTON"&&m(!1)},w=g?f:f||0,k=n&&!r,S=P.useCallback(I=>{if(n){I.stopPropagation(),I.preventDefault();return}I.currentTarget.focus(),l==null||l(I)},[n,l]),C=P.useCallback(I=>{y&&$$(I)&&(I.preventDefault(),I.stopPropagation(),v(!1),b.remove(document,"keyup",C,!1))},[y,b]),_=P.useCallback(I=>{if(u==null||u(I),n||I.defaultPrevented||I.metaKey||!$$(I.nativeEvent)||g)return;const O=i&&I.key==="Enter";o&&I.key===" "&&(I.preventDefault(),v(!0)),O&&(I.preventDefault(),I.currentTarget.click()),b.add(document,"keyup",C,!1)},[n,g,u,i,o,b,C]),$=P.useCallback(I=>{if(c==null||c(I),n||I.defaultPrevented||I.metaKey||!$$(I.nativeEvent)||g)return;o&&I.key===" "&&(I.preventDefault(),v(!1),I.currentTarget.click())},[o,g,n,c]),A=P.useCallback(I=>{I.button===0&&(v(!1),b.remove(document,"mouseup",A,!1))},[b]),N=P.useCallback(I=>{if(I.button!==0)return;if(n){I.stopPropagation(),I.preventDefault();return}g||v(!0),I.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",A,!1),s==null||s(I)},[n,g,s,b,A]),M=P.useCallback(I=>{I.button===0&&(g||v(!1),a==null||a(I))},[a,g]),R=P.useCallback(I=>{if(n){I.preventDefault();return}d==null||d(I)},[n,d]),F=P.useCallback(I=>{y&&(I.preventDefault(),v(!1)),h==null||h(I)},[y,h]),D=Qf(t,x);return g?{...p,ref:D,type:"button","aria-disabled":k?void 0:n,disabled:k,onClick:S,onMouseDown:s,onMouseUp:a,onKeyUp:c,onKeyDown:u,onMouseOver:d,onMouseLeave:h}:{...p,ref:D,role:"button","data-active":co(y),"aria-disabled":n?"true":void 0,tabIndex:k?void 0:w,onClick:S,onMouseDown:N,onMouseUp:M,onKeyUp:$,onKeyDown:_,onMouseOver:R,onMouseLeave:F}}function t_e(e){const{wasSelected:t,enabled:n,isSelected:r,mode:i="unmount"}=e;return!!(!n||r||i==="keepMounted"&&t)}var DX=Fe(function(t,n){const{children:r,placeholder:i,className:o,...s}=t;return E.jsxs(Ae.select,{...s,ref:n,className:Xe("chakra-select",o),children:[i&&E.jsx("option",{value:"",children:i}),r]})});DX.displayName="SelectField";function n_e(e,t){const n={},r={};for(const[i,o]of Object.entries(e))t.includes(i)?n[i]=o:r[i]=o;return[n,r]}var mF=Fe((e,t)=>{var n;const r=mc("Select",e),{rootProps:i,placeholder:o,icon:s,color:a,height:l,h:u,minH:c,minHeight:f,iconColor:d,iconSize:h,...p}=Er(e),[g,m]=n_e(p,Gpe),y=xX(m),v={width:"100%",height:"fit-content",position:"relative",color:a},b={paddingEnd:"2rem",...r.field,_focus:{zIndex:"unset",...(n=r.field)==null?void 0:n._focus}};return E.jsxs(Ae.div,{className:"chakra-select__wrapper",__css:v,...g,...i,children:[E.jsx(DX,{ref:t,height:u??l,minH:c??f,placeholder:o,...y,__css:b,children:e.children}),E.jsx(OX,{"data-disabled":co(y.disabled),...(d||a)&&{color:d||a},__css:r.icon,...h&&{fontSize:h},children:s})]})});mF.displayName="Select";var r_e=e=>E.jsx("svg",{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),i_e=Ae("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),OX=e=>{const{children:t=E.jsx(r_e,{}),...n}=e,r=P.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return E.jsx(i_e,{...n,className:"chakra-select__icon-wrapper",children:P.isValidElement(t)?r:null})};OX.displayName="SelectIcon";var[o_e,s_e,a_e,l_e]=uX();function u_e(e){var t;const{defaultIndex:n,onChange:r,index:i,isManual:o,isLazy:s,lazyBehavior:a="unmount",orientation:l="horizontal",direction:u="ltr",...c}=e,[f,d]=P.useState(n??0),[h,p]=fX({defaultValue:n??0,value:i,onChange:r});P.useEffect(()=>{i!=null&&d(i)},[i]);const g=a_e(),m=P.useId();return{id:`tabs-${(t=e.id)!=null?t:m}`,selectedIndex:h,focusedIndex:f,setSelectedIndex:p,setFocusedIndex:d,isManual:o,isLazy:s,lazyBehavior:a,orientation:l,descendants:g,direction:u,htmlProps:c}}var[c_e,Yk]=tr({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function f_e(e){const{focusedIndex:t,orientation:n,direction:r}=Yk(),i=s_e(),o=P.useCallback(s=>{const a=()=>{var v;const b=i.nextEnabled(t);b&&((v=b.node)==null||v.focus())},l=()=>{var v;const b=i.prevEnabled(t);b&&((v=b.node)==null||v.focus())},u=()=>{var v;const b=i.firstEnabled();b&&((v=b.node)==null||v.focus())},c=()=>{var v;const b=i.lastEnabled();b&&((v=b.node)==null||v.focus())},f=n==="horizontal",d=n==="vertical",h=s.key,p=r==="ltr"?"ArrowLeft":"ArrowRight",g=r==="ltr"?"ArrowRight":"ArrowLeft",y={[p]:()=>f&&l(),[g]:()=>f&&a(),ArrowDown:()=>d&&a(),ArrowUp:()=>d&&l(),Home:u,End:c}[h];y&&(s.preventDefault(),y(s))},[i,t,n,r]);return{...e,role:"tablist","aria-orientation":n,onKeyDown:Iu(e.onKeyDown,o)}}function d_e(e){const{isDisabled:t=!1,isFocusable:n=!1,...r}=e,{setSelectedIndex:i,isManual:o,id:s,setFocusedIndex:a,selectedIndex:l}=Yk(),{index:u,register:c}=l_e({disabled:t&&!n}),f=u===l,d=()=>{i(u)},h=()=>{a(u),!o&&!(t&&n)&&i(u)};return{...e_e({...r,ref:Qf(c,e.ref),isDisabled:t,isFocusable:n,onClick:Iu(e.onClick,d)}),id:NX(s,u),role:"tab",tabIndex:f?0:-1,type:"button","aria-selected":f,"aria-controls":IX(s,u),onFocus:t?void 0:Iu(e.onFocus,h)}}var[h_e,p_e]=tr({});function g_e(e){const t=Yk(),{id:n,selectedIndex:r}=t,o=qk(e.children).map((s,a)=>P.createElement(h_e,{key:a,value:{isSelected:a===r,id:IX(n,a),tabId:NX(n,a),selectedIndex:r}},s));return{...e,children:o}}function m_e(e){const{children:t,...n}=e,{isLazy:r,lazyBehavior:i}=Yk(),{isSelected:o,id:s,tabId:a}=p_e(),l=P.useRef(!1);o&&(l.current=!0);const u=t_e({wasSelected:l.current,isSelected:o,enabled:r,mode:i});return{tabIndex:0,...n,children:u?t:null,role:"tabpanel","aria-labelledby":a,hidden:!o,id:s}}function NX(e,t){return`${e}--tab-${t}`}function IX(e,t){return`${e}--tabpanel-${t}`}var[y_e,Xk]=tr({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),LX=Fe(function(t,n){const r=mc("Tabs",t),{children:i,className:o,...s}=Er(t),{htmlProps:a,descendants:l,...u}=u_e(s),c=P.useMemo(()=>u,[u]),{isFitted:f,...d}=a,h={position:"relative",...r.root};return E.jsx(o_e,{value:l,children:E.jsx(c_e,{value:c,children:E.jsx(y_e,{value:r,children:E.jsx(Ae.div,{className:Xe("chakra-tabs",o),ref:n,...d,__css:h,children:i})})})})});LX.displayName="Tabs";var zX=Fe(function(t,n){const r=f_e({...t,ref:n}),o={display:"flex",...Xk().tablist};return E.jsx(Ae.div,{...r,className:Xe("chakra-tabs__tablist",t.className),__css:o})});zX.displayName="TabList";var K1=Fe(function(t,n){const r=m_e({...t,ref:n}),i=Xk();return E.jsx(Ae.div,{outline:"0",...r,className:Xe("chakra-tabs__tab-panel",t.className),__css:i.tabpanel})});K1.displayName="TabPanel";var BX=Fe(function(t,n){const r=g_e(t),i=Xk();return E.jsx(Ae.div,{...r,width:"100%",ref:n,className:Xe("chakra-tabs__tab-panels",t.className),__css:i.tabpanels})});BX.displayName="TabPanels";var l0=Fe(function(t,n){const r=Xk(),i=d_e({...t,ref:n}),o={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...r.tab};return E.jsx(Ae.button,{...i,className:Xe("chakra-tabs__tab",t.className),__css:o})});l0.displayName="Tab";function qL(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const jX=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),GL=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);GL&&parseFloat(GL[1]);const Rb=globalThis,Xd=globalThis.process||{};function v_e(e){var r,i;if(typeof window<"u"&&((r=window.process)==null?void 0:r.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function yF(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||v_e()}const UX="4.0.7";function b_e(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch{return null}}class x_e{constructor(t,n,r="sessionStorage"){this.storage=b_e(r),this.id=t,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let t={};if(this.storage){const n=this.storage.getItem(this.id);t=n?JSON.parse(n):{}}return Object.assign(this.config,t),this}}function w_e(e){let t;return e<10?t=`${e.toFixed(2)}ms`:e<100?t=`${e.toFixed(1)}ms`:e<1e3?t=`${e.toFixed(0)}ms`:t=`${(e/1e3).toFixed(2)}s`,t}function S_e(e,t=8){const n=Math.max(t-e.length,0);return`${" ".repeat(n)}${e}`}var gw;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(gw||(gw={}));const k_e=10;function YL(e){return typeof e!="string"?e:(e=e.toUpperCase(),gw[e]||gw.WHITE)}function C_e(e,t,n){return!yF&&typeof e=="string"&&(t&&(e=`\x1B[${YL(t)}m${e}\x1B[39m`),n&&(e=`\x1B[${YL(n)+k_e}m${e}\x1B[49m`)),e}function __e(e,t=["constructor"]){const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=e;for(const o of r){const s=i[o];typeof s=="function"&&(t.find(a=>o===a)||(i[o]=s.bind(e)))}}function vF(e,t){if(!e)throw new Error("Assertion failed")}function Kd(){var t,n,r;let e;if(yF()&&Rb.performance)e=(n=(t=Rb==null?void 0:Rb.performance)==null?void 0:t.now)==null?void 0:n.call(t);else if("hrtime"in Xd){const i=(r=Xd==null?void 0:Xd.hrtime)==null?void 0:r.call(Xd);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const Qd={debug:yF()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},E_e={enabled:!0,level:0};function Zd(){}const XL={},KL={once:!0};let bF=class{constructor({id:t}={id:""}){this.VERSION=UX,this._startTs=Kd(),this._deltaTs=Kd(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new x_e(`__probe-${this.id}__`,E_e),this.timeStamp(`${this.id} started`),__e(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Kd()-this._startTs).toPrecision(10))}getDelta(){return Number((Kd()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,n){this._storage.setConfiguration({[t]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,n){if(!t)throw new Error(n||"Assertion failed")}warn(t){return this._getLogFunction(0,t,Qd.warn,arguments,KL)}error(t){return this._getLogFunction(0,t,Qd.error,arguments)}deprecated(t,n){return this.warn(`\`${t}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(t,n){return this.error(`\`${t}\` has been removed. Use \`${n}\` instead`)}probe(t,n){return this._getLogFunction(t,n,Qd.log,arguments,{time:!0,once:!0})}log(t,n){return this._getLogFunction(t,n,Qd.debug,arguments)}info(t,n){return this._getLogFunction(t,n,console.info,arguments)}once(t,n){return this._getLogFunction(t,n,Qd.debug||Qd.info,arguments,KL)}table(t,n,r){return n?this._getLogFunction(t,n,console.table||Zd,r&&[r],{tag:A_e(n)}):Zd}time(t,n){return this._getLogFunction(t,n,console.time?console.time:console.info)}timeEnd(t,n){return this._getLogFunction(t,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,n){return this._getLogFunction(t,n,console.timeStamp||Zd)}group(t,n,r={collapsed:!1}){const i=QL({logLevel:t,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,n,r={}){return this.group(t,n,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Zd)}withGroup(t,n,r){this.group(t,n)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=VX(t)}_getLogFunction(t,n,r,i,o){if(this._shouldLog(t)){o=QL({logLevel:t,message:n,args:i,opts:o}),r=r||o.method,vF(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Kd();const s=o.tag||o.message;if(o.once&&s)if(!XL[s])XL[s]=Kd();else return Zd;return n=$_e(this.id,o.message,o),r.bind(console,n,...o.args)}return Zd}};bF.VERSION=UX;function VX(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return vF(Number.isFinite(t)&&t>=0),t}function QL(e){const{logLevel:t,message:n}=e;e.logLevel=VX(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":n!==void 0&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return vF(i==="string"||i==="object"),Object.assign(e,{args:r},e.opts)}function $_e(e,t,n){if(typeof t=="string"){const r=n.time?S_e(w_e(n.total)):"";t=n.time?`${e}: ${r}  ${t}`:`${e}: ${t}`,t=C_e(t,n.color,n.background)}return t}function A_e(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}function T_e(e,t){return WX(e||{},t)}function WX(e,t,n=0){if(n>3)return t;const r={...e};for(const[i,o]of Object.entries(t))o&&typeof o=="object"&&!Array.isArray(o)?r[i]=WX(r[i]||{},t[i],n+1):r[i]=t[i];return r}const M_e="latest";function P_e(){var e;return(e=globalThis._loadersgl_)!=null&&e.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version}const F_e=P_e();function Xu(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const Of=typeof process!="object"||String(process)!=="[object process]"||process.browser,R_e=typeof window<"u"&&typeof window.orientation<"u",ZL=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);ZL&&parseFloat(ZL[1]);class D_e{constructor(t,n){fe(this,"name");fe(this,"workerThread");fe(this,"isRunning",!0);fe(this,"result");fe(this,"_resolve",()=>{});fe(this,"_reject",()=>{});this.name=t,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(t,n){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:n})}done(t){Xu(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Xu(this.isRunning),this.isRunning=!1,this._reject(t)}}class A${terminate(){}}const T$=new Map;function O_e(e){Xu(e.source&&!e.url||!e.source&&e.url);let t=T$.get(e.source||e.url);return t||(e.url&&(t=N_e(e.url),T$.set(e.url,t)),e.source&&(t=HX(e.source),T$.set(e.source,t))),Xu(t),t}function N_e(e){if(!e.startsWith("http"))return e;const t=I_e(e);return HX(t)}function HX(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function I_e(e){return`try {
  importScripts('${e}');
} catch (error) {
  console.error(error);
  throw error;
}`}function qX(e,t=!0,n){const r=n||new Set;if(e){if(JL(e))r.add(e);else if(JL(e.buffer))r.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)qX(e[i],t,r)}}return n===void 0?Array.from(r):[]}function JL(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const M$=()=>{};class D3{constructor(t){fe(this,"name");fe(this,"source");fe(this,"url");fe(this,"terminated",!1);fe(this,"worker");fe(this,"onMessage");fe(this,"onError");fe(this,"_loadableURL","");const{name:n,source:r,url:i}=t;Xu(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=M$,this.onError=o=>console.log(o),this.worker=Of?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&Of||typeof A$<"u"&&!Of}destroy(){this.onMessage=M$,this.onError=M$,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,n){n=n||qX(t),this.worker.postMessage(t,n)}_getErrorFromErrorEvent(t){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,t.message&&(n+=`${t.message} in `),t.lineno&&(n+=`:${t.lineno}:${t.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=O_e({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},t.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},t.onmessageerror=n=>console.error(n),t}_createNodeWorker(){let t;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new A$(r,{eval:!1})}else if(this.source)t=new A$(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",n=>{this.onMessage(n)}),t.on("error",n=>{this.onError(n)}),t.on("exit",n=>{}),t}}class L_e{constructor(t){fe(this,"name","unnamed");fe(this,"source");fe(this,"url");fe(this,"maxConcurrency",1);fe(this,"maxMobileConcurrency",1);fe(this,"onDebug",()=>{});fe(this,"reuseWorkers",!0);fe(this,"props",{});fe(this,"jobQueue",[]);fe(this,"idleQueue",[]);fe(this,"count",0);fe(this,"isDestroyed",!1);this.source=t.source,this.url=t.url,this.setProps(t)}static isSupported(){return D3.isSupported()}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,n=(i,o,s)=>i.done(s),r=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:n,onError:r,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:t,backlog:this.jobQueue.length});const r=new D_e(n.name,t);t.onMessage=i=>n.onMessage(r,i.type,i.payload),t.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!Of||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new D3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return R_e?this.maxMobileConcurrency:this.maxConcurrency}}const z_e={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},iu=class iu{constructor(t){fe(this,"props");fe(this,"workerPools",new Map);this.props={...z_e},this.setProps(t),this.workerPools=new Map}static isSupported(){return D3.isSupported()}static getWorkerFarm(t={}){return iu._workerFarm=iu._workerFarm||new iu({}),iu._workerFarm.setProps(t),iu._workerFarm}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:n,source:r,url:i}=t;let o=this.workerPools.get(n);return o||(o=new L_e({name:n,source:r,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};fe(iu,"_workerFarm");let mw=iu;function B_e(e,t={}){const n=t[e.id]||{},r=Of?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let i=n.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(Of?i=`modules/${e.module}/dist/${r}`:i=`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!i){let o=e.version;o==="latest"&&(o=M_e);const s=o?`@${o}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${s}/dist/${r}`}return Xu(i),i}function j_e(e,t=F_e){Xu(e,"no worker provided");const n=e.version;return!(!t||!n)}function U_e(e,t){return!mw.isSupported()||!Of&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function V_e(e,t,n,r,i){const o=e.id,s=B_e(e,n),l=mw.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const u=await l.startJob("process-on-worker",W_e.bind(null,i));return u.postMessage("process",{input:t,options:n,context:r}),await(await u.result).result}async function W_e(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(new Error(r.error));break;case"process":const{id:i,input:o,options:s}=r;try{const a=await e(o,s);t.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function H_e(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function q_e(...e){return G_e(e)}function G_e(e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),n=t.reduce((o,s)=>o+s.byteLength,0),r=new Uint8Array(n);let i=0;for(const o of t)r.set(o,i),i+=o.byteLength;return r.buffer}async function Y_e(e){const t=[];for await(const n of e)t.push(n);return q_e(...t)}let X_e="";const e7={};function K_e(e){for(const t in e7)if(e.startsWith(t)){const n=e7[t];e=e.replace(t,n)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e=`${X_e}${e}`),e}const Q_e="4.2.1",Z_e={dataType:null,batchType:null,name:"JSON",id:"json",module:"json",version:Q_e,extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:t7,parse:async e=>t7(new TextDecoder().decode(e)),options:{}};function t7(e){return JSON.parse(e)}function J_e(e){return e&&typeof e=="object"&&e.isBuffer}function GX(e){if(J_e(e))return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function YX(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function eEe(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}const tEe=e=>typeof e=="boolean",ty=e=>typeof e=="function",Q1=e=>e!==null&&typeof e=="object",n7=e=>Q1(e)&&e.constructor==={}.constructor,nEe=e=>!!e&&typeof e[Symbol.iterator]=="function",rEe=e=>e&&typeof e[Symbol.asyncIterator]=="function",_d=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Rg=e=>typeof Blob<"u"&&e instanceof Blob,iEe=e=>e&&typeof e=="object"&&e.isBuffer,oEe=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||Q1(e)&&ty(e.tee)&&ty(e.cancel)&&ty(e.getReader),sEe=e=>Q1(e)&&ty(e.read)&&ty(e.pipe)&&tEe(e.readable),XX=e=>oEe(e)||sEe(e);class aEe extends Error{constructor(n,r){super(n);fe(this,"reason");fe(this,"url");fe(this,"response");this.reason=r.reason,this.url=r.url,this.response=r.response}}const lEe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,uEe=/^([-\w.]+\/[-\w.+]+)/;function r7(e,t){return e.toLowerCase()===t.toLowerCase()}function cEe(e){const t=uEe.exec(e);return t?t[1]:e}function i7(e){const t=lEe.exec(e);return t?t[1]:""}const KX=/\?.*/;function fEe(e){const t=e.match(KX);return t&&t[0]}function xF(e){return e.replace(KX,"")}function dEe(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}function Kk(e){return _d(e)?e.url:Rg(e)?e.name||"":typeof e=="string"?e:""}function wF(e){if(_d(e)){const t=e,n=t.headers.get("content-type")||"",r=xF(t.url);return cEe(n)||i7(r)}return Rg(e)?e.type||"":typeof e=="string"?i7(e):""}function hEe(e){return _d(e)?e.headers["content-length"]||-1:Rg(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}async function QX(e){if(_d(e))return e;const t={},n=hEe(e);n>=0&&(t["content-length"]=String(n));const r=Kk(e),i=wF(e);i&&(t["content-type"]=i);const o=await mEe(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:r}),s}async function pEe(e){if(!e.ok)throw await gEe(e)}async function gEe(e){const t=dEe(e.url);let n=`Failed to fetch resource (${e.status}) ${e.statusText}: ${t}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:e.statusText,url:e.url,response:e};try{const i=e.headers.get("Content-Type");r.reason=i!=null&&i.includes("application/json")?await e.json():e.text()}catch{}return new aEe(n,r)}async function mEe(e){if(typeof e=="string")return`data:,${e.slice(0,5)}`;if(e instanceof Blob){const n=e.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=o=>{var s;return r((s=o==null?void 0:o.target)==null?void 0:s.result)},i.readAsDataURL(n)})}if(e instanceof ArrayBuffer){const n=e.slice(0,5);return`data:base64,${yEe(n)}`}return null}function yEe(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}function vEe(e){return!bEe(e)&&!xEe(e)}function bEe(e){return e.startsWith("http:")||e.startsWith("https:")}function xEe(e){return e.startsWith("data:")}async function O3(e,t){var n,r;if(typeof e=="string"){const i=K_e(e);return vEe(i)&&(n=globalThis.loaders)!=null&&n.fetchNode?(r=globalThis.loaders)==null?void 0:r.fetchNode(i,t):await fetch(i,t)}return await QX(e)}const o7=new bF({id:"loaders.gl"});class wEe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class SEe{constructor(){fe(this,"console");this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const ZX={fetch:null,mimeType:void 0,nothrow:!1,log:new SEe,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:jX,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},kEe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function JX(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function eK(){const e=JX();return e.globalOptions=e.globalOptions||{...ZX},e.globalOptions}function CEe(e,t,n,r){return n=n||[],n=Array.isArray(n)?n:[n],_Ee(e,n),$Ee(t,e,r)}function _Ee(e,t){s7(e,null,ZX,kEe,t);for(const n of t){const r=e&&e[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};s7(r,n.id,i,o,t)}}function s7(e,t,n,r,i){const o=t||"Top level",s=t?`${t}.`:"";for(const a in e){const l=!t&&Q1(e[a]),u=a==="baseUri"&&!t,c=a==="workerUrl"&&t;if(!(a in n)&&!u&&!c){if(a in r)o7.warn(`${o} loader option '${s}${a}' no longer supported, use '${r[a]}'`)();else if(!l){const f=EEe(a,i);o7.warn(`${o} loader option '${s}${a}' not recognized. ${f}`)()}}}}function EEe(e,t){const n=e.toLowerCase();let r="";for(const i of t)for(const o in i.options){if(e===o)return`Did you mean '${i.id}.${o}'?`;const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||`Did you mean '${i.id}.${o}'?`)}return r}function $Ee(e,t,n){const i={...e.options||{}};return AEe(i,n),i.log===null&&(i.log=new wEe),a7(i,eK()),a7(i,t),i}function a7(e,t){for(const n in t)if(n in t){const r=t[n];n7(r)&&n7(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function AEe(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function tK(e){return e?(Array.isArray(e)&&(e=e[0]),Array.isArray(e==null?void 0:e.extensions)):!1}function nK(e){qL(e,"null loader"),qL(tK(e),"invalid loader");let t;return Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e!=null&&e.parseTextSync||e!=null&&e.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const TEe=()=>{const e=JX();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function MEe(){return TEe()}const PEe=new bF({id:"loaders.gl"}),FEe=/\.([^.]+)$/;async function REe(e,t=[],n,r){if(!rK(e))return null;let i=l7(e,t,{...n,nothrow:!0},r);if(i)return i;if(Rg(e)&&(e=await e.slice(0,10).arrayBuffer(),i=l7(e,t,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(iK(e));return i}function l7(e,t=[],n,r){if(!rK(e))return null;if(t&&!Array.isArray(t))return nK(t);let i=[];t&&(i=i.concat(t)),n!=null&&n.ignoreRegisteredLoaders||i.push(...MEe()),OEe(i);const o=DEe(e,i,n,r);if(!o&&!(n!=null&&n.nothrow))throw new Error(iK(e));return o}function DEe(e,t,n,r){const i=Kk(e),o=wF(e),s=xF(i)||(r==null?void 0:r.url);let a=null,l="";return n!=null&&n.mimeType&&(a=P$(t,n==null?void 0:n.mimeType),l=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),a=a||NEe(t,s),l=l||(a?`matched url ${s}`:""),a=a||P$(t,o),l=l||(a?`matched MIME type ${o}`:""),a=a||LEe(t,e),l=l||(a?`matched initial data ${oK(e)}`:""),n!=null&&n.fallbackMimeType&&(a=a||P$(t,n==null?void 0:n.fallbackMimeType),l=l||(a?`matched fallback MIME type ${o}`:"")),l&&PEe.log(1,`selectLoader selected ${a==null?void 0:a.name}: ${l}.`),a}function rK(e){return!(e instanceof Response&&e.status===204)}function iK(e){const t=Kk(e),n=wF(e);let r="No valid loader found (";r+=t?`${YX(t)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const i=e?oK(e):"";return r+=i?` first bytes: "${i}"`:"first bytes: not available",r+=")",r}function OEe(e){for(const t of e)nK(t)}function NEe(e,t){const n=t&&FEe.exec(t),r=n&&n[1];return r?IEe(e,r):null}function IEe(e,t){t=t.toLowerCase();for(const n of e)for(const r of n.extensions)if(r.toLowerCase()===t)return n;return null}function P$(e,t){var n;for(const r of e)if((n=r.mimeTypes)!=null&&n.some(i=>r7(t,i))||r7(t,`application/x.${r.id}`))return r;return null}function LEe(e,t){if(!t)return null;for(const n of e)if(typeof t=="string"){if(zEe(t,n))return n}else if(ArrayBuffer.isView(t)){if(u7(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer&&u7(t,0,n))return n;return null}function zEe(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>e.startsWith(r))}function u7(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>BEe(e,t,n,i))}function BEe(e,t,n,r){if(r instanceof ArrayBuffer)return H_e(r,e,r.byteLength);switch(typeof r){case"function":return r(e);case"string":const i=N3(e,t,r.length);return r===i;default:return!1}}function oK(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?N3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?N3(e,0,t):""}function N3(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}const jEe=256*1024;function*UEe(e,t){const n=(t==null?void 0:t.chunkSize)||jEe;let r=0;const i=new TextEncoder;for(;r<e.length;){const o=Math.min(e.length-r,n),s=e.slice(r,r+o);r+=o,yield i.encode(s)}}const VEe=256*1024;function*WEe(e,t={}){const{chunkSize:n=VEe}=t;let r=0;for(;r<e.byteLength;){const i=Math.min(e.byteLength-r,n),o=new ArrayBuffer(i),s=new Uint8Array(e,r,i);new Uint8Array(o).set(s),r+=i,yield o}}const HEe=1024*1024;async function*qEe(e,t){const n=(t==null?void 0:t.chunkSize)||HEe;let r=0;for(;r<e.size;){const i=r+n,o=await e.slice(r,i).arrayBuffer();r=i,yield o}}function c7(e,t){return jX?GEe(e,t):YEe(e)}async function*GEe(e,t){const n=e.getReader();let r;try{for(;;){const i=r||n.read();t!=null&&t._streamReadAhead&&(r=n.read());const{done:o,value:s}=await i;if(o)return;yield GX(s)}}catch{n.releaseLock()}}async function*YEe(e,t){for await(const n of e)yield GX(n)}function XEe(e,t){if(typeof e=="string")return UEe(e,t);if(e instanceof ArrayBuffer)return WEe(e,t);if(Rg(e))return qEe(e,t);if(XX(e))return c7(e,t);if(_d(e))return c7(e.body,t);throw new Error("makeIterator")}const sK="Cannot convert supplied data type";function KEe(e,t,n){if(t.text&&typeof e=="string")return e;if(iEe(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(e.byteOffset,e.byteOffset+i)),r}throw new Error(sK)}async function QEe(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||r)return KEe(e,t);if(Rg(e)&&(e=await QX(e)),_d(e)){const i=e;return await pEe(i),t.binary?await i.arrayBuffer():await i.text()}if(XX(e)&&(e=XEe(e,n)),nEe(e)||rEe(e))return Y_e(e);throw new Error(sK)}function ZEe(e,t){const n=eK(),r=e||n;return typeof r.fetch=="function"?r.fetch:Q1(r.fetch)?i=>O3(i,r.fetch):t!=null&&t.fetch?t==null?void 0:t.fetch:O3}function JEe(e,t,n){if(n)return n;const r={fetch:ZEe(t,e),...e};if(r.url){const i=xF(r.url);r.baseUrl=i,r.queryString=fEe(r.url),r.filename=YX(i),r.baseUrl=eEe(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function e$e(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const r=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function SF(e,t,n,r){t&&!Array.isArray(t)&&!tK(t)&&(r=void 0,n=t,t=void 0),e=await e,n=n||{};const i=Kk(e),s=e$e(t,r),a=await REe(e,s,n);return a?(n=CEe(n,a,s,i),r=JEe({url:i,_parse:SF,loaders:s},n,r||null),await t$e(a,e,n,r)):null}async function t$e(e,t,n,r){if(j_e(e),n=T_e(e.options,n),_d(t)){const o=t,{ok:s,redirected:a,status:l,statusText:u,type:c,url:f}=o,d=Object.fromEntries(o.headers.entries());r.response={headers:d,ok:s,redirected:a,status:l,statusText:u,type:c,url:f}}t=await QEe(t,e,n);const i=e;if(i.parseTextSync&&typeof t=="string")return i.parseTextSync(t,n,r);if(U_e(e,n))return await V_e(e,t,n,r,SF);if(i.parseText&&typeof t=="string")return await i.parseText(t,n,r);if(i.parse)return await i.parse(t,n,r);throw Xu(!i.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}const f7=100;class n$e{constructor(t,n){fe(this,"schema");fe(this,"options");fe(this,"shape");fe(this,"length",0);fe(this,"rows",null);fe(this,"cursor",0);fe(this,"_headers",[]);if(this.options=n,this.schema=t,!Array.isArray(t)){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="array-row-table",this.rows=this.rows||new Array(f7),this.rows[this.length]=t,this.length++}addObjectRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="object-row-table",this.rows=this.rows||new Array(f7),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;return t?(t=t.slice(0,this.length),this.rows=null,{shape:this.shape||"array-row-table",batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}function aK(e,t){if(!e)throw new Error("null row");const n={};if(t)for(let r=0;r<t.length;r++)n[t[r]]=e[r];else for(let r=0;r<e.length;r++){const i=`column-${r}`;n[i]=e[r]}return n}function lK(e,t){if(!e)throw new Error("null row");if(t){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=e[t[r]];return n}return Object.values(e)}function r$e(e){const t=[];for(let n=0;n<e.length;n++){const r=`column-${n}`;t.push(r)}return t}function i$e(e){return Object.keys(e)}const d7=100;class o$e{constructor(t,n){fe(this,"schema");fe(this,"options");fe(this,"length",0);fe(this,"objectRows",null);fe(this,"arrayRows",null);fe(this,"cursor",0);fe(this,"_headers",null);if(this.options=n,this.schema=t,t){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=r$e(t)),this.options.shape){case"object-row-table":const r=aK(t,this._headers);this.addObjectRow(r,n);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(d7),this.arrayRows[this.length]=t,this.length++;break}}addObjectRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=i$e(t)),this.options.shape){case"array-row-table":const r=lK(t,this._headers);this.addArrayRow(r,n);break;case"object-row-table":this.objectRows=this.objectRows||new Array(d7),this.objectRows[this.length]=t,this.length++;break}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}const s$e=100;class a$e{constructor(t,n){fe(this,"schema");fe(this,"length",0);fe(this,"allocated",0);fe(this,"columns",{});this.schema=t,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let n=0;for(const r in this.columns)this.columns[r][this.length]=t[n++];this.length++}addObjectRow(t){this._reallocateColumns();for(const n in t)this.columns[n][this.length]=t[n];this.length++}getBatch(){this._pruneColumns();const t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const r in this.schema){const i=this.schema[r];t[i.name]=this.columns[i.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:s$e,this.columns={};for(const t in this.schema){const n=this.schema[t],r=n.type||Float32Array,i=this.columns[n.index];if(i&&ArrayBuffer.isView(i)){const o=new r(this.allocated);o.set(i),this.columns[n.index]=o}else i?(i.length=this.allocated,this.columns[n.index]=i):this.columns[n.index]=new r(this.allocated)}}}_pruneColumns(){for(const[t,n]of Object.entries(this.columns))this.columns[t]=n.slice(0,this.length)}}const l$e={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},u$e="TableBatchBuilder",yy=class yy{constructor(t,n){fe(this,"schema");fe(this,"options");fe(this,"aggregator",null);fe(this,"batchCount",0);fe(this,"bytesUsed",0);fe(this,"isChunkComplete",!1);fe(this,"lastBatchEmittedMs",Date.now());fe(this,"totalLength",0);fe(this,"totalBytes",0);fe(this,"rowBytes",0);this.schema=t,this.options={...l$e,...n}}limitReached(){var t,n;return!!((t=this.options)!=null&&t.limit&&this.totalLength>=this.options.limit||(n=this.options)!=null&&n._limitMB&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),typeof t=="string"&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?t.length*8:Object.keys(t).length*8}_isFull(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;t!=null&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);const n=this.aggregator.getBatch();return n.count=this.batchCount,n.bytesUsed=this.bytesUsed,Object.assign(n,t),this.batchCount++,this.aggregator=null,n}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return o$e;case"columnar-table":return a$e;case"arrow-table":if(!yy.ArrowBatch)throw new Error(u$e);return yy.ArrowBatch;default:return n$e}}};fe(yy,"ArrowBatch");let I3=yy;class h7 extends Array{enqueue(t){return this.push(t)}dequeue(){return this.shift()}}class c$e{constructor(){fe(this,"_values");fe(this,"_settlers");fe(this,"_closed");this._values=new h7,this._settlers=new h7,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[Symbol.asyncIterator](){return this}enqueue(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");const n=this._settlers.dequeue();t instanceof Error?n.reject(t):n.resolve({value:t})}else this._values.enqueue(t)}next(){if(this._values.length>0){const t=this._values.dequeue();return t instanceof Error?Promise.reject(t):Promise.resolve({value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((t,n)=>{this._settlers.enqueue({resolve:t,reject:n})})}}/* @license
Papa Parse
v5.0.0-beta.0
https://github.com/mholt/PapaParse
License: MIT
*/const p7="\uFEFF",Di={parse:f$e,unparse:d$e,RECORD_SEP:"",UNIT_SEP:"",BYTE_ORDER_MARK:p7,BAD_DELIMITERS:["\r",`
`,'"',p7],WORKERS_SUPPORTED:!1,NODE_STREAM_INPUT:1,LocalChunkSize:1024*1024*10,RemoteChunkSize:1024*1024*5,DefaultDelimiter:",",Parser:L3,ParserHandle:cK,ChunkStreamer:uK,StringStreamer:jp};function f$e(e,t,n){t=t||{};var r=t.dynamicTyping||!1;if(Nr(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=Nr(t.transform)?t.transform:!1,t.worker&&Di.WORKERS_SUPPORTED){var i=newWorker();i.userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=Nr(t.step),t.chunk=Nr(t.chunk),t.complete=Nr(t.complete),t.error=Nr(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id});return}var o=null;return typeof e=="string"&&(o=new jp(t)),o||(o=new n(t)),o.stream(e)}function d$e(e,t){var n=!1,r=!0,i=",",o=`\r
`,s='"',a=s+s,l=!1,u=null;f();var c=new RegExp(Gy(s),"g");if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,l);if(typeof e[0]=="object")return h(u||d(e[0]),e,l)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:d(e.data[0])),!Array.isArray(e.data[0])&&typeof e.data[0]!="object"&&(e.data=[e.data])),h(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function f(){if(typeof t=="object"){if(typeof t.delimiter=="string"&&!Di.BAD_DELIMITERS.filter(function(m){return t.delimiter.indexOf(m)!==-1}).length&&(i=t.delimiter),(typeof t.quotes=="boolean"||Array.isArray(t.quotes))&&(n=t.quotes),(typeof t.skipEmptyLines=="boolean"||typeof t.skipEmptyLines=="string")&&(l=t.skipEmptyLines),typeof t.newline=="string"&&(o=t.newline),typeof t.quoteChar=="string"&&(s=t.quoteChar),typeof t.header=="boolean"&&(r=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");u=t.columns}t.escapeChar!==void 0&&(a=t.escapeChar+s)}}function d(m){if(typeof m!="object")return[];var y=[];for(var v in m)y.push(v);return y}function h(m,y,v){var b="";typeof m=="string"&&(m=JSON.parse(m)),typeof y=="string"&&(y=JSON.parse(y));var x=Array.isArray(m)&&m.length>0,w=!Array.isArray(y[0]);if(x&&r){for(var k=0;k<m.length;k++)k>0&&(b+=i),b+=p(m[k],k);y.length>0&&(b+=o)}for(var S=0;S<y.length;S++){var C=x?m.length:y[S].length,_=!1,$=x?Object.keys(y[S]).length===0:y[S].length===0;if(v&&!x&&(_=v==="greedy"?y[S].join("").trim()==="":y[S].length===1&&y[S][0].length===0),v==="greedy"&&x){for(var A=[],N=0;N<C;N++){var M=w?m[N]:N;A.push(y[S][M])}_=A.join("").trim()===""}if(!_){for(var R=0;R<C;R++){R>0&&!$&&(b+=i);var F=x&&w?m[R]:R;b+=p(y[S][F],R)}S<y.length-1&&(!v||C>0&&!$)&&(b+=o)}}return b}function p(m,y){if(typeof m>"u"||m===null)return"";if(m.constructor===Date)return JSON.stringify(m).slice(1,25);m=m.toString().replace(c,a);var v=typeof n=="boolean"&&n||Array.isArray(n)&&n[y]||g(m,Di.BAD_DELIMITERS)||m.indexOf(i)>-1||m.charAt(0)===" "||m.charAt(m.length-1)===" ";return v?s+m+s:m}function g(m,y){for(var v=0;v<y.length;v++)if(m.indexOf(y[v])>-1)return!0;return!1}}function uK(e){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},t.call(this,e),this.parseChunk=function(n,r){if(this.isFirstChunk&&Nr(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(n);i!==void 0&&(n=i)}this.isFirstChunk=!1;var o=this._partialLine+n;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!(this._handle.paused()||this._handle.aborted())){var a=s.meta.cursor;this._finished||(this._partialLine=o.substring(a-this._baseIndex),this._baseIndex=a),s&&s.data&&(this._rowCount+=s.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Nr(this._config.chunk)&&!r){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return;s=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),!this._completed&&l&&Nr(this._config.complete)&&(!s||!s.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!l&&(!s||!s.meta.paused)&&this._nextChunk(),s}},this._sendError=function(n){Nr(this._config.error)&&this._config.error(n)};function t(n){var r=kF(n);r.chunkSize=parseInt(r.chunkSize),!n.step&&!n.chunk&&(r.chunkSize=null),this._handle=new cK(r),this._handle.streamer=this,this._config=r}}function jp(e){e=e||{},uK.call(this,e);var t;this.stream=function(n){return t=n,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var n=this._config.chunkSize,r=n?t.substr(0,n):t;return t=n?t.substr(n):"",this._finished=!t,this.parseChunk(r)}}}jp.prototype=Object.create(jp.prototype);jp.prototype.constructor=jp;function cK(e){var t=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,r=this,i=0,o=0,s,a,l=!1,u=!1,c,f=[],d={data:[],errors:[],meta:{}};if(Nr(e.step)){var h=e.step;e.step=function(C){if(d=C,m())g();else{if(g(),!d.data||d.data.length===0)return;i+=C.data.length,e.preview&&i>e.preview?a.abort():h(d,r)}}}this.parse=function(C,_,$){var A=e.quoteChar||'"';if(e.newline||(e.newline=k(C,A)),c=!1,e.delimiter)Nr(e.delimiter)&&(e.delimiter=e.delimiter(C),d.meta.delimiter=e.delimiter);else{var N=w(C,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);N.successful?e.delimiter=N.bestDelimiter:(c=!0,e.delimiter=Di.DefaultDelimiter),d.meta.delimiter=e.delimiter}var M=kF(e);return e.preview&&e.header&&M.preview++,s=C,a=new L3(M),d=a.parse(s,_,$),g(),l?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,a.abort(),s=s.substr(a.getCharIndex())},this.resume=function(){l=!1,r.streamer.parseChunk(s,!0)},this.aborted=function(){return u},this.abort=function(){u=!0,a.abort(),d.meta.aborted=!0,Nr(e.complete)&&e.complete(d),s=""};function p(C){return e.skipEmptyLines==="greedy"?C.join("").trim()==="":C.length===1&&C[0].length===0}function g(){if(d&&c&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+Di.DefaultDelimiter+"'"),c=!1),e.skipEmptyLines)for(var C=0;C<d.data.length;C++)p(d.data[C])&&d.data.splice(C--,1);return m()&&y(),x()}function m(){return e.header&&f.length===0}function y(){if(!d)return;function C($){Nr(e.transformHeader)&&($=e.transformHeader($)),f.push($)}if(Array.isArray(d.data[0])){for(var _=0;m()&&_<d.data.length;_++)d.data[_].forEach(C);d.data.splice(0,1)}else d.data.forEach(C)}function v(C){return e.dynamicTypingFunction&&e.dynamicTyping[C]===void 0&&(e.dynamicTyping[C]=e.dynamicTypingFunction(C)),(e.dynamicTyping[C]||e.dynamicTyping)===!0}function b(C,_){return v(C)?_==="true"||_==="TRUE"?!0:_==="false"||_==="FALSE"?!1:t.test(_)?parseFloat(_):n.test(_)?new Date(_):_===""?null:_:_}function x(){if(!d||!d.data||!e.header&&!e.dynamicTyping&&!e.transform)return d;function C($,A){var N=e.header?{}:[],M;for(M=0;M<$.length;M++){var R=M,F=$[M];e.header&&(R=M>=f.length?"__parsed_extra":f[M]),e.transform&&(F=e.transform(F,R)),F=b(R,F),R==="__parsed_extra"?(N[R]=N[R]||[],N[R].push(F)):N[R]=F}return e.header&&(M>f.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+M,o+A):M<f.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+M,o+A)),N}var _=1;return!d.data[0]||Array.isArray(d.data[0])?(d.data=d.data.map(C),_=d.data.length):d.data=C(d.data,0),e.header&&d.meta&&(d.meta.fields=f),o+=_,d}function w(C,_,$,A,N){var M,R,F;N=N||[",","	","|",";",Di.RECORD_SEP,Di.UNIT_SEP];for(var D=0;D<N.length;D++){var I=N[D],O=0,j=0,Y=0;F=void 0;for(var W=new L3({comments:A,delimiter:I,newline:_,preview:10}).parse(C),oe=0;oe<W.data.length;oe++){if($&&p(W.data[oe])){Y++;continue}var re=W.data[oe].length;if(j+=re,typeof F>"u"){F=0;continue}else re>1&&(O+=Math.abs(re-F),F=re)}W.data.length>0&&(j/=W.data.length-Y),(typeof R>"u"||O>R)&&j>1.99&&(R=O,M=I)}return e.delimiter=M,{successful:!!M,bestDelimiter:M}}function k(C,_){C=C.substr(0,1024*1024);var $=new RegExp(Gy(_)+"([^]*?)"+Gy(_),"gm");C=C.replace($,"");var A=C.split("\r"),N=C.split(`
`),M=N.length>1&&N[0].length<A[0].length;if(A.length===1||M)return`
`;for(var R=0,F=0;F<A.length;F++)A[F][0]===`
`&&R++;return R>=A.length/2?`\r
`:"\r"}function S(C,_,$,A){d.errors.push({type:C,code:_,message:$,row:A})}}function Gy(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function L3(e){e=e||{};var t=e.delimiter,n=e.newline,r=e.comments,i=e.step,o=e.preview,s=e.fastMode,a;e.quoteChar===void 0?a='"':a=e.quoteChar;var l=a;if(e.escapeChar!==void 0&&(l=e.escapeChar),(typeof t!="string"||Di.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),r===t)throw new Error("Comment character same as delimiter");r===!0?r="#":(typeof r!="string"||Di.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),n!==`
`&&n!=="\r"&&n!==`\r
`&&(n=`
`);var u=0,c=!1;this.parse=function(f,d,h){if(typeof f!="string")throw new Error("Input must be a string");var p=f.length,g=t.length,m=n.length,y=r.length,v=Nr(i);u=0;var b=[],x=[],w=[],k=0;if(!f)return W();if(s||s!==!1&&f.indexOf(a)===-1){for(var S=f.split(n),C=0;C<S.length;C++){if(w=S[C],u+=w.length,C!==S.length-1)u+=n.length;else if(h)return W();if(!(r&&w.substr(0,y)===r)){if(v){if(b=[],I(w.split(t)),oe(),c)return W()}else I(w.split(t));if(o&&C>=o)return b=b.slice(0,o),W(!0)}}return W()}for(var _=f.indexOf(t,u),$=f.indexOf(n,u),A=new RegExp(Gy(l)+Gy(a),"g"),N;;){if(f[u]===a){for(N=u,u++;;){if(N=f.indexOf(a,N+1),N===-1)return h||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),j();if(N===p-1){var M=f.substring(u,N).replace(A,a);return j(M)}if(a===l&&f[N+1]===l){N++;continue}if(!(a!==l&&N!==0&&f[N-1]===l)){var R=$===-1?_:Math.min(_,$),F=O(R);if(f[N+1+F]===t){if(w.push(f.substring(u,N).replace(A,a)),u=N+1+F+g,_=f.indexOf(t,u),$=f.indexOf(n,u),v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);break}var D=O($);if(f.substr(N+1+D,m)===n){if(w.push(f.substring(u,N).replace(A,a)),Y(N+1+D+m),_=f.indexOf(t,u),v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),N++}}if(v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);continue}if(r&&w.length===0&&f.substr(u,y)===r){if($===-1)return W();u=$+m,$=f.indexOf(n,u),_=f.indexOf(t,u);continue}if(_!==-1&&(_<$||$===-1)){w.push(f.substring(u,_)),u=_+g,_=f.indexOf(t,u);continue}if($!==-1){if(w.push(f.substring(u,$)),Y($+m),v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);continue}break}return j();function I(re){b.push(re),k=u}function O(re){var we=0;if(re!==-1){var Re=f.substring(N+1,re);Re&&Re.trim()===""&&(we=Re.length)}return we}function j(re){return h||(typeof re>"u"&&(re=f.substr(u)),w.push(re),u=p,I(w),v&&oe()),W()}function Y(re){u=re,I(w),w=[],$=f.indexOf(n,u)}function W(re,we){var Re=we||!1;return{data:Re?b[0]:b,errors:x,meta:{delimiter:t,linebreak:n,aborted:c,truncated:!!re,cursor:k+(d||0)}}}function oe(){i(W(void 0,!0)),b=[],x=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return u}}function kF(e){if(typeof e!="object"||e===null)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=kF(e[n]);return t}function Nr(e){return typeof e=="function"}const{ChunkStreamer:fK}=Di;function yw(e){e=e||{},fK.call(this,e),this.textDecoder=new TextDecoder(this._config.encoding),this.stream=async function(t){this._input=t;try{for await(const n of t)this.parseChunk(this.getStringChunk(n));this._finished=!0,this.parseChunk("")}catch(n){this._sendError(n)}},this._nextChunk=function(){},this.getStringChunk=function(t){return typeof t=="string"?t:this.textDecoder.decode(t,{stream:!0})}}yw.prototype=Object.create(fK.prototype);yw.prototype.constructor=yw;const h$e="4.2.1",CF="object-row-table",_F={dataType:null,batchType:null,id:"csv",module:"csv",name:"CSV",version:h$e,extensions:["csv","tsv","dsv"],mimeTypes:["text/csv","text/tab-separated-values","text/dsv"],category:"table",parse:async(e,t)=>g7(new TextDecoder().decode(e),t),parseText:(e,t)=>g7(e,t),parseInBatches:p$e,options:{csv:{shape:CF,optimizeMemoryUsage:!1,header:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!0,delimitersToGuess:[",","	","|",";"]}}};async function g7(e,t){const n={..._F.options.csv,...t==null?void 0:t.csv},r=g$e(e),o=n.header==="auto"?dK(r):!!n.header,s={...n,header:o,download:!1,transformHeader:o?hK():void 0,error:f=>{throw new Error(f)}},a=Di.parse(e,s),l=a.data,u=a.meta.fields||pK(n.columnPrefix,r.length),c=n.shape||CF;switch(c){case"object-row-table":return{shape:"object-row-table",data:l.map(f=>Array.isArray(f)?aK(f,u):f)};case"array-row-table":return{shape:"array-row-table",data:l.map(f=>Array.isArray(f)?f:lK(f,u))};default:throw new Error(c)}}function p$e(e,t){t={...t},t.batchSize==="auto"&&(t.batchSize=4e3);const n={..._F.options.csv,...t==null?void 0:t.csv},r=new c$e;let i=!0,o=null,s=null,a=null;const l={...n,header:!1,download:!1,chunkSize:1024*1024*5,skipEmptyLines:!1,step(u){let c=u.data;if(n.skipEmptyLines&&c.flat().join("").trim()==="")return;const f=u.meta.cursor;if(i&&!o&&(n.header==="auto"?dK(c):!!n.header)){o=c.map(hK());return}i&&(i=!1,o||(o=pK(n.columnPrefix,c.length)),a=m$e(c,o)),n.optimizeMemoryUsage&&(c=JSON.parse(JSON.stringify(c)));const d=n.shape||CF;s=s||new I3(a,{shape:d,...t});try{s.addRow(c);const h=s&&s.getFullBatch({bytesUsed:f});h&&r.enqueue(h)}catch(h){r.enqueue(h)}},complete(u){try{const c=u.meta.cursor,f=s&&s.getFinalBatch({bytesUsed:c});f&&r.enqueue(f)}catch(c){r.enqueue(c)}r.close()}};return Di.parse(e,l,yw),r}function dK(e){return e&&e.every(t=>typeof t=="string")}function g$e(e){return Di.parse(e,{download:!1,dynamicTyping:!0,preview:1}).data[0]}function hK(){const e=new Set;return t=>{let n=t,r=1;for(;e.has(n);)n=`${t}.${r}`,r++;return e.add(n),n}}function pK(e,t=0){const n=[];for(let r=0;r<t;r++)n.push(`${e}${r+1}`);return n}function m$e(e,t){const n=t?{}:[];for(let r=0;r<e.length;r++){const i=t&&t[r]||r;switch(typeof e[r]){case"number":case"boolean":n[i]={name:String(i),index:r,type:Float32Array};break;case"string":default:n[i]={name:String(i),index:r,type:Array}}}return n}var m7={},F$={},R$=34,Cm=10,D$=13;function gK(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function y$e(e,t){var n=gK(e);return function(r,i){return t(n(r),i,e)}}function y7(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ti(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function v$e(e){return e<0?"-"+ti(-e,6):e>9999?"+"+ti(e,6):ti(e,4)}function b$e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":v$e(e.getUTCFullYear())+"-"+ti(e.getUTCMonth()+1,2)+"-"+ti(e.getUTCDate(),2)+(i?"T"+ti(t,2)+":"+ti(n,2)+":"+ti(r,2)+"."+ti(i,3)+"Z":r?"T"+ti(t,2)+":"+ti(n,2)+":"+ti(r,2)+"Z":n||t?"T"+ti(t,2)+":"+ti(n,2)+"Z":"")}function x$e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(m,y){if(h)return h(m,y-1);p=m,h=d?y$e(m,d):gK(m)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,m=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===Cm&&--p,f.charCodeAt(p-1)===D$&&--p;function x(){if(v)return F$;if(b)return b=!1,m7;var k,S=g,C;if(f.charCodeAt(S)===R$){for(;g++<p&&f.charCodeAt(g)!==R$||f.charCodeAt(++g)===R$;);return(k=g)>=p?v=!0:(C=f.charCodeAt(g++))===Cm?b=!0:C===D$&&(b=!0,f.charCodeAt(g)===Cm&&++g),f.slice(S+1,k-1).replace(/""/g,'"')}for(;g<p;){if((C=f.charCodeAt(k=g++))===Cm)b=!0;else if(C===D$)b=!0,f.charCodeAt(g)===Cm&&++g;else if(C!==n)continue;return f.slice(S,k)}return v=!0,f.slice(S,p)}for(;(y=x())!==F$;){for(var w=[];y!==m7&&y!==F$;)w.push(y),y=x();d&&(w=d(w,m++))==null||h.push(w)}return h}function o(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function s(f,d){return d==null&&(d=y7(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=y7(f)),o(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?b$e(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var w$e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),S$e=Object.prototype.hasOwnProperty;function z3(e,t){return S$e.call(e,t)}function B3(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)z3(e,i)&&r.push(i);return r}function Oi(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function j3(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function ef(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function mK(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function U3(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(U3(e[t]))return!0}else if(typeof e=="object"){for(var r=B3(e),i=r.length,o=0;o<i;o++)if(U3(e[r[o]]))return!0}}return!1}function v7(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var yK=function(e){w$e(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,v7(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=v7(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),qt=yK,k$e=Oi,Lh={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=vw(n,this.path);r&&(r=Oi(r));var i=Nf(n,{op:"remove",path:this.from}).removed;return Nf(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=vw(n,this.from);return Nf(n,{op:"add",path:this.path,value:Oi(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Yy(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},C$e={add:function(e,t,n){return j3(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Lh.move,copy:Lh.copy,test:Lh.test,_get:Lh._get};function vw(e,t){if(t=="")return e;var n={op:"_get",path:t};return Nf(e,n),n.value}function Nf(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):bw(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=vw(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Yy(e,t.value),s.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new qt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Oi(e));var a=t.path||"",l=a.split("/"),u=e,c=1,f=l.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=bw;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=mK(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!j3(h))throw new qt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);j3(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>u.length)throw new qt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=C$e[t.op].call(t,u,h,e);if(s.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=Lh[t.op].call(t,u,h,e);if(s.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&c<f&&(!u||typeof u!="object"))throw new qt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function Qk(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Oi(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=Nf(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function _$e(e,t,n){var r=Nf(e,t);if(r.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function bw(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Lh[e.op]){if(typeof e.path!="string")throw new qt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&U3(e.value))throw new qt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new qt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=vK([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function vK(e,t,n){try{if(!Array.isArray(e))throw new qt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Qk(Oi(t),Oi(e),n||!0);else{n=n||bw;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qt)return i;throw i}}function Yy(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!Yy(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!Yy(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const E$e=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qt,_areEquals:Yy,applyOperation:Nf,applyPatch:Qk,applyReducer:_$e,deepClone:k$e,getValueByPointer:vw,validate:vK,validator:bw},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var EF=new WeakMap,$$e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),A$e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function T$e(e){return EF.get(e)}function M$e(e,t){return e.observers.get(t)}function P$e(e,t){e.observers.delete(t.callback)}function F$e(e,t){t.unobserve()}function R$e(e,t){var n=[],r,i=T$e(e);if(!i)i=new $$e(e),EF.set(e,i);else{var o=M$e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Oi(e),t){r.callback=t,r.next=null;var s=function(){V3(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){V3(r),clearTimeout(r.next),P$e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new A$e(t,r)),r}function V3(e,t){t===void 0&&(t=!1);var n=EF.get(e.object);$F(n.value,e.object,e.patches,"",t),e.patches.length&&Qk(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function $F(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=B3(t),s=B3(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],c=e[u];if(z3(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[u];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?$F(c,f,n,r+"/"+ef(u),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+ef(u),value:Oi(c)}),n.push({op:"replace",path:r+"/"+ef(u),value:Oi(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+ef(u),value:Oi(c)}),n.push({op:"remove",path:r+"/"+ef(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!z3(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+ef(u),value:Oi(t[u])})}}}function D$e(e,t,n){n===void 0&&(n=!1);var r=[];return $F(e,t,r,"",n),r}const O$e=Object.freeze(Object.defineProperty({__proto__:null,compare:D$e,generate:V3,observe:R$e,unobserve:F$e},Symbol.toStringTag,{value:"Module"}));Object.assign({},E$e,O$e,{JsonPatchError:yK,deepClone:Oi,escapePathComponent:ef,unescapePathComponent:mK});var N$e=/("(?:[^\\"]|\\.)*")|[:,]/g,I$e=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function s(a,l,u){var c,f,d,h,p,g,m,y,v,b,x,w;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,o),x===void 0)return x;if(m=i-l.length-u,x.length<=m&&(v=x.replace(N$e,function(k,S){return S||k+" "}),v.length<=m))return v;if(o!=null&&(a=JSON.parse(x),o=void 0),typeof a=="object"&&a!==null){if(y=l+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",m=a.length;f<m;f++)d.push(s(a[f],y,f===m-1?0:1)||"null");else for(b="{",c="}",g=Object.keys(a),m=g.length;f<m;f++)h=g[f],p=JSON.stringify(h)+": ",w=s(a[h],y,p.length+(f===m-1?0:1)),w!==void 0&&d.push(p+w);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+l)}return x}(t,"",0)};const O$=dc(I$e);function Ci(e,t,n){return e.fields=t||[],e.fname=n,e}function Qt(e){return e==null?null:e.fname}function br(e){return e==null?null:e.fields}function bK(e){return e.length===1?L$e(e[0]):z$e(e)}const L$e=e=>function(t){return t[e]},z$e=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function q(e){throw Error(e)}function xa(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||q("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&q("Access path missing closing bracket: "+e),r&&q("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function To(e,t,n){const r=xa(e);return e=r.length===1?r[0]:e,Ci((n&&n.get||bK)(r),[e],t||e)}const Z1=To("id"),Cr=Ci(e=>e,[],"identity"),lu=Ci(()=>0,[],"zero"),Dg=Ci(()=>1,[],"one"),Mo=Ci(()=>!0,[],"true"),ql=Ci(()=>!1,[],"false");function B$e(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const xK=0,Zk=1,AF=2,wK=3,SK=4;function TF(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:B$e,r=e||xK;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Zk&&n(t||"error","ERROR",arguments),this},warn(){return r>=AF&&n(t||"warn","WARN",arguments),this},info(){return r>=wK&&n(t||"log","INFO",arguments),this},debug(){return r>=SK&&n(t||"log","DEBUG",arguments),this}}}var G=Array.isArray;function se(e){return e===Object(e)}const b7=e=>e!=="__proto__";function Og(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=j$e(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;Ng(r,o,i[o],s)}return r},{})}function Ng(e,t,n,r){if(!b7(t))return;let i,o;if(se(n)&&!G(n)){o=se(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Ng(o,i,n[i]):b7(i)&&(o[i]=n[i])}else e[t]=n}function j$e(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function He(e){return e[e.length-1]}function yr(e){return e==null||e===""?null:+e}const kK=e=>t=>e*Math.exp(t),CK=e=>t=>Math.log(e*t),_K=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),EK=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,xw=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Jk(e,t,n,r){const i=n(e[0]),o=n(He(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function $K(e,t){return Jk(e,t,yr,Cr)}function AK(e,t){var n=Math.sign(e[0]);return Jk(e,t,CK(n),kK(n))}function TK(e,t,n){return Jk(e,t,xw(n),xw(1/n))}function MK(e,t,n){return Jk(e,t,_K(n),EK(n))}function eC(e,t,n,r,i){const o=r(e[0]),s=r(He(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function MF(e,t,n){return eC(e,t,n,yr,Cr)}function PF(e,t,n){const r=Math.sign(e[0]);return eC(e,t,n,CK(r),kK(r))}function ww(e,t,n,r){return eC(e,t,n,xw(r),xw(1/r))}function FF(e,t,n,r){return eC(e,t,n,_K(r),EK(r))}function PK(e){return 1+~~(new Date(e).getMonth()/3)}function FK(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ae(e){return e!=null?G(e)?e:[e]:[]}function RK(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Oe(e){return typeof e=="function"}const U$e="descending";function RF(e,t,n){n=n||{},t=ae(t)||[];const r=[],i=[],o={},s=n.comparator||V$e;return ae(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===U$e?-1:1),i.push(a=Oe(a)?a:To(a,null,n)),(br(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:Ci(s(i,r),Object.keys(o))}const tC=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),V$e=(e,t)=>e.length===1?W$e(e[0],t[0]):H$e(e,t,e.length),W$e=(e,t)=>function(n,r){return tC(e(n),e(r))*t},H$e=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=tC(o(r),o(i));return s*t[a]});function _r(e){return Oe(e)?e:()=>e}function DF(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function De(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function fa(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function DK(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}const q$e=Object.prototype.hasOwnProperty;function ce(e,t){return q$e.call(e,t)}const Db={};function Ig(e){let t={},n;function r(o){return ce(t,o)&&t[o]!==Db}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===Db&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=Db),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==Db&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function OK(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=He(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=s?r:c<=s?i:o}function ne(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),De(r,n)}function zh(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function vc(e){return typeof e=="boolean"}function zu(e){return Object.prototype.toString.call(e)==="[object Date]"}function NK(e){return e&&Oe(e[Symbol.iterator])}function Qe(e){return typeof e=="number"}function IK(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function le(e){return typeof e=="string"}function OF(e,t,n){e&&(e=t?ae(e).map(a=>a.replace(/\\(.)/g,"$1")):ae(e));const r=e&&e.length,i=n&&n.get||bK,o=a=>i(t?[a]:xa(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return Ci(s,e,"key")}function LK(e,t){const n=e[0],r=He(e),i=+t;return i?i===1?r:n+i*(r-n):n}const G$e=1e4;function zK(e){e=+e||G$e;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>ce(t,s)||ce(n,s),get:s=>ce(t,s)?t[s]:ce(n,s)?o(s,n[s]):void 0,set:(s,a)=>ce(t,s)?t[s]=a:o(s,a)}}function BK(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function u0(e,t){let n="";for(;--t>=0;)n+=e;return n}function jK(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?u0(i,s)+o:r==="center"?u0(i,~~(s/2))+o+u0(i,Math.ceil(s/2)):o+u0(i,s)}function J1(e){return e&&He(e)-e[0]||0}function te(e){return G(e)?"["+e.map(te)+"]":se(e)||le(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function NF(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Y$e=e=>Qe(e)||zu(e)?e:Date.parse(e);function IF(e,t){return t=t||Y$e,e==null||e===""?null:t(e)}function LF(e){return e==null||e===""?null:e+""}function gs(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function UK(e,t,n,r){const i=r??"…",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function Jl(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function X$e(e){return e}function K$e(e){if(e==null)return X$e;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;u<c;)f[u]=a[u],++u;return f}}function Q$e(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Z$e(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return x7(e,n)})}:x7(e,t)}function x7(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=VK(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function VK(e,t){var n=K$e(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Q$e(f,p)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(a)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(t)}function J$e(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=u,t[c]=d)}),t.forEach(function(u){var c=a(u),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,p=i[f]){delete i[p.end];var m=p===h?h:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function a(u){var c=e.arcs[u<0?~u:u],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function eAe(e){return VK(e,tAe.apply(this,arguments))}function tAe(e,t,n){var r,i,o;if(arguments.length>1)r=nAe(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:J$e(e,r)}}function nAe(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function l(f){f.forEach(a)}function u(f){f.forEach(l)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function ul(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rAe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lg(e){let t,n,r;e.length!==2?(t=ul,n=(a,l)=>ul(e(a),l),r=(a,l)=>e(a)-l):(t=e===ul||e===rAe?e:iAe,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function iAe(){return 0}function WK(e){return e===null?NaN:+e}function*oAe(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const HK=Lg(ul),Ku=HK.right,sAe=HK.left;Lg(WK).center;function aAe(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function lAe(e,t){const n=aAe(e,t);return n&&Math.sqrt(n)}class qr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class w7 extends Map{constructor(t,n=YK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(W3(this,t))}has(t){return super.has(W3(this,t))}set(t,n){return super.set(qK(this,t),n)}delete(t){return super.delete(GK(this,t))}}class Sw extends Set{constructor(t,n=YK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(W3(this,t))}add(t){return super.add(qK(this,t))}delete(t){return super.delete(GK(this,t))}}function W3({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function qK({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function GK({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function YK(e){return e!==null&&typeof e=="object"?e.valueOf():e}function uAe(e,t){return Array.from(t,n=>e[n])}function cAe(e=ul){if(e===ul)return XK;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function XK(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const fAe=Math.sqrt(50),dAe=Math.sqrt(10),hAe=Math.sqrt(2);function kw(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=fAe?10:o>=dAe?5:o>=hAe?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?kw(e,t,n*2):[a,l,u]}function H3(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?kw(t,e,n):kw(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(i+u)/-s;else for(let u=0;u<a;++u)l[u]=(i+u)*s;return l}function q3(e,t,n){return t=+t,e=+e,n=+n,kw(e,t,n)[2]}function Qu(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?q3(t,e,n):q3(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function If(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function G3(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function KK(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?XK:cAe(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*f/l+d)),p=Math.min(r,Math.floor(t+(l-u)*f/l+d));KK(e,t,h,p,i)}const o=e[t];let s=n,a=r;for(_m(e,n,t),i(e[r],o)>0&&_m(e,n,r);s<a;){for(_m(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?_m(e,n,a):(++a,_m(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function _m(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Y3(e,t,n){if(e=Float64Array.from(oAe(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return G3(e);if(t>=1)return If(e);var r,i=(r-1)*t,o=Math.floor(i),s=If(KK(e,o).subarray(0,o+1)),a=G3(e.subarray(o+1));return s+(a-s)*(i-o)}}function QK(e,t,n=WK){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function pAe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function ZK(e,t){return Y3(e,.5,t)}function*gAe(e){for(const t of e)yield*t}function JK(e){return Array.from(gAe(e))}function Ni(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function eQ(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function mAe(e,...t){e=new Sw(e),t=t.map(yAe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function yAe(e){return e instanceof Sw?e:new Sw(e)}function vAe(...e){const t=new Sw;for(const n of e)for(const r of n)t.add(r);return t}function bAe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Cw(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Up(e){return e=Cw(Math.abs(e)),e?e[1]:NaN}function xAe(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function wAe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var SAe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zf(e){if(!(t=SAe.exec(e)))throw new Error("invalid format: "+e);var t;return new zF({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Zf.prototype=zF.prototype;function zF(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zF.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kAe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var tQ;function CAe(e,t){var n=Cw(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(tQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Cw(e,Math.max(0,t+o-1))[0]}function S7(e,t){var n=Cw(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const k7={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:bAe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>S7(e*100,t),r:S7,s:CAe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function C7(e){return e}var _7=Array.prototype.map,E7=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function nQ(e){var t=e.grouping===void 0||e.thousands===void 0?C7:xAe(_7.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?C7:wAe(_7.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Zf(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(v=!0,w="g"):k7[w]||(b===void 0&&(b=12),x=!0,w="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var k=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=g==="$"?r:/[%p]/.test(w)?s:"",C=k7[w],_=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function $(A){var N=k,M=S,R,F,D;if(w==="c")M=C(A)+M,A="";else{A=+A;var I=A<0||1/A<0;if(A=isNaN(A)?l:C(Math.abs(A),b),x&&(A=kAe(A)),I&&+A==0&&p!=="+"&&(I=!1),N=(I?p==="("?p:a:p==="-"||p==="("?"":p)+N,M=(w==="s"?E7[8+tQ/3]:"")+M+(I&&p==="("?")":""),_){for(R=-1,F=A.length;++R<F;)if(D=A.charCodeAt(R),48>D||D>57){M=(D===46?i+A.slice(R+1):A.slice(R))+M,A=A.slice(0,R);break}}}v&&!m&&(A=t(A,1/0));var O=N.length+A.length+M.length,j=O<y?new Array(y-O+1).join(d):"";switch(v&&m&&(A=t(j+A,j.length?y-M.length:1/0),j=""),h){case"<":A=N+A+M+j;break;case"=":A=N+j+A+M;break;case"^":A=j.slice(0,O=j.length>>1)+N+A+M+j.slice(O);break;default:A=j+N+A+M;break}return o(A)}return $.toString=function(){return f+""},$}function c(f,d){var h=u((f=Zf(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Up(d)/3)))*3,g=Math.pow(10,-p),m=E7[8+p/3];return function(y){return h(g*y)+m}}return{format:u,formatPrefix:c}}var Ob,ev,BF;_Ae({thousands:",",grouping:[3],currency:["$",""]});function _Ae(e){return Ob=nQ(e),ev=Ob.format,BF=Ob.formatPrefix,Ob}function rQ(e){return Math.max(0,-Up(Math.abs(e)))}function iQ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Up(t)/3)))*3-Up(Math.abs(e)))}function oQ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Up(t)-Up(e))+1}const N$=new Date,I$=new Date;function Sn(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=o=>Sn(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(N$.setTime(+o),I$.setTime(+s),e(N$),e(I$),Math.floor(n(N$,I$))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const Vp=Sn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Vp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Sn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Vp);Vp.range;const Ja=1e3,xo=Ja*60,el=xo*60,kl=el*24,jF=kl*7,$7=kl*30,L$=kl*365,tl=Sn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ja)},(e,t)=>(t-e)/Ja,e=>e.getUTCSeconds());tl.range;const nC=Sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ja)},(e,t)=>{e.setTime(+e+t*xo)},(e,t)=>(t-e)/xo,e=>e.getMinutes());nC.range;const rC=Sn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*xo)},(e,t)=>(t-e)/xo,e=>e.getUTCMinutes());rC.range;const iC=Sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ja-e.getMinutes()*xo)},(e,t)=>{e.setTime(+e+t*el)},(e,t)=>(t-e)/el,e=>e.getHours());iC.range;const oC=Sn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*el)},(e,t)=>(t-e)/el,e=>e.getUTCHours());oC.range;const cl=Sn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xo)/kl,e=>e.getDate()-1);cl.range;const Bu=Sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/kl,e=>e.getUTCDate()-1);Bu.range;const sQ=Sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/kl,e=>Math.floor(e/kl));sQ.range;function Ed(e){return Sn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*xo)/jF)}const zg=Ed(0),_w=Ed(1),EAe=Ed(2),$Ae=Ed(3),Wp=Ed(4),AAe=Ed(5),TAe=Ed(6);zg.range;_w.range;EAe.range;$Ae.range;Wp.range;AAe.range;TAe.range;function $d(e){return Sn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/jF)}const Bg=$d(0),Ew=$d(1),MAe=$d(2),PAe=$d(3),Hp=$d(4),FAe=$d(5),RAe=$d(6);Bg.range;Ew.range;MAe.range;PAe.range;Hp.range;FAe.range;RAe.range;const Xy=Sn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Xy.range;const Ky=Sn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ky.range;const da=Sn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());da.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});da.range;const ha=Sn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ha.range;function aQ(e,t,n,r,i,o){const s=[[tl,1,Ja],[tl,5,5*Ja],[tl,15,15*Ja],[tl,30,30*Ja],[o,1,xo],[o,5,5*xo],[o,15,15*xo],[o,30,30*xo],[i,1,el],[i,3,3*el],[i,6,6*el],[i,12,12*el],[r,1,kl],[r,2,2*kl],[n,1,jF],[t,1,$7],[t,3,3*$7],[e,1,L$]];function a(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),p=h?h.range(u,+c+1):[];return d?p.reverse():p}function l(u,c,f){const d=Math.abs(c-u)/f,h=Lg(([,,m])=>m).right(s,d);if(h===s.length)return e.every(Qu(u/L$,c/L$,f));if(h===0)return Vp.every(Math.max(Qu(u,c,f),1));const[p,g]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[DAe,OAe]=aQ(ha,Ky,Bg,sQ,oC,rC),[NAe,IAe]=aQ(da,Xy,zg,cl,iC,nC),Qn="year",vi="quarter",xr="month",vn="week",bi="date",mr="day",pa="dayofyear",Gi="hours",Yi="minutes",Po="seconds",ms="milliseconds",UF=[Qn,vi,xr,vn,bi,mr,pa,Gi,Yi,Po,ms],z$=UF.reduce((e,t,n)=>(e[t]=1+n,e),{});function VF(e){const t=ae(e).slice(),n={};return t.length||q("Missing time unit."),t.forEach(i=>{ce(z$,i)?n[i]=1:q(`Invalid time unit: ${i}.`)}),(n[vn]||n[mr]?1:0)+(n[vi]||n[xr]||n[bi]?1:0)+(n[pa]?1:0)>1&&q(`Incompatible time units: ${e}`),t.sort((i,o)=>z$[i]-z$[o]),t}const LAe={[Qn]:"%Y ",[vi]:"Q%q ",[xr]:"%b ",[bi]:"%d ",[vn]:"W%U ",[mr]:"%a ",[pa]:"%j ",[Gi]:"%H:00",[Yi]:"00:%M",[Po]:":%S",[ms]:".%L",[`${Qn}-${xr}`]:"%Y-%m ",[`${Qn}-${xr}-${bi}`]:"%Y-%m-%d ",[`${Gi}-${Yi}`]:"%H:%M"};function lQ(e,t){const n=De({},LAe,t),r=VF(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const af=new Date;function WF(e){return af.setFullYear(e),af.setMonth(0),af.setDate(1),af.setHours(0,0,0,0),af}function uQ(e){return fQ(new Date(e))}function cQ(e){return X3(new Date(e))}function fQ(e){return cl.count(WF(e.getFullYear())-1,e)}function X3(e){return zg.count(WF(e.getFullYear())-1,e)}function K3(e){return WF(e).getDay()}function zAe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function dQ(e){return pQ(new Date(e))}function hQ(e){return Q3(new Date(e))}function pQ(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Bu.count(t-1,e)}function Q3(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Bg.count(t-1,e)}function Z3(e){return af.setTime(Date.UTC(e,0,1)),af.getUTCDay()}function BAe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function gQ(e,t,n,r,i){const o=t||1,s=He(e),a=(y,v,b)=>(b=b||y,jAe(n[b],r[b],y===s&&o,v)),l=new Date,u=gs(e),c=u[Qn]?a(Qn):_r(2012),f=u[xr]?a(xr):u[vi]?a(vi):lu,d=u[vn]&&u[mr]?a(mr,1,vn+mr):u[vn]?a(vn,1):u[mr]?a(mr,1):u[bi]?a(bi,1):u[pa]?a(pa,1):Dg,h=u[Gi]?a(Gi):lu,p=u[Yi]?a(Yi):lu,g=u[Po]?a(Po):lu,m=u[ms]?a(ms):lu;return function(y){l.setTime(+y);const v=c(l);return i(v,f(l),d(l,v),h(l),p(l),g(l),m(l))}}function jAe(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function qp(e,t,n){return t+e*7-(n+6)%7}const UAe={[Qn]:e=>e.getFullYear(),[vi]:e=>Math.floor(e.getMonth()/3),[xr]:e=>e.getMonth(),[bi]:e=>e.getDate(),[Gi]:e=>e.getHours(),[Yi]:e=>e.getMinutes(),[Po]:e=>e.getSeconds(),[ms]:e=>e.getMilliseconds(),[pa]:e=>fQ(e),[vn]:e=>X3(e),[vn+mr]:(e,t)=>qp(X3(e),e.getDay(),K3(t)),[mr]:(e,t)=>qp(1,e.getDay(),K3(t))},VAe={[vi]:e=>3*e,[vn]:(e,t)=>qp(e,0,K3(t))};function mQ(e,t){return gQ(e,t||1,UAe,VAe,zAe)}const WAe={[Qn]:e=>e.getUTCFullYear(),[vi]:e=>Math.floor(e.getUTCMonth()/3),[xr]:e=>e.getUTCMonth(),[bi]:e=>e.getUTCDate(),[Gi]:e=>e.getUTCHours(),[Yi]:e=>e.getUTCMinutes(),[Po]:e=>e.getUTCSeconds(),[ms]:e=>e.getUTCMilliseconds(),[pa]:e=>pQ(e),[vn]:e=>Q3(e),[mr]:(e,t)=>qp(1,e.getUTCDay(),Z3(t)),[vn+mr]:(e,t)=>qp(Q3(e),e.getUTCDay(),Z3(t))},HAe={[vi]:e=>3*e,[vn]:(e,t)=>qp(e,0,Z3(t))};function yQ(e,t){return gQ(e,t||1,WAe,HAe,BAe)}const qAe={[Qn]:da,[vi]:Xy.every(3),[xr]:Xy,[vn]:zg,[bi]:cl,[mr]:cl,[pa]:cl,[Gi]:iC,[Yi]:nC,[Po]:tl,[ms]:Vp},GAe={[Qn]:ha,[vi]:Ky.every(3),[xr]:Ky,[vn]:Bg,[bi]:Bu,[mr]:Bu,[pa]:Bu,[Gi]:oC,[Yi]:rC,[Po]:tl,[ms]:Vp};function jg(e){return qAe[e]}function Ug(e){return GAe[e]}function vQ(e,t,n){return e?e.offset(t,n):void 0}function bQ(e,t,n){return vQ(jg(e),t,n)}function xQ(e,t,n){return vQ(Ug(e),t,n)}function wQ(e,t,n,r){return e?e.range(t,n,r):void 0}function SQ(e,t,n,r){return wQ(jg(e),t,n,r)}function kQ(e,t,n,r){return wQ(Ug(e),t,n,r)}const c0=1e3,f0=c0*60,d0=f0*60,sC=d0*24,YAe=sC*7,A7=sC*30,J3=sC*365,CQ=[Qn,xr,bi,Gi,Yi,Po,ms],h0=CQ.slice(0,-1),p0=h0.slice(0,-1),g0=p0.slice(0,-1),XAe=g0.slice(0,-1),KAe=[Qn,vn],T7=[Qn,xr],_Q=[Qn],Em=[[h0,1,c0],[h0,5,5*c0],[h0,15,15*c0],[h0,30,30*c0],[p0,1,f0],[p0,5,5*f0],[p0,15,15*f0],[p0,30,30*f0],[g0,1,d0],[g0,3,3*d0],[g0,6,6*d0],[g0,12,12*d0],[XAe,1,sC],[KAe,1,YAe],[T7,1,A7],[T7,3,3*A7],[_Q,1,J3]];function EQ(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(J1(t))/n;let i=Lg(a=>a[2]).right(Em,r),o,s;return i===Em.length?(o=_Q,s=Qu(t[0]/J3,t[1]/J3,n)):i?(i=Em[r/Em[i-1][2]<Em[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=CQ,s=Math.max(Qu(t[0],t[1],n),1)),{units:o,step:s}}function B$(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function j$(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $m(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function $Q(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=Am(i),c=Tm(i),f=Am(o),d=Tm(o),h=Am(s),p=Tm(s),g=Am(a),m=Tm(a),y=Am(l),v=Tm(l),b={a:I,A:O,b:j,B:Y,c:null,d:O7,e:O7,f:b5e,g:T5e,G:P5e,H:m5e,I:y5e,j:v5e,L:AQ,m:x5e,M:w5e,p:W,q:oe,Q:L7,s:z7,S:S5e,u:k5e,U:C5e,V:_5e,w:E5e,W:$5e,x:null,X:null,y:A5e,Y:M5e,Z:F5e,"%":I7},x={a:re,A:we,b:Re,B:lt,c:null,d:N7,e:N7,f:N5e,g:q5e,G:Y5e,H:R5e,I:D5e,j:O5e,L:MQ,m:I5e,M:L5e,p:Cn,q:rr,Q:L7,s:z7,S:z5e,u:B5e,U:j5e,V:U5e,w:V5e,W:W5e,x:null,X:null,y:H5e,Y:G5e,Z:X5e,"%":I7},w={a:$,A,b:N,B:M,c:R,d:R7,e:R7,f:d5e,g:F7,G:P7,H:D7,I:D7,j:l5e,L:f5e,m:a5e,M:u5e,p:_,q:s5e,Q:p5e,s:g5e,S:c5e,u:t5e,U:n5e,V:r5e,w:e5e,W:i5e,x:F,X:D,y:F7,Y:P7,Z:o5e,"%":h5e};b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x);function k(ue,_e){return function(Ee){var Q=[],hn=-1,et=0,_n=ue.length,an,no,Wd;for(Ee instanceof Date||(Ee=new Date(+Ee));++hn<_n;)ue.charCodeAt(hn)===37&&(Q.push(ue.slice(et,hn)),(no=M7[an=ue.charAt(++hn)])!=null?an=ue.charAt(++hn):no=an==="e"?" ":"0",(Wd=_e[an])&&(an=Wd(Ee,no)),Q.push(an),et=hn+1);return Q.push(ue.slice(et,hn)),Q.join("")}}function S(ue,_e){return function(Ee){var Q=$m(1900,void 0,1),hn=C(Q,ue,Ee+="",0),et,_n;if(hn!=Ee.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(_e&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(et=j$($m(Q.y,0,1)),_n=et.getUTCDay(),et=_n>4||_n===0?Ew.ceil(et):Ew(et),et=Bu.offset(et,(Q.V-1)*7),Q.y=et.getUTCFullYear(),Q.m=et.getUTCMonth(),Q.d=et.getUTCDate()+(Q.w+6)%7):(et=B$($m(Q.y,0,1)),_n=et.getDay(),et=_n>4||_n===0?_w.ceil(et):_w(et),et=cl.offset(et,(Q.V-1)*7),Q.y=et.getFullYear(),Q.m=et.getMonth(),Q.d=et.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),_n="Z"in Q?j$($m(Q.y,0,1)).getUTCDay():B$($m(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(_n+5)%7:Q.w+Q.U*7-(_n+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,j$(Q)):B$(Q)}}function C(ue,_e,Ee,Q){for(var hn=0,et=_e.length,_n=Ee.length,an,no;hn<et;){if(Q>=_n)return-1;if(an=_e.charCodeAt(hn++),an===37){if(an=_e.charAt(hn++),no=w[an in M7?_e.charAt(hn++):an],!no||(Q=no(ue,Ee,Q))<0)return-1}else if(an!=Ee.charCodeAt(Q++))return-1}return Q}function _(ue,_e,Ee){var Q=u.exec(_e.slice(Ee));return Q?(ue.p=c.get(Q[0].toLowerCase()),Ee+Q[0].length):-1}function $(ue,_e,Ee){var Q=h.exec(_e.slice(Ee));return Q?(ue.w=p.get(Q[0].toLowerCase()),Ee+Q[0].length):-1}function A(ue,_e,Ee){var Q=f.exec(_e.slice(Ee));return Q?(ue.w=d.get(Q[0].toLowerCase()),Ee+Q[0].length):-1}function N(ue,_e,Ee){var Q=y.exec(_e.slice(Ee));return Q?(ue.m=v.get(Q[0].toLowerCase()),Ee+Q[0].length):-1}function M(ue,_e,Ee){var Q=g.exec(_e.slice(Ee));return Q?(ue.m=m.get(Q[0].toLowerCase()),Ee+Q[0].length):-1}function R(ue,_e,Ee){return C(ue,t,_e,Ee)}function F(ue,_e,Ee){return C(ue,n,_e,Ee)}function D(ue,_e,Ee){return C(ue,r,_e,Ee)}function I(ue){return s[ue.getDay()]}function O(ue){return o[ue.getDay()]}function j(ue){return l[ue.getMonth()]}function Y(ue){return a[ue.getMonth()]}function W(ue){return i[+(ue.getHours()>=12)]}function oe(ue){return 1+~~(ue.getMonth()/3)}function re(ue){return s[ue.getUTCDay()]}function we(ue){return o[ue.getUTCDay()]}function Re(ue){return l[ue.getUTCMonth()]}function lt(ue){return a[ue.getUTCMonth()]}function Cn(ue){return i[+(ue.getUTCHours()>=12)]}function rr(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var _e=k(ue+="",b);return _e.toString=function(){return ue},_e},parse:function(ue){var _e=S(ue+="",!1);return _e.toString=function(){return ue},_e},utcFormat:function(ue){var _e=k(ue+="",x);return _e.toString=function(){return ue},_e},utcParse:function(ue){var _e=S(ue+="",!0);return _e.toString=function(){return ue},_e}}}var M7={"-":"",_:" ",0:"0"},In=/^\s*\d+/,QAe=/^%/,ZAe=/[\\^$*+?|[\]().{}]/g;function Ze(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function JAe(e){return e.replace(ZAe,"\\$&")}function Am(e){return new RegExp("^(?:"+e.map(JAe).join("|")+")","i")}function Tm(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function e5e(e,t,n){var r=In.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function t5e(e,t,n){var r=In.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function n5e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function r5e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function i5e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function P7(e,t,n){var r=In.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function F7(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function o5e(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function s5e(e,t,n){var r=In.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function a5e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function R7(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function l5e(e,t,n){var r=In.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function D7(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function u5e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function c5e(e,t,n){var r=In.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function f5e(e,t,n){var r=In.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function d5e(e,t,n){var r=In.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function h5e(e,t,n){var r=QAe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function p5e(e,t,n){var r=In.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function g5e(e,t,n){var r=In.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function O7(e,t){return Ze(e.getDate(),t,2)}function m5e(e,t){return Ze(e.getHours(),t,2)}function y5e(e,t){return Ze(e.getHours()%12||12,t,2)}function v5e(e,t){return Ze(1+cl.count(da(e),e),t,3)}function AQ(e,t){return Ze(e.getMilliseconds(),t,3)}function b5e(e,t){return AQ(e,t)+"000"}function x5e(e,t){return Ze(e.getMonth()+1,t,2)}function w5e(e,t){return Ze(e.getMinutes(),t,2)}function S5e(e,t){return Ze(e.getSeconds(),t,2)}function k5e(e){var t=e.getDay();return t===0?7:t}function C5e(e,t){return Ze(zg.count(da(e)-1,e),t,2)}function TQ(e){var t=e.getDay();return t>=4||t===0?Wp(e):Wp.ceil(e)}function _5e(e,t){return e=TQ(e),Ze(Wp.count(da(e),e)+(da(e).getDay()===4),t,2)}function E5e(e){return e.getDay()}function $5e(e,t){return Ze(_w.count(da(e)-1,e),t,2)}function A5e(e,t){return Ze(e.getFullYear()%100,t,2)}function T5e(e,t){return e=TQ(e),Ze(e.getFullYear()%100,t,2)}function M5e(e,t){return Ze(e.getFullYear()%1e4,t,4)}function P5e(e,t){var n=e.getDay();return e=n>=4||n===0?Wp(e):Wp.ceil(e),Ze(e.getFullYear()%1e4,t,4)}function F5e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ze(t/60|0,"0",2)+Ze(t%60,"0",2)}function N7(e,t){return Ze(e.getUTCDate(),t,2)}function R5e(e,t){return Ze(e.getUTCHours(),t,2)}function D5e(e,t){return Ze(e.getUTCHours()%12||12,t,2)}function O5e(e,t){return Ze(1+Bu.count(ha(e),e),t,3)}function MQ(e,t){return Ze(e.getUTCMilliseconds(),t,3)}function N5e(e,t){return MQ(e,t)+"000"}function I5e(e,t){return Ze(e.getUTCMonth()+1,t,2)}function L5e(e,t){return Ze(e.getUTCMinutes(),t,2)}function z5e(e,t){return Ze(e.getUTCSeconds(),t,2)}function B5e(e){var t=e.getUTCDay();return t===0?7:t}function j5e(e,t){return Ze(Bg.count(ha(e)-1,e),t,2)}function PQ(e){var t=e.getUTCDay();return t>=4||t===0?Hp(e):Hp.ceil(e)}function U5e(e,t){return e=PQ(e),Ze(Hp.count(ha(e),e)+(ha(e).getUTCDay()===4),t,2)}function V5e(e){return e.getUTCDay()}function W5e(e,t){return Ze(Ew.count(ha(e)-1,e),t,2)}function H5e(e,t){return Ze(e.getUTCFullYear()%100,t,2)}function q5e(e,t){return e=PQ(e),Ze(e.getUTCFullYear()%100,t,2)}function G5e(e,t){return Ze(e.getUTCFullYear()%1e4,t,4)}function Y5e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Hp(e):Hp.ceil(e),Ze(e.getUTCFullYear()%1e4,t,4)}function X5e(){return"+0000"}function I7(){return"%"}function L7(e){return+e}function z7(e){return Math.floor(+e/1e3)}var Jd,HF,FQ,qF,RQ;K5e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function K5e(e){return Jd=$Q(e),HF=Jd.format,FQ=Jd.parse,qF=Jd.utcFormat,RQ=Jd.utcParse,Jd}function m0(e){const t={};return n=>t[n]||(t[n]=e(n))}function Q5e(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=Z5e(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function Z5e(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function DQ(e){const t=m0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Zf(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return Q5e(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=Zf(s??",f");const a=Qu(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=iQ(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=oQ(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=rQ(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let eT;OQ();function OQ(){return eT=DQ({format:ev,formatPrefix:BF})}function NQ(e){return DQ(nQ(e))}function $w(e){return arguments.length?eT=NQ(e):eT}function B7(e,t,n){n=n||{},se(n)||q(`Invalid time multi-format specifier: ${n}`);const r=t(Po),i=t(Yi),o=t(Gi),s=t(bi),a=t(vn),l=t(xr),u=t(vi),c=t(Qn),f=e(n[ms]||".%L"),d=e(n[Po]||":%S"),h=e(n[Yi]||"%I:%M"),p=e(n[Gi]||"%I %p"),g=e(n[bi]||n[mr]||"%a %d"),m=e(n[vn]||"%b %d"),y=e(n[xr]||"%B"),v=e(n[vi]||"%B"),b=e(n[Qn]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:o(x)<x?h:s(x)<x?p:l(x)<x?a(x)<x?g:m:c(x)<x?u(x)<x?y:v:b)(x)}function IQ(e){const t=m0(e.format),n=m0(e.utcFormat);return{timeFormat:r=>le(r)?t(r):B7(t,jg,r),utcFormat:r=>le(r)?n(r):B7(n,Ug,r),timeParse:m0(e.parse),utcParse:m0(e.utcParse)}}let tT;LQ();function LQ(){return tT=IQ({format:HF,parse:FQ,utcFormat:qF,utcParse:RQ})}function zQ(e){return IQ($Q(e))}function Qy(e){return arguments.length?tT=zQ(e):tT}const nT=(e,t)=>De({},e,t);function BQ(e,t){const n=e?NQ(e):$w(),r=t?zQ(t):Qy();return nT(n,r)}function GF(e,t){const n=arguments.length;return n&&n!==2&&q("defaultLocale expects either zero or two arguments."),n?nT($w(e),Qy(t)):nT($w(),Qy())}function J5e(){return OQ(),LQ(),GF()}const e3e=/^(data:|([A-Za-z]+:)?\/\/)/,t3e=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,n3e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,j7="file://";function r3e(e,t){return n=>({options:n||{},sanitize:o3e,load:i3e,fileAccess:!!t,file:s3e(t),http:l3e(e)})}async function i3e(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function o3e(e,t){t=De({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=t3e.test(e.replace(n3e,""));(e==null||typeof e!="string"||!a)&&q("Sanitize failure, invalid URI: "+te(e));const l=e3e.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(j7))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(j7.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function s3e(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):a3e}async function a3e(){q("No file system access.")}function l3e(e){return e?async function(t,n){const r=De({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Oe(o[i])?o[i]():o.text():q(o.status+""+o.statusText)}:u3e}async function u3e(){q("No HTTP fetch method available.")}const c3e=e=>e!=null&&e===e,f3e=e=>e==="true"||e==="false"||e===!0||e===!1,d3e=e=>!Number.isNaN(Date.parse(e)),jQ=e=>!Number.isNaN(+e)&&!(e instanceof Date),h3e=e=>jQ(e)&&Number.isInteger(+e),rT={boolean:NF,integer:yr,number:yr,date:IF,string:LF,unknown:Cr},Nb=[f3e,h3e,jQ,d3e],p3e=["boolean","integer","number","date"];function UQ(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Nb.length,i=Nb.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&c3e(l)&&!Nb[a](l)&&(i[a]=0,++s,s===Nb.length))return"string";return p3e[i.reduce((o,s)=>o===0?s:o,0)-1]}function VQ(e,t){return t.reduce((n,r)=>(n[r]=UQ(e,r),n),{})}function U7(e){const t=function(n,r){const i={delimiter:e};return YF(n,r?De(r,i):i)};return t.responseType="text",t}function YF(e,t){return t.header&&(e=t.header.map(te).join(t.delimiter)+`
`+e),x$e(t.delimiter).parse(e+"")}YF.responseType="text";function g3e(e){return typeof Buffer=="function"&&Oe(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function XF(e,t){const n=t&&t.property?To(t.property):Cr;return se(e)&&!g3e(e)?m3e(n(e),t):n(JSON.parse(e))}XF.responseType="json";function m3e(e,t){return!G(e)&&NK(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const y3e={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function WQ(e,t){let n,r,i,o;return e=XF(e,t),t&&t.feature?(n=Z$e,i=t.feature):t&&t.mesh?(n=eAe,i=t.mesh,o=y3e[t.filter]):q("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):q("Invalid TopoJSON object: "+i),r&&r.features||[r]}WQ.responseType="json";const e2={dsv:YF,csv:U7(","),tsv:U7("	"),json:XF,topojson:WQ};function KF(e,t){return arguments.length>1?(e2[e]=t,this):ce(e2,e)?e2[e]:null}function HQ(e){const t=KF(e);return t&&t.responseType||"text"}function qQ(e,t,n,r){t=t||{};const i=KF(t.type||"json");return i||q("Unknown data format type: "+t.type),e=i(e,t),t.parse&&v3e(e,t.parse,n,r),ce(e,"columns")&&delete e.columns,e}function v3e(e,t,n,r){if(!e.length)return;const i=Qy();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,c,f;t==="auto"&&(t=VQ(e,o)),o=Object.keys(t);const d=o.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!rT[p])throw Error("Illegal format pattern: "+h+":"+p);return rT[p]});for(l=0,c=e.length,f=o.length;l<c;++l)for(s=e[l],u=0;u<f;++u)a=o[u],s[a]=d[u](s[a])}const aC=r3e(typeof fetch<"u"&&fetch,null);function lC(e){const t=e||Cr,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function t2(e,t){try{await t(e)}catch(n){e.error(n)}}const GQ=Symbol("vega_id");let b3e=1;function uC(e){return!!(e&&ve(e))}function ve(e){return e[GQ]}function YQ(e,t){return e[GQ]=t,e}function st(e){const t=e===Object(e)?e:{data:e};return ve(t)?t:YQ(t,b3e++)}function QF(e){return cC(e,st({}))}function cC(e,t){for(const n in e)t[n]=e[n];return t}function XQ(e,t){return YQ(t,ve(e))}function Ad(e,t){return e?t?(n,r)=>e(n,r)||ve(t(n))-ve(t(r)):(n,r)=>e(n,r)||ve(n)-ve(r):null}function KQ(e){return e&&e.constructor===Td}function Td(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:Td,insert(a){const l=ae(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=Oe(a)?r:t,u=ae(a),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(a,l,u){const c={field:l,value:_r(u)};return Oe(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return Oe(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let f,d,h,p,g,m;for(f=0,d=l.length;f<d;++f)u[ve(l[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],u[ve(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],l.forEach(v=>{p(v)&&(u[ve(v)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],m=ve(g),u[m]?u[m]=1:a.add.push(st(e[f]));for(f=0,d=l.length;f<d;++f)g=l[f],u[ve(g)]<0&&a.rem.push(g);function y(v,b,x){x?v[b]=x(v):a.encode=b,s||(c[ve(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=u[ve(g)],m>0&&(y(g,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,l.forEach(v=>{p(v)&&u[ve(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?l.filter(v=>u[ve(v)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const n2="_:mod:_";function fC(){Object.defineProperty(this,n2,{writable:!0,value:{}})}fC.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[n2];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=G(n)?1+n.length:-1),i},modified(e,t){const n=this[n2];if(arguments.length){if(G(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[n2]={},this}};let x3e=0;const w3e="pulse",S3e=new fC,k3e=1,C3e=2;function wt(e,t,n,r){this.id=++x3e,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function V7(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}wt.prototype={targets(){return this._targets||(this._targets=lC(Z1))},set(e){return this.value!==e?(this.value=e,1):0},skip:V7(k3e),modified:V7(C3e),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new fC,i=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(f,d,h)=>{h instanceof wt?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===w3e)ae(a).forEach(f=>{f instanceof wt?f!==this&&(f.targets().add(this),o.push(f)):q("Pulse parameters must be operator instances.")}),this.source=a;else if(G(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||S3e,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function _3e(e,t,n,r){let i=1,o;return e instanceof wt?o=e:e&&e.prototype instanceof wt?o=new e:Oe(e)?o=new wt(null,e):(i=0,o=new wt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function E3e(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let $3e=0;function dC(e,t,n){this.id=++$3e,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Gl(e,t,n){return new dC(e,t,n)}dC.prototype={_filter:Mo,_apply:Cr,targets(){return this._targets||(this._targets=lC(Z1))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Gl(e);return this.targets().add(t),t},apply(e){const t=Gl(null,e);return this.targets().add(t),t},merge(){const e=Gl();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Gl();return this.targets().add(Gl(null,null,DF(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Gl(null,null,()=>n=!0)),t.targets().add(Gl(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Mo,this._targets=null}};function A3e(e,t,n,r){const i=this,o=Gl(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ae(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function T3e(e,t){const n=this.locale();return qQ(e,t,n.timeParse,n.utcParse)}function M3e(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function P3e(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:HQ(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function F3e(e,t,n){const r=this,i=r._pending||R3e(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(Mo).insert(o.data||[])),i.done(),o}function R3e(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const D3e={skip:!0};function O3e(e,t,n,r,i){return(e instanceof wt?I3e:N3e)(this,e,t,n,r,i),this}function N3e(e,t,n,r,i,o){const s=De({},o,D3e);let a,l;Oe(n)||(n=_r(n)),r===void 0?a=u=>e.touch(n(u)):Oe(r)?(l=new wt(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),f=l.value;KQ(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function I3e(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new wt(null,L3e(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function L3e(e,t){return t=Oe(t)?t:_r(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function z3e(e){e.rank=++this._rank}function B3e(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&q("Cycle detected in dataflow graph.")}const Aw={},Ls=1,eu=2,ja=4,j3e=Ls|eu,W7=Ls|ja,eh=Ls|eu|ja,H7=8,Mm=16,q7=32,G7=64;function ju(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function U$(e,t){const n=[];return Jl(e,t,r=>n.push(r)),n}function Y7(e,t){const n={};return e.visit(t,r=>{n[ve(r)]=1}),r=>n[ve(r)]?null:r}function Ib(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}ju.prototype={StopPropagation:Aw,ADD:Ls,REM:eu,MOD:ja,ADD_REM:j3e,ADD_MOD:W7,ALL:eh,REFLOW:H7,SOURCE:Mm,NO_SOURCE:q7,NO_FIELDS:G7,fork(e){return new ju(this.dataflow).init(this,e)},clone(){const e=this.fork(eh);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(eh|Mm)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new ju(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&G7)&&(n.fields=e.fields),t&Ls?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&eu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ja?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&q7?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||eh;return t&Ls&&this.add.length||t&eu&&this.rem.length||t&ja&&this.mod.length},reflow(e){if(e)return this.fork(eh).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ja,Y7(this,Ls))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return G(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?G(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ls&&(n.addF=Ib(n.addF,t)),e&eu&&(n.remF=Ib(n.remF,t)),e&ja&&(n.modF=Ib(n.modF,t)),e&Mm&&(n.srcF=Ib(n.srcF,t)),n},materialize(e){e=e||eh;const t=this;return e&Ls&&t.addF&&(t.add=U$(t.add,t.addF),t.addF=null),e&eu&&t.remF&&(t.rem=U$(t.rem,t.remF),t.remF=null),e&ja&&t.modF&&(t.mod=U$(t.mod,t.modF),t.modF=null),e&Mm&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&Mm)return Jl(n.source,n.srcF,r),n;e&Ls&&Jl(n.add,n.addF,r),e&eu&&Jl(n.rem,n.remF,r),e&ja&&Jl(n.mod,n.modF,r);const i=n.source;if(e&H7&&i){const o=n.add.length+n.mod.length;o===i.length||(o?Jl(i,Y7(n,W7),r):Jl(i,n.srcF,r))}return n}};function ZF(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ne(ZF,ju,{fork(e){const t=new ju(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?G(e)?e.some(r=>n[r]):n[e]:0},filter(){q("MultiPulse does not support filtering.")},materialize(){q("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function U3e(e,t,n){const r=this,i=[];if(r._pulse)return QQ(r);if(r._pending&&await r._pending,t&&await t2(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new ju(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=lC(Z1);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=Aw),l!==Aw&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await t2(r,c[f].callback)}return n&&await t2(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function V3e(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function W3e(e,t,n){return this._pulse?QQ(this):(this.evaluate(e,t,n),this)}function H3e(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function QQ(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function q3e(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function G3e(e,t){const n=e.source,r=this._clock;return n&&G(n)?new ZF(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Y3e(this._pulse,n&&n.pulse)}function Y3e(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Aw&&(e.source=t.source),e)}const JF={skip:!1,force:!1};function X3e(e,t){const n=t||JF;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function K3e(e,t,n){const r=n||JF;return(e.set(t)||r.force)&&this.touch(e,r),this}function Q3e(e,t,n){this.touch(e,n||JF);const r=new ju(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Z3e(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),ZQ(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,J3e(t,0,e)):r=n,r}}}function ZQ(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function J3e(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,ZQ(e,r,t,n)}function np(){this.logger(TF()),this.logLevel(Zk),this._clock=0,this._rank=0,this._locale=GF();try{this._loader=aC()}catch{}this._touched=lC(Z1),this._input={},this._pulse=null,this._heap=Z3e((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Pm(e){return function(){return this._log[e].apply(this,arguments)}}np.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Pm("error"),warn:Pm("warn"),info:Pm("info"),debug:Pm("debug"),logLevel:Pm("level"),cleanThreshold:1e4,add:_3e,connect:E3e,rank:z3e,rerank:B3e,pulse:Q3e,touch:X3e,update:K3e,changeset:Td,ingest:M3e,parse:T3e,preload:F3e,request:P3e,events:A3e,on:O3e,evaluate:U3e,run:W3e,runAsync:V3e,runAfter:H3e,_enqueue:q3e,_getPulse:G3e};function V(e,t){wt.call(this,e,null,t)}ne(V,wt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Gp={};function JQ(e){const t=eZ(e);return t&&t.Definition||null}function eZ(e){return e=e&&e.toLowerCase(),ce(Gp,e)?Gp[e]:null}function*tZ(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function eR(e,t,n){const r=Float64Array.from(tZ(e,n));return r.sort(ul),t.map(i=>QK(r,i))}function tR(e,t){return eR(e,[.25,.5,.75],t)}function nR(e,t){const n=e.length,r=lAe(e,t),i=tR(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function nZ(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+g)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Fo=Math.random;function eTe(e){Fo=e}function rZ(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(tZ(e,r)),o=i.length,s=t;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(Fo()*o)];c[u]=a/o}return c.sort(ul),[Y3(c,n/2),Y3(c,1-n/2)]}function iZ(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,c=l+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?tTe(o,t+t/4):o}function tTe(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function nTe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function rTe(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*Fo())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const oZ=Math.sqrt(2*Math.PI),iTe=Math.SQRT2;let Fm=NaN;function hC(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(Fm===Fm)n=Fm,Fm=NaN;else{do n=Fo()*2-1,r=Fo()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Fm=r*o}return e+n*t}function rR(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*oZ)}function pC(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function gC(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*iTe*oTe(2*e-1)}function oTe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function iR(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>hC(n,r),pdf:o=>rR(o,n,r),cdf:o=>pC(o,n,r),icdf:o=>gC(o,n,r)};return i.mean(e).stdev(t)}function oR(e,t){const n=iR();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=nR(e)),i):t},sample(){return e[~~(Fo()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function sR(e,t){return e=e||0,t=t??1,Math.exp(e+hC()*t)}function aR(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*oZ*e)}function lR(e,t,n){return pC(Math.log(e),t,n)}function uR(e,t,n){return Math.exp(gC(e,t,n))}function sZ(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>sR(n,r),pdf:o=>aR(o,n,r),cdf:o=>lR(o,n,r),icdf:o=>uR(o,n,r)};return i.mean(e).stdev(t)}function aZ(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Fo();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function cR(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Fo()}function fR(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function dR(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function hR(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function lZ(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>cR(n,r),pdf:o=>fR(o,n,r),cdf:o=>dR(o,n,r),icdf:o=>hR(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function pR(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function tv(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function mC(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,l+=(c-l)/a,u+=(f-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function nv(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function Vg(e,t,n,r,i){let o=0,s=0;return nv(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;o+=u*u,s+=c*c}),1-o/s}function gR(e,t,n){let r=0,i=0,o=0,s=0,a=0;nv(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=tv(r,i,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Vg(e,t,n,i,u)}}function uZ(e,t,n){let r=0,i=0,o=0,s=0,a=0;nv(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=tv(r,i,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Vg(e,t,n,i,u)}}function cZ(e,t,n){const[r,i,o,s]=mC(e,t,n);let a=0,l=0,u=0,c=0,f=0,d,h,p;nv(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,l+=(p-l)/f,u+=(p*h-u)/f,c+=(d*p-c)/f});const[g,m]=tv(l/s,a/s,u/s,c/s),y=v=>Math.exp(g+m*(v-o));return{coef:[Math.exp(g-m*o),m],predict:y,rSquared:Vg(e,t,n,s,y)}}function fZ(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;nv(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++l,r+=(h-r)/l,i+=(p-i)/l,o+=(h*p-o)/l,s+=(h*h-s)/l,a+=(d-a)/l});const u=tv(r,i,o,s),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Vg(e,t,n,a,c)}}function mR(e,t,n){const[r,i,o,s]=mC(e,t,n),a=r.length;let l=0,u=0,c=0,f=0,d=0,h,p,g,m;for(h=0;h<a;)p=r[h],g=i[h++],m=p*p,l+=(m-l)/h,u+=(m*p-u)/h,c+=(m*m-c)/h,f+=(p*g-f)/h,d+=(m*g-d)/h;const y=c-l*l,v=l*y-u*u,b=(d*l-f*u)/v,x=(f*y-d*u)/v,w=-b*l,k=S=>(S=S-o,b*S*S+x*S+w+s);return{coef:[w-x*o+b*o*o+s,x-2*b*o,b],predict:k,rSquared:Vg(e,t,n,s,k)}}function dZ(e,t,n,r){if(r===0)return pR(e,t,n);if(r===1)return gR(e,t,n);if(r===2)return mR(e,t,n);const[i,o,s,a]=mC(e,t,n),l=i.length,u=[],c=[],f=r+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d)*o[p];for(u.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d+h);m[h]=g}c.push(m)}c.push(u);const y=aTe(c),v=b=>{b-=s;let x=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)x+=y[d]*Math.pow(b,d);return x};return{coef:sTe(f,y,-s,a),predict:v,rSquared:Vg(e,t,n,a,v)}}function sTe(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function aTe(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const X7=2,K7=1e-12;function hZ(e,t,n,r){const[i,o,s,a]=mC(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=X7;){const p=[0,u-1];for(let m=0;m<l;++m){const y=i[m],v=p[0],b=p[1],x=y-i[v]>i[b]-y?v:b;let w=0,k=0,S=0,C=0,_=0;const $=1/Math.abs(i[x]-y||1);for(let M=v;M<=b;++M){const R=i[M],F=o[M],D=lTe(Math.abs(y-R)*$)*d[M],I=R*D;w+=D,k+=I,S+=F*D,C+=F*I,_+=R*I}const[A,N]=tv(k/w,S/w,C/w,_/w);c[m]=A+N*y,f[m]=Math.abs(o[m]-c[m]),uTe(i,m+1,p)}if(h===X7)break;const g=ZK(f);if(Math.abs(g)<K7)break;for(let m=0,y,v;m<l;++m)y=f[m]/(6*g),d[m]=y>=1?K7:(v=1-y*y)*v}return cTe(i,c,s,a)}function lTe(e){return(e=1-e*e*e)*e*e}function uTe(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function cTe(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const fTe=.5*Math.PI/180;function yC(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],c=[];if(n===r){for(let g=1;g<r;++g)u.push(i(o+g/n*a));return u.push(i(s)),u}else{c.push(i(s));for(let g=n;--g>0;)c.push(i(o+g/n*a))}let f=u[0],d=c[c.length-1];const h=1/a,p=dTe(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=l&&hTe(f,g,d,h,p)>fTe?c.push(g):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function dTe(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function hTe(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function pTe(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function iT(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:pTe(e)}function pZ(e,t,n){return n||e+(t?"_"+t:"")}const V$=()=>{},gTe={init:V$,add:V$,rem:V$,idx:0},Zy={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},rv=Object.keys(Zy).filter(e=>e!=="__count__");function mTe(e,t){return(n,r)=>De({name:e,aggregate_param:r,out:n||e},gTe,t)}[...rv,"__count__"].forEach(e=>{Zy[e]=mTe(e,Zy[e])});function gZ(e,t,n){return Zy[e](n,t)}function mZ(e,t){return e.idx-t.idx}function yTe(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Zy[i]())})};return e.forEach(n),Object.values(t).sort(mZ)}function vTe(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function bTe(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function xTe(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function wTe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function yZ(e,t){const n=t||Cr,r=yTe(e),i=e.slice().sort(mZ);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=vTe,o.prototype.add=bTe,o.prototype.rem=xTe,o.prototype.set=wTe,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function yR(e){this._key=e?To(e):ve,this.reset()}const nr=yR.prototype;nr.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};nr.add=function(e){this._add.push(e)};nr.rem=function(e){this._rem.push(e)};nr.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};nr.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",ce(n,o)||(n[o]=1,++i);return i};nr.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=DK(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};nr.argmin=function(e){return this.extent(e)[0]||{}};nr.argmax=function(e){return this.extent(e)[1]||{}};nr.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};nr.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};nr.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=tR(this.values(),e),this._get=e),this._q};nr.q1=function(e){return this.quartile(e)[0]};nr.q2=function(e){return this.quartile(e)[1]};nr.q3=function(e){return this.quartile(e)[2]};nr.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=rZ(this.values(),1e3,.05,e),this._get=e),this._ci};nr.ci0=function(e){return this.ci(e)[0]};nr.ci1=function(e){return this.ci(e)[1]};function Zu(e){V.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Zu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:rv},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ne(Zu,V,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,c,f;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][f=c[n[u]]]=f}o(e._prev),o(t);function s(a,l,u){const c=n[u],f=r[u++];for(const d in f){const h=a?a+"|"+d:d;l[c]=f[d],u<i?s(h,l,u):t[h]||e.cell(h,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=ae(br(v)),x=b.length;let w=0,k;for(;w<x;++w)r[k=b[w]]||(r[k]=1,t.push(k))}this._dims=ae(e.groupby),this._dnames=this._dims.map(v=>{const b=Qt(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:iT(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let f,d,h,p,g,m,y;for(u!==s.length&&q("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(f=o[y],d=s[y],h=a[y]||null,f==null&&d!=="count"&&q("Null aggregate field specified."),g=Qt(f),m=pZ(d,g,l[y]),n.push(m),d==="count"){this._counts.push(m);continue}p=c[g],p||(i(f),p=c[g]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(gZ(d,h,m))}return this._measures=this._measures.map(v=>yZ(v,v.field)),Object.create(null)},cellkey:iT(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new yR),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?XQ(t.tuple,o):st(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,c,f;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&i?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const STe=1e-14;function vR(e){V.call(this,null,e)}vR.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ne(vR,V,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(br(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const f=r(c);c[a]=f,c[l]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=nZ(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let c=yr(t(u));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(STe+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=Ci(l,br(t),e.name||"bin_"+Qt(t))}});function vZ(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?BK(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function bR(e){V.call(this,[],e)}bR.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ne(bR,V,{transform(e,t){const n=t.fork(t.ALL),r=vZ(ve,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Ad(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function bZ(e){wt.call(this,null,kTe,e)}ne(bZ,wt);function kTe(e){return this.value&&!e.modified()?this.value:RF(e.fields,e.orders)}function xR(e){V.call(this,null,e)}xR.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function CTe(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ne(xR,V,{transform(e,t){const n=f=>d=>{for(var h=CTe(a(d),e.case,o)||[],p,g=0,m=h.length;g<m;++g)s.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=st({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function wR(e){V.call(this,null,e)}wR.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ne(wR,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=_Te(a,i,o,e.filter||Mo)):n.mod=a,n.source=this.value,n.modifies(r)}});function _Te(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(st(o)),o={},o[t]=u);return i}const Q7={kde:oR,mixture:aZ,normal:iR,lognormal:sZ,uniform:lZ},ETe="distributions",Z7="function",$Te="field";function xZ(e,t){const n=e[Z7];ce(Q7,n)||q("Unknown distribution function: "+n);const r=Q7[n]();for(const i in e)i===$Te?r.data((e.from||t()).map(e[i])):i===ETe?r[i](e[i].map(o=>xZ(o,t))):typeof r[i]===Z7&&r[i](e[i]);return r}function SR(e){V.call(this,null,e)}const wZ=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ATe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:wZ},{name:"weights",type:"number",array:!0}]};SR.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:wZ.concat(ATe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ne(SR,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=xZ(e.distribution,TTe(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&q("Invalid density method: "+s),!e.extent&&!r.data&&q("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||fa(r.data()),u=yC(s,l,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],st(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function TTe(e){return()=>e.materialize(e.SOURCE).source}function SZ(e,t){return e?e.map((n,r)=>t[r]||Qt(n)):null}function kR(e,t,n){const r=[],i=f=>f(l);let o,s,a,l,u,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),c=o[u],c||(o[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const kZ="bin";function CR(e){V.call(this,null,e)}CR.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:kZ}]};const MTe=(e,t)=>J1(fa(e,t))/30;ne(CR,V,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=kR(t.source,e.groupby,Cr),i=e.smooth||!1,o=e.field,s=e.step||MTe(n,o),a=Ad((p,g)=>o(p)-o(g)),l=e.as||kZ,u=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<u;++d){const p=r[d].sort(a);h=-1;for(const g of iZ(p,s,i,o))g<c&&(c=g),g>f&&(f=g),p[++h][l]=g}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(l)}});function CZ(e){wt.call(this,null,PTe,e),this.modified(!0)}ne(CZ,wt);function PTe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ci(n=>t(n,e),br(t),Qt(t))}function _R(e){V.call(this,[void 0,void 0],e)}_R.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ne(_R,V,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=yr(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Qt(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function ER(e,t){wt.call(this,e),this.parent=t,this.count=0}ne(ER,wt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function vC(e){V.call(this,{},e),this._keys=Ig();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ne(vC,V,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=ce(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new ER(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=ve(l),c=o.get(u);c!==void 0&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(ve(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=ve(l),c=o.get(u),f=r(l);c===f?a(f).mod(l):(o.set(u,f),a(c).rem(l),a(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(ve(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=ve(l),c=o.get(u),f=r(l);c!==f&&(o.set(u,f),a(c).rem(l),a(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function _Z(e){wt.call(this,null,FTe,e)}ne(_Z,wt);function FTe(e){return this.value&&!e.modified()?this.value:G(e.name)?ae(e.name).map(t=>To(t)):To(e.name,e.as)}function $R(e){V.call(this,Ig(),e)}$R.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ne($R,V,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,f=>{const d=ve(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{l(f,e)?o.push(f):r.set(ve(f),1)});function c(f){const d=ve(f),h=l(f,e),p=r.get(d);h&&p?(r.delete(d),o.push(f)):!h&&!p?(r.set(d,1),s.push(f)):u&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function AR(e){V.call(this,[],e)}AR.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ne(AR,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=SZ(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<u;++c){for(d=QF(a),f=0;f<s;++f)d[i[f]]=(h=l[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function TR(e){V.call(this,[],e)}TR.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ne(TR,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Qt),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=QF(u),f[s]=i[c],f[a]=r[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function MR(e){V.call(this,null,e)}MR.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ne(MR,V,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function EZ(e){V.call(this,[],e)}ne(EZ,V,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=st(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const Lb={value:"value",median:ZK,mean:pAe,min:G3,max:If},RTe=[];function PR(e){V.call(this,[],e)}PR.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function DTe(e){var t=e.method||Lb.value,n;if(Lb[t]==null)q("Unrecognized imputation method: "+t);else return t===Lb.value?(n=e.value!==void 0?e.value:0,()=>n):Lb[t]}function OTe(e){const t=e.field;return n=>n?t(n):NaN}ne(PR,V,{transform(e,t){var n=t.fork(t.ALL),r=DTe(e),i=OTe(e),o=Qt(e.field),s=Qt(e.key),a=(e.groupby||[]).map(Qt),l=NTe(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,d,h,p,g,m,y,v,b,x,w;for(m=0,b=l.length;m<b;++m)for(d=l[m],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(g=l.domain[v],w={_impute:!0},y=0,x=p.length;y<x;++y)w[a[y]]=p[y];w[s]=g,w[o]=Number.isNaN(h)?h=r(d,i):h,u.push(st(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function NTe(e,t,n,r){var i=y=>y(m),o=[],s=r?r.slice():[],a={},l={},u,c,f,d,h,p,g,m;for(s.forEach((y,v)=>a[y]=v+1),d=0,g=e.length;d<g;++d)m=e[d],p=n(m),h=a[p]||(a[p]=s.push(p)),c=(u=t?t.map(i):RTe)+"",(f=l[c])||(f=l[c]=[],o.push(f),f.values=u),f[h-1]=m;return o.domain=s,o}function FR(e){Zu.call(this,e)}FR.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:rv},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ne(FR,Zu,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{De(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function RR(e){V.call(this,null,e)}RR.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ne(RR,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=kR(r,e.groupby,e.field),o=(e.groupby||[]).map(Qt),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&q("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=fa(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=oR(h,s)[a],g=e.counts?h.length:1,m=c||fa(h);yC(p,m,f,d).forEach(y=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[l[0]]=y[0],v[l[1]]=y[1]*g,u.push(st(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function $Z(e){wt.call(this,null,ITe,e)}ne($Z,wt);function ITe(e){return this.value&&!e.modified()?this.value:OF(e.fields,e.flat)}function AZ(e){V.call(this,[],e),this._pending=null}ne(AZ,V,{transform(e,t){const n=t.dataflow;return this._pending?W$(this,t,this._pending):LTe(e)?t.StopPropagation:e.values?W$(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ae(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>W$(this,t,ae(r.data)))}});function LTe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function W$(e,t,n){n.forEach(st);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function DR(e){V.call(this,{},e)}DR.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ne(DR,V,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&q('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&q('The "as" parameter has too few output field names.'),c=c||i.map(Qt),f=function(p){for(var g=0,m=0,y,v;g<a;++g)if(v=r.get(n[g](p)),v==null)for(y=0;y<d;++y,++m)p[c[m]]=o;else for(y=0;y<d;++y,++m)p[c[m]]=i[y](v)}):(c||q("Missing output field names."),f=function(p){for(var g=0,m;g<a;++g)m=r.get(n[g](p)),p[c[g]]=m??o}),s?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,f),u.modifies(c)}});function TZ(e){wt.call(this,null,zTe,e)}ne(TZ,wt);function zTe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function MZ(e){wt.call(this,null,BTe,e)}ne(MZ,wt);function BTe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function PZ(e){V.call(this,null,e)}ne(PZ,V,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function OR(e){Zu.call(this,e)}OR.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:rv,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ne(OR,Zu,{_transform:Zu.prototype.transform,transform(e,t){return this._transform(jTe(e,t),t)}});function jTe(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=br(n).concat(br(r)),s=VTe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>UTe(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function UTe(e,t,n,r){return Ci(i=>t(i)===e?n(i):NaN,r,e+"")}function VTe(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(tC),t?i.slice(0,t):i}function FZ(e){vC.call(this,e)}ne(FZ,vC,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(ve(o),n,t,o);return(e.modified("field")||r&&t.modified(br(r)))&&q("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(st(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function NR(e){V.call(this,null,e)}NR.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ne(NR,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=SZ(e.fields,e.as||[]),o=r?(a,l)=>WTe(a,l,r,i):cC;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=ve(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,st({}));s[ve(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[ve(a)]))}),n}});function WTe(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function RZ(e){V.call(this,null,e)}ne(RZ,V,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function IR(e){V.call(this,null,e)}IR.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const HTe=1e-14;ne(IR,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=kR(i,e.groupby,e.field),s=(e.groupby||[]).map(Qt),a=[],l=e.step||.01,u=e.probs||Ni(l/2,1-HTe,l),c=u.length;return o.forEach(f=>{const d=eR(f,u);for(let h=0;h<c;++h){const p={};for(let g=0;g<s.length;++g)p[s[g]]=f.dims[g];p[r[0]]=u[h],p[r[1]]=d[h],a.push(st(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function DZ(e){V.call(this,null,e)}ne(DZ,V,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=ve(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=QF(i);r[ve(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[ve(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function LR(e){V.call(this,[],e),this.count=0}LR.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ne(LR,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[ve(f)]=1,c),{});let s=this.value,a=this.count,l=0;function u(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*Fo()),d<s.length&&d>=l&&(f=s[d],o[ve(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=ve(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[ve(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[ve(c)]||u(c)}),l=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[ve(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[ve(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(c=>!o[ve(c)])),this.count=a,this.value=n.source=s,n}});function zR(e){V.call(this,null,e)}zR.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ne(zR,V,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ni(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,st(o)}),n.add=t.add.concat(this.value),n}});function OZ(e){V.call(this,null,e),this.modified(!0)}ne(OZ,V,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function BR(e){V.call(this,null,e)}const NZ=["unit0","unit1"];BR.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:UF,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:NZ}]};ne(BR,V,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?Ug:jg)(o.unit).offset,a=e.as||NZ,l=a[0],u=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(br(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let m,y;g==null?(p[l]=null,r&&(p[u]=null)):(p[l]=m=y=o(g),r&&(p[u]=y=s(m,c)),m<f&&(f=m),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:EQ({extent:e.extent||fa(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=VF(r),s=this.value||{},a=(n?yQ:mQ)(o,i);return a.unit=He(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function IZ(e){V.call(this,Ig(),e)}ne(IZ,V,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function LZ(e){V.call(this,null,e)}ne(LZ,V,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ad(e.sort)):t.source).map(e.field))}});function qTe(e,t,n,r){const i=Jy[e](t,n);return{init:i.init||lu,update:function(o,s){s[r]=i.next(o)}}}const Jy={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Jy.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||q("ntile num must be greater than zero.");const n=Jy.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||q("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=GTe(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function GTe(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const YTe=Object.keys(Jy);function zZ(e){const t=ae(e.ops),n=ae(e.fields),r=ae(e.params),i=ae(e.aggregate_params),o=ae(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[];let d=!0;function h(p){ae(br(p)).forEach(g=>l[g]=1)}h(e.sort),t.forEach((p,g)=>{const m=n[g],y=r[g],v=i[g]||null,b=Qt(m),x=pZ(p,b,o[g]);if(h(m),s.push(x),ce(Jy,p))a.push(qTe(p,m,y,x));else{if(m==null&&p!=="count"&&q("Null aggregate field specified."),p==="count"){c.push(x);return}d=!1;let w=u[b];w||(w=u[b]=[],w.field=m,f.push(w)),w.push(gZ(p,v,x))}}),(c.length||f.length)&&(this.cell=XTe(f,c,d)),this.inputs=Object.keys(l)}const BZ=zZ.prototype;BZ.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};BZ.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function XTe(e,t,n){e=e.map(l=>yZ(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new yR;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function jR(e){V.call(this,{},e),this._mlen=0,this._mods=[]}jR.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:YTe.concat(rv)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ne(jR,V,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Ad(e.sort),i=iT(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new zZ(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)KTe(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=vZ(ve),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function KTe(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?Lg(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||_r(-1)};t.init();for(let f=0;f<l;++f)QTe(c,s,f,l),o&&ZTe(c,u),t.update(c,a[f])}function QTe(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function ZTe(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const JTe=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Zu,bin:vR,collect:bR,compare:bZ,countpattern:xR,cross:wR,density:SR,dotbin:CR,expression:CZ,extent:_R,facet:vC,field:_Z,filter:$R,flatten:AR,fold:TR,formula:MR,generate:EZ,impute:PR,joinaggregate:FR,kde:RR,key:$Z,load:AZ,lookup:DR,multiextent:TZ,multivalues:MZ,params:PZ,pivot:OR,prefacet:FZ,project:NR,proxy:RZ,quantile:IR,relay:DZ,sample:LR,sequence:zR,sieve:OZ,subflow:ER,timeunit:BR,tupleindex:IZ,values:LZ,window:jR},Symbol.toStringTag,{value:"Module"}));function ut(e){return function(){return e}}const J7=Math.abs,sr=Math.atan2,Ic=Math.cos,e4e=Math.max,H$=Math.min,Fs=Math.sin,vf=Math.sqrt,ur=1e-12,Yp=Math.PI,Tw=Yp/2,jZ=2*Yp;function t4e(e){return e>1?0:e<-1?Yp:Math.acos(e)}function ez(e){return e>=1?Tw:e<=-1?-Tw:Math.asin(e)}const oT=Math.PI,sT=2*oT,tf=1e-6,n4e=sT-tf;function UZ(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function r4e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return UZ;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let UR=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?UZ:r4e(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,u=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>tf)if(!(Math.abs(f*l-u*c)>tf)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,p=i-a,g=l*l+u*u,m=h*h+p*p,y=Math.sqrt(g),v=Math.sqrt(d),b=o*Math.tan((oT-Math.acos((g+d-m)/(2*y*v)))/2),x=b/v,w=b/y;Math.abs(x-1)>tf&&this._append`L${t+x*c},${n+x*f}`,this._append`A${o},${o},0,0,${+(f*h>c*p)},${this._x1=t+w*l},${this._y1=n+w*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>tf||Math.abs(this._y1-c)>tf)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%sT+sT),d>n4e?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>tf&&this._append`A${r},${r},0,${+(d>=oT)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function bC(){return new UR}bC.prototype=UR.prototype;function xC(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new UR(t)}function i4e(e){return e.innerRadius}function o4e(e){return e.outerRadius}function s4e(e){return e.startAngle}function a4e(e){return e.endAngle}function l4e(e){return e&&e.padAngle}function u4e(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,c=s-i,f=a-o,d=f*l-c*u;if(!(d*d<ur))return d=(c*(t-o)-f*(e-i))/d,[e+d*l,t+d*u]}function zb(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/vf(a*a+l*l),c=u*l,f=-u*a,d=e+c,h=t+f,p=n+c,g=r+f,m=(d+p)/2,y=(h+g)/2,v=p-d,b=g-h,x=v*v+b*b,w=i-o,k=d*g-p*h,S=(b<0?-1:1)*vf(e4e(0,w*w*x-k*k)),C=(k*b-v*S)/x,_=(-k*v-b*S)/x,$=(k*b+v*S)/x,A=(-k*v+b*S)/x,N=C-m,M=_-y,R=$-m,F=A-y;return N*N+M*M>R*R+F*F&&(C=$,_=A),{cx:C,cy:_,x01:-c,y01:-f,x11:C*(i/w-1),y11:_*(i/w-1)}}function c4e(){var e=i4e,t=o4e,n=ut(0),r=null,i=s4e,o=a4e,s=l4e,a=null,l=xC(u);function u(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-Tw,g=o.apply(this,arguments)-Tw,m=J7(g-p),y=g>p;if(a||(a=c=l()),h<d&&(f=h,h=d,d=f),!(h>ur))a.moveTo(0,0);else if(m>jZ-ur)a.moveTo(h*Ic(p),h*Fs(p)),a.arc(0,0,h,p,g,!y),d>ur&&(a.moveTo(d*Ic(g),d*Fs(g)),a.arc(0,0,d,g,p,y));else{var v=p,b=g,x=p,w=g,k=m,S=m,C=s.apply(this,arguments)/2,_=C>ur&&(r?+r.apply(this,arguments):vf(d*d+h*h)),$=H$(J7(h-d)/2,+n.apply(this,arguments)),A=$,N=$,M,R;if(_>ur){var F=ez(_/d*Fs(C)),D=ez(_/h*Fs(C));(k-=F*2)>ur?(F*=y?1:-1,x+=F,w-=F):(k=0,x=w=(p+g)/2),(S-=D*2)>ur?(D*=y?1:-1,v+=D,b-=D):(S=0,v=b=(p+g)/2)}var I=h*Ic(v),O=h*Fs(v),j=d*Ic(w),Y=d*Fs(w);if($>ur){var W=h*Ic(b),oe=h*Fs(b),re=d*Ic(x),we=d*Fs(x),Re;if(m<Yp)if(Re=u4e(I,O,re,we,W,oe,j,Y)){var lt=I-Re[0],Cn=O-Re[1],rr=W-Re[0],ue=oe-Re[1],_e=1/Fs(t4e((lt*rr+Cn*ue)/(vf(lt*lt+Cn*Cn)*vf(rr*rr+ue*ue)))/2),Ee=vf(Re[0]*Re[0]+Re[1]*Re[1]);A=H$($,(d-Ee)/(_e-1)),N=H$($,(h-Ee)/(_e+1))}else A=N=0}S>ur?N>ur?(M=zb(re,we,I,O,h,N,y),R=zb(W,oe,j,Y,h,N,y),a.moveTo(M.cx+M.x01,M.cy+M.y01),N<$?a.arc(M.cx,M.cy,N,sr(M.y01,M.x01),sr(R.y01,R.x01),!y):(a.arc(M.cx,M.cy,N,sr(M.y01,M.x01),sr(M.y11,M.x11),!y),a.arc(0,0,h,sr(M.cy+M.y11,M.cx+M.x11),sr(R.cy+R.y11,R.cx+R.x11),!y),a.arc(R.cx,R.cy,N,sr(R.y11,R.x11),sr(R.y01,R.x01),!y))):(a.moveTo(I,O),a.arc(0,0,h,v,b,!y)):a.moveTo(I,O),!(d>ur)||!(k>ur)?a.lineTo(j,Y):A>ur?(M=zb(j,Y,W,oe,d,-A,y),R=zb(I,O,re,we,d,-A,y),a.lineTo(M.cx+M.x01,M.cy+M.y01),A<$?a.arc(M.cx,M.cy,A,sr(M.y01,M.x01),sr(R.y01,R.x01),!y):(a.arc(M.cx,M.cy,A,sr(M.y01,M.x01),sr(M.y11,M.x11),!y),a.arc(0,0,d,sr(M.cy+M.y11,M.cx+M.x11),sr(R.cy+R.y11,R.cx+R.x11),y),a.arc(R.cx,R.cy,A,sr(R.y11,R.x11),sr(R.y01,R.x01),!y))):a.arc(0,0,d,w,x,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Yp/2;return[Ic(f)*c,Fs(f)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:ut(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:ut(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:ut(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:ut(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:ut(+c),u):i},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:ut(+c),u):o},u.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:ut(+c),u):s},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function VZ(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function WZ(e){this._context=e}WZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function VR(e){return new WZ(e)}function HZ(e){return e[0]}function qZ(e){return e[1]}function GZ(e,t){var n=ut(!0),r=null,i=VR,o=null,s=xC(a);e=typeof e=="function"?e:e===void 0?HZ:ut(e),t=typeof t=="function"?t:t===void 0?qZ:ut(t);function a(l){var u,c=(l=VZ(l)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,u,l),+t(f,u,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ut(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ut(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ut(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function YZ(e,t,n){var r=null,i=ut(!0),o=null,s=VR,a=null,l=xC(u);e=typeof e=="function"?e:e===void 0?HZ:ut(+e),t=typeof t=="function"?t:ut(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?qZ:ut(+n);function u(f){var d,h,p,g=(f=VZ(f)).length,m,y=!1,v,b=new Array(g),x=new Array(g);for(o==null&&(a=s(v=l())),d=0;d<=g;++d){if(!(d<g&&i(m=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(m,d,f),x[d]=+t(m,d,f),a.point(r?+r(m,d,f):b[d],n?+n(m,d,f):x[d]))}if(v)return a=null,v+""||null}function c(){return GZ().defined(i).curve(s).context(o)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ut(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ut(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ut(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:ut(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ut(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ut(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ut(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),u):s},u.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),u):o},u}const f4e={draw(e,t){const n=vf(t/Yp);e.moveTo(n,0),e.arc(0,0,n,0,jZ)}};function d4e(e,t){let n=null,r=xC(i);e=typeof e=="function"?e:ut(e||f4e),t=typeof t=="function"?t:ut(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:ut(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:ut(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Ju(){}function Mw(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function wC(e){this._context=e}wC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function h4e(e){return new wC(e)}function XZ(e){this._context=e}XZ.prototype={areaStart:Ju,areaEnd:Ju,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Mw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function p4e(e){return new XZ(e)}function KZ(e){this._context=e}KZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Mw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function g4e(e){return new KZ(e)}function QZ(e,t){this._basis=new wC(e),this._beta=t}QZ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const m4e=function e(t){function n(r){return t===1?new wC(r):new QZ(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Pw(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function WR(e,t){this._context=e,this._k=(1-t)/6}WR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Pw(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Pw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const y4e=function e(t){function n(r){return new WR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function HR(e,t){this._context=e,this._k=(1-t)/6}HR.prototype={areaStart:Ju,areaEnd:Ju,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Pw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const v4e=function e(t){function n(r){return new HR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function qR(e,t){this._context=e,this._k=(1-t)/6}qR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Pw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const b4e=function e(t){function n(r){return new qR(r,t)}return n.tension=function(r){return e(+r)},n}(0);function GR(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>ur){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ur){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function ZZ(e,t){this._context=e,this._alpha=t}ZZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:GR(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const x4e=function e(t){function n(r){return t?new ZZ(r,t):new WR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function JZ(e,t){this._context=e,this._alpha=t}JZ.prototype={areaStart:Ju,areaEnd:Ju,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:GR(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const w4e=function e(t){function n(r){return t?new JZ(r,t):new HR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function eJ(e,t){this._context=e,this._alpha=t}eJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:GR(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S4e=function e(t){function n(r){return t?new eJ(r,t):new qR(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function tJ(e){this._context=e}tJ.prototype={areaStart:Ju,areaEnd:Ju,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function k4e(e){return new tJ(e)}function tz(e){return e<0?-1:1}function nz(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(tz(o)+tz(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function rz(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function q$(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function Fw(e){this._context=e}Fw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:q$(this,this._t0,rz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,q$(this,rz(this,n=nz(this,e,t)),n);break;default:q$(this,this._t0,n=nz(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function nJ(e){this._context=new rJ(e)}(nJ.prototype=Object.create(Fw.prototype)).point=function(e,t){Fw.prototype.point.call(this,t,e)};function rJ(e){this._context=e}rJ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function C4e(e){return new Fw(e)}function _4e(e){return new nJ(e)}function iJ(e){this._context=e}iJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=iz(e),i=iz(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function iz(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function E4e(e){return new iJ(e)}function SC(e,t){this._context=e,this._t=t}SC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function $4e(e){return new SC(e,.5)}function A4e(e){return new SC(e,0)}function T4e(e){return new SC(e,1)}function Uu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const M4e=()=>typeof Image<"u"?Image:null;function wa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function bc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const aT=Symbol("implicit");function YR(){var e=new w7,t=[],n=[],r=aT;function i(o){let s=e.get(o);if(s===void 0){if(r!==aT)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new w7;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return YR(t,n).unknown(r)},wa.apply(i,arguments),i}function Wg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iv(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xc(){}var Jf=.7,Xp=1/Jf,rp="\\s*([+-]?\\d+)\\s*",e1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",P4e=/^#([0-9a-f]{3,8})$/,F4e=new RegExp(`^rgb\\(${rp},${rp},${rp}\\)$`),R4e=new RegExp(`^rgb\\(${sa},${sa},${sa}\\)$`),D4e=new RegExp(`^rgba\\(${rp},${rp},${rp},${e1}\\)$`),O4e=new RegExp(`^rgba\\(${sa},${sa},${sa},${e1}\\)$`),N4e=new RegExp(`^hsl\\(${e1},${sa},${sa}\\)$`),I4e=new RegExp(`^hsla\\(${e1},${sa},${sa},${e1}\\)$`),oz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wg(xc,t1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sz,formatHex:sz,formatHex8:L4e,formatHsl:z4e,formatRgb:az,toString:az});function sz(){return this.rgb().formatHex()}function L4e(){return this.rgb().formatHex8()}function z4e(){return oJ(this).formatHsl()}function az(){return this.rgb().formatRgb()}function t1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=P4e.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lz(t):n===3?new An(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=F4e.exec(e))?new An(t[1],t[2],t[3],1):(t=R4e.exec(e))?new An(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=D4e.exec(e))?Bb(t[1],t[2],t[3],t[4]):(t=O4e.exec(e))?Bb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=N4e.exec(e))?fz(t[1],t[2]/100,t[3]/100,1):(t=I4e.exec(e))?fz(t[1],t[2]/100,t[3]/100,t[4]):oz.hasOwnProperty(e)?lz(oz[e]):e==="transparent"?new An(NaN,NaN,NaN,0):null}function lz(e){return new An(e>>16&255,e>>8&255,e&255,1)}function Bb(e,t,n,r){return r<=0&&(e=t=n=NaN),new An(e,t,n,r)}function XR(e){return e instanceof xc||(e=t1(e)),e?(e=e.rgb(),new An(e.r,e.g,e.b,e.opacity)):new An}function ec(e,t,n,r){return arguments.length===1?XR(e):new An(e,t,n,r??1)}function An(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Wg(An,ec,iv(xc,{brighter(e){return e=e==null?Xp:Math.pow(Xp,e),new An(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jf:Math.pow(Jf,e),new An(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new An(Lf(this.r),Lf(this.g),Lf(this.b),Rw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uz,formatHex:uz,formatHex8:B4e,formatRgb:cz,toString:cz}));function uz(){return`#${bf(this.r)}${bf(this.g)}${bf(this.b)}`}function B4e(){return`#${bf(this.r)}${bf(this.g)}${bf(this.b)}${bf((isNaN(this.opacity)?1:this.opacity)*255)}`}function cz(){const e=Rw(this.opacity);return`${e===1?"rgb(":"rgba("}${Lf(this.r)}, ${Lf(this.g)}, ${Lf(this.b)}${e===1?")":`, ${e})`}`}function Rw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Lf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function bf(e){return e=Lf(e),(e<16?"0":"")+e.toString(16)}function fz(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rs(e,t,n,r)}function oJ(e){if(e instanceof rs)return new rs(e.h,e.s,e.l,e.opacity);if(e instanceof xc||(e=t1(e)),!e)return new rs;if(e instanceof rs)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new rs(s,a,l,e.opacity)}function Dw(e,t,n,r){return arguments.length===1?oJ(e):new rs(e,t,n,r??1)}function rs(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Wg(rs,Dw,iv(xc,{brighter(e){return e=e==null?Xp:Math.pow(Xp,e),new rs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jf:Math.pow(Jf,e),new rs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new An(G$(e>=240?e-240:e+120,i,r),G$(e,i,r),G$(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new rs(dz(this.h),jb(this.s),jb(this.l),Rw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rw(this.opacity);return`${e===1?"hsl(":"hsla("}${dz(this.h)}, ${jb(this.s)*100}%, ${jb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dz(e){return e=(e||0)%360,e<0?e+360:e}function jb(e){return Math.max(0,Math.min(1,e||0))}function G$(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const sJ=Math.PI/180,aJ=180/Math.PI,Ow=18,lJ=.96422,uJ=1,cJ=.82521,fJ=4/29,ip=6/29,dJ=3*ip*ip,j4e=ip*ip*ip;function hJ(e){if(e instanceof aa)return new aa(e.l,e.a,e.b,e.opacity);if(e instanceof nl)return pJ(e);e instanceof An||(e=XR(e));var t=Q$(e.r),n=Q$(e.g),r=Q$(e.b),i=Y$((.2225045*t+.7168786*n+.0606169*r)/uJ),o,s;return t===n&&n===r?o=s=i:(o=Y$((.4360747*t+.3850649*n+.1430804*r)/lJ),s=Y$((.0139322*t+.0971045*n+.7141733*r)/cJ)),new aa(116*i-16,500*(o-i),200*(i-s),e.opacity)}function Nw(e,t,n,r){return arguments.length===1?hJ(e):new aa(e,t,n,r??1)}function aa(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Wg(aa,Nw,iv(xc,{brighter(e){return new aa(this.l+Ow*(e??1),this.a,this.b,this.opacity)},darker(e){return new aa(this.l-Ow*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=lJ*X$(t),e=uJ*X$(e),n=cJ*X$(n),new An(K$(3.1338561*t-1.6168667*e-.4906146*n),K$(-.9787684*t+1.9161415*e+.033454*n),K$(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Y$(e){return e>j4e?Math.pow(e,1/3):e/dJ+fJ}function X$(e){return e>ip?e*e*e:dJ*(e-fJ)}function K$(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Q$(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function U4e(e){if(e instanceof nl)return new nl(e.h,e.c,e.l,e.opacity);if(e instanceof aa||(e=hJ(e)),e.a===0&&e.b===0)return new nl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*aJ;return new nl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Iw(e,t,n,r){return arguments.length===1?U4e(e):new nl(e,t,n,r??1)}function nl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function pJ(e){if(isNaN(e.h))return new aa(e.l,0,0,e.opacity);var t=e.h*sJ;return new aa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Wg(nl,Iw,iv(xc,{brighter(e){return new nl(this.h,this.c,this.l+Ow*(e??1),this.opacity)},darker(e){return new nl(this.h,this.c,this.l-Ow*(e??1),this.opacity)},rgb(){return pJ(this).rgb()}}));var gJ=-.14861,KR=1.78277,QR=-.29227,kC=-.90649,n1=1.97294,hz=n1*kC,pz=n1*KR,gz=KR*QR-kC*gJ;function V4e(e){if(e instanceof zf)return new zf(e.h,e.s,e.l,e.opacity);e instanceof An||(e=XR(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(gz*r+hz*t-pz*n)/(gz+hz-pz),o=r-i,s=(n1*(n-i)-QR*o)/kC,a=Math.sqrt(s*s+o*o)/(n1*i*(1-i)),l=a?Math.atan2(s,o)*aJ-120:NaN;return new zf(l<0?l+360:l,a,i,e.opacity)}function lT(e,t,n,r){return arguments.length===1?V4e(e):new zf(e,t,n,r??1)}function zf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Wg(zf,lT,iv(xc,{brighter(e){return e=e==null?Xp:Math.pow(Xp,e),new zf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jf:Math.pow(Jf,e),new zf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*sJ,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new An(255*(t+n*(gJ*r+KR*i)),255*(t+n*(QR*r+kC*i)),255*(t+n*(n1*r)),this.opacity)}}));function mJ(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function yJ(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return mJ((n-r/t)*t,s,i,o,a)}}function vJ(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return mJ((n-r/t)*t,i,o,s,a)}}const CC=e=>()=>e;function bJ(e,t){return function(n){return e+n*t}}function W4e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function _C(e,t){var n=t-e;return n?bJ(e,n>180||n<-180?n-360*Math.round(n/360):n):CC(isNaN(e)?t:e)}function H4e(e){return(e=+e)==1?Tn:function(t,n){return n-t?W4e(t,n,e):CC(isNaN(t)?n:t)}}function Tn(e,t){var n=t-e;return n?bJ(e,n):CC(isNaN(e)?t:e)}const uT=function e(t){var n=H4e(t);function r(i,o){var s=n((i=ec(i)).r,(o=ec(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=Tn(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function xJ(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=ec(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var q4e=xJ(yJ),G4e=xJ(vJ);function ZR(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function wJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Y4e(e,t){return(wJ(t)?ZR:SJ)(e,t)}function SJ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=wc(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function kJ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Jo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function CJ(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=wc(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var cT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Z$=new RegExp(cT.source,"g");function X4e(e){return function(){return e}}function K4e(e){return function(t){return e(t)+""}}function _J(e,t){var n=cT.lastIndex=Z$.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=cT.exec(e))&&(i=Z$.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Jo(r,i)})),n=Z$.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?K4e(l[0].x):X4e(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function wc(e,t){var n=typeof t,r;return t==null||n==="boolean"?CC(t):(n==="number"?Jo:n==="string"?(r=t1(t))?(t=r,uT):_J:t instanceof t1?uT:t instanceof Date?kJ:wJ(t)?ZR:Array.isArray(t)?SJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?CJ:Jo)(e,t)}function Q4e(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Z4e(e,t){var n=_C(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function ov(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var mz=180/Math.PI,fT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function EJ(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*mz,skewX:Math.atan(l)*mz,scaleX:s,scaleY:a}}var Ub;function J4e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fT:EJ(t.a,t.b,t.c,t.d,t.e,t.f)}function eMe(e){return e==null||(Ub||(Ub=document.createElementNS("http://www.w3.org/2000/svg","g")),Ub.setAttribute("transform",e),!(e=Ub.transform.baseVal.consolidate()))?fT:(e=e.matrix,EJ(e.a,e.b,e.c,e.d,e.e,e.f))}function $J(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Jo(u,f)},{i:g-2,x:Jo(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Jo(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Jo(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Jo(u,f)},{i:g-2,x:Jo(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),s(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)f[(m=d[p]).i]=m.x(h);return f.join("")}}}var tMe=$J(J4e,"px, ","px)","deg)"),nMe=$J(eMe,", ",")",")"),rMe=1e-12;function yz(e){return((e=Math.exp(e))+1/e)/2}function iMe(e){return((e=Math.exp(e))-1/e)/2}function oMe(e){return((e=Math.exp(2*e))-1)/(e+1)}const sMe=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],d=s[2],h=c-a,p=f-l,g=h*h+p*p,m,y;if(g<rMe)y=Math.log(d/u)/t,m=function(S){return[a+S*h,l+S*p,u*Math.exp(t*S*y)]};else{var v=Math.sqrt(g),b=(d*d-u*u+r*g)/(2*u*n*v),x=(d*d-u*u-r*g)/(2*d*n*v),w=Math.log(Math.sqrt(b*b+1)-b),k=Math.log(Math.sqrt(x*x+1)-x);y=(k-w)/t,m=function(S){var C=S*y,_=yz(w),$=u/(n*v)*(_*oMe(t*C+w)-iMe(w));return[a+$*h,l+$*p,u*_/yz(t*C+w)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function AJ(e){return function(t,n){var r=e((t=Dw(t)).h,(n=Dw(n)).h),i=Tn(t.s,n.s),o=Tn(t.l,n.l),s=Tn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const aMe=AJ(_C);var lMe=AJ(Tn);function uMe(e,t){var n=Tn((e=Nw(e)).l,(t=Nw(t)).l),r=Tn(e.a,t.a),i=Tn(e.b,t.b),o=Tn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function TJ(e){return function(t,n){var r=e((t=Iw(t)).h,(n=Iw(n)).h),i=Tn(t.c,n.c),o=Tn(t.l,n.l),s=Tn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const cMe=TJ(_C);var fMe=TJ(Tn);function MJ(e){return function t(n){n=+n;function r(i,o){var s=e((i=lT(i)).h,(o=lT(o)).h),a=Tn(i.s,o.s),l=Tn(i.l,o.l),u=Tn(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const dMe=MJ(_C);var hMe=MJ(Tn);function JR(e,t){t===void 0&&(t=e,e=wc);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function pMe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const gMe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:wc,interpolateArray:Y4e,interpolateBasis:yJ,interpolateBasisClosed:vJ,interpolateCubehelix:dMe,interpolateCubehelixLong:hMe,interpolateDate:kJ,interpolateDiscrete:Q4e,interpolateHcl:cMe,interpolateHclLong:fMe,interpolateHsl:aMe,interpolateHslLong:lMe,interpolateHue:Z4e,interpolateLab:uMe,interpolateNumber:Jo,interpolateNumberArray:ZR,interpolateObject:CJ,interpolateRgb:uT,interpolateRgbBasis:q4e,interpolateRgbBasisClosed:G4e,interpolateRound:ov,interpolateString:_J,interpolateTransformCss:tMe,interpolateTransformSvg:nMe,interpolateZoom:sMe,piecewise:JR,quantize:pMe},Symbol.toStringTag,{value:"Module"}));function mMe(e){return function(){return e}}function dT(e){return+e}var vz=[0,1];function ui(e){return e}function hT(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:mMe(isNaN(t)?NaN:.5)}function yMe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function vMe(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=hT(i,r),o=n(s,o)):(r=hT(r,i),o=n(o,s)),function(a){return o(r(a))}}function bMe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=hT(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=Ku(e,a,1,r)-1;return o[l](i[l](a))}}function sv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function EC(){var e=vz,t=vz,n=wc,r,i,o,s=ui,a,l,u;function c(){var d=Math.min(e.length,t.length);return s!==ui&&(s=yMe(e[0],e[d-1])),a=d>2?bMe:vMe,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((u||(u=a(t,e.map(r),Jo)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,dT),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=ov,c()},f.clamp=function(d){return arguments.length?(s=d?!0:ui,c()):s!==ui},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function PJ(){return EC()(ui,ui)}function FJ(e,t,n,r){var i=Qu(e,t,n),o;switch(r=Zf(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=iQ(i,s))&&(r.precision=o),BF(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=oQ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=rQ(i))&&(r.precision=o-(r.type==="%")*2);break}}return ev(r)}function Md(e){var t=e.domain;return e.ticks=function(n){var r=t();return H3(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return FJ(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,c=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);c-- >0;){if(u=q3(s,a,n),u===l)return r[i]=s,r[o]=a,t(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function RJ(){var e=PJ();return e.copy=function(){return sv(e,RJ())},wa.apply(e,arguments),Md(e)}function DJ(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,dT),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return DJ(e).unknown(t)},e=arguments.length?Array.from(e,dT):[0,1],Md(n)}function OJ(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function bz(e){return Math.log(e)}function xz(e){return Math.exp(e)}function xMe(e){return-Math.log(-e)}function wMe(e){return-Math.exp(-e)}function SMe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function kMe(e){return e===10?SMe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function CMe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function wz(e){return(t,n)=>-e(-t,n)}function e6(e){const t=e(bz,xz),n=t.domain;let r=10,i,o;function s(){return i=CMe(r),o=kMe(r),n()[0]<0?(i=wz(i),o=wz(o),e(xMe,wMe)):e(bz,xz),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=i(u),h=i(c),p,g;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/o(-d):p*o(d),!(g<u)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/o(-d):p*o(d),!(g<u)){if(g>c)break;y.push(g)}y.length*2<m&&(y=H3(u,c,m))}else y=H3(d,h,Math.min(h-d,m)).map(o);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Zf(l)).precision==null&&(l.trim=!0),l=ev(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=()=>n(OJ(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function NJ(){const e=e6(EC()).domain([1,10]);return e.copy=()=>sv(e,NJ()).base(e.base()),wa.apply(e,arguments),e}function Sz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function kz(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function t6(e){var t=1,n=e(Sz(t),kz(t));return n.constant=function(r){return arguments.length?e(Sz(t=+r),kz(t)):t},Md(n)}function IJ(){var e=t6(EC());return e.copy=function(){return sv(e,IJ()).constant(e.constant())},wa.apply(e,arguments)}function Cz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _Me(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function EMe(e){return e<0?-e*e:e*e}function n6(e){var t=e(ui,ui),n=1;function r(){return n===1?e(ui,ui):n===.5?e(_Me,EMe):e(Cz(n),Cz(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Md(t)}function r6(){var e=n6(EC());return e.copy=function(){return sv(e,r6()).exponent(e.exponent())},wa.apply(e,arguments),e}function $Me(){return r6.apply(null,arguments).exponent(.5)}function LJ(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=QK(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[Ku(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ul),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return LJ().domain(e).range(t).unknown(r)},wa.apply(o,arguments)}function zJ(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[Ku(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return zJ().domain([e,t]).range(i).unknown(o)},wa.apply(Md(s),arguments)}function BJ(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Ku(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return BJ().domain(e).range(t).unknown(n)},wa.apply(i,arguments)}function AMe(e){return new Date(e)}function TMe(e){return e instanceof Date?+e:+new Date(+e)}function i6(e,t,n,r,i,o,s,a,l,u){var c=PJ(),f=c.invert,d=c.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(k){return(l(k)<k?h:a(k)<k?p:s(k)<k?g:o(k)<k?m:r(k)<k?i(k)<k?y:v:n(k)<k?b:x)(k)}return c.invert=function(k){return new Date(f(k))},c.domain=function(k){return arguments.length?d(Array.from(k,TMe)):d().map(AMe)},c.ticks=function(k){var S=d();return e(S[0],S[S.length-1],k??10)},c.tickFormat=function(k,S){return S==null?w:u(S)},c.nice=function(k){var S=d();return(!k||typeof k.range!="function")&&(k=t(S[0],S[S.length-1],k??10)),k?d(OJ(S,k)):c},c.copy=function(){return sv(c,i6(e,t,n,r,i,o,s,a,l,u))},c}function MMe(){return wa.apply(i6(NAe,IAe,da,Xy,zg,cl,iC,nC,tl,HF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function PMe(){return wa.apply(i6(DAe,OAe,ha,Ky,Bg,Bu,oC,rC,tl,qF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $C(){var e=0,t=1,n,r,i,o,s=ui,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(s=f,u):s};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,s=f(h,p),u):[s(0),s(1)]}}return u.range=c(wc),u.rangeRound=c(ov),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function Sc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function o6(){var e=Md($C()(ui));return e.copy=function(){return Sc(e,o6())},bc.apply(e,arguments)}function jJ(){var e=e6($C()).domain([1,10]);return e.copy=function(){return Sc(e,jJ()).base(e.base())},bc.apply(e,arguments)}function UJ(){var e=t6($C());return e.copy=function(){return Sc(e,UJ()).constant(e.constant())},bc.apply(e,arguments)}function s6(){var e=n6($C());return e.copy=function(){return Sc(e,s6()).exponent(e.exponent())},bc.apply(e,arguments)}function FMe(){return s6.apply(null,arguments).exponent(.5)}function AC(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=ui,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-o)*(r*g<r*o?a:l),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(m){var y,v,b;return arguments.length?([y,v,b]=m,u=JR(g,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(wc),h.rangeRound=p(ov),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),o=g(t),s=g(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function VJ(){var e=Md(AC()(ui));return e.copy=function(){return Sc(e,VJ())},bc.apply(e,arguments)}function WJ(){var e=e6(AC()).domain([.1,1,10]);return e.copy=function(){return Sc(e,WJ()).base(e.base())},bc.apply(e,arguments)}function HJ(){var e=t6(AC());return e.copy=function(){return Sc(e,HJ()).constant(e.constant())},bc.apply(e,arguments)}function a6(){var e=n6(AC());return e.copy=function(){return Sc(e,a6()).exponent(e.exponent())},bc.apply(e,arguments)}function RMe(){return a6.apply(null,arguments).exponent(.5)}function Sa(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const DMe=Sa("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),OMe=Sa("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),NMe=Sa("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),IMe=Sa("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),LMe=Sa("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),zMe=Sa("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),BMe=Sa("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),jMe=Sa("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),UMe=Sa("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),VMe=Sa("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function l6(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const WMe="identity",Kp="linear",Cl="log",av="pow",lv="sqrt",TC="symlog",ed="time",td="utc",la="sequential",Hg="diverging",Qp="quantile",MC="quantize",PC="threshold",u6="ordinal",pT="point",qJ="band",c6="bin-ordinal",kn="continuous",uv="discrete",cv="discretizing",No="interpolating",f6="temporal";function HMe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function qMe(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function d6(){const e=YR().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=l6(f,a,l);let g=r[d-0];i=(h-g)/(p||1),s&&(i=Math.floor(i)),g+=(h-g-i*(f-a))*u,o=i*(1-a),s&&(g=Math.round(g),o=Math.round(o));const m=Ni(f).map(y=>g+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],m=+f[1],y,v,b;if(!(g!==g||m!==m)&&(m<g&&(b=g,g=m,m=b),!(m<h[0]||g>r[1-d])))return y=Math.max(0,Ku(h,g)-1),v=g===m?y:Ku(h,m)-1,g-h[y]>o+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return d6().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function GJ(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return GJ(t())},e}function GMe(){return GJ(d6().paddingInner(1))}var YMe=Array.prototype.map;function XMe(e){return YMe.call(e,yr)}const KMe=Array.prototype.slice;function YJ(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Ku(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=XMe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=KMe.call(r),n):t.slice()},n.tickFormat=function(r,i){return FJ(e[0],He(e),r??10,i)},n.copy=function(){return YJ().domain(n.domain()).range(n.range())},n}const Lw=new Map,XJ=Symbol("vega_scale");function KJ(e){return e[XJ]=!0,e}function QMe(e){return e&&e[XJ]===!0}function ZMe(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?HMe(o):o.invertExtent?qMe(o):void 0),o.type=e,KJ(o)};return r.metadata=gs(ae(n)),r}function Je(e,t,n){return arguments.length>1?(Lw.set(e,ZMe(e,t,n)),this):QJ(e)?Lw.get(e):void 0}Je(WMe,DJ);Je(Kp,RJ,kn);Je(Cl,NJ,[kn,Cl]);Je(av,r6,kn);Je(lv,$Me,kn);Je(TC,IJ,kn);Je(ed,MMe,[kn,f6]);Je(td,PMe,[kn,f6]);Je(la,o6,[kn,No]);Je(`${la}-${Kp}`,o6,[kn,No]);Je(`${la}-${Cl}`,jJ,[kn,No,Cl]);Je(`${la}-${av}`,s6,[kn,No]);Je(`${la}-${lv}`,FMe,[kn,No]);Je(`${la}-${TC}`,UJ,[kn,No]);Je(`${Hg}-${Kp}`,VJ,[kn,No]);Je(`${Hg}-${Cl}`,WJ,[kn,No,Cl]);Je(`${Hg}-${av}`,a6,[kn,No]);Je(`${Hg}-${lv}`,RMe,[kn,No]);Je(`${Hg}-${TC}`,HJ,[kn,No]);Je(Qp,LJ,[cv,Qp]);Je(MC,zJ,cv);Je(PC,BJ,cv);Je(c6,YJ,[uv,cv]);Je(u6,YR,uv);Je(qJ,d6,uv);Je(pT,GMe,uv);function QJ(e){return Lw.has(e)}function Pd(e,t){const n=Lw.get(e);return n&&n.metadata[t]}function h6(e){return Pd(e,kn)}function Zp(e){return Pd(e,uv)}function gT(e){return Pd(e,cv)}function ZJ(e){return Pd(e,Cl)}function JMe(e){return Pd(e,f6)}function JJ(e){return Pd(e,No)}function eee(e){return Pd(e,Qp)}const ePe=["clamp","base","constant","exponent"];function tee(e,t){const n=t[0],r=He(t)-n;return function(i){return e(n+i*r)}}function FC(e,t,n){return JR(p6(t||"rgb",n),e)}function nee(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function ree(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?_r(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=Je(o)().domain([t,n]).range([0,1]),ePe.forEach(a=>e[a]?s[a](e[a]()):0),s)}function p6(e,t){const n=gMe[tPe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function tPe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const nPe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},rPe={accent:OMe,category10:DMe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:NMe,observable10:IMe,paired:LMe,pastel1:zMe,pastel2:BMe,set1:jMe,set2:UMe,set3:VMe,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function iee(e){if(G(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function oee(e,t){for(const n in e)g6(n,t(e[n]))}const _z={};oee(rPe,iee);oee(nPe,e=>FC(iee(e)));function g6(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(_z[e]=t,this):_z[e]}const r2="symbol",iPe="discrete",oPe="gradient",sPe=e=>G(e)?e.map(t=>String(t)):String(e),aPe=(e,t)=>e[1]-t[1],lPe=(e,t)=>t[1]-e[1];function m6(e,t,n){let r;return Qe(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(J1(e.domain())/n||1)+1))),se(t)&&(r=t.step,t=t.interval),le(t)&&(t=e.type===ed?jg(t):e.type==td?Ug(t):q("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function see(e,t,n){let r=e.range(),i=r[0],o=He(r),s=aPe;if(i>o&&(r=o,o=i,i=r,s=lPe),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],He(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function y6(e,t){return e.bins?see(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function aee(e,t,n,r,i,o){const s=t.type;let a=sPe;if(s===ed||i===ed)a=e.timeFormat(r);else if(s===td||i===td)a=e.utcFormat(r);else if(ZJ(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=lee(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function lee(e,t,n){const r=y6(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const mT={[Qp]:"quantiles",[MC]:"thresholds",[PC]:"domain"},uee={[Qp]:"quantiles",[MC]:"domain"};function cee(e,t){return e.bins?fPe(e.bins):e.type===Cl?lee(e,t,!0):mT[e.type]?cPe(e[mT[e.type]]()):y6(e,t)}function uPe(e,t,n){const r=t[uee[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function cPe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function fPe(e){const t=e.slice(0,-1);return t.max=He(e),t}const dPe=e=>mT[e.type]||e.bins;function fee(e,t,n,r,i,o,s){const a=uee[t.type]&&o!==ed&&o!==td?uPe(e,t,i):aee(e,t,n,i,o,s);return r===r2&&dPe(t)?hPe(a):r===iPe?pPe(a):gPe(a)}const hPe=e=>(t,n,r)=>{const i=Ez(r[n+1],Ez(r.max,1/0)),o=$z(t,e),s=$z(i,e);return o&&s?o+" – "+s:s?"< "+s:"≥ "+o},Ez=(e,t)=>e??t,pPe=e=>(t,n)=>n?e(t):null,gPe=e=>t=>e(t),$z=(e,t)=>Number.isFinite(e)?t(e):null;function mPe(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+He(t),o=i-r;if(e.type===PC){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function yPe(e,t,n,r){const i=r||t.type;return le(n)&&JMe(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===ed?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===td?e.utcFormat("%A, %d %B %Y, %X UTC"):fee(e,t,5,null,n,r,!0)}function dee(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=yPe(e,t,n.format,n.formatType);if(gT(t.type)){const o=cee(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(Zp(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(He(o))}`}}let hee=0;function vPe(){hee=0}const zw="p_";function v6(e){return e&&e.gradient}function pee(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?zw:"";return i||(i=e.id="gradient_"+hee++,r==="radial"?(e.x1=Rs(e.x1,.5),e.y1=Rs(e.y1,.5),e.r1=Rs(e.r1,0),e.x2=Rs(e.x2,.5),e.y2=Rs(e.y2,.5),e.r2=Rs(e.r2,.5),o=zw):(e.x1=Rs(e.x1,0),e.y1=Rs(e.y1,0),e.x2=Rs(e.x2,1),e.y2=Rs(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Rs(e,t){return e??t}function gee(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const Az={basis:{curve:h4e},"basis-closed":{curve:p4e},"basis-open":{curve:g4e},bundle:{curve:m4e,tension:"beta",value:.85},cardinal:{curve:y4e,tension:"tension",value:0},"cardinal-open":{curve:b4e,tension:"tension",value:0},"cardinal-closed":{curve:v4e,tension:"tension",value:0},"catmull-rom":{curve:x4e,tension:"alpha",value:.5},"catmull-rom-closed":{curve:w4e,tension:"alpha",value:.5},"catmull-rom-open":{curve:S4e,tension:"alpha",value:.5},linear:{curve:VR},"linear-closed":{curve:k4e},monotone:{horizontal:_4e,vertical:C4e},natural:{curve:E4e},step:{curve:$4e},"step-after":{curve:T4e},"step-before":{curve:A4e}};function b6(e,t,n){var r=ce(Az,e)&&Az[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const bPe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},xPe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,wPe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,SPe=/^((\s+,?\s*)|(,\s*))/,kPe=/^[01]/;function Jp(e){const t=[];return(e.match(xPe)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=bPe[o],a=CPe(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function CPe(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?kPe:wPe,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(SPe);l!==null&&(i+=l[0].length)}return r}const tc=Math.PI/180,_Pe=1e-14,lf=Math.PI/2,Xs=Math.PI*2,th=Math.sqrt(3)/2;var J$={},eA={},mee=[].join;function EPe(e,t,n,r,i,o,s,a,l){const u=mee.call(arguments);if(J$[u])return J$[u];const c=s*tc,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(l-t)*.5,p=d*(l-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,y=f/n,v=-f/r,b=d/r,x=m*a+y*l,w=v*a+b*l,k=m*e+y*t,S=v*e+b*t;let _=1/((k-x)*(k-x)+(S-w)*(S-w))-.25;_<0&&(_=0);let $=Math.sqrt(_);o==i&&($=-$);const A=.5*(x+k)-$*(S-w),N=.5*(w+S)+$*(k-x),M=Math.atan2(w-N,x-A);let F=Math.atan2(S-N,k-A)-M;F<0&&o===1?F+=Xs:F>0&&o===0&&(F-=Xs);const D=Math.ceil(Math.abs(F/(lf+.001))),I=[];for(let O=0;O<D;++O){const j=M+O*F/D,Y=M+(O+1)*F/D;I[O]=[A,N,j,Y,n,r,f,d]}return J$[u]=I}function $Pe(e){const t=mee.call(e);if(eA[t])return eA[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const c=u*s,f=-l*a,d=l*s,h=u*a,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(v*.5),x=8/3*b*b/Math.sin(v),w=n+p-x*g,k=r+g+x*p,S=n+m,C=r+y,_=S+x*y,$=C-x*m;return eA[t]=[c*w+f*k,d*w+h*k,c*_+f*$,d*_+h*$,c*S+f*C,d*S+h*C]}const oo=["l",0,0,0,0,0,0,0];function APe(e,t,n){const r=oo[0]=e[0];if(r==="a"||r==="A")oo[1]=t*e[1],oo[2]=n*e[2],oo[3]=e[3],oo[4]=e[4],oo[5]=e[5],oo[6]=t*e[6],oo[7]=n*e[7];else if(r==="h"||r==="H")oo[1]=t*e[1];else if(r==="v"||r==="V")oo[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)oo[i]=(i%2==1?t:n)*e[i];return oo}function r1(e,t,n,r,i,o){var s,a=null,l=0,u=0,c=0,f=0,d,h,p,g,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(s=t[v],(i!==1||o!==1)&&(s=APe(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"c":d=l+s[5],h=u+s[6],c=l+s[3],f=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=s[5],u=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+s[3],h=u+s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+s[1]+n,u+s[2]+r,d+n,h+r),c=l+s[1],f=u+s[2],l=d,u=h;break;case"S":d=s[3],h=s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"q":d=l+s[3],h=u+s[4],c=l+s[1],f=u+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"t":d=l+s[1],h=u+s[2],a[0].match(/[QqTt]/)===null?(c=l,f=u):a[0]==="t"?(c=2*l-p,f=2*u-g):a[0]==="q"&&(c=2*l-c,f=2*u-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+s[1],f=u+s[2];break;case"T":d=s[1],h=s[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":Tz(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":Tz(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=m,u=y,e.closePath();break}a=s}}function Tz(e,t,n,r){const i=EPe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=$Pe(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const Mz=.5773502691896257,Pz={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Xs)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=th*n,i=r-n*Mz,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=th*n,i=r-n*Mz;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=th*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=th*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=th*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=th*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function yee(e){return ce(Pz,e)?Pz[e]:TPe(e)}var tA={};function TPe(e){if(!ce(tA,e)){const t=Jp(e);tA[e]={draw:function(n,r){r1(n,t,0,0,Math.sqrt(r)/2)}}}return tA[e]}const Wl=.448084975506;function MPe(e){return e.x}function PPe(e){return e.y}function FPe(e){return e.width}function RPe(e){return e.height}function Oa(e){return typeof e=="function"?e:()=>+e}function Vb(e,t,n){return Math.max(t,Math.min(e,n))}function vee(){var e=MPe,t=PPe,n=FPe,r=RPe,i=Oa(0),o=i,s=i,a=i,l=null;function u(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),v=Math.min(m,y)/2,b=Vb(+i.call(this,c),0,v),x=Vb(+o.call(this,c),0,v),w=Vb(+s.call(this,c),0,v),k=Vb(+a.call(this,c),0,v);if(l||(l=h=bC()),b<=0&&x<=0&&w<=0&&k<=0)l.rect(p,g,m,y);else{var S=p+m,C=g+y;l.moveTo(p+b,g),l.lineTo(S-x,g),l.bezierCurveTo(S-Wl*x,g,S,g+Wl*x,S,g+x),l.lineTo(S,C-k),l.bezierCurveTo(S,C-Wl*k,S-Wl*k,C,S-k,C),l.lineTo(p+w,C),l.bezierCurveTo(p+Wl*w,C,p,C-Wl*w,p,C-w),l.lineTo(p,g+b),l.bezierCurveTo(p,g+Wl*b,p+Wl*b,g,p+b,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=Oa(c),u):e},u.y=function(c){return arguments.length?(t=Oa(c),u):t},u.width=function(c){return arguments.length?(n=Oa(c),u):n},u.height=function(c){return arguments.length?(r=Oa(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=Oa(c),o=f!=null?Oa(f):i,a=d!=null?Oa(d):i,s=h!=null?Oa(h):o,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function bee(){var e,t,n,r,i=null,o,s,a,l;function u(f,d,h){const p=h/2;if(o){var g=a-d,m=f-s;if(g||m){var y=Math.hypot(g,m),v=(g/=y)*l,b=(m/=y)*l,x=Math.atan2(m,g);i.moveTo(s-v,a-b),i.lineTo(f-g*p,d-m*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(s+v,a+b),i.arc(s,a,l,x,x+Math.PI)}else i.arc(f,d,p,0,Xs);i.closePath()}else o=1;s=f,a=d,l=p}function c(f){var d,h=f.length,p,g=!1,m;for(i==null&&(i=m=bC()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(o=0),g&&u(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function fv(e,t){return e??t}const dv=e=>e.x||0,hv=e=>e.y||0,DPe=e=>e.width||0,OPe=e=>e.height||0,NPe=e=>(e.x||0)+(e.width||0),IPe=e=>(e.y||0)+(e.height||0),LPe=e=>e.startAngle||0,zPe=e=>e.endAngle||0,BPe=e=>e.padAngle||0,jPe=e=>e.innerRadius||0,UPe=e=>e.outerRadius||0,VPe=e=>e.cornerRadius||0,WPe=e=>fv(e.cornerRadiusTopLeft,e.cornerRadius)||0,HPe=e=>fv(e.cornerRadiusTopRight,e.cornerRadius)||0,qPe=e=>fv(e.cornerRadiusBottomRight,e.cornerRadius)||0,GPe=e=>fv(e.cornerRadiusBottomLeft,e.cornerRadius)||0,YPe=e=>fv(e.size,64),XPe=e=>e.size||1,RC=e=>e.defined!==!1,KPe=e=>yee(e.shape||"circle"),QPe=c4e().startAngle(LPe).endAngle(zPe).padAngle(BPe).innerRadius(jPe).outerRadius(UPe).cornerRadius(VPe),ZPe=YZ().x(dv).y1(hv).y0(IPe).defined(RC),JPe=YZ().y(hv).x1(dv).x0(NPe).defined(RC),eFe=GZ().x(dv).y(hv).defined(RC),tFe=vee().x(dv).y(hv).width(DPe).height(OPe).cornerRadius(WPe,HPe,qPe,GPe),nFe=d4e().type(KPe).size(YPe),rFe=bee().x(dv).y(hv).defined(RC).size(XPe);function x6(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function iFe(e,t){return QPe.context(e)(t)}function oFe(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?JPe:ZPe).curve(b6(r,n.orient,n.tension)).context(e)(t)}function sFe(e,t){const n=t[0],r=n.interpolate||"linear";return eFe.curve(b6(r,n.orient,n.tension)).context(e)(t)}function qg(e,t,n,r){return tFe.context(e)(t,n,r)}function aFe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function lFe(e,t){return nFe.context(e)(t)}function uFe(e,t){return rFe.context(e)(t)}var xee=1;function wee(){xee=1}function w6(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+xee++),s=i.clipping[o]||(i.clipping[o]={id:o});return Oe(r)?s.path=r(null):x6(n)?s.path=qg(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function dn(e){this.clear(),e&&this.union(e)}dn.prototype={clone(){return new dn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*s+u,l*r+a*s+c,a*o-l*i+u,l*o+a*i+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function DC(e){this.mark=e,this.bounds=this.bounds||new dn}function OC(e){DC.call(this,e),this.items=this.items||[]}ne(OC,DC);class See{constructor(t){this._pending=0,this._loader=t||aC()}pending(){return this._pending}sanitizeURL(t){const n=this;return Fz(n),n._loader.sanitize(t,{context:"href"}).then(r=>(Rm(n),r)).catch(()=>(Rm(n),null))}loadImage(t){const n=this,r=M4e();return Fz(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=ce(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>Rm(n),s.onerror=()=>Rm(n),s.src=o,s}).catch(i=>(Rm(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Fz(e){e._pending+=1}function Rm(e){e._pending-=1}function Ml(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?cFe(t,r):0))}return e}function cFe(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const fFe=Xs-1e-8;let NC,i2,o2,xf,yT,s2,vT,bT;const bu=(e,t)=>NC.add(e,t),a2=(e,t)=>bu(i2=e,o2=t),Rz=e=>bu(e,NC.y1),Dz=e=>bu(NC.x1,e),uf=(e,t)=>yT*e+vT*t,cf=(e,t)=>s2*e+bT*t,nA=(e,t)=>bu(uf(e,t),cf(e,t)),rA=(e,t)=>a2(uf(e,t),cf(e,t));function pv(e,t){return NC=e,t?(xf=t*tc,yT=bT=Math.cos(xf),s2=Math.sin(xf),vT=-s2):(yT=bT=1,xf=s2=vT=0),dFe}const dFe={beginPath(){},closePath(){},moveTo:rA,lineTo:rA,rect(e,t,n,r){xf?(nA(e+n,t),nA(e+n,t+r),nA(e,t+r),rA(e,t)):(bu(e+n,t+r),a2(e,t))},quadraticCurveTo(e,t,n,r){const i=uf(e,t),o=cf(e,t),s=uf(n,r),a=cf(n,r);Oz(i2,i,s,Rz),Oz(o2,o,a,Dz),a2(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=uf(e,t),a=cf(e,t),l=uf(n,r),u=cf(n,r),c=uf(i,o),f=cf(i,o);Nz(i2,s,l,c,Rz),Nz(o2,a,u,f,Dz),a2(c,f)},arc(e,t,n,r,i,o){if(r+=xf,i+=xf,i2=n*Math.cos(i)+e,o2=n*Math.sin(i)+t,Math.abs(i-r)>fFe)bu(e-n,t-n),bu(e+n,t+n);else{const s=u=>bu(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%Xs,r<0&&(r+=Xs),i=i%Xs,i<0&&(i+=Xs),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Xs,a=r-r%lf,l=0;l<4&&a>i;++l,a-=lf)s(a);else for(a=r-r%lf+lf,l=0;l<4&&a<i;++l,a=a+lf)s(a)}}};function Oz(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Nz(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(o)>_Pe?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&i(Iz(l,e,t,n,r)),0<u&&u<1&&i(Iz(u,e,t,n,r))}function Iz(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var Vu=(Vu=Uu(1,1))?Vu.getContext("2d"):null;const xT=new dn;function S6(e){return function(t,n){if(!Vu)return!0;e(Vu,t),xT.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=xT;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(Vu.isPointInPath(l,a))return!0;return!1}}function k6(e,t){return t.contains(e.x||0,e.y||0)}function kee(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(xT.set(n,r,n+i,r+o))}function Cee(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Bh(t,n,r,i,o)}function Bh(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,p,g,m;for(m=0;m<4;++m){if(m===0&&(h=-u,p=-(o-t)),m===1&&(h=u,p=a-t),m===2&&(h=-c,p=-(s-n)),m===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function eg(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Vo(e,t){return e??t}function Lz(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function hFe(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Vo(t.x1,.5)*r,n.y1+Vo(t.y1,.5)*i,Math.max(r,i)*Vo(t.r1,0),n.x1+Vo(t.x2,.5)*r,n.y1+Vo(t.y2,.5)*i,Math.max(r,i)*Vo(t.r2,.5));else{const s=Vo(t.x1,0),a=Vo(t.y1,0),l=Vo(t.x2,1),u=Vo(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=Uu(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Lz(f.createLinearGradient(s,a,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Lz(o,t.stops)}function _ee(e,t,n){return v6(n)?hFe(e,n,t.bounds):n}function Bw(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=_ee(e,t,t.fill),!0):!1}var pFe=[];function tg(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=_ee(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||pFe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function gFe(e,t){return e.zindex-t.zindex||e.index-t.index}function C6(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(gFe)}function ys(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=C6(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function jw(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=C6(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function _6(e){return function(t,n,r){ys(n,i=>{(!r||r.intersects(i.bounds))&&Eee(e,t,i,i)})}}function mFe(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&Eee(e,t,n.items[0],n.items)}}function Eee(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(eg(t,n),n.fill&&Bw(t,n,i)&&t.fill(),n.stroke&&tg(t,n,i)&&t.stroke()))}function IC(e){return e=e||Mo,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,jw(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function gv(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,u,c;return l&&(u=s.strokeWidth,c=s.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function E6(e){return IC(gv(e))}function Bf(e,t){return"translate("+e+","+t+")"}function $6(e){return"rotate("+e+")"}function yFe(e,t){return"scale("+e+","+t+")"}function $ee(e){return Bf(e.x||0,e.y||0)}function vFe(e){return Bf(e.x||0,e.y||0)+(e.angle?" "+$6(e.angle):"")}function bFe(e){return Bf(e.x||0,e.y||0)+(e.angle?" "+$6(e.angle):"")+(e.scaleX||e.scaleY?" "+yFe(e.scaleX||1,e.scaleY||1):"")}function A6(e,t,n){function r(s,a){s("transform",vFe(a)),s("d",t(null,a))}function i(s,a){return t(pv(s,a.angle),a),Ml(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=tc),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:_6(o),pick:E6(o),isect:n||S6(o)}}var xFe=A6("arc",iFe);function wFe(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function SFe(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function kFe(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function T6(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(pv(l),c),Ml(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=gv(o);function a(l,u,c,f,d,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,s(l,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:mFe(o),pick:a,isect:k6,tip:n}}var CFe=T6("area",oFe,wFe);function _Fe(e,t){var n=t.clip;e.save(),Oe(n)?(e.beginPath(),n(e),e.clip()):Aee(e,t.group)}function Aee(e,t){e.beginPath(),x6(t)?qg(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Tee(e){const t=Vo(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function EFe(e,t){e("transform",$ee(t))}function Mee(e,t){const n=Tee(t);e("d",qg(null,t,n,n))}function $Fe(e,t){e("class","background"),e("aria-hidden",!0),Mee(e,t)}function AFe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Mee(e,t):e("d","")}function TFe(e,t,n){const r=t.clip?w6(n,t,t):null;e("clip-path",r)}function MFe(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Ml(e,t),e.translate(t.x||0,t.y||0)}function i1(e,t,n,r){const i=Tee(t);e.beginPath(),qg(e,t,(n||0)+i,(r||0)+i)}const PFe=gv(i1),FFe=gv(i1,!1),RFe=gv(i1,!0);function DFe(e,t,n,r){ys(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(i1(e,i,o,s),eg(e,i),i.fill&&Bw(e,i,l)&&e.fill(),i.stroke&&!a&&tg(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&Aee(e,i),n&&n.translate(-o,-s),ys(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(i1(e,i,o,s),eg(e,i),tg(e,i,l)&&e.stroke())})}function OFe(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return jw(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,o))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),p=f+(l.height||0),g=l.clip;if(g&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,g&&x6(l)&&!RFe(e,l,s,a))return e.restore(),null;const m=l.strokeForeground,y=t.interactive!==!1;return y&&m&&l.stroke&&FFe(e,l,s,a)?(e.restore(),l):(u=jw(l,v=>NFe(v,c,f)?this.pick(v,n,r,c,f):null),!u&&y&&(l.fill||!m&&l.stroke)&&PFe(e,l,s,a)&&(u=l),e.restore(),u||null)})}function NFe(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var IFe={type:"group",tag:"g",nested:!1,attr:EFe,bound:MFe,draw:DFe,pick:OFe,isect:kee,content:TFe,background:$Fe,foreground:AFe},o1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function M6(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function P6(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function F6(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function LC(e,t){return e==="center"?t/2:e==="right"?t:0}function zC(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function LFe(e,t,n){const r=M6(t,n),i=P6(t,r),o=F6(t,r),s=(t.x||0)-LC(t.align,i),a=(t.y||0)-zC(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,o1["xmlns:xlink"],"xlink:href"),e("transform",Bf(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function zFe(e,t){const n=t.image,r=P6(t,n),i=F6(t,n),o=(t.x||0)-LC(t.align,r),s=(t.y||0)-zC(t.baseline,i);return e.set(o,s,o+r,s+i)}function BFe(e,t,n){ys(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=M6(r,this);let o=P6(r,i),s=F6(r,i);if(o===0||s===0)return;let a=(r.x||0)-LC(r.align,o),l=(r.y||0)-zC(r.baseline,s),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,l+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(eg(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var jFe={type:"image",tag:"image",nested:!1,attr:LFe,bound:zFe,draw:BFe,pick:IC(),isect:Mo,get:M6,xOffset:LC,yOffset:zC},UFe=T6("line",sFe,SFe);function VFe(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",bFe(t)),e("d",t.path)}function l2(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*tc,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Jp(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),r1(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):r1(e,l,r,i,o,s)}function WFe(e,t){return l2(pv(e,t.angle),t)?e.set(0,0,0,0):Ml(e,t,!0)}var HFe={type:"path",tag:"path",nested:!1,attr:VFe,bound:WFe,draw:_6(l2),pick:E6(l2),isect:S6(l2)};function qFe(e,t){e("d",qg(null,t))}function GFe(e,t){var n,r;return Ml(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function zz(e,t){e.beginPath(),qg(e,t)}var YFe={type:"rect",tag:"path",nested:!1,attr:qFe,bound:GFe,draw:_6(zz),pick:E6(zz),isect:kee};function XFe(e,t){e("transform",$ee(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function KFe(e,t){var n,r;return Ml(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function Pee(e,t,n){var r,i,o,s;return t.stroke&&tg(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function QFe(e,t,n){ys(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Pee(e,r,i)&&(eg(e,r),e.stroke())}})}function ZFe(e,t,n,r){return e.isPointInStroke?Pee(e,t,1)&&e.isPointInStroke(n,r):!1}var JFe={type:"rule",tag:"line",nested:!1,attr:XFe,bound:KFe,draw:QFe,pick:IC(ZFe),isect:Cee},eRe=A6("shape",aFe),tRe=A6("symbol",lFe,k6);const Bz=zK();var Ui={height:ka,measureWidth:R6,estimateWidth:Uw,width:Uw,canvas:Fee};Fee(!0);function Fee(e){Ui.width=e&&Vu?R6:Uw}function Uw(e,t){return Ree(rc(e,t),ka(e))}function Ree(e,t){return~~(.8*e.length*t)}function R6(e,t){return ka(e)<=0||!(t=rc(e,t))?0:Dee(t,BC(e))}function Dee(e,t){const n=`(${t}) ${e}`;let r=Bz.get(n);return r===void 0&&(Vu.font=t,r=Vu.measureText(e).width,Bz.set(n,r)),r}function ka(e){return e.fontSize!=null?+e.fontSize||0:11}function nc(e){return e.lineHeight!=null?e.lineHeight:ka(e)+2}function nRe(e){return G(e)?e.length>1?e:e[0]:e}function mv(e){return nRe(e.lineBreak&&e.text&&!G(e.text)?e.text.split(e.lineBreak):e.text)}function D6(e){const t=mv(e);return(G(t)?t.length-1:0)*nc(e)}function rc(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?iRe(e,n):n}function rRe(e){if(Ui.width===R6){const t=BC(e);return n=>Dee(n,t)}else if(Ui.width===Uw){const t=ka(e);return n=>Ree(n,t)}else return t=>Ui.width(e,t)}function iRe(e,t){var n=+e.limit,r=rRe(e);if(r(t)<n)return t;var i=e.ellipsis||"…",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function yv(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function BC(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ka(e)+"px "+yv(e,t)}function O6(e){var t=e.baseline,n=ka(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*nc(e):t==="line-bottom"?.29*n-.5*nc(e):0)}const oRe={left:"start",center:"middle",right:"end"},ny=new dn;function jC(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-lf,t+=r*Math.cos(i),n+=r*Math.sin(i)),ny.x1=t,ny.y1=n,ny}function sRe(e,t){var n=t.dx||0,r=(t.dy||0)+O6(t),i=jC(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",oRe[t.align]||"start"),a?(l=Bf(o,s)+" "+$6(a),(n||r)&&(l+=" "+Bf(n,r))):l=Bf(o+n,s+r),e("transform",l)}function N6(e,t,n){var r=Ui.height(t),i=t.align,o=jC(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+O6(t)-Math.round(.8*r),c=mv(t),f;if(G(c)?(r+=nc(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Ui.width(t,h)),0)):f=Ui.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=s,u+=a,l+f,u+r),t.angle&&!n)e.rotate(t.angle*tc,s,a);else if(n===2)return e.rotatedPoints(t.angle*tc,s,a);return e}function aRe(e,t,n){ys(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=BC(r),e.textAlign=r.align||"left",o=jC(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*tc),s=a=0),s+=r.dx||0,a+=(r.dy||0)+O6(r),c=mv(r),eg(e,r),G(c))for(u=nc(r),l=0;l<c.length;++l)f=rc(r,c[l]),r.fill&&Bw(e,r,i)&&e.fillText(f,s,a),r.stroke&&tg(e,r,i)&&e.strokeText(f,s,a),a+=u;else f=rc(r,c),r.fill&&Bw(e,r,i)&&e.fillText(f,s,a),r.stroke&&tg(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function lRe(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=jC(t),a=s.x1,l=s.y1,u=N6(ny,t,1),c=-t.angle*tc,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*l),p=d*i+f*o+(l-d*a-f*l);return u.contains(h,p)}function uRe(e,t){const n=N6(ny,e,2);return Bh(t,n[0],n[1],n[2],n[3])||Bh(t,n[0],n[1],n[4],n[5])||Bh(t,n[4],n[5],n[6],n[7])||Bh(t,n[2],n[3],n[6],n[7])}var cRe={type:"text",tag:"text",nested:!1,attr:sRe,bound:N6,draw:aRe,pick:IC(lRe),isect:uRe},fRe=T6("trail",uFe,kFe),Xi={arc:xFe,area:CFe,group:IFe,image:jFe,line:UFe,path:HFe,rect:YFe,rule:JFe,shape:eRe,symbol:tRe,text:cRe,trail:fRe};function wT(e,t,n){var r=Xi[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new dn),e,n)}var jz={mark:null};function Oee(e,t,n){var r=Xi[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,c;if(r.nested)return s?u=o[0]:(jz.mark=e,u=jz),c=wT(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new dn,s)for(a=0,l=o.length;a<l;++a)t.union(wT(o[a],i,n));return e.bounds=t}const dRe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Nee(e,t){return JSON.stringify(e,dRe,t)}function Iee(e){const t=typeof e=="string"?JSON.parse(e):e;return Lee(t)}function Lee(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&Lee(n[i]);return t&&Oee(e),e}class zee{constructor(t){arguments.length?this.root=Iee(t):(this.root=Uz({marktype:"group",name:"root",role:"frame"}),this.root.items=[new OC(this.root)])}toJSON(t){return Nee(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Uz(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Uz(e,t){const n={bounds:new dn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function xu(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function I6(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function mn(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=xu(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function mo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Bee(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function UC(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function hRe(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Xi[i.marktype]).tip){for(s=UC(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let L6=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||aC(),this._tooltip=n||pRe}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=xu(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=hRe(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function pRe(e,t,n,r){e.element().setAttribute("title",r||"")}class vv{constructor(t){this._el=null,this._bgcolor=null,this._loader=new See(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const gRe="keydown",mRe="keypress",yRe="keyup",jee="dragenter",u2="dragleave",Uee="dragover",ST="pointerdown",vRe="pointerup",Vw="pointermove",c2="pointerout",Vee="pointerover",kT="mousedown",bRe="mouseup",Wee="mousemove",Ww="mouseout",Hee="mouseover",Hw="click",xRe="dblclick",wRe="wheel",qee="mousewheel",qw="touchstart",Gw="touchmove",Yw="touchend",SRe=[gRe,mRe,yRe,jee,u2,Uee,ST,vRe,Vw,c2,Vee,kT,bRe,Wee,Ww,Hee,Hw,xRe,wRe,qee,qw,Gw,Yw],CT=Vw,ry=Ww,_T=Hw;class bv extends L6{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=SRe,this.pointermove=Wz([Vw,Wee],[Vee,Hee],[c2,Ww]),this.dragover=Wz([Uee],[jee],[u2]),this.pointerout=Hz([c2,Ww]),this.dragleave=Hz([u2])}initialize(t,n,r){return this._canvas=t&&I6(t,"canvas"),[Hw,kT,ST,Vw,c2,u2].forEach(i=>Vz(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(qee,t)}pointerdown(t){this._down=this._active,this.fire(ST,t)}mousedown(t){this._down=this._active,this.fire(kT,t)}click(t){this._down===this._active&&(this.fire(Hw,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(qw,t,!0)}touchmove(t){this.fire(Gw,t,!0)}touchend(t){this.fire(Yw,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===_T&&i&&i.href?this.handleHref(n,i,i.href):(t===CT||t===ry)&&this.handleTooltip(n,i,t!==ry),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Vz(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=UC(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return Xi[t.marktype].pick.call(this,s,t,n,r,i,o)}}const kRe=e=>e===qw||e===Gw||e===Yw?[qw,Gw,Yw]:[e];function Vz(e,t){kRe(t).forEach(n=>CRe(e,n))}function CRe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function y0(e,t,n){t.forEach(r=>e.fire(r,n))}function Wz(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?y0(this,e,r):((!i||!i.exit)&&y0(this,n,r),this._active=o,y0(this,t,r),y0(this,e,r))}}function Hz(e){return function(t){y0(this,e,t),this._active=null}}function _Re(){return typeof window<"u"&&window.devicePixelRatio||1}function ERe(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?_Re():i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class Xw extends vv{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new dn,this._tempb=new dn}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Uu(1,1,this._options.type),t&&this._canvas&&(mo(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)ERe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||q("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=$Re(i,o,s);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):ARe(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=Xi[n.marktype];n.clip&&_Fe(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const $Re=(e,t,n)=>new dn().set(0,0,t,n).translate(-e[0],-e[1]);function ARe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class Gee extends L6{constructor(t,n){super(t,n);const r=this;r._hrefHandler=iA(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=iA(r,(i,o)=>{r.handleTooltip(i,o,i.type!==ry)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(_T,this._hrefHandler),i.removeEventListener(CT,this._tooltipHandler),i.removeEventListener(ry,this._tooltipHandler)),this._svg=i=t&&I6(t,"svg"),i&&(i.addEventListener(_T,this._hrefHandler),i.addEventListener(CT,this._tooltipHandler),i.addEventListener(ry,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:iA(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const iA=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},Yee="aria-hidden",z6="aria-label",B6="role",j6="aria-roledescription",Xee="graphics-object",U6="graphics-symbol",Kee=(e,t,n)=>({[B6]:e,[j6]:t,[z6]:n||void 0}),TRe=gs(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),qz={axis:{desc:"axis",caption:FRe},legend:{desc:"legend",caption:RRe},"title-text":{desc:"title",caption:e=>`Title text '${Yz(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Yz(e)}'`}},Gz={ariaRole:B6,ariaRoleDescription:j6,description:z6};function Qee(e,t){const n=t.aria===!1;if(e(Yee,n||void 0),n||t.description==null)for(const r in Gz)e(Gz[r],void 0);else{const r=t.mark.marktype;e(z6,t.description),e(B6,t.ariaRole||(r==="group"?Xee:U6)),e(j6,t.ariaRoleDescription||`${r} mark`)}}function Zee(e){return e.aria===!1?{[Yee]:!0}:TRe[e.role]?null:qz[e.role]?PRe(e,qz[e.role]):MRe(e)}function MRe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return Kee(n?Xee:U6,`${t} mark container`,e.description)}function PRe(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return Kee(t.role||U6,t.desc,n.description||r(n))}catch{return null}}function Yz(e){return ae(e.text).join(" ")}function FRe(e){const t=e.datum,n=e.orient,r=t.title?Jee(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Zp(a)?"discrete":a} scale with ${dee(s,o,e)}`}function RRe(e){const t=e.datum,n=t.title?Jee(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return ORe(r)+(n?` titled '${n}'`:"")+` for ${DRe(o)} with ${dee(l,a,e)}`}function Jee(e){try{return ae(He(e.items).items[0].text).join(" ")}catch{return null}}function DRe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+He(e)}function ORe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const ete=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),NRe=e=>ete(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function V6(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${NRe(u)}"`),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=ete(l),a),toString:()=>e};return a}const tte=e=>nte(V6(),e)+"";function nte(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):nte(e,r)}return e.close()}const Kw={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Qw={blend:"mix-blend-mode"},rte={fill:"none","stroke-miterlimit":10},Dm=0,Xz="http://www.w3.org/2000/xmlns/",gn=o1.xmlns;class W6 extends vv{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=mn(t,0,"svg",gn),this._svg.setAttributeNS(Xz,"xmlns",gn),this._svg.setAttributeNS(Xz,"xmlns:xlink",o1["xmlns:xlink"]),this._svg.setAttribute("version",o1.version),this._svg.setAttribute("class","marks"),mo(t,1),this._root=mn(this._svg,Dm,"g",gn),wu(this._root,rte),mo(this._svg,Dm+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(wu(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=mn(t,Dm,"rect",gn),wu(r,{width:this._width,height:this._height,fill:n}));const i=tte(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),mo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=Xi[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Kz(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Kz(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=Xi[s],l=n.interactive===!1?"none":null,u=a.tag==="g",c=Qz(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return mo(c,0),n._svg;c.setAttribute("class",Bee(n));const f=Zee(n);for(const g in f)Fr(c,g,f[g]);u||Fr(c,"pointer-events",l),Fr(c,"clip-path",n.clip?w6(this,n,n.group):null);let d=null,h=0;const p=g=>{const m=this.isDirty(g),y=Qz(g,c,d,a.tag,o);m&&(this._update(a,y,g),u&&zRe(this,y,g,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):ys(n,p),mo(c,h),c}_update(t,n,r){rl=n,hr=n.__values__,Qee(iy,r),t.attr(iy,r,this);const i=jRe[t.type];i&&i.call(this,t,n,r),rl&&this.style(rl,r)}style(t,n){if(n!=null){for(const r in Kw){let i=r==="font"?yv(n):n[r];if(i===hr[r])continue;const o=Kw[r];i==null?t.removeAttribute(o):(v6(i)&&(i=pee(i,this._defs.gradient,ite())),t.setAttribute(o,i+"")),hr[r]=i}for(const r in Qw)f2(t,Qw[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=mn(t,Dm+1,"defs",gn)),i=IRe(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=mn(t,Dm+1,"defs",gn)),i=LRe(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):mo(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Kz(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function IRe(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=mn(e,n++,"pattern",gn);wu(s,{id:zw+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=mn(s,0,"rect",gn),wu(s,{width:1,height:1,fill:`url(${ite()}#${t.id})`}),e=mn(e,n++,"radialGradient",gn),wu(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=mn(e,n++,"linearGradient",gn),wu(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=mn(e,r,"stop",gn),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return mo(e,r),n}function LRe(e,t,n){let r;return e=mn(e,n,"clipPath",gn),e.setAttribute("id",t.id),t.path?(r=mn(e,0,"path",gn),r.setAttribute("d",t.path)):(r=mn(e,0,"rect",gn),wu(r,{x:0,y:0,width:t.width,height:t.height})),mo(e,1),n+1}function zRe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;ys(n,s=>{i=e.mark(t,s,i,r),++o}),mo(t,1+o)}function Qz(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=xu(s,r,gn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=xu(s,"path",gn);o.appendChild(a),a.__data__=e;const l=xu(s,"g",gn);o.appendChild(l),l.__data__=e;const u=xu(s,"path",gn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||BRe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function BRe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let rl=null,hr=null;const jRe={group(e,t,n){const r=rl=t.childNodes[2];hr=r.__values__,e.foreground(iy,n,this),hr=t.__values__,rl=t.childNodes[1],e.content(iy,n,this);const i=rl=t.childNodes[0];e.background(iy,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==hr.events&&(Fr(r,"pointer-events",o),Fr(i,"pointer-events",o),hr.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Fr(r,"display",null),this.style(i,n),Fr(i,"stroke",null),s&&(n.fill=null),hr=r.__values__,this.style(r,n),s&&(n.fill=s),rl=null}else Fr(r,"display","none")},image(e,t,n){n.smooth===!1?(f2(t,"image-rendering","optimizeSpeed"),f2(t,"image-rendering","pixelated")):f2(t,"image-rendering",null)},text(e,t,n){const r=mv(n);let i,o,s,a;G(r)?(o=r.map(l=>rc(n,l)),i=o.join(`
`),i!==hr.text&&(mo(t,0),s=t.ownerDocument,a=nc(n),o.forEach((l,u)=>{const c=xu(s,"tspan",gn);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),hr.text=i)):(o=rc(n,r),o!==hr.text&&(t.textContent=o,hr.text=o)),Fr(t,"font-family",yv(n)),Fr(t,"font-size",ka(n)+"px"),Fr(t,"font-style",n.fontStyle),Fr(t,"font-variant",n.fontVariant),Fr(t,"font-weight",n.fontWeight)}};function iy(e,t,n){t!==hr[e]&&(n?URe(rl,e,t,n):Fr(rl,e,t),hr[e]=t)}function f2(e,t,n){n!==hr[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),hr[t]=n)}function wu(e,t){for(const n in t)Fr(e,n,t[n])}function Fr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function URe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function ite(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class ote extends vv{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=V6();n.open("svg",De({},o1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",rte,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Xi[n.marktype],i=r.tag,o=[Qee,r.attr];t.open("g",{class:Bee(n),"clip-path":n.clip?w6(this,n,n.group):null},Zee(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const u=mv(a);if(G(u)){const c={x:0,dy:nc(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(rc(a,u[f])).close()}else t.text(rc(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),ys(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):ys(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,u,c)=>{o[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&VRe(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:zw+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function VRe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=yv(t),e["font-size"]=ka(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in Kw){let a=t[s];const l=Kw[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(v6(a)&&(a=pee(a,i.gradient,"")),e[l]=a)}for(const s in Qw){const a=t[s];a!=null&&(o=o||[],o.push(`${Qw[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const Ko={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function WRe(e){Ko.svgMarkTypes=e.svgMarkTypes??["text"],Ko.svgOnTop=e.svgOnTop??!0,Ko.debug=e.debug??!1}class ET extends vv{constructor(t){super(t),this._svgRenderer=new W6(t),this._canvasRenderer=new Xw(t)}initialize(t,n,r,i,o){this._root_el=mn(t,0,"div");const s=mn(this._root_el,0,"div"),a=mn(this._root_el,1,"div");return this._root_el.style.position="relative",Ko.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Ko.svgOnTop?a:s,this._canvasEl=Ko.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return Ko.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!Ko.svgMarkTypes.includes(o));this._svgRenderer.render(t,Ko.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Ko.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class ste extends bv{constructor(t,n){super(t,n)}initialize(t,n,r){const i=mn(mn(t,0,"div"),Ko.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const ate="canvas",lte="hybrid",ute="png",cte="svg",fte="none",Su={Canvas:ate,PNG:ute,SVG:cte,Hybrid:lte,None:fte},nd={};nd[ate]=nd[ute]={renderer:Xw,headless:Xw,handler:bv};nd[cte]={renderer:W6,headless:ote,handler:Gee};nd[lte]={renderer:ET,headless:ET,handler:ste};nd[fte]={};function VC(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(nd[e]=t,this):nd[e]}function dte(e,t,n){const r=[],i=new dn().union(t),o=e.marktype;return o?hte(e,i,n,r):o==="group"?pte(e,i,n,r):q("Intersect scene must be mark node or group item.")}function hte(e,t,n,r){if(HRe(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)pte(i[a],t,n,r);else for(const l=Xi[o].isect;a<s;++a){const u=i[a];gte(u,t,l)&&r.push(u)}}return r}function HRe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function pte(e,t,n,r){n&&n(e.mark)&&gte(e,t,Xi.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)hte(i[l],t,n,r);t.translate(s,a)}return r}function gte(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const oA=new dn;function mte(e){const t=e.clip;if(Oe(t))t(pv(oA.clear()));else if(t)oA.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(oA)}const qRe=1e-9;function H6(e,t,n){return e===t?!0:n==="path"?yte(e,t):e instanceof Date&&t instanceof Date?+e==+t:Qe(e)&&Qe(t)?Math.abs(e-t)<=qRe:!e||!t||!se(e)&&!se(t)?e==t:GRe(e,t)}function yte(e,t){return H6(Jp(e),Jp(t))}function GRe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!H6(e[i],t[i],i))return!1;return typeof e==typeof t}function YRe(){wee(),vPe()}const ng="top",is="left",ss="right",ic="bottom",XRe="top-left",KRe="top-right",QRe="bottom-left",ZRe="bottom-right",q6="start",$T="middle",Or="end",JRe="x",e6e="y",WC="group",G6="axis",Y6="title",t6e="frame",n6e="scope",X6="legend",vte="row-header",bte="row-footer",xte="row-title",wte="column-header",Ste="column-footer",kte="column-title",r6e="padding",i6e="symbol",Cte="fit",_te="fit-x",Ete="fit-y",o6e="pad",K6="none",Wb="all",AT="each",Q6="flush",ku="column",Cu="row";function $te(e){V.call(this,null,e)}ne($te,V,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Xi[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=Hb(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===WC||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(Hb(u,s))),r.role){case G6:case X6:case Y6:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(Hb(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(Hb(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return mte(r),t.modifies("bounds")}});function Hb(e,t,n){return t(e.bounds.clear(),e,n)}const Zz=":vega_identifier:";function Z6(e){V.call(this,0,e)}Z6.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ne(Z6,V,{transform(e,t){const n=s6e(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function s6e(e){return e._signals[Zz]||(e._signals[Zz]=e.add(0))}function Ate(e){V.call(this,null,e)}ne(Ate,V,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,a6e(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===WC?OC:DC;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function a6e(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Tte(e){V.call(this,null,e)}const Jz={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Mte(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Mte=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),eB=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(Mte(i,o=e[n].bounds,t))return!0},l6e=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},u6e=(e,t,n)=>{var r=e.range(),i=new dn;return t===ng||t===ic?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},tB=e=>(e.forEach(t=>t.opacity=1),e),nB=(e,t)=>e.reflow(t.modified()).modifies("opacity");ne(Tte,V,{transform(e,t){const n=Jz[e.method]||Jz.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(tB(i),t=nB(t,e)),t;if(i=i.filter(l6e),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=tB(i),t=nB(t,e),o.length>=3&&eB(o,r)){do o=n(o,r);while(o.length>=3&&eB(o,r));o.length<3&&!He(i).opacity&&(o.length>1&&(He(o).opacity=0),He(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=u6e(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function Pte(e){V.call(this,null,e)}ne(Pte,V,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const cr=new dn;function jh(e,t,n){return e[t]===n?0:(e[t]=n,1)}function c6e(e){var t=e.items[0].orient;return t===is||t===ss}function f6e(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function d6e(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=f6e(o),u=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=o.title&&i.items[l[2]].items[0],g=i.titlePadding,m=i.bounds,y=p&&D6(p),v=0,b=0,x,w;switch(cr.clear().union(m),m.clear(),(x=l[0])>-1&&m.union(i.items[x].bounds),(x=l[1])>-1&&m.union(i.items[x].bounds),a){case ng:v=f||0,b=-c,w=Math.max(d,Math.min(h,-m.y1)),m.add(0,-w).add(u,0),p&&qb(e,p,w,g,y,0,-1,m);break;case is:v=-c,b=f||0,w=Math.max(d,Math.min(h,-m.x1)),m.add(-w,0).add(0,u),p&&qb(e,p,w,g,y,1,-1,m);break;case ss:v=n+c,b=f||0,w=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(w,u),p&&qb(e,p,w,g,y,1,1,m);break;case ic:v=f||0,b=r+c,w=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(u,w),p&&qb(e,p,w,g,0,0,1,m);break;default:v=i.x,b=i.y}return Ml(m.translate(v,b),i),jh(i,"x",v+s)|jh(i,"y",b+s)&&(i.bounds=cr,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function qb(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}a.union(l)}const rB=(e,t)=>Math.floor(Math.min(e,t)),iB=(e,t)=>Math.ceil(Math.max(e,t));function h6e(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===WC)switch(i.role){case G6:case X6:case Y6:break;case vte:s.rowheaders.push(...o);break;case bte:s.rowfooters.push(...o);break;case wte:s.colheaders.push(...o);break;case Ste:s.colfooters.push(...o);break;case xte:s.rowtitle=o[0];break;case kte:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function p6e(e){return new dn().set(0,0,e.width||0,e.height||0)}function g6e(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Rt(e,t,n){const r=se(e)?e[t]:e;return r??(n!==void 0?n:0)}function oB(e){return e<0?Math.ceil(-e):0}function Fte(e,t,n){var r=!n.nodirty,i=n.bounds===Q6?p6e:g6e,o=cr.set(0,0,0,0),s=Rt(n.align,ku),a=Rt(n.align,Cu),l=Rt(n.padding,ku),u=Rt(n.padding,Cu),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,m=Array(d),y=Array(f),v=0,b=Array(d),x=Array(d),w=Array(d),k,S,C,_,$,A,N,M,R,F,D;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)A=t[S],$=w[S]=i(A),A.x=A.x||0,b[S]=0,A.y=A.y||0,x[S]=0,C=S%c,_=~~(S/c),g=Math.max(g,N=Math.ceil($.x2)),v=Math.max(v,M=Math.ceil($.y2)),p[C]=Math.max(p[C],N),y[_]=Math.max(y[_],M),h[S]=l+oB($.x1),m[S]=u+oB($.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(m[S]=0);if(s===AT)for(C=1;C<c;++C){for(D=0,S=C;S<d;S+=c)D<h[S]&&(D=h[S]);for(S=C;S<d;S+=c)h[S]=D+p[C-1]}else if(s===Wb){for(D=0,S=0;S<d;++S)S%c&&D<h[S]&&(D=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=D+g)}else for(s=!1,C=1;C<c;++C)for(S=C;S<d;S+=c)h[S]+=p[C-1];if(a===AT)for(_=1;_<f;++_){for(D=0,S=_*c,k=S+c;S<k;++S)D<m[S]&&(D=m[S]);for(S=_*c;S<k;++S)m[S]=D+y[_-1]}else if(a===Wb){for(D=0,S=c;S<d;++S)D<m[S]&&(D=m[S]);for(S=c;S<d;++S)m[S]=D+v}else for(a=!1,_=1;_<f;++_)for(S=_*c,k=S+c;S<k;++S)m[S]+=y[_-1];for(R=0,S=0;S<d;++S)R=h[S]+(S%c?R:0),b[S]+=R-t[S].x;for(C=0;C<c;++C)for(F=0,S=C;S<d;S+=c)F+=m[S],x[S]+=F-t[S].y;if(s&&Rt(n.center,ku)&&f>1)for(S=0;S<d;++S)$=s===Wb?g:p[S%c],R=$-w[S].x2-t[S].x-b[S],R>0&&(b[S]+=R/2);if(a&&Rt(n.center,Cu)&&c!==1)for(S=0;S<d;++S)$=a===Wb?v:y[~~(S/c)],F=$-w[S].y2-t[S].y-x[S],F>0&&(x[S]+=F/2);for(S=0;S<d;++S)o.union(w[S].translate(b[S],x[S]));switch(R=Rt(n.anchor,JRe),F=Rt(n.anchor,e6e),Rt(n.anchor,ku)){case Or:R-=o.width();break;case $T:R-=o.width()/2}switch(Rt(n.anchor,Cu)){case Or:F-=o.height();break;case $T:F-=o.height()/2}for(R=Math.round(R),F=Math.round(F),o.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)A=t[S],A.x+=b[S]+=R,A.y+=x[S]+=F,o.union(A.mark.bounds.union(A.bounds.translate(b[S],x[S]))),r&&e.dirty(A);return o}function m6e(e,t,n){var r=h6e(t),i=r.marks,o=n.bounds===Q6?y6e:v6e,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,f,d,h,p,g,m;const y=Fte(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=Rt(n.headerBand,Cu,null),c=Gb(e,r.rowheaders,i,a,l,-Rt(s,"rowHeader"),rB,0,o,"x1",0,a,1,g)),r.colheaders&&(g=Rt(n.headerBand,ku,null),f=Gb(e,r.colheaders,i,a,a,-Rt(s,"columnHeader"),rB,1,o,"y1",0,1,a,g)),r.rowfooters&&(g=Rt(n.footerBand,Cu,null),d=Gb(e,r.rowfooters,i,a,l,Rt(s,"rowFooter"),iB,0,o,"x2",a-1,a,1,g)),r.colfooters&&(g=Rt(n.footerBand,ku,null),h=Gb(e,r.colfooters,i,a,a,Rt(s,"columnFooter"),iB,1,o,"y2",u-a,1,a,g)),r.rowtitle&&(p=Rt(n.titleAnchor,Cu),m=Rt(s,"rowTitle"),m=p===Or?d+m:c-m,g=Rt(n.titleBand,Cu,.5),sB(e,r.rowtitle,m,0,y,g)),r.coltitle&&(p=Rt(n.titleAnchor,ku),m=Rt(s,"columnTitle"),m=p===Or?h+m:f-m,g=Rt(n.titleBand,ku,.5),sB(e,r.coltitle,m,1,y,g))}function y6e(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function v6e(e,t){return e.bounds[t]}function Gb(e,t,n,r,i,o,s,a,l,u,c,f,d,h){var p=n.length,g=0,m=0,y,v,b,x,w,k,S,C,_;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=s(g,l(n[y],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=o,v=0,x=t.length;v<x;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,x=t.length;v<x;++v,y+=f){for(k=t[v],w=k.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),_=g):(C=g,_=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),w.union(k.bounds.translate(C-(k.x||0),_-(k.y||0))),k.x=C,k.y=_,e.dirty(k),m=s(m,w[u])}return m}function sB(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function b6e(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function x6e(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function w6e(e,t,n,r,i,o,s){const a=b6e(n,t),l=x6e(e,a("offset",0)),u=a("anchor",q6),c=u===Or?1:u===$T?.5:0,f={align:AT,bounds:a("bounds",Q6),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case is:f.anchor={x:Math.floor(r.x1)-l,column:Or,y:c*(s||r.height()+2*r.y1),row:u};break;case ss:f.anchor={x:Math.ceil(r.x2)+l,y:c*(s||r.height()+2*r.y1),row:u};break;case ng:f.anchor={y:Math.floor(i.y1)-l,row:Or,x:c*(o||i.width()+2*i.x1),column:u};break;case ic:f.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case XRe:f.anchor={x:l,y:l};break;case KRe:f.anchor={x:o-l,y:l,column:Or};break;case QRe:f.anchor={x:l,y:s-l,row:Or};break;case ZRe:f.anchor={x:o-l,y:s-l,column:Or,row:Or};break}return f}function S6e(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),C6e(e,n,n.items[0].items[0]),o=k6e(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===i6e&&_6e(n.items[0].items[0].items[0].items),i!==K6&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,Ml(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function k6e(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function C6e(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&Om(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,c=r-s.y;switch(s.orient){case is:i+=Math.ceil(s.bounds.width())+l;break;case ss:case ic:break;default:o+=s.bounds.height()+l}switch((i||o)&&Om(e,n,i,o),s.orient){case is:c+=nh(t,n,s,a,1,1);break;case ss:u+=nh(t,n,s,Or,0,0)+l,c+=nh(t,n,s,a,1,1);break;case ic:u+=nh(t,n,s,a,0,0),c+=nh(t,n,s,Or,-1,0,1)+l;break;default:u+=nh(t,n,s,a,0,0)}(u||c)&&Om(e,s,u,c),(u=Math.round(s.bounds.x1-r))<0&&(Om(e,n,-u,0),Om(e,s,-u,0))}}function nh(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,f=l&&o?c:0,d=l&&o?0:c,h=i<=0?0:D6(n);return Math.round(r===q6?f:r===Or?d-h:.5*(c-h))}function Om(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function _6e(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function E6e(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===is||a===ss?r:n,p=0,g=0,m=0,y=0,v=0,b;if(s!==WC?a===is?(p=i.y2,h=i.y1):a===ss?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===is&&(p=r,h=0),b=l===q6?p:l===Or?h:(p+h)/2,d&&d.text){switch(a){case ng:case ic:v=f.bounds.height()+c;break;case is:y=f.bounds.width()+c;break;case ss:y=-f.bounds.width()-c;break}cr.clear().union(d.bounds),cr.translate(y-(d.x||0),v-(d.y||0)),jh(d,"x",y)|jh(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(cr),d.mark.bounds.clear().union(cr),e.dirty(d)),cr.clear().union(d.bounds)}else cr.clear();switch(cr.union(f.bounds),a){case ng:g=b,m=i.y1-cr.height()-u;break;case is:g=i.x1-cr.width()-u,m=b;break;case ss:g=i.x2+cr.width()+u,m=b;break;case ic:g=b,m=i.y2+u;break;default:g=o.x,m=o.y}return jh(o,"x",g)|jh(o,"y",m)&&(cr.translate(g,m),e.dirty(o),o.bounds.clear().union(cr),t.bounds.clear().union(cr),e.dirty(o)),o.bounds}function Rte(e){V.call(this,null,e)}ne(Rte,V,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&m6e(n,r,e.layout),A6e(n,r,e)}),$6e(e.mark.group)?t.reflow():t}});function $6e(e){return e&&e.mark.role!=="legend-entry"}function A6e(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new dn().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case G6:h=c6e(f)?a:l,h.union(d6e(e,f,i,o));break;case Y6:c=f;break;case X6:u.push(S6e(e,f));break;case t6e:case n6e:case vte:case bte:case xte:case wte:case Ste:case kte:a.union(f.bounds),l.union(f.bounds);break;default:s.union(f.bounds)}if(u.length){const m={};u.forEach(y=>{d=y.orient||ss,d!==K6&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];Fte(e,v,w6e(v,y,n.legends,a,l,i,o))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===Cte||n.autosize.type===_te||n.autosize.type===Ete))switch(y.orient){case is:case ss:s.add(v.x1,0).add(v.x2,0);break;case ng:case ic:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(l),c&&s.union(E6e(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),T6e(e,t,s,n)}function T6e(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===r6e){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===K6?(u=0,f=0,l=s,c=a):o===Cte?(l=Math.max(0,s-u-d),c=Math.max(0,a-f-h)):o===_te?(l=Math.max(0,s-u-d),a=c+f+h):o===Ete?(s=l+u+d,c=Math.max(0,a-f-h)):o===o6e&&(s=l+u+d,a=c+f+h),e._resizeView(s,a,l,c,[u,f],i.resize)}const M6e=Object.freeze(Object.defineProperty({__proto__:null,bound:$te,identifier:Z6,mark:Ate,overlap:Tte,render:Pte,viewlayout:Rte},Symbol.toStringTag,{value:"Module"}));function Dte(e){V.call(this,null,e)}ne(Dte,V,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=m6(o,s,e.minstep),l=e.format||aee(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?see(o,e.values,a):y6(o,a);return i&&(r.rem=i),i=u.map((c,f)=>st({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(st({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Ote(e){V.call(this,null,e)}function P6e(){return st({})}function F6e(e){const t=Ig().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ne(Ote,V,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||P6e,o=e.key||ve,s=this.value;return G(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&q("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=F6e(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function Nte(e){V.call(this,null,e)}ne(Nte,V,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(G(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||ql,l=i.enter||ql,u=i.exit||ql,c=(o&&!s?i[o]:a)||ql;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),a(f,e)}),n.modifies(l.output),n.modifies(a.output),c!==ql&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==ql&&(t.visit(t.REM,f=>{u(f,e)}),n.modifies(u.output)),s||c!==ql){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=l(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function Ite(e){V.call(this,[],e)}ne(Ite,V,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||r2,s=e.scale,a=+e.limit,l=m6(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===r2,c=e.format||fee(n,s,l,o,e.formatSpecifier,e.formatType,u),f=e.values||cee(s,l),d,h,p,g,m;return i&&(r.rem=i),o===r2?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,Oe(p=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=_r(g=p||8),i=i.map((y,v)=>st({index:v,label:c(y,v,i),value:y,offset:g,size:p(y,e)})),m&&(m=f[i.length],i.push(st({index:i.length,label:`…${f.length-i.length} entries`,value:m,offset:g,size:p(m,e)})))):o===oPe?(d=s.domain(),h=ree(s,d[0],He(d)),f.length<3&&!e.values&&d[0]!==He(d)&&(f=[d[0],He(d)]),i=f.map((y,v)=>st({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=mPe(s),i=f.map((y,v)=>st({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const R6e=e=>e.source.x,D6e=e=>e.source.y,O6e=e=>e.target.x,N6e=e=>e.target.y;function J6(e){V.call(this,{},e)}J6.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ne(J6,V,{transform(e,t){var n=e.sourceX||R6e,r=e.sourceY||D6e,i=e.targetX||O6e,o=e.targetY||N6e,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=aB.get(l+"-"+a)||aB.get(l);return u||q("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const Lte=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,I6e=(e,t,n,r)=>Lte(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),zte=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},L6e=(e,t,n,r)=>zte(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Bte=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},z6e=(e,t,n,r)=>Bte(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),B6e=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,j6e=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,U6e=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},V6e=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},W6e=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},H6e=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},aB=Ig({line:Lte,"line-radial":I6e,arc:zte,"arc-radial":L6e,curve:Bte,"curve-radial":z6e,"orthogonal-horizontal":B6e,"orthogonal-vertical":j6e,"orthogonal-radial":U6e,"diagonal-horizontal":V6e,"diagonal-vertical":W6e,"diagonal-radial":H6e});function eD(e){V.call(this,null,e)}eD.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ne(eD,V,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Dg,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,f=s,d=(a-s)/eQ(u),h=Ni(c),p,g,m;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),p=0;p<c;++p)m=u[h[p]],g=l[h[p]],g[r]=f,g[i]=f+=m*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const q6e=5;function G6e(e){const t=e.type;return!e.bins&&(t===Kp||t===av||t===lv)}function jte(e){return h6(e)&&e!==la}const Y6e=gs(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Ute(e){V.call(this,null,e),this.modified(!0)}ne(Ute,V,{transform(e,t){var n=t.dataflow,r=this.value,i=X6e(e);(!r||i!==r.type)&&(this.value=r=Je(i)());for(i in e)if(!Y6e[i]){if(i==="padding"&&jte(r.type))continue;Oe(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return tDe(r,e,eDe(r,e,Q6e(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function X6e(e){var t=e.type,n="",r;return t===la?la+"-"+Kp:(K6e(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?la+"-":r===3?Hg+"-":""),(n+t||Kp).toLowerCase())}function K6e(e){const t=e.type;return h6(t)&&t!==ed&&t!==td&&(e.scheme||e.range&&e.range.length&&e.range.every(le))}function Q6e(e,t,n){const r=Z6e(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&G6e(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return jte(o)&&t.padding&&i[0]!==He(i)&&(i=J6e(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Vte(o,i,n)),o===u6&&e.unknown(t.domainImplicit?aT:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&m6(e,t.nice)||null),i.length}function Z6e(e,t,n){return t?(e.domain(Vte(e.type,t,n)),t.length):-1}function J6e(e,t,n,r,i,o){var s=Math.abs(He(n)-n[0]),a=s/(s-2*r),l=e===Cl?PF(t,null,a):e===lv?ww(t,null,a,.5):e===av?ww(t,null,a,i||1):e===TC?FF(t,null,a,o||1):MF(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function Vte(e,t,n){if(ZJ(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+te(t))}return t}function eDe(e,t,n){let r=t.bins;if(r&&!G(r)){const i=e.domain(),o=i[0],s=He(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||q("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=Ni(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===c6&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function tDe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=nDe(r,t,n);else if(t.scheme&&(o=rDe(r,t,n),Oe(o))){if(e.interpolator)return e.interpolator(o);q(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&JJ(r))return e.interpolator(FC(TT(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(p6(t.interpolate,t.interpolateGamma)):Oe(e.round)?e.round(i):Oe(e.rangeRound)&&e.interpolate(i?ov:wc),o&&e.range(TT(o,t.reverse))}function nDe(e,t,n){e!==qJ&&e!==pT&&q("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===pT?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*l6(n,i,r)]}function rDe(e,t,n){var r=t.schemeExtent,i,o;return G(t.scheme)?o=FC(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=g6(i),o||q(`Unrecognized scheme name: ${t.scheme}`)),n=e===PC?n+1:e===c6?n-1:e===Qp||e===MC?+t.schemeCount||q6e:n,JJ(e)?lB(o,r,t.reverse):Oe(o)?nee(lB(o,r),n):e===u6?o:o.slice(0,n)}function lB(e,t,n){return Oe(e)&&(t||n)?tee(e,TT(t||[0,1],n)):e}function TT(e,t){return t?e.slice().reverse():e}function Wte(e){V.call(this,null,e)}ne(Wte,V,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ad(e.sort)),this.modified(n),t}});const uB="zero",Hte="center",qte="normalize",Gte=["y0","y1"];function tD(e){V.call(this,null,e)}tD.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:uB,values:[uB,Hte,qte]},{name:"as",type:"string",array:!0,length:2,default:Gte}]};ne(tD,V,{transform(e,t){var n=e.as||Gte,r=n[0],i=n[1],o=Ad(e.sort),s=e.field||Dg,a=e.offset===Hte?iDe:e.offset===qte?oDe:sDe,l,u,c,f;for(l=aDe(t.source,e.groupby,o,s),u=0,c=l.length,f=l.max;u<c;++u)a(l[u],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function iDe(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function oDe(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=s,c[i]=s=o*(u+=Math.abs(n(c)))}function sDe(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=s,c[i]=s+=u):(c[r]=o,c[i]=o+=u)}function aDe(e,t,n,r){var i=[],o=g=>g(c),s,a,l,u,c,f,d,h,p;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,u=i.length;f<u;++f){for(d=i[f],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const lDe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Dte,datajoin:Ote,encode:Nte,legendentries:Ite,linkpath:J6,pie:eD,scale:Ute,sortitems:Wte,stack:tD},Symbol.toStringTag,{value:"Module"}));var xe=1e-6,Zw=1e-12,Ie=Math.PI,Yt=Ie/2,Jw=Ie/4,Yr=Ie*2,Zt=180/Ie,Ne=Ie/180,We=Math.abs,Gg=Math.atan,Ro=Math.atan2,Se=Math.cos,Yb=Math.ceil,Yte=Math.exp,MT=Math.hypot,eS=Math.log,sA=Math.pow,be=Math.sin,wo=Math.sign||function(e){return e>0?1:e<0?-1:0},Xr=Math.sqrt,nD=Math.tan;function Xte(e){return e>1?0:e<-1?Ie:Math.acos(e)}function xi(e){return e>1?Yt:e<-1?-Yt:Math.asin(e)}function Yn(){}function tS(e,t){e&&fB.hasOwnProperty(e.type)&&fB[e.type](e,t)}var cB={Feature:function(e,t){tS(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)tS(n[r].geometry,t)}},fB={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){PT(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)PT(n[r],t,0)},Polygon:function(e,t){dB(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)dB(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)tS(n[r],t)}};function PT(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function dB(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)PT(e[n],t,1);t.polygonEnd()}function Ga(e,t){e&&cB.hasOwnProperty(e.type)?cB[e.type](e,t):tS(e,t)}var nS=new qr,rS=new qr,Kte,Qte,FT,RT,DT,ga={point:Yn,lineStart:Yn,lineEnd:Yn,polygonStart:function(){nS=new qr,ga.lineStart=uDe,ga.lineEnd=cDe},polygonEnd:function(){var e=+nS;rS.add(e<0?Yr+e:e),this.lineStart=this.lineEnd=this.point=Yn},sphere:function(){rS.add(Yr)}};function uDe(){ga.point=fDe}function cDe(){Zte(Kte,Qte)}function fDe(e,t){ga.point=Zte,Kte=e,Qte=t,e*=Ne,t*=Ne,FT=e,RT=Se(t=t/2+Jw),DT=be(t)}function Zte(e,t){e*=Ne,t*=Ne,t=t/2+Jw;var n=e-FT,r=n>=0?1:-1,i=r*n,o=Se(t),s=be(t),a=DT*s,l=RT*o+a*Se(i),u=a*r*be(i);nS.add(Ro(u,l)),FT=e,RT=o,DT=s}function dDe(e){return rS=new qr,Ga(e,ga),rS*2}function iS(e){return[Ro(e[1],e[0]),xi(e[2])]}function rd(e){var t=e[0],n=e[1],r=Se(n);return[r*Se(t),r*be(t),be(n)]}function Xb(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function aA(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Kb(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function oS(e){var t=Xr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var It,oi,Ht,Pi,nf,Jte,ene,op,oy,tu,_l,Va={point:OT,lineStart:hB,lineEnd:pB,polygonStart:function(){Va.point=nne,Va.lineStart=hDe,Va.lineEnd=pDe,oy=new qr,ga.polygonStart()},polygonEnd:function(){ga.polygonEnd(),Va.point=OT,Va.lineStart=hB,Va.lineEnd=pB,nS<0?(It=-(Ht=180),oi=-(Pi=90)):oy>xe?Pi=90:oy<-xe&&(oi=-90),_l[0]=It,_l[1]=Ht},sphere:function(){It=-(Ht=180),oi=-(Pi=90)}};function OT(e,t){tu.push(_l=[It=e,Ht=e]),t<oi&&(oi=t),t>Pi&&(Pi=t)}function tne(e,t){var n=rd([e*Ne,t*Ne]);if(op){var r=rg(op,n),i=[r[1],-r[0],0],o=rg(i,r);oS(o),o=iS(o);var s=e-nf,a=s>0?1:-1,l=o[0]*Zt*a,u,c=We(s)>180;c^(a*nf<l&&l<a*e)?(u=o[1]*Zt,u>Pi&&(Pi=u)):(l=(l+360)%360-180,c^(a*nf<l&&l<a*e)?(u=-o[1]*Zt,u<oi&&(oi=u)):(t<oi&&(oi=t),t>Pi&&(Pi=t))),c?e<nf?Mi(It,e)>Mi(It,Ht)&&(Ht=e):Mi(e,Ht)>Mi(It,Ht)&&(It=e):Ht>=It?(e<It&&(It=e),e>Ht&&(Ht=e)):e>nf?Mi(It,e)>Mi(It,Ht)&&(Ht=e):Mi(e,Ht)>Mi(It,Ht)&&(It=e)}else tu.push(_l=[It=e,Ht=e]);t<oi&&(oi=t),t>Pi&&(Pi=t),op=n,nf=e}function hB(){Va.point=tne}function pB(){_l[0]=It,_l[1]=Ht,Va.point=OT,op=null}function nne(e,t){if(op){var n=e-nf;oy.add(We(n)>180?n+(n>0?360:-360):n)}else Jte=e,ene=t;ga.point(e,t),tne(e,t)}function hDe(){ga.lineStart()}function pDe(){nne(Jte,ene),ga.lineEnd(),We(oy)>xe&&(It=-(Ht=180)),_l[0]=It,_l[1]=Ht,op=null}function Mi(e,t){return(t-=e)<0?t+360:t}function gDe(e,t){return e[0]-t[0]}function gB(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function mDe(e){var t,n,r,i,o,s,a;if(Pi=Ht=-(It=oi=1/0),tu=[],Ga(e,Va),n=tu.length){for(tu.sort(gDe),t=1,r=tu[0],o=[r];t<n;++t)i=tu[t],gB(r,i[0])||gB(r,i[1])?(Mi(r[0],i[1])>Mi(r[0],r[1])&&(r[1]=i[1]),Mi(i[0],r[1])>Mi(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Mi(r[1],i[0]))>s&&(s=a,It=i[0],Ht=r[1])}return tu=_l=null,It===1/0||oi===1/0?[[NaN,NaN],[NaN,NaN]]:[[It,oi],[Ht,Pi]]}var v0,sS,aS,lS,uS,cS,fS,dS,NT,IT,LT,rne,ine,Ir,Lr,zr,as={sphere:Yn,point:rD,lineStart:mB,lineEnd:yB,polygonStart:function(){as.lineStart=bDe,as.lineEnd=xDe},polygonEnd:function(){as.lineStart=mB,as.lineEnd=yB}};function rD(e,t){e*=Ne,t*=Ne;var n=Se(t);xv(n*Se(e),n*be(e),be(t))}function xv(e,t,n){++v0,aS+=(e-aS)/v0,lS+=(t-lS)/v0,uS+=(n-uS)/v0}function mB(){as.point=yDe}function yDe(e,t){e*=Ne,t*=Ne;var n=Se(t);Ir=n*Se(e),Lr=n*be(e),zr=be(t),as.point=vDe,xv(Ir,Lr,zr)}function vDe(e,t){e*=Ne,t*=Ne;var n=Se(t),r=n*Se(e),i=n*be(e),o=be(t),s=Ro(Xr((s=Lr*o-zr*i)*s+(s=zr*r-Ir*o)*s+(s=Ir*i-Lr*r)*s),Ir*r+Lr*i+zr*o);sS+=s,cS+=s*(Ir+(Ir=r)),fS+=s*(Lr+(Lr=i)),dS+=s*(zr+(zr=o)),xv(Ir,Lr,zr)}function yB(){as.point=rD}function bDe(){as.point=wDe}function xDe(){one(rne,ine),as.point=rD}function wDe(e,t){rne=e,ine=t,e*=Ne,t*=Ne,as.point=one;var n=Se(t);Ir=n*Se(e),Lr=n*be(e),zr=be(t),xv(Ir,Lr,zr)}function one(e,t){e*=Ne,t*=Ne;var n=Se(t),r=n*Se(e),i=n*be(e),o=be(t),s=Lr*o-zr*i,a=zr*r-Ir*o,l=Ir*i-Lr*r,u=MT(s,a,l),c=xi(u),f=u&&-c/u;NT.add(f*s),IT.add(f*a),LT.add(f*l),sS+=c,cS+=c*(Ir+(Ir=r)),fS+=c*(Lr+(Lr=i)),dS+=c*(zr+(zr=o)),xv(Ir,Lr,zr)}function SDe(e){v0=sS=aS=lS=uS=cS=fS=dS=0,NT=new qr,IT=new qr,LT=new qr,Ga(e,as);var t=+NT,n=+IT,r=+LT,i=MT(t,n,r);return i<Zw&&(t=cS,n=fS,r=dS,sS<xe&&(t=aS,n=lS,r=uS),i=MT(t,n,r),i<Zw)?[NaN,NaN]:[Ro(n,t)*Zt,xi(r/i)*Zt]}function zT(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function BT(e,t){return We(e)>Ie&&(e-=Math.round(e/Yr)*Yr),[e,t]}BT.invert=BT;function sne(e,t,n){return(e%=Yr)?t||n?zT(bB(e),xB(t,n)):bB(e):t||n?xB(t,n):BT}function vB(e){return function(t,n){return t+=e,We(t)>Ie&&(t-=Math.round(t/Yr)*Yr),[t,n]}}function bB(e){var t=vB(e);return t.invert=vB(-e),t}function xB(e,t){var n=Se(e),r=be(e),i=Se(t),o=be(t);function s(a,l){var u=Se(l),c=Se(a)*u,f=be(a)*u,d=be(l),h=d*n+c*r;return[Ro(f*i-h*o,c*n-d*r),xi(h*i+f*o)]}return s.invert=function(a,l){var u=Se(l),c=Se(a)*u,f=be(a)*u,d=be(l),h=d*i-f*o;return[Ro(f*i+d*o,c*n+h*r),xi(h*n-c*r)]},s}function kDe(e){e=sne(e[0]*Ne,e[1]*Ne,e.length>2?e[2]*Ne:0);function t(n){return n=e(n[0]*Ne,n[1]*Ne),n[0]*=Zt,n[1]*=Zt,n}return t.invert=function(n){return n=e.invert(n[0]*Ne,n[1]*Ne),n[0]*=Zt,n[1]*=Zt,n},t}function CDe(e,t,n,r,i,o){if(n){var s=Se(t),a=be(t),l=r*n;i==null?(i=t+r*Yr,o=t-l/2):(i=wB(s,i),o=wB(s,o),(r>0?i<o:i>o)&&(i+=r*Yr));for(var u,c=i;r>0?c>o:c<o;c-=l)u=iS([s,-a*Se(c),-a*be(c)]),e.point(u[0],u[1])}}function wB(e,t){t=rd(t),t[0]-=e,oS(t);var n=Xte(-t[1]);return((-t[2]<0?-n:n)+Yr-xe)%Yr}function ane(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Yn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function d2(e,t){return We(e[0]-t[0])<xe&&We(e[1]-t[1])<xe}function Qb(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function lne(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],v;if(d2(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((m=p[a])[0],m[1]);i.lineEnd();return}y[0]+=2*xe}o.push(v=new Qb(m,p,null,!0)),s.push(v.o=new Qb(m,null,v,!1)),o.push(v=new Qb(y,p,null,!1)),s.push(v.o=new Qb(y,null,v,!0))}}),!!o.length){for(s.sort(t),SB(o),SB(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function SB(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function lA(e){return We(e[0])<=Ie?e[0]:wo(e[0])*((We(e[0])+Ie)%Yr-Ie)}function _De(e,t){var n=lA(t),r=t[1],i=be(r),o=[be(n),-Se(n),0],s=0,a=0,l=new qr;i===1?r=Yt+xe:i===-1&&(r=-Yt-xe);for(var u=0,c=e.length;u<c;++u)if(d=(f=e[u]).length)for(var f,d,h=f[d-1],p=lA(h),g=h[1]/2+Jw,m=be(g),y=Se(g),v=0;v<d;++v,p=x,m=k,y=S,h=b){var b=f[v],x=lA(b),w=b[1]/2+Jw,k=be(w),S=Se(w),C=x-p,_=C>=0?1:-1,$=_*C,A=$>Ie,N=m*k;if(l.add(Ro(N*_*be($),y*S+N*Se($))),s+=A?C+_*Yr:C,A^p>=n^x>=n){var M=rg(rd(h),rd(b));oS(M);var R=rg(o,M);oS(R);var F=(A^C>=0?-1:1)*xi(R[2]);(r>F||r===F&&(M[0]||M[1]))&&(a+=A^C>=0?1:-1)}}return(s<-xe||s<xe&&l<-Zw)^a&1}function une(e,t,n,r){return function(i){var o=t(i),s=ane(),a=t(s),l=!1,u,c,f,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=JK(c);var x=_De(u,r);c.length?(l||(i.polygonStart(),l=!0),lne(c,$De,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,w){e(x,w)&&i.point(x,w)}function p(x,w){o.point(x,w)}function g(){d.point=p,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(x,w){f.push([x,w]),a.point(x,w)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),w=s.result(),k,S=w.length,C,_,$;if(f.pop(),u.push(f),f=null,!!S){if(x&1){if(_=w[0],(C=_.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),k=0;k<C;++k)i.point(($=_[k])[0],$[1]);i.lineEnd()}return}S>1&&x&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(EDe))}}return d}}function EDe(e){return e.length>1}function $De(e,t){return((e=e.x)[0]<0?e[1]-Yt-xe:Yt-e[1])-((t=t.x)[0]<0?t[1]-Yt-xe:Yt-t[1])}const kB=une(function(){return!0},ADe,MDe,[-Ie,-Yt]);function ADe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Ie:-Ie,l=We(o-t);We(l-Ie)<xe?(e.point(t,n=(n+s)/2>0?Yt:-Yt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=Ie&&(We(t-r)<xe&&(t-=r*xe),We(o-a)<xe&&(o-=a*xe),n=TDe(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function TDe(e,t,n,r){var i,o,s=be(e-n);return We(s)>xe?Gg((be(t)*(o=Se(r))*be(n)-be(r)*(i=Se(t))*be(e))/(i*o*s)):(t+r)/2}function MDe(e,t,n,r){var i;if(e==null)i=n*Yt,r.point(-Ie,i),r.point(0,i),r.point(Ie,i),r.point(Ie,0),r.point(Ie,-i),r.point(0,-i),r.point(-Ie,-i),r.point(-Ie,0),r.point(-Ie,i);else if(We(e[0]-t[0])>xe){var o=e[0]<t[0]?Ie:-Ie;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function PDe(e){var t=Se(e),n=2*Ne,r=t>0,i=We(t)>xe;function o(c,f,d,h){CDe(h,e,n,d,c,f)}function s(c,f){return Se(c)*Se(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var v=[m,y],b,x=s(m,y),w=r?x?0:u(m,y):x?u(m+(m<0?Ie:-Ie),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=l(f,v),(!b||d2(f,b)||d2(v,b))&&(v[2]=1)),x!==h)g=0,x?(c.lineStart(),b=l(v,f),c.point(b[0],b[1])):(b=l(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var k;!(w&d)&&(k=l(v,f,!0))&&(g=0,r?(c.lineStart(),c.point(k[0][0],k[0][1]),c.point(k[1][0],k[1][1]),c.lineEnd()):(c.point(k[1][0],k[1][1]),c.lineEnd(),c.lineStart(),c.point(k[0][0],k[0][1],3)))}x&&(!f||!d2(f,v))&&c.point(v[0],v[1]),f=v,h=x,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(c,f,d){var h=rd(c),p=rd(f),g=[1,0,0],m=rg(h,p),y=Xb(m,m),v=m[0],b=y-v*v;if(!b)return!d&&c;var x=t*y/b,w=-t*v/b,k=rg(g,m),S=Kb(g,x),C=Kb(m,w);aA(S,C);var _=k,$=Xb(S,_),A=Xb(_,_),N=$*$-A*(Xb(S,S)-1);if(!(N<0)){var M=Xr(N),R=Kb(_,(-$-M)/A);if(aA(R,S),R=iS(R),!d)return R;var F=c[0],D=f[0],I=c[1],O=f[1],j;D<F&&(j=F,F=D,D=j);var Y=D-F,W=We(Y-Ie)<xe,oe=W||Y<xe;if(!W&&O<I&&(j=I,I=O,O=j),oe?W?I+O>0^R[1]<(We(R[0]-F)<xe?I:O):I<=R[1]&&R[1]<=O:Y>Ie^(F<=R[0]&&R[0]<=D)){var re=Kb(_,(-$+M)/A);return aA(re,S),[R,iS(re)]}}}function u(c,f){var d=r?e:Ie-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return une(s,a,o,r?[0,-e]:[-Ie,e-Ie])}function FDe(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],c=0,f=1,d=l-s,h=u-a,p;if(p=n-s,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=o-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var b0=1e9,Zb=-b0;function cne(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function o(u,c,f,d){var h=0,p=0;if(u==null||(h=s(u,f))!==(p=s(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function s(u,c){return We(u[0]-e)<xe?c>0?0:3:We(u[0]-n)<xe?c>0?2:1:We(u[1]-t)<xe?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=s(u,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=ane(),d,h,p,g,m,y,v,b,x,w,k,S={point:C,lineStart:N,lineEnd:M,polygonStart:$,polygonEnd:A};function C(F,D){i(F,D)&&c.point(F,D)}function _(){for(var F=0,D=0,I=h.length;D<I;++D)for(var O=h[D],j=1,Y=O.length,W=O[0],oe,re,we=W[0],Re=W[1];j<Y;++j)oe=we,re=Re,W=O[j],we=W[0],Re=W[1],re<=r?Re>r&&(we-oe)*(r-re)>(Re-re)*(e-oe)&&++F:Re<=r&&(we-oe)*(r-re)<(Re-re)*(e-oe)&&--F;return F}function $(){c=f,d=[],h=[],k=!0}function A(){var F=_(),D=k&&F,I=(d=JK(d)).length;(D||I)&&(u.polygonStart(),D&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),I&&lne(d,a,F,o,u),u.polygonEnd()),c=u,d=h=p=null}function N(){S.point=R,h&&h.push(p=[]),w=!0,x=!1,v=b=NaN}function M(){d&&(R(g,m),y&&x&&f.rejoin(),d.push(f.result())),S.point=C,x&&c.lineEnd()}function R(F,D){var I=i(F,D);if(h&&p.push([F,D]),w)g=F,m=D,y=I,w=!1,I&&(c.lineStart(),c.point(F,D));else if(I&&x)c.point(F,D);else{var O=[v=Math.max(Zb,Math.min(b0,v)),b=Math.max(Zb,Math.min(b0,b))],j=[F=Math.max(Zb,Math.min(b0,F)),D=Math.max(Zb,Math.min(b0,D))];FDe(O,j,e,t,n,r)?(x||(c.lineStart(),c.point(O[0],O[1])),c.point(j[0],j[1]),I||c.lineEnd(),k=!1):I&&(c.lineStart(),c.point(F,D),k=!1)}v=F,b=D,x=I}return S}}function CB(e,t,n){var r=Ni(e,t-xe,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function _B(e,t,n){var r=Ni(e,t-xe,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function RDe(){var e,t,n,r,i,o,s,a,l=10,u=l,c=90,f=360,d,h,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ni(Yb(r/c)*c,n,c).map(p).concat(Ni(Yb(a/f)*f,s,f).map(g)).concat(Ni(Yb(t/l)*l,e,l).filter(function(b){return We(b%c)>xe}).map(d)).concat(Ni(Yb(o/u)*u,i,u).filter(function(b){return We(b%f)>xe}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(s).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],s=+b[1][1],r>n&&(b=r,r=n,n=b),a>s&&(b=a,a=s,s=b),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],o=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),o>i&&(b=o,o=i,i=b),y.precision(m)):[[t,o],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],u=+b[1],y):[l,u]},y.precision=function(b){return arguments.length?(m=+b,d=CB(o,i,90),h=_B(t,e,m),p=CB(a,s,90),g=_B(r,n,m),y):m},y.extentMajor([[-180,-90+xe],[180,90-xe]]).extentMinor([[-180,-80-xe],[180,80+xe]])}const s1=e=>e;var uA=new qr,jT=new qr,fne,dne,UT,VT,Ya={point:Yn,lineStart:Yn,lineEnd:Yn,polygonStart:function(){Ya.lineStart=DDe,Ya.lineEnd=NDe},polygonEnd:function(){Ya.lineStart=Ya.lineEnd=Ya.point=Yn,uA.add(We(jT)),jT=new qr},result:function(){var e=uA/2;return uA=new qr,e}};function DDe(){Ya.point=ODe}function ODe(e,t){Ya.point=hne,fne=UT=e,dne=VT=t}function hne(e,t){jT.add(VT*e-UT*t),UT=e,VT=t}function NDe(){hne(fne,dne)}var ig=1/0,hS=ig,a1=-ig,pS=a1,gS={point:IDe,lineStart:Yn,lineEnd:Yn,polygonStart:Yn,polygonEnd:Yn,result:function(){var e=[[ig,hS],[a1,pS]];return a1=pS=-(hS=ig=1/0),e}};function IDe(e,t){e<ig&&(ig=e),e>a1&&(a1=e),t<hS&&(hS=t),t>pS&&(pS=t)}var WT=0,HT=0,x0=0,mS=0,yS=0,Uh=0,qT=0,GT=0,w0=0,pne,gne,Ks,Qs,yo={point:id,lineStart:EB,lineEnd:$B,polygonStart:function(){yo.lineStart=BDe,yo.lineEnd=jDe},polygonEnd:function(){yo.point=id,yo.lineStart=EB,yo.lineEnd=$B},result:function(){var e=w0?[qT/w0,GT/w0]:Uh?[mS/Uh,yS/Uh]:x0?[WT/x0,HT/x0]:[NaN,NaN];return WT=HT=x0=mS=yS=Uh=qT=GT=w0=0,e}};function id(e,t){WT+=e,HT+=t,++x0}function EB(){yo.point=LDe}function LDe(e,t){yo.point=zDe,id(Ks=e,Qs=t)}function zDe(e,t){var n=e-Ks,r=t-Qs,i=Xr(n*n+r*r);mS+=i*(Ks+e)/2,yS+=i*(Qs+t)/2,Uh+=i,id(Ks=e,Qs=t)}function $B(){yo.point=id}function BDe(){yo.point=UDe}function jDe(){mne(pne,gne)}function UDe(e,t){yo.point=mne,id(pne=Ks=e,gne=Qs=t)}function mne(e,t){var n=e-Ks,r=t-Qs,i=Xr(n*n+r*r);mS+=i*(Ks+e)/2,yS+=i*(Qs+t)/2,Uh+=i,i=Qs*e-Ks*t,qT+=i*(Ks+e),GT+=i*(Qs+t),w0+=i*3,id(Ks=e,Qs=t)}function yne(e){this._context=e}yne.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yr);break}}},result:Yn};var YT=new qr,cA,vne,bne,S0,k0,l1={point:Yn,lineStart:function(){l1.point=VDe},lineEnd:function(){cA&&xne(vne,bne),l1.point=Yn},polygonStart:function(){cA=!0},polygonEnd:function(){cA=null},result:function(){var e=+YT;return YT=new qr,e}};function VDe(e,t){l1.point=xne,vne=S0=e,bne=k0=t}function xne(e,t){S0-=e,k0-=t,YT.add(Xr(S0*S0+k0*k0)),S0=e,k0=t}let AB,vS,TB,MB;class PB{constructor(t){this._append=t==null?wne:WDe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==TB||this._append!==vS){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,TB=r,vS=this._append,MB=this._,this._=i}this._+=MB;break}}}result(){const t=this._;return this._="",t.length?t:null}}function wne(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function WDe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return wne;if(t!==AB){const n=10**t;AB=t,vS=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return vS}function Sne(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Ga(a,i(o))),o.result()}return s.area=function(a){return Ga(a,i(Ya)),Ya.result()},s.measure=function(a){return Ga(a,i(l1)),l1.result()},s.bounds=function(a){return Ga(a,i(gS)),gS.result()},s.centroid=function(a){return Ga(a,i(yo)),yo.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,s1):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new PB(n)):new yne(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new PB(n)),s},s.projection(e).digits(n).context(t)}function HC(e){return function(t){var n=new XT;for(var r in e)n[r]=e[r];return n.stream=t,n}}function XT(){}XT.prototype={constructor:XT,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function iD(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Ga(n,e.stream(gS)),t(gS.result()),r!=null&&e.clipExtent(r),e}function qC(e,t,n){return iD(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function oD(e,t,n){return qC(e,[[0,0],t],n)}function sD(e,t,n){return iD(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function aD(e,t,n){return iD(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var FB=16,HDe=Se(30*Ne);function RB(e,t){return+t?GDe(e,t):qDe(e)}function qDe(e){return HC({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function GDe(e,t){function n(r,i,o,s,a,l,u,c,f,d,h,p,g,m){var y=u-r,v=c-i,b=y*y+v*v;if(b>4*t&&g--){var x=s+d,w=a+h,k=l+p,S=Xr(x*x+w*w+k*k),C=xi(k/=S),_=We(We(k)-1)<xe||We(o-f)<xe?(o+f)/2:Ro(w,x),$=e(_,C),A=$[0],N=$[1],M=A-r,R=N-i,F=v*M-y*R;(F*F/b>t||We((y*M+v*R)/b-.5)>.3||s*d+a*h+l*p<HDe)&&(n(r,i,o,s,a,l,A,N,_,x/=S,w/=S,k,g,m),m.point(A,N),n(A,N,_,x,w,k,u,c,f,d,h,p,g,m))}}return function(r){var i,o,s,a,l,u,c,f,d,h,p,g,m={point:y,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),m.lineStart=w},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(C,_){C=e(C,_),r.point(C[0],C[1])}function v(){f=NaN,m.point=b,r.lineStart()}function b(C,_){var $=rd([C,_]),A=e(C,_);n(f,d,c,h,p,g,f=A[0],d=A[1],c=C,h=$[0],p=$[1],g=$[2],FB,r),r.point(f,d)}function x(){m.point=y,r.lineEnd()}function w(){v(),m.point=k,m.lineEnd=S}function k(C,_){b(i=C,_),o=f,s=d,a=h,l=p,u=g,m.point=b}function S(){n(f,d,c,h,p,g,o,s,i,a,l,u,FB,r),m.lineEnd=x,x()}return m}}var YDe=HC({point:function(e,t){this.stream.point(e*Ne,t*Ne)}});function XDe(e){return HC({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function KDe(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function DB(e,t,n,r,i,o){if(!o)return KDe(e,t,n,r,i);var s=Se(o),a=be(o),l=s*e,u=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(g,m){return g*=r,m*=i,[l*g-u*m+t,n-u*g-l*m]}return p.invert=function(g,m){return[r*(c*g-f*m+d),i*(h-f*g-c*m)]},p}function Ca(e){return kne(function(){return e})()}function kne(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,c,f=0,d=1,h=1,p=null,g=kB,m=null,y,v,b,x=s1,w=.5,k,S,C,_,$;function A(F){return C(F[0]*Ne,F[1]*Ne)}function N(F){return F=C.invert(F[0],F[1]),F&&[F[0]*Zt,F[1]*Zt]}A.stream=function(F){return _&&$===F?_:_=YDe(XDe(c)(g(k(x($=F)))))},A.preclip=function(F){return arguments.length?(g=F,p=void 0,R()):g},A.postclip=function(F){return arguments.length?(x=F,m=y=v=b=null,R()):x},A.clipAngle=function(F){return arguments.length?(g=+F?PDe(p=F*Ne):(p=null,kB),R()):p*Zt},A.clipExtent=function(F){return arguments.length?(x=F==null?(m=y=v=b=null,s1):cne(m=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),R()):m==null?null:[[m,y],[v,b]]},A.scale=function(F){return arguments.length?(n=+F,M()):n},A.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],M()):[r,i]},A.center=function(F){return arguments.length?(o=F[0]%360*Ne,s=F[1]%360*Ne,M()):[o*Zt,s*Zt]},A.rotate=function(F){return arguments.length?(a=F[0]%360*Ne,l=F[1]%360*Ne,u=F.length>2?F[2]%360*Ne:0,M()):[a*Zt,l*Zt,u*Zt]},A.angle=function(F){return arguments.length?(f=F%360*Ne,M()):f*Zt},A.reflectX=function(F){return arguments.length?(d=F?-1:1,M()):d<0},A.reflectY=function(F){return arguments.length?(h=F?-1:1,M()):h<0},A.precision=function(F){return arguments.length?(k=RB(S,w=F*F),R()):Xr(w)},A.fitExtent=function(F,D){return qC(A,F,D)},A.fitSize=function(F,D){return oD(A,F,D)},A.fitWidth=function(F,D){return sD(A,F,D)},A.fitHeight=function(F,D){return aD(A,F,D)};function M(){var F=DB(n,0,0,d,h,f).apply(null,t(o,s)),D=DB(n,r-F[0],i-F[1],d,h,f);return c=sne(a,l,u),S=zT(t,D),C=zT(c,S),k=RB(S,w),R()}function R(){return _=$=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&N,M()}}function lD(e){var t=0,n=Ie/3,r=kne(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ne,n=o[1]*Ne):[t*Zt,n*Zt]},i}function QDe(e){var t=Se(e);function n(r,i){return[r*t,be(i)/t]}return n.invert=function(r,i){return[r/t,xi(i*t)]},n}function ZDe(e,t){var n=be(e),r=(n+be(t))/2;if(We(r)<xe)return QDe(e);var i=1+n*(2*r-n),o=Xr(i)/r;function s(a,l){var u=Xr(i-2*r*be(l))/r;return[u*be(a*=r),o-u*Se(a)]}return s.invert=function(a,l){var u=o-l,c=Ro(a,We(u))*wo(u);return u*r<0&&(c-=Ie*wo(a)*wo(u)),[c/r,xi((i-(a*a+u*u)*r*r)/(2*r))]},s}function bS(){return lD(ZDe).scale(155.424).center([0,33.6442])}function Cne(){return bS().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function JDe(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function eOe(){var e,t,n=Cne(),r,i=bS().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=bS().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(o.point(h,p),l)||(a.point(h,p),l)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=JDe([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),o=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+xe,g+.12*h+xe],[p-.214*h-xe,g+.234*h-xe]]).stream(u),a=s.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+xe,g+.166*h+xe],[p-.115*h-xe,g+.234*h-xe]]).stream(u),f()},c.fitExtent=function(d,h){return qC(c,d,h)},c.fitSize=function(d,h){return oD(c,d,h)},c.fitWidth=function(d,h){return sD(c,d,h)},c.fitHeight=function(d,h){return aD(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function _ne(e){return function(t,n){var r=Se(t),i=Se(n),o=e(r*i);return o===1/0?[2,0]:[o*i*be(t),o*be(n)]}}function wv(e){return function(t,n){var r=Xr(t*t+n*n),i=e(r),o=be(i),s=Se(i);return[Ro(t*o,r*s),xi(r&&n*o/r)]}}var Ene=_ne(function(e){return Xr(2/(1+e))});Ene.invert=wv(function(e){return 2*xi(e/2)});function tOe(){return Ca(Ene).scale(124.75).clipAngle(180-.001)}var $ne=_ne(function(e){return(e=Xte(e))&&e/be(e)});$ne.invert=wv(function(e){return e});function nOe(){return Ca($ne).scale(79.4188).clipAngle(180-.001)}function GC(e,t){return[e,eS(nD((Yt+t)/2))]}GC.invert=function(e,t){return[e,2*Gg(Yte(t))-Yt]};function rOe(){return Ane(GC).scale(961/Yr)}function Ane(e){var t=Ca(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=l=u=null:(s=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):s==null?null:[[s,a],[l,u]]};function c(){var f=Ie*r(),d=t(kDe(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===GC?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,l),u]]:[[s,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,u)]])}return c()}function Jb(e){return nD((Yt+e)/2)}function iOe(e,t){var n=Se(e),r=e===t?be(e):eS(n/Se(t))/eS(Jb(t)/Jb(e)),i=n*sA(Jb(e),r)/r;if(!r)return GC;function o(s,a){i>0?a<-Yt+xe&&(a=-Yt+xe):a>Yt-xe&&(a=Yt-xe);var l=i/sA(Jb(a),r);return[l*be(r*s),i-l*Se(r*s)]}return o.invert=function(s,a){var l=i-a,u=wo(r)*Xr(s*s+l*l),c=Ro(s,We(l))*wo(l);return l*r<0&&(c-=Ie*wo(s)*wo(l)),[c/r,2*Gg(sA(i/u,1/r))-Yt]},o}function oOe(){return lD(iOe).scale(109.5).parallels([30,30])}function xS(e,t){return[e,t]}xS.invert=xS;function sOe(){return Ca(xS).scale(152.63)}function aOe(e,t){var n=Se(e),r=e===t?be(e):(n-Se(t))/(t-e),i=n/r+e;if(We(r)<xe)return xS;function o(s,a){var l=i-a,u=r*s;return[l*be(u),i-l*Se(u)]}return o.invert=function(s,a){var l=i-a,u=Ro(s,We(l))*wo(l);return l*r<0&&(u-=Ie*wo(s)*wo(l)),[u/r,i-wo(r)*Xr(s*s+l*l)]},o}function lOe(){return lD(aOe).scale(131.154).center([0,13.9389])}var sy=1.340264,ay=-.081106,ly=893e-6,uy=.003796,wS=Xr(3)/2,uOe=12;function Tne(e,t){var n=xi(wS*be(t)),r=n*n,i=r*r*r;return[e*Se(n)/(wS*(sy+3*ay*r+i*(7*ly+9*uy*r))),n*(sy+ay*r+i*(ly+uy*r))]}Tne.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<uOe&&(a=n*(sy+ay*r+i*(ly+uy*r))-t,l=sy+3*ay*r+i*(7*ly+9*uy*r),n-=s=a/l,r=n*n,i=r*r*r,!(We(s)<Zw));++o);return[wS*e*(sy+3*ay*r+i*(7*ly+9*uy*r))/Se(n),xi(be(n)/wS)]};function cOe(){return Ca(Tne).scale(177.158)}function Mne(e,t){var n=Se(t),r=Se(e)*n;return[n*be(e)/r,be(t)/r]}Mne.invert=wv(Gg);function fOe(){return Ca(Mne).scale(144.049).clipAngle(60)}function dOe(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,c,f,d=1,h=1,p=HC({point:function(x,w){var k=b([x,w]);this.stream.point(k[0],k[1])}}),g=s1,m,y;function v(){return d=e*r,h=e*i,m=y=null,b}function b(x){var w=x[0]*d,k=x[1]*h;if(o){var S=k*s-w*a;w=w*s+k*a,k=S}return[w+t,k+n]}return b.invert=function(x){var w=x[0]-t,k=x[1]-n;if(o){var S=k*s+w*a;w=w*s-k*a,k=S}return[w/d,k/h]},b.stream=function(x){return m&&y===x?m:m=p(g(y=x))},b.postclip=function(x){return arguments.length?(g=x,l=u=c=f=null,v()):g},b.clipExtent=function(x){return arguments.length?(g=x==null?(l=u=c=f=null,s1):cne(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),v()):l==null?null:[[l,u],[c,f]]},b.scale=function(x){return arguments.length?(e=+x,v()):e},b.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],v()):[t,n]},b.angle=function(x){return arguments.length?(o=x%360*Ne,a=be(o),s=Se(o),v()):o*Zt},b.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,v()):i<0},b.fitExtent=function(x,w){return qC(b,x,w)},b.fitSize=function(x,w){return oD(b,x,w)},b.fitWidth=function(x,w){return sD(b,x,w)},b.fitHeight=function(x,w){return aD(b,x,w)},b}function Pne(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Pne.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(We(i)>xe&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function hOe(){return Ca(Pne).scale(175.295)}function Fne(e,t){return[Se(t)*be(e),be(t)]}Fne.invert=wv(xi);function pOe(){return Ca(Fne).scale(249.5).clipAngle(90+xe)}function Rne(e,t){var n=Se(t),r=1+Se(e)*n;return[n*be(e)/r,be(t)/r]}Rne.invert=wv(function(e){return 2*Gg(e)});function gOe(){return Ca(Rne).scale(250).clipAngle(142)}function Dne(e,t){return[eS(nD((Yt+t)/2)),-e]}Dne.invert=function(e,t){return[-t,2*Gg(Yte(e))-Yt]};function mOe(){var e=Ane(Dne),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var yOe=Math.abs,KT=Math.cos,SS=Math.sin,vOe=1e-6,One=Math.PI,QT=One/2,OB=bOe(2);function NB(e){return e>1?QT:e<-1?-QT:Math.asin(e)}function bOe(e){return e>0?Math.sqrt(e):0}function xOe(e,t){var n=e*SS(t),r=30,i;do t-=i=(t+SS(t)-n)/(1+KT(t));while(yOe(i)>vOe&&--r>0);return t/2}function wOe(e,t,n){function r(i,o){return[e*i*KT(o=xOe(n,o)),t*SS(o)]}return r.invert=function(i,o){return o=NB(o/t),[i/(e*KT(o)),NB((2*o+SS(2*o))/n)]},r}var SOe=wOe(OB/QT,OB,One);function kOe(){return Ca(SOe).scale(169.529)}const COe=Sne(),ZT=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function _Oe(e,t){return function n(){const r=t();return r.type=e,r.path=Sne().projection(r),r.copy=r.copy||function(){const i=n();return ZT.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},KJ(r)}}function uD(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(kS[e]=_Oe(e,t),this):kS[e]||null}function Nne(e){return e&&e.path||COe}const kS={albers:Cne,albersusa:eOe,azimuthalequalarea:tOe,azimuthalequidistant:nOe,conicconformal:oOe,conicequalarea:bS,conicequidistant:lOe,equalEarth:cOe,equirectangular:sOe,gnomonic:fOe,identity:dOe,mercator:rOe,mollweide:kOe,naturalEarth1:hOe,orthographic:pOe,stereographic:gOe,transversemercator:mOe};for(const e in kS)uD(e,kS[e]);function EOe(){}const Na=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Ine(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],f=[];return o(l,u,d=>{n(d,l,u),$Oe(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(AOe((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var f=[],d=[],h,p,g,m,y,v;for(h=p=-1,m=l[0]>=u,Na[m<<1].forEach(b);++h<e-1;)g=m,m=l[h+1]>=u,Na[g|m<<1].forEach(b);for(Na[m<<0].forEach(b);++p<t-1;){for(h=-1,m=l[p*e+e]>=u,y=l[p*e]>=u,Na[m<<1|y<<2].forEach(b);++h<e-1;)g=m,m=l[p*e+e+h+1]>=u,v=y,y=l[p*e+h+1]>=u,Na[g|m<<1|y<<2|v<<3].forEach(b);Na[m|y<<3].forEach(b)}for(h=-1,y=l[p*e]>=u,Na[y<<2].forEach(b);++h<e-1;)v=y,y=l[p*e+h+1]>=u,Na[y<<2|v<<3].forEach(b);Na[y<<3].forEach(b);function b(x){var w=[x[0][0]+h,x[0][1]+p],k=[x[1][0]+h,x[1][1]+p],S=s(w),C=s(k),_,$;(_=d[S])?($=f[C])?(delete d[_.end],delete f[$.start],_===$?(_.ring.push(k),c(_.ring)):f[_.start]=d[$.end]={start:_.start,end:$.end,ring:_.ring.concat($.ring)}):(delete d[_.end],_.ring.push(k),d[_.end=C]=_):(_=f[C])?($=d[S])?(delete f[_.start],delete d[$.end],_===$?(_.ring.push(k),c(_.ring)):f[$.start]=d[_.end]={start:$.start,end:_.end,ring:$.ring.concat(_.ring)}):(delete f[_.start],_.ring.unshift(w),f[_.start=S]=_):f[S]=d[C]={start:S,end:C,ring:[w,k]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,m,y=u[g*e+p];d>0&&d<e&&p===d&&(m=u[g*e+p-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&g===h&&(m=u[(g-1)*e+p],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||q("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:EOe,r):n===a},r}function $Oe(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function AOe(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=TOe(e,t[n]))return i;return 0}function TOe(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],f=e[a],d=f[0],h=f[1];if(MOe(l,f,t))return 0;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function MOe(e,t,n){var r;return POe(e,t,n)&&FOe(e[r=+(e[0]===t[0])],n[r],t[r])}function POe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function FOe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Lne(e,t,n){return function(r){var i=fa(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?Qu(o,s,e):a/(e+1);return Ni(o+l,s,l)}}function cD(e){V.call(this,null,e)}cD.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ne(cD,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Cr,o=Ine().smooth(e.smooth!==!1),s=e.thresholds||ROe(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),f=o.size([c.width,c.height])(c.values,G(s)?s:s(c.values));DOe(f,c,u,e),f.forEach(d=>{l.push(cC(u,st(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function ROe(e,t,n){const r=Lne(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>If(t(i).values)))}function DOe(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Oe(i)&&(i=i(n,r)),Oe(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(Qe(i)?i:i[0])||1,a=(Qe(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(zne(t,s,a,l,u))}function zne(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(f){f.forEach(u)}function u(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(l),f}}function IB(e,t,n){const r=e>=0?e:nR(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function fA(e){return Oe(e)?e:_r(+e)}function Bne(){var e=l=>l[0],t=l=>l[1],n=Dg,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const c=IB(r[0],l,e)>>s,f=IB(r[1],l,t)>>s,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>s),g=2*h+(o>>s),m=new Float32Array(p*g),y=new Float32Array(p*g);let v=m;l.forEach(x=>{const w=d+(+e(x)>>s),k=h+(+t(x)>>s);w>=0&&w<p&&k>=0&&k<g&&(m[w+k*p]+=+n(x))}),c>0&&f>0?(rh(p,g,m,y,c),ih(p,g,y,m,f),rh(p,g,m,y,c),ih(p,g,y,m,f),rh(p,g,m,y,c),ih(p,g,y,m,f)):c>0?(rh(p,g,m,y,c),rh(p,g,y,m,c),rh(p,g,m,y,c),v=y):f>0&&(ih(p,g,m,y,f),ih(p,g,y,m,f),ih(p,g,m,y,f),v=y);const b=u?Math.pow(2,-2*s):1/eQ(v);for(let x=0,w=p*g;x<w;++x)v[x]*=b;return{values:v,scale:1<<s,width:p,height:g,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=fA(l),a):e},a.y=function(l){return arguments.length?(t=fA(l),a):t},a.weight=function(l){return arguments.length?(n=fA(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||q("invalid size"),i=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||q("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=ae(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&q("invalid bandwidth"),r=l,a):r},a}function rh(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function ih(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function fD(e){V.call(this,null,e)}fD.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const OOe=["x","y","weight","size","cellSize","bandwidth"];function jne(e,t){return OOe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ne(fD,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=NOe(r,e.groupby),o=(e.groupby||[]).map(Qt),s=jne(Bne(),e),a=e.as||"grid",l=[];function u(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return l=i.map(c=>st(u({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function NOe(e,t){var n=[],r=c=>c(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function dD(e){V.call(this,null,e)}dD.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ne(dD,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=Ine().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||Lne(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=jne(Bne(),e)(i,!0),l=zne(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=G(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(st),n}});const JT="Feature",hD="FeatureCollection",IOe="MultiPoint";function pD(e){V.call(this,null,e)}pD.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ne(pD,V,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&Cr,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(br(a))||o&&t.modified(br(o))||s&&t.modified(br(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),o&&s&&(t.visit(l,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:JT,geometry:{type:IOe,coordinates:r}})),this.value={type:hD,features:n}}});function gD(e){V.call(this,null,e)}gD.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ne(gD,V,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Cr,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=Nne(e.projection),n.materialize().reflow()):s=i===Cr||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=LOe(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function LOe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function mD(e){V.call(this,null,e)}mD.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ne(mD,V,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function yD(e){V.call(this,null,e)}yD.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ne(yD,V,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=zOe(Nne(e.projection),e.field||To("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function zOe(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function vD(e){V.call(this,[],e),this.generator=RDe()}vD.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ne(vD,V,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Oe(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(XQ(n[0],i)):t.add.push(st(i)),n[0]=i,t}});function bD(e){V.call(this,null,e)}bD.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ne(bD,V,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Cr,o=jOe(e.opacity,e),s=BOe(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?If(n.map(u=>If(i(u).values))):0};return n.forEach(u=>{const c=i(u),f=De({},u,l);r||(f.$max=If(c.values||[])),u[a]=UOe(c,f,s.dep?s:_r(s(f)),o.dep?o:_r(o(f)))}),t.reflow(!0).modifies(a)}});function BOe(e,t){let n;return Oe(e)?(n=r=>ec(e(r,t)),n.dep=Une(e)):n=_r(ec(e||"#888")),n}function jOe(e,t){let n;return Oe(e)?(n=r=>e(r,t),n.dep=Une(e)):e?n=_r(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function Une(e){if(!Oe(e))return!1;const t=gs(br(e));return t.$x||t.$y||t.$value||t.$max}function UOe(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,c=e.values,f=c?m=>c[m]:lu,d=Uu(l-s,u-a),h=d.getContext("2d"),p=h.getImageData(0,0,l-s,u-a),g=p.data;for(let m=a,y=0;m<u;++m){t.$y=m-a;for(let v=s,b=m*i;v<l;++v,y+=4){t.$x=v-s,t.$value=f(v+b);const x=n(t);g[y+0]=x.r,g[y+1]=x.g,g[y+2]=x.b,g[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function Vne(e){V.call(this,null,e),this.modified(!0)}ne(Vne,V,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=WOe(e.type),ZT.forEach(r=>{e[r]!=null&&LB(n,r,e[r])})):ZT.forEach(r=>{e.modified(r)&&LB(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&VOe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function VOe(e,t){const n=HOe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function WOe(e){const t=uD((e||"mercator").toLowerCase());return t||q("Unrecognized projection type: "+e),t()}function LB(e,t,n){Oe(e[t])&&e[t](n)}function HOe(e){return e=ae(e),e.length===1?e[0]:{type:hD,features:e.reduce((t,n)=>t.concat(qOe(n)),[])}}function qOe(e){return e.type===hD?e.features:ae(e).filter(t=>t!=null).map(t=>t.type===JT?t:{type:JT,geometry:t})}const GOe=Object.freeze(Object.defineProperty({__proto__:null,contour:dD,geojson:pD,geopath:gD,geopoint:mD,geoshape:yD,graticule:vD,heatmap:bD,isocontour:cD,kde2d:fD,projection:Vne},Symbol.toStringTag,{value:"Module"}));function YOe(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function XOe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Wne(this.cover(t,n),t,n,e)}function Wne(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,f,d,h,p,g,m,y,v;if(!o)return e._root=s,e;for(;o.length;)if((g=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d,i=o,!(o=o[y=m<<1|g]))return i[y]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d;while((y=m<<1|g)===(v=(p>=d)<<1|h>=f));return i[v]=o,i[y]=s,e}function KOe(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>f&&(f=o));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)Wne(this,s[n],a[n],e[n]);return this}function QOe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function ZOe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function JOe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Br(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function e8e(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Br(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>f||(l=p.x1)<i||(u=p.y1)<o))if(h.length){var m=(s+l)/2,y=(a+u)/2;d.push(new Br(h[3],m,y,l,u),new Br(h[2],s,y,m,u),new Br(h[1],m,a,l,y),new Br(h[0],s,a,m,y)),(g=(t>=y)<<1|e>=m)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);i=e-w,o=t-w,c=e+w,f=t+w,r=h.data}}return r}function t8e(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,d,h,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(s+l)/2))?s=d:l=d,(g=f>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function n8e(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function r8e(){return this._root}function i8e(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function o8e(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new Br(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,c=(s+l)/2;(i=r[3])&&t.push(new Br(i,u,c,a,l)),(i=r[2])&&t.push(new Br(i,o,c,u,l)),(i=r[1])&&t.push(new Br(i,u,s,a,c)),(i=r[0])&&t.push(new Br(i,o,s,u,c))}return this}function s8e(e){var t=[],n=[],r;for(this._root&&t.push(new Br(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(s+l)/2,f=(a+u)/2;(o=i[0])&&t.push(new Br(o,s,a,c,f)),(o=i[1])&&t.push(new Br(o,c,a,l,f)),(o=i[2])&&t.push(new Br(o,s,f,c,u)),(o=i[3])&&t.push(new Br(o,c,f,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function a8e(e){return e[0]}function l8e(e){return arguments.length?(this._x=e,this):this._x}function u8e(e){return e[1]}function c8e(e){return arguments.length?(this._y=e,this):this._y}function xD(e,t,n){var r=new wD(t??a8e,n??u8e,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function wD(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function zB(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Jr=xD.prototype=wD.prototype;Jr.copy=function(){var e=new wD(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=zB(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=zB(r));return e};Jr.add=XOe;Jr.addAll=KOe;Jr.cover=QOe;Jr.data=ZOe;Jr.extent=JOe;Jr.find=e8e;Jr.remove=t8e;Jr.removeAll=n8e;Jr.root=r8e;Jr.size=i8e;Jr.visit=o8e;Jr.visitAfter=s8e;Jr.x=l8e;Jr.y=c8e;function Ur(e){return function(){return e}}function _u(e){return(e()-.5)*1e-6}function f8e(e){return e.x+e.vx}function d8e(e){return e.y+e.vy}function h8e(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Ur(e==null?1:+e));function s(){for(var u,c=t.length,f,d,h,p,g,m,y=0;y<o;++y)for(f=xD(t,f8e,d8e).visitAfter(a),u=0;u<c;++u)d=t[u],g=n[d.index],m=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,x,w,k,S){var C=b.data,_=b.r,$=g+_;if(C){if(C.index>d.index){var A=h-C.x-C.vx,N=p-C.y-C.vy,M=A*A+N*N;M<$*$&&(A===0&&(A=_u(r),M+=A*A),N===0&&(N=_u(r),M+=N*N),M=($-(M=Math.sqrt(M)))/M*i,d.vx+=(A*=M)*($=(_*=_)/(m+_)),d.vy+=(N*=M)*$,C.vx-=A*($=1-$),C.vy-=N*$)}return}return x>h+$||k<h-$||w>p+$||S<p-$}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return s.initialize=function(u,c){t=u,r=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Ur(+u),l(),s):e},s}function p8e(e){return e.index}function BB(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function g8e(e){var t=p8e,n=f,r,i=Ur(30),o,s,a,l,u,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,v=e.length;y<c;++y)for(var b=0,x,w,k,S,C,_,$;b<v;++b)x=e[b],w=x.source,k=x.target,S=k.x+k.vx-w.x-w.vx||_u(u),C=k.y+k.vy-w.y-w.vy||_u(u),_=Math.sqrt(S*S+C*C),_=(_-o[b])/_*m*r[b],S*=_,C*=_,k.vx-=S*($=l[b]),k.vy-=C*$,w.vx+=S*($=1-$),w.vy+=C*$}function h(){if(s){var m,y=s.length,v=e.length,b=new Map(s.map((w,k)=>[t(w,k,s),w])),x;for(m=0,a=new Array(y);m<v;++m)x=e[m],x.index=m,typeof x.source!="object"&&(x.source=BB(b,x.source)),typeof x.target!="object"&&(x.target=BB(b,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)x=e[m],l[m]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(v),p(),o=new Array(v),g()}}function p(){if(s)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function g(){if(s)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){s=m,u=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Ur(+m),p(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Ur(+m),g(),d):i},d}var m8e={value:()=>{}};function Hne(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new h2(n)}function h2(e){this._=e}function y8e(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}h2.prototype=Hne.prototype={constructor:h2,on:function(e,t){var n=this._,r=y8e(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=v8e(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=jB(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jB(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new h2(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function v8e(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jB(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=m8e,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var og=0,C0=0,Nm=0,qne=1e3,CS,_0,_S=0,od=0,YC=0,u1=typeof performance=="object"&&performance.now?performance:Date,Gne=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function SD(){return od||(Gne(b8e),od=u1.now()+YC)}function b8e(){od=0}function ES(){this._call=this._time=this._next=null}ES.prototype=Yne.prototype={constructor:ES,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?SD():+n)+(t==null?0:+t),!this._next&&_0!==this&&(_0?_0._next=this:CS=this,_0=this),this._call=e,this._time=n,e4()},stop:function(){this._call&&(this._call=null,this._time=1/0,e4())}};function Yne(e,t,n){var r=new ES;return r.restart(e,t,n),r}function x8e(){SD(),++og;for(var e=CS,t;e;)(t=od-e._time)>=0&&e._call.call(void 0,t),e=e._next;--og}function UB(){od=(_S=u1.now())+YC,og=C0=0;try{x8e()}finally{og=0,S8e(),od=0}}function w8e(){var e=u1.now(),t=e-_S;t>qne&&(YC-=t,_S=e)}function S8e(){for(var e,t=CS,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:CS=n);_0=e,e4(r)}function e4(e){if(!og){C0&&(C0=clearTimeout(C0));var t=e-od;t>24?(e<1/0&&(C0=setTimeout(UB,e-u1.now()-YC)),Nm&&(Nm=clearInterval(Nm))):(Nm||(_S=u1.now(),Nm=setInterval(w8e,qne)),og=1,Gne(UB))}}function k8e(e,t,n){var r=new ES,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?SD():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const C8e=1664525,_8e=1013904223,VB=4294967296;function E8e(){let e=1;return()=>(e=(C8e*e+_8e)%VB)/VB}function $8e(e){return e.x}function A8e(e){return e.y}var T8e=10,M8e=Math.PI*(3-Math.sqrt(5));function P8e(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=Yne(f),u=Hne("tick","end"),c=E8e();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(g){var m,y=e.length,v;g===void 0&&(g=1);for(var b=0;b<g;++b)for(n+=(o-n)*i,a.forEach(function(x){x(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=T8e*Math.sqrt(.5+g),b=g*M8e;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(s=1-g,t):1-s},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,p(m)),t):a.get(g)},find:function(g,m,y){var v=0,b=e.length,x,w,k,S,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],x=g-S.x,w=m-S.y,k=x*x+w*w,k<y&&(C=S,y=k);return C},on:function(g,m){return arguments.length>1?(u.on(g,m),t):u.on(g)}}}function F8e(){var e,t,n,r,i=Ur(-30),o,s=1,a=1/0,l=.81;function u(h){var p,g=e.length,m=xD(e,$8e,A8e).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],m.visit(d)}function c(){if(e){var h,p=e.length,g;for(o=new Array(p),h=0;h<p;++h)g=e[h],o[g.index]=+i(g,h,e)}}function f(h){var p=0,g,m,y=0,v,b,x;if(h.length){for(v=b=x=0;x<4;++x)(g=h[x])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,v+=m*g.x,b+=m*g.y);h.x=v/y,h.y=b/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=o[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,m){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=m-p,x=y*y+v*v;if(b*b/l<x)return x<a&&(y===0&&(y=_u(n),x+=y*y),v===0&&(v=_u(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)),t.vx+=y*h.value*r/x,t.vy+=v*h.value*r/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(y===0&&(y=_u(n),x+=y*y),v===0&&(v=_u(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)));do h.data!==t&&(b=o[h.data.index]*r/x,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ur(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function R8e(e){var t=Ur(.1),n,r,i;typeof e!="function"&&(e=Ur(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ur(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ur(+a),s(),o):e},o}function D8e(e){var t=Ur(.1),n,r,i;typeof e!="function"&&(e=Ur(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ur(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ur(+a),s(),o):e},o}const WB={center:YOe,collide:h8e,nbody:F8e,link:g8e,x:R8e,y:D8e},E0="forces",t4=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],O8e=["static","iterations"],Xne=["x","y","vx","vy"];function kD(e){V.call(this,null,e)}kD.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Xne}]};ne(kD,V,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(t4),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Kne(n,e,0,t)):(this.value=n=I8e(t.source,e),n.on("tick",N8e(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(O8e)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==E0||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Xne)}});function N8e(e,t){return()=>e.touch(t).run()}function I8e(e,t){const n=P8e(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),Kne(n,t,!0).on("end",()=>o=!0)}function Kne(e,t,n,r){var i=ae(t.forces),o,s,a,l;for(o=0,s=t4.length;o<s;++o)a=t4[o],a!==E0&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=E0+o,a=n||t.modified(E0,o)?z8e(i[o]):r&&L8e(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(E0+o,null);return e.numForces=i.length,e}function L8e(e,t){var n,r;for(n in e)if(Oe(r=e[n])&&t.modified(br(r)))return 1;return 0}function z8e(e){var t,n;ce(WB,e.force)||q("Unrecognized force: "+e.force),t=WB[e.force]();for(n in e)Oe(t[n])&&B8e(t[n],e[n],e);return t}function B8e(e,t,n){e(Oe(t)?r=>t(r,n):t)}const j8e=Object.freeze(Object.defineProperty({__proto__:null,force:kD},Symbol.toStringTag,{value:"Module"}));function U8e(e,t){return e.parent===t.parent?1:2}function V8e(e){return e.reduce(W8e,0)/e.length}function W8e(e,t){return e+t.x}function H8e(e){return 1+e.reduce(q8e,0)}function q8e(e,t){return Math.max(e,t.y)}function G8e(e){for(var t;t=e.children;)e=t[0];return e}function Y8e(e){for(var t;t=e.children;)e=t[t.length-1];return e}function X8e(){var e=U8e,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=V8e(h),d.y=H8e(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var l=G8e(o),u=Y8e(o),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function K8e(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Q8e(){return this.eachAfter(K8e)}function Z8e(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function J8e(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function e9e(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function t9e(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function n9e(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function r9e(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function i9e(e){for(var t=this,n=o9e(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function o9e(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function s9e(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function a9e(){return Array.from(this)}function l9e(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function u9e(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*c9e(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function CD(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=h9e)):t===void 0&&(t=d9e);for(var n=new sg(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new sg(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Qne)}function f9e(){return CD(this).eachBefore(p9e)}function d9e(e){return e.children}function h9e(e){return Array.isArray(e)?e[1]:null}function p9e(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Qne(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function sg(e){this.data=e,this.depth=this.height=0,this.parent=null}sg.prototype=CD.prototype={constructor:sg,count:Q8e,each:Z8e,eachAfter:e9e,eachBefore:J8e,find:t9e,sum:n9e,sort:r9e,path:i9e,ancestors:s9e,descendants:a9e,leaves:l9e,links:u9e,copy:f9e,[Symbol.iterator]:c9e};function p2(e){return e==null?null:Zne(e)}function Zne(e){if(typeof e!="function")throw new Error;return e}function ff(){return 0}function hh(e){return function(){return e}}const g9e=1664525,m9e=1013904223,HB=4294967296;function y9e(){let e=1;return()=>(e=(g9e*e+m9e)%HB)/HB}function v9e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function b9e(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function x9e(e,t){for(var n=0,r=(e=b9e(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&Jne(s,o)?++n:(s=S9e(i=w9e(i,o)),n=0);return s}function w9e(e,t){var n,r;if(dA(t,e))return[t];for(n=0;n<e.length;++n)if(ex(t,e[n])&&dA($0(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ex($0(e[n],e[r]),t)&&ex($0(e[n],t),e[r])&&ex($0(e[r],t),e[n])&&dA(ere(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ex(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Jne(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function dA(e,t){for(var n=0;n<t.length;++n)if(!Jne(e,t[n]))return!1;return!0}function S9e(e){switch(e.length){case 1:return k9e(e[0]);case 2:return $0(e[0],e[1]);case 3:return ere(e[0],e[1],e[2])}}function k9e(e){return{x:e.x,y:e.y,r:e.r}}function $0(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,c=a-i,f=Math.sqrt(l*l+u*u);return{x:(n+o+l/f*c)/2,y:(r+s+u/f*c)/2,r:(f+i+a)/2}}function ere(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-s,h=r-u,p=i-a,g=i-c,m=l-o,y=f-o,v=r*r+i*i-o*o,b=v-s*s-a*a+l*l,x=v-u*u-c*c+f*f,w=h*p-d*g,k=(p*x-g*b)/(w*2)-r,S=(g*m-p*y)/w,C=(h*b-d*x)/(w*2)-i,_=(d*y-h*m)/w,$=S*S+_*_-1,A=2*(o+k*S+C*_),N=k*k+C*C-o*o,M=-(Math.abs($)>1e-6?(A+Math.sqrt(A*A-4*$*N))/(2*$):N/A);return{x:r+k+S*M,y:i+C+_*M,r:M}}function qB(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function GB(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function YB(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function tx(e){this._=e,this.next=null,this.previous=null}function C9e(e,t){if(!(o=(e=v9e(e)).length))return 0;var n,r,i,o,s,a,l,u,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;qB(r,n,i=e[2]),n=new tx(n),r=new tx(r),i=new tx(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){qB(n._,r._,i=e[l]),i=new tx(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(GB(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(GB(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=YB(n);(i=i.next)!==r;)(a=YB(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=x9e(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function _9e(e){return Math.sqrt(e.value)}function E9e(){var e=null,t=1,n=1,r=ff;function i(o){const s=y9e();return o.x=t/2,o.y=n/2,e?o.eachBefore(XB(e)).eachAfter(hA(r,.5,s)).eachBefore(KB(1)):o.eachBefore(XB(_9e)).eachAfter(hA(ff,1,s)).eachAfter(hA(r,o.r/Math.min(t,n),s)).eachBefore(KB(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=p2(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:hh(+o),i):r},i}function XB(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function hA(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=C9e(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function KB(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function tre(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Sv(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function $9e(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(tre),s}function o(s,a){return function(l){l.children&&Sv(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var A9e={depth:-1},QB={},pA={};function T9e(e){return e.id}function M9e(e){return e.parentId}function ZB(){var e=T9e,t=M9e,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,c,f,d,h,p,g,m=new Map;if(n!=null){const y=o.map((x,w)=>P9e(n(x,w,i))),v=y.map(JB),b=new Set(y).add("");for(const x of v)b.has(x)||(b.add(x),y.push(x),v.push(JB(x)),o.push(pA));s=(x,w)=>y[w],a=(x,w)=>v[w]}for(c=0,l=o.length;c<l;++c)u=o[c],h=o[c]=new sg(u),(p=s(u,c,i))!=null&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?QB:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=o[c],p=h.parent){if(d=m.get(p),!d)throw new Error("missing: "+p);if(d===QB)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===pA&&f.children.length===1;)f=f.children[0],--l;for(let y=o.length-1;y>=0&&(h=o[y],h.data===pA);--y)h.data=null}if(f.parent=A9e,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(Qne),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=p2(i),r):e},r.parentId=function(i){return arguments.length?(t=p2(i),r):t},r.path=function(i){return arguments.length?(n=p2(i),r):n},r}function P9e(e){e=`${e}`;let t=e.length;return n4(e,t-1)&&!n4(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function JB(e){let t=e.length;if(t<2)return"";for(;--t>1&&!n4(e,t););return e.slice(0,t)}function n4(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function F9e(e,t){return e.parent===t.parent?1:2}function gA(e){var t=e.children;return t?t[0]:e.t}function mA(e){var t=e.children;return t?t[t.length-1]:e.t}function R9e(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function D9e(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function O9e(e,t,n){return e.a.parent===t.parent?e.a:n}function g2(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}g2.prototype=Object.create(sg.prototype);function N9e(e){for(var t=new g2(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new g2(o[s],s)),i.parent=n;return(t.parent=new g2(null,0)).children=[t],t}function I9e(){var e=F9e,t=1,n=1,r=null;function i(u){var c=N9e(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,g=p-f.x,m=t/(d.x+p+g),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return u}function o(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){D9e(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||f[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var d=u,h=u,p=c,g=d.parent.children[0],m=d.m,y=h.m,v=p.m,b=g.m,x;p=mA(p),d=gA(d),p&&d;)g=gA(g),h=mA(h),h.a=u,x=p.z+v-d.z-m+e(p._,d._),x>0&&(R9e(O9e(p,u,f),u,x),m+=x,y+=x),v+=p.m,m+=d.m,b+=g.m,y+=h.m;p&&!mA(h)&&(h.t=p,h.m+=v-y),d&&!gA(g)&&(g.t=d,g.m+=m-b,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function XC(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var nre=(1+Math.sqrt(5))/2;function rre(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,c=0,f=0,d=a.length,h,p,g=t.value,m,y,v,b,x,w,k;c<d;){h=i-n,p=o-r;do m=a[f++].value;while(!m&&f<d);for(y=v=m,w=Math.max(p/h,h/p)/(g*e),k=m*m*w,x=Math.max(v/k,k/y);f<d;++f){if(m+=u=a[f].value,u<y&&(y=u),u>v&&(v=u),k=m*m*w,b=Math.max(v/k,k/y),b>x){m-=u;break}x=b}s.push(l={value:m,dice:h<p,children:a.slice(c,f)}),l.dice?Sv(l,n,r,i,g?r+=p*m/g:o):XC(l,n,r,g?n+=h*m/g:i,o),g-=m,c=f}return s}const ire=function e(t){function n(r,i,o,s,a){rre(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(nre);function L9e(){var e=ire,t=!1,n=1,r=1,i=[0],o=ff,s=ff,a=ff,l=ff,u=ff;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(tre),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,m=d.x1-h,y=d.y1-h;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,p+=u(d)-h,g+=s(d)-h,m-=a(d)-h,y-=l(d)-h,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=Zne(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:hh(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:hh(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:hh(+d),c):a},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:hh(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:hh(+d),c):u},c}function z9e(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,g,m,y){if(f>=d-1){var v=o[f];v.x0=p,v.y0=g,v.x1=m,v.y1=y;return}for(var b=u[f],x=h/2+b,w=f+1,k=d-1;w<k;){var S=w+k>>>1;u[S]<x?w=S+1:k=S}x-u[w-1]<u[w]-x&&f+1<w&&--w;var C=u[w]-b,_=h-C;if(m-p>y-g){var $=h?(p*_+m*C)/h:m;c(f,w,C,p,g,$,y),c(w,d,_,$,g,m,y)}else{var A=h?(g*_+y*C)/h:y;c(f,w,C,p,g,m,A),c(w,d,_,p,A,m,y)}}}function B9e(e,t,n,r,i){(e.depth&1?XC:Sv)(e,t,n,r,i)}const j9e=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,p=l.length,g=r.value;++d<p;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?Sv(u,i,o,s,g?o+=(a-o)*u.value/g:a):XC(u,i,o,g?i+=(s-i)*u.value/g:s,a),g-=u.value}else r._squarify=l=rre(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(nre);function r4(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function _D(e){V.call(this,null,e)}_D.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const U9e=e=>e.values;ne(_D,V,{transform(e,t){t.source||q("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&uC(s.data)&&i.rem.push(s.data)}),this.value=o=CD({values:ae(e.keys).reduce((s,a)=>(s.key(a),s),V9e()).entries(i.source)},U9e),n&&o.each(s=>{s.children&&(s=st(s.data),i.add.push(s),i.source.push(s))}),r4(o,ve,ve)),i.source.root=o,i}});function V9e(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=l[f])?h.push(d):l[f]=[d];for(f in l)u[f]=n(l[f],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function Pl(e){V.call(this,null,e)}const W9e=(e,t)=>e.parent===t.parent?1:2;ne(Pl,V,{transform(e,t){(!t.source||!t.source.root)&&q(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ad(e.sort,s=>s.data)),H9e(n,this.params,e),n.separation&&n.separation(e.separation!==!1?W9e:Dg);try{this.value=n(i)}catch(s){q(s)}return i.each(s=>q9e(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function H9e(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function q9e(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const i4=["x","y","r","depth","children"];function ED(e){Pl.call(this,e)}ED.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:i4.length,default:i4}]};ne(ED,Pl,{layout:E9e,params:["radius","size","padding"],fields:i4});const o4=["x0","y0","x1","y1","depth","children"];function $D(e){Pl.call(this,e)}$D.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:o4.length,default:o4}]};ne($D,Pl,{layout:$9e,params:["size","round","padding"],fields:o4});function AD(e){V.call(this,null,e)}AD.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ne(AD,V,{transform(e,t){t.source||q("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?r4(ZB().id(e.key).parentId(e.parentKey)(i.source),e.key,Mo):r4(ZB()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const ej={tidy:I9e,cluster:X8e},s4=["x","y","depth","children"];function TD(e){Pl.call(this,e)}TD.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:s4.length,default:s4}]};ne(TD,Pl,{layout(e){const t=e||"tidy";if(ce(ej,t))return ej[t]();q("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:s4});function MD(e){V.call(this,[],e)}MD.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ne(MD,V,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||q("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[ve(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[ve(a)]&&o[ve(l)]&&i.add.push(st({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[ve(s)]=1),n.forEach(s=>{(o[ve(s.source)]||o[ve(s.target)])&&i.mod.push(s)})),i}});const tj={binary:z9e,dice:Sv,slice:XC,slicedice:B9e,squarify:ire,resquarify:j9e},a4=["x0","y0","x1","y1","depth","children"];function PD(e){Pl.call(this,e)}PD.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:a4.length,default:a4}]};ne(PD,Pl,{layout(){const e=L9e();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ce(tj,t)?e.tile(tj[t]):q("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:a4});const G9e=Object.freeze(Object.defineProperty({__proto__:null,nest:_D,pack:ED,partition:$D,stratify:AD,tree:TD,treelinks:MD,treemap:PD},Symbol.toStringTag,{value:"Module"})),yA=4278190080;function Y9e(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function X9e(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=Uu(o,s).getContext("2d"),u=Uu(o,s).getContext("2d"),c=a&&Uu(o,s).getContext("2d");n.forEach(C=>m2(l,C,!1)),m2(u,t,!1),a&&m2(c,t,!0);const f=vA(l,o,s),d=vA(u,o,s),h=a&&vA(c,o,s),p=e.bitmap(),g=a&&e.bitmap();let m,y,v,b,x,w,k,S;for(y=0;y<s;++y)for(m=0;m<o;++m)x=y*o+m,w=f[x]&yA,S=d[x]&yA,k=a&&h[x]&yA,(w||k||S)&&(v=e(m),b=e(y),!i&&(w||S)&&p.set(v,b),a&&(w||k)&&g.set(v,b));return[p,g]}function vA(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function m2(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>m2(e,o.items,n))}):Xi[r].draw(e,{items:n?t.map(K9e):t})}function K9e(e){const t=cC(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ia=5,$r=31,c1=32,nu=new Uint32Array(c1+1),es=new Uint32Array(c1+1);es[0]=0;nu[0]=~es[0];for(let e=1;e<=c1;++e)es[e]=es[e-1]<<1|1,nu[e]=~es[e];function Q9e(e,t){const n=new Uint32Array(~~((e*t+c1)/c1));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Ia]&1<<(a&$r)},set:(o,s)=>{const a=s*e+o;r(a>>>Ia,1<<(a&$r))},clear:(o,s)=>{const a=s*e+o;i(a>>>Ia,~(1<<(a&$r)))},getRange:(o,s,a,l)=>{let u=l,c,f,d,h;for(;u>=s;--u)if(c=u*e+o,f=u*e+a,d=c>>>Ia,h=f>>>Ia,d===h){if(n[d]&nu[c&$r]&es[(f&$r)+1])return!0}else{if(n[d]&nu[c&$r]||n[h]&es[(f&$r)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Ia,d=c>>>Ia,f===d)r(f,nu[u&$r]&es[(c&$r)+1]);else for(r(f,nu[u&$r]),r(d,es[(c&$r)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Ia,d=c>>>Ia,f===d)i(f,es[u&$r]|nu[(c&$r)+1]);else for(i(f,es[u&$r]),i(d,nu[(c&$r)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function Z9e(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>Q9e(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function J9e(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,c=Ui.width(s.datum,s.datum.text);let f=0,d,h,p,g,m,y,v;for(let b=0;b<l;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,g=a[b].y2===void 0?p:a[b].y2,m=(d+h)/2,y=(p+g)/2,v=Math.abs(h-d+g-p),v>=f&&(f=v,s.x=m,s.y=y);return m=c/2,y=u/2,d=s.x-m,h=s.x+m,p=s.y-y,g=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",p<0&&g<=o?s.baseline="top":0<=p&&o<g&&(s.baseline="bottom"),!0}}function $S(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Eu(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),c=e(t+l),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(u,f,c,d)||s.getRange(u,f,c,d)||a&&a.getRange(u,f,c,d)}function eNe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,c,f,d,h){const p=e.invert(u),g=e.invert(c);let m=f,y=o,v;if(!$S(p,g,d,h,i,o)&&!Eu(e,p,g,h,d,m,s,a)&&!Eu(e,p,g,h,d,h,s,null)){for(;y-m>=1;)v=(m+y)/2,Eu(e,p,g,h,d,v,s,a)?y=v:m=v;if(m>f)return[p,g,m,!0]}}return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Ui.width(u.datum,u.datum.text);let p=n?d:0,g=!1,m=!1,y=0,v,b,x,w,k,S,C,_,$,A,N,M,R,F,D,I,O;for(let j=0;j<f;++j){for(v=c[j].x,x=c[j].y,b=c[j].x2===void 0?v:c[j].x2,w=c[j].y2===void 0?x:c[j].y2,v>b&&(O=v,v=b,b=O),x>w&&(O=x,x=w,w=O),$=e(v),N=e(b),A=~~(($+N)/2),M=e(x),F=e(w),R=~~((M+F)/2),C=A;C>=$;--C)for(_=R;_>=M;--_)I=l(C,_,p,h,d),I&&([u.x,u.y,p,g]=I);for(C=A;C<=N;++C)for(_=R;_<=F;++_)I=l(C,_,p,h,d),I&&([u.x,u.y,p,g]=I);!g&&!n&&(D=Math.abs(b-v+w-x),k=(v+b)/2,S=(x+w)/2,D>=y&&!$S(k,S,h,d,i,o)&&!Eu(e,k,S,d,h,d,s,null)&&(y=D,u.x=k,u.y=S,m=!0))}return g||m?(k=h/2,S=d/2,s.setRange(e(u.x-k),e(u.y-S),e(u.x+k),e(u.y+S)),u.align="center",u.baseline="middle",!0):!1}}const tNe=[-1,-1,1,1],nNe=[-1,1,-1,1];function rNe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Ui.width(u.datum,u.datum.text),p=[];let g=n?d:0,m=!1,y=!1,v=0,b,x,w,k,S,C,_,$,A,N,M,R;for(let F=0;F<f;++F){for(b=c[F].x,w=c[F].y,x=c[F].x2===void 0?b:c[F].x2,k=c[F].y2===void 0?w:c[F].y2,p.push([e((b+x)/2),e((w+k)/2)]);p.length;)if([_,$]=p.pop(),!(s.get(_,$)||a.get(_,$)||l.get(_,$))){l.set(_,$);for(let D=0;D<4;++D)S=_+tNe[D],C=$+nNe[D],l.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(_),C=e.invert($),A=g,N=o,!$S(S,C,h,d,i,o)&&!Eu(e,S,C,d,h,A,s,a)&&!Eu(e,S,C,d,h,d,s,null)){for(;N-A>=1;)M=(A+N)/2,Eu(e,S,C,d,h,M,s,a)?N=M:A=M;A>g&&(u.x=S,u.y=C,g=A,m=!0)}}!m&&!n&&(R=Math.abs(x-b+k-w),S=(b+x)/2,C=(w+k)/2,R>=v&&!$S(S,C,h,d,i,o)&&!Eu(e,S,C,d,h,d,s,null)&&(v=R,u.x=S,u.y=C,y=!0))}return m||y?(S=h/2,C=d/2,s.setRange(e(u.x-S),e(u.y-C),e(u.x+S),e(u.y+C)),u.align="center",u.baseline="middle",!0):!1}}const iNe=["right","center","left"],oNe=["bottom","middle","top"];function sNe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,f=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=u.textWidth??0,h,p,g,m,y,v,b,x,w,k,S,C,_,$,A;for(let N=0;N<l;++N){if(h=(n[N]&3)-1,p=(n[N]>>>2&3)-1,g=h===0&&p===0||r[N]<0,m=h&&p?Math.SQRT1_2:1,y=r[N]<0?-1:1,v=c[1+h]+r[N]*h*m,S=c[4+p]+y*f*p/2+r[N]*p*m,x=S-f/2,w=S+f/2,C=e(v),$=e(x),A=e(w),!d)if(nj(C,C,$,A,s,a,v,v,x,w,c,g))d=Ui.width(u.datum,u.datum.text);else continue;if(k=v+y*d*h/2,v=k-d/2,b=k+d/2,C=e(v),_=e(b),nj(C,_,$,A,s,a,v,b,x,w,c,g))return u.x=h?h*y<0?b:v:k,u.y=p?p*y<0?w:x:S,u.align=iNe[h*y+1],u.baseline=oNe[p*y+1],s.setRange(C,$,_,A),!0}return!1}}function nj(e,t,n,r,i,o,s,a,l,u,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const bA=0,xA=4,wA=8,SA=0,kA=1,CA=2,aNe={"top-left":bA+SA,top:bA+kA,"top-right":bA+CA,left:xA+SA,middle:xA+kA,right:xA+CA,"bottom-left":wA+SA,bottom:wA+kA,"bottom-right":wA+CA},lNe={naive:J9e,"reduced-search":eNe,floodfill:rNe};function uNe(e,t,n,r,i,o,s,a,l,u,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=cNe(r,f),h=fNe(i,f),p=dNe(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,m=g==="area",y=hNe(p,g,a,l),v=u===null||u===1/0,b=m&&c==="naive";let x=-1,w=-1;const k=e.map($=>{const A=v?Ui.width($,$.text):void 0;return x=Math.max(x,A),w=Math.max(w,$.fontSize),{datum:$,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y($),textWidth:A}});u=u===null||u===1/0?Math.max(x,w)+Math.max(...r):u;const S=Z9e(t[0],t[1],u);let C;if(!b){n&&k.sort((N,M)=>n(N.datum,M.datum));let $=!1;for(let N=0;N<h.length&&!$;++N)$=h[N]===5||d[N]<0;const A=(p&&s||m)&&e.map(N=>N.datum);C=o.length||A?X9e(S,A||[],o,$,m):Y9e(S,s&&k)}const _=m?lNe[c](S,C,s,l):sNe(S,C,h,d);return k.forEach($=>$.opacity=+_($)),k}function cNe(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function fNe(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=aNe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function dNe(e){return e&&e.mark&&e.mark.marktype}function hNe(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const l4=["x","y","opacity","align","baseline"],ore=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function FD(e){V.call(this,null,e)}FD.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:ore},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:l4.length,default:l4}]};ne(FD,V,{transform(e,t){function n(o){const s=e[o];return Oe(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&q("Size parameter should be specified as a [width, height] array.");const i=e.as||l4;return uNe(t.materialize(t.SOURCE).source||[],e.size,e.sort,ae(e.offset==null?1:e.offset),ae(e.anchor||ore),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const pNe=Object.freeze(Object.defineProperty({__proto__:null,label:FD},Symbol.toStringTag,{value:"Module"}));function sre(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function RD(e){V.call(this,null,e)}RD.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ne(RD,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=sre(r,e.groupby),o=(e.groupby||[]).map(Qt),s=o.length,a=e.as||[Qt(e.x),Qt(e.y)],l=[];i.forEach(u=>{hZ(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=u.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],l.push(st(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const u4={constant:pR,linear:gR,log:uZ,exp:cZ,pow:fZ,quad:mR,poly:dZ},gNe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function DD(e){V.call(this,null,e)}DD.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(u4)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ne(DD,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=sre(r,e.groupby),o=(e.groupby||[]).map(Qt),s=e.method||"linear",a=e.order==null?3:e.order,l=gNe(s,a),u=e.as||[Qt(e.x),Qt(e.y)],c=u4[s],f=[];let d=e.extent;ce(u4,s)||q("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(st({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||fa(h,e.x),y=v=>{const b={};for(let x=0;x<o.length;++x)b[o[x]]=h.dims[x];b[u[0]]=v[0],b[u[1]]=v[1],f.push(st(b))};s==="linear"||s==="constant"?m.forEach(v=>y([v,g.predict(v)])):yC(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const mNe=Object.freeze(Object.defineProperty({__proto__:null,loess:RD,regression:DD},Symbol.toStringTag,{value:"Module"})),fl=11102230246251565e-32,ar=134217729,yNe=(3+8*fl)*fl;function _A(e,t,n,r,i){let o,s,a,l,u=t[0],c=r[0],f=0,d=0;c>u==c>-u?(o=u,u=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>u==c>-u?(s=u+o,a=o-(s-u),u=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>u==c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function vNe(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function kv(e){return new Float64Array(e)}const bNe=(3+16*fl)*fl,xNe=(2+12*fl)*fl,wNe=(9+64*fl)*fl*fl,oh=kv(4),rj=kv(8),ij=kv(12),oj=kv(16),Ar=kv(4);function SNe(e,t,n,r,i,o,s){let a,l,u,c,f,d,h,p,g,m,y,v,b,x,w,k,S,C;const _=e-i,$=n-i,A=t-o,N=r-o;x=_*N,d=ar*_,h=d-(d-_),p=_-h,d=ar*N,g=d-(d-N),m=N-g,w=p*m-(x-h*g-p*g-h*m),k=A*$,d=ar*A,h=d-(d-A),p=A-h,d=ar*$,g=d-(d-$),m=$-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,oh[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,oh[1]=b-(y+f)+(f-k),C=v+y,f=C-v,oh[2]=v-(C-f)+(y-f),oh[3]=C;let M=vNe(4,oh),R=xNe*s;if(M>=R||-M>=R||(f=e-_,a=e-(_+f)+(f-i),f=n-$,u=n-($+f)+(f-i),f=t-A,l=t-(A+f)+(f-o),f=r-N,c=r-(N+f)+(f-o),a===0&&l===0&&u===0&&c===0)||(R=wNe*s+yNe*Math.abs(M),M+=_*c+N*a-(A*u+$*l),M>=R||-M>=R))return M;x=a*N,d=ar*a,h=d-(d-a),p=a-h,d=ar*N,g=d-(d-N),m=N-g,w=p*m-(x-h*g-p*g-h*m),k=l*$,d=ar*l,h=d-(d-l),p=l-h,d=ar*$,g=d-(d-$),m=$-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,Ar[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,Ar[1]=b-(y+f)+(f-k),C=v+y,f=C-v,Ar[2]=v-(C-f)+(y-f),Ar[3]=C;const F=_A(4,oh,4,Ar,rj);x=_*c,d=ar*_,h=d-(d-_),p=_-h,d=ar*c,g=d-(d-c),m=c-g,w=p*m-(x-h*g-p*g-h*m),k=A*u,d=ar*A,h=d-(d-A),p=A-h,d=ar*u,g=d-(d-u),m=u-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,Ar[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,Ar[1]=b-(y+f)+(f-k),C=v+y,f=C-v,Ar[2]=v-(C-f)+(y-f),Ar[3]=C;const D=_A(F,rj,4,Ar,ij);x=a*c,d=ar*a,h=d-(d-a),p=a-h,d=ar*c,g=d-(d-c),m=c-g,w=p*m-(x-h*g-p*g-h*m),k=l*u,d=ar*l,h=d-(d-l),p=l-h,d=ar*u,g=d-(d-u),m=u-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,Ar[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,Ar[1]=b-(y+f)+(f-k),C=v+y,f=C-v,Ar[2]=v-(C-f)+(y-f),Ar[3]=C;const I=_A(D,ij,4,Ar,oj);return oj[I-1]}function nx(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=bNe*u?l:-SNe(e,t,n,r,i,o,u)}const sj=Math.pow(2,-52),rx=new Uint32Array(512);class AS{static from(t,n=$Ne,r=ANe){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new AS(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let _=0;_<s;_++){const $=t[2*_],A=t[2*_+1];$<a&&(a=$),A<l&&(l=A),$>u&&(u=$),A>c&&(c=A),this._ids[_]=_}const f=(a+u)/2,d=(l+c)/2;let h,p,g;for(let _=0,$=1/0;_<s;_++){const A=EA(f,d,t[2*_],t[2*_+1]);A<$&&(h=_,$=A)}const m=t[2*h],y=t[2*h+1];for(let _=0,$=1/0;_<s;_++){if(_===h)continue;const A=EA(m,y,t[2*_],t[2*_+1]);A<$&&A>0&&(p=_,$=A)}let v=t[2*p],b=t[2*p+1],x=1/0;for(let _=0;_<s;_++){if(_===h||_===p)continue;const $=_Ne(m,y,v,b,t[2*_],t[2*_+1]);$<x&&(g=_,x=$)}let w=t[2*g],k=t[2*g+1];if(x===1/0){for(let A=0;A<s;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];Vh(this._ids,this._dists,0,s-1);const _=new Uint32Array(s);let $=0;for(let A=0,N=-1/0;A<s;A++){const M=this._ids[A],R=this._dists[M];R>N&&(_[$++]=M,N=R)}this.hull=_.subarray(0,$),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(nx(m,y,v,b,w,k)<0){const _=p,$=v,A=b;p=g,v=w,b=k,g=_,w=$,k=A}const S=ENe(m,y,v,b,w,k);this._cx=S.x,this._cy=S.y;for(let _=0;_<s;_++)this._dists[_]=EA(t[2*_],t[2*_+1],S.x,S.y);Vh(this._ids,this._dists,0,s-1),this._hullStart=h;let C=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,o.fill(-1),o[this._hashKey(m,y)]=h,o[this._hashKey(v,b)]=p,o[this._hashKey(w,k)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let _=0,$,A;_<this._ids.length;_++){const N=this._ids[_],M=t[2*N],R=t[2*N+1];if(_>0&&Math.abs(M-$)<=sj&&Math.abs(R-A)<=sj||($=M,A=R,N===h||N===p||N===g))continue;let F=0;for(let Y=0,W=this._hashKey(M,R);Y<this._hashSize&&(F=o[(W+Y)%this._hashSize],!(F!==-1&&F!==r[F]));Y++);F=n[F];let D=F,I;for(;I=r[D],nx(M,R,t[2*D],t[2*D+1],t[2*I],t[2*I+1])>=0;)if(D=I,D===F){D=-1;break}if(D===-1)continue;let O=this._addTriangle(D,N,r[D],-1,-1,i[D]);i[N]=this._legalize(O+2),i[D]=O,C++;let j=r[D];for(;I=r[j],nx(M,R,t[2*j],t[2*j+1],t[2*I],t[2*I+1])<0;)O=this._addTriangle(j,N,I,i[N],-1,i[j]),i[N]=this._legalize(O+2),r[j]=j,C--,j=I;if(D===F)for(;I=n[D],nx(M,R,t[2*I],t[2*I+1],t[2*D],t[2*D+1])<0;)O=this._addTriangle(I,N,D,-1,i[D],i[I]),this._legalize(O+2),i[I]=O,r[D]=D,C--,D=I;this._hullStart=n[N]=D,r[D]=n[j]=N,r[N]=j,o[this._hashKey(M,R)]=N,o[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array(C);for(let _=0,$=this._hullStart;_<C;_++)this.hull[_]=$,$=r[$];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(kNe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=rx[--o];continue}const u=a-a%3,c=l+(t+1)%3,f=u+(a+2)%3,d=n[s],h=n[t],p=n[c],g=n[f];if(CNe(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,f);const v=u+(a+1)%3;o<rx.length&&(rx[o++]=v)}else{if(o===0)break;t=rx[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function kNe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function EA(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function CNe(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,c=n-s,f=r-a,d=i-s,h=o-a,p=l*l+u*u,g=c*c+f*f,m=d*d+h*h;return l*(f*m-g*h)-u*(c*m-g*d)+p*(c*h-f*d)<0}function _Ne(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=(u*c-a*f)*d,p=(s*f-l*c)*d;return h*h+p*p}function ENe(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=e+(u*c-a*f)*d,p=t+(s*f-l*c)*d;return{x:h,y:p}}function Vh(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;Im(e,i,o),t[e[n]]>t[e[r]]&&Im(e,n,r),t[e[o]]>t[e[r]]&&Im(e,o,r),t[e[n]]>t[e[o]]&&Im(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;Im(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Vh(e,t,o,r),Vh(e,t,n,s-1)):(Vh(e,t,n,s-1),Vh(e,t,o,r))}}function Im(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function $Ne(e){return e[0]}function ANe(e){return e[1]}const aj=1e-6;class wf{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>aj||Math.abs(this._y1-o)>aj)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class c4{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let TNe=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,m=0,y=r.length,v,b;g<y;g+=3,m+=2){const x=r[g]*2,w=r[g+1]*2,k=r[g+2]*2,S=t[x],C=t[x+1],_=t[w],$=t[w+1],A=t[k],N=t[k+1],M=_-S,R=$-C,F=A-S,D=N-C,I=(M*D-R*F)*2;if(Math.abs(I)<1e-9){if(o===void 0){o=s=0;for(const j of n)o+=t[j*2],s+=t[j*2+1];o/=n.length,s/=n.length}const O=1e9*Math.sign((o-S)*D-(s-C)*F);v=(S+A)/2-O*D,b=(C+N)/2+O*F}else{const O=1/I,j=M*M+R*R,Y=F*F+D*D;v=S+(D*j-R*Y)*O,b=C+(M*Y-F*j)*O}a[m]=v,a[m+1]=b}let l=n[n.length-1],u,c=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=c,f=d,h=p,c=l*4,d=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=d-f}render(t){const n=t==null?t=new wf:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=s[h],m=s[h+1],y=s[p],v=s[p+1];this._renderSegment(g,m,y,v,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const f=Math.floor(i[u]/3)*2,d=s[f],h=s[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new wf:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new wf:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new c4;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,m,y,v;if(u===0){if((p=this._clipSegment(o,s,a,l,u,c))===null)continue;[g,m,y,v]=p}else{if((p=this._clipSegment(a,l,o,s,c,u))===null)continue;[y,v,g,m]=p,f=d,d=this._edgecode(g,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,m):i=[g,m]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,u,c=o||s;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=d,d=this._edgecode(a[u],a[u+1]),f&&d&&(u=this._edge(t,f,d,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const MNe=2*Math.PI,sh=Math.pow;function PNe(e){return e[0]}function FNe(e){return e[1]}function RNe(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function DNe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class OD{static from(t,n=PNe,r=FNe,i){return new OD("length"in t?ONe(t,n,r,i):Float64Array.from(NNe(t,n,r,i)))}constructor(t){this._delaunator=new AS(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&RNe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=DNe(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new AS(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(r[l]===-1||s[c]===-1)&&(s[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new TNe(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=sh(n-u[t*2],2)+sh(r-u[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=sh(n-u[p*2],2)+sh(r-u[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==p&&sh(n-u[h*2],2)+sh(r-u[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new wf:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,c=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new wf:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,MNe)}return r&&r.value()}renderHull(t){const n=t==null?t=new wf:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new c4;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new wf:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new c4;return this.renderTriangle(t,n),n.value()}}function ONe(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*NNe(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function ND(e){V.call(this,null,e)}ND.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const INe=[-1e5,-1e5,1e5,1e5];ne(ND,V,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:INe;const o=this.value=OD.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!zNe(l)?LNe(l):null}return t.reflow(e.modified()).modifies(n)}});function LNe(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function zNe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const BNe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:ND},Symbol.toStringTag,{value:"Module"}));var $A=Math.PI/180,A0=64,y2=2048;function jNe(){var e=[256,256],t,n,r,i,o,s,a,l=are,u=[],c=Math.random,f={};f.layout=function(){for(var p=d(Uu()),g=GNe((e[0]>>5)*e[1]),m=null,y=u.length,v=-1,b=[],x=u.map(k=>({text:t(k),font:n(k),style:i(k),weight:o(k),rotate:s(k),size:~~(r(k)+1e-14),padding:a(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,S)=>S.size-k.size);++v<y;){var w=x[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,UNe(p,w,x,v),w.hasText&&h(g,w,m)&&(b.push(w),m?WNe(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(A0<<5)/g,p.height=y2/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function h(p,g,m){for(var y=g.x,v=g.y,b=Math.hypot(e[0],e[1]),x=l(e),w=c()<.5?1:-1,k=-w,S,C,_;(S=x(k+=w))&&(C=~~S[0],_=~~S[1],!(Math.min(Math.abs(C),Math.abs(_))>=b));)if(g.x=y+C,g.y=v+_,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!VNe(g,p,e[0]))&&(!m||HNe(g,m))){for(var $=g.sprite,A=g.width>>5,N=e[0]>>5,M=g.x-(A<<4),R=M&127,F=32-R,D=g.y1-g.y0,I=(g.y+g.y0)*N+(M>>5),O,j=0;j<D;j++){O=0;for(var Y=0;Y<=A;Y++)p[I+Y]|=O<<F|(Y<A?(O=$[j*A+Y])>>>R:0);I+=N}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(u=p,f):u},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Lc(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Lc(p),f):i},f.fontWeight=function(p){return arguments.length?(o=Lc(p),f):o},f.rotate=function(p){return arguments.length?(s=Lc(p),f):s},f.text=function(p){return arguments.length?(t=Lc(p),f):t},f.spiral=function(p){return arguments.length?(l=YNe[p]||p,f):l},f.fontSize=function(p){return arguments.length?(r=Lc(p),f):r},f.padding=function(p){return arguments.length?(a=Lc(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function UNe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(A0<<5)/o,y2/o);var s=0,a=0,l=0,u=n.length,c,f,d,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*$A),m=Math.cos(t.rotate*$A),y=c*m,v=c*g,b=d*m,x=d*g;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>l&&(l=d),s+c>=A0<<5&&(s=0,a+=l,l=0),a+d>=y2)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*$A),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var w=i.getImageData(0,0,(A0<<5)/o,y2/o).data,k=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)k[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var _=f*p+(h>>5),$=w[(a+p)*(A0<<5)+(s+h)<<2]?1<<31-h%32:0;k[_]|=$,S|=$}S?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=k.slice(0,(t.y1-t.y0)*f)}}}function VNe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[u+d])return!0;u+=n}return!1}function WNe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function HNe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function are(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function qNe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function GNe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Lc(e){return typeof e=="function"?e:function(){return e}}var YNe={archimedean:are,rectangular:qNe};const lre=["x","y","font","fontSize","fontStyle","fontWeight","angle"],XNe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function ID(e){V.call(this,jNe(),e)}ID.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:lre}]};ne(ID,V,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&q("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return Oe(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||XNe.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||lre;let a=e.fontSize||14,l;if(Oe(a)?l=e.fontSizeRange:a=_r(a),l){const p=a,g=Je("sqrt")().domain(fa(i,p)).range(l);a=m=>g(p(m))}i.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Fo).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=u.length;for(let p=0,g,m;p<h;++p)g=u[p],m=g.datum,m[s[0]]=g.x+f,m[s[1]]=g.y+d,m[s[2]]=g.font,m[s[3]]=g.size,m[s[4]]=g.style,m[s[5]]=g.weight,m[s[6]]=g.rotate;return t.reflow(r).modifies(s)}});const KNe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:ID},Symbol.toStringTag,{value:"Module"})),QNe=e=>new Uint8Array(e),ZNe=e=>new Uint16Array(e),cy=e=>new Uint32Array(e);function JNe(){let e=8,t=[],n=cy(0),r=ix(0,e),i=ix(0,e);return{data:()=>t,seen:()=>n=eIe(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)l[f]=t[f],u[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?u[f]=-1:(u[f]=d,r[d]=r[f],i[d]=i[f],l[d]=c,c._index=d++),r[f]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=ix(o,e,r),i=ix(o,e))}}}function eIe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function ix(e,t,n){const r=(t<257?QNe:t<65537?ZNe:cy)(e);return n&&r.set(n),r}function lj(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],c=a[1],f=l.length;let d;for(d=0;d<u;++d)o[l[d]]|=r;for(d=c;d<f;++d)o[l[d]]|=r;return s}}}function uj(){let e=cy(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,f=l.length,d=cy(f);let h=Array(f),p,g,m;for(m=0;m<f;++m)h[m]=a(l[m]),d[m]=m;if(h=tIe(h,d),c)p=t,g=e,t=Array(c+f),e=cy(c+f),nIe(u,p,g,c,h,d,f,t,e);else{if(u>0)for(m=0;m<f;++m)d[m]+=u;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,l){const u=n;let c,f,d;for(f=0;!l[e[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[sAe(l,a[0],0,u),Ku(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function tIe(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),uAe(e,t)}function nIe(e,t,n,r,i,o,s,a,l){let u=0,c=0,f;for(f=0;u<r&&c<s;++f)t[u]<i[c]?(a[f]=t[u],l[f]=n[u++]):(a[f]=i[c],l[f]=o[c++]+e);for(;u<r;++u,++f)a[f]=t[u],l[f]=n[u];for(;c<s;++c,++f)a[f]=i[c],l[f]=o[c]+e}function LD(e){V.call(this,JNe(),e),this._indices=null,this._dims=null}LD.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ne(LD,V,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=uj()),o.push(lj(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,m,y,v,b,x,w,k,S;if(u.set(l),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,k=v.length;w<k;++w)x[v[w]._index]=1;for(w=0;w<h;++w)S=r[w],(!s[w]||e.modified("fields",w)||t.modified(S.fields))&&(y=S.fname,(g=p[y])||(o[y]=m=uj(),p[y]=g=m.insert(S,t.source,0)),s[w]=lj(m,w,i[w]).onAdd(g,l));for(w=0,k=a.data().length;w<k;++w)b[w]||(u[w]!==l[w]?f.push(w):x[w]&&l[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,g=l[p]||(l[p]=s[p].insert(a[h],r,d)),o[h].onAdd(g,m);for(;d<c;++d)y[d]=v,m[d]!==v&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=u[0],p=u[1],g=e.one;let m,y,v;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(f>h)for(m=h,y=Math.min(f,p);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;if(d>p)for(m=Math.max(f,p),y=d;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(d<p)for(m=Math.max(h,d),y=p;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=a[0],d=a[1],h=e.one;let p,g,m;if(u<f)for(p=u,g=Math.min(f,c);p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(u>f)for(p=f,g=Math.min(u,d);p<g;++p)m=s[p],o[m]^=h,r.push(m);if(c>d)for(p=Math.max(u,d),g=c;p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)m=s[p],o[m]^=h,r.push(m);e.range=t.slice()}});function zD(e){V.call(this,null,e)}zD.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ne(zD,V,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:s[c];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^l[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^l[c]&n))?s[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const rIe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:LD,resolvefilter:zD},Symbol.toStringTag,{value:"Module"})),iIe="RawCode",sd="Literal",oIe="Property",sIe="Identifier",aIe="ArrayExpression",lIe="BinaryExpression",ure="CallExpression",uIe="ConditionalExpression",cIe="LogicalExpression",fIe="MemberExpression",dIe="ObjectExpression",hIe="UnaryExpression";function Ss(e){this.type=e}Ss.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=pIe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function pIe(e){switch(e.type){case aIe:return e.elements;case lIe:case cIe:return[e.left,e.right];case ure:return[e.callee].concat(e.arguments);case uIe:return[e.test,e.consequent,e.alternate];case fIe:return[e.object,e.property];case dIe:return e.properties;case oIe:return[e.key,e.value];case hIe:return[e.argument];case sIe:case sd:case iIe:default:return[]}}var _a,ge,H,wr,ft,KC=1,Cv=2,ad=3,kc=4,QC=5,Fd=6,ri=7,_v=8,gIe=9;_a={};_a[KC]="Boolean";_a[Cv]="<end>";_a[ad]="Identifier";_a[kc]="Keyword";_a[QC]="Null";_a[Fd]="Numeric";_a[ri]="Punctuator";_a[_v]="String";_a[gIe]="RegularExpression";var mIe="ArrayExpression",yIe="BinaryExpression",vIe="CallExpression",bIe="ConditionalExpression",cre="Identifier",xIe="Literal",wIe="LogicalExpression",SIe="MemberExpression",kIe="ObjectExpression",CIe="Property",_Ie="UnaryExpression",Mn="Unexpected token %0",EIe="Unexpected number",$Ie="Unexpected string",AIe="Unexpected identifier",TIe="Unexpected reserved word",MIe="Unexpected end of input",f4="Invalid regular expression",AA="Invalid regular expression: missing /",fre="Octal literals are not allowed in strict mode.",PIe="Duplicate data property in object literal not allowed in strict mode",Xn="ILLEGAL",f1="Disabled.",FIe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),RIe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function ZC(e,t){if(!e)throw new Error("ASSERT: "+t)}function Wa(e){return e>=48&&e<=57}function BD(e){return"0123456789abcdefABCDEF".includes(e)}function fy(e){return"01234567".includes(e)}function DIe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function d1(e){return e===10||e===13||e===8232||e===8233}function Ev(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&FIe.test(String.fromCharCode(e))}function TS(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&RIe.test(String.fromCharCode(e))}const OIe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function dre(){for(;H<wr;){const e=ge.charCodeAt(H);if(DIe(e)||d1(e))++H;else break}}function d4(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)H<wr&&BD(ge[H])?(r=ge[H++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ke({},Mn,Xn);return String.fromCharCode(i)}function NIe(){var e,t,n,r;for(e=ge[H],t=0,e==="}"&&Ke({},Mn,Xn);H<wr&&(e=ge[H++],!!BD(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ke({},Mn,Xn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function hre(){var e,t;for(e=ge.charCodeAt(H++),t=String.fromCharCode(e),e===92&&(ge.charCodeAt(H)!==117&&Ke({},Mn,Xn),++H,e=d4("u"),(!e||e==="\\"||!Ev(e.charCodeAt(0)))&&Ke({},Mn,Xn),t=e);H<wr&&(e=ge.charCodeAt(H),!!TS(e));)++H,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ge.charCodeAt(H)!==117&&Ke({},Mn,Xn),++H,e=d4("u"),(!e||e==="\\"||!TS(e.charCodeAt(0)))&&Ke({},Mn,Xn),t+=e);return t}function IIe(){var e,t;for(e=H++;H<wr;){if(t=ge.charCodeAt(H),t===92)return H=e,hre();if(TS(t))++H;else break}return ge.slice(e,H)}function LIe(){var e,t,n;return e=H,t=ge.charCodeAt(H)===92?hre():IIe(),t.length===1?n=ad:OIe.hasOwnProperty(t)?n=kc:t==="null"?n=QC:t==="true"||t==="false"?n=KC:n=ad,{type:n,value:t,start:e,end:H}}function TA(){var e=H,t=ge.charCodeAt(H),n,r=ge[H],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++H,{type:ri,value:String.fromCharCode(t),start:e,end:H};default:if(n=ge.charCodeAt(H+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return H+=2,{type:ri,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:H};case 33:case 61:return H+=2,ge.charCodeAt(H)===61&&++H,{type:ri,value:ge.slice(e,H),start:e,end:H}}}if(s=ge.substr(H,4),s===">>>=")return H+=4,{type:ri,value:s,start:e,end:H};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return H+=3,{type:ri,value:o,start:e,end:H};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return H+=2,{type:ri,value:i,start:e,end:H};if(i==="//"&&Ke({},Mn,Xn),"<>=!+-*%&|^/".includes(r))return++H,{type:ri,value:r,start:e,end:H};Ke({},Mn,Xn)}function zIe(e){let t="";for(;H<wr&&BD(ge[H]);)t+=ge[H++];return t.length===0&&Ke({},Mn,Xn),Ev(ge.charCodeAt(H))&&Ke({},Mn,Xn),{type:Fd,value:parseInt("0x"+t,16),start:e,end:H}}function BIe(e){let t="0"+ge[H++];for(;H<wr&&fy(ge[H]);)t+=ge[H++];return(Ev(ge.charCodeAt(H))||Wa(ge.charCodeAt(H)))&&Ke({},Mn,Xn),{type:Fd,value:parseInt(t,8),octal:!0,start:e,end:H}}function cj(){var e,t,n;if(n=ge[H],ZC(Wa(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=H,e="",n!=="."){if(e=ge[H++],n=ge[H],e==="0"){if(n==="x"||n==="X")return++H,zIe(t);if(fy(n))return BIe(t);n&&Wa(n.charCodeAt(0))&&Ke({},Mn,Xn)}for(;Wa(ge.charCodeAt(H));)e+=ge[H++];n=ge[H]}if(n==="."){for(e+=ge[H++];Wa(ge.charCodeAt(H));)e+=ge[H++];n=ge[H]}if(n==="e"||n==="E")if(e+=ge[H++],n=ge[H],(n==="+"||n==="-")&&(e+=ge[H++]),Wa(ge.charCodeAt(H)))for(;Wa(ge.charCodeAt(H));)e+=ge[H++];else Ke({},Mn,Xn);return Ev(ge.charCodeAt(H))&&Ke({},Mn,Xn),{type:Fd,value:parseFloat(e),start:t,end:H}}function jIe(){var e="",t,n,r,i,o=!1;for(t=ge[H],ZC(t==="'"||t==='"',"String literal must starts with a quote"),n=H,++H;H<wr;)if(r=ge[H++],r===t){t="";break}else if(r==="\\")if(r=ge[H++],!r||!d1(r.charCodeAt(0)))switch(r){case"u":case"x":ge[H]==="{"?(++H,e+=NIe()):e+=d4(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:fy(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),H<wr&&fy(ge[H])&&(o=!0,i=i*8+"01234567".indexOf(ge[H++]),"0123".includes(r)&&H<wr&&fy(ge[H])&&(i=i*8+"01234567".indexOf(ge[H++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ge[H]===`
`&&++H;else{if(d1(r.charCodeAt(0)))break;e+=r}return t!==""&&Ke({},Mn,Xn),{type:_v,value:e,octal:o,start:n,end:H}}function UIe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ke({},f4)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ke({},f4)}try{return new RegExp(e,t)}catch{return null}}function VIe(){var e,t,n,r,i;for(e=ge[H],ZC(e==="/","Regular expression literal must start with a slash"),t=ge[H++],n=!1,r=!1;H<wr;)if(e=ge[H++],t+=e,e==="\\")e=ge[H++],d1(e.charCodeAt(0))&&Ke({},AA),t+=e;else if(d1(e.charCodeAt(0)))Ke({},AA);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ke({},AA),i=t.substr(1,t.length-2),{value:i,literal:t}}function WIe(){var e,t,n;for(t="",n="";H<wr&&(e=ge[H],!!TS(e.charCodeAt(0)));)++H,e==="\\"&&H<wr?Ke({},Mn,Xn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ke({},f4,n),{value:n,literal:t}}function HIe(){var e,t,n,r;return ft=null,dre(),e=H,t=VIe(),n=WIe(),r=UIe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:H}}function qIe(e){return e.type===ad||e.type===kc||e.type===KC||e.type===QC}function pre(){if(dre(),H>=wr)return{type:Cv,start:H,end:H};const e=ge.charCodeAt(H);return Ev(e)?LIe():e===40||e===41||e===59?TA():e===39||e===34?jIe():e===46?Wa(ge.charCodeAt(H+1))?cj():TA():Wa(e)?cj():TA()}function ai(){const e=ft;return H=e.end,ft=pre(),H=e.end,e}function gre(){const e=H;ft=pre(),H=e}function GIe(e){const t=new Ss(mIe);return t.elements=e,t}function fj(e,t,n){const r=new Ss(e==="||"||e==="&&"?wIe:yIe);return r.operator=e,r.left=t,r.right=n,r}function YIe(e,t){const n=new Ss(vIe);return n.callee=e,n.arguments=t,n}function XIe(e,t,n){const r=new Ss(bIe);return r.test=e,r.consequent=t,r.alternate=n,r}function jD(e){const t=new Ss(cre);return t.name=e,t}function T0(e){const t=new Ss(xIe);return t.value=e.value,t.raw=ge.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function dj(e,t,n){const r=new Ss(SIe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function KIe(e){const t=new Ss(kIe);return t.properties=e,t}function hj(e,t,n){const r=new Ss(CIe);return r.key=t,r.value=n,r.kind=e,r}function QIe(e,t){const n=new Ss(_Ie);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ke(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(ZC(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=H,n.description=i,n}function JC(e){e.type===Cv&&Ke(e,MIe),e.type===Fd&&Ke(e,EIe),e.type===_v&&Ke(e,$Ie),e.type===ad&&Ke(e,AIe),e.type===kc&&Ke(e,TIe),Ke(e,Mn,e.value)}function Sr(e){const t=ai();(t.type!==ri||t.value!==e)&&JC(t)}function At(e){return ft.type===ri&&ft.value===e}function MA(e){return ft.type===kc&&ft.value===e}function ZIe(){const e=[];for(H=ft.start,Sr("[");!At("]");)At(",")?(ai(),e.push(null)):(e.push(ld()),At("]")||Sr(","));return ai(),GIe(e)}function pj(){H=ft.start;const e=ai();return e.type===_v||e.type===Fd?(e.octal&&Ke(e,fre),T0(e)):jD(e.value)}function JIe(){var e,t,n,r;if(H=ft.start,e=ft,e.type===ad)return n=pj(),Sr(":"),r=ld(),hj("init",n,r);if(e.type===Cv||e.type===ri)JC(e);else return t=pj(),Sr(":"),r=ld(),hj("init",t,r)}function eLe(){var e=[],t,n,r,i={},o=String;for(H=ft.start,Sr("{");!At("}");)t=JIe(),t.key.type===cre?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ke({},PIe):i[r]=!0,e.push(t),At("}")||Sr(",");return Sr("}"),KIe(e)}function tLe(){Sr("(");const e=UD();return Sr(")"),e}const nLe={if:1};function rLe(){var e,t,n;if(At("("))return tLe();if(At("["))return ZIe();if(At("{"))return eLe();if(e=ft.type,H=ft.start,e===ad||nLe[ft.value])n=jD(ai().value);else if(e===_v||e===Fd)ft.octal&&Ke(ft,fre),n=T0(ai());else{if(e===kc)throw new Error(f1);e===KC?(t=ai(),t.value=t.value==="true",n=T0(t)):e===QC?(t=ai(),t.value=null,n=T0(t)):At("/")||At("/=")?(n=T0(HIe()),gre()):JC(ai())}return n}function iLe(){const e=[];if(Sr("("),!At(")"))for(;H<wr&&(e.push(ld()),!At(")"));)Sr(",");return Sr(")"),e}function oLe(){H=ft.start;const e=ai();return qIe(e)||JC(e),jD(e.value)}function sLe(){return Sr("."),oLe()}function aLe(){Sr("[");const e=UD();return Sr("]"),e}function lLe(){var e,t,n;for(e=rLe();;)if(At("."))n=sLe(),e=dj(".",e,n);else if(At("("))t=iLe(),e=YIe(e,t);else if(At("["))n=aLe(),e=dj("[",e,n);else break;return e}function gj(){const e=lLe();if(ft.type===ri&&(At("++")||At("--")))throw new Error(f1);return e}function v2(){var e,t;if(ft.type!==ri&&ft.type!==kc)t=gj();else{if(At("++")||At("--"))throw new Error(f1);if(At("+")||At("-")||At("~")||At("!"))e=ai(),t=v2(),t=QIe(e.value,t);else{if(MA("delete")||MA("void")||MA("typeof"))throw new Error(f1);t=gj()}}return t}function mj(e){let t=0;if(e.type!==ri&&e.type!==kc)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function uLe(){var e,t,n,r,i,o,s,a,l,u;if(e=ft,l=v2(),r=ft,i=mj(r),i===0)return l;for(r.prec=i,ai(),t=[e,ft],s=v2(),o=[l,r,s];(i=mj(ft))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=fj(a,l,s),o.push(n);r=ai(),r.prec=i,o.push(r),t.push(ft),n=v2(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=fj(o[u-1].value,o[u-2],n),u-=2;return n}function ld(){var e,t,n;return e=uLe(),At("?")&&(ai(),t=ld(),Sr(":"),n=ld(),e=XIe(e,t,n)),e}function UD(){const e=ld();if(At(","))throw new Error(f1);return e}function VD(e){ge=e,H=0,wr=ge.length,ft=null,gre();const t=UD();if(ft.type!==Cv)throw new Error("Unexpect token after expression.");return t}var mre={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function yre(e){function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&q("Missing arguments to clamp function."),s.length>3&&q("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&q("Missing arguments to if function."),s.length>3&&q("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function cLe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function vre(e){e=e||{};const t=e.allowed?gs(e.allowed):{},n=e.forbidden?gs(e.forbidden):{},r=e.constants||mre,i=(e.functions||yre)(f),o=e.globalvar,s=e.fieldvar,a=Oe(o)?o:p=>`${o}["${p}"]`;let l={},u={},c=0;function f(p){if(le(p))return p;const g=d[p.type];return g==null&&q("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:ce(n,g)?q("Illegal identifier: "+g):ce(r,g)?r[g]:ce(t,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===s&&(u[cLe(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&q("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=ce(i,g)&&i[g];return y||q("Unrecognized function: "+g),Oe(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}const yj=Symbol("vega_selection_getter");function bre(e){return(!e.getter||!e.getter[yj])&&(e.getter=To(e.field),e.getter[yj]=!0),e.getter}const WD="intersect",vj="union",fLe="vlMulti",dLe="vlPoint",bj="or",hLe="and",qs="_vgsid_",h1=To(qs),pLe="E",gLe="R",mLe="R-E",yLe="R-LE",vLe="R-RE",MS="index:unit";function xj(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=bre(a)(e),zu(s)&&(s=yr(s)),zu(r[o])&&(r[o]=yr(r[o])),G(r[o])&&zu(r[o][0])&&(r[o]=r[o].map(yr)),a.type===pLe){if(G(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===gLe){if(!zh(s,r[o]))return!1}else if(a.type===vLe){if(!zh(s,r[o],!0,!1))return!1}else if(a.type===mLe){if(!zh(s,r[o],!1,!1))return!1}else if(a.type===yLe&&!zh(s,r[o],!1,!0))return!1;return!0}function bLe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[MS]&&r[MS].value:void 0,s=n===WD,a=i.length,l=0,u,c,f,d,h;l<a;++l)if(u=i[l],o&&s){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=xj(t,u),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=xj(t,u),s^h)return h;return a&&s}const xre=Lg(h1),xLe=xre.left,wLe=xre.right;function SLe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[MS]&&r[MS].value:void 0,s=n===WD,a=h1(t),l=xLe(i,a);if(l===i.length||h1(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(wLe(i,a)-l<o.size)return!1}return!0}function kLe(e,t){return e.map(n=>De(t.fields?{values:t.fields.map(r=>bre(r)(n.datum))}:{[qs]:h1(n.datum)},t))}function CLe(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,c,f,d,h,p,g,m,y,v,b=o.length,x=0,w,k;x<b;++x)if(u=o[x],d=u.unit,c=u.fields,f=u.values,c&&f){for(w=0,k=c.length;w<k;++w)h=c[w],g=s[h.field]||(s[h.field]={}),m=g[d]||(g[d]=[]),l[h.field]=y=h.type.charAt(0),v=PA[`${y}_union`],g[d]=v(m,ae(f[w]));n&&(m=a[d]||(a[d]=[]),m.push(ae(f).reduce((S,C,_)=>(S[c[_].field]=C,S),{})))}else h=qs,p=h1(u),g=s[h]||(s[h]={}),m=g[d]||(g[d]=[]),m.push(p),n&&(m=a[d]||(a[d]=[]),m.push({[qs]:p}));if(t=t||vj,s[qs]?s[qs]=PA[`${qs}_${t}`](...Object.values(s[qs])):Object.keys(s).forEach(S=>{s[S]=Object.keys(s[S]).map(C=>s[S][C]).reduce((C,_)=>C===void 0?_:PA[`${l[S]}_${t}`](C,_))}),o=Object.keys(a),n&&o.length){const S=r?dLe:fLe;s[S]=t===vj?{[bj]:o.reduce((C,_)=>(C.push(...a[_]),C),[])}:{[hLe]:o.map(C=>({[bj]:a[C]}))}}return s}var PA={[`${qs}_union`]:vAe,[`${qs}_intersect`]:mAe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=yr(t[0]),r=yr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=yr(t[0]),r=yr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const _Le=":",ELe="@";function HD(e,t,n,r){t[0].type!==sd&&q("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&He(t).value,s="unit",a=ELe+s,l=_Le+i;o===WD&&!ce(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),ce(r,l)||(r[l]=n.getData(i).tuplesRef())}function wre(e){const t=this.context.data[e];return t?t.values.value:[]}function $Le(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function ALe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Mo).insert(t)),1}function TLe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const $v=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},MLe=$v("format"),Sre=$v("timeFormat"),PLe=$v("utcFormat"),FLe=$v("timeParse"),RLe=$v("utcParse"),ox=new Date(2e3,0,1);function e_(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(ox.setYear(2e3),ox.setMonth(e),ox.setDate(t),Sre.call(this,ox,n))}function DLe(e){return e_.call(this,e,1,"%B")}function OLe(e){return e_.call(this,e,1,"%b")}function NLe(e){return e_.call(this,0,2+e,"%A")}function ILe(e){return e_.call(this,0,2+e,"%a")}const LLe=":",zLe="@",h4="%",kre="$";function qD(e,t,n,r){t[0].type!==sd&&q("First argument to data functions must be a string literal.");const i=t[0].value,o=LLe+i;if(!ce(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function BLe(e,t,n,r){t[0].type!==sd&&q("First argument to indata must be a string literal."),t[1].type!==sd&&q("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=zLe+o;ce(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function Gr(e,t,n,r){if(t[0].type===sd)wj(n,r,t[0].value);else for(e in n.scales)wj(n,r,e)}function wj(e,t,n){const r=h4+n;if(!ce(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Ea(e,t){if(Oe(e))return e;if(le(e)){const n=t.scales[e];return n&&QMe(n.value)?n.value:void 0}}function jLe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Gr,n._range=Gr,n._scale=Gr;const r=i=>"_["+(i.type===sd?te(h4+i.value):te(h4)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function GD(e,t){return function(n,r,i){if(n){const o=Ea(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const ULe=GD("area",dDe),VLe=GD("bounds",mDe),WLe=GD("centroid",SDe);function HLe(e,t){const n=Ea(e,(t||this).context);return n&&n.scale()}function qLe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function YD(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function GLe(){return YD(this.context.dataflow,"warn",arguments)}function YLe(){return YD(this.context.dataflow,"info",arguments)}function XLe(){return YD(this.context.dataflow,"debug",arguments)}function FA(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function p4(e){const t=ec(e),n=FA(t.r),r=FA(t.g),i=FA(t.b);return .2126*n+.7152*r+.0722*i}function KLe(e,t){const n=p4(e),r=p4(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function QLe(){const e=[].slice.call(arguments);return e.unshift({}),De(...e)}function Cre(e,t){return e===t||e!==e&&t!==t?!0:G(e)?G(t)&&e.length===t.length?ZLe(e,t):!1:se(e)&&se(t)?_re(e,t):!1}function ZLe(e,t){for(let n=0,r=e.length;n<r;++n)if(!Cre(e[n],t[n]))return!1;return!0}function _re(e,t){for(const n in e)if(!Cre(e[n],t[n]))return!1;return!0}function Sj(e){return t=>_re(e,t)}function JLe(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(f=n===!0?Mo:G(n)||uC(n)?n:Sj(n),c.remove(f)),t&&c.insert(t),r&&(f=Sj(r),l.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function e7e(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function t7e(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const kj={};function n7e(e,t){const n=kj[t]||(kj[t]=To(t));return G(e)?e.map(n):n(e)}function XD(e){return G(e)||ArrayBuffer.isView(e)?e:null}function KD(e){return XD(e)||(le(e)?e:null)}function r7e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return XD(e).join(...n)}function i7e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return KD(e).indexOf(...n)}function o7e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return KD(e).lastIndexOf(...n)}function s7e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return KD(e).slice(...n)}function a7e(e,t,n){return Oe(n)&&q("Function argument passed to replace."),String(e).replace(t,n)}function l7e(e){return XD(e).slice().reverse()}function u7e(e,t,n){return l6(e||0,t||0,n||0)}function c7e(e,t){const n=Ea(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function f7e(e,t){const n=Ea(e,(t||this).context);return n?n.copy():void 0}function d7e(e,t){const n=Ea(e,(t||this).context);return n?n.domain():[]}function h7e(e,t,n){const r=Ea(e,(n||this).context);return r?G(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function p7e(e,t){const n=Ea(e,(t||this).context);return n&&n.range?n.range():[]}function g7e(e,t,n){const r=Ea(e,(n||this).context);return r?r(t):void 0}function m7e(e,t,n,r,i){e=Ea(e,(i||this).context);const o=gee(t,n);let s=e.domain(),a=s[0],l=He(s),u=Cr;return l-a?u=ree(e,a,l):e=(e.interpolator?Je("sequential")().interpolator(e.interpolator()):Je("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==He(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o}function y7e(e,t,n){const r=Ea(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function v7e(e){let t=null;return function(n){return n?r1(n,t=t||Jp(e)):e}}const Ere=e=>e.data;function $re(e,t){const n=wre.call(t,e);return n.root&&n.root.lookup||{}}function b7e(e,t,n){const r=$re(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(Ere):void 0}function x7e(e,t){const n=$re(e,this)[t];return n?n.ancestors().map(Ere):void 0}const Are=()=>typeof window<"u"&&window||null;function w7e(){const e=Are();return e?e.screen:{}}function S7e(){const e=Are();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function k7e(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Tre(e,t,n){if(!e)return[];const[r,i]=e,o=new dn().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return dte(s,o,C7e(t))}function C7e(e){let t=null;if(e){const n=ae(e.marktype),r=ae(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function _7e(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ae(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function E7e(e){return ae(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function $7e(e,t,n){const{x:r,y:i,mark:o}=n,s=new dn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),Tre([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>A7e(l.x,l.y,t))}function A7e(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const p1={random(){return Fo()},cumulativeNormal:pC,cumulativeLogNormal:lR,cumulativeUniform:dR,densityNormal:rR,densityLogNormal:aR,densityUniform:fR,quantileNormal:gC,quantileLogNormal:uR,quantileUniform:hR,sampleNormal:hC,sampleLogNormal:sR,sampleUniform:cR,isArray:G,isBoolean:vc,isDate:zu,isDefined(e){return e!==void 0},isNumber:Qe,isObject:se,isRegExp:IK,isString:le,isTuple:uC,isValid(e){return e!=null&&e===e},toBoolean:NF,toDate(e){return IF(e)},toNumber:yr,toString:LF,indexof:i7e,join:r7e,lastindexof:o7e,replace:a7e,reverse:l7e,slice:s7e,flush:OK,lerp:LK,merge:QLe,pad:jK,peek:He,pluck:n7e,span:J1,inrange:zh,truncate:UK,rgb:ec,lab:Nw,hcl:Iw,hsl:Dw,luminance:p4,contrast:KLe,sequence:Ni,format:MLe,utcFormat:PLe,utcParse:RLe,utcOffset:xQ,utcSequence:kQ,timeFormat:Sre,timeParse:FLe,timeOffset:bQ,timeSequence:SQ,timeUnitSpecifier:lQ,monthFormat:DLe,monthAbbrevFormat:OLe,dayFormat:NLe,dayAbbrevFormat:ILe,quarter:PK,utcquarter:FK,week:cQ,utcweek:hQ,dayofyear:uQ,utcdayofyear:dQ,warn:GLe,info:YLe,debug:XLe,extent(e){return fa(e)},inScope:qLe,intersect:Tre,clampRange:RK,pinchDistance:e7e,pinchAngle:t7e,screen:w7e,containerSize:k7e,windowSize:S7e,bandspace:u7e,setdata:ALe,pathShape:v7e,panLinear:$K,panLog:AK,panPow:TK,panSymlog:MK,zoomLinear:MF,zoomLog:PF,zoomPow:ww,zoomSymlog:FF,encode:TLe,modify:JLe,lassoAppend:_7e,lassoPath:E7e,intersectLasso:$7e},T7e=["view","item","group","xy","x","y"],M7e="event.vega.",Mre="this.",QD={},Pre={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${te(kre+e)}]`,functions:P7e,constants:mre,visitors:QD},g4=vre(Pre);function P7e(e){const t=yre(e);T7e.forEach(n=>t[n]=M7e+n);for(const n in p1)t[n]=Mre+n;return De(t,jLe(e,p1,QD)),t}function on(e,t,n){return arguments.length===1?p1[e]:(p1[e]=t,n&&(QD[e]=n),g4&&(g4.functions[e]=Mre+e),this)}on("bandwidth",c7e,Gr);on("copy",f7e,Gr);on("domain",d7e,Gr);on("range",p7e,Gr);on("invert",h7e,Gr);on("scale",g7e,Gr);on("gradient",m7e,Gr);on("geoArea",ULe,Gr);on("geoBounds",VLe,Gr);on("geoCentroid",WLe,Gr);on("geoShape",y7e,Gr);on("geoScale",HLe,Gr);on("indata",$Le,BLe);on("data",wre,qD);on("treePath",b7e,qD);on("treeAncestors",x7e,qD);on("vlSelectionTest",bLe,HD);on("vlSelectionIdTest",SLe,HD);on("vlSelectionResolve",CLe,HD);on("vlSelectionTuples",kLe);function ma(e,t){const n={};let r;try{e=le(e)?e:te(e)+"",r=VD(e)}catch{q("Expression parse error: "+e)}r.visit(o=>{if(o.type!==ure)return;const s=o.callee.name,a=Pre.visitors[s];a&&a(s,o.arguments,t,n)});const i=g4(r);return i.globals.forEach(o=>{const s=kre+o;!ce(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:De({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function F7e(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const R7e=gs(["rule"]),Cj=gs(["group","image","rect"]);function D7e(e,t){let n="";return R7e[t]||(e.x2&&(e.x?(Cj[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Cj[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function ZD(e){return(e+"").toLowerCase()}function O7e(e){return ZD(e)==="operator"}function N7e(e){return ZD(e)==="collect"}function Lm(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function I7e(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var L7e={operator:(e,t)=>Lm(e,["_"],t.code),parameter:(e,t)=>Lm(e,["datum","_"],t.code),event:(e,t)=>Lm(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Lm(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+te(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=D7e(r,n),i+="return m;",Lm(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(te).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),I7e(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function z7e(e){const t=this;O7e(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function B7e(e){const t=this;if(e.params){const n=t.get(e.id);n||q("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function j7e(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=G(i)?i.map(o=>_j(o,n,t)):_j(i,n,t)}return t}function _j(e,t,n){if(!e||!se(e))return e;for(let r=0,i=Ej.length,o;r<i;++r)if(o=Ej[r],ce(e,o.key))return o.parse(e,t,n);return e}var Ej=[{key:"$ref",parse:U7e},{key:"$key",parse:W7e},{key:"$expr",parse:V7e},{key:"$field",parse:H7e},{key:"$encode",parse:G7e},{key:"$compare",parse:q7e},{key:"$context",parse:Y7e},{key:"$subflow",parse:X7e},{key:"$tupleid",parse:K7e}];function U7e(e,t){return t.get(e.$ref)||q("Operator not defined: "+e.$ref)}function V7e(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ci(t.parameterExpression(e.$expr),e.$fields))}function W7e(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=OF(e.$key,e.$flat,t.expr.codegen))}function H7e(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=To(e.$field,e.$name,t.expr.codegen))}function q7e(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ae(e.$compare).map(i=>i&&i.$tupleid?ve:i);return t.fn[n]||(t.fn[n]=RF(r,e.$order,t.expr.codegen))}function G7e(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Ci(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function Y7e(e,t){return t}function X7e(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function K7e(){return ve}function Q7e(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&q("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Z7e(e){var t=this,n=se(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||q("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const J7e={skip:!0};function eze(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function tze(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],J7e)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Mo).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function Fre(e,t,n,r){return new Rre(e,t,n,r)}function Rre(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||L7e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function $j(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Rre.prototype=$j.prototype={fork(){const e=new $j(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),N7e(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[ZD(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:F7e,parseOperator:z7e,parseOperatorParameters:B7e,parseParameters:j7e,parseStream:Q7e,parseUpdate:Z7e,getState:eze,setState:tze};function nze(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Dre(t,e.description()))}function Dre(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function rze(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const RA="default";function ize(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:RA,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?le(i)?i:i.user:RA,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return le(r)||(i=r.item,r=r.user),m4(e,r&&r!==RA?r:i||r),i},{cursor:t})}function m4(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function PS(e,t){var n=e._runtime.data;return ce(n,t)||q("Unrecognized data set: "+t),n[t]}function oze(e,t){return arguments.length<2?PS(this,e).values.value:t_.call(this,e,Td().remove(Mo).insert(t))}function t_(e,t){KQ(t)||q("Second argument to changes must be a changeset.");const n=PS(this,e);return n.modified=!0,this.pulse(n.input,t)}function sze(e,t){return t_.call(this,e,Td().insert(t))}function aze(e,t){return t_.call(this,e,Td().remove(t))}function Ore(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Nre(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function n_(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function lze(e){var t=n_(e),n=Ore(e),r=Nre(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function uze(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=n_(e),s=t.changedTouches?t.changedTouches[0]:t,o=UC(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=cze(e,n,o),t}function cze(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;le(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:_r(e),item:_r(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const Aj="view",fze="timer",dze="window",hze={trap:!1};function pze(e){const t=De({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{G(r[o])&&(r[o]=gs(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Ire(e,t,n,r){e._eventListeners.push({type:n,sources:ae(t),handler:r})}function gze(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function sx(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||se(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function mze(e,t,n){var r=this,i=new dC(n),o=function(u,c){r.runAsync(null,()=>{e===Aj&&gze(r,t)&&u.preventDefault(),i.receive(uze(r,u,c))})},s;if(e===fze)sx(r,"timer",t)&&r.timer(o,t);else if(e===Aj)sx(r,"view",t)&&r.addEventListener(t,o,hze);else if(e===dze?sx(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&sx(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);Ire(r,s,t,o)}return i}function Tj(e){return e.item}function Mj(e){return e.item.mark.source}function Pj(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function yze(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Tj),Mj,Pj(e)),this.on(this.events("view","pointerout",Tj),Mj,Pj(t)),this}function vze(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Vi(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const bze="vega-bind",xze="vega-bind-name",wze="vega-bind-radio";function Sze(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=DF(r.debounce,i.update))),(r.input==null&&r.element?kze:_ze)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function kze(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),Ire(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(Cze(i))}}function Cze(e){return typeof Event<"u"?new Event(e):{type:e}}function _ze(e,t,n,r){const i=r.signal(n.signal),o=Vi("div",{class:bze}),s=n.input==="radio"?o:o.appendChild(Vi("label"));s.appendChild(Vi("span",{class:xze},n.name||n.signal)),t.appendChild(o);let a=Eze;switch(n.input){case"checkbox":a=$ze;break;case"select":a=Aze;break;case"radio":a=Tze;break;case"range":a=Mze;break}a(e,s,n,i)}function Eze(e,t,n,r){const i=Vi("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function $ze(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=Vi("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function Aze(e,t,n,r){const i=Vi("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};FS(s,r)&&(l.selected=!0),i.appendChild(Vi("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(FS(n.options[a],s)){i.selectedIndex=a;return}}}function Tze(e,t,n,r){const i=Vi("span",{class:wze}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};FS(s,r)&&(l.checked=!0);const u=Vi("input",l);u.addEventListener("change",()=>e.update(s));const c=Vi("label",{},(o[a]||s)+"");return c.prepend(u),i.appendChild(c),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)FS(a[u].value,s)&&(a[u].checked=!0)}}function Mze(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||Qu(o,i,100),a=Vi("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=Vi("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function FS(e,t){return e===t||e+""==t+""}function Lre(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Ore(e),Nre(e),n_(e),i,o).background(e.background())}function JD(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Pze(e,t,n,r){const i=new r(e.loader(),JD(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,n_(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function Fze(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=VC(r);e=n._el=e?DA(n,e,!0):null,nze(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||bv,a=e?o.renderer:o.headless;return n._renderer=a?Lre(n,n._renderer,e,a):null,n._handler=Pze(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=DA(n,t,!0):e.appendChild(Vi("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=DA(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Sze(n,l.element||t,l)})),n}function DA(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const zm=e=>+e||0,Rze=e=>({top:e,bottom:e,left:e,right:e});function Fj(e){return se(e)?{top:zm(e.top),bottom:zm(e.bottom),left:zm(e.left),right:zm(e.right)}:Rze(zm(e))}async function eO(e,t,n,r){const i=VC(t),o=i&&i.headless;return o||q("Unrecognized renderer type: "+t),await e.runAsync(),Lre(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function Dze(e,t){e!==Su.Canvas&&e!==Su.SVG&&e!==Su.PNG&&q("Unrecognized image type: "+e);const n=await eO(this,e,t);return e===Su.SVG?Oze(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Oze(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Nze(e,t){return(await eO(this,Su.Canvas,e,t)).canvas()}async function Ize(e){return(await eO(this,Su.SVG,e)).svg()}function Lze(e,t,n){return Fre(e,Gp,p1,n).parse(t)}function zze(e){var t=this._runtime.scales;return ce(t,e)||q("Unrecognized scale or projection: "+e),t[e].value}var zre="width",Bre="height",tO="padding",Rj={skip:!0};function jre(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===tO?r.left+r.right:0)}function Ure(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===tO?r.top+r.bottom:0)}function Bze(e){var t=e._signals,n=t[zre],r=t[Bre],i=t[tO];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=jre(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Ure(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function jze(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(zre,n,Rj),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(Bre,r,Rj),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function Uze(e){return this._runtime.getState(e||{data:Vze,signals:Wze,recurse:!0})}function Vze(e,t){return t.modified&&G(t.input.value)&&!e.startsWith("_:vega:_")}function Wze(e,t){return!(e==="parent"||t instanceof Gp.proxy)}function Hze(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function qze(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(k8e(n,t))}function Gze(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Yze(r))}function Yze(e){return e==null?"":G(e)?Vre(e):se(e)&&!zu(e)?Xze(e):e+""}function Xze(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(G(n)?Vre(n):Wre(n))}).join(`
`)}function Vre(e){return"["+e.map(Wre).join(", ")+"]"}function Wre(e){return G(e)?"[…]":se(e)&&!zu(e)?"{…}":e}function Kze(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function Hre(e,t){const n=this;if(t=t||{},np.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=De({},e.locale,t.locale);n.locale(BQ(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Su.Canvas,n._scenegraph=new zee;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Gze,n._redraw=!0,n._handler=new bv().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=pze(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Lze(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:De({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=jre(n,n._width),n._viewHeight=Ure(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Bze(n),rze(n),ize(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function ax(e,t){return ce(e._signals,t)?e._signals[t]:q("Unrecognized signal name: "+te(t))}function qre(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Dj(e,t,n,r){let i=qre(n,r);return i||(i=JD(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Oj(e,t,n){const r=qre(t,n);return r&&t._targets.remove(r),e}ne(Hre,np,{async evaluate(e,t,n){if(await np.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,lze(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&t2(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Dre(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=ax(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Fj(e)):Fj(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(VC(e)||q("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(np.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(ax(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:jze,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=JD(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Dj(this,e,ax(this,e),t)},removeSignalListener(e,t){return Oj(this,ax(this,e),t)},addDataListener(e,t){return Dj(this,e,PS(this,e).values,t)},removeDataListener(e,t){return Oj(this,PS(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=m4(this,null);this._globalCursor=!!e,t&&m4(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:qze,events:mze,finalize:vze,hover:yze,data:oze,change:t_,insert:sze,remove:aze,scale:zze,initialize:Fze,toImageURL:Dze,toCanvas:Nze,toSVG:Ize,getState:Uze,setState:Hze,_watchPixelRatio:Kze});const Qze="view",RS="[",DS="]",Gre="{",Yre="}",Zze=":",Xre=",",Jze="@",eBe=">",tBe=/[[\]{}]/,nBe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Kre,Qre;function Cc(e,t,n){return Kre=t||Qze,Qre=n||nBe,Zre(e.trim()).map(y4)}function rBe(e){return Qre[e]}function dy(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function Zre(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=dy(e,i,Xre,RS+Gre,DS+Yre),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function y4(e){return e[0]==="["?iBe(e):oBe(e)}function iBe(e){const t=e.length;let n=1,r;if(n=dy(e,n,DS,RS,DS),n===t)throw"Empty between selector: "+e;if(r=Zre(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==eBe)throw"Expected '>' after between selector: "+e;r=r.map(y4);const i=y4(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function oBe(e){const t={source:Kre},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===Yre){if(a=e.lastIndexOf(Gre),a>=0){try{r=sBe(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===Jze&&(i=++a),l=dy(e,a,Zze),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=dy(e,a,RS),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=dy(e,a,DS),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==RS)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||tBe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):rBe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function sBe(e){const t=e.split(Xre);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function aBe(e){return se(e)?e:{type:e||"pad"}}const Bm=e=>+e||0,lBe=e=>({top:e,bottom:e,left:e,right:e});function uBe(e){return se(e)?e.signal?e:{top:Bm(e.top),bottom:Bm(e.bottom),left:Bm(e.left),right:Bm(e.right)}:lBe(Bm(e))}const Pn=e=>se(e)&&!G(e)?De({},e):{value:e};function Nj(e,t,n,r){return n!=null?(se(n)&&!G(n)||G(n)&&n.length&&se(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function er(e,t,n){for(const r in t)Nj(e,r,t[r]);for(const r in n)Nj(e,r,n[r],"update")}function Yg(e,t,n){for(const r in t)n&&ce(n,r)||(e[r]=De(e[r]||{},t[r]));return e}function ph(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const nO="mark",rO="frame",iO="scope",cBe="axis",fBe="axis-domain",dBe="axis-grid",hBe="axis-label",pBe="axis-tick",gBe="axis-title",mBe="legend",yBe="legend-band",vBe="legend-entry",bBe="legend-gradient",Jre="legend-label",xBe="legend-symbol",wBe="legend-title",SBe="title",kBe="title-text",CBe="title-subtitle";function _Be(e,t,n,r,i){const o={},s={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!ph(l,e)&&OA(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===rO?i.group:n===nO?De({},i.mark,i[t]):null;for(l in c)u=ph(l,e)||(l==="fill"||l==="stroke")&&(ph("fill",e)||ph("stroke",e)),u||OA(o,l,c[l]);ae(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)ph(h,e)||OA(o,h,d[h])}),e=De({},e);for(l in o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=De(s,e.enter),a&&(e.update=De(a,e.update)),e}function OA(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const eie=e=>le(e)?te(e):e.signal?`(${e.signal})`:tie(e);function r_(e){if(e.gradient!=null)return $Be(e);let t=e.signal?`(${e.signal})`:e.color?EBe(e.color):e.field!=null?tie(e.field):e.value!==void 0?te(e.value):void 0;return e.scale!=null&&(t=ABe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${b2(e.exponent)})`),e.mult!=null&&(t+=`*${b2(e.mult)}`),e.offset!=null&&(t+=`+${b2(e.offset)}`),e.round&&(t=`round(${t})`),t}const lx=(e,t,n,r)=>`(${e}(${[t,n,r].map(r_).join(",")})+'')`;function EBe(e){return e.c?lx("hcl",e.h,e.c,e.l):e.h||e.s?lx("hsl",e.h,e.s,e.l):e.l||e.a?lx("lab",e.l,e.a,e.b):e.r||e.g||e.b?lx("rgb",e.r,e.g,e.b):null}function $Be(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:te(n));for(;t.length&&He(t)==null;)t.pop();return t.unshift(eie(e.gradient)),`gradient(${t.join(",")})`}function b2(e){return se(e)?"("+r_(e)+")":e}function tie(e){return nie(se(e)?e:{datum:e})}function nie(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):q("Invalid field reference: "+te(e));return e.signal||(r=le(r)?xa(r).map(te).join("]["):nie(r)),t+"["+r+"]"}function ABe(e,t){const n=eie(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+b2(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function TBe(e){let t="";return e.forEach(n=>{const r=r_(n);t+=n.test?`(${n.test})?${r}:`:r}),He(t)===":"&&(t+="null"),t}function rie(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=_Be(e,t,n,r,i.config);for(const a in e)s[a]=MBe(e[a],t,o,i);return o}function MBe(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=FBe(PBe(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function PBe(e){return G(e)?TBe(e):r_(e)}function FBe(e,t,n,r){const i=ma(e,t);return i.$fields.forEach(o=>r[o]=1),De(n,i.$params),i.$expr}const RBe="outer",DBe=["value","update","init","react","bind"];function Ij(e,t){q(e+' for "outer" push: '+te(t))}function iie(e,t){const n=e.name;if(e.push===RBe)t.signals[n]||Ij("No prior signal definition",n),DBe.forEach(r=>{e[r]!==void 0&&Ij("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function v4(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function i_(e,t,n,r){return new v4(e,t,n,r)}function OS(e,t){return i_("operator",e,t)}function ye(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function g1(e,t){return t?{$field:e,$name:t}:{$field:e}}const b4=g1("key");function Lj(e,t){return{$compare:e,$order:t}}function OBe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const NBe="ascending",IBe="descending";function LBe(e){return se(e)?(e.order===IBe?"-":"+")+o_(e.op,e.field):""}function o_(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const oO="scope",x4="view";function xn(e){return e&&e.signal}function zBe(e){return e&&e.expr}function x2(e){if(xn(e))return!0;if(se(e)){for(const t in e)if(x2(e[t]))return!0}return!1}function Qo(e,t){return e??t}function jf(e){return e&&e.signal||e}const zj="timer";function m1(e,t){return(e.merge?jBe:e.stream?UBe:e.type?VBe:q("Invalid stream specification: "+te(e)))(e,t)}function BBe(e){return e===oO?x4:e||x4}function jBe(e,t){const n=e.merge.map(i=>m1(i,t)),r=sO({merge:n},e,t);return t.addStream(r).id}function UBe(e,t){const n=m1(e.stream,t),r=sO({stream:n},e,t);return t.addStream(r).id}function VBe(e,t){let n;e.type===zj?(n=t.event(zj,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(BBe(e.source),e.type);const r=sO({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function sO(e,t,n){let r=t.between;return r&&(r.length!==2&&q('Stream "between" parameter must have 2 entries: '+te(t)),e.between=[m1(r[0],n),m1(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(WBe(t.marktype,t.markname,t.markrole)),t.source===oO&&r.push("inScope(event.item)"),r.length&&(e.filter=ma("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function WBe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const HBe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function qBe(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||q("Signal update missing events specification."),le(o)&&(o=Cc(o,t.isSubscope()?oO:x4)),o=ae(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[YBe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&q("Signal encode and update are mutually exclusive."),s="encode(item(),"+te(r)+")"),i.update=le(s)?ma(s,t):s.expr!=null?ma(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:HBe,$params:{$value:t.signalRef(s.signal)}}:q("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(De(GBe(l,t),i)))}function GBe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):m1(e,t)}}function YBe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function XBe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?q("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=ma(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>qBe(i,t,n.id))}const bt=e=>(t,n,r)=>i_(e,n,t||void 0,r),oie=bt("aggregate"),KBe=bt("axisticks"),sie=bt("bound"),ks=bt("collect"),Bj=bt("compare"),QBe=bt("datajoin"),aie=bt("encode"),ZBe=bt("expression"),JBe=bt("facet"),eje=bt("field"),tje=bt("key"),nje=bt("legendentries"),rje=bt("load"),ije=bt("mark"),oje=bt("multiextent"),sje=bt("multivalues"),aje=bt("overlap"),lje=bt("params"),lie=bt("prefacet"),uje=bt("projection"),cje=bt("proxy"),fje=bt("relay"),uie=bt("render"),dje=bt("scale"),Rd=bt("sieve"),hje=bt("sortitems"),cie=bt("viewlayout"),pje=bt("values");let gje=0;const fie={min:"min",max:"max",count:"sum"};function mje(e,t){const n=e.type||"linear";QJ(n)||q("Unrecognized scale type: "+te(n)),t.addScale(e.name,{type:n,domain:void 0})}function yje(e,t){const n=t.getScale(e.name).params;let r;n.domain=die(e.domain,e,t),e.range!=null&&(n.range=pie(e,t,n)),e.interpolate!=null&&$je(e.interpolate,n),e.nice!=null&&(n.nice=Eje(e.nice,t)),e.bins!=null&&(n.bins=_je(e.bins,t));for(r in e)ce(n,r)||r==="name"||(n[r]=So(e[r],t))}function So(e,t){return se(e)?e.signal?t.signalRef(e.signal):q("Unsupported object: "+te(e)):e}function w2(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>So(n,t))}function s_(e){q("Can not find data set: "+te(e))}function die(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&q("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(G(e)?vje:e.fields?xje:bje)(e,t,n)}function vje(e,t,n){return e.map(r=>So(r,n))}function bje(e,t,n){const r=n.getData(e.data);return r||s_(e.data),Zp(t.type)?r.valuesRef(n,e.field,hie(e.sort,!1)):eee(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function xje(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=le(s)?{data:r,field:s}:G(s)||s.signal?wje(s,n):s,o.push(s),o),[]);return(Zp(t.type)?Sje:eee(t.type)?kje:Cje)(e,n,i)}function wje(e,t){const n="_:vega:_"+gje++,r=ks({});if(G(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+te(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Rd({})]),{data:n,field:"data"}}function Sje(e,t,n){const r=hie(e.sort,!0);let i,o;const s=n.map(u=>{const c=t.getData(u.data);return c||s_(u.data),c.countsRef(t,u.field,r)}),a={groupby:b4,pulse:s};r&&(i=r.op||"count",o=r.field?o_(i,r.field):"count",a.ops=[fie[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(oie(a));const l=t.add(ks({pulse:ye(i)}));return o=t.add(pje({field:b4,sort:t.sortRef(r),pulse:ye(l)})),ye(o)}function hie(e,t){return e&&(!e.field&&!e.op?se(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?q("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!fie[e.op]&&q("Multiple domain scales can not be sorted using "+e.op)),e}function kje(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||s_(i.data),o.domainRef(t,i.field)});return ye(t.add(sje({values:r})))}function Cje(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||s_(i.data),o.extentRef(t,i.field)});return ye(t.add(oje({extents:r})))}function _je(e,t){return e.signal||G(e)?w2(e,t):t.objectProperty(e)}function Eje(e,t){return e.signal?t.signalRef(e.signal):se(e)?{interval:So(e.interval),step:So(e.step)}:So(e)}function $je(e,t){t.interpolate=So(e.type||e),e.gamma!=null&&(t.interpolateGamma=So(e.gamma))}function pie(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(le(i)){if(r&&ce(r,i))return e=De({},e,{range:r[i]}),pie(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Zp(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:q("Unrecognized scale range value: "+te(i))}else if(i.scheme){n.scheme=G(i.scheme)?w2(i.scheme,t):So(i.scheme,t),i.extent&&(n.schemeExtent=w2(i.extent,t)),i.count&&(n.schemeCount=So(i.count,t));return}else if(i.step){n.rangeStep=So(i.step,t);return}else{if(Zp(e.type)&&!G(i))return die(i,e,t);G(i)||q("Unsupported range type: "+te(i))}return i.map(o=>(G(o)?w2:So)(o,t))}function Aje(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=w4(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=w4(n[i],i,t));t.addProjection(e.name,r)}function w4(e,t,n){return G(e)?e.map(r=>w4(r,t,n)):se(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:q("Unsupported parameter object: "+te(e)):e}const Cs="top",Xg="left",Kg="right",oc="bottom",gie="center",Tje="vertical",Mje="start",Pje="middle",Fje="end",S4="index",aO="label",Rje="offset",ag="perc",Dje="perc2",_o="value",Av="guide-label",lO="guide-title",Oje="group-title",Nje="group-subtitle",jj="symbol",S2="gradient",k4="discrete",C4="size",Ije="shape",Lje="fill",zje="stroke",Bje="strokeWidth",jje="strokeDash",Uje="opacity",uO=[C4,Ije,Lje,zje,Bje,jje,Uje],Tv={name:1,style:1,interactive:1},Ge={value:0},Eo={value:1},a_="group",mie="rect",cO="rule",Vje="symbol",Dd="text";function y1(e){return e.type=a_,e.interactive=e.interactive||!1,e}function _i(e,t){const n=(r,i)=>Qo(e[r],Qo(t[r],i));return n.isVertical=r=>Tje===Qo(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Qo(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Qo(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Qo(e.columns,Qo(t.columns,+n.isVertical(!0))),n}function yie(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Wje(e,t,n){const r=t.config.style[n];return r&&r[e]}function l_(e,t,n){return`item.anchor === '${Mje}' ? ${e} : item.anchor === '${Fje}' ? ${t} : ${n}`}const fO=l_(te(Xg),te(Kg),te(gie));function Hje(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},se(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function vie(e,t){return t?e?se(e)?Object.assign({},e,{offset:vie(e.offset,t)}):{value:e,offset:t}:t:e}function Ki(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Yg(e.encode,t,Tv)):e.interactive=!1,e}function qje(e,t,n,r){const i=_i(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,c,f,d;o?(u=[0,1],c=[0,0],f=s,d=a):(u=[0,0],c=[1,0],f=a,d=s);const h={enter:l={opacity:Ge,x:Ge,y:Ge,width:Pn(f),height:Pn(d)},update:De({},l,{opacity:Eo,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Ge}};return er(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Ki({type:mie,role:bBe,encode:h},r)}function Gje(e,t,n,r,i){const o=_i(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,f,d,h="";s?(u="y",f="y2",c="x",d="width",h="1-"):(u="x",f="x2",c="y",d="height");const p={opacity:Ge,fill:{scale:t,field:_o}};p[u]={signal:h+"datum."+ag,mult:l},p[c]=Ge,p[f]={signal:h+"datum."+Dje,mult:l},p[d]=Pn(a);const g={enter:p,update:De({},p,{opacity:Eo}),exit:{opacity:Ge}};return er(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Ki({type:mie,role:yBe,key:_o,from:i,encode:g},r)}const Yje=`datum.${ag}<=0?"${Xg}":datum.${ag}>=1?"${Kg}":"${gie}"`,Xje=`datum.${ag}<=0?"${oc}":datum.${ag}>=1?"${Cs}":"${Pje}"`;function Uj(e,t,n,r){const i=_i(e,t),o=i.isVertical(),s=Pn(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,f,d,h="";const p={enter:u={opacity:Ge},update:c={opacity:Eo,text:{field:aO}},exit:{opacity:Ge}};return er(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Qo(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:Xje},f="y",d="x",h="1-"):(u.align=c.align={signal:Yje},u.baseline={value:"top"},f="x",d="y"),u[f]=c[f]={signal:h+"datum."+ag,mult:a},u[d]=c[d]=s,s.offset=Qo(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+S4}:void 0,Ki({type:Dd,role:Jre,style:Av,key:_o,from:r,encode:p,overlap:l},n)}function Kje(e,t,n,r,i){const o=_i(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${Rje} : datum.${C4}`,h=u?Pn(u):{field:C4},p=`datum.${S4}`,g=`max(1, ${i})`;let m,y,v,b,x;h.mult=.5,m={enter:y={opacity:Ge,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Eo,x:y.x,y:y.y},exit:{opacity:Ge}};let w=null,k=null;e.fill||(w=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),er(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",k),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),uO.forEach($=>{e[$]&&(v[$]=y[$]={scale:e[$],field:_o})});const S=Ki({type:Vje,role:xBe,key:_o,from:f,clip:u?!0:void 0,encode:m},n.symbols),C=Pn(c);C.offset=o("labelOffset"),m={enter:y={opacity:Ge,x:{signal:d,offset:C},y:h},update:v={opacity:Eo,text:{field:aO},x:y.x,y:y.y},exit:{opacity:Ge}},er(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const _=Ki({type:Dd,role:Jre,style:Av,key:_o,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:Ge,height:u?Pn(u):Ge,opacity:Ge},exit:{opacity:Ge},update:v={opacity:Eo,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,x={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,x={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:S4}},y1({role:iO,from:r,encode:Yg(m,s,Tv),marks:[S,_],name:l,interactive:a,sort:x})}function Qje(e,t){const n=_i(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const dO='item.orient === "left"',hO='item.orient === "right"',u_=`(${dO} || ${hO})`,Zje=`datum.vgrad && ${u_}`,Jje=l_('"top"','"bottom"','"middle"'),eUe=l_('"right"','"left"','"center"'),tUe=`datum.vgrad && ${hO} ? (${eUe}) : (${u_} && !(datum.vgrad && ${dO})) ? "left" : ${fO}`,nUe=`item._anchor || (${u_} ? "middle" : "start")`,rUe=`${Zje} ? (${dO} ? -90 : 90) : 0`,iUe=`${u_} ? (datum.vgrad ? (${hO} ? "bottom" : "top") : ${Jje}) : "top"`;function oUe(e,t,n,r){const i=_i(e,t),o={enter:{opacity:Ge},update:{opacity:Eo,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ge}};return er(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:nUe},angle:{signal:rUe},align:{signal:tUe},baseline:{signal:iUe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Ki({type:Dd,role:wBe,style:lO,from:r,encode:o},n)}function sUe(e,t){let n;return se(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Vj(e.path)+")":e.sphere&&(n="geoShape("+Vj(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Vj(e){return se(e)&&e.signal?e.signal:te(e)}function bie(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===a_?iO:t||nO}function aUe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||bie(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function lUe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function pO(e,t){const n=JQ(e.type);n||q("Unrecognized transform type: "+te(e.type));const r=i_(n.type.toLowerCase(),null,xie(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function xie(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=uUe(s,t,n)}return r}function uUe(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return cUe(e,t,n);if(i===void 0){e.required&&q("Missing required "+te(t.type)+" parameter: "+te(e.name));return}else{if(r==="param")return fUe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!xn(i)?i.map(o=>Wj(e,o,n)):Wj(e,i,n)}function Wj(e,t,n){const r=e.type;if(xn(t))return qj(r)?q("Expression references can not be signals."):NA(r)?n.fieldRef(t):Gj(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||NA(r);return i&&dUe(t)?n.exprRef(t.expr,t.as):i&&hUe(t)?g1(t.field,t.as):qj(r)?ma(t,n):pUe(r)?ye(n.getData(t).values):NA(r)?g1(t):Gj(r)?n.compareRef(t):t}}function cUe(e,t,n){return le(t.from)||q('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function fUe(e,t,n){const r=t[e.name];return e.array?(G(r)||q("Expected an array of sub-parameters. Instead: "+te(r)),r.map(i=>Hj(e,i,n))):Hj(e,r,n)}function Hj(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||q("Unsupported parameter: "+te(t));const o=De(xie(i,t,n),i.key);return ye(n.add(lje(o)))}const dUe=e=>e&&e.expr,hUe=e=>e&&e.field,pUe=e=>e==="data",qj=e=>e==="expr",NA=e=>e==="field",Gj=e=>e==="compare";function gUe(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||q("Only group marks can be faceted."),r.field!=null?s=a=k2(r,n):(e.data?a=ye(n.getData(e.data).aggregate):(o=pO(De({type:"aggregate",groupby:ae(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=k2(r,n),s=a=ye(n.add(o))),i=n.keyRef(r.groupby,!0))):s=ye(n.add(ks(null,[{}]))),s||(s=k2(e,n)),{key:i,pulse:s,parent:a}}function k2(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ye(t.getData(e.data).output)}function ud(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}ud.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=ye(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new ud(e,o,i,r,s)};function wie(e){return le(e)?e:null}function Yj(e,t,n){const r=o_(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function jm(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=LBe(o);let u=wie(i),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const d=o?{field:b4,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:ye(t.output)};l&&(d.sort=e.sortRef(o)),f=e.add(i_(r,void 0,d)),s&&(t.index[i]=f),c=ye(f),u!=null&&(a[u]=c)}return c}ud.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=wie(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&Yj(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:ye(r.output)},n&&n.field&&Yj(e,l,n),a=e.add(oie(l)),s=e.add(ks({pulse:ye(a)})),s={agg:a,ref:ye(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return ye(this.values)},extentRef(e,t){return jm(e,this,"extent","extent",t,!1)},domainRef(e,t){return jm(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return jm(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return jm(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return jm(e,this,"indata","tupleindex",t,!0,!0)}};function mUe(e,t,n){const r=e.from.facet,i=r.name,o=k2(r,t);let s;r.name||q("Facet must have a name: "+te(r)),r.data||q("Facet must reference a data set: "+te(r)),r.field?s=t.add(lie({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(JBe({key:t.keyRef(r.groupby),group:ye(t.proxy(n.parent)),pulse:o})):q("Facet must specify groupby or field: "+te(r));const a=t.fork(),l=a.add(ks()),u=a.add(Rd({pulse:ye(l)}));a.addData(i,new ud(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function yUe(e,t,n){const r=t.add(lie({pulse:n.pulse})),i=t.fork();i.add(Rd()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Sie(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(OS()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=ma(u,t);l.update=c.$expr,l.params=c.$params}function c_(e,t){const n=bie(e),r=e.type===a_,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===iO||n===rO,a,l,u,c,f,d,h;const p=n===nO||s||i,g=gUe(e.from,r,t);l=t.add(QBe({key:g.key||(e.key?g1(e.key):void 0),pulse:g.pulse,clean:!r}));const m=ye(l);l=u=t.add(ks({pulse:m})),l=t.add(ije({markdef:aUe(e),interactive:lUe(e.interactive,t),clip:sUe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ye(l)}));const y=ye(l);l=c=t.add(aie(rie(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const S=pO(k,t),C=S.metadata;(C.generates||C.changes)&&q("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=ye(l),t.add(l=S)}),e.sort&&(l=t.add(hje({sort:t.compareRef(e.sort),pulse:ye(l)})));const v=ye(l);(i||s)&&(s=t.add(cie({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=ye(s));const b=t.add(sie({mark:y,pulse:d||v}));h=ye(b),r&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||h,m),i?mUe(e,t,g):p?yUe(e,t,g):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(b))),o&&(h=vUe(o,h,t));const x=t.add(uie({pulse:h})),w=t.add(Rd({pulse:ye(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new ud(t,u,x,w)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&q("Marks only support modify triggers."),Sie(k,t,f)}))}function vUe(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:xn(o)?n.signalRef(o.signal):o,method:xn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=xn(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return ye(n.add(aje(s)))}function bUe(e,t){const n=t.config.legend,r=e.encode||{},i=_i(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let c=0,f,d,h;uO.forEach(b=>e[b]?(u[b]=e[b],c=c||e[b]):0),c||q("Missing valid scale for legend.");const p=xUe(e,t.scaleType(c)),g={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},m=ye(t.add(ks(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},v=ye(t.add(nje(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===S2?(h=[qje(e,c,n,r.gradient),Uj(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${jf(i.gradientLength())})/100))`)):p===k4?h=[Gje(e,c,n,r.gradient,v),Uj(e,n,r.labels,v)]:(f=Qje(e,n),h=[Kje(e,n,r,v,jf(f.columns))],d.size=kUe(e,t,h[0].marks)),h=[y1({role:vBe,from:m,encode:y,marks:h,layout:f,interactive:a})],g.title&&h.push(oUe(e,n,r.title,m)),c_(y1({role:mBe,from:m,encode:Yg(SUe(i,e,n),o,Tv),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function xUe(e,t){let n=e.type||jj;return!e.type&&wUe(e)===1&&(e.fill||e.stroke)&&(n=h6(t)?S2:gT(t)?k4:jj),n!==S2?n:gT(t)?k4:S2}function wUe(e){return uO.reduce((t,n)=>t+(e[n]?1:0),0)}function SUe(e,t,n){const r={enter:{},update:{}};return er(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function kUe(e,t,n){const r=jf(Xj("size",e,n)),i=jf(Xj("strokeWidth",e,n)),o=jf(CUe(n[1].encode,t,Av));return ma(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function Xj(e,t,n){return t[e]?`scale("${t[e]}",datum)`:yie(e,n[0].encode)}function CUe(e,t,n){return yie("fontSize",e)||Wje("fontSize",t,n)}const _Ue=`item.orient==="${Xg}"?-90:item.orient==="${Kg}"?90:0`;function EUe(e,t){e=le(e)?{text:e}:e;const n=_i(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},c=ye(t.add(ks(null,[u])));return l.push(TUe(e,n,$Ue(e),c)),e.subtitle&&l.push(MUe(e,n,r.subtitle,c)),c_(y1({role:SBe,from:c,encode:AUe(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function $Ue(e){const t=e.encode;return t&&t.title||De({name:e.name,interactive:e.interactive,style:e.style},t)}function AUe(e,t){const n={enter:{},update:{}};return er(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:fO},angle:{signal:_Ue},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Yg(n,t,Tv)}function TUe(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return er(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ki({type:Dd,role:kBe,style:Oje,from:r,encode:s},n)}function MUe(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return er(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ki({type:Dd,role:CBe,style:Nje,from:r,encode:s},n)}function PUe(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(pO(r,t))}),e.on&&e.on.forEach(r=>{Sie(r,t,e.name)}),t.addDataPipeline(e.name,FUe(e,t,n))}function FUe(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,c,f;for(e.values?xn(e.values)||x2(e.format)?(r.push(Kj(t,e)),r.push(i=zc())):r.push(i=zc({$ingest:e.values,$format:e.format})):e.url?x2(e.url)||x2(e.format)?(r.push(Kj(t,e)),r.push(i=zc())):r.push(i=zc({$request:e.url,$format:e.format})):e.source&&(i=a=ae(e.source).map(d=>ye(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!i&&!f.source&&r.push(i=zc()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(u=a.length-1,r[0]=fje({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,zc())),i||r.push(zc()),r.push(Rd({})),r}function zc(e){const t=ks({},e);return t.metadata={source:!0},t}function Kj(e,t){return rje({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const kie=e=>e===oc||e===Cs,f_=(e,t,n)=>xn(e)?NUe(e.signal,t,n):e===Xg||e===Cs?t:n,Fn=(e,t,n)=>xn(e)?DUe(e.signal,t,n):kie(e)?t:n,ds=(e,t,n)=>xn(e)?OUe(e.signal,t,n):kie(e)?n:t,Cie=(e,t,n)=>xn(e)?IUe(e.signal,t,n):e===Cs?{value:t}:{value:n},RUe=(e,t,n)=>xn(e)?LUe(e.signal,t,n):e===Kg?{value:t}:{value:n},DUe=(e,t,n)=>_ie(`${e} === '${Cs}' || ${e} === '${oc}'`,t,n),OUe=(e,t,n)=>_ie(`${e} !== '${Cs}' && ${e} !== '${oc}'`,t,n),NUe=(e,t,n)=>gO(`${e} === '${Xg}' || ${e} === '${Cs}'`,t,n),IUe=(e,t,n)=>gO(`${e} === '${Cs}'`,t,n),LUe=(e,t,n)=>gO(`${e} === '${Kg}'`,t,n),_ie=(e,t,n)=>(t=t!=null?Pn(t):t,n=n!=null?Pn(n):n,Qj(t)&&Qj(n)?(t=t?t.signal||te(t.value):null,n=n?n.signal||te(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[De({test:e},t)].concat(n||[])),Qj=e=>e==null||Object.keys(e).length===1,gO=(e,t,n)=>({signal:`${e} ? (${Wh(t)}) : (${Wh(n)})`}),zUe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Xg}' ? (${Wh(r)}) : `:"")+(n!=null?`${e} === '${oc}' ? (${Wh(n)}) : `:"")+(i!=null?`${e} === '${Kg}' ? (${Wh(i)}) : `:"")+(t!=null?`${e} === '${Cs}' ? (${Wh(t)}) : `:"")+"(null)"}),Wh=e=>xn(e)?e.signal:e==null?null:te(e),BUe=(e,t)=>t===0?0:xn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},sp=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function ah(e,t,n,r){let i;if(t&&ce(t,e))return t[e];if(ce(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[lO][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Av][i]}return null}function Zj(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function jUe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(xn(s)){const f=Zj([n.axisX,n.axisY]),d=Zj([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of f)a[u]=Fn(s,ah(u,n.axisX,i,r),ah(u,n.axisY,i,r));l={};for(u of d)l[u]=zUe(s.signal,ah(u,n.axisTop,i,r),ah(u,n.axisBottom,i,r),ah(u,n.axisLeft,i,r),ah(u,n.axisRight,i,r))}else a=s===Cs||s===oc?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?De({},i,a,l,o):i}function UUe(e,t,n,r){const i=_i(e,t),o=e.orient;let s,a;const l={enter:s={opacity:Ge},update:a={opacity:Eo},exit:{opacity:Ge}};er(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=Jj(e,0),c=Jj(e,1);return s.x=a.x=Fn(o,u,Ge),s.x2=a.x2=Fn(o,c),s.y=a.y=ds(o,u,Ge),s.y2=a.y2=ds(o,c),Ki({type:cO,role:fBe,from:r,encode:l},n)}function Jj(e,t){return{scale:e.scale,range:t}}function VUe(e,t,n,r,i){const o=_i(e,t),s=e.orient,a=e.gridScale,l=f_(s,1,-1),u=WUe(e.offset,l);let c,f,d;const h={enter:c={opacity:Ge},update:d={opacity:Eo},exit:f={opacity:Ge}};er(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:_o,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},g=Fn(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:De(g,{mult:l,offset:u});return c.x=d.x=Fn(s,p,m),c.y=d.y=ds(s,p,m),c.x2=d.x2=ds(s,y),c.y2=d.y2=Fn(s,y),f.x=Fn(s,p),f.y=ds(s,p),Ki({type:cO,role:dBe,key:_o,from:r,encode:h},n)}function WUe(e,t){if(t!==1)if(!se(e))e=xn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=De({},e);for(;n.mult!=null;)if(se(n.mult))n=n.mult=De({},n.mult);else return n.mult=xn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function HUe(e,t,n,r,i,o){const s=_i(e,t),a=e.orient,l=f_(a,-1,1);let u,c,f;const d={enter:u={opacity:Ge},update:f={opacity:Eo},exit:c={opacity:Ge}};er(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=Pn(i);h.mult=l;const p={scale:e.scale,field:_o,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=u.y=Fn(a,Ge,p),f.y2=u.y2=Fn(a,h),c.x=Fn(a,p),f.x=u.x=ds(a,Ge,p),f.x2=u.x2=ds(a,h),c.y=ds(a,p),Ki({type:cO,role:pBe,key:_o,from:r,encode:d},n)}function IA(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function qUe(e,t,n,r,i,o){const s=_i(e,t),a=e.orient,l=e.scale,u=f_(a,-1,1),c=jf(s("labelFlush")),f=jf(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let p=c===0||!!c,g;const m=Pn(i);m.mult=u,m.offset=Pn(s("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:_o,band:.5,offset:vie(o.offset,s("labelOffset"))},v=Fn(a,p?IA(l,c,'"left"','"right"','"center"'):{value:"center"},RUe(a,"left","right")),b=Fn(a,Cie(a,"bottom","top"),p?IA(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=IA(l,c,`-(${f})`,f,0);p=p&&f;const w={opacity:Ge,x:Fn(a,y,m),y:ds(a,y,m)},k={enter:w,update:g={opacity:Eo,text:{field:aO},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:Ge,x:w.x,y:w.y}};er(k,{dx:!d&&p?Fn(a,x):null,dy:!h&&p?ds(a,x):null}),er(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const S=s("labelBound");let C=s("labelOverlap");return C=C||S?{separation:s("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:l,orient:a,tolerance:S}:null}:void 0,g.align!==v&&(g.align=sp(g.align,v)),g.baseline!==b&&(g.baseline=sp(g.baseline,b)),Ki({type:Dd,role:hBe,style:Av,key:_o,from:r,encode:k,overlap:C},n)}function GUe(e,t,n,r){const i=_i(e,t),o=e.orient,s=f_(o,-1,1);let a,l;const u={enter:a={opacity:Ge,anchor:Pn(i("titleAnchor",null)),align:{signal:fO}},update:l=De({},a,{opacity:Eo,text:Pn(e.title)}),exit:{opacity:Ge}},c={signal:`lerp(range("${e.scale}"), ${l_(0,1,.5)})`};return l.x=Fn(o,c),l.y=ds(o,c),a.angle=Fn(o,Ge,BUe(s,90)),a.baseline=Fn(o,Cie(o,oc,Cs),{value:oc}),l.angle=a.angle,l.baseline=a.baseline,er(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),YUe(i,o,u,n),u.update.align=sp(u.update.align,a.align),u.update.angle=sp(u.update.angle,a.angle),u.update.baseline=sp(u.update.baseline,a.baseline),Ki({type:Dd,role:gBe,style:lO,from:r,encode:u},n)}function YUe(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=sp(Pn(a),n.update[l]),!1):!ph(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?Pn(s):Fn(t,Pn(s),Pn(o))}function XUe(e,t){const n=jUe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=_i(e,n),u=Hje(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=ye(t.add(ks({},[c]))),d=ye(t.add(KBe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(VUe(e,n,r.grid,d,u)),c.ticks&&(p=l("tickSize"),h.push(HUe(e,n,r.ticks,d,p,u))),c.labels&&(p=c.ticks?p:0,h.push(qUe(e,n,r.labels,d,p,u))),c.domain&&h.push(UUe(e,n,r.domain,f)),c.title&&h.push(GUe(e,n,r.title,f)),c_(y1({role:cBe,from:f,encode:Yg(KUe(l,e),i,Tv),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function KUe(e,t){const n={enter:{},update:{}};return er(n,{orient:e("orient"),offset:e("offset")||0,position:Qo(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Eie(e,t,n){const r=ae(e.signals),i=ae(e.scales);return n||r.forEach(o=>iie(o,t)),ae(e.projections).forEach(o=>Aje(o,t)),i.forEach(o=>mje(o,t)),ae(e.data).forEach(o=>PUe(o,t)),i.forEach(o=>yje(o,t)),(n||r).forEach(o=>XBe(o,t)),ae(e.axes).forEach(o=>XUe(o,t)),ae(e.marks).forEach(o=>c_(o,t)),ae(e.legends).forEach(o=>bUe(o,t)),e.title&&EUe(e.title,t),t.parseLambdas(),t}const QUe=e=>Yg({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function ZUe(e,t){const n=t.config,r=ye(t.root=t.add(OS())),i=JUe(e,n);i.forEach(u=>iie(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(ks()),s=t.add(aie(rie(QUe(e.encode),a_,rO,e.style,t,{pulse:ye(o)}))),a=t.add(cie({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:ye(s)}));t.operators.pop(),t.pushState(ye(s),ye(a),null),Eie(e,t,i),t.operators.push(a);let l=t.add(sie({mark:r,pulse:ye(a)}));return l=t.add(uie({pulse:ye(l)})),l=t.add(Rd({pulse:ye(l)})),t.addData("root",new ud(t,o,o,l)),t}function Um(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function JUe(e,t){const n=s=>Qo(e[s],t[s]),r=[Um("background",n("background")),Um("autosize",aBe(n("autosize"))),Um("padding",uBe(n("padding"))),Um("width",n("width")||0),Um("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return ae(e.signals).forEach(s=>{ce(i,s.name)?s=De(i[s.name],s):r.push(s),o[s.name]=s}),ae(t.signals).forEach(s=>{!ce(o,s.name)&&!ce(i,s.name)&&r.push(s)}),r}function $ie(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function eU(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}$ie.prototype=eU.prototype={parse(e){return Eie(e,this)},fork(){return new eU(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof v4?ye(e):e;return this.add(cje({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(ye(this.add(Rd({pulse:e})))),this._parent.push(t),this._lookup.push(n?ye(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return He(this._parent)},encode(){return He(this._encode)},lookup(){return He(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(le(e))return g1(e,t);e.signal||q("Unsupported field reference: "+te(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=ye(this.add(eje(i)))}return r},compareRef(e){let t=!1;const n=o=>xn(o)?(t=!0,this.signalRef(o.signal)):zBe(o)?(t=!0,this.exprRef(o.expr)):o,r=ae(e.field).map(n),i=ae(e.order).map(n);return t?ye(this.add(Bj({fields:r,orders:i}))):Lj(r,i)},keyRef(e,t){let n=!1;const r=o=>xn(o)?(n=!0,ye(i[o.signal])):o,i=this.signals;return e=ae(e).map(r),n?ye(this.add(tje({fields:e,flat:t}))):OBe(e,t)},sortRef(e){if(!e)return e;const t=o_(e.op,e.field),n=e.order||NBe;return n.signal?ye(this.add(Bj({fields:t,orders:this.signalRef(n.signal)}))):Lj(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return ce(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&q("Duplicate signal name: "+te(e));const n=t instanceof v4?t:this.add(OS(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||q("Unrecognized signal name: "+te(e)),this.signals[e]},signalRef(e){return this.signals[e]?ye(this.signals[e]):(ce(this.lambdas,e)||(this.lambdas[e]=this.add(OS(null))),ye(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=ma(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!se(e)?e:this.signalRef(e.signal||mO(e))},exprRef(e,t){const n={expr:ma(e,this)};return t&&(n.expr.$name=t),ye(this.add(ZBe(n)))},addBinding(e,t){this.bindings||q("Nested signals do not support binding: "+te(e)),this.bindings.push(De({signal:e},t))},addScaleProj(e,t){ce(this.scales,e)&&q("Duplicate scale or projection name: "+te(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,dje(t))},addProjection(e,t){this.addScaleProj(e,uje(t))},getScale(e){return this.scales[e]||q("Unrecognized scale name: "+te(e)),this.scales[e]},scaleRef(e){return ye(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ce(this.data,e)&&q("Duplicate data set name: "+te(e)),this.data[e]=t},getData(e){return this.data[e]||q("Undefined data set name: "+te(e)),this.data[e]},addDataPipeline(e,t){return ce(this.data,e)&&q("Duplicate data set name: "+te(e)),this.addData(e,ud.fromEntries(this,t))}};function mO(e){return(G(e)?eVe:tVe)(e)}function eVe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(se(i)?i.signal||mO(i):te(i))}return n+"]"}function tVe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+te(r)+":"+(se(i)?i.signal||mO(i):te(i));return t+"}"}function nVe(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function rVe(e,t,n){return se(e)||q("Input Vega specification must be an object."),t=Og(nVe(),t,e.config),ZUe(e,new $ie(t,n)).toRuntime()}var iVe="5.30.0";De(Gp,JTe,M6e,lDe,GOe,j8e,pNe,G9e,mNe,BNe,KNe,rIe);const oVe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:dn,CanvasHandler:bv,CanvasRenderer:Xw,DATE:bi,DAY:mr,DAYOFYEAR:pa,Dataflow:np,Debug:SK,Error:Zk,EventStream:dC,Gradient:gee,GroupItem:OC,HOURS:Gi,Handler:L6,HybridHandler:ste,HybridRenderer:ET,Info:wK,Item:DC,MILLISECONDS:ms,MINUTES:Yi,MONTH:xr,Marks:Xi,MultiPulse:ZF,None:xK,Operator:wt,Parameters:fC,Pulse:ju,QUARTER:vi,RenderType:Su,Renderer:vv,ResourceLoader:See,SECONDS:Po,SVGHandler:Gee,SVGRenderer:W6,SVGStringRenderer:ote,Scenegraph:zee,TIME_UNITS:UF,Transform:V,View:Hre,WEEK:vn,Warn:AF,YEAR:Qn,accessor:Ci,accessorFields:br,accessorName:Qt,array:ae,ascending:tC,bandwidthNRD:nR,bin:nZ,bootstrapCI:rZ,boundClip:mte,boundContext:pv,boundItem:wT,boundMark:Oee,boundStroke:Ml,changeset:Td,clampRange:RK,codegenExpression:vre,compare:RF,constant:_r,cumulativeLogNormal:lR,cumulativeNormal:pC,cumulativeUniform:dR,dayofyear:uQ,debounce:DF,defaultLocale:GF,definition:JQ,densityLogNormal:aR,densityNormal:rR,densityUniform:fR,domChild:mn,domClear:mo,domCreate:xu,domFind:I6,dotbin:iZ,error:q,expressionFunction:on,extend:De,extent:fa,extentIndex:DK,falsy:ql,fastmap:Ig,field:To,flush:OK,font:BC,fontFamily:yv,fontSize:ka,format:e2,formatLocale:$w,formats:KF,hasOwnProperty:ce,id:Z1,identity:Cr,inferType:UQ,inferTypes:VQ,ingest:st,inherits:ne,inrange:zh,interpolate:p6,interpolateColors:FC,interpolateRange:tee,intersect:dte,intersectBoxLine:Bh,intersectPath:S6,intersectPoint:k6,intersectRule:Cee,isArray:G,isBoolean:vc,isDate:zu,isFunction:Oe,isIterable:NK,isNumber:Qe,isObject:se,isRegExp:IK,isString:le,isTuple:uC,key:OF,lerp:LK,lineHeight:nc,loader:aC,locale:BQ,logger:TF,lruCache:zK,markup:V6,merge:BK,mergeConfig:Og,multiLineOffset:D6,one:Dg,pad:jK,panLinear:$K,panLog:AK,panPow:TK,panSymlog:MK,parse:rVe,parseExpression:VD,parseSelector:Cc,path:bC,pathCurves:b6,pathEqual:yte,pathParse:Jp,pathRectangle:vee,pathRender:r1,pathSymbols:yee,pathTrail:bee,peek:He,point:UC,projection:uD,quantileLogNormal:uR,quantileNormal:gC,quantileUniform:hR,quantiles:eR,quantizeInterpolator:nee,quarter:PK,quartiles:tR,get random(){return Fo},randomInteger:rTe,randomKDE:oR,randomLCG:nTe,randomLogNormal:sZ,randomMixture:aZ,randomNormal:iR,randomUniform:lZ,read:qQ,regressionConstant:pR,regressionExp:cZ,regressionLinear:gR,regressionLoess:hZ,regressionLog:uZ,regressionPoly:dZ,regressionPow:fZ,regressionQuad:mR,renderModule:VC,repeat:u0,resetDefaultLocale:J5e,resetSVGClipId:wee,resetSVGDefIds:YRe,responseType:HQ,runtimeContext:Fre,sampleCurve:yC,sampleLogNormal:sR,sampleNormal:hC,sampleUniform:cR,scale:Je,sceneEqual:H6,sceneFromJSON:Iee,scenePickVisit:jw,sceneToJSON:Nee,sceneVisit:ys,sceneZOrder:C6,scheme:g6,serializeXML:tte,setHybridRendererOptions:WRe,setRandom:eTe,span:J1,splitAccessPath:xa,stringValue:te,textMetrics:Ui,timeBin:EQ,timeFloor:mQ,timeFormatLocale:Qy,timeInterval:jg,timeOffset:bQ,timeSequence:SQ,timeUnitSpecifier:lQ,timeUnits:VF,toBoolean:NF,toDate:IF,toNumber:yr,toSet:gs,toString:LF,transform:eZ,transforms:Gp,truncate:UK,truthy:Mo,tupleid:ve,typeParsers:rT,utcFloor:yQ,utcInterval:Ug,utcOffset:xQ,utcSequence:kQ,utcdayofyear:dQ,utcquarter:FK,utcweek:hQ,version:iVe,visitArray:Jl,week:cQ,writeConfig:Ng,zero:lu,zoomLinear:MF,zoomLog:PF,zoomPow:ww,zoomSymlog:FF},Symbol.toStringTag,{value:"Module"}));function sVe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var aVe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},lVe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},uVe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const cVe=Array.prototype.slice,Bc=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,cVe.call(t,1))},fVe=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var dVe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:fVe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Bc("join",arguments)},indexof:function(){return Bc("indexOf",arguments)},lastindexof:function(){return Bc("lastIndexOf",arguments)},slice:function(){return Bc("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Bc("substring",arguments,String)},split:function(){return Bc("split",arguments,String)},replace:function(){return Bc("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const hVe=["view","item","group","xy","x","y"],_4=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&_4.add(setImmediate);const pVe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:aVe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),_4.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||dVe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>lVe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>uVe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,_4.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function Vm(e,t,n,r,i,o){const s=a=>pVe[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,hVe.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var gVe={operator(e,t){const n=t.ast,r=e.functions;return i=>Vm(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>Vm(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>Vm(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return Vm(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,c;for(const f in r)c=Vm(r[f].ast,i,a,l,void 0,s),s[f]!==c&&(s[f]=c,u=1);return n!=="rule"&&sVe(s,r,o),u}}};const mVe="vega-lite",yVe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',vVe="5.21.0",bVe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],xVe="https://vega.github.io/vega-lite/",wVe="Vega-Lite is a concise high-level language for interactive visualization.",SVe=["vega","chart","visualization"],kVe="build/vega-lite.js",CVe="build/vega-lite.min.js",_Ve="build/vega-lite.min.js",EVe="build/src/index",$Ve="build/src/index.d.ts",AVe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},TVe=["bin","build","src","vega-lite*","tsconfig.json"],MVe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},PVe={type:"git",url:"https://github.com/vega/vega-lite.git"},FVe="BSD-3-Clause",RVe={url:"https://github.com/vega/vega-lite/issues"},DVe={"@babel/core":"^7.24.9","@babel/preset-env":"^7.25.0","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.6.0",rollup:"^4.19.1","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.3","ts-jest":"^29.2.3","ts-json-schema-generator":"^2.3.0",typescript:"~5.5.4","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.26.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},OVe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},NVe={vega:"^5.24.0"},IVe={node:">=18"},LVe="yarn@1.22.19",zVe={name:mVe,author:yVe,version:vVe,collaborators:bVe,homepage:xVe,description:wVe,keywords:SVe,main:kVe,unpkg:CVe,jsdelivr:_Ve,module:EVe,types:$Ve,bin:AVe,files:TVe,scripts:MVe,repository:PVe,license:FVe,bugs:RVe,devDependencies:DVe,dependencies:OVe,peerDependencies:NVe,engines:IVe,packageManager:LVe};function yO(e){return K(e,"or")}function vO(e){return K(e,"and")}function bO(e){return K(e,"not")}function C2(e,t){if(bO(e))C2(e.not,t);else if(vO(e))for(const n of e.and)C2(n,t);else if(yO(e))for(const n of e.or)C2(n,t);else t(e)}function ap(e,t){return bO(e)?{not:ap(e.not,t)}:vO(e)?{and:e.and.map(n=>ap(n,t))}:yO(e)?{or:e.or.map(n=>ap(n,t))}:t(e)}const Te=structuredClone;function Aie(e){throw new Error(e)}function lg(e,t){const n={};for(const r of t)ce(e,r)&&(n[r]=e[r]);return n}function pi(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>vt(e)).join(",")})`};function Be(e){if(Qe(e))return e;const t=le(e)?e:vt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function E4(e){return e===!1||e===null}function Le(e,t){return e.includes(t)}function ug(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function xO(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Tie(e,...t){for(const n of t)BVe(e,n??{});return e}function BVe(e,t){for(const n of X(t))Ng(e,n,t[n],!0)}function Js(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function jVe(e,t){const n=X(e),r=X(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Mie(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function wO(e,t){for(const n of e)if(t.has(n))return!0;return!1}function $4(e){const t=new Set;for(const n of e){const i=xa(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function SO(e,t){return e===void 0||t===void 0?!0:wO($4(e),$4(t))}function yt(e){return X(e).length===0}const X=Object.keys,Zn=Object.values,sc=Object.entries;function v1(e){return e===!0||e===!1}function Ot(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function hy(e,t){return bO(e)?`!(${hy(e.not,t)})`:vO(e)?`(${e.and.map(n=>hy(n,t)).join(") && (")})`:yO(e)?`(${e.or.map(n=>hy(n,t)).join(") || (")})`:t(e)}function NS(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&NS(e[n],t)&&delete e[n],yt(e)}function Mv(e){return e.charAt(0).toUpperCase()+e.substr(1)}function kO(e,t="datum"){const n=xa(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(te).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function Pie(e,t="datum"){return`${t}[${te(xa(e).join("."))}]`}function UVe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Do(e){return`${xa(e).map(UVe).join("\\.")}`}function cd(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Qg(e){return`${xa(e).join(".")}`}function cg(e){return e?xa(e).length:0}function nn(...e){return e.find(t=>t!==void 0)}let Fie=42;function Rie(e){const t=++Fie;return e?String(e)+t:t}function VVe(){Fie=42}function Die(e){return Oie(e)?e:`__${e}`}function Oie(e){return e.startsWith("__")}function b1(e){if(e!==void 0)return(e%360+360)%360}function d_(e){return Qe(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const tU=Object.getPrototypeOf(structuredClone({}));function Ii(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Ii(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!Ii(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==tU.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==tU.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!Ii(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function vt(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(s,1),`{${o}}`}(e)}function K(e,t){return se(e)&&ce(e,t)&&e[t]!==void 0}const dl="row",hl="column",h_="facet",Nt="x",Ln="y",_s="x2",$a="y2",_c="xOffset",Zg="yOffset",Es="radius",Fl="radius2",Io="theta",Rl="theta2",$s="latitude",As="longitude",Ts="latitude2",Oo="longitude2",wi="color",Aa="fill",Ta="stroke",Si="shape",Dl="size",Od="angle",Ol="opacity",Ec="fillOpacity",$c="strokeOpacity",Ac="strokeWidth",Tc="strokeDash",Pv="text",fg="order",Fv="detail",p_="key",fd="tooltip",g_="href",m_="url",y_="description",WVe={x:1,y:1,x2:1,y2:1},Nie={theta:1,theta2:1,radius:1,radius2:1};function Iie(e){return ce(Nie,e)}const CO={longitude:1,longitude2:1,latitude:1,latitude2:1};function Lie(e){switch(e){case $s:return"y";case Ts:return"y2";case As:return"x";case Oo:return"x2"}}function zie(e){return ce(CO,e)}const HVe=X(CO),_O={...WVe,...Nie,...CO,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function lp(e){return e===wi||e===Aa||e===Ta}const Bie={row:1,column:1,facet:1},ko=X(Bie),EO={..._O,...Bie},qVe=X(EO),{order:Xrt,detail:Krt,tooltip:Qrt,...GVe}=EO,{row:Zrt,column:Jrt,facet:eit,...YVe}=GVe;function XVe(e){return ce(YVe,e)}function jie(e){return ce(EO,e)}const KVe=[_s,$a,Ts,Oo,Rl,Fl];function Uie(e){return Nd(e)!==e}function Nd(e){switch(e){case _s:return Nt;case $a:return Ln;case Ts:return $s;case Oo:return As;case Rl:return Io;case Fl:return Es}return e}function ac(e){if(Iie(e))switch(e){case Io:return"startAngle";case Rl:return"endAngle";case Es:return"outerRadius";case Fl:return"innerRadius"}return e}function Ma(e){switch(e){case Nt:return _s;case Ln:return $a;case $s:return Ts;case As:return Oo;case Io:return Rl;case Es:return Fl}}function ki(e){switch(e){case Nt:case _s:return"width";case Ln:case $a:return"height"}}function Vie(e){switch(e){case Nt:return"xOffset";case Ln:return"yOffset";case _s:return"x2Offset";case $a:return"y2Offset";case Io:return"thetaOffset";case Es:return"radiusOffset";case Rl:return"theta2Offset";case Fl:return"radius2Offset"}}function $O(e){switch(e){case Nt:return"xOffset";case Ln:return"yOffset"}}function QVe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const ZVe=X(_O),{x:tit,y:nit,x2:rit,y2:iit,xOffset:oit,yOffset:sit,latitude:ait,longitude:lit,latitude2:uit,longitude2:cit,theta:fit,theta2:dit,radius:hit,radius2:pit,...AO}=_O,JVe=X(AO),TO={x:1,y:1},Nl=X(TO);function rn(e){return ce(TO,e)}const MO={theta:1,radius:1},eWe=X(MO);function v_(e){return e==="width"?Nt:Ln}const Wie={xOffset:1,yOffset:1};function Rv(e){return ce(Wie,e)}const{text:git,tooltip:mit,href:yit,url:vit,description:bit,detail:xit,key:wit,order:Sit,...Hie}=AO,tWe=X(Hie);function nWe(e){return ce(AO,e)}function rWe(e){switch(e){case wi:case Aa:case Ta:case Dl:case Si:case Ol:case Ac:case Tc:return!0;case Ec:case $c:case Od:return!1}}const qie={...TO,...MO,...Wie,...Hie},PO=X(qie);function Pa(e){return ce(qie,e)}function iWe(e,t){return sWe(e)[t]}const Gie={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:kit,...oWe}=Gie;function sWe(e){switch(e){case wi:case Aa:case Ta:case y_:case Fv:case p_:case fd:case g_:case fg:case Ol:case Ec:case $c:case Ac:case h_:case dl:case hl:return Gie;case Nt:case Ln:case _c:case Zg:case $s:case As:return oWe;case _s:case $a:case Ts:case Oo:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Dl:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Tc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Si:return{point:"always",geoshape:"always"};case Pv:return{text:"always"};case Od:return{point:"always",square:"always",text:"always"};case m_:return{image:"always"};case Io:return{text:"always",arc:"always"};case Es:return{text:"always",arc:"always"};case Rl:case Fl:return{arc:"always"}}}function LA(e){switch(e){case Nt:case Ln:case Io:case Es:case _c:case Zg:case Dl:case Od:case Ac:case Ol:case Ec:case $c:case _s:case $a:case Rl:case Fl:return;case h_:case dl:case hl:case Si:case Tc:case Pv:case fd:case g_:case m_:case y_:return"discrete";case wi:case Aa:case Ta:return"flexible";case $s:case As:case Ts:case Oo:case Fv:case p_:case fg:return}}const aWe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},lWe={count:1,min:1,max:1};function El(e){return K(e,"argmin")}function Mc(e){return K(e,"argmax")}function FO(e){return le(e)&&ce(aWe,e)}const uWe=new Set(["count","valid","missing","distinct"]);function b_(e){return le(e)&&uWe.has(e)}function cWe(e){return le(e)&&Le(["min","max"],e)}const fWe=new Set(["count","sum","distinct","valid","missing"]),dWe=new Set(["mean","average","median","q1","q3","min","max"]);function Yie(e){return vc(e)&&(e=P_(e,void 0)),"bin"+X(e).map(t=>x_(e[t])?Ot(`_${t}_${sc(e[t])}`):Ot(`_${t}_${e[t]}`)).join("")}function Ct(e){return e===!0||Id(e)&&!e.binned}function jn(e){return e==="binned"||Id(e)&&e.binned===!0}function Id(e){return se(e)}function x_(e){return K(e,"param")}function nU(e){switch(e){case dl:case hl:case Dl:case wi:case Aa:case Ta:case Ac:case Ol:case Ec:case $c:case Si:return 6;case Tc:return 4;default:return 10}}function Dv(e){return K(e,"expr")}function Vn(e,{level:t}={level:0}){const n=X(e||{}),r={};for(const i of n)r[i]=t===0?Fi(e[i]):Vn(e[i],{level:t-1});return r}function Xie(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,m={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=lg(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function ru(e){return le(e)||G(e)&&le(e[0])}function me(e){return K(e,"signal")}function Ld(e){return K(e,"step")}function hWe(e){return G(e)?!1:K(e,"fields")&&!K(e,"data")}function pWe(e){return G(e)?!1:K(e,"fields")&&K(e,"data")}function il(e){return G(e)?!1:K(e,"field")&&K(e,"data")}const gWe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},mWe=X(gWe),yWe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},A4=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Kie(e){const t=G(e.condition)?e.condition.map(rU):rU(e.condition);return{...Fi(e),condition:t}}function Fi(e){if(Dv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function rU(e){if(Dv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Tt(e){if(Dv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return me(e)?e:e!==void 0?{value:e}:void 0}function vWe(e){return me(e)?e.signal:te(e)}function iU(e){return me(e)?e.signal:te(e.value)}function ls(e){return me(e)?e.signal:e==null?null:te(e)}function bWe(e,t,n){for(const r of n){const i=ya(r,t.markDef,t.config);i!==void 0&&(e[r]=Tt(i))}return e}function Qie(e){return[].concat(e.type,e.style??[])}function gt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&K(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:ya(e,t,n,r)}function ya(e,t,n,{vgChannel:r}={}){const i=T4(e,t,n.style);return nn(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function T4(e,t,n){return Zie(e,Qie(t),n)}function Zie(e,t,n){t=ae(t);let r;for(const i of t){const o=n[i];K(o,e)&&(r=o[e])}return r}function Jie(e,t){return ae(e).reduce((n,r)=>(n.field.push(ie(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function eoe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Ii(i,r))return;n.push(r)}),n}function toe(e,t){return Ii(e,t)||!t?e:e?[...ae(e),...ae(t)].join(", "):t}function noe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((ru(n)||me(n))&&(ru(r)||me(r)))return{explicit:e.explicit,value:toe(n,r)};if(ru(n)||me(n))return{explicit:e.explicit,value:n};if(ru(r)||me(r))return{explicit:e.explicit,value:r};if(!ru(n)&&!me(n)&&!ru(r)&&!me(r))return{explicit:e.explicit,value:eoe(n,r)};throw new Error("It should never reach here")}function RO(e){return`Invalid specification ${vt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const xWe='Autosize "fit" only works for single views and layered views.';function oU(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function sU(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function aU(e){return e?`Dropping "fit-${e}" because spec has discrete ${ki(e)}.`:'Dropping "fit" because spec has discrete size.'}function DO(e){return`Unknown field for ${e}. Cannot calculate view size.`}function lU(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function wWe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function SWe(e){return`The "nearest" transform is not supported for ${e} marks.`}function roe(e){return`Selection not supported for ${e} yet.`}function kWe(e){return`Cannot find a selection named "${e}".`}const CWe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",_We="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",EWe="Legend bindings are only supported for selections over an individual field or encoding channel.";function $We(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function AWe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const TWe="The same selection must be used to override scale domains in a layered view.",MWe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function PWe(e){return`Unknown repeated value "${e}".`}function uU(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const FWe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function RWe(e){return`Unrecognized parse "${e}".`}function cU(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const DWe="Attempt to add the same child twice.";function OWe(e){return`Ignoring an invalid transform: ${vt(e)}.`}const NWe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function fU(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function IWe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${vt(t)} is overridden by a child projection ${vt(n)}.`}const LWe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function zWe(e){return`${e}Offset dropped because ${e} is continuous`}function BWe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${vt(n)}}.`}function ioe(e){return`Invalid field type "${e}".`}function jWe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function UWe(e){return`Invalid aggregation operator "${e}".`}function ooe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function VWe(e){return`Position range does not support relative band size for ${e}.`}function M4(e,t){return`Dropping ${vt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const WWe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function w_(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function HWe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function qWe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function GWe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function YWe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function zA(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function XWe(e){return`The ${e} for range marks cannot be an expression`}function KWe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function QWe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function ZWe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function JWe(e){return`Cannot use the relative band size with ${e} scale.`}function eHe(e){return`Using unaggregated domain with raw field has no effect (${vt(e)}).`}function tHe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function nHe(e){return`Unaggregated domain is currently unsupported for log scale (${vt(e)}).`}function rHe(e){return`Cannot apply size to non-oriented mark "${e}".`}function iHe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function oHe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function soe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function aoe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function sHe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${vt(n)} and ${vt(r)}). Using ${vt(n)}.`}function aHe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${vt(n)} and ${vt(r)}). Using the union of the two domains.`}function lHe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function uHe(e){return`Dropping sort property ${vt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const dU="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",cHe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",fHe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",dHe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function hHe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function pHe(e){return`Stack is applied to a non-linear scale (${e}).`}function gHe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function IS(e,t){return`Invalid ${e}: ${vt(t)}.`}function mHe(e){return`Dropping day from datetime ${vt(e)} as day cannot be combined with other units.`}function yHe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function vHe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function bHe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function hU(e){return`1D error band does not support ${e}.`}function loe(e){return`Channel ${e} is required for "binned" bin.`}function xHe(e){return`Channel ${e} should not be used with "binned" bin.`}function wHe(e){return`Domain for ${e} is required for threshold scale.`}const uoe=TF(AF);let dg=uoe;function SHe(e){return dg=e,dg}function kHe(){return dg=uoe,dg}function Z(...e){dg.warn(...e)}function CHe(...e){dg.debug(...e)}function zd(e){if(e&&se(e)){for(const t of NO)if(K(e,t))return!0}return!1}const coe=["january","february","march","april","may","june","july","august","september","october","november","december"],_He=coe.map(e=>e.substr(0,3)),foe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],EHe=foe.map(e=>e.substr(0,3));function $He(e){if(d_(e)&&(e=+e),Qe(e))return e>4&&Z(IS("quarter",e)),e-1;throw new Error(IS("quarter",e))}function AHe(e){if(d_(e)&&(e=+e),Qe(e))return e-1;{const t=e.toLowerCase(),n=coe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=_He.indexOf(r);if(i!==-1)return i;throw new Error(IS("month",e))}}function THe(e){if(d_(e)&&(e=+e),Qe(e))return e%7;{const t=e.toLowerCase(),n=foe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=EHe.indexOf(r);if(i!==-1)return i;throw new Error(IS("day",e))}}function OO(e,t){const n=[];if(t&&e.day!==void 0&&X(e).length>1&&(Z(mHe(e)),e=Te(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?AHe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?$He(e.quarter):e.quarter;n.push(Qe(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?THe(e.day):e.day;n.push(Qe(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function dd(e){const n=OO(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function MHe(e){const n=OO(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function PHe(e){const t=OO(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const doe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},NO=X(doe);function FHe(e){return ce(doe,e)}function Bd(e){return se(e)?e.binned:hoe(e)}function hoe(e){return e&&e.startsWith("binned")}function IO(e){return e.startsWith("utc")}function RHe(e){return e.substring(3)}const DHe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function S_(e){return NO.filter(t=>goe(e,t))}function poe(e){const t=S_(e);return t[t.length-1]}function goe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function OHe(e,t,{end:n}={end:!1}){const r=kO(t),i=IO(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of NO)goe(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),MHe(a)}function moe(e){if(!e)return;const t=S_(e);return`timeUnitSpecifier(${vt(t)}, ${vt(DHe)})`}function NHe(e,t,n){if(!e)return;const r=moe(e);return`${n||IO(e)?"utc":"time"}Format(${t}, ${r})`}function Dn(e){if(!e)return;let t;return le(e)?hoe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:se(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),IO(t.unit)&&(t.utc=!0,t.unit=RHe(t.unit)),t}function IHe(e){const{utc:t,...n}=Dn(e);return n.unit?(t?"utc":"")+X(n).map(r=>Ot(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+X(n).map(r=>Ot(`_${r}_${n[r]}`)).join("")}function yoe(e,t=n=>n){const n=Dn(e),r=poe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=voe(r,n.step),a={...i,[s]:+i[s]+o};return`${t(dd(a))} - ${t(dd(i))}`}}const LHe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function zHe(e){return ce(LHe,e)}function voe(e,t=1){if(zHe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function BHe(e){return K(e,"param")}function LO(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function zO(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function BO(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function jO(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function UO(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function VO(e){if(e!=null&&e.field){if(G(e.range)&&e.range.length===2)return!0;if(me(e.range))return!0}return!1}function WO(e){return!!(e!=null&&e.field)&&(G(e.oneOf)||G(e.in))}function jHe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function boe(e){return WO(e)||LO(e)||VO(e)||zO(e)||jO(e)||BO(e)||UO(e)}function Ds(e,t){return F_(e,{timeUnit:t,wrapTime:!0})}function UHe(e,t){return e.map(n=>Ds(n,t))}function xoe(e,t=!0){const{field:n}=e,r=Dn(e.timeUnit),{unit:i,binned:o}=r||{},s=ie(e,{expr:"datum"}),a=i?`time(${o?s:OHe(i,n)})`:s;if(LO(e))return`${a}===${Ds(e.equal,i)}`;if(zO(e)){const l=e.lt;return`${a}<${Ds(l,i)}`}else if(jO(e)){const l=e.gt;return`${a}>${Ds(l,i)}`}else if(BO(e)){const l=e.lte;return`${a}<=${Ds(l,i)}`}else if(UO(e)){const l=e.gte;return`${a}>=${Ds(l,i)}`}else{if(WO(e))return`indexof([${UHe(e.oneOf,i).join(",")}], ${a}) !== -1`;if(jHe(e))return k_(a,e.valid);if(VO(e)){const{range:l}=Vn(e),u=me(l)?{signal:`${l.signal}[0]`}:l[0],c=me(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+Ds(u,i)+", "+Ds(c,i)+"])";const f=[];return u!==null&&f.push(`${a} >= ${Ds(u,i)}`),c!==null&&f.push(`${a} <= ${Ds(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${vt(e)}`)}function k_(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function VHe(e){return boe(e)&&e.timeUnit?{...e,timeUnit:Dn(e.timeUnit)}:e}const Ov={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function WHe(e){return e==="quantitative"||e==="temporal"}function woe(e){return e==="ordinal"||e==="nominal"}const hd=Ov.quantitative,HO=Ov.ordinal,hg=Ov.temporal,qO=Ov.nominal,Jg=Ov.geojson;function HHe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case hd:return"quantitative";case"t":case hg:return"temporal";case"o":case HO:return"ordinal";case"n":case qO:return"nominal";case Jg:return"geojson"}}const Hn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},P4={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function qHe(e,t){const n=P4[e],r=P4[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const GHe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function pU(e){return GHe[e]}const Soe=new Set(["linear","log","pow","sqrt","symlog"]),koe=new Set([...Soe,"time","utc"]);function Coe(e){return Soe.has(e)}const _oe=new Set(["quantile","quantize","threshold"]),YHe=new Set([...koe,..._oe,"sequential","identity"]),XHe=new Set(["ordinal","bin-ordinal","point","band"]);function On(e){return XHe.has(e)}function vs(e){return YHe.has(e)}function ea(e){return koe.has(e)}function pg(e){return _oe.has(e)}const KHe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function QHe(e){return!le(e)&&K(e,"name")}function Eoe(e){return K(e,"param")}function ZHe(e){return K(e,"unionWith")}function JHe(e){return se(e)&&"field"in e}const eqe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Cit,domain:_it,range:Eit,rangeMax:$it,rangeMin:Ait,scheme:Tit,...tqe}=eqe,nqe=X(tqe);function F4(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ea(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ea(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ea(e);case"nice":return ea(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return vs(e)&&!Le(["log","time","utc","threshold","quantile"],e)}}function $oe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return lp(e)?void 0:ZWe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function rqe(e,t){return Le([HO,qO],t)?e===void 0||On(e):t===hg?Le([Hn.TIME,Hn.UTC,void 0],e):t===hd?Coe(e)||pg(e)||e===void 0:!0}function iqe(e,t,n=!1){if(!Pa(e))return!1;switch(e){case Nt:case Ln:case _c:case Zg:case Io:case Es:return ea(t)||t==="band"?!0:t==="point"?!n:!1;case Dl:case Ac:case Ol:case Ec:case $c:case Od:return ea(t)||pg(t)||Le(["band","point","ordinal"],t);case wi:case Aa:case Ta:return t!=="band";case Tc:case Si:return t==="ordinal"||pg(t)}}function oqe(e){return se(e)&&"value"in e}const ei={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Aoe=ei.arc,C_=ei.area,__=ei.bar,sqe=ei.image,E_=ei.line,$_=ei.point,aqe=ei.rect,LS=ei.rule,Toe=ei.text,GO=ei.tick,lqe=ei.trail,YO=ei.circle,XO=ei.square,Moe=ei.geoshape;function Pc(e){return["line","area","trail"].includes(e)}function x1(e){return["rect","bar","image","arc","tick"].includes(e)}const uqe=new Set(X(ei));function va(e){return K(e,"type")}const cqe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],fqe=["fill","fillOpacity"],dqe=[...cqe,...fqe],hqe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},gU=X(hqe),BA=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],pqe={area:["line","point"],bar:BA,rect:BA,line:["point"],tick:["bandSize","thickness",...BA]},gqe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},mqe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Poe=X(mqe);function pd(e){return K(e,"band")}const yqe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},vqe=5,KO={binSpacing:0,continuousBandSize:vqe,minBandSize:.25,timeUnitBandPosition:.5},bqe={...KO,binSpacing:1},xqe={...KO,thickness:1};function wqe(e){return va(e)?e.type:e}function Foe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function QO({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!vs(r)||i)return"always-valid";const o=Foe(gt("invalid",e,t),{isPath:Pc(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function Sqe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function Roe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function Doe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var c;const s=n==null?void 0:n.get("type"),a=xs(t),l=b_(a==null?void 0:a.aggregate),u=QO({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){const f=((c=o.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:k_(ie(a,{expr:"datum"}),!1),...kqe(f,n,r)}}}function kqe(e,t,n){if(oqe(e)){const{value:r}=e;return me(r)?{signal:r.signal}:{value:r}}return Roe({scale:t,scaleName:n,mode:"zeroOrMin"})}function ZO(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=Nd(t),l=JO(e),u=Doe({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return u!==void 0?[u,l]:l}function Cqe(e){const{datum:t}=e;return zd(t)?dd(t):`${vt(t)}`}function Uf(e,t,n,r){const i={};if(t&&(i.scale=t),Fa(e)){const{datum:o}=e;zd(o)?i.signal=dd(o):me(o)?i.signal=o.signal:Dv(o)?i.signal=o.expr:i.value=o}else i.field=ie(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function zS({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!me(s)&&0<s&&s<1?"datum":void 0,l=ie(t,{expr:a,suffix:i}),u=n!==void 0?ie(n,{expr:a}):ie(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;const f=s===0?l:u;c.field=f}else{const f=me(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function _qe({scaleName:e,fieldDef:t}){const n=ie(t,{expr:"datum"}),r=ie(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function JO({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(Pe(t)){const f=s==null?void 0:s.get("type");if(Kr(t)){c??(c=lc({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Ct(d)||c&&h&&p===hg)return a!=null&&a.impute?Uf(t,o,{binSuffix:"mid"},{offset:l}):c&&!On(f)?zS({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Uf(t,o,Bv(t,e)?{binSuffix:"range"}:{},{offset:l});if(jn(d)){if(J(n))return zS({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});Z(loe(e===Nt?_s:$a))}}return Uf(t,o,On(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(bs(t)){const f=t.value,d=l?{offset:l}:{};return{...py(e,f),...d}}}return Oe(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function py(e,t){return Le(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Le(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Tt(t)}function gd(e){return e&&e!=="number"&&e!=="time"}function Ooe(e,t,n){return`${e}(${t}${n?`, ${vt(n)}`:""})`}const Eqe=" – ";function e8({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var l,u;if(gd(n))return us({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=Noe(e,r,i),a=gg(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return us({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return us({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&J(e)&&e.timeUnit===void 0)return us({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(yg(e)){const c=Aqe({field:s,timeUnit:J(e)?(l=Dn(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:jd(e)&&((u=e.scale)==null?void 0:u.type)===Hn.UTC});return c?{signal:c}:void 0}if(t=R4({type:a,specifiedFormat:t,config:o,normalizeStack:i}),J(e)&&Ct(e.bin)){const c=ie(e,{expr:r,binSuffix:"end"});return{signal:Nv(s,c,t,n,o)}}else return t||gg(e)==="quantitative"?{signal:`${zoe(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function Noe(e,t,n){return J(e)?n?`${ie(e,{expr:t,suffix:"end"})}-${ie(e,{expr:t,suffix:"start"})}`:ie(e,{expr:t}):Cqe(e)}function us({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=Noe(e,r,i)),s!=="datum.value"&&J(e)&&Ct(e.bin)){const a=ie(e,{expr:r,binSuffix:"end"});return{signal:Nv(s,a,t,n,o)}}return{signal:Ooe(n,s,t)}}function Ioe(e,t,n,r,i,o){var s;if(!(le(r)&&gd(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&gg(e)==="quantitative"&&(i.normalizedNumberFormatType&&mg(e)&&e.stack==="normalize"||i.numberFormatType))){if(mg(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return R4({type:"quantitative",config:i,normalizeStack:!0});if(yg(e)){const a=J(e)?(s=Dn(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:$qe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return R4({type:t,specifiedFormat:n,config:i})}}function Loe(e,t,n){var r;if(e&&(me(e)||e==="number"||e==="time"))return e;if(yg(t)&&n!=="time"&&n!=="utc")return J(t)&&((r=Dn(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function R4({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(le(t))return t;if(e===hd)return r?n.normalizedNumberFormat:n.numberFormat}function $qe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:moe(t)}:r?void 0:n.timeFormat)}function zoe(e,t){return`format(${e}, "${t||""}")`}function mU(e,t,n,r){return gd(n)?Ooe(n,e,t):zoe(e,(le(t)?t:void 0)??r.numberFormat)}function Nv(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return Nv(e,t,i.numberFormat,i.numberFormatType,i);const o=mU(e,n,r,i),s=mU(t,n,r,i);return`${k_(e,!1)} ? "null" : ${o} + "${Eqe}" + ${s}`}function Aqe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=le(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):NHe(t,e,o)}const A_="min",Tqe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function yU(e){return ce(Tqe,e)}function Mqe(e){return K(e,"encoding")}function pl(e){return e&&(e.op==="count"||K(e,"field"))}function Boe(e){return e&&G(e)}function Iv(e){return K(e,"row")||K(e,"column")}function t8(e){return K(e,"header")}function T_(e){return K(e,"facet")}function Pqe(e){return K(e,"param")}function Fqe(e){return!le(e)&&K(e,"repeat")}function vU(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function n8(e){return K(e,"sort")}function lc({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Pe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(J(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return ya("timeUnitBandPosition",n,r);if(Ct(o))return .5}}function joe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var u,c,f;const a=ki(e),l=gt(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(J(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:ya("timeUnitBandSize",r,i)};if(Ct(h)&&!On(o))return{band:1}}if(x1(r.type))return o?On(o)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Uoe(e,t,n,r){return Ct(e.bin)||e.timeUnit&&Kr(e)&&e.type==="temporal"?lc({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Voe(e){return K(e,"sort")&&!K(e,"field")}function Lv(e){return K(e,"condition")}function M_(e){const t=e==null?void 0:e.condition;return!!t&&!G(t)&&J(t)}function zv(e){const t=e==null?void 0:e.condition;return!!t&&!G(t)&&Pe(t)}function Rqe(e){const t=e==null?void 0:e.condition;return!!t&&(G(t)||bs(t))}function J(e){return K(e,"field")||(e==null?void 0:e.aggregate)==="count"}function gg(e){return e==null?void 0:e.type}function Fa(e){return K(e,"datum")}function $u(e){return Kr(e)&&!jS(e)||BS(e)}function bU(e){return Kr(e)&&e.type==="quantitative"&&!e.bin||BS(e)}function BS(e){return Fa(e)&&Qe(e.datum)}function Pe(e){return J(e)||Fa(e)}function Kr(e){return e&&(K(e,"field")||e.aggregate==="count")&&K(e,"type")}function bs(e){return K(e,"value")}function jd(e){return K(e,"scale")||K(e,"sort")}function mg(e){return K(e,"axis")||K(e,"stack")||K(e,"impute")}function Woe(e){return K(e,"legend")}function Hoe(e){return K(e,"format")||K(e,"formatType")}function Dqe(e){return pi(e,["legend","axis","header","scale"])}function Oqe(e){return K(e,"op")}function ie(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(Iqe(e))n=Die("count");else{let s;if(!t.nofn)if(Oqe(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;Ct(a)?(s=Yie(a),i=(t.binSuffix??"")+(t.suffix??"")):l?Mc(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):El(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!Bd(u)&&(s=IHe(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Qg(n):t.expr?Pie(n,t.expr)+o:Do(n)+o}function jS(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return J(e)&&!!e.bin;case"temporal":return!1}throw new Error(ioe(e.type))}function Nqe(e){var t;return jd(e)&&pg((t=e.scale)==null?void 0:t.type)}function Iqe(e){return e.aggregate==="count"}function Lqe(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Ct(r))return`${n} (binned)`;if(i&&!Bd(i)){const a=(s=Dn(i))==null?void 0:s.unit;if(a)return`${n} (${S_(a).join("-")})`}else if(o)return Mc(o)?`${n} for max ${o.argmax}`:El(o)?`${n} for min ${o.argmin}`:`${Mv(o)} of ${n}`;return n}function zqe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Mc(t))return`${i} for argmax(${t.argmax})`;if(El(t))return`${i} for argmin(${t.argmin})`;const o=r&&!Bd(r)?Dn(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Ct(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const qoe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return zqe(e);default:return Lqe(e,t)}};let Goe=qoe;function Yoe(e){Goe=e}function Bqe(){Yoe(qoe)}function up(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=r8(e))==null?void 0:a.title;if(!J(e))return i??e.title;const o=e,s=r?i8(o,t):void 0;return n?nn(i,o.title,s):i??o.title??s}function r8(e){if(mg(e)&&e.axis)return e.axis;if(Woe(e)&&e.legend)return e.legend;if(t8(e)&&e.header)return e.header}function i8(e,t){return Goe(e,t)}function US(e){if(Hoe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=r8(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function jqe(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(n8(e)&&G(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Mc(n)&&!El(n))return"quantitative";if(jd(e)&&((o=e.scale)!=null&&o.type))switch(P4[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function xs(e){if(J(e))return e;if(M_(e))return e.condition}function bn(e){if(Pe(e))return e;if(zv(e))return e.condition}function Xoe(e,t,n,r={}){if(le(e)||Qe(e)||vc(e)){const i=le(e)?"string":Qe(e)?"number":"boolean";return Z(BWe(t,i,e)),{value:e}}return Pe(e)?VS(e,t,n,r):zv(e)?{...e,condition:VS(e.condition,t,n,r)}:e}function VS(e,t,n,r){if(Hoe(e)){const{format:i,formatType:o,...s}=e;if(gd(o)&&!n.customFormatTypes)return Z(fU(t)),VS(s,t,n,r)}else{const i=mg(e)?"axis":Woe(e)?"legend":t8(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(gd(s)&&!n.customFormatTypes)return Z(fU(t)),VS({...e,[i]:a},t,n,r)}}return J(e)?o8(e,t,r):Uqe(e)}function Uqe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Qe(n)?"quantitative":le(n)?"nominal":zd(n)?"temporal":void 0,{...e,type:t}}function o8(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!FO(r)&&!Mc(r)&&!El(r)&&(Z(UWe(r)),delete a.aggregate),i&&(a.timeUnit=Dn(i)),s&&(a.field=`${s}`),Ct(o)&&(a.bin=P_(o,t)),jn(o)&&!rn(t)&&Z(xHe(t)),Kr(a)){const{type:l}=a,u=HHe(l);l!==u&&(a.type=u),l!=="quantitative"&&b_(r)&&(Z(jWe(l,r)),a.type="quantitative")}else if(!Uie(t)){const l=jqe(a,t);a.type=l}if(Kr(a)){const{compatible:l,warning:u}=Vqe(a,t)||{};l===!1&&Z(u)}if(n8(a)&&le(a.sort)){const{sort:l}=a;if(yU(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&yU(u))return{...a,sort:{encoding:u,order:"descending"}}}if(t8(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function P_(e,t){return vc(e)?{maxbins:nU(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:nU(t)}:e}const lh={compatible:!0};function Vqe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case dl:case hl:case h_:return jS(e)?lh:{compatible:!1,warning:qWe(t)};case Nt:case Ln:case _c:case Zg:case wi:case Aa:case Ta:case Pv:case Fv:case p_:case fd:case g_:case m_:case Od:case Io:case Es:case y_:return lh;case As:case Oo:case $s:case Ts:return n!==hd?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:lh;case Ol:case Ec:case $c:case Ac:case Dl:case Rl:case Fl:case _s:case $a:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:lh;case Si:case Tc:return!jS(e)&&!Nqe(e)?{compatible:!1,warning:GWe(t)}:lh;case fg:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:lh}}function yg(e){const{formatType:t}=US(e);return t==="time"||!t&&Wqe(e)}function Wqe(e){return e&&(e.type==="temporal"||J(e)&&!!e.timeUnit)}function F_(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=Dn(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return Dv(e)?a=e.expr:me(e)?a=e.signal:zd(e)?(s=!0,a=dd(e)):(le(e)||Qe(e))&&s&&(a=`datetime(${vt(e)})`,FHe(o)&&(Qe(e)&&e<1e4||le(e)&&isNaN(Date.parse(e)))&&(a=dd({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:vt(e)}function Koe(e,t){const{type:n}=e;return t.map(r=>{const i=J(e)&&!Bd(e.timeUnit)?e.timeUnit:void 0,o=F_(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function Bv(e,t){return Ct(e.bin)?Pa(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const xU={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function jv(e){return e==null?void 0:e.condition}const Qoe=["domain","grid","labels","ticks","title"],Hqe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Zoe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},qqe={...Zoe,style:1,labelExpr:1,encoding:1};function wU(e){return ce(qqe,e)}const Gqe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Joe=X(Gqe);function Il(e){return K(e,"mark")}class R_{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Il(t)?wqe(t.mark)===this.name:!1}}function Vf(e,t){const n=e&&e[t];return n?G(n)?ug(n,r=>!!r.field):J(n)||M_(n):!1}function ese(e,t){const n=e&&e[t];return n?G(n)?ug(n,r=>!!r.field):J(n)||Fa(n)||zv(n):!1}function tse(e,t){if(rn(t)){const n=e[t];if((J(n)||Fa(n))&&(woe(n.type)||J(n)&&n.timeUnit)){const r=$O(t);return ese(e,r)}}return!1}function nse(e){return ug(qVe,t=>{if(Vf(e,t)){const n=e[t];if(G(n))return ug(n,r=>!!r.aggregate);{const r=xs(n);return r&&!!r.aggregate}}return!1})}function rse(e,t){const n=[],r=[],i=[],o=[],s={};return s8(e,(a,l)=>{if(J(a)){const{field:u,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=r8(a),g=p==null?void 0:p.title;let m=ie(a,{forAs:!0});const y={...g?[]:{title:up(a,t,{allowDisabling:!0})},...h,field:m};if(c){let v;if(Mc(c)?(v="argmax",m=ie({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${u}`):El(c)?(v="argmin",m=ie({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:m};u&&(b.field=u),o.push(b)}}else if(n.push(m),Kr(a)&&Ct(f)){if(r.push({bin:f,field:u,as:m}),n.push(ie(a,{binSuffix:"end"})),Bv(a,l)&&n.push(ie(a,{binSuffix:"range"})),rn(l)){const v={field:`${m}_end`};s[`${l}2`]=v}y.bin="binned",Uie(l)||(y.type=hd)}else if(d&&!Bd(d)){i.push({timeUnit:d,field:u,as:m});const v=Kr(a)&&a.type!==hg&&"time";v&&(l===Pv||l===fd?y.formatType=v:nWe(l)?y.legend={formatType:v,...y.legend}:rn(l)&&(y.axis={formatType:v,...y.axis}))}s[l]=y}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function Yqe(e,t,n){const r=iWe(t,n);if(r){if(r==="binned"){const i=e[t===_s?Nt:Ln];return!!(J(i)&&J(e[t])&&jn(i.bin))}}else return!1;return!0}function Xqe(e,t,n,r){const i={};for(const o of X(e))jie(o)||Z(HWe(o));for(let o of ZVe){if(!e[o])continue;const s=e[o];if(Rv(o)){const a=QVe(o),l=i[a];if(J(l)&&WHe(l.type)&&J(s)&&!l.timeUnit){Z(zWe(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(Z(LWe),o=Io),!Yqe(e,o,t)){Z(w_(o,t));continue}if(o===Dl&&t==="line"){const a=xs(e[o]);if(a!=null&&a.aggregate){Z(WWe);continue}}if(o===wi&&(n?"fill"in e:"stroke"in e)){Z(ooe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===Fv||o===fg&&!G(s)&&!bs(s)||o===fd&&G(s)){if(s){if(o===fg){const a=e[o];if(Voe(a)){i[o]=a;continue}}i[o]=ae(s).reduce((a,l)=>(J(l)?a.push(o8(l,o)):Z(M4(l,o)),a),[])}}else{if(o===fd&&s===null)i[o]=null;else if(!J(s)&&!Fa(s)&&!bs(s)&&!Lv(s)&&!me(s)){Z(M4(s,o));continue}i[o]=Xoe(s,o,r)}}return i}function D_(e,t){const n={};for(const r of X(e)){const i=Xoe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Kqe(e){const t=[];for(const n of X(e))if(Vf(e,n)){const r=e[n],i=ae(r);for(const o of i)J(o)?t.push(o):M_(o)&&t.push(o.condition)}return t}function s8(e,t,n){if(e)for(const r of X(e)){const i=e[r];if(G(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function Qqe(e,t,n,r){return e?X(e).reduce((i,o)=>{const s=e[o];return G(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function ise(e,t){return X(t).reduce((n,r)=>{switch(r){case Nt:case Ln:case g_:case y_:case m_:case _s:case $a:case _c:case Zg:case Io:case Rl:case Es:case Fl:case $s:case As:case Ts:case Oo:case Pv:case Si:case Od:case fd:return n;case fg:if(e==="line"||e==="trail")return n;case Fv:case p_:{const i=t[r];if(G(i)||J(i))for(const o of ae(i))o.aggregate||n.push(ie(o,{}));return n}case Dl:if(e==="trail")return n;case wi:case Aa:case Ta:case Ol:case Ec:case $c:case Tc:case Ac:{const i=xs(t[r]);return i&&!i.aggregate&&n.push(ie(i,{})),n}}},[])}function Zqe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(G(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return G(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function D4(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${a8(t)}`:"";return{field:s+t.field,type:t.type,title:me(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=Kqe(n).map(Dqe);return{tooltip:[...i,...Js(o,Be)]}}function a8(e){const{title:t,field:n}=e;return nn(t,n)}function l8(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=a8(n);return ose(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...le(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function ose(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...va(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...vc(e[t])?{}:e[t]}}]:[]}function sse(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:ux(o,n),continuousAxisChannelDef2:ux(s,n),continuousAxisChannelDefError:ux(a,n),continuousAxisChannelDefError2:ux(l,n),continuousAxis:i}}function ux(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Z(bHe(n,t)),r}else return e}function ase(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(va(n)&&n.orient)return n.orient;if($u(i)){if($u(o)){const s=J(i)&&i.aggregate,a=J(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return yg(o)&&!yg(i)?"horizontal":"vertical"}return"horizontal"}else{if($u(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const WS="boxplot",Jqe=["box","median","outliers","rule","ticks"],eGe=new R_(WS,use);function lse(e){return Qe(e)?"tukey":e}function use(e,{config:t}){e={...e,encoding:D_(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=va(n)?n:{type:n};i&&Z(roe("boxplot"));const l=a.extent??t.boxplot.extent,u=gt("size",a,t),c=a.invalid,f=lse(l),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:k}=tGe(e,l,t),S=Qg(g.field),{color:C,size:_,...$}=b,A=Wd=>l8(a,m,g,Wd,t.boxplot),N=A($),M=A(b),R=(se(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=A({...$,..._?{size:_}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...C||{value:R}}}}),D=D4([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,b),I={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},O=f==="min-max"?D:D4([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,b),j=[...N({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:O}),...N({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:O}),...N({partName:"ticks",mark:I,positionPrefix:"lower_whisker",extraEncoding:O}),...N({partName:"ticks",mark:I,positionPrefix:"upper_whisker",extraEncoding:O})],Y=[...f!=="tukey"?j:[],...M({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:D}),...F({partName:"median",mark:{type:"tick",invalid:c,...se(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:D})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(p),layer:Y};const W=`datum["lower_box_${g.field}"]`,oe=`datum["upper_box_${g.field}"]`,re=`(${oe} - ${W})`,we=`${W} - ${l} * ${re}`,Re=`${oe} + ${l} * ${re}`,lt=`datum["${g.field}"]`,Cn={joinaggregate:cse(g.field),groupby:y},rr={transform:[{filter:`(${we} <= ${lt}) && (${lt} <= ${Re})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${S}`},{op:"max",field:g.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:j},{tooltip:ue,..._e}=$,{scale:Ee,axis:Q}=g,hn=a8(g),et=pi(Q,["title"]),_n=ose(a,"outliers",t.boxplot,{transform:[{filter:`(${lt} < ${we}) || (${lt} > ${Re})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...hn!==void 0?{title:hn}:{},...Ee!==void 0?{scale:Ee}:{},...yt(et)?{}:{axis:et}},..._e,...C?{color:C}:{},...k?{tooltip:k}:{}}})[0];let an;const no=[...d,...h,Cn];return _n?an={transform:no,layer:[_n,rr]}:(an=rr,an.transform.unshift(...no)),{...s,layer:[an,{transform:p,layer:Y}]}}function cse(e){const t=Qg(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function tGe(e,t,n){const r=ase(e,WS),{continuousAxisChannelDef:i,continuousAxis:o}=sse(e,r,WS),s=i.field,a=Qg(s),l=lse(t),u=[...cse(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Zqe(d),{bins:g,timeUnits:m,aggregate:y,groupby:v,encoding:b}=rse(p,n),x=r==="vertical"?"horizontal":"vertical",w=r,k=[...g,...m,{aggregate:[...y,...u],groupby:v},...c];return{bins:g,timeUnits:m,transform:k,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:h}}const u8="errorbar",nGe=["ticks","rule"],rGe=new R_(u8,fse);function fse(e,{config:t}){e={...e,encoding:D_(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=dse(e,u8,t);delete o.size;const c=l8(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function iGe(e,t){const{encoding:n}=e;if(oGe(n))return{orient:ase(e,t),inputType:"raw"};const r=sGe(n),i=aGe(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Pe(a)&&Pe(l))throw new Error(`${t} cannot have both x2 and y2`);if(Pe(a)){if($u(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Pe(l)){if($u(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(Pe(l)&&!Pe(a))throw new Error(`${t} cannot have xError2 without xError`);if(Pe(c)&&!Pe(u))throw new Error(`${t} cannot have yError2 without yError`);if(Pe(a)&&Pe(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Pe(a)){if($u(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Pe(u)){if($u(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function oGe(e){return(Pe(e.x)||Pe(e.y))&&!Pe(e.x2)&&!Pe(e.y2)&&!Pe(e.xError)&&!Pe(e.xError2)&&!Pe(e.yError)&&!Pe(e.yError2)}function sGe(e){return Pe(e.x2)||Pe(e.y2)}function aGe(e){return Pe(e.xError)||Pe(e.xError2)||Pe(e.yError)||Pe(e.yError2)}function dse(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=va(r)?r:{type:r};o&&Z(roe(t));const{orient:u,inputType:c}=iGe(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=sse(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=lGe(l,f,d,h,p,c,t,n),{[g]:x,[g==="x"?"x2":"y2"]:w,[g==="x"?"xError":"yError"]:k,[g==="x"?"xError2":"yError2"]:S,...C}=i,{bins:_,timeUnits:$,aggregate:A,groupby:N,encoding:M}=rse(C,n),R=[...A,...m],F=c!=="raw"?[]:N,D=D4(v,f,M,b);return{transform:[...a.transform??[],..._,...$,...R.length===0?[]:[{aggregate:R,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:M,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:D}}function lGe(e,t,n,r,i,o,s,a){let l=[],u=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Z(vHe(h,p,s)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Mv(h)},{fieldPrefix:"upper_",titlePrefix:SU(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:SU(h,p,"-")}],d=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:up({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:up({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:up({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Z(yHe(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:cd(cd(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}function SU(e,t,n){return`${Mv(e)} ${n} ${t}`}const c8="errorband",uGe=["band","borders"],cGe=new R_(c8,hse);function hse(e,{config:t}){e={...e,encoding:D_(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=dse(e,c8,t),u=s,c=l8(u,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?Z(hU("interpolate")):u.tension&&Z(hU("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const pse={};function f8(e,t,n){const r=new R_(e,t);pse[e]={normalizer:r,parts:n}}function fGe(){return X(pse)}f8(WS,use,Jqe);f8(u8,fse,nGe);f8(c8,hse,uGe);const dGe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],gse={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},mse={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},hGe=X(gse),pGe=X(mse),gGe={header:1,headerRow:1,headerColumn:1,headerFacet:1},yse=X(gGe),vse=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],mGe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},yGe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ws="_vgsid_",vGe={point:{on:"click",fields:[ws],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function d8(e){return e==="legend"||!!(e!=null&&e.legend)}function jA(e){return d8(e)&&se(e)}function h8(e){return!!(e!=null&&e.select)}function bse(e){const t=[];for(const n of e||[]){if(h8(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function bGe(e){return O_(e)||g8(e)||p8(e)}function p8(e){return K(e,"concat")}function O_(e){return K(e,"vconcat")}function g8(e){return K(e,"hconcat")}function xse({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ba(e){return K(e,"step")}function kU(e){return K(e,"view")||K(e,"width")||K(e,"height")}const CU=20,xGe={align:1,bounds:1,center:1,columns:1,spacing:1},wGe=X(xGe);function SGe(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(T_(e)&&!Iv(e.facet)||p8(e))&&(i.columns=s),O_(e)&&(i.columns=1);for(const a of wGe)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=Qe(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function O4(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function N4(e,t){const n=HS(e,t);return ba(n)?n.step:wse}function HS(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return nn(n,{step:e.step})}const wse=20,kGe={continuousWidth:200,continuousHeight:200,step:wse},CGe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:kGe,mark:gqe,arc:{},area:{},bar:bqe,circle:{},geoshape:{},image:{},line:{},point:{},rect:KO,rule:{color:"black"},square:{},text:{color:"black"},tick:xqe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:KHe,projection:{},legend:mGe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:vGe,style:{},title:{},facet:{spacing:CU},concat:{spacing:CU},normalizedNumberFormat:".0%"},La=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],_U={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},EU={blue:La[0],orange:La[1],red:La[2],teal:La[3],green:La[4],yellow:La[5],purple:La[6],pink:La[7],brown:La[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function _Ge(e={}){return{signals:[{name:"color",value:se(e)?{...EU,...e}:EU}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function EGe(e){return{signals:[{name:"fontSize",value:se(e)?{..._U,...e}:_U}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function $Ge(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Sse(e){const t=X(e||{}),n={};for(const r of t){const i=e[r];n[r]=jv(i)?Kie(i):Fi(i)}return n}function AGe(e){const t=X(e),n={};for(const r of t)n[r]=Sse(e[r]);return n}const TGe=[...Poe,...Joe,...yse,"background","padding","legend","lineBreak","scale","style","title","view"];function kse(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=Og({},Te(CGe),n?$Ge(n):{},t?_Ge(t):{},r?EGe(r):{},o||{});i&&Ng(s,"selection",i,!0);const a=pi(s,TGe);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Fi(s[l]));for(const l of Poe)s[l]&&(a[l]=Vn(s[l]));for(const l of Joe)s[l]&&(a[l]=Sse(s[l]));for(const l of yse)s[l]&&(a[l]=Vn(s[l]));if(s.legend&&(a.legend=Vn(s.legend)),s.scale){const{invalid:l,...u}=s.scale,c=Vn(l,{level:1});a.scale={...Vn(u),...X(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=AGe(s.style)),s.title&&(a.title=Vn(s.title)),s.view&&(a.view=Vn(s.view)),a}const MGe=new Set(["view",...uqe]),PGe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],FGe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...pqe};function RGe(e){e=Te(e);for(const t of PGe)delete e[t];if(e.axis)for(const t in e.axis)jv(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of dGe)delete e.legend[t];if(e.mark){for(const t of gU)delete e.mark[t];e.mark.tooltip&&se(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(bse(e.params)),delete e.params);for(const t of MGe){for(const r of gU)delete e[t][r];const n=FGe[t];if(n)for(const r of n)delete e[t][r];OGe(e,t)}for(const t of fGe())delete e[t];DGe(e);for(const t in e)se(e[t])&&yt(e[t])&&delete e[t];return yt(e)?void 0:e}function DGe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Xie(e.title);yt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),yt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),yt(r)?delete e.title:e.title=r}function OGe(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};yt(o)||(e.style[n??t]=o),delete e[t]}function N_(e){return K(e,"layer")}function NGe(e){return K(e,"repeat")}function IGe(e){return!G(e.repeat)&&K(e.repeat,"layer")}class m8{map(t,n){return T_(t)?this.mapFacet(t,n):NGe(t)?this.mapRepeat(t,n):g8(t)?this.mapHConcat(t,n):O_(t)?this.mapVConcat(t,n):p8(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(N_(t))return this.mapLayer(t,n);if(Il(t))return this.mapUnit(t,n);throw new Error(RO(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const LGe={zero:1,center:1,normalize:1};function zGe(e){return ce(LGe,e)}const BGe=new Set([Aoe,__,C_,LS,$_,YO,XO,E_,Toe,GO]),jGe=new Set([__,C_,Aoe]);function uh(e){return J(e)&&gg(e)==="quantitative"&&!e.bin}function $U(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(J(s)&&J(a))if(uh(s)&&uh(a)){if(s.stack)return t;if(a.stack)return i;const l=J(s)&&!!s.aggregate,u=J(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(uh(s))return t;if(uh(a))return i}else{if(uh(s))return o&&n==="vertical"?void 0:t;if(uh(a))return o&&n==="horizontal"?void 0:i}}function UGe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Cse(e,t){var g,m;const n=va(e)?e:{type:e},r=n.type;if(!BGe.has(r))return null;const i=$U(t,"x",n)||$U(t,"theta",n);if(!i)return null;const o=t[i],s=J(o)?ie(o,{}):void 0,a=UGe(i),l=[],u=new Set;if(t[a]){const y=t[a],v=J(y)?ie(y,{}):void 0;v&&v!==s&&(l.push(a),u.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=J(f)?ie(f,{}):void 0;d&&d!==s&&(l.push(c),u.add(d));const h=JVe.reduce((y,v)=>{if(v!=="tooltip"&&Vf(t,v)){const b=t[v];for(const x of ae(b)){const w=xs(x);if(w.aggregate)continue;const k=ie(w,{});(!k||!u.has(k))&&y.push({channel:v,fieldDef:w})}}return y},[]);let p;return o.stack!==void 0?vc(o.stack)?p=o.stack?"zero":null:p=o.stack:jGe.has(r)&&(p="zero"),!p||!zGe(p)||nse(t)&&h.length===0?null:((g=o==null?void 0:o.scale)!=null&&g.type&&((m=o==null?void 0:o.scale)==null?void 0:m.type)!==Hn.LINEAR&&o!=null&&o.stack&&Z(pHe(o.scale.type)),Pe(t[Ma(i)])?(o.stack!==void 0&&Z(hHe(i)),null):(J(o)&&o.aggregate&&!fWe.has(o.aggregate)&&Z(gHe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:Pc(r),stackBy:h,offset:p}))}function _se(e,t,n){const r=Vn(e),i=gt("orient",r,n);if(r.orient=qGe(r.type,t,i),i!==void 0&&i!==r.orient&&Z(QWe(r.orient,i)),r.type==="bar"&&r.orient){const l=gt("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:yqe[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=gt("opacity",r,n),s=gt("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=WGe(r.type,t)),gt("cursor",r,n)===void 0&&(r.cursor=VGe(r,t,n)),r}function VGe(e,t,n){return t.href||e.href||gt("href",e,n)?"pointer":e.cursor}function WGe(e,t){if(Le([$_,GO,YO,XO],e)&&!nse(t))return .7}function HGe(e,t,{graticule:n}){if(n)return!1;const r=ya("filled",e,t),i=e.type;return nn(r,i!==$_&&i!==E_&&i!==LS)}function qGe(e,t,n){switch(e){case $_:case YO:case XO:case Toe:case aqe:case sqe:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case __:if(J(r)&&(jn(r.bin)||J(i)&&i.aggregate&&!r.aggregate))return"vertical";if(J(i)&&(jn(i.bin)||J(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(J(r)&&r.type===hd&&!Ct(r.bin)||BS(r))&&J(i)&&jn(i.bin)?"horizontal":"vertical";if(!s)return(J(i)&&i.type===hd&&!Ct(i.bin)||BS(i))&&J(r)&&jn(r.bin)?"vertical":"horizontal"}case LS:if(o&&!(J(r)&&jn(r.bin))&&s&&!(J(i)&&jn(i.bin)))return;case C_:if(s)return J(i)&&jn(i.bin)?"horizontal":"vertical";if(o)return J(r)&&jn(r.bin)?"vertical":"horizontal";if(e===LS){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case E_:case GO:{const a=bU(r),l=bU(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=Kr(r)&&r.type===hg,c=Kr(i)&&i.type===hg;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function GGe(e){const{point:t,line:n,...r}=e;return X(r).length>1?r:r.type}function YGe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:pi(e[t],["point","line"])});return e}function UA(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?se(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?se(t.point)?t.point:{}:void 0}function AU(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class XGe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Il(t)){const{mark:r,encoding:i}=t,o=va(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!UA(o,n[o.type],i);case"area":return!!UA(o,n[o.type],i)||!!AU(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...c}=t,f=D_(u,i),d=va(a)?a:{type:a},h=UA(d,i[d.type],f),p=d.type==="area"&&AU(d,i[d.type]),g=[{name:l,...o?{params:o}:{},mark:GGe({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:pi(f,["shape"])}],m=Cse(_se(d,f,i),f);let y=f;if(m){const{fieldChannel:v,offset:b}=m;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=pi(y,["y2","x2"]),p&&g.push({...s?{projection:s}:{},mark:{type:"line",...lg(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...lg(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:g},{...n,config:YGe(i)})}}function KGe(e,t){return t?Iv(e)?$se(e,t):Ese(e,t):e}function VA(e,t){return t?$se(e,t):e}function I4(e,t,n){const r=t[e];if(Fqe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Z(PWe(r.repeat));return}return t}function Ese(e,t){if(e=I4("field",e,t),e!==void 0){if(e===null)return null;if(n8(e)&&pl(e.sort)){const n=I4("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function TU(e,t){if(J(e))return Ese(e,t);{const n=I4("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function MU(e,t){if(Pe(e)){const n=TU(e,t);if(n)return n;if(Lv(e))return{condition:e.condition}}else{if(zv(e)){const n=TU(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function $se(e,t){const n={};for(const r in e)if(K(e,r)){const i=e[r];if(G(i))n[r]=i.map(o=>MU(o,t)).filter(o=>o);else{const o=MU(i,t);o!==void 0&&(n[r]=o)}}return n}class QGe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Il(t)){const{encoding:n,mark:r}=t;if(r==="line"||va(r)&&r.type==="line")for(const i of KVe){const o=Nd(i),s=n[o];if(n[i]&&(J(s)&&!jn(s.bin)||Fa(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return Z(KWe(!!i.x2,!!i.y2)),r({...t,mark:se(o)?{...o,type:"rule"}:"rule"},n)}}class ZGe extends m8{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[eGe,rGe,cGe,new XGe,new QGe]}map(t,n){if(Il(t)){const r=Vf(t.encoding,dl),i=Vf(t.encoding,hl),o=Vf(t.encoding,h_);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=VA(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return IGe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...o,layer:l.map(f=>{const d={...u,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ot(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!G(r)&&t.columns&&(t=pi(t,["columns"]),Z(uU("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!G(r)&&r.row||[l?l.row:null],f=!G(r)&&r.column||[l?l.column:null],d=G(r)&&r||[l?l.repeat:null];for(const p of d)for(const g of c)for(const m of f){const y={repeat:p,row:g,column:m,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(G(r)?`${Ot(p)}`:(r.row?`row_${Ot(g)}`:"")+(r.column?`column_${Ot(m)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(pi(b,["data"]))}const h=G(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return Iv(r)&&t.columns&&(t=pi(t,["columns"]),Z(uU("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=FU({parentProjection:s,projection:i}),u=PU({parentEncoding:o,encoding:VA(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:l,projection:u,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),y=VA(s,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...c?{height:c}:{},...f?{view:f}:{},...u?{projection:u}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&Z(YWe([...r?[dl]:[],...i?[hl]:[]]));const s={},a={};for(const l of[dl,hl]){const u=t[l];if(u){const{align:c,center:f,spacing:d,columns:h,...p}=u;s[l]=p;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:l,columns:u,...c}=o;return{facetMapping:KGe(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,l={...i,parentEncoding:PU({parentEncoding:n,encoding:o,layer:!0}),parentProjection:FU({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function PU({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...X(e),...X(t)]);for(const o of i){const s=t[o],a=e[o];if(Pe(s)){const l={...a,...s};r[o]=l}else zv(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||bs(a)||me(a)||Pe(a)||G(a))&&(r[o]=a)}}else r=t;return!r||yt(r)?void 0:r}function FU(e){const{parentProjection:t,projection:n}=e;return t&&n&&Z(IWe({parentProjection:t,projection:n})),n??t}function y8(e){return K(e,"filter")}function JGe(e){return K(e,"stop")}function Ase(e){return K(e,"lookup")}function eYe(e){return K(e,"data")}function tYe(e){return K(e,"param")}function nYe(e){return K(e,"pivot")}function rYe(e){return K(e,"density")}function iYe(e){return K(e,"quantile")}function oYe(e){return K(e,"regression")}function sYe(e){return K(e,"loess")}function aYe(e){return K(e,"sample")}function lYe(e){return K(e,"window")}function uYe(e){return K(e,"joinaggregate")}function cYe(e){return K(e,"flatten")}function fYe(e){return K(e,"calculate")}function Tse(e){return K(e,"bin")}function dYe(e){return K(e,"impute")}function hYe(e){return K(e,"timeUnit")}function pYe(e){return K(e,"aggregate")}function gYe(e){return K(e,"stack")}function mYe(e){return K(e,"fold")}function yYe(e){return K(e,"extent")&&!K(e,"density")&&!K(e,"regression")}function vYe(e){return e.map(t=>y8(t)?{filter:ap(t.filter,VHe)}:t)}class bYe extends m8{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=RU(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=RU(t,n),t.encoding){const r={};for(const[i,o]of sc(t.encoding))r[i]=Mse(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:sc(r).map(([o,s])=>{const{init:a,bind:l,empty:u,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=u!=="none";for(const f of Zn(n.selectionPredicates[o]??{}))f.empty=u!=="none";return{name:o,value:a,select:c,bind:l}})}:t}}function RU(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(y8(o))return{filter:L4(o,t)};if(Tse(o)&&Id(o.bin))return{...o,bin:Pse(o.bin)};if(Ase(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function Mse(e,t){var r,i;const n=Te(e);if(J(n)&&Id(n.bin)&&(n.bin=Pse(n.bin)),jd(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(Lv(n))if(G(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...u}=o;return a?o:{...u,test:L4(o,t)}});else{const{selection:o,param:s,test:a,...l}=Mse(n.condition,t);n.condition=s?n.condition:{...l,test:L4(n.condition,t)}}return n}function Pse(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function L4(e,t){const n=r=>ap(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):ap(e.test||e.filter,r=>r.selection?n(r.selection):r)}class z4 extends m8{map(t,n){const r=n.selections??[];if(t.params&&!Il(t)){const i=[];for(const o of t.params)h8(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(le(a)&&(a===t.name||i.includes(a))||G(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=z4.prototype[e];z4.prototype[e]=function(n,r){return t.call(this,n,xYe(n,r))}}function xYe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Fse(e,t){t===void 0&&(t=kse(e.config));const n=CYe(e,t),{width:r,height:i}=e,o=_Ye(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const wYe=new ZGe,SYe=new bYe,kYe=new z4;function CYe(e,t={}){const n={config:t};return kYe.map(wYe.map(SYe.map(e,n),n),n)}function DU(e){return le(e)?{type:e}:e??{}}function _Ye(e,t,n){let{width:r,height:i}=t;const o=Il(e)||N_(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(Z(oU("width")),r=void 0),i=="container"&&(Z(oU("height")),i=void 0));const a={type:"pad",...s,...n?DU(n.autosize):{},...DU(e.autosize)};if(a.type==="fit"&&!o&&(Z(xWe),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Z(sU("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Z(sU("height")),!Ii(a,{type:"pad"}))return a}function EYe(e){return["fit","fit-x","fit-y"].includes(e)}function $Ye(e){return e?`fit-${v_(e)}`:"fit"}const AYe=["background","padding"];function OU(e,t){const n={};for(const r of AYe)e&&e[r]!==void 0&&(n[r]=Fi(e[r]));return t&&(n.params=e.params),n}class Ll{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Ll(Te(this.explicit),Te(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return nn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of X(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function zs(e){return{explicit:!0,value:e}}function $i(e){return{explicit:!1,value:e}}function Rse(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:I_(t,n,r,i)}}function I_(e,t,n,r){return e.explicit&&t.explicit&&Z(sHe(n,r,e.value,t.value)),e}function uc(e,t,n,r,i=I_){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Ii(e.value,t.value)?e:i(e,t,n,r)}class TYe extends Ll{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function vg(e){return K(e,"url")}function w1(e){return K(e,"values")}function Dse(e){return K(e,"name")&&!vg(e)&&!w1(e)&&!Wu(e)}function Wu(e){return e&&(Ose(e)||Nse(e)||v8(e))}function Ose(e){return K(e,"sequence")}function Nse(e){return K(e,"sphere")}function v8(e){return K(e,"graticule")}var Kt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Kt||(Kt={}));function Ise({invalid:e,isPath:t}){switch(Foe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function MYe(e){const{marks:t,scales:n}=Ise(e);return t===n?Kt.Main:n==="include-invalid-values"?Kt.PreFilterInvalid:Kt.PostFilterInvalid}function Lse(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Do(i.field),i}function md(e,t=!0,n=Cr){if(G(e)){const r=e.map(i=>md(i,t,n));return t?`[${r.join(", ")}]`:r}else if(zd(e))return n(t?dd(e):PHe(e));return t?n(vt(e)):e}function PYe(e,t){for(const n of Zn(e.component.selection??{})){const r=n.name;let i=`${r}${cc}, ${n.resolve==="global"?"true":`{unit: ${Wf(e)}}`}`;for(const o of j_)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+aXe,on:[{events:{signal:n.name+cc},update:`modify(${te(n.name+yd)}, ${i})`}]})}return b8(t)}function FYe(e,t){if(e.component.selection&&X(e.component.selection).length){const n=te(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Cc("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return b8(t)}function RYe(e,t){let n=!1;for(const r of Zn(e.component.selection??{})){const i=r.name,o=te(i+yd);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${nae}(${o}, ${te(a)}${l}`})}n=!0;for(const a of j_)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),b8(t)}function DYe(e,t){const n=[...t],r=Wf(e,{escape:!1});for(const i of Zn(e.component.selection??{})){const o={name:i.name+yd};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:ws}}]),i.init){const a=i.project.items.map(Lse);o.values=i.project.hasSelectionId?i.init.map(l=>({unit:r,[ws]:md(l,!1)[0]})):i.init.map(l=>({unit:r,fields:a,values:md(l,!1)}))}n.filter(a=>a.name===i.name+yd).length||n.push(o)}return n}function zse(e,t){for(const n of Zn(e.component.selection??{}))for(const r of j_)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function OYe(e,t){for(const n of e.children)zt(n)&&(t=zse(n,t));return t}function NYe(e,t,n,r){const i=aae(e,t.param,t);return{signal:vs(n.get("type"))&&G(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function b8(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class pt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Z(DWe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class gi extends pt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Rie()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function WA(e){return e.as!==void 0}function NU(e){return`${e}_end`}class ua extends pt{clone(){return new ua(null,Te(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:l}=o;if(l){let u;if(Bd(l)){if(zt(n)){const{mark:c,markDef:f,config:d}=n,h=lc({fieldDef:o,markDef:f,config:d});(x1(c)||h)&&(u={timeUnit:Dn(l),field:a})}}else u={as:ie(o,{forAs:!0}),field:a,timeUnit:l};if(zt(n)){const{mark:c,markDef:f,config:d}=n,h=lc({fieldDef:o,markDef:f,config:d});x1(c)&&rn(s)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Be(u)]=u)}return i},{});return yt(r)?null:new ua(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=Dn(r),s={...i,timeUnit:o};return new ua(t,{[Be(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of sc(this.timeUnits)){const o=WA(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Zn(this.timeUnits).map(t=>WA(t)?t.as:NU(t.field)))}dependentFields(){return new Set(Zn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Be(this.timeUnits)}`}assemble(){const t=[];for(const n of Zn(this.timeUnits)){const{rectBandPosition:r}=n,i=Dn(n.timeUnit);if(WA(n)){const{field:o,as:s}=n,{unit:a,utc:l,...u}=i,c=[s,`${s}_end`];t.push({field:Do(o),type:"timeunit",...a?{units:S_(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...IU(c,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=Bse({timeUnit:i,field:s}),l=NU(s);t.push({type:"formula",expr:a,as:l}),t.push(...IU([s,l],r,i))}}return t}}const L_="offsetted_rect_start",z_="offsetted_rect_end";function Bse({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=poe(r),{part:s,step:a}=voe(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', datum['${t}'], ${n?-a:a})`}function IU([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:LU([Bse({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${L_}`},{type:"formula",expr:LU([i,o],n+.5),as:`${e}_${z_}`}]}return[]}function LU([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Uv="_tuple_fields";class IYe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const LYe={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new IYe),o={},s={},a=new Set,l=(p,g)=>{const m=g==="visual"?p.channel:p.field;let y=Ot(`${r}_${m}`);for(let v=1;a.has(y);v++)y=Ot(`${r}_${m}_${v}`);return a.add(y),{[g]:y}},u=t.type,c=e.config.selection[u],f=n.value!==void 0?ae(n.value):null;let{fields:d,encodings:h}=se(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(se(p))for(const g of X(p))XVe(g)?(h||(h=[])).push(g):u==="interval"?(Z(MWe),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){Z(wWe(p,g.aggregate));continue}else if(!m){Z(lU(p));continue}if(g.timeUnit&&!Bd(g.timeUnit)){m=e.vgField(p);const y={timeUnit:g.timeUnit,as:m,field:g.field};s[Be(y)]=y}if(!o[m]){const y=u==="interval"&&Pa(p)&&vs(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:p,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(o[m]=v),i.hasField[m]=o[m],i.hasSelectionId=i.hasSelectionId||m===ws,zie(p)?(v.geoChannel=p,v.channel=Lie(p),i.hasChannel[v.channel]=o[m]):i.hasChannel[p]=o[m]}}else Z(lU(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===ws}f&&(t.init=f.map(p=>i.items.map(g=>se(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),yt(s)||(i.timeUnit=new ua(null,s))},signals:(e,t,n)=>{const r=t.name+Uv;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(Lse)})}},gl={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Pa(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&Z(_We),!o||!vs(s)){Z(CWe);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||zU(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(nae))i.update=`{${r.map(s=>`${te(Do(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${te(Do(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!zU(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function B4(e,t){return`domain(${te(e.scaleName(t))})`}function zU(e){return e.parent&&im(e.parent)&&!e.parent.parent}const cp="_brush",jse="_scale_trigger",Wm="geo_interval_init_tick",Use="_init",zYe="_center",BYe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...se(n.select)?n.select:{}};i.fields=[ws],i.encodings||(i.encodings=n.value?X(n.value):[As,$s]),n.select={type:"interval",...i}}if(t.translate&&!gl.defined(t)){const i=`!event.item || event.item.mark.name !== ${te(t.name+cp)}`;for(const o of t.events){if(!o.between){Z(`${o} is not an ordered event stream for interval selections.`);continue}const s=ae((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+cc,o=Zn(t.project.hasChannel).filter(a=>a.channel===Nt||a.channel===Ln),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(jYe(e,t,l,s&&s[l.index])),[])),e.hasProjection){const a=te(e.projectionName()),l=e.projectionName()+zYe,{x:u,y:c}=t.project.hasChannel,f=u&&u.signals.visual,d=c&&c.signals.visual,h=u?s&&s[u.index]:`${l}[0]`,p=c?s&&s[c.index]:`${l}[1]`,g=w=>e.getSizeSignalRef(w).signal,m=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;s&&(n.unshift({name:r+Use,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(k=>k.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${m}, {markname: ${te(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Wf(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,x=o.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...s?[{signal:Wm}]:[]],update:b}]})}else{if(!gl.defined(t)){const u=r+jse,c=o.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=te(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=vs(m)?"+":"";return`(!isArray(${h}) || (${y}invert(${g}, ${p})[0] === ${y}${h}[0] && ${y}invert(${g}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${Wf(e)}, fields: ${r+Uv}, values`;return n.concat({name:i,...s?{init:`{${l}: ${md(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(zt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Wm).length||n.unshift({name:Wm,value:null,on:[{events:"timer{1}",update:`${Wm} === null ? {} : ${Wm}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${te(t.name+yd)})`;if(gl.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of X(u))u[m]=[{test:`${l}.length && ${l}[0].unit === ${Wf(e)}`,...u[m]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=X(h).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],m),{}),g=d??(t.translate?"move":null);return[{name:`${r+cp}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:u}},...n,{name:r+cp,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function jYe(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=te(i?e.scaleName(o):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(o===Nt?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,h=gl.defined(t),p=e.getScaleComponent(o),g=p?p.get("type"):void 0,m=r?{init:md(r,!0,l)}:{value:[]};return f.push({events:{signal:t.name+jse},update:vs(g)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...m,on:f},{name:d,...r?{init:md(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===Nt?0:1,h=t.name+Use,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...p,on:f}]}}const UYe={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+Uv,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=Zn(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+cp):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Wf(e)}, `;if(t.project.hasSelectionId)u+=`${ws}: ${s}[${te(ws)}]`;else{const f=o.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${s}[${te(e.vgField(d.channel,{}))}], ${s}[${te(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${s}[${te(d.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+cc,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function em({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=Lv(t)&&t.condition;let s=[];o&&(s=ae(o).map(u=>{const c=i(u);if(Pqe(u)){const{param:f,empty:d}=u;return{test:sae(e,{param:f,empty:d}),...c}}else return{test:YS(e,u.test),...c}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function x8(e,t="text"){const n=e.encoding[t];return em({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>B_(r,e.config),invalidValueRef:void 0})}function B_(e,t,n="datum"){if(e){if(bs(e))return Tt(e.value);if(Pe(e)){const{format:r,formatType:i}=US(e);return e8({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Vse(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(G(s))return{tooltip:BU({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return em({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const c=B_(u,i,a);if(c)return c;if(u===null)return;let f=gt("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),le(f))return{value:f};if(se(f))return me(f)?f:f.content==="encoding"?BU(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function Wse(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(c,f){const d=Nd(f),h=Kr(c)?c:{...c,type:e[d].type},p=h.title||i8(h,i),g=ae(p).join(", ").replaceAll(/"/g,'\\"');let m;if(rn(f)){const y=f==="x"?"x2":"y2",v=xs(e[y]);if(jn(h.bin)&&v){const b=ie(h,{expr:s}),x=ie(v,{expr:s}),{format:w,formatType:k}=US(h);m=Nv(b,x,w,k,i),o.add(y)}}if((rn(f)||f===Io||f===Es)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=US(h);m=e8({fieldOrDatumDef:h,format:y,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}m??(m=B_(h,i,s).signal),a.push({channel:f,key:g,value:m})}s8(e,(c,f)=>{J(c)?l(c,f):M_(c)&&l(c.condition,f)});const u={};for(const{channel:c,key:f,value:d}of a)!o.has(c)&&!u[f]&&(u[f]=d);return u}function BU(e,t,n,{reactiveGeom:r}={}){const i=Wse(e,t,n,{reactiveGeom:r}),o=sc(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function VYe(e){const{markDef:t,config:n}=e,r=gt("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...WYe(e),...HYe(e)}}function WYe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=gt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:ce(yWe,t)?{}:{ariaRoleDescription:{value:t}}}function HYe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return em({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>B_(l,e.config),invalidValueRef:void 0});const s=gt("description",n,r);if(s!=null)return{description:Tt(s)};if(r.aria===!1)return{};const a=Wse(t,i,r);if(!yt(a))return{description:{signal:sc(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Gn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=gt(e,r,o,{vgChannel:s,ignoreVgConfig:!Lv(u)})),l!==void 0&&(a=Tt(l)));const c={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=Doe({...c,scaleChannel:e,channelDef:u});return em({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:f,mainRefFn:h=>JO({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function Hse(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??gt("filled",n,i),a=Le(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=gt(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,u=gt(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...l?{fill:Tt(l)}:{},...u?{stroke:Tt(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&Z(ooe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Gn("color",e,{vgChannel:c,defaultValue:s?l:u}),...Gn("fill",e,{defaultValue:r.fill?l:void 0}),...Gn("stroke",e,{defaultValue:r.stroke?u:void 0})}}function qYe(e){const{encoding:t,mark:n}=e,r=t.order;return!Pc(n)&&bs(r)?em({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Tt(i.value),invalidValueRef:void 0}):{}}function bg({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:JO({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Tt(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Vr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[Ma(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=bg({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),p=w8({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!l&&rn(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:GYe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function GYe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Pe(n)&&i&&t===i.fieldChannel){if(J(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return zS({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Uf(n,r,{suffix:"end"},{offset:o})}return ZO(e)}function w8({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=Nd(n),l=ac(n),u=gt(n,o,s,{vgChannel:l});if(u!==void 0)return py(n,u);switch(t){case"zeroOrMin":return jU({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return jU({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[ki(n)],mult:.5}}}}function jU({mainChannel:e,config:t,...n}){const r=Roe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const YYe={left:"x",center:"xc",right:"x2"},XYe={top:"y",middle:"yc",bottom:"y2"};function qse(e,t,n,r="middle"){if(e==="radius"||e==="theta")return ac(e);const i=e==="x"?"align":"baseline",o=gt(i,t,n);let s;return me(o)?(Z(XWe(i)),s=void 0):s=o,e==="x"?YYe[s||(r==="top"?"left":"center")]:XYe[s||r]}function qS(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Gse(e,t,{defaultPos:n,defaultPos2:r}):Vr(e,t,{defaultPos:n})}function Gse(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=Ma(e),a=ki(e),l=KYe(t,r,s),u=l[a]?qse(e,i,o):ac(e);return{...Vr(e,t,{defaultPos:n,vgChannel:u}),...l}}function KYe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=Nd(n),u=ki(n),c=ac(n),f=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in o?bg({channel:n,markDef:o,encoding:r,model:e}):bg({channel:l,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=ki(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const g=QYe({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:cx(n,o)||cx(n,{[n]:T4(n,o,a.style),[u]:T4(u,o,a.style)})||cx(n,a[i])||cx(n,a.mark)||{[c]:w8({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function QYe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Pe(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Uf(t,o,{suffix:"start"},{offset:l}):ZO({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function cx(e,t){const n=ki(e),r=ac(e);if(t[r]!==void 0)return{[r]:py(e,t[r])};if(t[e]!==void 0)return{[r]:py(e,t[e])};if(t[n]){const i=t[n];if(pd(i))Z(VWe(n));else return{[n]:py(e,i)}}}function $l(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=Ma(t),a=ki(t),l=r[t],u=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??gt("size",i,n,{vgChannel:a}),p=Vie(t),g=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return J(l)&&(Ct(l.bin)||jn(l.bin)||l.timeUnit&&!u)&&!(h&&!pd(h))&&!r[p]&&!On(f)?eXe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Pe(l)&&On(f)||g)&&!u?JYe(l,t,e):Gse(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function ZYe(e,t,n,r,i,o,s){if(pd(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=ya("minBandSize",{type:s},r);return{signal:c?`max(${ls(c)}, ${u})`:u}}else i.band!==1&&(Z(JWe(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(me(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(Ld(l)&&Qe(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=nn(l,s==="tick"?f:s==="bar"?u:c);if(me(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Qe(d))return{signal:`${1-d} * ${e}`}}return{value:N4(r.view,e)-2}}function JYe(e,t,n){var _,$;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=ki(t),f=Ma(t),d=Vie(t),h=n.scaleName(d),p=n.getScaleComponent($O(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(i.size||r.size)&&(g?m=Gn("size",n,{vgChannel:c,defaultRef:Tt(r.size)}):Z(rHe(r.type)));const y=!!m,v=joe({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(_=u||p)==null?void 0:_.get("type"),useVlSizeChannel:g});m=m||{[c]:ZYe(c,h||l,p||u,o,v,!!e,r.type)};const b=(($=u||p)==null?void 0:$.get("type"))==="band"&&pd(v)&&!y?"top":"middle",x=qse(t,r,o,b),w=x==="xc"||x==="yc",{offset:k,offsetType:S}=bg({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),C=ZO({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:k,defaultRef:w8({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:w?S==="encoding"?0:.5:me(v)?{signal:`(1-${v})/2`}:pd(v)?(1-v.band)/2:0});if(c)return{[x]:C,...m};{const A=ac(f),N=m[c],M=k?{...N,offset:k}:N;return{[x]:C,[A]:G(C)?[C[0],{...C[1],offset:M}]:{...C,offset:M}}}}function UU(e,t,n,r,i,o,s){if(Iie(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(me(n)||me(i)||me(r)||o){const u=ls(n),c=ls(i),f=ls(r),d=ls(o),p=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${l})`:l,g=f?`${f} + `:"",m=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:g+m+y}}else return i=i||0,r+(n?-i-l:+i+l)}function eXe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var $;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),f=joe({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),d=($=r.component.axes[n])==null?void 0:$[0],h=(d==null?void 0:d.get("translate"))??.5,p=rn(n)?gt("binSpacing",o,i)??0:0,g=Ma(n),m=ac(n),y=ac(g),v=ya("minBandSize",o,i),{offset:b}=bg({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:x}=bg({channel:g,markDef:o,encoding:s,model:r,bandPosition:0}),w=_qe({fieldDef:e,scaleName:l}),k=UU(n,p,c,h,b,v,w),S=UU(g,p,c,h,x??b,v,w),C=me(f)?{signal:`(1-${f.signal})/2`}:pd(f)?(1-f.band)/2:.5,_=lc({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(Ct(e.bin)||e.timeUnit){const A=e.timeUnit&&_!==.5;return{[y]:VU({fieldDef:e,scaleName:l,bandPosition:C,offset:S,useRectOffsetField:A}),[m]:VU({fieldDef:e,scaleName:l,bandPosition:me(C)?{signal:`1-${C.signal}`}:1-C,offset:k,useRectOffsetField:A})}}else if(jn(e.bin)){const A=Uf(e,l,{},{offset:S});if(J(t))return{[y]:A,[m]:Uf(t,l,{},{offset:k})};if(Id(e.bin)&&e.bin.step)return{[y]:A,[m]:{signal:`scale("${l}", ${ie(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}Z(loe(g))}function VU({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return zS({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:L_,endSuffix:z_}:{}})}const tXe=new Set(["aria","width","height"]);function Lo(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Hse(e):{};return{...nXe(e.markDef,t),...WU("fill",n),...WU("stroke",r),...Gn("opacity",e),...Gn("fillOpacity",e),...Gn("strokeOpacity",e),...Gn("strokeWidth",e),...Gn("strokeDash",e),...qYe(e),...Vse(e),...x8(e,"href"),...VYe(e)}}function WU(e,t){return t?{[e]:t}:{}}function nXe(e,t){return mWe.reduce((n,r)=>(!tXe.has(r)&&K(e,r)&&t[r]!=="ignore"&&(n[r]=Tt(e[r])),n),{})}function S8(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var u;let s;if(!Pa(o)||!(s=e.getScaleType(o)))return;const a=b_(i.aggregate),l=QO({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(Sqe(l)){const c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(o=>k_(o,!0)).join(" && ")}}}function HU(e,t){if(t!==void 0)return{[e]:Tt(t)}}const HA="voronoi",Yse={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(HA)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Pc(o))return Z(SWe(o)),n;const s={name:e.getName(HA),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Vse(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const f=u.name??"";f===e.component.mark[0].name?a=c:f.includes(HA)&&(l=!0)}),l||n.splice(a+1,0,s),n}},Xse={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!d8(e.bind),parse:(e,t,n)=>rae(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=Yse.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=Ot(`${r}_${l.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...s?{init:md(s[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${te(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+cc),s=r+Uv,a=i.items.map(u=>Ot(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},GS="_toggle",Kse={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+GS,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+cc,r=t.name+GS;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Wf(e)}}, `)+`${r} ? ${n} : null`}},rXe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=le(t.clear)?Cc(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Xse.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===Ot(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+cc);r(i,"null"),Kse.defined(t)&&(i=n.findIndex(o=>o.name===t.name+GS),r(i,"false"))}return n}},Qse={defined:e=>{const t=e.resolve==="global"&&e.bind&&d8(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ws;return t&&!n&&Z(EWe),t&&n},parse:(e,t,n)=>{const r=Te(n);if(r.select=le(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},rae(t,r),se(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ae(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=jA(t.bind)?t.bind.legend:"click",o=le(i)?Cc(i,"view"):ae(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=jA(t.bind)&&t.bind.legend,o=s=>a=>{const l=Te(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${Ot(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+cc),s=r+Uv,a=i.items.filter(d=>d.hasLegend).map(d=>Ot(`${r}_${Ot(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(d=>d.name===r+GS),f=jA(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function iXe(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of Zn(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&Qse.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const Zse="_translate_anchor",Jse="_translate_delta",oXe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=gl.defined(t),o=r+Zse,{x:s,y:a}=t.project.hasChannel;let l=Cc(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+cp,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?B4(e,Nt):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?B4(e,Ln):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+Jse,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&qU(e,t,s,"width",n),a!==void 0&&qU(e,t,a,"height",n),n}};function qU(e,t,n,r,i){const o=t.name,s=o+Zse,a=o+Jse,l=n.channel,u=gl.defined(t),c=i.find(w=>w.name===n.signals[u?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d&&d.get("type"),p=d&&d.get("reverse"),g=u?l===Nt?p?"":"-":p?"-":"":"",m=`${s}.extent_${l}`,y=`${g}${a}.${l} / ${u?`${f}`:`span(${m})`}`,v=!u||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",x=`${v}(${m}, ${y}${b})`;c.on.push({events:{signal:a},update:u?x:`clampRange(${x}, 0, ${f})`})}const eae="_zoom_anchor",tae="_zoom_delta",sXe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=gl.defined(t),o=r+tae,{x:s,y:a}=t.project.hasChannel,l=te(e.scaleName(Nt)),u=te(e.scaleName(Ln));let c=Cc(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+cp,f))),n.push({name:r+eae,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&GU(e,t,s,"width",n),a!==void 0&&GU(e,t,a,"height",n),n}};function GU(e,t,n,r,i){const o=t.name,s=n.channel,a=gl.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),d=a?B4(e,s):l.name,h=o+tae,p=`${o}${eae}.${s}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${g}(${d}, ${p}, ${h}${m})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const yd="_store",cc="_tuple",aXe="_modify",nae="vlSelectionResolve",j_=[UYe,BYe,LYe,Kse,Xse,gl,Qse,rXe,oXe,sXe,Yse];function lXe(e){let t=e.parent;for(;t&&!Wi(t);)t=t.parent;return t}function Wf(e,{escape:t}={escape:!0}){let n=t?te(e.name):e.name;const r=lXe(e);if(r){const{facet:i}=r;for(const o of ko)i[o]&&(n+=` + '__facet_${o}_' + (facet[${te(r.vgField(o))}])`)}return n}function k8(e){return Zn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function rae(e,t){(le(t.select)||!t.select.on)&&delete e.events,(le(t.select)||!t.select.clear)&&delete e.clear,(le(t.select)||!t.select.toggle)&&delete e.toggle}function j4(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...j4(e.object)),t.push(...j4(e.property))),t)}function iae(e){return e.object.type==="MemberExpression"?iae(e.object):e.object.name==="datum"}function oae(e){const t=VD(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&iae(r)&&n.add(j4(r).slice(1).join("."))}),n}class tm extends pt{clone(){return new tm(null,this.model,Te(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=YS(this.model,this.filter,this),this._dependentFields=oae(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function uXe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const o=Ot(i.name),s=i.select,a=le(s)?s:s.type,l=se(s)?Te(s):{type:a},u=r[a];for(const d in u)d==="fields"||d==="encodings"||(d==="mark"&&(l.mark={...u.mark,...l.mark}),(l[d]===void 0||l[d]===!0)&&(l[d]=Te(u[d]??l[d])));const c=n[o]={...l,name:o,type:a,init:i.value,bind:i.bind,events:le(l.on)?Cc(l.on,"scope"):ae(Te(l.on))},f=Te(i);for(const d of j_)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function sae(e,t,n,r="datum"){const i=le(t)?t:t.param,o=Ot(i),s=te(o+yd);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${te(a.resolve)})`,c=`${l}${s}, ${r}${u}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function aae(e,t,n){const r=Ot(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&Z(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${te(o)}.`);else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,Z((a.length?"Multiple ":"No ")+`matching ${te(i)} encoding found for selection ${te(n.param)}. Using "field": ${te(o)}.`)):o=a[0].field}return`${s.name}[${te(Do(o))}]`}function cXe(e,t){for(const[n,r]of sc(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new gi(new tm(t,e,{param:n}),i,Kt.Lookup,e.component.data.outputNodeRefCounts)}}function YS(e,t,n){return hy(t,r=>le(r)?r:BHe(r)?sae(e,r,n):xoe(r))}function fXe(e,t){if(e)return G(e)&&!ru(e)?e.map(n=>i8(n,t)).join(", "):e}function qA(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function M0(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const p=h,g=Hqe[p],m=c[p];if(g&&g!==t&&g!=="both")delete c[p];else if(jv(m)){const{condition:y,...v}=m,b=ae(y),x=xU[p];if(x){const{vgProp:w,part:k}=x,S=[...b.map(C=>{const{test:_,...$}=C;return{test:YS(null,_),...$}}),v];qA(c,k,w,S),delete c[p]}else if(x===null){const w={signal:b.map(k=>{const{test:S,...C}=k;return`${YS(null,S)} ? ${iU(C)} : `}).join("")+iU(v)};c[p]=w}}else if(me(m)){const y=xU[p];if(y){const{vgProp:v,part:b}=y;qA(c,b,v,m),delete c[p]}}Le(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},yt(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:nn(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&me(c.encode.labels.update.text)&&(p=cd(a,"datum.label",c.encode.labels.update.text.signal)),qA(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of Qoe)e.hasAxisPart(p)||delete c.encode[p];yt(c.encode)&&delete c.encode}const h=fXe(l,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:nn(u,0)}}}}function lae(e){const{axes:t}=e.component,n=[];for(const r of Nl)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function dXe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>M0(i,"grid",t)),...r.map(i=>M0(i,"grid",t)),...n.map(i=>M0(i,"main",t)),...r.map(i=>M0(i,"main",t))].filter(i=>i)}function YU(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...X(s),...X(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${o}" ? ${ls(s[c])} : ${ls(a[c])}`};return u}return t[i]})])}function hXe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Coe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=me(n)?"axisOrient":`axis${Mv(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:YU(a,r,e,n),vgAxisConfig:YU(l,r,e,n),axisConfigStyle:pXe([...l,...a],r)}}function pXe(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=ae(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function U4(e,t,n,r={}){var o;const i=Zie(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const XU={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??gXe(n,e),gridScale:({model:e,channel:t})=>mXe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||cae(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||uae(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??vXe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??bXe(t.type,n,J(t)&&!!t.timeUnit,J(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??wXe({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:SXe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=fae(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return eoe(i?[vU(i)]:[],J(s)?[vU(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>kXe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??CXe(n,t)};function gXe(e,t){return!On(e)&&J(t)&&!Ct(t==null?void 0:t.bin)&&!jn(t==null?void 0:t.bin)}function mXe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function yXe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return me(o)?o:b1(o);{const{configValue:s}=U4("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?b1(s):n===Nt&&Le([qO,HO],e.type)&&!(J(e)&&e.timeUnit)?270:void 0}}function V4(e){return`(((${e.signal} % 360) + 360) % 360)`}function uae(e,t,n,r){if(e!==void 0)if(n==="x"){if(me(e)){const i=V4(e),o=me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(me(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(me(e)){const i=V4(e),o=me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(me(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function cae(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(me(e)){const s=V4(e),a=me(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(me(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function vXe(e,t){if(t==="x"&&Le(["quantitative","temporal"],e))return!0}function bXe(e,t,n,r){if(n&&!se(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function xXe(e){return e==="x"?"bottom":"left"}function wXe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!On(t)&&t!=="log"){if(J(e)){if(Ct(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Le(["month","hours","day","quarter"],(i=Dn(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function SXe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(J(t)){const{timeUnit:n}=t;if(n){const r=yoe(n);if(r)return{signal:r}}}}function fae(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return toe(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function kXe(e,t){const n=e.values;if(G(n))return Koe(t,n);if(me(n))return n}function CXe(e,t){return e==="rect"&&jS(t)?1:0}class xg extends pt{clone(){return new xg(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=oae(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(jd(r)&&Boe(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,l=a.map((u,c)=>`${xoe({field:o,timeUnit:s,equal:u})} ? ${c} : `).join("")+a.length;t=new xg(t,{calculate:l,as:wg(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Be(this.transform)}`}}function wg(e,t,n){return ie(e,{prefix:t,suffix:"sort_index",...n})}function U_(e,t){return Le(["top","bottom"],t)?"column":Le(["left","right"],t)||e==="row"?"row":"column"}function Sg(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return nn((t||{})[e],i[e],n.header[e])}function V_(e,t,n,r){const i={};for(const o of e){const s=Sg(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const C8=["row","column"],_8=["header","footer"];function _Xe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=V_(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=U_(t,a),u=b1(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...hae(u,l),...dae(l,u,o),...pae(r,i,t,hGe,gse)}}}function dae(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=cae(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function hae(e,t){const n=uae(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function EXe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of _8)if(n[i])for(const o of n[i]){const s=AXe(e,t,i,n,o);s!=null&&r.push(s)}return r}function $Xe(e,t){const{sort:n}=e;return pl(n)?{field:ie(n,{expr:"datum"}),order:n.order??"ascending"}:G(n)?{field:wg(e,t,{expr:"datum"}),order:"ascending"}:{field:ie(e,{expr:"datum"}),order:n??"ascending"}}function W4(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=V_(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=e8({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=U_(t,a);return{text:{signal:l?cd(cd(l,"datum.label",u),"datum.value",ie(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...hae(o,c),...dae(c,o,s),...pae(n,e,t,pGe,mse)}}function AXe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=V_(["labelOrient"],s.header,a,t);(t==="row"&&!Le(["top","bottom"],f)||t==="column"&&!Le(["left","right"],f))&&(o=W4(s,t,a))}const l=Wi(e)&&!Iv(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:$Xe(s,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const TXe={column:{start:0,end:1},row:{start:1,end:0}};function MXe(e,t){return TXe[t][e]}function PXe(e,t){const n={};for(const r of ko){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=V_(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=U_(r,s),l=MXe(o,a);l!==void 0&&(n[a]=l)}}return yt(n)?void 0:n}function pae(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=Sg(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function E8(e){return[...fx(e,"width"),...fx(e,"height"),...fx(e,"childWidth"),...fx(e,"childHeight")]}function fx(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(On(s)&&Ld(a)){const l=e.scaleName(n);return Wi(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[KU(l,a)]:[KU(l,a),{name:i,update:gae(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=O4(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function KU(e,t){const n=`${e}_step`;return me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function gae(e,t,n){const r=t.get("type"),i=t.get("padding"),o=nn(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${ls(s)}, ${ls(o)}) * ${e}_step`}function mae(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function yae(e,t){return X(e).reduce((n,r)=>({...n,...em({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Tt(i.value),invalidValueRef:void 0})}),{})}function vae(e,t){if(Wi(t))return e==="theta"?"independent":"shared";if(im(t))return"shared";if(R8(t))return rn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function $8(e,t){const n=e.scale[t],r=rn(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Z(lHe(t)),"independent"):e[r][t]||"shared"}const FXe={...yGe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},bae=X(FXe);class RXe extends Ll{}const QU={symbols:DXe,gradient:OXe,labels:NXe,entries:IXe};function DXe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:u}=n,c=s.filled&&u!=="trail";let f={...bWe({},n,dqe),...Hse(n,{filled:c})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=d===void 0?xae(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===wi)delete f.fill;else if(K(f.fill,"field"))h?delete f.fill:(f.fill=Tt(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=Tt(g??1));else if(G(f.fill)){const m=H4(a.fill??a.color)??s.fill??(c&&s.color);m&&(f.fill=Tt(m))}}if(f.stroke){if(r==="stroke"||!c&&r===wi)delete f.stroke;else if(K(f.stroke,"field")||p)delete f.stroke;else if(G(f.stroke)){const m=nn(H4(a.stroke||a.color),s.stroke,c?s.color:void 0);m&&(f.stroke={value:m})}}if(r!==Ol){const m=J(t)&&Sae(n,i,t);m?f.opacity=[{test:m,...Tt(g??1)},Tt(l.legend.unselectedOpacity)]:g&&(f.opacity=Tt(g))}return f={...f,...e},yt(f)?void 0:f}function OXe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?xae(s.opacity)||o.opacity:void 0;return u&&(a.opacity=Tt(u)),a={...a,...e},yt(a)?void 0:a}function NXe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=J(t)?Sae(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let f;gd(c)?f=us({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):u===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=us({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&J(t)&&t.timeUnit===void 0&&(f=us({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...l?{opacity:l}:{},...f?{text:f}:{},...e};return yt(d)?void 0:d}function IXe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function xae(e){return wae(e,(t,n)=>Math.max(t,n.value))}function H4(e){return wae(e,(t,n)=>nn(t,n.value))}function wae(e,t){if(Rqe(e))return ae(e.condition).reduce(t,e.value);if(bs(e))return e.value}function Sae(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=te(n.field);return r.map(o=>`(!length(data(${te(Ot(o)+yd)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const ZU={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Ioe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Loe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??WXe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??HXe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??zXe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>up(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(lp(n)&&ea(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>LXe(t,e)};function LXe(e,t){const n=e.values;if(G(n))return Koe(t,n);if(me(n))return n}function zXe(e,t,n,r){if(t!=="shape"){const i=H4(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function BXe(e){const{legend:t}=e;return nn(t.type,jXe(e))}function jXe({channel:e,timeUnit:t,scaleType:n}){if(lp(e)){if(Le(["quarter","month","day"],t))return"symbol";if(ea(n))return"gradient"}return"symbol"}function UXe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??VXe(n,t)}function VXe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function WXe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(ea(i))return n==="horizontal"?r==="top"||r==="bottom"?JU(t,"width",s,o):s:JU(t,"height",l,a)}function JU(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function HXe(e){if(Le(["quantile","threshold","log","symlog"],e))return"greedy"}function kae(e){const t=zt(e)?qXe(e):KXe(e);return e.component.legends=t,t}function qXe(e){const{encoding:t}=e,n={};for(const r of[wi,...vse]){const i=bn(t[r]);!i||!e.getScaleComponent(r)||r===Si&&J(i)&&i.type===Jg||(n[r]=XXe(e,r))}return n}function GXe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function YXe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function XXe(e,t){var x;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new RXe({},GXe(e,t));iXe(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=bn(i[t]),f=J(c)?(x=Dn(c.timeUnit))==null?void 0:x.unit:void 0,d=n.orient||o.legend.orient||"right",h=BXe({legend:n,channel:t,timeUnit:f,scaleType:u}),p=UXe({legend:n,legendType:h,orient:d,legendConfig:s}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:u,orient:d,legendType:h,direction:p};for(const w of bae){if(h==="gradient"&&w.startsWith("symbol")||h==="symbol"&&w.startsWith("gradient"))continue;const k=w in ZU?ZU[w](g):n[w];if(k!==void 0){const S=YXe(k,w,n,e.fieldDef(t));(S||o.legend[w]===void 0)&&a.set(w,k,S)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const w of["labels","legend","title","symbols","gradient","entries"]){const k=yae(m[w]??{},e),S=w in QU?QU[w](k,b):k;S!==void 0&&!yt(S)&&(v[w]={...y!=null&&y.length&&J(c)?{name:`${Ot(c.field)}_legend_${w}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return yt(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function KXe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){kae(r);for(const i of X(r.component.legends))n.legend[i]=$8(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Cae(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of X(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Cae(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of bae){const c=uc(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(f,d)=>{switch(u){case"symbolType":return QXe(f,d);case"title":return noe(f,d);case"type":return i=!0,$i("symbol")}return I_(f,d,u,"legend")});e.setWithExplicit(u,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&NS(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&NS(e.explicit,["encode","gradient"])),e}function QXe(e,t){return t.value==="circle"?t:e}function ZXe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function _ae(e){const t=e.component.legends,n={};for(const i of X(t)){const o=e.getScaleComponent(i),s=vt(o.get("domains"));if(n[s])for(const a of n[s])Cae(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return Zn(n).flat().map(i=>JXe(i,e.config)).filter(i=>i!==void 0)}function JXe(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const c of vse)o[c]&&delete u[c]}if(o.title||delete o.title,r!==void 0){let u=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&me(o.encode.labels.update.text)&&(u=cd(r,"datum.label",o.encode.labels.update.text.signal)),ZXe(o,"labels","text",{signal:u})}return o}}function eKe(e){return im(e)||R8(e)?tKe(e):Eae(e)}function tKe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Eae(e))}function Eae(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=me(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Le(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const nKe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class $ae extends Ll{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Aae(e){e.component.projection=zt(e)?rKe(e):sKe(e)}function rKe(e){if(e.hasProjection){const t=Vn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?iKe(e):void 0,o=new $ae(e.projectionName(!0),{...Vn(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function iKe(e){const t=[],{encoding:n}=e;for(const r of[[As,$s],[Oo,Ts]])(bn(n[r[0]])||bn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Si)&&e.typedFieldDef(Si).type===Jg&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Kt.Main)),t}function oKe(e,t){const n=xO(nKe,i=>!!(!ce(e.explicit,i)&&!ce(t.explicit,i)||ce(e.explicit,i)&&ce(t.explicit,i)&&Ii(e.get(i),t.get(i))));if(Ii(e.size,t.size)){if(n)return e;if(Ii(e.explicit,{}))return t;if(Ii(t.explicit,{}))return e}return null}function sKe(e){if(e.children.length===0)return;let t;for(const r of e.children)Aae(r);const n=xO(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=oKe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new $ae(r,t.specifiedProjection,t.size,Te(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function aKe(e,t,n,r){if(Bv(t,n)){const i=zt(e)?e.axis(n)??e.legend(n)??{}:{},o=ie(t,{expr:"datum"}),s=ie(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ie(t,{binSuffix:"range",forAs:!0}),formula:Nv(o,s,i.format,i.formatType,r)}}return{}}function Tae(e,t){return`${Yie(e)}_${t}`}function lKe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function A8(e,t,n){const r=P_(n,void 0)??{},i=Tae(r,t);return e.getName(`${i}_bins`)}function uKe(e){return"as"in e}function eV(e,t,n){let r,i;uKe(e)?r=le(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ie(e,{forAs:!0}),ie(e,{binSuffix:"end",forAs:!0})];const o={...P_(t,void 0)},s=Tae(o,e.field),{signal:a,extentSignal:l}=lKe(n,s);if(x_(o.extent)){const c=o.extent;i=aae(n,c.param,c),delete o.extent}const u={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:u}}class ca extends pt{clone(){return new ca(null,Te(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(Kr(o)&&Ct(o.bin)){const{key:a,binComponent:l}=eV(o,o.bin,n);i[a]={...l,...i[a],...aKe(n,o,s,n.config)}}return i},{});return yt(r)?null:new ca(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=eV(n,n.bin,r);return new ca(t,{[i]:o})}merge(t,n){for(const r of X(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Js([...this.bins[r].as,...t.bins[r].as],Be)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Zn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Zn(this.bins).map(t=>t.field))}hash(){return`Bin ${Be(this.bins)}`}assemble(){return Zn(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:Do(t.field),as:r,signal:t.signal,...x_(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:Do(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:ie({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function cKe(e,t,n,r){var o;const i=zt(r)?r.encoding[Ma(t)]:void 0;if(Kr(n)&&zt(r)&&Uoe(n,i,r.markDef,r.config)){e.add(ie(n,{})),e.add(ie(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,u=lc({fieldDef:n,markDef:a,config:l});x1(s)&&u!==.5&&rn(t)&&(e.add(ie(n,{suffix:L_})),e.add(ie(n,{suffix:z_}))),n.bin&&Bv(n,t)&&e.add(ie(n,{binSuffix:"range"}))}else if(zie(t)){const s=Lie(t);e.add(r.getName(s))}else e.add(ie(n));return jd(n)&&JHe((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function fKe(e,t){for(const n of X(t)){const r=t[n];for(const i of X(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class hs extends pt{clone(){return new hs(null,new Set(this.dimensions),Te(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:l,field:u}=s;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ie(s,{forAs:!0})]);else{if(El(l)||Mc(l)){const c=El(l)?"argmin":"argmax",f=l[c];i[f]??(i[f]={}),i[f][c]=new Set([ie({op:c,field:f},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([ie(s,{forAs:!0})]);Pa(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([ie({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([ie({field:u,aggregate:"max"},{forAs:!0})]))}else cKe(o,a,s,n)}),o.size+X(i).length===0)?null:new hs(t,o,i)}static makeFromTransform(t,n){var r;const i=new Set,o={};for(const s of n.aggregate){const{op:a,field:l,as:u}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([u||ie(s,{forAs:!0})])):(o[l]??(o[l]={}),(r=o[l])[a]??(r[a]=new Set),o[l][a].add(u||ie(s,{forAs:!0}))))}for(const s of n.groupby??[])i.add(s);return i.size+X(o).length===0?null:new hs(t,i,o)}merge(t){return Mie(this.dimensions,t.dimensions)?(fKe(this.measures,t.measures),!0):(CHe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...X(this.measures)])}producedFields(){const t=new Set;for(const n of X(this.measures))for(const r of X(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Be({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of X(this.measures))for(const s of X(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:Do(o));return{type:"aggregate",groupby:[...this.dimensions].map(Do),ops:t,fields:n,as:r}}}class nm extends pt{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of ko){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:n.getName(`${o}_domain`),fields:[ie(s),...Ct(a)?[ie(s,{binSuffix:"end"})]:[]],...pl(l)?{sortField:l}:G(l)?{sortIndexField:wg(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of ko)this[n]&&(t+=` ${n.charAt(0)}:${Be(this[n])}`);return t}get fields(){var n;const t=[];for(const r of ko)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of ko)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Nl){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(On(i)&&Ld(o)){const s=W_(this.childModel,n),a=F8(s);a?t[n]=a:Z(DO(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=A_,field:f}=l;o.push(f),s.push(c),a.push(ie(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const u of C8){for(const c of _8){const f=(r[u]&&r[u][c])??[];for(const d of f)if(((l=d.axes)==null?void 0:l.length)>0){o[u]=!0;break}}if(o[u]){const c=`length(data("${this.facet.name}"))`,f=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[hl,dl])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function tV(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function dKe(e,t){const n=kO(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=tV(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=tV(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Z(RWe(t)),null}function hKe(e){const t={};return C2(e.filter,n=>{if(boe(n)){let r=null;LO(n)?r=Fi(n.equal):BO(n)?r=Fi(n.lte):zO(n)?r=Fi(n.lt):jO(n)?r=Fi(n.gt):UO(n)?r=Fi(n.gte):VO(n)?r=n.range[0]:WO(n)&&(r=(n.oneOf??n.in)[0]),r&&(zd(r)?t[n.field]="date":Qe(r)?t[n.field]="number":le(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function pKe(e){const t={};function n(r){yg(r)?t[r.field]="date":r.type==="quantitative"&&cWe(r.aggregate)?t[r.field]="number":cg(r.field)>1?r.field in t||(t[r.field]="flatten"):jd(r)&&pl(r.sort)&&cg(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((zt(e)||Wi(e))&&e.forEachFieldDef((r,i)=>{if(Kr(r))n(r);else{const o=Nd(i),s=e.fieldDef(o);n({...r,type:s.type})}}),zt(e)){const{mark:r,markDef:i,encoding:o}=e;if(Pc(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];J(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function gKe(e){const t={};if(zt(e)&&e.component.selection)for(const n of X(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&cg(i.field)>1&&(t[i.field]="flatten")}return t}class vr extends pt{clone(){return new vr(null,Te(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Be(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!Wu(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of X(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:Z(cU(a,r[a],l.value)))}for(const a of X(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:Z(cU(a,n[a],l)))}const o=new Ll(n,r);i.copyAll(o);const s={};for(const a of X(o.combine())){const l=o.get(a);l!==null&&(s[a]=l)}return X(s).length===0||i.parseNothing?null:new vr(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of X(this._parse)){const r=this._parse[n];cg(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(X(this._parse))}dependentFields(){return new Set(X(this._parse))}assembleTransforms(t=!1){return X(this._parse).filter(n=>t?cg(n)>1:!0).map(n=>{const r=dKe(n,this._parse[n]);return r?{type:"formula",expr:r,as:Qg(n)}:null}).filter(n=>n!==null)}}class fc extends pt{clone(){return new fc(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ws])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ws}}}class Vv extends pt{clone(){return new Vv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Be(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Wv extends pt{clone(){return new Wv(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Be(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class vd extends pt{constructor(t){super(null),t??(t={name:"source"});let n;if(Wu(t)||(n=t.format?{...pi(t.format,["parse"])}:{}),w1(t))this._data={values:t.values};else if(vg(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Le(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else Nse(t)?this._data={values:[{type:"Sphere"}]}:(Dse(t)||Wu(t))&&(this._data={});this._generator=Wu(t),t.name&&(this._name=t.name),n&&!yt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var nV=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},mKe=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},P0;function T8(e){return e instanceof vd||e instanceof Vv||e instanceof Wv}class M8{constructor(){P0.set(this,void 0),nV(this,P0,!1,"f")}setModified(){nV(this,P0,!0,"f")}get modifiedFlag(){return mKe(this,P0,"f")}}P0=new WeakMap;class Ud extends M8{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class P8 extends M8{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class yKe extends P8{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of X(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class vKe extends P8{constructor(t){super(),this.requiresSelectionId=t&&k8(t)}run(t){t instanceof fc&&(this.requiresSelectionId&&(T8(t.parent)||t.parent instanceof hs||t.parent instanceof vr)||(this.setModified(),t.remove()))}}class bKe extends M8{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof ua&&(r=t.producedFields(),wO(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class xKe extends P8{constructor(){super()}run(t){t instanceof gi&&!t.isRequired()&&(this.setModified(),t.remove())}}class wKe extends Ud{run(t){if(!T8(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof vr)if(t instanceof vr)this.setModified(),t.merge(n);else{if(SO(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class SKe extends Ud{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof vr);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of X(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!yt(i)){this.setModified();const s=new vr(t,i);for(const a of n){if(a instanceof vr)for(const l of X(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof vr&&X(a.parse).length===0&&a.remove()}}}}}class kKe extends Ud{run(t){t instanceof gi||t.numChildren()>0||t instanceof nm||t instanceof vd||(this.setModified(),t.remove())}}class CKe extends Ud{run(t){const n=t.children.filter(i=>i instanceof ua),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class _Ke extends Ud{run(t){const n=t.children.filter(i=>i instanceof hs),r={};for(const i of n){const o=Be(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of X(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class EKe extends Ud{constructor(t){super(),this.model=t}run(t){const n=!(T8(t)||t instanceof tm||t instanceof vr||t instanceof fc),r=[],i=[];for(const o of t.children)o instanceof ca&&(n&&!SO(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ca?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class $Ke extends Ud{run(t){const n=[...t.children];if(!ug(n,s=>s instanceof gi)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof gi){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof gi)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class Vd extends pt{clone(){return new Vd(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Js(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ie(t)}hash(){return`JoinAggregateTransform ${Be(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class kg extends pt{clone(){return new kg(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:s,scales:a}=r;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,f)=>{const d=Pa(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,g=QO({scaleChannel:f,markDef:o,config:i,scaleType:h,isCountAggregate:b_(p)});g!=="show"&&g!=="always-valid"&&(u[c.field]=c)}return u},{});return X(l).length?new kg(t,l):null}dependentFields(){return new Set(X(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Be(this.filter)}`}assemble(){const t=X(this.filter).reduce((n,r)=>{const i=this.filter[r],o=ie(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${q4(o)}))`):i.type==="quantitative"&&n.push(q4(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function q4(e){return`isValid(${e}) && isFinite(+${e})`}function AKe(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ie(r);return i&&t.push(i),t},[])}function TKe(e){return G(e)&&e.every(t=>le(t))&&e.length>1}class ml extends pt{clone(){return new ml(null,Te(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),l.push(nn(f.order,"ascending"));const u={field:a,order:l};let c;return TKe(o)?c=o:le(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new ml(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=r,u=o.map(h=>{const p=i[h];return xs(p)}).filter(h=>!!h),c=AKe(n),f=n.encoding.order;let d;if(G(f)||J(f))d=Jie(f);else{const h=Voe(f)?f.sort:s==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new ml(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Be(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ie(i,{binSuffix:"mid"})]:[ie(i,{}),ie(i,{binSuffix:"end"})]:[ie(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ie(c,{expr:"datum"}),p=ie(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${q4(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:ie(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:ie(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:u,offset:a}),t}}class rm extends pt{clone(){return new rm(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Js(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ie(t)}hash(){return`WindowTransform ${Be(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>FO(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),l.push(f.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function MKe(e){function t(n){if(!(n instanceof nm)){const r=n.clone();if(r instanceof gi){const i=Y4+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof hs||r instanceof ml||r instanceof rm||r instanceof Vd)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function G4(e){if(e instanceof nm)if(e.numChildren()===1&&!(e.children[0]instanceof gi)){const t=e.children[0];(t instanceof hs||t instanceof ml||t instanceof rm||t instanceof Vd)&&t.addDimensions(e.fields),t.swapWithParent(),G4(e)}else{const t=e.model.component.data.main;Mae(t);const n=MKe(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(G4)}function Mae(e){if(e instanceof gi&&e.type===Kt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof nm||(t.swapWithParent(),Mae(e))}}const Y4="scale_",dx=5;function X4(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!X4(t.children))return!1}return!0}function Uo(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function rV(e,t,n){let r=e.sources,i=!1;return i=Uo(new xKe,r)||i,i=Uo(new vKe(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Uo(new kKe,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Uo(new wKe,r)||i,i=Uo(new EKe(t),r)||i,i=Uo(new bKe,r)||i,i=Uo(new SKe,r)||i,i=Uo(new _Ke,r)||i,i=Uo(new CKe,r)||i,i=Uo(new yKe,r)||i,i=Uo(new $Ke,r)||i),e.sources=r,i}function PKe(e,t){X4(e.sources);let n=0,r=0;for(let i=0;i<dx&&rV(e,t,!0);i++)n++;e.sources.map(G4);for(let i=0;i<dx&&rV(e,t,!1);i++)r++;X4(e.sources),Math.max(n,r)===dx&&Z(`Maximum optimization runs(${dx}) reached.`)}class $n{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new $n(()=>t(n))}}function Pae(e){zt(e)?FKe(e):RKe(e)}function FKe(e){const t=e.component.scales;for(const n of X(t)){const r=OKe(e,n);if(t[n].setWithExplicit("domains",r),IKe(e,n),e.component.data.isFaceted){let o=e;for(;!Wi(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)il(a)&&(a.data=Y4+a.data.replace(Y4,""))}}}function RKe(e){for(const n of e.children)Pae(n);const t=e.component.scales;for(const n of X(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=uc(r,s.getWithExplicit("domains"),"domains","scale",K4);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&Z(TWe),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function DKe(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=iV(t,n);if(!i){Z(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=iV(t,n);if(i)return"unaggregated"}return e}function OKe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=DKe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&bn(r.x2)?bn(r.x)?uc(Yl(n,i,e,"x"),Yl(n,i,e,"x2"),"domain","scale",K4):Yl(n,i,e,"x2"):t==="y"&&bn(r.y2)?bn(r.y)?uc(Yl(n,i,e,"y"),Yl(n,i,e,"y2"),"domain","scale",K4):Yl(n,i,e,"y2"):Yl(n,i,e,t)}function NKe(e,t,n){return e.map(r=>({signal:`{data: ${F_(r,{timeUnit:n,type:t})}}`}))}function GA(e,t,n){var i;const r=(i=Dn(n))==null?void 0:i.unit;return t==="temporal"||r?NKe(e,t,r):[e]}function Yl(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,u=bn(i[r]),{type:c}=u,f=u.timeUnit,d=MYe({invalid:ya("invalid",o,a),isPath:Pc(s)});if(ZHe(t)){const g=Yl(e,void 0,n,r),m=GA(t.unionWith,c,f);return zs([...m,...g.value])}else{if(me(t))return zs([t]);if(t&&t!=="unaggregated"&&!Eoe(t))return zs(GA(t,c,f))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return $i([[0,1]]);const g=n.requestDataName(d);return $i([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=Pa(r)&&J(u)?LKe(n,r,e):void 0;if(Fa(u)){const g=GA([u.datum],c,f);return $i(g)}const p=u;if(t==="unaggregated"){const{field:g}=u;return $i([{data:n.requestDataName(d),field:ie({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:ie({field:g,aggregate:"max"})}])}else if(Ct(p.bin)){if(On(e))return $i(e==="bin-ordinal"?[]:[{data:v1(h)?n.requestDataName(d):n.requestDataName(Kt.Raw),field:n.vgField(r,Bv(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!se(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if(Ct(g)){const m=A8(n,p.field,g);return $i([new $n(()=>{const y=n.getSignalName(m);return`[${y}.start, ${y}.stop]`})])}else return $i([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Le(["time","utc"],e)){const g=i[Ma(r)];if(Uoe(p,g,o,a)){const m=n.requestDataName(d),y=lc({fieldDef:p,fieldDef2:g,markDef:o,config:a}),v=x1(s)&&y!==.5&&rn(r);return $i([{data:m,field:n.vgField(r,v?{suffix:L_}:{})},{data:m,field:n.vgField(r,{suffix:v?z_:"end"})}])}}return $i(h?[{data:v1(h)?n.requestDataName(d):n.requestDataName(Kt.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function YA(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":A_),...r?{field:Do(r)}:{},...i?{order:i}:{}}}function IKe(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=Eoe(r)?r:void 0,s=Id(i)&&x_(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function LKe(e,t,n){if(!On(n))return;const r=e.fieldDef(t),i=r.sort;if(Boe(i))return{op:"min",field:wg(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(pl(i)){const a=o&&!s.has(i.field);return YA(i,a)}else if(Mqe(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:f}=u,d=o&&!s.has(f);if(El(c)||Mc(c))return YA({field:ie(u),order:l},d);if(FO(c)||!c)return YA({op:c,field:f,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Le(["ascending",void 0],i))return!0}}function iV(e,t){const{aggregate:n,type:r}=e;return n?le(n)&&!dWe.has(n)?{valid:!1,reason:tHe(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:nHe(e)}:{valid:!0}:{valid:!1,reason:eHe(e)}}function K4(e,t,n,r){return e.explicit&&t.explicit&&Z(aHe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function zKe(e){const t=Js(e.map(s=>{if(il(s)){const{sort:a,...l}=s;return l}return s}),Be),n=Js(e.map(s=>{if(il(s)){const a=s.sort;return a!==void 0&&!v1(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Be);if(t.length===0)return;if(t.length===1){const s=e[0];if(il(s)&&n.length>0){let a=n[0];if(n.length>1){Z(dU);const l=n.filter(u=>se(u)&&"op"in u&&u.op!=="min");n.every(u=>se(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(se(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=Js(n.map(s=>v1(s)||!("op"in s)||le(s.op)&&ce(lWe,s.op)?s:(Z(uHe(s)),!0)),Be);let i;r.length===1?i=r[0]:r.length>1&&(Z(dU),i=!0);const o=Js(e.map(s=>il(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function F8(e){if(il(e)&&le(e.field))return e.field;if(hWe(e)){let t;for(const n of e.fields)if(il(n)&&le(n.field)){if(!t)t=n.field;else if(t!==n.field)return Z(cHe),t}return Z(fHe),t}else if(pWe(e)){Z(dHe);const t=e.fields[0];return le(t)?t:void 0}}function W_(e,t){const r=e.component.scales[t].get("domains").map(i=>(il(i)&&(i.data=e.lookupDataSource(i.data)),i));return zKe(r)}function Fae(e){return im(e)||R8(e)?e.children.reduce((t,n)=>t.concat(Fae(n)),oV(e)):oV(e)}function oV(e){return X(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:c,...f}=i,d=BKe(i.range,o,n,e),h=W_(e,n),p=a?NYe(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function BKe(e,t,n,r){if(rn(n)){if(Ld(e))return{step:{signal:`${t}_step`}}}else if(se(e)&&il(e))return{...e,data:r.lookupDataSource(e.data)};return e}class Rae extends Ll{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Le([Hn.LOG,Hn.TIME,Hn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Le([Hn.LINEAR,Hn.SQRT,Hn.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,s=!1;for(const a of r){if(G(a)){const l=a[0],u=a[a.length-1];if(Qe(l)&&Qe(u))if(l<=0&&u>=0){i=!0;continue}else{o=!0;continue}}s=!0}if(i)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const jKe=["range","scheme"];function UKe(e){const t=e.component.scales;for(const n of PO){const r=t[n];if(!r)continue;const i=VKe(n,e);r.setWithExplicit("range",i)}}function sV(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=ki(t),s=e.getName(o);if(se(r)&&r.binned&&r.step!==void 0)return new $n(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(Ct(r)){const a=A8(e,i,r);return new $n(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function VKe(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of jKe)if(n[f]!==void 0){const d=F4(o,f),h=$oe(e,f);if(!d)Z(soe(o,f,e));else if(h)Z(h);else switch(f){case"range":{const p=n.range;if(G(p)){if(rn(e))return zs(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return $n.fromName(y,m)}return g}))}else if(se(p))return zs({data:t.requestDataName(Kt.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return zs(p)}case"scheme":return zs(WKe(n[f]))}}const s=e===Nt||e==="xOffset"?"width":"height",a=r[s];if(ba(a)){if(rn(e))if(On(o)){const f=Oae(a,t,e);if(f)return zs({step:f})}else Z(aoe(s));else if(Rv(e)){const f=e===_c?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Nae(a,o);if(p)return zs(p)}}}const{rangeMin:l,rangeMax:u}=n,c=HKe(e,t);return(l!==void 0||u!==void 0)&&F4(o,"rangeMin")&&G(c)&&c.length===2?zs([l??c[0],u??c[1]]):$i(c)}function WKe(e){return QHe(e)?{scheme:e.name,...pi(e,["name"])}:{scheme:e}}function Dae(e,t,n,{center:r}={}){const i=ki(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===Ln&&vs(n)?r?[$n.fromName(a=>`${s(a)}/2`,o),$n.fromName(a=>`-${s(a)}/2`,o)]:[$n.fromName(s,o),0]:r?[$n.fromName(a=>`-${s(a)}/2`,o),$n.fromName(a=>`${s(a)}/2`,o)]:[0,$n.fromName(s,o)]}function HKe(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=bn(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case Nt:case Ln:{if(Le(["point","band"],l)){const f=Iae(e,n,r.view);if(ba(f))return{step:Oae(f,t,e)}}return Dae(e,t,l)}case _c:case Zg:return qKe(e,t,l);case Dl:{const f=XKe(i,r),d=KKe(i,n,t,r);return pg(l)?YKe(f,d,GKe(l,r,u,e)):[f,d]}case Io:return[0,Math.PI*2];case Od:return[0,360];case Es:return[0,new $n(()=>{const f=t.getSignalName(Wi(t.parent)?"child_width":"width"),d=t.getSignalName(Wi(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Ac:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Tc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Si:return"symbol";case wi:case Aa:case Ta:return l==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Ol:case Ec:case $c:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Oae(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=$O(n),s=r[o];if(xse({step:e,offsetIsDiscrete:Pe(s)&&woe(s.type)})==="offset"&&ese(r,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${vWe(f)})`}}else return e.step}function Nae(e,t){if(xse({step:e,offsetIsDiscrete:On(t)})==="offset")return{step:e.step}}function qKe(e,t,n){const r=e===_c?"x":"y",i=t.getScaleComponent(r);if(!i)return Dae(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const u=Iae(r,t.size,t.config.view);if(ba(u)){const c=Nae(u,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{const u=t.encoding[r];if(J(u)&&u.timeUnit){const c=yoe(u.timeUnit,p=>`scale('${s}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=lc({fieldDef:u,markDef:a,config:l})-.5,h=d!==0?` + ${d}`:"";if(f){const p=me(f)?`${f.signal}/2`+h:`${f/2+d}`,g=me(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${g} * (${c})`}]}return[0,{signal:c}]}return Aie(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function Iae(e,t,n){const r=e===Nt?"width":"height",i=t[r];return i||HS(n,r)}function GKe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&G(n)?n.length+1:(Z(wHe(r)),3)}}function YKe(e,t,n){const r=()=>{const i=ls(t),o=ls(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return me(t)?new $n(r):{signal:r()}}function XKe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(w_("size",e))}const aV=.95;function KKe(e,t,n,r){const i={x:sV(n,"x"),y:sV(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=lV(t,i,r.view);return Qe(o)?o-1:new $n(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=lV(t,i,r.view);return Qe(o)?Math.pow(aV*o,2):new $n(()=>`pow(${aV} * ${o.signal}, 2)`)}}throw new Error(w_("size",e))}function lV(e,t,n){const r=ba(e.width)?e.width.step:N4(n,"width"),i=ba(e.height)?e.height.step:N4(n,"height");return t.x||t.y?new $n(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function Lae(e,t){zt(e)?QKe(e,t):Bae(e,t)}function QKe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of X(n)){const l=s[a],u=n[a],c=e.getScaleComponent(a),f=bn(i[a]),d=l[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=F4(h,t),y=$oe(a,t);if(d!==void 0&&(m?y&&Z(y):Z(soe(h,t,a))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":zd(l[t])||b==="temporal"||v?u.set(t,{signal:F_(l[t],{type:b,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=K(uV,t)?uV[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:tse(i,a),hasSecondaryRangeChannel:!!i[Ma(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const uV={bins:({model:e,fieldOrDatumDef:t})=>J(t)?ZKe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>JKe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>eQe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>tQe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>nQe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>rQe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=J(e)?e.sort:void 0;return iQe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>oQe(e,t,n,r,i,o.scale,s)};function zae(e){zt(e)?UKe(e):Bae(e,"range")}function Bae(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?zae(r):Lae(r,t);for(const r of X(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=uc(i,a,t,"scale",Rse((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function ZKe(e,t){const n=t.bin;if(Ct(n)){const r=A8(e,t.field,n);return new $n(()=>e.getSignalName(r))}else if(jn(n)&&Id(n)&&n.step!==void 0)return{step:n.step}}function JKe(e,t){if(Le([wi,Aa,Ta],e)&&t!=="nominal")return"hcl"}function eQe(e,t,n,r,i,o){var s;if(!((s=xs(o))!=null&&s.bin||G(n)||i!=null||r!=null||Le([Hn.TIME,Hn.UTC],e)))return rn(t)?!0:void 0}function tQe(e,t,n,r,i,o){if(rn(e)){if(ea(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(J(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Hn.POINT)return n.pointPadding}}function nQe(e,t,n,r,i,o=!1){if(e===void 0){if(rn(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=i;return o?c:nn(s,n==="bar"?a:n==="tick"?u:l)}else if(Rv(t)&&r===Hn.BAND)return i.offsetBandPaddingInner}}function rQe(e,t,n,r,i,o=!1){if(e===void 0){if(rn(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===Hn.BAND)return nn(s,me(r)?{signal:`${r.signal}/2`}:r/2)}else if(Rv(t)){if(n===Hn.POINT)return .5;if(n===Hn.BAND)return i.offsetBandPaddingOuter}}}function iQe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return vs(e)&&t==="descending"?me(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(vs(e)&&t==="descending")return!0}function oQe(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&vs(i)){if(G(n)){const l=n[0],u=n[n.length-1];if(Qe(l)&&l<=0&&Qe(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!pg(i))return!0;if(!(J(t)&&t.bin)&&Le([...Nl,...eWe],e)){const{orient:l,type:u}=r;return Le(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Le(["bar","area"],u)&&!s?!0:o==null?void 0:o.zero}return!1}function sQe(e,t,n,r,i=!1){const o=aQe(t,n,r,i),{type:s}=e;return Pa(t)?s!==void 0?iqe(t,s)?J(n)&&!rqe(s,n.type)?(Z(oHe(s,o)),o):s:(Z(iHe(t,s,o)),o):o:null}function aQe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(lp(e)||LA(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Z(zA(e,"ordinal")),"ordinal";if(rn(e)||Rv(e)){if(Le(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in MO)return"band";const o=n[ki(e)];return pd(o)||mg(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return lp(e)?"time":LA(e)==="discrete"?(Z(zA(e,"temporal")),"ordinal"):J(t)&&t.timeUnit&&Dn(t.timeUnit).utc?"utc":"time";case"quantitative":return lp(e)?J(t)&&Ct(t.bin)?"bin-ordinal":"linear":LA(e)==="discrete"?(Z(zA(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(ioe(t.type))}function lQe(e,{ignoreRange:t}={}){jae(e),Pae(e);for(const n of nqe)Lae(e,n);t||zae(e)}function jae(e){zt(e)?e.component.scales=uQe(e):e.component.scales=fQe(e)}function uQe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of PO){const s=bn(t[o]);if(s&&n===Moe&&o===Si&&s.type===Jg)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=tse(t,o),u=sQe(a,o,s,r,l);i[o]=new Rae(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const cQe=Rse((e,t)=>pU(e)-pU(t));function fQe(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){jae(o);for(const s of X(o.component.scales))if((t=i.scale)[s]??(t[s]=vae(s,e)),i.scale[s]==="shared"){const a=r[s],l=o.component.scales[s].getWithExplicit("type");a?qHe(a.value,l.value)?r[s]=uc(a,l,"type","scale",cQe):(i.scale[s]="independent",delete r[s]):r[s]=l}}for(const o of X(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new Rae(s,a);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return n}class XA{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function zt(e){return(e==null?void 0:e.type)==="unit"}function Wi(e){return(e==null?void 0:e.type)==="facet"}function R8(e){return(e==null?void 0:e.type)==="concat"}function im(e){return(e==null?void 0:e.type)==="layer"}class D8{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.correctDataNames=l=>{var u,c,f;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(f=(c=l.from)==null?void 0:c.facet)!=null&&f.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=r,this.config=o,this.view=Vn(a),this.name=t.name??i,this.title=ru(t.title)?{text:t.title}:t.title?Vn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new XA,this.projectionNameMap=r?r.projectionNameMap:new XA,this.signalNameMap=r?r.signalNameMap:new XA,this.data=t.data,this.description=t.description,this.transforms=vYe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:SGe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:T_(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Ll,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Te(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){lQe(this)}parseProjection(){Aae(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){kae(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of X(r)){const s=r[o];s!==void 0&&(i[o]=Tt(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Tt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:yt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=PXe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of ko)t[r].title&&n.push(_Xe(this,r));for(const r of C8)n=n.concat(EXe(this,r));return n}assembleAxes(){return dXe(this.component.axes,this.config)}assembleLegends(){return _ae(this)}assembleProjections(){return eKe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...Xie(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Le(["unit","layer"],this.type)?Le(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),yt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Wi(this.parent)?Fae(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Ot((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Kt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Wi(this.parent)){const n=mae(t),r=v_(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(On(o)&&Ld(s)){const a=i.get("name"),l=W_(this,r),u=F8(l);if(u){const c=ie({aggregate:"distinct",field:u},{expr:"datum"});return{signal:gae(a,i,c)}}else return Z(DO(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(jie(t)&&Pa(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(kWe(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Uae extends D8{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ie(r,n)}reduceFieldDef(t,n){return Qqe(this.getMapping(),(r,i,o)=>{const s=xs(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){s8(this.getMapping(),(r,i)=>{const o=xs(r);o&&t(o,i)},n)}}class H_ extends pt{clone(){return new H_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Be(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class q_ extends pt{clone(){return new q_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Be(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class G_ extends pt{clone(){return new G_(this.parent,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Be(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Y_ extends pt{clone(){return new Y_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Be(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class fp extends pt{clone(){return new fp(null,Te(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[As,$s],[Oo,Ts]]){const o=i.map(s=>{const a=bn(n.encoding[s]);return J(a)?a.field:Fa(a)?{expr:`${a.datum}`}:bs(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new fp(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Si)){const i=n.typedFieldDef(Si);i.type===Jg&&(t=new fp(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(le);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Be(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class S1 extends pt{clone(){return new S1(null,this.projection,Te(this.fields),Te(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[As,$s],[Oo,Ts]]){const i=r.map(s=>{const a=bn(n.encoding[s]);return J(a)?a.field:Fa(a)?{expr:`${a.datum}`}:bs(a)?{expr:`${a.value}`}:void 0}),o=r[0]===Oo?"2":"";(i[0]||i[1])&&(t=new S1(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(le))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Be(this.fields)} ${Be(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Hf extends pt{clone(){return new Hf(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Hf(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(J(i)&&J(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:l,value:u,frame:c,keyvals:f}=s.impute,d=ise(n.mark,r);return new Hf(t,{impute:s.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Be(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:JGe(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class X_ extends pt{clone(){return new X_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Be(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class k1 extends pt{clone(){return new k1(null,Te(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(eYe(s)){let l=Hae(s.data,o);l||(l=new vd(s.data),o.push(l));const u=n.getName(`lookup_${i}`);a=new gi(l,u,Kt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(tYe(s)){const l=s.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(Ot(l),l)}catch{throw new Error($We(l))}if(a=u.materialized,!a)throw new Error(AWe(l))}return new k1(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ae(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Be({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ae(this.transform.as)}:{}};else{let n=this.transform.as;le(n)||(Z(NWe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class K_ extends pt{clone(){return new K_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Be(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Q_ extends pt{clone(){return new Q_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Te(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Be(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class Z_ extends pt{clone(){return new Z_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Js((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Be(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class J_ extends pt{clone(){return new J_(null,Te(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Be(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Vae(e){let t=0;function n(r,i){if(r instanceof vd&&!r.isGenerator&&!vg(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof vr&&(r.parent instanceof vd&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof nm){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof Vv||r instanceof Wv||r instanceof kg||r instanceof tm||r instanceof xg||r instanceof S1||r instanceof hs||r instanceof k1||r instanceof rm||r instanceof Vd||r instanceof Y_||r instanceof G_||r instanceof H_||r instanceof X_||r instanceof K_||r instanceof Q_||r instanceof fc||r instanceof J_||r instanceof Z_||r instanceof q_)&&i.transform.push(r.assemble()),(r instanceof ca||r instanceof ua||r instanceof Hf||r instanceof ml||r instanceof fp)&&i.transform.push(...r.assemble()),r instanceof gi&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof gi?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof gi&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function dQe(e){const t=[],n=Vae(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function hQe(e,t){const n=[],r=Vae(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function pQe(e){return e==="top"||e==="left"||me(e)?"header":"footer"}function gQe(e){for(const t of ko)mQe(e,t);cV(e,"x"),cV(e,"y")}function mQe(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=Sg("title",null,r,t);let u=up(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=G(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Sg("labelOrient",a.header,r,t),f=a.header!==null?nn((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=Le(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[Wae(e,t,f)]}}}function Wae(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function cV(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=$8(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=pQe(a.get("orient"));s[l]??(s[l]=[Wae(e,o,!1)]);const u=M0(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function yQe(e){O8(e),XS(e,"width"),XS(e,"height")}function vQe(e){O8(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";XS(e,t),XS(e,n)}function O8(e){for(const t of e.children)t.parseLayoutSize()}function XS(e,t){const n=mae(t),r=v_(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??vae(r,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=uc(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function bQe(e){const{size:t,component:n}=e;for(const r of Nl){const i=ki(r);if(t[i]){const o=t[i];n.layoutSize.set(i,ba(o)?"step":o,!0)}else{const o=xQe(e,i);n.layoutSize.set(i,o,!1)}}}function xQe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(On(o)){const a=HS(r.view,t);return Ld(s)||ba(a)?"step":a}else return O4(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return O4(r.view,t);{const o=HS(r.view,t);return ba(o)?o.step:o}}}function Q4(e,t,n){return ie(t,{suffix:`by_${ie(e)}`,...n})}class gy extends Uae{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=B8(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Iv(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=X(t),r={};for(const i of n){if(![dl,hl].includes(i)){Z(w_(i,"facet"));break}const o=t[i];if(o.field===void 0){Z(M4(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=o8(t,n);return r.header?r.header=Vn(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return K(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=eE(this),this.child.parseData()}parseLayoutSize(){O8(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),gQe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of ko)for(const r of _8){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=Sg("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const l=U_(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof gy))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof gy?{...this.channelHasField("column")?{encode:{update:{columns:{field:ie(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof gy){if(this.child.channelHasField("column")){const i=ie(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Nl){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(On(s)&&Ld(a)){const l=W_(this.child,i),u=F8(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):Z(DO(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of ko){const f=this.facet[c];if(f){l.push(ie(f));const{bin:d,sort:h}=f;if(Ct(d)&&l.push(ie(f,{binSuffix:"end"})),pl(h)){const{field:p,op:g=A_}=h,m=Q4(f,h);r&&i?(o.push(m),s.push("max"),a.push(m)):(o.push(p),s.push(g),a.push(m))}else if(G(h)){const p=wg(f,c);o.push(p),s.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?pl(r.sort)?[Q4(r,r.sort,{expr:"datum"})]:G(r.sort)?[wg(r,t,{expr:"datum"})]:[ie(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(pl(i)?i.order:!G(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return W4(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of C8)if(t[o]){const s=Sg("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return W4(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=dQe(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:ko.map(l=>this.facetSortFields(l)).flat(),order:ko.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(FYe(this,[]))}]}getMapping(){return this.facet}}function wQe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(pl(o.sort)){const{field:s,op:a=A_}=o.sort;e=i=new Vd(e,{joinaggregate:[{op:a,field:s,as:Q4(o,o.sort,{forAs:!0})}],groupby:[ie(o)]})}return i}return null}function Hae(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((l||f)&&l!==f)){if(w1(e)&&w1(a)){if(Ii(e.values,a.values))return s}else if(vg(e)&&vg(a)){if(e.url===a.url)return s}else if(Dse(e)&&e.name===s.dataName)return s}}return null}function SQe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new vd({values:[]});return t.push(r),r}const n=Hae(e.data,t);if(n)return Wu(e.data)||(n.data.format=Tie({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new vd(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function kQe(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(fYe(i))s=e=new xg(e,i),o="derived";else if(y8(i)){const a=hKe(i);s=e=vr.makeWithAncestors(e,{},a,n)??e,e=new tm(e,t,i.filter)}else if(Tse(i))s=e=ca.makeFromTransform(e,i,t),o="number";else if(hYe(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new vr(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=ua.makeFromTransform(e,i);else if(pYe(i))s=e=hs.makeFromTransform(e,i),o="number",k8(t)&&(e=new fc(e));else if(Ase(i))s=e=k1.make(e,t,i,r++),o="derived";else if(lYe(i))s=e=new rm(e,i),o="number";else if(uYe(i))s=e=new Vd(e,i),o="number";else if(gYe(i))s=e=ml.makeFromTransform(e,i),o="derived";else if(mYe(i))s=e=new Y_(e,i),o="derived";else if(yYe(i))s=e=new q_(e,i),o="derived";else if(cYe(i))s=e=new G_(e,i),o="derived";else if(nYe(i))s=e=new Z_(e,i),o="derived";else if(aYe(i))e=new J_(e,i);else if(dYe(i))s=e=Hf.makeFromTransform(e,i),o="derived";else if(rYe(i))s=e=new H_(e,i),o="derived";else if(iYe(i))s=e=new K_(e,i),o="derived";else if(oYe(i))s=e=new Q_(e,i),o="derived";else if(sYe(i))s=e=new X_(e,i),o="derived";else{Z(OWe(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function eE(e){var m;let t=SQe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(Wu(i)||vg(i)||w1(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new TYe;Wu(i)?(Ose(i)?t=new Wv(t,i.sequence):v8(i)&&(t=new Vv(t,i.graticule)),s.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(s.parseNothing=!0),t=vr.makeExplicit(t,e,s)??t,t=new fc(t);const a=e.parent&&im(e.parent);(zt(e)||Wi(e))&&a&&(t=ca.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=kQe(t,e,s));const l=gKe(e),u=pKe(e);t=vr.makeWithAncestors(t,{},{...l,...u},s)??t,zt(e)&&(t=fp.parseAll(t,e),t=S1.parseAll(t,e)),(zt(e)||Wi(e))&&(a||(t=ca.makeFromEncoding(t,e)??t),t=ua.makeFromEncoding(t,e)??t,t=xg.parseAllForSortIndex(t,e));const c=t=hx(Kt.Raw,e,t);if(zt(e)){const y=hs.makeFromEncoding(t,e);y&&(t=y,k8(e)&&(t=new fc(t))),t=Hf.makeFromEncoding(t,e)??t,t=ml.makeFromEncoding(t,e)??t}let f,d;if(zt(e)){const{markDef:y,mark:v,config:b}=e,x=gt("invalid",y,b),{marks:w,scales:k}=d=Ise({invalid:x,isPath:Pc(v)});w!==k&&k==="include-invalid-values"&&(f=t=hx(Kt.PreFilterInvalid,e,t)),w==="exclude-invalid-values"&&(t=kg.make(t,e,d)??t)}const h=t=hx(Kt.Main,e,t);let p;if(zt(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=kg.make(t,e,d)??t,p=t=hx(Kt.PostFilterInvalid,e,t))}zt(e)&&cXe(e,h);let g=null;if(Wi(e)){const y=e.getName("facet");t=wQe(t,e.facet)??t,g=new nm(t,e,y,h.getSource()),n[y]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:g,ancestorParse:s,preFilterInvalid:f,postFilterInvalid:p}}function hx(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new gi(n,o,e,i);return r[o]=s,s}class CQe extends D8{constructor(t,n,r,i){var o,s,a,l;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&Z(FWe),this.children=this.getChildren(t).map((u,c)=>B8(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=eE(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of X(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return O_(t)?t.vconcat:g8(t)?t.hconcat:t.concat}parseLayoutSize(){vQe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=E8(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function _Qe(e){return e===!1||e===null}const EQe={disable:1,gridScale:1,scale:1,...Zoe,labelExpr:1,encode:1},qae=X(EQe);class N8 extends Ll{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new N8(Te(this.explicit),Te(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!_Qe(this.get(t))}hasOrientSignalRef(){return me(this.explicit.orient)}}function $Qe(e,t,n){const{encoding:r,config:i}=e,o=bn(r[t])??bn(r[Ma(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(gd(l))return{text:us({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(gg(o)==="quantitative"){if(mg(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:us({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:us({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(gg(o)==="temporal"&&i.timeFormatType&&J(o)&&!o.timeUnit)return{text:us({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function AQe(e){return Nl.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[OQe(n,e)]),t),{})}const TQe={bottom:"top",top:"bottom",left:"right",right:"left"};function MQe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of X(i.component.axes))n.axis[o]=$8(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=PQe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of Nl){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!me(a)){if(r[a]>0&&!l){const u=TQe[a];r[a]>r[u]&&s.set("orient",u,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function PQe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=FQe(i,o)}}}else return t.map(n=>n.clone());return e}function FQe(e,t){for(const n of qae){const r=uc(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return noe(i,o);case"gridScale":return{explicit:i.explicit,value:nn(i.value,o.value)}}return I_(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function RQe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(me(n.labelAngle)?n.labelAngle:b1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===fae(r,i))return!0}return e===n[t]}const DQe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function OQe(e,t){var y,v;let n=t.axis(e);const r=new N8,i=bn(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((y=s[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=s.axis)==null?void 0:v.orient)||xXe(e),l=t.getScaleComponent(e).get("type"),u=hXe(e,l,a,t.config),c=n!==void 0?!n:U4("disable",s.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=yXe(i,n,e,s.style,u),d=Loe(n.formatType,i,l),h=Ioe(i,i.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const b of qae){const x=b in XU?XU[b](p):wU(b)?n[b]:void 0,w=x!==void 0,k=RQe(x,b,n,t,e);if(w&&k)r.set(b,x,k);else{const{configValue:S=void 0,configFrom:C=void 0}=wU(b)&&b!=="values"?U4(b,s.style,n.style,u):{},_=S!==void 0;w&&!_?r.set(b,x,k):(C!=="vgAxisConfig"||DQe.has(b)&&_||jv(S)||me(S))&&r.set(b,S,!1)}}const g=n.encoding??{},m=Qoe.reduce((b,x)=>{if(!r.hasAxisPart(x))return b;const w=yae(g[x]??{},t),k=x==="labels"?$Qe(t,e,w):w;return k!==void 0&&!yt(k)&&(b[x]={update:k}),b},{});return yt(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function NQe({encoding:e,size:t}){for(const n of Nl){const r=ki(n);ba(t[r])&&$u(e[n])&&(delete t[r],Z(aoe(r)))}return t}const IQe={vgMark:"arc",encodeEntry:e=>({...Lo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Vr("x",e,{defaultPos:"mid"}),...Vr("y",e,{defaultPos:"mid"}),...$l(e,"radius"),...$l(e,"theta")})},LQe={vgMark:"area",encodeEntry:e=>({...Lo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...qS("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...qS("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...S8(e)})},zQe={vgMark:"rect",encodeEntry:e=>({...Lo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...$l(e,"x"),...$l(e,"y")})},BQe={vgMark:"shape",encodeEntry:e=>({...Lo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&J(n)&&n.type===Jg?{field:ie(n,{expr:"datum"})}:{}}]}},jQe={vgMark:"image",encodeEntry:e=>({...Lo(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...$l(e,"x"),...$l(e,"y"),...x8(e,"url")})},UQe={vgMark:"line",encodeEntry:e=>({...Lo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Vr("x",e,{defaultPos:"mid"}),...Vr("y",e,{defaultPos:"mid"}),...Gn("size",e,{vgChannel:"strokeWidth"}),...S8(e)})},VQe={vgMark:"trail",encodeEntry:e=>({...Lo(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Vr("x",e,{defaultPos:"mid"}),...Vr("y",e,{defaultPos:"mid"}),...Gn("size",e),...S8(e)})};function I8(e,t){const{config:n}=e;return{...Lo(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Vr("x",e,{defaultPos:"mid"}),...Vr("y",e,{defaultPos:"mid"}),...Gn("size",e),...Gn("angle",e),...WQe(e,n,t)}}function WQe(e,t,n){return n?{shape:{value:n}}:Gn("shape",e)}const HQe={vgMark:"symbol",encodeEntry:e=>I8(e)},qQe={vgMark:"symbol",encodeEntry:e=>I8(e,"circle")},GQe={vgMark:"symbol",encodeEntry:e=>I8(e,"square")},YQe={vgMark:"rect",encodeEntry:e=>({...Lo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...$l(e,"x"),...$l(e,"y")})},XQe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Lo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...qS("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...qS("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Gn("size",e,{vgChannel:"strokeWidth"})}}},KQe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Lo(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Vr("x",e,{defaultPos:"mid"}),...Vr("y",e,{defaultPos:"mid"}),...x8(e),...Gn("size",e,{vgChannel:"fontSize"}),...Gn("angle",e),...HU("align",QQe(e.markDef,n,t)),...HU("baseline",ZQe(e.markDef,n,t)),...Vr("radius",e,{defaultPos:null}),...Vr("theta",e,{defaultPos:null})}}};function QQe(e,t,n){if(gt("align",e,n)===void 0)return"center"}function ZQe(e,t,n){if(gt("baseline",e,n)===void 0)return"middle"}const JQe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...Lo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...$l(e,i),...Vr(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:Tt(gt("thickness",n,t))}}},px={arc:IQe,area:LQe,bar:zQe,circle:qQe,geoshape:BQe,image:jQe,line:UQe,point:HQe,rect:YQe,rule:XQe,square:GQe,text:KQe,tick:JQe,trail:VQe};function eZe(e){if(Le([E_,C_,lqe],e.mark)){const t=ise(e.mark,e.encoding);if(t.length>0)return tZe(e,t)}else if(e.mark===__){const t=A4.some(n=>gt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return nZe(e)}return L8(e)}const fV="faceted_path_";function tZe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:fV+e.requestDataName(Kt.Main),data:e.requestDataName(Kt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:L8(e,{fromPrefix:fV})}]}const dV="stack_group_";function nZe(e){var u;const[t]=L8(e,{fromPrefix:dV}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...lg(t.encode.update,["y","yc","y2","height",...A4]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...pi(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...lg(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...pi(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of A4){const f=ya(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=Tt(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ie(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ie(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=ya(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Tt(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Kt.Main),name:dV+e.requestDataName(Kt.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function rZe(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!G(s)&&bs(s)&&E4(s.value)||!s&&E4(gt("order",i,o)))){if((G(s)||J(s))&&!n)return Jie(s,{expr:"datum"});if(Pc(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(J(l))return{field:a}}}}function L8(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=nn(r.clip,iZe(e),oZe(e)),a=Qie(r),l=i.key,u=rZe(e),c=sZe(e),f=gt("aria",r,o),d=px[n].postEncodingTransform?px[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:px[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Kt.Main)},encode:{update:px[n].encodeEntry(e)},...d?{transform:d}:{}}]}function iZe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function oZe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function sZe(e){if(!e.component.selection)return null;const t=X(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=X(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Gae extends Uae{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,kU(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=va(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=HGe(s,o,{graticule:t.data&&v8(t.data)}));const l=this.encoding=Xqe(t.encoding||{},a,s.filled,o);this.markDef=_se(s,l,o),this.size=NQe({encoding:l,size:kU(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=Cse(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>h8(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===Moe,r=t&&HVe.some(i=>Pe(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return PO.reduce((r,i)=>{const o=bn(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Vn(t);return G(n)&&(i.domain=n.map(Fi)),G(r)&&(i.range=r.map(Fi)),i}initAxes(t){return Nl.reduce((n,r)=>{const i=t[r];if(Pe(i)||r===Nt&&Pe(t.x2)||r===Ln&&Pe(t.y2)){const o=Pe(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=X(t),r={};for(const i of n){const o=t[i];r[i]=jv(o)?Kie(o):Fi(o)}return r}initLegends(t){return tWe.reduce((n,r)=>{const i=bn(t[r]);if(i&&rWe(r)){const o=i.legend;n[r]=o&&Vn(o)}return n},{})}parseData(){this.component.data=eE(this)}parseLayoutSize(){bQe(this)}parseSelections(){this.component.selection=uXe(this,this.selection)}parseMarkGroup(){this.component.mark=eZe(this)}parseAxesAndHeaders(){this.component.axes=AQe(this)}assembleSelectionTopLevelSignals(t){return RYe(this,t)}assembleSignals(){return[...lae(this),...PYe(this,[])]}assembleSelectionData(t){return DYe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return E8(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!im(this.parent))&&(t=zse(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Vf(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return xs(n)}typedFieldDef(t){const n=this.fieldDef(t);return Kr(n)?n:null}}class z8 extends D8{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(N_(a))return new z8(a,this,this.getName(`layer_${l}`),s,o);if(Il(a))return new Gae(a,this,this.getName(`layer_${l}`),s,o);throw new Error(RO(a))})}parseData(){this.component.data=eE(this);for(const t of this.children)t.parseData()}parseLayoutSize(){yQe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of X(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){MQe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),lae(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),E8(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ae(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return OYe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),_ae(this))}}function B8(e,t,n,r,i){if(T_(e))return new gy(e,t,n,i);if(N_(e))return new z8(e,t,n,r,i);if(Il(e))return new Gae(e,t,n,r,i);if(bGe(e))return new CQe(e,t,n,i);throw new Error(RO(e))}function aZe(e,t={}){t.logger&&SHe(t.logger),t.fieldTitle&&Yoe(t.fieldTitle);try{const n=kse(Og(t.config,e.config)),r=Fse(e,n),i=B8(r,null,"",void 0,n);return i.parse(),PKe(i.component.data,i),{spec:uZe(i,lZe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&kHe(),t.fieldTitle&&Bqe()}}function lZe(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):le(t)&&(t={type:t}),i&&o&&EYe(t.type)){if(i==="step"&&o==="step")Z(aU()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";Z(aU(v_(s)));const a=s==="width"?"height":"width";t.type=$Ye(a)}}return{...X(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...OU(n,!1),...OU(e,!0)}}function uZe(e,t,n={},r){const i=e.config?RGe(e.config):void 0,o=[].concat(e.assembleSelectionData([]),hQe(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...bse(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const cZe=zVe.version,fZe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:cg,accessPathWithDatum:kO,compile:aZe,contains:Le,deepEqual:Ii,deleteNestedProperty:NS,duplicate:Te,entries:sc,every:xO,fieldIntersection:SO,flatAccessWithDatum:Pie,getFirstDefined:nn,hasIntersection:wO,hasProperty:K,hash:Be,internalField:Die,isBoolean:v1,isEmpty:yt,isEqual:jVe,isInternalField:Oie,isNullOrFalse:E4,isNumeric:d_,keys:X,logicalExpr:hy,mergeDeep:Tie,never:Aie,normalize:Fse,normalizeAngle:b1,omit:pi,pick:lg,prefixGenerator:$4,removePathFromField:Qg,replaceAll:cd,replacePathInField:Do,resetIdCounter:VVe,setEqual:Mie,some:ug,stringify:vt,titleCase:Mv,unique:Js,uniqueId:Rie,vals:Zn,varName:Ot,version:cZe},Symbol.toStringTag,{value:"Module"}));function Yae(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var dZe="vega-themes",hZe="2.15.0",pZe="Themes for stylized Vega and Vega-Lite visualizations.",gZe=["vega","vega-lite","themes","style"],mZe="BSD-3-Clause",yZe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},vZe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],bZe="build/vega-themes.js",j8="build/vega-themes.module.js",xZe="build/vega-themes.min.js",wZe="build/vega-themes.min.js",SZe="build/vega-themes.module.d.ts",kZe={type:"git",url:"https://github.com/vega/vega-themes.git"},CZe=["src","build"],_Ze={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},EZe={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},$Ze={vega:"*","vega-lite":"*"},AZe={},TZe={name:dZe,version:hZe,description:pZe,keywords:gZe,license:mZe,author:yZe,contributors:vZe,main:bZe,module:j8,unpkg:xZe,jsdelivr:wZe,types:SZe,repository:kZe,files:CZe,scripts:_Ze,devDependencies:EZe,peerDependencies:$Ze,dependencies:AZe};const ch="#fff",hV="#888",MZe={background:"#333",view:{stroke:hV},title:{color:ch,subtitleColor:ch},style:{"guide-label":{fill:ch},"guide-title":{fill:ch}},axis:{domainColor:ch,gridColor:hV,tickColor:ch}},jc="#4572a7",PZe={background:"#fff",arc:{fill:jc},area:{fill:jc},line:{stroke:jc,strokeWidth:2},path:{stroke:jc},rect:{fill:jc},shape:{stroke:jc},symbol:{fill:jc,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Uc="#30a2da",KA="#cbcbcb",FZe="#999",RZe="#333",pV="#f0f0f0",gV="#333",DZe={arc:{fill:Uc},area:{fill:Uc},axis:{domainColor:KA,grid:!0,gridColor:KA,gridWidth:1,labelColor:FZe,labelFontSize:10,titleColor:RZe,tickColor:KA,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:pV,group:{fill:pV},legend:{labelColor:gV,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:gV,titleFontSize:14,titlePadding:10},line:{stroke:Uc,strokeWidth:2},path:{stroke:Uc,strokeWidth:.5},rect:{fill:Uc},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Uc},bar:{binSpacing:2,fill:Uc,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Vc="#000",OZe={group:{fill:"#e5e5e5"},arc:{fill:Vc},area:{fill:Vc},line:{stroke:Vc},path:{stroke:Vc},rect:{fill:Vc},shape:{stroke:Vc},symbol:{fill:Vc,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},NZe=22,IZe="normal",mV="Benton Gothic, sans-serif",yV=11.5,LZe="normal",Wc="#82c6df",QA="Benton Gothic Bold, sans-serif",vV="normal",bV=13,Hm={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},zZe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:QA,fontSize:NZe,fontWeight:IZe},arc:{fill:Wc},area:{fill:Wc},line:{stroke:Wc,strokeWidth:2},path:{stroke:Wc},rect:{fill:Wc},shape:{stroke:Wc},symbol:{fill:Wc,size:30},axis:{labelFont:mV,labelFontSize:yV,labelFontWeight:LZe,titleFont:QA,titleFontSize:bV,titleFontWeight:vV},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:mV,labelFontSize:yV,symbolType:"square",titleFont:QA,titleFontSize:bV,titleFontWeight:vV},range:{category:Hm["category-6"],diverging:Hm["fireandice-6"],heatmap:Hm["fire-7"],ordinal:Hm["fire-7"],ramp:Hm["fire-7"]}},Hc="#ab5787",gx="#979797",BZe={background:"#f9f9f9",arc:{fill:Hc},area:{fill:Hc},line:{stroke:Hc},path:{stroke:Hc},rect:{fill:Hc},shape:{stroke:Hc},symbol:{fill:Hc,size:30},axis:{domainColor:gx,domainWidth:.5,gridWidth:.2,labelColor:gx,tickColor:gx,tickWidth:.2,titleColor:gx},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},qc="#3e5c69",jZe={background:"#fff",arc:{fill:qc},area:{fill:qc},line:{stroke:qc},path:{stroke:qc},rect:{fill:qc},shape:{stroke:qc},symbol:{fill:qc},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},so="#1696d2",xV="#000000",UZe="#FFFFFF",mx="Lato",ZA="Lato",VZe="Lato",WZe="#DEDDDD",HZe=18,qm={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},qZe={background:UZe,title:{anchor:"start",fontSize:HZe,font:mx},axisX:{domain:!0,domainColor:xV,domainWidth:1,grid:!1,labelFontSize:12,labelFont:ZA,labelAngle:0,tickColor:xV,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:mx},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:WZe,gridWidth:1,labelFontSize:12,labelFont:ZA,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:mx,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:ZA,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:mx,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:qm["six-groups-cat-1"],diverging:qm["diverging-colors"],heatmap:qm["diverging-colors"],ordinal:qm["six-groups-seq"],ramp:qm["shades-blue"]},area:{fill:so},rect:{fill:so},line:{color:so,stroke:so,strokeWidth:5},trail:{color:so,stroke:so,strokeWidth:0,size:1},path:{stroke:so,strokeWidth:.5},point:{filled:!0},text:{font:VZe,color:so,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:so,stroke:null}},arc:{fill:so},shape:{stroke:so},symbol:{fill:so,size:30}},Gc="#3366CC",wV="#ccc",yx="Arial, sans-serif",GZe={arc:{fill:Gc},area:{fill:Gc},path:{stroke:Gc},rect:{fill:Gc},shape:{stroke:Gc},symbol:{stroke:Gc},circle:{fill:Gc},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:yx,fontSize:12},"guide-title":{font:yx,fontSize:12},"group-title":{font:yx,fontSize:12}},title:{font:yx,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:wV,tickColor:wV,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},U8=e=>e*(1/3+1),SV=U8(9),kV=U8(10),CV=U8(12),Gm="Segoe UI",_V="wf_standard-font, helvetica, arial, sans-serif",EV="#252423",Ym="#605E5C",$V="transparent",YZe="#C8C6C4",Wo="#118DFF",XZe="#12239E",KZe="#E66C37",QZe="#6B007B",ZZe="#E044A7",JZe="#744EC2",eJe="#D9B300",tJe="#D64550",Xae=Wo,Kae="#DEEFFF",AV=[Kae,Xae],nJe=[Kae,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Xae],rJe={view:{stroke:$V},background:$V,font:Gm,header:{titleFont:_V,titleFontSize:CV,titleColor:EV,labelFont:Gm,labelFontSize:kV,labelColor:Ym},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Ym,labelFontSize:SV,titleFont:_V,titleColor:EV,titleFontSize:CV,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:YZe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Wo},line:{stroke:Wo,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Gm,fontSize:SV,fill:Ym},arc:{fill:Wo},area:{fill:Wo,line:!0,opacity:.6},path:{stroke:Wo},rect:{fill:Wo},point:{fill:Wo,filled:!0,size:75},shape:{stroke:Wo},symbol:{fill:Wo,strokeWidth:1.5,size:50},legend:{titleFont:Gm,titleFontWeight:"bold",titleColor:Ym,labelFont:Gm,labelFontSize:kV,labelColor:Ym,symbolType:"circle",symbolSize:75},range:{category:[Wo,XZe,KZe,QZe,ZZe,JZe,eJe,tJe],diverging:AV,heatmap:AV,ordinal:nJe}},JA='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',iJe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',e5=400,vx={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},oJe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],sJe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function tE({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=vx.gridBg[e],i=vx.textPrimary[e],o=vx.textSecondary[e],s=n==="dark"?oJe:sJe,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:JA,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:iJe,labelFontWeight:e5,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:vx.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:JA,fill:o,fontWeight:e5},"guide-title":{font:JA,fill:o,fontWeight:e5}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const aJe=tE({theme:"white",background:"#ffffff"}),lJe=tE({theme:"g10",background:"#f4f4f4"}),uJe=tE({theme:"g90",background:"#262626"}),cJe=tE({theme:"g100",background:"#161616"}),fJe=TZe.version,dJe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:lJe,carbong100:cJe,carbong90:uJe,carbonwhite:aJe,dark:MZe,excel:PZe,fivethirtyeight:DZe,ggplot2:OZe,googlecharts:GZe,latimes:zZe,powerbi:rJe,quartz:BZe,urbaninstitute:qZe,version:fJe,vox:jZe},Symbol.toStringTag,{value:"Module"}));function hJe(e,t,n,r){if(G(e))return`[${e.map(i=>t(le(i)?i:TV(i,n))).join(", ")}]`;if(se(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(se(c)&&(c=TV(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function pJe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function TV(e,t){return JSON.stringify(e,pJe(t))}var gJe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Qae="vg-tooltip-element",mJe={offsetX:10,offsetY:10,id:Qae,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:yJe,maxDepth:2,formatTooltip:hJe,baseURL:""};function yJe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function vJe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return gJe.toString().replace(Qae,e)}function bJe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class xJe{constructor(t){this.options={...mJe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=vJe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=bJe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var t5={};function wJe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class SJe{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var kJe=SJe;const CJe=Object.freeze({loose:!0}),_Je=Object.freeze({}),EJe=e=>e?typeof e!="object"?CJe:e:_Je;var V8=EJe,Z4={exports:{}};const $Je="2.0.0",Zae=256,AJe=Number.MAX_SAFE_INTEGER||9007199254740991,TJe=16,MJe=Zae-6,PJe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var W8={MAX_LENGTH:Zae,MAX_SAFE_COMPONENT_LENGTH:TJe,MAX_SAFE_BUILD_LENGTH:MJe,MAX_SAFE_INTEGER:AJe,RELEASE_TYPES:PJe,SEMVER_SPEC_VERSION:$Je,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const FJe=typeof process=="object"&&t5&&t5.NODE_DEBUG&&/\bsemver\b/i.test(t5.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var nE=FJe;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=W8,o=nE;t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=g=>{for(const[m,y]of d)g=g.split(`${m}*`).join(`${m}{0,${y}}`).split(`${m}+`).join(`${m}{1,${y}}`);return g},p=(g,m,y)=>{const v=h(m),b=c++;o(g,b,m),u[g]=b,l[b]=m,s[b]=new RegExp(m,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Z4,Z4.exports);var H8=Z4.exports;const MV=/^[0-9]+$/,Jae=(e,t)=>{const n=MV.test(e),r=MV.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},RJe=(e,t)=>Jae(t,e);var DJe={compareIdentifiers:Jae,rcompareIdentifiers:RJe};const bx=nE,{MAX_LENGTH:PV,MAX_SAFE_INTEGER:xx}=W8,{safeRe:FV,t:RV}=H8,OJe=V8,{compareIdentifiers:fh}=DJe;let NJe=class Os{constructor(t,n){if(n=OJe(n),t instanceof Os){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>PV)throw new TypeError(`version is longer than ${PV} characters`);bx("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?FV[RV.LOOSE]:FV[RV.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>xx||this.major<0)throw new TypeError("Invalid major version");if(this.minor>xx||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>xx||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<xx)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(bx("SemVer.compare",this.version,this.options,t),!(t instanceof Os)){if(typeof t=="string"&&t===this.version)return 0;t=new Os(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Os||(t=new Os(t,this.options)),fh(this.major,t.major)||fh(this.minor,t.minor)||fh(this.patch,t.patch)}comparePre(t){if(t instanceof Os||(t=new Os(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(bx("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return fh(r,i)}while(++n)}compareBuild(t){t instanceof Os||(t=new Os(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(bx("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return fh(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),fh(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var q8=NJe;const DV=q8,IJe=(e,t,n)=>new DV(e,n).compare(new DV(t,n));var om=IJe;const LJe=om,zJe=(e,t,n)=>LJe(e,t,n)===0;var BJe=zJe;const jJe=om,UJe=(e,t,n)=>jJe(e,t,n)!==0;var VJe=UJe;const WJe=om,HJe=(e,t,n)=>WJe(e,t,n)>0;var qJe=HJe;const GJe=om,YJe=(e,t,n)=>GJe(e,t,n)>=0;var XJe=YJe;const KJe=om,QJe=(e,t,n)=>KJe(e,t,n)<0;var ZJe=QJe;const JJe=om,eet=(e,t,n)=>JJe(e,t,n)<=0;var tet=eet;const net=BJe,ret=VJe,iet=qJe,oet=XJe,set=ZJe,aet=tet,uet=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return net(e,n,r);case"!=":return ret(e,n,r);case">":return iet(e,n,r);case">=":return oet(e,n,r);case"<":return set(e,n,r);case"<=":return aet(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var cet=uet,n5,OV;function fet(){if(OV)return n5;OV=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}n5=t;const n=V8,{safeRe:r,t:i}=H8,o=cet,s=nE,a=q8,l=ele();return n5}var r5,NV;function ele(){if(NV)return r5;NV=1;class e{constructor(R,F){if(F=r(F),R instanceof e)return R.loose===!!F.loose&&R.includePrerelease===!!F.includePrerelease?R:new e(R.raw,F);if(R instanceof i)return this.raw=R.value,this.set=[[R]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=R.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(I=>!p(I[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const I of this.set)if(I.length===1&&g(I[0])){this.set=[I];break}}}this.format()}format(){return this.range=this.set.map(R=>R.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(R){const D=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+R,I=n.get(D);if(I)return I;const O=this.options.loose,j=O?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];R=R.replace(j,A(this.options.includePrerelease)),o("hyphen replace",R),R=R.replace(a[l.COMPARATORTRIM],u),o("comparator trim",R),R=R.replace(a[l.TILDETRIM],c),o("tilde trim",R),R=R.replace(a[l.CARETTRIM],f),o("caret trim",R);let Y=R.split(" ").map(we=>y(we,this.options)).join(" ").split(/\s+/).map(we=>$(we,this.options));O&&(Y=Y.filter(we=>(o("loose invalid filter",we,this.options),!!we.match(a[l.COMPARATORLOOSE])))),o("range list",Y);const W=new Map,oe=Y.map(we=>new i(we,this.options));for(const we of oe){if(p(we))return[we];W.set(we.value,we)}W.size>1&&W.has("")&&W.delete("");const re=[...W.values()];return n.set(D,re),re}intersects(R,F){if(!(R instanceof e))throw new TypeError("a Range is required");return this.set.some(D=>m(D,F)&&R.set.some(I=>m(I,F)&&D.every(O=>I.every(j=>O.intersects(j,F)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new s(R,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(N(this.set[F],R,this.options))return!0;return!1}}r5=e;const t=kJe,n=new t,r=V8,i=fet(),o=nE,s=q8,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:f}=H8,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=W8,p=M=>M.value==="<0.0.0-0",g=M=>M.value==="",m=(M,R)=>{let F=!0;const D=M.slice();let I=D.pop();for(;F&&D.length;)F=D.every(O=>I.intersects(O,R)),I=D.pop();return F},y=(M,R)=>(o("comp",M,R),M=w(M,R),o("caret",M),M=b(M,R),o("tildes",M),M=S(M,R),o("xrange",M),M=_(M,R),o("stars",M),M),v=M=>!M||M.toLowerCase()==="x"||M==="*",b=(M,R)=>M.trim().split(/\s+/).map(F=>x(F,R)).join(" "),x=(M,R)=>{const F=R.loose?a[l.TILDELOOSE]:a[l.TILDE];return M.replace(F,(D,I,O,j,Y)=>{o("tilde",M,D,I,O,j,Y);let W;return v(I)?W="":v(O)?W=`>=${I}.0.0 <${+I+1}.0.0-0`:v(j)?W=`>=${I}.${O}.0 <${I}.${+O+1}.0-0`:Y?(o("replaceTilde pr",Y),W=`>=${I}.${O}.${j}-${Y} <${I}.${+O+1}.0-0`):W=`>=${I}.${O}.${j} <${I}.${+O+1}.0-0`,o("tilde return",W),W})},w=(M,R)=>M.trim().split(/\s+/).map(F=>k(F,R)).join(" "),k=(M,R)=>{o("caret",M,R);const F=R.loose?a[l.CARETLOOSE]:a[l.CARET],D=R.includePrerelease?"-0":"";return M.replace(F,(I,O,j,Y,W)=>{o("caret",M,I,O,j,Y,W);let oe;return v(O)?oe="":v(j)?oe=`>=${O}.0.0${D} <${+O+1}.0.0-0`:v(Y)?O==="0"?oe=`>=${O}.${j}.0${D} <${O}.${+j+1}.0-0`:oe=`>=${O}.${j}.0${D} <${+O+1}.0.0-0`:W?(o("replaceCaret pr",W),O==="0"?j==="0"?oe=`>=${O}.${j}.${Y}-${W} <${O}.${j}.${+Y+1}-0`:oe=`>=${O}.${j}.${Y}-${W} <${O}.${+j+1}.0-0`:oe=`>=${O}.${j}.${Y}-${W} <${+O+1}.0.0-0`):(o("no pr"),O==="0"?j==="0"?oe=`>=${O}.${j}.${Y}${D} <${O}.${j}.${+Y+1}-0`:oe=`>=${O}.${j}.${Y}${D} <${O}.${+j+1}.0-0`:oe=`>=${O}.${j}.${Y} <${+O+1}.0.0-0`),o("caret return",oe),oe})},S=(M,R)=>(o("replaceXRanges",M,R),M.split(/\s+/).map(F=>C(F,R)).join(" ")),C=(M,R)=>{M=M.trim();const F=R.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return M.replace(F,(D,I,O,j,Y,W)=>{o("xRange",M,D,I,O,j,Y,W);const oe=v(O),re=oe||v(j),we=re||v(Y),Re=we;return I==="="&&Re&&(I=""),W=R.includePrerelease?"-0":"",oe?I===">"||I==="<"?D="<0.0.0-0":D="*":I&&Re?(re&&(j=0),Y=0,I===">"?(I=">=",re?(O=+O+1,j=0,Y=0):(j=+j+1,Y=0)):I==="<="&&(I="<",re?O=+O+1:j=+j+1),I==="<"&&(W="-0"),D=`${I+O}.${j}.${Y}${W}`):re?D=`>=${O}.0.0${W} <${+O+1}.0.0-0`:we&&(D=`>=${O}.${j}.0${W} <${O}.${+j+1}.0-0`),o("xRange return",D),D})},_=(M,R)=>(o("replaceStars",M,R),M.trim().replace(a[l.STAR],"")),$=(M,R)=>(o("replaceGTE0",M,R),M.trim().replace(a[R.includePrerelease?l.GTE0PRE:l.GTE0],"")),A=M=>(R,F,D,I,O,j,Y,W,oe,re,we,Re)=>(v(D)?F="":v(I)?F=`>=${D}.0.0${M?"-0":""}`:v(O)?F=`>=${D}.${I}.0${M?"-0":""}`:j?F=`>=${F}`:F=`>=${F}${M?"-0":""}`,v(oe)?W="":v(re)?W=`<${+oe+1}.0.0-0`:v(we)?W=`<${oe}.${+re+1}.0-0`:Re?W=`<=${oe}.${re}.${we}-${Re}`:M?W=`<${oe}.${re}.${+we+1}-0`:W=`<=${W}`,`${F} ${W}`.trim()),N=(M,R,F)=>{for(let D=0;D<M.length;D++)if(!M[D].test(R))return!1;if(R.prerelease.length&&!F.includePrerelease){for(let D=0;D<M.length;D++)if(o(M[D].semver),M[D].semver!==i.ANY&&M[D].semver.prerelease.length>0){const I=M[D].semver;if(I.major===R.major&&I.minor===R.minor&&I.patch===R.patch)return!0}return!1}return!0};return r5}const det=ele(),het=(e,t,n)=>{try{t=new det(t,n)}catch{return!1}return t.test(e)};var pet=het,tle=wJe(pet);function get(e,t,n){const r=e.open(t),i=1e4,o=250,{origin:s}=new URL(t);let a=~~(i/o);function l(c){c.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,s),setTimeout(u,o),a-=1)}setTimeout(u,o)}var met=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function nle(e,...t){for(const n of t)yet(e,n);return e}function yet(e,t){for(const n of Object.keys(t))Ng(e,n,t[n],!0)}const Go=oVe;let C1=fZe;const wx=typeof window<"u"?window:void 0;var cW;C1===void 0&&((cW=wx==null?void 0:wx.vl)!=null&&cW.compile)&&(C1=wx.vl);const vet={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},bet={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},F0={vega:"Vega","vega-lite":"Vega-Lite"},KS={vega:Go.version,"vega-lite":C1?C1.version:"not available"},xet={vega:e=>e,"vega-lite":(e,t)=>C1.compile(e,{config:t}).spec},wet=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,ket="chart-wrapper";function Cet(e){return typeof e=="function"}function IV(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${F0[r]} JSON Source`}function _et(e,t){if(e.$schema){const n=Yae(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${F0[n.library]}, but mode argument sets ${F0[t]??t}.`);const r=n.library;return tle(KS[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${F0[r]} ${n.version}, but the current version of ${F0[r]} is v${KS[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function rle(e){return!!(e&&"load"in e)}function LV(e){return rle(e)?e:Go.loader(e)}function Eet(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return le(t.defaultStyle)&&(t.defaultStyle=!1),t}async function ile(e,t,n={}){let r,i;le(t)?(i=LV(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=Eet(r),s=o.loader;(!i||s)&&(i=LV(n.loader??s));const a=await zV(o,i),l=await zV(n,i),u={...nle(l,a),config:Og(l.config??{},a.config??{})};return await Aet(e,r,u,i)}async function zV(e,t){const n=le(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=le(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function $et(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Aet(e,t,n={},r){const i=n.theme?Og(dJe[n.theme],n.config??{}):n.config,o=vc(n.actions)?n.actions:nle({},vet,n.actions??{}),s={...bet,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??Go.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const w="vega-embed-style",{root:k,rootContainer:S}=$et(c);if(!k.getElementById(w)){const C=document.createElement("style");C.id=w,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?met.toString():n.defaultStyle,S.appendChild(C)}}const f=_et(t,n.mode);let d=xet[f](t,i);if(f==="vega-lite"&&d.$schema){const w=Yae(d.$schema);tle(KS.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${KS.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const w=document.createElement("div");w.classList.add(ket),c.appendChild(w),h=w}const p=n.patch;if(p&&(d=p instanceof Function?p(d):Qk(d,p,!0,!1).newDocument),n.formatLocale&&Go.formatLocale(n.formatLocale),n.timeFormatLocale&&Go.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const k=n.expressionFunctions[w];"fn"in k?Go.expressionFunction(w,k.fn,k.visitor):k instanceof Function&&Go.expressionFunction(w,k)}const{ast:g}=n,m=Go.parse(d,f==="vega-lite"?{}:i,{ast:g}),y=new(n.viewClass||Go.View)(m,{loader:r,logLevel:l,renderer:a,...g?{expr:Go.expressionInterpreter??n.expr??gVe}:{}});if(y.addSignalListener("autosize",(w,k)=>{const{type:S}=k;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:w,tooltip:k}=n,S=w&&!rle(w)?w==null?void 0:w.baseURL:void 0,C=Cet(k)?k:new xJe({baseURL:S,...k===!0?{}:k}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:w,updateSet:k}=typeof v=="boolean"?{}:v;y.hover(w,k)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(o!==!1){let w=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=s.CLICK_TO_VIEW_ACTIONS,c.append(S),w=S;const C=document.createElement("summary");C.innerHTML=wet,S.append(C),b=_=>{S.contains(_.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const k=document.createElement("div");if(w.append(k),k.classList.add("vega-actions"),o===!0||o.export!==!1){for(const S of["svg","png"])if(o===!0||o.export===!0||o.export[S]){const C=s[`${S.toUpperCase()}_ACTION`],_=document.createElement("a"),$=se(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;_.text=C,_.href="#",_.target="_blank",_.download=`${u}.${S}`,_.addEventListener("mousedown",async function(A){A.preventDefault();const N=await y.toImageURL(S,$);this.href=N}),k.append(_)}}if(o===!0||o.source!==!1){const S=document.createElement("a");S.text=s.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){IV(O$(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),k.append(S)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const S=document.createElement("a");S.text=s.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){IV(O$(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),k.append(S)}if(o===!0||o.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=s.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(_){get(window,S,{config:i,mode:p?"vega":f,renderer:a,spec:O$(p?d:t)}),_.preventDefault()}),k.append(C)}}function x(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:x,embedOptions:n}}async function Tet(e,t){if(!("mark"in e)||!e||!t)return;const n={disable:!0,title:"",grid:!1,ticks:!1,labels:!1},r={...e,width:100,height:100,config:{...e.config,mark:{strokeWidth:e.mark==="line"?4:0},legend:{disable:!0},axis:{disable:!0},style:{view:{stroke:"transparent"},cell:{stroke:"transparent"}}},data:{values:t},background:"transparent",title:void 0,encoding:Object.fromEntries(Object.entries(e.encoding??{}).map(([o,s])=>[o,{...s,legend:null,axis:n}]))};return(await(await ile(document.createElement("div"),r,{actions:!1}).then(o=>o.view)).toCanvas()).toDataURL()}function Met(e){try{return new URL(e),!0}catch{return!1}}function Pet(e){try{const n=new URL(e).pathname.split("/"),r=n[n.length-1];return decodeURIComponent(r)}catch{throw new Error("Invalid URL")}}const Fet={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},BV=e=>{let t;const n=new Set,r=(c,f)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(p=>p(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(Fet?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},Ret=e=>e?BV(e):BV;var ole={exports:{}},sle={},ale={exports:{}},lle={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg=P;function Det(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oet=typeof Object.is=="function"?Object.is:Det,Net=Cg.useState,Iet=Cg.useEffect,Let=Cg.useLayoutEffect,zet=Cg.useDebugValue;function Bet(e,t){var n=t(),r=Net({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Let(function(){i.value=n,i.getSnapshot=t,i5(i)&&o({inst:i})},[e,n,t]),Iet(function(){return i5(i)&&o({inst:i}),e(function(){i5(i)&&o({inst:i})})},[e]),zet(n),n}function i5(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Oet(e,n)}catch{return!0}}function jet(e,t){return t()}var Uet=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jet:Bet;lle.useSyncExternalStore=Cg.useSyncExternalStore!==void 0?Cg.useSyncExternalStore:Uet;ale.exports=lle;var Vet=ale.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE=P,Wet=Vet;function Het(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qet=typeof Object.is=="function"?Object.is:Het,Get=Wet.useSyncExternalStore,Yet=rE.useRef,Xet=rE.useEffect,Ket=rE.useMemo,Qet=rE.useDebugValue;sle.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=Yet(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=Ket(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&s.hasValue){var p=s.value;if(i(p,h))return f=p}return f=h}if(p=f,qet(c,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(c=h,f=g)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,i]);var a=Get(e,o[0],o[1]);return Xet(function(){s.hasValue=!0,s.value=a},[a]),Qet(a),a};ole.exports=sle;var Zet=ole.exports;const Jet=dc(Zet),ule={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:ett}=Li,{useSyncExternalStoreWithSelector:ttt}=Jet;let jV=!1;const ntt=e=>e;function rtt(e,t=ntt,n){(ule?"production":void 0)!=="production"&&n&&!jV&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),jV=!0);const r=ttt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ett(r),r}const UV=e=>{(ule?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Ret(e):e,n=(r,i)=>rtt(t,r,i);return Object.assign(n,t),n},iE=e=>e?UV(e):UV,_2={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},J4=new Map,Sx=e=>{const t=J4.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},itt=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=J4.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return J4.set(n.name,i),{type:"tracked",store:e,...i}},ott=(e,t={})=>(n,r,i)=>{const{enabled:o,anonymousActionType:s,store:a,...l}=t;let u;try{u=(o??(_2?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(_2?"production":void 0)!=="production"&&o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,i);const{connection:c,...f}=itt(a,u,l);let d=!0;i.setState=(g,m,y)=>{const v=n(g,m);if(!d)return v;const b=y===void 0?{type:s||"anonymous"}:typeof y=="string"?{type:y}:y;return a===void 0?(c==null||c.send(b,r()),v):(c==null||c.send({...b,type:`${a}/${b.type}`},{...Sx(l.name),[a]:i.getState()}),v)};const h=(...g)=>{const m=d;d=!1,n(...g),d=m},p=e(i.setState,r,i);if(f.type==="untracked"?c==null||c.init(p):(f.stores[f.store]=i,c==null||c.init(Object.fromEntries(Object.entries(f.stores).map(([g,m])=>[g,g===f.store?p:m.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let g=!1;const m=i.dispatch;i.dispatch=(...y)=>{(_2?"production":void 0)!=="production"&&y[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),m(...y)}}return c.subscribe(g=>{var m;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return o5(g.payload,y=>{if(y.type==="__setState"){if(a===void 0){h(y.state);return}Object.keys(y.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const v=y.state[a];if(v==null)return;JSON.stringify(i.getState())!==JSON.stringify(v)&&h(v);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(y)});case"DISPATCH":switch(g.payload.type){case"RESET":return h(p),a===void 0?c==null?void 0:c.init(i.getState()):c==null?void 0:c.init(Sx(l.name));case"COMMIT":if(a===void 0){c==null||c.init(i.getState());return}return c==null?void 0:c.init(Sx(l.name));case"ROLLBACK":return o5(g.state,y=>{if(a===void 0){h(y),c==null||c.init(i.getState());return}h(y[a]),c==null||c.init(Sx(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return o5(g.state,y=>{if(a===void 0){h(y);return}JSON.stringify(i.getState())!==JSON.stringify(y[a])&&h(y[a])});case"IMPORT_STATE":{const{nextLiftedState:y}=g.payload,v=(m=y.computedStates.slice(-1)[0])==null?void 0:m.state;if(!v)return;h(a===void 0?v:v[a]),c==null||c.send(null,y);return}case"PAUSE_RECORDING":return d=!d}return}}),p},G8=ott,o5=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function stt(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var o;const s=l=>l===null?null:JSON.parse(l,void 0),a=(o=n.getItem(i))!=null?o:null;return a instanceof Promise?a.then(s):s(a)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>n.removeItem(i)}}const _1=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return _1(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return _1(r)(n)}}}},att=(e,t)=>(n,r,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,y)=>({...y,...m}),...t},s=!1;const a=new Set,l=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...m)},r,i);const c=_1(o.serialize),f=()=>{const m=o.partialize({...r()});let y;const v=c({state:m,version:o.version}).then(b=>u.setItem(o.name,b)).catch(b=>{y=b});if(y)throw y;return v},d=i.setState;i.setState=(m,y)=>{d(m,y),f()};const h=e((...m)=>{n(...m),f()},r,i);let p;const g=()=>{var m;if(!u)return;s=!1,a.forEach(v=>v(r()));const y=((m=o.onRehydrateStorage)==null?void 0:m.call(o,r()))||void 0;return _1(u.getItem.bind(u))(o.name).then(v=>{if(v)return o.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return o.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var b;return p=o.merge(v,(b=r())!=null?b:h),n(p,!0),f()}).then(()=>{y==null||y(p,void 0),s=!0,l.forEach(v=>v(p))}).catch(v=>{y==null||y(void 0,v)})};return i.persist={setOptions:m=>{o={...o,...m},m.getStorage&&(u=m.getStorage())},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},g(),p||h},ltt=(e,t)=>(n,r,i)=>{let o={storage:stt(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...t},s=!1;const a=new Set,l=new Set;let u=o.storage;if(!u)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...g)},r,i);const c=()=>{const g=o.partialize({...r()});return u.setItem(o.name,{state:g,version:o.version})},f=i.setState;i.setState=(g,m)=>{f(g,m),c()};const d=e((...g)=>{n(...g),c()},r,i);i.getInitialState=()=>d;let h;const p=()=>{var g,m;if(!u)return;s=!1,a.forEach(v=>{var b;return v((b=r())!=null?b:d)});const y=((m=o.onRehydrateStorage)==null?void 0:m.call(o,(g=r())!=null?g:d))||void 0;return _1(u.getItem.bind(u))(o.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return[!0,o.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[x,w]=v;if(h=o.merge(w,(b=r())!=null?b:d),n(h,!0),x)return c()}).then(()=>{y==null||y(h,void 0),h=r(),s=!0,l.forEach(v=>v(h))}).catch(v=>{y==null||y(void 0,v)})};return i.persist={setOptions:g=>{o={...o,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},o.skipHydration||p(),h||d},utt=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((_2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),att(e,t)):ltt(e,t),ctt=utt,ftt={json:Z_e,csv:_F},dp=iE(G8(e=>({filename:null,fileBuffer:null,data:void 0,schema:null,loading:!1,loadData:async t=>{e({loading:!0,filename:null,fileBuffer:null,data:void 0,schema:null});const n=t instanceof File?t.name:Pet(t),r=n.split(".").pop(),o=await(await O3(t)).arrayBuffer(),s=new Uint8Array(o),a=await SF(o,ftt[r],{worker:!0,fetch:{mode:"no-cors"}});e({filename:n,fileBuffer:s,data:a,schema:a.schema,loading:!1})}}))),eM=iE()(e=>({drawerExpanded:!0,setDrawerExpanded:t=>e({drawerExpanded:t})})),VV=[{name:"Barley",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/barley.json"},{name:"Cars",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/cars.json"},{name:"Crimea",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/crimea.json"},{name:"Jobs",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/jobs.json"},{name:"Population",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/population.json"},{name:"Movies",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/movies.json"},{name:"Birdstrikes",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/birdstrikes.csv"},{name:"Burtin",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/burtin.json"}],WV=50,dtt=50,htt=1,Rr="orange",Au={50:`${Rr}.50`,100:`${Rr}.100`,200:`${Rr}.200`,300:`${Rr}.300`,400:`${Rr}.400`,500:`${Rr}.500`,600:`${Rr}.600`,700:`${Rr}.700`,800:`${Rr}.800`,900:`${Rr}.900`},HV="table";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cle=Symbol("Comlink.proxy"),ptt=Symbol("Comlink.endpoint"),fle=Symbol("Comlink.releaseProxy"),s5=Symbol("Comlink.finalizer"),E2=Symbol("Comlink.thrown"),dle=e=>typeof e=="object"&&e!==null||typeof e=="function",gtt={canHandle:e=>dle(e)&&e[cle],serialize(e){const{port1:t,port2:n}=new MessageChannel;return ple(e,t),[n,[n]]},deserialize(e){return e.start(),mle(e)}},mtt={canHandle:e=>dle(e)&&E2 in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},hle=new Map([["proxy",gtt],["throw",mtt]]);function ytt(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function ple(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(i){if(!i||!i.data)return;if(!ytt(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:o,type:s,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(df);let u;try{const c=a.slice(0,-1).reduce((d,h)=>d[h],e),f=a.reduce((d,h)=>d[h],e);switch(s){case"GET":u=f;break;case"SET":c[a.slice(-1)[0]]=df(i.data.value),u=!0;break;case"APPLY":u=f.apply(c,l);break;case"CONSTRUCT":{const d=new f(...l);u=ktt(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;ple(e,h),u=Stt(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[E2]:0}}Promise.resolve(u).catch(c=>({value:c,[E2]:0})).then(c=>{const[f,d]=JS(c);t.postMessage(Object.assign(Object.assign({},f),{id:o}),d),s==="RELEASE"&&(t.removeEventListener("message",r),gle(t),s5 in e&&typeof e[s5]=="function"&&e[s5]())}).catch(c=>{const[f,d]=JS({value:new TypeError("Unserializable return value"),[E2]:0});t.postMessage(Object.assign(Object.assign({},f),{id:o}),d)})}),t.start&&t.start()}function vtt(e){return e.constructor.name==="MessagePort"}function gle(e){vtt(e)&&e.close()}function mle(e,t){return tM(e,[],t)}function kx(e){if(e)throw new Error("Proxy has been released and is not useable")}function yle(e){return gh(e,{type:"RELEASE"}).then(()=>{gle(e)})}const QS=new WeakMap,ZS="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(QS.get(e)||0)-1;QS.set(e,t),t===0&&yle(e)});function btt(e,t){const n=(QS.get(t)||0)+1;QS.set(t,n),ZS&&ZS.register(e,t,e)}function xtt(e){ZS&&ZS.unregister(e)}function tM(e,t=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(o,s){if(kx(r),s===fle)return()=>{xtt(i),yle(e),r=!0};if(s==="then"){if(t.length===0)return{then:()=>i};const a=gh(e,{type:"GET",path:t.map(l=>l.toString())}).then(df);return a.then.bind(a)}return tM(e,[...t,s])},set(o,s,a){kx(r);const[l,u]=JS(a);return gh(e,{type:"SET",path:[...t,s].map(c=>c.toString()),value:l},u).then(df)},apply(o,s,a){kx(r);const l=t[t.length-1];if(l===ptt)return gh(e,{type:"ENDPOINT"}).then(df);if(l==="bind")return tM(e,t.slice(0,-1));const[u,c]=qV(a);return gh(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},c).then(df)},construct(o,s){kx(r);const[a,l]=qV(s);return gh(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:a},l).then(df)}});return btt(i,e),i}function wtt(e){return Array.prototype.concat.apply([],e)}function qV(e){const t=e.map(JS);return[t.map(n=>n[0]),wtt(t.map(n=>n[1]))]}const vle=new WeakMap;function Stt(e,t){return vle.set(e,t),e}function ktt(e){return Object.assign(e,{[cle]:!0})}function JS(e){for(const[t,n]of hle)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},vle.get(e)||[]]}function df(e){switch(e.type){case"HANDLER":return hle.get(e.name).deserialize(e.value);case"RAW":return e.value}}function gh(e,t,n){return new Promise(r=>{const i=Ctt();e.addEventListener("message",function o(s){!s.data||!s.data.id||s.data.id!==i||(e.removeEventListener("message",o),r(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)})}function Ctt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function _tt(e){return new Worker("/Swipytics/assets/pyodide-worker-C1b7KQyD.js",{type:"module",name:e==null?void 0:e.name})}let fo=null,pr=null;const Ett=async(e,t)=>{if(!fo||!pr)throw new Error("pyodide isn't loaded yet");return await pr.runPython(e,t)},$tt=async(e,t)=>{if(!fo||!pr)throw new Error("pyodide isn't loaded yet");return pr.callPythonFunction(e,t)},Att=async(e,t)=>{if(!fo||!pr)throw new Error("pyodide isn't loaded yet");return pr.writeFile(e,t)},Ttt=async e=>{if(!fo||!pr)throw new Error("pyodide isn't loaded yet");return pr.readFile(e)},Mtt=async e=>(fo||(fo=new _tt({name:"pyodide-worker"}),pr=mle(fo),await pr.initialize(e)),{runPython:Ett,callPythonFunction:$tt,writeFile:Att,readFile:Ttt,terminate:()=>{fo==null||fo.terminate(),fo=null,pr==null||pr[fle](),pr=null},initialize:async t=>{if(!fo||!pr)throw new Error("pyodide isn't loaded yet");await pr.initialize(t)}});let my;async function Ptt(e){const{packages:t}=e||{};return my===void 0&&(my=await Ftt(t)),my}const Ftt=async e=>(my=await Mtt(e),my),Y8=async()=>await Ptt({packages:["draco"]});var ble=Symbol.for("immer-nothing"),GV=Symbol.for("immer-draftable"),Qi=Symbol.for("immer-state");function os(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var _g=Object.getPrototypeOf;function Eg(e){return!!e&&!!e[Qi]}function bd(e){var t;return e?xle(e)||Array.isArray(e)||!!e[GV]||!!((t=e.constructor)!=null&&t[GV])||sE(e)||aE(e):!1}var Rtt=Object.prototype.constructor.toString();function xle(e){if(!e||typeof e!="object")return!1;const t=_g(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Rtt}function ek(e,t){oE(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function oE(e){const t=e[Qi];return t?t.type_:Array.isArray(e)?1:sE(e)?2:aE(e)?3:0}function nM(e,t){return oE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function wle(e,t,n){const r=oE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Dtt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function sE(e){return e instanceof Map}function aE(e){return e instanceof Set}function rf(e){return e.copy_||e.base_}function rM(e,t){if(sE(e))return new Map(e);if(aE(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=xle(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Qi];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(_g(e),r)}else{const r=_g(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function X8(e,t=!1){return lE(e)||Eg(e)||!bd(e)||(oE(e)>1&&(e.set=e.add=e.clear=e.delete=Ott),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>X8(r,!0))),e}function Ott(){os(2)}function lE(e){return Object.isFrozen(e)}var Ntt={};function xd(e){const t=Ntt[e];return t||os(0,e),t}var E1;function Sle(){return E1}function Itt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function YV(e,t){t&&(xd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function iM(e){oM(e),e.drafts_.forEach(Ltt),e.drafts_=null}function oM(e){e===E1&&(E1=e.parent_)}function XV(e){return E1=Itt(E1,e)}function Ltt(e){const t=e[Qi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function KV(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Qi].modified_&&(iM(t),os(4)),bd(e)&&(e=tk(t,e),t.parent_||nk(t,e)),t.patches_&&xd("Patches").generateReplacementPatches_(n[Qi].base_,e,t.patches_,t.inversePatches_)):e=tk(t,n,[]),iM(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ble?e:void 0}function tk(e,t,n){if(lE(t))return t;const r=t[Qi];if(!r)return ek(t,(i,o)=>QV(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return nk(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),ek(o,(a,l)=>QV(e,r,i,a,l,n,s)),nk(e,i,!1),n&&e.patches_&&xd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function QV(e,t,n,r,i,o,s){if(Eg(i)){const a=o&&t&&t.type_!==3&&!nM(t.assigned_,r)?o.concat(r):void 0,l=tk(e,i,a);if(wle(n,r,l),Eg(l))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(bd(i)&&!lE(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;tk(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&nk(e,i)}}function nk(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&X8(t,n)}function ztt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Sle(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=K8;n&&(i=[r],o=$1);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var K8={get(e,t){if(t===Qi)return e;const n=rf(e);if(!nM(n,t))return Btt(e,n,t);const r=n[t];return e.finalized_||!bd(r)?r:r===a5(e.base_,t)?(l5(e),e.copy_[t]=aM(r,e)):r},has(e,t){return t in rf(e)},ownKeys(e){return Reflect.ownKeys(rf(e))},set(e,t,n){const r=kle(rf(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=a5(rf(e),t),o=i==null?void 0:i[Qi];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Dtt(n,i)&&(n!==void 0||nM(e.base_,t)))return!0;l5(e),sM(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return a5(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,l5(e),sM(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=rf(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){os(11)},getPrototypeOf(e){return _g(e.base_)},setPrototypeOf(){os(12)}},$1={};ek(K8,(e,t)=>{$1[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$1.deleteProperty=function(e,t){return $1.set.call(this,e,t,void 0)};$1.set=function(e,t,n){return K8.set.call(this,e[0],t,n,e[0])};function a5(e,t){const n=e[Qi];return(n?rf(n):e)[t]}function Btt(e,t,n){var i;const r=kle(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function kle(e,t){if(!(t in e))return;let n=_g(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=_g(n)}}function sM(e){e.modified_||(e.modified_=!0,e.parent_&&sM(e.parent_))}function l5(e){e.copy_||(e.copy_=rM(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var jtt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(l=o,...u){return s.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&os(6),r!==void 0&&typeof r!="function"&&os(7);let i;if(bd(t)){const o=XV(this),s=aM(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?iM(o):oM(o)}return YV(o,r),KV(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===ble&&(i=void 0),this.autoFreeze_&&X8(i,!0),r){const o=[],s=[];xd("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else os(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){bd(e)||os(8),Eg(e)&&(e=Utt(e));const t=XV(this),n=aM(e,void 0);return n[Qi].isManual_=!0,oM(t),n}finishDraft(e,t){const n=e&&e[Qi];(!n||!n.isManual_)&&os(9);const{scope_:r}=n;return YV(r,t),KV(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=xd("Patches").applyPatches_;return Eg(e)?r(e,t):this.produce(e,i=>r(i,t))}};function aM(e,t){const n=sE(e)?xd("MapSet").proxyMap_(e,t):aE(e)?xd("MapSet").proxySet_(e,t):ztt(e,t);return(t?t.scope_:Sle()).drafts_.push(n),n}function Utt(e){return Eg(e)||os(10,e),Cle(e)}function Cle(e){if(!bd(e)||lE(e))return e;const t=e[Qi];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=rM(e,t.scope_.immer_.useStrictShallowCopy_)}else n=rM(e,!0);return ek(n,(r,i)=>{wle(n,r,Cle(i))}),t&&(t.finalized_=!1),n}var Zi=new jtt,Xm=Zi.produce;Zi.produceWithPatches.bind(Zi);Zi.setAutoFreeze.bind(Zi);Zi.setUseStrictShallowCopy.bind(Zi);Zi.applyPatches.bind(Zi);Zi.createDraft.bind(Zi);Zi.finishDraft.bind(Zi);const uE=iE()(G8(ctt(e=>({apiKey:"sk-...",setApiKey:t=>e({apiKey:t}),python:"pyodide",setPython:async t=>t==="server"&&!(await fetch("/api")).ok?!1:(e({python:t}),!0)}),{name:"settings-storage"}))),Wn=iE(G8((e,t)=>({filename:"",timestamp:0,charts:[],fields:[],currentChartIndex:-1,increaseCurrentChartIndex:()=>{t().setCurrentChartIndex(t().currentChartIndex+1)},decreaseCurrentChartIndex:()=>{t().setCurrentChartIndex(t().currentChartIndex-1)},setCurrentChartIndex:async n=>{const r=t();n<-1||(n>r.charts.length-htt-1&&await t().appendNextChart(),e({currentChartIndex:n}))},loadingSession:!1,loadSession:async()=>{e({loadingSession:!0,charts:[],filename:"",timestamp:0,currentChartIndex:-1,fields:[]});const n=dp.getState().filename,r=dp.getState().fileBuffer;if(!(n&&r))throw new Error("No file buffer found");const i=await Gtt(n,r);e(Xm(o=>{o.filename=i.filename,o.timestamp=i.timestamp,o.fields=i.fields,o.charts=i.charts,o.loadingSession=!1}))},appendingChart:!1,appendNextChart:async()=>{e({appendingChart:!0});const n=await Ytt();e(Xm(r=>{r.charts.push(n),r.appendingChart=!1}))},renewCurrentChart:()=>e(Xm(n=>{const r=n.charts[n.currentChartIndex];r.specIndex=(r.specIndex+1)%r.specs.length})),setCurrentChartPreferred:async n=>{const r=t().charts[t().currentChartIndex],i=dp.getState().data;if(i)if(r.thumbnail)e(Xm(o=>{o.charts[o.currentChartIndex].preferred=n}));else{const o=r.specs[r.specIndex],s=await Tet(o,i);e(Xm(a=>{a.charts[a.currentChartIndex].thumbnail=s,a.charts[a.currentChartIndex].preferred=n}))}}})));async function Vtt(e,t){const n=await Y8();return await n.writeFile(e,t),await n.callPythonFunction("loadData",{filename:e})}async function Wtt(e,t){const n=new Blob([t]),r=new FormData;return r.append("file",n,e),await(await fetch("/api/loadData",{method:"POST",body:r})).json()}async function Htt(){return await(await Y8()).callPythonFunction("appendNextChart",{})}async function qtt(){return await(await fetch("/api/appendNextChart")).json()}const Gtt=uE.getState().python==="pyodide"?Vtt:Wtt,Ytt=uE.getState().python==="pyodide"?Htt:qtt;function Xtt(){const e=Wn(i=>i.charts),t=e.filter(i=>i.preferred),n=Wn(i=>i.setCurrentChartIndex);return{preferredCharts:t,handleClickBookmark:i=>{const o=e.findIndex(s=>s===i);n(o)}}}function Ktt(e){const{colorMode:t}=Fg(),n=dp(u=>u.data),r=e.specs[e.specIndex],i=t==="dark"?"dark":void 0,[o,s]=dh({base:[300,300],lg:[600,600]})??[300,300],a={...r,width:o,height:s,background:"transparent",data:{name:HV},config:{..."config"in r?r.config:{},axis:{labelFontSize:14,titleFontSize:16,titlePadding:16},autosize:{type:"fit"}}};return{data:{[HV]:n},chartTheme:i,spec:a}}function Qtt(e,t,{signal:n}={}){let r=null;const i=function(...s){r!==null&&clearTimeout(r),!(n!=null&&n.aborted)&&(r=setTimeout(()=>{e(...s),r=null},t))},o=function(){i.cancel()};return i.cancel=function(){r!==null&&(clearTimeout(r),r=null)},n==null||n.addEventListener("abort",o,{once:!0}),i}function ZV(e){if(!e)return 0;const t=window.getComputedStyle(e),n=parseFloat(t.gap);return e.clientHeight+n}function Ztt(){const e=Wn(s=>s.charts),t=Wn(s=>s.currentChartIndex),n=Wn(s=>s.setCurrentChartIndex),r=Wn(s=>s.increaseCurrentChartIndex),i=Wn(s=>s.decreaseCurrentChartIndex),o=P.useRef(null);return P.useEffect(()=>{const s=o.current;if(!s)return;const a=Qtt(()=>{const l=s.scrollTop,u=ZV(s),c=Math.round(l/u);n(c-1)},dtt);return s.addEventListener("scroll",a),()=>s.removeEventListener("scroll",a)},[n]),P.useEffect(()=>{const s=o.current;if(!s)return;const a=ZV(s);s.scrollTo({top:(t+1)*a,behavior:"smooth"})},[t]),P.useEffect(()=>{const s=a=>{a.key==="ArrowUp"&&(a.preventDefault(),i()),a.key==="ArrowDown"&&(a.preventDefault(),r())};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[r,i]),{charts:e,currentChartIndex:t,ref:o}}function Jtt(){const e=Wn(p=>p.charts),t=Wn(p=>p.fields),n=Wn(p=>p.increaseCurrentChartIndex),r=Wn(p=>p.decreaseCurrentChartIndex),i=Wn(p=>p.renewCurrentChart),o=Wn(p=>p.currentChartIndex),s=o!==-1,a=o!==-1&&e[o].preferred,l=Wn(p=>p.setCurrentChartPreferred),u=i,c=n,f=r,d=()=>{l(!a)};return{sessionInitialized:t.length>0,chartDisplaying:s,currentChartPreferred:a,handleRenewChart:u,handleNextChart:c,handlePrevChart:f,handlePreferChart:d}}function lM(e,t,n){var r,i,o,s,a;t==null&&(t=100);function l(){var c=Date.now()-s;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(a=e.apply(o,i),o=i=null))}var u=function(){o=this,i=arguments,s=Date.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(a=e.apply(o,i),o=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}lM.debounce=lM;var ent=lM;const JV=dc(ent);function u5(e){let{debounce:t,scroll:n,polyfill:r,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1};const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=P.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=P.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),u=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,f=P.useRef(!1);P.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,h,p]=P.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:b,top:x,width:w,height:k,bottom:S,right:C,x:_,y:$}=l.current.element.getBoundingClientRect(),A={left:b,top:x,width:w,height:k,bottom:S,right:C,x:_,y:$};l.current.element instanceof HTMLElement&&i&&(A.height=l.current.element.offsetHeight,A.width=l.current.element.offsetWidth),Object.freeze(A),f.current&&!int(l.current.lastBounds,A)&&a(l.current.lastBounds=A)};return[v,c?JV(v,c):v,u?JV(v,u):v]},[a,i,u,c]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function m(){l.current.element&&(l.current.resizeObserver=new o(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",p,{capture:!0,passive:!0})))}const y=v=>{!v||v===l.current.element||(g(),l.current.element=v,l.current.scrollContainers=_le(v),m())};return nnt(p,!!n),tnt(h),P.useEffect(()=>{g(),m()},[n,p,h]),P.useEffect(()=>g,[]),[y,s,d]}function tnt(e){P.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function nnt(e,t){P.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function _le(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&t.push(e),[...t,..._le(e.parentElement)]}const rnt=["x","y","top","bottom","left","right","width","height"],int=(e,t)=>rnt.every(n=>e[n]===t[n]);function ont(){const e=eM(p=>p.drawerExpanded),t=eM(p=>p.setDrawerExpanded),n=Rke(),[r,i]=u5(),[o,s]=u5(),[a,l]=u5(),[u,c]=P.useState(!1),f=P.useMemo(()=>({expanded:{top:`calc(100dvh - ${l.height+s.height+i.height}px)`},collapsed:{top:`calc(100dvh - ${l.height+s.height+16}px)`},loadExpanded:{top:`calc(100dvh - ${l.height+s.height+i.height-200}px)`}}),[l,i,s]);return{animate:u?e?"expanded":"collapsed":"loadExpanded",dragControls:n,handleDragEnd:(p,g)=>{u||c(!0),t(g.offset.y>WV?!1:g.offset.y<-WV?!0:e)},bodyRef:r,handleRef:o,navigatorRef:a,navigatorBounds:l,variants:f}}function Ele(){const e=dp(s=>s.loading),t=dp(s=>s.loadData),n=Wn(s=>s.loadingSession),r=Wn(s=>s.loadSession),i=eM(s=>s.setDrawerExpanded);return{loading:e||n,initializeSession:async s=>{await t(s),await r(),i(!1)}}}function snt(){const{loading:e,initializeSession:t}=Ele(),[n,r]=P.useState(null);return{loading:e,selectedDemo:n,handleSubmit:()=>{n!=null&&n.href&&t(n.href)},handleDemoSelect:s=>{r(s)}}}function ant(){var c,f;const{loading:e,initializeSession:t}=Ele(),[n,r]=P.useState(""),i=P.useRef(null),o=d=>{var p,g;const h=((g=d.target.files)==null?void 0:g[((p=d.target.files)==null?void 0:p.length)-1].name)??"";r(h)},s=d=>{r(d.target.value),i.current&&(i.current.value="",i.current.files=null)},a=()=>{i.current&&i.current.click()},l=()=>{var d,h;if((h=(d=i.current)==null?void 0:d.files)!=null&&h.length){const p=i.current.files[0];t(p)}else Met(n)&&t(n)},u=!n&&!((f=(c=i.current)==null?void 0:c.files)!=null&&f.length);return{fileInputRef:i,inputDisabled:u,loadingData:e,pathInput:n,handleInputChange:s,handleSubmit:l,handleFileChange:o,handleFileButtonClick:a}}function Fc(){const e=dh({base:0,lg:"18px"}),t=dh({base:window.innerWidth,lg:"full"}),n=dh({base:"100vh",lg:"calc(80vh - 18px)"}),r=vm("white","gray.900"),i=dh({base:!0,lg:!1}),o=vm("white","gray.900"),s=dh({base:320,lg:600}),a=5,l=50,u=vm("gray.100","gray.800"),c=vm(`${Au[500]}`,`${Au[400]}`),f=vm(`${Au[600]}`,`${Au[300]}`);return{cardPadding:e,tabIconSize:a,scrollbarStyle:{"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:c,borderRadius:"5px"},"&::-webkit-scrollbar-thumb:hover":{background:f}},buttonColor:u,cardWidth:t,cardHeight:n,accentColor:c,cardColor:r,mobile:i,drawerBgColor:o,tabPanelHeight:s,thumbnailSize:l}}var Hv=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$g=typeof window>"u"||"Deno"in globalThis;function ho(){}function lnt(e,t){return typeof e=="function"?e(t):e}function uM(e){return typeof e=="number"&&e>=0&&e!==1/0}function $le(e,t){return Math.max(e+(t||0)-Date.now(),0)}function hp(e,t){return typeof e=="function"?e(t):e}function ts(e,t){return typeof e=="function"?e(t):e}function eW(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(s){if(r){if(t.queryHash!==Q8(s,t.options))return!1}else if(!T1(t.queryKey,s))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||o&&!o(t))}function tW(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(A1(t.options.mutationKey)!==A1(o))return!1}else if(!T1(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Q8(e,t){return((t==null?void 0:t.queryKeyHashFn)||A1)(e)}function A1(e){return JSON.stringify(e,(t,n)=>fM(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function T1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!T1(e[n],t[n])):!1}function Ale(e,t){if(e===t)return e;const n=nW(e)&&nW(t);if(n||fM(e)&&fM(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),s=o.length,a=n?[]:{};let l=0;for(let u=0;u<s;u++){const c=n?u:o[u];(!n&&r.includes(c)||n)&&e[c]===void 0&&t[c]===void 0?(a[c]=void 0,l++):(a[c]=Ale(e[c],t[c]),a[c]===e[c]&&e[c]!==void 0&&l++)}return i===s&&l===i?e:a}return t}function cM(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function nW(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function fM(e){if(!rW(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!rW(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function rW(e){return Object.prototype.toString.call(e)==="[object Object]"}function unt(e){return new Promise(t=>{setTimeout(t,e)})}function dM(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Ale(e,t):t}function cnt(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function fnt(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Tle=Symbol();function Mle(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Tle?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Sf,uu,pp,fW,dnt=(fW=class extends Hv{constructor(){super();Me(this,Sf);Me(this,uu);Me(this,pp);pe(this,pp,t=>{if(!$g&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,uu)||this.setEventListener(B(this,pp))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,uu))==null||t.call(this),pe(this,uu,void 0))}setEventListener(t){var n;pe(this,pp,t),(n=B(this,uu))==null||n.call(this),pe(this,uu,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){B(this,Sf)!==t&&(pe(this,Sf,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof B(this,Sf)=="boolean"?B(this,Sf):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Sf=new WeakMap,uu=new WeakMap,pp=new WeakMap,fW),Z8=new dnt,gp,cu,mp,dW,hnt=(dW=class extends Hv{constructor(){super();Me(this,gp,!0);Me(this,cu);Me(this,mp);pe(this,mp,t=>{if(!$g&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){B(this,cu)||this.setEventListener(B(this,mp))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,cu))==null||t.call(this),pe(this,cu,void 0))}setEventListener(t){var n;pe(this,mp,t),(n=B(this,cu))==null||n.call(this),pe(this,cu,t(this.setOnline.bind(this)))}setOnline(t){B(this,gp)!==t&&(pe(this,gp,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return B(this,gp)}},gp=new WeakMap,cu=new WeakMap,mp=new WeakMap,dW),rk=new hnt;function pnt(e){return Math.min(1e3*2**e,3e4)}function Ple(e){return(e??"online")==="online"?rk.isOnline():!0}var Fle=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function c5(e){return e instanceof Fle}function Rle(e){let t=!1,n=0,r=!1,i,o,s;const a=new Promise((y,v)=>{o=y,s=v}),l=y=>{var v;r||(p(new Fle(y)),(v=e.abort)==null||v.call(e))},u=()=>{t=!0},c=()=>{t=!1},f=()=>Z8.isFocused()&&(e.networkMode==="always"||rk.isOnline())&&e.canRun(),d=()=>Ple(e.networkMode)&&e.canRun(),h=y=>{var v;r||(r=!0,(v=e.onSuccess)==null||v.call(e,y),i==null||i(),o(y))},p=y=>{var v;r||(r=!0,(v=e.onError)==null||v.call(e,y),i==null||i(),s(y))},g=()=>new Promise(y=>{var v;i=b=>{(r||f())&&y(b)},(v=e.onPause)==null||v.call(e)}).then(()=>{var y;i=void 0,r||(y=e.onContinue)==null||y.call(e)}),m=()=>{if(r)return;let y;const v=n===0?e.initialPromise:void 0;try{y=v??e.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(h).catch(b=>{var C;if(r)return;const x=e.retry??($g?0:3),w=e.retryDelay??pnt,k=typeof w=="function"?w(n,b):w,S=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(t||!S){p(b);return}n++,(C=e.onFail)==null||C.call(e,n,b),unt(k).then(()=>f()?void 0:g()).then(()=>{t?p(b):m()})})};return{promise:a,cancel:l,continue:()=>(i==null||i(),a),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?m():g().then(m),a)}}function gnt(){let e=[],t=0,n=d=>{d()},r=d=>{d()},i=d=>setTimeout(d,0);const o=d=>{i=d},s=d=>{let h;t++;try{h=d()}finally{t--,t||u()}return h},a=d=>{t?e.push(d):i(()=>{n(d)})},l=d=>(...h)=>{a(()=>{d(...h)})},u=()=>{const d=e;e=[],d.length&&i(()=>{r(()=>{d.forEach(h=>{n(h)})})})};return{batch:s,batchCalls:l,schedule:a,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:o}}var qn=gnt(),kf,hW,Dle=(hW=class{constructor(){Me(this,kf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),uM(this.gcTime)&&pe(this,kf,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($g?1/0:5*60*1e3))}clearGcTimeout(){B(this,kf)&&(clearTimeout(B(this,kf)),pe(this,kf,void 0))}},kf=new WeakMap,hW),yp,vp,uo,fr,M1,Cf,Yo,za,pW,mnt=(pW=class extends Dle{constructor(t){super();Me(this,Yo);Me(this,yp);Me(this,vp);Me(this,uo);Me(this,fr);Me(this,M1);Me(this,Cf);pe(this,Cf,!1),pe(this,M1,t.defaultOptions),this.setOptions(t.options),this.observers=[],pe(this,uo,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,pe(this,yp,ynt(this.options)),this.state=t.state??B(this,yp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,fr))==null?void 0:t.promise}setOptions(t){this.options={...B(this,M1),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,uo).remove(this)}setData(t,n){const r=dM(this.state.data,t,this.options);return je(this,Yo,za).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){je(this,Yo,za).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=B(this,fr))==null?void 0:r.promise;return(i=B(this,fr))==null||i.cancel(t),n?n.then(ho).catch(ho):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,yp))}isActive(){return this.observers.some(t=>ts(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!$le(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,fr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,fr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,uo).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(B(this,fr)&&(B(this,Cf)?B(this,fr).cancel({revert:!0}):B(this,fr).cancelRetry()),this.scheduleGc()),B(this,uo).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||je(this,Yo,za).call(this,{type:"invalidate"})}fetch(t,n){var l,u,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(B(this,fr))return B(this,fr).continueRetry(),B(this,fr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(d=>d.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(pe(this,Cf,!0),r.signal)})},o=()=>{const f=Mle(this.options,n),d={queryKey:this.queryKey,meta:this.meta};return i(d),pe(this,Cf,!1),this.options.persister?this.options.persister(f,d,this):f(d)},s={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(s),(l=this.options.behavior)==null||l.onFetch(s,this),pe(this,vp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=s.fetchOptions)==null?void 0:u.meta))&&je(this,Yo,za).call(this,{type:"fetch",meta:(c=s.fetchOptions)==null?void 0:c.meta});const a=f=>{var d,h,p,g;c5(f)&&f.silent||je(this,Yo,za).call(this,{type:"error",error:f}),c5(f)||((h=(d=B(this,uo).config).onError)==null||h.call(d,f,this),(g=(p=B(this,uo).config).onSettled)==null||g.call(p,this.state.data,f,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return pe(this,fr,Rle({initialPromise:n==null?void 0:n.initialPromise,fn:s.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var d,h,p,g;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(f),(h=(d=B(this,uo).config).onSuccess)==null||h.call(d,f,this),(g=(p=B(this,uo).config).onSettled)==null||g.call(p,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(f,d)=>{je(this,Yo,za).call(this,{type:"failed",failureCount:f,error:d})},onPause:()=>{je(this,Yo,za).call(this,{type:"pause"})},onContinue:()=>{je(this,Yo,za).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0})),B(this,fr).start()}},yp=new WeakMap,vp=new WeakMap,uo=new WeakMap,fr=new WeakMap,M1=new WeakMap,Cf=new WeakMap,Yo=new WeakSet,za=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Ole(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return c5(i)&&i.revert&&B(this,vp)?{...B(this,vp),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),qn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),B(this,uo).notify({query:this,type:"updated",action:t})})},pW);function Ole(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ple(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ynt(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Bs,gW,vnt=(gW=class extends Hv{constructor(t={}){super();Me(this,Bs);this.config=t,pe(this,Bs,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??Q8(i,n);let s=this.get(o);return s||(s=new mnt({cache:this,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){B(this,Bs).has(t.queryHash)||(B(this,Bs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=B(this,Bs).get(t.queryHash);n&&(t.destroy(),n===t&&B(this,Bs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){qn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,Bs).get(t)}getAll(){return[...B(this,Bs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>eW(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>eW(t,r)):n}notify(t){qn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){qn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){qn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Bs=new WeakMap,gW),js,Tr,_f,Us,Xl,mW,bnt=(mW=class extends Dle{constructor(t){super();Me(this,Us);Me(this,js);Me(this,Tr);Me(this,_f);this.mutationId=t.mutationId,pe(this,Tr,t.mutationCache),pe(this,js,[]),this.state=t.state||xnt(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,js).includes(t)||(B(this,js).push(t),this.clearGcTimeout(),B(this,Tr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){pe(this,js,B(this,js).filter(n=>n!==t)),this.scheduleGc(),B(this,Tr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){B(this,js).length||(this.state.status==="pending"?this.scheduleGc():B(this,Tr).remove(this))}continue(){var t;return((t=B(this,_f))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,s,a,l,u,c,f,d,h,p,g,m,y,v,b,x,w,k,S;pe(this,_f,Rle({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,_)=>{je(this,Us,Xl).call(this,{type:"failed",failureCount:C,error:_})},onPause:()=>{je(this,Us,Xl).call(this,{type:"pause"})},onContinue:()=>{je(this,Us,Xl).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,Tr).canRun(this)}));const n=this.state.status==="pending",r=!B(this,_f).canStart();try{if(!n){je(this,Us,Xl).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(i=B(this,Tr).config).onMutate)==null?void 0:o.call(i,t,this));const _=await((a=(s=this.options).onMutate)==null?void 0:a.call(s,t));_!==this.state.context&&je(this,Us,Xl).call(this,{type:"pending",context:_,variables:t,isPaused:r})}const C=await B(this,_f).start();return await((u=(l=B(this,Tr).config).onSuccess)==null?void 0:u.call(l,C,t,this.state.context,this)),await((f=(c=this.options).onSuccess)==null?void 0:f.call(c,C,t,this.state.context)),await((h=(d=B(this,Tr).config).onSettled)==null?void 0:h.call(d,C,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,C,null,t,this.state.context)),je(this,Us,Xl).call(this,{type:"success",data:C}),C}catch(C){try{throw await((y=(m=B(this,Tr).config).onError)==null?void 0:y.call(m,C,t,this.state.context,this)),await((b=(v=this.options).onError)==null?void 0:b.call(v,C,t,this.state.context)),await((w=(x=B(this,Tr).config).onSettled)==null?void 0:w.call(x,void 0,C,this.state.variables,this.state.context,this)),await((S=(k=this.options).onSettled)==null?void 0:S.call(k,void 0,C,t,this.state.context)),C}finally{je(this,Us,Xl).call(this,{type:"error",error:C})}}finally{B(this,Tr).runNext(this)}}},js=new WeakMap,Tr=new WeakMap,_f=new WeakMap,Us=new WeakSet,Xl=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),qn.batch(()=>{B(this,js).forEach(r=>{r.onMutationUpdate(t)}),B(this,Tr).notify({mutation:this,type:"updated",action:t})})},mW);function xnt(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ai,P1,yW,wnt=(yW=class extends Hv{constructor(t={}){super();Me(this,Ai);Me(this,P1);this.config=t,pe(this,Ai,new Map),pe(this,P1,Date.now())}build(t,n,r){const i=new bnt({mutationCache:this,mutationId:++eb(this,P1)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=Cx(t),r=B(this,Ai).get(n)??[];r.push(t),B(this,Ai).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Cx(t);if(B(this,Ai).has(n)){const i=(r=B(this,Ai).get(n))==null?void 0:r.filter(o=>o!==t);i&&(i.length===0?B(this,Ai).delete(n):B(this,Ai).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=B(this,Ai).get(Cx(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=B(this,Ai).get(Cx(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){qn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...B(this,Ai).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>tW(n,r))}findAll(t={}){return this.getAll().filter(n=>tW(t,n))}notify(t){qn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return qn.batch(()=>Promise.all(t.map(n=>n.continue().catch(ho))))}},Ai=new WeakMap,P1=new WeakMap,yW);function Cx(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Snt(e){return{onFetch:(t,n)=>{const r=async()=>{var p,g,m,y,v;const i=t.options,o=(m=(g=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:m.direction,s=((y=t.state.data)==null?void 0:y.pages)||[],a=((v=t.state.data)==null?void 0:v.pageParams)||[],l={pages:[],pageParams:[]};let u=!1;const c=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},f=Mle(t.options,t.fetchOptions),d=async(b,x,w)=>{if(u)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const k={queryKey:t.queryKey,pageParam:x,direction:w?"backward":"forward",meta:t.options.meta};c(k);const S=await f(k),{maxPages:C}=t.options,_=w?fnt:cnt;return{pages:_(b.pages,S,C),pageParams:_(b.pageParams,x,C)}};let h;if(o&&s.length){const b=o==="backward",x=b?knt:iW,w={pages:s,pageParams:a},k=x(i,w);h=await d(w,k,b)}else{h=await d(l,a[0]??i.initialPageParam);const b=e??s.length;for(let x=1;x<b;x++){const w=iW(i,h);if(w==null)break;h=await d(h,w)}}return h};t.options.persister?t.fetchFn=()=>{var i,o;return(o=(i=t.options).persister)==null?void 0:o.call(i,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function iW(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function knt(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Wt,fu,du,bp,xp,hu,wp,Sp,vW,Cnt=(vW=class{constructor(e={}){Me(this,Wt);Me(this,fu);Me(this,du);Me(this,bp);Me(this,xp);Me(this,hu);Me(this,wp);Me(this,Sp);pe(this,Wt,e.queryCache||new vnt),pe(this,fu,e.mutationCache||new wnt),pe(this,du,e.defaultOptions||{}),pe(this,bp,new Map),pe(this,xp,new Map),pe(this,hu,0)}mount(){eb(this,hu)._++,B(this,hu)===1&&(pe(this,wp,Z8.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Wt).onFocus())})),pe(this,Sp,rk.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Wt).onOnline())})))}unmount(){var e,t;eb(this,hu)._--,B(this,hu)===0&&((e=B(this,wp))==null||e.call(this),pe(this,wp,void 0),(t=B(this,Sp))==null||t.call(this),pe(this,Sp,void 0))}isFetching(e){return B(this,Wt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,fu).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,Wt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=B(this,Wt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(hp(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return B(this,Wt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=B(this,Wt).get(r.queryHash),o=i==null?void 0:i.state.data,s=lnt(t,o);if(s!==void 0)return B(this,Wt).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return qn.batch(()=>B(this,Wt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,Wt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=B(this,Wt);qn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=B(this,Wt),r={type:"active",...e};return qn.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=qn.batch(()=>B(this,Wt).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(ho).catch(ho)}invalidateQueries(e={},t={}){return qn.batch(()=>{if(B(this,Wt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=qn.batch(()=>B(this,Wt).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(ho)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(ho)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=B(this,Wt).build(this,t);return n.isStaleByTime(hp(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ho).catch(ho)}fetchInfiniteQuery(e){return e.behavior=Snt(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ho).catch(ho)}resumePausedMutations(){return rk.isOnline()?B(this,fu).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,Wt)}getMutationCache(){return B(this,fu)}getDefaultOptions(){return B(this,du)}setDefaultOptions(e){pe(this,du,e)}setQueryDefaults(e,t){B(this,bp).set(A1(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,bp).values()];let n={};return t.forEach(r=>{T1(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){B(this,xp).set(A1(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,xp).values()];let n={};return t.forEach(r=>{T1(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,du).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Q8(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Tle&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,du).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,Wt).clear(),B(this,fu).clear()}},Wt=new WeakMap,fu=new WeakMap,du=new WeakMap,bp=new WeakMap,xp=new WeakMap,hu=new WeakMap,wp=new WeakMap,Sp=new WeakMap,vW),ni,Ue,F1,Mr,Ef,kp,Vs,R1,Cp,_p,$f,Af,pu,Ep,ct,R0,hM,pM,gM,mM,yM,vM,bM,Nle,bW,_nt=(bW=class extends Hv{constructor(t,n){super();Me(this,ct);Me(this,ni);Me(this,Ue);Me(this,F1);Me(this,Mr);Me(this,Ef);Me(this,kp);Me(this,Vs);Me(this,R1);Me(this,Cp);Me(this,_p);Me(this,$f);Me(this,Af);Me(this,pu);Me(this,Ep,new Set);this.options=n,pe(this,ni,t),pe(this,Vs,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,Ue).addObserver(this),oW(B(this,Ue),this.options)?je(this,ct,R0).call(this):this.updateResult(),je(this,ct,mM).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xM(B(this,Ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xM(B(this,Ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,je(this,ct,yM).call(this),je(this,ct,vM).call(this),B(this,Ue).removeObserver(this)}setOptions(t,n){const r=this.options,i=B(this,Ue);if(this.options=B(this,ni).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ts(this.options.enabled,B(this,Ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");je(this,ct,bM).call(this),B(this,Ue).setOptions(this.options),r._defaulted&&!cM(this.options,r)&&B(this,ni).getQueryCache().notify({type:"observerOptionsUpdated",query:B(this,Ue),observer:this});const o=this.hasListeners();o&&sW(B(this,Ue),i,this.options,r)&&je(this,ct,R0).call(this),this.updateResult(n),o&&(B(this,Ue)!==i||ts(this.options.enabled,B(this,Ue))!==ts(r.enabled,B(this,Ue))||hp(this.options.staleTime,B(this,Ue))!==hp(r.staleTime,B(this,Ue)))&&je(this,ct,hM).call(this);const s=je(this,ct,pM).call(this);o&&(B(this,Ue)!==i||ts(this.options.enabled,B(this,Ue))!==ts(r.enabled,B(this,Ue))||s!==B(this,pu))&&je(this,ct,gM).call(this,s)}getOptimisticResult(t){const n=B(this,ni).getQueryCache().build(B(this,ni),t),r=this.createResult(n,t);return $nt(this,r)&&(pe(this,Mr,r),pe(this,kp,this.options),pe(this,Ef,B(this,Ue).state)),r}getCurrentResult(){return B(this,Mr)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){B(this,Ep).add(t)}getCurrentQuery(){return B(this,Ue)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=B(this,ni).defaultQueryOptions(t),r=B(this,ni).getQueryCache().build(B(this,ni),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return je(this,ct,R0).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,Mr)))}createResult(t,n){var S;const r=B(this,Ue),i=this.options,o=B(this,Mr),s=B(this,Ef),a=B(this,kp),u=t!==r?t.state:B(this,F1),{state:c}=t;let f={...c},d=!1,h;if(n._optimisticResults){const C=this.hasListeners(),_=!C&&oW(t,n),$=C&&sW(t,r,n,i);(_||$)&&(f={...f,...Ole(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:m}=f;if(n.select&&f.data!==void 0)if(o&&f.data===(s==null?void 0:s.data)&&n.select===B(this,R1))h=B(this,Cp);else try{pe(this,R1,n.select),h=n.select(f.data),h=dM(o==null?void 0:o.data,h,n),pe(this,Cp,h),pe(this,Vs,null)}catch(C){pe(this,Vs,C)}else h=f.data;if(n.placeholderData!==void 0&&h===void 0&&m==="pending"){let C;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))C=o.data;else if(C=typeof n.placeholderData=="function"?n.placeholderData((S=B(this,_p))==null?void 0:S.state.data,B(this,_p)):n.placeholderData,n.select&&C!==void 0)try{C=n.select(C),pe(this,Vs,null)}catch(_){pe(this,Vs,_)}C!==void 0&&(m="success",h=dM(o==null?void 0:o.data,C,n),d=!0)}B(this,Vs)&&(p=B(this,Vs),h=B(this,Cp),g=Date.now(),m="error");const y=f.fetchStatus==="fetching",v=m==="pending",b=m==="error",x=v&&y,w=h!==void 0;return{status:m,fetchStatus:f.fetchStatus,isPending:v,isSuccess:m==="success",isError:b,isInitialLoading:x,isLoading:x,data:h,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:b&&!w,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:b&&w,isStale:J8(t,n),refetch:this.refetch}}updateResult(t){const n=B(this,Mr),r=this.createResult(B(this,Ue),this.options);if(pe(this,Ef,B(this,Ue).state),pe(this,kp,this.options),B(this,Ef).data!==void 0&&pe(this,_p,B(this,Ue)),cM(r,n))return;pe(this,Mr,r);const i={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!B(this,Ep).size)return!0;const l=new Set(a??B(this,Ep));return this.options.throwOnError&&l.add("error"),Object.keys(B(this,Mr)).some(u=>{const c=u;return B(this,Mr)[c]!==n[c]&&l.has(c)})};(t==null?void 0:t.listeners)!==!1&&o()&&(i.listeners=!0),je(this,ct,Nle).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&je(this,ct,mM).call(this)}},ni=new WeakMap,Ue=new WeakMap,F1=new WeakMap,Mr=new WeakMap,Ef=new WeakMap,kp=new WeakMap,Vs=new WeakMap,R1=new WeakMap,Cp=new WeakMap,_p=new WeakMap,$f=new WeakMap,Af=new WeakMap,pu=new WeakMap,Ep=new WeakMap,ct=new WeakSet,R0=function(t){je(this,ct,bM).call(this);let n=B(this,Ue).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(ho)),n},hM=function(){je(this,ct,yM).call(this);const t=hp(this.options.staleTime,B(this,Ue));if($g||B(this,Mr).isStale||!uM(t))return;const r=$le(B(this,Mr).dataUpdatedAt,t)+1;pe(this,$f,setTimeout(()=>{B(this,Mr).isStale||this.updateResult()},r))},pM=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(B(this,Ue)):this.options.refetchInterval)??!1},gM=function(t){je(this,ct,vM).call(this),pe(this,pu,t),!($g||ts(this.options.enabled,B(this,Ue))===!1||!uM(B(this,pu))||B(this,pu)===0)&&pe(this,Af,setInterval(()=>{(this.options.refetchIntervalInBackground||Z8.isFocused())&&je(this,ct,R0).call(this)},B(this,pu)))},mM=function(){je(this,ct,hM).call(this),je(this,ct,gM).call(this,je(this,ct,pM).call(this))},yM=function(){B(this,$f)&&(clearTimeout(B(this,$f)),pe(this,$f,void 0))},vM=function(){B(this,Af)&&(clearInterval(B(this,Af)),pe(this,Af,void 0))},bM=function(){const t=B(this,ni).getQueryCache().build(B(this,ni),this.options);if(t===B(this,Ue))return;const n=B(this,Ue);pe(this,Ue,t),pe(this,F1,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Nle=function(t){qn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(B(this,Mr))}),B(this,ni).getQueryCache().notify({query:B(this,Ue),type:"observerResultsUpdated"})})},bW);function Ent(e,t){return ts(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function oW(e,t){return Ent(e,t)||e.state.data!==void 0&&xM(e,t,t.refetchOnMount)}function xM(e,t,n){if(ts(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&J8(e,t)}return!1}function sW(e,t,n,r){return(e!==t||ts(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&J8(e,n)}function J8(e,t){return ts(t.enabled,e)!==!1&&e.isStaleByTime(hp(t.staleTime,e))}function $nt(e,t){return!cM(e.getCurrentResult(),t)}var Ile=P.createContext(void 0),Ant=e=>{const t=P.useContext(Ile);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Tnt=({client:e,children:t})=>(P.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),E.jsx(Ile.Provider,{value:e,children:t})),Lle=P.createContext(!1),Mnt=()=>P.useContext(Lle);Lle.Provider;function Pnt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Fnt=P.createContext(Pnt()),Rnt=()=>P.useContext(Fnt);function Dnt(e,t){return typeof e=="function"?e(...t):!!e}var Ont=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Nnt=e=>{P.useEffect(()=>{e.clearReset()},[e])},Int=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Dnt(n,[e.error,r]),Lnt=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},znt=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Bnt=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function jnt(e,t,n){var u,c,f,d;const r=Ant(),i=Mnt(),o=Rnt(),s=r.defaultQueryOptions(e);(c=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||c.call(u,s),s._optimisticResults=i?"isRestoring":"optimistic",Lnt(s),Ont(s,o),Nnt(o);const[a]=P.useState(()=>new t(r,s)),l=a.getOptimisticResult(s);if(P.useSyncExternalStore(P.useCallback(h=>{const p=i?()=>{}:a.subscribe(qn.batchCalls(h));return a.updateResult(),p},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),P.useEffect(()=>{a.setOptions(s,{listeners:!1})},[s,a]),znt(s,l))throw Bnt(s,a,o);if(Int({result:l,errorResetBoundary:o,throwOnError:s.throwOnError,query:r.getQueryCache().get(s.queryHash)}))throw l.error;return(d=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||d.call(f,s,l),s.notifyOnChangeProps?l:a.trackResult(l)}function Unt(e,t){return jnt(e,_nt)}function e9(){const e=uE(r=>r.python),{isLoading:t,data:n}=Unt({queryKey:["loadPyodide",e],queryFn:async()=>e==="server"?null:await Y8()});return{loadingPyodide:e==="pyodide"&&t,pyodide:n}}function Vnt(){const{apiKey:e,setApiKey:t,python:n,setPython:r}=uE(),{loadingPyodide:i}=e9(),{colorMode:o,toggleColorMode:s}=Fg(),a=Zke(),l=p=>{t(p.target.value)},u=()=>{console.log("Downloading logs...")},[c,f]=P.useState("en"),d=async()=>{!await r(n==="pyodide"?"server":"pyodide")&&!a.isActive("server-not-available")&&a({id:"server-not-available",position:"bottom",title:"Server is not available.",description:"Failed to access Python backend. Only local Pyodide is available. Please refer the GitHub README for more information.",status:"error",duration:3e3,isClosable:!0,containerStyle:{margin:10}})};return{python:n,handleServerButtonClick:()=>{d()},apiKey:e,loadingPyodide:i,handleApiKeyChange:l,handleDownloadLogs:u,colorMode:o,toggleColorMode:s,locale:c,setLocale:f}}function Wnt({chart:e,handleClickBookmark:t}){const{drawerBgColor:n,thumbnailSize:r}=Fc();return E.jsxs(AX,{as:Xt,flexDir:"column",children:[E.jsxs(Xt,{p:1,gap:2,borderRadius:"md",onClick:()=>t(e),_hover:{cursor:"pointer",bg:n},children:[!!e.thumbnail&&E.jsx(yX,{src:e.thumbnail,alt:`Chart thumbnail ${e.title}`,w:r,h:r}),E.jsxs(Xt,{flexDir:"column",children:[E.jsx(X1,{size:"sm",children:e.fields.map(i=>i.name).join(" & ")}),E.jsx(un,{size:"xs",children:"This chart is very good"})]})]}),E.jsx(gF,{my:1})]},`bookmark-${e.key}`)}function Hnt({...e}){const{preferredCharts:t,handleClickBookmark:n}=Xtt(),{scrollbarStyle:r}=Fc();return E.jsx(K1,{...e,display:"flex",flexDirection:"column",height:"full",children:E.jsx($X,{m:0,p:0,width:"full",overflowY:"auto",sx:r,children:t.map(i=>E.jsx(Wnt,{chart:i,handleClickBookmark:n},`bookmark-${i.key}`))})})}const aW={};function wM(e,t){e===void 0&&(e=aW),t===void 0&&(t=aW);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}function qnt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Gnt(e,t,n){n&&(qnt(n)?n(e.data(t)):e.change(t,Go.changeset().remove(()=>!0).insert(n)))}function Ynt(e,t){Object.keys(t).forEach(n=>{Gnt(e,n,t[n])})}function zle(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Ble=()=>{};function f5(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}var Xnt=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const Knt=dc(Xnt);function Qnt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=zle([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!Knt(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function lW(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function d5(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function D0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class jle extends Li.PureComponent{constructor(){super(...arguments),D0(this,"containerRef",Li.createRef()),D0(this,"resultPromise",void 0),D0(this,"handleError",t=>{const{onError:n=Ble}=this.props;n(t,this.containerRef.current),console.warn(t)}),D0(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=zle([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Qnt(d5(this.props),d5(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!wM(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&lW(a,o),i&&f5(a,i)),a.run()})}else wM(i,o)||this.modifyView(s=>{o&&lW(s,o),i&&f5(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=d5(this.props);this.resultPromise=ile(this.containerRef.current,a,s).then(l=>{if(l){const{view:u}=l;f5(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Li.createElement("div",{ref:this.containerRef,className:t,style:n})}}D0(jle,"propTypes",{className:HL.string,onError:HL.func});function SM(){return SM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SM.apply(this,arguments)}function kM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Znt={};class Ule extends Li.PureComponent{constructor(){super(...arguments),kM(this,"vegaEmbed",Li.createRef()),kM(this,"handleNewView",t=>{this.update();const{onNewView:n=Ble}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){wM(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Ynt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Li.createElement(jle,SM({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}kM(Ule,"defaultProps",{data:Znt});function CM(){return CM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CM.apply(this,arguments)}function Jnt(e){return Li.createElement(Ule,CM({},e,{mode:"vega-lite"}))}function ert({chart:e,...t}){const{data:n,chartTheme:r,spec:i}=Ktt(e);return E.jsxs(Bp,{maxW:"800px",scrollSnapAlign:"start",...t,children:[E.jsx(X1,{children:e.title}),E.jsx(Jnt,{spec:i,data:n,theme:r,actions:!1,renderer:"canvas",logLevel:Zk}),E.jsx(Xt,{minH:{base:"300px",lg:"0px"}})]})}const trt=P.memo(ert);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */var nrt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const sn=(e,t)=>{const n=P.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=1.5,className:s="",children:a,...l},u)=>{const c={ref:u,...nrt,width:i,height:i,strokeWidth:o,color:r,className:s,...l};return P.createElement("svg",c,(t==null?void 0:t.map(([f,d])=>P.createElement(f,{key:d.id,...d})))??[],...Array.isArray(a)?a:[a])});return n.displayName=`${e}Icon`,n};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Vle=sn("ArrowDown01Icon",[["path",{d:"M18 9.00005C18 9.00005 13.5811 15 12 15C10.4188 15 6 9 6 9",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const rrt=sn("ArrowUp01Icon",[["path",{d:"M18 15C18 15 13.5811 9.00001 12 9C10.4188 8.99999 6 15 6 15",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const irt=sn("Calendar03Icon",[["path",{d:"M18 2V4M6 2V4",stroke:"currentColor",key:"k0"}],["path",{d:"M11.9955 13H12.0045M11.9955 17H12.0045M15.991 13H16M8 13H8.00897M8 17H8.00897",stroke:"currentColor",key:"k1"}],["path",{d:"M3.5 8H20.5",stroke:"currentColor",key:"k2"}],["path",{d:"M2.5 12.2432C2.5 7.88594 2.5 5.70728 3.75212 4.35364C5.00424 3 7.01949 3 11.05 3H12.95C16.9805 3 18.9958 3 20.2479 4.35364C21.5 5.70728 21.5 7.88594 21.5 12.2432V12.7568C21.5 17.1141 21.5 19.2927 20.2479 20.6464C18.9958 22 16.9805 22 12.95 22H11.05C7.01949 22 5.00424 22 3.75212 20.6464C2.5 19.2927 2.5 17.1141 2.5 12.7568V12.2432Z",stroke:"currentColor",key:"k3"}],["path",{d:"M3 8H21",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const ort=sn("CloudIcon",[["path",{d:"M17.4776 10.0001C17.485 10 17.4925 10 17.5 10C19.9853 10 22 12.0147 22 14.5C22 16.9853 19.9853 19 17.5 19H7C4.23858 19 2 16.7614 2 14C2 11.4003 3.98398 9.26407 6.52042 9.0227M17.4776 10.0001C17.4924 9.83536 17.5 9.66856 17.5 9.5C17.5 6.46243 15.0376 4 12 4C9.12324 4 6.76233 6.20862 6.52042 9.0227M17.4776 10.0001C17.3753 11.1345 16.9286 12.1696 16.2428 13M6.52042 9.0227C6.67826 9.00768 6.83823 9 7 9C8.12582 9 9.16474 9.37209 10.0005 10",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const srt=sn("Exchange01Icon",[["path",{d:"M16.9767 19.5C19.4017 17.8876 21 15.1305 21 12C21 7.02944 16.9706 3 12 3C11.3126 3 10.6432 3.07706 10 3.22302M16.9767 19.5V16M16.9767 19.5H20.5M7 4.51555C4.58803 6.13007 3 8.87958 3 12C3 16.9706 7.02944 21 12 21C12.6874 21 13.3568 20.9229 14 20.777M7 4.51555V8M7 4.51555H3.5",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const art=sn("FavouriteIcon",[["path",{d:"M19.4626 3.99415C16.7809 2.34923 14.4404 3.01211 13.0344 4.06801C12.4578 4.50096 12.1696 4.71743 12 4.71743C11.8304 4.71743 11.5422 4.50096 10.9656 4.06801C9.55962 3.01211 7.21909 2.34923 4.53744 3.99415C1.01807 6.15294 0.221721 13.2749 8.33953 19.2834C9.88572 20.4278 10.6588 21 12 21C13.3412 21 14.1143 20.4278 15.6605 19.2834C23.7783 13.2749 22.9819 6.15294 19.4626 3.99415Z",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const lrt=sn("FileAttachmentIcon",[["path",{d:"M4 12.0004L4 14.5446C4 17.7896 4 19.4121 4.88607 20.5111C5.06508 20.7331 5.26731 20.9354 5.48933 21.1144C6.58831 22.0004 8.21082 22.0004 11.4558 22.0004C12.1614 22.0004 12.5141 22.0004 12.8372 21.8864C12.9044 21.8627 12.9702 21.8354 13.0345 21.8047C13.3436 21.6569 13.593 21.4074 14.0919 20.9085L18.8284 16.172C19.4065 15.5939 19.6955 15.3049 19.8478 14.9374C20 14.5698 20 14.1611 20 13.3436V10.0004C20 6.22919 20 4.34358 18.8284 3.172C17.7693 2.11284 16.1265 2.01122 13.0345 2.00146M13 21.5004V21.0004C13 18.172 13 16.7578 13.8787 15.8791C14.7574 15.0004 16.1716 15.0004 19 15.0004H19.5",stroke:"currentColor",key:"k0"}],["path",{d:"M4 8.23028V5.46105C4 3.54929 5.567 1.99951 7.5 1.99951C9.433 1.99951 11 3.54929 11 5.46105V9.26874C11 10.2246 10.2165 10.9995 9.25 10.9995C8.2835 10.9995 7.5 10.2246 7.5 9.26874V5.46105",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const urt=sn("GithubIcon",[["path",{d:"M10 20.5675C6.57143 21.7248 3.71429 20.5675 2 17",stroke:"currentColor",key:"k0"}],["path",{d:"M10 22V18.7579C10 18.1596 10.1839 17.6396 10.4804 17.1699C10.6838 16.8476 10.5445 16.3904 10.1771 16.2894C7.13394 15.4528 5 14.1077 5 9.64606C5 8.48611 5.38005 7.39556 6.04811 6.4464C6.21437 6.21018 6.29749 6.09208 6.31748 5.9851C6.33746 5.87813 6.30272 5.73852 6.23322 5.45932C5.95038 4.32292 5.96871 3.11619 6.39322 2.02823C6.39322 2.02823 7.27042 1.74242 9.26698 2.98969C9.72282 3.27447 9.95075 3.41686 10.1515 3.44871C10.3522 3.48056 10.6206 3.41384 11.1573 3.28041C11.8913 3.09795 12.6476 3 13.5 3C14.3524 3 15.1087 3.09795 15.8427 3.28041C16.3794 3.41384 16.6478 3.48056 16.8485 3.44871C17.0493 3.41686 17.2772 3.27447 17.733 2.98969C19.7296 1.74242 20.6068 2.02823 20.6068 2.02823C21.0313 3.11619 21.0496 4.32292 20.7668 5.45932C20.6973 5.73852 20.6625 5.87813 20.6825 5.9851C20.7025 6.09207 20.7856 6.21019 20.9519 6.4464C21.6199 7.39556 22 8.48611 22 9.64606C22 14.1077 19.8661 15.4528 16.8229 16.2894C16.4555 16.3904 16.3162 16.8476 16.5196 17.1699C16.8161 17.6396 17 18.1596 17 18.7579V22",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const crt=sn("GridIcon",[["path",{d:"M7 2V22",stroke:"currentColor",key:"k0"}],["path",{d:"M17 2V22",stroke:"currentColor",key:"k1"}],["path",{d:"M22 7L2 7",stroke:"currentColor",key:"k2"}],["path",{d:"M22 17L2 17",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const frt=sn("HeartCheckIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 18C14 18 15 18 16 20C16 20 19.1765 15 22 14",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const drt=sn("LabelImportantIcon",[["path",{d:"M13 4H6.23456C3.79424 4 2.57407 4 2.14438 4.76649C2.13129 4.78984 2.11883 4.81353 2.10701 4.83754C1.71893 5.62592 2.41032 6.63129 3.7931 8.64204C4.89612 10.246 5.44763 11.048 5.4611 11.9555C5.46154 11.9852 5.46154 12.0148 5.4611 12.0445C5.44763 12.952 4.89612 13.754 3.7931 15.358C2.41032 17.3687 1.71893 18.3741 2.10701 19.1625C2.11883 19.1865 2.13129 19.2102 2.14438 19.2335C2.57407 20 3.79424 20 6.23456 20H13C14.9628 20 15.9443 20 16.7889 19.5777C17.6334 19.1554 18.2223 18.3703 19.4 16.8C21.1333 14.4889 22 13.3333 22 12C22 10.6667 21.1333 9.51111 19.4 7.2C18.2223 5.62972 17.6334 4.84458 16.7889 4.42229C15.9443 4 14.9628 4 13 4Z",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const hrt=sn("Moon01Icon",[["path",{d:"M21.0985 7.84477C20.458 8.55417 19.5311 9 18.5 9C16.567 9 15 7.433 15 5.5C15 4.46895 15.4458 3.54203 16.1552 2.90149M21.0985 7.84477C21.6774 9.11025 22 10.5174 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C13.4826 2 14.8898 2.32262 16.1552 2.90149M21.0985 7.84477C20.0998 5.66155 18.3384 3.90018 16.1552 2.90149",stroke:"currentColor",key:"k0"}],["path",{d:"M10 8H10.0064",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14H7.00635",stroke:"currentColor",key:"k2"}],["path",{d:"M16 16C16 17.1046 15.1046 18 14 18C12.8954 18 12 17.1046 12 16C12 14.8954 12.8954 14 14 14C15.1046 14 16 14.8954 16 16Z",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const prt=sn("PresentationBarChart01Icon",[["path",{d:"M12 18V22",stroke:"currentColor",key:"k0"}],["path",{d:"M10 18L5 22",stroke:"currentColor",key:"k1"}],["path",{d:"M14 18L19 22",stroke:"currentColor",key:"k2"}],["path",{d:"M2.5 12C2.5 14.8284 2.5 16.2426 3.37868 17.1213C4.25736 18 5.67157 18 8.5 18H15.5C18.3284 18 19.7426 18 20.6213 17.1213C21.5 16.2426 21.5 14.8284 21.5 12V8C21.5 5.17157 21.5 3.75736 20.6213 2.87868C19.7426 2 18.3284 2 15.5 2H8.5C5.67157 2 4.25736 2 3.37868 2.87868C2.5 3.75736 2.5 5.17157 2.5 8V12Z",stroke:"currentColor",key:"k3"}],["path",{d:"M8 13V10M12 13V7M16 13V11",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const grt=sn("ProfileIcon",[["path",{d:"M2.5 12C2.5 7.52166 2.5 5.28249 3.89124 3.89124C5.28249 2.5 7.52166 2.5 12 2.5C16.4783 2.5 18.7175 2.5 20.1088 3.89124C21.5 5.28249 21.5 7.52166 21.5 12C21.5 16.4783 21.5 18.7175 20.1088 20.1088C18.7175 21.5 16.4783 21.5 12 21.5C7.52166 21.5 5.28249 21.5 3.89124 20.1088C2.5 18.7175 2.5 16.4783 2.5 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 7L17 7",stroke:"currentColor",key:"k1"}],["path",{d:"M7 7L8 7",stroke:"currentColor",key:"k2"}],["path",{d:"M7 12L8 12",stroke:"currentColor",key:"k3"}],["path",{d:"M7 17L8 17",stroke:"currentColor",key:"k4"}],["path",{d:"M11 12L17 12",stroke:"currentColor",key:"k5"}],["path",{d:"M11 17L17 17",stroke:"currentColor",key:"k6"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const mrt=sn("Settings01Icon",[["path",{d:"M21.3175 7.14139L20.8239 6.28479C20.4506 5.63696 20.264 5.31305 19.9464 5.18388C19.6288 5.05472 19.2696 5.15664 18.5513 5.36048L17.3311 5.70418C16.8725 5.80994 16.3913 5.74994 15.9726 5.53479L15.6357 5.34042C15.2766 5.11043 15.0004 4.77133 14.8475 4.37274L14.5136 3.37536C14.294 2.71534 14.1842 2.38533 13.9228 2.19657C13.6615 2.00781 13.3143 2.00781 12.6199 2.00781H11.5051C10.8108 2.00781 10.4636 2.00781 10.2022 2.19657C9.94085 2.38533 9.83106 2.71534 9.61149 3.37536L9.27753 4.37274C9.12465 4.77133 8.84845 5.11043 8.48937 5.34042L8.15249 5.53479C7.73374 5.74994 7.25259 5.80994 6.79398 5.70418L5.57375 5.36048C4.85541 5.15664 4.49625 5.05472 4.17867 5.18388C3.86109 5.31305 3.67445 5.63696 3.30115 6.28479L2.80757 7.14139C2.45766 7.74864 2.2827 8.05227 2.31666 8.37549C2.35061 8.69871 2.58483 8.95918 3.05326 9.48012L4.0843 10.6328C4.3363 10.9518 4.51521 11.5078 4.51521 12.0077C4.51521 12.5078 4.33636 13.0636 4.08433 13.3827L3.05326 14.5354C2.58483 15.0564 2.35062 15.3168 2.31666 15.6401C2.2827 15.9633 2.45766 16.2669 2.80757 16.8741L3.30114 17.7307C3.67443 18.3785 3.86109 18.7025 4.17867 18.8316C4.49625 18.9608 4.85542 18.8589 5.57377 18.655L6.79394 18.3113C7.25263 18.2055 7.73387 18.2656 8.15267 18.4808L8.4895 18.6752C8.84851 18.9052 9.12464 19.2442 9.2775 19.6428L9.61149 20.6403C9.83106 21.3003 9.94085 21.6303 10.2022 21.8191C10.4636 22.0078 10.8108 22.0078 11.5051 22.0078H12.6199C13.3143 22.0078 13.6615 22.0078 13.9228 21.8191C14.1842 21.6303 14.294 21.3003 14.5136 20.6403L14.8476 19.6428C15.0004 19.2442 15.2765 18.9052 15.6356 18.6752L15.9724 18.4808C16.3912 18.2656 16.8724 18.2055 17.3311 18.3113L18.5513 18.655C19.2696 18.8589 19.6288 18.9608 19.9464 18.8316C20.264 18.7025 20.4506 18.3785 20.8239 17.7307L21.3175 16.8741C21.6674 16.2669 21.8423 15.9633 21.8084 15.6401C21.7744 15.3168 21.5402 15.0564 21.0718 14.5354L20.0407 13.3827C19.7887 13.0636 19.6098 12.5078 19.6098 12.0077C19.6098 11.5078 19.7888 10.9518 20.0407 10.6328L21.0718 9.48012C21.5402 8.95918 21.7744 8.69871 21.8084 8.37549C21.8423 8.05227 21.6674 7.74864 21.3175 7.14139Z",stroke:"currentColor",key:"k0"}],["path",{d:"M15.5195 12C15.5195 13.933 13.9525 15.5 12.0195 15.5C10.0865 15.5 8.51953 13.933 8.51953 12C8.51953 10.067 10.0865 8.5 12.0195 8.5C13.9525 8.5 15.5195 10.067 15.5195 12Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const yrt=sn("SmartPhone01Icon",[["path",{d:"M5 9C5 5.70017 5 4.05025 6.02513 3.02513C7.05025 2 8.70017 2 12 2C15.2998 2 16.9497 2 17.9749 3.02513C19 4.05025 19 5.70017 19 9V15C19 18.2998 19 19.9497 17.9749 20.9749C16.9497 22 15.2998 22 12 22C8.70017 22 7.05025 22 6.02513 20.9749C5 19.9497 5 18.2998 5 15V9Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 19H13",stroke:"currentColor",key:"k1"}],["path",{d:"M9 2L9.089 2.53402C9.28188 3.69129 9.37832 4.26993 9.77519 4.62204C10.1892 4.98934 10.7761 5 12 5C13.2239 5 13.8108 4.98934 14.2248 4.62204C14.6217 4.26993 14.7181 3.69129 14.911 2.53402L15 2",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Wle=sn("StartUp02Icon",[["path",{d:"M7 11.2947C12.284 1.44656 18.8635 1.333 21.4928 2.50724C22.667 5.1365 22.5534 11.716 12.7053 17C12.6031 16.4129 12.0352 14.8749 10.5801 13.4199C9.12512 11.9648 7.58712 11.3969 7 11.2947Z",stroke:"currentColor",key:"k0"}],["path",{d:"M14 16.8C16.0428 17.7334 16.2609 19.4069 16.5439 21C16.5439 21 20.8223 18.0481 18.0856 14",stroke:"currentColor",key:"k1"}],["path",{d:"M7.19998 9.99987C6.26664 7.95709 4.59305 7.73899 3 7.45601C3 7.45601 5.95194 3.17753 10 5.91431",stroke:"currentColor",key:"k2"}],["path",{d:"M6.20866 13.9998C5.57677 14.6317 4.50255 16.4642 5.26082 18.739C7.53564 19.4973 9.36813 18.4231 10 17.7912",stroke:"currentColor",key:"k3"}],["path",{d:"M18.0952 7.753C18.0952 6.7328 17.2682 5.90578 16.248 5.90578C15.2278 5.90578 14.4008 6.7328 14.4008 7.753C14.4008 8.77319 15.2278 9.60022 16.248 9.60022C17.2682 9.60022 18.0952 8.77319 18.0952 7.753Z",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const vrt=sn("Sun03Icon",[["path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M12 2V3.5M12 20.5V22M19.0708 19.0713L18.0101 18.0106M5.98926 5.98926L4.9286 4.9286M22 12H20.5M3.5 12H2M19.0713 4.92871L18.0106 5.98937M5.98975 18.0107L4.92909 19.0714",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const brt=sn("SwipeUp02Icon",[["path",{d:"M18.5 2.00195V8.00195M18.5 2.00195C17.7998 2.00195 16.4915 3.99625 16 4.50195M18.5 2.00195C19.2002 2.00195 20.5085 3.99625 21 4.50195",stroke:"currentColor",key:"k0"}],["path",{d:"M15.3913 21.998C15.3395 20.084 15.4684 19.8535 15.6052 19.4277C15.7419 19.002 16.6982 17.4665 17.0366 16.3695C18.1313 12.8202 17.111 12.0653 15.7507 11.0588C14.2422 9.94257 11.3968 9.37728 9.98573 9.49966V3.7462C9.98573 2.78288 9.20481 2.00195 8.24148 2.00195C7.27816 2.00195 6.49723 2.78288 6.49723 3.7462V9.96607M6.49774 21.9988V20.9854C6.43328 20.041 5.49529 18.9235 4.32672 17.3166C3.12509 15.576 2.86688 14.6973 3.05591 13.8848C3.15329 13.4694 3.40594 12.7832 4.64647 11.6104L6.49723 9.96607M6.49723 14.0323V9.96607",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const xrt=sn("Tag01Icon",[["circle",{cx:"1.5",cy:"1.5",r:"1.5",transform:"matrix(1 0 0 -1 16 8)",stroke:"currentColor",key:"k0"}],["path",{d:"M2.77423 11.1439C1.77108 12.2643 1.7495 13.9546 2.67016 15.1437C4.49711 17.5033 6.49674 19.5029 8.85633 21.3298C10.0454 22.2505 11.7357 22.2289 12.8561 21.2258C15.8979 18.5022 18.6835 15.6559 21.3719 12.5279C21.6377 12.2187 21.8039 11.8397 21.8412 11.4336C22.0062 9.63798 22.3452 4.46467 20.9403 3.05974C19.5353 1.65481 14.362 1.99377 12.5664 2.15876C12.1603 2.19608 11.7813 2.36233 11.472 2.62811C8.34412 5.31646 5.49781 8.10211 2.77423 11.1439Z",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14L10 17",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const wrt=sn("TextFontIcon",[["path",{d:"M14 19L11.1069 10.7479C9.76348 6.91597 9.09177 5 8 5C6.90823 5 6.23652 6.91597 4.89309 10.7479L2 19M4.5 12H11.5",stroke:"currentColor",key:"k0"}],["path",{d:"M21.9692 13.9392V18.4392M21.9692 13.9392C22.0164 13.1161 22.0182 12.4891 21.9194 11.9773C21.6864 10.7709 20.4258 10.0439 19.206 9.89599C18.0385 9.75447 17.1015 10.055 16.1535 11.4363M21.9692 13.9392L19.1256 13.9392C18.6887 13.9392 18.2481 13.9603 17.8272 14.0773C15.2545 14.7925 15.4431 18.4003 18.0233 18.845C18.3099 18.8944 18.6025 18.9156 18.8927 18.9026C19.5703 18.8724 20.1955 18.545 20.7321 18.1301C21.3605 17.644 21.9692 16.9655 21.9692 15.9392V13.9392Z",stroke:"currentColor",key:"k1"}]]);function Srt(){return E.jsxs(Y1,{w:"full",color:"gray",gap:1,mt:4,p:0,children:[E.jsxs(Xt,{gap:1,children:[E.jsx(un,{fontSize:"xs",textAlign:"center",children:"Swipytics @ 2024"}),E.jsx(Jx,{href:"https://jiwnchoi.me",isExternal:!0,children:E.jsx(un,{fontSize:"xs",textAlign:"center",textDecoration:"underline",children:"Jiwon Choi"})}),E.jsx(un,{fontSize:"xs",textAlign:"center",children:"All rights reserved."})]}),E.jsxs(Xt,{gap:4,children:[E.jsx(Jx,{href:"https://github.com/jiwnchoi/Swipytics",isExternal:!0,children:E.jsx(yu,{leftIcon:E.jsx(mt,{as:urt}),size:"xs",variant:"link",color:"gray",children:"Github"})}),E.jsx(Jx,{href:"https://idclab.skku.edu",isExternal:!0,children:E.jsxs(yu,{variant:"link",size:"xs",leftIcon:E.jsx(mt,{as:drt}),color:"gray",children:[E.jsx(un,{fontFamily:"Rajdhani",fontWeight:600,fontSize:"sm",children:"IDC"}),E.jsx(un,{fontFamily:"Rajdhani",fontWeight:500,fontSize:"sm",children:"Lab"})]})})]})]})}function krt(e){const{mobile:t}=Fc();return E.jsxs(Xt,{justify:t?"start":"center",...e,children:[E.jsxs(Bp,{flexDir:"column",minH:"400px",children:[E.jsxs(Bp,{gap:2,mb:4,children:[E.jsx(mt,{as:brt,boxSize:16}),E.jsx(X1,{fontSize:48,children:"Swipytics"})]}),E.jsx(un,{textColor:"gray",textAlign:"center",children:"The Simplest On-the-fly Exploratory Analytics"})]}),E.jsx(Srt,{})]})}function Crt(e){const{charts:t,ref:n}=Ztt(),{cardHeight:r,cardColor:i,cardWidth:o}=Fc();return E.jsxs(Xt,{...e,ref:n,w:"full",scrollSnapType:"y mandatory",overflowY:"auto",style:{WebkitOverflowScrolling:"touch"},sx:{"&::-webkit-scrollbar":{display:"none"}},children:[E.jsx(krt,{flexDir:"column",minW:"full",w:o,minH:r,bgColor:i,borderRadius:"lg",scrollSnapAlign:"start"}),t.map(s=>E.jsx(trt,{w:o,maxW:o,chart:s,minH:r,bgColor:i,flexDirection:"column",borderRadius:"lg"},s.key))]})}function _rt(e){const{sessionInitialized:t,chartDisplaying:n,currentChartPreferred:r,handleNextChart:i,handlePrevChart:o,handleRenewChart:s,handlePreferChart:a}=Jtt();return E.jsxs(Xt,{...e,children:[E.jsx(vu,{size:"lg",w:"full","aria-label":"Previous chart",icon:E.jsx(mt,{as:rrt}),onClick:o,isDisabled:!t||!n}),E.jsx(vu,{size:"lg",w:"full","aria-label":"Next chart",icon:E.jsx(mt,{as:Vle}),onClick:i,isDisabled:!t}),E.jsx(vu,{size:"lg",w:"full","aria-label":"Renew current chart",icon:E.jsx(mt,{as:srt}),onClick:s,isDisabled:!t||!n}),E.jsx(vu,{size:"lg",w:"full","aria-label":"Bookmark current chart",icon:E.jsx(mt,{as:art}),onClick:a,colorScheme:r?"red":"gray",isDisabled:!t||!n})]})}function Ert({children:e,controller:t,...n}){const{animate:r,dragControls:i,handleDragEnd:o,bodyRef:s,handleRef:a,navigatorRef:l,navigatorBounds:u,variants:c}=ont(),{drawerBgColor:f}=Fc();return E.jsxs(aF.div,{dragControls:i,style:{width:"100%",left:0,position:"fixed"},variants:c,initial:r,animate:r,drag:"y",dragListener:!0,dragConstraints:{bottom:0,top:0},dragElastic:0,onDragEnd:o,whileTap:{cursor:"grabbing"},children:[E.jsxs(Bp,{...n,h:"fit-content",flexDir:"column",gap:0,borderRadius:"xl",boxShadow:"0px -4px 10px rgba(0, 0, 0, 0.1)",bgColor:f,children:[E.jsx(Xt,{bgColor:"gray",minH:1,mt:2,borderRadius:4,minW:10,ref:a}),E.jsx(Xt,{w:"full",ref:s,p:4,flexDir:"column",children:e}),E.jsx(Xt,{minH:"100dvh"})]}),E.jsx(B1,{children:E.jsx(Xt,{onPointerDown:d=>i.start(d),bgColor:f,ref:l,position:"absolute",top:`calc(100dvh - ${u.height}px)`,p:4,pb:8,left:0,zIndex:500,w:"full",children:t})})]})}function $rt({children:e,...t}){return E.jsx(Xt,{...t,children:E.jsx(Y1,{w:"full",h:"fit-content",gap:4,rounded:"lg",p:4,align:"start",minH:"full",children:e})})}function Art({children:e,controller:t,...n}){const{mobile:r}=Fc();return r?E.jsx(Ert,{...n,controller:t,children:e}):E.jsxs($rt,{...n,children:[t,e]})}function Trt(e){const{loadingPyodide:t}=e9(),{loadingData:n,fileInputRef:r,pathInput:i,inputDisabled:o,handleFileButtonClick:s,handleFileChange:a,handleInputChange:l,handleSubmit:u}=ant();return E.jsxs(Xt,{as:bX,...e,children:[E.jsxs(CX,{children:[E.jsx(qy,{placeholder:"https://...",onChange:l,value:i,borderRightRadius:0,_focusVisible:{borderColor:Rr}}),E.jsxs(hF,{children:[E.jsx(qy,{type:"file",display:"none",ref:r,onChange:a,accept:".csv,.json"}),E.jsx(vu,{"aria-label":"Select File",icon:E.jsx(mt,{as:lrt}),variant:"link",onClick:s})]})]}),E.jsx(vu,{borderLeftRadius:0,colorScheme:Rr,type:"submit",isLoading:n||t,icon:E.jsx(mt,{as:Wle}),"aria-label":"Load Data",isDisabled:o,onClick:u,children:o?"Please Input Data":"Load Data"})]})}function Yc({label:e,children:t,...n}){return E.jsxs(Xt,{w:"full",flexDir:"row",justify:"space-between",alignItems:"center",...n,children:[E.jsx(un,{minW:"130px",children:e}),t]})}function Mrt(){const{handleSubmit:e,loading:t,selectedDemo:n,handleDemoSelect:r}=snt(),{loadingPyodide:i}=e9();return E.jsxs(E.Fragment,{children:[E.jsx(mF,{size:"sm",onChange:o=>r(VV.find(s=>s.name===o.target.value)??null),placeholder:"Select Demo",variant:"outline",colorScheme:Rr,icon:E.jsx(mt,{as:Vle}),borderRightRadius:0,children:VV.map(o=>E.jsx("option",{value:o.name,children:o.name},o.name))}),E.jsx(vu,{borderLeftRadius:0,colorScheme:Rr,type:"submit",isLoading:t||i,isDisabled:!n||i,icon:E.jsx(mt,{as:Wle}),"aria-label":"Load Data",onClick:e})]})}function Prt(e){const{python:t,handleServerButtonClick:n,apiKey:r,handleApiKeyChange:i,handleDownloadLogs:o,colorMode:s,toggleColorMode:a,locale:l,setLocale:u}=Vnt();return E.jsxs(K1,{as:Y1,...e,children:[E.jsx(Yc,{label:"Load Data",children:E.jsx(Trt,{w:"full"})}),E.jsx(Yc,{label:"Load Demo",children:E.jsx(Mrt,{})}),E.jsx(Yc,{label:"OpenAI Key",children:E.jsx(qy,{w:"full",placeholder:"sk-...",value:r,onChange:i})}),E.jsx(gF,{my:4}),E.jsx(Yc,{label:"Locale",children:E.jsxs(mF,{size:"sm",variant:"outline",value:l,onChange:c=>{u(c.target.value)},children:[E.jsx("option",{value:"en",children:"English"}),E.jsx("option",{value:"ko",children:"한국어"})]})}),E.jsx(Yc,{label:"Color Mode",children:E.jsx(yu,{leftIcon:E.jsx(mt,{as:s==="light"?vrt:hrt}),onClick:a,size:"sm",w:"full",children:s==="light"?"Light":"Dark"})}),E.jsx(Yc,{label:"Backend",children:E.jsx(yu,{leftIcon:E.jsx(mt,{as:t==="server"?ort:yrt}),onClick:n,size:"sm",w:"full",children:t[0].toUpperCase()+t.slice(1)})}),E.jsx(Yc,{label:"System Logs",children:E.jsxs(Xt,{gap:2,w:"full",children:[E.jsx(yu,{w:"full",onClick:o,children:"Load Latest"}),E.jsx(yu,{w:"full",onClick:o,children:"Download"})]})})]})}const Frt=({metadataType:e,...t})=>{switch(e){case"numeric":return E.jsx(mt,{as:crt,...t});case"categorical":return E.jsx(mt,{as:wrt,...t});case"datetime":return E.jsx(mt,{as:irt,...t});case"name":return E.jsx(mt,{as:xrt,...t});default:return null}},Km=ev(".3~s");function Ho({children:e}){return E.jsx(Xt,{flexDir:"column",justify:"center",alignItems:"start",w:"full",h:"full",children:E.jsx(RX,{children:e})})}function Rrt({metadata:e}){switch(e.type){case"datetime":return E.jsxs(ey,{gridTemplateColumns:"1fr 4fr",children:[E.jsx(Ho,{children:"min"}),E.jsx(un,{children:e.min}),E.jsx(Ho,{children:"max"}),E.jsx(un,{children:e.max})]});case"numeric":return E.jsxs(ey,{gridTemplateColumns:"2fr 3fr 2fr 3fr",children:[E.jsx(Ho,{children:"min"}),E.jsx(un,{children:Km(e.min)}),E.jsx(Ho,{children:"max"}),E.jsx(un,{children:Km(e.max)}),E.jsx(Ho,{children:"mean"}),E.jsx(un,{children:Km(e.mean)}),E.jsx(Ho,{children:"median"}),E.jsx(un,{children:Km(e.median)}),E.jsx(Ho,{children:"std"}),E.jsx(un,{children:Km(e.std)})]});case"categorical":return E.jsxs(ey,{gridTemplateColumns:"1fr 4fr",children:[E.jsx(Ho,{children:"top"}),E.jsx(un,{children:e.top}),E.jsx(Ho,{children:"freq"}),E.jsx(un,{children:e.freq})]});case"name":default:return null}}function Drt({field:e}){return E.jsxs(hX,{children:[E.jsx(cX,{borderRadius:"md",children:E.jsxs(Xt,{w:"full",gap:2,align:"center",children:[E.jsx(Frt,{metadataType:e.type,boxSize:4}),E.jsx(X1,{fontSize:"md",children:e.name}),E.jsx(MX,{}),E.jsx(dX,{})]})}),E.jsxs(gX,{px:2,pb:2,children:[E.jsxs(ey,{gridTemplateColumns:"2fr 3fr 2fr 3fr",children:[E.jsx(Ho,{children:"unique"}),E.jsx(un,{children:e.metadata.unique}),E.jsx(Ho,{children:"missing"}),E.jsx(un,{children:e.metadata.missing})]}),E.jsx(Rrt,{metadata:e.metadata})]})]})}function Ort(e){const t=Wn(r=>r.fields),{scrollbarStyle:n}=Fc();return E.jsx(K1,{as:Y1,h:"full",...e,children:E.jsx(Xt,{h:"full",w:"full",sx:n,overflowY:"auto",flexDir:"column",children:E.jsx(mX,{allowMultiple:!0,children:t.map(r=>E.jsx(Drt,{field:r},r.name))})})})}function Nrt(){const{cardHeight:e,cardColor:t,tabPanelHeight:n,tabIconSize:r}=Fc();return E.jsxs(Xt,{minW:{base:"full",lg:"container.xl"},maxH:e,h:e,gap:4,flex:1,flexDir:{base:"column",lg:"row"},children:[E.jsx(Crt,{w:"full",flexDir:"column",gap:{base:0,lg:4}}),E.jsx(Art,{bgColor:t,borderRadius:"lg",w:{base:"full",lg:"sm"},minW:{base:"full",lg:"sm"},maxW:{base:"full",lg:"sm"},controller:E.jsx(_rt,{gap:2,w:"full"}),children:E.jsxs(LX,{w:"full",defaultIndex:2,isFitted:!0,colorScheme:Rr,children:[E.jsxs(zX,{children:[E.jsx(l0,{children:E.jsx(mt,{boxSize:r,as:frt})}),E.jsx(l0,{children:E.jsx(mt,{boxSize:r,as:prt})}),E.jsx(l0,{children:E.jsx(mt,{boxSize:r,as:grt})}),E.jsx(l0,{children:E.jsx(mt,{boxSize:r,as:mrt})})]}),E.jsxs(BX,{mt:4,flex:1,overflow:"auto",h:n,children:[E.jsx(Hnt,{p:0,m:0,gap:2,w:"full"}),E.jsx(K1,{children:"Chart Description and Explanation at Here"}),E.jsx(Ort,{}),E.jsx(Prt,{align:"start"})]})]})})]})}const Irt=Pbe({initialColorMode:"dark",useSystemColorMode:!0,components:{Button:{defaultProps:{size:"sm"}},Input:{defaultProps:{size:"sm",focusBorderColor:Au[200]},baseStyle:{field:{_focusVisible:{borderColor:Au[200]}}}},Select:{defaultProps:{size:"sm",focusBorderColor:Au[200]}},Tabs:{parts:["tabpanel"],baseStyle:{tabpanel:{p:0}}},Card:{baseStyle:e=>({container:{bg:e.colorMode==="light"?"white":"gray.900"}})}},styles:{global:e=>({body:{height:"100lvh",overflow:"hidden",overscrollBehavior:"none",bg:e.colorMode==="light"?"gray.100":"gray.800"},html:{height:"100lvh",overflow:"hidden",overscrollBehavior:"none",focusBorderColor:Au[200]}})}});var Hle,uW=EP;Hle=uW.createRoot,uW.hydrateRoot;const Lrt=new Cnt;Hle(document.getElementById("root")).render(E.jsx(P.StrictMode,{children:E.jsx(Tnt,{client:Lrt,children:E.jsx(eCe,{theme:Irt,children:E.jsx(Bp,{flexDir:"column",minH:"100dvh",p:0,m:0,w:"full",children:E.jsx(Nrt,{})})})})}))});export default zrt();
