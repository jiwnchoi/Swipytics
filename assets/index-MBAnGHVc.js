var mfe=Object.defineProperty;var G9=e=>{throw TypeError(e)};var yfe=(e,t,n)=>t in e?mfe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vfe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var fe=(e,t,n)=>yfe(e,typeof t!="symbol"?t+"":t,n),LE=(e,t,n)=>t.has(e)||G9("Cannot "+n);var j=(e,t,n)=>(LE(e,t,"read from private field"),n?n.call(e):t.get(e)),Fe=(e,t,n)=>t.has(e)?G9("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),pe=(e,t,n,r)=>(LE(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ue=(e,t,n)=>(LE(e,t,"access private method"),n);var gb=(e,t,n,r)=>({set _(i){pe(e,t,i,n)},get _(){return j(e,t,r)}});var Fat=vfe((Slt,g9)=>{function bfe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uH={exports:{}},Ck={},cH={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1=Symbol.for("react.element"),xfe=Symbol.for("react.portal"),wfe=Symbol.for("react.fragment"),Sfe=Symbol.for("react.strict_mode"),kfe=Symbol.for("react.profiler"),Cfe=Symbol.for("react.provider"),_fe=Symbol.for("react.context"),Efe=Symbol.for("react.forward_ref"),$fe=Symbol.for("react.suspense"),Afe=Symbol.for("react.memo"),Tfe=Symbol.for("react.lazy"),Y9=Symbol.iterator;function Mfe(e){return e===null||typeof e!="object"?null:(e=Y9&&e[Y9]||e["@@iterator"],typeof e=="function"?e:null)}var fH={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dH=Object.assign,hH={};function Vg(e,t,n){this.props=e,this.context=t,this.refs=hH,this.updater=n||fH}Vg.prototype.isReactComponent={};Vg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pH(){}pH.prototype=Vg.prototype;function QM(e,t,n){this.props=e,this.context=t,this.refs=hH,this.updater=n||fH}var ZM=QM.prototype=new pH;ZM.constructor=QM;dH(ZM,Vg.prototype);ZM.isPureReactComponent=!0;var X9=Array.isArray,gH=Object.prototype.hasOwnProperty,JM={current:null},mH={key:!0,ref:!0,__self:!0,__source:!0};function yH(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)gH.call(t,r)&&!mH.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:G1,type:e,key:o,ref:s,props:i,_owner:JM.current}}function Ffe(e,t){return{$$typeof:G1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eF(e){return typeof e=="object"&&e!==null&&e.$$typeof===G1}function Pfe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var K9=/\/+/g;function zE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pfe(""+e.key):t.toString(36)}function jx(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case G1:case xfe:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+zE(s,0):r,X9(i)?(n="",e!=null&&(n=e.replace(K9,"$&/")+"/"),jx(i,t,n,"",function(u){return u})):i!=null&&(eF(i)&&(i=Ffe(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(K9,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",X9(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+zE(o,a);s+=jx(o,t,n,l,i)}else if(l=Mfe(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+zE(o,a++),s+=jx(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function mb(e,t,n){if(e==null)return e;var r=[],i=0;return jx(e,r,"","",function(o){return t.call(n,o,i++)}),r}function Rfe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Jr={current:null},Bx={transition:null},Dfe={ReactCurrentDispatcher:Jr,ReactCurrentBatchConfig:Bx,ReactCurrentOwner:JM};function vH(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:mb,forEach:function(e,t,n){mb(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return mb(e,function(){t++}),t},toArray:function(e){return mb(e,function(t){return t})||[]},only:function(e){if(!eF(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Vg;je.Fragment=wfe;je.Profiler=kfe;je.PureComponent=QM;je.StrictMode=Sfe;je.Suspense=$fe;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dfe;je.act=vH;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=dH({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=JM.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)gH.call(t,l)&&!mH.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:G1,type:e.type,key:i,ref:o,props:r,_owner:s}};je.createContext=function(e){return e={$$typeof:_fe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Cfe,_context:e},e.Consumer=e};je.createElement=yH;je.createFactory=function(e){var t=yH.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:Efe,render:e}};je.isValidElement=eF;je.lazy=function(e){return{$$typeof:Tfe,_payload:{_status:-1,_result:e},_init:Rfe}};je.memo=function(e,t){return{$$typeof:Afe,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=Bx.transition;Bx.transition={};try{e()}finally{Bx.transition=t}};je.unstable_act=vH;je.useCallback=function(e,t){return Jr.current.useCallback(e,t)};je.useContext=function(e){return Jr.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return Jr.current.useDeferredValue(e)};je.useEffect=function(e,t){return Jr.current.useEffect(e,t)};je.useId=function(){return Jr.current.useId()};je.useImperativeHandle=function(e,t,n){return Jr.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return Jr.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return Jr.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return Jr.current.useMemo(e,t)};je.useReducer=function(e,t,n){return Jr.current.useReducer(e,t,n)};je.useRef=function(e){return Jr.current.useRef(e)};je.useState=function(e){return Jr.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return Jr.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return Jr.current.useTransition()};je.version="18.3.1";cH.exports=je;var T=cH.exports;const Bi=zl(T),Q9=bfe({__proto__:null,default:Bi},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ofe=T,Nfe=Symbol.for("react.element"),Ife=Symbol.for("react.fragment"),Lfe=Object.prototype.hasOwnProperty,zfe=Ofe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jfe={key:!0,ref:!0,__self:!0,__source:!0};function bH(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Lfe.call(t,r)&&!jfe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Nfe,type:e,key:o,ref:s,props:i,_owner:zfe.current}}Ck.Fragment=Ife;Ck.jsx=bH;Ck.jsxs=bH;uH.exports=Ck;var E=uH.exports,Bfe=!1;function Ufe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Vfe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Wfe=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!Bfe:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Vfe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Ufe(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e}(),fr="-ms-",U2="-moz-",it="-webkit-",xH="comm",tF="rule",nF="decl",Hfe="@import",wH="@keyframes",qfe="@layer",Gfe=Math.abs,_k=String.fromCharCode,Yfe=Object.assign;function Xfe(e,t){return qn(e,0)^45?(((t<<2^qn(e,0))<<2^qn(e,1))<<2^qn(e,2))<<2^qn(e,3):0}function SH(e){return e.trim()}function Kfe(e,t){return(e=t.exec(e))?e[0]:e}function ot(e,t,n){return e.replace(t,n)}function D5(e,t){return e.indexOf(t)}function qn(e,t){return e.charCodeAt(t)|0}function Dy(e,t,n){return e.slice(t,n)}function Js(e){return e.length}function rF(e){return e.length}function yb(e,t){return t.push(e),e}function Qfe(e,t){return e.map(t).join("")}var Ek=1,jp=1,kH=0,vi=0,hn=0,Wg="";function $k(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Ek,column:jp,length:s,return:""}}function _m(e,t){return Yfe($k("",null,null,"",null,null,0),e,{length:-e.length},t)}function Zfe(){return hn}function Jfe(){return hn=vi>0?qn(Wg,--vi):0,jp--,hn===10&&(jp=1,Ek--),hn}function Ui(){return hn=vi<kH?qn(Wg,vi++):0,jp++,hn===10&&(jp=1,Ek++),hn}function fa(){return qn(Wg,vi)}function Ux(){return vi}function Y1(e,t){return Dy(Wg,e,t)}function Oy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function CH(e){return Ek=jp=1,kH=Js(Wg=e),vi=0,[]}function _H(e){return Wg="",e}function Vx(e){return SH(Y1(vi-1,O5(e===91?e+2:e===40?e+1:e)))}function ede(e){for(;(hn=fa())&&hn<33;)Ui();return Oy(e)>2||Oy(hn)>3?"":" "}function tde(e,t){for(;--t&&Ui()&&!(hn<48||hn>102||hn>57&&hn<65||hn>70&&hn<97););return Y1(e,Ux()+(t<6&&fa()==32&&Ui()==32))}function O5(e){for(;Ui();)switch(hn){case e:return vi;case 34:case 39:e!==34&&e!==39&&O5(hn);break;case 40:e===41&&O5(e);break;case 92:Ui();break}return vi}function nde(e,t){for(;Ui()&&e+hn!==57;)if(e+hn===84&&fa()===47)break;return"/*"+Y1(t,vi-1)+"*"+_k(e===47?e:Ui())}function rde(e){for(;!Oy(fa());)Ui();return Y1(e,vi)}function ide(e){return _H(Wx("",null,null,null,[""],e=CH(e),0,[0],e))}function Wx(e,t,n,r,i,o,s,a,l){for(var u=0,c=0,f=s,d=0,h=0,p=0,g=1,y=1,m=1,v=0,b="",x=i,w=o,k=r,S=b;y;)switch(p=v,v=Ui()){case 40:if(p!=108&&qn(S,f-1)==58){D5(S+=ot(Vx(v),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:S+=Vx(v);break;case 9:case 10:case 13:case 32:S+=ede(p);break;case 92:S+=tde(Ux()-1,7);continue;case 47:switch(fa()){case 42:case 47:yb(ode(nde(Ui(),Ux()),t,n),l);break;default:S+="/"}break;case 123*g:a[u++]=Js(S)*m;case 125*g:case 59:case 0:switch(v){case 0:case 125:y=0;case 59+c:m==-1&&(S=ot(S,/\f/g,"")),h>0&&Js(S)-f&&yb(h>32?J9(S+";",r,n,f-1):J9(ot(S," ","")+";",r,n,f-2),l);break;case 59:S+=";";default:if(yb(k=Z9(S,t,n,u,c,i,a,b,x=[],w=[],f),o),v===123)if(c===0)Wx(S,t,k,k,x,o,f,a,w);else switch(d===99&&qn(S,3)===110?100:d){case 100:case 108:case 109:case 115:Wx(e,k,k,r&&yb(Z9(e,k,k,0,0,i,a,b,i,x=[],f),w),i,w,f,a,r?x:w);break;default:Wx(S,k,k,k,[""],w,0,a,w)}}u=c=h=0,g=m=1,b=S="",f=s;break;case 58:f=1+Js(S),h=p;default:if(g<1){if(v==123)--g;else if(v==125&&g++==0&&Jfe()==125)continue}switch(S+=_k(v),v*g){case 38:m=c>0?1:(S+="\f",-1);break;case 44:a[u++]=(Js(S)-1)*m,m=1;break;case 64:fa()===45&&(S+=Vx(Ui())),d=fa(),c=f=Js(b=S+=rde(Ux())),v++;break;case 45:p===45&&Js(S)==2&&(g=0)}}return o}function Z9(e,t,n,r,i,o,s,a,l,u,c){for(var f=i-1,d=i===0?o:[""],h=rF(d),p=0,g=0,y=0;p<r;++p)for(var m=0,v=Dy(e,f+1,f=Gfe(g=s[p])),b=e;m<h;++m)(b=SH(g>0?d[m]+" "+v:ot(v,/&\f/g,d[m])))&&(l[y++]=b);return $k(e,t,n,i===0?tF:a,l,u,c)}function ode(e,t,n){return $k(e,t,n,xH,_k(Zfe()),Dy(e,2,-2),0)}function J9(e,t,n,r){return $k(e,t,n,nF,Dy(e,0,r),Dy(e,r+1,-1),r)}function op(e,t){for(var n="",r=rF(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function sde(e,t,n,r){switch(e.type){case qfe:if(e.children.length)break;case Hfe:case nF:return e.return=e.return||e.value;case xH:return"";case wH:return e.return=e.value+"{"+op(e.children,r)+"}";case tF:e.value=e.props.join(",")}return Js(n=op(e.children,r))?e.return=e.value+"{"+n+"}":""}function ade(e){var t=rF(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}function lde(e){return function(t){t.root||(t=t.return)&&e(t)}}var eN=function(t){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=t(r);return n.set(r,i),i}};function EH(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var ude=function(t,n,r){for(var i=0,o=0;i=o,o=fa(),i===38&&o===12&&(n[r]=1),!Oy(o);)Ui();return Y1(t,vi)},cde=function(t,n){var r=-1,i=44;do switch(Oy(i)){case 0:i===38&&fa()===12&&(n[r]=1),t[r]+=ude(vi-1,n,r);break;case 2:t[r]+=Vx(i);break;case 4:if(i===44){t[++r]=fa()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=_k(i)}while(i=Ui());return t},fde=function(t,n){return _H(cde(CH(t),n))},tN=new WeakMap,dde=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!tN.get(r))&&!i){tN.set(t,!0);for(var o=[],s=fde(n,o),a=r.props,l=0,u=0;l<s.length;l++)for(var c=0;c<a.length;c++,u++)t.props[u]=o[l]?s[l].replace(/&\f/g,a[c]):a[c]+" "+s[l]}}},hde=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function $H(e,t){switch(Xfe(e,t)){case 5103:return it+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return it+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return it+e+U2+e+fr+e+e;case 6828:case 4268:return it+e+fr+e+e;case 6165:return it+e+fr+"flex-"+e+e;case 5187:return it+e+ot(e,/(\w+).+(:[^]+)/,it+"box-$1$2"+fr+"flex-$1$2")+e;case 5443:return it+e+fr+"flex-item-"+ot(e,/flex-|-self/,"")+e;case 4675:return it+e+fr+"flex-line-pack"+ot(e,/align-content|flex-|-self/,"")+e;case 5548:return it+e+fr+ot(e,"shrink","negative")+e;case 5292:return it+e+fr+ot(e,"basis","preferred-size")+e;case 6060:return it+"box-"+ot(e,"-grow","")+it+e+fr+ot(e,"grow","positive")+e;case 4554:return it+ot(e,/([^-])(transform)/g,"$1"+it+"$2")+e;case 6187:return ot(ot(ot(e,/(zoom-|grab)/,it+"$1"),/(image-set)/,it+"$1"),e,"")+e;case 5495:case 3959:return ot(e,/(image-set\([^]*)/,it+"$1$`$1");case 4968:return ot(ot(e,/(.+:)(flex-)?(.*)/,it+"box-pack:$3"+fr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+it+e+e;case 4095:case 3583:case 4068:case 2532:return ot(e,/(.+)-inline(.+)/,it+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Js(e)-1-t>6)switch(qn(e,t+1)){case 109:if(qn(e,t+4)!==45)break;case 102:return ot(e,/(.+:)(.+)-([^]+)/,"$1"+it+"$2-$3$1"+U2+(qn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~D5(e,"stretch")?$H(ot(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(qn(e,t+1)!==115)break;case 6444:switch(qn(e,Js(e)-3-(~D5(e,"!important")&&10))){case 107:return ot(e,":",":"+it)+e;case 101:return ot(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+it+(qn(e,14)===45?"inline-":"")+"box$3$1"+it+"$2$3$1"+fr+"$2box$3")+e}break;case 5936:switch(qn(e,t+11)){case 114:return it+e+fr+ot(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return it+e+fr+ot(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return it+e+fr+ot(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return it+e+fr+e+e}return e}var pde=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case nF:t.return=$H(t.value,t.length);break;case wH:return op([_m(t,{value:ot(t.value,"@","@"+it)})],i);case tF:if(t.length)return Qfe(t.props,function(o){switch(Kfe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return op([_m(t,{props:[ot(o,/:(read-\w+)/,":"+U2+"$1")]})],i);case"::placeholder":return op([_m(t,{props:[ot(o,/:(plac\w+)/,":"+it+"input-$1")]}),_m(t,{props:[ot(o,/:(plac\w+)/,":"+U2+"$1")]}),_m(t,{props:[ot(o,/:(plac\w+)/,fr+"input-$1")]})],i)}return""})}},gde=[pde],mde=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var y=g.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||gde,o={},s,a=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var y=g.getAttribute("data-emotion").split(" "),m=1;m<y.length;m++)o[y[m]]=!0;a.push(g)});var l,u=[dde,hde];{var c,f=[sde,lde(function(g){c.insert(g)})],d=ade(u.concat(i,f)),h=function(y){return op(ide(y),d)};l=function(y,m,v,b){c=v,h(y?y+"{"+m.styles+"}":m.styles),b&&(p.inserted[m.name]=!0)}}var p={key:n,sheet:new Wfe({key:n,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return p.sheet.hydrate(a),p};function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V2.apply(null,arguments)}var AH={exports:{}},pt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zn=typeof Symbol=="function"&&Symbol.for,iF=zn?Symbol.for("react.element"):60103,oF=zn?Symbol.for("react.portal"):60106,Ak=zn?Symbol.for("react.fragment"):60107,Tk=zn?Symbol.for("react.strict_mode"):60108,Mk=zn?Symbol.for("react.profiler"):60114,Fk=zn?Symbol.for("react.provider"):60109,Pk=zn?Symbol.for("react.context"):60110,sF=zn?Symbol.for("react.async_mode"):60111,Rk=zn?Symbol.for("react.concurrent_mode"):60111,Dk=zn?Symbol.for("react.forward_ref"):60112,Ok=zn?Symbol.for("react.suspense"):60113,yde=zn?Symbol.for("react.suspense_list"):60120,Nk=zn?Symbol.for("react.memo"):60115,Ik=zn?Symbol.for("react.lazy"):60116,vde=zn?Symbol.for("react.block"):60121,bde=zn?Symbol.for("react.fundamental"):60117,xde=zn?Symbol.for("react.responder"):60118,wde=zn?Symbol.for("react.scope"):60119;function no(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case iF:switch(e=e.type,e){case sF:case Rk:case Ak:case Mk:case Tk:case Ok:return e;default:switch(e=e&&e.$$typeof,e){case Pk:case Dk:case Ik:case Nk:case Fk:return e;default:return t}}case oF:return t}}}function TH(e){return no(e)===Rk}pt.AsyncMode=sF;pt.ConcurrentMode=Rk;pt.ContextConsumer=Pk;pt.ContextProvider=Fk;pt.Element=iF;pt.ForwardRef=Dk;pt.Fragment=Ak;pt.Lazy=Ik;pt.Memo=Nk;pt.Portal=oF;pt.Profiler=Mk;pt.StrictMode=Tk;pt.Suspense=Ok;pt.isAsyncMode=function(e){return TH(e)||no(e)===sF};pt.isConcurrentMode=TH;pt.isContextConsumer=function(e){return no(e)===Pk};pt.isContextProvider=function(e){return no(e)===Fk};pt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===iF};pt.isForwardRef=function(e){return no(e)===Dk};pt.isFragment=function(e){return no(e)===Ak};pt.isLazy=function(e){return no(e)===Ik};pt.isMemo=function(e){return no(e)===Nk};pt.isPortal=function(e){return no(e)===oF};pt.isProfiler=function(e){return no(e)===Mk};pt.isStrictMode=function(e){return no(e)===Tk};pt.isSuspense=function(e){return no(e)===Ok};pt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ak||e===Rk||e===Mk||e===Tk||e===Ok||e===yde||typeof e=="object"&&e!==null&&(e.$$typeof===Ik||e.$$typeof===Nk||e.$$typeof===Fk||e.$$typeof===Pk||e.$$typeof===Dk||e.$$typeof===bde||e.$$typeof===xde||e.$$typeof===wde||e.$$typeof===vde)};pt.typeOf=no;AH.exports=pt;var Sde=AH.exports,MH=Sde,kde={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Cde={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},FH={};FH[MH.ForwardRef]=kde;FH[MH.Memo]=Cde;var _de=!0;function Ede(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var PH=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||_de===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},RH=function(t,n,r){PH(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function $de(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Ade={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tde=!1,Mde=/[A-Z]|^ms/g,Fde=/_EMO_([^_]+?)_([^]*?)_EMO_/g,DH=function(t){return t.charCodeAt(1)===45},nN=function(t){return t!=null&&typeof t!="boolean"},jE=EH(function(e){return DH(e)?e:e.replace(Mde,"-$&").toLowerCase()}),rN=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Fde,function(r,i,o){return ea={name:i,styles:o,next:ea},i})}return Ade[t]!==1&&!DH(t)&&typeof n=="number"&&n!==0?n+"px":n},Pde="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Ny(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return ea={name:i.name,styles:i.styles,next:ea},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)ea={name:s.name,styles:s.styles,next:ea},s=s.next;var a=o.styles+";";return a}return Rde(e,t,n)}case"function":{if(e!==void 0){var l=ea,u=n(e);return ea=l,Ny(e,t,u)}break}}var c=n;if(t==null)return c;var f=t[c];return f!==void 0?f:c}function Rde(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ny(e,t,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var a=s;t!=null&&t[a]!==void 0?r+=o+"{"+t[a]+"}":nN(a)&&(r+=jE(o)+":"+rN(o,a)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&Tde)throw new Error(Pde);if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var l=0;l<s.length;l++)nN(s[l])&&(r+=jE(o)+":"+rN(o,s[l])+";");else{var u=Ny(e,t,s);switch(o){case"animation":case"animationName":{r+=jE(o)+":"+u+";";break}default:r+=o+"{"+u+"}"}}}}return r}var iN=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ea;function aF(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";ea=void 0;var o=e[0];if(o==null||o.raw===void 0)r=!1,i+=Ny(n,t,o);else{var s=o;i+=s[0]}for(var a=1;a<e.length;a++)if(i+=Ny(n,t,e[a]),r){var l=o;i+=l[a]}iN.lastIndex=0;for(var u="",c;(c=iN.exec(i))!==null;)u+="-"+c[1];var f=$de(i)+u;return{name:f,styles:i,next:ea}}var Dde=function(t){return t()},OH=Q9.useInsertionEffect?Q9.useInsertionEffect:!1,Ode=OH||Dde,oN=OH||T.useLayoutEffect,NH=T.createContext(typeof HTMLElement<"u"?mde({key:"css"}):null);NH.Provider;var IH=function(t){return T.forwardRef(function(n,r){var i=T.useContext(NH);return t(n,i,r)})},Iy=T.createContext({}),Nde=function(t,n){if(typeof n=="function"){var r=n(t);return r}return V2({},t,n)},Ide=eN(function(e){return eN(function(t){return Nde(e,t)})}),Lde=function(t){var n=T.useContext(Iy);return t.theme!==n&&(n=Ide(n)(t.theme)),T.createElement(Iy.Provider,{value:n},t.children)},Lk=IH(function(e,t){var n=e.styles,r=aF([n],void 0,T.useContext(Iy)),i=T.useRef();return oN(function(){var o=t.key+"-global",s=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return t.sheet.tags.length&&(s.before=t.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[t]),oN(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&RH(t,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}t.insert("",r,s,!1)},[t,r.name]),null});function zde(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return aF(t)}var jde=function(){var t=zde.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},LH=String.raw,zH=LH`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Bde=()=>E.jsx(Lk,{styles:zH}),Ude=({scope:e=""})=>E.jsx(Lk,{styles:LH`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${zH}
    `});function Vde(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function jn(e={}){const{name:t,strict:n=!0,hookName:r="useContext",providerName:i="Provider",errorMessage:o,defaultValue:s}=e,a=T.createContext(s);a.displayName=t;function l(){var u;const c=T.useContext(a);if(!c&&n){const f=new Error(o??Vde(r,i));throw f.name="ContextError",(u=Error.captureStackTrace)==null||u.call(Error,f,l),f}return c}return[a.Provider,l,a]}var[Wde,Hde]=jn({strict:!1,name:"PortalManagerContext"});function jH(e){const{children:t,zIndex:n}=e;return E.jsx(Wde,{value:{zIndex:n},children:t})}jH.displayName="PortalManager";var Bp=globalThis!=null&&globalThis.document?T.useLayoutEffect:T.useEffect,BH={exports:{}},ro={},UH={exports:{}},VH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,B){var Y=N.length;N.push(B);e:for(;0<Y;){var W=Y-1>>>1,oe=N[W];if(0<i(oe,B))N[W]=B,N[Y]=oe,Y=W;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var B=N[0],Y=N.pop();if(Y!==B){N[0]=Y;e:for(var W=0,oe=N.length,re=oe>>>1;W<re;){var we=2*(W+1)-1,De=N[we],ut=we+1,$n=N[ut];if(0>i(De,Y))ut<oe&&0>i($n,De)?(N[W]=$n,N[ut]=Y,W=ut):(N[W]=De,N[we]=Y,W=we);else if(ut<oe&&0>i($n,Y))N[W]=$n,N[ut]=Y,W=ut;else break e}}return B}function i(N,B){var Y=N.sortIndex-B.sortIndex;return Y!==0?Y:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(N){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=N)r(u),B.sortIndex=B.expirationTime,t(l,B);else break;B=n(u)}}function x(N){if(g=!1,b(N),!p)if(n(l)!==null)p=!0,D(w);else{var B=n(u);B!==null&&I(x,B.startTime-N)}}function w(N,B){p=!1,g&&(g=!1,m(C),C=-1),h=!0;var Y=d;try{for(b(B),f=n(l);f!==null&&(!(f.expirationTime>B)||N&&!A());){var W=f.callback;if(typeof W=="function"){f.callback=null,d=f.priorityLevel;var oe=W(f.expirationTime<=B);B=e.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(l)&&r(l),b(B)}else r(l);f=n(l)}if(f!==null)var re=!0;else{var we=n(u);we!==null&&I(x,we.startTime-B),re=!1}return re}finally{f=null,d=Y,h=!1}}var k=!1,S=null,C=-1,_=5,$=-1;function A(){return!(e.unstable_now()-$<_)}function O(){if(S!==null){var N=e.unstable_now();$=N;var B=!0;try{B=S(!0,N)}finally{B?M():(k=!1,S=null)}}else k=!1}var M;if(typeof v=="function")M=function(){v(O)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,R=P.port2;P.port1.onmessage=O,M=function(){R.postMessage(null)}}else M=function(){y(O,0)};function D(N){S=N,k||(k=!0,M())}function I(N,B){C=y(function(){N(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,D(w))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(N){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var Y=d;d=B;try{return N()}finally{d=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Y=d;d=N;try{return B()}finally{d=Y}},e.unstable_scheduleCallback=function(N,B,Y){var W=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?W+Y:W):Y=W,N){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Y+oe,N={id:c++,callback:B,priorityLevel:N,startTime:Y,expirationTime:oe,sortIndex:-1},Y>W?(N.sortIndex=Y,t(u,N),n(l)===null&&N===n(u)&&(g?(m(C),C=-1):g=!0,I(x,Y-W))):(N.sortIndex=oe,t(l,N),p||h||(p=!0,D(w))),N},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(N){var B=d;return function(){var Y=d;d=B;try{return N.apply(this,arguments)}finally{d=Y}}}})(VH);UH.exports=VH;var qde=UH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gde=T,Yi=qde;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WH=new Set,Ly={};function Pd(e,t){Up(e,t),Up(e+"Capture",t)}function Up(e,t){for(Ly[e]=t,e=0;e<t.length;e++)WH.add(t[e])}var $l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),N5=Object.prototype.hasOwnProperty,Yde=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sN={},aN={};function Xde(e){return N5.call(aN,e)?!0:N5.call(sN,e)?!1:Yde.test(e)?aN[e]=!0:(sN[e]=!0,!1)}function Kde(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Qde(e,t,n,r){if(t===null||typeof t>"u"||Kde(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ei(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nr[e]=new ei(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nr[t]=new ei(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nr[e]=new ei(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nr[e]=new ei(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nr[e]=new ei(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nr[e]=new ei(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nr[e]=new ei(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nr[e]=new ei(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nr[e]=new ei(e,5,!1,e.toLowerCase(),null,!1,!1)});var lF=/[\-:]([a-z])/g;function uF(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lF,uF);nr[t]=new ei(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lF,uF);nr[t]=new ei(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lF,uF);nr[t]=new ei(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nr[e]=new ei(e,1,!1,e.toLowerCase(),null,!1,!1)});nr.xlinkHref=new ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nr[e]=new ei(e,1,!1,e.toLowerCase(),null,!0,!0)});function cF(e,t,n,r){var i=nr.hasOwnProperty(t)?nr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Qde(t,n,i,r)&&(n=null),r||i===null?Xde(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var jl=Gde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vb=Symbol.for("react.element"),Mh=Symbol.for("react.portal"),Fh=Symbol.for("react.fragment"),fF=Symbol.for("react.strict_mode"),I5=Symbol.for("react.profiler"),HH=Symbol.for("react.provider"),qH=Symbol.for("react.context"),dF=Symbol.for("react.forward_ref"),L5=Symbol.for("react.suspense"),z5=Symbol.for("react.suspense_list"),hF=Symbol.for("react.memo"),uu=Symbol.for("react.lazy"),GH=Symbol.for("react.offscreen"),lN=Symbol.iterator;function Em(e){return e===null||typeof e!="object"?null:(e=lN&&e[lN]||e["@@iterator"],typeof e=="function"?e:null)}var Gt=Object.assign,BE;function p0(e){if(BE===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);BE=t&&t[1]||""}return`
`+BE+e}var UE=!1;function VE(e,t){if(!e||UE)return"";UE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{UE=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?p0(e):""}function Zde(e){switch(e.tag){case 5:return p0(e.type);case 16:return p0("Lazy");case 13:return p0("Suspense");case 19:return p0("SuspenseList");case 0:case 2:case 15:return e=VE(e.type,!1),e;case 11:return e=VE(e.type.render,!1),e;case 1:return e=VE(e.type,!0),e;default:return""}}function j5(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fh:return"Fragment";case Mh:return"Portal";case I5:return"Profiler";case fF:return"StrictMode";case L5:return"Suspense";case z5:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qH:return(e.displayName||"Context")+".Consumer";case HH:return(e._context.displayName||"Context")+".Provider";case dF:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hF:return t=e.displayName||null,t!==null?t:j5(e.type)||"Memo";case uu:t=e._payload,e=e._init;try{return j5(e(t))}catch{}}return null}function Jde(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j5(t);case 8:return t===fF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function YH(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ehe(e){var t=YH(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bb(e){e._valueTracker||(e._valueTracker=ehe(e))}function XH(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=YH(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function W2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function B5(e,t){var n=t.checked;return Gt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function uN(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=nc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function KH(e,t){t=t.checked,t!=null&&cF(e,"checked",t,!1)}function U5(e,t){KH(e,t);var n=nc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?V5(e,t.type,n):t.hasOwnProperty("defaultValue")&&V5(e,t.type,nc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cN(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function V5(e,t,n){(t!=="number"||W2(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var g0=Array.isArray;function sp(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+nc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function W5(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return Gt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fN(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ee(92));if(g0(n)){if(1<n.length)throw Error(ee(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:nc(n)}}function QH(e,t){var n=nc(t.value),r=nc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function dN(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ZH(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function H5(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ZH(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xb,JH=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xb=xb||document.createElement("div"),xb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zy(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Q0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},the=["Webkit","ms","Moz","O"];Object.keys(Q0).forEach(function(e){the.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Q0[t]=Q0[e]})});function eq(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Q0.hasOwnProperty(e)&&Q0[e]?(""+t).trim():t+"px"}function tq(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=eq(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var nhe=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function q5(e,t){if(t){if(nhe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function G5(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y5=null;function pF(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var X5=null,ap=null,lp=null;function hN(e){if(e=Q1(e)){if(typeof X5!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=Vk(t),X5(e.stateNode,e.type,t))}}function nq(e){ap?lp?lp.push(e):lp=[e]:ap=e}function rq(){if(ap){var e=ap,t=lp;if(lp=ap=null,hN(e),t)for(e=0;e<t.length;e++)hN(t[e])}}function iq(e,t){return e(t)}function oq(){}var WE=!1;function sq(e,t,n){if(WE)return e(t,n);WE=!0;try{return iq(e,t,n)}finally{WE=!1,(ap!==null||lp!==null)&&(oq(),rq())}}function jy(e,t){var n=e.stateNode;if(n===null)return null;var r=Vk(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ee(231,t,typeof n));return n}var K5=!1;if($l)try{var $m={};Object.defineProperty($m,"passive",{get:function(){K5=!0}}),window.addEventListener("test",$m,$m),window.removeEventListener("test",$m,$m)}catch{K5=!1}function rhe(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Z0=!1,H2=null,q2=!1,Q5=null,ihe={onError:function(e){Z0=!0,H2=e}};function ohe(e,t,n,r,i,o,s,a,l){Z0=!1,H2=null,rhe.apply(ihe,arguments)}function she(e,t,n,r,i,o,s,a,l){if(ohe.apply(this,arguments),Z0){if(Z0){var u=H2;Z0=!1,H2=null}else throw Error(ee(198));q2||(q2=!0,Q5=u)}}function Rd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function aq(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pN(e){if(Rd(e)!==e)throw Error(ee(188))}function ahe(e){var t=e.alternate;if(!t){if(t=Rd(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return pN(i),e;if(o===r)return pN(i),t;o=o.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?e:t}function lq(e){return e=ahe(e),e!==null?uq(e):null}function uq(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uq(e);if(t!==null)return t;e=e.sibling}return null}var cq=Yi.unstable_scheduleCallback,gN=Yi.unstable_cancelCallback,lhe=Yi.unstable_shouldYield,uhe=Yi.unstable_requestPaint,on=Yi.unstable_now,che=Yi.unstable_getCurrentPriorityLevel,gF=Yi.unstable_ImmediatePriority,fq=Yi.unstable_UserBlockingPriority,G2=Yi.unstable_NormalPriority,fhe=Yi.unstable_LowPriority,dq=Yi.unstable_IdlePriority,zk=null,da=null;function dhe(e){if(da&&typeof da.onCommitFiberRoot=="function")try{da.onCommitFiberRoot(zk,e,void 0,(e.current.flags&128)===128)}catch{}}var ms=Math.clz32?Math.clz32:ghe,hhe=Math.log,phe=Math.LN2;function ghe(e){return e>>>=0,e===0?32:31-(hhe(e)/phe|0)|0}var wb=64,Sb=4194304;function m0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Y2(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=m0(a):(o&=s,o!==0&&(r=m0(o)))}else s=n&~i,s!==0?r=m0(s):o!==0&&(r=m0(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ms(t),i=1<<n,r|=e[n],t&=~i;return r}function mhe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yhe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-ms(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=mhe(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function Z5(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hq(){var e=wb;return wb<<=1,!(wb&4194240)&&(wb=64),e}function HE(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function X1(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ms(t),e[t]=n}function vhe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ms(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function mF(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ms(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ht=0;function pq(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gq,yF,mq,yq,vq,J5=!1,kb=[],Bu=null,Uu=null,Vu=null,By=new Map,Uy=new Map,vu=[],bhe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mN(e,t){switch(e){case"focusin":case"focusout":Bu=null;break;case"dragenter":case"dragleave":Uu=null;break;case"mouseover":case"mouseout":Vu=null;break;case"pointerover":case"pointerout":By.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uy.delete(t.pointerId)}}function Am(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Q1(t),t!==null&&yF(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function xhe(e,t,n,r,i){switch(t){case"focusin":return Bu=Am(Bu,e,t,n,r,i),!0;case"dragenter":return Uu=Am(Uu,e,t,n,r,i),!0;case"mouseover":return Vu=Am(Vu,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return By.set(o,Am(By.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Uy.set(o,Am(Uy.get(o)||null,e,t,n,r,i)),!0}return!1}function bq(e){var t=kf(e.target);if(t!==null){var n=Rd(t);if(n!==null){if(t=n.tag,t===13){if(t=aq(n),t!==null){e.blockedOn=t,vq(e.priority,function(){mq(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hx(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=eT(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Y5=r,n.target.dispatchEvent(r),Y5=null}else return t=Q1(n),t!==null&&yF(t),e.blockedOn=n,!1;t.shift()}return!0}function yN(e,t,n){Hx(e)&&n.delete(t)}function whe(){J5=!1,Bu!==null&&Hx(Bu)&&(Bu=null),Uu!==null&&Hx(Uu)&&(Uu=null),Vu!==null&&Hx(Vu)&&(Vu=null),By.forEach(yN),Uy.forEach(yN)}function Tm(e,t){e.blockedOn===t&&(e.blockedOn=null,J5||(J5=!0,Yi.unstable_scheduleCallback(Yi.unstable_NormalPriority,whe)))}function Vy(e){function t(i){return Tm(i,e)}if(0<kb.length){Tm(kb[0],e);for(var n=1;n<kb.length;n++){var r=kb[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Bu!==null&&Tm(Bu,e),Uu!==null&&Tm(Uu,e),Vu!==null&&Tm(Vu,e),By.forEach(t),Uy.forEach(t),n=0;n<vu.length;n++)r=vu[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<vu.length&&(n=vu[0],n.blockedOn===null);)bq(n),n.blockedOn===null&&vu.shift()}var up=jl.ReactCurrentBatchConfig,X2=!0;function She(e,t,n,r){var i=ht,o=up.transition;up.transition=null;try{ht=1,vF(e,t,n,r)}finally{ht=i,up.transition=o}}function khe(e,t,n,r){var i=ht,o=up.transition;up.transition=null;try{ht=4,vF(e,t,n,r)}finally{ht=i,up.transition=o}}function vF(e,t,n,r){if(X2){var i=eT(e,t,n,r);if(i===null)t$(e,t,r,K2,n),mN(e,r);else if(xhe(i,e,t,n,r))r.stopPropagation();else if(mN(e,r),t&4&&-1<bhe.indexOf(e)){for(;i!==null;){var o=Q1(i);if(o!==null&&gq(o),o=eT(e,t,n,r),o===null&&t$(e,t,r,K2,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else t$(e,t,r,null,n)}}var K2=null;function eT(e,t,n,r){if(K2=null,e=pF(r),e=kf(e),e!==null)if(t=Rd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=aq(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return K2=e,null}function xq(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(che()){case gF:return 1;case fq:return 4;case G2:case fhe:return 16;case dq:return 536870912;default:return 16}default:return 16}}var Tu=null,bF=null,qx=null;function wq(){if(qx)return qx;var e,t=bF,n=t.length,r,i="value"in Tu?Tu.value:Tu.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return qx=i.slice(e,1<r?1-r:void 0)}function Gx(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cb(){return!0}function vN(){return!1}function io(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Cb:vN,this.isPropagationStopped=vN,this}return Gt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cb)},persist:function(){},isPersistent:Cb}),t}var Hg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xF=io(Hg),K1=Gt({},Hg,{view:0,detail:0}),Che=io(K1),qE,GE,Mm,jk=Gt({},K1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wF,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mm&&(Mm&&e.type==="mousemove"?(qE=e.screenX-Mm.screenX,GE=e.screenY-Mm.screenY):GE=qE=0,Mm=e),qE)},movementY:function(e){return"movementY"in e?e.movementY:GE}}),bN=io(jk),_he=Gt({},jk,{dataTransfer:0}),Ehe=io(_he),$he=Gt({},K1,{relatedTarget:0}),YE=io($he),Ahe=Gt({},Hg,{animationName:0,elapsedTime:0,pseudoElement:0}),The=io(Ahe),Mhe=Gt({},Hg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fhe=io(Mhe),Phe=Gt({},Hg,{data:0}),xN=io(Phe),Rhe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dhe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ohe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nhe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ohe[e])?!!t[e]:!1}function wF(){return Nhe}var Ihe=Gt({},K1,{key:function(e){if(e.key){var t=Rhe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gx(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Dhe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wF,charCode:function(e){return e.type==="keypress"?Gx(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gx(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lhe=io(Ihe),zhe=Gt({},jk,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wN=io(zhe),jhe=Gt({},K1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wF}),Bhe=io(jhe),Uhe=Gt({},Hg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vhe=io(Uhe),Whe=Gt({},jk,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hhe=io(Whe),qhe=[9,13,27,32],SF=$l&&"CompositionEvent"in window,J0=null;$l&&"documentMode"in document&&(J0=document.documentMode);var Ghe=$l&&"TextEvent"in window&&!J0,Sq=$l&&(!SF||J0&&8<J0&&11>=J0),SN=" ",kN=!1;function kq(e,t){switch(e){case"keyup":return qhe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cq(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ph=!1;function Yhe(e,t){switch(e){case"compositionend":return Cq(t);case"keypress":return t.which!==32?null:(kN=!0,SN);case"textInput":return e=t.data,e===SN&&kN?null:e;default:return null}}function Xhe(e,t){if(Ph)return e==="compositionend"||!SF&&kq(e,t)?(e=wq(),qx=bF=Tu=null,Ph=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sq&&t.locale!=="ko"?null:t.data;default:return null}}var Khe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Khe[e.type]:t==="textarea"}function _q(e,t,n,r){nq(r),t=Q2(t,"onChange"),0<t.length&&(n=new xF("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ey=null,Wy=null;function Qhe(e){Nq(e,0)}function Bk(e){var t=Oh(e);if(XH(t))return e}function Zhe(e,t){if(e==="change")return t}var Eq=!1;if($l){var XE;if($l){var KE="oninput"in document;if(!KE){var _N=document.createElement("div");_N.setAttribute("oninput","return;"),KE=typeof _N.oninput=="function"}XE=KE}else XE=!1;Eq=XE&&(!document.documentMode||9<document.documentMode)}function EN(){ey&&(ey.detachEvent("onpropertychange",$q),Wy=ey=null)}function $q(e){if(e.propertyName==="value"&&Bk(Wy)){var t=[];_q(t,Wy,e,pF(e)),sq(Qhe,t)}}function Jhe(e,t,n){e==="focusin"?(EN(),ey=t,Wy=n,ey.attachEvent("onpropertychange",$q)):e==="focusout"&&EN()}function epe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bk(Wy)}function tpe(e,t){if(e==="click")return Bk(t)}function npe(e,t){if(e==="input"||e==="change")return Bk(t)}function rpe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xs=typeof Object.is=="function"?Object.is:rpe;function Hy(e,t){if(xs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!N5.call(t,i)||!xs(e[i],t[i]))return!1}return!0}function $N(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function AN(e,t){var n=$N(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$N(n)}}function Aq(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Aq(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tq(){for(var e=window,t=W2();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=W2(e.document)}return t}function kF(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ipe(e){var t=Tq(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Aq(n.ownerDocument.documentElement,n)){if(r!==null&&kF(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=AN(n,o);var s=AN(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ope=$l&&"documentMode"in document&&11>=document.documentMode,Rh=null,tT=null,ty=null,nT=!1;function TN(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nT||Rh==null||Rh!==W2(r)||(r=Rh,"selectionStart"in r&&kF(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ty&&Hy(ty,r)||(ty=r,r=Q2(tT,"onSelect"),0<r.length&&(t=new xF("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Rh)))}function _b(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Dh={animationend:_b("Animation","AnimationEnd"),animationiteration:_b("Animation","AnimationIteration"),animationstart:_b("Animation","AnimationStart"),transitionend:_b("Transition","TransitionEnd")},QE={},Mq={};$l&&(Mq=document.createElement("div").style,"AnimationEvent"in window||(delete Dh.animationend.animation,delete Dh.animationiteration.animation,delete Dh.animationstart.animation),"TransitionEvent"in window||delete Dh.transitionend.transition);function Uk(e){if(QE[e])return QE[e];if(!Dh[e])return e;var t=Dh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Mq)return QE[e]=t[n];return e}var Fq=Uk("animationend"),Pq=Uk("animationiteration"),Rq=Uk("animationstart"),Dq=Uk("transitionend"),Oq=new Map,MN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kc(e,t){Oq.set(e,t),Pd(t,[e])}for(var ZE=0;ZE<MN.length;ZE++){var JE=MN[ZE],spe=JE.toLowerCase(),ape=JE[0].toUpperCase()+JE.slice(1);kc(spe,"on"+ape)}kc(Fq,"onAnimationEnd");kc(Pq,"onAnimationIteration");kc(Rq,"onAnimationStart");kc("dblclick","onDoubleClick");kc("focusin","onFocus");kc("focusout","onBlur");kc(Dq,"onTransitionEnd");Up("onMouseEnter",["mouseout","mouseover"]);Up("onMouseLeave",["mouseout","mouseover"]);Up("onPointerEnter",["pointerout","pointerover"]);Up("onPointerLeave",["pointerout","pointerover"]);Pd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var y0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lpe=new Set("cancel close invalid load scroll toggle".split(" ").concat(y0));function FN(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,she(r,t,void 0,e),e.currentTarget=null}function Nq(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;FN(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;FN(i,a,u),o=l}}}if(q2)throw e=Q5,q2=!1,Q5=null,e}function At(e,t){var n=t[aT];n===void 0&&(n=t[aT]=new Set);var r=e+"__bubble";n.has(r)||(Iq(t,e,2,!1),n.add(r))}function e$(e,t,n){var r=0;t&&(r|=4),Iq(n,e,r,t)}var Eb="_reactListening"+Math.random().toString(36).slice(2);function qy(e){if(!e[Eb]){e[Eb]=!0,WH.forEach(function(n){n!=="selectionchange"&&(lpe.has(n)||e$(n,!1,e),e$(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Eb]||(t[Eb]=!0,e$("selectionchange",!1,t))}}function Iq(e,t,n,r){switch(xq(t)){case 1:var i=She;break;case 4:i=khe;break;default:i=vF}n=i.bind(null,t,n,e),i=void 0,!K5||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function t$(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=kf(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}sq(function(){var u=o,c=pF(n),f=[];e:{var d=Oq.get(e);if(d!==void 0){var h=xF,p=e;switch(e){case"keypress":if(Gx(n)===0)break e;case"keydown":case"keyup":h=Lhe;break;case"focusin":p="focus",h=YE;break;case"focusout":p="blur",h=YE;break;case"beforeblur":case"afterblur":h=YE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=bN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Ehe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Bhe;break;case Fq:case Pq:case Rq:h=The;break;case Dq:h=Vhe;break;case"scroll":h=Che;break;case"wheel":h=Hhe;break;case"copy":case"cut":case"paste":h=Fhe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=wN}var g=(t&4)!==0,y=!g&&e==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,m!==null&&(x=jy(v,m),x!=null&&g.push(Gy(v,x,b)))),y)break;v=v.return}0<g.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Y5&&(p=n.relatedTarget||n.fromElement)&&(kf(p)||p[Al]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?kf(p):null,p!==null&&(y=Rd(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(g=bN,x="onMouseLeave",m="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=wN,x="onPointerLeave",m="onPointerEnter",v="pointer"),y=h==null?d:Oh(h),b=p==null?d:Oh(p),d=new g(x,v+"leave",h,n,c),d.target=y,d.relatedTarget=b,x=null,kf(c)===u&&(g=new g(m,v+"enter",p,n,c),g.target=b,g.relatedTarget=y,x=g),y=x,h&&p)t:{for(g=h,m=p,v=0,b=g;b;b=ah(b))v++;for(b=0,x=m;x;x=ah(x))b++;for(;0<v-b;)g=ah(g),v--;for(;0<b-v;)m=ah(m),b--;for(;v--;){if(g===m||m!==null&&g===m.alternate)break t;g=ah(g),m=ah(m)}g=null}else g=null;h!==null&&PN(f,d,h,g,!1),p!==null&&y!==null&&PN(f,y,p,g,!0)}}e:{if(d=u?Oh(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=Zhe;else if(CN(d))if(Eq)w=npe;else{w=epe;var k=Jhe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=tpe);if(w&&(w=w(e,u))){_q(f,w,n,c);break e}k&&k(e,d,u),e==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&V5(d,"number",d.value)}switch(k=u?Oh(u):window,e){case"focusin":(CN(k)||k.contentEditable==="true")&&(Rh=k,tT=u,ty=null);break;case"focusout":ty=tT=Rh=null;break;case"mousedown":nT=!0;break;case"contextmenu":case"mouseup":case"dragend":nT=!1,TN(f,n,c);break;case"selectionchange":if(ope)break;case"keydown":case"keyup":TN(f,n,c)}var S;if(SF)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ph?kq(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Sq&&n.locale!=="ko"&&(Ph||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ph&&(S=wq()):(Tu=c,bF="value"in Tu?Tu.value:Tu.textContent,Ph=!0)),k=Q2(u,C),0<k.length&&(C=new xN(C,e,null,n,c),f.push({event:C,listeners:k}),S?C.data=S:(S=Cq(n),S!==null&&(C.data=S)))),(S=Ghe?Yhe(e,n):Xhe(e,n))&&(u=Q2(u,"onBeforeInput"),0<u.length&&(c=new xN("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=S))}Nq(f,t)})}function Gy(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Q2(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=jy(e,n),o!=null&&r.unshift(Gy(e,o,i)),o=jy(e,t),o!=null&&r.push(Gy(e,o,i))),e=e.return}return r}function ah(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function PN(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=jy(n,o),l!=null&&s.unshift(Gy(n,l,a))):i||(l=jy(n,o),l!=null&&s.push(Gy(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var upe=/\r\n?/g,cpe=/\u0000|\uFFFD/g;function RN(e){return(typeof e=="string"?e:""+e).replace(upe,`
`).replace(cpe,"")}function $b(e,t,n){if(t=RN(t),RN(e)!==t&&n)throw Error(ee(425))}function Z2(){}var rT=null,iT=null;function oT(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sT=typeof setTimeout=="function"?setTimeout:void 0,fpe=typeof clearTimeout=="function"?clearTimeout:void 0,DN=typeof Promise=="function"?Promise:void 0,dpe=typeof queueMicrotask=="function"?queueMicrotask:typeof DN<"u"?function(e){return DN.resolve(null).then(e).catch(hpe)}:sT;function hpe(e){setTimeout(function(){throw e})}function n$(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Vy(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Vy(t)}function Wu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ON(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var qg=Math.random().toString(36).slice(2),na="__reactFiber$"+qg,Yy="__reactProps$"+qg,Al="__reactContainer$"+qg,aT="__reactEvents$"+qg,ppe="__reactListeners$"+qg,gpe="__reactHandles$"+qg;function kf(e){var t=e[na];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Al]||n[na]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ON(e);e!==null;){if(n=e[na])return n;e=ON(e)}return t}e=n,n=e.parentNode}return null}function Q1(e){return e=e[na]||e[Al],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function Vk(e){return e[Yy]||null}var lT=[],Nh=-1;function Cc(e){return{current:e}}function Rt(e){0>Nh||(e.current=lT[Nh],lT[Nh]=null,Nh--)}function Ct(e,t){Nh++,lT[Nh]=e.current,e.current=t}var rc={},$r=Cc(rc),di=Cc(!1),nd=rc;function Vp(e,t){var n=e.type.contextTypes;if(!n)return rc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function hi(e){return e=e.childContextTypes,e!=null}function J2(){Rt(di),Rt($r)}function NN(e,t,n){if($r.current!==rc)throw Error(ee(168));Ct($r,t),Ct(di,n)}function Lq(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ee(108,Jde(e)||"Unknown",i));return Gt({},n,r)}function ew(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rc,nd=$r.current,Ct($r,e),Ct(di,di.current),!0}function IN(e,t,n){var r=e.stateNode;if(!r)throw Error(ee(169));n?(e=Lq(e,t,nd),r.__reactInternalMemoizedMergedChildContext=e,Rt(di),Rt($r),Ct($r,e)):Rt(di),Ct(di,n)}var Za=null,Wk=!1,r$=!1;function zq(e){Za===null?Za=[e]:Za.push(e)}function mpe(e){Wk=!0,zq(e)}function _c(){if(!r$&&Za!==null){r$=!0;var e=0,t=ht;try{var n=Za;for(ht=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Za=null,Wk=!1}catch(i){throw Za!==null&&(Za=Za.slice(e+1)),cq(gF,_c),i}finally{ht=t,r$=!1}}return null}var Ih=[],Lh=0,tw=null,nw=0,yo=[],vo=0,rd=null,ol=1,sl="";function of(e,t){Ih[Lh++]=nw,Ih[Lh++]=tw,tw=e,nw=t}function jq(e,t,n){yo[vo++]=ol,yo[vo++]=sl,yo[vo++]=rd,rd=e;var r=ol;e=sl;var i=32-ms(r)-1;r&=~(1<<i),n+=1;var o=32-ms(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,ol=1<<32-ms(t)+i|n<<i|r,sl=o+e}else ol=1<<o|n<<i|r,sl=e}function CF(e){e.return!==null&&(of(e,1),jq(e,1,0))}function _F(e){for(;e===tw;)tw=Ih[--Lh],Ih[Lh]=null,nw=Ih[--Lh],Ih[Lh]=null;for(;e===rd;)rd=yo[--vo],yo[vo]=null,sl=yo[--vo],yo[vo]=null,ol=yo[--vo],yo[vo]=null}var Vi=null,Ni=null,It=!1,ns=null;function Bq(e,t){var n=wo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function LN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vi=e,Ni=Wu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vi=e,Ni=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=rd!==null?{id:ol,overflow:sl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=wo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Vi=e,Ni=null,!0):!1;default:return!1}}function uT(e){return(e.mode&1)!==0&&(e.flags&128)===0}function cT(e){if(It){var t=Ni;if(t){var n=t;if(!LN(e,t)){if(uT(e))throw Error(ee(418));t=Wu(n.nextSibling);var r=Vi;t&&LN(e,t)?Bq(r,n):(e.flags=e.flags&-4097|2,It=!1,Vi=e)}}else{if(uT(e))throw Error(ee(418));e.flags=e.flags&-4097|2,It=!1,Vi=e}}}function zN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vi=e}function Ab(e){if(e!==Vi)return!1;if(!It)return zN(e),It=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!oT(e.type,e.memoizedProps)),t&&(t=Ni)){if(uT(e))throw Uq(),Error(ee(418));for(;t;)Bq(e,t),t=Wu(t.nextSibling)}if(zN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ni=Wu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ni=null}}else Ni=Vi?Wu(e.stateNode.nextSibling):null;return!0}function Uq(){for(var e=Ni;e;)e=Wu(e.nextSibling)}function Wp(){Ni=Vi=null,It=!1}function EF(e){ns===null?ns=[e]:ns.push(e)}var ype=jl.ReactCurrentBatchConfig;function Fm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,e))}return e}function Tb(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jN(e){var t=e._init;return t(e._payload)}function Vq(e){function t(m,v){if(e){var b=m.deletions;b===null?(m.deletions=[v],m.flags|=16):b.push(v)}}function n(m,v){if(!e)return null;for(;v!==null;)t(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=Yu(m,v),m.index=0,m.sibling=null,m}function o(m,v,b){return m.index=b,e?(b=m.alternate,b!==null?(b=b.index,b<v?(m.flags|=2,v):b):(m.flags|=2,v)):(m.flags|=1048576,v)}function s(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,v,b,x){return v===null||v.tag!==6?(v=c$(b,m.mode,x),v.return=m,v):(v=i(v,b),v.return=m,v)}function l(m,v,b,x){var w=b.type;return w===Fh?c(m,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===uu&&jN(w)===v.type)?(x=i(v,b.props),x.ref=Fm(m,v,b),x.return=m,x):(x=e2(b.type,b.key,b.props,null,m.mode,x),x.ref=Fm(m,v,b),x.return=m,x)}function u(m,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=f$(b,m.mode,x),v.return=m,v):(v=i(v,b.children||[]),v.return=m,v)}function c(m,v,b,x,w){return v===null||v.tag!==7?(v=jf(b,m.mode,x,w),v.return=m,v):(v=i(v,b),v.return=m,v)}function f(m,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=c$(""+v,m.mode,b),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case vb:return b=e2(v.type,v.key,v.props,null,m.mode,b),b.ref=Fm(m,null,v),b.return=m,b;case Mh:return v=f$(v,m.mode,b),v.return=m,v;case uu:var x=v._init;return f(m,x(v._payload),b)}if(g0(v)||Em(v))return v=jf(v,m.mode,b,null),v.return=m,v;Tb(m,v)}return null}function d(m,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(m,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case vb:return b.key===w?l(m,v,b,x):null;case Mh:return b.key===w?u(m,v,b,x):null;case uu:return w=b._init,d(m,v,w(b._payload),x)}if(g0(b)||Em(b))return w!==null?null:c(m,v,b,x,null);Tb(m,b)}return null}function h(m,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(b)||null,a(v,m,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case vb:return m=m.get(x.key===null?b:x.key)||null,l(v,m,x,w);case Mh:return m=m.get(x.key===null?b:x.key)||null,u(v,m,x,w);case uu:var k=x._init;return h(m,v,b,k(x._payload),w)}if(g0(x)||Em(x))return m=m.get(b)||null,c(v,m,x,w,null);Tb(v,x)}return null}function p(m,v,b,x){for(var w=null,k=null,S=v,C=v=0,_=null;S!==null&&C<b.length;C++){S.index>C?(_=S,S=null):_=S.sibling;var $=d(m,S,b[C],x);if($===null){S===null&&(S=_);break}e&&S&&$.alternate===null&&t(m,S),v=o($,v,C),k===null?w=$:k.sibling=$,k=$,S=_}if(C===b.length)return n(m,S),It&&of(m,C),w;if(S===null){for(;C<b.length;C++)S=f(m,b[C],x),S!==null&&(v=o(S,v,C),k===null?w=S:k.sibling=S,k=S);return It&&of(m,C),w}for(S=r(m,S);C<b.length;C++)_=h(S,m,C,b[C],x),_!==null&&(e&&_.alternate!==null&&S.delete(_.key===null?C:_.key),v=o(_,v,C),k===null?w=_:k.sibling=_,k=_);return e&&S.forEach(function(A){return t(m,A)}),It&&of(m,C),w}function g(m,v,b,x){var w=Em(b);if(typeof w!="function")throw Error(ee(150));if(b=w.call(b),b==null)throw Error(ee(151));for(var k=w=null,S=v,C=v=0,_=null,$=b.next();S!==null&&!$.done;C++,$=b.next()){S.index>C?(_=S,S=null):_=S.sibling;var A=d(m,S,$.value,x);if(A===null){S===null&&(S=_);break}e&&S&&A.alternate===null&&t(m,S),v=o(A,v,C),k===null?w=A:k.sibling=A,k=A,S=_}if($.done)return n(m,S),It&&of(m,C),w;if(S===null){for(;!$.done;C++,$=b.next())$=f(m,$.value,x),$!==null&&(v=o($,v,C),k===null?w=$:k.sibling=$,k=$);return It&&of(m,C),w}for(S=r(m,S);!$.done;C++,$=b.next())$=h(S,m,C,$.value,x),$!==null&&(e&&$.alternate!==null&&S.delete($.key===null?C:$.key),v=o($,v,C),k===null?w=$:k.sibling=$,k=$);return e&&S.forEach(function(O){return t(m,O)}),It&&of(m,C),w}function y(m,v,b,x){if(typeof b=="object"&&b!==null&&b.type===Fh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case vb:e:{for(var w=b.key,k=v;k!==null;){if(k.key===w){if(w=b.type,w===Fh){if(k.tag===7){n(m,k.sibling),v=i(k,b.props.children),v.return=m,m=v;break e}}else if(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===uu&&jN(w)===k.type){n(m,k.sibling),v=i(k,b.props),v.ref=Fm(m,k,b),v.return=m,m=v;break e}n(m,k);break}else t(m,k);k=k.sibling}b.type===Fh?(v=jf(b.props.children,m.mode,x,b.key),v.return=m,m=v):(x=e2(b.type,b.key,b.props,null,m.mode,x),x.ref=Fm(m,v,b),x.return=m,m=x)}return s(m);case Mh:e:{for(k=b.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(m,v.sibling),v=i(v,b.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else t(m,v);v=v.sibling}v=f$(b,m.mode,x),v.return=m,m=v}return s(m);case uu:return k=b._init,y(m,v,k(b._payload),x)}if(g0(b))return p(m,v,b,x);if(Em(b))return g(m,v,b,x);Tb(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(m,v.sibling),v=i(v,b),v.return=m,m=v):(n(m,v),v=c$(b,m.mode,x),v.return=m,m=v),s(m)):n(m,v)}return y}var Hp=Vq(!0),Wq=Vq(!1),rw=Cc(null),iw=null,zh=null,$F=null;function AF(){$F=zh=iw=null}function TF(e){var t=rw.current;Rt(rw),e._currentValue=t}function fT(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cp(e,t){iw=e,$F=zh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ci=!0),e.firstContext=null)}function Fo(e){var t=e._currentValue;if($F!==e)if(e={context:e,memoizedValue:t,next:null},zh===null){if(iw===null)throw Error(ee(308));zh=e,iw.dependencies={lanes:0,firstContext:e}}else zh=zh.next=e;return t}var Cf=null;function MF(e){Cf===null?Cf=[e]:Cf.push(e)}function Hq(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,MF(t)):(n.next=i.next,i.next=n),t.interleaved=n,Tl(e,r)}function Tl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var cu=!1;function FF(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qq(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hu(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Tl(e,n)}return i=r.interleaved,i===null?(t.next=t,MF(r)):(t.next=i.next,i.next=t),r.interleaved=t,Tl(e,n)}function Yx(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mF(e,n)}}function BN(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ow(e,t,n,r){var i=e.updateQueue;cu=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Gt({},f,d);break e;case 2:cu=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);od|=s,e.lanes=s,e.memoizedState=f}}function UN(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var Z1={},ha=Cc(Z1),Xy=Cc(Z1),Ky=Cc(Z1);function _f(e){if(e===Z1)throw Error(ee(174));return e}function PF(e,t){switch(Ct(Ky,t),Ct(Xy,e),Ct(ha,Z1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:H5(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=H5(t,e)}Rt(ha),Ct(ha,t)}function qp(){Rt(ha),Rt(Xy),Rt(Ky)}function Gq(e){_f(Ky.current);var t=_f(ha.current),n=H5(t,e.type);t!==n&&(Ct(Xy,e),Ct(ha,n))}function RF(e){Xy.current===e&&(Rt(ha),Rt(Xy))}var Bt=Cc(0);function sw(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var i$=[];function DF(){for(var e=0;e<i$.length;e++)i$[e]._workInProgressVersionPrimary=null;i$.length=0}var Xx=jl.ReactCurrentDispatcher,o$=jl.ReactCurrentBatchConfig,id=0,qt=null,yn=null,Tn=null,aw=!1,ny=!1,Qy=0,vpe=0;function ar(){throw Error(ee(321))}function OF(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xs(e[n],t[n]))return!1;return!0}function NF(e,t,n,r,i,o){if(id=o,qt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xx.current=e===null||e.memoizedState===null?Spe:kpe,e=n(r,i),ny){o=0;do{if(ny=!1,Qy=0,25<=o)throw Error(ee(301));o+=1,Tn=yn=null,t.updateQueue=null,Xx.current=Cpe,e=n(r,i)}while(ny)}if(Xx.current=lw,t=yn!==null&&yn.next!==null,id=0,Tn=yn=qt=null,aw=!1,t)throw Error(ee(300));return e}function IF(){var e=Qy!==0;return Qy=0,e}function Hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?qt.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function Po(){if(yn===null){var e=qt.alternate;e=e!==null?e.memoizedState:null}else e=yn.next;var t=Tn===null?qt.memoizedState:Tn.next;if(t!==null)Tn=t,yn=e;else{if(e===null)throw Error(ee(310));yn=e,e={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Tn===null?qt.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function Zy(e,t){return typeof t=="function"?t(e):t}function s$(e){var t=Po(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=yn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((id&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,qt.lanes|=c,od|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,xs(r,t.memoizedState)||(ci=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,qt.lanes|=o,od|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function a$(e){var t=Po(),n=t.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);xs(o,t.memoizedState)||(ci=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Yq(){}function Xq(e,t){var n=qt,r=Po(),i=t(),o=!xs(r.memoizedState,i);if(o&&(r.memoizedState=i,ci=!0),r=r.queue,LF(Zq.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,Jy(9,Qq.bind(null,n,r,i,t),void 0,null),Nn===null)throw Error(ee(349));id&30||Kq(n,t,i)}return i}function Kq(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qt.updateQueue,t===null?(t={lastEffect:null,stores:null},qt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qq(e,t,n,r){t.value=n,t.getSnapshot=r,Jq(t)&&eG(e)}function Zq(e,t,n){return n(function(){Jq(t)&&eG(e)})}function Jq(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xs(e,n)}catch{return!0}}function eG(e){var t=Tl(e,1);t!==null&&ys(t,e,1,-1)}function VN(e){var t=Hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zy,lastRenderedState:e},t.queue=e,e=e.dispatch=wpe.bind(null,qt,e),[t.memoizedState,e]}function Jy(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=qt.updateQueue,t===null?(t={lastEffect:null,stores:null},qt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function tG(){return Po().memoizedState}function Kx(e,t,n,r){var i=Hs();qt.flags|=e,i.memoizedState=Jy(1|t,n,void 0,r===void 0?null:r)}function Hk(e,t,n,r){var i=Po();r=r===void 0?null:r;var o=void 0;if(yn!==null){var s=yn.memoizedState;if(o=s.destroy,r!==null&&OF(r,s.deps)){i.memoizedState=Jy(t,n,o,r);return}}qt.flags|=e,i.memoizedState=Jy(1|t,n,o,r)}function WN(e,t){return Kx(8390656,8,e,t)}function LF(e,t){return Hk(2048,8,e,t)}function nG(e,t){return Hk(4,2,e,t)}function rG(e,t){return Hk(4,4,e,t)}function iG(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oG(e,t,n){return n=n!=null?n.concat([e]):null,Hk(4,4,iG.bind(null,t,e),n)}function zF(){}function sG(e,t){var n=Po();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&OF(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function aG(e,t){var n=Po();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&OF(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function lG(e,t,n){return id&21?(xs(n,t)||(n=hq(),qt.lanes|=n,od|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ci=!0),e.memoizedState=n)}function bpe(e,t){var n=ht;ht=n!==0&&4>n?n:4,e(!0);var r=o$.transition;o$.transition={};try{e(!1),t()}finally{ht=n,o$.transition=r}}function uG(){return Po().memoizedState}function xpe(e,t,n){var r=Gu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cG(e))fG(t,n);else if(n=Hq(e,t,n,r),n!==null){var i=qr();ys(n,e,r,i),dG(n,t,r)}}function wpe(e,t,n){var r=Gu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cG(e))fG(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,xs(a,s)){var l=t.interleaved;l===null?(i.next=i,MF(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Hq(e,t,i,r),n!==null&&(i=qr(),ys(n,e,r,i),dG(n,t,r))}}function cG(e){var t=e.alternate;return e===qt||t!==null&&t===qt}function fG(e,t){ny=aw=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function dG(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mF(e,n)}}var lw={readContext:Fo,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},Spe={readContext:Fo,useCallback:function(e,t){return Hs().memoizedState=[e,t===void 0?null:t],e},useContext:Fo,useEffect:WN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Kx(4194308,4,iG.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Kx(4194308,4,e,t)},useInsertionEffect:function(e,t){return Kx(4,2,e,t)},useMemo:function(e,t){var n=Hs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Hs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xpe.bind(null,qt,e),[r.memoizedState,e]},useRef:function(e){var t=Hs();return e={current:e},t.memoizedState=e},useState:VN,useDebugValue:zF,useDeferredValue:function(e){return Hs().memoizedState=e},useTransition:function(){var e=VN(!1),t=e[0];return e=bpe.bind(null,e[1]),Hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=qt,i=Hs();if(It){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=t(),Nn===null)throw Error(ee(349));id&30||Kq(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,WN(Zq.bind(null,r,o,e),[e]),r.flags|=2048,Jy(9,Qq.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Hs(),t=Nn.identifierPrefix;if(It){var n=sl,r=ol;n=(r&~(1<<32-ms(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Qy++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=vpe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kpe={readContext:Fo,useCallback:sG,useContext:Fo,useEffect:LF,useImperativeHandle:oG,useInsertionEffect:nG,useLayoutEffect:rG,useMemo:aG,useReducer:s$,useRef:tG,useState:function(){return s$(Zy)},useDebugValue:zF,useDeferredValue:function(e){var t=Po();return lG(t,yn.memoizedState,e)},useTransition:function(){var e=s$(Zy)[0],t=Po().memoizedState;return[e,t]},useMutableSource:Yq,useSyncExternalStore:Xq,useId:uG,unstable_isNewReconciler:!1},Cpe={readContext:Fo,useCallback:sG,useContext:Fo,useEffect:LF,useImperativeHandle:oG,useInsertionEffect:nG,useLayoutEffect:rG,useMemo:aG,useReducer:a$,useRef:tG,useState:function(){return a$(Zy)},useDebugValue:zF,useDeferredValue:function(e){var t=Po();return yn===null?t.memoizedState=e:lG(t,yn.memoizedState,e)},useTransition:function(){var e=a$(Zy)[0],t=Po().memoizedState;return[e,t]},useMutableSource:Yq,useSyncExternalStore:Xq,useId:uG,unstable_isNewReconciler:!1};function Ko(e,t){if(e&&e.defaultProps){t=Gt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function dT(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Gt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qk={isMounted:function(e){return(e=e._reactInternals)?Rd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qr(),i=Gu(e),o=pl(r,i);o.payload=t,n!=null&&(o.callback=n),t=Hu(e,o,i),t!==null&&(ys(t,e,i,r),Yx(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qr(),i=Gu(e),o=pl(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Hu(e,o,i),t!==null&&(ys(t,e,i,r),Yx(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qr(),r=Gu(e),i=pl(n,r);i.tag=2,t!=null&&(i.callback=t),t=Hu(e,i,r),t!==null&&(ys(t,e,r,n),Yx(t,e,r))}};function HN(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Hy(n,r)||!Hy(i,o):!0}function hG(e,t,n){var r=!1,i=rc,o=t.contextType;return typeof o=="object"&&o!==null?o=Fo(o):(i=hi(t)?nd:$r.current,r=t.contextTypes,o=(r=r!=null)?Vp(e,i):rc),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qk,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function qN(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qk.enqueueReplaceState(t,t.state,null)}function hT(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},FF(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Fo(o):(o=hi(t)?nd:$r.current,i.context=Vp(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(dT(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&qk.enqueueReplaceState(i,i.state,null),ow(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Gp(e,t){try{var n="",r=t;do n+=Zde(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function l$(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function pT(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var _pe=typeof WeakMap=="function"?WeakMap:Map;function pG(e,t,n){n=pl(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){cw||(cw=!0,CT=r),pT(e,t)},n}function gG(e,t,n){n=pl(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){pT(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){pT(e,t),typeof r!="function"&&(qu===null?qu=new Set([this]):qu.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function GN(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new _pe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=zpe.bind(null,e,t,n),t.then(e,e))}function YN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function XN(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=pl(-1,1),t.tag=2,Hu(n,t,1))),n.lanes|=1),e)}var Epe=jl.ReactCurrentOwner,ci=!1;function Nr(e,t,n,r){t.child=e===null?Wq(t,null,n,r):Hp(t,e.child,n,r)}function KN(e,t,n,r,i){n=n.render;var o=t.ref;return cp(t,i),r=NF(e,t,n,r,o,i),n=IF(),e!==null&&!ci?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ml(e,t,i)):(It&&n&&CF(t),t.flags|=1,Nr(e,t,r,i),t.child)}function QN(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!GF(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,mG(e,t,o,r,i)):(e=e2(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Hy,n(s,r)&&e.ref===t.ref)return Ml(e,t,i)}return t.flags|=1,e=Yu(o,r),e.ref=t.ref,e.return=t,t.child=e}function mG(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Hy(o,r)&&e.ref===t.ref)if(ci=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(ci=!0);else return t.lanes=e.lanes,Ml(e,t,i)}return gT(e,t,n,r,i)}function yG(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(Bh,Fi),Fi|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ct(Bh,Fi),Fi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ct(Bh,Fi),Fi|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ct(Bh,Fi),Fi|=r;return Nr(e,t,i,n),t.child}function vG(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function gT(e,t,n,r,i){var o=hi(n)?nd:$r.current;return o=Vp(t,o),cp(t,i),n=NF(e,t,n,r,o,i),r=IF(),e!==null&&!ci?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ml(e,t,i)):(It&&r&&CF(t),t.flags|=1,Nr(e,t,n,i),t.child)}function ZN(e,t,n,r,i){if(hi(n)){var o=!0;ew(t)}else o=!1;if(cp(t,i),t.stateNode===null)Qx(e,t),hG(t,n,r),hT(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Fo(u):(u=hi(n)?nd:$r.current,u=Vp(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&qN(t,s,r,u),cu=!1;var d=t.memoizedState;s.state=d,ow(t,r,s,i),l=t.memoizedState,a!==r||d!==l||di.current||cu?(typeof c=="function"&&(dT(t,n,c,r),l=t.memoizedState),(a=cu||HN(t,n,a,r,d,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,qq(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ko(t.type,a),s.props=u,f=t.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fo(l):(l=hi(n)?nd:$r.current,l=Vp(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==l)&&qN(t,s,r,l),cu=!1,d=t.memoizedState,s.state=d,ow(t,r,s,i);var p=t.memoizedState;a!==f||d!==p||di.current||cu?(typeof h=="function"&&(dT(t,n,h,r),p=t.memoizedState),(u=cu||HN(t,n,u,r,d,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return mT(e,t,n,r,o,i)}function mT(e,t,n,r,i,o){vG(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&IN(t,n,!1),Ml(e,t,o);r=t.stateNode,Epe.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Hp(t,e.child,null,o),t.child=Hp(t,null,a,o)):Nr(e,t,a,o),t.memoizedState=r.state,i&&IN(t,n,!0),t.child}function bG(e){var t=e.stateNode;t.pendingContext?NN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&NN(e,t.context,!1),PF(e,t.containerInfo)}function JN(e,t,n,r,i){return Wp(),EF(i),t.flags|=256,Nr(e,t,n,r),t.child}var yT={dehydrated:null,treeContext:null,retryLane:0};function vT(e){return{baseLanes:e,cachePool:null,transitions:null}}function xG(e,t,n){var r=t.pendingProps,i=Bt.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ct(Bt,i&1),e===null)return cT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Xk(s,r,0,null),e=jf(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=vT(n),t.memoizedState=yT,e):jF(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $pe(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Yu(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Yu(a,o):(o=jf(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?vT(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=yT,r}return o=e.child,e=o.sibling,r=Yu(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function jF(e,t){return t=Xk({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mb(e,t,n,r){return r!==null&&EF(r),Hp(t,e.child,null,n),e=jF(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $pe(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=l$(Error(ee(422))),Mb(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Xk({mode:"visible",children:r.children},i,0,null),o=jf(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Hp(t,e.child,null,s),t.child.memoizedState=vT(s),t.memoizedState=yT,o);if(!(t.mode&1))return Mb(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ee(419)),r=l$(o,r,void 0),Mb(e,t,s,r)}if(a=(s&e.childLanes)!==0,ci||a){if(r=Nn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Tl(e,i),ys(r,e,i,-1))}return qF(),r=l$(Error(ee(421))),Mb(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=jpe.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ni=Wu(i.nextSibling),Vi=t,It=!0,ns=null,e!==null&&(yo[vo++]=ol,yo[vo++]=sl,yo[vo++]=rd,ol=e.id,sl=e.overflow,rd=t),t=jF(t,r.children),t.flags|=4096,t)}function eI(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fT(e.return,t,n)}function u$(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function wG(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Nr(e,t,r.children,n),r=Bt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eI(e,n,t);else if(e.tag===19)eI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ct(Bt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&sw(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),u$(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&sw(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}u$(t,!0,n,null,o);break;case"together":u$(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qx(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ml(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),od|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,n=Yu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Yu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ape(e,t,n){switch(t.tag){case 3:bG(t),Wp();break;case 5:Gq(t);break;case 1:hi(t.type)&&ew(t);break;case 4:PF(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ct(rw,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ct(Bt,Bt.current&1),t.flags|=128,null):n&t.child.childLanes?xG(e,t,n):(Ct(Bt,Bt.current&1),e=Ml(e,t,n),e!==null?e.sibling:null);Ct(Bt,Bt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return wG(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ct(Bt,Bt.current),r)break;return null;case 22:case 23:return t.lanes=0,yG(e,t,n)}return Ml(e,t,n)}var SG,bT,kG,CG;SG=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bT=function(){};kG=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,_f(ha.current);var o=null;switch(n){case"input":i=B5(e,i),r=B5(e,r),o=[];break;case"select":i=Gt({},i,{value:void 0}),r=Gt({},r,{value:void 0}),o=[];break;case"textarea":i=W5(e,i),r=W5(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Z2)}q5(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ly.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ly.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&At("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};CG=function(e,t,n,r){n!==r&&(t.flags|=4)};function Pm(e,t){if(!It)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Tpe(e,t,n){var r=t.pendingProps;switch(_F(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(t),null;case 1:return hi(t.type)&&J2(),lr(t),null;case 3:return r=t.stateNode,qp(),Rt(di),Rt($r),DF(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ab(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ns!==null&&($T(ns),ns=null))),bT(e,t),lr(t),null;case 5:RF(t);var i=_f(Ky.current);if(n=t.type,e!==null&&t.stateNode!=null)kG(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ee(166));return lr(t),null}if(e=_f(ha.current),Ab(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[na]=t,r[Yy]=o,e=(t.mode&1)!==0,n){case"dialog":At("cancel",r),At("close",r);break;case"iframe":case"object":case"embed":At("load",r);break;case"video":case"audio":for(i=0;i<y0.length;i++)At(y0[i],r);break;case"source":At("error",r);break;case"img":case"image":case"link":At("error",r),At("load",r);break;case"details":At("toggle",r);break;case"input":uN(r,o),At("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},At("invalid",r);break;case"textarea":fN(r,o),At("invalid",r)}q5(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&$b(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&$b(r.textContent,a,e),i=["children",""+a]):Ly.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&At("scroll",r)}switch(n){case"input":bb(r),cN(r,o,!0);break;case"textarea":bb(r),dN(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Z2)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ZH(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[na]=t,e[Yy]=r,SG(e,t,!1,!1),t.stateNode=e;e:{switch(s=G5(n,r),n){case"dialog":At("cancel",e),At("close",e),i=r;break;case"iframe":case"object":case"embed":At("load",e),i=r;break;case"video":case"audio":for(i=0;i<y0.length;i++)At(y0[i],e);i=r;break;case"source":At("error",e),i=r;break;case"img":case"image":case"link":At("error",e),At("load",e),i=r;break;case"details":At("toggle",e),i=r;break;case"input":uN(e,r),i=B5(e,r),At("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Gt({},r,{value:void 0}),At("invalid",e);break;case"textarea":fN(e,r),i=W5(e,r),At("invalid",e);break;default:i=r}q5(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?tq(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&JH(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&zy(e,l):typeof l=="number"&&zy(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ly.hasOwnProperty(o)?l!=null&&o==="onScroll"&&At("scroll",e):l!=null&&cF(e,o,l,s))}switch(n){case"input":bb(e),cN(e,r,!1);break;case"textarea":bb(e),dN(e);break;case"option":r.value!=null&&e.setAttribute("value",""+nc(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?sp(e,!!r.multiple,o,!1):r.defaultValue!=null&&sp(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Z2)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lr(t),null;case 6:if(e&&t.stateNode!=null)CG(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ee(166));if(n=_f(Ky.current),_f(ha.current),Ab(t)){if(r=t.stateNode,n=t.memoizedProps,r[na]=t,(o=r.nodeValue!==n)&&(e=Vi,e!==null))switch(e.tag){case 3:$b(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$b(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[na]=t,t.stateNode=r}return lr(t),null;case 13:if(Rt(Bt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(It&&Ni!==null&&t.mode&1&&!(t.flags&128))Uq(),Wp(),t.flags|=98560,o=!1;else if(o=Ab(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(ee(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[na]=t}else Wp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lr(t),o=!1}else ns!==null&&($T(ns),ns=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Bt.current&1?xn===0&&(xn=3):qF())),t.updateQueue!==null&&(t.flags|=4),lr(t),null);case 4:return qp(),bT(e,t),e===null&&qy(t.stateNode.containerInfo),lr(t),null;case 10:return TF(t.type._context),lr(t),null;case 17:return hi(t.type)&&J2(),lr(t),null;case 19:if(Rt(Bt),o=t.memoizedState,o===null)return lr(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Pm(o,!1);else{if(xn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=sw(e),s!==null){for(t.flags|=128,Pm(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ct(Bt,Bt.current&1|2),t.child}e=e.sibling}o.tail!==null&&on()>Yp&&(t.flags|=128,r=!0,Pm(o,!1),t.lanes=4194304)}else{if(!r)if(e=sw(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Pm(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!It)return lr(t),null}else 2*on()-o.renderingStartTime>Yp&&n!==1073741824&&(t.flags|=128,r=!0,Pm(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=on(),t.sibling=null,n=Bt.current,Ct(Bt,r?n&1|2:n&1),t):(lr(t),null);case 22:case 23:return HF(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Fi&1073741824&&(lr(t),t.subtreeFlags&6&&(t.flags|=8192)):lr(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function Mpe(e,t){switch(_F(t),t.tag){case 1:return hi(t.type)&&J2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qp(),Rt(di),Rt($r),DF(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return RF(t),null;case 13:if(Rt(Bt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));Wp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(Bt),null;case 4:return qp(),null;case 10:return TF(t.type._context),null;case 22:case 23:return HF(),null;case 24:return null;default:return null}}var Fb=!1,br=!1,Fpe=typeof WeakSet=="function"?WeakSet:Set,de=null;function jh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Jt(e,t,r)}else n.current=null}function xT(e,t,n){try{n()}catch(r){Jt(e,t,r)}}var tI=!1;function Ppe(e,t){if(rT=X2,e=Tq(),kF(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(iT={focusedElem:e,selectionRange:n},X2=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,m=t.stateNode,v=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ko(t.type,g),y);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(x){Jt(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return p=tI,tI=!1,p}function ry(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&xT(t,n,o)}i=i.next}while(i!==r)}}function Gk(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function wT(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _G(e){var t=e.alternate;t!==null&&(e.alternate=null,_G(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[na],delete t[Yy],delete t[aT],delete t[ppe],delete t[gpe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function EG(e){return e.tag===5||e.tag===3||e.tag===4}function nI(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||EG(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ST(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Z2));else if(r!==4&&(e=e.child,e!==null))for(ST(e,t,n),e=e.sibling;e!==null;)ST(e,t,n),e=e.sibling}function kT(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(kT(e,t,n),e=e.sibling;e!==null;)kT(e,t,n),e=e.sibling}var Wn=null,Jo=!1;function Jl(e,t,n){for(n=n.child;n!==null;)$G(e,t,n),n=n.sibling}function $G(e,t,n){if(da&&typeof da.onCommitFiberUnmount=="function")try{da.onCommitFiberUnmount(zk,n)}catch{}switch(n.tag){case 5:br||jh(n,t);case 6:var r=Wn,i=Jo;Wn=null,Jl(e,t,n),Wn=r,Jo=i,Wn!==null&&(Jo?(e=Wn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Wn.removeChild(n.stateNode));break;case 18:Wn!==null&&(Jo?(e=Wn,n=n.stateNode,e.nodeType===8?n$(e.parentNode,n):e.nodeType===1&&n$(e,n),Vy(e)):n$(Wn,n.stateNode));break;case 4:r=Wn,i=Jo,Wn=n.stateNode.containerInfo,Jo=!0,Jl(e,t,n),Wn=r,Jo=i;break;case 0:case 11:case 14:case 15:if(!br&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&xT(n,t,s),i=i.next}while(i!==r)}Jl(e,t,n);break;case 1:if(!br&&(jh(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Jt(n,t,a)}Jl(e,t,n);break;case 21:Jl(e,t,n);break;case 22:n.mode&1?(br=(r=br)||n.memoizedState!==null,Jl(e,t,n),br=r):Jl(e,t,n);break;default:Jl(e,t,n)}}function rI(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Fpe),t.forEach(function(r){var i=Bpe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wo(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Wn=a.stateNode,Jo=!1;break e;case 3:Wn=a.stateNode.containerInfo,Jo=!0;break e;case 4:Wn=a.stateNode.containerInfo,Jo=!0;break e}a=a.return}if(Wn===null)throw Error(ee(160));$G(o,s,i),Wn=null,Jo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Jt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)AG(t,e),t=t.sibling}function AG(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wo(t,e),Ls(e),r&4){try{ry(3,e,e.return),Gk(3,e)}catch(g){Jt(e,e.return,g)}try{ry(5,e,e.return)}catch(g){Jt(e,e.return,g)}}break;case 1:Wo(t,e),Ls(e),r&512&&n!==null&&jh(n,n.return);break;case 5:if(Wo(t,e),Ls(e),r&512&&n!==null&&jh(n,n.return),e.flags&32){var i=e.stateNode;try{zy(i,"")}catch(g){Jt(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&KH(i,o),G5(a,s);var u=G5(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?tq(i,f):c==="dangerouslySetInnerHTML"?JH(i,f):c==="children"?zy(i,f):cF(i,c,f,u)}switch(a){case"input":U5(i,o);break;case"textarea":QH(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?sp(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?sp(i,!!o.multiple,o.defaultValue,!0):sp(i,!!o.multiple,o.multiple?[]:"",!1))}i[Yy]=o}catch(g){Jt(e,e.return,g)}}break;case 6:if(Wo(t,e),Ls(e),r&4){if(e.stateNode===null)throw Error(ee(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Jt(e,e.return,g)}}break;case 3:if(Wo(t,e),Ls(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vy(t.containerInfo)}catch(g){Jt(e,e.return,g)}break;case 4:Wo(t,e),Ls(e);break;case 13:Wo(t,e),Ls(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(VF=on())),r&4&&rI(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(br=(u=br)||c,Wo(t,e),br=u):Wo(t,e),Ls(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(de=e,c=e.child;c!==null;){for(f=de=c;de!==null;){switch(d=de,h=d.child,d.tag){case 0:case 11:case 14:case 15:ry(4,d,d.return);break;case 1:jh(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Jt(r,n,g)}}break;case 5:jh(d,d.return);break;case 22:if(d.memoizedState!==null){oI(f);continue}}h!==null?(h.return=d,de=h):oI(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=eq("display",s))}catch(g){Jt(e,e.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Jt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Wo(t,e),Ls(e),r&4&&rI(e);break;case 21:break;default:Wo(t,e),Ls(e)}}function Ls(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(EG(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zy(i,""),r.flags&=-33);var o=nI(e);kT(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=nI(e);ST(e,a,s);break;default:throw Error(ee(161))}}catch(l){Jt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rpe(e,t,n){de=e,TG(e)}function TG(e,t,n){for(var r=(e.mode&1)!==0;de!==null;){var i=de,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Fb;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||br;a=Fb;var u=br;if(Fb=s,(br=l)&&!u)for(de=i;de!==null;)s=de,l=s.child,s.tag===22&&s.memoizedState!==null?sI(i):l!==null?(l.return=s,de=l):sI(i);for(;o!==null;)de=o,TG(o),o=o.sibling;de=i,Fb=a,br=u}iI(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,de=o):iI(e)}}function iI(e){for(;de!==null;){var t=de;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:br||Gk(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!br)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ko(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&UN(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}UN(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Vy(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}br||t.flags&512&&wT(t)}catch(d){Jt(t,t.return,d)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function oI(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function sI(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Gk(4,t)}catch(l){Jt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Jt(t,i,l)}}var o=t.return;try{wT(t)}catch(l){Jt(t,o,l)}break;case 5:var s=t.return;try{wT(t)}catch(l){Jt(t,s,l)}}}catch(l){Jt(t,t.return,l)}if(t===e){de=null;break}var a=t.sibling;if(a!==null){a.return=t.return,de=a;break}de=t.return}}var Dpe=Math.ceil,uw=jl.ReactCurrentDispatcher,BF=jl.ReactCurrentOwner,Ao=jl.ReactCurrentBatchConfig,Ke=0,Nn=null,pn=null,Jn=0,Fi=0,Bh=Cc(0),xn=0,e1=null,od=0,Yk=0,UF=0,iy=null,si=null,VF=0,Yp=1/0,Ka=null,cw=!1,CT=null,qu=null,Pb=!1,Mu=null,fw=0,oy=0,_T=null,Zx=-1,Jx=0;function qr(){return Ke&6?on():Zx!==-1?Zx:Zx=on()}function Gu(e){return e.mode&1?Ke&2&&Jn!==0?Jn&-Jn:ype.transition!==null?(Jx===0&&(Jx=hq()),Jx):(e=ht,e!==0||(e=window.event,e=e===void 0?16:xq(e.type)),e):1}function ys(e,t,n,r){if(50<oy)throw oy=0,_T=null,Error(ee(185));X1(e,n,r),(!(Ke&2)||e!==Nn)&&(e===Nn&&(!(Ke&2)&&(Yk|=n),xn===4&&bu(e,Jn)),pi(e,r),n===1&&Ke===0&&!(t.mode&1)&&(Yp=on()+500,Wk&&_c()))}function pi(e,t){var n=e.callbackNode;yhe(e,t);var r=Y2(e,e===Nn?Jn:0);if(r===0)n!==null&&gN(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&gN(n),t===1)e.tag===0?mpe(aI.bind(null,e)):zq(aI.bind(null,e)),dpe(function(){!(Ke&6)&&_c()}),n=null;else{switch(pq(r)){case 1:n=gF;break;case 4:n=fq;break;case 16:n=G2;break;case 536870912:n=dq;break;default:n=G2}n=IG(n,MG.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function MG(e,t){if(Zx=-1,Jx=0,Ke&6)throw Error(ee(327));var n=e.callbackNode;if(fp()&&e.callbackNode!==n)return null;var r=Y2(e,e===Nn?Jn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=dw(e,r);else{t=r;var i=Ke;Ke|=2;var o=PG();(Nn!==e||Jn!==t)&&(Ka=null,Yp=on()+500,zf(e,t));do try{Ipe();break}catch(a){FG(e,a)}while(!0);AF(),uw.current=o,Ke=i,pn!==null?t=0:(Nn=null,Jn=0,t=xn)}if(t!==0){if(t===2&&(i=Z5(e),i!==0&&(r=i,t=ET(e,i))),t===1)throw n=e1,zf(e,0),bu(e,r),pi(e,on()),n;if(t===6)bu(e,r);else{if(i=e.current.alternate,!(r&30)&&!Ope(i)&&(t=dw(e,r),t===2&&(o=Z5(e),o!==0&&(r=o,t=ET(e,o))),t===1))throw n=e1,zf(e,0),bu(e,r),pi(e,on()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ee(345));case 2:sf(e,si,Ka);break;case 3:if(bu(e,r),(r&130023424)===r&&(t=VF+500-on(),10<t)){if(Y2(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){qr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=sT(sf.bind(null,e,si,Ka),t);break}sf(e,si,Ka);break;case 4:if(bu(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ms(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=on()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dpe(r/1960))-r,10<r){e.timeoutHandle=sT(sf.bind(null,e,si,Ka),r);break}sf(e,si,Ka);break;case 5:sf(e,si,Ka);break;default:throw Error(ee(329))}}}return pi(e,on()),e.callbackNode===n?MG.bind(null,e):null}function ET(e,t){var n=iy;return e.current.memoizedState.isDehydrated&&(zf(e,t).flags|=256),e=dw(e,t),e!==2&&(t=si,si=n,t!==null&&$T(t)),e}function $T(e){si===null?si=e:si.push.apply(si,e)}function Ope(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!xs(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bu(e,t){for(t&=~UF,t&=~Yk,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ms(t),r=1<<n;e[n]=-1,t&=~r}}function aI(e){if(Ke&6)throw Error(ee(327));fp();var t=Y2(e,0);if(!(t&1))return pi(e,on()),null;var n=dw(e,t);if(e.tag!==0&&n===2){var r=Z5(e);r!==0&&(t=r,n=ET(e,r))}if(n===1)throw n=e1,zf(e,0),bu(e,t),pi(e,on()),n;if(n===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sf(e,si,Ka),pi(e,on()),null}function WF(e,t){var n=Ke;Ke|=1;try{return e(t)}finally{Ke=n,Ke===0&&(Yp=on()+500,Wk&&_c())}}function sd(e){Mu!==null&&Mu.tag===0&&!(Ke&6)&&fp();var t=Ke;Ke|=1;var n=Ao.transition,r=ht;try{if(Ao.transition=null,ht=1,e)return e()}finally{ht=r,Ao.transition=n,Ke=t,!(Ke&6)&&_c()}}function HF(){Fi=Bh.current,Rt(Bh)}function zf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,fpe(n)),pn!==null)for(n=pn.return;n!==null;){var r=n;switch(_F(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&J2();break;case 3:qp(),Rt(di),Rt($r),DF();break;case 5:RF(r);break;case 4:qp();break;case 13:Rt(Bt);break;case 19:Rt(Bt);break;case 10:TF(r.type._context);break;case 22:case 23:HF()}n=n.return}if(Nn=e,pn=e=Yu(e.current,null),Jn=Fi=t,xn=0,e1=null,UF=Yk=od=0,si=iy=null,Cf!==null){for(t=0;t<Cf.length;t++)if(n=Cf[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Cf=null}return e}function FG(e,t){do{var n=pn;try{if(AF(),Xx.current=lw,aw){for(var r=qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}aw=!1}if(id=0,Tn=yn=qt=null,ny=!1,Qy=0,BF.current=null,n===null||n.return===null){xn=1,e1=t,pn=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=Jn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=YN(s);if(h!==null){h.flags&=-257,XN(h,s,a,o,t),h.mode&1&&GN(o,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}else{if(!(t&1)){GN(o,u,t),qF();break e}l=Error(ee(426))}}else if(It&&a.mode&1){var y=YN(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),XN(y,s,a,o,t),EF(Gp(l,a));break e}}o=l=Gp(l,a),xn!==4&&(xn=2),iy===null?iy=[o]:iy.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=pG(o,l,t);BN(o,m);break e;case 1:a=l;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qu===null||!qu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=gG(o,a,t);BN(o,x);break e}}o=o.return}while(o!==null)}DG(n)}catch(w){t=w,pn===n&&n!==null&&(pn=n=n.return);continue}break}while(!0)}function PG(){var e=uw.current;return uw.current=lw,e===null?lw:e}function qF(){(xn===0||xn===3||xn===2)&&(xn=4),Nn===null||!(od&268435455)&&!(Yk&268435455)||bu(Nn,Jn)}function dw(e,t){var n=Ke;Ke|=2;var r=PG();(Nn!==e||Jn!==t)&&(Ka=null,zf(e,t));do try{Npe();break}catch(i){FG(e,i)}while(!0);if(AF(),Ke=n,uw.current=r,pn!==null)throw Error(ee(261));return Nn=null,Jn=0,xn}function Npe(){for(;pn!==null;)RG(pn)}function Ipe(){for(;pn!==null&&!lhe();)RG(pn)}function RG(e){var t=NG(e.alternate,e,Fi);e.memoizedProps=e.pendingProps,t===null?DG(e):pn=t,BF.current=null}function DG(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Mpe(n,t),n!==null){n.flags&=32767,pn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xn=6,pn=null;return}}else if(n=Tpe(n,t,Fi),n!==null){pn=n;return}if(t=t.sibling,t!==null){pn=t;return}pn=t=e}while(t!==null);xn===0&&(xn=5)}function sf(e,t,n){var r=ht,i=Ao.transition;try{Ao.transition=null,ht=1,Lpe(e,t,n,r)}finally{Ao.transition=i,ht=r}return null}function Lpe(e,t,n,r){do fp();while(Mu!==null);if(Ke&6)throw Error(ee(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(vhe(e,o),e===Nn&&(pn=Nn=null,Jn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pb||(Pb=!0,IG(G2,function(){return fp(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ao.transition,Ao.transition=null;var s=ht;ht=1;var a=Ke;Ke|=4,BF.current=null,Ppe(e,n),AG(n,e),ipe(iT),X2=!!rT,iT=rT=null,e.current=n,Rpe(n),uhe(),Ke=a,ht=s,Ao.transition=o}else e.current=n;if(Pb&&(Pb=!1,Mu=e,fw=i),o=e.pendingLanes,o===0&&(qu=null),dhe(n.stateNode),pi(e,on()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cw)throw cw=!1,e=CT,CT=null,e;return fw&1&&e.tag!==0&&fp(),o=e.pendingLanes,o&1?e===_T?oy++:(oy=0,_T=e):oy=0,_c(),null}function fp(){if(Mu!==null){var e=pq(fw),t=Ao.transition,n=ht;try{if(Ao.transition=null,ht=16>e?16:e,Mu===null)var r=!1;else{if(e=Mu,Mu=null,fw=0,Ke&6)throw Error(ee(331));var i=Ke;for(Ke|=4,de=e.current;de!==null;){var o=de,s=o.child;if(de.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(de=u;de!==null;){var c=de;switch(c.tag){case 0:case 11:case 15:ry(8,c,o)}var f=c.child;if(f!==null)f.return=c,de=f;else for(;de!==null;){c=de;var d=c.sibling,h=c.return;if(_G(c),c===u){de=null;break}if(d!==null){d.return=h,de=d;break}de=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}de=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,de=s;else e:for(;de!==null;){if(o=de,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ry(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,de=m;break e}de=o.return}}var v=e.current;for(de=v;de!==null;){s=de;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,de=b;else e:for(s=v;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gk(9,a)}}catch(w){Jt(a,a.return,w)}if(a===s){de=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,de=x;break e}de=a.return}}if(Ke=i,_c(),da&&typeof da.onPostCommitFiberRoot=="function")try{da.onPostCommitFiberRoot(zk,e)}catch{}r=!0}return r}finally{ht=n,Ao.transition=t}}return!1}function lI(e,t,n){t=Gp(n,t),t=pG(e,t,1),e=Hu(e,t,1),t=qr(),e!==null&&(X1(e,1,t),pi(e,t))}function Jt(e,t,n){if(e.tag===3)lI(e,e,n);else for(;t!==null;){if(t.tag===3){lI(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qu===null||!qu.has(r))){e=Gp(n,e),e=gG(t,e,1),t=Hu(t,e,1),e=qr(),t!==null&&(X1(t,1,e),pi(t,e));break}}t=t.return}}function zpe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qr(),e.pingedLanes|=e.suspendedLanes&n,Nn===e&&(Jn&n)===n&&(xn===4||xn===3&&(Jn&130023424)===Jn&&500>on()-VF?zf(e,0):UF|=n),pi(e,t)}function OG(e,t){t===0&&(e.mode&1?(t=Sb,Sb<<=1,!(Sb&130023424)&&(Sb=4194304)):t=1);var n=qr();e=Tl(e,t),e!==null&&(X1(e,t,n),pi(e,n))}function jpe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),OG(e,n)}function Bpe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(t),OG(e,n)}var NG;NG=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||di.current)ci=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ci=!1,Ape(e,t,n);ci=!!(e.flags&131072)}else ci=!1,It&&t.flags&1048576&&jq(t,nw,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qx(e,t),e=t.pendingProps;var i=Vp(t,$r.current);cp(t,n),i=NF(null,t,r,e,i,n);var o=IF();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,hi(r)?(o=!0,ew(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,FF(t),i.updater=qk,t.stateNode=i,i._reactInternals=t,hT(t,r,e,n),t=mT(null,t,r,!0,o,n)):(t.tag=0,It&&o&&CF(t),Nr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qx(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Vpe(r),e=Ko(r,e),i){case 0:t=gT(null,t,r,e,n);break e;case 1:t=ZN(null,t,r,e,n);break e;case 11:t=KN(null,t,r,e,n);break e;case 14:t=QN(null,t,r,Ko(r.type,e),n);break e}throw Error(ee(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ko(r,i),gT(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ko(r,i),ZN(e,t,r,i,n);case 3:e:{if(bG(t),e===null)throw Error(ee(387));r=t.pendingProps,o=t.memoizedState,i=o.element,qq(e,t),ow(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Gp(Error(ee(423)),t),t=JN(e,t,r,n,i);break e}else if(r!==i){i=Gp(Error(ee(424)),t),t=JN(e,t,r,n,i);break e}else for(Ni=Wu(t.stateNode.containerInfo.firstChild),Vi=t,It=!0,ns=null,n=Wq(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wp(),r===i){t=Ml(e,t,n);break e}Nr(e,t,r,n)}t=t.child}return t;case 5:return Gq(t),e===null&&cT(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,oT(r,i)?s=null:o!==null&&oT(r,o)&&(t.flags|=32),vG(e,t),Nr(e,t,s,n),t.child;case 6:return e===null&&cT(t),null;case 13:return xG(e,t,n);case 4:return PF(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Hp(t,null,r,n):Nr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ko(r,i),KN(e,t,r,i,n);case 7:return Nr(e,t,t.pendingProps,n),t.child;case 8:return Nr(e,t,t.pendingProps.children,n),t.child;case 12:return Nr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ct(rw,r._currentValue),r._currentValue=s,o!==null)if(xs(o.value,s)){if(o.children===i.children&&!di.current){t=Ml(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=pl(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),fT(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ee(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),fT(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Nr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cp(t,n),i=Fo(i),r=r(i),t.flags|=1,Nr(e,t,r,n),t.child;case 14:return r=t.type,i=Ko(r,t.pendingProps),i=Ko(r.type,i),QN(e,t,r,i,n);case 15:return mG(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ko(r,i),Qx(e,t),t.tag=1,hi(r)?(e=!0,ew(t)):e=!1,cp(t,n),hG(t,r,i),hT(t,r,i,n),mT(null,t,r,!0,e,n);case 19:return wG(e,t,n);case 22:return yG(e,t,n)}throw Error(ee(156,t.tag))};function IG(e,t){return cq(e,t)}function Upe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wo(e,t,n,r){return new Upe(e,t,n,r)}function GF(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vpe(e){if(typeof e=="function")return GF(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dF)return 11;if(e===hF)return 14}return 2}function Yu(e,t){var n=e.alternate;return n===null?(n=wo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function e2(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")GF(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Fh:return jf(n.children,i,o,t);case fF:s=8,i|=8;break;case I5:return e=wo(12,n,t,i|2),e.elementType=I5,e.lanes=o,e;case L5:return e=wo(13,n,t,i),e.elementType=L5,e.lanes=o,e;case z5:return e=wo(19,n,t,i),e.elementType=z5,e.lanes=o,e;case GH:return Xk(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case HH:s=10;break e;case qH:s=9;break e;case dF:s=11;break e;case hF:s=14;break e;case uu:s=16,r=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=wo(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function jf(e,t,n,r){return e=wo(7,e,r,t),e.lanes=n,e}function Xk(e,t,n,r){return e=wo(22,e,r,t),e.elementType=GH,e.lanes=n,e.stateNode={isHidden:!1},e}function c$(e,t,n){return e=wo(6,e,null,t),e.lanes=n,e}function f$(e,t,n){return t=wo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wpe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=HE(0),this.expirationTimes=HE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=HE(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function YF(e,t,n,r,i,o,s,a,l){return e=new Wpe(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=wo(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},FF(o),e}function Hpe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mh,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function LG(e){if(!e)return rc;e=e._reactInternals;e:{if(Rd(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(hi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var n=e.type;if(hi(n))return Lq(e,n,t)}return t}function zG(e,t,n,r,i,o,s,a,l){return e=YF(n,r,!0,e,i,o,s,a,l),e.context=LG(null),n=e.current,r=qr(),i=Gu(n),o=pl(r,i),o.callback=t??null,Hu(n,o,i),e.current.lanes=i,X1(e,i,r),pi(e,r),e}function Kk(e,t,n,r){var i=t.current,o=qr(),s=Gu(i);return n=LG(n),t.context===null?t.context=n:t.pendingContext=n,t=pl(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Hu(i,t,s),e!==null&&(ys(e,i,s,o),Yx(e,i,s)),s}function hw(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uI(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function XF(e,t){uI(e,t),(e=e.alternate)&&uI(e,t)}function qpe(){return null}var jG=typeof reportError=="function"?reportError:function(e){console.error(e)};function KF(e){this._internalRoot=e}Qk.prototype.render=KF.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));Kk(e,t,null,null)};Qk.prototype.unmount=KF.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sd(function(){Kk(null,e,null,null)}),t[Al]=null}};function Qk(e){this._internalRoot=e}Qk.prototype.unstable_scheduleHydration=function(e){if(e){var t=yq();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vu.length&&t!==0&&t<vu[n].priority;n++);vu.splice(n,0,e),n===0&&bq(e)}};function QF(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cI(){}function Gpe(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=hw(s);o.call(u)}}var s=zG(t,r,e,0,null,!1,!1,"",cI);return e._reactRootContainer=s,e[Al]=s.current,qy(e.nodeType===8?e.parentNode:e),sd(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=hw(l);a.call(u)}}var l=YF(e,0,!1,null,null,!1,!1,"",cI);return e._reactRootContainer=l,e[Al]=l.current,qy(e.nodeType===8?e.parentNode:e),sd(function(){Kk(t,l,n,r)}),l}function Jk(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=hw(s);a.call(l)}}Kk(t,s,e,i)}else s=Gpe(n,t,e,i,r);return hw(s)}gq=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=m0(t.pendingLanes);n!==0&&(mF(t,n|1),pi(t,on()),!(Ke&6)&&(Yp=on()+500,_c()))}break;case 13:sd(function(){var r=Tl(e,1);if(r!==null){var i=qr();ys(r,e,1,i)}}),XF(e,1)}};yF=function(e){if(e.tag===13){var t=Tl(e,134217728);if(t!==null){var n=qr();ys(t,e,134217728,n)}XF(e,134217728)}};mq=function(e){if(e.tag===13){var t=Gu(e),n=Tl(e,t);if(n!==null){var r=qr();ys(n,e,t,r)}XF(e,t)}};yq=function(){return ht};vq=function(e,t){var n=ht;try{return ht=e,t()}finally{ht=n}};X5=function(e,t,n){switch(t){case"input":if(U5(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Vk(r);if(!i)throw Error(ee(90));XH(r),U5(r,i)}}}break;case"textarea":QH(e,n);break;case"select":t=n.value,t!=null&&sp(e,!!n.multiple,t,!1)}};iq=WF;oq=sd;var Ype={usingClientEntryPoint:!1,Events:[Q1,Oh,Vk,nq,rq,WF]},Rm={findFiberByHostInstance:kf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xpe={bundleType:Rm.bundleType,version:Rm.version,rendererPackageName:Rm.rendererPackageName,rendererConfig:Rm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lq(e),e===null?null:e.stateNode},findFiberByHostInstance:Rm.findFiberByHostInstance||qpe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rb.isDisabled&&Rb.supportsFiber)try{zk=Rb.inject(Xpe),da=Rb}catch{}}ro.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ype;ro.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!QF(t))throw Error(ee(200));return Hpe(e,t,null,n)};ro.createRoot=function(e,t){if(!QF(e))throw Error(ee(299));var n=!1,r="",i=jG;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=YF(e,1,!1,null,null,n,!1,r,i),e[Al]=t.current,qy(e.nodeType===8?e.parentNode:e),new KF(t)};ro.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=lq(t),e=e===null?null:e.stateNode,e};ro.flushSync=function(e){return sd(e)};ro.hydrate=function(e,t,n){if(!Zk(t))throw Error(ee(200));return Jk(null,e,t,!0,n)};ro.hydrateRoot=function(e,t,n){if(!QF(e))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=jG;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=zG(t,null,e,1,n??null,i,!1,o,s),e[Al]=t.current,qy(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qk(t)};ro.render=function(e,t,n){if(!Zk(t))throw Error(ee(200));return Jk(null,e,t,!1,n)};ro.unmountComponentAtNode=function(e){if(!Zk(e))throw Error(ee(40));return e._reactRootContainer?(sd(function(){Jk(null,null,e,!1,function(){e._reactRootContainer=null,e[Al]=null})}),!0):!1};ro.unstable_batchedUpdates=WF;ro.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zk(n))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return Jk(e,t,n,!1,r)};ro.version="18.3.1-next-f1338f8080-20240426";function BG(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BG)}catch(e){console.error(e)}}BG(),BH.exports=ro;var ZF=BH.exports,[UG,Kpe]=jn({strict:!1,name:"PortalContext"}),JF="chakra-portal",Qpe=".chakra-portal",Zpe=e=>E.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),Jpe=e=>{const{appendToParentPortal:t,children:n}=e,[r,i]=T.useState(null),o=T.useRef(null),[,s]=T.useState({});T.useEffect(()=>s({}),[]);const a=Kpe(),l=Hde();Bp(()=>{if(!r)return;const c=r.ownerDocument,f=t?a??c.body:c.body;if(!f)return;o.current=c.createElement("div"),o.current.className=JF,f.appendChild(o.current),s({});const d=o.current;return()=>{f.contains(d)&&f.removeChild(d)}},[r]);const u=l!=null&&l.zIndex?E.jsx(Zpe,{zIndex:l==null?void 0:l.zIndex,children:n}):n;return o.current?ZF.createPortal(E.jsx(UG,{value:o.current,children:u}),o.current):E.jsx("span",{ref:c=>{c&&i(c)}})},ege=e=>{const{children:t,containerRef:n,appendToParentPortal:r}=e,i=n.current,o=i??(typeof window<"u"?document.body:void 0),s=T.useMemo(()=>{const l=i==null?void 0:i.ownerDocument.createElement("div");return l&&(l.className=JF),l},[i]),[,a]=T.useState({});return Bp(()=>a({}),[]),Bp(()=>{if(!(!s||!o))return o.appendChild(s),()=>{o.removeChild(s)}},[s,o]),o&&s?ZF.createPortal(E.jsx(UG,{value:r?s:null,children:t}),s):null};function J1(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...r}=t;return n?E.jsx(ege,{containerRef:n,...r}):E.jsx(Jpe,{...r})}J1.className=JF;J1.selector=Qpe;J1.displayName="Portal";function eP(){const e=T.useContext(Iy);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var tP=T.createContext({});tP.displayName="ColorModeContext";function Gg(){const e=T.useContext(tP);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function Us(e,t){const{colorMode:n}=Gg();return n==="dark"?t:e}var Db={light:"chakra-ui-light",dark:"chakra-ui-dark"};function tge(e={}){const{preventTransition:t=!0}=e,n={setDataset:r=>{const i=t?n.preventTransition():void 0;document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,i==null||i()},setClassName(r){document.body.classList.add(r?Db.dark:Db.light),document.body.classList.remove(r?Db.light:Db.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(r){var i;return((i=n.query().matches)!=null?i:r==="dark")?"dark":"light"},addListener(r){const i=n.query(),o=s=>{r(s.matches?"dark":"light")};return typeof i.addListener=="function"?i.addListener(o):i.addEventListener("change",o),()=>{typeof i.removeListener=="function"?i.removeListener(o):i.removeEventListener("change",o)}},preventTransition(){const r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(r)})})}}};return n}var nge="chakra-ui-color-mode";function rge(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let n;try{n=localStorage.getItem(e)||t}catch{}return n||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var ige=rge(nge),fI=()=>{};function dI(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function VG(e){const{value:t,children:n,options:{useSystemColorMode:r,initialColorMode:i,disableTransitionOnChange:o}={},colorModeManager:s=ige}=e,a=i==="dark"?"dark":"light",[l,u]=T.useState(()=>dI(s,a)),[c,f]=T.useState(()=>dI(s)),{getSystemTheme:d,setClassName:h,setDataset:p,addListener:g}=T.useMemo(()=>tge({preventTransition:o}),[o]),y=i==="system"&&!l?c:l,m=T.useCallback(x=>{const w=x==="system"?d():x;u(w),h(w==="dark"),p(w),s.set(w)},[s,d,h,p]);Bp(()=>{i==="system"&&f(d())},[]),T.useEffect(()=>{const x=s.get();if(x){m(x);return}if(i==="system"){m("system");return}m(a)},[s,a,i,m]);const v=T.useCallback(()=>{m(y==="dark"?"light":"dark")},[y,m]);T.useEffect(()=>{if(r)return g(m)},[r,g,m]);const b=T.useMemo(()=>({colorMode:t??y,toggleColorMode:t?fI:v,setColorMode:t?fI:m,forced:t!==void 0}),[y,v,m,t]);return E.jsx(tP.Provider,{value:b,children:n})}VG.displayName="ColorModeProvider";function WG(){const e=Gg(),t=eP();return{...e,theme:t}}var Xe=(...e)=>e.filter(Boolean).join(" ");function oge(){return!1}function gi(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}var ev=e=>{const{condition:t,message:n}=e;t&&oge()&&console.warn(n)};function aa(e,...t){return sge(e)?e(...t):e}var sge=e=>typeof e=="function",po=e=>e?"":void 0,d$=e=>e?!0:void 0;function Xu(...e){return function(n){e.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}var pw={exports:{}};pw.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",y="[object Number]",m="[object Null]",v="[object Object]",b="[object Proxy]",x="[object RegExp]",w="[object Set]",k="[object String]",S="[object Undefined]",C="[object WeakMap]",_="[object ArrayBuffer]",$="[object DataView]",A="[object Float32Array]",O="[object Float64Array]",M="[object Int8Array]",P="[object Int16Array]",R="[object Int32Array]",D="[object Uint8Array]",I="[object Uint8ClampedArray]",N="[object Uint16Array]",B="[object Uint32Array]",Y=/[\\^$.*+?()[\]{}|]/g,W=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,re={};re[A]=re[O]=re[M]=re[P]=re[R]=re[D]=re[I]=re[N]=re[B]=!0,re[a]=re[l]=re[_]=re[c]=re[$]=re[f]=re[d]=re[h]=re[g]=re[y]=re[v]=re[x]=re[w]=re[k]=re[C]=!1;var we=typeof Au=="object"&&Au&&Au.Object===Object&&Au,De=typeof self=="object"&&self&&self.Object===Object&&self,ut=we||De||Function("return this")(),$n=t&&!t.nodeType&&t,sr=$n&&!0&&e&&!e.nodeType&&e,ue=sr&&sr.exports===$n,$e=ue&&we.process,Ae=function(){try{var F=sr&&sr.require&&sr.require("util").types;return F||$e&&$e.binding&&$e.binding("util")}catch{}}(),Q=Ae&&Ae.isTypedArray;function mn(F,z,U){switch(U.length){case 0:return F.call(z);case 1:return F.call(z,U[0]);case 2:return F.call(z,U[0],U[1]);case 3:return F.call(z,U[0],U[1],U[2])}return F.apply(z,U)}function tt(F,z){for(var U=-1,he=Array(F);++U<F;)he[U]=z(U);return he}function An(F){return function(z){return F(z)}}function fn(F,z){return F==null?void 0:F[z]}function oo(F,z){return function(U){return F(z(U))}}var ih=Array.prototype,uce=Function.prototype,ab=Object.prototype,$E=ut["__core-js_shared__"],lb=uce.toString,Zl=ab.hasOwnProperty,T9=function(){var F=/[^.]+$/.exec($E&&$E.keys&&$E.keys.IE_PROTO||"");return F?"Symbol(src)_1."+F:""}(),M9=ab.toString,cce=lb.call(Object),fce=RegExp("^"+lb.call(Zl).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ub=ue?ut.Buffer:void 0,F9=ut.Symbol,P9=ut.Uint8Array;ub&&ub.allocUnsafe;var R9=oo(Object.getPrototypeOf,Object),D9=Object.create,dce=ab.propertyIsEnumerable,hce=ih.splice,Uc=F9?F9.toStringTag:void 0,cb=function(){try{var F=ME(Object,"defineProperty");return F({},"",{}),F}catch{}}(),pce=ub?ub.isBuffer:void 0,O9=Math.max,gce=Date.now,N9=ME(ut,"Map"),Sm=ME(Object,"create"),mce=function(){function F(){}return function(z){if(!Wc(z))return{};if(D9)return D9(z);F.prototype=z;var U=new F;return F.prototype=void 0,U}}();function Vc(F){var z=-1,U=F==null?0:F.length;for(this.clear();++z<U;){var he=F[z];this.set(he[0],he[1])}}function yce(){this.__data__=Sm?Sm(null):{},this.size=0}function vce(F){var z=this.has(F)&&delete this.__data__[F];return this.size-=z?1:0,z}function bce(F){var z=this.__data__;if(Sm){var U=z[F];return U===r?void 0:U}return Zl.call(z,F)?z[F]:void 0}function xce(F){var z=this.__data__;return Sm?z[F]!==void 0:Zl.call(z,F)}function wce(F,z){var U=this.__data__;return this.size+=this.has(F)?0:1,U[F]=Sm&&z===void 0?r:z,this}Vc.prototype.clear=yce,Vc.prototype.delete=vce,Vc.prototype.get=bce,Vc.prototype.has=xce,Vc.prototype.set=wce;function Va(F){var z=-1,U=F==null?0:F.length;for(this.clear();++z<U;){var he=F[z];this.set(he[0],he[1])}}function Sce(){this.__data__=[],this.size=0}function kce(F){var z=this.__data__,U=fb(z,F);if(U<0)return!1;var he=z.length-1;return U==he?z.pop():hce.call(z,U,1),--this.size,!0}function Cce(F){var z=this.__data__,U=fb(z,F);return U<0?void 0:z[U][1]}function _ce(F){return fb(this.__data__,F)>-1}function Ece(F,z){var U=this.__data__,he=fb(U,F);return he<0?(++this.size,U.push([F,z])):U[he][1]=z,this}Va.prototype.clear=Sce,Va.prototype.delete=kce,Va.prototype.get=Cce,Va.prototype.has=_ce,Va.prototype.set=Ece;function oh(F){var z=-1,U=F==null?0:F.length;for(this.clear();++z<U;){var he=F[z];this.set(he[0],he[1])}}function $ce(){this.size=0,this.__data__={hash:new Vc,map:new(N9||Va),string:new Vc}}function Ace(F){var z=hb(this,F).delete(F);return this.size-=z?1:0,z}function Tce(F){return hb(this,F).get(F)}function Mce(F){return hb(this,F).has(F)}function Fce(F,z){var U=hb(this,F),he=U.size;return U.set(F,z),this.size+=U.size==he?0:1,this}oh.prototype.clear=$ce,oh.prototype.delete=Ace,oh.prototype.get=Tce,oh.prototype.has=Mce,oh.prototype.set=Fce;function sh(F){var z=this.__data__=new Va(F);this.size=z.size}function Pce(){this.__data__=new Va,this.size=0}function Rce(F){var z=this.__data__,U=z.delete(F);return this.size=z.size,U}function Dce(F){return this.__data__.get(F)}function Oce(F){return this.__data__.has(F)}function Nce(F,z){var U=this.__data__;if(U instanceof Va){var he=U.__data__;if(!N9||he.length<n-1)return he.push([F,z]),this.size=++U.size,this;U=this.__data__=new oh(he)}return U.set(F,z),this.size=U.size,this}sh.prototype.clear=Pce,sh.prototype.delete=Rce,sh.prototype.get=Dce,sh.prototype.has=Oce,sh.prototype.set=Nce;function Ice(F,z){var U=RE(F),he=!U&&PE(F),Ge=!U&&!he&&B9(F),wt=!U&&!he&&!Ge&&V9(F),Dt=U||he||Ge||wt,nt=Dt?tt(F.length,String):[],Ot=nt.length;for(var Vo in F)Dt&&(Vo=="length"||Ge&&(Vo=="offset"||Vo=="parent")||wt&&(Vo=="buffer"||Vo=="byteLength"||Vo=="byteOffset")||z9(Vo,Ot))||nt.push(Vo);return nt}function AE(F,z,U){(U!==void 0&&!pb(F[z],U)||U===void 0&&!(z in F))&&TE(F,z,U)}function Lce(F,z,U){var he=F[z];(!(Zl.call(F,z)&&pb(he,U))||U===void 0&&!(z in F))&&TE(F,z,U)}function fb(F,z){for(var U=F.length;U--;)if(pb(F[U][0],z))return U;return-1}function TE(F,z,U){z=="__proto__"&&cb?cb(F,z,{configurable:!0,enumerable:!0,value:U,writable:!0}):F[z]=U}var zce=Zce();function db(F){return F==null?F===void 0?S:m:Uc&&Uc in Object(F)?Jce(F):ofe(F)}function I9(F){return km(F)&&db(F)==a}function jce(F){if(!Wc(F)||rfe(F))return!1;var z=OE(F)?fce:W;return z.test(ufe(F))}function Bce(F){return km(F)&&U9(F.length)&&!!re[db(F)]}function Uce(F){if(!Wc(F))return ife(F);var z=j9(F),U=[];for(var he in F)he=="constructor"&&(z||!Zl.call(F,he))||U.push(he);return U}function L9(F,z,U,he,Ge){F!==z&&zce(z,function(wt,Dt){if(Ge||(Ge=new sh),Wc(wt))Vce(F,z,Dt,U,L9,he,Ge);else{var nt=he?he(FE(F,Dt),wt,Dt+"",F,z,Ge):void 0;nt===void 0&&(nt=wt),AE(F,Dt,nt)}},W9)}function Vce(F,z,U,he,Ge,wt,Dt){var nt=FE(F,U),Ot=FE(z,U),Vo=Dt.get(Ot);if(Vo){AE(F,U,Vo);return}var Ai=wt?wt(nt,Ot,U+"",F,z,Dt):void 0,Cm=Ai===void 0;if(Cm){var NE=RE(Ot),IE=!NE&&B9(Ot),q9=!NE&&!IE&&V9(Ot);Ai=Ot,NE||IE||q9?RE(nt)?Ai=nt:cfe(nt)?Ai=Xce(nt):IE?(Cm=!1,Ai=qce(Ot)):q9?(Cm=!1,Ai=Yce(Ot)):Ai=[]:ffe(Ot)||PE(Ot)?(Ai=nt,PE(nt)?Ai=dfe(nt):(!Wc(nt)||OE(nt))&&(Ai=efe(Ot))):Cm=!1}Cm&&(Dt.set(Ot,Ai),Ge(Ai,Ot,he,wt,Dt),Dt.delete(Ot)),AE(F,U,Ai)}function Wce(F,z){return afe(sfe(F,z,H9),F+"")}var Hce=cb?function(F,z){return cb(F,"toString",{configurable:!0,enumerable:!1,value:pfe(z),writable:!0})}:H9;function qce(F,z){return F.slice()}function Gce(F){var z=new F.constructor(F.byteLength);return new P9(z).set(new P9(F)),z}function Yce(F,z){var U=Gce(F.buffer);return new F.constructor(U,F.byteOffset,F.length)}function Xce(F,z){var U=-1,he=F.length;for(z||(z=Array(he));++U<he;)z[U]=F[U];return z}function Kce(F,z,U,he){var Ge=!U;U||(U={});for(var wt=-1,Dt=z.length;++wt<Dt;){var nt=z[wt],Ot=void 0;Ot===void 0&&(Ot=F[nt]),Ge?TE(U,nt,Ot):Lce(U,nt,Ot)}return U}function Qce(F){return Wce(function(z,U){var he=-1,Ge=U.length,wt=Ge>1?U[Ge-1]:void 0,Dt=Ge>2?U[2]:void 0;for(wt=F.length>3&&typeof wt=="function"?(Ge--,wt):void 0,Dt&&tfe(U[0],U[1],Dt)&&(wt=Ge<3?void 0:wt,Ge=1),z=Object(z);++he<Ge;){var nt=U[he];nt&&F(z,nt,he,wt)}return z})}function Zce(F){return function(z,U,he){for(var Ge=-1,wt=Object(z),Dt=he(z),nt=Dt.length;nt--;){var Ot=Dt[++Ge];if(U(wt[Ot],Ot,wt)===!1)break}return z}}function hb(F,z){var U=F.__data__;return nfe(z)?U[typeof z=="string"?"string":"hash"]:U.map}function ME(F,z){var U=fn(F,z);return jce(U)?U:void 0}function Jce(F){var z=Zl.call(F,Uc),U=F[Uc];try{F[Uc]=void 0;var he=!0}catch{}var Ge=M9.call(F);return he&&(z?F[Uc]=U:delete F[Uc]),Ge}function efe(F){return typeof F.constructor=="function"&&!j9(F)?mce(R9(F)):{}}function z9(F,z){var U=typeof F;return z=z??s,!!z&&(U=="number"||U!="symbol"&&oe.test(F))&&F>-1&&F%1==0&&F<z}function tfe(F,z,U){if(!Wc(U))return!1;var he=typeof z;return(he=="number"?DE(U)&&z9(z,U.length):he=="string"&&z in U)?pb(U[z],F):!1}function nfe(F){var z=typeof F;return z=="string"||z=="number"||z=="symbol"||z=="boolean"?F!=="__proto__":F===null}function rfe(F){return!!T9&&T9 in F}function j9(F){var z=F&&F.constructor,U=typeof z=="function"&&z.prototype||ab;return F===U}function ife(F){var z=[];if(F!=null)for(var U in Object(F))z.push(U);return z}function ofe(F){return M9.call(F)}function sfe(F,z,U){return z=O9(z===void 0?F.length-1:z,0),function(){for(var he=arguments,Ge=-1,wt=O9(he.length-z,0),Dt=Array(wt);++Ge<wt;)Dt[Ge]=he[z+Ge];Ge=-1;for(var nt=Array(z+1);++Ge<z;)nt[Ge]=he[Ge];return nt[z]=U(Dt),mn(F,this,nt)}}function FE(F,z){if(!(z==="constructor"&&typeof F[z]=="function")&&z!="__proto__")return F[z]}var afe=lfe(Hce);function lfe(F){var z=0,U=0;return function(){var he=gce(),Ge=o-(he-U);if(U=he,Ge>0){if(++z>=i)return arguments[0]}else z=0;return F.apply(void 0,arguments)}}function ufe(F){if(F!=null){try{return lb.call(F)}catch{}try{return F+""}catch{}}return""}function pb(F,z){return F===z||F!==F&&z!==z}var PE=I9(function(){return arguments}())?I9:function(F){return km(F)&&Zl.call(F,"callee")&&!dce.call(F,"callee")},RE=Array.isArray;function DE(F){return F!=null&&U9(F.length)&&!OE(F)}function cfe(F){return km(F)&&DE(F)}var B9=pce||gfe;function OE(F){if(!Wc(F))return!1;var z=db(F);return z==h||z==p||z==u||z==b}function U9(F){return typeof F=="number"&&F>-1&&F%1==0&&F<=s}function Wc(F){var z=typeof F;return F!=null&&(z=="object"||z=="function")}function km(F){return F!=null&&typeof F=="object"}function ffe(F){if(!km(F)||db(F)!=v)return!1;var z=R9(F);if(z===null)return!0;var U=Zl.call(z,"constructor")&&z.constructor;return typeof U=="function"&&U instanceof U&&lb.call(U)==cce}var V9=Q?An(Q):Bce;function dfe(F){return Kce(F,W9(F))}function W9(F){return DE(F)?Ice(F):Uce(F)}var hfe=Qce(function(F,z,U,he){L9(F,z,U,he)});function pfe(F){return function(){return F}}function H9(F){return F}function gfe(){return!1}e.exports=hfe})(pw,pw.exports);var age=pw.exports;const So=zl(age);var lge=e=>/!(important)?$/.test(e),hI=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,uge=(e,t)=>n=>{const r=String(t),i=lge(r),o=hI(r),s=e?`${e}.${o}`:o;let a=gi(n.__cssMap)&&s in n.__cssMap?n.__cssMap[s].varRef:t;return a=hI(a),i?`${a} !important`:a};function nP(e){const{scale:t,transform:n,compose:r}=e;return(o,s)=>{var a;const l=uge(t,o)(s);let u=(a=n==null?void 0:n(l,s))!=null?a:l;return r&&(u=r(u,s)),u}}var Ob=(...e)=>t=>e.reduce((n,r)=>r(n),t);function so(e,t){return n=>{const r={property:n,scale:e};return r.transform=nP({scale:e,transform:t}),r}}var cge=({rtl:e,ltr:t})=>n=>n.direction==="rtl"?e:t;function fge(e){const{property:t,scale:n,transform:r}=e;return{scale:n,property:cge(t),transform:n?nP({scale:n,compose:r}):r}}var HG=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function dge(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...HG].join(" ")}function hge(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...HG].join(" ")}var pge={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},gge={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function mge(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var yge={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},AT={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},vge=new Set(Object.values(AT)),TT=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),bge=e=>e.trim();function xge(e,t){if(e==null||TT.has(e))return e;if(!(MT(e)||TT.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),o=i==null?void 0:i[1],s=i==null?void 0:i[2];if(!o||!s)return e;const a=o.includes("-gradient")?o:`${o}-gradient`,[l,...u]=s.split(",").map(bge).filter(Boolean);if((u==null?void 0:u.length)===0)return e;const c=l in AT?AT[l]:l;u.unshift(c);const f=u.map(d=>{if(vge.has(d))return d;const h=d.indexOf(" "),[p,g]=h!==-1?[d.substr(0,h),d.substr(h+1)]:[d],y=MT(g)?g:g&&g.split(" "),m=`colors.${p}`,v=m in t.__cssMap?t.__cssMap[m].varRef:p;return y?[v,...Array.isArray(y)?y:[y]].join(" "):v});return`${a}(${f.join(", ")})`}var MT=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),wge=(e,t)=>xge(e,t??{});function Sge(e){return/^var\(--.+\)$/.test(e)}var kge=e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}},zs=e=>t=>`${e}(${t})`,We={filter(e){return e!=="auto"?e:pge},backdropFilter(e){return e!=="auto"?e:gge},ring(e){return mge(We.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?dge():e==="auto-gpu"?hge():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=kge(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const n={left:"right",right:"left"};return t.direction==="rtl"?n[e]:e},degree(e){if(Sge(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:wge,blur:zs("blur"),opacity:zs("opacity"),brightness:zs("brightness"),contrast:zs("contrast"),dropShadow:zs("drop-shadow"),grayscale:zs("grayscale"),hueRotate:e=>zs("hue-rotate")(We.degree(e)),invert:zs("invert"),saturate:zs("saturate"),sepia:zs("sepia"),bgImage(e){return e==null||MT(e)||TT.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:r}=(t=yge[e])!=null?t:{},i={flexDirection:e};return n&&(i[n]=1),r&&(i[r]=1),i}},L={borderWidths:so("borderWidths"),borderStyles:so("borderStyles"),colors:so("colors"),borders:so("borders"),gradients:so("gradients",We.gradient),radii:so("radii",We.px),space:so("space",Ob(We.vh,We.px)),spaceT:so("space",Ob(We.vh,We.px)),degreeT(e){return{property:e,transform:We.degree}},prop(e,t,n){return{property:e,scale:t,...t&&{transform:nP({scale:t,transform:n})}}},propT(e,t){return{property:e,transform:t}},sizes:so("sizes",Ob(We.vh,We.px)),sizesT:so("sizes",Ob(We.vh,We.fraction)),shadows:so("shadows"),logical:fge,blur:so("blur",We.blur)},t2={background:L.colors("background"),backgroundColor:L.colors("backgroundColor"),backgroundImage:L.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:We.bgClip},bgSize:L.prop("backgroundSize"),bgPosition:L.prop("backgroundPosition"),bg:L.colors("background"),bgColor:L.colors("backgroundColor"),bgPos:L.prop("backgroundPosition"),bgRepeat:L.prop("backgroundRepeat"),bgAttachment:L.prop("backgroundAttachment"),bgGradient:L.gradients("backgroundImage"),bgClip:{transform:We.bgClip}};Object.assign(t2,{bgImage:t2.backgroundImage,bgImg:t2.backgroundImage});var rt={border:L.borders("border"),borderWidth:L.borderWidths("borderWidth"),borderStyle:L.borderStyles("borderStyle"),borderColor:L.colors("borderColor"),borderRadius:L.radii("borderRadius"),borderTop:L.borders("borderTop"),borderBlockStart:L.borders("borderBlockStart"),borderTopLeftRadius:L.radii("borderTopLeftRadius"),borderStartStartRadius:L.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:L.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:L.radii("borderTopRightRadius"),borderStartEndRadius:L.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:L.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:L.borders("borderRight"),borderInlineEnd:L.borders("borderInlineEnd"),borderBottom:L.borders("borderBottom"),borderBlockEnd:L.borders("borderBlockEnd"),borderBottomLeftRadius:L.radii("borderBottomLeftRadius"),borderBottomRightRadius:L.radii("borderBottomRightRadius"),borderLeft:L.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:L.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:L.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:L.borders(["borderLeft","borderRight"]),borderInline:L.borders("borderInline"),borderY:L.borders(["borderTop","borderBottom"]),borderBlock:L.borders("borderBlock"),borderTopWidth:L.borderWidths("borderTopWidth"),borderBlockStartWidth:L.borderWidths("borderBlockStartWidth"),borderTopColor:L.colors("borderTopColor"),borderBlockStartColor:L.colors("borderBlockStartColor"),borderTopStyle:L.borderStyles("borderTopStyle"),borderBlockStartStyle:L.borderStyles("borderBlockStartStyle"),borderBottomWidth:L.borderWidths("borderBottomWidth"),borderBlockEndWidth:L.borderWidths("borderBlockEndWidth"),borderBottomColor:L.colors("borderBottomColor"),borderBlockEndColor:L.colors("borderBlockEndColor"),borderBottomStyle:L.borderStyles("borderBottomStyle"),borderBlockEndStyle:L.borderStyles("borderBlockEndStyle"),borderLeftWidth:L.borderWidths("borderLeftWidth"),borderInlineStartWidth:L.borderWidths("borderInlineStartWidth"),borderLeftColor:L.colors("borderLeftColor"),borderInlineStartColor:L.colors("borderInlineStartColor"),borderLeftStyle:L.borderStyles("borderLeftStyle"),borderInlineStartStyle:L.borderStyles("borderInlineStartStyle"),borderRightWidth:L.borderWidths("borderRightWidth"),borderInlineEndWidth:L.borderWidths("borderInlineEndWidth"),borderRightColor:L.colors("borderRightColor"),borderInlineEndColor:L.colors("borderInlineEndColor"),borderRightStyle:L.borderStyles("borderRightStyle"),borderInlineEndStyle:L.borderStyles("borderInlineEndStyle"),borderTopRadius:L.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:L.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:L.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:L.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(rt,{rounded:rt.borderRadius,roundedTop:rt.borderTopRadius,roundedTopLeft:rt.borderTopLeftRadius,roundedTopRight:rt.borderTopRightRadius,roundedTopStart:rt.borderStartStartRadius,roundedTopEnd:rt.borderStartEndRadius,roundedBottom:rt.borderBottomRadius,roundedBottomLeft:rt.borderBottomLeftRadius,roundedBottomRight:rt.borderBottomRightRadius,roundedBottomStart:rt.borderEndStartRadius,roundedBottomEnd:rt.borderEndEndRadius,roundedLeft:rt.borderLeftRadius,roundedRight:rt.borderRightRadius,roundedStart:rt.borderInlineStartRadius,roundedEnd:rt.borderInlineEndRadius,borderStart:rt.borderInlineStart,borderEnd:rt.borderInlineEnd,borderTopStartRadius:rt.borderStartStartRadius,borderTopEndRadius:rt.borderStartEndRadius,borderBottomStartRadius:rt.borderEndStartRadius,borderBottomEndRadius:rt.borderEndEndRadius,borderStartRadius:rt.borderInlineStartRadius,borderEndRadius:rt.borderInlineEndRadius,borderStartWidth:rt.borderInlineStartWidth,borderEndWidth:rt.borderInlineEndWidth,borderStartColor:rt.borderInlineStartColor,borderEndColor:rt.borderInlineEndColor,borderStartStyle:rt.borderInlineStartStyle,borderEndStyle:rt.borderInlineEndStyle});var Cge={color:L.colors("color"),textColor:L.colors("color"),fill:L.colors("fill"),stroke:L.colors("stroke")},FT={boxShadow:L.shadows("boxShadow"),mixBlendMode:!0,blendMode:L.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:L.prop("backgroundBlendMode"),opacity:!0};Object.assign(FT,{shadow:FT.boxShadow});var _ge={filter:{transform:We.filter},blur:L.blur("--chakra-blur"),brightness:L.propT("--chakra-brightness",We.brightness),contrast:L.propT("--chakra-contrast",We.contrast),hueRotate:L.propT("--chakra-hue-rotate",We.hueRotate),invert:L.propT("--chakra-invert",We.invert),saturate:L.propT("--chakra-saturate",We.saturate),dropShadow:L.propT("--chakra-drop-shadow",We.dropShadow),backdropFilter:{transform:We.backdropFilter},backdropBlur:L.blur("--chakra-backdrop-blur"),backdropBrightness:L.propT("--chakra-backdrop-brightness",We.brightness),backdropContrast:L.propT("--chakra-backdrop-contrast",We.contrast),backdropHueRotate:L.propT("--chakra-backdrop-hue-rotate",We.hueRotate),backdropInvert:L.propT("--chakra-backdrop-invert",We.invert),backdropSaturate:L.propT("--chakra-backdrop-saturate",We.saturate)},gw={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:We.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:L.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:L.space("gap"),rowGap:L.space("rowGap"),columnGap:L.space("columnGap")};Object.assign(gw,{flexDir:gw.flexDirection});var qG={gridGap:L.space("gridGap"),gridColumnGap:L.space("gridColumnGap"),gridRowGap:L.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},Ege={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:We.outline},outlineOffset:!0,outlineColor:L.colors("outlineColor")},co={width:L.sizesT("width"),inlineSize:L.sizesT("inlineSize"),height:L.sizes("height"),blockSize:L.sizes("blockSize"),boxSize:L.sizes(["width","height"]),minWidth:L.sizes("minWidth"),minInlineSize:L.sizes("minInlineSize"),minHeight:L.sizes("minHeight"),minBlockSize:L.sizes("minBlockSize"),maxWidth:L.sizes("maxWidth"),maxInlineSize:L.sizes("maxInlineSize"),maxHeight:L.sizes("maxHeight"),maxBlockSize:L.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (min-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r.minW)!=null?i:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (max-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r._minW)!=null?i:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:L.propT("float",We.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(co,{w:co.width,h:co.height,minW:co.minWidth,maxW:co.maxWidth,minH:co.minHeight,maxH:co.maxHeight,overscroll:co.overscrollBehavior,overscrollX:co.overscrollBehaviorX,overscrollY:co.overscrollBehaviorY});var $ge={listStyleType:!0,listStylePosition:!0,listStylePos:L.prop("listStylePosition"),listStyleImage:!0,listStyleImg:L.prop("listStyleImage")};function Age(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var Tge=e=>{const t=new WeakMap;return(r,i,o,s)=>{if(typeof r>"u")return e(r,i,o);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,o,s);return a.set(i,l),l}},Mge=Tge(Age),Fge={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Pge={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},h$=(e,t,n)=>{const r={},i=Mge(e,t,{});for(const o in i)o in n&&n[o]!=null||(r[o]=i[o]);return r},Rge={srOnly:{transform(e){return e===!0?Fge:e==="focusable"?Pge:{}}},layerStyle:{processResult:!0,transform:(e,t,n)=>h$(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>h$(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>h$(t,e,n)}},sy={position:!0,pos:L.prop("position"),zIndex:L.prop("zIndex","zIndices"),inset:L.spaceT("inset"),insetX:L.spaceT(["left","right"]),insetInline:L.spaceT("insetInline"),insetY:L.spaceT(["top","bottom"]),insetBlock:L.spaceT("insetBlock"),top:L.spaceT("top"),insetBlockStart:L.spaceT("insetBlockStart"),bottom:L.spaceT("bottom"),insetBlockEnd:L.spaceT("insetBlockEnd"),left:L.spaceT("left"),insetInlineStart:L.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:L.spaceT("right"),insetInlineEnd:L.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(sy,{insetStart:sy.insetInlineStart,insetEnd:sy.insetInlineEnd});var Dge={ring:{transform:We.ring},ringColor:L.colors("--chakra-ring-color"),ringOffset:L.prop("--chakra-ring-offset-width"),ringOffsetColor:L.colors("--chakra-ring-offset-color"),ringInset:L.prop("--chakra-ring-inset")},Tt={margin:L.spaceT("margin"),marginTop:L.spaceT("marginTop"),marginBlockStart:L.spaceT("marginBlockStart"),marginRight:L.spaceT("marginRight"),marginInlineEnd:L.spaceT("marginInlineEnd"),marginBottom:L.spaceT("marginBottom"),marginBlockEnd:L.spaceT("marginBlockEnd"),marginLeft:L.spaceT("marginLeft"),marginInlineStart:L.spaceT("marginInlineStart"),marginX:L.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:L.spaceT("marginInline"),marginY:L.spaceT(["marginTop","marginBottom"]),marginBlock:L.spaceT("marginBlock"),padding:L.space("padding"),paddingTop:L.space("paddingTop"),paddingBlockStart:L.space("paddingBlockStart"),paddingRight:L.space("paddingRight"),paddingBottom:L.space("paddingBottom"),paddingBlockEnd:L.space("paddingBlockEnd"),paddingLeft:L.space("paddingLeft"),paddingInlineStart:L.space("paddingInlineStart"),paddingInlineEnd:L.space("paddingInlineEnd"),paddingX:L.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:L.space("paddingInline"),paddingY:L.space(["paddingTop","paddingBottom"]),paddingBlock:L.space("paddingBlock")};Object.assign(Tt,{m:Tt.margin,mt:Tt.marginTop,mr:Tt.marginRight,me:Tt.marginInlineEnd,marginEnd:Tt.marginInlineEnd,mb:Tt.marginBottom,ml:Tt.marginLeft,ms:Tt.marginInlineStart,marginStart:Tt.marginInlineStart,mx:Tt.marginX,my:Tt.marginY,p:Tt.padding,pt:Tt.paddingTop,py:Tt.paddingY,px:Tt.paddingX,pb:Tt.paddingBottom,pl:Tt.paddingLeft,ps:Tt.paddingInlineStart,paddingStart:Tt.paddingInlineStart,pr:Tt.paddingRight,pe:Tt.paddingInlineEnd,paddingEnd:Tt.paddingInlineEnd});var Oge={textDecorationColor:L.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:L.shadows("textShadow")},Nge={clipPath:!0,transform:L.propT("transform",We.transform),transformOrigin:!0,translateX:L.spaceT("--chakra-translate-x"),translateY:L.spaceT("--chakra-translate-y"),skewX:L.degreeT("--chakra-skew-x"),skewY:L.degreeT("--chakra-skew-y"),scaleX:L.prop("--chakra-scale-x"),scaleY:L.prop("--chakra-scale-y"),scale:L.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:L.degreeT("--chakra-rotate")},Ige={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:L.prop("transitionDuration","transition.duration"),transitionProperty:L.prop("transitionProperty","transition.property"),transitionTimingFunction:L.prop("transitionTimingFunction","transition.easing")},Lge={fontFamily:L.prop("fontFamily","fonts"),fontSize:L.prop("fontSize","fontSizes",We.px),fontWeight:L.prop("fontWeight","fontWeights"),lineHeight:L.prop("lineHeight","lineHeights"),letterSpacing:L.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},zge={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:L.spaceT("scrollMargin"),scrollMarginTop:L.spaceT("scrollMarginTop"),scrollMarginBottom:L.spaceT("scrollMarginBottom"),scrollMarginLeft:L.spaceT("scrollMarginLeft"),scrollMarginRight:L.spaceT("scrollMarginRight"),scrollMarginX:L.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:L.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:L.spaceT("scrollPadding"),scrollPaddingTop:L.spaceT("scrollPaddingTop"),scrollPaddingBottom:L.spaceT("scrollPaddingBottom"),scrollPaddingLeft:L.spaceT("scrollPaddingLeft"),scrollPaddingRight:L.spaceT("scrollPaddingRight"),scrollPaddingX:L.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:L.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function GG(e){return gi(e)&&e.reference?e.reference:String(e)}var eC=(e,...t)=>t.map(GG).join(` ${e} `).replace(/calc/g,""),pI=(...e)=>`calc(${eC("+",...e)})`,gI=(...e)=>`calc(${eC("-",...e)})`,PT=(...e)=>`calc(${eC("*",...e)})`,mI=(...e)=>`calc(${eC("/",...e)})`,yI=e=>{const t=GG(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:PT(t,-1)},pf=Object.assign(e=>({add:(...t)=>pf(pI(e,...t)),subtract:(...t)=>pf(gI(e,...t)),multiply:(...t)=>pf(PT(e,...t)),divide:(...t)=>pf(mI(e,...t)),negate:()=>pf(yI(e)),toString:()=>e.toString()}),{add:pI,subtract:gI,multiply:PT,divide:mI,negate:yI});function jge(e,t="-"){return e.replace(/\s+/g,t)}function Bge(e){const t=jge(e.toString());return Vge(Uge(t))}function Uge(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function Vge(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function Wge(e,t=""){return[t,e].filter(Boolean).join("-")}function Hge(e,t){return`var(${e}${t?`, ${t}`:""})`}function qge(e,t=""){return Bge(`--${Wge(e,t)}`)}function _e(e,t,n){const r=qge(e,n);return{variable:r,reference:Hge(r,t)}}function Gge(e,t){const n={};for(const r of t){if(Array.isArray(r)){const[i,o]=r;n[i]=_e(`${e}-${i}`,o);continue}n[r]=_e(`${e}-${r}`)}return n}function Yge(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function Xge(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}function RT(e){if(e==null)return e;const{unitless:t}=Xge(e);return t||typeof e=="number"?`${e}px`:e}var YG=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,rP=e=>Object.fromEntries(Object.entries(e).sort(YG));function vI(e){const t=rP(e);return Object.assign(Object.values(t),t)}function Kge(e){const t=Object.keys(rP(e));return new Set(t)}function bI(e){var t;if(!e)return e;e=(t=RT(e))!=null?t:e;const n=-.02;return typeof e=="number"?`${e+n}`:e.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function v0(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${RT(e)})`),t&&n.push("and",`(max-width: ${RT(t)})`),n.join(" ")}function Qge(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const n=vI(e),r=Object.entries(e).sort(YG).map(([s,a],l,u)=>{var c;let[,f]=(c=u[l+1])!=null?c:[];return f=parseFloat(f)>0?bI(f):void 0,{_minW:bI(a),breakpoint:s,minW:a,maxW:f,maxWQuery:v0(null,f),minWQuery:v0(a),minMaxQuery:v0(a,f)}}),i=Kge(e),o=Array.from(i.values());return{keys:i,normalized:n,isResponsive(s){const a=Object.keys(s);return a.length>0&&a.every(l=>i.has(l))},asObject:rP(e),asArray:vI(e),details:r,get(s){return r.find(a=>a.breakpoint===s)},media:[null,...n.map(s=>v0(s)).slice(1)],toArrayValue(s){if(!gi(s))throw new Error("toArrayValue: value must be an object");const a=o.map(l=>{var u;return(u=s[l])!=null?u:null});for(;Yge(a)===null;)a.pop();return a},toObjectValue(s){if(!Array.isArray(s))throw new Error("toObjectValue: value must be an array");return s.reduce((a,l,u)=>{const c=o[u];return c!=null&&l!=null&&(a[c]=l),a},{})}}}var Vn={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},eu=e=>XG(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Wa=e=>XG(t=>e(t,"~ &"),"[data-peer]",".peer"),XG=(e,...t)=>t.map(e).join(", "),tC={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:eu(Vn.hover),_peerHover:Wa(Vn.hover),_groupFocus:eu(Vn.focus),_peerFocus:Wa(Vn.focus),_groupFocusVisible:eu(Vn.focusVisible),_peerFocusVisible:Wa(Vn.focusVisible),_groupActive:eu(Vn.active),_peerActive:Wa(Vn.active),_groupDisabled:eu(Vn.disabled),_peerDisabled:Wa(Vn.disabled),_groupInvalid:eu(Vn.invalid),_peerInvalid:Wa(Vn.invalid),_groupChecked:eu(Vn.checked),_peerChecked:Wa(Vn.checked),_groupFocusWithin:eu(Vn.focusWithin),_peerFocusWithin:Wa(Vn.focusWithin),_peerPlaceholderShown:Wa(Vn.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},KG=Object.keys(tC);function xI(e,t){return _e(String(e).replace(/\./g,"-"),void 0,t)}function Zge(e,t){let n={};const r={};for(const[i,o]of Object.entries(e)){const{isSemantic:s,value:a}=o,{variable:l,reference:u}=xI(i,t==null?void 0:t.cssVarPrefix);if(!s){if(i.startsWith("space")){const d=i.split("."),[h,...p]=d,g=`${h}.-${p.join(".")}`,y=pf.negate(a),m=pf.negate(u);r[g]={value:y,var:l,varRef:m}}n[l]=a,r[i]={value:a,var:l,varRef:u};continue}const c=d=>{const p=[String(i).split(".")[0],d].join(".");if(!e[p])return d;const{reference:y}=xI(p,t==null?void 0:t.cssVarPrefix);return y},f=gi(a)?a:{default:a};n=So(n,Object.entries(f).reduce((d,[h,p])=>{var g,y;if(!p)return d;const m=c(`${p}`);if(h==="default")return d[l]=m,d;const v=(y=(g=tC)==null?void 0:g[h])!=null?y:h;return d[v]={[l]:m},d},{})),r[i]={value:u,var:l,varRef:u}}return{cssVars:n,cssMap:r}}function Jge(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}function eme(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function tme(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function wI(e,t,n={}){const{stop:r,getKey:i}=n;function o(s,a=[]){var l;if(tme(s)||Array.isArray(s)){const u={};for(const[c,f]of Object.entries(s)){const d=(l=i==null?void 0:i(c))!=null?l:c,h=[...a,d];if(r!=null&&r(s,h))return t(s,a);u[d]=o(f,h)}return u}return t(s,a)}return o(e)}var nme=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function rme(e){return eme(e,nme)}function ime(e){return e.semanticTokens}function ome(e){const{__cssMap:t,__cssVars:n,__breakpoints:r,...i}=e;return i}var sme=e=>KG.includes(e)||e==="default";function ame({tokens:e,semanticTokens:t}){const n={};return wI(e,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!1,value:r})}),wI(t,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!0,value:r})},{stop:r=>Object.keys(r).every(sme)}),n}function lme(e){var t;const n=ome(e),r=rme(n),i=ime(n),o=ame({tokens:r,semanticTokens:i}),s=(t=n.config)==null?void 0:t.cssVarPrefix,{cssMap:a,cssVars:l}=Zge(o,{cssVarPrefix:s});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...l},__cssMap:a,__breakpoints:Qge(n.breakpoints)}),n}var iP=So({},t2,rt,Cge,gw,co,_ge,Dge,Ege,qG,Rge,sy,FT,Tt,zge,Lge,Oge,Nge,$ge,Ige),ume=Object.assign({},Tt,co,gw,qG,sy),cme=Object.keys(ume),fme=[...Object.keys(iP),...KG],dme={...iP,...tC},hme=e=>e in dme,pme=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:r,media:i}=t.__breakpoints,o={};for(const s in e){let a=aa(e[s],t);if(a==null)continue;if(a=gi(a)&&n(a)?r(a):a,!Array.isArray(a)){o[s]=a;continue}const l=a.slice(0,i.length).length;for(let u=0;u<l;u+=1){const c=i==null?void 0:i[u];if(!c){o[s]=a[u];continue}o[c]=o[c]||{},a[u]!=null&&(o[c][s]=a[u])}}return o};function gme(e){const t=[];let n="",r=!1;for(let i=0;i<e.length;i++){const o=e[i];o==="("?(r=!0,n+=o):o===")"?(r=!1,n+=o):o===","&&!r?(t.push(n),n=""):n+=o}return n=n.trim(),n&&t.push(n),t}function mme(e){return/^var\(--.+\)$/.test(e)}var yme=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!mme(t),vme=(e,t)=>{var n,r;if(t==null)return t;const i=l=>{var u,c;return(c=(u=e.__cssMap)==null?void 0:u[l])==null?void 0:c.varRef},o=l=>{var u;return(u=i(l))!=null?u:l},[s,a]=gme(t);return t=(r=(n=i(s))!=null?n:o(a))!=null?r:o(t),t};function bme(e){const{configs:t={},pseudos:n={},theme:r}=e,i=(o,s=!1)=>{var a,l,u;const c=aa(o,r),f=pme(c)(r);let d={};for(let h in f){const p=f[h];let g=aa(p,r);h in n&&(h=n[h]),yme(h,g)&&(g=vme(r,g));let y=t[h];if(y===!0&&(y={property:h}),gi(g)){d[h]=(a=d[h])!=null?a:{},d[h]=So({},d[h],i(g,!0));continue}let m=(u=(l=y==null?void 0:y.transform)==null?void 0:l.call(y,g,r,c))!=null?u:g;m=y!=null&&y.processResult?i(m,!0):m;const v=aa(y==null?void 0:y.property,r);if(!s&&(y!=null&&y.static)){const b=aa(y.static,r);d=So({},d,b)}if(v&&Array.isArray(v)){for(const b of v)d[b]=m;continue}if(v){v==="&"&&gi(m)?d=So({},d,m):d[v]=m;continue}if(gi(m)){d=So({},d,m);continue}d[h]=m}return d};return i}var QG=e=>t=>bme({theme:t,pseudos:tC,configs:iP})(e);function $t(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function xme(e,t){if(Array.isArray(e))return e;if(gi(e))return t(e);if(e!=null)return[e]}function wme(e,t){for(let n=t+1;n<e.length;n++)if(e[n]!=null)return n;return-1}function Sme(e){const t=e.__breakpoints;return function(r,i,o,s){var a,l;if(!t)return;const u={},c=xme(o,t.toArrayValue);if(!c)return u;const f=c.length,d=f===1,h=!!r.parts;for(let p=0;p<f;p++){const g=t.details[p],y=t.details[wme(c,p)],m=v0(g.minW,y==null?void 0:y._minW),v=aa((a=r[i])==null?void 0:a[c[p]],s);if(v){if(h){(l=r.parts)==null||l.forEach(b=>{So(u,{[b]:d?v[b]:{[m]:v[b]}})});continue}if(!h){d?So(u,v):u[m]=v;continue}u[m]=v}}return u}}function kme(e){return t=>{var n;const{variant:r,size:i,theme:o}=t,s=Sme(o);return So({},aa((n=e.baseStyle)!=null?n:{},t),s(e,"sizes",i,t),s(e,"variants",r,t))}}function ir(e){return Jge(e,["styleConfig","size","variant","colorScheme"])}var Cme=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function _me(e){return gi(e)?Cme.every(t=>Object.prototype.hasOwnProperty.call(e,t)):!1}var Eme={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},$me={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},Ame={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},Tme={property:Eme,easing:$me,duration:Ame},Mme=Tme,Fme={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},Pme=Fme,Rme={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},Dme=Rme,Ome={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},Nme=Ome,Ime={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},Lme=Ime,zme={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},jme=zme,Bme={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},Ume=Bme,Vme={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},Wme=Vme,Hme={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},ZG=Hme,JG={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},qme={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},Gme={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},Yme={...JG,...qme,container:Gme},eY=Yme,Xme={breakpoints:Nme,zIndices:Pme,radii:jme,blur:Wme,colors:Lme,...ZG,sizes:eY,shadows:Ume,space:JG,borders:Dme,transition:Mme},{defineMultiStyleConfig:Kme,definePartsStyle:b0}=$t(["stepper","step","title","description","indicator","separator","icon","number"]),tl=_e("stepper-indicator-size"),Uh=_e("stepper-icon-size"),Vh=_e("stepper-title-font-size"),x0=_e("stepper-description-font-size"),Dm=_e("stepper-accent-color"),Qme=b0(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[Dm.variable]:`colors.${e}.500`,_dark:{[Dm.variable]:`colors.${e}.200`}},title:{fontSize:Vh.reference,fontWeight:"medium"},description:{fontSize:x0.reference,color:"chakra-subtle-text"},number:{fontSize:Vh.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Uh.reference,height:Uh.reference},indicator:{flexShrink:0,borderRadius:"full",width:tl.reference,height:tl.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:Dm.reference},"&[data-status=complete]":{bg:Dm.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:Dm.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${tl.reference} - 8px)`,top:`calc(${tl.reference} + 4px)`,insetStart:`calc(${tl.reference} / 2 - 1px)`}}})),Zme=Kme({baseStyle:Qme,sizes:{xs:b0({stepper:{[tl.variable]:"sizes.4",[Uh.variable]:"sizes.3",[Vh.variable]:"fontSizes.xs",[x0.variable]:"fontSizes.xs"}}),sm:b0({stepper:{[tl.variable]:"sizes.6",[Uh.variable]:"sizes.4",[Vh.variable]:"fontSizes.sm",[x0.variable]:"fontSizes.xs"}}),md:b0({stepper:{[tl.variable]:"sizes.8",[Uh.variable]:"sizes.5",[Vh.variable]:"fontSizes.md",[x0.variable]:"fontSizes.sm"}}),lg:b0({stepper:{[tl.variable]:"sizes.10",[Uh.variable]:"sizes.6",[Vh.variable]:"fontSizes.lg",[x0.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function lt(e,t={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...c){r();for(const f of c)t[f]=l(f);return lt(e,t)}function o(...c){for(const f of c)f in t||(t[f]=l(f));return lt(e,t)}function s(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.selector]))}function a(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.className]))}function l(c){const h=`chakra-${(["container","root"].includes(c??"")?[e]:[e,c]).filter(Boolean).join("__")}`;return{className:h,selector:`.${h}`,toString:()=>c}}return{parts:i,toPart:l,extend:o,selectors:s,classnames:a,get keys(){return Object.keys(t)},__type:{}}}var Jme=lt("accordion").parts("root","container","button","panel").extend("icon"),e0e=lt("alert").parts("title","description","container").extend("icon","spinner"),t0e=lt("avatar").parts("label","badge","container").extend("excessLabel","group"),n0e=lt("breadcrumb").parts("link","item","container").extend("separator");lt("button").parts();var r0e=lt("checkbox").parts("control","icon","container").extend("label");lt("progress").parts("track","filledTrack").extend("label");var i0e=lt("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),o0e=lt("editable").parts("preview","input","textarea"),s0e=lt("form").parts("container","requiredIndicator","helperText"),a0e=lt("formError").parts("text","icon"),l0e=lt("input").parts("addon","field","element","group"),u0e=lt("list").parts("container","item","icon"),c0e=lt("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),f0e=lt("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),d0e=lt("numberinput").parts("root","field","stepperGroup","stepper");lt("pininput").parts("field");var h0e=lt("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),p0e=lt("progress").parts("label","filledTrack","track"),g0e=lt("radio").parts("container","control","label"),m0e=lt("select").parts("field","icon"),y0e=lt("slider").parts("container","track","thumb","filledTrack","mark"),v0e=lt("stat").parts("container","label","helpText","number","icon"),b0e=lt("switch").parts("container","track","thumb","label"),x0e=lt("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),w0e=lt("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),S0e=lt("tag").parts("container","label","closeButton"),k0e=lt("card").parts("container","header","body","footer");lt("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function Ef(e,t,n){return Math.min(Math.max(e,n),t)}class C0e extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var w0=C0e;function oP(e){if(typeof e!="string")throw new w0(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=P0e.test(e)?$0e(e):e;const n=A0e.exec(t);if(n){const s=Array.from(n).slice(1);return[...s.slice(0,3).map(a=>parseInt(t1(a,2),16)),parseInt(t1(s[3]||"f",2),16)/255]}const r=T0e.exec(t);if(r){const s=Array.from(r).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,16)),parseInt(s[3]||"ff",16)/255]}const i=M0e.exec(t);if(i){const s=Array.from(i).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,10)),parseFloat(s[3]||"1")]}const o=F0e.exec(t);if(o){const[s,a,l,u]=Array.from(o).slice(1).map(parseFloat);if(Ef(0,100,a)!==a)throw new w0(e);if(Ef(0,100,l)!==l)throw new w0(e);return[...R0e(s,a,l),Number.isNaN(u)?1:u]}throw new w0(e)}function _0e(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const SI=e=>parseInt(e.replace(/_/g,""),36),E0e="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=SI(t.substring(0,3)),r=SI(t.substring(3)).toString(16);let i="";for(let o=0;o<6-r.length;o++)i+="0";return e[n]=`${i}${r}`,e},{});function $0e(e){const t=e.toLowerCase().trim(),n=E0e[_0e(t)];if(!n)throw new w0(e);return`#${n}`}const t1=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),A0e=new RegExp(`^#${t1("([a-f0-9])",3)}([a-f0-9])?$`,"i"),T0e=new RegExp(`^#${t1("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),M0e=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${t1(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),F0e=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,P0e=/^[a-z]+$/i,kI=e=>Math.round(e*255),R0e=(e,t,n)=>{let r=n/100;if(t===0)return[r,r,r].map(kI);const i=(e%360+360)%360/60,o=(1-Math.abs(2*r-1))*(t/100),s=o*(1-Math.abs(i%2-1));let a=0,l=0,u=0;i>=0&&i<1?(a=o,l=s):i>=1&&i<2?(a=s,l=o):i>=2&&i<3?(l=o,u=s):i>=3&&i<4?(l=s,u=o):i>=4&&i<5?(a=s,u=o):i>=5&&i<6&&(a=o,u=s);const c=r-o/2,f=a+c,d=l+c,h=u+c;return[f,d,h].map(kI)};function D0e(e,t,n,r){return`rgba(${Ef(0,255,e).toFixed()}, ${Ef(0,255,t).toFixed()}, ${Ef(0,255,n).toFixed()}, ${parseFloat(Ef(0,1,r).toFixed(3))})`}function O0e(e,t){const[n,r,i,o]=oP(e);return D0e(n,r,i,o-t)}function N0e(e){const[t,n,r,i]=oP(e);let o=s=>{const a=Ef(0,255,s).toString(16);return a.length===1?`0${a}`:a};return`#${o(t)}${o(n)}${o(r)}${i<1?o(Math.round(i*255)):""}`}function I0e(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var L0e=e=>Object.keys(e).length===0,Vr=(e,t,n)=>{const r=I0e(e,`colors.${t}`,t);try{return N0e(r),r}catch{return n??"#000000"}},z0e=e=>{const[t,n,r]=oP(e);return(t*299+n*587+r*114)/1e3},j0e=e=>t=>{const n=Vr(t,e);return z0e(n)<128?"dark":"light"},B0e=e=>t=>j0e(e)(t)==="dark",Xp=(e,t)=>n=>{const r=Vr(n,e);return O0e(r,1-t)};function CI(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var U0e=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function V0e(e){const t=U0e();return!e||L0e(e)?t:e.string&&e.colors?H0e(e.string,e.colors):e.string&&!e.colors?W0e(e.string):e.colors&&!e.string?q0e(e.colors):t}function W0e(e){let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t=t&t;let n="#";for(let r=0;r<3;r+=1){const i=t>>r*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function H0e(e,t){let n=0;if(e.length===0)return t[0];for(let r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%t.length+t.length)%t.length,t[n]}function q0e(e){return e[Math.floor(Math.random()*e.length)]}function Ce(e,t){return n=>n.colorMode==="dark"?t:e}function sP(e){const{orientation:t,vertical:n,horizontal:r}=e;return t?t==="vertical"?n:r:{}}function tY(e){return gi(e)&&e.reference?e.reference:String(e)}var nC=(e,...t)=>t.map(tY).join(` ${e} `).replace(/calc/g,""),_I=(...e)=>`calc(${nC("+",...e)})`,EI=(...e)=>`calc(${nC("-",...e)})`,DT=(...e)=>`calc(${nC("*",...e)})`,$I=(...e)=>`calc(${nC("/",...e)})`,AI=e=>{const t=tY(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:DT(t,-1)},nl=Object.assign(e=>({add:(...t)=>nl(_I(e,...t)),subtract:(...t)=>nl(EI(e,...t)),multiply:(...t)=>nl(DT(e,...t)),divide:(...t)=>nl($I(e,...t)),negate:()=>nl(AI(e)),toString:()=>e.toString()}),{add:_I,subtract:EI,multiply:DT,divide:$I,negate:AI});function G0e(e){return!Number.isInteger(parseFloat(e.toString()))}function Y0e(e,t="-"){return e.replace(/\s+/g,t)}function nY(e){const t=Y0e(e.toString());return t.includes("\\.")?e:G0e(e)?t.replace(".","\\."):e}function X0e(e,t=""){return[t,nY(e)].filter(Boolean).join("-")}function K0e(e,t){return`var(${nY(e)}${t?`, ${t}`:""})`}function Q0e(e,t=""){return`--${X0e(e,t)}`}function Cn(e,t){const n=Q0e(e,void 0);return{variable:n,reference:K0e(n,Z0e(void 0))}}function Z0e(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:J0e,definePartsStyle:n2}=$t(b0e.keys),ay=Cn("switch-track-width"),Bf=Cn("switch-track-height"),p$=Cn("switch-track-diff"),eye=nl.subtract(ay,Bf),OT=Cn("switch-thumb-x"),Om=Cn("switch-bg"),tye=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[ay.reference],height:[Bf.reference],transitionProperty:"common",transitionDuration:"fast",[Om.variable]:"colors.gray.300",_dark:{[Om.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[Om.variable]:`colors.${t}.500`,_dark:{[Om.variable]:`colors.${t}.200`}},bg:Om.reference}},nye={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Bf.reference],height:[Bf.reference],_checked:{transform:`translateX(${OT.reference})`}},rye=n2(e=>({container:{[p$.variable]:eye,[OT.variable]:p$.reference,_rtl:{[OT.variable]:nl(p$).negate().toString()}},track:tye(e),thumb:nye})),iye={sm:n2({container:{[ay.variable]:"1.375rem",[Bf.variable]:"sizes.3"}}),md:n2({container:{[ay.variable]:"1.875rem",[Bf.variable]:"sizes.4"}}),lg:n2({container:{[ay.variable]:"2.875rem",[Bf.variable]:"sizes.6"}})},oye=J0e({baseStyle:rye,sizes:iye,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:sye,definePartsStyle:dp}=$t(x0e.keys),aye=dp({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),mw={"&[data-is-numeric=true]":{textAlign:"end"}},lye=dp(e=>{const{colorScheme:t}=e;return{th:{color:Ce("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Ce(`${t}.100`,`${t}.700`)(e),...mw},td:{borderBottom:"1px",borderColor:Ce(`${t}.100`,`${t}.700`)(e),...mw},caption:{color:Ce("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),uye=dp(e=>{const{colorScheme:t}=e;return{th:{color:Ce("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Ce(`${t}.100`,`${t}.700`)(e),...mw},td:{borderBottom:"1px",borderColor:Ce(`${t}.100`,`${t}.700`)(e),...mw},caption:{color:Ce("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Ce(`${t}.100`,`${t}.700`)(e)},td:{background:Ce(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),cye={simple:lye,striped:uye,unstyled:{}},fye={sm:dp({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:dp({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:dp({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},dye=sye({baseStyle:aye,variants:cye,sizes:fye,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),li=_e("tabs-color"),ss=_e("tabs-bg"),Nb=_e("tabs-border-color"),{defineMultiStyleConfig:hye,definePartsStyle:pa}=$t(w0e.keys),pye=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},gye=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},mye=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:n==="vertical"?"column":"row"}},yye={p:4},vye=pa(e=>({root:pye(e),tab:gye(e),tablist:mye(e),tabpanel:yye})),bye={sm:pa({tab:{py:1,px:4,fontSize:"sm"}}),md:pa({tab:{fontSize:"md",py:2,px:4}}),lg:pa({tab:{fontSize:"lg",py:3,px:4}})},xye=pa(e=>{const{colorScheme:t,orientation:n}=e,r=n==="vertical",i=r?"borderStart":"borderBottom",o=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[li.variable]:`colors.${t}.600`,_dark:{[li.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[ss.variable]:"colors.gray.200",_dark:{[ss.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:li.reference,bg:ss.reference}}}),wye=pa(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[Nb.variable]:"transparent",_selected:{[li.variable]:`colors.${t}.600`,[Nb.variable]:"colors.white",_dark:{[li.variable]:`colors.${t}.300`,[Nb.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:Nb.reference},color:li.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Sye=pa(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[ss.variable]:"colors.gray.50",_dark:{[ss.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[ss.variable]:"colors.white",[li.variable]:`colors.${t}.600`,_dark:{[ss.variable]:"colors.gray.800",[li.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:li.reference,bg:ss.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),kye=pa(e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Vr(n,`${t}.700`),bg:Vr(n,`${t}.100`)}}}}),Cye=pa(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[li.variable]:"colors.gray.600",_dark:{[li.variable]:"inherit"},_selected:{[li.variable]:"colors.white",[ss.variable]:`colors.${t}.600`,_dark:{[li.variable]:"colors.gray.800",[ss.variable]:`colors.${t}.300`}},color:li.reference,bg:ss.reference}}}),_ye=pa({}),Eye={line:xye,enclosed:wye,"enclosed-colored":Sye,"soft-rounded":kye,"solid-rounded":Cye,unstyled:_ye},$ye=hye({baseStyle:vye,sizes:bye,variants:Eye,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),an=Gge("badge",["bg","color","shadow"]),Aye={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:an.bg.reference,color:an.color.reference,boxShadow:an.shadow.reference},Tye=e=>{const{colorScheme:t,theme:n}=e,r=Xp(`${t}.500`,.6)(n);return{[an.bg.variable]:`colors.${t}.500`,[an.color.variable]:"colors.white",_dark:{[an.bg.variable]:r,[an.color.variable]:"colors.whiteAlpha.800"}}},Mye=e=>{const{colorScheme:t,theme:n}=e,r=Xp(`${t}.200`,.16)(n);return{[an.bg.variable]:`colors.${t}.100`,[an.color.variable]:`colors.${t}.800`,_dark:{[an.bg.variable]:r,[an.color.variable]:`colors.${t}.200`}}},Fye=e=>{const{colorScheme:t,theme:n}=e,r=Xp(`${t}.200`,.8)(n);return{[an.color.variable]:`colors.${t}.500`,_dark:{[an.color.variable]:r},[an.shadow.variable]:`inset 0 0 0px 1px ${an.color.reference}`}},Pye={solid:Tye,subtle:Mye,outline:Fye},ly={baseStyle:Aye,variants:Pye,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:Rye,definePartsStyle:Uf}=$t(S0e.keys),TI=_e("tag-bg"),MI=_e("tag-color"),g$=_e("tag-shadow"),r2=_e("tag-min-height"),i2=_e("tag-min-width"),o2=_e("tag-font-size"),s2=_e("tag-padding-inline"),Dye={fontWeight:"medium",lineHeight:1.2,outline:0,[MI.variable]:an.color.reference,[TI.variable]:an.bg.reference,[g$.variable]:an.shadow.reference,color:MI.reference,bg:TI.reference,boxShadow:g$.reference,borderRadius:"md",minH:r2.reference,minW:i2.reference,fontSize:o2.reference,px:s2.reference,_focusVisible:{[g$.variable]:"shadows.outline"}},Oye={lineHeight:1.2,overflow:"visible"},Nye={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},Iye=Uf({container:Dye,label:Oye,closeButton:Nye}),Lye={sm:Uf({container:{[r2.variable]:"sizes.5",[i2.variable]:"sizes.5",[o2.variable]:"fontSizes.xs",[s2.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:Uf({container:{[r2.variable]:"sizes.6",[i2.variable]:"sizes.6",[o2.variable]:"fontSizes.sm",[s2.variable]:"space.2"}}),lg:Uf({container:{[r2.variable]:"sizes.8",[i2.variable]:"sizes.8",[o2.variable]:"fontSizes.md",[s2.variable]:"space.3"}})},zye={subtle:Uf(e=>{var t;return{container:(t=ly.variants)==null?void 0:t.subtle(e)}}),solid:Uf(e=>{var t;return{container:(t=ly.variants)==null?void 0:t.solid(e)}}),outline:Uf(e=>{var t;return{container:(t=ly.variants)==null?void 0:t.outline(e)}})},jye=Rye({variants:zye,baseStyle:Iye,sizes:Lye,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:al,defineMultiStyleConfig:Bye}=$t(l0e.keys),Wh=_e("input-height"),Hh=_e("input-font-size"),qh=_e("input-padding"),Gh=_e("input-border-radius"),Uye=al({addon:{height:Wh.reference,fontSize:Hh.reference,px:qh.reference,borderRadius:Gh.reference},field:{width:"100%",height:Wh.reference,fontSize:Hh.reference,px:qh.reference,borderRadius:Gh.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),tu={lg:{[Hh.variable]:"fontSizes.lg",[qh.variable]:"space.4",[Gh.variable]:"radii.md",[Wh.variable]:"sizes.12"},md:{[Hh.variable]:"fontSizes.md",[qh.variable]:"space.4",[Gh.variable]:"radii.md",[Wh.variable]:"sizes.10"},sm:{[Hh.variable]:"fontSizes.sm",[qh.variable]:"space.3",[Gh.variable]:"radii.sm",[Wh.variable]:"sizes.8"},xs:{[Hh.variable]:"fontSizes.xs",[qh.variable]:"space.2",[Gh.variable]:"radii.sm",[Wh.variable]:"sizes.6"}},Vye={lg:al({field:tu.lg,group:tu.lg}),md:al({field:tu.md,group:tu.md}),sm:al({field:tu.sm,group:tu.sm}),xs:al({field:tu.xs,group:tu.xs})};function aP(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||Ce("blue.500","blue.300")(e),errorBorderColor:n||Ce("red.500","red.300")(e)}}var Wye=al(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=aP(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Ce("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Vr(t,r),boxShadow:`0 0 0 1px ${Vr(t,r)}`},_focusVisible:{zIndex:1,borderColor:Vr(t,n),boxShadow:`0 0 0 1px ${Vr(t,n)}`}},addon:{border:"1px solid",borderColor:Ce("inherit","whiteAlpha.50")(e),bg:Ce("gray.100","whiteAlpha.300")(e)}}}),Hye=al(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=aP(e);return{field:{border:"2px solid",borderColor:"transparent",bg:Ce("gray.100","whiteAlpha.50")(e),_hover:{bg:Ce("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Vr(t,r)},_focusVisible:{bg:"transparent",borderColor:Vr(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Ce("gray.100","whiteAlpha.50")(e)}}}),qye=al(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=aP(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Vr(t,r),boxShadow:`0px 1px 0px 0px ${Vr(t,r)}`},_focusVisible:{borderColor:Vr(t,n),boxShadow:`0px 1px 0px 0px ${Vr(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),Gye=al({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),Yye={outline:Wye,filled:Hye,flushed:qye,unstyled:Gye},st=Bye({baseStyle:Uye,sizes:Vye,variants:Yye,defaultProps:{size:"md",variant:"outline"}}),FI,Xye={...(FI=st.baseStyle)==null?void 0:FI.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},PI,RI,Kye={outline:e=>{var t,n;return(n=(t=st.variants)==null?void 0:t.outline(e).field)!=null?n:{}},flushed:e=>{var t,n;return(n=(t=st.variants)==null?void 0:t.flushed(e).field)!=null?n:{}},filled:e=>{var t,n;return(n=(t=st.variants)==null?void 0:t.filled(e).field)!=null?n:{}},unstyled:(RI=(PI=st.variants)==null?void 0:PI.unstyled.field)!=null?RI:{}},DI,OI,NI,II,LI,zI,jI,BI,Qye={xs:(OI=(DI=st.sizes)==null?void 0:DI.xs.field)!=null?OI:{},sm:(II=(NI=st.sizes)==null?void 0:NI.sm.field)!=null?II:{},md:(zI=(LI=st.sizes)==null?void 0:LI.md.field)!=null?zI:{},lg:(BI=(jI=st.sizes)==null?void 0:jI.lg.field)!=null?BI:{}},Zye={baseStyle:Xye,sizes:Qye,variants:Kye,defaultProps:{size:"md",variant:"outline"}},Ib=Cn("tooltip-bg"),m$=Cn("tooltip-fg"),Jye=Cn("popper-arrow-bg"),e1e={bg:Ib.reference,color:m$.reference,[Ib.variable]:"colors.gray.700",[m$.variable]:"colors.whiteAlpha.900",_dark:{[Ib.variable]:"colors.gray.300",[m$.variable]:"colors.gray.900"},[Jye.variable]:Ib.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},t1e={baseStyle:e1e},{defineMultiStyleConfig:n1e,definePartsStyle:S0}=$t(p0e.keys),r1e=e=>{const{colorScheme:t,theme:n,isIndeterminate:r,hasStripe:i}=e,o=Ce(CI(),CI("1rem","rgba(0,0,0,0.1)"))(e),s=Ce(`${t}.500`,`${t}.200`)(e),a=`linear-gradient(
    to right,
    transparent 0%,
    ${Vr(n,s)} 50%,
    transparent 100%
  )`;return{...!r&&i&&o,...r?{bgImage:a}:{bgColor:s}}},i1e={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},o1e=e=>({bg:Ce("gray.100","whiteAlpha.300")(e)}),s1e=e=>({transitionProperty:"common",transitionDuration:"slow",...r1e(e)}),a1e=S0(e=>({label:i1e,filledTrack:s1e(e),track:o1e(e)})),l1e={xs:S0({track:{h:"1"}}),sm:S0({track:{h:"2"}}),md:S0({track:{h:"3"}}),lg:S0({track:{h:"4"}})},u1e=n1e({sizes:l1e,baseStyle:a1e,defaultProps:{size:"md",colorScheme:"blue"}}),c1e=e=>typeof e=="function";function Gr(e,...t){return c1e(e)?e(...t):e}var{definePartsStyle:a2,defineMultiStyleConfig:f1e}=$t(r0e.keys),uy=_e("checkbox-size"),d1e=e=>{const{colorScheme:t}=e;return{w:uy.reference,h:uy.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Ce(`${t}.500`,`${t}.200`)(e),borderColor:Ce(`${t}.500`,`${t}.200`)(e),color:Ce("white","gray.900")(e),_hover:{bg:Ce(`${t}.600`,`${t}.300`)(e),borderColor:Ce(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:Ce("gray.200","transparent")(e),bg:Ce("gray.200","whiteAlpha.300")(e),color:Ce("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:Ce(`${t}.500`,`${t}.200`)(e),borderColor:Ce(`${t}.500`,`${t}.200`)(e),color:Ce("white","gray.900")(e)},_disabled:{bg:Ce("gray.100","whiteAlpha.100")(e),borderColor:Ce("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Ce("red.500","red.300")(e)}}},h1e={_disabled:{cursor:"not-allowed"}},p1e={userSelect:"none",_disabled:{opacity:.4}},g1e={transitionProperty:"transform",transitionDuration:"normal"},m1e=a2(e=>({icon:g1e,container:h1e,control:Gr(d1e,e),label:p1e})),y1e={sm:a2({control:{[uy.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:a2({control:{[uy.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:a2({control:{[uy.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},yw=f1e({baseStyle:m1e,sizes:y1e,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:v1e,definePartsStyle:l2}=$t(g0e.keys),b1e=e=>{var t;const n=(t=Gr(yw.baseStyle,e))==null?void 0:t.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},x1e=l2(e=>{var t,n,r,i;return{label:(n=(t=yw).baseStyle)==null?void 0:n.call(t,e).label,container:(i=(r=yw).baseStyle)==null?void 0:i.call(r,e).container,control:b1e(e)}}),w1e={md:l2({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:l2({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:l2({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},S1e=v1e({baseStyle:x1e,sizes:w1e,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:k1e,definePartsStyle:C1e}=$t(m0e.keys),Lb=_e("select-bg"),UI,_1e={...(UI=st.baseStyle)==null?void 0:UI.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:Lb.reference,[Lb.variable]:"colors.white",_dark:{[Lb.variable]:"colors.gray.700"},"> option, > optgroup":{bg:Lb.reference}},E1e={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},$1e=C1e({field:_1e,icon:E1e}),zb={paddingInlineEnd:"8"},VI,WI,HI,qI,GI,YI,XI,KI,A1e={lg:{...(VI=st.sizes)==null?void 0:VI.lg,field:{...(WI=st.sizes)==null?void 0:WI.lg.field,...zb}},md:{...(HI=st.sizes)==null?void 0:HI.md,field:{...(qI=st.sizes)==null?void 0:qI.md.field,...zb}},sm:{...(GI=st.sizes)==null?void 0:GI.sm,field:{...(YI=st.sizes)==null?void 0:YI.sm.field,...zb}},xs:{...(XI=st.sizes)==null?void 0:XI.xs,field:{...(KI=st.sizes)==null?void 0:KI.xs.field,...zb},icon:{insetEnd:"1"}}},T1e=k1e({baseStyle:$1e,sizes:A1e,variants:st.variants,defaultProps:st.defaultProps}),y$=_e("skeleton-start-color"),v$=_e("skeleton-end-color"),M1e={[y$.variable]:"colors.gray.100",[v$.variable]:"colors.gray.400",_dark:{[y$.variable]:"colors.gray.800",[v$.variable]:"colors.gray.600"},background:y$.reference,borderColor:v$.reference,opacity:.7,borderRadius:"sm"},F1e={baseStyle:M1e},b$=_e("skip-link-bg"),P1e={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[b$.variable]:"colors.white",_dark:{[b$.variable]:"colors.gray.700"},bg:b$.reference}},R1e={baseStyle:P1e},{defineMultiStyleConfig:D1e,definePartsStyle:rC}=$t(y0e.keys),n1=_e("slider-thumb-size"),r1=_e("slider-track-size"),xu=_e("slider-bg"),O1e=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...sP({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},N1e=e=>({...sP({orientation:e.orientation,horizontal:{h:r1.reference},vertical:{w:r1.reference}}),overflow:"hidden",borderRadius:"sm",[xu.variable]:"colors.gray.200",_dark:{[xu.variable]:"colors.whiteAlpha.200"},_disabled:{[xu.variable]:"colors.gray.300",_dark:{[xu.variable]:"colors.whiteAlpha.300"}},bg:xu.reference}),I1e=e=>{const{orientation:t}=e;return{...sP({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:n1.reference,h:n1.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},L1e=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[xu.variable]:`colors.${t}.500`,_dark:{[xu.variable]:`colors.${t}.200`},bg:xu.reference}},z1e=rC(e=>({container:O1e(e),track:N1e(e),thumb:I1e(e),filledTrack:L1e(e)})),j1e=rC({container:{[n1.variable]:"sizes.4",[r1.variable]:"sizes.1"}}),B1e=rC({container:{[n1.variable]:"sizes.3.5",[r1.variable]:"sizes.1"}}),U1e=rC({container:{[n1.variable]:"sizes.2.5",[r1.variable]:"sizes.0.5"}}),V1e={lg:j1e,md:B1e,sm:U1e},W1e=D1e({baseStyle:z1e,sizes:V1e,defaultProps:{size:"md",colorScheme:"blue"}}),gf=Cn("spinner-size"),H1e={width:[gf.reference],height:[gf.reference]},q1e={xs:{[gf.variable]:"sizes.3"},sm:{[gf.variable]:"sizes.4"},md:{[gf.variable]:"sizes.6"},lg:{[gf.variable]:"sizes.8"},xl:{[gf.variable]:"sizes.12"}},G1e={baseStyle:H1e,sizes:q1e,defaultProps:{size:"md"}},{defineMultiStyleConfig:Y1e,definePartsStyle:rY}=$t(v0e.keys),X1e={fontWeight:"medium"},K1e={opacity:.8,marginBottom:"2"},Q1e={verticalAlign:"baseline",fontWeight:"semibold"},Z1e={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},J1e=rY({container:{},label:X1e,helpText:K1e,number:Q1e,icon:Z1e}),eve={md:rY({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},tve=Y1e({baseStyle:J1e,sizes:eve,defaultProps:{size:"md"}}),x$=_e("kbd-bg"),nve={[x$.variable]:"colors.gray.100",_dark:{[x$.variable]:"colors.whiteAlpha.100"},bg:x$.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},rve={baseStyle:nve},ive={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},ove={baseStyle:ive},{defineMultiStyleConfig:sve,definePartsStyle:ave}=$t(u0e.keys),lve={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},uve=ave({icon:lve}),cve=sve({baseStyle:uve}),{defineMultiStyleConfig:fve,definePartsStyle:dve}=$t(c0e.keys),qs=_e("menu-bg"),w$=_e("menu-shadow"),hve={[qs.variable]:"#fff",[w$.variable]:"shadows.sm",_dark:{[qs.variable]:"colors.gray.700",[w$.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:qs.reference,boxShadow:w$.reference},pve={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[qs.variable]:"colors.gray.100",_dark:{[qs.variable]:"colors.whiteAlpha.100"}},_active:{[qs.variable]:"colors.gray.200",_dark:{[qs.variable]:"colors.whiteAlpha.200"}},_expanded:{[qs.variable]:"colors.gray.100",_dark:{[qs.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:qs.reference},gve={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},mve={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},yve={opacity:.6},vve={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},bve={transitionProperty:"common",transitionDuration:"normal"},xve=dve({button:bve,list:hve,item:pve,groupTitle:gve,icon:mve,command:yve,divider:vve}),wve=fve({baseStyle:xve}),{defineMultiStyleConfig:Sve,definePartsStyle:NT}=$t(f0e.keys),S$=_e("modal-bg"),k$=_e("modal-shadow"),kve={bg:"blackAlpha.600",zIndex:"modal"},Cve=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},_ve=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[S$.variable]:"colors.white",[k$.variable]:"shadows.lg",_dark:{[S$.variable]:"colors.gray.700",[k$.variable]:"shadows.dark-lg"},bg:S$.reference,boxShadow:k$.reference}},Eve={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},$ve={position:"absolute",top:"2",insetEnd:"3"},Ave=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},Tve={px:"6",py:"4"},Mve=NT(e=>({overlay:kve,dialogContainer:Gr(Cve,e),dialog:Gr(_ve,e),header:Eve,closeButton:$ve,body:Gr(Ave,e),footer:Tve}));function Ho(e){return NT(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var Fve={xs:Ho("xs"),sm:Ho("sm"),md:Ho("md"),lg:Ho("lg"),xl:Ho("xl"),"2xl":Ho("2xl"),"3xl":Ho("3xl"),"4xl":Ho("4xl"),"5xl":Ho("5xl"),"6xl":Ho("6xl"),full:Ho("full")},Pve=Sve({baseStyle:Mve,sizes:Fve,defaultProps:{size:"md"}}),{defineMultiStyleConfig:Rve,definePartsStyle:iY}=$t(d0e.keys),lP=Cn("number-input-stepper-width"),oY=Cn("number-input-input-padding"),Dve=nl(lP).add("0.5rem").toString(),C$=Cn("number-input-bg"),_$=Cn("number-input-color"),E$=Cn("number-input-border-color"),Ove={[lP.variable]:"sizes.6",[oY.variable]:Dve},Nve=e=>{var t,n;return(n=(t=Gr(st.baseStyle,e))==null?void 0:t.field)!=null?n:{}},Ive={width:lP.reference},Lve={borderStart:"1px solid",borderStartColor:E$.reference,color:_$.reference,bg:C$.reference,[_$.variable]:"colors.chakra-body-text",[E$.variable]:"colors.chakra-border-color",_dark:{[_$.variable]:"colors.whiteAlpha.800",[E$.variable]:"colors.whiteAlpha.300"},_active:{[C$.variable]:"colors.gray.200",_dark:{[C$.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},zve=iY(e=>{var t;return{root:Ove,field:(t=Gr(Nve,e))!=null?t:{},stepperGroup:Ive,stepper:Lve}});function jb(e){var t,n,r;const i=(t=st.sizes)==null?void 0:t[e],o={lg:"md",md:"md",sm:"sm",xs:"sm"},s=(r=(n=i.field)==null?void 0:n.fontSize)!=null?r:"md",a=ZG.fontSizes[s];return iY({field:{...i.field,paddingInlineEnd:oY.reference,verticalAlign:"top"},stepper:{fontSize:nl(a).multiply(.75).toString(),_first:{borderTopEndRadius:o[e]},_last:{borderBottomEndRadius:o[e],mt:"-1px",borderTopWidth:1}}})}var jve={xs:jb("xs"),sm:jb("sm"),md:jb("md"),lg:jb("lg")},Bve=Rve({baseStyle:zve,sizes:jve,variants:st.variants,defaultProps:st.defaultProps}),QI,Uve={...(QI=st.baseStyle)==null?void 0:QI.field,textAlign:"center"},Vve={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},ZI,JI,Wve={outline:e=>{var t,n,r;return(r=(n=Gr((t=st.variants)==null?void 0:t.outline,e))==null?void 0:n.field)!=null?r:{}},flushed:e=>{var t,n,r;return(r=(n=Gr((t=st.variants)==null?void 0:t.flushed,e))==null?void 0:n.field)!=null?r:{}},filled:e=>{var t,n,r;return(r=(n=Gr((t=st.variants)==null?void 0:t.filled,e))==null?void 0:n.field)!=null?r:{}},unstyled:(JI=(ZI=st.variants)==null?void 0:ZI.unstyled.field)!=null?JI:{}},Hve={baseStyle:Uve,sizes:Vve,variants:Wve,defaultProps:st.defaultProps},{defineMultiStyleConfig:qve,definePartsStyle:Gve}=$t(h0e.keys),Bb=Cn("popper-bg"),Yve=Cn("popper-arrow-bg"),eL=Cn("popper-arrow-shadow-color"),Xve={zIndex:10},Kve={[Bb.variable]:"colors.white",bg:Bb.reference,[Yve.variable]:Bb.reference,[eL.variable]:"colors.gray.200",_dark:{[Bb.variable]:"colors.gray.700",[eL.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},Qve={px:3,py:2,borderBottomWidth:"1px"},Zve={px:3,py:2},Jve={px:3,py:2,borderTopWidth:"1px"},ebe={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},tbe=Gve({popper:Xve,content:Kve,header:Qve,body:Zve,footer:Jve,closeButton:ebe}),nbe=qve({baseStyle:tbe}),{definePartsStyle:IT,defineMultiStyleConfig:rbe}=$t(i0e.keys),$$=_e("drawer-bg"),A$=_e("drawer-box-shadow");function lh(e){return IT(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var ibe={bg:"blackAlpha.600",zIndex:"modal"},obe={display:"flex",zIndex:"modal",justifyContent:"center"},sbe=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[$$.variable]:"colors.white",[A$.variable]:"shadows.lg",_dark:{[$$.variable]:"colors.gray.700",[A$.variable]:"shadows.dark-lg"},bg:$$.reference,boxShadow:A$.reference}},abe={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},lbe={position:"absolute",top:"2",insetEnd:"3"},ube={px:"6",py:"2",flex:"1",overflow:"auto"},cbe={px:"6",py:"4"},fbe=IT(e=>({overlay:ibe,dialogContainer:obe,dialog:Gr(sbe,e),header:abe,closeButton:lbe,body:ube,footer:cbe})),dbe={xs:lh("xs"),sm:lh("md"),md:lh("lg"),lg:lh("2xl"),xl:lh("4xl"),full:lh("full")},hbe=rbe({baseStyle:fbe,sizes:dbe,defaultProps:{size:"xs"}}),{definePartsStyle:pbe,defineMultiStyleConfig:gbe}=$t(o0e.keys),mbe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},ybe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},vbe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},bbe=pbe({preview:mbe,input:ybe,textarea:vbe}),xbe=gbe({baseStyle:bbe}),{definePartsStyle:wbe,defineMultiStyleConfig:Sbe}=$t(s0e.keys),hp=_e("form-control-color"),kbe={marginStart:"1",[hp.variable]:"colors.red.500",_dark:{[hp.variable]:"colors.red.300"},color:hp.reference},Cbe={mt:"2",[hp.variable]:"colors.gray.600",_dark:{[hp.variable]:"colors.whiteAlpha.600"},color:hp.reference,lineHeight:"normal",fontSize:"sm"},_be=wbe({container:{width:"100%",position:"relative"},requiredIndicator:kbe,helperText:Cbe}),Ebe=Sbe({baseStyle:_be}),{definePartsStyle:$be,defineMultiStyleConfig:Abe}=$t(a0e.keys),pp=_e("form-error-color"),Tbe={[pp.variable]:"colors.red.500",_dark:{[pp.variable]:"colors.red.300"},color:pp.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},Mbe={marginEnd:"0.5em",[pp.variable]:"colors.red.500",_dark:{[pp.variable]:"colors.red.300"},color:pp.reference},Fbe=$be({text:Tbe,icon:Mbe}),Pbe=Abe({baseStyle:Fbe}),Rbe={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},Dbe={baseStyle:Rbe},Obe={fontFamily:"heading",fontWeight:"bold"},Nbe={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},Ibe={baseStyle:Obe,sizes:Nbe,defaultProps:{size:"xl"}},{defineMultiStyleConfig:Lbe,definePartsStyle:zbe}=$t(n0e.keys),T$=_e("breadcrumb-link-decor"),jbe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:T$.reference,[T$.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[T$.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Bbe=zbe({link:jbe}),Ube=Lbe({baseStyle:Bbe}),Vbe={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},sY=e=>{const{colorScheme:t,theme:n}=e;if(t==="gray")return{color:Ce("gray.800","whiteAlpha.900")(e),_hover:{bg:Ce("gray.100","whiteAlpha.200")(e)},_active:{bg:Ce("gray.200","whiteAlpha.300")(e)}};const r=Xp(`${t}.200`,.12)(n),i=Xp(`${t}.200`,.24)(n);return{color:Ce(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:Ce(`${t}.50`,r)(e)},_active:{bg:Ce(`${t}.100`,i)(e)}}},Wbe=e=>{const{colorScheme:t}=e,n=Ce("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Gr(sY,e)}},Hbe={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},qbe=e=>{var t;const{colorScheme:n}=e;if(n==="gray"){const l=Ce("gray.100","whiteAlpha.200")(e);return{bg:l,color:Ce("gray.800","whiteAlpha.900")(e),_hover:{bg:Ce("gray.200","whiteAlpha.300")(e),_disabled:{bg:l}},_active:{bg:Ce("gray.300","whiteAlpha.400")(e)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:o=`${n}.600`,activeBg:s=`${n}.700`}=(t=Hbe[n])!=null?t:{},a=Ce(r,`${n}.200`)(e);return{bg:a,color:Ce(i,"gray.800")(e),_hover:{bg:Ce(o,`${n}.300`)(e),_disabled:{bg:a}},_active:{bg:Ce(s,`${n}.400`)(e)}}},Gbe=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Ce(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Ce(`${t}.700`,`${t}.500`)(e)}}},Ybe={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},Xbe={ghost:sY,outline:Wbe,solid:qbe,link:Gbe,unstyled:Ybe},Kbe={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},Qbe={baseStyle:Vbe,variants:Xbe,sizes:Kbe,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Vf,defineMultiStyleConfig:Zbe}=$t(k0e.keys),vw=_e("card-bg"),gl=_e("card-padding"),aY=_e("card-shadow"),u2=_e("card-radius"),lY=_e("card-border-width","0"),uY=_e("card-border-color"),Jbe=Vf({container:{[vw.variable]:"colors.chakra-body-bg",backgroundColor:vw.reference,boxShadow:aY.reference,borderRadius:u2.reference,color:"chakra-body-text",borderWidth:lY.reference,borderColor:uY.reference},body:{padding:gl.reference,flex:"1 1 0%"},header:{padding:gl.reference},footer:{padding:gl.reference}}),exe={sm:Vf({container:{[u2.variable]:"radii.base",[gl.variable]:"space.3"}}),md:Vf({container:{[u2.variable]:"radii.md",[gl.variable]:"space.5"}}),lg:Vf({container:{[u2.variable]:"radii.xl",[gl.variable]:"space.7"}})},txe={elevated:Vf({container:{[aY.variable]:"shadows.base",_dark:{[vw.variable]:"colors.gray.700"}}}),outline:Vf({container:{[lY.variable]:"1px",[uY.variable]:"colors.chakra-border-color"}}),filled:Vf({container:{[vw.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[gl.variable]:0},header:{[gl.variable]:0},footer:{[gl.variable]:0}}},nxe=Zbe({baseStyle:Jbe,variants:txe,sizes:exe,defaultProps:{variant:"elevated",size:"md"}}),cy=Cn("close-button-size"),Nm=Cn("close-button-bg"),rxe={w:[cy.reference],h:[cy.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[Nm.variable]:"colors.blackAlpha.100",_dark:{[Nm.variable]:"colors.whiteAlpha.100"}},_active:{[Nm.variable]:"colors.blackAlpha.200",_dark:{[Nm.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:Nm.reference},ixe={lg:{[cy.variable]:"sizes.10",fontSize:"md"},md:{[cy.variable]:"sizes.8",fontSize:"xs"},sm:{[cy.variable]:"sizes.6",fontSize:"2xs"}},oxe={baseStyle:rxe,sizes:ixe,defaultProps:{size:"md"}},{variants:sxe,defaultProps:axe}=ly,lxe={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:an.bg.reference,color:an.color.reference,boxShadow:an.shadow.reference},uxe={baseStyle:lxe,variants:sxe,defaultProps:axe},cxe={w:"100%",mx:"auto",maxW:"prose",px:"4"},fxe={baseStyle:cxe},dxe={opacity:.6,borderColor:"inherit"},hxe={borderStyle:"solid"},pxe={borderStyle:"dashed"},gxe={solid:hxe,dashed:pxe},mxe={baseStyle:dxe,variants:gxe,defaultProps:{variant:"solid"}},{definePartsStyle:yxe,defineMultiStyleConfig:vxe}=$t(Jme.keys),bxe={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},xxe={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},wxe={pt:"2",px:"4",pb:"5"},Sxe={fontSize:"1.25em"},kxe=yxe({container:bxe,button:xxe,panel:wxe,icon:Sxe}),Cxe=vxe({baseStyle:kxe}),{definePartsStyle:tv,defineMultiStyleConfig:_xe}=$t(e0e.keys),Wi=_e("alert-fg"),Fl=_e("alert-bg"),Exe=tv({container:{bg:Fl.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Wi.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Wi.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function uP(e){const{theme:t,colorScheme:n}=e,r=Xp(`${n}.200`,.16)(t);return{light:`colors.${n}.100`,dark:r}}var $xe=tv(e=>{const{colorScheme:t}=e,n=uP(e);return{container:{[Wi.variable]:`colors.${t}.600`,[Fl.variable]:n.light,_dark:{[Wi.variable]:`colors.${t}.200`,[Fl.variable]:n.dark}}}}),Axe=tv(e=>{const{colorScheme:t}=e,n=uP(e);return{container:{[Wi.variable]:`colors.${t}.600`,[Fl.variable]:n.light,_dark:{[Wi.variable]:`colors.${t}.200`,[Fl.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Wi.reference}}}),Txe=tv(e=>{const{colorScheme:t}=e,n=uP(e);return{container:{[Wi.variable]:`colors.${t}.600`,[Fl.variable]:n.light,_dark:{[Wi.variable]:`colors.${t}.200`,[Fl.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Wi.reference}}}),Mxe=tv(e=>{const{colorScheme:t}=e;return{container:{[Wi.variable]:"colors.white",[Fl.variable]:`colors.${t}.600`,_dark:{[Wi.variable]:"colors.gray.900",[Fl.variable]:`colors.${t}.200`},color:Wi.reference}}}),Fxe={subtle:$xe,"left-accent":Axe,"top-accent":Txe,solid:Mxe},Pxe=_xe({baseStyle:Exe,variants:Fxe,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:cY,defineMultiStyleConfig:Rxe}=$t(t0e.keys),gp=_e("avatar-border-color"),fy=_e("avatar-bg"),i1=_e("avatar-font-size"),Kp=_e("avatar-size"),Dxe={borderRadius:"full",border:"0.2em solid",borderColor:gp.reference,[gp.variable]:"white",_dark:{[gp.variable]:"colors.gray.800"}},Oxe={bg:fy.reference,fontSize:i1.reference,width:Kp.reference,height:Kp.reference,lineHeight:"1",[fy.variable]:"colors.gray.200",_dark:{[fy.variable]:"colors.whiteAlpha.400"}},Nxe=e=>{const{name:t,theme:n}=e,r=t?V0e({string:t}):"colors.gray.400",i=B0e(r)(n);let o="white";return i||(o="gray.800"),{bg:fy.reference,fontSize:i1.reference,color:o,borderColor:gp.reference,verticalAlign:"top",width:Kp.reference,height:Kp.reference,"&:not([data-loaded])":{[fy.variable]:r},[gp.variable]:"colors.white",_dark:{[gp.variable]:"colors.gray.800"}}},Ixe={fontSize:i1.reference,lineHeight:"1"},Lxe=cY(e=>({badge:Gr(Dxe,e),excessLabel:Gr(Oxe,e),container:Gr(Nxe,e),label:Ixe}));function nu(e){const t=e!=="100%"?eY[e]:void 0;return cY({container:{[Kp.variable]:t??e,[i1.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[Kp.variable]:t??e,[i1.variable]:`calc(${t??e} / 2.5)`}})}var zxe={"2xs":nu(4),xs:nu(6),sm:nu(8),md:nu(12),lg:nu(16),xl:nu(24),"2xl":nu(32),full:nu("100%")},jxe=Rxe({baseStyle:Lxe,sizes:zxe,defaultProps:{size:"md"}}),Bxe={Accordion:Cxe,Alert:Pxe,Avatar:jxe,Badge:ly,Breadcrumb:Ube,Button:Qbe,Checkbox:yw,CloseButton:oxe,Code:uxe,Container:fxe,Divider:mxe,Drawer:hbe,Editable:xbe,Form:Ebe,FormError:Pbe,FormLabel:Dbe,Heading:Ibe,Input:st,Kbd:rve,Link:ove,List:cve,Menu:wve,Modal:Pve,NumberInput:Bve,PinInput:Hve,Popover:nbe,Progress:u1e,Radio:S1e,Select:T1e,Skeleton:F1e,SkipLink:R1e,Slider:W1e,Spinner:G1e,Stat:tve,Switch:oye,Table:dye,Tabs:$ye,Tag:jye,Textarea:Zye,Tooltip:t1e,Card:nxe,Stepper:Zme},Uxe={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},Vxe={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},Wxe="ltr",Hxe={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},fY={semanticTokens:Uxe,direction:Wxe,...Xme,components:Bxe,styles:Vxe,config:Hxe};function k0(e){return typeof e=="function"}function qxe(...e){return t=>e.reduce((n,r)=>r(n),t)}var Gxe=e=>function(...n){let r=[...n],i=n[n.length-1];return _me(i)&&r.length>1?r=r.slice(0,r.length-1):i=e,qxe(...r.map(o=>s=>k0(o)?o(s):Xxe(s,o)))(i)},Yxe=Gxe(fY);function Xxe(...e){return So({},...e,dY)}function dY(e,t,n,r){if((k0(e)||k0(t))&&Object.prototype.hasOwnProperty.call(r,n))return(...i)=>{const o=k0(e)?e(...i):e,s=k0(t)?t(...i):t;return So({},o,s,dY)}}function Kxe(e,t){const n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}function Qxe(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var Zxe=e=>{const t=new WeakMap;return(r,i,o,s)=>{if(typeof r>"u")return e(r,i,o);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,o,s);return a.set(i,l),l}},hY=Zxe(Qxe);function pY(e,t){const n={};return Object.keys(e).forEach(r=>{const i=e[r];t(i,r,e)&&(n[r]=i)}),n}var gY=e=>pY(e,t=>t!=null);function Jxe(e){return typeof e=="function"}function mY(e,...t){return Jxe(e)?e(...t):e}var e2e=typeof Element<"u",t2e=typeof Map=="function",n2e=typeof Set=="function",r2e=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function c2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!c2(e[r],t[r]))return!1;return!0}var o;if(t2e&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!c2(r.value[1],t.get(r.value[0])))return!1;return!0}if(n2e&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(r2e&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(e2e&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!c2(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var i2e=function(t,n){try{return c2(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const o2e=zl(i2e);function yY(e,t={}){var n;const{styleConfig:r,...i}=t,{theme:o,colorMode:s}=WG(),a=e?hY(o,`components.${e}`):void 0,l=r||a,u=So({theme:o,colorMode:s},(n=l==null?void 0:l.defaultProps)!=null?n:{},gY(Kxe(i,["children"]))),c=T.useRef({});if(l){const d=kme(l)(u);o2e(c.current,d)||(c.current=d)}return c.current}function Bl(e,t={}){return yY(e,t)}function Ul(e,t={}){return yY(e,t)}var s2e=new Set([...fme,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),a2e=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function l2e(e){return a2e.has(e)||!s2e.has(e)}function u2e(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const n={...e};for(const r of t)if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(i in n&&delete n[i],n[i]=r[i]);return n}function vY(e){const t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}var c2e=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,f2e=EH(function(e){return c2e.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),d2e=f2e,h2e=function(t){return t!=="theme"},tL=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?d2e:h2e},nL=function(t,n,r){var i;if(n){var o=n.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(s){return t.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},p2e=!1,g2e=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return PH(n,r,i),Ode(function(){return RH(n,r,i)}),null},m2e=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,o,s;n!==void 0&&(o=n.label,s=n.target);var a=nL(t,n,r),l=a||tL(i),u=!l("as");return function(){var c=arguments,f=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&f.push("label:"+o+";"),c[0]==null||c[0].raw===void 0)f.push.apply(f,c);else{f.push(c[0][0]);for(var d=c.length,h=1;h<d;h++)f.push(c[h],c[0][h])}var p=IH(function(g,y,m){var v=u&&g.as||i,b="",x=[],w=g;if(g.theme==null){w={};for(var k in g)w[k]=g[k];w.theme=T.useContext(Iy)}typeof g.className=="string"?b=Ede(y.registered,x,g.className):g.className!=null&&(b=g.className+" ");var S=aF(f.concat(x),y.registered,w);b+=y.key+"-"+S.name,s!==void 0&&(b+=" "+s);var C=u&&a===void 0?tL(v):l,_={};for(var $ in g)u&&$==="as"||C($)&&(_[$]=g[$]);return _.className=b,m&&(_.ref=m),T.createElement(T.Fragment,null,T.createElement(g2e,{cache:y,serialized:S,isStringTag:typeof v=="string"}),T.createElement(v,_))});return p.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=f,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return s===void 0&&p2e?"NO_COMPONENT_SELECTOR":"."+s}}),p.withComponent=function(g,y){return e(g,V2({},n,y,{shouldForwardProp:nL(p,y,!0)})).apply(void 0,f)},p}},y2e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],bw=m2e.bind();y2e.forEach(function(e){bw[e]=bw(e)});var rL,v2e=(rL=bw.default)!=null?rL:bw,b2e=({baseStyle:e})=>t=>{const{theme:n,css:r,__css:i,sx:o,...s}=t,a=pY(s,(f,d)=>hme(d)),l=mY(e,t),u=u2e({},i,l,gY(a),o),c=QG(u)(t.theme);return r?[c,r]:c};function M$(e,t){const{baseStyle:n,...r}=t??{};r.shouldForwardProp||(r.shouldForwardProp=l2e);const i=b2e({baseStyle:n}),o=v2e(e,r)(i);return Bi.forwardRef(function(l,u){const{colorMode:c,forced:f}=Gg();return Bi.createElement(o,{ref:u,"data-theme":f?c:void 0,...l})})}function x2e(){const e=new Map;return new Proxy(M$,{apply(t,n,r){return M$(...r)},get(t,n){return e.has(n)||e.set(n,M$(n)),e.get(n)}})}var ke=x2e();function Ee(e){return T.forwardRef(e)}function w2e(e={}){const{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=e,i=T.createContext(void 0);i.displayName=r;function o(){var s;const a=T.useContext(i);if(!a&&t){const l=new Error(n);throw l.name="ContextError",(s=Error.captureStackTrace)==null||s.call(Error,l,o),l}return a}return[i.Provider,o,i]}function S2e(e){const{cssVarsRoot:t,theme:n,children:r}=e,i=T.useMemo(()=>lme(n),[n]);return E.jsxs(Lde,{theme:i,children:[E.jsx(k2e,{root:t}),r]})}function k2e({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return E.jsx(Lk,{styles:n=>({[t]:n.__cssVars})})}w2e({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function C2e(){const{colorMode:e}=Gg();return E.jsx(Lk,{styles:t=>{const n=hY(t,"styles.global"),r=mY(n,{theme:t,colorMode:e});return r?QG(r)(t):void 0}})}var cP=T.createContext({getDocument(){return document},getWindow(){return window}});cP.displayName="EnvironmentContext";function _2e({defer:e}={}){const[,t]=T.useReducer(n=>n+1,0);return Bp(()=>{e&&t()},[e]),T.useContext(cP)}function bY(e){const{children:t,environment:n,disabled:r}=e,i=T.useRef(null),o=T.useMemo(()=>n||{getDocument:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument)!=null?l:document},getWindow:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument.defaultView)!=null?l:window}},[n]),s=!r||!n;return E.jsxs(cP.Provider,{value:o,children:[t,s&&E.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}bY.displayName="EnvironmentProvider";var E2e=e=>{const{children:t,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:o=!0,theme:s={},environment:a,cssVarsRoot:l,disableEnvironment:u,disableGlobalStyle:c}=e,f=E.jsx(bY,{environment:a,disabled:u,children:t});return E.jsx(S2e,{theme:s,cssVarsRoot:l,children:E.jsxs(VG,{colorModeManager:n,options:s.config,children:[o?E.jsx(Ude,{scope:i}):E.jsx(Bde,{}),!c&&E.jsx(C2e,{}),r?E.jsx(jH,{zIndex:r,children:f}):f]})})},$2e=(e,t)=>e.find(n=>n.id===t);function iL(e,t){const n=xY(e,t),r=n?e[n].findIndex(i=>i.id===t):-1;return{position:n,index:r}}function xY(e,t){for(const[n,r]of Object.entries(e))if($2e(r,t))return n}function A2e(e){const t=e.includes("right"),n=e.includes("left");let r="center";return t&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function T2e(e){const n=e==="top"||e==="bottom"?"0 auto":void 0,r=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,o=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",s=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:i,right:o,left:s}}function f2(e,t=[]){const n=T.useRef(e);return T.useEffect(()=>{n.current=e}),T.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},t)}function M2e(e,t){const n=f2(e);T.useEffect(()=>{if(t==null)return;let r=null;return r=window.setTimeout(()=>{n()},t),()=>{r&&window.clearTimeout(r)}},[t,n])}function oL(e,t){const n=T.useRef(!1),r=T.useRef(!1);T.useEffect(()=>{if(n.current&&r.current)return e();r.current=!0},t),T.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const wY=T.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),iC=T.createContext({}),nv=T.createContext(null),oC=typeof document<"u",fP=oC?T.useLayoutEffect:T.useEffect,SY=T.createContext({strict:!1}),dP=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),F2e="framerAppearId",kY="data-"+dP(F2e);function P2e(e,t,n,r){const{visualElement:i}=T.useContext(iC),o=T.useContext(SY),s=T.useContext(nv),a=T.useContext(wY).reducedMotion,l=T.useRef();r=r||o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:i,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;T.useInsertionEffect(()=>{u&&u.update(n,s)});const c=T.useRef(!!(n[kY]&&!window.HandoffComplete));return fP(()=>{u&&(u.render(),c.current&&u.animationState&&u.animationState.animateChanges())}),T.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}function Yh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function R2e(e,t,n){return T.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Yh(n)&&(n.current=r))},[t])}function o1(e){return typeof e=="string"||Array.isArray(e)}function sC(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const hP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pP=["initial",...hP];function aC(e){return sC(e.animate)||pP.some(t=>o1(e[t]))}function CY(e){return!!(aC(e)||e.variants)}function D2e(e,t){if(aC(e)){const{initial:n,animate:r}=e;return{initial:n===!1||o1(n)?n:void 0,animate:o1(r)?r:void 0}}return e.inherit!==!1?t:{}}function O2e(e){const{initial:t,animate:n}=D2e(e,T.useContext(iC));return T.useMemo(()=>({initial:t,animate:n}),[sL(t),sL(n)])}function sL(e){return Array.isArray(e)?e.join(" "):e}const aL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},s1={};for(const e in aL)s1[e]={isEnabled:t=>aL[e].some(n=>!!t[n])};function N2e(e){for(const t in e)s1[t]={...s1[t],...e[t]}}const gP=T.createContext({}),_Y=T.createContext({}),I2e=Symbol.for("motionComponentSymbol");function L2e({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&N2e(e);function o(a,l){let u;const c={...T.useContext(wY),...a,layoutId:z2e(a)},{isStatic:f}=c,d=O2e(a),h=r(a,f);if(!f&&oC){d.visualElement=P2e(i,h,c,t);const p=T.useContext(_Y),g=T.useContext(SY).strict;d.visualElement&&(u=d.visualElement.loadFeatures(c,g,e,p))}return T.createElement(iC.Provider,{value:d},u&&d.visualElement?T.createElement(u,{visualElement:d.visualElement,...c}):null,n(i,a,R2e(h,d.visualElement,l),h,f,d.visualElement))}const s=T.forwardRef(o);return s[I2e]=i,s}function z2e({layoutId:e}){const t=T.useContext(gP).id;return t&&e!==void 0?t+"-"+e:e}function j2e(e){function t(r,i={}){return L2e(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const B2e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mP(e){return typeof e!="string"||e.includes("-")?!1:!!(B2e.indexOf(e)>-1||/[A-Z]/.test(e))}const xw={};function U2e(e){Object.assign(xw,e)}const rv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Dd=new Set(rv);function EY(e,{layout:t,layoutId:n}){return Dd.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!xw[e]||e==="opacity")}const bi=e=>!!(e&&e.getVelocity),V2e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},W2e=rv.length;function H2e(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let o="";for(let s=0;s<W2e;s++){const a=rv[s];if(e[a]!==void 0){const l=V2e[a]||a;o+=`${l}(${e[a]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(e,r?"":o):n&&r&&(o="none"),o}const $Y=e=>t=>typeof t=="string"&&t.startsWith(e),AY=$Y("--"),LT=$Y("var(--"),q2e=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,G2e=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ic=(e,t,n)=>Math.min(Math.max(n,e),t),Od={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},dy={...Od,transform:e=>ic(0,1,e)},Ub={...Od,default:1},hy=e=>Math.round(e*1e5)/1e5,lC=/(-)?([\d]*\.?[\d])+/g,TY=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Y2e=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function iv(e){return typeof e=="string"}const ov=e=>({test:t=>iv(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),iu=ov("deg"),ga=ov("%"),Te=ov("px"),X2e=ov("vh"),K2e=ov("vw"),lL={...ga,parse:e=>ga.parse(e)/100,transform:e=>ga.transform(e*100)},uL={...Od,transform:Math.round},MY={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,size:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,rotate:iu,rotateX:iu,rotateY:iu,rotateZ:iu,scale:Ub,scaleX:Ub,scaleY:Ub,scaleZ:Ub,skew:iu,skewX:iu,skewY:iu,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:dy,originX:lL,originY:lL,originZ:Te,zIndex:uL,fillOpacity:dy,strokeOpacity:dy,numOctaves:uL};function yP(e,t,n,r){const{style:i,vars:o,transform:s,transformOrigin:a}=e;let l=!1,u=!1,c=!0;for(const f in t){const d=t[f];if(AY(f)){o[f]=d;continue}const h=MY[f],p=G2e(d,h);if(Dd.has(f)){if(l=!0,s[f]=p,!c)continue;d!==(h.default||0)&&(c=!1)}else f.startsWith("origin")?(u=!0,a[f]=p):i[f]=p}if(t.transform||(l||r?i.transform=H2e(e.transform,n,c,r):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:d="50%",originZ:h=0}=a;i.transformOrigin=`${f} ${d} ${h}`}}const vP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function FY(e,t,n){for(const r in t)!bi(t[r])&&!EY(r,n)&&(e[r]=t[r])}function Q2e({transformTemplate:e},t,n){return T.useMemo(()=>{const r=vP();return yP(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function Z2e(e,t,n){const r=e.style||{},i={};return FY(i,r,e),Object.assign(i,Q2e(e,t,n)),e.transformValues?e.transformValues(i):i}function J2e(e,t,n){const r={},i=Z2e(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const ewe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ww(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ewe.has(e)}let PY=e=>!ww(e);function twe(e){e&&(PY=t=>t.startsWith("on")?!ww(t):e(t))}try{twe(require("@emotion/is-prop-valid").default)}catch{}function nwe(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(PY(i)||n===!0&&ww(i)||!t&&!ww(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function cL(e,t,n){return typeof e=="string"?e:Te.transform(t+n*e)}function rwe(e,t,n){const r=cL(t,e.x,e.width),i=cL(n,e.y,e.height);return`${r} ${i}`}const iwe={offset:"stroke-dashoffset",array:"stroke-dasharray"},owe={offset:"strokeDashoffset",array:"strokeDasharray"};function swe(e,t,n=1,r=0,i=!0){e.pathLength=1;const o=i?iwe:owe;e[o.offset]=Te.transform(-r);const s=Te.transform(t),a=Te.transform(n);e[o.array]=`${s} ${a}`}function bP(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},c,f,d){if(yP(e,u,c,d),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:g}=e;h.transform&&(g&&(p.transform=h.transform),delete h.transform),g&&(i!==void 0||o!==void 0||p.transform)&&(p.transformOrigin=rwe(g,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&swe(h,s,a,l,!1)}const RY=()=>({...vP(),attrs:{}}),xP=e=>typeof e=="string"&&e.toLowerCase()==="svg";function awe(e,t,n,r){const i=T.useMemo(()=>{const o=RY();return bP(o,t,{enableHardwareAcceleration:!1},xP(r),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};FY(o,e.style,e),i.style={...o,...i.style}}return i}function lwe(e=!1){return(n,r,i,{latestValues:o},s)=>{const l=(mP(n)?awe:J2e)(r,o,s,n),c={...nwe(r,typeof n=="string",e),...l,ref:i},{children:f}=r,d=T.useMemo(()=>bi(f)?f.get():f,[f]);return T.createElement(n,{...c,children:d})}}function DY(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const o in n)e.style.setProperty(o,n[o])}const OY=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NY(e,t,n,r){DY(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(OY.has(i)?i:dP(i),t.attrs[i])}function wP(e,t){const{style:n}=e,r={};for(const i in n)(bi(n[i])||t.style&&bi(t.style[i])||EY(i,e))&&(r[i]=n[i]);return r}function IY(e,t){const n=wP(e,t);for(const r in e)if(bi(e[r])||bi(t[r])){const i=rv.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function SP(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function kP(e){const t=T.useRef(null);return t.current===null&&(t.current=e()),t.current}const Sw=e=>Array.isArray(e),uwe=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),cwe=e=>Sw(e)?e[e.length-1]||0:e;function d2(e){const t=bi(e)?e.get():e;return uwe(t)?t.toValue():t}function fwe({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,o){const s={latestValues:dwe(r,i,o,e),renderState:t()};return n&&(s.mount=a=>n(r,a,s)),s}const LY=e=>(t,n)=>{const r=T.useContext(iC),i=T.useContext(nv),o=()=>fwe(e,t,r,i);return n?o():kP(o)};function dwe(e,t,n,r){const i={},o=r(e,{});for(const d in o)i[d]=d2(o[d]);let{initial:s,animate:a}=e;const l=aC(e),u=CY(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const f=c?a:s;return f&&typeof f!="boolean"&&!sC(f)&&(Array.isArray(f)?f:[f]).forEach(h=>{const p=SP(e,h);if(!p)return;const{transitionEnd:g,transition:y,...m}=p;for(const v in m){let b=m[v];if(Array.isArray(b)){const x=c?b.length-1:0;b=b[x]}b!==null&&(i[v]=b)}for(const v in g)i[v]=g[v]}),i}const sn=e=>e;class fL{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function hwe(e){let t=new fL,n=new fL,r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const f=c&&i,d=f?t:n;return u&&s.add(l),d.add(l)&&f&&i&&(r=t.order.length),l},cancel:l=>{n.remove(l),s.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const c=t.order[u];c(l),s.has(c)&&(a.schedule(c),e())}i=!1,o&&(o=!1,a.process(l))}};return a}const Vb=["prepare","read","update","preRender","render","postRender"],pwe=40;function gwe(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=Vb.reduce((f,d)=>(f[d]=hwe(()=>n=!0),f),{}),s=f=>o[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,pwe),1),i.timestamp=f,i.isProcessing=!0,Vb.forEach(s),i.isProcessing=!1,n&&t&&(r=!1,e(a))},l=()=>{n=!0,r=!0,i.isProcessing||e(a)};return{schedule:Vb.reduce((f,d)=>{const h=o[d];return f[d]=(p,g=!1,y=!1)=>(n||l(),h.schedule(p,g,y)),f},{}),cancel:f=>Vb.forEach(d=>o[d].cancel(f)),state:i,steps:o}}const{schedule:_t,cancel:Pl,state:gr,steps:F$}=gwe(typeof requestAnimationFrame<"u"?requestAnimationFrame:sn,!0),mwe={useVisualState:LY({scrapeMotionValuesFromProps:IY,createRenderState:RY,onMount:(e,t,{renderState:n,latestValues:r})=>{_t.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),_t.render(()=>{bP(n,r,{enableHardwareAcceleration:!1},xP(t.tagName),e.transformTemplate),NY(t,n)})}})},ywe={useVisualState:LY({scrapeMotionValuesFromProps:wP,createRenderState:vP})};function vwe(e,{forwardMotionProps:t=!1},n,r){return{...mP(e)?mwe:ywe,preloadedFeatures:n,useRender:lwe(t),createVisualElement:r,Component:e}}function ll(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const zY=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function uC(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const bwe=e=>t=>zY(t)&&e(t,uC(t));function ml(e,t,n,r){return ll(e,t,bwe(n),r)}const xwe=(e,t)=>n=>t(e(n)),Ku=(...e)=>e.reduce(xwe);function jY(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const dL=jY("dragHorizontal"),hL=jY("dragVertical");function BY(e){let t=!1;if(e==="y")t=hL();else if(e==="x")t=dL();else{const n=dL(),r=hL();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function UY(){const e=BY(!0);return e?(e(),!1):!0}let Ec=class{constructor(t){this.isMounted=!1,this.node=t}update(){}};function pL(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(o,s)=>{if(o.pointerType==="touch"||UY())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&_t.update(()=>a[r](o,s))};return ml(e.current,n,i,{passive:!e.getProps()[r]})}class wwe extends Ec{mount(){this.unmount=Ku(pL(this.node,!0),pL(this.node,!1))}unmount(){}}class Swe extends Ec{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ku(ll(this.node.current,"focus",()=>this.onFocus()),ll(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const VY=(e,t)=>t?e===t?!0:VY(e,t.parentElement):!1;function P$(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,uC(n))}class kwe extends Ec{constructor(){super(...arguments),this.removeStartListeners=sn,this.removeEndListeners=sn,this.removeAccessibleListeners=sn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=ml(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:f}=this.node.getProps();_t.update(()=>{!f&&!VY(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),s=ml(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ku(o,s),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const s=a=>{a.key!=="Enter"||!this.checkPressEnd()||P$("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&_t.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=ll(this.node.current,"keyup",s),P$("down",(a,l)=>{this.startPress(a,l)})},n=ll(this.node.current,"keydown",t),r=()=>{this.isPressing&&P$("cancel",(o,s)=>this.cancelPress(o,s))},i=ll(this.node.current,"blur",r);this.removeAccessibleListeners=Ku(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&_t.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!UY()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&_t.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=ml(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=ll(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ku(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const zT=new WeakMap,R$=new WeakMap,Cwe=e=>{const t=zT.get(e.target);t&&t(e)},_we=e=>{e.forEach(Cwe)};function Ewe({root:e,...t}){const n=e||document;R$.has(n)||R$.set(n,{});const r=R$.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(_we,{root:e,...t})),r[i]}function $we(e,t,n){const r=Ewe(t);return zT.set(e,n),r.observe(e),()=>{zT.delete(e),r.unobserve(e)}}const Awe={some:0,all:1};class Twe extends Ec{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Awe[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=u?c:f;d&&d(l)};return $we(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Mwe(t,n))&&this.startObserver()}unmount(){}}function Mwe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Fwe={inView:{Feature:Twe},tap:{Feature:kwe},focus:{Feature:Swe},hover:{Feature:wwe}};function WY(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Pwe(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function Rwe(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function cC(e,t,n){const r=e.getProps();return SP(r,t,n!==void 0?n:r.custom,Pwe(e),Rwe(e))}let kw=sn;const Wf=e=>e*1e3,yl=e=>e/1e3,Dwe={current:!1},HY=e=>Array.isArray(e)&&typeof e[0]=="number";function qY(e){return!!(!e||typeof e=="string"&&GY[e]||HY(e)||Array.isArray(e)&&e.every(qY))}const C0=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,GY={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:C0([0,.65,.55,1]),circOut:C0([.55,0,1,.45]),backIn:C0([.31,.01,.66,-.59]),backOut:C0([.33,1.53,.69,.99])};function YY(e){if(e)return HY(e)?C0(e):Array.isArray(e)?e.map(YY):GY[e]}function Owe(e,t,n,{delay:r=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=YY(a);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}function Nwe(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const XY=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Iwe=1e-7,Lwe=12;function zwe(e,t,n,r,i){let o,s,a=0;do s=t+(n-t)/2,o=XY(s,r,i)-e,o>0?n=s:t=s;while(Math.abs(o)>Iwe&&++a<Lwe);return s}function sv(e,t,n,r){if(e===t&&n===r)return sn;const i=o=>zwe(o,0,1,e,n);return o=>o===0||o===1?o:XY(i(o),t,r)}const jwe=sv(.42,0,1,1),Bwe=sv(0,0,.58,1),KY=sv(.42,0,.58,1),Uwe=e=>Array.isArray(e)&&typeof e[0]!="number",QY=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ZY=e=>t=>1-e(1-t),CP=e=>1-Math.sin(Math.acos(e)),JY=ZY(CP),Vwe=QY(CP),eX=sv(.33,1.53,.69,.99),_P=ZY(eX),Wwe=QY(_P),Hwe=e=>(e*=2)<1?.5*_P(e):.5*(2-Math.pow(2,-10*(e-1))),gL={linear:sn,easeIn:jwe,easeInOut:KY,easeOut:Bwe,circIn:CP,circInOut:Vwe,circOut:JY,backIn:_P,backInOut:Wwe,backOut:eX,anticipate:Hwe},mL=e=>{if(Array.isArray(e)){kw(e.length===4);const[t,n,r,i]=e;return sv(t,n,r,i)}else if(typeof e=="string")return kw(gL[e]!==void 0),gL[e];return e},EP=(e,t)=>n=>!!(iv(n)&&Y2e.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),tX=(e,t,n)=>r=>{if(!iv(r))return r;const[i,o,s,a]=r.match(lC);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},qwe=e=>ic(0,255,e),D$={...Od,transform:e=>Math.round(qwe(e))},$f={test:EP("rgb","red"),parse:tX("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+D$.transform(e)+", "+D$.transform(t)+", "+D$.transform(n)+", "+hy(dy.transform(r))+")"};function Gwe(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const jT={test:EP("#"),parse:Gwe,transform:$f.transform},Xh={test:EP("hsl","hue"),parse:tX("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ga.transform(hy(t))+", "+ga.transform(hy(n))+", "+hy(dy.transform(r))+")"},Dr={test:e=>$f.test(e)||jT.test(e)||Xh.test(e),parse:e=>$f.test(e)?$f.parse(e):Xh.test(e)?Xh.parse(e):jT.parse(e),transform:e=>iv(e)?e:e.hasOwnProperty("red")?$f.transform(e):Xh.transform(e)},Wt=(e,t,n)=>-n*e+n*t+e;function O$(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ywe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,o=0,s=0;if(!t)i=o=s=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=O$(l,a,e+1/3),o=O$(l,a,e),s=O$(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}const N$=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Xwe=[jT,$f,Xh],Kwe=e=>Xwe.find(t=>t.test(e));function yL(e){const t=Kwe(e);let n=t.parse(e);return t===Xh&&(n=Ywe(n)),n}const nX=(e,t)=>{const n=yL(e),r=yL(t),i={...n};return o=>(i.red=N$(n.red,r.red,o),i.green=N$(n.green,r.green,o),i.blue=N$(n.blue,r.blue,o),i.alpha=Wt(n.alpha,r.alpha,o),$f.transform(i))};function Qwe(e){var t,n;return isNaN(e)&&iv(e)&&(((t=e.match(lC))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(TY))===null||n===void 0?void 0:n.length)||0)>0}const rX={regex:q2e,countKey:"Vars",token:"${v}",parse:sn},iX={regex:TY,countKey:"Colors",token:"${c}",parse:Dr.parse},oX={regex:lC,countKey:"Numbers",token:"${n}",parse:Od.parse};function I$(e,{regex:t,countKey:n,token:r,parse:i}){const o=e.tokenised.match(t);o&&(e["num"+n]=o.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...o.map(i)))}function Cw(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&I$(n,rX),I$(n,iX),I$(n,oX),n}function sX(e){return Cw(e).values}function aX(e){const{values:t,numColors:n,numVars:r,tokenised:i}=Cw(e),o=t.length;return s=>{let a=i;for(let l=0;l<o;l++)l<r?a=a.replace(rX.token,s[l]):l<r+n?a=a.replace(iX.token,Dr.transform(s[l])):a=a.replace(oX.token,hy(s[l]));return a}}const Zwe=e=>typeof e=="number"?0:e;function Jwe(e){const t=sX(e);return aX(e)(t.map(Zwe))}const oc={test:Qwe,parse:sX,createTransformer:aX,getAnimatableNone:Jwe},lX=(e,t)=>n=>`${n>0?t:e}`;function uX(e,t){return typeof e=="number"?n=>Wt(e,t,n):Dr.test(e)?nX(e,t):e.startsWith("var(")?lX(e,t):fX(e,t)}const cX=(e,t)=>{const n=[...e],r=n.length,i=e.map((o,s)=>uX(o,t[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}},eSe=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=uX(e[i],t[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},fX=(e,t)=>{const n=oc.createTransformer(t),r=Cw(e),i=Cw(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Ku(cX(r.values,i.values),n):lX(e,t)},a1=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},vL=(e,t)=>n=>Wt(e,t,n);function tSe(e){return typeof e=="number"?vL:typeof e=="string"?Dr.test(e)?nX:fX:Array.isArray(e)?cX:typeof e=="object"?eSe:vL}function nSe(e,t,n){const r=[],i=n||tSe(e[0]),o=e.length-1;for(let s=0;s<o;s++){let a=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||sn:t;a=Ku(l,a)}r.push(a)}return r}function dX(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const o=e.length;if(kw(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=nSe(t,r,i),a=s.length,l=u=>{let c=0;if(a>1)for(;c<e.length-2&&!(u<e[c+1]);c++);const f=a1(e[c],e[c+1],u);return s[c](f)};return n?u=>l(ic(e[0],e[o-1],u)):l}function rSe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=a1(0,t,r);e.push(Wt(n,1,i))}}function iSe(e){const t=[0];return rSe(t,e.length-1),t}function oSe(e,t){return e.map(n=>n*t)}function sSe(e,t){return e.map(()=>t||KY).splice(0,e.length-1)}function _w({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=Uwe(r)?r.map(mL):mL(r),o={done:!1,value:t[0]},s=oSe(n&&n.length===t.length?n:iSe(t),e),a=dX(s,t,{ease:Array.isArray(i)?i:sSe(t,i)});return{calculatedDuration:e,next:l=>(o.value=a(l),o.done=l>=e,o)}}function hX(e,t){return t?e*(1e3/t):0}const aSe=5;function pX(e,t,n){const r=Math.max(t-aSe,0);return hX(n-e(r),t-r)}const L$=.001,lSe=.01,uSe=10,cSe=.05,fSe=1;function dSe({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,o,s=1-t;s=ic(cSe,fSe,s),e=ic(lSe,uSe,yl(e)),s<1?(i=u=>{const c=u*s,f=c*e,d=c-n,h=BT(u,s),p=Math.exp(-f);return L$-d/h*p},o=u=>{const f=u*s*e,d=f*n+n,h=Math.pow(s,2)*Math.pow(u,2)*e,p=Math.exp(-f),g=BT(Math.pow(u,2),s);return(-i(u)+L$>0?-1:1)*((d-h)*p)/g}):(i=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-L$+c*f},o=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=pSe(i,o,a);if(e=Wf(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const hSe=12;function pSe(e,t,n){let r=n;for(let i=1;i<hSe;i++)r=r-e(r)/t(r);return r}function BT(e,t){return e*Math.sqrt(1-t*t)}const gSe=["duration","bounce"],mSe=["stiffness","damping","mass"];function bL(e,t){return t.some(n=>e[n]!==void 0)}function ySe(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!bL(e,mSe)&&bL(e,gSe)){const n=dSe(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function gX({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],o=e[e.length-1],s={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:f,isResolvedFromDuration:d}=ySe({...r,velocity:-yl(r.velocity||0)}),h=f||0,p=l/(2*Math.sqrt(a*u)),g=o-i,y=yl(Math.sqrt(a/u)),m=Math.abs(g)<5;n||(n=m?.01:2),t||(t=m?.005:.5);let v;if(p<1){const b=BT(y,p);v=x=>{const w=Math.exp(-p*y*x);return o-w*((h+p*y*g)/b*Math.sin(b*x)+g*Math.cos(b*x))}}else if(p===1)v=b=>o-Math.exp(-y*b)*(g+(h+y*g)*b);else{const b=y*Math.sqrt(p*p-1);v=x=>{const w=Math.exp(-p*y*x),k=Math.min(b*x,300);return o-w*((h+p*y*g)*Math.sinh(k)+b*g*Math.cosh(k))/b}}return{calculatedDuration:d&&c||null,next:b=>{const x=v(b);if(d)s.done=b>=c;else{let w=h;b!==0&&(p<1?w=pX(v,b,x):w=0);const k=Math.abs(w)<=n,S=Math.abs(o-x)<=t;s.done=k&&S}return s.value=s.done?o:x,s}}}function xL({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],d={done:!1,value:f},h=C=>a!==void 0&&C<a||l!==void 0&&C>l,p=C=>a===void 0?l:l===void 0||Math.abs(a-C)<Math.abs(l-C)?a:l;let g=n*t;const y=f+g,m=s===void 0?y:s(y);m!==y&&(g=m-f);const v=C=>-g*Math.exp(-C/r),b=C=>m+v(C),x=C=>{const _=v(C),$=b(C);d.done=Math.abs(_)<=u,d.value=d.done?m:$};let w,k;const S=C=>{h(d.value)&&(w=C,k=gX({keyframes:[d.value,p(d.value)],velocity:pX(b,C,d.value),damping:i,stiffness:o,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:C=>{let _=!1;return!k&&w===void 0&&(_=!0,x(C),S(C)),w!==void 0&&C>w?k.next(C-w):(!_&&x(C),d)}}}const vSe=e=>{const t=({timestamp:n})=>e(n);return{start:()=>_t.update(t,!0),stop:()=>Pl(t),now:()=>gr.isProcessing?gr.timestamp:performance.now()}},wL=2e4;function SL(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<wL;)t+=n,r=e.next(t);return t>=wL?1/0:t}const bSe={decay:xL,inertia:xL,tween:_w,keyframes:_w,spring:gX};function Ew({autoplay:e=!0,delay:t=0,driver:n=vSe,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:f,...d}){let h=1,p=!1,g,y;const m=()=>{y=new Promise(W=>{g=W})};m();let v;const b=bSe[i]||_w;let x;b!==_w&&typeof r[0]!="number"&&(x=dX([0,100],r,{clamp:!1}),r=[0,100]);const w=b({...d,keyframes:r});let k;a==="mirror"&&(k=b({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let S="idle",C=null,_=null,$=null;w.calculatedDuration===null&&o&&(w.calculatedDuration=SL(w));const{calculatedDuration:A}=w;let O=1/0,M=1/0;A!==null&&(O=A+s,M=O*(o+1)-s);let P=0;const R=W=>{if(_===null)return;h>0&&(_=Math.min(_,W)),h<0&&(_=Math.min(W-M/h,_)),C!==null?P=C:P=Math.round(W-_)*h;const oe=P-t*(h>=0?1:-1),re=h>=0?oe<0:oe>M;P=Math.max(oe,0),S==="finished"&&C===null&&(P=M);let we=P,De=w;if(o){const ue=Math.min(P,M)/O;let $e=Math.floor(ue),Ae=ue%1;!Ae&&ue>=1&&(Ae=1),Ae===1&&$e--,$e=Math.min($e,o+1),!!($e%2)&&(a==="reverse"?(Ae=1-Ae,s&&(Ae-=s/O)):a==="mirror"&&(De=k)),we=ic(0,1,Ae)*O}const ut=re?{done:!1,value:r[0]}:De.next(we);x&&(ut.value=x(ut.value));let{done:$n}=ut;!re&&A!==null&&($n=h>=0?P>=M:P<=0);const sr=C===null&&(S==="finished"||S==="running"&&$n);return f&&f(ut.value),sr&&N(),ut},D=()=>{v&&v.stop(),v=void 0},I=()=>{S="idle",D(),g(),m(),_=$=null},N=()=>{S="finished",c&&c(),D(),g()},B=()=>{if(p)return;v||(v=n(R));const W=v.now();l&&l(),C!==null?_=W-C:(!_||S==="finished")&&(_=W),S==="finished"&&m(),$=_,C=null,S="running",v.start()};e&&B();const Y={then(W,oe){return y.then(W,oe)},get time(){return yl(P)},set time(W){W=Wf(W),P=W,C!==null||!v||h===0?C=W:_=v.now()-W/h},get duration(){const W=w.calculatedDuration===null?SL(w):w.calculatedDuration;return yl(W)},get speed(){return h},set speed(W){W===h||!v||(h=W,Y.time=yl(P))},get state(){return S},play:B,pause:()=>{S="paused",C=P},stop:()=>{p=!0,S!=="idle"&&(S="idle",u&&u(),I())},cancel:()=>{$!==null&&R($),I()},complete:()=>{S="finished"},sample:W=>(_=0,R(W))};return Y}function xSe(e){let t;return()=>(t===void 0&&(t=e()),t)}const wSe=xSe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),SSe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Wb=10,kSe=2e4,CSe=(e,t)=>t.type==="spring"||e==="backgroundColor"||!qY(t.ease);function _Se(e,t,{onUpdate:n,onComplete:r,...i}){if(!(wSe()&&SSe.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let s=!1,a,l,u=!1;const c=()=>{l=new Promise(b=>{a=b})};c();let{keyframes:f,duration:d=300,ease:h,times:p}=i;if(CSe(t,i)){const b=Ew({...i,repeat:0,delay:0});let x={done:!1,value:f[0]};const w=[];let k=0;for(;!x.done&&k<kSe;)x=b.sample(k),w.push(x.value),k+=Wb;p=void 0,f=w,d=k-Wb,h="linear"}const g=Owe(e.owner.current,t,f,{...i,duration:d,ease:h,times:p}),y=()=>{u=!1,g.cancel()},m=()=>{u=!0,_t.update(y),a(),c()};return g.onfinish=()=>{u||(e.set(Nwe(f,i)),r&&r(),m())},{then(b,x){return l.then(b,x)},attachTimeline(b){return g.timeline=b,g.onfinish=null,sn},get time(){return yl(g.currentTime||0)},set time(b){g.currentTime=Wf(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return yl(d)},play:()=>{s||(g.play(),Pl(y))},pause:()=>g.pause(),stop:()=>{if(s=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const x=Ew({...i,autoplay:!1});e.setWithVelocity(x.sample(b-Wb).value,x.sample(b).value,Wb)}m()},complete:()=>{u||g.finish()},cancel:m}}function ESe({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:sn,pause:sn,stop:sn,then:o=>(o(),Promise.resolve()),cancel:sn,complete:sn});return t?Ew({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const $Se={type:"spring",stiffness:500,damping:25,restSpeed:10},ASe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),TSe={type:"keyframes",duration:.8},MSe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},FSe=(e,{keyframes:t})=>t.length>2?TSe:Dd.has(e)?e.startsWith("scale")?ASe(t[1]):$Se:MSe,UT=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(oc.test(t)||t==="0")&&!t.startsWith("url(")),PSe=new Set(["brightness","contrast","saturate","opacity"]);function RSe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(lC)||[];if(!r)return e;const i=n.replace(r,"");let o=PSe.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const DSe=/([a-z-]*)\(.*?\)/g,VT={...oc,getAnimatableNone:e=>{const t=e.match(DSe);return t?t.map(RSe).join(" "):e}},OSe={...MY,color:Dr,backgroundColor:Dr,outlineColor:Dr,fill:Dr,stroke:Dr,borderColor:Dr,borderTopColor:Dr,borderRightColor:Dr,borderBottomColor:Dr,borderLeftColor:Dr,filter:VT,WebkitFilter:VT},$P=e=>OSe[e];function mX(e,t){let n=$P(e);return n!==VT&&(n=oc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const yX=e=>/^0[^.\s]+$/.test(e);function NSe(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||yX(e)}function ISe(e,t,n,r){const i=UT(t,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const s=r.from!==void 0?r.from:e.get();let a;const l=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?s:o[u-1]),NSe(o[u])&&l.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(a=o[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];o[c]=mX(t,a)}return o}function LSe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function AP(e,t){return e[t]||e.default||e}const zSe={skipAnimations:!1},TP=(e,t,n,r={})=>i=>{const o=AP(r,e)||{},s=o.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Wf(s);const l=ISe(t,e,n,o),u=l[0],c=l[l.length-1],f=UT(e,u),d=UT(e,c);let h={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:p=>{t.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(LSe(o)||(h={...h,...FSe(e,h)}),h.duration&&(h.duration=Wf(h.duration)),h.repeatDelay&&(h.repeatDelay=Wf(h.repeatDelay)),!f||!d||Dwe.current||o.type===!1||zSe.skipAnimations)return ESe(h);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=_Se(t,e,h);if(p)return p}return Ew(h)};function $w(e){return!!(bi(e)&&e.add)}const vX=e=>/^\-?\d*\.?\d+$/.test(e);function MP(e,t){e.indexOf(t)===-1&&e.push(t)}function FP(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class PP{constructor(){this.subscriptions=[]}add(t){return MP(this.subscriptions,t),()=>FP(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const jSe=e=>!isNaN(parseFloat(e));class BSe{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:s}=gr;this.lastUpdated!==s&&(this.timeDelta=o,this.lastUpdated=s,_t.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>_t.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=jSe(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new PP);const r=this.events[t].add(n);return t==="change"?()=>{r(),_t.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?hX(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qp(e,t){return new BSe(e,t)}const bX=e=>t=>t.test(e),USe={test:e=>e==="auto",parse:e=>e},xX=[Od,Te,ga,iu,K2e,X2e,USe],Im=e=>xX.find(bX(e)),VSe=[...xX,Dr,oc],WSe=e=>VSe.find(bX(e));function HSe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Qp(n))}function qSe(e,t){const n=cC(e,t);let{transitionEnd:r={},transition:i={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const s in o){const a=cwe(o[s]);HSe(e,s,a)}}function GSe(e,t,n){var r,i;const o=Object.keys(t).filter(a=>!e.hasValue(a)),s=o.length;if(s)for(let a=0;a<s;a++){const l=o[a],u=t[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(i=(r=n[l])!==null&&r!==void 0?r:e.readValue(l))!==null&&i!==void 0?i:t[l]),c!=null&&(typeof c=="string"&&(vX(c)||yX(c))?c=parseFloat(c):!WSe(c)&&oc.test(u)&&(c=mX(l,u)),e.addValue(l,Qp(c,{owner:e})),n[l]===void 0&&(n[l]=c),c!==null&&e.setBaseTarget(l,c))}}function YSe(e,t){return t?(t[e]||t.default||t).from:void 0}function XSe(e,t,n){const r={};for(const i in e){const o=YSe(i,t);if(o!==void 0)r[i]=o;else{const s=n.getValue(i);s&&(r[i]=s.get())}}return r}function KSe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function QSe(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function wX(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:s,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(o=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const f in a){const d=e.getValue(f),h=a[f];if(!d||h===void 0||c&&KSe(c,f))continue;const p={delay:n,elapsed:0,...AP(o||{},f)};if(window.HandoffAppearAnimations){const m=e.getProps()[kY];if(m){const v=window.HandoffAppearAnimations(m,f,d,_t);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let g=!p.isHandoff&&!QSe(d,h);if(p.type==="spring"&&(d.getVelocity()||p.velocity)&&(g=!1),d.animation&&(g=!1),g)continue;d.start(TP(f,d,h,e.shouldReduceMotion&&Dd.has(f)?{type:!1}:p));const y=d.animation;$w(l)&&(l.add(f),y.then(()=>l.remove(f))),u.push(y)}return s&&Promise.all(u).then(()=>{s&&qSe(e,s)}),u}function WT(e,t,n={}){const r=cC(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(wX(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:f}=i;return ZSe(e,t,u+l,c,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[o,s]:[s,o];return l().then(()=>u())}else return Promise.all([o(),s(n.delay)])}function ZSe(e,t,n=0,r=0,i=1,o){const s=[],a=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(JSe).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(WT(u,t,{...o,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function JSe(e,t){return e.sortNodePosition(t)}function eke(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(o=>WT(e,o,n));r=Promise.all(i)}else if(typeof t=="string")r=WT(e,t,n);else{const i=typeof t=="function"?cC(e,t,n.custom):t;r=Promise.all(wX(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const tke=[...hP].reverse(),nke=hP.length;function rke(e){return t=>Promise.all(t.map(({animation:n,options:r})=>eke(e,n,r)))}function ike(e){let t=rke(e);const n=ske();let r=!0;const i=(l,u)=>{const c=cC(e,u);if(c){const{transition:f,transitionEnd:d,...h}=c;l={...l,...h,...d}}return l};function o(l){t=l(e)}function s(l,u){const c=e.getProps(),f=e.getVariantContext(!0)||{},d=[],h=new Set;let p={},g=1/0;for(let m=0;m<nke;m++){const v=tke[m],b=n[v],x=c[v]!==void 0?c[v]:f[v],w=o1(x),k=v===u?b.isActive:null;k===!1&&(g=m);let S=x===f[v]&&x!==c[v]&&w;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...p},!b.isActive&&k===null||!x&&!b.prevProp||sC(x)||typeof x=="boolean")continue;let _=oke(b.prevProp,x)||v===u&&b.isActive&&!S&&w||m>g&&w,$=!1;const A=Array.isArray(x)?x:[x];let O=A.reduce(i,{});k===!1&&(O={});const{prevResolvedValues:M={}}=b,P={...M,...O},R=D=>{_=!0,h.has(D)&&($=!0,h.delete(D)),b.needsAnimating[D]=!0};for(const D in P){const I=O[D],N=M[D];if(p.hasOwnProperty(D))continue;let B=!1;Sw(I)&&Sw(N)?B=!WY(I,N):B=I!==N,B?I!==void 0?R(D):h.add(D):I!==void 0&&h.has(D)?R(D):b.protectedKeys[D]=!0}b.prevProp=x,b.prevResolvedValues=O,b.isActive&&(p={...p,...O}),r&&e.blockInitialAnimation&&(_=!1),_&&(!S||$)&&d.push(...A.map(D=>({animation:D,options:{type:v,...l}})))}if(h.size){const m={};h.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(m[v]=b)}),d.push({animation:m})}let y=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(d):Promise.resolve()}function a(l,u,c){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const d=s(c,l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n}}function oke(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!WY(t,e):!1}function Hc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ske(){return{animate:Hc(!0),whileInView:Hc(),whileHover:Hc(),whileTap:Hc(),whileDrag:Hc(),whileFocus:Hc(),exit:Hc()}}class ake extends Ec{constructor(t){super(t),t.animationState||(t.animationState=ike(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),sC(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let lke=0;class uke extends Ec{constructor(){super(...arguments),this.id=lke++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const cke={animation:{Feature:ake},exit:{Feature:uke}},kL=(e,t)=>Math.abs(e-t);function fke(e,t){const n=kL(e.x,t.x),r=kL(e.y,t.y);return Math.sqrt(n**2+r**2)}class SX{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=j$(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=fke(f.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:p}=f,{timestamp:g}=gr;this.history.push({...p,timestamp:g});const{onStart:y,onMove:m}=this.handlers;d||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=z$(d,this.transformPagePoint),_t.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=j$(f.type==="pointercancel"?this.lastMoveEventInfo:z$(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,y),p&&p(f,y)},!zY(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=uC(t),a=z$(s,this.transformPagePoint),{point:l}=a,{timestamp:u}=gr;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,j$(a,this.history)),this.removeListeners=Ku(ml(this.contextWindow,"pointermove",this.handlePointerMove),ml(this.contextWindow,"pointerup",this.handlePointerUp),ml(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Pl(this.updatePoint)}}function z$(e,t){return t?{point:t(e.point)}:e}function CL(e,t){return{x:e.x-t.x,y:e.y-t.y}}function j$({point:e},t){return{point:e,delta:CL(e,kX(t)),offset:CL(e,dke(t)),velocity:hke(t,.1)}}function dke(e){return e[0]}function kX(e){return e[e.length-1]}function hke(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=kX(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Wf(t)));)n--;if(!r)return{x:0,y:0};const o=yl(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Xi(e){return e.max-e.min}function HT(e,t=0,n=.01){return Math.abs(e-t)<=n}function _L(e,t,n,r=.5){e.origin=r,e.originPoint=Wt(t.min,t.max,e.origin),e.scale=Xi(n)/Xi(t),(HT(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Wt(n.min,n.max,e.origin)-e.originPoint,(HT(e.translate)||isNaN(e.translate))&&(e.translate=0)}function py(e,t,n,r){_L(e.x,t.x,n.x,r?r.originX:void 0),_L(e.y,t.y,n.y,r?r.originY:void 0)}function EL(e,t,n){e.min=n.min+t.min,e.max=e.min+Xi(t)}function pke(e,t,n){EL(e.x,t.x,n.x),EL(e.y,t.y,n.y)}function $L(e,t,n){e.min=t.min-n.min,e.max=e.min+Xi(t)}function gy(e,t,n){$L(e.x,t.x,n.x),$L(e.y,t.y,n.y)}function gke(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Wt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Wt(n,e,r.max):Math.min(e,n)),e}function AL(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function mke(e,{top:t,left:n,bottom:r,right:i}){return{x:AL(e.x,n,i),y:AL(e.y,t,r)}}function TL(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function yke(e,t){return{x:TL(e.x,t.x),y:TL(e.y,t.y)}}function vke(e,t){let n=.5;const r=Xi(e),i=Xi(t);return i>r?n=a1(t.min,t.max-r,e.min):r>i&&(n=a1(e.min,e.max-i,t.min)),ic(0,1,n)}function bke(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const qT=.35;function xke(e=qT){return e===!1?e=0:e===!0&&(e=qT),{x:ML(e,"left","right"),y:ML(e,"top","bottom")}}function ML(e,t,n){return{min:FL(e,t),max:FL(e,n)}}function FL(e,t){return typeof e=="number"?e:e[t]||0}const PL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Kh=()=>({x:PL(),y:PL()}),RL=()=>({min:0,max:0}),dn=()=>({x:RL(),y:RL()});function fo(e){return[e("x"),e("y")]}function CX({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function wke({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Ske(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function B$(e){return e===void 0||e===1}function GT({scale:e,scaleX:t,scaleY:n}){return!B$(e)||!B$(t)||!B$(n)}function af(e){return GT(e)||_X(e)||e.z||e.rotate||e.rotateX||e.rotateY}function _X(e){return DL(e.x)||DL(e.y)}function DL(e){return e&&e!=="0%"}function Aw(e,t,n){const r=e-n,i=t*r;return n+i}function OL(e,t,n,r,i){return i!==void 0&&(e=Aw(e,i,r)),Aw(e,n,r)+t}function YT(e,t=0,n=1,r,i){e.min=OL(e.min,t,n,r,i),e.max=OL(e.max,t,n,r,i)}function EX(e,{x:t,y:n}){YT(e.x,t.translate,t.scale,t.originPoint),YT(e.y,n.translate,n.scale,n.originPoint)}function kke(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Qh(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,EX(e,s)),r&&af(o.latestValues)&&Qh(e,o.latestValues))}t.x=NL(t.x),t.y=NL(t.y)}function NL(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function fu(e,t){e.min=e.min+t,e.max=e.max+t}function IL(e,t,[n,r,i]){const o=t[i]!==void 0?t[i]:.5,s=Wt(e.min,e.max,o);YT(e,t[n],t[r],s,t.scale)}const Cke=["x","scaleX","originX"],_ke=["y","scaleY","originY"];function Qh(e,t){IL(e.x,t,Cke),IL(e.y,t,_ke)}function $X(e,t){return CX(Ske(e.getBoundingClientRect(),t))}function Eke(e,t,n){const r=$X(e,n),{scroll:i}=t;return i&&(fu(r.x,i.offset.x),fu(r.y,i.offset.y)),r}const AX=({current:e})=>e?e.ownerDocument.defaultView:null,$ke=new WeakMap;class Ake{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(uC(c,"page").point)},o=(c,f)=>{const{drag:d,dragPropagation:h,onDragStart:p}=this.getProps();if(d&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=BY(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fo(y=>{let m=this.getAxisMotionValue(y).get()||0;if(ga.test(m)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[y];b&&(m=Xi(b)*(parseFloat(m)/100))}}this.originPoint[y]=m}),p&&_t.update(()=>p(c,f),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(c,f)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:p,onDrag:g}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:y}=f;if(h&&this.currentDirection===null){this.currentDirection=Tke(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),g&&g(c,f)},a=(c,f)=>this.stop(c,f),l=()=>fo(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new SX(t,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:AX(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&_t.update(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Hb(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=gke(s,this.constraints[t],this.elastic[t])),o.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;n&&Yh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=mke(i.layoutBox,n):this.constraints=!1,this.elastic=xke(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&fo(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=bke(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Yh(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Eke(r,i.root,this.visualElement.getTransformPagePoint());let s=yke(i.layout.layoutBox,o);if(n){const a=n(wke(s));this.hasMutatedConstraints=!!a,a&&(s=CX(a))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=fo(c=>{if(!Hb(c,n,this.currentDirection))return;let f=l&&l[c]||{};s&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(TP(t,r,0,n))}stopAnimation(){fo(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){fo(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){fo(n=>{const{drag:r}=this.getProps();if(!Hb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(t[n]-Wt(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};fo(s=>{const a=this.getAxisMotionValue(s);if(a){const l=a.get();i[s]=vke({min:l,max:l},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fo(s=>{if(!Hb(s,t,null))return;const a=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];a.set(Wt(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;$ke.set(this.visualElement,this);const t=this.visualElement.current,n=ml(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Yh(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const s=ll(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(fo(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=qT,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function Hb(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Tke(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Mke extends Ec{constructor(t){super(t),this.removeGroupControls=sn,this.removeListeners=sn,this.controls=new Ake(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||sn}unmount(){this.removeGroupControls(),this.removeListeners()}}const LL=e=>(t,n)=>{e&&_t.update(()=>e(t,n))};class Fke extends Ec{constructor(){super(...arguments),this.removePointerDownListener=sn}onPointerDown(t){this.session=new SX(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:AX(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:LL(t),onStart:LL(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&_t.update(()=>i(o,s))}}}mount(){this.removePointerDownListener=ml(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Pke(){const e=T.useContext(nv);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=T.useId();return T.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}function Rke(){return Dke(T.useContext(nv))}function Dke(e){return e===null?!0:e.isPresent}const h2={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zL(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Lm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Te.test(e))e=parseFloat(e);else return e;const n=zL(e,t.target.x),r=zL(e,t.target.y);return`${n}% ${r}%`}},Oke={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=oc.parse(e);if(i.length>5)return r;const o=oc.createTransformer(e),s=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=a,i[1+s]/=l;const u=Wt(a,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),o(i)}};class Nke extends Bi.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=t;U2e(Ike),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),h2.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?s.promote():s.relegate()||_t.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function TX(e){const[t,n]=Pke(),r=T.useContext(gP);return Bi.createElement(Nke,{...e,layoutGroup:r,switchLayoutGroup:T.useContext(_Y),isPresent:t,safeToRemove:n})}const Ike={borderRadius:{...Lm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lm,borderTopRightRadius:Lm,borderBottomLeftRadius:Lm,borderBottomRightRadius:Lm,boxShadow:Oke},MX=["TopLeft","TopRight","BottomLeft","BottomRight"],Lke=MX.length,jL=e=>typeof e=="string"?parseFloat(e):e,BL=e=>typeof e=="number"||Te.test(e);function zke(e,t,n,r,i,o){i?(e.opacity=Wt(0,n.opacity!==void 0?n.opacity:1,jke(r)),e.opacityExit=Wt(t.opacity!==void 0?t.opacity:1,0,Bke(r))):o&&(e.opacity=Wt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<Lke;s++){const a=`border${MX[s]}Radius`;let l=UL(t,a),u=UL(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||BL(l)===BL(u)?(e[a]=Math.max(Wt(jL(l),jL(u),r),0),(ga.test(u)||ga.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Wt(t.rotate||0,n.rotate||0,r))}function UL(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const jke=FX(0,.5,JY),Bke=FX(.5,.95,sn);function FX(e,t,n){return r=>r<e?0:r>t?1:n(a1(e,t,r))}function VL(e,t){e.min=t.min,e.max=t.max}function ao(e,t){VL(e.x,t.x),VL(e.y,t.y)}function WL(e,t,n,r,i){return e-=t,e=Aw(e,1/n,r),i!==void 0&&(e=Aw(e,1/i,r)),e}function Uke(e,t=0,n=1,r=.5,i,o=e,s=e){if(ga.test(t)&&(t=parseFloat(t),t=Wt(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=Wt(o.min,o.max,r);e===o&&(a-=t),e.min=WL(e.min,t,n,a,i),e.max=WL(e.max,t,n,a,i)}function HL(e,t,[n,r,i],o,s){Uke(e,t[n],t[r],t[i],t.scale,o,s)}const Vke=["x","scaleX","originX"],Wke=["y","scaleY","originY"];function qL(e,t,n,r){HL(e.x,t,Vke,n?n.x:void 0,r?r.x:void 0),HL(e.y,t,Wke,n?n.y:void 0,r?r.y:void 0)}function GL(e){return e.translate===0&&e.scale===1}function PX(e){return GL(e.x)&&GL(e.y)}function Hke(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function RX(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function YL(e){return Xi(e.x)/Xi(e.y)}class qke{constructor(){this.members=[]}add(t){MP(this.members,t),t.scheduleRender()}remove(t){if(FP(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function XL(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const s=e.x.scale*t.x,a=e.y.scale*t.y;return(s!==1||a!==1)&&(r+=`scale(${s}, ${a})`),r||"none"}const Gke=(e,t)=>e.depth-t.depth;class Yke{constructor(){this.children=[],this.isDirty=!1}add(t){MP(this.children,t),this.isDirty=!0}remove(t){FP(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Gke),this.isDirty=!1,this.children.forEach(t)}}function Xke(e,t){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=t&&(Pl(r),e(o-t))};return _t.read(r,!0),()=>Pl(r)}function Kke(e){window.MotionDebug&&window.MotionDebug.record(e)}function Qke(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Zke(e,t,n){const r=bi(e)?e:Qp(e);return r.start(TP("",r,t,n)),r.animation}const KL=["","X","Y","Z"],Jke={visibility:"hidden"},QL=1e3;let eCe=0;const lf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function DX({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=t==null?void 0:t()){this.id=eCe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,lf.totalNodes=lf.resolvedTargetDeltas=lf.recalculatedProjection=0,this.nodes.forEach(rCe),this.nodes.forEach(lCe),this.nodes.forEach(uCe),this.nodes.forEach(iCe),Kke(lf)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Yke)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new PP),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Qke(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),e){let f;const d=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Xke(d,250),h2.hasAnimatedSinceResize&&(h2.hasAnimatedSinceResize=!1,this.nodes.forEach(JL))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||pCe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:m}=c.getProps(),v=!this.targetLayout||!RX(this.targetLayout,p)||h,b=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const x={...AP(g,"layout"),onPlay:y,onComplete:m};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||JL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cCe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ZL);return}this.isUpdating||this.nodes.forEach(sCe),this.isUpdating=!1,this.nodes.forEach(aCe),this.nodes.forEach(tCe),this.nodes.forEach(nCe),this.clearAllSnapshots();const a=performance.now();gr.delta=ic(0,1e3/60,a-gr.timestamp),gr.timestamp=a,gr.isProcessing=!0,F$.update.process(gr),F$.preRender.process(gr),F$.render.process(gr),gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(oCe),this.sharedNodes.forEach(fCe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!PX(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(a||af(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),gCe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return dn();const a=s.measureViewportBox(),{scroll:l}=this.root;return l&&(fu(a.x,l.offset.x),fu(a.y,l.offset.y)),a}removeElementScroll(s){const a=dn();ao(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:f}=u;if(u!==this.root&&c&&f.layoutScroll){if(c.isRoot){ao(a,s);const{scroll:d}=this.root;d&&(fu(a.x,-d.offset.x),fu(a.y,-d.offset.y))}fu(a.x,c.offset.x),fu(a.y,c.offset.y)}}return a}applyTransform(s,a=!1){const l=dn();ao(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Qh(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),af(c.latestValues)&&Qh(l,c.latestValues)}return af(this.latestValues)&&Qh(l,this.latestValues),l}removeTransform(s){const a=dn();ao(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!af(u.latestValues))continue;GT(u.latestValues)&&u.updateSnapshot();const c=dn(),f=u.measurePageBox();ao(c,f),qL(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return af(this.latestValues)&&qL(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=gr.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dn(),this.relativeTargetOrigin=dn(),gy(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),ao(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=dn(),this.targetWithTransforms=dn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pke(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ao(this.target,this.layout.layoutBox),EX(this.target,this.targetDelta)):ao(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dn(),this.relativeTargetOrigin=dn(),gy(this.relativeTargetOrigin,this.target,h.target),ao(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}lf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||GT(this.parent.latestValues)||_X(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===gr.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;ao(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;kke(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=Kh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Kh(),this.projectionDeltaWithTransform=Kh());const g=this.projectionTransform;py(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=XL(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==d||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),lf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=Kh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=dn(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=h!==p,y=this.getStack(),m=!y||y.members.length<=1,v=!!(g&&!m&&this.options.crossfade===!0&&!this.path.some(hCe));this.animationProgress=0;let b;this.mixTargetDelta=x=>{const w=x/1e3;e7(f.x,s.x,w),e7(f.y,s.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gy(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dCe(this.relativeTarget,this.relativeTargetOrigin,d,w),b&&Hke(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=dn()),ao(b,this.relativeTarget)),g&&(this.animationValues=c,zke(c,u,this.latestValues,w,v,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_t.update(()=>{h2.hasAnimatedSinceResize=!0,this.currentAnimation=Zke(0,QL,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=s;if(!(!a||!l||!u)){if(this!==s&&this.layout&&u&&OX(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||dn();const f=Xi(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const d=Xi(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+d}ao(a,l),Qh(a,c),py(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new qke),this.sharedNodes.get(s).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<KL.length;c++){const f="rotate"+KL[c];l[f]&&(u[f]=l[f],s.setStaticValue(f,0))}s.render();for(const c in u)s.setStaticValue(c,u[c]);s.scheduleRender()}getProjectionStyles(s){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Jke;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=d2(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=d2(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!af(this.latestValues)&&(g.transform=c?c({},""):"none",this.hasProjected=!1),g}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=XL(this.projectionDeltaWithTransform,this.treeScale,d),c&&(u.transform=c(d,u.transform));const{x:h,y:p}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in xw){if(d[g]===void 0)continue;const{correct:y,applyTo:m}=xw[g],v=u.transform==="none"?d[g]:y(d[g],f);if(m){const b=m.length;for(let x=0;x<b;x++)u[m[x]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=f===this?d2(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(ZL),this.root.sharedNodes.clear()}}}function tCe(e){e.updateLayout()}function nCe(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:o}=e.options,s=n.source!==e.layout.source;o==="size"?fo(f=>{const d=s?n.measuredBox[f]:n.layoutBox[f],h=Xi(d);d.min=r[f].min,d.max=d.min+h}):OX(o,n.layoutBox,r)&&fo(f=>{const d=s?n.measuredBox[f]:n.layoutBox[f],h=Xi(r[f]);d.max=d.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+h)});const a=Kh();py(a,r,n.layoutBox);const l=Kh();s?py(l,e.applyTransform(i,!0),n.measuredBox):py(l,r,n.layoutBox);const u=!PX(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=dn();gy(p,n.layoutBox,d.layoutBox);const g=dn();gy(g,r,h.layoutBox),RX(p,g)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function rCe(e){lf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function iCe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function oCe(e){e.clearSnapshot()}function ZL(e){e.clearMeasurements()}function sCe(e){e.isLayoutDirty=!1}function aCe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function JL(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function lCe(e){e.resolveTargetDelta()}function uCe(e){e.calcProjection()}function cCe(e){e.resetRotation()}function fCe(e){e.removeLeadSnapshot()}function e7(e,t,n){e.translate=Wt(t.translate,0,n),e.scale=Wt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function t7(e,t,n,r){e.min=Wt(t.min,n.min,r),e.max=Wt(t.max,n.max,r)}function dCe(e,t,n,r){t7(e.x,t.x,n.x,r),t7(e.y,t.y,n.y,r)}function hCe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const pCe={duration:.45,ease:[.4,0,.1,1]},n7=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),r7=n7("applewebkit/")&&!n7("chrome/")?Math.round:sn;function i7(e){e.min=r7(e.min),e.max=r7(e.max)}function gCe(e){i7(e.x),i7(e.y)}function OX(e,t,n){return e==="position"||e==="preserve-aspect"&&!HT(YL(t),YL(n),.2)}const mCe=DX({attachResizeListener:(e,t)=>ll(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),U$={current:void 0},NX=DX({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!U$.current){const e=new mCe({});e.mount(window),e.setOptions({layoutScroll:!0}),U$.current=e}return U$.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),yCe={pan:{Feature:Fke},drag:{Feature:Mke,ProjectionNode:NX,MeasureLayout:TX}},vCe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function bCe(e){const t=vCe.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function XT(e,t,n=1){const[r,i]=bCe(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const s=o.trim();return vX(s)?parseFloat(s):s}else return LT(i)?XT(i,t,n+1):i}function xCe(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const o=i.get();if(!LT(o))return;const s=XT(o,r);s&&i.set(s)});for(const i in t){const o=t[i];if(!LT(o))continue;const s=XT(o,r);s&&(t[i]=s,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:t,transitionEnd:n}}const wCe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),IX=e=>wCe.has(e),SCe=e=>Object.keys(e).some(IX),o7=e=>e===Od||e===Te,s7=(e,t)=>parseFloat(e.split(", ")[t]),a7=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return s7(i[1],t);{const o=r.match(/^matrix\((.+)\)$/);return o?s7(o[1],e):0}},kCe=new Set(["x","y","z"]),CCe=rv.filter(e=>!kCe.has(e));function _Ce(e){const t=[];return CCe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Zp={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:a7(4,13),y:a7(5,14)};Zp.translateX=Zp.x;Zp.translateY=Zp.y;const ECe=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:s}=o,a={};s==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=Zp[u](r,o)}),t.render();const l=t.measureViewportBox();return n.forEach(u=>{const c=t.getValue(u);c&&c.jump(a[u]),e[u]=Zp[u](l,o)}),e},$Ce=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(IX);let o=[],s=!1;const a=[];if(i.forEach(l=>{const u=e.getValue(l);if(!e.hasValue(l))return;let c=n[l],f=Im(c);const d=t[l];let h;if(Sw(d)){const p=d.length,g=d[0]===null?1:0;c=d[g],f=Im(c);for(let y=g;y<p&&d[y]!==null;y++)h?kw(Im(d[y])===h):h=Im(d[y])}else h=Im(d);if(f!==h)if(o7(f)&&o7(h)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof d=="string"?t[l]=parseFloat(d):Array.isArray(d)&&h===Te&&(t[l]=d.map(parseFloat))}else f!=null&&f.transform&&(h!=null&&h.transform)&&(c===0||d===0)?c===0?u.set(h.transform(c)):t[l]=f.transform(d):(s||(o=_Ce(e),s=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:t[l],u.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=ECe(t,e,a);return o.length&&o.forEach(([c,f])=>{e.getValue(c).set(f)}),e.render(),oC&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function ACe(e,t,n,r){return SCe(t)?$Ce(e,t,n,r):{target:t,transitionEnd:r}}const TCe=(e,t,n,r)=>{const i=xCe(e,t,r);return t=i.target,r=i.transitionEnd,ACe(e,t,n,r)},KT={current:null},LX={current:!1};function MCe(){if(LX.current=!0,!!oC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>KT.current=e.matches;e.addListener(t),t()}else KT.current=!1}function FCe(e,t,n){const{willChange:r}=t;for(const i in t){const o=t[i],s=n[i];if(bi(o))e.addValue(i,o),$w(r)&&r.add(i);else if(bi(s))e.addValue(i,Qp(o,{owner:e})),$w(r)&&r.remove(i);else if(s!==o)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(o)}else{const a=e.getStaticValue(i);e.addValue(i,Qp(a!==void 0?a:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const l7=new WeakMap,zX=Object.keys(s1),PCe=zX.length,u7=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],RCe=pP.length;class DCe{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>_t.render(this.render,!1,!0);const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=aC(n),this.isVariantNode=CY(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const f in c){const d=c[f];a[f]!==void 0&&bi(d)&&(d.set(a[f],!1),$w(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,l7.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),LX.current||MCe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:KT.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){l7.delete(this.current),this.projection&&this.projection.unmount(),Pl(this.notifyUpdate),Pl(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Dd.has(t),i=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&_t.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,o){let s,a;for(let l=0;l<PCe;l++){const u=zX[l],{isEnabled:c,Feature:f,ProjectionNode:d,MeasureLayout:h}=s1[u];d&&(s=d),c(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:h}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||f&&Yh(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:d,layoutRoot:h})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<u7.length;r++){const i=u7[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=t["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=FCe(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<RCe;r++){const i=pP[r],o=this.props[i];(o1(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Qp(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=SP(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!bi(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new PP),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class jX extends DCe{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},o){let s=XSe(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),s&&(s=i(s))),o){GSe(this,r,s);const a=TCe(this,r,s,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function OCe(e){return window.getComputedStyle(e)}class NCe extends jX{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Dd.has(n)){const r=$P(n);return r&&r.default||0}else{const r=OCe(t),i=(AY(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return $X(t,n)}build(t,n,r,i){yP(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return wP(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;bi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){DY(t,n,r,i)}}class ICe extends jX{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Dd.has(n)){const r=$P(n);return r&&r.default||0}return n=OY.has(n)?n:dP(n),t.getAttribute(n)}measureInstanceViewportBox(){return dn()}scrapeMotionValuesFromProps(t,n){return IY(t,n)}build(t,n,r,i){bP(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){NY(t,n,r,i)}mount(t){this.isSVGTag=xP(t.tagName),super.mount(t)}}const LCe=(e,t)=>mP(e)?new ICe(t,{enableHardwareAcceleration:!1}):new NCe(t,{enableHardwareAcceleration:!0}),zCe={layout:{ProjectionNode:NX,MeasureLayout:TX}},jCe={...cke,...Fwe,...yCe,...zCe},fC=j2e((e,t)=>vwe(e,t,jCe,LCe));function BX(){const e=T.useRef(!1);return fP(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function BCe(){const e=BX(),[t,n]=T.useState(0),r=T.useCallback(()=>{e.current&&n(t+1)},[t]);return[T.useCallback(()=>_t.postRender(r),[r]),t]}class UCe extends T.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function VCe({children:e,isPresent:t}){const n=T.useId(),r=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0});return T.useInsertionEffect(()=>{const{width:o,height:s,top:a,left:l}=i.current;if(t||!r.current||!o||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),T.createElement(UCe,{isPresent:t,childRef:r,sizeRef:i},T.cloneElement(e,{ref:r}))}const V$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s})=>{const a=kP(WCe),l=T.useId(),u=T.useMemo(()=>({id:l,initial:t,isPresent:n,custom:i,onExitComplete:c=>{a.set(c,!0);for(const f of a.values())if(!f)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),o?void 0:[n]);return T.useMemo(()=>{a.forEach((c,f)=>a.set(f,!1))},[n]),T.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),s==="popLayout"&&(e=T.createElement(VCe,{isPresent:n},e)),T.createElement(nv.Provider,{value:u},e)};function WCe(){return new Map}function HCe(e){return T.useEffect(()=>()=>e(),[])}const uf=e=>e.key||"";function qCe(e,t){e.forEach(n=>{const r=uf(n);t.set(r,n)})}function GCe(e){const t=[];return T.Children.forEach(e,n=>{T.isValidElement(n)&&t.push(n)}),t}const UX=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:s="sync"})=>{const a=T.useContext(gP).forceRender||BCe()[0],l=BX(),u=GCe(e);let c=u;const f=T.useRef(new Map).current,d=T.useRef(c),h=T.useRef(new Map).current,p=T.useRef(!0);if(fP(()=>{p.current=!1,qCe(u,h),d.current=c}),HCe(()=>{p.current=!0,h.clear(),f.clear()}),p.current)return T.createElement(T.Fragment,null,c.map(v=>T.createElement(V$,{key:uf(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:s},v)));c=[...c];const g=d.current.map(uf),y=u.map(uf),m=g.length;for(let v=0;v<m;v++){const b=g[v];y.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return s==="wait"&&f.size&&(c=[]),f.forEach((v,b)=>{if(y.indexOf(b)!==-1)return;const x=h.get(b);if(!x)return;const w=g.indexOf(b);let k=v;if(!k){const S=()=>{f.delete(b);const C=Array.from(h.keys()).filter(_=>!y.includes(_));if(C.forEach(_=>h.delete(_)),d.current=u.filter(_=>{const $=uf(_);return $===b||C.includes($)}),!f.size){if(l.current===!1)return;a(),r&&r()}};k=T.createElement(V$,{key:uf(x),isPresent:!1,onExitComplete:S,custom:t,presenceAffectsLayout:o,mode:s},x),f.set(b,k)}c.splice(w,0,k)}),c=c.map(v=>{const b=v.key;return f.has(b)?v:T.createElement(V$,{key:uf(v),isPresent:!0,presenceAffectsLayout:o,mode:s},v)}),T.createElement(T.Fragment,null,f.size?c:c.map(v=>T.cloneElement(v)))};class YCe{constructor(){this.componentControls=new Set}subscribe(t){return this.componentControls.add(t),()=>this.componentControls.delete(t)}start(t,n){this.componentControls.forEach(r=>{r.start(t.nativeEvent||t,n)})}}const XCe=()=>new YCe;function KCe(){return kP(XCe)}var QCe={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let r=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},VX=T.memo(e=>{const{id:t,message:n,onCloseComplete:r,onRequestRemove:i,requestClose:o=!1,position:s="bottom",duration:a=5e3,containerStyle:l,motionVariants:u=QCe,toastSpacing:c="0.5rem"}=e,[f,d]=T.useState(a),h=Rke();oL(()=>{h||r==null||r()},[h]),oL(()=>{d(a)},[a]);const p=()=>d(null),g=()=>d(a),y=()=>{h&&i()};T.useEffect(()=>{h&&o&&i()},[h,o,i]),M2e(y,f);const m=T.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:c,...l}),[l,c]),v=T.useMemo(()=>A2e(s),[s]);return E.jsx(fC.div,{layout:!0,className:"chakra-toast",variants:u,initial:"initial",animate:"animate",exit:"exit",onHoverStart:p,onHoverEnd:g,custom:{position:s},style:v,children:E.jsx(ke.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:m,children:aa(n,{id:t,onClose:y})})})});VX.displayName="ToastComponent";function ZCe(e,t){var n;const r=e??"bottom",o={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(n=o==null?void 0:o[t])!=null?n:r}var c7={path:E.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[E.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),E.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),E.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},yt=Ee((e,t)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:o=!1,children:s,className:a,__css:l,...u}=e,c=Xe("chakra-icon",a),f=Bl("Icon",e),d={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...l,...f},h={ref:t,focusable:o,className:c,__css:d},p=r??c7.viewBox;if(n&&typeof n!="string")return E.jsx(ke.svg,{as:n,...h,...u});const g=s??c7.path;return E.jsx(ke.svg,{verticalAlign:"middle",viewBox:p,...h,...u,children:g})});yt.displayName="Icon";function JCe(e){return E.jsx(yt,{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function e_e(e){return E.jsx(yt,{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function f7(e){return E.jsx(yt,{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var t_e=jde({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),dC=Ee((e,t)=>{const n=Bl("Spinner",e),{label:r="Loading...",thickness:i="2px",speed:o="0.45s",emptyColor:s="transparent",className:a,...l}=ir(e),u=Xe("chakra-spinner",a),c={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:s,borderLeftColor:s,animation:`${t_e} ${o} linear infinite`,...n};return E.jsx(ke.div,{ref:t,__css:c,className:u,...l,children:r&&E.jsx(ke.span,{srOnly:!0,children:r})})});dC.displayName="Spinner";var[n_e,RP]=jn({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[r_e,DP]=jn({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),WX={info:{icon:e_e,colorScheme:"blue"},warning:{icon:f7,colorScheme:"orange"},success:{icon:JCe,colorScheme:"green"},error:{icon:f7,colorScheme:"red"},loading:{icon:dC,colorScheme:"blue"}};function i_e(e){return WX[e].colorScheme}function o_e(e){return WX[e].icon}var HX=Ee(function(t,n){const r=DP(),{status:i}=RP(),o={display:"inline",...r.description};return E.jsx(ke.div,{ref:n,"data-status":i,...t,className:Xe("chakra-alert__desc",t.className),__css:o})});HX.displayName="AlertDescription";function qX(e){const{status:t}=RP(),n=o_e(t),r=DP(),i=t==="loading"?r.spinner:r.icon;return E.jsx(ke.span,{display:"inherit","data-status":t,...e,className:Xe("chakra-alert__icon",e.className),__css:i,children:e.children||E.jsx(n,{h:"100%",w:"100%"})})}qX.displayName="AlertIcon";var GX=Ee(function(t,n){const r=DP(),{status:i}=RP();return E.jsx(ke.div,{ref:n,"data-status":i,...t,className:Xe("chakra-alert__title",t.className),__css:r.title})});GX.displayName="AlertTitle";var YX=Ee(function(t,n){var r;const{status:i="info",addRole:o=!0,...s}=ir(t),a=(r=t.colorScheme)!=null?r:i_e(i),l=Ul("Alert",{...t,colorScheme:a}),u={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...l.container};return E.jsx(n_e,{value:{status:i},children:E.jsx(r_e,{value:l,children:E.jsx(ke.div,{"data-status":i,role:o?"alert":void 0,ref:n,...s,className:Xe("chakra-alert",t.className),__css:u})})})});YX.displayName="Alert";function s_e(e){return E.jsx(yt,{focusable:"false","aria-hidden":!0,...e,children:E.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var XX=Ee(function(t,n){const r=Bl("CloseButton",t),{children:i,isDisabled:o,__css:s,...a}=ir(t),l={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return E.jsx(ke.button,{type:"button","aria-label":"Close",ref:n,disabled:o,__css:{...l,...r,...s},...a,children:i||E.jsx(s_e,{width:"1em",height:"1em"})})});XX.displayName="CloseButton";var a_e={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},ra=l_e(a_e);function l_e(e){let t=e;const n=new Set,r=i=>{t=i(t),n.forEach(o=>o())};return{getState:()=>t,subscribe:i=>(n.add(i),()=>{r(()=>e),n.delete(i)}),removeToast:(i,o)=>{r(s=>({...s,[o]:s[o].filter(a=>a.id!=i)}))},notify:(i,o)=>{const s=u_e(i,o),{position:a,id:l}=s;return r(u=>{var c,f;const h=a.includes("top")?[s,...(c=u[a])!=null?c:[]]:[...(f=u[a])!=null?f:[],s];return{...u,[a]:h}}),l},update:(i,o)=>{i&&r(s=>{const a={...s},{position:l,index:u}=iL(a,i);return l&&u!==-1&&(a[l][u]={...a[l][u],...o,message:KX(o)}),a})},closeAll:({positions:i}={})=>{r(o=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((l,u)=>(l[u]=o[u].map(c=>({...c,requestClose:!0})),l),{...o}))},close:i=>{r(o=>{const s=xY(o,i);return s?{...o,[s]:o[s].map(a=>a.id==i?{...a,requestClose:!0}:a)}:o})},isActive:i=>!!iL(ra.getState(),i).position}}var d7=0;function u_e(e,t={}){var n,r;d7+=1;const i=(n=t.id)!=null?n:d7,o=(r=t.position)!=null?r:"bottom";return{id:i,message:e,position:o,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>ra.removeToast(String(i),o),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var c_e=e=>{const{status:t,variant:n="solid",id:r,title:i,isClosable:o,onClose:s,description:a,colorScheme:l,icon:u}=e,c=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return E.jsxs(YX,{addRole:!1,status:t,variant:n,id:c==null?void 0:c.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[E.jsx(qX,{children:u}),E.jsxs(ke.div,{flex:"1",maxWidth:"100%",children:[i&&E.jsx(GX,{id:c==null?void 0:c.title,children:i}),a&&E.jsx(HX,{id:c==null?void 0:c.description,display:"block",children:a})]}),o&&E.jsx(XX,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function KX(e={}){const{render:t,toastComponent:n=c_e}=e;return i=>typeof t=="function"?t({...i,...e}):E.jsx(n,{...i,...e})}function f_e(e,t){const n=i=>{var o;return{...t,...i,position:ZCe((o=i==null?void 0:i.position)!=null?o:t==null?void 0:t.position,e)}},r=i=>{const o=n(i),s=KX(o);return ra.notify(s,o)};return r.update=(i,o)=>{ra.update(i,n(o))},r.promise=(i,o)=>{const s=r({...o.loading,status:"loading",duration:null});i.then(a=>r.update(s,{status:"success",duration:5e3,...aa(o.success,a)})).catch(a=>r.update(s,{status:"error",duration:5e3,...aa(o.error,a)}))},r.closeAll=ra.closeAll,r.close=ra.close,r.isActive=ra.isActive,r}var[d_e,h_e]=jn({name:"ToastOptionsContext",strict:!1}),p_e=e=>{const t=T.useSyncExternalStore(ra.subscribe,ra.getState,ra.getState),{motionVariants:n,component:r=VX,portalProps:i}=e,s=Object.keys(t).map(a=>{const l=t[a];return E.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${a}`,id:`chakra-toast-manager-${a}`,style:T2e(a),children:E.jsx(UX,{initial:!1,children:l.map(u=>E.jsx(r,{motionVariants:n,...u},u.id))})},a)});return E.jsx(J1,{...i,children:s})};function g_e(e){const{theme:t}=WG(),n=h_e();return T.useMemo(()=>f_e(t.direction,{...n,...e}),[e,t.direction,n])}var m_e=e=>function({children:n,theme:r=e,toastOptions:i,...o}){return E.jsxs(E2e,{theme:r,...o,children:[E.jsx(d_e,{value:i==null?void 0:i.defaultOptions,children:n}),E.jsx(p_e,{...i})]})},y_e=m_e(fY),v_e=Object.defineProperty,b_e=(e,t,n)=>t in e?v_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xt=(e,t,n)=>(b_e(e,typeof t!="symbol"?t+"":t,n),n);function h7(e){return e.sort((t,n)=>{const r=t.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var x_e=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function p7(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function g7(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var QT=typeof window<"u"?T.useLayoutEffect:T.useEffect,Tw=e=>e,w_e=class{constructor(){Xt(this,"descendants",new Map),Xt(this,"register",e=>{if(e!=null)return x_e(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),Xt(this,"unregister",e=>{this.descendants.delete(e);const t=h7(Array.from(this.descendants.keys()));this.assignIndex(t)}),Xt(this,"destroy",()=>{this.descendants.clear()}),Xt(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})}),Xt(this,"count",()=>this.descendants.size),Xt(this,"enabledCount",()=>this.enabledValues().length),Xt(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index)),Xt(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),Xt(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),Xt(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),Xt(this,"first",()=>this.item(0)),Xt(this,"firstEnabled",()=>this.enabledItem(0)),Xt(this,"last",()=>this.item(this.descendants.size-1)),Xt(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),Xt(this,"indexOf",e=>{var t,n;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1}),Xt(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),Xt(this,"next",(e,t=!0)=>{const n=p7(e,this.count(),t);return this.item(n)}),Xt(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=p7(r,this.enabledCount(),t);return this.enabledItem(i)}),Xt(this,"prev",(e,t=!0)=>{const n=g7(e,this.count()-1,t);return this.item(n)}),Xt(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=g7(r,this.enabledCount()-1,t);return this.enabledItem(i)}),Xt(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),r=h7(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(r)})}};function S_e(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function ad(...e){return t=>{e.forEach(n=>{S_e(n,t)})}}function k_e(...e){return T.useMemo(()=>ad(...e),e)}function C_e(){const e=T.useRef(new w_e);return QT(()=>()=>e.current.destroy()),e.current}var[__e,QX]=jn({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function E_e(e){const t=QX(),[n,r]=T.useState(-1),i=T.useRef(null);QT(()=>()=>{i.current&&t.unregister(i.current)},[]),QT(()=>{if(!i.current)return;const s=Number(i.current.dataset.index);n!=s&&!Number.isNaN(s)&&r(s)});const o=Tw(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(i.current),register:ad(o,i)}}function ZX(){return[Tw(__e),()=>Tw(QX()),()=>C_e(),i=>E_e(i)]}var[$_e,hC]=jn({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[A_e,OP]=jn({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[T_e,Oat,M_e,F_e]=ZX(),JX=Ee(function(t,n){const{getButtonProps:r}=OP(),i=r(t,n),s={display:"flex",alignItems:"center",width:"100%",outline:0,...hC().button};return E.jsx(ke.button,{...i,className:Xe("chakra-accordion__button",t.className),__css:s})});JX.displayName="AccordionButton";function eK(e){const{value:t,defaultValue:n,onChange:r,shouldUpdate:i=(d,h)=>d!==h}=e,o=f2(r),s=f2(i),[a,l]=T.useState(n),u=t!==void 0,c=u?t:a,f=f2(d=>{const p=typeof d=="function"?d(c):d;s(c,p)&&(u||l(p),o(p))},[u,o,c,s]);return[c,f]}function P_e(e){const{onChange:t,defaultIndex:n,index:r,allowMultiple:i,allowToggle:o,...s}=e;O_e(e),N_e(e);const a=M_e(),[l,u]=T.useState(-1);T.useEffect(()=>()=>{u(-1)},[]);const[c,f]=eK({value:r,defaultValue(){return i?n??[]:n??-1},onChange:t});return{index:c,setIndex:f,htmlProps:s,getAccordionItemProps:h=>{let p=!1;return h!==null&&(p=Array.isArray(c)?c.includes(h):c===h),{isOpen:p,onChange:y=>{if(h!==null)if(i&&Array.isArray(c)){const m=y?c.concat(h):c.filter(v=>v!==h);f(m)}else y?f(h):o&&f(-1)}}},focusedIndex:l,setFocusedIndex:u,descendants:a}}var[R_e,NP]=jn({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function D_e(e){const{isDisabled:t,isFocusable:n,id:r,...i}=e,{getAccordionItemProps:o,setFocusedIndex:s}=NP(),a=T.useRef(null),l=T.useId(),u=r??l,c=`accordion-button-${u}`,f=`accordion-panel-${u}`;I_e(e);const{register:d,index:h,descendants:p}=F_e({disabled:t&&!n}),{isOpen:g,onChange:y}=o(h===-1?null:h);L_e({isOpen:g,isDisabled:t});const m=()=>{y==null||y(!0)},v=()=>{y==null||y(!1)},b=T.useCallback(()=>{y==null||y(!g),s(h)},[h,s,g,y]),x=T.useCallback(C=>{const $={ArrowDown:()=>{const A=p.nextEnabled(h);A==null||A.node.focus()},ArrowUp:()=>{const A=p.prevEnabled(h);A==null||A.node.focus()},Home:()=>{const A=p.firstEnabled();A==null||A.node.focus()},End:()=>{const A=p.lastEnabled();A==null||A.node.focus()}}[C.key];$&&(C.preventDefault(),$(C))},[p,h]),w=T.useCallback(()=>{s(h)},[s,h]),k=T.useCallback(function(_={},$=null){return{..._,type:"button",ref:ad(d,a,$),id:c,disabled:!!t,"aria-expanded":!!g,"aria-controls":f,onClick:Xu(_.onClick,b),onFocus:Xu(_.onFocus,w),onKeyDown:Xu(_.onKeyDown,x)}},[c,t,g,b,w,x,f,d]),S=T.useCallback(function(_={},$=null){return{..._,ref:$,role:"region",id:f,"aria-labelledby":c,hidden:!g}},[c,g,f]);return{isOpen:g,isDisabled:t,isFocusable:n,onOpen:m,onClose:v,getButtonProps:k,getPanelProps:S,htmlProps:i}}function O_e(e){const t=e.index||e.defaultIndex,n=t!=null&&!Array.isArray(t)&&e.allowMultiple;ev({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof t},`})}function N_e(e){ev({condition:!!(e.allowMultiple&&e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function I_e(e){ev({condition:!!(e.isFocusable&&!e.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function L_e(e){ev({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}function tK(e){const{isOpen:t,isDisabled:n}=OP(),{reduceMotion:r}=NP(),i=Xe("chakra-accordion__icon",e.className),o=hC(),s={opacity:n?.4:1,transform:t?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center",...o.icon};return E.jsx(yt,{viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:s,...e,children:E.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}tK.displayName="AccordionIcon";var nK=Ee(function(t,n){const{children:r,className:i}=t,{htmlProps:o,...s}=D_e(t),l={...hC().container,overflowAnchor:"none"},u=T.useMemo(()=>s,[s]);return E.jsx(A_e,{value:u,children:E.jsx(ke.div,{ref:n,...o,className:Xe("chakra-accordion__item",i),__css:l,children:typeof r=="function"?r({isExpanded:!!s.isOpen,isDisabled:!!s.isDisabled}):r})})});nK.displayName="AccordionItem";var qb={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},m7={enter:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.enter}),exit:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.exit})},z_e=e=>e!=null&&parseInt(e.toString(),10)>0,y7={exit:{height:{duration:.2,ease:qb.ease},opacity:{duration:.3,ease:qb.ease}},enter:{height:{duration:.3,ease:qb.ease},opacity:{duration:.4,ease:qb.ease}}},j_e={exit:({animateOpacity:e,startingHeight:t,transition:n,transitionEnd:r,delay:i})=>{var o;return{...e&&{opacity:z_e(t)?1:0},height:t,transitionEnd:r==null?void 0:r.exit,transition:(o=n==null?void 0:n.exit)!=null?o:m7.exit(y7.exit,i)}},enter:({animateOpacity:e,endingHeight:t,transition:n,transitionEnd:r,delay:i})=>{var o;return{...e&&{opacity:1},height:t,transitionEnd:r==null?void 0:r.enter,transition:(o=n==null?void 0:n.enter)!=null?o:m7.enter(y7.enter,i)}}},rK=T.forwardRef((e,t)=>{const{in:n,unmountOnExit:r,animateOpacity:i=!0,startingHeight:o=0,endingHeight:s="auto",style:a,className:l,transition:u,transitionEnd:c,...f}=e,[d,h]=T.useState(!1);T.useEffect(()=>{const v=setTimeout(()=>{h(!0)});return()=>clearTimeout(v)},[]),ev({condition:Number(o)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const p=parseFloat(o.toString())>0,g={startingHeight:o,endingHeight:s,animateOpacity:i,transition:d?u:{enter:{duration:0}},transitionEnd:{enter:c==null?void 0:c.enter,exit:r?c==null?void 0:c.exit:{...c==null?void 0:c.exit,display:p?"block":"none"}}},y=r?n:!0,m=n||r?"enter":"exit";return E.jsx(UX,{initial:!1,custom:g,children:y&&E.jsx(fC.div,{ref:t,...f,className:Xe("chakra-collapse",l),style:{overflow:"hidden",display:"block",...a},custom:g,variants:j_e,initial:r?"exit":!1,animate:m,exit:"exit"})})});rK.displayName="Collapse";var iK=Ee(function(t,n){const{className:r,motionProps:i,...o}=t,{reduceMotion:s}=NP(),{getPanelProps:a,isOpen:l}=OP(),u=a(o,n),c=Xe("chakra-accordion__panel",r),f=hC();s||delete u.hidden;const d=E.jsx(ke.div,{...u,__css:f.panel,className:c});return s?d:E.jsx(rK,{in:l,...i,children:d})});iK.displayName="AccordionPanel";var oK=Ee(function({children:t,reduceMotion:n,...r},i){const o=Ul("Accordion",r),s=ir(r),{htmlProps:a,descendants:l,...u}=P_e(s),c=T.useMemo(()=>({...u,reduceMotion:!!n}),[u,n]);return E.jsx(T_e,{value:l,children:E.jsx(R_e,{value:c,children:E.jsx($_e,{value:o,children:E.jsx(ke.div,{ref:i,...a,className:Xe("chakra-accordion",r.className),__css:o.root,children:t})})})})});oK.displayName="Accordion";var ZT=Ee(function(t,n){const{htmlWidth:r,htmlHeight:i,alt:o,...s}=t;return E.jsx("img",{width:r,height:i,ref:n,alt:o,...s})});ZT.displayName="NativeImage";function B_e(e){const{loading:t,src:n,srcSet:r,onLoad:i,onError:o,crossOrigin:s,sizes:a,ignoreFallback:l}=e,[u,c]=T.useState("pending");T.useEffect(()=>{c(n?"loading":"pending")},[n]);const f=T.useRef(),d=T.useCallback(()=>{if(!n)return;h();const p=new Image;p.src=n,s&&(p.crossOrigin=s),r&&(p.srcset=r),a&&(p.sizes=a),t&&(p.loading=t),p.onload=g=>{h(),c("loaded"),i==null||i(g)},p.onerror=g=>{h(),c("failed"),o==null||o(g)},f.current=p},[n,s,r,a,i,o,t]),h=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return Bp(()=>{if(!l)return u==="loading"&&d(),()=>{h()}},[u,d,l]),l?"loaded":u}var U_e=(e,t)=>e!=="loaded"&&t==="beforeLoadOrError"||e==="failed"&&t==="onError";function V_e(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}var sK=Ee(function(t,n){const{fallbackSrc:r,fallback:i,src:o,srcSet:s,align:a,fit:l,loading:u,ignoreFallback:c,crossOrigin:f,fallbackStrategy:d="beforeLoadOrError",referrerPolicy:h,...p}=t,g=r!==void 0||i!==void 0,y=u!=null||c||!g,m=B_e({...t,crossOrigin:f,ignoreFallback:y}),v=U_e(m,d),b={ref:n,objectFit:l,objectPosition:a,...y?p:V_e(p,["onError","onLoad"])};return v?i||E.jsx(ke.img,{as:ZT,className:"chakra-image__placeholder",src:r,...b}):E.jsx(ke.img,{as:ZT,src:o,srcSet:s,crossOrigin:f,loading:u,referrerPolicy:h,className:"chakra-image",...b})});sK.displayName="Image";function pC(e){return T.Children.toArray(e).filter(t=>T.isValidElement(t))}var[W_e,H_e]=jn({strict:!1,name:"ButtonGroupContext"}),q_e={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},G_e={horizontal:e=>({"& > *:not(style) ~ *:not(style)":{marginStart:e}}),vertical:e=>({"& > *:not(style) ~ *:not(style)":{marginTop:e}})},aK=Ee(function(t,n){const{size:r,colorScheme:i,variant:o,className:s,spacing:a="0.5rem",isAttached:l,isDisabled:u,orientation:c="horizontal",...f}=t,d=Xe("chakra-button__group",s),h=T.useMemo(()=>({size:r,colorScheme:i,variant:o,isDisabled:u}),[r,i,o,u]);let p={display:"inline-flex",...l?q_e[c]:G_e[c](a)};const g=c==="vertical";return E.jsx(W_e,{value:h,children:E.jsx(ke.div,{ref:n,role:"group",__css:p,className:d,"data-attached":l?"":void 0,"data-orientation":c,flexDir:g?"column":void 0,...f})})});aK.displayName="ButtonGroup";function Y_e(e){const[t,n]=T.useState(!e);return{ref:T.useCallback(o=>{o&&n(o.tagName==="BUTTON")},[]),type:t?"button":void 0}}function JT(e){const{children:t,className:n,...r}=e,i=T.isValidElement(t)?T.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,o=Xe("chakra-button__icon",n);return E.jsx(ke.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:o,children:i})}JT.displayName="ButtonIcon";function e3(e){const{label:t,placement:n,spacing:r="0.5rem",children:i=E.jsx(dC,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:s,...a}=e,l=Xe("chakra-button__spinner",o),u=n==="start"?"marginEnd":"marginStart",c=T.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[u]:t?r:0,fontSize:"1em",lineHeight:"normal",...s}),[s,t,u,r]);return E.jsx(ke.div,{className:l,...a,__css:c,children:i})}e3.displayName="ButtonSpinner";var ko=Ee((e,t)=>{const n=H_e(),r=Bl("Button",{...n,...e}),{isDisabled:i=n==null?void 0:n.isDisabled,isLoading:o,isActive:s,children:a,leftIcon:l,rightIcon:u,loadingText:c,iconSpacing:f="0.5rem",type:d,spinner:h,spinnerPlacement:p="start",className:g,as:y,...m}=ir(e),v=T.useMemo(()=>{const k={...r==null?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:k}}},[r,n]),{ref:b,type:x}=Y_e(y),w={rightIcon:u,leftIcon:l,iconSpacing:f,children:a};return E.jsxs(ke.button,{ref:k_e(t,b),as:y,type:d??x,"data-active":po(s),"data-loading":po(o),__css:v,className:Xe("chakra-button",g),...m,disabled:i||o,children:[o&&p==="start"&&E.jsx(e3,{className:"chakra-button__spinner--start",label:c,placement:"start",spacing:f,children:h}),o?c||E.jsx(ke.span,{opacity:0,children:E.jsx(v7,{...w})}):E.jsx(v7,{...w}),o&&p==="end"&&E.jsx(e3,{className:"chakra-button__spinner--end",label:c,placement:"end",spacing:f,children:h})]})});ko.displayName="Button";function v7(e){const{leftIcon:t,rightIcon:n,children:r,iconSpacing:i}=e;return E.jsxs(E.Fragment,{children:[t&&E.jsx(JT,{marginEnd:i,children:t}),r,n&&E.jsx(JT,{marginStart:i,children:n})]})}var Mw=Ee((e,t)=>{const{icon:n,children:r,isRound:i,"aria-label":o,...s}=e,a=n||r,l=T.isValidElement(a)?T.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return E.jsx(ko,{padding:"0",borderRadius:i?"full":void 0,ref:t,"aria-label":o,...s,children:l})});Mw.displayName="IconButton";var[X_e,K_e]=jn({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Q_e,lK]=jn({strict:!1,name:"FormControlContext"});function Z_e(e){const{id:t,isRequired:n,isInvalid:r,isDisabled:i,isReadOnly:o,...s}=e,a=T.useId(),l=t||`field-${a}`,u=`${l}-label`,c=`${l}-feedback`,f=`${l}-helptext`,[d,h]=T.useState(!1),[p,g]=T.useState(!1),[y,m]=T.useState(!1),v=T.useCallback((S={},C=null)=>({id:f,...S,ref:ad(C,_=>{_&&g(!0)})}),[f]),b=T.useCallback((S={},C=null)=>({...S,ref:C,"data-focus":po(y),"data-disabled":po(i),"data-invalid":po(r),"data-readonly":po(o),id:S.id!==void 0?S.id:u,htmlFor:S.htmlFor!==void 0?S.htmlFor:l}),[l,i,y,r,o,u]),x=T.useCallback((S={},C=null)=>({id:c,...S,ref:ad(C,_=>{_&&h(!0)}),"aria-live":"polite"}),[c]),w=T.useCallback((S={},C=null)=>({...S,...s,ref:C,role:"group","data-focus":po(y),"data-disabled":po(i),"data-invalid":po(r),"data-readonly":po(o)}),[s,i,y,r,o]),k=T.useCallback((S={},C=null)=>({...S,ref:C,role:"presentation","aria-hidden":!0,children:S.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!o,isDisabled:!!i,isFocused:!!y,onFocus:()=>m(!0),onBlur:()=>m(!1),hasFeedbackText:d,setHasFeedbackText:h,hasHelpText:p,setHasHelpText:g,id:l,labelId:u,feedbackId:c,helpTextId:f,htmlProps:s,getHelpTextProps:v,getErrorMessageProps:x,getRootProps:w,getLabelProps:b,getRequiredIndicatorProps:k}}var uK=Ee(function(t,n){const r=Ul("Form",t),i=ir(t),{getRootProps:o,htmlProps:s,...a}=Z_e(i),l=Xe("chakra-form-control",t.className);return E.jsx(Q_e,{value:a,children:E.jsx(X_e,{value:r,children:E.jsx(ke.div,{...o({},n),className:l,__css:r.container})})})});uK.displayName="FormControl";var J_e=Ee(function(t,n){const r=lK(),i=K_e(),o=Xe("chakra-form__helper-text",t.className);return E.jsx(ke.div,{...r==null?void 0:r.getHelpTextProps(t,n),__css:i.helperText,className:o})});J_e.displayName="FormHelperText";function cK(e){const{isDisabled:t,isInvalid:n,isReadOnly:r,isRequired:i,...o}=eEe(e);return{...o,disabled:t,readOnly:r,required:i,"aria-invalid":d$(n),"aria-required":d$(i),"aria-readonly":d$(r)}}function eEe(e){var t,n,r;const i=lK(),{id:o,disabled:s,readOnly:a,required:l,isRequired:u,isInvalid:c,isReadOnly:f,isDisabled:d,onFocus:h,onBlur:p,...g}=e,y=e["aria-describedby"]?[e["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&y.push(i.feedbackId),i!=null&&i.hasHelpText&&y.push(i.helpTextId),{...g,"aria-describedby":y.join(" ")||void 0,id:o??(i==null?void 0:i.id),isDisabled:(t=s??d)!=null?t:i==null?void 0:i.isDisabled,isReadOnly:(n=a??f)!=null?n:i==null?void 0:i.isReadOnly,isRequired:(r=l??u)!=null?r:i==null?void 0:i.isRequired,isInvalid:c??(i==null?void 0:i.isInvalid),onFocus:Xu(i==null?void 0:i.onFocus,h),onBlur:Xu(i==null?void 0:i.onBlur,p)}}var fK={exports:{}},tEe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nEe=tEe,rEe=nEe;function dK(){}function hK(){}hK.resetWarningCache=dK;var iEe=function(){function e(r,i,o,s,a,l){if(l!==rEe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:hK,resetWarningCache:dK};return n.PropTypes=n,n};fK.exports=iEe();var oEe=fK.exports;const b7=zl(oEe);var[sEe,aEe]=jn({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),pK=Ee(function(t,n){const r=Ul("Input",t),{children:i,className:o,...s}=ir(t),a=Xe("chakra-input__group",o),l={},u=pC(i),c=r.field;u.forEach(d=>{var h,p;r&&(c&&d.type.id==="InputLeftElement"&&(l.paddingStart=(h=c.height)!=null?h:c.h),c&&d.type.id==="InputRightElement"&&(l.paddingEnd=(p=c.height)!=null?p:c.h),d.type.id==="InputRightAddon"&&(l.borderEndRadius=0),d.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const f=u.map(d=>{var h,p;const g=vY({size:((h=d.props)==null?void 0:h.size)||t.size,variant:((p=d.props)==null?void 0:p.variant)||t.variant});return d.type.id!=="Input"?T.cloneElement(d,g):T.cloneElement(d,Object.assign(g,l,d.props))});return E.jsx(ke.div,{className:a,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...s,children:E.jsx(sEe,{value:r,children:f})})});pK.displayName="InputGroup";var lEe=ke("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),gC=Ee(function(t,n){var r,i;const{placement:o="left",...s}=t,a=aEe(),l=a.field,c={[o==="left"?"insetStart":"insetEnd"]:"0",width:(r=l==null?void 0:l.height)!=null?r:l==null?void 0:l.h,height:(i=l==null?void 0:l.height)!=null?i:l==null?void 0:l.h,fontSize:l==null?void 0:l.fontSize,...a.element};return E.jsx(lEe,{ref:n,__css:c,...s})});gC.id="InputElement";gC.displayName="InputElement";var gK=Ee(function(t,n){const{className:r,...i}=t,o=Xe("chakra-input__left-element",r);return E.jsx(gC,{ref:n,placement:"left",className:o,...i})});gK.id="InputLeftElement";gK.displayName="InputLeftElement";var IP=Ee(function(t,n){const{className:r,...i}=t,o=Xe("chakra-input__right-element",r);return E.jsx(gC,{ref:n,placement:"right",className:o,...i})});IP.id="InputRightElement";IP.displayName="InputRightElement";var Jp=Ee(function(t,n){const{htmlSize:r,...i}=t,o=Ul("Input",i),s=ir(i),a=cK(s),l=Xe("chakra-input",t.className);return E.jsx(ke.input,{size:r,...a,__css:o.field,ref:n,className:l})});Jp.displayName="Input";Jp.id="Input";var p2=Ee(function(t,n){const r=Bl("Link",t),{className:i,isExternal:o,...s}=ir(t);return E.jsx(ke.a,{target:o?"_blank":void 0,rel:o?"noopener":void 0,ref:n,className:Xe("chakra-link",i),...s,__css:r})});p2.displayName="Link";var[uEe,mK]=jn({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),LP=Ee(function(t,n){const r=Ul("List",t),{children:i,styleType:o="none",stylePosition:s,spacing:a,...l}=ir(t),u=pC(i),f=a?{["& > *:not(style) ~ *:not(style)"]:{mt:a}}:{};return E.jsx(uEe,{value:r,children:E.jsx(ke.ul,{ref:n,listStyleType:o,listStylePosition:s,role:"list",__css:{...r.container,...f},...l,children:u})})});LP.displayName="List";var zP=Ee((e,t)=>{const{as:n,...r}=e;return E.jsx(LP,{ref:t,as:"ol",styleType:"decimal",marginStart:"1em",...r})});zP.displayName="OrderedList";var cEe=Ee(function(t,n){const{as:r,...i}=t;return E.jsx(LP,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...i})});cEe.displayName="UnorderedList";var yK=Ee(function(t,n){const r=mK();return E.jsx(ke.li,{ref:n,...t,__css:r.item})});yK.displayName="ListItem";var fEe=Ee(function(t,n){const r=mK();return E.jsx(yt,{ref:n,role:"presentation",...t,__css:r.icon})});fEe.displayName="ListIcon";var my=Ee(function(t,n){const{templateAreas:r,gap:i,rowGap:o,columnGap:s,column:a,row:l,autoFlow:u,autoRows:c,templateRows:f,autoColumns:d,templateColumns:h,...p}=t,g={display:"grid",gridTemplateAreas:r,gridGap:i,gridRowGap:o,gridColumnGap:s,gridAutoColumns:d,gridColumn:a,gridRow:l,gridAutoFlow:u,gridAutoRows:c,gridTemplateRows:f,gridTemplateColumns:h};return E.jsx(ke.div,{ref:n,__css:g,...p})});my.displayName="Grid";var vK=Object.freeze(["base","sm","md","lg","xl","2xl"]);function dEe(e,t){return Array.isArray(e)?e.map(n=>n===null?null:t(n)):gi(e)?Object.keys(e).reduce((n,r)=>(n[r]=t(e[r]),n),{}):e!=null?t(e):null}function hEe(e,t=vK){const n={};return e.forEach((r,i)=>{const o=t[i];r!=null&&(n[o]=r)}),n}var jP=ke("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});jP.displayName="Spacer";var Mt=Ee(function(t,n){const r=Bl("Text",t),{className:i,align:o,decoration:s,casing:a,...l}=ir(t),u=vY({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return E.jsx(ke.p,{ref:n,className:Xe("chakra-text",t.className),...u,...l,__css:r})});Mt.displayName="Text";var bK=e=>E.jsx(ke.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});bK.displayName="StackItem";function pEe(e){const{spacing:t,direction:n}=e,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":dEe(n,i=>r[i])}}var BP=Ee((e,t)=>{const{isInline:n,direction:r,align:i,justify:o,spacing:s="0.5rem",wrap:a,children:l,divider:u,className:c,shouldWrapChildren:f,...d}=e,h=n?"row":r??"column",p=T.useMemo(()=>pEe({spacing:s,direction:h}),[s,h]),g=!!u,y=!f&&!g,m=T.useMemo(()=>{const b=pC(l);return y?b:b.map((x,w)=>{const k=typeof x.key<"u"?x.key:w,S=w+1===b.length,_=f?E.jsx(bK,{children:x},k):x;if(!g)return _;const $=T.cloneElement(u,{__css:p}),A=S?null:$;return E.jsxs(T.Fragment,{children:[_,A]},k)})},[u,p,g,y,f,l]),v=Xe("chakra-stack",c);return E.jsx(ke.div,{ref:t,display:"flex",alignItems:i,justifyContent:o,flexDirection:h,flexWrap:a,gap:g?void 0:s,className:v,...d,children:m})});BP.displayName="Stack";var cs=Ee((e,t)=>E.jsx(BP,{align:"center",...e,direction:"column",ref:t}));cs.displayName="VStack";var xK=Ee((e,t)=>E.jsx(BP,{align:"center",...e,direction:"row",ref:t}));xK.displayName="HStack";var av=Ee(function(t,n){const r=Bl("Heading",t),{className:i,...o}=ir(t);return E.jsx(ke.h2,{ref:n,className:Xe("chakra-heading",t.className),...o,__css:r})});av.displayName="Heading";var Fw=ke("div");Fw.displayName="Box";var wK=Ee(function(t,n){const{size:r,centerContent:i=!0,...o}=t,s=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return E.jsx(Fw,{ref:n,boxSize:r,__css:{...s,flexShrink:0,flexGrow:0},...o})});wK.displayName="Square";var gEe=Ee(function(t,n){const{size:r,...i}=t;return E.jsx(wK,{size:r,ref:n,borderRadius:"9999px",...i})});gEe.displayName="Circle";var SK=Ee(function(t,n){const r=Bl("Badge",t),{className:i,...o}=ir(t);return E.jsx(ke.span,{ref:n,className:Xe("chakra-badge",t.className),...o,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...r}})});SK.displayName="Badge";var ld=ke("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});ld.displayName="Center";var mEe={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};Ee(function(t,n){const{axis:r="both",...i}=t;return E.jsx(ke.div,{ref:n,__css:mEe[r],...i,position:"absolute"})});var UP=Ee(function(t,n){const{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:o,borderRightWidth:s,borderWidth:a,borderStyle:l,borderColor:u,...c}=Bl("Divider",t),{className:f,orientation:d="horizontal",__css:h,...p}=ir(t),g={vertical:{borderLeftWidth:r||s||a||"1px",height:"100%"},horizontal:{borderBottomWidth:i||o||a||"1px",width:"100%"}};return E.jsx(ke.hr,{ref:n,"aria-orientation":d,...p,__css:{...c,border:"0",borderColor:u,borderStyle:l,...g[d],...h},className:Xe("chakra-divider",f)})});UP.displayName="Divider";var Ht=Ee(function(t,n){const{direction:r,align:i,justify:o,wrap:s,basis:a,grow:l,shrink:u,...c}=t,f={display:"flex",flexDirection:r,alignItems:i,justifyContent:o,flexWrap:s,flexBasis:a,flexGrow:l,flexShrink:u};return E.jsx(ke.div,{ref:n,__css:f,...c})});Ht.displayName="Flex";function yEe(e,t={}){const{ssr:n=!0,fallback:r}=t,{getWindow:i}=_2e(),o=Array.isArray(e)?e:[e];let s=Array.isArray(r)?r:[r];s=s.filter(u=>u!=null);const[a,l]=T.useState(()=>o.map((u,c)=>({media:u,matches:n?!!s[c]:i().matchMedia(u).matches})));return T.useEffect(()=>{const u=i();l(o.map(d=>({media:d,matches:u.matchMedia(d).matches})));const c=o.map(d=>u.matchMedia(d)),f=d=>{l(h=>h.slice().map(p=>p.media===d.media?{...p,matches:d.matches}:p))};return c.forEach(d=>{typeof d.addListener=="function"?d.addListener(f):d.addEventListener("change",f)}),()=>{c.forEach(d=>{typeof d.removeListener=="function"?d.removeListener(f):d.removeEventListener("change",f)})}},[i]),a.map(u=>u.matches)}function vEe(e,t,n=vK){let r=Object.keys(e).indexOf(t);if(r!==-1)return e[t];let i=n.indexOf(t);for(;i>=0;){const o=n[i];if(e.hasOwnProperty(o)){r=i;break}i-=1}if(r!==-1){const o=n[r];return e[o]}}function bEe(e){var t,n;const r=gi(e)?e:{fallback:e??"base"},o=eP().__breakpoints.details.map(({minMaxQuery:u,breakpoint:c})=>({breakpoint:c,query:u.replace("@media screen and ","")})),s=o.map(u=>u.breakpoint===r.fallback),l=yEe(o.map(u=>u.query),{fallback:s,ssr:r.ssr}).findIndex(u=>u==!0);return(n=(t=o[l])==null?void 0:t.breakpoint)!=null?n:r.fallback}function Eh(e,t){var n;const r=gi(t)?t:{fallback:"base"},i=bEe(r),o=eP();if(!i)return;const s=Array.from(((n=o.__breakpoints)==null?void 0:n.keys)||[]),a=Array.isArray(e)?Object.fromEntries(Object.entries(hEe(e,s)).map(([l,u])=>[l,u])):e;return vEe(a,i,s)}function xEe(){const e=T.useRef(new Map),t=e.current,n=T.useCallback((i,o,s,a)=>{e.current.set(s,{type:o,el:i,options:a}),i.addEventListener(o,s,a)},[]),r=T.useCallback((i,o,s,a)=>{i.removeEventListener(o,s,a),e.current.delete(s)},[]);return T.useEffect(()=>()=>{t.forEach((i,o)=>{r(i.el,i.type,o,i.options)})},[r,t]),{add:n,remove:r}}function W$(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function wEe(e={}){const{ref:t,isDisabled:n,isFocusable:r,clickOnEnter:i=!0,clickOnSpace:o=!0,onMouseDown:s,onMouseUp:a,onClick:l,onKeyDown:u,onKeyUp:c,tabIndex:f,onMouseOver:d,onMouseLeave:h,...p}=e,[g,y]=T.useState(!0),[m,v]=T.useState(!1),b=xEe(),x=I=>{I&&I.tagName!=="BUTTON"&&y(!1)},w=g?f:f||0,k=n&&!r,S=T.useCallback(I=>{if(n){I.stopPropagation(),I.preventDefault();return}I.currentTarget.focus(),l==null||l(I)},[n,l]),C=T.useCallback(I=>{m&&W$(I)&&(I.preventDefault(),I.stopPropagation(),v(!1),b.remove(document,"keyup",C,!1))},[m,b]),_=T.useCallback(I=>{if(u==null||u(I),n||I.defaultPrevented||I.metaKey||!W$(I.nativeEvent)||g)return;const N=i&&I.key==="Enter";o&&I.key===" "&&(I.preventDefault(),v(!0)),N&&(I.preventDefault(),I.currentTarget.click()),b.add(document,"keyup",C,!1)},[n,g,u,i,o,b,C]),$=T.useCallback(I=>{if(c==null||c(I),n||I.defaultPrevented||I.metaKey||!W$(I.nativeEvent)||g)return;o&&I.key===" "&&(I.preventDefault(),v(!1),I.currentTarget.click())},[o,g,n,c]),A=T.useCallback(I=>{I.button===0&&(v(!1),b.remove(document,"mouseup",A,!1))},[b]),O=T.useCallback(I=>{if(I.button!==0)return;if(n){I.stopPropagation(),I.preventDefault();return}g||v(!0),I.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",A,!1),s==null||s(I)},[n,g,s,b,A]),M=T.useCallback(I=>{I.button===0&&(g||v(!1),a==null||a(I))},[a,g]),P=T.useCallback(I=>{if(n){I.preventDefault();return}d==null||d(I)},[n,d]),R=T.useCallback(I=>{m&&(I.preventDefault(),v(!1)),h==null||h(I)},[m,h]),D=ad(t,x);return g?{...p,ref:D,type:"button","aria-disabled":k?void 0:n,disabled:k,onClick:S,onMouseDown:s,onMouseUp:a,onKeyUp:c,onKeyDown:u,onMouseOver:d,onMouseLeave:h}:{...p,ref:D,role:"button","data-active":po(m),"aria-disabled":n?"true":void 0,tabIndex:k?void 0:w,onClick:S,onMouseDown:O,onMouseUp:M,onKeyUp:$,onKeyDown:_,onMouseOver:P,onMouseLeave:R}}function SEe(e){const{wasSelected:t,enabled:n,isSelected:r,mode:i="unmount"}=e;return!!(!n||r||i==="keepMounted"&&t)}var kK=Ee(function(t,n){const{children:r,placeholder:i,className:o,...s}=t;return E.jsxs(ke.select,{...s,ref:n,className:Xe("chakra-select",o),children:[i&&E.jsx("option",{value:"",children:i}),r]})});kK.displayName="SelectField";function kEe(e,t){const n={},r={};for(const[i,o]of Object.entries(e))t.includes(i)?n[i]=o:r[i]=o;return[n,r]}var VP=Ee((e,t)=>{var n;const r=Ul("Select",e),{rootProps:i,placeholder:o,icon:s,color:a,height:l,h:u,minH:c,minHeight:f,iconColor:d,iconSize:h,...p}=ir(e),[g,y]=kEe(p,cme),m=cK(y),v={width:"100%",height:"fit-content",position:"relative",color:a},b={paddingEnd:"2rem",...r.field,_focus:{zIndex:"unset",...(n=r.field)==null?void 0:n._focus}};return E.jsxs(ke.div,{className:"chakra-select__wrapper",__css:v,...g,...i,children:[E.jsx(kK,{ref:t,height:u??l,minH:c??f,placeholder:o,...m,__css:b,children:e.children}),E.jsx(CK,{"data-disabled":po(m.disabled),...(d||a)&&{color:d||a},__css:r.icon,...h&&{fontSize:h},children:s})]})});VP.displayName="Select";var CEe=e=>E.jsx("svg",{viewBox:"0 0 24 24",...e,children:E.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),_Ee=ke("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),CK=e=>{const{children:t=E.jsx(CEe,{}),...n}=e,r=T.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return E.jsx(_Ee,{...n,className:"chakra-select__icon-wrapper",children:T.isValidElement(t)?r:null})};CK.displayName="SelectIcon";var[EEe,$Ee,AEe,TEe]=ZX();function MEe(e){var t;const{defaultIndex:n,onChange:r,index:i,isManual:o,isLazy:s,lazyBehavior:a="unmount",orientation:l="horizontal",direction:u="ltr",...c}=e,[f,d]=T.useState(n??0),[h,p]=eK({defaultValue:n??0,value:i,onChange:r});T.useEffect(()=>{i!=null&&d(i)},[i]);const g=AEe(),y=T.useId();return{id:`tabs-${(t=e.id)!=null?t:y}`,selectedIndex:h,focusedIndex:f,setSelectedIndex:p,setFocusedIndex:d,isManual:o,isLazy:s,lazyBehavior:a,orientation:l,descendants:g,direction:u,htmlProps:c}}var[FEe,mC]=jn({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function PEe(e){const{focusedIndex:t,orientation:n,direction:r}=mC(),i=$Ee(),o=T.useCallback(s=>{const a=()=>{var v;const b=i.nextEnabled(t);b&&((v=b.node)==null||v.focus())},l=()=>{var v;const b=i.prevEnabled(t);b&&((v=b.node)==null||v.focus())},u=()=>{var v;const b=i.firstEnabled();b&&((v=b.node)==null||v.focus())},c=()=>{var v;const b=i.lastEnabled();b&&((v=b.node)==null||v.focus())},f=n==="horizontal",d=n==="vertical",h=s.key,p=r==="ltr"?"ArrowLeft":"ArrowRight",g=r==="ltr"?"ArrowRight":"ArrowLeft",m={[p]:()=>f&&l(),[g]:()=>f&&a(),ArrowDown:()=>d&&a(),ArrowUp:()=>d&&l(),Home:u,End:c}[h];m&&(s.preventDefault(),m(s))},[i,t,n,r]);return{...e,role:"tablist","aria-orientation":n,onKeyDown:Xu(e.onKeyDown,o)}}function REe(e){const{isDisabled:t=!1,isFocusable:n=!1,...r}=e,{setSelectedIndex:i,isManual:o,id:s,setFocusedIndex:a,selectedIndex:l}=mC(),{index:u,register:c}=TEe({disabled:t&&!n}),f=u===l,d=()=>{i(u)},h=()=>{a(u),!o&&!(t&&n)&&i(u)};return{...wEe({...r,ref:ad(c,e.ref),isDisabled:t,isFocusable:n,onClick:Xu(e.onClick,d)}),id:_K(s,u),role:"tab",tabIndex:f?0:-1,type:"button","aria-selected":f,"aria-controls":EK(s,u),onFocus:t?void 0:Xu(e.onFocus,h)}}var[DEe,OEe]=jn({});function NEe(e){const t=mC(),{id:n,selectedIndex:r}=t,o=pC(e.children).map((s,a)=>T.createElement(DEe,{key:a,value:{isSelected:a===r,id:EK(n,a),tabId:_K(n,a),selectedIndex:r}},s));return{...e,children:o}}function IEe(e){const{children:t,...n}=e,{isLazy:r,lazyBehavior:i}=mC(),{isSelected:o,id:s,tabId:a}=OEe(),l=T.useRef(!1);o&&(l.current=!0);const u=SEe({wasSelected:l.current,isSelected:o,enabled:r,mode:i});return{tabIndex:0,...n,children:u?t:null,role:"tabpanel","aria-labelledby":a,hidden:!o,id:s}}function _K(e,t){return`${e}--tab-${t}`}function EK(e,t){return`${e}--tabpanel-${t}`}var[LEe,yC]=jn({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),$K=Ee(function(t,n){const r=Ul("Tabs",t),{children:i,className:o,...s}=ir(t),{htmlProps:a,descendants:l,...u}=MEe(s),c=T.useMemo(()=>u,[u]),{isFitted:f,...d}=a,h={position:"relative",...r.root};return E.jsx(EEe,{value:l,children:E.jsx(FEe,{value:c,children:E.jsx(LEe,{value:r,children:E.jsx(ke.div,{className:Xe("chakra-tabs",o),ref:n,...d,__css:h,children:i})})})})});$K.displayName="Tabs";var AK=Ee(function(t,n){const r=PEe({...t,ref:n}),o={display:"flex",...yC().tablist};return E.jsx(ke.div,{...r,className:Xe("chakra-tabs__tablist",t.className),__css:o})});AK.displayName="TabList";var Nd=Ee(function(t,n){const r=IEe({...t,ref:n}),i=yC();return E.jsx(ke.div,{outline:"0",...r,className:Xe("chakra-tabs__tab-panel",t.className),__css:i.tabpanel})});Nd.displayName="TabPanel";var TK=Ee(function(t,n){const r=NEe(t),i=yC();return E.jsx(ke.div,{...r,width:"100%",ref:n,className:Xe("chakra-tabs__tab-panels",t.className),__css:i.tabpanels})});TK.displayName="TabPanels";var MK=Ee(function(t,n){const r=yC(),i=REe({...t,ref:n}),o={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...r.tab};return E.jsx(ke.button,{...i,className:Xe("chakra-tabs__tab",t.className),__css:o})});MK.displayName="Tab";var[zEe,FK]=jn({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),PK=Ee((e,t)=>{const n=Ul("Tag",e),r=ir(e),i={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...n.container};return E.jsx(zEe,{value:n,children:E.jsx(ke.span,{ref:t,...r,__css:i})})});PK.displayName="Tag";var RK=Ee((e,t)=>{const n=FK();return E.jsx(ke.span,{ref:t,noOfLines:1,...e,__css:n.label})});RK.displayName="TagLabel";var jEe=Ee((e,t)=>E.jsx(yt,{ref:t,verticalAlign:"top",marginEnd:"0.5rem",...e}));jEe.displayName="TagLeftIcon";var BEe=Ee((e,t)=>E.jsx(yt,{ref:t,verticalAlign:"top",marginStart:"0.5rem",...e}));BEe.displayName="TagRightIcon";var DK=e=>E.jsx(yt,{verticalAlign:"inherit",viewBox:"0 0 512 512",...e,children:E.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});DK.displayName="TagCloseIcon";var OK=Ee((e,t)=>{const{isDisabled:n,children:r,...i}=e,s={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...FK().closeButton};return E.jsx(ke.button,{ref:t,"aria-label":"close",...i,type:"button",disabled:n,__css:s,children:r||E.jsx(DK,{})})});OK.displayName="TagCloseButton";function x7(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const NK=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),w7=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);w7&&parseFloat(w7[1]);const Gb=globalThis,uh=globalThis.process||{};function UEe(e){var r,i;if(typeof window<"u"&&((r=window.process)==null?void 0:r.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function WP(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||UEe()}const IK="4.0.7";function VEe(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch{return null}}class WEe{constructor(t,n,r="sessionStorage"){this.storage=VEe(r),this.id=t,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let t={};if(this.storage){const n=this.storage.getItem(this.id);t=n?JSON.parse(n):{}}return Object.assign(this.config,t),this}}function HEe(e){let t;return e<10?t=`${e.toFixed(2)}ms`:e<100?t=`${e.toFixed(1)}ms`:e<1e3?t=`${e.toFixed(0)}ms`:t=`${(e/1e3).toFixed(2)}s`,t}function qEe(e,t=8){const n=Math.max(t-e.length,0);return`${" ".repeat(n)}${e}`}var Pw;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Pw||(Pw={}));const GEe=10;function S7(e){return typeof e!="string"?e:(e=e.toUpperCase(),Pw[e]||Pw.WHITE)}function YEe(e,t,n){return!WP&&typeof e=="string"&&(t&&(e=`\x1B[${S7(t)}m${e}\x1B[39m`),n&&(e=`\x1B[${S7(n)+GEe}m${e}\x1B[49m`)),e}function XEe(e,t=["constructor"]){const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=e;for(const o of r){const s=i[o];typeof s=="function"&&(t.find(a=>o===a)||(i[o]=s.bind(e)))}}function HP(e,t){if(!e)throw new Error("Assertion failed")}function ch(){var t,n,r;let e;if(WP()&&Gb.performance)e=(n=(t=Gb==null?void 0:Gb.performance)==null?void 0:t.now)==null?void 0:n.call(t);else if("hrtime"in uh){const i=(r=uh==null?void 0:uh.hrtime)==null?void 0:r.call(uh);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const fh={debug:WP()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},KEe={enabled:!0,level:0};function dh(){}const k7={},C7={once:!0};let qP=class{constructor({id:t}={id:""}){this.VERSION=IK,this._startTs=ch(),this._deltaTs=ch(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new WEe(`__probe-${this.id}__`,KEe),this.timeStamp(`${this.id} started`),XEe(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((ch()-this._startTs).toPrecision(10))}getDelta(){return Number((ch()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,n){this._storage.setConfiguration({[t]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,n){if(!t)throw new Error(n||"Assertion failed")}warn(t){return this._getLogFunction(0,t,fh.warn,arguments,C7)}error(t){return this._getLogFunction(0,t,fh.error,arguments)}deprecated(t,n){return this.warn(`\`${t}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(t,n){return this.error(`\`${t}\` has been removed. Use \`${n}\` instead`)}probe(t,n){return this._getLogFunction(t,n,fh.log,arguments,{time:!0,once:!0})}log(t,n){return this._getLogFunction(t,n,fh.debug,arguments)}info(t,n){return this._getLogFunction(t,n,console.info,arguments)}once(t,n){return this._getLogFunction(t,n,fh.debug||fh.info,arguments,C7)}table(t,n,r){return n?this._getLogFunction(t,n,console.table||dh,r&&[r],{tag:ZEe(n)}):dh}time(t,n){return this._getLogFunction(t,n,console.time?console.time:console.info)}timeEnd(t,n){return this._getLogFunction(t,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,n){return this._getLogFunction(t,n,console.timeStamp||dh)}group(t,n,r={collapsed:!1}){const i=_7({logLevel:t,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,n,r={}){return this.group(t,n,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||dh)}withGroup(t,n,r){this.group(t,n)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=LK(t)}_getLogFunction(t,n,r,i,o){if(this._shouldLog(t)){o=_7({logLevel:t,message:n,args:i,opts:o}),r=r||o.method,HP(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=ch();const s=o.tag||o.message;if(o.once&&s)if(!k7[s])k7[s]=ch();else return dh;return n=QEe(this.id,o.message,o),r.bind(console,n,...o.args)}return dh}};qP.VERSION=IK;function LK(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return HP(Number.isFinite(t)&&t>=0),t}function _7(e){const{logLevel:t,message:n}=e;e.logLevel=LK(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":n!==void 0&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return HP(i==="string"||i==="object"),Object.assign(e,{args:r},e.opts)}function QEe(e,t,n){if(typeof t=="string"){const r=n.time?qEe(HEe(n.total)):"";t=n.time?`${e}: ${r}  ${t}`:`${e}: ${t}`,t=YEe(t,n.color,n.background)}return t}function ZEe(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}function JEe(e,t){return zK(e||{},t)}function zK(e,t,n=0){if(n>3)return t;const r={...e};for(const[i,o]of Object.entries(t))o&&typeof o=="object"&&!Array.isArray(o)?r[i]=zK(r[i]||{},t[i],n+1):r[i]=t[i];return r}const e$e="latest";function t$e(){var e;return(e=globalThis._loadersgl_)!=null&&e.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version}const n$e=t$e();function sc(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const Hf=typeof process!="object"||String(process)!=="[object process]"||process.browser,r$e=typeof window<"u"&&typeof window.orientation<"u",E7=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);E7&&parseFloat(E7[1]);class i$e{constructor(t,n){fe(this,"name");fe(this,"workerThread");fe(this,"isRunning",!0);fe(this,"result");fe(this,"_resolve",()=>{});fe(this,"_reject",()=>{});this.name=t,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(t,n){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:n})}done(t){sc(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){sc(this.isRunning),this.isRunning=!1,this._reject(t)}}class H${terminate(){}}const q$=new Map;function o$e(e){sc(e.source&&!e.url||!e.source&&e.url);let t=q$.get(e.source||e.url);return t||(e.url&&(t=s$e(e.url),q$.set(e.url,t)),e.source&&(t=jK(e.source),q$.set(e.source,t))),sc(t),t}function s$e(e){if(!e.startsWith("http"))return e;const t=a$e(e);return jK(t)}function jK(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function a$e(e){return`try {
  importScripts('${e}');
} catch (error) {
  console.error(error);
  throw error;
}`}function BK(e,t=!0,n){const r=n||new Set;if(e){if($7(e))r.add(e);else if($7(e.buffer))r.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)BK(e[i],t,r)}}return n===void 0?Array.from(r):[]}function $7(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const G$=()=>{};class t3{constructor(t){fe(this,"name");fe(this,"source");fe(this,"url");fe(this,"terminated",!1);fe(this,"worker");fe(this,"onMessage");fe(this,"onError");fe(this,"_loadableURL","");const{name:n,source:r,url:i}=t;sc(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=G$,this.onError=o=>console.log(o),this.worker=Hf?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&Hf||typeof H$<"u"&&!Hf}destroy(){this.onMessage=G$,this.onError=G$,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,n){n=n||BK(t),this.worker.postMessage(t,n)}_getErrorFromErrorEvent(t){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,t.message&&(n+=`${t.message} in `),t.lineno&&(n+=`:${t.lineno}:${t.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=o$e({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},t.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},t.onmessageerror=n=>console.error(n),t}_createNodeWorker(){let t;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new H$(r,{eval:!1})}else if(this.source)t=new H$(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",n=>{this.onMessage(n)}),t.on("error",n=>{this.onError(n)}),t.on("exit",n=>{}),t}}class l$e{constructor(t){fe(this,"name","unnamed");fe(this,"source");fe(this,"url");fe(this,"maxConcurrency",1);fe(this,"maxMobileConcurrency",1);fe(this,"onDebug",()=>{});fe(this,"reuseWorkers",!0);fe(this,"props",{});fe(this,"jobQueue",[]);fe(this,"idleQueue",[]);fe(this,"count",0);fe(this,"isDestroyed",!1);this.source=t.source,this.url=t.url,this.setProps(t)}static isSupported(){return t3.isSupported()}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,n=(i,o,s)=>i.done(s),r=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:n,onError:r,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:t,backlog:this.jobQueue.length});const r=new i$e(n.name,t);t.onMessage=i=>n.onMessage(r,i.type,i.payload),t.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!Hf||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new t3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return r$e?this.maxMobileConcurrency:this.maxConcurrency}}const u$e={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},yu=class yu{constructor(t){fe(this,"props");fe(this,"workerPools",new Map);this.props={...u$e},this.setProps(t),this.workerPools=new Map}static isSupported(){return t3.isSupported()}static getWorkerFarm(t={}){return yu._workerFarm=yu._workerFarm||new yu({}),yu._workerFarm.setProps(t),yu._workerFarm}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:n,source:r,url:i}=t;let o=this.workerPools.get(n);return o||(o=new l$e({name:n,source:r,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};fe(yu,"_workerFarm");let Rw=yu;function c$e(e,t={}){const n=t[e.id]||{},r=Hf?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let i=n.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(Hf?i=`modules/${e.module}/dist/${r}`:i=`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!i){let o=e.version;o==="latest"&&(o=e$e);const s=o?`@${o}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${s}/dist/${r}`}return sc(i),i}function f$e(e,t=n$e){sc(e,"no worker provided");const n=e.version;return!(!t||!n)}function d$e(e,t){return!Rw.isSupported()||!Hf&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function h$e(e,t,n,r,i){const o=e.id,s=c$e(e,n),l=Rw.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const u=await l.startJob("process-on-worker",p$e.bind(null,i));return u.postMessage("process",{input:t,options:n,context:r}),await(await u.result).result}async function p$e(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(new Error(r.error));break;case"process":const{id:i,input:o,options:s}=r;try{const a=await e(o,s);t.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function g$e(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function m$e(...e){return y$e(e)}function y$e(e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),n=t.reduce((o,s)=>o+s.byteLength,0),r=new Uint8Array(n);let i=0;for(const o of t)r.set(o,i),i+=o.byteLength;return r.buffer}async function v$e(e){const t=[];for await(const n of e)t.push(n);return m$e(...t)}let b$e="";const A7={};function x$e(e){for(const t in A7)if(e.startsWith(t)){const n=A7[t];e=e.replace(t,n)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e=`${b$e}${e}`),e}const w$e="4.2.1",S$e={dataType:null,batchType:null,name:"JSON",id:"json",module:"json",version:w$e,extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:T7,parse:async e=>T7(new TextDecoder().decode(e)),options:{}};function T7(e){return JSON.parse(e)}function k$e(e){return e&&typeof e=="object"&&e.isBuffer}function UK(e){if(k$e(e))return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function VK(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function C$e(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}const _$e=e=>typeof e=="boolean",yy=e=>typeof e=="function",lv=e=>e!==null&&typeof e=="object",M7=e=>lv(e)&&e.constructor==={}.constructor,E$e=e=>!!e&&typeof e[Symbol.iterator]=="function",$$e=e=>e&&typeof e[Symbol.asyncIterator]=="function",Id=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Yg=e=>typeof Blob<"u"&&e instanceof Blob,A$e=e=>e&&typeof e=="object"&&e.isBuffer,T$e=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||lv(e)&&yy(e.tee)&&yy(e.cancel)&&yy(e.getReader),M$e=e=>lv(e)&&yy(e.read)&&yy(e.pipe)&&_$e(e.readable),WK=e=>T$e(e)||M$e(e);class F$e extends Error{constructor(n,r){super(n);fe(this,"reason");fe(this,"url");fe(this,"response");this.reason=r.reason,this.url=r.url,this.response=r.response}}const P$e=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,R$e=/^([-\w.]+\/[-\w.+]+)/;function F7(e,t){return e.toLowerCase()===t.toLowerCase()}function D$e(e){const t=R$e.exec(e);return t?t[1]:e}function P7(e){const t=P$e.exec(e);return t?t[1]:""}const HK=/\?.*/;function O$e(e){const t=e.match(HK);return t&&t[0]}function GP(e){return e.replace(HK,"")}function N$e(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}function vC(e){return Id(e)?e.url:Yg(e)?e.name||"":typeof e=="string"?e:""}function YP(e){if(Id(e)){const t=e,n=t.headers.get("content-type")||"",r=GP(t.url);return D$e(n)||P7(r)}return Yg(e)?e.type||"":typeof e=="string"?P7(e):""}function I$e(e){return Id(e)?e.headers["content-length"]||-1:Yg(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}async function qK(e){if(Id(e))return e;const t={},n=I$e(e);n>=0&&(t["content-length"]=String(n));const r=vC(e),i=YP(e);i&&(t["content-type"]=i);const o=await j$e(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:r}),s}async function L$e(e){if(!e.ok)throw await z$e(e)}async function z$e(e){const t=N$e(e.url);let n=`Failed to fetch resource (${e.status}) ${e.statusText}: ${t}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:e.statusText,url:e.url,response:e};try{const i=e.headers.get("Content-Type");r.reason=i!=null&&i.includes("application/json")?await e.json():e.text()}catch{}return new F$e(n,r)}async function j$e(e){if(typeof e=="string")return`data:,${e.slice(0,5)}`;if(e instanceof Blob){const n=e.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=o=>{var s;return r((s=o==null?void 0:o.target)==null?void 0:s.result)},i.readAsDataURL(n)})}if(e instanceof ArrayBuffer){const n=e.slice(0,5);return`data:base64,${B$e(n)}`}return null}function B$e(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}function U$e(e){return!V$e(e)&&!W$e(e)}function V$e(e){return e.startsWith("http:")||e.startsWith("https:")}function W$e(e){return e.startsWith("data:")}async function n3(e,t){var n,r;if(typeof e=="string"){const i=x$e(e);return U$e(i)&&(n=globalThis.loaders)!=null&&n.fetchNode?(r=globalThis.loaders)==null?void 0:r.fetchNode(i,t):await fetch(i,t)}return await qK(e)}const R7=new qP({id:"loaders.gl"});class H$e{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class q$e{constructor(){fe(this,"console");this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const GK={fetch:null,mimeType:void 0,nothrow:!1,log:new q$e,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:NK,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},G$e={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function YK(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function XK(){const e=YK();return e.globalOptions=e.globalOptions||{...GK},e.globalOptions}function Y$e(e,t,n,r){return n=n||[],n=Array.isArray(n)?n:[n],X$e(e,n),Q$e(t,e,r)}function X$e(e,t){D7(e,null,GK,G$e,t);for(const n of t){const r=e&&e[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};D7(r,n.id,i,o,t)}}function D7(e,t,n,r,i){const o=t||"Top level",s=t?`${t}.`:"";for(const a in e){const l=!t&&lv(e[a]),u=a==="baseUri"&&!t,c=a==="workerUrl"&&t;if(!(a in n)&&!u&&!c){if(a in r)R7.warn(`${o} loader option '${s}${a}' no longer supported, use '${r[a]}'`)();else if(!l){const f=K$e(a,i);R7.warn(`${o} loader option '${s}${a}' not recognized. ${f}`)()}}}}function K$e(e,t){const n=e.toLowerCase();let r="";for(const i of t)for(const o in i.options){if(e===o)return`Did you mean '${i.id}.${o}'?`;const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||`Did you mean '${i.id}.${o}'?`)}return r}function Q$e(e,t,n){const i={...e.options||{}};return Z$e(i,n),i.log===null&&(i.log=new H$e),O7(i,XK()),O7(i,t),i}function O7(e,t){for(const n in t)if(n in t){const r=t[n];M7(r)&&M7(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function Z$e(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function KK(e){return e?(Array.isArray(e)&&(e=e[0]),Array.isArray(e==null?void 0:e.extensions)):!1}function QK(e){x7(e,"null loader"),x7(KK(e),"invalid loader");let t;return Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e!=null&&e.parseTextSync||e!=null&&e.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const J$e=()=>{const e=YK();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function eAe(){return J$e()}const tAe=new qP({id:"loaders.gl"}),nAe=/\.([^.]+)$/;async function rAe(e,t=[],n,r){if(!ZK(e))return null;let i=N7(e,t,{...n,nothrow:!0},r);if(i)return i;if(Yg(e)&&(e=await e.slice(0,10).arrayBuffer(),i=N7(e,t,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(JK(e));return i}function N7(e,t=[],n,r){if(!ZK(e))return null;if(t&&!Array.isArray(t))return QK(t);let i=[];t&&(i=i.concat(t)),n!=null&&n.ignoreRegisteredLoaders||i.push(...eAe()),oAe(i);const o=iAe(e,i,n,r);if(!o&&!(n!=null&&n.nothrow))throw new Error(JK(e));return o}function iAe(e,t,n,r){const i=vC(e),o=YP(e),s=GP(i)||(r==null?void 0:r.url);let a=null,l="";return n!=null&&n.mimeType&&(a=Y$(t,n==null?void 0:n.mimeType),l=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),a=a||sAe(t,s),l=l||(a?`matched url ${s}`:""),a=a||Y$(t,o),l=l||(a?`matched MIME type ${o}`:""),a=a||lAe(t,e),l=l||(a?`matched initial data ${eQ(e)}`:""),n!=null&&n.fallbackMimeType&&(a=a||Y$(t,n==null?void 0:n.fallbackMimeType),l=l||(a?`matched fallback MIME type ${o}`:"")),l&&tAe.log(1,`selectLoader selected ${a==null?void 0:a.name}: ${l}.`),a}function ZK(e){return!(e instanceof Response&&e.status===204)}function JK(e){const t=vC(e),n=YP(e);let r="No valid loader found (";r+=t?`${VK(t)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const i=e?eQ(e):"";return r+=i?` first bytes: "${i}"`:"first bytes: not available",r+=")",r}function oAe(e){for(const t of e)QK(t)}function sAe(e,t){const n=t&&nAe.exec(t),r=n&&n[1];return r?aAe(e,r):null}function aAe(e,t){t=t.toLowerCase();for(const n of e)for(const r of n.extensions)if(r.toLowerCase()===t)return n;return null}function Y$(e,t){var n;for(const r of e)if((n=r.mimeTypes)!=null&&n.some(i=>F7(t,i))||F7(t,`application/x.${r.id}`))return r;return null}function lAe(e,t){if(!t)return null;for(const n of e)if(typeof t=="string"){if(uAe(t,n))return n}else if(ArrayBuffer.isView(t)){if(I7(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer&&I7(t,0,n))return n;return null}function uAe(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>e.startsWith(r))}function I7(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>cAe(e,t,n,i))}function cAe(e,t,n,r){if(r instanceof ArrayBuffer)return g$e(r,e,r.byteLength);switch(typeof r){case"function":return r(e);case"string":const i=r3(e,t,r.length);return r===i;default:return!1}}function eQ(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?r3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?r3(e,0,t):""}function r3(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}const fAe=256*1024;function*dAe(e,t){const n=(t==null?void 0:t.chunkSize)||fAe;let r=0;const i=new TextEncoder;for(;r<e.length;){const o=Math.min(e.length-r,n),s=e.slice(r,r+o);r+=o,yield i.encode(s)}}const hAe=256*1024;function*pAe(e,t={}){const{chunkSize:n=hAe}=t;let r=0;for(;r<e.byteLength;){const i=Math.min(e.byteLength-r,n),o=new ArrayBuffer(i),s=new Uint8Array(e,r,i);new Uint8Array(o).set(s),r+=i,yield o}}const gAe=1024*1024;async function*mAe(e,t){const n=(t==null?void 0:t.chunkSize)||gAe;let r=0;for(;r<e.size;){const i=r+n,o=await e.slice(r,i).arrayBuffer();r=i,yield o}}function L7(e,t){return NK?yAe(e,t):vAe(e)}async function*yAe(e,t){const n=e.getReader();let r;try{for(;;){const i=r||n.read();t!=null&&t._streamReadAhead&&(r=n.read());const{done:o,value:s}=await i;if(o)return;yield UK(s)}}catch{n.releaseLock()}}async function*vAe(e,t){for await(const n of e)yield UK(n)}function bAe(e,t){if(typeof e=="string")return dAe(e,t);if(e instanceof ArrayBuffer)return pAe(e,t);if(Yg(e))return mAe(e,t);if(WK(e))return L7(e,t);if(Id(e))return L7(e.body,t);throw new Error("makeIterator")}const tQ="Cannot convert supplied data type";function xAe(e,t,n){if(t.text&&typeof e=="string")return e;if(A$e(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(e.byteOffset,e.byteOffset+i)),r}throw new Error(tQ)}async function wAe(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||r)return xAe(e,t);if(Yg(e)&&(e=await qK(e)),Id(e)){const i=e;return await L$e(i),t.binary?await i.arrayBuffer():await i.text()}if(WK(e)&&(e=bAe(e,n)),E$e(e)||$$e(e))return v$e(e);throw new Error(tQ)}function SAe(e,t){const n=XK(),r=e||n;return typeof r.fetch=="function"?r.fetch:lv(r.fetch)?i=>n3(i,r.fetch):t!=null&&t.fetch?t==null?void 0:t.fetch:n3}function kAe(e,t,n){if(n)return n;const r={fetch:SAe(t,e),...e};if(r.url){const i=GP(r.url);r.baseUrl=i,r.queryString=O$e(r.url),r.filename=VK(i),r.baseUrl=C$e(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function CAe(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const r=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function XP(e,t,n,r){t&&!Array.isArray(t)&&!KK(t)&&(r=void 0,n=t,t=void 0),e=await e,n=n||{};const i=vC(e),s=CAe(t,r),a=await rAe(e,s,n);return a?(n=Y$e(n,a,s,i),r=kAe({url:i,_parse:XP,loaders:s},n,r||null),await _Ae(a,e,n,r)):null}async function _Ae(e,t,n,r){if(f$e(e),n=JEe(e.options,n),Id(t)){const o=t,{ok:s,redirected:a,status:l,statusText:u,type:c,url:f}=o,d=Object.fromEntries(o.headers.entries());r.response={headers:d,ok:s,redirected:a,status:l,statusText:u,type:c,url:f}}t=await wAe(t,e,n);const i=e;if(i.parseTextSync&&typeof t=="string")return i.parseTextSync(t,n,r);if(d$e(e,n))return await h$e(e,t,n,r,XP);if(i.parseText&&typeof t=="string")return await i.parseText(t,n,r);if(i.parse)return await i.parse(t,n,r);throw sc(!i.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}const z7=100;class EAe{constructor(t,n){fe(this,"schema");fe(this,"options");fe(this,"shape");fe(this,"length",0);fe(this,"rows",null);fe(this,"cursor",0);fe(this,"_headers",[]);if(this.options=n,this.schema=t,!Array.isArray(t)){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="array-row-table",this.rows=this.rows||new Array(z7),this.rows[this.length]=t,this.length++}addObjectRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="object-row-table",this.rows=this.rows||new Array(z7),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;return t?(t=t.slice(0,this.length),this.rows=null,{shape:this.shape||"array-row-table",batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}function nQ(e,t){if(!e)throw new Error("null row");const n={};if(t)for(let r=0;r<t.length;r++)n[t[r]]=e[r];else for(let r=0;r<e.length;r++){const i=`column-${r}`;n[i]=e[r]}return n}function rQ(e,t){if(!e)throw new Error("null row");if(t){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=e[t[r]];return n}return Object.values(e)}function $Ae(e){const t=[];for(let n=0;n<e.length;n++){const r=`column-${n}`;t.push(r)}return t}function AAe(e){return Object.keys(e)}const j7=100;class TAe{constructor(t,n){fe(this,"schema");fe(this,"options");fe(this,"length",0);fe(this,"objectRows",null);fe(this,"arrayRows",null);fe(this,"cursor",0);fe(this,"_headers",null);if(this.options=n,this.schema=t,t){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=$Ae(t)),this.options.shape){case"object-row-table":const r=nQ(t,this._headers);this.addObjectRow(r,n);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(j7),this.arrayRows[this.length]=t,this.length++;break}}addObjectRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=AAe(t)),this.options.shape){case"array-row-table":const r=rQ(t,this._headers);this.addArrayRow(r,n);break;case"object-row-table":this.objectRows=this.objectRows||new Array(j7),this.objectRows[this.length]=t,this.length++;break}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}const MAe=100;class FAe{constructor(t,n){fe(this,"schema");fe(this,"length",0);fe(this,"allocated",0);fe(this,"columns",{});this.schema=t,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let n=0;for(const r in this.columns)this.columns[r][this.length]=t[n++];this.length++}addObjectRow(t){this._reallocateColumns();for(const n in t)this.columns[n][this.length]=t[n];this.length++}getBatch(){this._pruneColumns();const t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const r in this.schema){const i=this.schema[r];t[i.name]=this.columns[i.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:MAe,this.columns={};for(const t in this.schema){const n=this.schema[t],r=n.type||Float32Array,i=this.columns[n.index];if(i&&ArrayBuffer.isView(i)){const o=new r(this.allocated);o.set(i),this.columns[n.index]=o}else i?(i.length=this.allocated,this.columns[n.index]=i):this.columns[n.index]=new r(this.allocated)}}}_pruneColumns(){for(const[t,n]of Object.entries(this.columns))this.columns[t]=n.slice(0,this.length)}}const PAe={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},RAe="TableBatchBuilder",Ry=class Ry{constructor(t,n){fe(this,"schema");fe(this,"options");fe(this,"aggregator",null);fe(this,"batchCount",0);fe(this,"bytesUsed",0);fe(this,"isChunkComplete",!1);fe(this,"lastBatchEmittedMs",Date.now());fe(this,"totalLength",0);fe(this,"totalBytes",0);fe(this,"rowBytes",0);this.schema=t,this.options={...PAe,...n}}limitReached(){var t,n;return!!((t=this.options)!=null&&t.limit&&this.totalLength>=this.options.limit||(n=this.options)!=null&&n._limitMB&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),typeof t=="string"&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?t.length*8:Object.keys(t).length*8}_isFull(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;t!=null&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);const n=this.aggregator.getBatch();return n.count=this.batchCount,n.bytesUsed=this.bytesUsed,Object.assign(n,t),this.batchCount++,this.aggregator=null,n}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return TAe;case"columnar-table":return FAe;case"arrow-table":if(!Ry.ArrowBatch)throw new Error(RAe);return Ry.ArrowBatch;default:return EAe}}};fe(Ry,"ArrowBatch");let i3=Ry;class B7 extends Array{enqueue(t){return this.push(t)}dequeue(){return this.shift()}}class DAe{constructor(){fe(this,"_values");fe(this,"_settlers");fe(this,"_closed");this._values=new B7,this._settlers=new B7,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[Symbol.asyncIterator](){return this}enqueue(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");const n=this._settlers.dequeue();t instanceof Error?n.reject(t):n.resolve({value:t})}else this._values.enqueue(t)}next(){if(this._values.length>0){const t=this._values.dequeue();return t instanceof Error?Promise.reject(t):Promise.resolve({value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((t,n)=>{this._settlers.enqueue({resolve:t,reject:n})})}}/* @license
Papa Parse
v5.0.0-beta.0
https://github.com/mholt/PapaParse
License: MIT
*/const U7="\uFEFF",Ii={parse:OAe,unparse:NAe,RECORD_SEP:"",UNIT_SEP:"",BYTE_ORDER_MARK:U7,BAD_DELIMITERS:["\r",`
`,'"',U7],WORKERS_SUPPORTED:!1,NODE_STREAM_INPUT:1,LocalChunkSize:1024*1024*10,RemoteChunkSize:1024*1024*5,DefaultDelimiter:",",Parser:o3,ParserHandle:oQ,ChunkStreamer:iQ,StringStreamer:eg};function OAe(e,t,n){t=t||{};var r=t.dynamicTyping||!1;if(Lr(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=Lr(t.transform)?t.transform:!1,t.worker&&Ii.WORKERS_SUPPORTED){var i=newWorker();i.userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=Lr(t.step),t.chunk=Lr(t.chunk),t.complete=Lr(t.complete),t.error=Lr(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id});return}var o=null;return typeof e=="string"&&(o=new eg(t)),o||(o=new n(t)),o.stream(e)}function NAe(e,t){var n=!1,r=!0,i=",",o=`\r
`,s='"',a=s+s,l=!1,u=null;f();var c=new RegExp(l1(s),"g");if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,l);if(typeof e[0]=="object")return h(u||d(e[0]),e,l)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:d(e.data[0])),!Array.isArray(e.data[0])&&typeof e.data[0]!="object"&&(e.data=[e.data])),h(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function f(){if(typeof t=="object"){if(typeof t.delimiter=="string"&&!Ii.BAD_DELIMITERS.filter(function(y){return t.delimiter.indexOf(y)!==-1}).length&&(i=t.delimiter),(typeof t.quotes=="boolean"||Array.isArray(t.quotes))&&(n=t.quotes),(typeof t.skipEmptyLines=="boolean"||typeof t.skipEmptyLines=="string")&&(l=t.skipEmptyLines),typeof t.newline=="string"&&(o=t.newline),typeof t.quoteChar=="string"&&(s=t.quoteChar),typeof t.header=="boolean"&&(r=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");u=t.columns}t.escapeChar!==void 0&&(a=t.escapeChar+s)}}function d(y){if(typeof y!="object")return[];var m=[];for(var v in y)m.push(v);return m}function h(y,m,v){var b="";typeof y=="string"&&(y=JSON.parse(y)),typeof m=="string"&&(m=JSON.parse(m));var x=Array.isArray(y)&&y.length>0,w=!Array.isArray(m[0]);if(x&&r){for(var k=0;k<y.length;k++)k>0&&(b+=i),b+=p(y[k],k);m.length>0&&(b+=o)}for(var S=0;S<m.length;S++){var C=x?y.length:m[S].length,_=!1,$=x?Object.keys(m[S]).length===0:m[S].length===0;if(v&&!x&&(_=v==="greedy"?m[S].join("").trim()==="":m[S].length===1&&m[S][0].length===0),v==="greedy"&&x){for(var A=[],O=0;O<C;O++){var M=w?y[O]:O;A.push(m[S][M])}_=A.join("").trim()===""}if(!_){for(var P=0;P<C;P++){P>0&&!$&&(b+=i);var R=x&&w?y[P]:P;b+=p(m[S][R],P)}S<m.length-1&&(!v||C>0&&!$)&&(b+=o)}}return b}function p(y,m){if(typeof y>"u"||y===null)return"";if(y.constructor===Date)return JSON.stringify(y).slice(1,25);y=y.toString().replace(c,a);var v=typeof n=="boolean"&&n||Array.isArray(n)&&n[m]||g(y,Ii.BAD_DELIMITERS)||y.indexOf(i)>-1||y.charAt(0)===" "||y.charAt(y.length-1)===" ";return v?s+y+s:y}function g(y,m){for(var v=0;v<m.length;v++)if(y.indexOf(m[v])>-1)return!0;return!1}}function iQ(e){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},t.call(this,e),this.parseChunk=function(n,r){if(this.isFirstChunk&&Lr(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(n);i!==void 0&&(n=i)}this.isFirstChunk=!1;var o=this._partialLine+n;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!(this._handle.paused()||this._handle.aborted())){var a=s.meta.cursor;this._finished||(this._partialLine=o.substring(a-this._baseIndex),this._baseIndex=a),s&&s.data&&(this._rowCount+=s.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Lr(this._config.chunk)&&!r){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return;s=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),!this._completed&&l&&Lr(this._config.complete)&&(!s||!s.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!l&&(!s||!s.meta.paused)&&this._nextChunk(),s}},this._sendError=function(n){Lr(this._config.error)&&this._config.error(n)};function t(n){var r=KP(n);r.chunkSize=parseInt(r.chunkSize),!n.step&&!n.chunk&&(r.chunkSize=null),this._handle=new oQ(r),this._handle.streamer=this,this._config=r}}function eg(e){e=e||{},iQ.call(this,e);var t;this.stream=function(n){return t=n,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var n=this._config.chunkSize,r=n?t.substr(0,n):t;return t=n?t.substr(n):"",this._finished=!t,this.parseChunk(r)}}}eg.prototype=Object.create(eg.prototype);eg.prototype.constructor=eg;function oQ(e){var t=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,r=this,i=0,o=0,s,a,l=!1,u=!1,c,f=[],d={data:[],errors:[],meta:{}};if(Lr(e.step)){var h=e.step;e.step=function(C){if(d=C,y())g();else{if(g(),!d.data||d.data.length===0)return;i+=C.data.length,e.preview&&i>e.preview?a.abort():h(d,r)}}}this.parse=function(C,_,$){var A=e.quoteChar||'"';if(e.newline||(e.newline=k(C,A)),c=!1,e.delimiter)Lr(e.delimiter)&&(e.delimiter=e.delimiter(C),d.meta.delimiter=e.delimiter);else{var O=w(C,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);O.successful?e.delimiter=O.bestDelimiter:(c=!0,e.delimiter=Ii.DefaultDelimiter),d.meta.delimiter=e.delimiter}var M=KP(e);return e.preview&&e.header&&M.preview++,s=C,a=new o3(M),d=a.parse(s,_,$),g(),l?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,a.abort(),s=s.substr(a.getCharIndex())},this.resume=function(){l=!1,r.streamer.parseChunk(s,!0)},this.aborted=function(){return u},this.abort=function(){u=!0,a.abort(),d.meta.aborted=!0,Lr(e.complete)&&e.complete(d),s=""};function p(C){return e.skipEmptyLines==="greedy"?C.join("").trim()==="":C.length===1&&C[0].length===0}function g(){if(d&&c&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+Ii.DefaultDelimiter+"'"),c=!1),e.skipEmptyLines)for(var C=0;C<d.data.length;C++)p(d.data[C])&&d.data.splice(C--,1);return y()&&m(),x()}function y(){return e.header&&f.length===0}function m(){if(!d)return;function C($){Lr(e.transformHeader)&&($=e.transformHeader($)),f.push($)}if(Array.isArray(d.data[0])){for(var _=0;y()&&_<d.data.length;_++)d.data[_].forEach(C);d.data.splice(0,1)}else d.data.forEach(C)}function v(C){return e.dynamicTypingFunction&&e.dynamicTyping[C]===void 0&&(e.dynamicTyping[C]=e.dynamicTypingFunction(C)),(e.dynamicTyping[C]||e.dynamicTyping)===!0}function b(C,_){return v(C)?_==="true"||_==="TRUE"?!0:_==="false"||_==="FALSE"?!1:t.test(_)?parseFloat(_):n.test(_)?new Date(_):_===""?null:_:_}function x(){if(!d||!d.data||!e.header&&!e.dynamicTyping&&!e.transform)return d;function C($,A){var O=e.header?{}:[],M;for(M=0;M<$.length;M++){var P=M,R=$[M];e.header&&(P=M>=f.length?"__parsed_extra":f[M]),e.transform&&(R=e.transform(R,P)),R=b(P,R),P==="__parsed_extra"?(O[P]=O[P]||[],O[P].push(R)):O[P]=R}return e.header&&(M>f.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+M,o+A):M<f.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+M,o+A)),O}var _=1;return!d.data[0]||Array.isArray(d.data[0])?(d.data=d.data.map(C),_=d.data.length):d.data=C(d.data,0),e.header&&d.meta&&(d.meta.fields=f),o+=_,d}function w(C,_,$,A,O){var M,P,R;O=O||[",","	","|",";",Ii.RECORD_SEP,Ii.UNIT_SEP];for(var D=0;D<O.length;D++){var I=O[D],N=0,B=0,Y=0;R=void 0;for(var W=new o3({comments:A,delimiter:I,newline:_,preview:10}).parse(C),oe=0;oe<W.data.length;oe++){if($&&p(W.data[oe])){Y++;continue}var re=W.data[oe].length;if(B+=re,typeof R>"u"){R=0;continue}else re>1&&(N+=Math.abs(re-R),R=re)}W.data.length>0&&(B/=W.data.length-Y),(typeof P>"u"||N>P)&&B>1.99&&(P=N,M=I)}return e.delimiter=M,{successful:!!M,bestDelimiter:M}}function k(C,_){C=C.substr(0,1024*1024);var $=new RegExp(l1(_)+"([^]*?)"+l1(_),"gm");C=C.replace($,"");var A=C.split("\r"),O=C.split(`
`),M=O.length>1&&O[0].length<A[0].length;if(A.length===1||M)return`
`;for(var P=0,R=0;R<A.length;R++)A[R][0]===`
`&&P++;return P>=A.length/2?`\r
`:"\r"}function S(C,_,$,A){d.errors.push({type:C,code:_,message:$,row:A})}}function l1(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o3(e){e=e||{};var t=e.delimiter,n=e.newline,r=e.comments,i=e.step,o=e.preview,s=e.fastMode,a;e.quoteChar===void 0?a='"':a=e.quoteChar;var l=a;if(e.escapeChar!==void 0&&(l=e.escapeChar),(typeof t!="string"||Ii.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),r===t)throw new Error("Comment character same as delimiter");r===!0?r="#":(typeof r!="string"||Ii.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),n!==`
`&&n!=="\r"&&n!==`\r
`&&(n=`
`);var u=0,c=!1;this.parse=function(f,d,h){if(typeof f!="string")throw new Error("Input must be a string");var p=f.length,g=t.length,y=n.length,m=r.length,v=Lr(i);u=0;var b=[],x=[],w=[],k=0;if(!f)return W();if(s||s!==!1&&f.indexOf(a)===-1){for(var S=f.split(n),C=0;C<S.length;C++){if(w=S[C],u+=w.length,C!==S.length-1)u+=n.length;else if(h)return W();if(!(r&&w.substr(0,m)===r)){if(v){if(b=[],I(w.split(t)),oe(),c)return W()}else I(w.split(t));if(o&&C>=o)return b=b.slice(0,o),W(!0)}}return W()}for(var _=f.indexOf(t,u),$=f.indexOf(n,u),A=new RegExp(l1(l)+l1(a),"g"),O;;){if(f[u]===a){for(O=u,u++;;){if(O=f.indexOf(a,O+1),O===-1)return h||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),B();if(O===p-1){var M=f.substring(u,O).replace(A,a);return B(M)}if(a===l&&f[O+1]===l){O++;continue}if(!(a!==l&&O!==0&&f[O-1]===l)){var P=$===-1?_:Math.min(_,$),R=N(P);if(f[O+1+R]===t){if(w.push(f.substring(u,O).replace(A,a)),u=O+1+R+g,_=f.indexOf(t,u),$=f.indexOf(n,u),v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);break}var D=N($);if(f.substr(O+1+D,y)===n){if(w.push(f.substring(u,O).replace(A,a)),Y(O+1+D+y),_=f.indexOf(t,u),v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),O++}}if(v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);continue}if(r&&w.length===0&&f.substr(u,m)===r){if($===-1)return W();u=$+y,$=f.indexOf(n,u),_=f.indexOf(t,u);continue}if(_!==-1&&(_<$||$===-1)){w.push(f.substring(u,_)),u=_+g,_=f.indexOf(t,u);continue}if($!==-1){if(w.push(f.substring(u,$)),Y($+y),v&&(oe(),c))return W();if(o&&b.length>=o)return W(!0);continue}break}return B();function I(re){b.push(re),k=u}function N(re){var we=0;if(re!==-1){var De=f.substring(O+1,re);De&&De.trim()===""&&(we=De.length)}return we}function B(re){return h||(typeof re>"u"&&(re=f.substr(u)),w.push(re),u=p,I(w),v&&oe()),W()}function Y(re){u=re,I(w),w=[],$=f.indexOf(n,u)}function W(re,we){var De=we||!1;return{data:De?b[0]:b,errors:x,meta:{delimiter:t,linebreak:n,aborted:c,truncated:!!re,cursor:k+(d||0)}}}function oe(){i(W(void 0,!0)),b=[],x=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return u}}function KP(e){if(typeof e!="object"||e===null)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=KP(e[n]);return t}function Lr(e){return typeof e=="function"}const{ChunkStreamer:sQ}=Ii;function Dw(e){e=e||{},sQ.call(this,e),this.textDecoder=new TextDecoder(this._config.encoding),this.stream=async function(t){this._input=t;try{for await(const n of t)this.parseChunk(this.getStringChunk(n));this._finished=!0,this.parseChunk("")}catch(n){this._sendError(n)}},this._nextChunk=function(){},this.getStringChunk=function(t){return typeof t=="string"?t:this.textDecoder.decode(t,{stream:!0})}}Dw.prototype=Object.create(sQ.prototype);Dw.prototype.constructor=Dw;const IAe="4.2.1",QP="object-row-table",ZP={dataType:null,batchType:null,id:"csv",module:"csv",name:"CSV",version:IAe,extensions:["csv","tsv","dsv"],mimeTypes:["text/csv","text/tab-separated-values","text/dsv"],category:"table",parse:async(e,t)=>V7(new TextDecoder().decode(e),t),parseText:(e,t)=>V7(e,t),parseInBatches:LAe,options:{csv:{shape:QP,optimizeMemoryUsage:!1,header:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!0,delimitersToGuess:[",","	","|",";"]}}};async function V7(e,t){const n={...ZP.options.csv,...t==null?void 0:t.csv},r=zAe(e),o=n.header==="auto"?aQ(r):!!n.header,s={...n,header:o,download:!1,transformHeader:o?lQ():void 0,error:f=>{throw new Error(f)}},a=Ii.parse(e,s),l=a.data,u=a.meta.fields||uQ(n.columnPrefix,r.length),c=n.shape||QP;switch(c){case"object-row-table":return{shape:"object-row-table",data:l.map(f=>Array.isArray(f)?nQ(f,u):f)};case"array-row-table":return{shape:"array-row-table",data:l.map(f=>Array.isArray(f)?f:rQ(f,u))};default:throw new Error(c)}}function LAe(e,t){t={...t},t.batchSize==="auto"&&(t.batchSize=4e3);const n={...ZP.options.csv,...t==null?void 0:t.csv},r=new DAe;let i=!0,o=null,s=null,a=null;const l={...n,header:!1,download:!1,chunkSize:1024*1024*5,skipEmptyLines:!1,step(u){let c=u.data;if(n.skipEmptyLines&&c.flat().join("").trim()==="")return;const f=u.meta.cursor;if(i&&!o&&(n.header==="auto"?aQ(c):!!n.header)){o=c.map(lQ());return}i&&(i=!1,o||(o=uQ(n.columnPrefix,c.length)),a=jAe(c,o)),n.optimizeMemoryUsage&&(c=JSON.parse(JSON.stringify(c)));const d=n.shape||QP;s=s||new i3(a,{shape:d,...t});try{s.addRow(c);const h=s&&s.getFullBatch({bytesUsed:f});h&&r.enqueue(h)}catch(h){r.enqueue(h)}},complete(u){try{const c=u.meta.cursor,f=s&&s.getFinalBatch({bytesUsed:c});f&&r.enqueue(f)}catch(c){r.enqueue(c)}r.close()}};return Ii.parse(e,l,Dw),r}function aQ(e){return e&&e.every(t=>typeof t=="string")}function zAe(e){return Ii.parse(e,{download:!1,dynamicTyping:!0,preview:1}).data[0]}function lQ(){const e=new Set;return t=>{let n=t,r=1;for(;e.has(n);)n=`${t}.${r}`,r++;return e.add(n),n}}function uQ(e,t=0){const n=[];for(let r=0;r<t;r++)n.push(`${e}${r+1}`);return n}function jAe(e,t){const n=t?{}:[];for(let r=0;r<e.length;r++){const i=t&&t[r]||r;switch(typeof e[r]){case"number":case"boolean":n[i]={name:String(i),index:r,type:Float32Array};break;case"string":default:n[i]={name:String(i),index:r,type:Array}}}return n}var W7={},X$={},K$=34,zm=10,Q$=13;function cQ(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function BAe(e,t){var n=cQ(e);return function(r,i){return t(n(r),i,e)}}function H7(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ri(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function UAe(e){return e<0?"-"+ri(-e,6):e>9999?"+"+ri(e,6):ri(e,4)}function VAe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":UAe(e.getUTCFullYear())+"-"+ri(e.getUTCMonth()+1,2)+"-"+ri(e.getUTCDate(),2)+(i?"T"+ri(t,2)+":"+ri(n,2)+":"+ri(r,2)+"."+ri(i,3)+"Z":r?"T"+ri(t,2)+":"+ri(n,2)+":"+ri(r,2)+"Z":n||t?"T"+ri(t,2)+":"+ri(n,2)+"Z":"")}function WAe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(y,m){if(h)return h(y,m-1);p=y,h=d?BAe(y,d):cQ(y)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,y=0,m,v=p<=0,b=!1;f.charCodeAt(p-1)===zm&&--p,f.charCodeAt(p-1)===Q$&&--p;function x(){if(v)return X$;if(b)return b=!1,W7;var k,S=g,C;if(f.charCodeAt(S)===K$){for(;g++<p&&f.charCodeAt(g)!==K$||f.charCodeAt(++g)===K$;);return(k=g)>=p?v=!0:(C=f.charCodeAt(g++))===zm?b=!0:C===Q$&&(b=!0,f.charCodeAt(g)===zm&&++g),f.slice(S+1,k-1).replace(/""/g,'"')}for(;g<p;){if((C=f.charCodeAt(k=g++))===zm)b=!0;else if(C===Q$)b=!0,f.charCodeAt(g)===zm&&++g;else if(C!==n)continue;return f.slice(S,k)}return v=!0,f.slice(S,p)}for(;(m=x())!==X$;){for(var w=[];m!==W7&&m!==X$;)w.push(m),m=x();d&&(w=d(w,y++))==null||h.push(w)}return h}function o(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function s(f,d){return d==null&&(d=H7(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=H7(f)),o(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?VAe(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var HAe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qAe=Object.prototype.hasOwnProperty;function s3(e,t){return qAe.call(e,t)}function a3(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)s3(e,i)&&r.push(i);return r}function Li(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function l3(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function cf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function fQ(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function u3(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(u3(e[t]))return!0}else if(typeof e=="object"){for(var r=a3(e),i=r.length,o=0;o<i;o++)if(u3(e[r[o]]))return!0}}return!1}function q7(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var dQ=function(e){HAe(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,q7(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=q7(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),Zt=dQ,GAe=Li,Zh={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Ow(n,this.path);r&&(r=Li(r));var i=qf(n,{op:"remove",path:this.from}).removed;return qf(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Ow(n,this.from);return qf(n,{op:"add",path:this.path,value:Li(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:u1(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},YAe={add:function(e,t,n){return l3(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Zh.move,copy:Zh.copy,test:Zh.test,_get:Zh._get};function Ow(e,t){if(t=="")return e;var n={op:"_get",path:t};return qf(e,n),n.value}function qf(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):Nw(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Ow(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=u1(e,t.value),s.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Zt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Li(e));var a=t.path||"",l=a.split("/"),u=e,c=1,f=l.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Nw;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=fQ(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!l3(h))throw new Zt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);l3(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>u.length)throw new Zt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=YAe[t.op].call(t,u,h,e);if(s.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=Zh[t.op].call(t,u,h,e);if(s.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&c<f&&(!u||typeof u!="object"))throw new Zt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function bC(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Zt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Li(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=qf(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function XAe(e,t,n){var r=qf(e,t);if(r.test===!1)throw new Zt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Nw(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Zt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Zh[e.op]){if(typeof e.path!="string")throw new Zt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Zt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Zt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Zt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&u3(e.value))throw new Zt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Zt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Zt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=hQ([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Zt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Zt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hQ(e,t,n){try{if(!Array.isArray(e))throw new Zt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)bC(Li(t),Li(e),n||!0);else{n=n||Nw;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Zt)return i;throw i}}function u1(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!u1(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!u1(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const KAe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Zt,_areEquals:u1,applyOperation:qf,applyPatch:bC,applyReducer:XAe,deepClone:GAe,getValueByPointer:Ow,validate:hQ,validator:Nw},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var JP=new WeakMap,QAe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),ZAe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function JAe(e){return JP.get(e)}function e5e(e,t){return e.observers.get(t)}function t5e(e,t){e.observers.delete(t.callback)}function n5e(e,t){t.unobserve()}function r5e(e,t){var n=[],r,i=JAe(e);if(!i)i=new QAe(e),JP.set(e,i);else{var o=e5e(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Li(e),t){r.callback=t,r.next=null;var s=function(){c3(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){c3(r),clearTimeout(r.next),t5e(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new ZAe(t,r)),r}function c3(e,t){t===void 0&&(t=!1);var n=JP.get(e.object);eR(n.value,e.object,e.patches,"",t),e.patches.length&&bC(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function eR(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=a3(t),s=a3(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],c=e[u];if(s3(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[u];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?eR(c,f,n,r+"/"+cf(u),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+cf(u),value:Li(c)}),n.push({op:"replace",path:r+"/"+cf(u),value:Li(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+cf(u),value:Li(c)}),n.push({op:"remove",path:r+"/"+cf(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!s3(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+cf(u),value:Li(t[u])})}}}function i5e(e,t,n){n===void 0&&(n=!1);var r=[];return eR(e,t,r,"",n),r}const o5e=Object.freeze(Object.defineProperty({__proto__:null,compare:i5e,generate:c3,observe:r5e,unobserve:n5e},Symbol.toStringTag,{value:"Module"}));Object.assign({},KAe,o5e,{JsonPatchError:dQ,deepClone:Li,escapePathComponent:cf,unescapePathComponent:fQ});var s5e=/("(?:[^\\"]|\\.)*")|[:,]/g,a5e=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function s(a,l,u){var c,f,d,h,p,g,y,m,v,b,x,w;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,o),x===void 0)return x;if(y=i-l.length-u,x.length<=y&&(v=x.replace(s5e,function(k,S){return S||k+" "}),v.length<=y))return v;if(o!=null&&(a=JSON.parse(x),o=void 0),typeof a=="object"&&a!==null){if(m=l+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",y=a.length;f<y;f++)d.push(s(a[f],m,f===y-1?0:1)||"null");else for(b="{",c="}",g=Object.keys(a),y=g.length;f<y;f++)h=g[f],p=JSON.stringify(h)+": ",w=s(a[h],m,p.length+(f===y-1?0:1)),w!==void 0&&d.push(p+w);if(d.length>0)return[b,r+d.join(`,
`+m),c].join(`
`+l)}return x}(t,"",0)};const Z$=zl(a5e);function Ei(e,t,n){return e.fields=t||[],e.fname=n,e}function nn(e){return e==null?null:e.fname}function kr(e){return e==null?null:e.fields}function pQ(e){return e.length===1?l5e(e[0]):u5e(e)}const l5e=e=>function(t){return t[e]},u5e=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function q(e){throw Error(e)}function Ta(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||q("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&q("Access path missing closing bracket: "+e),r&&q("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Ro(e,t,n){const r=Ta(e);return e=r.length===1?r[0]:e,Ei((n&&n.get||pQ)(r),[e],t||e)}const uv=Ro("id"),Ar=Ei(e=>e,[],"identity"),wu=Ei(()=>0,[],"zero"),Xg=Ei(()=>1,[],"one"),Do=Ei(()=>!0,[],"true"),ou=Ei(()=>!1,[],"false");function c5e(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const gQ=0,xC=1,tR=2,mQ=3,yQ=4;function nR(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c5e,r=e||gQ;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=xC&&n(t||"error","ERROR",arguments),this},warn(){return r>=tR&&n(t||"warn","WARN",arguments),this},info(){return r>=mQ&&n(t||"log","INFO",arguments),this},debug(){return r>=yQ&&n(t||"log","DEBUG",arguments),this}}}var G=Array.isArray;function se(e){return e===Object(e)}const G7=e=>e!=="__proto__";function Kg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=f5e(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;Qg(r,o,i[o],s)}return r},{})}function Qg(e,t,n,r){if(!G7(t))return;let i,o;if(se(n)&&!G(n)){o=se(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Qg(o,i,n[i]):G7(i)&&(o[i]=n[i])}else e[t]=n}function f5e(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function qe(e){return e[e.length-1]}function wr(e){return e==null||e===""?null:+e}const vQ=e=>t=>e*Math.exp(t),bQ=e=>t=>Math.log(e*t),xQ=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),wQ=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Iw=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function wC(e,t,n,r){const i=n(e[0]),o=n(qe(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function SQ(e,t){return wC(e,t,wr,Ar)}function kQ(e,t){var n=Math.sign(e[0]);return wC(e,t,bQ(n),vQ(n))}function CQ(e,t,n){return wC(e,t,Iw(n),Iw(1/n))}function _Q(e,t,n){return wC(e,t,xQ(n),wQ(n))}function SC(e,t,n,r,i){const o=r(e[0]),s=r(qe(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function rR(e,t,n){return SC(e,t,n,wr,Ar)}function iR(e,t,n){const r=Math.sign(e[0]);return SC(e,t,n,bQ(r),vQ(r))}function Lw(e,t,n,r){return SC(e,t,n,Iw(r),Iw(1/r))}function oR(e,t,n,r){return SC(e,t,n,xQ(r),wQ(r))}function EQ(e){return 1+~~(new Date(e).getMonth()/3)}function $Q(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ae(e){return e!=null?G(e)?e:[e]:[]}function AQ(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ne(e){return typeof e=="function"}const d5e="descending";function sR(e,t,n){n=n||{},t=ae(t)||[];const r=[],i=[],o={},s=n.comparator||h5e;return ae(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===d5e?-1:1),i.push(a=Ne(a)?a:Ro(a,null,n)),(kr(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:Ei(s(i,r),Object.keys(o))}const kC=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),h5e=(e,t)=>e.length===1?p5e(e[0],t[0]):g5e(e,t,e.length),p5e=(e,t)=>function(n,r){return kC(e(n),e(r))*t},g5e=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=kC(o(r),o(i));return s*t[a]});function Tr(e){return Ne(e)?e:()=>e}function aR(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Oe(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Sa(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function TQ(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}const m5e=Object.prototype.hasOwnProperty;function ce(e,t){return m5e.call(e,t)}const Yb={};function Zg(e){let t={},n;function r(o){return ce(t,o)&&t[o]!==Yb}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===Yb&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=Yb),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==Yb&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function MQ(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=qe(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=s?r:c<=s?i:o}function ne(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Oe(r,n)}function Jh(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function $c(e){return typeof e=="boolean"}function Qu(e){return Object.prototype.toString.call(e)==="[object Date]"}function FQ(e){return e&&Ne(e[Symbol.iterator])}function Ze(e){return typeof e=="number"}function PQ(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function le(e){return typeof e=="string"}function lR(e,t,n){e&&(e=t?ae(e).map(a=>a.replace(/\\(.)/g,"$1")):ae(e));const r=e&&e.length,i=n&&n.get||pQ,o=a=>i(t?[a]:Ta(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return Ei(s,e,"key")}function RQ(e,t){const n=e[0],r=qe(e),i=+t;return i?i===1?r:n+i*(r-n):n}const y5e=1e4;function DQ(e){e=+e||y5e;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>ce(t,s)||ce(n,s),get:s=>ce(t,s)?t[s]:ce(n,s)?o(s,n[s]):void 0,set:(s,a)=>ce(t,s)?t[s]=a:o(s,a)}}function OQ(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function _0(e,t){let n="";for(;--t>=0;)n+=e;return n}function NQ(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?_0(i,s)+o:r==="center"?_0(i,~~(s/2))+o+_0(i,Math.ceil(s/2)):o+_0(i,s)}function cv(e){return e&&qe(e)-e[0]||0}function te(e){return G(e)?"["+e.map(te)+"]":se(e)||le(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function uR(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const v5e=e=>Ze(e)||Qu(e)?e:Date.parse(e);function cR(e,t){return t=t||v5e,e==null||e===""?null:t(e)}function fR(e){return e==null||e===""?null:e+""}function ws(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function IQ(e,t,n,r){const i=r??"…",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function du(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function b5e(e){return e}function x5e(e){if(e==null)return b5e;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;u<c;)f[u]=a[u],++u;return f}}function w5e(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function S5e(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Y7(e,n)})}:Y7(e,t)}function Y7(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=LQ(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function LQ(e,t){var n=x5e(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&w5e(f,p)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(a)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(t)}function k5e(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=u,t[c]=d)}),t.forEach(function(u){var c=a(u),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,p=i[f]){delete i[p.end];var y=p===h?h:p.concat(h);r[y.start=p.start]=i[y.end=h.end]=y}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function a(u){var c=e.arcs[u<0?~u:u],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function C5e(e){return LQ(e,_5e.apply(this,arguments))}function _5e(e,t,n){var r,i,o;if(arguments.length>1)r=E5e(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:k5e(e,r)}}function E5e(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function l(f){f.forEach(a)}function u(f){f.forEach(l)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function vl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $5e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jg(e){let t,n,r;e.length!==2?(t=vl,n=(a,l)=>vl(e(a),l),r=(a,l)=>e(a)-l):(t=e===vl||e===$5e?e:A5e,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function A5e(){return 0}function zQ(e){return e===null?NaN:+e}function*T5e(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const jQ=Jg(vl),ac=jQ.right,M5e=jQ.left;Jg(zQ).center;function F5e(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function P5e(e,t){const n=F5e(e,t);return n&&Math.sqrt(n)}class Yr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class X7 extends Map{constructor(t,n=VQ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(f3(this,t))}has(t){return super.has(f3(this,t))}set(t,n){return super.set(BQ(this,t),n)}delete(t){return super.delete(UQ(this,t))}}class zw extends Set{constructor(t,n=VQ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(f3(this,t))}add(t){return super.add(BQ(this,t))}delete(t){return super.delete(UQ(this,t))}}function f3({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function BQ({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function UQ({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function VQ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function R5e(e,t){return Array.from(t,n=>e[n])}function D5e(e=vl){if(e===vl)return WQ;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function WQ(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const O5e=Math.sqrt(50),N5e=Math.sqrt(10),I5e=Math.sqrt(2);function jw(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=O5e?10:o>=N5e?5:o>=I5e?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?jw(e,t,n*2):[a,l,u]}function d3(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?jw(t,e,n):jw(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(i+u)/-s;else for(let u=0;u<a;++u)l[u]=(i+u)*s;return l}function h3(e,t,n){return t=+t,e=+e,n=+n,jw(e,t,n)[2]}function lc(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?h3(t,e,n):h3(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Gf(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function p3(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function HQ(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?WQ:D5e(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*f/l+d)),p=Math.min(r,Math.floor(t+(l-u)*f/l+d));HQ(e,t,h,p,i)}const o=e[t];let s=n,a=r;for(jm(e,n,t),i(e[r],o)>0&&jm(e,n,r);s<a;){for(jm(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?jm(e,n,a):(++a,jm(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function jm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function g3(e,t,n){if(e=Float64Array.from(T5e(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return p3(e);if(t>=1)return Gf(e);var r,i=(r-1)*t,o=Math.floor(i),s=Gf(HQ(e,o).subarray(0,o+1)),a=p3(e.subarray(o+1));return s+(a-s)*(i-o)}}function qQ(e,t,n=zQ){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function L5e(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function GQ(e,t){return g3(e,.5,t)}function*z5e(e){for(const t of e)yield*t}function YQ(e){return Array.from(z5e(e))}function zi(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function XQ(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function j5e(e,...t){e=new zw(e),t=t.map(B5e);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function B5e(e){return e instanceof zw?e:new zw(e)}function U5e(...e){const t=new zw;for(const n of e)for(const r of n)t.add(r);return t}function V5e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Bw(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function tg(e){return e=Bw(Math.abs(e)),e?e[1]:NaN}function W5e(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function H5e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var q5e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ud(e){if(!(t=q5e.exec(e)))throw new Error("invalid format: "+e);var t;return new dR({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ud.prototype=dR.prototype;function dR(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}dR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function G5e(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var KQ;function Y5e(e,t){var n=Bw(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(KQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Bw(e,Math.max(0,t+o-1))[0]}function K7(e,t){var n=Bw(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Q7={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:V5e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>K7(e*100,t),r:K7,s:Y5e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Z7(e){return e}var J7=Array.prototype.map,ez=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function QQ(e){var t=e.grouping===void 0||e.thousands===void 0?Z7:W5e(J7.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Z7:H5e(J7.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=ud(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,y=f.zero,m=f.width,v=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(v=!0,w="g"):Q7[w]||(b===void 0&&(b=12),x=!0,w="g"),(y||d==="0"&&h==="=")&&(y=!0,d="0",h="=");var k=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=g==="$"?r:/[%p]/.test(w)?s:"",C=Q7[w],_=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function $(A){var O=k,M=S,P,R,D;if(w==="c")M=C(A)+M,A="";else{A=+A;var I=A<0||1/A<0;if(A=isNaN(A)?l:C(Math.abs(A),b),x&&(A=G5e(A)),I&&+A==0&&p!=="+"&&(I=!1),O=(I?p==="("?p:a:p==="-"||p==="("?"":p)+O,M=(w==="s"?ez[8+KQ/3]:"")+M+(I&&p==="("?")":""),_){for(P=-1,R=A.length;++P<R;)if(D=A.charCodeAt(P),48>D||D>57){M=(D===46?i+A.slice(P+1):A.slice(P))+M,A=A.slice(0,P);break}}}v&&!y&&(A=t(A,1/0));var N=O.length+A.length+M.length,B=N<m?new Array(m-N+1).join(d):"";switch(v&&y&&(A=t(B+A,B.length?m-M.length:1/0),B=""),h){case"<":A=O+A+M+B;break;case"=":A=O+B+A+M;break;case"^":A=B.slice(0,N=B.length>>1)+O+A+M+B.slice(N);break;default:A=B+O+A+M;break}return o(A)}return $.toString=function(){return f+""},$}function c(f,d){var h=u((f=ud(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(tg(d)/3)))*3,g=Math.pow(10,-p),y=ez[8+p/3];return function(m){return h(g*m)+y}}return{format:u,formatPrefix:c}}var Xb,fv,hR;X5e({thousands:",",grouping:[3],currency:["$",""]});function X5e(e){return Xb=QQ(e),fv=Xb.format,hR=Xb.formatPrefix,Xb}function ZQ(e){return Math.max(0,-tg(Math.abs(e)))}function JQ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tg(t)/3)))*3-tg(Math.abs(e)))}function eZ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tg(t)-tg(e))+1}const J$=new Date,eA=new Date;function _n(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=o=>_n(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(J$.setTime(+o),eA.setTime(+s),e(J$),e(eA),Math.floor(n(J$,eA))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const ng=_n(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ng.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_n(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ng);ng.range;const ul=1e3,Co=ul*60,cl=Co*60,Rl=cl*24,pR=Rl*7,tz=Rl*30,tA=Rl*365,fs=_n(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ul)},(e,t)=>(t-e)/ul,e=>e.getUTCSeconds());fs.range;const dv=_n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ul)},(e,t)=>{e.setTime(+e+t*Co)},(e,t)=>(t-e)/Co,e=>e.getMinutes());dv.range;const hv=_n(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Co)},(e,t)=>(t-e)/Co,e=>e.getUTCMinutes());hv.range;const pv=_n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ul-e.getMinutes()*Co)},(e,t)=>{e.setTime(+e+t*cl)},(e,t)=>(t-e)/cl,e=>e.getHours());pv.range;const gv=_n(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*cl)},(e,t)=>(t-e)/cl,e=>e.getUTCHours());gv.range;const ma=_n(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Co)/Rl,e=>e.getDate()-1);ma.range;const bl=_n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rl,e=>e.getUTCDate()-1);bl.range;const tZ=_n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rl,e=>Math.floor(e/Rl));tZ.range;function Ld(e){return _n(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Co)/pR)}const zd=Ld(0),Uw=Ld(1),K5e=Ld(2),Q5e=Ld(3),rg=Ld(4),Z5e=Ld(5),J5e=Ld(6);zd.range;Uw.range;K5e.range;Q5e.range;rg.range;Z5e.range;J5e.range;function jd(e){return _n(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/pR)}const Bd=jd(0),Vw=jd(1),eTe=jd(2),tTe=jd(3),ig=jd(4),nTe=jd(5),rTe=jd(6);Bd.range;Vw.range;eTe.range;tTe.range;ig.range;nTe.range;rTe.range;const og=_n(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());og.range;const sg=_n(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());sg.range;const Ss=_n(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ss.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_n(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ss.range;const ks=_n(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ks.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_n(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ks.range;function nZ(e,t,n,r,i,o){const s=[[fs,1,ul],[fs,5,5*ul],[fs,15,15*ul],[fs,30,30*ul],[o,1,Co],[o,5,5*Co],[o,15,15*Co],[o,30,30*Co],[i,1,cl],[i,3,3*cl],[i,6,6*cl],[i,12,12*cl],[r,1,Rl],[r,2,2*Rl],[n,1,pR],[t,1,tz],[t,3,3*tz],[e,1,tA]];function a(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),p=h?h.range(u,+c+1):[];return d?p.reverse():p}function l(u,c,f){const d=Math.abs(c-u)/f,h=Jg(([,,y])=>y).right(s,d);if(h===s.length)return e.every(lc(u/tA,c/tA,f));if(h===0)return ng.every(Math.max(lc(u,c,f),1));const[p,g]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[iTe,oTe]=nZ(ks,sg,Bd,tZ,gv,hv),[sTe,aTe]=nZ(Ss,og,zd,ma,pv,dv),er="year",xi="quarter",Cr="month",wn="week",wi="date",xr="day",ka="dayofyear",Ki="hours",Qi="minutes",Oo="seconds",Cs="milliseconds",gR=[er,xi,Cr,wn,wi,xr,ka,Ki,Qi,Oo,Cs],nA=gR.reduce((e,t,n)=>(e[t]=1+n,e),{});function mR(e){const t=ae(e).slice(),n={};return t.length||q("Missing time unit."),t.forEach(i=>{ce(nA,i)?n[i]=1:q(`Invalid time unit: ${i}.`)}),(n[wn]||n[xr]?1:0)+(n[xi]||n[Cr]||n[wi]?1:0)+(n[ka]?1:0)>1&&q(`Incompatible time units: ${e}`),t.sort((i,o)=>nA[i]-nA[o]),t}const lTe={[er]:"%Y ",[xi]:"Q%q ",[Cr]:"%b ",[wi]:"%d ",[wn]:"W%U ",[xr]:"%a ",[ka]:"%j ",[Ki]:"%H:00",[Qi]:"00:%M",[Oo]:":%S",[Cs]:".%L",[`${er}-${Cr}`]:"%Y-%m ",[`${er}-${Cr}-${wi}`]:"%Y-%m-%d ",[`${Ki}-${Qi}`]:"%H:%M"};function rZ(e,t){const n=Oe({},lTe,t),r=mR(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const mf=new Date;function yR(e){return mf.setFullYear(e),mf.setMonth(0),mf.setDate(1),mf.setHours(0,0,0,0),mf}function iZ(e){return sZ(new Date(e))}function oZ(e){return m3(new Date(e))}function sZ(e){return ma.count(yR(e.getFullYear())-1,e)}function m3(e){return zd.count(yR(e.getFullYear())-1,e)}function y3(e){return yR(e).getDay()}function uTe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function aZ(e){return uZ(new Date(e))}function lZ(e){return v3(new Date(e))}function uZ(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return bl.count(t-1,e)}function v3(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Bd.count(t-1,e)}function b3(e){return mf.setTime(Date.UTC(e,0,1)),mf.getUTCDay()}function cTe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function cZ(e,t,n,r,i){const o=t||1,s=qe(e),a=(m,v,b)=>(b=b||m,fTe(n[b],r[b],m===s&&o,v)),l=new Date,u=ws(e),c=u[er]?a(er):Tr(2012),f=u[Cr]?a(Cr):u[xi]?a(xi):wu,d=u[wn]&&u[xr]?a(xr,1,wn+xr):u[wn]?a(wn,1):u[xr]?a(xr,1):u[wi]?a(wi,1):u[ka]?a(ka,1):Xg,h=u[Ki]?a(Ki):wu,p=u[Qi]?a(Qi):wu,g=u[Oo]?a(Oo):wu,y=u[Cs]?a(Cs):wu;return function(m){l.setTime(+m);const v=c(l);return i(v,f(l),d(l,v),h(l),p(l),g(l),y(l))}}function fTe(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function ag(e,t,n){return t+e*7-(n+6)%7}const dTe={[er]:e=>e.getFullYear(),[xi]:e=>Math.floor(e.getMonth()/3),[Cr]:e=>e.getMonth(),[wi]:e=>e.getDate(),[Ki]:e=>e.getHours(),[Qi]:e=>e.getMinutes(),[Oo]:e=>e.getSeconds(),[Cs]:e=>e.getMilliseconds(),[ka]:e=>sZ(e),[wn]:e=>m3(e),[wn+xr]:(e,t)=>ag(m3(e),e.getDay(),y3(t)),[xr]:(e,t)=>ag(1,e.getDay(),y3(t))},hTe={[xi]:e=>3*e,[wn]:(e,t)=>ag(e,0,y3(t))};function fZ(e,t){return cZ(e,t||1,dTe,hTe,uTe)}const pTe={[er]:e=>e.getUTCFullYear(),[xi]:e=>Math.floor(e.getUTCMonth()/3),[Cr]:e=>e.getUTCMonth(),[wi]:e=>e.getUTCDate(),[Ki]:e=>e.getUTCHours(),[Qi]:e=>e.getUTCMinutes(),[Oo]:e=>e.getUTCSeconds(),[Cs]:e=>e.getUTCMilliseconds(),[ka]:e=>uZ(e),[wn]:e=>v3(e),[xr]:(e,t)=>ag(1,e.getUTCDay(),b3(t)),[wn+xr]:(e,t)=>ag(v3(e),e.getUTCDay(),b3(t))},gTe={[xi]:e=>3*e,[wn]:(e,t)=>ag(e,0,b3(t))};function dZ(e,t){return cZ(e,t||1,pTe,gTe,cTe)}const mTe={[er]:Ss,[xi]:og.every(3),[Cr]:og,[wn]:zd,[wi]:ma,[xr]:ma,[ka]:ma,[Ki]:pv,[Qi]:dv,[Oo]:fs,[Cs]:ng},yTe={[er]:ks,[xi]:sg.every(3),[Cr]:sg,[wn]:Bd,[wi]:bl,[xr]:bl,[ka]:bl,[Ki]:gv,[Qi]:hv,[Oo]:fs,[Cs]:ng};function em(e){return mTe[e]}function tm(e){return yTe[e]}function hZ(e,t,n){return e?e.offset(t,n):void 0}function pZ(e,t,n){return hZ(em(e),t,n)}function gZ(e,t,n){return hZ(tm(e),t,n)}function mZ(e,t,n,r){return e?e.range(t,n,r):void 0}function yZ(e,t,n,r){return mZ(em(e),t,n,r)}function vZ(e,t,n,r){return mZ(tm(e),t,n,r)}const E0=1e3,$0=E0*60,A0=$0*60,CC=A0*24,vTe=CC*7,nz=CC*30,x3=CC*365,bZ=[er,Cr,wi,Ki,Qi,Oo,Cs],T0=bZ.slice(0,-1),M0=T0.slice(0,-1),F0=M0.slice(0,-1),bTe=F0.slice(0,-1),xTe=[er,wn],rz=[er,Cr],xZ=[er],Bm=[[T0,1,E0],[T0,5,5*E0],[T0,15,15*E0],[T0,30,30*E0],[M0,1,$0],[M0,5,5*$0],[M0,15,15*$0],[M0,30,30*$0],[F0,1,A0],[F0,3,3*A0],[F0,6,6*A0],[F0,12,12*A0],[bTe,1,CC],[xTe,1,vTe],[rz,1,nz],[rz,3,3*nz],[xZ,1,x3]];function wZ(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(cv(t))/n;let i=Jg(a=>a[2]).right(Bm,r),o,s;return i===Bm.length?(o=xZ,s=lc(t[0]/x3,t[1]/x3,n)):i?(i=Bm[r/Bm[i-1][2]<Bm[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=bZ,s=Math.max(lc(t[0],t[1],n),1)),{units:o,step:s}}function rA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function iA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Um(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function SZ(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=Vm(i),c=Wm(i),f=Vm(o),d=Wm(o),h=Vm(s),p=Wm(s),g=Vm(a),y=Wm(a),m=Vm(l),v=Wm(l),b={a:I,A:N,b:B,B:Y,c:null,d:uz,e:uz,f:VTe,g:JTe,G:t3e,H:jTe,I:BTe,j:UTe,L:kZ,m:WTe,M:HTe,p:W,q:oe,Q:dz,s:hz,S:qTe,u:GTe,U:YTe,V:XTe,w:KTe,W:QTe,x:null,X:null,y:ZTe,Y:e3e,Z:n3e,"%":fz},x={a:re,A:we,b:De,B:ut,c:null,d:cz,e:cz,f:s3e,g:m3e,G:v3e,H:r3e,I:i3e,j:o3e,L:_Z,m:a3e,M:l3e,p:$n,q:sr,Q:dz,s:hz,S:u3e,u:c3e,U:f3e,V:d3e,w:h3e,W:p3e,x:null,X:null,y:g3e,Y:y3e,Z:b3e,"%":fz},w={a:$,A,b:O,B:M,c:P,d:az,e:az,f:NTe,g:sz,G:oz,H:lz,I:lz,j:PTe,L:OTe,m:FTe,M:RTe,p:_,q:MTe,Q:LTe,s:zTe,S:DTe,u:_Te,U:ETe,V:$Te,w:CTe,W:ATe,x:R,X:D,y:sz,Y:oz,Z:TTe,"%":ITe};b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x);function k(ue,$e){return function(Ae){var Q=[],mn=-1,tt=0,An=ue.length,fn,oo,ih;for(Ae instanceof Date||(Ae=new Date(+Ae));++mn<An;)ue.charCodeAt(mn)===37&&(Q.push(ue.slice(tt,mn)),(oo=iz[fn=ue.charAt(++mn)])!=null?fn=ue.charAt(++mn):oo=fn==="e"?" ":"0",(ih=$e[fn])&&(fn=ih(Ae,oo)),Q.push(fn),tt=mn+1);return Q.push(ue.slice(tt,mn)),Q.join("")}}function S(ue,$e){return function(Ae){var Q=Um(1900,void 0,1),mn=C(Q,ue,Ae+="",0),tt,An;if(mn!=Ae.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if($e&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(tt=iA(Um(Q.y,0,1)),An=tt.getUTCDay(),tt=An>4||An===0?Vw.ceil(tt):Vw(tt),tt=bl.offset(tt,(Q.V-1)*7),Q.y=tt.getUTCFullYear(),Q.m=tt.getUTCMonth(),Q.d=tt.getUTCDate()+(Q.w+6)%7):(tt=rA(Um(Q.y,0,1)),An=tt.getDay(),tt=An>4||An===0?Uw.ceil(tt):Uw(tt),tt=ma.offset(tt,(Q.V-1)*7),Q.y=tt.getFullYear(),Q.m=tt.getMonth(),Q.d=tt.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),An="Z"in Q?iA(Um(Q.y,0,1)).getUTCDay():rA(Um(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(An+5)%7:Q.w+Q.U*7-(An+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,iA(Q)):rA(Q)}}function C(ue,$e,Ae,Q){for(var mn=0,tt=$e.length,An=Ae.length,fn,oo;mn<tt;){if(Q>=An)return-1;if(fn=$e.charCodeAt(mn++),fn===37){if(fn=$e.charAt(mn++),oo=w[fn in iz?$e.charAt(mn++):fn],!oo||(Q=oo(ue,Ae,Q))<0)return-1}else if(fn!=Ae.charCodeAt(Q++))return-1}return Q}function _(ue,$e,Ae){var Q=u.exec($e.slice(Ae));return Q?(ue.p=c.get(Q[0].toLowerCase()),Ae+Q[0].length):-1}function $(ue,$e,Ae){var Q=h.exec($e.slice(Ae));return Q?(ue.w=p.get(Q[0].toLowerCase()),Ae+Q[0].length):-1}function A(ue,$e,Ae){var Q=f.exec($e.slice(Ae));return Q?(ue.w=d.get(Q[0].toLowerCase()),Ae+Q[0].length):-1}function O(ue,$e,Ae){var Q=m.exec($e.slice(Ae));return Q?(ue.m=v.get(Q[0].toLowerCase()),Ae+Q[0].length):-1}function M(ue,$e,Ae){var Q=g.exec($e.slice(Ae));return Q?(ue.m=y.get(Q[0].toLowerCase()),Ae+Q[0].length):-1}function P(ue,$e,Ae){return C(ue,t,$e,Ae)}function R(ue,$e,Ae){return C(ue,n,$e,Ae)}function D(ue,$e,Ae){return C(ue,r,$e,Ae)}function I(ue){return s[ue.getDay()]}function N(ue){return o[ue.getDay()]}function B(ue){return l[ue.getMonth()]}function Y(ue){return a[ue.getMonth()]}function W(ue){return i[+(ue.getHours()>=12)]}function oe(ue){return 1+~~(ue.getMonth()/3)}function re(ue){return s[ue.getUTCDay()]}function we(ue){return o[ue.getUTCDay()]}function De(ue){return l[ue.getUTCMonth()]}function ut(ue){return a[ue.getUTCMonth()]}function $n(ue){return i[+(ue.getUTCHours()>=12)]}function sr(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var $e=k(ue+="",b);return $e.toString=function(){return ue},$e},parse:function(ue){var $e=S(ue+="",!1);return $e.toString=function(){return ue},$e},utcFormat:function(ue){var $e=k(ue+="",x);return $e.toString=function(){return ue},$e},utcParse:function(ue){var $e=S(ue+="",!0);return $e.toString=function(){return ue},$e}}}var iz={"-":"",_:" ",0:"0"},Bn=/^\s*\d+/,wTe=/^%/,STe=/[\\^$*+?|[\]().{}]/g;function Je(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function kTe(e){return e.replace(STe,"\\$&")}function Vm(e){return new RegExp("^(?:"+e.map(kTe).join("|")+")","i")}function Wm(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function CTe(e,t,n){var r=Bn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function _Te(e,t,n){var r=Bn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ETe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function $Te(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ATe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function oz(e,t,n){var r=Bn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function sz(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function TTe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function MTe(e,t,n){var r=Bn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function FTe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function az(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function PTe(e,t,n){var r=Bn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function lz(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function RTe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function DTe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function OTe(e,t,n){var r=Bn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function NTe(e,t,n){var r=Bn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ITe(e,t,n){var r=wTe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function LTe(e,t,n){var r=Bn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function zTe(e,t,n){var r=Bn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function uz(e,t){return Je(e.getDate(),t,2)}function jTe(e,t){return Je(e.getHours(),t,2)}function BTe(e,t){return Je(e.getHours()%12||12,t,2)}function UTe(e,t){return Je(1+ma.count(Ss(e),e),t,3)}function kZ(e,t){return Je(e.getMilliseconds(),t,3)}function VTe(e,t){return kZ(e,t)+"000"}function WTe(e,t){return Je(e.getMonth()+1,t,2)}function HTe(e,t){return Je(e.getMinutes(),t,2)}function qTe(e,t){return Je(e.getSeconds(),t,2)}function GTe(e){var t=e.getDay();return t===0?7:t}function YTe(e,t){return Je(zd.count(Ss(e)-1,e),t,2)}function CZ(e){var t=e.getDay();return t>=4||t===0?rg(e):rg.ceil(e)}function XTe(e,t){return e=CZ(e),Je(rg.count(Ss(e),e)+(Ss(e).getDay()===4),t,2)}function KTe(e){return e.getDay()}function QTe(e,t){return Je(Uw.count(Ss(e)-1,e),t,2)}function ZTe(e,t){return Je(e.getFullYear()%100,t,2)}function JTe(e,t){return e=CZ(e),Je(e.getFullYear()%100,t,2)}function e3e(e,t){return Je(e.getFullYear()%1e4,t,4)}function t3e(e,t){var n=e.getDay();return e=n>=4||n===0?rg(e):rg.ceil(e),Je(e.getFullYear()%1e4,t,4)}function n3e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Je(t/60|0,"0",2)+Je(t%60,"0",2)}function cz(e,t){return Je(e.getUTCDate(),t,2)}function r3e(e,t){return Je(e.getUTCHours(),t,2)}function i3e(e,t){return Je(e.getUTCHours()%12||12,t,2)}function o3e(e,t){return Je(1+bl.count(ks(e),e),t,3)}function _Z(e,t){return Je(e.getUTCMilliseconds(),t,3)}function s3e(e,t){return _Z(e,t)+"000"}function a3e(e,t){return Je(e.getUTCMonth()+1,t,2)}function l3e(e,t){return Je(e.getUTCMinutes(),t,2)}function u3e(e,t){return Je(e.getUTCSeconds(),t,2)}function c3e(e){var t=e.getUTCDay();return t===0?7:t}function f3e(e,t){return Je(Bd.count(ks(e)-1,e),t,2)}function EZ(e){var t=e.getUTCDay();return t>=4||t===0?ig(e):ig.ceil(e)}function d3e(e,t){return e=EZ(e),Je(ig.count(ks(e),e)+(ks(e).getUTCDay()===4),t,2)}function h3e(e){return e.getUTCDay()}function p3e(e,t){return Je(Vw.count(ks(e)-1,e),t,2)}function g3e(e,t){return Je(e.getUTCFullYear()%100,t,2)}function m3e(e,t){return e=EZ(e),Je(e.getUTCFullYear()%100,t,2)}function y3e(e,t){return Je(e.getUTCFullYear()%1e4,t,4)}function v3e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ig(e):ig.ceil(e),Je(e.getUTCFullYear()%1e4,t,4)}function b3e(){return"+0000"}function fz(){return"%"}function dz(e){return+e}function hz(e){return Math.floor(+e/1e3)}var hh,vR,$Z,bR,AZ;x3e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function x3e(e){return hh=SZ(e),vR=hh.format,$Z=hh.parse,bR=hh.utcFormat,AZ=hh.utcParse,hh}function P0(e){const t={};return n=>t[n]||(t[n]=e(n))}function w3e(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=S3e(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function S3e(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function TZ(e){const t=P0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=ud(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return w3e(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=ud(s??",f");const a=lc(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=JQ(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=eZ(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=ZQ(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let w3;MZ();function MZ(){return w3=TZ({format:fv,formatPrefix:hR})}function FZ(e){return TZ(QQ(e))}function Ww(e){return arguments.length?w3=FZ(e):w3}function pz(e,t,n){n=n||{},se(n)||q(`Invalid time multi-format specifier: ${n}`);const r=t(Oo),i=t(Qi),o=t(Ki),s=t(wi),a=t(wn),l=t(Cr),u=t(xi),c=t(er),f=e(n[Cs]||".%L"),d=e(n[Oo]||":%S"),h=e(n[Qi]||"%I:%M"),p=e(n[Ki]||"%I %p"),g=e(n[wi]||n[xr]||"%a %d"),y=e(n[wn]||"%b %d"),m=e(n[Cr]||"%B"),v=e(n[xi]||"%B"),b=e(n[er]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:o(x)<x?h:s(x)<x?p:l(x)<x?a(x)<x?g:y:c(x)<x?u(x)<x?m:v:b)(x)}function PZ(e){const t=P0(e.format),n=P0(e.utcFormat);return{timeFormat:r=>le(r)?t(r):pz(t,em,r),utcFormat:r=>le(r)?n(r):pz(n,tm,r),timeParse:P0(e.parse),utcParse:P0(e.utcParse)}}let S3;RZ();function RZ(){return S3=PZ({format:vR,parse:$Z,utcFormat:bR,utcParse:AZ})}function DZ(e){return PZ(SZ(e))}function c1(e){return arguments.length?S3=DZ(e):S3}const k3=(e,t)=>Oe({},e,t);function OZ(e,t){const n=e?FZ(e):Ww(),r=t?DZ(t):c1();return k3(n,r)}function xR(e,t){const n=arguments.length;return n&&n!==2&&q("defaultLocale expects either zero or two arguments."),n?k3(Ww(e),c1(t)):k3(Ww(),c1())}function k3e(){return MZ(),RZ(),xR()}const C3e=/^(data:|([A-Za-z]+:)?\/\/)/,_3e=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,E3e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,gz="file://";function $3e(e,t){return n=>({options:n||{},sanitize:T3e,load:A3e,fileAccess:!!t,file:M3e(t),http:P3e(e)})}async function A3e(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function T3e(e,t){t=Oe({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=_3e.test(e.replace(E3e,""));(e==null||typeof e!="string"||!a)&&q("Sanitize failure, invalid URI: "+te(e));const l=C3e.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(gz))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(gz.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function M3e(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):F3e}async function F3e(){q("No file system access.")}function P3e(e){return e?async function(t,n){const r=Oe({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Ne(o[i])?o[i]():o.text():q(o.status+""+o.statusText)}:R3e}async function R3e(){q("No HTTP fetch method available.")}const D3e=e=>e!=null&&e===e,O3e=e=>e==="true"||e==="false"||e===!0||e===!1,N3e=e=>!Number.isNaN(Date.parse(e)),NZ=e=>!Number.isNaN(+e)&&!(e instanceof Date),I3e=e=>NZ(e)&&Number.isInteger(+e),C3={boolean:uR,integer:wr,number:wr,date:cR,string:fR,unknown:Ar},Kb=[O3e,I3e,NZ,N3e],L3e=["boolean","integer","number","date"];function IZ(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Kb.length,i=Kb.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&D3e(l)&&!Kb[a](l)&&(i[a]=0,++s,s===Kb.length))return"string";return L3e[i.reduce((o,s)=>o===0?s:o,0)-1]}function LZ(e,t){return t.reduce((n,r)=>(n[r]=IZ(e,r),n),{})}function mz(e){const t=function(n,r){const i={delimiter:e};return wR(n,r?Oe(r,i):i)};return t.responseType="text",t}function wR(e,t){return t.header&&(e=t.header.map(te).join(t.delimiter)+`
`+e),WAe(t.delimiter).parse(e+"")}wR.responseType="text";function z3e(e){return typeof Buffer=="function"&&Ne(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function SR(e,t){const n=t&&t.property?Ro(t.property):Ar;return se(e)&&!z3e(e)?j3e(n(e),t):n(JSON.parse(e))}SR.responseType="json";function j3e(e,t){return!G(e)&&FQ(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const B3e={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function zZ(e,t){let n,r,i,o;return e=SR(e,t),t&&t.feature?(n=S5e,i=t.feature):t&&t.mesh?(n=C5e,i=t.mesh,o=B3e[t.filter]):q("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):q("Invalid TopoJSON object: "+i),r&&r.features||[r]}zZ.responseType="json";const g2={dsv:wR,csv:mz(","),tsv:mz("	"),json:SR,topojson:zZ};function kR(e,t){return arguments.length>1?(g2[e]=t,this):ce(g2,e)?g2[e]:null}function jZ(e){const t=kR(e);return t&&t.responseType||"text"}function BZ(e,t,n,r){t=t||{};const i=kR(t.type||"json");return i||q("Unknown data format type: "+t.type),e=i(e,t),t.parse&&U3e(e,t.parse,n,r),ce(e,"columns")&&delete e.columns,e}function U3e(e,t,n,r){if(!e.length)return;const i=c1();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,c,f;t==="auto"&&(t=LZ(e,o)),o=Object.keys(t);const d=o.map(h=>{const p=t[h];let g,y;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?r:n)(y);if(!C3[p])throw Error("Illegal format pattern: "+h+":"+p);return C3[p]});for(l=0,c=e.length,f=o.length;l<c;++l)for(s=e[l],u=0;u<f;++u)a=o[u],s[a]=d[u](s[a])}const _C=$3e(typeof fetch<"u"&&fetch,null);function EC(e){const t=e||Ar,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function m2(e,t){try{await t(e)}catch(n){e.error(n)}}const UZ=Symbol("vega_id");let V3e=1;function $C(e){return!!(e&&ve(e))}function ve(e){return e[UZ]}function VZ(e,t){return e[UZ]=t,e}function at(e){const t=e===Object(e)?e:{data:e};return ve(t)?t:VZ(t,V3e++)}function CR(e){return AC(e,at({}))}function AC(e,t){for(const n in e)t[n]=e[n];return t}function WZ(e,t){return VZ(t,ve(e))}function Ud(e,t){return e?t?(n,r)=>e(n,r)||ve(t(n))-ve(t(r)):(n,r)=>e(n,r)||ve(n)-ve(r):null}function HZ(e){return e&&e.constructor===Vd}function Vd(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:Vd,insert(a){const l=ae(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=Ne(a)?r:t,u=ae(a),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(a,l,u){const c={field:l,value:Tr(u)};return Ne(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return Ne(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let f,d,h,p,g,y;for(f=0,d=l.length;f<d;++f)u[ve(l[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],u[ve(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],l.forEach(v=>{p(v)&&(u[ve(v)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],y=ve(g),u[y]?u[y]=1:a.add.push(at(e[f]));for(f=0,d=l.length;f<d;++f)g=l[f],u[ve(g)]<0&&a.rem.push(g);function m(v,b,x){x?v[b]=x(v):a.encode=b,s||(c[ve(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,y=u[ve(g)],y>0&&(m(g,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,l.forEach(v=>{p(v)&&u[ve(v)]>0&&m(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?l.filter(v=>u[ve(v)]>0):l.slice();else for(y in c)a.mod.push(c[y]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const y2="_:mod:_";function TC(){Object.defineProperty(this,y2,{writable:!0,value:{}})}TC.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[y2];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=G(n)?1+n.length:-1),i},modified(e,t){const n=this[y2];if(arguments.length){if(G(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[y2]={},this}};let W3e=0;const H3e="pulse",q3e=new TC,G3e=1,Y3e=2;function St(e,t,n,r){this.id=++W3e,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function yz(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}St.prototype={targets(){return this._targets||(this._targets=EC(uv))},set(e){return this.value!==e?(this.value=e,1):0},skip:yz(G3e),modified:yz(Y3e),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new TC,i=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(f,d,h)=>{h instanceof St?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===H3e)ae(a).forEach(f=>{f instanceof St?f!==this&&(f.targets().add(this),o.push(f)):q("Pulse parameters must be operator instances.")}),this.source=a;else if(G(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||q3e,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function X3e(e,t,n,r){let i=1,o;return e instanceof St?o=e:e&&e.prototype instanceof St?o=new e:Ne(e)?o=new St(null,e):(i=0,o=new St(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function K3e(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let Q3e=0;function MC(e,t,n){this.id=++Q3e,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function su(e,t,n){return new MC(e,t,n)}MC.prototype={_filter:Do,_apply:Ar,targets(){return this._targets||(this._targets=EC(uv))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=su(e);return this.targets().add(t),t},apply(e){const t=su(null,e);return this.targets().add(t),t},merge(){const e=su();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=su();return this.targets().add(su(null,null,aR(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(su(null,null,()=>n=!0)),t.targets().add(su(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Do,this._targets=null}};function Z3e(e,t,n,r){const i=this,o=su(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ae(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function J3e(e,t){const n=this.locale();return BZ(e,t,n.timeParse,n.utcParse)}function e4e(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function t4e(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:jZ(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function n4e(e,t,n){const r=this,i=r._pending||r4e(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(Do).insert(o.data||[])),i.done(),o}function r4e(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const i4e={skip:!0};function o4e(e,t,n,r,i){return(e instanceof St?a4e:s4e)(this,e,t,n,r,i),this}function s4e(e,t,n,r,i,o){const s=Oe({},o,i4e);let a,l;Ne(n)||(n=Tr(n)),r===void 0?a=u=>e.touch(n(u)):Ne(r)?(l=new St(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),f=l.value;HZ(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function a4e(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new St(null,l4e(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function l4e(e,t){return t=Ne(t)?t:Tr(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function u4e(e){e.rank=++this._rank}function c4e(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&q("Cycle detected in dataflow graph.")}const Hw={},Gs=1,hu=2,Qa=4,f4e=Gs|hu,vz=Gs|Qa,ph=Gs|hu|Qa,bz=8,Hm=16,xz=32,wz=64;function Zu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function oA(e,t){const n=[];return du(e,t,r=>n.push(r)),n}function Sz(e,t){const n={};return e.visit(t,r=>{n[ve(r)]=1}),r=>n[ve(r)]?null:r}function Qb(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Zu.prototype={StopPropagation:Hw,ADD:Gs,REM:hu,MOD:Qa,ADD_REM:f4e,ADD_MOD:vz,ALL:ph,REFLOW:bz,SOURCE:Hm,NO_SOURCE:xz,NO_FIELDS:wz,fork(e){return new Zu(this.dataflow).init(this,e)},clone(){const e=this.fork(ph);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(ph|Hm)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Zu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&wz)&&(n.fields=e.fields),t&Gs?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&hu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Qa?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&xz?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||ph;return t&Gs&&this.add.length||t&hu&&this.rem.length||t&Qa&&this.mod.length},reflow(e){if(e)return this.fork(ph).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Qa,Sz(this,Gs))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return G(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?G(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Gs&&(n.addF=Qb(n.addF,t)),e&hu&&(n.remF=Qb(n.remF,t)),e&Qa&&(n.modF=Qb(n.modF,t)),e&Hm&&(n.srcF=Qb(n.srcF,t)),n},materialize(e){e=e||ph;const t=this;return e&Gs&&t.addF&&(t.add=oA(t.add,t.addF),t.addF=null),e&hu&&t.remF&&(t.rem=oA(t.rem,t.remF),t.remF=null),e&Qa&&t.modF&&(t.mod=oA(t.mod,t.modF),t.modF=null),e&Hm&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&Hm)return du(n.source,n.srcF,r),n;e&Gs&&du(n.add,n.addF,r),e&hu&&du(n.rem,n.remF,r),e&Qa&&du(n.mod,n.modF,r);const i=n.source;if(e&bz&&i){const o=n.add.length+n.mod.length;o===i.length||(o?du(i,Sz(n,vz),r):du(i,n.srcF,r))}return n}};function _R(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ne(_R,Zu,{fork(e){const t=new Zu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?G(e)?e.some(r=>n[r]):n[e]:0},filter(){q("MultiPulse does not support filtering.")},materialize(){q("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function d4e(e,t,n){const r=this,i=[];if(r._pulse)return qZ(r);if(r._pending&&await r._pending,t&&await m2(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Zu(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=EC(uv);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=Hw),l!==Hw&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await m2(r,c[f].callback)}return n&&await m2(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function h4e(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function p4e(e,t,n){return this._pulse?qZ(this):(this.evaluate(e,t,n),this)}function g4e(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function qZ(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function m4e(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function y4e(e,t){const n=e.source,r=this._clock;return n&&G(n)?new _R(this,r,n.map(i=>i.pulse),t):this._input[e.id]||v4e(this._pulse,n&&n.pulse)}function v4e(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Hw&&(e.source=t.source),e)}const ER={skip:!1,force:!1};function b4e(e,t){const n=t||ER;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function x4e(e,t,n){const r=n||ER;return(e.set(t)||r.force)&&this.touch(e,r),this}function w4e(e,t,n){this.touch(e,n||ER);const r=new Zu(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function S4e(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),GZ(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,k4e(t,0,e)):r=n,r}}}function GZ(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function k4e(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,GZ(e,r,t,n)}function mp(){this.logger(nR()),this.logLevel(xC),this._clock=0,this._rank=0,this._locale=xR();try{this._loader=_C()}catch{}this._touched=EC(uv),this._input={},this._pulse=null,this._heap=S4e((e,t)=>e.qrank-t.qrank),this._postrun=[]}function qm(e){return function(){return this._log[e].apply(this,arguments)}}mp.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:qm("error"),warn:qm("warn"),info:qm("info"),debug:qm("debug"),logLevel:qm("level"),cleanThreshold:1e4,add:X3e,connect:K3e,rank:u4e,rerank:c4e,pulse:w4e,touch:b4e,update:x4e,changeset:Vd,ingest:e4e,parse:J3e,preload:n4e,request:t4e,events:Z3e,on:o4e,evaluate:d4e,run:p4e,runAsync:h4e,runAfter:g4e,_enqueue:m4e,_getPulse:y4e};function V(e,t){St.call(this,e,null,t)}ne(V,St,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const lg={};function YZ(e){const t=XZ(e);return t&&t.Definition||null}function XZ(e){return e=e&&e.toLowerCase(),ce(lg,e)?lg[e]:null}function*KZ(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function $R(e,t,n){const r=Float64Array.from(KZ(e,n));return r.sort(vl),t.map(i=>qQ(r,i))}function AR(e,t){return $R(e,[.25,.5,.75],t)}function TR(e,t){const n=e.length,r=P5e(e,t),i=AR(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function QZ(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+g)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var No=Math.random;function C4e(e){No=e}function ZZ(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(KZ(e,r)),o=i.length,s=t;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(No()*o)];c[u]=a/o}return c.sort(vl),[g3(c,n/2),g3(c,1-n/2)]}function JZ(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,c=l+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?_4e(o,t+t/4):o}function _4e(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function E4e(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function $4e(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*No())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const eJ=Math.sqrt(2*Math.PI),A4e=Math.SQRT2;let Gm=NaN;function FC(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(Gm===Gm)n=Gm,Gm=NaN;else{do n=No()*2-1,r=No()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,Gm=r*o}return e+n*t}function MR(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*eJ)}function PC(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function RC(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*A4e*T4e(2*e-1)}function T4e(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function FR(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>FC(n,r),pdf:o=>MR(o,n,r),cdf:o=>PC(o,n,r),icdf:o=>RC(o,n,r)};return i.mean(e).stdev(t)}function PR(e,t){const n=FR();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=TR(e)),i):t},sample(){return e[~~(No()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function RR(e,t){return e=e||0,t=t??1,Math.exp(e+FC()*t)}function DR(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*eJ*e)}function OR(e,t,n){return PC(Math.log(e),t,n)}function NR(e,t,n){return Math.exp(RC(e,t,n))}function tJ(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>RR(n,r),pdf:o=>DR(o,n,r),cdf:o=>OR(o,n,r),icdf:o=>NR(o,n,r)};return i.mean(e).stdev(t)}function nJ(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=No();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function IR(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*No()}function LR(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function zR(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function jR(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function rJ(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>IR(n,r),pdf:o=>LR(o,n,r),cdf:o=>zR(o,n,r),icdf:o=>jR(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function BR(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function mv(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function DC(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,l+=(c-l)/a,u+=(f-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function yv(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function nm(e,t,n,r,i){let o=0,s=0;return yv(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;o+=u*u,s+=c*c}),1-o/s}function UR(e,t,n){let r=0,i=0,o=0,s=0,a=0;yv(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=mv(r,i,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:nm(e,t,n,i,u)}}function iJ(e,t,n){let r=0,i=0,o=0,s=0,a=0;yv(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=mv(r,i,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:nm(e,t,n,i,u)}}function oJ(e,t,n){const[r,i,o,s]=DC(e,t,n);let a=0,l=0,u=0,c=0,f=0,d,h,p;yv(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,l+=(p-l)/f,u+=(p*h-u)/f,c+=(d*p-c)/f});const[g,y]=mv(l/s,a/s,u/s,c/s),m=v=>Math.exp(g+y*(v-o));return{coef:[Math.exp(g-y*o),y],predict:m,rSquared:nm(e,t,n,s,m)}}function sJ(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;yv(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++l,r+=(h-r)/l,i+=(p-i)/l,o+=(h*p-o)/l,s+=(h*h-s)/l,a+=(d-a)/l});const u=mv(r,i,o,s),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:nm(e,t,n,a,c)}}function VR(e,t,n){const[r,i,o,s]=DC(e,t,n),a=r.length;let l=0,u=0,c=0,f=0,d=0,h,p,g,y;for(h=0;h<a;)p=r[h],g=i[h++],y=p*p,l+=(y-l)/h,u+=(y*p-u)/h,c+=(y*y-c)/h,f+=(p*g-f)/h,d+=(y*g-d)/h;const m=c-l*l,v=l*m-u*u,b=(d*l-f*u)/v,x=(f*m-d*u)/v,w=-b*l,k=S=>(S=S-o,b*S*S+x*S+w+s);return{coef:[w-x*o+b*o*o+s,x-2*b*o,b],predict:k,rSquared:nm(e,t,n,s,k)}}function aJ(e,t,n,r){if(r===0)return BR(e,t,n);if(r===1)return UR(e,t,n);if(r===2)return VR(e,t,n);const[i,o,s,a]=DC(e,t,n),l=i.length,u=[],c=[],f=r+1;let d,h,p,g,y;for(d=0;d<f;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d)*o[p];for(u.push(g),y=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d+h);y[h]=g}c.push(y)}c.push(u);const m=F4e(c),v=b=>{b-=s;let x=a+m[0]+m[1]*b+m[2]*b*b;for(d=3;d<f;++d)x+=m[d]*Math.pow(b,d);return x};return{coef:M4e(f,m,-s,a),predict:v,rSquared:nm(e,t,n,a,v)}}function M4e(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function F4e(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const kz=2,Cz=1e-12;function lJ(e,t,n,r){const[i,o,s,a]=DC(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=kz;){const p=[0,u-1];for(let y=0;y<l;++y){const m=i[y],v=p[0],b=p[1],x=m-i[v]>i[b]-m?v:b;let w=0,k=0,S=0,C=0,_=0;const $=1/Math.abs(i[x]-m||1);for(let M=v;M<=b;++M){const P=i[M],R=o[M],D=P4e(Math.abs(m-P)*$)*d[M],I=P*D;w+=D,k+=I,S+=R*D,C+=R*I,_+=P*I}const[A,O]=mv(k/w,S/w,C/w,_/w);c[y]=A+O*m,f[y]=Math.abs(o[y]-c[y]),R4e(i,y+1,p)}if(h===kz)break;const g=GQ(f);if(Math.abs(g)<Cz)break;for(let y=0,m,v;y<l;++y)m=f[y]/(6*g),d[y]=m>=1?Cz:(v=1-m*m)*v}return D4e(i,c,s,a)}function P4e(e){return(e=1-e*e*e)*e*e}function R4e(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function D4e(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const O4e=.5*Math.PI/180;function OC(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],c=[];if(n===r){for(let g=1;g<r;++g)u.push(i(o+g/n*a));return u.push(i(s)),u}else{c.push(i(s));for(let g=n;--g>0;)c.push(i(o+g/n*a))}let f=u[0],d=c[c.length-1];const h=1/a,p=N4e(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=l&&I4e(f,g,d,h,p)>O4e?c.push(g):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function N4e(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function I4e(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function L4e(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function _3(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:L4e(e)}function uJ(e,t,n){return n||e+(t?"_"+t:"")}const sA=()=>{},z4e={init:sA,add:sA,rem:sA,idx:0},f1={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},vv=Object.keys(f1).filter(e=>e!=="__count__");function j4e(e,t){return(n,r)=>Oe({name:e,aggregate_param:r,out:n||e},z4e,t)}[...vv,"__count__"].forEach(e=>{f1[e]=j4e(e,f1[e])});function cJ(e,t,n){return f1[e](n,t)}function fJ(e,t){return e.idx-t.idx}function B4e(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=f1[i]())})};return e.forEach(n),Object.values(t).sort(fJ)}function U4e(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function V4e(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function W4e(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function H4e(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function dJ(e,t){const n=t||Ar,r=B4e(e),i=e.slice().sort(fJ);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=U4e,o.prototype.add=V4e,o.prototype.rem=W4e,o.prototype.set=H4e,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function WR(e){this._key=e?Ro(e):ve,this.reset()}const or=WR.prototype;or.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};or.add=function(e){this._add.push(e)};or.rem=function(e){this._rem.push(e)};or.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};or.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",ce(n,o)||(n[o]=1,++i);return i};or.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=TQ(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};or.argmin=function(e){return this.extent(e)[0]||{}};or.argmax=function(e){return this.extent(e)[1]||{}};or.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};or.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};or.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=AR(this.values(),e),this._get=e),this._q};or.q1=function(e){return this.quartile(e)[0]};or.q2=function(e){return this.quartile(e)[1]};or.q3=function(e){return this.quartile(e)[2]};or.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=ZZ(this.values(),1e3,.05,e),this._get=e),this._ci};or.ci0=function(e){return this.ci(e)[0]};or.ci1=function(e){return this.ci(e)[1]};function uc(e){V.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}uc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:vv},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ne(uc,V,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,c,f;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][f=c[n[u]]]=f}o(e._prev),o(t);function s(a,l,u){const c=n[u],f=r[u++];for(const d in f){const h=a?a+"|"+d:d;l[c]=f[d],u<i?s(h,l,u):t[h]||e.cell(h,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=ae(kr(v)),x=b.length;let w=0,k;for(;w<x;++w)r[k=b[w]]||(r[k]=1,t.push(k))}this._dims=ae(e.groupby),this._dnames=this._dims.map(v=>{const b=nn(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:_3(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let f,d,h,p,g,y,m;for(u!==s.length&&q("Unmatched number of fields and aggregate ops."),m=0;m<u;++m){if(f=o[m],d=s[m],h=a[m]||null,f==null&&d!=="count"&&q("Null aggregate field specified."),g=nn(f),y=uJ(d,g,l[m]),n.push(y),d==="count"){this._counts.push(y);continue}p=c[g],p||(i(f),p=c[g]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(cJ(d,h,y))}return this._measures=this._measures.map(v=>dJ(v,v.field)),Object.create(null)},cellkey:_3(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new WR),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?WZ(t.tuple,o):at(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,c,f;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&i?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const q4e=1e-14;function HR(e){V.call(this,null,e)}HR.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ne(HR,V,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(kr(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const f=r(c);c[a]=f,c[l]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=QZ(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let c=wr(t(u));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(q4e+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=Ei(l,kr(t),e.name||"bin_"+nn(t))}});function hJ(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?OQ(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function qR(e){V.call(this,[],e)}qR.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ne(qR,V,{transform(e,t){const n=t.fork(t.ALL),r=hJ(ve,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Ud(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function pJ(e){St.call(this,null,G4e,e)}ne(pJ,St);function G4e(e){return this.value&&!e.modified()?this.value:sR(e.fields,e.orders)}function GR(e){V.call(this,null,e)}GR.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Y4e(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ne(GR,V,{transform(e,t){const n=f=>d=>{for(var h=Y4e(a(d),e.case,o)||[],p,g=0,y=h.length;g<y;++g)s.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=at({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function YR(e){V.call(this,null,e)}YR.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ne(YR,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=X4e(a,i,o,e.filter||Do)):n.mod=a,n.source=this.value,n.modifies(r)}});function X4e(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(at(o)),o={},o[t]=u);return i}const _z={kde:PR,mixture:nJ,normal:FR,lognormal:tJ,uniform:rJ},K4e="distributions",Ez="function",Q4e="field";function gJ(e,t){const n=e[Ez];ce(_z,n)||q("Unknown distribution function: "+n);const r=_z[n]();for(const i in e)i===Q4e?r.data((e.from||t()).map(e[i])):i===K4e?r[i](e[i].map(o=>gJ(o,t))):typeof r[i]===Ez&&r[i](e[i]);return r}function XR(e){V.call(this,null,e)}const mJ=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Z4e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:mJ},{name:"weights",type:"number",array:!0}]};XR.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:mJ.concat(Z4e)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ne(XR,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=gJ(e.distribution,J4e(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&q("Invalid density method: "+s),!e.extent&&!r.data&&q("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||Sa(r.data()),u=OC(s,l,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],at(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function J4e(e){return()=>e.materialize(e.SOURCE).source}function yJ(e,t){return e?e.map((n,r)=>t[r]||nn(n)):null}function KR(e,t,n){const r=[],i=f=>f(l);let o,s,a,l,u,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),c=o[u],c||(o[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const vJ="bin";function QR(e){V.call(this,null,e)}QR.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:vJ}]};const eMe=(e,t)=>cv(Sa(e,t))/30;ne(QR,V,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=KR(t.source,e.groupby,Ar),i=e.smooth||!1,o=e.field,s=e.step||eMe(n,o),a=Ud((p,g)=>o(p)-o(g)),l=e.as||vJ,u=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<u;++d){const p=r[d].sort(a);h=-1;for(const g of JZ(p,s,i,o))g<c&&(c=g),g>f&&(f=g),p[++h][l]=g}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(l)}});function bJ(e){St.call(this,null,tMe,e),this.modified(!0)}ne(bJ,St);function tMe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ei(n=>t(n,e),kr(t),nn(t))}function ZR(e){V.call(this,[void 0,void 0],e)}ZR.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ne(ZR,V,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=wr(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=nn(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function JR(e,t){St.call(this,e),this.parent=t,this.count=0}ne(JR,St,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function NC(e){V.call(this,{},e),this._keys=Zg();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ne(NC,V,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=ce(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new JR(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=ve(l),c=o.get(u);c!==void 0&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(ve(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=ve(l),c=o.get(u),f=r(l);c===f?a(f).mod(l):(o.set(u,f),a(c).rem(l),a(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(ve(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=ve(l),c=o.get(u),f=r(l);c!==f&&(o.set(u,f),a(c).rem(l),a(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function xJ(e){St.call(this,null,nMe,e)}ne(xJ,St);function nMe(e){return this.value&&!e.modified()?this.value:G(e.name)?ae(e.name).map(t=>Ro(t)):Ro(e.name,e.as)}function e6(e){V.call(this,Zg(),e)}e6.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ne(e6,V,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,f=>{const d=ve(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{l(f,e)?o.push(f):r.set(ve(f),1)});function c(f){const d=ve(f),h=l(f,e),p=r.get(d);h&&p?(r.delete(d),o.push(f)):!h&&!p?(r.set(d,1),s.push(f)):u&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function t6(e){V.call(this,[],e)}t6.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ne(t6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=yJ(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<u;++c){for(d=CR(a),f=0;f<s;++f)d[i[f]]=(h=l[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function n6(e){V.call(this,[],e)}n6.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ne(n6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(nn),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=CR(u),f[s]=i[c],f[a]=r[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function r6(e){V.call(this,null,e)}r6.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ne(r6,V,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function wJ(e){V.call(this,[],e)}ne(wJ,V,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=at(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const Zb={value:"value",median:GQ,mean:L5e,min:p3,max:Gf},rMe=[];function i6(e){V.call(this,[],e)}i6.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function iMe(e){var t=e.method||Zb.value,n;if(Zb[t]==null)q("Unrecognized imputation method: "+t);else return t===Zb.value?(n=e.value!==void 0?e.value:0,()=>n):Zb[t]}function oMe(e){const t=e.field;return n=>n?t(n):NaN}ne(i6,V,{transform(e,t){var n=t.fork(t.ALL),r=iMe(e),i=oMe(e),o=nn(e.field),s=nn(e.key),a=(e.groupby||[]).map(nn),l=sMe(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,d,h,p,g,y,m,v,b,x,w;for(y=0,b=l.length;y<b;++y)for(d=l[y],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(g=l.domain[v],w={_impute:!0},m=0,x=p.length;m<x;++m)w[a[m]]=p[m];w[s]=g,w[o]=Number.isNaN(h)?h=r(d,i):h,u.push(at(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function sMe(e,t,n,r){var i=m=>m(y),o=[],s=r?r.slice():[],a={},l={},u,c,f,d,h,p,g,y;for(s.forEach((m,v)=>a[m]=v+1),d=0,g=e.length;d<g;++d)y=e[d],p=n(y),h=a[p]||(a[p]=s.push(p)),c=(u=t?t.map(i):rMe)+"",(f=l[c])||(f=l[c]=[],o.push(f),f.values=u),f[h-1]=y;return o.domain=s,o}function o6(e){uc.call(this,e)}o6.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:vv},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ne(o6,uc,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Oe(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function s6(e){V.call(this,null,e)}s6.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ne(s6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=KR(r,e.groupby,e.field),o=(e.groupby||[]).map(nn),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&q("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Sa(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=PR(h,s)[a],g=e.counts?h.length:1,y=c||Sa(h);OC(p,y,f,d).forEach(m=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[l[0]]=m[0],v[l[1]]=m[1]*g,u.push(at(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function SJ(e){St.call(this,null,aMe,e)}ne(SJ,St);function aMe(e){return this.value&&!e.modified()?this.value:lR(e.fields,e.flat)}function kJ(e){V.call(this,[],e),this._pending=null}ne(kJ,V,{transform(e,t){const n=t.dataflow;return this._pending?aA(this,t,this._pending):lMe(e)?t.StopPropagation:e.values?aA(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ae(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>aA(this,t,ae(r.data)))}});function lMe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function aA(e,t,n){n.forEach(at);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function a6(e){V.call(this,{},e)}a6.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ne(a6,V,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&q('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&q('The "as" parameter has too few output field names.'),c=c||i.map(nn),f=function(p){for(var g=0,y=0,m,v;g<a;++g)if(v=r.get(n[g](p)),v==null)for(m=0;m<d;++m,++y)p[c[y]]=o;else for(m=0;m<d;++m,++y)p[c[y]]=i[m](v)}):(c||q("Missing output field names."),f=function(p){for(var g=0,y;g<a;++g)y=r.get(n[g](p)),p[c[g]]=y??o}),s?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,f),u.modifies(c)}});function CJ(e){St.call(this,null,uMe,e)}ne(CJ,St);function uMe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function _J(e){St.call(this,null,cMe,e)}ne(_J,St);function cMe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function EJ(e){V.call(this,null,e)}ne(EJ,V,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function l6(e){uc.call(this,e)}l6.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:vv,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ne(l6,uc,{_transform:uc.prototype.transform,transform(e,t){return this._transform(fMe(e,t),t)}});function fMe(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=kr(n).concat(kr(r)),s=hMe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>dMe(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function dMe(e,t,n,r){return Ei(i=>t(i)===e?n(i):NaN,r,e+"")}function hMe(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(kC),t?i.slice(0,t):i}function $J(e){NC.call(this,e)}ne($J,NC,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(ve(o),n,t,o);return(e.modified("field")||r&&t.modified(kr(r)))&&q("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(at(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function u6(e){V.call(this,null,e)}u6.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ne(u6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=yJ(e.fields,e.as||[]),o=r?(a,l)=>pMe(a,l,r,i):AC;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=ve(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,at({}));s[ve(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[ve(a)]))}),n}});function pMe(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function AJ(e){V.call(this,null,e)}ne(AJ,V,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function c6(e){V.call(this,null,e)}c6.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const gMe=1e-14;ne(c6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=KR(i,e.groupby,e.field),s=(e.groupby||[]).map(nn),a=[],l=e.step||.01,u=e.probs||zi(l/2,1-gMe,l),c=u.length;return o.forEach(f=>{const d=$R(f,u);for(let h=0;h<c;++h){const p={};for(let g=0;g<s.length;++g)p[s[g]]=f.dims[g];p[r[0]]=u[h],p[r[1]]=d[h],a.push(at(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function TJ(e){V.call(this,null,e)}ne(TJ,V,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=ve(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=CR(i);r[ve(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[ve(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function f6(e){V.call(this,[],e),this.count=0}f6.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ne(f6,V,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[ve(f)]=1,c),{});let s=this.value,a=this.count,l=0;function u(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*No()),d<s.length&&d>=l&&(f=s[d],o[ve(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=ve(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[ve(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[ve(c)]||u(c)}),l=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[ve(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[ve(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(c=>!o[ve(c)])),this.count=a,this.value=n.source=s,n}});function d6(e){V.call(this,null,e)}d6.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ne(d6,V,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=zi(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,at(o)}),n.add=t.add.concat(this.value),n}});function MJ(e){V.call(this,null,e),this.modified(!0)}ne(MJ,V,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function h6(e){V.call(this,null,e)}const FJ=["unit0","unit1"];h6.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:gR,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:FJ}]};ne(h6,V,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?tm:em)(o.unit).offset,a=e.as||FJ,l=a[0],u=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(kr(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let y,m;g==null?(p[l]=null,r&&(p[u]=null)):(p[l]=y=m=o(g),r&&(p[u]=m=s(y,c)),y<f&&(f=y),m>d&&(d=m))}),o.start=f,o.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:wZ({extent:e.extent||Sa(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=mR(r),s=this.value||{},a=(n?dZ:fZ)(o,i);return a.unit=qe(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function PJ(e){V.call(this,Zg(),e)}ne(PJ,V,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function RJ(e){V.call(this,null,e)}ne(RJ,V,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ud(e.sort)):t.source).map(e.field))}});function mMe(e,t,n,r){const i=d1[e](t,n);return{init:i.init||wu,update:function(o,s){s[r]=i.next(o)}}}const d1={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=d1.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||q("ntile num must be greater than zero.");const n=d1.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||q("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=yMe(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function yMe(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const vMe=Object.keys(d1);function DJ(e){const t=ae(e.ops),n=ae(e.fields),r=ae(e.params),i=ae(e.aggregate_params),o=ae(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[];let d=!0;function h(p){ae(kr(p)).forEach(g=>l[g]=1)}h(e.sort),t.forEach((p,g)=>{const y=n[g],m=r[g],v=i[g]||null,b=nn(y),x=uJ(p,b,o[g]);if(h(y),s.push(x),ce(d1,p))a.push(mMe(p,y,m,x));else{if(y==null&&p!=="count"&&q("Null aggregate field specified."),p==="count"){c.push(x);return}d=!1;let w=u[b];w||(w=u[b]=[],w.field=y,f.push(w)),w.push(cJ(p,v,x))}}),(c.length||f.length)&&(this.cell=bMe(f,c,d)),this.inputs=Object.keys(l)}const OJ=DJ.prototype;OJ.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};OJ.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function bMe(e,t,n){e=e.map(l=>dJ(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new WR;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function p6(e){V.call(this,{},e),this._mlen=0,this._mods=[]}p6.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:vMe.concat(vv)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ne(p6,V,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Ud(e.sort),i=_3(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new DJ(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)xMe(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=hJ(ve),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function xMe(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?Jg(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Tr(-1)};t.init();for(let f=0;f<l;++f)wMe(c,s,f,l),o&&SMe(c,u),t.update(c,a[f])}function wMe(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function SMe(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const kMe=Object.freeze(Object.defineProperty({__proto__:null,aggregate:uc,bin:HR,collect:qR,compare:pJ,countpattern:GR,cross:YR,density:XR,dotbin:QR,expression:bJ,extent:ZR,facet:NC,field:xJ,filter:e6,flatten:t6,fold:n6,formula:r6,generate:wJ,impute:i6,joinaggregate:o6,kde:s6,key:SJ,load:kJ,lookup:a6,multiextent:CJ,multivalues:_J,params:EJ,pivot:l6,prefacet:$J,project:u6,proxy:AJ,quantile:c6,relay:TJ,sample:f6,sequence:d6,sieve:MJ,subflow:JR,timeunit:h6,tupleindex:PJ,values:RJ,window:p6},Symbol.toStringTag,{value:"Module"}));function ct(e){return function(){return e}}const $z=Math.abs,ur=Math.atan2,qc=Math.cos,CMe=Math.max,lA=Math.min,js=Math.sin,Af=Math.sqrt,dr=1e-12,ug=Math.PI,qw=ug/2,NJ=2*ug;function _Me(e){return e>1?0:e<-1?ug:Math.acos(e)}function Az(e){return e>=1?qw:e<=-1?-qw:Math.asin(e)}const E3=Math.PI,$3=2*E3,ff=1e-6,EMe=$3-ff;function IJ(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function $Me(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return IJ;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let g6=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?IJ:$Me(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,u=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>ff)if(!(Math.abs(f*l-u*c)>ff)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,p=i-a,g=l*l+u*u,y=h*h+p*p,m=Math.sqrt(g),v=Math.sqrt(d),b=o*Math.tan((E3-Math.acos((g+d-y)/(2*m*v)))/2),x=b/v,w=b/m;Math.abs(x-1)>ff&&this._append`L${t+x*c},${n+x*f}`,this._append`A${o},${o},0,0,${+(f*h>c*p)},${this._x1=t+w*l},${this._y1=n+w*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>ff||Math.abs(this._y1-c)>ff)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%$3+$3),d>EMe?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>ff&&this._append`A${r},${r},0,${+(d>=E3)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function IC(){return new g6}IC.prototype=g6.prototype;function LC(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new g6(t)}function AMe(e){return e.innerRadius}function TMe(e){return e.outerRadius}function MMe(e){return e.startAngle}function FMe(e){return e.endAngle}function PMe(e){return e&&e.padAngle}function RMe(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,c=s-i,f=a-o,d=f*l-c*u;if(!(d*d<dr))return d=(c*(t-o)-f*(e-i))/d,[e+d*l,t+d*u]}function Jb(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/Af(a*a+l*l),c=u*l,f=-u*a,d=e+c,h=t+f,p=n+c,g=r+f,y=(d+p)/2,m=(h+g)/2,v=p-d,b=g-h,x=v*v+b*b,w=i-o,k=d*g-p*h,S=(b<0?-1:1)*Af(CMe(0,w*w*x-k*k)),C=(k*b-v*S)/x,_=(-k*v-b*S)/x,$=(k*b+v*S)/x,A=(-k*v+b*S)/x,O=C-y,M=_-m,P=$-y,R=A-m;return O*O+M*M>P*P+R*R&&(C=$,_=A),{cx:C,cy:_,x01:-c,y01:-f,x11:C*(i/w-1),y11:_*(i/w-1)}}function DMe(){var e=AMe,t=TMe,n=ct(0),r=null,i=MMe,o=FMe,s=PMe,a=null,l=LC(u);function u(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-qw,g=o.apply(this,arguments)-qw,y=$z(g-p),m=g>p;if(a||(a=c=l()),h<d&&(f=h,h=d,d=f),!(h>dr))a.moveTo(0,0);else if(y>NJ-dr)a.moveTo(h*qc(p),h*js(p)),a.arc(0,0,h,p,g,!m),d>dr&&(a.moveTo(d*qc(g),d*js(g)),a.arc(0,0,d,g,p,m));else{var v=p,b=g,x=p,w=g,k=y,S=y,C=s.apply(this,arguments)/2,_=C>dr&&(r?+r.apply(this,arguments):Af(d*d+h*h)),$=lA($z(h-d)/2,+n.apply(this,arguments)),A=$,O=$,M,P;if(_>dr){var R=Az(_/d*js(C)),D=Az(_/h*js(C));(k-=R*2)>dr?(R*=m?1:-1,x+=R,w-=R):(k=0,x=w=(p+g)/2),(S-=D*2)>dr?(D*=m?1:-1,v+=D,b-=D):(S=0,v=b=(p+g)/2)}var I=h*qc(v),N=h*js(v),B=d*qc(w),Y=d*js(w);if($>dr){var W=h*qc(b),oe=h*js(b),re=d*qc(x),we=d*js(x),De;if(y<ug)if(De=RMe(I,N,re,we,W,oe,B,Y)){var ut=I-De[0],$n=N-De[1],sr=W-De[0],ue=oe-De[1],$e=1/js(_Me((ut*sr+$n*ue)/(Af(ut*ut+$n*$n)*Af(sr*sr+ue*ue)))/2),Ae=Af(De[0]*De[0]+De[1]*De[1]);A=lA($,(d-Ae)/($e-1)),O=lA($,(h-Ae)/($e+1))}else A=O=0}S>dr?O>dr?(M=Jb(re,we,I,N,h,O,m),P=Jb(W,oe,B,Y,h,O,m),a.moveTo(M.cx+M.x01,M.cy+M.y01),O<$?a.arc(M.cx,M.cy,O,ur(M.y01,M.x01),ur(P.y01,P.x01),!m):(a.arc(M.cx,M.cy,O,ur(M.y01,M.x01),ur(M.y11,M.x11),!m),a.arc(0,0,h,ur(M.cy+M.y11,M.cx+M.x11),ur(P.cy+P.y11,P.cx+P.x11),!m),a.arc(P.cx,P.cy,O,ur(P.y11,P.x11),ur(P.y01,P.x01),!m))):(a.moveTo(I,N),a.arc(0,0,h,v,b,!m)):a.moveTo(I,N),!(d>dr)||!(k>dr)?a.lineTo(B,Y):A>dr?(M=Jb(B,Y,W,oe,d,-A,m),P=Jb(I,N,re,we,d,-A,m),a.lineTo(M.cx+M.x01,M.cy+M.y01),A<$?a.arc(M.cx,M.cy,A,ur(M.y01,M.x01),ur(P.y01,P.x01),!m):(a.arc(M.cx,M.cy,A,ur(M.y01,M.x01),ur(M.y11,M.x11),!m),a.arc(0,0,d,ur(M.cy+M.y11,M.cx+M.x11),ur(P.cy+P.y11,P.cx+P.x11),m),a.arc(P.cx,P.cy,A,ur(P.y11,P.x11),ur(P.y01,P.x01),!m))):a.arc(0,0,d,w,x,m)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-ug/2;return[qc(f)*c,js(f)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:ct(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:ct(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:ct(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:ct(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:ct(+c),u):i},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:ct(+c),u):o},u.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:ct(+c),u):s},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function LJ(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zJ(e){this._context=e}zJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function m6(e){return new zJ(e)}function jJ(e){return e[0]}function BJ(e){return e[1]}function UJ(e,t){var n=ct(!0),r=null,i=m6,o=null,s=LC(a);e=typeof e=="function"?e:e===void 0?jJ:ct(e),t=typeof t=="function"?t:t===void 0?BJ:ct(t);function a(l){var u,c=(l=LJ(l)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,u,l),+t(f,u,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ct(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ct(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ct(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function VJ(e,t,n){var r=null,i=ct(!0),o=null,s=m6,a=null,l=LC(u);e=typeof e=="function"?e:e===void 0?jJ:ct(+e),t=typeof t=="function"?t:ct(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?BJ:ct(+n);function u(f){var d,h,p,g=(f=LJ(f)).length,y,m=!1,v,b=new Array(g),x=new Array(g);for(o==null&&(a=s(v=l())),d=0;d<=g;++d){if(!(d<g&&i(y=f[d],d,f))===m)if(m=!m)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],x[p]);a.lineEnd(),a.areaEnd()}m&&(b[d]=+e(y,d,f),x[d]=+t(y,d,f),a.point(r?+r(y,d,f):b[d],n?+n(y,d,f):x[d]))}if(v)return a=null,v+""||null}function c(){return UJ().defined(i).curve(s).context(o)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ct(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ct(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ct(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:ct(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ct(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ct(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ct(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),u):s},u.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),u):o},u}const OMe={draw(e,t){const n=Af(t/ug);e.moveTo(n,0),e.arc(0,0,n,0,NJ)}};function NMe(e,t){let n=null,r=LC(i);e=typeof e=="function"?e:ct(e||OMe),t=typeof t=="function"?t:ct(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:ct(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:ct(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function cc(){}function Gw(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function zC(e){this._context=e}zC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Gw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Gw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function IMe(e){return new zC(e)}function WJ(e){this._context=e}WJ.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Gw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LMe(e){return new WJ(e)}function HJ(e){this._context=e}HJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Gw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zMe(e){return new HJ(e)}function qJ(e,t){this._basis=new zC(e),this._beta=t}qJ.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const jMe=function e(t){function n(r){return t===1?new zC(r):new qJ(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Yw(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function y6(e,t){this._context=e,this._k=(1-t)/6}y6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Yw(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Yw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const BMe=function e(t){function n(r){return new y6(r,t)}return n.tension=function(r){return e(+r)},n}(0);function v6(e,t){this._context=e,this._k=(1-t)/6}v6.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Yw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const UMe=function e(t){function n(r){return new v6(r,t)}return n.tension=function(r){return e(+r)},n}(0);function b6(e,t){this._context=e,this._k=(1-t)/6}b6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Yw(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const VMe=function e(t){function n(r){return new b6(r,t)}return n.tension=function(r){return e(+r)},n}(0);function x6(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>dr){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>dr){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function GJ(e,t){this._context=e,this._alpha=t}GJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:x6(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const WMe=function e(t){function n(r){return t?new GJ(r,t):new y6(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function YJ(e,t){this._context=e,this._alpha=t}YJ.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:x6(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const HMe=function e(t){function n(r){return t?new YJ(r,t):new v6(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function XJ(e,t){this._context=e,this._alpha=t}XJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:x6(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qMe=function e(t){function n(r){return t?new XJ(r,t):new b6(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function KJ(e){this._context=e}KJ.prototype={areaStart:cc,areaEnd:cc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function GMe(e){return new KJ(e)}function Tz(e){return e<0?-1:1}function Mz(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(Tz(o)+Tz(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function Fz(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function uA(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function Xw(e){this._context=e}Xw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uA(this,this._t0,Fz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,uA(this,Fz(this,n=Mz(this,e,t)),n);break;default:uA(this,this._t0,n=Mz(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function QJ(e){this._context=new ZJ(e)}(QJ.prototype=Object.create(Xw.prototype)).point=function(e,t){Xw.prototype.point.call(this,t,e)};function ZJ(e){this._context=e}ZJ.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function YMe(e){return new Xw(e)}function XMe(e){return new QJ(e)}function JJ(e){this._context=e}JJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Pz(e),i=Pz(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Pz(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function KMe(e){return new JJ(e)}function jC(e,t){this._context=e,this._t=t}jC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function QMe(e){return new jC(e,.5)}function ZMe(e){return new jC(e,0)}function JMe(e){return new jC(e,1)}function Ju(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const eFe=()=>typeof Image<"u"?Image:null;function Ma(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ac(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const A3=Symbol("implicit");function w6(){var e=new X7,t=[],n=[],r=A3;function i(o){let s=e.get(o);if(s===void 0){if(r!==A3)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new X7;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return w6(t,n).unknown(r)},Ma.apply(i,arguments),i}function rm(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bv(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Tc(){}var cd=.7,cg=1/cd,yp="\\s*([+-]?\\d+)\\s*",h1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ya="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tFe=/^#([0-9a-f]{3,8})$/,nFe=new RegExp(`^rgb\\(${yp},${yp},${yp}\\)$`),rFe=new RegExp(`^rgb\\(${ya},${ya},${ya}\\)$`),iFe=new RegExp(`^rgba\\(${yp},${yp},${yp},${h1}\\)$`),oFe=new RegExp(`^rgba\\(${ya},${ya},${ya},${h1}\\)$`),sFe=new RegExp(`^hsl\\(${h1},${ya},${ya}\\)$`),aFe=new RegExp(`^hsla\\(${h1},${ya},${ya},${h1}\\)$`),Rz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rm(Tc,p1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Dz,formatHex:Dz,formatHex8:lFe,formatHsl:uFe,formatRgb:Oz,toString:Oz});function Dz(){return this.rgb().formatHex()}function lFe(){return this.rgb().formatHex8()}function uFe(){return eee(this).formatHsl()}function Oz(){return this.rgb().formatRgb()}function p1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tFe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Nz(t):n===3?new Fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ex(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ex(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nFe.exec(e))?new Fn(t[1],t[2],t[3],1):(t=rFe.exec(e))?new Fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=iFe.exec(e))?ex(t[1],t[2],t[3],t[4]):(t=oFe.exec(e))?ex(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sFe.exec(e))?zz(t[1],t[2]/100,t[3]/100,1):(t=aFe.exec(e))?zz(t[1],t[2]/100,t[3]/100,t[4]):Rz.hasOwnProperty(e)?Nz(Rz[e]):e==="transparent"?new Fn(NaN,NaN,NaN,0):null}function Nz(e){return new Fn(e>>16&255,e>>8&255,e&255,1)}function ex(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fn(e,t,n,r)}function S6(e){return e instanceof Tc||(e=p1(e)),e?(e=e.rgb(),new Fn(e.r,e.g,e.b,e.opacity)):new Fn}function fc(e,t,n,r){return arguments.length===1?S6(e):new Fn(e,t,n,r??1)}function Fn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}rm(Fn,fc,bv(Tc,{brighter(e){return e=e==null?cg:Math.pow(cg,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cd:Math.pow(cd,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fn(Yf(this.r),Yf(this.g),Yf(this.b),Kw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Iz,formatHex:Iz,formatHex8:cFe,formatRgb:Lz,toString:Lz}));function Iz(){return`#${Tf(this.r)}${Tf(this.g)}${Tf(this.b)}`}function cFe(){return`#${Tf(this.r)}${Tf(this.g)}${Tf(this.b)}${Tf((isNaN(this.opacity)?1:this.opacity)*255)}`}function Lz(){const e=Kw(this.opacity);return`${e===1?"rgb(":"rgba("}${Yf(this.r)}, ${Yf(this.g)}, ${Yf(this.b)}${e===1?")":`, ${e})`}`}function Kw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Yf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tf(e){return e=Yf(e),(e<16?"0":"")+e.toString(16)}function zz(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new as(e,t,n,r)}function eee(e){if(e instanceof as)return new as(e.h,e.s,e.l,e.opacity);if(e instanceof Tc||(e=p1(e)),!e)return new as;if(e instanceof as)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new as(s,a,l,e.opacity)}function Qw(e,t,n,r){return arguments.length===1?eee(e):new as(e,t,n,r??1)}function as(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}rm(as,Qw,bv(Tc,{brighter(e){return e=e==null?cg:Math.pow(cg,e),new as(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cd:Math.pow(cd,e),new as(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fn(cA(e>=240?e-240:e+120,i,r),cA(e,i,r),cA(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new as(jz(this.h),tx(this.s),tx(this.l),Kw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kw(this.opacity);return`${e===1?"hsl(":"hsla("}${jz(this.h)}, ${tx(this.s)*100}%, ${tx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jz(e){return e=(e||0)%360,e<0?e+360:e}function tx(e){return Math.max(0,Math.min(1,e||0))}function cA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tee=Math.PI/180,nee=180/Math.PI,Zw=18,ree=.96422,iee=1,oee=.82521,see=4/29,vp=6/29,aee=3*vp*vp,fFe=vp*vp*vp;function lee(e){if(e instanceof va)return new va(e.l,e.a,e.b,e.opacity);if(e instanceof fl)return uee(e);e instanceof Fn||(e=S6(e));var t=pA(e.r),n=pA(e.g),r=pA(e.b),i=fA((.2225045*t+.7168786*n+.0606169*r)/iee),o,s;return t===n&&n===r?o=s=i:(o=fA((.4360747*t+.3850649*n+.1430804*r)/ree),s=fA((.0139322*t+.0971045*n+.7141733*r)/oee)),new va(116*i-16,500*(o-i),200*(i-s),e.opacity)}function Jw(e,t,n,r){return arguments.length===1?lee(e):new va(e,t,n,r??1)}function va(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}rm(va,Jw,bv(Tc,{brighter(e){return new va(this.l+Zw*(e??1),this.a,this.b,this.opacity)},darker(e){return new va(this.l-Zw*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=ree*dA(t),e=iee*dA(e),n=oee*dA(n),new Fn(hA(3.1338561*t-1.6168667*e-.4906146*n),hA(-.9787684*t+1.9161415*e+.033454*n),hA(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function fA(e){return e>fFe?Math.pow(e,1/3):e/aee+see}function dA(e){return e>vp?e*e*e:aee*(e-see)}function hA(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function pA(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function dFe(e){if(e instanceof fl)return new fl(e.h,e.c,e.l,e.opacity);if(e instanceof va||(e=lee(e)),e.a===0&&e.b===0)return new fl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*nee;return new fl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function eS(e,t,n,r){return arguments.length===1?dFe(e):new fl(e,t,n,r??1)}function fl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function uee(e){if(isNaN(e.h))return new va(e.l,0,0,e.opacity);var t=e.h*tee;return new va(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}rm(fl,eS,bv(Tc,{brighter(e){return new fl(this.h,this.c,this.l+Zw*(e??1),this.opacity)},darker(e){return new fl(this.h,this.c,this.l-Zw*(e??1),this.opacity)},rgb(){return uee(this).rgb()}}));var cee=-.14861,k6=1.78277,C6=-.29227,BC=-.90649,g1=1.97294,Bz=g1*BC,Uz=g1*k6,Vz=k6*C6-BC*cee;function hFe(e){if(e instanceof Xf)return new Xf(e.h,e.s,e.l,e.opacity);e instanceof Fn||(e=S6(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Vz*r+Bz*t-Uz*n)/(Vz+Bz-Uz),o=r-i,s=(g1*(n-i)-C6*o)/BC,a=Math.sqrt(s*s+o*o)/(g1*i*(1-i)),l=a?Math.atan2(s,o)*nee-120:NaN;return new Xf(l<0?l+360:l,a,i,e.opacity)}function T3(e,t,n,r){return arguments.length===1?hFe(e):new Xf(e,t,n,r??1)}function Xf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}rm(Xf,T3,bv(Tc,{brighter(e){return e=e==null?cg:Math.pow(cg,e),new Xf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cd:Math.pow(cd,e),new Xf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*tee,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Fn(255*(t+n*(cee*r+k6*i)),255*(t+n*(C6*r+BC*i)),255*(t+n*(g1*r)),this.opacity)}}));function fee(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function dee(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return fee((n-r/t)*t,s,i,o,a)}}function hee(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return fee((n-r/t)*t,i,o,s,a)}}const UC=e=>()=>e;function pee(e,t){return function(n){return e+n*t}}function pFe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function VC(e,t){var n=t-e;return n?pee(e,n>180||n<-180?n-360*Math.round(n/360):n):UC(isNaN(e)?t:e)}function gFe(e){return(e=+e)==1?Pn:function(t,n){return n-t?pFe(t,n,e):UC(isNaN(t)?n:t)}}function Pn(e,t){var n=t-e;return n?pee(e,n):UC(isNaN(e)?t:e)}const tS=function e(t){var n=gFe(t);function r(i,o){var s=n((i=fc(i)).r,(o=fc(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=Pn(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function gee(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=fc(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var mFe=gee(dee),yFe=gee(hee);function _6(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function mee(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vFe(e,t){return(mee(t)?_6:yee)(e,t)}function yee(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Mc(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function vee(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function rs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function bee(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Mc(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var M3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gA=new RegExp(M3.source,"g");function bFe(e){return function(){return e}}function xFe(e){return function(t){return e(t)+""}}function xee(e,t){var n=M3.lastIndex=gA.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=M3.exec(e))&&(i=gA.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:rs(r,i)})),n=gA.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?xFe(l[0].x):bFe(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function Mc(e,t){var n=typeof t,r;return t==null||n==="boolean"?UC(t):(n==="number"?rs:n==="string"?(r=p1(t))?(t=r,tS):xee:t instanceof p1?tS:t instanceof Date?vee:mee(t)?_6:Array.isArray(t)?yee:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bee:rs)(e,t)}function wFe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function SFe(e,t){var n=VC(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function im(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Wz=180/Math.PI,F3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wee(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Wz,skewX:Math.atan(l)*Wz,scaleX:s,scaleY:a}}var nx;function kFe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?F3:wee(t.a,t.b,t.c,t.d,t.e,t.f)}function CFe(e){return e==null||(nx||(nx=document.createElementNS("http://www.w3.org/2000/svg","g")),nx.setAttribute("transform",e),!(e=nx.transform.baseVal.consolidate()))?F3:(e=e.matrix,wee(e.a,e.b,e.c,e.d,e.e,e.f))}function See(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:rs(u,f)},{i:g-2,x:rs(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:rs(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:rs(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:rs(u,f)},{i:g-2,x:rs(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),s(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var p=-1,g=d.length,y;++p<g;)f[(y=d[p]).i]=y.x(h);return f.join("")}}}var _Fe=See(kFe,"px, ","px)","deg)"),EFe=See(CFe,", ",")",")"),$Fe=1e-12;function Hz(e){return((e=Math.exp(e))+1/e)/2}function AFe(e){return((e=Math.exp(e))-1/e)/2}function TFe(e){return((e=Math.exp(2*e))-1)/(e+1)}const MFe=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],d=s[2],h=c-a,p=f-l,g=h*h+p*p,y,m;if(g<$Fe)m=Math.log(d/u)/t,y=function(S){return[a+S*h,l+S*p,u*Math.exp(t*S*m)]};else{var v=Math.sqrt(g),b=(d*d-u*u+r*g)/(2*u*n*v),x=(d*d-u*u-r*g)/(2*d*n*v),w=Math.log(Math.sqrt(b*b+1)-b),k=Math.log(Math.sqrt(x*x+1)-x);m=(k-w)/t,y=function(S){var C=S*m,_=Hz(w),$=u/(n*v)*(_*TFe(t*C+w)-AFe(w));return[a+$*h,l+$*p,u*_/Hz(t*C+w)]}}return y.duration=m*1e3*t/Math.SQRT2,y}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function kee(e){return function(t,n){var r=e((t=Qw(t)).h,(n=Qw(n)).h),i=Pn(t.s,n.s),o=Pn(t.l,n.l),s=Pn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const Cee=kee(VC);var _ee=kee(Pn);function Eee(e,t){var n=Pn((e=Jw(e)).l,(t=Jw(t)).l),r=Pn(e.a,t.a),i=Pn(e.b,t.b),o=Pn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function $ee(e){return function(t,n){var r=e((t=eS(t)).h,(n=eS(n)).h),i=Pn(t.c,n.c),o=Pn(t.l,n.l),s=Pn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const Aee=$ee(VC);var Tee=$ee(Pn);function Mee(e){return function t(n){n=+n;function r(i,o){var s=e((i=T3(i)).h,(o=T3(o)).h),a=Pn(i.s,o.s),l=Pn(i.l,o.l),u=Pn(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const Fee=Mee(VC);var Pee=Mee(Pn);function E6(e,t){t===void 0&&(t=e,e=Mc);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function FFe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const PFe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Mc,interpolateArray:vFe,interpolateBasis:dee,interpolateBasisClosed:hee,interpolateCubehelix:Fee,interpolateCubehelixLong:Pee,interpolateDate:vee,interpolateDiscrete:wFe,interpolateHcl:Aee,interpolateHclLong:Tee,interpolateHsl:Cee,interpolateHslLong:_ee,interpolateHue:SFe,interpolateLab:Eee,interpolateNumber:rs,interpolateNumberArray:_6,interpolateObject:bee,interpolateRgb:tS,interpolateRgbBasis:mFe,interpolateRgbBasisClosed:yFe,interpolateRound:im,interpolateString:xee,interpolateTransformCss:_Fe,interpolateTransformSvg:EFe,interpolateZoom:MFe,piecewise:E6,quantize:FFe},Symbol.toStringTag,{value:"Module"}));function RFe(e){return function(){return e}}function P3(e){return+e}var qz=[0,1];function fi(e){return e}function R3(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:RFe(isNaN(t)?NaN:.5)}function DFe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function OFe(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=R3(i,r),o=n(s,o)):(r=R3(r,i),o=n(o,s)),function(a){return o(r(a))}}function NFe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=R3(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=ac(e,a,1,r)-1;return o[l](i[l](a))}}function xv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function WC(){var e=qz,t=qz,n=Mc,r,i,o,s=fi,a,l,u;function c(){var d=Math.min(e.length,t.length);return s!==fi&&(s=DFe(e[0],e[d-1])),a=d>2?NFe:OFe,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((u||(u=a(t,e.map(r),rs)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,P3),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=im,c()},f.clamp=function(d){return arguments.length?(s=d?!0:fi,c()):s!==fi},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function Ree(){return WC()(fi,fi)}function Dee(e,t,n,r){var i=lc(e,t,n),o;switch(r=ud(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=JQ(i,s))&&(r.precision=o),hR(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=eZ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=ZQ(i))&&(r.precision=o-(r.type==="%")*2);break}}return fv(r)}function Wd(e){var t=e.domain;return e.ticks=function(n){var r=t();return d3(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Dee(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,c=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);c-- >0;){if(u=h3(s,a,n),u===l)return r[i]=s,r[o]=a,t(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function $6(){var e=Ree();return e.copy=function(){return xv(e,$6())},Ma.apply(e,arguments),Wd(e)}function Oee(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,P3),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Oee(e).unknown(t)},e=arguments.length?Array.from(e,P3):[0,1],Wd(n)}function Nee(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Gz(e){return Math.log(e)}function Yz(e){return Math.exp(e)}function IFe(e){return-Math.log(-e)}function LFe(e){return-Math.exp(-e)}function zFe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function jFe(e){return e===10?zFe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function BFe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Xz(e){return(t,n)=>-e(-t,n)}function A6(e){const t=e(Gz,Yz),n=t.domain;let r=10,i,o;function s(){return i=BFe(r),o=jFe(r),n()[0]<0?(i=Xz(i),o=Xz(o),e(IFe,LFe)):e(Gz,Yz),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=i(u),h=i(c),p,g;const y=a==null?10:+a;let m=[];if(!(r%1)&&h-d<y){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/o(-d):p*o(d),!(g<u)){if(g>c)break;m.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/o(-d):p*o(d),!(g<u)){if(g>c)break;m.push(g)}m.length*2<y&&(m=d3(u,c,y))}else m=d3(d,h,Math.min(h-d,y)).map(o);return f?m.reverse():m},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ud(l)).precision==null&&(l.trim=!0),l=fv(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=()=>n(Nee(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function Iee(){const e=A6(WC()).domain([1,10]);return e.copy=()=>xv(e,Iee()).base(e.base()),Ma.apply(e,arguments),e}function Kz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Qz(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function T6(e){var t=1,n=e(Kz(t),Qz(t));return n.constant=function(r){return arguments.length?e(Kz(t=+r),Qz(t)):t},Wd(n)}function Lee(){var e=T6(WC());return e.copy=function(){return xv(e,Lee()).constant(e.constant())},Ma.apply(e,arguments)}function Zz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function UFe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function VFe(e){return e<0?-e*e:e*e}function M6(e){var t=e(fi,fi),n=1;function r(){return n===1?e(fi,fi):n===.5?e(UFe,VFe):e(Zz(n),Zz(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Wd(t)}function F6(){var e=M6(WC());return e.copy=function(){return xv(e,F6()).exponent(e.exponent())},Ma.apply(e,arguments),e}function WFe(){return F6.apply(null,arguments).exponent(.5)}function zee(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=qQ(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[ac(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(vl),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return zee().domain(e).range(t).unknown(r)},Ma.apply(o,arguments)}function jee(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[ac(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return jee().domain([e,t]).range(i).unknown(o)},Ma.apply(Wd(s),arguments)}function Bee(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[ac(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Bee().domain(e).range(t).unknown(n)},Ma.apply(i,arguments)}function HFe(e){return new Date(e)}function qFe(e){return e instanceof Date?+e:+new Date(+e)}function P6(e,t,n,r,i,o,s,a,l,u){var c=Ree(),f=c.invert,d=c.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),y=u("%I %p"),m=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(k){return(l(k)<k?h:a(k)<k?p:s(k)<k?g:o(k)<k?y:r(k)<k?i(k)<k?m:v:n(k)<k?b:x)(k)}return c.invert=function(k){return new Date(f(k))},c.domain=function(k){return arguments.length?d(Array.from(k,qFe)):d().map(HFe)},c.ticks=function(k){var S=d();return e(S[0],S[S.length-1],k??10)},c.tickFormat=function(k,S){return S==null?w:u(S)},c.nice=function(k){var S=d();return(!k||typeof k.range!="function")&&(k=t(S[0],S[S.length-1],k??10)),k?d(Nee(S,k)):c},c.copy=function(){return xv(c,P6(e,t,n,r,i,o,s,a,l,u))},c}function GFe(){return Ma.apply(P6(sTe,aTe,Ss,og,zd,ma,pv,dv,fs,vR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function YFe(){return Ma.apply(P6(iTe,oTe,ks,sg,Bd,bl,gv,hv,fs,bR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function HC(){var e=0,t=1,n,r,i,o,s=fi,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(s=f,u):s};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,s=f(h,p),u):[s(0),s(1)]}}return u.range=c(Mc),u.rangeRound=c(im),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function Fc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function R6(){var e=Wd(HC()(fi));return e.copy=function(){return Fc(e,R6())},Ac.apply(e,arguments)}function Uee(){var e=A6(HC()).domain([1,10]);return e.copy=function(){return Fc(e,Uee()).base(e.base())},Ac.apply(e,arguments)}function Vee(){var e=T6(HC());return e.copy=function(){return Fc(e,Vee()).constant(e.constant())},Ac.apply(e,arguments)}function D6(){var e=M6(HC());return e.copy=function(){return Fc(e,D6()).exponent(e.exponent())},Ac.apply(e,arguments)}function XFe(){return D6.apply(null,arguments).exponent(.5)}function qC(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=fi,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-o)*(r*g<r*o?a:l),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(y){var m,v,b;return arguments.length?([m,v,b]=y,u=E6(g,[m,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(Mc),h.rangeRound=p(im),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),o=g(t),s=g(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function Wee(){var e=Wd(qC()(fi));return e.copy=function(){return Fc(e,Wee())},Ac.apply(e,arguments)}function Hee(){var e=A6(qC()).domain([.1,1,10]);return e.copy=function(){return Fc(e,Hee()).base(e.base())},Ac.apply(e,arguments)}function qee(){var e=T6(qC());return e.copy=function(){return Fc(e,qee()).constant(e.constant())},Ac.apply(e,arguments)}function O6(){var e=M6(qC());return e.copy=function(){return Fc(e,O6()).exponent(e.exponent())},Ac.apply(e,arguments)}function KFe(){return O6.apply(null,arguments).exponent(.5)}function Fa(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const QFe=Fa("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ZFe=Fa("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),JFe=Fa("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ePe=Fa("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),tPe=Fa("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),nPe=Fa("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),rPe=Fa("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),iPe=Fa("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),oPe=Fa("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),sPe=Fa("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function N6(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const aPe="identity",fg="linear",Dl="log",wv="pow",Sv="sqrt",GC="symlog",fd="time",dd="utc",ba="sequential",om="diverging",dg="quantile",YC="quantize",XC="threshold",I6="ordinal",D3="point",Gee="band",L6="bin-ordinal",En="continuous",kv="discrete",Cv="discretizing",jo="interpolating",z6="temporal";function lPe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function uPe(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function j6(){const e=w6().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=N6(f,a,l);let g=r[d-0];i=(h-g)/(p||1),s&&(i=Math.floor(i)),g+=(h-g-i*(f-a))*u,o=i*(1-a),s&&(g=Math.round(g),o=Math.round(o));const y=zi(f).map(m=>g+i*m);return n(d?y.reverse():y)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],y=+f[1],m,v,b;if(!(g!==g||y!==y)&&(y<g&&(b=g,g=y,y=b),!(y<h[0]||g>r[1-d])))return m=Math.max(0,ac(h,g)-1),v=g===y?m:ac(h,y)-1,g-h[m]>o+1e-10&&++m,d&&(b=m,m=p-v,v=p-b),m>v?void 0:t().slice(m,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return j6().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function Yee(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Yee(t())},e}function cPe(){return Yee(j6().paddingInner(1))}var fPe=Array.prototype.map;function dPe(e){return fPe.call(e,wr)}const hPe=Array.prototype.slice;function Xee(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(ac(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=dPe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=hPe.call(r),n):t.slice()},n.tickFormat=function(r,i){return Dee(e[0],qe(e),r??10,i)},n.copy=function(){return Xee().domain(n.domain()).range(n.range())},n}const nS=new Map,Kee=Symbol("vega_scale");function Qee(e){return e[Kee]=!0,e}function pPe(e){return e&&e[Kee]===!0}function gPe(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?lPe(o):o.invertExtent?uPe(o):void 0),o.type=e,Qee(o)};return r.metadata=ws(ae(n)),r}function et(e,t,n){return arguments.length>1?(nS.set(e,gPe(e,t,n)),this):Zee(e)?nS.get(e):void 0}et(aPe,Oee);et(fg,$6,En);et(Dl,Iee,[En,Dl]);et(wv,F6,En);et(Sv,WFe,En);et(GC,Lee,En);et(fd,GFe,[En,z6]);et(dd,YFe,[En,z6]);et(ba,R6,[En,jo]);et(`${ba}-${fg}`,R6,[En,jo]);et(`${ba}-${Dl}`,Uee,[En,jo,Dl]);et(`${ba}-${wv}`,D6,[En,jo]);et(`${ba}-${Sv}`,XFe,[En,jo]);et(`${ba}-${GC}`,Vee,[En,jo]);et(`${om}-${fg}`,Wee,[En,jo]);et(`${om}-${Dl}`,Hee,[En,jo,Dl]);et(`${om}-${wv}`,O6,[En,jo]);et(`${om}-${Sv}`,KFe,[En,jo]);et(`${om}-${GC}`,qee,[En,jo]);et(dg,zee,[Cv,dg]);et(YC,jee,Cv);et(XC,Bee,Cv);et(L6,Xee,[kv,Cv]);et(I6,w6,kv);et(Gee,j6,kv);et(D3,cPe,kv);function Zee(e){return nS.has(e)}function Hd(e,t){const n=nS.get(e);return n&&n.metadata[t]}function B6(e){return Hd(e,En)}function hg(e){return Hd(e,kv)}function O3(e){return Hd(e,Cv)}function Jee(e){return Hd(e,Dl)}function mPe(e){return Hd(e,z6)}function ete(e){return Hd(e,jo)}function tte(e){return Hd(e,dg)}const yPe=["clamp","base","constant","exponent"];function nte(e,t){const n=t[0],r=qe(t)-n;return function(i){return e(n+i*r)}}function KC(e,t,n){return E6(U6(t||"rgb",n),e)}function rte(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function ite(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?Tr(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=et(o)().domain([t,n]).range([0,1]),yPe.forEach(a=>e[a]?s[a](e[a]()):0),s)}function U6(e,t){const n=PFe[vPe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function vPe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const bPe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},xPe={accent:ZFe,category10:QFe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:JFe,observable10:ePe,paired:tPe,pastel1:nPe,pastel2:rPe,set1:iPe,set2:oPe,set3:sPe,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function ote(e){if(G(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function ste(e,t){for(const n in e)V6(n,t(e[n]))}const Jz={};ste(xPe,ote);ste(bPe,e=>KC(ote(e)));function V6(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Jz[e]=t,this):Jz[e]}const v2="symbol",wPe="discrete",SPe="gradient",kPe=e=>G(e)?e.map(t=>String(t)):String(e),CPe=(e,t)=>e[1]-t[1],_Pe=(e,t)=>t[1]-e[1];function W6(e,t,n){let r;return Ze(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(cv(e.domain())/n||1)+1))),se(t)&&(r=t.step,t=t.interval),le(t)&&(t=e.type===fd?em(t):e.type==dd?tm(t):q("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function ate(e,t,n){let r=e.range(),i=r[0],o=qe(r),s=CPe;if(i>o&&(r=o,o=i,i=r,s=_Pe),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],qe(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function H6(e,t){return e.bins?ate(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function lte(e,t,n,r,i,o){const s=t.type;let a=kPe;if(s===fd||i===fd)a=e.timeFormat(r);else if(s===dd||i===dd)a=e.utcFormat(r);else if(Jee(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=ute(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function ute(e,t,n){const r=H6(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const N3={[dg]:"quantiles",[YC]:"thresholds",[XC]:"domain"},cte={[dg]:"quantiles",[YC]:"domain"};function fte(e,t){return e.bins?APe(e.bins):e.type===Dl?ute(e,t,!0):N3[e.type]?$Pe(e[N3[e.type]]()):H6(e,t)}function EPe(e,t,n){const r=t[cte[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function $Pe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function APe(e){const t=e.slice(0,-1);return t.max=qe(e),t}const TPe=e=>N3[e.type]||e.bins;function dte(e,t,n,r,i,o,s){const a=cte[t.type]&&o!==fd&&o!==dd?EPe(e,t,i):lte(e,t,n,i,o,s);return r===v2&&TPe(t)?MPe(a):r===wPe?FPe(a):PPe(a)}const MPe=e=>(t,n,r)=>{const i=ej(r[n+1],ej(r.max,1/0)),o=tj(t,e),s=tj(i,e);return o&&s?o+" – "+s:s?"< "+s:"≥ "+o},ej=(e,t)=>e??t,FPe=e=>(t,n)=>n?e(t):null,PPe=e=>t=>e(t),tj=(e,t)=>Number.isFinite(e)?t(e):null;function RPe(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+qe(t),o=i-r;if(e.type===XC){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function DPe(e,t,n,r){const i=r||t.type;return le(n)&&mPe(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===fd?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===dd?e.utcFormat("%A, %d %B %Y, %X UTC"):dte(e,t,5,null,n,r,!0)}function hte(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=DPe(e,t,n.format,n.formatType);if(O3(t.type)){const o=fte(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(hg(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(qe(o))}`}}let pte=0;function OPe(){pte=0}const rS="p_";function q6(e){return e&&e.gradient}function gte(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?rS:"";return i||(i=e.id="gradient_"+pte++,r==="radial"?(e.x1=Bs(e.x1,.5),e.y1=Bs(e.y1,.5),e.r1=Bs(e.r1,0),e.x2=Bs(e.x2,.5),e.y2=Bs(e.y2,.5),e.r2=Bs(e.r2,.5),o=rS):(e.x1=Bs(e.x1,0),e.y1=Bs(e.y1,0),e.x2=Bs(e.x2,1),e.y2=Bs(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Bs(e,t){return e??t}function mte(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const nj={basis:{curve:IMe},"basis-closed":{curve:LMe},"basis-open":{curve:zMe},bundle:{curve:jMe,tension:"beta",value:.85},cardinal:{curve:BMe,tension:"tension",value:0},"cardinal-open":{curve:VMe,tension:"tension",value:0},"cardinal-closed":{curve:UMe,tension:"tension",value:0},"catmull-rom":{curve:WMe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:HMe,tension:"alpha",value:.5},"catmull-rom-open":{curve:qMe,tension:"alpha",value:.5},linear:{curve:m6},"linear-closed":{curve:GMe},monotone:{horizontal:XMe,vertical:YMe},natural:{curve:KMe},step:{curve:QMe},"step-after":{curve:JMe},"step-before":{curve:ZMe}};function G6(e,t,n){var r=ce(nj,e)&&nj[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const NPe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},IPe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,LPe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,zPe=/^((\s+,?\s*)|(,\s*))/,jPe=/^[01]/;function pg(e){const t=[];return(e.match(IPe)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=NPe[o],a=BPe(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function BPe(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?jPe:LPe,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(zPe);l!==null&&(i+=l[0].length)}return r}const dc=Math.PI/180,UPe=1e-14,yf=Math.PI/2,ia=Math.PI*2,gh=Math.sqrt(3)/2;var mA={},yA={},yte=[].join;function VPe(e,t,n,r,i,o,s,a,l){const u=yte.call(arguments);if(mA[u])return mA[u];const c=s*dc,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(l-t)*.5,p=d*(l-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const y=d/n,m=f/n,v=-f/r,b=d/r,x=y*a+m*l,w=v*a+b*l,k=y*e+m*t,S=v*e+b*t;let _=1/((k-x)*(k-x)+(S-w)*(S-w))-.25;_<0&&(_=0);let $=Math.sqrt(_);o==i&&($=-$);const A=.5*(x+k)-$*(S-w),O=.5*(w+S)+$*(k-x),M=Math.atan2(w-O,x-A);let R=Math.atan2(S-O,k-A)-M;R<0&&o===1?R+=ia:R>0&&o===0&&(R-=ia);const D=Math.ceil(Math.abs(R/(yf+.001))),I=[];for(let N=0;N<D;++N){const B=M+N*R/D,Y=M+(N+1)*R/D;I[N]=[A,O,B,Y,n,r,f,d]}return mA[u]=I}function WPe(e){const t=yte.call(e);if(yA[t])return yA[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const c=u*s,f=-l*a,d=l*s,h=u*a,p=Math.cos(i),g=Math.sin(i),y=Math.cos(o),m=Math.sin(o),v=.5*(o-i),b=Math.sin(v*.5),x=8/3*b*b/Math.sin(v),w=n+p-x*g,k=r+g+x*p,S=n+y,C=r+m,_=S+x*m,$=C-x*y;return yA[t]=[c*w+f*k,d*w+h*k,c*_+f*$,d*_+h*$,c*S+f*C,d*S+h*C]}const lo=["l",0,0,0,0,0,0,0];function HPe(e,t,n){const r=lo[0]=e[0];if(r==="a"||r==="A")lo[1]=t*e[1],lo[2]=n*e[2],lo[3]=e[3],lo[4]=e[4],lo[5]=e[5],lo[6]=t*e[6],lo[7]=n*e[7];else if(r==="h"||r==="H")lo[1]=t*e[1];else if(r==="v"||r==="V")lo[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)lo[i]=(i%2==1?t:n)*e[i];return lo}function m1(e,t,n,r,i,o){var s,a=null,l=0,u=0,c=0,f=0,d,h,p,g,y=0,m=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(s=t[v],(i!==1||o!==1)&&(s=HPe(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],y=l,m=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],y=l,m=u,e.moveTo(l+n,u+r);break;case"c":d=l+s[5],h=u+s[6],c=l+s[3],f=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=s[5],u=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+s[3],h=u+s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+s[1]+n,u+s[2]+r,d+n,h+r),c=l+s[1],f=u+s[2],l=d,u=h;break;case"S":d=s[3],h=s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"q":d=l+s[3],h=u+s[4],c=l+s[1],f=u+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"t":d=l+s[1],h=u+s[2],a[0].match(/[QqTt]/)===null?(c=l,f=u):a[0]==="t"?(c=2*l-p,f=2*u-g):a[0]==="q"&&(c=2*l-c,f=2*u-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+s[1],f=u+s[2];break;case"T":d=s[1],h=s[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":rj(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":rj(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=y,u=m,e.closePath();break}a=s}}function rj(e,t,n,r){const i=VPe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=WPe(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const ij=.5773502691896257,oj={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ia)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=gh*n,i=r-n*ij,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=gh*n,i=r-n*ij;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=gh*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=gh*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=gh*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=gh*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function vte(e){return ce(oj,e)?oj[e]:qPe(e)}var vA={};function qPe(e){if(!ce(vA,e)){const t=pg(e);vA[e]={draw:function(n,r){m1(n,t,0,0,Math.sqrt(r)/2)}}}return vA[e]}const ru=.448084975506;function GPe(e){return e.x}function YPe(e){return e.y}function XPe(e){return e.width}function KPe(e){return e.height}function Ha(e){return typeof e=="function"?e:()=>+e}function rx(e,t,n){return Math.max(t,Math.min(e,n))}function bte(){var e=GPe,t=YPe,n=XPe,r=KPe,i=Ha(0),o=i,s=i,a=i,l=null;function u(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),y=+n.call(this,c),m=+r.call(this,c),v=Math.min(y,m)/2,b=rx(+i.call(this,c),0,v),x=rx(+o.call(this,c),0,v),w=rx(+s.call(this,c),0,v),k=rx(+a.call(this,c),0,v);if(l||(l=h=IC()),b<=0&&x<=0&&w<=0&&k<=0)l.rect(p,g,y,m);else{var S=p+y,C=g+m;l.moveTo(p+b,g),l.lineTo(S-x,g),l.bezierCurveTo(S-ru*x,g,S,g+ru*x,S,g+x),l.lineTo(S,C-k),l.bezierCurveTo(S,C-ru*k,S-ru*k,C,S-k,C),l.lineTo(p+w,C),l.bezierCurveTo(p+ru*w,C,p,C-ru*w,p,C-w),l.lineTo(p,g+b),l.bezierCurveTo(p,g+ru*b,p+ru*b,g,p+b,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=Ha(c),u):e},u.y=function(c){return arguments.length?(t=Ha(c),u):t},u.width=function(c){return arguments.length?(n=Ha(c),u):n},u.height=function(c){return arguments.length?(r=Ha(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=Ha(c),o=f!=null?Ha(f):i,a=d!=null?Ha(d):i,s=h!=null?Ha(h):o,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function xte(){var e,t,n,r,i=null,o,s,a,l;function u(f,d,h){const p=h/2;if(o){var g=a-d,y=f-s;if(g||y){var m=Math.hypot(g,y),v=(g/=m)*l,b=(y/=m)*l,x=Math.atan2(y,g);i.moveTo(s-v,a-b),i.lineTo(f-g*p,d-y*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(s+v,a+b),i.arc(s,a,l,x,x+Math.PI)}else i.arc(f,d,p,0,ia);i.closePath()}else o=1;s=f,a=d,l=p}function c(f){var d,h=f.length,p,g=!1,y;for(i==null&&(i=y=IC()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(o=0),g&&u(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(y)return i=null,y+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function _v(e,t){return e??t}const Ev=e=>e.x||0,$v=e=>e.y||0,QPe=e=>e.width||0,ZPe=e=>e.height||0,JPe=e=>(e.x||0)+(e.width||0),eRe=e=>(e.y||0)+(e.height||0),tRe=e=>e.startAngle||0,nRe=e=>e.endAngle||0,rRe=e=>e.padAngle||0,iRe=e=>e.innerRadius||0,oRe=e=>e.outerRadius||0,sRe=e=>e.cornerRadius||0,aRe=e=>_v(e.cornerRadiusTopLeft,e.cornerRadius)||0,lRe=e=>_v(e.cornerRadiusTopRight,e.cornerRadius)||0,uRe=e=>_v(e.cornerRadiusBottomRight,e.cornerRadius)||0,cRe=e=>_v(e.cornerRadiusBottomLeft,e.cornerRadius)||0,fRe=e=>_v(e.size,64),dRe=e=>e.size||1,QC=e=>e.defined!==!1,hRe=e=>vte(e.shape||"circle"),pRe=DMe().startAngle(tRe).endAngle(nRe).padAngle(rRe).innerRadius(iRe).outerRadius(oRe).cornerRadius(sRe),gRe=VJ().x(Ev).y1($v).y0(eRe).defined(QC),mRe=VJ().y($v).x1(Ev).x0(JPe).defined(QC),yRe=UJ().x(Ev).y($v).defined(QC),vRe=bte().x(Ev).y($v).width(QPe).height(ZPe).cornerRadius(aRe,lRe,uRe,cRe),bRe=NMe().type(hRe).size(fRe),xRe=xte().x(Ev).y($v).defined(QC).size(dRe);function Y6(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function wRe(e,t){return pRe.context(e)(t)}function SRe(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?mRe:gRe).curve(G6(r,n.orient,n.tension)).context(e)(t)}function kRe(e,t){const n=t[0],r=n.interpolate||"linear";return yRe.curve(G6(r,n.orient,n.tension)).context(e)(t)}function sm(e,t,n,r){return vRe.context(e)(t,n,r)}function CRe(e,t){return(t.mark.shape||t.shape).context(e)(t)}function _Re(e,t){return bRe.context(e)(t)}function ERe(e,t){return xRe.context(e)(t)}var wte=1;function Ste(){wte=1}function X6(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+wte++),s=i.clipping[o]||(i.clipping[o]={id:o});return Ne(r)?s.path=r(null):Y6(n)?s.path=sm(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function gn(e){this.clear(),e&&this.union(e)}gn.prototype={clone(){return new gn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*s+u,l*r+a*s+c,a*o-l*i+u,l*o+a*i+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function ZC(e){this.mark=e,this.bounds=this.bounds||new gn}function JC(e){ZC.call(this,e),this.items=this.items||[]}ne(JC,ZC);class kte{constructor(t){this._pending=0,this._loader=t||_C()}pending(){return this._pending}sanitizeURL(t){const n=this;return sj(n),n._loader.sanitize(t,{context:"href"}).then(r=>(Ym(n),r)).catch(()=>(Ym(n),null))}loadImage(t){const n=this,r=eFe();return sj(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=ce(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>Ym(n),s.onerror=()=>Ym(n),s.src=o,s}).catch(i=>(Ym(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function sj(e){e._pending+=1}function Ym(e){e._pending-=1}function Vl(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?$Re(t,r):0))}return e}function $Re(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const ARe=ia-1e-8;let e_,b2,x2,Mf,I3,w2,L3,z3;const Fu=(e,t)=>e_.add(e,t),S2=(e,t)=>Fu(b2=e,x2=t),aj=e=>Fu(e,e_.y1),lj=e=>Fu(e_.x1,e),vf=(e,t)=>I3*e+L3*t,bf=(e,t)=>w2*e+z3*t,bA=(e,t)=>Fu(vf(e,t),bf(e,t)),xA=(e,t)=>S2(vf(e,t),bf(e,t));function Av(e,t){return e_=e,t?(Mf=t*dc,I3=z3=Math.cos(Mf),w2=Math.sin(Mf),L3=-w2):(I3=z3=1,Mf=w2=L3=0),TRe}const TRe={beginPath(){},closePath(){},moveTo:xA,lineTo:xA,rect(e,t,n,r){Mf?(bA(e+n,t),bA(e+n,t+r),bA(e,t+r),xA(e,t)):(Fu(e+n,t+r),S2(e,t))},quadraticCurveTo(e,t,n,r){const i=vf(e,t),o=bf(e,t),s=vf(n,r),a=bf(n,r);uj(b2,i,s,aj),uj(x2,o,a,lj),S2(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=vf(e,t),a=bf(e,t),l=vf(n,r),u=bf(n,r),c=vf(i,o),f=bf(i,o);cj(b2,s,l,c,aj),cj(x2,a,u,f,lj),S2(c,f)},arc(e,t,n,r,i,o){if(r+=Mf,i+=Mf,b2=n*Math.cos(i)+e,x2=n*Math.sin(i)+t,Math.abs(i-r)>ARe)Fu(e-n,t-n),Fu(e+n,t+n);else{const s=u=>Fu(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%ia,r<0&&(r+=ia),i=i%ia,i<0&&(i+=ia),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=ia,a=r-r%yf,l=0;l<4&&a>i;++l,a-=yf)s(a);else for(a=r-r%yf+yf,l=0;l<4&&a<i;++l,a=a+yf)s(a)}}};function uj(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function cj(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(o)>UPe?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&i(fj(l,e,t,n,r)),0<u&&u<1&&i(fj(u,e,t,n,r))}function fj(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var ec=(ec=Ju(1,1))?ec.getContext("2d"):null;const j3=new gn;function K6(e){return function(t,n){if(!ec)return!0;e(ec,t),j3.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=j3;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(ec.isPointInPath(l,a))return!0;return!1}}function Q6(e,t){return t.contains(e.x||0,e.y||0)}function Cte(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(j3.set(n,r,n+i,r+o))}function _te(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return ep(t,n,r,i,o)}function ep(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,p,g,y;for(y=0;y<4;++y){if(y===0&&(h=-u,p=-(o-t)),y===1&&(h=u,p=a-t),y===2&&(h=-c,p=-(s-n)),y===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function gg(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Go(e,t){return e??t}function dj(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function MRe(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Go(t.x1,.5)*r,n.y1+Go(t.y1,.5)*i,Math.max(r,i)*Go(t.r1,0),n.x1+Go(t.x2,.5)*r,n.y1+Go(t.y2,.5)*i,Math.max(r,i)*Go(t.r2,.5));else{const s=Go(t.x1,0),a=Go(t.y1,0),l=Go(t.x2,1),u=Go(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=Ju(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=dj(f.createLinearGradient(s,a,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return dj(o,t.stops)}function Ete(e,t,n){return q6(n)?MRe(e,n,t.bounds):n}function iS(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Ete(e,t,t.fill),!0):!1}var FRe=[];function mg(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Ete(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||FRe),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function PRe(e,t){return e.zindex-t.zindex||e.index-t.index}function Z6(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(PRe)}function _s(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=Z6(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function oS(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=Z6(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function J6(e){return function(t,n,r){_s(n,i=>{(!r||r.intersects(i.bounds))&&$te(e,t,i,i)})}}function RRe(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&$te(e,t,n.items[0],n.items)}}function $te(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(gg(t,n),n.fill&&iS(t,n,i)&&t.fill(),n.stroke&&mg(t,n,i)&&t.stroke()))}function t_(e){return e=e||Do,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,oS(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function Tv(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,u,c;return l&&(u=s.strokeWidth,c=s.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function eD(e){return t_(Tv(e))}function Kf(e,t){return"translate("+e+","+t+")"}function tD(e){return"rotate("+e+")"}function DRe(e,t){return"scale("+e+","+t+")"}function Ate(e){return Kf(e.x||0,e.y||0)}function ORe(e){return Kf(e.x||0,e.y||0)+(e.angle?" "+tD(e.angle):"")}function NRe(e){return Kf(e.x||0,e.y||0)+(e.angle?" "+tD(e.angle):"")+(e.scaleX||e.scaleY?" "+DRe(e.scaleX||1,e.scaleY||1):"")}function nD(e,t,n){function r(s,a){s("transform",ORe(a)),s("d",t(null,a))}function i(s,a){return t(Av(s,a.angle),a),Vl(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=dc),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:J6(o),pick:eD(o),isect:n||K6(o)}}var IRe=nD("arc",wRe);function LRe(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function zRe(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function jRe(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function rD(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(Av(l),c),Vl(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=Tv(o);function a(l,u,c,f,d,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,s(l,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:RRe(o),pick:a,isect:Q6,tip:n}}var BRe=rD("area",SRe,LRe);function URe(e,t){var n=t.clip;e.save(),Ne(n)?(e.beginPath(),n(e),e.clip()):Tte(e,t.group)}function Tte(e,t){e.beginPath(),Y6(t)?sm(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function Mte(e){const t=Go(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function VRe(e,t){e("transform",Ate(t))}function Fte(e,t){const n=Mte(t);e("d",sm(null,t,n,n))}function WRe(e,t){e("class","background"),e("aria-hidden",!0),Fte(e,t)}function HRe(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Fte(e,t):e("d","")}function qRe(e,t,n){const r=t.clip?X6(n,t,t):null;e("clip-path",r)}function GRe(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Vl(e,t),e.translate(t.x||0,t.y||0)}function y1(e,t,n,r){const i=Mte(t);e.beginPath(),sm(e,t,(n||0)+i,(r||0)+i)}const YRe=Tv(y1),XRe=Tv(y1,!1),KRe=Tv(y1,!0);function QRe(e,t,n,r){_s(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(y1(e,i,o,s),gg(e,i),i.fill&&iS(e,i,l)&&e.fill(),i.stroke&&!a&&mg(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&Tte(e,i),n&&n.translate(-o,-s),_s(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(y1(e,i,o,s),gg(e,i),mg(e,i,l)&&e.stroke())})}function ZRe(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return oS(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,o))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),p=f+(l.height||0),g=l.clip;if(g&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,g&&Y6(l)&&!KRe(e,l,s,a))return e.restore(),null;const y=l.strokeForeground,m=t.interactive!==!1;return m&&y&&l.stroke&&XRe(e,l,s,a)?(e.restore(),l):(u=oS(l,v=>JRe(v,c,f)?this.pick(v,n,r,c,f):null),!u&&m&&(l.fill||!y&&l.stroke)&&YRe(e,l,s,a)&&(u=l),e.restore(),u||null)})}function JRe(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var e6e={type:"group",tag:"g",nested:!1,attr:VRe,bound:GRe,draw:QRe,pick:ZRe,isect:Cte,content:qRe,background:WRe,foreground:HRe},v1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function iD(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function oD(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function sD(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function n_(e,t){return e==="center"?t/2:e==="right"?t:0}function r_(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function t6e(e,t,n){const r=iD(t,n),i=oD(t,r),o=sD(t,r),s=(t.x||0)-n_(t.align,i),a=(t.y||0)-r_(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,v1["xmlns:xlink"],"xlink:href"),e("transform",Kf(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function n6e(e,t){const n=t.image,r=oD(t,n),i=sD(t,n),o=(t.x||0)-n_(t.align,r),s=(t.y||0)-r_(t.baseline,i);return e.set(o,s,o+r,s+i)}function r6e(e,t,n){_s(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=iD(r,this);let o=oD(r,i),s=sD(r,i);if(o===0||s===0)return;let a=(r.x||0)-n_(r.align,o),l=(r.y||0)-r_(r.baseline,s),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,l+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(gg(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var i6e={type:"image",tag:"image",nested:!1,attr:t6e,bound:n6e,draw:r6e,pick:t_(),isect:Do,get:iD,xOffset:n_,yOffset:r_},o6e=rD("line",kRe,zRe);function s6e(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",NRe(t)),e("d",t.path)}function k2(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*dc,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=pg(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),m1(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):m1(e,l,r,i,o,s)}function a6e(e,t){return k2(Av(e,t.angle),t)?e.set(0,0,0,0):Vl(e,t,!0)}var l6e={type:"path",tag:"path",nested:!1,attr:s6e,bound:a6e,draw:J6(k2),pick:eD(k2),isect:K6(k2)};function u6e(e,t){e("d",sm(null,t))}function c6e(e,t){var n,r;return Vl(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function hj(e,t){e.beginPath(),sm(e,t)}var f6e={type:"rect",tag:"path",nested:!1,attr:u6e,bound:c6e,draw:J6(hj),pick:eD(hj),isect:Cte};function d6e(e,t){e("transform",Ate(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function h6e(e,t){var n,r;return Vl(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function Pte(e,t,n){var r,i,o,s;return t.stroke&&mg(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function p6e(e,t,n){_s(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Pte(e,r,i)&&(gg(e,r),e.stroke())}})}function g6e(e,t,n,r){return e.isPointInStroke?Pte(e,t,1)&&e.isPointInStroke(n,r):!1}var m6e={type:"rule",tag:"line",nested:!1,attr:d6e,bound:h6e,draw:p6e,pick:t_(g6e),isect:_te},y6e=nD("shape",CRe),v6e=nD("symbol",_Re,Q6);const pj=DQ();var Hi={height:Pa,measureWidth:aD,estimateWidth:sS,width:sS,canvas:Rte};Rte(!0);function Rte(e){Hi.width=e&&ec?aD:sS}function sS(e,t){return Dte(pc(e,t),Pa(e))}function Dte(e,t){return~~(.8*e.length*t)}function aD(e,t){return Pa(e)<=0||!(t=pc(e,t))?0:Ote(t,i_(e))}function Ote(e,t){const n=`(${t}) ${e}`;let r=pj.get(n);return r===void 0&&(ec.font=t,r=ec.measureText(e).width,pj.set(n,r)),r}function Pa(e){return e.fontSize!=null?+e.fontSize||0:11}function hc(e){return e.lineHeight!=null?e.lineHeight:Pa(e)+2}function b6e(e){return G(e)?e.length>1?e:e[0]:e}function Mv(e){return b6e(e.lineBreak&&e.text&&!G(e.text)?e.text.split(e.lineBreak):e.text)}function lD(e){const t=Mv(e);return(G(t)?t.length-1:0)*hc(e)}function pc(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?w6e(e,n):n}function x6e(e){if(Hi.width===aD){const t=i_(e);return n=>Ote(n,t)}else if(Hi.width===sS){const t=Pa(e);return n=>Dte(n,t)}else return t=>Hi.width(e,t)}function w6e(e,t){var n=+e.limit,r=x6e(e);if(r(t)<n)return t;var i=e.ellipsis||"…",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function Fv(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function i_(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Pa(e)+"px "+Fv(e,t)}function uD(e){var t=e.baseline,n=Pa(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*hc(e):t==="line-bottom"?.29*n-.5*hc(e):0)}const S6e={left:"start",center:"middle",right:"end"},vy=new gn;function o_(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-yf,t+=r*Math.cos(i),n+=r*Math.sin(i)),vy.x1=t,vy.y1=n,vy}function k6e(e,t){var n=t.dx||0,r=(t.dy||0)+uD(t),i=o_(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",S6e[t.align]||"start"),a?(l=Kf(o,s)+" "+tD(a),(n||r)&&(l+=" "+Kf(n,r))):l=Kf(o+n,s+r),e("transform",l)}function cD(e,t,n){var r=Hi.height(t),i=t.align,o=o_(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+uD(t)-Math.round(.8*r),c=Mv(t),f;if(G(c)?(r+=hc(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Hi.width(t,h)),0)):f=Hi.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=s,u+=a,l+f,u+r),t.angle&&!n)e.rotate(t.angle*dc,s,a);else if(n===2)return e.rotatedPoints(t.angle*dc,s,a);return e}function C6e(e,t,n){_s(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=i_(r),e.textAlign=r.align||"left",o=o_(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*dc),s=a=0),s+=r.dx||0,a+=(r.dy||0)+uD(r),c=Mv(r),gg(e,r),G(c))for(u=hc(r),l=0;l<c.length;++l)f=pc(r,c[l]),r.fill&&iS(e,r,i)&&e.fillText(f,s,a),r.stroke&&mg(e,r,i)&&e.strokeText(f,s,a),a+=u;else f=pc(r,c),r.fill&&iS(e,r,i)&&e.fillText(f,s,a),r.stroke&&mg(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function _6e(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=o_(t),a=s.x1,l=s.y1,u=cD(vy,t,1),c=-t.angle*dc,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*l),p=d*i+f*o+(l-d*a-f*l);return u.contains(h,p)}function E6e(e,t){const n=cD(vy,e,2);return ep(t,n[0],n[1],n[2],n[3])||ep(t,n[0],n[1],n[4],n[5])||ep(t,n[4],n[5],n[6],n[7])||ep(t,n[2],n[3],n[6],n[7])}var $6e={type:"text",tag:"text",nested:!1,attr:k6e,bound:cD,draw:C6e,pick:t_(_6e),isect:E6e},A6e=rD("trail",ERe,jRe),Zi={arc:IRe,area:BRe,group:e6e,image:i6e,line:o6e,path:l6e,rect:f6e,rule:m6e,shape:y6e,symbol:v6e,text:$6e,trail:A6e};function B3(e,t,n){var r=Zi[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new gn),e,n)}var gj={mark:null};function Nte(e,t,n){var r=Zi[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,c;if(r.nested)return s?u=o[0]:(gj.mark=e,u=gj),c=B3(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new gn,s)for(a=0,l=o.length;a<l;++a)t.union(B3(o[a],i,n));return e.bounds=t}const T6e=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Ite(e,t){return JSON.stringify(e,T6e,t)}function Lte(e){const t=typeof e=="string"?JSON.parse(e):e;return zte(t)}function zte(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&zte(n[i]);return t&&Nte(e),e}class jte{constructor(t){arguments.length?this.root=Lte(t):(this.root=mj({marktype:"group",name:"root",role:"frame"}),this.root.items=[new JC(this.root)])}toJSON(t){return Ite(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=mj(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function mj(e,t){const n={bounds:new gn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Pu(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function fD(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function bn(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Pu(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function bo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Bte(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function s_(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function M6e(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Zi[i.marktype]).tip){for(s=s_(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let dD=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||_C(),this._tooltip=n||F6e}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=Pu(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=M6e(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function F6e(e,t,n,r){e.element().setAttribute("title",r||"")}class Pv{constructor(t){this._el=null,this._bgcolor=null,this._loader=new kte(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const P6e="keydown",R6e="keypress",D6e="keyup",Ute="dragenter",C2="dragleave",Vte="dragover",U3="pointerdown",O6e="pointerup",aS="pointermove",_2="pointerout",Wte="pointerover",V3="mousedown",N6e="mouseup",Hte="mousemove",lS="mouseout",qte="mouseover",uS="click",I6e="dblclick",L6e="wheel",Gte="mousewheel",cS="touchstart",fS="touchmove",dS="touchend",z6e=[P6e,R6e,D6e,Ute,C2,Vte,U3,O6e,aS,_2,Wte,V3,N6e,Hte,lS,qte,uS,I6e,L6e,Gte,cS,fS,dS],W3=aS,by=lS,H3=uS;class Rv extends dD{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=z6e,this.pointermove=vj([aS,Hte],[Wte,qte],[_2,lS]),this.dragover=vj([Vte],[Ute],[C2]),this.pointerout=bj([_2,lS]),this.dragleave=bj([C2])}initialize(t,n,r){return this._canvas=t&&fD(t,"canvas"),[uS,V3,U3,aS,_2,C2].forEach(i=>yj(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(Gte,t)}pointerdown(t){this._down=this._active,this.fire(U3,t)}mousedown(t){this._down=this._active,this.fire(V3,t)}click(t){this._down===this._active&&(this.fire(uS,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(cS,t,!0)}touchmove(t){this.fire(fS,t,!0)}touchend(t){this.fire(dS,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===H3&&i&&i.href?this.handleHref(n,i,i.href):(t===W3||t===by)&&this.handleTooltip(n,i,t!==by),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(yj(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=s_(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return Zi[t.marktype].pick.call(this,s,t,n,r,i,o)}}const j6e=e=>e===cS||e===fS||e===dS?[cS,fS,dS]:[e];function yj(e,t){j6e(t).forEach(n=>B6e(e,n))}function B6e(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function R0(e,t,n){t.forEach(r=>e.fire(r,n))}function vj(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?R0(this,e,r):((!i||!i.exit)&&R0(this,n,r),this._active=o,R0(this,t,r),R0(this,e,r))}}function bj(e){return function(t){R0(this,e,t),this._active=null}}function U6e(){return typeof window<"u"&&window.devicePixelRatio||1}function V6e(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?U6e():i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class hS extends Pv{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new gn,this._tempb=new gn}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Ju(1,1,this._options.type),t&&this._canvas&&(bo(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)V6e(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||q("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=W6e(i,o,s);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):H6e(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=Zi[n.marktype];n.clip&&URe(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const W6e=(e,t,n)=>new gn().set(0,0,t,n).translate(-e[0],-e[1]);function H6e(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class Yte extends dD{constructor(t,n){super(t,n);const r=this;r._hrefHandler=wA(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=wA(r,(i,o)=>{r.handleTooltip(i,o,i.type!==by)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(H3,this._hrefHandler),i.removeEventListener(W3,this._tooltipHandler),i.removeEventListener(by,this._tooltipHandler)),this._svg=i=t&&fD(t,"svg"),i&&(i.addEventListener(H3,this._hrefHandler),i.addEventListener(W3,this._tooltipHandler),i.addEventListener(by,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:wA(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const wA=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},Xte="aria-hidden",hD="aria-label",pD="role",gD="aria-roledescription",Kte="graphics-object",mD="graphics-symbol",Qte=(e,t,n)=>({[pD]:e,[gD]:t,[hD]:n||void 0}),q6e=ws(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),xj={axis:{desc:"axis",caption:X6e},legend:{desc:"legend",caption:K6e},"title-text":{desc:"title",caption:e=>`Title text '${Sj(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Sj(e)}'`}},wj={ariaRole:pD,ariaRoleDescription:gD,description:hD};function Zte(e,t){const n=t.aria===!1;if(e(Xte,n||void 0),n||t.description==null)for(const r in wj)e(wj[r],void 0);else{const r=t.mark.marktype;e(hD,t.description),e(pD,t.ariaRole||(r==="group"?Kte:mD)),e(gD,t.ariaRoleDescription||`${r} mark`)}}function Jte(e){return e.aria===!1?{[Xte]:!0}:q6e[e.role]?null:xj[e.role]?Y6e(e,xj[e.role]):G6e(e)}function G6e(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return Qte(n?Kte:mD,`${t} mark container`,e.description)}function Y6e(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return Qte(t.role||mD,t.desc,n.description||r(n))}catch{return null}}function Sj(e){return ae(e.text).join(" ")}function X6e(e){const t=e.datum,n=e.orient,r=t.title?ene(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${hg(a)?"discrete":a} scale with ${hte(s,o,e)}`}function K6e(e){const t=e.datum,n=t.title?ene(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return Z6e(r)+(n?` titled '${n}'`:"")+` for ${Q6e(o)} with ${hte(l,a,e)}`}function ene(e){try{return ae(qe(e.items).items[0].text).join(" ")}catch{return null}}function Q6e(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+qe(e)}function Z6e(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const tne=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),J6e=e=>tne(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function yD(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${J6e(u)}"`),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=tne(l),a),toString:()=>e};return a}const nne=e=>rne(yD(),e)+"";function rne(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):rne(e,r)}return e.close()}const pS={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},gS={blend:"mix-blend-mode"},ine={fill:"none","stroke-miterlimit":10},Xm=0,kj="http://www.w3.org/2000/xmlns/",vn=v1.xmlns;class vD extends Pv{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=bn(t,0,"svg",vn),this._svg.setAttributeNS(kj,"xmlns",vn),this._svg.setAttributeNS(kj,"xmlns:xlink",v1["xmlns:xlink"]),this._svg.setAttribute("version",v1.version),this._svg.setAttribute("class","marks"),bo(t,1),this._root=bn(this._svg,Xm,"g",vn),Ru(this._root,ine),bo(this._svg,Xm+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Ru(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=bn(t,Xm,"rect",vn),Ru(r,{width:this._width,height:this._height,fill:n}));const i=nne(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),bo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=Zi[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Cj(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Cj(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=Zi[s],l=n.interactive===!1?"none":null,u=a.tag==="g",c=_j(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return bo(c,0),n._svg;c.setAttribute("class",Bte(n));const f=Jte(n);for(const g in f)Or(c,g,f[g]);u||Or(c,"pointer-events",l),Or(c,"clip-path",n.clip?X6(this,n,n.group):null);let d=null,h=0;const p=g=>{const y=this.isDirty(g),m=_j(g,c,d,a.tag,o);y&&(this._update(a,m,g),u&&nDe(this,m,g,i)),d=m,++h};return a.nested?n.items.length&&p(n.items[0]):_s(n,p),bo(c,h),c}_update(t,n,r){dl=n,yr=n.__values__,Zte(xy,r),t.attr(xy,r,this);const i=iDe[t.type];i&&i.call(this,t,n,r),dl&&this.style(dl,r)}style(t,n){if(n!=null){for(const r in pS){let i=r==="font"?Fv(n):n[r];if(i===yr[r])continue;const o=pS[r];i==null?t.removeAttribute(o):(q6(i)&&(i=gte(i,this._defs.gradient,one())),t.setAttribute(o,i+"")),yr[r]=i}for(const r in gS)E2(t,gS[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=bn(t,Xm+1,"defs",vn)),i=eDe(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=bn(t,Xm+1,"defs",vn)),i=tDe(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):bo(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Cj(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function eDe(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=bn(e,n++,"pattern",vn);Ru(s,{id:rS+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=bn(s,0,"rect",vn),Ru(s,{width:1,height:1,fill:`url(${one()}#${t.id})`}),e=bn(e,n++,"radialGradient",vn),Ru(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=bn(e,n++,"linearGradient",vn),Ru(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=bn(e,r,"stop",vn),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return bo(e,r),n}function tDe(e,t,n){let r;return e=bn(e,n,"clipPath",vn),e.setAttribute("id",t.id),t.path?(r=bn(e,0,"path",vn),r.setAttribute("d",t.path)):(r=bn(e,0,"rect",vn),Ru(r,{x:0,y:0,width:t.width,height:t.height})),bo(e,1),n+1}function nDe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;_s(n,s=>{i=e.mark(t,s,i,r),++o}),bo(t,1+o)}function _j(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=Pu(s,r,vn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=Pu(s,"path",vn);o.appendChild(a),a.__data__=e;const l=Pu(s,"g",vn);o.appendChild(l),l.__data__=e;const u=Pu(s,"path",vn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||rDe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function rDe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let dl=null,yr=null;const iDe={group(e,t,n){const r=dl=t.childNodes[2];yr=r.__values__,e.foreground(xy,n,this),yr=t.__values__,dl=t.childNodes[1],e.content(xy,n,this);const i=dl=t.childNodes[0];e.background(xy,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==yr.events&&(Or(r,"pointer-events",o),Or(i,"pointer-events",o),yr.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Or(r,"display",null),this.style(i,n),Or(i,"stroke",null),s&&(n.fill=null),yr=r.__values__,this.style(r,n),s&&(n.fill=s),dl=null}else Or(r,"display","none")},image(e,t,n){n.smooth===!1?(E2(t,"image-rendering","optimizeSpeed"),E2(t,"image-rendering","pixelated")):E2(t,"image-rendering",null)},text(e,t,n){const r=Mv(n);let i,o,s,a;G(r)?(o=r.map(l=>pc(n,l)),i=o.join(`
`),i!==yr.text&&(bo(t,0),s=t.ownerDocument,a=hc(n),o.forEach((l,u)=>{const c=Pu(s,"tspan",vn);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),yr.text=i)):(o=pc(n,r),o!==yr.text&&(t.textContent=o,yr.text=o)),Or(t,"font-family",Fv(n)),Or(t,"font-size",Pa(n)+"px"),Or(t,"font-style",n.fontStyle),Or(t,"font-variant",n.fontVariant),Or(t,"font-weight",n.fontWeight)}};function xy(e,t,n){t!==yr[e]&&(n?oDe(dl,e,t,n):Or(dl,e,t),yr[e]=t)}function E2(e,t,n){n!==yr[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),yr[t]=n)}function Ru(e,t){for(const n in t)Or(e,n,t[n])}function Or(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function oDe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function one(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class sne extends Pv{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=yD();n.open("svg",Oe({},v1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",ine,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Zi[n.marktype],i=r.tag,o=[Zte,r.attr];t.open("g",{class:Bte(n),"clip-path":n.clip?X6(this,n,n.group):null},Jte(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const u=Mv(a);if(G(u)){const c={x:0,dy:hc(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(pc(a,u[f])).close()}else t.text(pc(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),_s(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):_s(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,u,c)=>{o[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&sDe(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:rS+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function sDe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Fv(t),e["font-size"]=Pa(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in pS){let a=t[s];const l=pS[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(q6(a)&&(a=gte(a,i.gradient,"")),e[l]=a)}for(const s in gS){const a=t[s];a!=null&&(o=o||[],o.push(`${gS[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const es={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function aDe(e){es.svgMarkTypes=e.svgMarkTypes??["text"],es.svgOnTop=e.svgOnTop??!0,es.debug=e.debug??!1}class q3 extends Pv{constructor(t){super(t),this._svgRenderer=new vD(t),this._canvasRenderer=new hS(t)}initialize(t,n,r,i,o){this._root_el=bn(t,0,"div");const s=bn(this._root_el,0,"div"),a=bn(this._root_el,1,"div");return this._root_el.style.position="relative",es.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=es.svgOnTop?a:s,this._canvasEl=es.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return es.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!es.svgMarkTypes.includes(o));this._svgRenderer.render(t,es.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return es.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class ane extends Rv{constructor(t,n){super(t,n)}initialize(t,n,r){const i=bn(bn(t,0,"div"),es.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const lne="canvas",une="hybrid",cne="png",fne="svg",dne="none",Du={Canvas:lne,PNG:cne,SVG:fne,Hybrid:une,None:dne},hd={};hd[lne]=hd[cne]={renderer:hS,headless:hS,handler:Rv};hd[fne]={renderer:vD,headless:sne,handler:Yte};hd[une]={renderer:q3,headless:q3,handler:ane};hd[dne]={};function a_(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(hd[e]=t,this):hd[e]}function hne(e,t,n){const r=[],i=new gn().union(t),o=e.marktype;return o?pne(e,i,n,r):o==="group"?gne(e,i,n,r):q("Intersect scene must be mark node or group item.")}function pne(e,t,n,r){if(lDe(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)gne(i[a],t,n,r);else for(const l=Zi[o].isect;a<s;++a){const u=i[a];mne(u,t,l)&&r.push(u)}}return r}function lDe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function gne(e,t,n,r){n&&n(e.mark)&&mne(e,t,Zi.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)pne(i[l],t,n,r);t.translate(s,a)}return r}function mne(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const SA=new gn;function yne(e){const t=e.clip;if(Ne(t))t(Av(SA.clear()));else if(t)SA.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(SA)}const uDe=1e-9;function bD(e,t,n){return e===t?!0:n==="path"?vne(e,t):e instanceof Date&&t instanceof Date?+e==+t:Ze(e)&&Ze(t)?Math.abs(e-t)<=uDe:!e||!t||!se(e)&&!se(t)?e==t:cDe(e,t)}function vne(e,t){return bD(pg(e),pg(t))}function cDe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!bD(e[i],t[i],i))return!1;return typeof e==typeof t}function fDe(){Ste(),OPe()}const yg="top",ls="left",ds="right",gc="bottom",dDe="top-left",hDe="top-right",pDe="bottom-left",gDe="bottom-right",xD="start",G3="middle",Ir="end",mDe="x",yDe="y",l_="group",wD="axis",SD="title",vDe="frame",bDe="scope",kD="legend",bne="row-header",xne="row-footer",wne="row-title",Sne="column-header",kne="column-footer",Cne="column-title",xDe="padding",wDe="symbol",_ne="fit",Ene="fit-x",$ne="fit-y",SDe="pad",CD="none",ix="all",Y3="each",_D="flush",Ou="column",Nu="row";function Ane(e){V.call(this,null,e)}ne(Ane,V,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Zi[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=ox(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===l_||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(ox(u,s))),r.role){case wD:case kD:case SD:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(ox(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(ox(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return yne(r),t.modifies("bounds")}});function ox(e,t,n){return t(e.bounds.clear(),e,n)}const Ej=":vega_identifier:";function ED(e){V.call(this,0,e)}ED.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ne(ED,V,{transform(e,t){const n=kDe(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function kDe(e){return e._signals[Ej]||(e._signals[Ej]=e.add(0))}function Tne(e){V.call(this,null,e)}ne(Tne,V,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,CDe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===l_?JC:ZC;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function CDe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Mne(e){V.call(this,null,e)}const $j={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Fne(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Fne=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Aj=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(Fne(i,o=e[n].bounds,t))return!0},_De=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},EDe=(e,t,n)=>{var r=e.range(),i=new gn;return t===yg||t===gc?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},Tj=e=>(e.forEach(t=>t.opacity=1),e),Mj=(e,t)=>e.reflow(t.modified()).modifies("opacity");ne(Mne,V,{transform(e,t){const n=$j[e.method]||$j.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Tj(i),t=Mj(t,e)),t;if(i=i.filter(_De),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=Tj(i),t=Mj(t,e),o.length>=3&&Aj(o,r)){do o=n(o,r);while(o.length>=3&&Aj(o,r));o.length<3&&!qe(i).opacity&&(o.length>1&&(qe(o).opacity=0),qe(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=EDe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function Pne(e){V.call(this,null,e)}ne(Pne,V,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const hr=new gn;function tp(e,t,n){return e[t]===n?0:(e[t]=n,1)}function $De(e){var t=e.items[0].orient;return t===ls||t===ds}function ADe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function TDe(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=ADe(o),u=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=o.title&&i.items[l[2]].items[0],g=i.titlePadding,y=i.bounds,m=p&&lD(p),v=0,b=0,x,w;switch(hr.clear().union(y),y.clear(),(x=l[0])>-1&&y.union(i.items[x].bounds),(x=l[1])>-1&&y.union(i.items[x].bounds),a){case yg:v=f||0,b=-c,w=Math.max(d,Math.min(h,-y.y1)),y.add(0,-w).add(u,0),p&&sx(e,p,w,g,m,0,-1,y);break;case ls:v=-c,b=f||0,w=Math.max(d,Math.min(h,-y.x1)),y.add(-w,0).add(0,u),p&&sx(e,p,w,g,m,1,-1,y);break;case ds:v=n+c,b=f||0,w=Math.max(d,Math.min(h,y.x2)),y.add(0,0).add(w,u),p&&sx(e,p,w,g,m,1,1,y);break;case gc:v=f||0,b=r+c,w=Math.max(d,Math.min(h,y.y2)),y.add(0,0).add(u,w),p&&sx(e,p,w,g,0,0,1,y);break;default:v=i.x,b=i.y}return Vl(y.translate(v,b),i),tp(i,"x",v+s)|tp(i,"y",b+s)&&(i.bounds=hr,e.dirty(i),i.bounds=y,e.dirty(i)),i.mark.bounds.clear().union(y)}function sx(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}a.union(l)}const Fj=(e,t)=>Math.floor(Math.min(e,t)),Pj=(e,t)=>Math.ceil(Math.max(e,t));function MDe(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===l_)switch(i.role){case wD:case kD:case SD:break;case bne:s.rowheaders.push(...o);break;case xne:s.rowfooters.push(...o);break;case Sne:s.colheaders.push(...o);break;case kne:s.colfooters.push(...o);break;case wne:s.rowtitle=o[0];break;case Cne:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function FDe(e){return new gn().set(0,0,e.width||0,e.height||0)}function PDe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Nt(e,t,n){const r=se(e)?e[t]:e;return r??(n!==void 0?n:0)}function Rj(e){return e<0?Math.ceil(-e):0}function Rne(e,t,n){var r=!n.nodirty,i=n.bounds===_D?FDe:PDe,o=hr.set(0,0,0,0),s=Nt(n.align,Ou),a=Nt(n.align,Nu),l=Nt(n.padding,Ou),u=Nt(n.padding,Nu),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,y=Array(d),m=Array(f),v=0,b=Array(d),x=Array(d),w=Array(d),k,S,C,_,$,A,O,M,P,R,D;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)m[S]=0;for(S=0;S<d;++S)A=t[S],$=w[S]=i(A),A.x=A.x||0,b[S]=0,A.y=A.y||0,x[S]=0,C=S%c,_=~~(S/c),g=Math.max(g,O=Math.ceil($.x2)),v=Math.max(v,M=Math.ceil($.y2)),p[C]=Math.max(p[C],O),m[_]=Math.max(m[_],M),h[S]=l+Rj($.x1),y[S]=u+Rj($.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(y[S]=0);if(s===Y3)for(C=1;C<c;++C){for(D=0,S=C;S<d;S+=c)D<h[S]&&(D=h[S]);for(S=C;S<d;S+=c)h[S]=D+p[C-1]}else if(s===ix){for(D=0,S=0;S<d;++S)S%c&&D<h[S]&&(D=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=D+g)}else for(s=!1,C=1;C<c;++C)for(S=C;S<d;S+=c)h[S]+=p[C-1];if(a===Y3)for(_=1;_<f;++_){for(D=0,S=_*c,k=S+c;S<k;++S)D<y[S]&&(D=y[S]);for(S=_*c;S<k;++S)y[S]=D+m[_-1]}else if(a===ix){for(D=0,S=c;S<d;++S)D<y[S]&&(D=y[S]);for(S=c;S<d;++S)y[S]=D+v}else for(a=!1,_=1;_<f;++_)for(S=_*c,k=S+c;S<k;++S)y[S]+=m[_-1];for(P=0,S=0;S<d;++S)P=h[S]+(S%c?P:0),b[S]+=P-t[S].x;for(C=0;C<c;++C)for(R=0,S=C;S<d;S+=c)R+=y[S],x[S]+=R-t[S].y;if(s&&Nt(n.center,Ou)&&f>1)for(S=0;S<d;++S)$=s===ix?g:p[S%c],P=$-w[S].x2-t[S].x-b[S],P>0&&(b[S]+=P/2);if(a&&Nt(n.center,Nu)&&c!==1)for(S=0;S<d;++S)$=a===ix?v:m[~~(S/c)],R=$-w[S].y2-t[S].y-x[S],R>0&&(x[S]+=R/2);for(S=0;S<d;++S)o.union(w[S].translate(b[S],x[S]));switch(P=Nt(n.anchor,mDe),R=Nt(n.anchor,yDe),Nt(n.anchor,Ou)){case Ir:P-=o.width();break;case G3:P-=o.width()/2}switch(Nt(n.anchor,Nu)){case Ir:R-=o.height();break;case G3:R-=o.height()/2}for(P=Math.round(P),R=Math.round(R),o.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)A=t[S],A.x+=b[S]+=P,A.y+=x[S]+=R,o.union(A.mark.bounds.union(A.bounds.translate(b[S],x[S]))),r&&e.dirty(A);return o}function RDe(e,t,n){var r=MDe(t),i=r.marks,o=n.bounds===_D?DDe:ODe,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,f,d,h,p,g,y;const m=Rne(e,i,n);m.empty()&&m.set(0,0,0,0),r.rowheaders&&(g=Nt(n.headerBand,Nu,null),c=ax(e,r.rowheaders,i,a,l,-Nt(s,"rowHeader"),Fj,0,o,"x1",0,a,1,g)),r.colheaders&&(g=Nt(n.headerBand,Ou,null),f=ax(e,r.colheaders,i,a,a,-Nt(s,"columnHeader"),Fj,1,o,"y1",0,1,a,g)),r.rowfooters&&(g=Nt(n.footerBand,Nu,null),d=ax(e,r.rowfooters,i,a,l,Nt(s,"rowFooter"),Pj,0,o,"x2",a-1,a,1,g)),r.colfooters&&(g=Nt(n.footerBand,Ou,null),h=ax(e,r.colfooters,i,a,a,Nt(s,"columnFooter"),Pj,1,o,"y2",u-a,1,a,g)),r.rowtitle&&(p=Nt(n.titleAnchor,Nu),y=Nt(s,"rowTitle"),y=p===Ir?d+y:c-y,g=Nt(n.titleBand,Nu,.5),Dj(e,r.rowtitle,y,0,m,g)),r.coltitle&&(p=Nt(n.titleAnchor,Ou),y=Nt(s,"columnTitle"),y=p===Ir?h+y:f-y,g=Nt(n.titleBand,Ou,.5),Dj(e,r.coltitle,y,1,m,g))}function DDe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function ODe(e,t){return e.bounds[t]}function ax(e,t,n,r,i,o,s,a,l,u,c,f,d,h){var p=n.length,g=0,y=0,m,v,b,x,w,k,S,C,_;if(!p)return g;for(m=c;m<p;m+=f)n[m]&&(g=s(g,l(n[m],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=o,v=0,x=t.length;v<x;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(m=c,v=0,x=t.length;v<x;++v,m+=f){for(k=t[v],w=k.mark.bounds,b=m;b>=0&&(S=n[b])==null;b-=d);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),_=g):(C=g,_=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),w.union(k.bounds.translate(C-(k.x||0),_-(k.y||0))),k.x=C,k.y=_,e.dirty(k),y=s(y,w[u])}return y}function Dj(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function NDe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function IDe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function LDe(e,t,n,r,i,o,s){const a=NDe(n,t),l=IDe(e,a("offset",0)),u=a("anchor",xD),c=u===Ir?1:u===G3?.5:0,f={align:Y3,bounds:a("bounds",_D),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case ls:f.anchor={x:Math.floor(r.x1)-l,column:Ir,y:c*(s||r.height()+2*r.y1),row:u};break;case ds:f.anchor={x:Math.ceil(r.x2)+l,y:c*(s||r.height()+2*r.y1),row:u};break;case yg:f.anchor={y:Math.floor(i.y1)-l,row:Ir,x:c*(o||i.width()+2*i.x1),column:u};break;case gc:f.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case dDe:f.anchor={x:l,y:l};break;case hDe:f.anchor={x:o-l,y:l,column:Ir};break;case pDe:f.anchor={x:l,y:s-l,row:Ir};break;case gDe:f.anchor={x:o-l,y:s-l,column:Ir,row:Ir};break}return f}function zDe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),BDe(e,n,n.items[0].items[0]),o=jDe(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===wDe&&UDe(n.items[0].items[0].items[0].items),i!==CD&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,Vl(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function jDe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function BDe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&Km(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,c=r-s.y;switch(s.orient){case ls:i+=Math.ceil(s.bounds.width())+l;break;case ds:case gc:break;default:o+=s.bounds.height()+l}switch((i||o)&&Km(e,n,i,o),s.orient){case ls:c+=mh(t,n,s,a,1,1);break;case ds:u+=mh(t,n,s,Ir,0,0)+l,c+=mh(t,n,s,a,1,1);break;case gc:u+=mh(t,n,s,a,0,0),c+=mh(t,n,s,Ir,-1,0,1)+l;break;default:u+=mh(t,n,s,a,0,0)}(u||c)&&Km(e,s,u,c),(u=Math.round(s.bounds.x1-r))<0&&(Km(e,n,-u,0),Km(e,s,-u,0))}}function mh(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,f=l&&o?c:0,d=l&&o?0:c,h=i<=0?0:lD(n);return Math.round(r===xD?f:r===Ir?d-h:.5*(c-h))}function Km(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function UDe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function VDe(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===ls||a===ds?r:n,p=0,g=0,y=0,m=0,v=0,b;if(s!==l_?a===ls?(p=i.y2,h=i.y1):a===ds?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===ls&&(p=r,h=0),b=l===xD?p:l===Ir?h:(p+h)/2,d&&d.text){switch(a){case yg:case gc:v=f.bounds.height()+c;break;case ls:m=f.bounds.width()+c;break;case ds:m=-f.bounds.width()-c;break}hr.clear().union(d.bounds),hr.translate(m-(d.x||0),v-(d.y||0)),tp(d,"x",m)|tp(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(hr),d.mark.bounds.clear().union(hr),e.dirty(d)),hr.clear().union(d.bounds)}else hr.clear();switch(hr.union(f.bounds),a){case yg:g=b,y=i.y1-hr.height()-u;break;case ls:g=i.x1-hr.width()-u,y=b;break;case ds:g=i.x2+hr.width()+u,y=b;break;case gc:g=b,y=i.y2+u;break;default:g=o.x,y=o.y}return tp(o,"x",g)|tp(o,"y",y)&&(hr.translate(g,y),e.dirty(o),o.bounds.clear().union(hr),t.bounds.clear().union(hr),e.dirty(o)),o.bounds}function Dne(e){V.call(this,null,e)}ne(Dne,V,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&RDe(n,r,e.layout),HDe(n,r,e)}),WDe(e.mark.group)?t.reflow():t}});function WDe(e){return e&&e.mark.role!=="legend-entry"}function HDe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new gn().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case wD:h=$De(f)?a:l,h.union(TDe(e,f,i,o));break;case SD:c=f;break;case kD:u.push(zDe(e,f));break;case vDe:case bDe:case bne:case xne:case wne:case Sne:case kne:case Cne:a.union(f.bounds),l.union(f.bounds);break;default:s.union(f.bounds)}if(u.length){const y={};u.forEach(m=>{d=m.orient||ds,d!==CD&&(y[d]||(y[d]=[])).push(m)});for(const m in y){const v=y[m];Rne(e,v,LDe(v,m,n.legends,a,l,i,o))}u.forEach(m=>{const v=m.bounds;if(v.equals(m._bounds)||(m.bounds=m._bounds,e.dirty(m),m.bounds=v,e.dirty(m)),n.autosize&&(n.autosize.type===_ne||n.autosize.type===Ene||n.autosize.type===$ne))switch(m.orient){case ls:case ds:s.add(v.x1,0).add(v.x2,0);break;case yg:case gc:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(l),c&&s.union(VDe(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),qDe(e,t,s,n)}function qDe(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===xDe){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===CD?(u=0,f=0,l=s,c=a):o===_ne?(l=Math.max(0,s-u-d),c=Math.max(0,a-f-h)):o===Ene?(l=Math.max(0,s-u-d),a=c+f+h):o===$ne?(s=l+u+d,c=Math.max(0,a-f-h)):o===SDe&&(s=l+u+d,a=c+f+h),e._resizeView(s,a,l,c,[u,f],i.resize)}const GDe=Object.freeze(Object.defineProperty({__proto__:null,bound:Ane,identifier:ED,mark:Tne,overlap:Mne,render:Pne,viewlayout:Dne},Symbol.toStringTag,{value:"Module"}));function One(e){V.call(this,null,e)}ne(One,V,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=W6(o,s,e.minstep),l=e.format||lte(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?ate(o,e.values,a):H6(o,a);return i&&(r.rem=i),i=u.map((c,f)=>at({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(at({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Nne(e){V.call(this,null,e)}function YDe(){return at({})}function XDe(e){const t=Zg().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ne(Nne,V,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||YDe,o=e.key||ve,s=this.value;return G(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&q("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=XDe(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function Ine(e){V.call(this,null,e)}ne(Ine,V,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(G(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||ou,l=i.enter||ou,u=i.exit||ou,c=(o&&!s?i[o]:a)||ou;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),a(f,e)}),n.modifies(l.output),n.modifies(a.output),c!==ou&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==ou&&(t.visit(t.REM,f=>{u(f,e)}),n.modifies(u.output)),s||c!==ou){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=l(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function Lne(e){V.call(this,[],e)}ne(Lne,V,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||v2,s=e.scale,a=+e.limit,l=W6(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===v2,c=e.format||dte(n,s,l,o,e.formatSpecifier,e.formatType,u),f=e.values||fte(s,l),d,h,p,g,y;return i&&(r.rem=i),o===v2?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),y=!0):i=f,Ne(p=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),g=i.reduce((m,v)=>Math.max(m,p(v,e)),0)):p=Tr(g=p||8),i=i.map((m,v)=>at({index:v,label:c(m,v,i),value:m,offset:g,size:p(m,e)})),y&&(y=f[i.length],i.push(at({index:i.length,label:`…${f.length-i.length} entries`,value:y,offset:g,size:p(y,e)})))):o===SPe?(d=s.domain(),h=ite(s,d[0],qe(d)),f.length<3&&!e.values&&d[0]!==qe(d)&&(f=[d[0],qe(d)]),i=f.map((m,v)=>at({index:v,label:c(m,v,f),value:m,perc:h(m)}))):(p=f.length-1,h=RPe(s),i=f.map((m,v)=>at({index:v,label:c(m,v,f),value:m,perc:v?h(m):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const KDe=e=>e.source.x,QDe=e=>e.source.y,ZDe=e=>e.target.x,JDe=e=>e.target.y;function $D(e){V.call(this,{},e)}$D.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ne($D,V,{transform(e,t){var n=e.sourceX||KDe,r=e.sourceY||QDe,i=e.targetX||ZDe,o=e.targetY||JDe,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=Oj.get(l+"-"+a)||Oj.get(l);return u||q("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const zne=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,eOe=(e,t,n,r)=>zne(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),jne=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},tOe=(e,t,n,r)=>jne(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Bne=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},nOe=(e,t,n,r)=>Bne(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),rOe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,iOe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,oOe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},sOe=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},aOe=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},lOe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},Oj=Zg({line:zne,"line-radial":eOe,arc:jne,"arc-radial":tOe,curve:Bne,"curve-radial":nOe,"orthogonal-horizontal":rOe,"orthogonal-vertical":iOe,"orthogonal-radial":oOe,"diagonal-horizontal":sOe,"diagonal-vertical":aOe,"diagonal-radial":lOe});function AD(e){V.call(this,null,e)}AD.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ne(AD,V,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Xg,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,f=s,d=(a-s)/XQ(u),h=zi(c),p,g,y;for(e.sort&&h.sort((m,v)=>u[m]-u[v]),p=0;p<c;++p)y=u[h[p]],g=l[h[p]],g[r]=f,g[i]=f+=y*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const uOe=5;function cOe(e){const t=e.type;return!e.bins&&(t===fg||t===wv||t===Sv)}function Une(e){return B6(e)&&e!==ba}const fOe=ws(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Vne(e){V.call(this,null,e),this.modified(!0)}ne(Vne,V,{transform(e,t){var n=t.dataflow,r=this.value,i=dOe(e);(!r||i!==r.type)&&(this.value=r=et(i)());for(i in e)if(!fOe[i]){if(i==="padding"&&Une(r.type))continue;Ne(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return vOe(r,e,yOe(r,e,pOe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function dOe(e){var t=e.type,n="",r;return t===ba?ba+"-"+fg:(hOe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?ba+"-":r===3?om+"-":""),(n+t||fg).toLowerCase())}function hOe(e){const t=e.type;return B6(t)&&t!==fd&&t!==dd&&(e.scheme||e.range&&e.range.length&&e.range.every(le))}function pOe(e,t,n){const r=gOe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&cOe(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return Une(o)&&t.padding&&i[0]!==qe(i)&&(i=mOe(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Wne(o,i,n)),o===I6&&e.unknown(t.domainImplicit?A3:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&W6(e,t.nice)||null),i.length}function gOe(e,t,n){return t?(e.domain(Wne(e.type,t,n)),t.length):-1}function mOe(e,t,n,r,i,o){var s=Math.abs(qe(n)-n[0]),a=s/(s-2*r),l=e===Dl?iR(t,null,a):e===Sv?Lw(t,null,a,.5):e===wv?Lw(t,null,a,i||1):e===GC?oR(t,null,a,o||1):rR(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function Wne(e,t,n){if(Jee(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+te(t))}return t}function yOe(e,t,n){let r=t.bins;if(r&&!G(r)){const i=e.domain(),o=i[0],s=qe(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||q("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=zi(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===L6&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function vOe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=bOe(r,t,n);else if(t.scheme&&(o=xOe(r,t,n),Ne(o))){if(e.interpolator)return e.interpolator(o);q(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&ete(r))return e.interpolator(KC(X3(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(U6(t.interpolate,t.interpolateGamma)):Ne(e.round)?e.round(i):Ne(e.rangeRound)&&e.interpolate(i?im:Mc),o&&e.range(X3(o,t.reverse))}function bOe(e,t,n){e!==Gee&&e!==D3&&q("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===D3?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*N6(n,i,r)]}function xOe(e,t,n){var r=t.schemeExtent,i,o;return G(t.scheme)?o=KC(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=V6(i),o||q(`Unrecognized scheme name: ${t.scheme}`)),n=e===XC?n+1:e===L6?n-1:e===dg||e===YC?+t.schemeCount||uOe:n,ete(e)?Nj(o,r,t.reverse):Ne(o)?rte(Nj(o,r),n):e===I6?o:o.slice(0,n)}function Nj(e,t,n){return Ne(e)&&(t||n)?nte(e,X3(t||[0,1],n)):e}function X3(e,t){return t?e.slice().reverse():e}function Hne(e){V.call(this,null,e)}ne(Hne,V,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ud(e.sort)),this.modified(n),t}});const Ij="zero",qne="center",Gne="normalize",Yne=["y0","y1"];function TD(e){V.call(this,null,e)}TD.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Ij,values:[Ij,qne,Gne]},{name:"as",type:"string",array:!0,length:2,default:Yne}]};ne(TD,V,{transform(e,t){var n=e.as||Yne,r=n[0],i=n[1],o=Ud(e.sort),s=e.field||Xg,a=e.offset===qne?wOe:e.offset===Gne?SOe:kOe,l,u,c,f;for(l=COe(t.source,e.groupby,o,s),u=0,c=l.length,f=l.max;u<c;++u)a(l[u],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function wOe(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function SOe(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=s,c[i]=s=o*(u+=Math.abs(n(c)))}function kOe(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=s,c[i]=s+=u):(c[r]=o,c[i]=o+=u)}function COe(e,t,n,r){var i=[],o=g=>g(c),s,a,l,u,c,f,d,h,p;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,u=i.length;f<u;++f){for(d=i[f],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const _Oe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:One,datajoin:Nne,encode:Ine,legendentries:Lne,linkpath:$D,pie:AD,scale:Vne,sortitems:Hne,stack:TD},Symbol.toStringTag,{value:"Module"}));var xe=1e-6,mS=1e-12,Le=Math.PI,en=Le/2,yS=Le/4,Kr=Le*2,rn=180/Le,Ie=Le/180,He=Math.abs,am=Math.atan,Io=Math.atan2,Se=Math.cos,lx=Math.ceil,Xne=Math.exp,K3=Math.hypot,vS=Math.log,kA=Math.pow,be=Math.sin,_o=Math.sign||function(e){return e>0?1:e<0?-1:0},Qr=Math.sqrt,MD=Math.tan;function Kne(e){return e>1?0:e<-1?Le:Math.acos(e)}function Si(e){return e>1?en:e<-1?-en:Math.asin(e)}function Qn(){}function bS(e,t){e&&zj.hasOwnProperty(e.type)&&zj[e.type](e,t)}var Lj={Feature:function(e,t){bS(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)bS(n[r].geometry,t)}},zj={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Q3(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Q3(n[r],t,0)},Polygon:function(e,t){jj(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)jj(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)bS(n[r],t)}};function Q3(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function jj(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Q3(e[n],t,1);t.polygonEnd()}function rl(e,t){e&&Lj.hasOwnProperty(e.type)?Lj[e.type](e,t):bS(e,t)}var xS=new Yr,wS=new Yr,Qne,Zne,Z3,J3,e4,Ca={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){xS=new Yr,Ca.lineStart=EOe,Ca.lineEnd=$Oe},polygonEnd:function(){var e=+xS;wS.add(e<0?Kr+e:e),this.lineStart=this.lineEnd=this.point=Qn},sphere:function(){wS.add(Kr)}};function EOe(){Ca.point=AOe}function $Oe(){Jne(Qne,Zne)}function AOe(e,t){Ca.point=Jne,Qne=e,Zne=t,e*=Ie,t*=Ie,Z3=e,J3=Se(t=t/2+yS),e4=be(t)}function Jne(e,t){e*=Ie,t*=Ie,t=t/2+yS;var n=e-Z3,r=n>=0?1:-1,i=r*n,o=Se(t),s=be(t),a=e4*s,l=J3*o+a*Se(i),u=a*r*be(i);xS.add(Io(u,l)),Z3=e,J3=o,e4=s}function TOe(e){return wS=new Yr,rl(e,Ca),wS*2}function SS(e){return[Io(e[1],e[0]),Si(e[2])]}function pd(e){var t=e[0],n=e[1],r=Se(n);return[r*Se(t),r*be(t),be(n)]}function ux(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function CA(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function cx(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kS(e){var t=Qr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var jt,ai,Qt,Ri,df,ere,tre,bp,wy,pu,Ol,Ja={point:t4,lineStart:Bj,lineEnd:Uj,polygonStart:function(){Ja.point=rre,Ja.lineStart=MOe,Ja.lineEnd=FOe,wy=new Yr,Ca.polygonStart()},polygonEnd:function(){Ca.polygonEnd(),Ja.point=t4,Ja.lineStart=Bj,Ja.lineEnd=Uj,xS<0?(jt=-(Qt=180),ai=-(Ri=90)):wy>xe?Ri=90:wy<-xe&&(ai=-90),Ol[0]=jt,Ol[1]=Qt},sphere:function(){jt=-(Qt=180),ai=-(Ri=90)}};function t4(e,t){pu.push(Ol=[jt=e,Qt=e]),t<ai&&(ai=t),t>Ri&&(Ri=t)}function nre(e,t){var n=pd([e*Ie,t*Ie]);if(bp){var r=vg(bp,n),i=[r[1],-r[0],0],o=vg(i,r);kS(o),o=SS(o);var s=e-df,a=s>0?1:-1,l=o[0]*rn*a,u,c=He(s)>180;c^(a*df<l&&l<a*e)?(u=o[1]*rn,u>Ri&&(Ri=u)):(l=(l+360)%360-180,c^(a*df<l&&l<a*e)?(u=-o[1]*rn,u<ai&&(ai=u)):(t<ai&&(ai=t),t>Ri&&(Ri=t))),c?e<df?Pi(jt,e)>Pi(jt,Qt)&&(Qt=e):Pi(e,Qt)>Pi(jt,Qt)&&(jt=e):Qt>=jt?(e<jt&&(jt=e),e>Qt&&(Qt=e)):e>df?Pi(jt,e)>Pi(jt,Qt)&&(Qt=e):Pi(e,Qt)>Pi(jt,Qt)&&(jt=e)}else pu.push(Ol=[jt=e,Qt=e]);t<ai&&(ai=t),t>Ri&&(Ri=t),bp=n,df=e}function Bj(){Ja.point=nre}function Uj(){Ol[0]=jt,Ol[1]=Qt,Ja.point=t4,bp=null}function rre(e,t){if(bp){var n=e-df;wy.add(He(n)>180?n+(n>0?360:-360):n)}else ere=e,tre=t;Ca.point(e,t),nre(e,t)}function MOe(){Ca.lineStart()}function FOe(){rre(ere,tre),Ca.lineEnd(),He(wy)>xe&&(jt=-(Qt=180)),Ol[0]=jt,Ol[1]=Qt,bp=null}function Pi(e,t){return(t-=e)<0?t+360:t}function POe(e,t){return e[0]-t[0]}function Vj(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ROe(e){var t,n,r,i,o,s,a;if(Ri=Qt=-(jt=ai=1/0),pu=[],rl(e,Ja),n=pu.length){for(pu.sort(POe),t=1,r=pu[0],o=[r];t<n;++t)i=pu[t],Vj(r,i[0])||Vj(r,i[1])?(Pi(r[0],i[1])>Pi(r[0],r[1])&&(r[1]=i[1]),Pi(i[0],r[1])>Pi(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Pi(r[1],i[0]))>s&&(s=a,jt=i[0],Qt=r[1])}return pu=Ol=null,jt===1/0||ai===1/0?[[NaN,NaN],[NaN,NaN]]:[[jt,ai],[Qt,Ri]]}var D0,CS,_S,ES,$S,AS,TS,MS,n4,r4,i4,ire,ore,zr,jr,Br,hs={sphere:Qn,point:FD,lineStart:Wj,lineEnd:Hj,polygonStart:function(){hs.lineStart=NOe,hs.lineEnd=IOe},polygonEnd:function(){hs.lineStart=Wj,hs.lineEnd=Hj}};function FD(e,t){e*=Ie,t*=Ie;var n=Se(t);Dv(n*Se(e),n*be(e),be(t))}function Dv(e,t,n){++D0,_S+=(e-_S)/D0,ES+=(t-ES)/D0,$S+=(n-$S)/D0}function Wj(){hs.point=DOe}function DOe(e,t){e*=Ie,t*=Ie;var n=Se(t);zr=n*Se(e),jr=n*be(e),Br=be(t),hs.point=OOe,Dv(zr,jr,Br)}function OOe(e,t){e*=Ie,t*=Ie;var n=Se(t),r=n*Se(e),i=n*be(e),o=be(t),s=Io(Qr((s=jr*o-Br*i)*s+(s=Br*r-zr*o)*s+(s=zr*i-jr*r)*s),zr*r+jr*i+Br*o);CS+=s,AS+=s*(zr+(zr=r)),TS+=s*(jr+(jr=i)),MS+=s*(Br+(Br=o)),Dv(zr,jr,Br)}function Hj(){hs.point=FD}function NOe(){hs.point=LOe}function IOe(){sre(ire,ore),hs.point=FD}function LOe(e,t){ire=e,ore=t,e*=Ie,t*=Ie,hs.point=sre;var n=Se(t);zr=n*Se(e),jr=n*be(e),Br=be(t),Dv(zr,jr,Br)}function sre(e,t){e*=Ie,t*=Ie;var n=Se(t),r=n*Se(e),i=n*be(e),o=be(t),s=jr*o-Br*i,a=Br*r-zr*o,l=zr*i-jr*r,u=K3(s,a,l),c=Si(u),f=u&&-c/u;n4.add(f*s),r4.add(f*a),i4.add(f*l),CS+=c,AS+=c*(zr+(zr=r)),TS+=c*(jr+(jr=i)),MS+=c*(Br+(Br=o)),Dv(zr,jr,Br)}function zOe(e){D0=CS=_S=ES=$S=AS=TS=MS=0,n4=new Yr,r4=new Yr,i4=new Yr,rl(e,hs);var t=+n4,n=+r4,r=+i4,i=K3(t,n,r);return i<mS&&(t=AS,n=TS,r=MS,CS<xe&&(t=_S,n=ES,r=$S),i=K3(t,n,r),i<mS)?[NaN,NaN]:[Io(n,t)*rn,Si(r/i)*rn]}function o4(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function s4(e,t){return He(e)>Le&&(e-=Math.round(e/Kr)*Kr),[e,t]}s4.invert=s4;function are(e,t,n){return(e%=Kr)?t||n?o4(Gj(e),Yj(t,n)):Gj(e):t||n?Yj(t,n):s4}function qj(e){return function(t,n){return t+=e,He(t)>Le&&(t-=Math.round(t/Kr)*Kr),[t,n]}}function Gj(e){var t=qj(e);return t.invert=qj(-e),t}function Yj(e,t){var n=Se(e),r=be(e),i=Se(t),o=be(t);function s(a,l){var u=Se(l),c=Se(a)*u,f=be(a)*u,d=be(l),h=d*n+c*r;return[Io(f*i-h*o,c*n-d*r),Si(h*i+f*o)]}return s.invert=function(a,l){var u=Se(l),c=Se(a)*u,f=be(a)*u,d=be(l),h=d*i-f*o;return[Io(f*i+d*o,c*n+h*r),Si(h*n-c*r)]},s}function jOe(e){e=are(e[0]*Ie,e[1]*Ie,e.length>2?e[2]*Ie:0);function t(n){return n=e(n[0]*Ie,n[1]*Ie),n[0]*=rn,n[1]*=rn,n}return t.invert=function(n){return n=e.invert(n[0]*Ie,n[1]*Ie),n[0]*=rn,n[1]*=rn,n},t}function BOe(e,t,n,r,i,o){if(n){var s=Se(t),a=be(t),l=r*n;i==null?(i=t+r*Kr,o=t-l/2):(i=Xj(s,i),o=Xj(s,o),(r>0?i<o:i>o)&&(i+=r*Kr));for(var u,c=i;r>0?c>o:c<o;c-=l)u=SS([s,-a*Se(c),-a*be(c)]),e.point(u[0],u[1])}}function Xj(e,t){t=pd(t),t[0]-=e,kS(t);var n=Kne(-t[1]);return((-t[2]<0?-n:n)+Kr-xe)%Kr}function lre(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Qn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function $2(e,t){return He(e[0]-t[0])<xe&&He(e[1]-t[1])<xe}function fx(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ure(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,y=p[0],m=p[g],v;if($2(y,m)){if(!y[2]&&!m[2]){for(i.lineStart(),a=0;a<g;++a)i.point((y=p[a])[0],y[1]);i.lineEnd();return}m[0]+=2*xe}o.push(v=new fx(y,p,null,!0)),s.push(v.o=new fx(y,null,v,!1)),o.push(v=new fx(m,p,null,!1)),s.push(v.o=new fx(m,null,v,!0))}}),!!o.length){for(s.sort(t),Kj(o),Kj(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Kj(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function _A(e){return He(e[0])<=Le?e[0]:_o(e[0])*((He(e[0])+Le)%Kr-Le)}function UOe(e,t){var n=_A(t),r=t[1],i=be(r),o=[be(n),-Se(n),0],s=0,a=0,l=new Yr;i===1?r=en+xe:i===-1&&(r=-en-xe);for(var u=0,c=e.length;u<c;++u)if(d=(f=e[u]).length)for(var f,d,h=f[d-1],p=_A(h),g=h[1]/2+yS,y=be(g),m=Se(g),v=0;v<d;++v,p=x,y=k,m=S,h=b){var b=f[v],x=_A(b),w=b[1]/2+yS,k=be(w),S=Se(w),C=x-p,_=C>=0?1:-1,$=_*C,A=$>Le,O=y*k;if(l.add(Io(O*_*be($),m*S+O*Se($))),s+=A?C+_*Kr:C,A^p>=n^x>=n){var M=vg(pd(h),pd(b));kS(M);var P=vg(o,M);kS(P);var R=(A^C>=0?-1:1)*Si(P[2]);(r>R||r===R&&(M[0]||M[1]))&&(a+=A^C>=0?1:-1)}}return(s<-xe||s<xe&&l<-mS)^a&1}function cre(e,t,n,r){return function(i){var o=t(i),s=lre(),a=t(s),l=!1,u,c,f,d={point:h,lineStart:g,lineEnd:y,polygonStart:function(){d.point=m,d.lineStart=v,d.lineEnd=b,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=y,c=YQ(c);var x=UOe(u,r);c.length?(l||(i.polygonStart(),l=!0),ure(c,WOe,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,w){e(x,w)&&i.point(x,w)}function p(x,w){o.point(x,w)}function g(){d.point=p,o.lineStart()}function y(){d.point=h,o.lineEnd()}function m(x,w){f.push([x,w]),a.point(x,w)}function v(){a.lineStart(),f=[]}function b(){m(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),w=s.result(),k,S=w.length,C,_,$;if(f.pop(),u.push(f),f=null,!!S){if(x&1){if(_=w[0],(C=_.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),k=0;k<C;++k)i.point(($=_[k])[0],$[1]);i.lineEnd()}return}S>1&&x&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(VOe))}}return d}}function VOe(e){return e.length>1}function WOe(e,t){return((e=e.x)[0]<0?e[1]-en-xe:en-e[1])-((t=t.x)[0]<0?t[1]-en-xe:en-t[1])}const Qj=cre(function(){return!0},HOe,GOe,[-Le,-en]);function HOe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Le:-Le,l=He(o-t);He(l-Le)<xe?(e.point(t,n=(n+s)/2>0?en:-en),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=Le&&(He(t-r)<xe&&(t-=r*xe),He(o-a)<xe&&(o-=a*xe),n=qOe(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function qOe(e,t,n,r){var i,o,s=be(e-n);return He(s)>xe?am((be(t)*(o=Se(r))*be(n)-be(r)*(i=Se(t))*be(e))/(i*o*s)):(t+r)/2}function GOe(e,t,n,r){var i;if(e==null)i=n*en,r.point(-Le,i),r.point(0,i),r.point(Le,i),r.point(Le,0),r.point(Le,-i),r.point(0,-i),r.point(-Le,-i),r.point(-Le,0),r.point(-Le,i);else if(He(e[0]-t[0])>xe){var o=e[0]<t[0]?Le:-Le;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function YOe(e){var t=Se(e),n=2*Ie,r=t>0,i=He(t)>xe;function o(c,f,d,h){BOe(h,e,n,d,c,f)}function s(c,f){return Se(c)*Se(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(y,m){var v=[y,m],b,x=s(y,m),w=r?x?0:u(y,m):x?u(y+(y<0?Le:-Le),m):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=l(f,v),(!b||$2(f,b)||$2(v,b))&&(v[2]=1)),x!==h)g=0,x?(c.lineStart(),b=l(v,f),c.point(b[0],b[1])):(b=l(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var k;!(w&d)&&(k=l(v,f,!0))&&(g=0,r?(c.lineStart(),c.point(k[0][0],k[0][1]),c.point(k[1][0],k[1][1]),c.lineEnd()):(c.point(k[1][0],k[1][1]),c.lineEnd(),c.lineStart(),c.point(k[0][0],k[0][1],3)))}x&&(!f||!$2(f,v))&&c.point(v[0],v[1]),f=v,h=x,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(c,f,d){var h=pd(c),p=pd(f),g=[1,0,0],y=vg(h,p),m=ux(y,y),v=y[0],b=m-v*v;if(!b)return!d&&c;var x=t*m/b,w=-t*v/b,k=vg(g,y),S=cx(g,x),C=cx(y,w);CA(S,C);var _=k,$=ux(S,_),A=ux(_,_),O=$*$-A*(ux(S,S)-1);if(!(O<0)){var M=Qr(O),P=cx(_,(-$-M)/A);if(CA(P,S),P=SS(P),!d)return P;var R=c[0],D=f[0],I=c[1],N=f[1],B;D<R&&(B=R,R=D,D=B);var Y=D-R,W=He(Y-Le)<xe,oe=W||Y<xe;if(!W&&N<I&&(B=I,I=N,N=B),oe?W?I+N>0^P[1]<(He(P[0]-R)<xe?I:N):I<=P[1]&&P[1]<=N:Y>Le^(R<=P[0]&&P[0]<=D)){var re=cx(_,(-$+M)/A);return CA(re,S),[P,SS(re)]}}}function u(c,f){var d=r?e:Le-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return cre(s,a,o,r?[0,-e]:[-Le,e-Le])}function XOe(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],c=0,f=1,d=l-s,h=u-a,p;if(p=n-s,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=o-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var O0=1e9,dx=-O0;function fre(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function o(u,c,f,d){var h=0,p=0;if(u==null||(h=s(u,f))!==(p=s(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function s(u,c){return He(u[0]-e)<xe?c>0?0:3:He(u[0]-n)<xe?c>0?2:1:He(u[1]-t)<xe?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=s(u,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=lre(),d,h,p,g,y,m,v,b,x,w,k,S={point:C,lineStart:O,lineEnd:M,polygonStart:$,polygonEnd:A};function C(R,D){i(R,D)&&c.point(R,D)}function _(){for(var R=0,D=0,I=h.length;D<I;++D)for(var N=h[D],B=1,Y=N.length,W=N[0],oe,re,we=W[0],De=W[1];B<Y;++B)oe=we,re=De,W=N[B],we=W[0],De=W[1],re<=r?De>r&&(we-oe)*(r-re)>(De-re)*(e-oe)&&++R:De<=r&&(we-oe)*(r-re)<(De-re)*(e-oe)&&--R;return R}function $(){c=f,d=[],h=[],k=!0}function A(){var R=_(),D=k&&R,I=(d=YQ(d)).length;(D||I)&&(u.polygonStart(),D&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),I&&ure(d,a,R,o,u),u.polygonEnd()),c=u,d=h=p=null}function O(){S.point=P,h&&h.push(p=[]),w=!0,x=!1,v=b=NaN}function M(){d&&(P(g,y),m&&x&&f.rejoin(),d.push(f.result())),S.point=C,x&&c.lineEnd()}function P(R,D){var I=i(R,D);if(h&&p.push([R,D]),w)g=R,y=D,m=I,w=!1,I&&(c.lineStart(),c.point(R,D));else if(I&&x)c.point(R,D);else{var N=[v=Math.max(dx,Math.min(O0,v)),b=Math.max(dx,Math.min(O0,b))],B=[R=Math.max(dx,Math.min(O0,R)),D=Math.max(dx,Math.min(O0,D))];XOe(N,B,e,t,n,r)?(x||(c.lineStart(),c.point(N[0],N[1])),c.point(B[0],B[1]),I||c.lineEnd(),k=!1):I&&(c.lineStart(),c.point(R,D),k=!1)}v=R,b=D,x=I}return S}}function Zj(e,t,n){var r=zi(e,t-xe,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function Jj(e,t,n){var r=zi(e,t-xe,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function KOe(){var e,t,n,r,i,o,s,a,l=10,u=l,c=90,f=360,d,h,p,g,y=2.5;function m(){return{type:"MultiLineString",coordinates:v()}}function v(){return zi(lx(r/c)*c,n,c).map(p).concat(zi(lx(a/f)*f,s,f).map(g)).concat(zi(lx(t/l)*l,e,l).filter(function(b){return He(b%c)>xe}).map(d)).concat(zi(lx(o/u)*u,i,u).filter(function(b){return He(b%f)>xe}).map(h))}return m.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},m.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(s).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},m.extent=function(b){return arguments.length?m.extentMajor(b).extentMinor(b):m.extentMinor()},m.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],s=+b[1][1],r>n&&(b=r,r=n,n=b),a>s&&(b=a,a=s,s=b),m.precision(y)):[[r,a],[n,s]]},m.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],o=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),o>i&&(b=o,o=i,i=b),m.precision(y)):[[t,o],[e,i]]},m.step=function(b){return arguments.length?m.stepMajor(b).stepMinor(b):m.stepMinor()},m.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],m):[c,f]},m.stepMinor=function(b){return arguments.length?(l=+b[0],u=+b[1],m):[l,u]},m.precision=function(b){return arguments.length?(y=+b,d=Zj(o,i,90),h=Jj(t,e,y),p=Zj(a,s,90),g=Jj(r,n,y),m):y},m.extentMajor([[-180,-90+xe],[180,90-xe]]).extentMinor([[-180,-80-xe],[180,80+xe]])}const b1=e=>e;var EA=new Yr,a4=new Yr,dre,hre,l4,u4,il={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){il.lineStart=QOe,il.lineEnd=JOe},polygonEnd:function(){il.lineStart=il.lineEnd=il.point=Qn,EA.add(He(a4)),a4=new Yr},result:function(){var e=EA/2;return EA=new Yr,e}};function QOe(){il.point=ZOe}function ZOe(e,t){il.point=pre,dre=l4=e,hre=u4=t}function pre(e,t){a4.add(u4*e-l4*t),l4=e,u4=t}function JOe(){pre(dre,hre)}var bg=1/0,FS=bg,x1=-bg,PS=x1,RS={point:e8e,lineStart:Qn,lineEnd:Qn,polygonStart:Qn,polygonEnd:Qn,result:function(){var e=[[bg,FS],[x1,PS]];return x1=PS=-(FS=bg=1/0),e}};function e8e(e,t){e<bg&&(bg=e),e>x1&&(x1=e),t<FS&&(FS=t),t>PS&&(PS=t)}var c4=0,f4=0,N0=0,DS=0,OS=0,np=0,d4=0,h4=0,I0=0,gre,mre,oa,sa,xo={point:gd,lineStart:eB,lineEnd:tB,polygonStart:function(){xo.lineStart=r8e,xo.lineEnd=i8e},polygonEnd:function(){xo.point=gd,xo.lineStart=eB,xo.lineEnd=tB},result:function(){var e=I0?[d4/I0,h4/I0]:np?[DS/np,OS/np]:N0?[c4/N0,f4/N0]:[NaN,NaN];return c4=f4=N0=DS=OS=np=d4=h4=I0=0,e}};function gd(e,t){c4+=e,f4+=t,++N0}function eB(){xo.point=t8e}function t8e(e,t){xo.point=n8e,gd(oa=e,sa=t)}function n8e(e,t){var n=e-oa,r=t-sa,i=Qr(n*n+r*r);DS+=i*(oa+e)/2,OS+=i*(sa+t)/2,np+=i,gd(oa=e,sa=t)}function tB(){xo.point=gd}function r8e(){xo.point=o8e}function i8e(){yre(gre,mre)}function o8e(e,t){xo.point=yre,gd(gre=oa=e,mre=sa=t)}function yre(e,t){var n=e-oa,r=t-sa,i=Qr(n*n+r*r);DS+=i*(oa+e)/2,OS+=i*(sa+t)/2,np+=i,i=sa*e-oa*t,d4+=i*(oa+e),h4+=i*(sa+t),I0+=i*3,gd(oa=e,sa=t)}function vre(e){this._context=e}vre.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Kr);break}}},result:Qn};var p4=new Yr,$A,bre,xre,L0,z0,w1={point:Qn,lineStart:function(){w1.point=s8e},lineEnd:function(){$A&&wre(bre,xre),w1.point=Qn},polygonStart:function(){$A=!0},polygonEnd:function(){$A=null},result:function(){var e=+p4;return p4=new Yr,e}};function s8e(e,t){w1.point=wre,bre=L0=e,xre=z0=t}function wre(e,t){L0-=e,z0-=t,p4.add(Qr(L0*L0+z0*z0)),L0=e,z0=t}let nB,NS,rB,iB;class oB{constructor(t){this._append=t==null?Sre:a8e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==rB||this._append!==NS){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,rB=r,NS=this._append,iB=this._,this._=i}this._+=iB;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Sre(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function a8e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Sre;if(t!==nB){const n=10**t;nB=t,NS=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return NS}function kre(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),rl(a,i(o))),o.result()}return s.area=function(a){return rl(a,i(il)),il.result()},s.measure=function(a){return rl(a,i(w1)),w1.result()},s.bounds=function(a){return rl(a,i(RS)),RS.result()},s.centroid=function(a){return rl(a,i(xo)),xo.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,b1):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new oB(n)):new vre(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new oB(n)),s},s.projection(e).digits(n).context(t)}function u_(e){return function(t){var n=new g4;for(var r in e)n[r]=e[r];return n.stream=t,n}}function g4(){}g4.prototype={constructor:g4,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function PD(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),rl(n,e.stream(RS)),t(RS.result()),r!=null&&e.clipExtent(r),e}function c_(e,t,n){return PD(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function RD(e,t,n){return c_(e,[[0,0],t],n)}function DD(e,t,n){return PD(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function OD(e,t,n){return PD(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var sB=16,l8e=Se(30*Ie);function aB(e,t){return+t?c8e(e,t):u8e(e)}function u8e(e){return u_({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function c8e(e,t){function n(r,i,o,s,a,l,u,c,f,d,h,p,g,y){var m=u-r,v=c-i,b=m*m+v*v;if(b>4*t&&g--){var x=s+d,w=a+h,k=l+p,S=Qr(x*x+w*w+k*k),C=Si(k/=S),_=He(He(k)-1)<xe||He(o-f)<xe?(o+f)/2:Io(w,x),$=e(_,C),A=$[0],O=$[1],M=A-r,P=O-i,R=v*M-m*P;(R*R/b>t||He((m*M+v*P)/b-.5)>.3||s*d+a*h+l*p<l8e)&&(n(r,i,o,s,a,l,A,O,_,x/=S,w/=S,k,g,y),y.point(A,O),n(A,O,_,x,w,k,u,c,f,d,h,p,g,y))}}return function(r){var i,o,s,a,l,u,c,f,d,h,p,g,y={point:m,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),y.lineStart=w},polygonEnd:function(){r.polygonEnd(),y.lineStart=v}};function m(C,_){C=e(C,_),r.point(C[0],C[1])}function v(){f=NaN,y.point=b,r.lineStart()}function b(C,_){var $=pd([C,_]),A=e(C,_);n(f,d,c,h,p,g,f=A[0],d=A[1],c=C,h=$[0],p=$[1],g=$[2],sB,r),r.point(f,d)}function x(){y.point=m,r.lineEnd()}function w(){v(),y.point=k,y.lineEnd=S}function k(C,_){b(i=C,_),o=f,s=d,a=h,l=p,u=g,y.point=b}function S(){n(f,d,c,h,p,g,o,s,i,a,l,u,sB,r),y.lineEnd=x,x()}return y}}var f8e=u_({point:function(e,t){this.stream.point(e*Ie,t*Ie)}});function d8e(e){return u_({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function h8e(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function lB(e,t,n,r,i,o){if(!o)return h8e(e,t,n,r,i);var s=Se(o),a=be(o),l=s*e,u=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(g,y){return g*=r,y*=i,[l*g-u*y+t,n-u*g-l*y]}return p.invert=function(g,y){return[r*(c*g-f*y+d),i*(h-f*g-c*y)]},p}function Ra(e){return Cre(function(){return e})()}function Cre(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,c,f=0,d=1,h=1,p=null,g=Qj,y=null,m,v,b,x=b1,w=.5,k,S,C,_,$;function A(R){return C(R[0]*Ie,R[1]*Ie)}function O(R){return R=C.invert(R[0],R[1]),R&&[R[0]*rn,R[1]*rn]}A.stream=function(R){return _&&$===R?_:_=f8e(d8e(c)(g(k(x($=R)))))},A.preclip=function(R){return arguments.length?(g=R,p=void 0,P()):g},A.postclip=function(R){return arguments.length?(x=R,y=m=v=b=null,P()):x},A.clipAngle=function(R){return arguments.length?(g=+R?YOe(p=R*Ie):(p=null,Qj),P()):p*rn},A.clipExtent=function(R){return arguments.length?(x=R==null?(y=m=v=b=null,b1):fre(y=+R[0][0],m=+R[0][1],v=+R[1][0],b=+R[1][1]),P()):y==null?null:[[y,m],[v,b]]},A.scale=function(R){return arguments.length?(n=+R,M()):n},A.translate=function(R){return arguments.length?(r=+R[0],i=+R[1],M()):[r,i]},A.center=function(R){return arguments.length?(o=R[0]%360*Ie,s=R[1]%360*Ie,M()):[o*rn,s*rn]},A.rotate=function(R){return arguments.length?(a=R[0]%360*Ie,l=R[1]%360*Ie,u=R.length>2?R[2]%360*Ie:0,M()):[a*rn,l*rn,u*rn]},A.angle=function(R){return arguments.length?(f=R%360*Ie,M()):f*rn},A.reflectX=function(R){return arguments.length?(d=R?-1:1,M()):d<0},A.reflectY=function(R){return arguments.length?(h=R?-1:1,M()):h<0},A.precision=function(R){return arguments.length?(k=aB(S,w=R*R),P()):Qr(w)},A.fitExtent=function(R,D){return c_(A,R,D)},A.fitSize=function(R,D){return RD(A,R,D)},A.fitWidth=function(R,D){return DD(A,R,D)},A.fitHeight=function(R,D){return OD(A,R,D)};function M(){var R=lB(n,0,0,d,h,f).apply(null,t(o,s)),D=lB(n,r-R[0],i-R[1],d,h,f);return c=are(a,l,u),S=o4(t,D),C=o4(c,S),k=aB(S,w),P()}function P(){return _=$=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&O,M()}}function ND(e){var t=0,n=Le/3,r=Cre(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ie,n=o[1]*Ie):[t*rn,n*rn]},i}function p8e(e){var t=Se(e);function n(r,i){return[r*t,be(i)/t]}return n.invert=function(r,i){return[r/t,Si(i*t)]},n}function g8e(e,t){var n=be(e),r=(n+be(t))/2;if(He(r)<xe)return p8e(e);var i=1+n*(2*r-n),o=Qr(i)/r;function s(a,l){var u=Qr(i-2*r*be(l))/r;return[u*be(a*=r),o-u*Se(a)]}return s.invert=function(a,l){var u=o-l,c=Io(a,He(u))*_o(u);return u*r<0&&(c-=Le*_o(a)*_o(u)),[c/r,Si((i-(a*a+u*u)*r*r)/(2*r))]},s}function IS(){return ND(g8e).scale(155.424).center([0,33.6442])}function _re(){return IS().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function m8e(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function y8e(){var e,t,n=_re(),r,i=IS().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=IS().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(o.point(h,p),l)||(a.point(h,p),l)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,y=(d[1]-p[1])/h;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?i:y>=.166&&y<.234&&g>=-.214&&g<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=m8e([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),o=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+xe,g+.12*h+xe],[p-.214*h-xe,g+.234*h-xe]]).stream(u),a=s.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+xe,g+.166*h+xe],[p-.115*h-xe,g+.234*h-xe]]).stream(u),f()},c.fitExtent=function(d,h){return c_(c,d,h)},c.fitSize=function(d,h){return RD(c,d,h)},c.fitWidth=function(d,h){return DD(c,d,h)},c.fitHeight=function(d,h){return OD(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function Ere(e){return function(t,n){var r=Se(t),i=Se(n),o=e(r*i);return o===1/0?[2,0]:[o*i*be(t),o*be(n)]}}function Ov(e){return function(t,n){var r=Qr(t*t+n*n),i=e(r),o=be(i),s=Se(i);return[Io(t*o,r*s),Si(r&&n*o/r)]}}var $re=Ere(function(e){return Qr(2/(1+e))});$re.invert=Ov(function(e){return 2*Si(e/2)});function v8e(){return Ra($re).scale(124.75).clipAngle(180-.001)}var Are=Ere(function(e){return(e=Kne(e))&&e/be(e)});Are.invert=Ov(function(e){return e});function b8e(){return Ra(Are).scale(79.4188).clipAngle(180-.001)}function f_(e,t){return[e,vS(MD((en+t)/2))]}f_.invert=function(e,t){return[e,2*am(Xne(t))-en]};function x8e(){return Tre(f_).scale(961/Kr)}function Tre(e){var t=Ra(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=l=u=null:(s=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):s==null?null:[[s,a],[l,u]]};function c(){var f=Le*r(),d=t(jOe(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===f_?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,l),u]]:[[s,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,u)]])}return c()}function hx(e){return MD((en+e)/2)}function w8e(e,t){var n=Se(e),r=e===t?be(e):vS(n/Se(t))/vS(hx(t)/hx(e)),i=n*kA(hx(e),r)/r;if(!r)return f_;function o(s,a){i>0?a<-en+xe&&(a=-en+xe):a>en-xe&&(a=en-xe);var l=i/kA(hx(a),r);return[l*be(r*s),i-l*Se(r*s)]}return o.invert=function(s,a){var l=i-a,u=_o(r)*Qr(s*s+l*l),c=Io(s,He(l))*_o(l);return l*r<0&&(c-=Le*_o(s)*_o(l)),[c/r,2*am(kA(i/u,1/r))-en]},o}function S8e(){return ND(w8e).scale(109.5).parallels([30,30])}function LS(e,t){return[e,t]}LS.invert=LS;function k8e(){return Ra(LS).scale(152.63)}function C8e(e,t){var n=Se(e),r=e===t?be(e):(n-Se(t))/(t-e),i=n/r+e;if(He(r)<xe)return LS;function o(s,a){var l=i-a,u=r*s;return[l*be(u),i-l*Se(u)]}return o.invert=function(s,a){var l=i-a,u=Io(s,He(l))*_o(l);return l*r<0&&(u-=Le*_o(s)*_o(l)),[u/r,i-_o(r)*Qr(s*s+l*l)]},o}function _8e(){return ND(C8e).scale(131.154).center([0,13.9389])}var Sy=1.340264,ky=-.081106,Cy=893e-6,_y=.003796,zS=Qr(3)/2,E8e=12;function Mre(e,t){var n=Si(zS*be(t)),r=n*n,i=r*r*r;return[e*Se(n)/(zS*(Sy+3*ky*r+i*(7*Cy+9*_y*r))),n*(Sy+ky*r+i*(Cy+_y*r))]}Mre.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<E8e&&(a=n*(Sy+ky*r+i*(Cy+_y*r))-t,l=Sy+3*ky*r+i*(7*Cy+9*_y*r),n-=s=a/l,r=n*n,i=r*r*r,!(He(s)<mS));++o);return[zS*e*(Sy+3*ky*r+i*(7*Cy+9*_y*r))/Se(n),Si(be(n)/zS)]};function $8e(){return Ra(Mre).scale(177.158)}function Fre(e,t){var n=Se(t),r=Se(e)*n;return[n*be(e)/r,be(t)/r]}Fre.invert=Ov(am);function A8e(){return Ra(Fre).scale(144.049).clipAngle(60)}function T8e(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,c,f,d=1,h=1,p=u_({point:function(x,w){var k=b([x,w]);this.stream.point(k[0],k[1])}}),g=b1,y,m;function v(){return d=e*r,h=e*i,y=m=null,b}function b(x){var w=x[0]*d,k=x[1]*h;if(o){var S=k*s-w*a;w=w*s+k*a,k=S}return[w+t,k+n]}return b.invert=function(x){var w=x[0]-t,k=x[1]-n;if(o){var S=k*s+w*a;w=w*s-k*a,k=S}return[w/d,k/h]},b.stream=function(x){return y&&m===x?y:y=p(g(m=x))},b.postclip=function(x){return arguments.length?(g=x,l=u=c=f=null,v()):g},b.clipExtent=function(x){return arguments.length?(g=x==null?(l=u=c=f=null,b1):fre(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),v()):l==null?null:[[l,u],[c,f]]},b.scale=function(x){return arguments.length?(e=+x,v()):e},b.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],v()):[t,n]},b.angle=function(x){return arguments.length?(o=x%360*Ie,a=be(o),s=Se(o),v()):o*rn},b.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,v()):i<0},b.fitExtent=function(x,w){return c_(b,x,w)},b.fitSize=function(x,w){return RD(b,x,w)},b.fitWidth=function(x,w){return DD(b,x,w)},b.fitHeight=function(x,w){return OD(b,x,w)},b}function Pre(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Pre.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(He(i)>xe&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function M8e(){return Ra(Pre).scale(175.295)}function Rre(e,t){return[Se(t)*be(e),be(t)]}Rre.invert=Ov(Si);function F8e(){return Ra(Rre).scale(249.5).clipAngle(90+xe)}function Dre(e,t){var n=Se(t),r=1+Se(e)*n;return[n*be(e)/r,be(t)/r]}Dre.invert=Ov(function(e){return 2*am(e)});function P8e(){return Ra(Dre).scale(250).clipAngle(142)}function Ore(e,t){return[vS(MD((en+t)/2)),-e]}Ore.invert=function(e,t){return[-t,2*am(Xne(e))-en]};function R8e(){var e=Tre(Ore),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var D8e=Math.abs,m4=Math.cos,jS=Math.sin,O8e=1e-6,Nre=Math.PI,y4=Nre/2,uB=N8e(2);function cB(e){return e>1?y4:e<-1?-y4:Math.asin(e)}function N8e(e){return e>0?Math.sqrt(e):0}function I8e(e,t){var n=e*jS(t),r=30,i;do t-=i=(t+jS(t)-n)/(1+m4(t));while(D8e(i)>O8e&&--r>0);return t/2}function L8e(e,t,n){function r(i,o){return[e*i*m4(o=I8e(n,o)),t*jS(o)]}return r.invert=function(i,o){return o=cB(o/t),[i/(e*m4(o)),cB((2*o+jS(2*o))/n)]},r}var z8e=L8e(uB/y4,uB,Nre);function j8e(){return Ra(z8e).scale(169.529)}const B8e=kre(),v4=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function U8e(e,t){return function n(){const r=t();return r.type=e,r.path=kre().projection(r),r.copy=r.copy||function(){const i=n();return v4.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},Qee(r)}}function ID(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(BS[e]=U8e(e,t),this):BS[e]||null}function Ire(e){return e&&e.path||B8e}const BS={albers:_re,albersusa:y8e,azimuthalequalarea:v8e,azimuthalequidistant:b8e,conicconformal:S8e,conicequalarea:IS,conicequidistant:_8e,equalEarth:$8e,equirectangular:k8e,gnomonic:A8e,identity:T8e,mercator:x8e,mollweide:j8e,naturalEarth1:M8e,orthographic:F8e,stereographic:P8e,transversemercator:R8e};for(const e in BS)ID(e,BS[e]);function V8e(){}const qa=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Lre(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],f=[];return o(l,u,d=>{n(d,l,u),W8e(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(H8e((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var f=[],d=[],h,p,g,y,m,v;for(h=p=-1,y=l[0]>=u,qa[y<<1].forEach(b);++h<e-1;)g=y,y=l[h+1]>=u,qa[g|y<<1].forEach(b);for(qa[y<<0].forEach(b);++p<t-1;){for(h=-1,y=l[p*e+e]>=u,m=l[p*e]>=u,qa[y<<1|m<<2].forEach(b);++h<e-1;)g=y,y=l[p*e+e+h+1]>=u,v=m,m=l[p*e+h+1]>=u,qa[g|y<<1|m<<2|v<<3].forEach(b);qa[y|m<<3].forEach(b)}for(h=-1,m=l[p*e]>=u,qa[m<<2].forEach(b);++h<e-1;)v=m,m=l[p*e+h+1]>=u,qa[m<<2|v<<3].forEach(b);qa[m<<3].forEach(b);function b(x){var w=[x[0][0]+h,x[0][1]+p],k=[x[1][0]+h,x[1][1]+p],S=s(w),C=s(k),_,$;(_=d[S])?($=f[C])?(delete d[_.end],delete f[$.start],_===$?(_.ring.push(k),c(_.ring)):f[_.start]=d[$.end]={start:_.start,end:$.end,ring:_.ring.concat($.ring)}):(delete d[_.end],_.ring.push(k),d[_.end=C]=_):(_=f[C])?($=d[S])?(delete f[_.start],delete d[$.end],_===$?(_.ring.push(k),c(_.ring)):f[$.start]=d[_.end]={start:$.start,end:_.end,ring:$.ring.concat(_.ring)}):(delete f[_.start],_.ring.unshift(w),f[_.start=S]=_):f[S]=d[C]={start:S,end:C,ring:[w,k]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,y,m=u[g*e+p];d>0&&d<e&&p===d&&(y=u[g*e+p-1],f[0]=d+(c-y)/(m-y)-.5),h>0&&h<t&&g===h&&(y=u[(g-1)*e+p],f[1]=h+(c-y)/(m-y)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||q("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:V8e,r):n===a},r}function W8e(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function H8e(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=q8e(e,t[n]))return i;return 0}function q8e(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],f=e[a],d=f[0],h=f[1];if(G8e(l,f,t))return 0;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function G8e(e,t,n){var r;return Y8e(e,t,n)&&X8e(e[r=+(e[0]===t[0])],n[r],t[r])}function Y8e(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function X8e(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function zre(e,t,n){return function(r){var i=Sa(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?lc(o,s,e):a/(e+1);return zi(o+l,s,l)}}function LD(e){V.call(this,null,e)}LD.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ne(LD,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ar,o=Lre().smooth(e.smooth!==!1),s=e.thresholds||K8e(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),f=o.size([c.width,c.height])(c.values,G(s)?s:s(c.values));Q8e(f,c,u,e),f.forEach(d=>{l.push(AC(u,at(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function K8e(e,t,n){const r=zre(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Gf(t(i).values)))}function Q8e(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ne(i)&&(i=i(n,r)),Ne(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(Ze(i)?i:i[0])||1,a=(Ze(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(jre(t,s,a,l,u))}function jre(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(f){f.forEach(u)}function u(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(l),f}}function fB(e,t,n){const r=e>=0?e:TR(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function AA(e){return Ne(e)?e:Tr(+e)}function Bre(){var e=l=>l[0],t=l=>l[1],n=Xg,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const c=fB(r[0],l,e)>>s,f=fB(r[1],l,t)>>s,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>s),g=2*h+(o>>s),y=new Float32Array(p*g),m=new Float32Array(p*g);let v=y;l.forEach(x=>{const w=d+(+e(x)>>s),k=h+(+t(x)>>s);w>=0&&w<p&&k>=0&&k<g&&(y[w+k*p]+=+n(x))}),c>0&&f>0?(yh(p,g,y,m,c),vh(p,g,m,y,f),yh(p,g,y,m,c),vh(p,g,m,y,f),yh(p,g,y,m,c),vh(p,g,m,y,f)):c>0?(yh(p,g,y,m,c),yh(p,g,m,y,c),yh(p,g,y,m,c),v=m):f>0&&(vh(p,g,y,m,f),vh(p,g,m,y,f),vh(p,g,y,m,f),v=m);const b=u?Math.pow(2,-2*s):1/XQ(v);for(let x=0,w=p*g;x<w;++x)v[x]*=b;return{values:v,scale:1<<s,width:p,height:g,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=AA(l),a):e},a.y=function(l){return arguments.length?(t=AA(l),a):t},a.weight=function(l){return arguments.length?(n=AA(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||q("invalid size"),i=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||q("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=ae(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&q("invalid bandwidth"),r=l,a):r},a}function yh(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function vh(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function zD(e){V.call(this,null,e)}zD.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Z8e=["x","y","weight","size","cellSize","bandwidth"];function Ure(e,t){return Z8e.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ne(zD,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=J8e(r,e.groupby),o=(e.groupby||[]).map(nn),s=Ure(Bre(),e),a=e.as||"grid",l=[];function u(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return l=i.map(c=>at(u({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function J8e(e,t){var n=[],r=c=>c(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function jD(e){V.call(this,null,e)}jD.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ne(jD,V,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=Lre().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||zre(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=Ure(Bre(),e)(i,!0),l=jre(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=G(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(at),n}});const b4="Feature",BD="FeatureCollection",e9e="MultiPoint";function UD(e){V.call(this,null,e)}UD.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ne(UD,V,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&Ar,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(kr(a))||o&&t.modified(kr(o))||s&&t.modified(kr(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),o&&s&&(t.visit(l,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:b4,geometry:{type:e9e,coordinates:r}})),this.value={type:BD,features:n}}});function VD(e){V.call(this,null,e)}VD.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ne(VD,V,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ar,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=Ire(e.projection),n.materialize().reflow()):s=i===Ar||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=t9e(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function t9e(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function WD(e){V.call(this,null,e)}WD.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ne(WD,V,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function HD(e){V.call(this,null,e)}HD.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ne(HD,V,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=n9e(Ire(e.projection),e.field||Ro("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function n9e(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function qD(e){V.call(this,[],e),this.generator=KOe()}qD.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ne(qD,V,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Ne(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(WZ(n[0],i)):t.add.push(at(i)),n[0]=i,t}});function GD(e){V.call(this,null,e)}GD.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ne(GD,V,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ar,o=i9e(e.opacity,e),s=r9e(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Gf(n.map(u=>Gf(i(u).values))):0};return n.forEach(u=>{const c=i(u),f=Oe({},u,l);r||(f.$max=Gf(c.values||[])),u[a]=o9e(c,f,s.dep?s:Tr(s(f)),o.dep?o:Tr(o(f)))}),t.reflow(!0).modifies(a)}});function r9e(e,t){let n;return Ne(e)?(n=r=>fc(e(r,t)),n.dep=Vre(e)):n=Tr(fc(e||"#888")),n}function i9e(e,t){let n;return Ne(e)?(n=r=>e(r,t),n.dep=Vre(e)):e?n=Tr(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function Vre(e){if(!Ne(e))return!1;const t=ws(kr(e));return t.$x||t.$y||t.$value||t.$max}function o9e(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,c=e.values,f=c?y=>c[y]:wu,d=Ju(l-s,u-a),h=d.getContext("2d"),p=h.getImageData(0,0,l-s,u-a),g=p.data;for(let y=a,m=0;y<u;++y){t.$y=y-a;for(let v=s,b=y*i;v<l;++v,m+=4){t.$x=v-s,t.$value=f(v+b);const x=n(t);g[m+0]=x.r,g[m+1]=x.g,g[m+2]=x.b,g[m+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function Wre(e){V.call(this,null,e),this.modified(!0)}ne(Wre,V,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=a9e(e.type),v4.forEach(r=>{e[r]!=null&&dB(n,r,e[r])})):v4.forEach(r=>{e.modified(r)&&dB(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&s9e(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function s9e(e,t){const n=l9e(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function a9e(e){const t=ID((e||"mercator").toLowerCase());return t||q("Unrecognized projection type: "+e),t()}function dB(e,t,n){Ne(e[t])&&e[t](n)}function l9e(e){return e=ae(e),e.length===1?e[0]:{type:BD,features:e.reduce((t,n)=>t.concat(u9e(n)),[])}}function u9e(e){return e.type===BD?e.features:ae(e).filter(t=>t!=null).map(t=>t.type===b4?t:{type:b4,geometry:t})}const c9e=Object.freeze(Object.defineProperty({__proto__:null,contour:jD,geojson:UD,geopath:VD,geopoint:WD,geoshape:HD,graticule:qD,heatmap:GD,isocontour:LD,kde2d:zD,projection:Wre},Symbol.toStringTag,{value:"Module"}));function f9e(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function d9e(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Hre(this.cover(t,n),t,n,e)}function Hre(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,f,d,h,p,g,y,m,v;if(!o)return e._root=s,e;for(;o.length;)if((g=t>=(f=(a+u)/2))?a=f:u=f,(y=n>=(d=(l+c)/2))?l=d:c=d,i=o,!(o=o[m=y<<1|g]))return i[m]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,i?i[m]=s:e._root=s,e;do i=i?i[m]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+u)/2))?a=f:u=f,(y=n>=(d=(l+c)/2))?l=d:c=d;while((m=y<<1|g)===(v=(p>=d)<<1|h>=f));return i[v]=o,i[m]=s,e}function h9e(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>f&&(f=o));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)Hre(this,s[n],a[n],e[n]);return this}function p9e(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function g9e(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function m9e(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ur(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function y9e(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Ur(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>f||(l=p.x1)<i||(u=p.y1)<o))if(h.length){var y=(s+l)/2,m=(a+u)/2;d.push(new Ur(h[3],y,m,l,u),new Ur(h[2],s,m,y,u),new Ur(h[1],y,a,l,m),new Ur(h[0],s,a,y,m)),(g=(t>=m)<<1|e>=y)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);i=e-w,o=t-w,c=e+w,f=t+w,r=h.data}}return r}function v9e(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,d,h,p,g,y,m;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(s+l)/2))?s=d:l=d,(g=f>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[y=g<<1|p]))return this;if(!n.length)break;(t[y+1&3]||t[y+2&3]||t[y+3&3])&&(r=t,m=y)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[y]=o:delete t[y],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[m]=n:this._root=n),this):(this._root=o,this)}function b9e(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function x9e(){return this._root}function w9e(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function S9e(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new Ur(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,c=(s+l)/2;(i=r[3])&&t.push(new Ur(i,u,c,a,l)),(i=r[2])&&t.push(new Ur(i,o,c,u,l)),(i=r[1])&&t.push(new Ur(i,u,s,a,c)),(i=r[0])&&t.push(new Ur(i,o,s,u,c))}return this}function k9e(e){var t=[],n=[],r;for(this._root&&t.push(new Ur(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(s+l)/2,f=(a+u)/2;(o=i[0])&&t.push(new Ur(o,s,a,c,f)),(o=i[1])&&t.push(new Ur(o,c,a,l,f)),(o=i[2])&&t.push(new Ur(o,s,f,c,u)),(o=i[3])&&t.push(new Ur(o,c,f,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function C9e(e){return e[0]}function _9e(e){return arguments.length?(this._x=e,this):this._x}function E9e(e){return e[1]}function $9e(e){return arguments.length?(this._y=e,this):this._y}function YD(e,t,n){var r=new XD(t??C9e,n??E9e,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function XD(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function hB(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ti=YD.prototype=XD.prototype;ti.copy=function(){var e=new XD(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=hB(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=hB(r));return e};ti.add=d9e;ti.addAll=h9e;ti.cover=p9e;ti.data=g9e;ti.extent=m9e;ti.find=y9e;ti.remove=v9e;ti.removeAll=b9e;ti.root=x9e;ti.size=w9e;ti.visit=S9e;ti.visitAfter=k9e;ti.x=_9e;ti.y=$9e;function Wr(e){return function(){return e}}function Iu(e){return(e()-.5)*1e-6}function A9e(e){return e.x+e.vx}function T9e(e){return e.y+e.vy}function M9e(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Wr(e==null?1:+e));function s(){for(var u,c=t.length,f,d,h,p,g,y,m=0;m<o;++m)for(f=YD(t,A9e,T9e).visitAfter(a),u=0;u<c;++u)d=t[u],g=n[d.index],y=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,x,w,k,S){var C=b.data,_=b.r,$=g+_;if(C){if(C.index>d.index){var A=h-C.x-C.vx,O=p-C.y-C.vy,M=A*A+O*O;M<$*$&&(A===0&&(A=Iu(r),M+=A*A),O===0&&(O=Iu(r),M+=O*O),M=($-(M=Math.sqrt(M)))/M*i,d.vx+=(A*=M)*($=(_*=_)/(y+_)),d.vy+=(O*=M)*$,C.vx-=A*($=1-$),C.vy-=O*$)}return}return x>h+$||k<h-$||w>p+$||S<p-$}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return s.initialize=function(u,c){t=u,r=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Wr(+u),l(),s):e},s}function F9e(e){return e.index}function pB(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function P9e(e){var t=F9e,n=f,r,i=Wr(30),o,s,a,l,u,c=1;e==null&&(e=[]);function f(y){return 1/Math.min(a[y.source.index],a[y.target.index])}function d(y){for(var m=0,v=e.length;m<c;++m)for(var b=0,x,w,k,S,C,_,$;b<v;++b)x=e[b],w=x.source,k=x.target,S=k.x+k.vx-w.x-w.vx||Iu(u),C=k.y+k.vy-w.y-w.vy||Iu(u),_=Math.sqrt(S*S+C*C),_=(_-o[b])/_*y*r[b],S*=_,C*=_,k.vx-=S*($=l[b]),k.vy-=C*$,w.vx+=S*($=1-$),w.vy+=C*$}function h(){if(s){var y,m=s.length,v=e.length,b=new Map(s.map((w,k)=>[t(w,k,s),w])),x;for(y=0,a=new Array(m);y<v;++y)x=e[y],x.index=y,typeof x.source!="object"&&(x.source=pB(b,x.source)),typeof x.target!="object"&&(x.target=pB(b,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(y=0,l=new Array(v);y<v;++y)x=e[y],l[y]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(v),p(),o=new Array(v),g()}}function p(){if(s)for(var y=0,m=e.length;y<m;++y)r[y]=+n(e[y],y,e)}function g(){if(s)for(var y=0,m=e.length;y<m;++y)o[y]=+i(e[y],y,e)}return d.initialize=function(y,m){s=y,u=m,h()},d.links=function(y){return arguments.length?(e=y,h(),d):e},d.id=function(y){return arguments.length?(t=y,d):t},d.iterations=function(y){return arguments.length?(c=+y,d):c},d.strength=function(y){return arguments.length?(n=typeof y=="function"?y:Wr(+y),p(),d):n},d.distance=function(y){return arguments.length?(i=typeof y=="function"?y:Wr(+y),g(),d):i},d}var R9e={value:()=>{}};function qre(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new A2(n)}function A2(e){this._=e}function D9e(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}A2.prototype=qre.prototype={constructor:A2,on:function(e,t){var n=this._,r=D9e(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=O9e(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=gB(n[i],e.name,t);else if(t==null)for(i in n)n[i]=gB(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new A2(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function O9e(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function gB(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=R9e,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var xg=0,j0=0,Qm=0,Gre=1e3,US,B0,VS=0,md=0,d_=0,S1=typeof performance=="object"&&performance.now?performance:Date,Yre=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function KD(){return md||(Yre(N9e),md=S1.now()+d_)}function N9e(){md=0}function WS(){this._call=this._time=this._next=null}WS.prototype=Xre.prototype={constructor:WS,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?KD():+n)+(t==null?0:+t),!this._next&&B0!==this&&(B0?B0._next=this:US=this,B0=this),this._call=e,this._time=n,x4()},stop:function(){this._call&&(this._call=null,this._time=1/0,x4())}};function Xre(e,t,n){var r=new WS;return r.restart(e,t,n),r}function I9e(){KD(),++xg;for(var e=US,t;e;)(t=md-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xg}function mB(){md=(VS=S1.now())+d_,xg=j0=0;try{I9e()}finally{xg=0,z9e(),md=0}}function L9e(){var e=S1.now(),t=e-VS;t>Gre&&(d_-=t,VS=e)}function z9e(){for(var e,t=US,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:US=n);B0=e,x4(r)}function x4(e){if(!xg){j0&&(j0=clearTimeout(j0));var t=e-md;t>24?(e<1/0&&(j0=setTimeout(mB,e-S1.now()-d_)),Qm&&(Qm=clearInterval(Qm))):(Qm||(VS=S1.now(),Qm=setInterval(L9e,Gre)),xg=1,Yre(mB))}}function j9e(e,t,n){var r=new WS,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?KD():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const B9e=1664525,U9e=1013904223,yB=4294967296;function V9e(){let e=1;return()=>(e=(B9e*e+U9e)%yB)/yB}function W9e(e){return e.x}function H9e(e){return e.y}var q9e=10,G9e=Math.PI*(3-Math.sqrt(5));function Y9e(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=Xre(f),u=qre("tick","end"),c=V9e();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(g){var y,m=e.length,v;g===void 0&&(g=1);for(var b=0;b<g;++b)for(n+=(o-n)*i,a.forEach(function(x){x(n)}),y=0;y<m;++y)v=e[y],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var g=0,y=e.length,m;g<y;++g){if(m=e[g],m.index=g,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var v=q9e*Math.sqrt(.5+g),b=g*G9e;m.x=v*Math.cos(b),m.y=v*Math.sin(b)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(s=1-g,t):1-s},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,y){return arguments.length>1?(y==null?a.delete(g):a.set(g,p(y)),t):a.get(g)},find:function(g,y,m){var v=0,b=e.length,x,w,k,S,C;for(m==null?m=1/0:m*=m,v=0;v<b;++v)S=e[v],x=g-S.x,w=y-S.y,k=x*x+w*w,k<m&&(C=S,m=k);return C},on:function(g,y){return arguments.length>1?(u.on(g,y),t):u.on(g)}}}function X9e(){var e,t,n,r,i=Wr(-30),o,s=1,a=1/0,l=.81;function u(h){var p,g=e.length,y=YD(e,W9e,H9e).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],y.visit(d)}function c(){if(e){var h,p=e.length,g;for(o=new Array(p),h=0;h<p;++h)g=e[h],o[g.index]=+i(g,h,e)}}function f(h){var p=0,g,y,m=0,v,b,x;if(h.length){for(v=b=x=0;x<4;++x)(g=h[x])&&(y=Math.abs(g.value))&&(p+=g.value,m+=y,v+=y*g.x,b+=y*g.y);h.x=v/m,h.y=b/m}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=o[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,y){if(!h.value)return!0;var m=h.x-t.x,v=h.y-t.y,b=y-p,x=m*m+v*v;if(b*b/l<x)return x<a&&(m===0&&(m=Iu(n),x+=m*m),v===0&&(v=Iu(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)),t.vx+=m*h.value*r/x,t.vy+=v*h.value*r/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(m===0&&(m=Iu(n),x+=m*m),v===0&&(v=Iu(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)));do h.data!==t&&(b=o[h.data.index]*r/x,t.vx+=m*b,t.vy+=v*b);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Wr(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function K9e(e){var t=Wr(.1),n,r,i;typeof e!="function"&&(e=Wr(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Wr(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Wr(+a),s(),o):e},o}function Q9e(e){var t=Wr(.1),n,r,i;typeof e!="function"&&(e=Wr(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Wr(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Wr(+a),s(),o):e},o}const vB={center:f9e,collide:M9e,nbody:X9e,link:P9e,x:K9e,y:Q9e},U0="forces",w4=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Z9e=["static","iterations"],Kre=["x","y","vx","vy"];function QD(e){V.call(this,null,e)}QD.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Kre}]};ne(QD,V,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(w4),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Qre(n,e,0,t)):(this.value=n=eNe(t.source,e),n.on("tick",J9e(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Z9e)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==U0||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Kre)}});function J9e(e,t){return()=>e.touch(t).run()}function eNe(e,t){const n=Y9e(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),Qre(n,t,!0).on("end",()=>o=!0)}function Qre(e,t,n,r){var i=ae(t.forces),o,s,a,l;for(o=0,s=w4.length;o<s;++o)a=w4[o],a!==U0&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=U0+o,a=n||t.modified(U0,o)?nNe(i[o]):r&&tNe(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(U0+o,null);return e.numForces=i.length,e}function tNe(e,t){var n,r;for(n in e)if(Ne(r=e[n])&&t.modified(kr(r)))return 1;return 0}function nNe(e){var t,n;ce(vB,e.force)||q("Unrecognized force: "+e.force),t=vB[e.force]();for(n in e)Ne(t[n])&&rNe(t[n],e[n],e);return t}function rNe(e,t,n){e(Ne(t)?r=>t(r,n):t)}const iNe=Object.freeze(Object.defineProperty({__proto__:null,force:QD},Symbol.toStringTag,{value:"Module"}));function oNe(e,t){return e.parent===t.parent?1:2}function sNe(e){return e.reduce(aNe,0)/e.length}function aNe(e,t){return e+t.x}function lNe(e){return 1+e.reduce(uNe,0)}function uNe(e,t){return Math.max(e,t.y)}function cNe(e){for(var t;t=e.children;)e=t[0];return e}function fNe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function dNe(){var e=oNe,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=sNe(h),d.y=lNe(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var l=cNe(o),u=fNe(o),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function hNe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function pNe(){return this.eachAfter(hNe)}function gNe(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function mNe(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function yNe(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function vNe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function bNe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function xNe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function wNe(e){for(var t=this,n=SNe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function SNe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function kNe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function CNe(){return Array.from(this)}function _Ne(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function ENe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*$Ne(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function ZD(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=MNe)):t===void 0&&(t=TNe);for(var n=new wg(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new wg(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Zre)}function ANe(){return ZD(this).eachBefore(FNe)}function TNe(e){return e.children}function MNe(e){return Array.isArray(e)?e[1]:null}function FNe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Zre(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function wg(e){this.data=e,this.depth=this.height=0,this.parent=null}wg.prototype=ZD.prototype={constructor:wg,count:pNe,each:gNe,eachAfter:yNe,eachBefore:mNe,find:vNe,sum:bNe,sort:xNe,path:wNe,ancestors:kNe,descendants:CNe,leaves:_Ne,links:ENe,copy:ANe,[Symbol.iterator]:$Ne};function T2(e){return e==null?null:Jre(e)}function Jre(e){if(typeof e!="function")throw new Error;return e}function xf(){return 0}function $h(e){return function(){return e}}const PNe=1664525,RNe=1013904223,bB=4294967296;function DNe(){let e=1;return()=>(e=(PNe*e+RNe)%bB)/bB}function ONe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function NNe(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function INe(e,t){for(var n=0,r=(e=NNe(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&eie(s,o)?++n:(s=zNe(i=LNe(i,o)),n=0);return s}function LNe(e,t){var n,r;if(TA(t,e))return[t];for(n=0;n<e.length;++n)if(px(t,e[n])&&TA(V0(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(px(V0(e[n],e[r]),t)&&px(V0(e[n],t),e[r])&&px(V0(e[r],t),e[n])&&TA(tie(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function px(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function eie(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function TA(e,t){for(var n=0;n<t.length;++n)if(!eie(e,t[n]))return!1;return!0}function zNe(e){switch(e.length){case 1:return jNe(e[0]);case 2:return V0(e[0],e[1]);case 3:return tie(e[0],e[1],e[2])}}function jNe(e){return{x:e.x,y:e.y,r:e.r}}function V0(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,c=a-i,f=Math.sqrt(l*l+u*u);return{x:(n+o+l/f*c)/2,y:(r+s+u/f*c)/2,r:(f+i+a)/2}}function tie(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-s,h=r-u,p=i-a,g=i-c,y=l-o,m=f-o,v=r*r+i*i-o*o,b=v-s*s-a*a+l*l,x=v-u*u-c*c+f*f,w=h*p-d*g,k=(p*x-g*b)/(w*2)-r,S=(g*y-p*m)/w,C=(h*b-d*x)/(w*2)-i,_=(d*m-h*y)/w,$=S*S+_*_-1,A=2*(o+k*S+C*_),O=k*k+C*C-o*o,M=-(Math.abs($)>1e-6?(A+Math.sqrt(A*A-4*$*O))/(2*$):O/A);return{x:r+k+S*M,y:i+C+_*M,r:M}}function xB(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function wB(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function SB(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function gx(e){this._=e,this.next=null,this.previous=null}function BNe(e,t){if(!(o=(e=ONe(e)).length))return 0;var n,r,i,o,s,a,l,u,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;xB(r,n,i=e[2]),n=new gx(n),r=new gx(r),i=new gx(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){xB(n._,r._,i=e[l]),i=new gx(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(wB(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(wB(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=SB(n);(i=i.next)!==r;)(a=SB(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=INe(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function UNe(e){return Math.sqrt(e.value)}function VNe(){var e=null,t=1,n=1,r=xf;function i(o){const s=DNe();return o.x=t/2,o.y=n/2,e?o.eachBefore(kB(e)).eachAfter(MA(r,.5,s)).eachBefore(CB(1)):o.eachBefore(kB(UNe)).eachAfter(MA(xf,1,s)).eachAfter(MA(r,o.r/Math.min(t,n),s)).eachBefore(CB(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=T2(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:$h(+o),i):r},i}function kB(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function MA(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=BNe(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function CB(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function nie(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Nv(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function WNe(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(nie),s}function o(s,a){return function(l){l.children&&Nv(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var HNe={depth:-1},_B={},FA={};function qNe(e){return e.id}function GNe(e){return e.parentId}function EB(){var e=qNe,t=GNe,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,c,f,d,h,p,g,y=new Map;if(n!=null){const m=o.map((x,w)=>YNe(n(x,w,i))),v=m.map($B),b=new Set(m).add("");for(const x of v)b.has(x)||(b.add(x),m.push(x),v.push($B(x)),o.push(FA));s=(x,w)=>m[w],a=(x,w)=>v[w]}for(c=0,l=o.length;c<l;++c)u=o[c],h=o[c]=new wg(u),(p=s(u,c,i))!=null&&(p+="")&&(g=h.id=p,y.set(g,y.has(g)?_B:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=o[c],p=h.parent){if(d=y.get(p),!d)throw new Error("missing: "+p);if(d===_B)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===FA&&f.children.length===1;)f=f.children[0],--l;for(let m=o.length-1;m>=0&&(h=o[m],h.data===FA);--m)h.data=null}if(f.parent=HNe,f.eachBefore(function(m){m.depth=m.parent.depth+1,--l}).eachBefore(Zre),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=T2(i),r):e},r.parentId=function(i){return arguments.length?(t=T2(i),r):t},r.path=function(i){return arguments.length?(n=T2(i),r):n},r}function YNe(e){e=`${e}`;let t=e.length;return S4(e,t-1)&&!S4(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function $B(e){let t=e.length;if(t<2)return"";for(;--t>1&&!S4(e,t););return e.slice(0,t)}function S4(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function XNe(e,t){return e.parent===t.parent?1:2}function PA(e){var t=e.children;return t?t[0]:e.t}function RA(e){var t=e.children;return t?t[t.length-1]:e.t}function KNe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function QNe(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function ZNe(e,t,n){return e.a.parent===t.parent?e.a:n}function M2(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}M2.prototype=Object.create(wg.prototype);function JNe(e){for(var t=new M2(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new M2(o[s],s)),i.parent=n;return(t.parent=new M2(null,0)).children=[t],t}function eIe(){var e=XNe,t=1,n=1,r=null;function i(u){var c=JNe(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,g=p-f.x,y=t/(d.x+p+g),m=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*y,v.y=v.depth*m})}return u}function o(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){QNe(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||f[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var d=u,h=u,p=c,g=d.parent.children[0],y=d.m,m=h.m,v=p.m,b=g.m,x;p=RA(p),d=PA(d),p&&d;)g=PA(g),h=RA(h),h.a=u,x=p.z+v-d.z-y+e(p._,d._),x>0&&(KNe(ZNe(p,u,f),u,x),y+=x,m+=x),v+=p.m,y+=d.m,b+=g.m,m+=h.m;p&&!RA(h)&&(h.t=p,h.m+=v-m),d&&!PA(g)&&(g.t=d,g.m+=y-b,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function h_(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var rie=(1+Math.sqrt(5))/2;function iie(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,c=0,f=0,d=a.length,h,p,g=t.value,y,m,v,b,x,w,k;c<d;){h=i-n,p=o-r;do y=a[f++].value;while(!y&&f<d);for(m=v=y,w=Math.max(p/h,h/p)/(g*e),k=y*y*w,x=Math.max(v/k,k/m);f<d;++f){if(y+=u=a[f].value,u<m&&(m=u),u>v&&(v=u),k=y*y*w,b=Math.max(v/k,k/m),b>x){y-=u;break}x=b}s.push(l={value:y,dice:h<p,children:a.slice(c,f)}),l.dice?Nv(l,n,r,i,g?r+=p*y/g:o):h_(l,n,r,g?n+=h*y/g:i,o),g-=y,c=f}return s}const oie=function e(t){function n(r,i,o,s,a){iie(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(rie);function tIe(){var e=oie,t=!1,n=1,r=1,i=[0],o=xf,s=xf,a=xf,l=xf,u=xf;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(nie),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,y=d.x1-h,m=d.y1-h;y<p&&(p=y=(p+y)/2),m<g&&(g=m=(g+m)/2),d.x0=p,d.y0=g,d.x1=y,d.y1=m,d.children&&(h=i[d.depth+1]=o(d)/2,p+=u(d)-h,g+=s(d)-h,y-=a(d)-h,m-=l(d)-h,y<p&&(p=y=(p+y)/2),m<g&&(g=m=(g+m)/2),e(d,p,g,y,m))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=Jre(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:$h(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:$h(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:$h(+d),c):a},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:$h(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:$h(+d),c):u},c}function nIe(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,g,y,m){if(f>=d-1){var v=o[f];v.x0=p,v.y0=g,v.x1=y,v.y1=m;return}for(var b=u[f],x=h/2+b,w=f+1,k=d-1;w<k;){var S=w+k>>>1;u[S]<x?w=S+1:k=S}x-u[w-1]<u[w]-x&&f+1<w&&--w;var C=u[w]-b,_=h-C;if(y-p>m-g){var $=h?(p*_+y*C)/h:y;c(f,w,C,p,g,$,m),c(w,d,_,$,g,y,m)}else{var A=h?(g*_+m*C)/h:m;c(f,w,C,p,g,y,A),c(w,d,_,p,A,y,m)}}}function rIe(e,t,n,r,i){(e.depth&1?h_:Nv)(e,t,n,r,i)}const iIe=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,p=l.length,g=r.value;++d<p;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?Nv(u,i,o,s,g?o+=(a-o)*u.value/g:a):h_(u,i,o,g?i+=(s-i)*u.value/g:s,a),g-=u.value}else r._squarify=l=iie(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(rie);function k4(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function JD(e){V.call(this,null,e)}JD.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const oIe=e=>e.values;ne(JD,V,{transform(e,t){t.source||q("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&$C(s.data)&&i.rem.push(s.data)}),this.value=o=ZD({values:ae(e.keys).reduce((s,a)=>(s.key(a),s),sIe()).entries(i.source)},oIe),n&&o.each(s=>{s.children&&(s=at(s.data),i.add.push(s),i.source.push(s))}),k4(o,ve,ve)),i.source.root=o,i}});function sIe(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=l[f])?h.push(d):l[f]=[d];for(f in l)u[f]=n(l[f],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function Wl(e){V.call(this,null,e)}const aIe=(e,t)=>e.parent===t.parent?1:2;ne(Wl,V,{transform(e,t){(!t.source||!t.source.root)&&q(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ud(e.sort,s=>s.data)),lIe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?aIe:Xg);try{this.value=n(i)}catch(s){q(s)}return i.each(s=>uIe(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function lIe(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function uIe(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const C4=["x","y","r","depth","children"];function eO(e){Wl.call(this,e)}eO.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:C4.length,default:C4}]};ne(eO,Wl,{layout:VNe,params:["radius","size","padding"],fields:C4});const _4=["x0","y0","x1","y1","depth","children"];function tO(e){Wl.call(this,e)}tO.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:_4.length,default:_4}]};ne(tO,Wl,{layout:WNe,params:["size","round","padding"],fields:_4});function nO(e){V.call(this,null,e)}nO.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ne(nO,V,{transform(e,t){t.source||q("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?k4(EB().id(e.key).parentId(e.parentKey)(i.source),e.key,Do):k4(EB()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const AB={tidy:eIe,cluster:dNe},E4=["x","y","depth","children"];function rO(e){Wl.call(this,e)}rO.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:E4.length,default:E4}]};ne(rO,Wl,{layout(e){const t=e||"tidy";if(ce(AB,t))return AB[t]();q("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:E4});function iO(e){V.call(this,[],e)}iO.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ne(iO,V,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||q("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[ve(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[ve(a)]&&o[ve(l)]&&i.add.push(at({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[ve(s)]=1),n.forEach(s=>{(o[ve(s.source)]||o[ve(s.target)])&&i.mod.push(s)})),i}});const TB={binary:nIe,dice:Nv,slice:h_,slicedice:rIe,squarify:oie,resquarify:iIe},$4=["x0","y0","x1","y1","depth","children"];function oO(e){Wl.call(this,e)}oO.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:$4.length,default:$4}]};ne(oO,Wl,{layout(){const e=tIe();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ce(TB,t)?e.tile(TB[t]):q("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:$4});const cIe=Object.freeze(Object.defineProperty({__proto__:null,nest:JD,pack:eO,partition:tO,stratify:nO,tree:rO,treelinks:iO,treemap:oO},Symbol.toStringTag,{value:"Module"})),DA=4278190080;function fIe(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function dIe(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=Ju(o,s).getContext("2d"),u=Ju(o,s).getContext("2d"),c=a&&Ju(o,s).getContext("2d");n.forEach(C=>F2(l,C,!1)),F2(u,t,!1),a&&F2(c,t,!0);const f=OA(l,o,s),d=OA(u,o,s),h=a&&OA(c,o,s),p=e.bitmap(),g=a&&e.bitmap();let y,m,v,b,x,w,k,S;for(m=0;m<s;++m)for(y=0;y<o;++y)x=m*o+y,w=f[x]&DA,S=d[x]&DA,k=a&&h[x]&DA,(w||k||S)&&(v=e(y),b=e(m),!i&&(w||S)&&p.set(v,b),a&&(w||k)&&g.set(v,b));return[p,g]}function OA(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function F2(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>F2(e,o.items,n))}):Zi[r].draw(e,{items:n?t.map(hIe):t})}function hIe(e){const t=AC(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ga=5,Mr=31,k1=32,gu=new Uint32Array(k1+1),is=new Uint32Array(k1+1);is[0]=0;gu[0]=~is[0];for(let e=1;e<=k1;++e)is[e]=is[e-1]<<1|1,gu[e]=~is[e];function pIe(e,t){const n=new Uint32Array(~~((e*t+k1)/k1));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Ga]&1<<(a&Mr)},set:(o,s)=>{const a=s*e+o;r(a>>>Ga,1<<(a&Mr))},clear:(o,s)=>{const a=s*e+o;i(a>>>Ga,~(1<<(a&Mr)))},getRange:(o,s,a,l)=>{let u=l,c,f,d,h;for(;u>=s;--u)if(c=u*e+o,f=u*e+a,d=c>>>Ga,h=f>>>Ga,d===h){if(n[d]&gu[c&Mr]&is[(f&Mr)+1])return!0}else{if(n[d]&gu[c&Mr]||n[h]&is[(f&Mr)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Ga,d=c>>>Ga,f===d)r(f,gu[u&Mr]&is[(c&Mr)+1]);else for(r(f,gu[u&Mr]),r(d,is[(c&Mr)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Ga,d=c>>>Ga,f===d)i(f,is[u&Mr]|gu[(c&Mr)+1]);else for(i(f,is[u&Mr]),i(d,gu[(c&Mr)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function gIe(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>pIe(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function mIe(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,c=Hi.width(s.datum,s.datum.text);let f=0,d,h,p,g,y,m,v;for(let b=0;b<l;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,g=a[b].y2===void 0?p:a[b].y2,y=(d+h)/2,m=(p+g)/2,v=Math.abs(h-d+g-p),v>=f&&(f=v,s.x=y,s.y=m);return y=c/2,m=u/2,d=s.x-y,h=s.x+y,p=s.y-m,g=s.y+m,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",p<0&&g<=o?s.baseline="top":0<=p&&o<g&&(s.baseline="bottom"),!0}}function HS(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Lu(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),c=e(t+l),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(u,f,c,d)||s.getRange(u,f,c,d)||a&&a.getRange(u,f,c,d)}function yIe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,c,f,d,h){const p=e.invert(u),g=e.invert(c);let y=f,m=o,v;if(!HS(p,g,d,h,i,o)&&!Lu(e,p,g,h,d,y,s,a)&&!Lu(e,p,g,h,d,h,s,null)){for(;m-y>=1;)v=(y+m)/2,Lu(e,p,g,h,d,v,s,a)?m=v:y=v;if(y>f)return[p,g,y,!0]}}return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Hi.width(u.datum,u.datum.text);let p=n?d:0,g=!1,y=!1,m=0,v,b,x,w,k,S,C,_,$,A,O,M,P,R,D,I,N;for(let B=0;B<f;++B){for(v=c[B].x,x=c[B].y,b=c[B].x2===void 0?v:c[B].x2,w=c[B].y2===void 0?x:c[B].y2,v>b&&(N=v,v=b,b=N),x>w&&(N=x,x=w,w=N),$=e(v),O=e(b),A=~~(($+O)/2),M=e(x),R=e(w),P=~~((M+R)/2),C=A;C>=$;--C)for(_=P;_>=M;--_)I=l(C,_,p,h,d),I&&([u.x,u.y,p,g]=I);for(C=A;C<=O;++C)for(_=P;_<=R;++_)I=l(C,_,p,h,d),I&&([u.x,u.y,p,g]=I);!g&&!n&&(D=Math.abs(b-v+w-x),k=(v+b)/2,S=(x+w)/2,D>=m&&!HS(k,S,h,d,i,o)&&!Lu(e,k,S,d,h,d,s,null)&&(m=D,u.x=k,u.y=S,y=!0))}return g||y?(k=h/2,S=d/2,s.setRange(e(u.x-k),e(u.y-S),e(u.x+k),e(u.y+S)),u.align="center",u.baseline="middle",!0):!1}}const vIe=[-1,-1,1,1],bIe=[-1,1,-1,1];function xIe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Hi.width(u.datum,u.datum.text),p=[];let g=n?d:0,y=!1,m=!1,v=0,b,x,w,k,S,C,_,$,A,O,M,P;for(let R=0;R<f;++R){for(b=c[R].x,w=c[R].y,x=c[R].x2===void 0?b:c[R].x2,k=c[R].y2===void 0?w:c[R].y2,p.push([e((b+x)/2),e((w+k)/2)]);p.length;)if([_,$]=p.pop(),!(s.get(_,$)||a.get(_,$)||l.get(_,$))){l.set(_,$);for(let D=0;D<4;++D)S=_+vIe[D],C=$+bIe[D],l.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(_),C=e.invert($),A=g,O=o,!HS(S,C,h,d,i,o)&&!Lu(e,S,C,d,h,A,s,a)&&!Lu(e,S,C,d,h,d,s,null)){for(;O-A>=1;)M=(A+O)/2,Lu(e,S,C,d,h,M,s,a)?O=M:A=M;A>g&&(u.x=S,u.y=C,g=A,y=!0)}}!y&&!n&&(P=Math.abs(x-b+k-w),S=(b+x)/2,C=(w+k)/2,P>=v&&!HS(S,C,h,d,i,o)&&!Lu(e,S,C,d,h,d,s,null)&&(v=P,u.x=S,u.y=C,m=!0))}return y||m?(S=h/2,C=d/2,s.setRange(e(u.x-S),e(u.y-C),e(u.x+S),e(u.y+C)),u.align="center",u.baseline="middle",!0):!1}}const wIe=["right","center","left"],SIe=["bottom","middle","top"];function kIe(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,f=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=u.textWidth??0,h,p,g,y,m,v,b,x,w,k,S,C,_,$,A;for(let O=0;O<l;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,g=h===0&&p===0||r[O]<0,y=h&&p?Math.SQRT1_2:1,m=r[O]<0?-1:1,v=c[1+h]+r[O]*h*y,S=c[4+p]+m*f*p/2+r[O]*p*y,x=S-f/2,w=S+f/2,C=e(v),$=e(x),A=e(w),!d)if(MB(C,C,$,A,s,a,v,v,x,w,c,g))d=Hi.width(u.datum,u.datum.text);else continue;if(k=v+m*d*h/2,v=k-d/2,b=k+d/2,C=e(v),_=e(b),MB(C,_,$,A,s,a,v,b,x,w,c,g))return u.x=h?h*m<0?b:v:k,u.y=p?p*m<0?w:x:S,u.align=wIe[h*m+1],u.baseline=SIe[p*m+1],s.setRange(C,$,_,A),!0}return!1}}function MB(e,t,n,r,i,o,s,a,l,u,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const NA=0,IA=4,LA=8,zA=0,jA=1,BA=2,CIe={"top-left":NA+zA,top:NA+jA,"top-right":NA+BA,left:IA+zA,middle:IA+jA,right:IA+BA,"bottom-left":LA+zA,bottom:LA+jA,"bottom-right":LA+BA},_Ie={naive:mIe,"reduced-search":yIe,floodfill:xIe};function EIe(e,t,n,r,i,o,s,a,l,u,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=$Ie(r,f),h=AIe(i,f),p=TIe(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,y=g==="area",m=MIe(p,g,a,l),v=u===null||u===1/0,b=y&&c==="naive";let x=-1,w=-1;const k=e.map($=>{const A=v?Hi.width($,$.text):void 0;return x=Math.max(x,A),w=Math.max(w,$.fontSize),{datum:$,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:m($),textWidth:A}});u=u===null||u===1/0?Math.max(x,w)+Math.max(...r):u;const S=gIe(t[0],t[1],u);let C;if(!b){n&&k.sort((O,M)=>n(O.datum,M.datum));let $=!1;for(let O=0;O<h.length&&!$;++O)$=h[O]===5||d[O]<0;const A=(p&&s||y)&&e.map(O=>O.datum);C=o.length||A?dIe(S,A||[],o,$,y):fIe(S,s&&k)}const _=y?_Ie[c](S,C,s,l):kIe(S,C,h,d);return k.forEach($=>$.opacity=+_($)),k}function $Ie(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function AIe(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=CIe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function TIe(e){return e&&e.mark&&e.mark.marktype}function MIe(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const A4=["x","y","opacity","align","baseline"],sie=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function sO(e){V.call(this,null,e)}sO.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:sie},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:A4.length,default:A4}]};ne(sO,V,{transform(e,t){function n(o){const s=e[o];return Ne(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&q("Size parameter should be specified as a [width, height] array.");const i=e.as||A4;return EIe(t.materialize(t.SOURCE).source||[],e.size,e.sort,ae(e.offset==null?1:e.offset),ae(e.anchor||sie),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const FIe=Object.freeze(Object.defineProperty({__proto__:null,label:sO},Symbol.toStringTag,{value:"Module"}));function aie(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function aO(e){V.call(this,null,e)}aO.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ne(aO,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=aie(r,e.groupby),o=(e.groupby||[]).map(nn),s=o.length,a=e.as||[nn(e.x),nn(e.y)],l=[];i.forEach(u=>{lJ(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=u.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],l.push(at(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const T4={constant:BR,linear:UR,log:iJ,exp:oJ,pow:sJ,quad:VR,poly:aJ},PIe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function lO(e){V.call(this,null,e)}lO.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(T4)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ne(lO,V,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=aie(r,e.groupby),o=(e.groupby||[]).map(nn),s=e.method||"linear",a=e.order==null?3:e.order,l=PIe(s,a),u=e.as||[nn(e.x),nn(e.y)],c=T4[s],f=[];let d=e.extent;ce(T4,s)||q("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(at({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const y=d||Sa(h,e.x),m=v=>{const b={};for(let x=0;x<o.length;++x)b[o[x]]=h.dims[x];b[u[0]]=v[0],b[u[1]]=v[1],f.push(at(b))};s==="linear"||s==="constant"?y.forEach(v=>m([v,g.predict(v)])):OC(g.predict,y,25,200).forEach(m)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const RIe=Object.freeze(Object.defineProperty({__proto__:null,loess:aO,regression:lO},Symbol.toStringTag,{value:"Module"})),xl=11102230246251565e-32,cr=134217729,DIe=(3+8*xl)*xl;function UA(e,t,n,r,i){let o,s,a,l,u=t[0],c=r[0],f=0,d=0;c>u==c>-u?(o=u,u=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>u==c>-u?(s=u+o,a=o-(s-u),u=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>u==c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function OIe(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Iv(e){return new Float64Array(e)}const NIe=(3+16*xl)*xl,IIe=(2+12*xl)*xl,LIe=(9+64*xl)*xl*xl,bh=Iv(4),FB=Iv(8),PB=Iv(12),RB=Iv(16),Fr=Iv(4);function zIe(e,t,n,r,i,o,s){let a,l,u,c,f,d,h,p,g,y,m,v,b,x,w,k,S,C;const _=e-i,$=n-i,A=t-o,O=r-o;x=_*O,d=cr*_,h=d-(d-_),p=_-h,d=cr*O,g=d-(d-O),y=O-g,w=p*y-(x-h*g-p*g-h*y),k=A*$,d=cr*A,h=d-(d-A),p=A-h,d=cr*$,g=d-(d-$),y=$-g,S=p*y-(k-h*g-p*g-h*y),m=w-S,f=w-m,bh[0]=w-(m+f)+(f-S),v=x+m,f=v-x,b=x-(v-f)+(m-f),m=b-k,f=b-m,bh[1]=b-(m+f)+(f-k),C=v+m,f=C-v,bh[2]=v-(C-f)+(m-f),bh[3]=C;let M=OIe(4,bh),P=IIe*s;if(M>=P||-M>=P||(f=e-_,a=e-(_+f)+(f-i),f=n-$,u=n-($+f)+(f-i),f=t-A,l=t-(A+f)+(f-o),f=r-O,c=r-(O+f)+(f-o),a===0&&l===0&&u===0&&c===0)||(P=LIe*s+DIe*Math.abs(M),M+=_*c+O*a-(A*u+$*l),M>=P||-M>=P))return M;x=a*O,d=cr*a,h=d-(d-a),p=a-h,d=cr*O,g=d-(d-O),y=O-g,w=p*y-(x-h*g-p*g-h*y),k=l*$,d=cr*l,h=d-(d-l),p=l-h,d=cr*$,g=d-(d-$),y=$-g,S=p*y-(k-h*g-p*g-h*y),m=w-S,f=w-m,Fr[0]=w-(m+f)+(f-S),v=x+m,f=v-x,b=x-(v-f)+(m-f),m=b-k,f=b-m,Fr[1]=b-(m+f)+(f-k),C=v+m,f=C-v,Fr[2]=v-(C-f)+(m-f),Fr[3]=C;const R=UA(4,bh,4,Fr,FB);x=_*c,d=cr*_,h=d-(d-_),p=_-h,d=cr*c,g=d-(d-c),y=c-g,w=p*y-(x-h*g-p*g-h*y),k=A*u,d=cr*A,h=d-(d-A),p=A-h,d=cr*u,g=d-(d-u),y=u-g,S=p*y-(k-h*g-p*g-h*y),m=w-S,f=w-m,Fr[0]=w-(m+f)+(f-S),v=x+m,f=v-x,b=x-(v-f)+(m-f),m=b-k,f=b-m,Fr[1]=b-(m+f)+(f-k),C=v+m,f=C-v,Fr[2]=v-(C-f)+(m-f),Fr[3]=C;const D=UA(R,FB,4,Fr,PB);x=a*c,d=cr*a,h=d-(d-a),p=a-h,d=cr*c,g=d-(d-c),y=c-g,w=p*y-(x-h*g-p*g-h*y),k=l*u,d=cr*l,h=d-(d-l),p=l-h,d=cr*u,g=d-(d-u),y=u-g,S=p*y-(k-h*g-p*g-h*y),m=w-S,f=w-m,Fr[0]=w-(m+f)+(f-S),v=x+m,f=v-x,b=x-(v-f)+(m-f),m=b-k,f=b-m,Fr[1]=b-(m+f)+(f-k),C=v+m,f=C-v,Fr[2]=v-(C-f)+(m-f),Fr[3]=C;const I=UA(D,PB,4,Fr,RB);return RB[I-1]}function mx(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=NIe*u?l:-zIe(e,t,n,r,i,o,u)}const DB=Math.pow(2,-52),yx=new Uint32Array(512);class qS{static from(t,n=WIe,r=HIe){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new qS(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let _=0;_<s;_++){const $=t[2*_],A=t[2*_+1];$<a&&(a=$),A<l&&(l=A),$>u&&(u=$),A>c&&(c=A),this._ids[_]=_}const f=(a+u)/2,d=(l+c)/2;let h,p,g;for(let _=0,$=1/0;_<s;_++){const A=VA(f,d,t[2*_],t[2*_+1]);A<$&&(h=_,$=A)}const y=t[2*h],m=t[2*h+1];for(let _=0,$=1/0;_<s;_++){if(_===h)continue;const A=VA(y,m,t[2*_],t[2*_+1]);A<$&&A>0&&(p=_,$=A)}let v=t[2*p],b=t[2*p+1],x=1/0;for(let _=0;_<s;_++){if(_===h||_===p)continue;const $=UIe(y,m,v,b,t[2*_],t[2*_+1]);$<x&&(g=_,x=$)}let w=t[2*g],k=t[2*g+1];if(x===1/0){for(let A=0;A<s;A++)this._dists[A]=t[2*A]-t[0]||t[2*A+1]-t[1];rp(this._ids,this._dists,0,s-1);const _=new Uint32Array(s);let $=0;for(let A=0,O=-1/0;A<s;A++){const M=this._ids[A],P=this._dists[M];P>O&&(_[$++]=M,O=P)}this.hull=_.subarray(0,$),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(mx(y,m,v,b,w,k)<0){const _=p,$=v,A=b;p=g,v=w,b=k,g=_,w=$,k=A}const S=VIe(y,m,v,b,w,k);this._cx=S.x,this._cy=S.y;for(let _=0;_<s;_++)this._dists[_]=VA(t[2*_],t[2*_+1],S.x,S.y);rp(this._ids,this._dists,0,s-1),this._hullStart=h;let C=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,o.fill(-1),o[this._hashKey(y,m)]=h,o[this._hashKey(v,b)]=p,o[this._hashKey(w,k)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let _=0,$,A;_<this._ids.length;_++){const O=this._ids[_],M=t[2*O],P=t[2*O+1];if(_>0&&Math.abs(M-$)<=DB&&Math.abs(P-A)<=DB||($=M,A=P,O===h||O===p||O===g))continue;let R=0;for(let Y=0,W=this._hashKey(M,P);Y<this._hashSize&&(R=o[(W+Y)%this._hashSize],!(R!==-1&&R!==r[R]));Y++);R=n[R];let D=R,I;for(;I=r[D],mx(M,P,t[2*D],t[2*D+1],t[2*I],t[2*I+1])>=0;)if(D=I,D===R){D=-1;break}if(D===-1)continue;let N=this._addTriangle(D,O,r[D],-1,-1,i[D]);i[O]=this._legalize(N+2),i[D]=N,C++;let B=r[D];for(;I=r[B],mx(M,P,t[2*B],t[2*B+1],t[2*I],t[2*I+1])<0;)N=this._addTriangle(B,O,I,i[O],-1,i[B]),i[O]=this._legalize(N+2),r[B]=B,C--,B=I;if(D===R)for(;I=n[D],mx(M,P,t[2*I],t[2*I+1],t[2*D],t[2*D+1])<0;)N=this._addTriangle(I,O,D,-1,i[D],i[I]),this._legalize(N+2),i[I]=N,r[D]=D,C--,D=I;this._hullStart=n[O]=D,r[D]=n[B]=O,r[O]=B,o[this._hashKey(M,P)]=O,o[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array(C);for(let _=0,$=this._hullStart;_<C;_++)this.hull[_]=$,$=r[$];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(jIe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=yx[--o];continue}const u=a-a%3,c=l+(t+1)%3,f=u+(a+2)%3,d=n[s],h=n[t],p=n[c],g=n[f];if(BIe(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const m=r[f];if(m===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,m),this._link(a,r[s]),this._link(s,f);const v=u+(a+1)%3;o<yx.length&&(yx[o++]=v)}else{if(o===0)break;t=yx[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function jIe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function VA(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function BIe(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,c=n-s,f=r-a,d=i-s,h=o-a,p=l*l+u*u,g=c*c+f*f,y=d*d+h*h;return l*(f*y-g*h)-u*(c*y-g*d)+p*(c*h-f*d)<0}function UIe(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=(u*c-a*f)*d,p=(s*f-l*c)*d;return h*h+p*p}function VIe(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=e+(u*c-a*f)*d,p=t+(s*f-l*c)*d;return{x:h,y:p}}function rp(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;Zm(e,i,o),t[e[n]]>t[e[r]]&&Zm(e,n,r),t[e[o]]>t[e[r]]&&Zm(e,o,r),t[e[n]]>t[e[o]]&&Zm(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;Zm(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(rp(e,t,o,r),rp(e,t,n,s-1)):(rp(e,t,n,s-1),rp(e,t,o,r))}}function Zm(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function WIe(e){return e[0]}function HIe(e){return e[1]}const OB=1e-6;class Ff{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>OB||Math.abs(this._y1-o)>OB)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class M4{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let qIe=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,y=0,m=r.length,v,b;g<m;g+=3,y+=2){const x=r[g]*2,w=r[g+1]*2,k=r[g+2]*2,S=t[x],C=t[x+1],_=t[w],$=t[w+1],A=t[k],O=t[k+1],M=_-S,P=$-C,R=A-S,D=O-C,I=(M*D-P*R)*2;if(Math.abs(I)<1e-9){if(o===void 0){o=s=0;for(const B of n)o+=t[B*2],s+=t[B*2+1];o/=n.length,s/=n.length}const N=1e9*Math.sign((o-S)*D-(s-C)*R);v=(S+A)/2-N*D,b=(C+O)/2+N*R}else{const N=1/I,B=M*M+P*P,Y=R*R+D*D;v=S+(D*B-P*Y)*N,b=C+(M*Y-R*B)*N}a[y]=v,a[y+1]=b}let l=n[n.length-1],u,c=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=c,f=d,h=p,c=l*4,d=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Ff:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=s[h],y=s[h+1],m=s[p],v=s[p+1];this._renderSegment(g,y,m,v,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const f=Math.floor(i[u]/3)*2,d=s[f],h=s[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Ff:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Ff:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new M4;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,y,m,v;if(u===0){if((p=this._clipSegment(o,s,a,l,u,c))===null)continue;[g,y,m,v]=p}else{if((p=this._clipSegment(a,l,o,s,c,u))===null)continue;[m,v,g,y]=p,f=d,d=this._edgecode(g,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,y):i=[g,y]}f=d,d=this._edgecode(m,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,v):i=[m,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,u,c=o||s;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=d,d=this._edgecode(a[u],a[u+1]),f&&d&&(u=this._edge(t,f,d,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const GIe=2*Math.PI,xh=Math.pow;function YIe(e){return e[0]}function XIe(e){return e[1]}function KIe(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function QIe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class uO{static from(t,n=YIe,r=XIe,i){return new uO("length"in t?ZIe(t,n,r,i):Float64Array.from(JIe(t,n,r,i)))}constructor(t){this._delaunator=new qS(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&KIe(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=QIe(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new qS(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(r[l]===-1||s[c]===-1)&&(s[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new qIe(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=xh(n-u[t*2],2)+xh(r-u[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=xh(n-u[p*2],2)+xh(r-u[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==p&&xh(n-u[h*2],2)+xh(r-u[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Ff:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,c=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Ff:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,GIe)}return r&&r.value()}renderHull(t){const n=t==null?t=new Ff:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new M4;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Ff:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new M4;return this.renderTriangle(t,n),n.value()}}function ZIe(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*JIe(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function cO(e){V.call(this,null,e)}cO.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const eLe=[-1e5,-1e5,1e5,1e5];ne(cO,V,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:eLe;const o=this.value=uO.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!nLe(l)?tLe(l):null}return t.reflow(e.modified()).modifies(n)}});function tLe(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function nLe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const rLe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:cO},Symbol.toStringTag,{value:"Module"}));var WA=Math.PI/180,W0=64,P2=2048;function iLe(){var e=[256,256],t,n,r,i,o,s,a,l=lie,u=[],c=Math.random,f={};f.layout=function(){for(var p=d(Ju()),g=cLe((e[0]>>5)*e[1]),y=null,m=u.length,v=-1,b=[],x=u.map(k=>({text:t(k),font:n(k),style:i(k),weight:o(k),rotate:s(k),size:~~(r(k)+1e-14),padding:a(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,S)=>S.size-k.size);++v<m;){var w=x[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,oLe(p,w,x,v),w.hasText&&h(g,w,y)&&(b.push(w),y?aLe(y,w):y=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(W0<<5)/g,p.height=P2/g;var y=p.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:g}}function h(p,g,y){for(var m=g.x,v=g.y,b=Math.hypot(e[0],e[1]),x=l(e),w=c()<.5?1:-1,k=-w,S,C,_;(S=x(k+=w))&&(C=~~S[0],_=~~S[1],!(Math.min(Math.abs(C),Math.abs(_))>=b));)if(g.x=m+C,g.y=v+_,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!y||!sLe(g,p,e[0]))&&(!y||lLe(g,y))){for(var $=g.sprite,A=g.width>>5,O=e[0]>>5,M=g.x-(A<<4),P=M&127,R=32-P,D=g.y1-g.y0,I=(g.y+g.y0)*O+(M>>5),N,B=0;B<D;B++){N=0;for(var Y=0;Y<=A;Y++)p[I+Y]|=N<<R|(Y<A?(N=$[B*A+Y])>>>P:0);I+=O}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(u=p,f):u},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Gc(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Gc(p),f):i},f.fontWeight=function(p){return arguments.length?(o=Gc(p),f):o},f.rotate=function(p){return arguments.length?(s=Gc(p),f):s},f.text=function(p){return arguments.length?(t=Gc(p),f):t},f.spiral=function(p){return arguments.length?(l=fLe[p]||p,f):l},f.fontSize=function(p){return arguments.length?(r=Gc(p),f):r},f.padding=function(p){return arguments.length?(a=Gc(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function oLe(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(W0<<5)/o,P2/o);var s=0,a=0,l=0,u=n.length,c,f,d,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*WA),y=Math.cos(t.rotate*WA),m=c*y,v=c*g,b=d*y,x=d*g;c=Math.max(Math.abs(m+x),Math.abs(m-x))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>l&&(l=d),s+c>=W0<<5&&(s=0,a+=l,l=0),a+d>=P2)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*WA),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var w=i.getImageData(0,0,(W0<<5)/o,P2/o).data,k=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)k[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var _=f*p+(h>>5),$=w[(a+p)*(W0<<5)+(s+h)<<2]?1<<31-h%32:0;k[_]|=$,S|=$}S?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=k.slice(0,(t.y1-t.y0)*f)}}}function sLe(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[u+d])return!0;u+=n}return!1}function aLe(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function lLe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function lie(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function uLe(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function cLe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Gc(e){return typeof e=="function"?e:function(){return e}}var fLe={archimedean:lie,rectangular:uLe};const uie=["x","y","font","fontSize","fontStyle","fontWeight","angle"],dLe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function fO(e){V.call(this,iLe(),e)}fO.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:uie}]};ne(fO,V,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&q("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return Ne(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||dLe.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||uie;let a=e.fontSize||14,l;if(Ne(a)?l=e.fontSizeRange:a=Tr(a),l){const p=a,g=et("sqrt")().domain(Sa(i,p)).range(l);a=y=>g(p(y))}i.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(No).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=u.length;for(let p=0,g,y;p<h;++p)g=u[p],y=g.datum,y[s[0]]=g.x+f,y[s[1]]=g.y+d,y[s[2]]=g.font,y[s[3]]=g.size,y[s[4]]=g.style,y[s[5]]=g.weight,y[s[6]]=g.rotate;return t.reflow(r).modifies(s)}});const hLe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:fO},Symbol.toStringTag,{value:"Module"})),pLe=e=>new Uint8Array(e),gLe=e=>new Uint16Array(e),Ey=e=>new Uint32Array(e);function mLe(){let e=8,t=[],n=Ey(0),r=vx(0,e),i=vx(0,e);return{data:()=>t,seen:()=>n=yLe(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)l[f]=t[f],u[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?u[f]=-1:(u[f]=d,r[d]=r[f],i[d]=i[f],l[d]=c,c._index=d++),r[f]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=vx(o,e,r),i=vx(o,e))}}}function yLe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function vx(e,t,n){const r=(t<257?pLe:t<65537?gLe:Ey)(e);return n&&r.set(n),r}function NB(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],c=a[1],f=l.length;let d;for(d=0;d<u;++d)o[l[d]]|=r;for(d=c;d<f;++d)o[l[d]]|=r;return s}}}function IB(){let e=Ey(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,f=l.length,d=Ey(f);let h=Array(f),p,g,y;for(y=0;y<f;++y)h[y]=a(l[y]),d[y]=y;if(h=vLe(h,d),c)p=t,g=e,t=Array(c+f),e=Ey(c+f),bLe(u,p,g,c,h,d,f,t,e);else{if(u>0)for(y=0;y<f;++y)d[y]+=u;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,l){const u=n;let c,f,d;for(f=0;!l[e[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[M5e(l,a[0],0,u),ac(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function vLe(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),R5e(e,t)}function bLe(e,t,n,r,i,o,s,a,l){let u=0,c=0,f;for(f=0;u<r&&c<s;++f)t[u]<i[c]?(a[f]=t[u],l[f]=n[u++]):(a[f]=i[c],l[f]=o[c++]+e);for(;u<r;++u,++f)a[f]=t[u],l[f]=n[u];for(;c<s;++c,++f)a[f]=i[c],l[f]=o[c]+e}function dO(e){V.call(this,mLe(),e),this._indices=null,this._dims=null}dO.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ne(dO,V,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=IB()),o.push(NB(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,y,m,v,b,x,w,k,S;if(u.set(l),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,k=v.length;w<k;++w)x[v[w]._index]=1;for(w=0;w<h;++w)S=r[w],(!s[w]||e.modified("fields",w)||t.modified(S.fields))&&(m=S.fname,(g=p[m])||(o[m]=y=IB(),p[m]=g=y.insert(S,t.source,0)),s[w]=NB(y,w,i[w]).onAdd(g,l));for(w=0,k=a.data().length;w<k;++w)b[w]||(u[w]!==l[w]?f.push(w):x[w]&&l[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const y=i.curr(),m=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,g=l[p]||(l[p]=s[p].insert(a[h],r,d)),o[h].onAdd(g,y);for(;d<c;++d)m[d]=v,y[d]!==v&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=u[0],p=u[1],g=e.one;let y,m,v;if(f<h)for(y=f,m=Math.min(h,d);y<m;++y)v=l[y],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(f>h)for(y=h,m=Math.min(f,p);y<m;++y)v=l[y],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;if(d>p)for(y=Math.max(f,p),m=d;y<m;++y)v=l[y],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(d<p)for(y=Math.max(h,d),m=p;y<m;++y)v=l[y],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=a[0],d=a[1],h=e.one;let p,g,y;if(u<f)for(p=u,g=Math.min(f,c);p<g;++p)y=s[p],o[y]^=h,n.push(y);else if(u>f)for(p=f,g=Math.min(u,d);p<g;++p)y=s[p],o[y]^=h,r.push(y);if(c>d)for(p=Math.max(u,d),g=c;p<g;++p)y=s[p],o[y]^=h,n.push(y);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)y=s[p],o[y]^=h,r.push(y);e.range=t.slice()}});function hO(e){V.call(this,null,e)}hO.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ne(hO,V,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:s[c];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^l[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^l[c]&n))?s[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const xLe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:dO,resolvefilter:hO},Symbol.toStringTag,{value:"Module"})),wLe="RawCode",yd="Literal",SLe="Property",kLe="Identifier",CLe="ArrayExpression",_Le="BinaryExpression",cie="CallExpression",ELe="ConditionalExpression",$Le="LogicalExpression",ALe="MemberExpression",TLe="ObjectExpression",MLe="UnaryExpression";function Ms(e){this.type=e}Ms.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=FLe(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function FLe(e){switch(e.type){case CLe:return e.elements;case _Le:case $Le:return[e.left,e.right];case cie:return[e.callee].concat(e.arguments);case ELe:return[e.test,e.consequent,e.alternate];case ALe:return[e.object,e.property];case TLe:return e.properties;case SLe:return[e.key,e.value];case MLe:return[e.argument];case kLe:case yd:case wLe:default:return[]}}var Da,ge,H,_r,dt,p_=1,Lv=2,vd=3,Pc=4,g_=5,qd=6,oi=7,zv=8,PLe=9;Da={};Da[p_]="Boolean";Da[Lv]="<end>";Da[vd]="Identifier";Da[Pc]="Keyword";Da[g_]="Null";Da[qd]="Numeric";Da[oi]="Punctuator";Da[zv]="String";Da[PLe]="RegularExpression";var RLe="ArrayExpression",DLe="BinaryExpression",OLe="CallExpression",NLe="ConditionalExpression",fie="Identifier",ILe="Literal",LLe="LogicalExpression",zLe="MemberExpression",jLe="ObjectExpression",BLe="Property",ULe="UnaryExpression",Rn="Unexpected token %0",VLe="Unexpected number",WLe="Unexpected string",HLe="Unexpected identifier",qLe="Unexpected reserved word",GLe="Unexpected end of input",F4="Invalid regular expression",HA="Invalid regular expression: missing /",die="Octal literals are not allowed in strict mode.",YLe="Duplicate data property in object literal not allowed in strict mode",Zn="ILLEGAL",C1="Disabled.",XLe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),KLe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function m_(e,t){if(!e)throw new Error("ASSERT: "+t)}function el(e){return e>=48&&e<=57}function pO(e){return"0123456789abcdefABCDEF".includes(e)}function $y(e){return"01234567".includes(e)}function QLe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function _1(e){return e===10||e===13||e===8232||e===8233}function jv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&XLe.test(String.fromCharCode(e))}function GS(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&KLe.test(String.fromCharCode(e))}const ZLe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function hie(){for(;H<_r;){const e=ge.charCodeAt(H);if(QLe(e)||_1(e))++H;else break}}function P4(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)H<_r&&pO(ge[H])?(r=ge[H++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Qe({},Rn,Zn);return String.fromCharCode(i)}function JLe(){var e,t,n,r;for(e=ge[H],t=0,e==="}"&&Qe({},Rn,Zn);H<_r&&(e=ge[H++],!!pO(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Qe({},Rn,Zn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function pie(){var e,t;for(e=ge.charCodeAt(H++),t=String.fromCharCode(e),e===92&&(ge.charCodeAt(H)!==117&&Qe({},Rn,Zn),++H,e=P4("u"),(!e||e==="\\"||!jv(e.charCodeAt(0)))&&Qe({},Rn,Zn),t=e);H<_r&&(e=ge.charCodeAt(H),!!GS(e));)++H,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ge.charCodeAt(H)!==117&&Qe({},Rn,Zn),++H,e=P4("u"),(!e||e==="\\"||!GS(e.charCodeAt(0)))&&Qe({},Rn,Zn),t+=e);return t}function e7e(){var e,t;for(e=H++;H<_r;){if(t=ge.charCodeAt(H),t===92)return H=e,pie();if(GS(t))++H;else break}return ge.slice(e,H)}function t7e(){var e,t,n;return e=H,t=ge.charCodeAt(H)===92?pie():e7e(),t.length===1?n=vd:ZLe.hasOwnProperty(t)?n=Pc:t==="null"?n=g_:t==="true"||t==="false"?n=p_:n=vd,{type:n,value:t,start:e,end:H}}function qA(){var e=H,t=ge.charCodeAt(H),n,r=ge[H],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++H,{type:oi,value:String.fromCharCode(t),start:e,end:H};default:if(n=ge.charCodeAt(H+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return H+=2,{type:oi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:H};case 33:case 61:return H+=2,ge.charCodeAt(H)===61&&++H,{type:oi,value:ge.slice(e,H),start:e,end:H}}}if(s=ge.substr(H,4),s===">>>=")return H+=4,{type:oi,value:s,start:e,end:H};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return H+=3,{type:oi,value:o,start:e,end:H};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return H+=2,{type:oi,value:i,start:e,end:H};if(i==="//"&&Qe({},Rn,Zn),"<>=!+-*%&|^/".includes(r))return++H,{type:oi,value:r,start:e,end:H};Qe({},Rn,Zn)}function n7e(e){let t="";for(;H<_r&&pO(ge[H]);)t+=ge[H++];return t.length===0&&Qe({},Rn,Zn),jv(ge.charCodeAt(H))&&Qe({},Rn,Zn),{type:qd,value:parseInt("0x"+t,16),start:e,end:H}}function r7e(e){let t="0"+ge[H++];for(;H<_r&&$y(ge[H]);)t+=ge[H++];return(jv(ge.charCodeAt(H))||el(ge.charCodeAt(H)))&&Qe({},Rn,Zn),{type:qd,value:parseInt(t,8),octal:!0,start:e,end:H}}function LB(){var e,t,n;if(n=ge[H],m_(el(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=H,e="",n!=="."){if(e=ge[H++],n=ge[H],e==="0"){if(n==="x"||n==="X")return++H,n7e(t);if($y(n))return r7e(t);n&&el(n.charCodeAt(0))&&Qe({},Rn,Zn)}for(;el(ge.charCodeAt(H));)e+=ge[H++];n=ge[H]}if(n==="."){for(e+=ge[H++];el(ge.charCodeAt(H));)e+=ge[H++];n=ge[H]}if(n==="e"||n==="E")if(e+=ge[H++],n=ge[H],(n==="+"||n==="-")&&(e+=ge[H++]),el(ge.charCodeAt(H)))for(;el(ge.charCodeAt(H));)e+=ge[H++];else Qe({},Rn,Zn);return jv(ge.charCodeAt(H))&&Qe({},Rn,Zn),{type:qd,value:parseFloat(e),start:t,end:H}}function i7e(){var e="",t,n,r,i,o=!1;for(t=ge[H],m_(t==="'"||t==='"',"String literal must starts with a quote"),n=H,++H;H<_r;)if(r=ge[H++],r===t){t="";break}else if(r==="\\")if(r=ge[H++],!r||!_1(r.charCodeAt(0)))switch(r){case"u":case"x":ge[H]==="{"?(++H,e+=JLe()):e+=P4(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:$y(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),H<_r&&$y(ge[H])&&(o=!0,i=i*8+"01234567".indexOf(ge[H++]),"0123".includes(r)&&H<_r&&$y(ge[H])&&(i=i*8+"01234567".indexOf(ge[H++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ge[H]===`
`&&++H;else{if(_1(r.charCodeAt(0)))break;e+=r}return t!==""&&Qe({},Rn,Zn),{type:zv,value:e,octal:o,start:n,end:H}}function o7e(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Qe({},F4)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Qe({},F4)}try{return new RegExp(e,t)}catch{return null}}function s7e(){var e,t,n,r,i;for(e=ge[H],m_(e==="/","Regular expression literal must start with a slash"),t=ge[H++],n=!1,r=!1;H<_r;)if(e=ge[H++],t+=e,e==="\\")e=ge[H++],_1(e.charCodeAt(0))&&Qe({},HA),t+=e;else if(_1(e.charCodeAt(0)))Qe({},HA);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Qe({},HA),i=t.substr(1,t.length-2),{value:i,literal:t}}function a7e(){var e,t,n;for(t="",n="";H<_r&&(e=ge[H],!!GS(e.charCodeAt(0)));)++H,e==="\\"&&H<_r?Qe({},Rn,Zn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Qe({},F4,n),{value:n,literal:t}}function l7e(){var e,t,n,r;return dt=null,hie(),e=H,t=s7e(),n=a7e(),r=o7e(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:H}}function u7e(e){return e.type===vd||e.type===Pc||e.type===p_||e.type===g_}function gie(){if(hie(),H>=_r)return{type:Lv,start:H,end:H};const e=ge.charCodeAt(H);return jv(e)?t7e():e===40||e===41||e===59?qA():e===39||e===34?i7e():e===46?el(ge.charCodeAt(H+1))?LB():qA():el(e)?LB():qA()}function ui(){const e=dt;return H=e.end,dt=gie(),H=e.end,e}function mie(){const e=H;dt=gie(),H=e}function c7e(e){const t=new Ms(RLe);return t.elements=e,t}function zB(e,t,n){const r=new Ms(e==="||"||e==="&&"?LLe:DLe);return r.operator=e,r.left=t,r.right=n,r}function f7e(e,t){const n=new Ms(OLe);return n.callee=e,n.arguments=t,n}function d7e(e,t,n){const r=new Ms(NLe);return r.test=e,r.consequent=t,r.alternate=n,r}function gO(e){const t=new Ms(fie);return t.name=e,t}function H0(e){const t=new Ms(ILe);return t.value=e.value,t.raw=ge.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function jB(e,t,n){const r=new Ms(zLe);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function h7e(e){const t=new Ms(jLe);return t.properties=e,t}function BB(e,t,n){const r=new Ms(BLe);return r.key=t,r.value=n,r.kind=e,r}function p7e(e,t){const n=new Ms(ULe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Qe(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(m_(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=H,n.description=i,n}function y_(e){e.type===Lv&&Qe(e,GLe),e.type===qd&&Qe(e,VLe),e.type===zv&&Qe(e,WLe),e.type===vd&&Qe(e,HLe),e.type===Pc&&Qe(e,qLe),Qe(e,Rn,e.value)}function Er(e){const t=ui();(t.type!==oi||t.value!==e)&&y_(t)}function Ft(e){return dt.type===oi&&dt.value===e}function GA(e){return dt.type===Pc&&dt.value===e}function g7e(){const e=[];for(H=dt.start,Er("[");!Ft("]");)Ft(",")?(ui(),e.push(null)):(e.push(bd()),Ft("]")||Er(","));return ui(),c7e(e)}function UB(){H=dt.start;const e=ui();return e.type===zv||e.type===qd?(e.octal&&Qe(e,die),H0(e)):gO(e.value)}function m7e(){var e,t,n,r;if(H=dt.start,e=dt,e.type===vd)return n=UB(),Er(":"),r=bd(),BB("init",n,r);if(e.type===Lv||e.type===oi)y_(e);else return t=UB(),Er(":"),r=bd(),BB("init",t,r)}function y7e(){var e=[],t,n,r,i={},o=String;for(H=dt.start,Er("{");!Ft("}");)t=m7e(),t.key.type===fie?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Qe({},YLe):i[r]=!0,e.push(t),Ft("}")||Er(",");return Er("}"),h7e(e)}function v7e(){Er("(");const e=mO();return Er(")"),e}const b7e={if:1};function x7e(){var e,t,n;if(Ft("("))return v7e();if(Ft("["))return g7e();if(Ft("{"))return y7e();if(e=dt.type,H=dt.start,e===vd||b7e[dt.value])n=gO(ui().value);else if(e===zv||e===qd)dt.octal&&Qe(dt,die),n=H0(ui());else{if(e===Pc)throw new Error(C1);e===p_?(t=ui(),t.value=t.value==="true",n=H0(t)):e===g_?(t=ui(),t.value=null,n=H0(t)):Ft("/")||Ft("/=")?(n=H0(l7e()),mie()):y_(ui())}return n}function w7e(){const e=[];if(Er("("),!Ft(")"))for(;H<_r&&(e.push(bd()),!Ft(")"));)Er(",");return Er(")"),e}function S7e(){H=dt.start;const e=ui();return u7e(e)||y_(e),gO(e.value)}function k7e(){return Er("."),S7e()}function C7e(){Er("[");const e=mO();return Er("]"),e}function _7e(){var e,t,n;for(e=x7e();;)if(Ft("."))n=k7e(),e=jB(".",e,n);else if(Ft("("))t=w7e(),e=f7e(e,t);else if(Ft("["))n=C7e(),e=jB("[",e,n);else break;return e}function VB(){const e=_7e();if(dt.type===oi&&(Ft("++")||Ft("--")))throw new Error(C1);return e}function R2(){var e,t;if(dt.type!==oi&&dt.type!==Pc)t=VB();else{if(Ft("++")||Ft("--"))throw new Error(C1);if(Ft("+")||Ft("-")||Ft("~")||Ft("!"))e=ui(),t=R2(),t=p7e(e.value,t);else{if(GA("delete")||GA("void")||GA("typeof"))throw new Error(C1);t=VB()}}return t}function WB(e){let t=0;if(e.type!==oi&&e.type!==Pc)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function E7e(){var e,t,n,r,i,o,s,a,l,u;if(e=dt,l=R2(),r=dt,i=WB(r),i===0)return l;for(r.prec=i,ui(),t=[e,dt],s=R2(),o=[l,r,s];(i=WB(dt))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=zB(a,l,s),o.push(n);r=ui(),r.prec=i,o.push(r),t.push(dt),n=R2(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=zB(o[u-1].value,o[u-2],n),u-=2;return n}function bd(){var e,t,n;return e=E7e(),Ft("?")&&(ui(),t=bd(),Er(":"),n=bd(),e=d7e(e,t,n)),e}function mO(){const e=bd();if(Ft(","))throw new Error(C1);return e}function yO(e){ge=e,H=0,_r=ge.length,dt=null,mie();const t=mO();if(dt.type!==Lv)throw new Error("Unexpect token after expression.");return t}var yie={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function vie(e){function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&q("Missing arguments to clamp function."),s.length>3&&q("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&q("Missing arguments to if function."),s.length>3&&q("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function $7e(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function bie(e){e=e||{};const t=e.allowed?ws(e.allowed):{},n=e.forbidden?ws(e.forbidden):{},r=e.constants||yie,i=(e.functions||vie)(f),o=e.globalvar,s=e.fieldvar,a=Ne(o)?o:p=>`${o}["${p}"]`;let l={},u={},c=0;function f(p){if(le(p))return p;const g=d[p.type];return g==null&&q("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:ce(n,g)?q("Illegal identifier: "+g):ce(r,g)?r[g]:ce(t,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,y=f(p.object);g&&(c+=1);const m=f(p.property);return y===s&&(u[$7e(m)]=1),g&&(c-=1),y+(g?"."+m:"["+m+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&q("Illegal callee type: "+p.callee.type);const g=p.callee.name,y=p.arguments,m=ce(i,g)&&i[g];return m||q("Unrecognized function: "+g),Ne(m)?m(y):m+"("+y.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}const HB=Symbol("vega_selection_getter");function xie(e){return(!e.getter||!e.getter[HB])&&(e.getter=Ro(e.field),e.getter[HB]=!0),e.getter}const vO="intersect",qB="union",A7e="vlMulti",T7e="vlPoint",GB="or",M7e="and",ta="_vgsid_",E1=Ro(ta),F7e="E",P7e="R",R7e="R-E",D7e="R-LE",O7e="R-RE",YS="index:unit";function YB(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=xie(a)(e),Qu(s)&&(s=wr(s)),Qu(r[o])&&(r[o]=wr(r[o])),G(r[o])&&Qu(r[o][0])&&(r[o]=r[o].map(wr)),a.type===F7e){if(G(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===P7e){if(!Jh(s,r[o]))return!1}else if(a.type===O7e){if(!Jh(s,r[o],!0,!1))return!1}else if(a.type===R7e){if(!Jh(s,r[o],!1,!1))return!1}else if(a.type===D7e&&!Jh(s,r[o],!1,!0))return!1;return!0}function N7e(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[YS]&&r[YS].value:void 0,s=n===vO,a=i.length,l=0,u,c,f,d,h;l<a;++l)if(u=i[l],o&&s){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=YB(t,u),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=YB(t,u),s^h)return h;return a&&s}const wie=Jg(E1),I7e=wie.left,L7e=wie.right;function z7e(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[YS]&&r[YS].value:void 0,s=n===vO,a=E1(t),l=I7e(i,a);if(l===i.length||E1(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(L7e(i,a)-l<o.size)return!1}return!0}function j7e(e,t){return e.map(n=>Oe(t.fields?{values:t.fields.map(r=>xie(r)(n.datum))}:{[ta]:E1(n.datum)},t))}function B7e(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,c,f,d,h,p,g,y,m,v,b=o.length,x=0,w,k;x<b;++x)if(u=o[x],d=u.unit,c=u.fields,f=u.values,c&&f){for(w=0,k=c.length;w<k;++w)h=c[w],g=s[h.field]||(s[h.field]={}),y=g[d]||(g[d]=[]),l[h.field]=m=h.type.charAt(0),v=YA[`${m}_union`],g[d]=v(y,ae(f[w]));n&&(y=a[d]||(a[d]=[]),y.push(ae(f).reduce((S,C,_)=>(S[c[_].field]=C,S),{})))}else h=ta,p=E1(u),g=s[h]||(s[h]={}),y=g[d]||(g[d]=[]),y.push(p),n&&(y=a[d]||(a[d]=[]),y.push({[ta]:p}));if(t=t||qB,s[ta]?s[ta]=YA[`${ta}_${t}`](...Object.values(s[ta])):Object.keys(s).forEach(S=>{s[S]=Object.keys(s[S]).map(C=>s[S][C]).reduce((C,_)=>C===void 0?_:YA[`${l[S]}_${t}`](C,_))}),o=Object.keys(a),n&&o.length){const S=r?T7e:A7e;s[S]=t===qB?{[GB]:o.reduce((C,_)=>(C.push(...a[_]),C),[])}:{[M7e]:o.map(C=>({[GB]:a[C]}))}}return s}var YA={[`${ta}_union`]:U5e,[`${ta}_intersect`]:j5e,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=wr(t[0]),r=wr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=wr(t[0]),r=wr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const U7e=":",V7e="@";function bO(e,t,n,r){t[0].type!==yd&&q("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&qe(t).value,s="unit",a=V7e+s,l=U7e+i;o===vO&&!ce(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),ce(r,l)||(r[l]=n.getData(i).tuplesRef())}function Sie(e){const t=this.context.data[e];return t?t.values.value:[]}function W7e(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function H7e(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Do).insert(t)),1}function q7e(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Bv=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},G7e=Bv("format"),kie=Bv("timeFormat"),Y7e=Bv("utcFormat"),X7e=Bv("timeParse"),K7e=Bv("utcParse"),bx=new Date(2e3,0,1);function v_(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(bx.setYear(2e3),bx.setMonth(e),bx.setDate(t),kie.call(this,bx,n))}function Q7e(e){return v_.call(this,e,1,"%B")}function Z7e(e){return v_.call(this,e,1,"%b")}function J7e(e){return v_.call(this,0,2+e,"%A")}function eze(e){return v_.call(this,0,2+e,"%a")}const tze=":",nze="@",R4="%",Cie="$";function xO(e,t,n,r){t[0].type!==yd&&q("First argument to data functions must be a string literal.");const i=t[0].value,o=tze+i;if(!ce(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function rze(e,t,n,r){t[0].type!==yd&&q("First argument to indata must be a string literal."),t[1].type!==yd&&q("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=nze+o;ce(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function Xr(e,t,n,r){if(t[0].type===yd)XB(n,r,t[0].value);else for(e in n.scales)XB(n,r,e)}function XB(e,t,n){const r=R4+n;if(!ce(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Oa(e,t){if(Ne(e))return e;if(le(e)){const n=t.scales[e];return n&&pPe(n.value)?n.value:void 0}}function ize(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Xr,n._range=Xr,n._scale=Xr;const r=i=>"_["+(i.type===yd?te(R4+i.value):te(R4)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function wO(e,t){return function(n,r,i){if(n){const o=Oa(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const oze=wO("area",TOe),sze=wO("bounds",ROe),aze=wO("centroid",zOe);function lze(e,t){const n=Oa(e,(t||this).context);return n&&n.scale()}function uze(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function SO(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function cze(){return SO(this.context.dataflow,"warn",arguments)}function fze(){return SO(this.context.dataflow,"info",arguments)}function dze(){return SO(this.context.dataflow,"debug",arguments)}function XA(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function D4(e){const t=fc(e),n=XA(t.r),r=XA(t.g),i=XA(t.b);return .2126*n+.7152*r+.0722*i}function hze(e,t){const n=D4(e),r=D4(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function pze(){const e=[].slice.call(arguments);return e.unshift({}),Oe(...e)}function _ie(e,t){return e===t||e!==e&&t!==t?!0:G(e)?G(t)&&e.length===t.length?gze(e,t):!1:se(e)&&se(t)?Eie(e,t):!1}function gze(e,t){for(let n=0,r=e.length;n<r;++n)if(!_ie(e[n],t[n]))return!1;return!0}function Eie(e,t){for(const n in e)if(!_ie(e[n],t[n]))return!1;return!0}function KB(e){return t=>Eie(e,t)}function mze(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(f=n===!0?Do:G(n)||$C(n)?n:KB(n),c.remove(f)),t&&c.insert(t),r&&(f=KB(r),l.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function yze(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function vze(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const QB={};function bze(e,t){const n=QB[t]||(QB[t]=Ro(t));return G(e)?e.map(n):n(e)}function kO(e){return G(e)||ArrayBuffer.isView(e)?e:null}function CO(e){return kO(e)||(le(e)?e:null)}function xze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kO(e).join(...n)}function wze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return CO(e).indexOf(...n)}function Sze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return CO(e).lastIndexOf(...n)}function kze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return CO(e).slice(...n)}function Cze(e,t,n){return Ne(n)&&q("Function argument passed to replace."),String(e).replace(t,n)}function _ze(e){return kO(e).slice().reverse()}function Eze(e,t,n){return N6(e||0,t||0,n||0)}function $ze(e,t){const n=Oa(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Aze(e,t){const n=Oa(e,(t||this).context);return n?n.copy():void 0}function Tze(e,t){const n=Oa(e,(t||this).context);return n?n.domain():[]}function Mze(e,t,n){const r=Oa(e,(n||this).context);return r?G(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Fze(e,t){const n=Oa(e,(t||this).context);return n&&n.range?n.range():[]}function Pze(e,t,n){const r=Oa(e,(n||this).context);return r?r(t):void 0}function Rze(e,t,n,r,i){e=Oa(e,(i||this).context);const o=mte(t,n);let s=e.domain(),a=s[0],l=qe(s),u=Ar;return l-a?u=ite(e,a,l):e=(e.interpolator?et("sequential")().interpolator(e.interpolator()):et("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==qe(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o}function Dze(e,t,n){const r=Oa(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Oze(e){let t=null;return function(n){return n?m1(n,t=t||pg(e)):e}}const $ie=e=>e.data;function Aie(e,t){const n=Sie.call(t,e);return n.root&&n.root.lookup||{}}function Nze(e,t,n){const r=Aie(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map($ie):void 0}function Ize(e,t){const n=Aie(e,this)[t];return n?n.ancestors().map($ie):void 0}const Tie=()=>typeof window<"u"&&window||null;function Lze(){const e=Tie();return e?e.screen:{}}function zze(){const e=Tie();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function jze(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Mie(e,t,n){if(!e)return[];const[r,i]=e,o=new gn().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return hne(s,o,Bze(t))}function Bze(e){let t=null;if(e){const n=ae(e.marktype),r=ae(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function Uze(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ae(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Vze(e){return ae(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function Wze(e,t,n){const{x:r,y:i,mark:o}=n,s=new gn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),Mie([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>Hze(l.x,l.y,t))}function Hze(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const $1={random(){return No()},cumulativeNormal:PC,cumulativeLogNormal:OR,cumulativeUniform:zR,densityNormal:MR,densityLogNormal:DR,densityUniform:LR,quantileNormal:RC,quantileLogNormal:NR,quantileUniform:jR,sampleNormal:FC,sampleLogNormal:RR,sampleUniform:IR,isArray:G,isBoolean:$c,isDate:Qu,isDefined(e){return e!==void 0},isNumber:Ze,isObject:se,isRegExp:PQ,isString:le,isTuple:$C,isValid(e){return e!=null&&e===e},toBoolean:uR,toDate(e){return cR(e)},toNumber:wr,toString:fR,indexof:wze,join:xze,lastindexof:Sze,replace:Cze,reverse:_ze,slice:kze,flush:MQ,lerp:RQ,merge:pze,pad:NQ,peek:qe,pluck:bze,span:cv,inrange:Jh,truncate:IQ,rgb:fc,lab:Jw,hcl:eS,hsl:Qw,luminance:D4,contrast:hze,sequence:zi,format:G7e,utcFormat:Y7e,utcParse:K7e,utcOffset:gZ,utcSequence:vZ,timeFormat:kie,timeParse:X7e,timeOffset:pZ,timeSequence:yZ,timeUnitSpecifier:rZ,monthFormat:Q7e,monthAbbrevFormat:Z7e,dayFormat:J7e,dayAbbrevFormat:eze,quarter:EQ,utcquarter:$Q,week:oZ,utcweek:lZ,dayofyear:iZ,utcdayofyear:aZ,warn:cze,info:fze,debug:dze,extent(e){return Sa(e)},inScope:uze,intersect:Mie,clampRange:AQ,pinchDistance:yze,pinchAngle:vze,screen:Lze,containerSize:jze,windowSize:zze,bandspace:Eze,setdata:H7e,pathShape:Oze,panLinear:SQ,panLog:kQ,panPow:CQ,panSymlog:_Q,zoomLinear:rR,zoomLog:iR,zoomPow:Lw,zoomSymlog:oR,encode:q7e,modify:mze,lassoAppend:Uze,lassoPath:Vze,intersectLasso:Wze},qze=["view","item","group","xy","x","y"],Gze="event.vega.",Fie="this.",_O={},Pie={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${te(Cie+e)}]`,functions:Yze,constants:yie,visitors:_O},O4=bie(Pie);function Yze(e){const t=vie(e);qze.forEach(n=>t[n]=Gze+n);for(const n in $1)t[n]=Fie+n;return Oe(t,ize(e,$1,_O)),t}function cn(e,t,n){return arguments.length===1?$1[e]:($1[e]=t,n&&(_O[e]=n),O4&&(O4.functions[e]=Fie+e),this)}cn("bandwidth",$ze,Xr);cn("copy",Aze,Xr);cn("domain",Tze,Xr);cn("range",Fze,Xr);cn("invert",Mze,Xr);cn("scale",Pze,Xr);cn("gradient",Rze,Xr);cn("geoArea",oze,Xr);cn("geoBounds",sze,Xr);cn("geoCentroid",aze,Xr);cn("geoShape",Dze,Xr);cn("geoScale",lze,Xr);cn("indata",W7e,rze);cn("data",Sie,xO);cn("treePath",Nze,xO);cn("treeAncestors",Ize,xO);cn("vlSelectionTest",N7e,bO);cn("vlSelectionIdTest",z7e,bO);cn("vlSelectionResolve",B7e,bO);cn("vlSelectionTuples",j7e);function _a(e,t){const n={};let r;try{e=le(e)?e:te(e)+"",r=yO(e)}catch{q("Expression parse error: "+e)}r.visit(o=>{if(o.type!==cie)return;const s=o.callee.name,a=Pie.visitors[s];a&&a(s,o.arguments,t,n)});const i=O4(r);return i.globals.forEach(o=>{const s=Cie+o;!ce(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:Oe({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Xze(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Kze=ws(["rule"]),ZB=ws(["group","image","rect"]);function Qze(e,t){let n="";return Kze[t]||(e.x2&&(e.x?(ZB[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(ZB[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function EO(e){return(e+"").toLowerCase()}function Zze(e){return EO(e)==="operator"}function Jze(e){return EO(e)==="collect"}function Jm(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function eje(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var tje={operator:(e,t)=>Jm(e,["_"],t.code),parameter:(e,t)=>Jm(e,["datum","_"],t.code),event:(e,t)=>Jm(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Jm(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+te(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=Qze(r,n),i+="return m;",Jm(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(te).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),eje(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function nje(e){const t=this;Zze(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function rje(e){const t=this;if(e.params){const n=t.get(e.id);n||q("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function ije(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=G(i)?i.map(o=>JB(o,n,t)):JB(i,n,t)}return t}function JB(e,t,n){if(!e||!se(e))return e;for(let r=0,i=eU.length,o;r<i;++r)if(o=eU[r],ce(e,o.key))return o.parse(e,t,n);return e}var eU=[{key:"$ref",parse:oje},{key:"$key",parse:aje},{key:"$expr",parse:sje},{key:"$field",parse:lje},{key:"$encode",parse:cje},{key:"$compare",parse:uje},{key:"$context",parse:fje},{key:"$subflow",parse:dje},{key:"$tupleid",parse:hje}];function oje(e,t){return t.get(e.$ref)||q("Operator not defined: "+e.$ref)}function sje(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ei(t.parameterExpression(e.$expr),e.$fields))}function aje(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=lR(e.$key,e.$flat,t.expr.codegen))}function lje(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Ro(e.$field,e.$name,t.expr.codegen))}function uje(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ae(e.$compare).map(i=>i&&i.$tupleid?ve:i);return t.fn[n]||(t.fn[n]=sR(r,e.$order,t.expr.codegen))}function cje(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Ei(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function fje(e,t){return t}function dje(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function hje(){return ve}function pje(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&q("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function gje(e){var t=this,n=se(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||q("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const mje={skip:!0};function yje(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function vje(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],mje)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Do).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function Rie(e,t,n,r){return new Die(e,t,n,r)}function Die(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||tje,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function tU(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Die.prototype=tU.prototype={fork(){const e=new tU(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Jze(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[EO(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Xze,parseOperator:nje,parseOperatorParameters:rje,parseParameters:ije,parseStream:pje,parseUpdate:gje,getState:yje,setState:vje};function bje(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Oie(t,e.description()))}function Oie(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function xje(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const KA="default";function wje(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:KA,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?le(i)?i:i.user:KA,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return le(r)||(i=r.item,r=r.user),N4(e,r&&r!==KA?r:i||r),i},{cursor:t})}function N4(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function XS(e,t){var n=e._runtime.data;return ce(n,t)||q("Unrecognized data set: "+t),n[t]}function Sje(e,t){return arguments.length<2?XS(this,e).values.value:b_.call(this,e,Vd().remove(Do).insert(t))}function b_(e,t){HZ(t)||q("Second argument to changes must be a changeset.");const n=XS(this,e);return n.modified=!0,this.pulse(n.input,t)}function kje(e,t){return b_.call(this,e,Vd().insert(t))}function Cje(e,t){return b_.call(this,e,Vd().remove(t))}function Nie(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Iie(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function x_(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function _je(e){var t=x_(e),n=Nie(e),r=Iie(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function Eje(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=x_(e),s=t.changedTouches?t.changedTouches[0]:t,o=s_(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=$je(e,n,o),t}function $je(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;le(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:Tr(e),item:Tr(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const nU="view",Aje="timer",Tje="window",Mje={trap:!1};function Fje(e){const t=Oe({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{G(r[o])&&(r[o]=ws(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Lie(e,t,n,r){e._eventListeners.push({type:n,sources:ae(t),handler:r})}function Pje(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function xx(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||se(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Rje(e,t,n){var r=this,i=new MC(n),o=function(u,c){r.runAsync(null,()=>{e===nU&&Pje(r,t)&&u.preventDefault(),i.receive(Eje(r,u,c))})},s;if(e===Aje)xx(r,"timer",t)&&r.timer(o,t);else if(e===nU)xx(r,"view",t)&&r.addEventListener(t,o,Mje);else if(e===Tje?xx(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&xx(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);Lie(r,s,t,o)}return i}function rU(e){return e.item}function iU(e){return e.item.mark.source}function oU(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Dje(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",rU),iU,oU(e)),this.on(this.events("view","pointerout",rU),iU,oU(t)),this}function Oje(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function qi(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Nje="vega-bind",Ije="vega-bind-name",Lje="vega-bind-radio";function zje(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=aR(r.debounce,i.update))),(r.input==null&&r.element?jje:Uje)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function jje(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),Lie(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(Bje(i))}}function Bje(e){return typeof Event<"u"?new Event(e):{type:e}}function Uje(e,t,n,r){const i=r.signal(n.signal),o=qi("div",{class:Nje}),s=n.input==="radio"?o:o.appendChild(qi("label"));s.appendChild(qi("span",{class:Ije},n.name||n.signal)),t.appendChild(o);let a=Vje;switch(n.input){case"checkbox":a=Wje;break;case"select":a=Hje;break;case"radio":a=qje;break;case"range":a=Gje;break}a(e,s,n,i)}function Vje(e,t,n,r){const i=qi("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function Wje(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=qi("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function Hje(e,t,n,r){const i=qi("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};KS(s,r)&&(l.selected=!0),i.appendChild(qi("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(KS(n.options[a],s)){i.selectedIndex=a;return}}}function qje(e,t,n,r){const i=qi("span",{class:Lje}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};KS(s,r)&&(l.checked=!0);const u=qi("input",l);u.addEventListener("change",()=>e.update(s));const c=qi("label",{},(o[a]||s)+"");return c.prepend(u),i.appendChild(c),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)KS(a[u].value,s)&&(a[u].checked=!0)}}function Gje(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||lc(o,i,100),a=qi("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=qi("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function KS(e,t){return e===t||e+""==t+""}function zie(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Nie(e),Iie(e),x_(e),i,o).background(e.background())}function $O(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Yje(e,t,n,r){const i=new r(e.loader(),$O(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,x_(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function Xje(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=a_(r);e=n._el=e?QA(n,e,!0):null,bje(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||Rv,a=e?o.renderer:o.headless;return n._renderer=a?zie(n,n._renderer,e,a):null,n._handler=Yje(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=QA(n,t,!0):e.appendChild(qi("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=QA(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{zje(n,l.element||t,l)})),n}function QA(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const e0=e=>+e||0,Kje=e=>({top:e,bottom:e,left:e,right:e});function sU(e){return se(e)?{top:e0(e.top),bottom:e0(e.bottom),left:e0(e.left),right:e0(e.right)}:Kje(e0(e))}async function AO(e,t,n,r){const i=a_(t),o=i&&i.headless;return o||q("Unrecognized renderer type: "+t),await e.runAsync(),zie(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function Qje(e,t){e!==Du.Canvas&&e!==Du.SVG&&e!==Du.PNG&&q("Unrecognized image type: "+e);const n=await AO(this,e,t);return e===Du.SVG?Zje(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Zje(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Jje(e,t){return(await AO(this,Du.Canvas,e,t)).canvas()}async function eBe(e){return(await AO(this,Du.SVG,e)).svg()}function tBe(e,t,n){return Rie(e,lg,$1,n).parse(t)}function nBe(e){var t=this._runtime.scales;return ce(t,e)||q("Unrecognized scale or projection: "+e),t[e].value}var jie="width",Bie="height",TO="padding",aU={skip:!0};function Uie(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===TO?r.left+r.right:0)}function Vie(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===TO?r.top+r.bottom:0)}function rBe(e){var t=e._signals,n=t[jie],r=t[Bie],i=t[TO];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=Uie(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Vie(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function iBe(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(jie,n,aU),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(Bie,r,aU),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function oBe(e){return this._runtime.getState(e||{data:sBe,signals:aBe,recurse:!0})}function sBe(e,t){return t.modified&&G(t.input.value)&&!e.startsWith("_:vega:_")}function aBe(e,t){return!(e==="parent"||t instanceof lg.proxy)}function lBe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function uBe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(j9e(n,t))}function cBe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",fBe(r))}function fBe(e){return e==null?"":G(e)?Wie(e):se(e)&&!Qu(e)?dBe(e):e+""}function dBe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(G(n)?Wie(n):Hie(n))}).join(`
`)}function Wie(e){return"["+e.map(Hie).join(", ")+"]"}function Hie(e){return G(e)?"[…]":se(e)&&!Qu(e)?"{…}":e}function hBe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function qie(e,t){const n=this;if(t=t||{},mp.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=Oe({},e.locale,t.locale);n.locale(OZ(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Du.Canvas,n._scenegraph=new jte;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||cBe,n._redraw=!0,n._handler=new Rv().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Fje(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=tBe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Oe({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Uie(n,n._width),n._viewHeight=Vie(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,rBe(n),xje(n),wje(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function wx(e,t){return ce(e._signals,t)?e._signals[t]:q("Unrecognized signal name: "+te(t))}function Gie(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function lU(e,t,n,r){let i=Gie(n,r);return i||(i=$O(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function uU(e,t,n){const r=Gie(t,n);return r&&t._targets.remove(r),e}ne(qie,mp,{async evaluate(e,t,n){if(await mp.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,_je(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&m2(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Oie(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=wx(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",sU(e)):sU(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(a_(e)||q("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(mp.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(wx(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:iBe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=$O(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return lU(this,e,wx(this,e),t)},removeSignalListener(e,t){return uU(this,wx(this,e),t)},addDataListener(e,t){return lU(this,e,XS(this,e).values,t)},removeDataListener(e,t){return uU(this,XS(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=N4(this,null);this._globalCursor=!!e,t&&N4(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:uBe,events:Rje,finalize:Oje,hover:Dje,data:Sje,change:b_,insert:kje,remove:Cje,scale:nBe,initialize:Xje,toImageURL:Qje,toCanvas:Jje,toSVG:eBe,getState:oBe,setState:lBe,_watchPixelRatio:hBe});const pBe="view",QS="[",ZS="]",Yie="{",Xie="}",gBe=":",Kie=",",mBe="@",yBe=">",vBe=/[[\]{}]/,bBe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Qie,Zie;function Rc(e,t,n){return Qie=t||pBe,Zie=n||bBe,Jie(e.trim()).map(I4)}function xBe(e){return Zie[e]}function Ay(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function Jie(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Ay(e,i,Kie,QS+Yie,ZS+Xie),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function I4(e){return e[0]==="["?wBe(e):SBe(e)}function wBe(e){const t=e.length;let n=1,r;if(n=Ay(e,n,ZS,QS,ZS),n===t)throw"Empty between selector: "+e;if(r=Jie(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==yBe)throw"Expected '>' after between selector: "+e;r=r.map(I4);const i=I4(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function SBe(e){const t={source:Qie},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===Xie){if(a=e.lastIndexOf(Yie),a>=0){try{r=kBe(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===mBe&&(i=++a),l=Ay(e,a,gBe),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=Ay(e,a,QS),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=Ay(e,a,ZS),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==QS)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||vBe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):xBe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function kBe(e){const t=e.split(Kie);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function CBe(e){return se(e)?e:{type:e||"pad"}}const t0=e=>+e||0,_Be=e=>({top:e,bottom:e,left:e,right:e});function EBe(e){return se(e)?e.signal?e:{top:t0(e.top),bottom:t0(e.bottom),left:t0(e.left),right:t0(e.right)}:_Be(t0(e))}const Dn=e=>se(e)&&!G(e)?Oe({},e):{value:e};function cU(e,t,n,r){return n!=null?(se(n)&&!G(n)||G(n)&&n.length&&se(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function rr(e,t,n){for(const r in t)cU(e,r,t[r]);for(const r in n)cU(e,r,n[r],"update")}function lm(e,t,n){for(const r in t)n&&ce(n,r)||(e[r]=Oe(e[r]||{},t[r]));return e}function Ah(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const MO="mark",FO="frame",PO="scope",$Be="axis",ABe="axis-domain",TBe="axis-grid",MBe="axis-label",FBe="axis-tick",PBe="axis-title",RBe="legend",DBe="legend-band",OBe="legend-entry",NBe="legend-gradient",eoe="legend-label",IBe="legend-symbol",LBe="legend-title",zBe="title",jBe="title-text",BBe="title-subtitle";function UBe(e,t,n,r,i){const o={},s={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!Ah(l,e)&&ZA(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===FO?i.group:n===MO?Oe({},i.mark,i[t]):null;for(l in c)u=Ah(l,e)||(l==="fill"||l==="stroke")&&(Ah("fill",e)||Ah("stroke",e)),u||ZA(o,l,c[l]);ae(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Ah(h,e)||ZA(o,h,d[h])}),e=Oe({},e);for(l in o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=Oe(s,e.enter),a&&(e.update=Oe(a,e.update)),e}function ZA(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const toe=e=>le(e)?te(e):e.signal?`(${e.signal})`:noe(e);function w_(e){if(e.gradient!=null)return WBe(e);let t=e.signal?`(${e.signal})`:e.color?VBe(e.color):e.field!=null?noe(e.field):e.value!==void 0?te(e.value):void 0;return e.scale!=null&&(t=HBe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${D2(e.exponent)})`),e.mult!=null&&(t+=`*${D2(e.mult)}`),e.offset!=null&&(t+=`+${D2(e.offset)}`),e.round&&(t=`round(${t})`),t}const Sx=(e,t,n,r)=>`(${e}(${[t,n,r].map(w_).join(",")})+'')`;function VBe(e){return e.c?Sx("hcl",e.h,e.c,e.l):e.h||e.s?Sx("hsl",e.h,e.s,e.l):e.l||e.a?Sx("lab",e.l,e.a,e.b):e.r||e.g||e.b?Sx("rgb",e.r,e.g,e.b):null}function WBe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:te(n));for(;t.length&&qe(t)==null;)t.pop();return t.unshift(toe(e.gradient)),`gradient(${t.join(",")})`}function D2(e){return se(e)?"("+w_(e)+")":e}function noe(e){return roe(se(e)?e:{datum:e})}function roe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):q("Invalid field reference: "+te(e));return e.signal||(r=le(r)?Ta(r).map(te).join("]["):roe(r)),t+"["+r+"]"}function HBe(e,t){const n=toe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+D2(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function qBe(e){let t="";return e.forEach(n=>{const r=w_(n);t+=n.test?`(${n.test})?${r}:`:r}),qe(t)===":"&&(t+="null"),t}function ioe(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=UBe(e,t,n,r,i.config);for(const a in e)s[a]=GBe(e[a],t,o,i);return o}function GBe(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=XBe(YBe(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function YBe(e){return G(e)?qBe(e):w_(e)}function XBe(e,t,n,r){const i=_a(e,t);return i.$fields.forEach(o=>r[o]=1),Oe(n,i.$params),i.$expr}const KBe="outer",QBe=["value","update","init","react","bind"];function fU(e,t){q(e+' for "outer" push: '+te(t))}function ooe(e,t){const n=e.name;if(e.push===KBe)t.signals[n]||fU("No prior signal definition",n),QBe.forEach(r=>{e[r]!==void 0&&fU("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function L4(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function S_(e,t,n,r){return new L4(e,t,n,r)}function JS(e,t){return S_("operator",e,t)}function ye(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function A1(e,t){return t?{$field:e,$name:t}:{$field:e}}const z4=A1("key");function dU(e,t){return{$compare:e,$order:t}}function ZBe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const JBe="ascending",eUe="descending";function tUe(e){return se(e)?(e.order===eUe?"-":"+")+k_(e.op,e.field):""}function k_(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const RO="scope",j4="view";function kn(e){return e&&e.signal}function nUe(e){return e&&e.expr}function O2(e){if(kn(e))return!0;if(se(e)){for(const t in e)if(O2(e[t]))return!0}return!1}function ts(e,t){return e??t}function Qf(e){return e&&e.signal||e}const hU="timer";function T1(e,t){return(e.merge?iUe:e.stream?oUe:e.type?sUe:q("Invalid stream specification: "+te(e)))(e,t)}function rUe(e){return e===RO?j4:e||j4}function iUe(e,t){const n=e.merge.map(i=>T1(i,t)),r=DO({merge:n},e,t);return t.addStream(r).id}function oUe(e,t){const n=T1(e.stream,t),r=DO({stream:n},e,t);return t.addStream(r).id}function sUe(e,t){let n;e.type===hU?(n=t.event(hU,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(rUe(e.source),e.type);const r=DO({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function DO(e,t,n){let r=t.between;return r&&(r.length!==2&&q('Stream "between" parameter must have 2 entries: '+te(t)),e.between=[T1(r[0],n),T1(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(aUe(t.marktype,t.markname,t.markrole)),t.source===RO&&r.push("inScope(event.item)"),r.length&&(e.filter=_a("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function aUe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const lUe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function uUe(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||q("Signal update missing events specification."),le(o)&&(o=Rc(o,t.isSubscope()?RO:j4)),o=ae(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[fUe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&q("Signal encode and update are mutually exclusive."),s="encode(item(),"+te(r)+")"),i.update=le(s)?_a(s,t):s.expr!=null?_a(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:lUe,$params:{$value:t.signalRef(s.signal)}}:q("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(Oe(cUe(l,t),i)))}function cUe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):T1(e,t)}}function fUe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function dUe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?q("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=_a(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>uUe(i,t,n.id))}const xt=e=>(t,n,r)=>S_(e,n,t||void 0,r),soe=xt("aggregate"),hUe=xt("axisticks"),aoe=xt("bound"),Fs=xt("collect"),pU=xt("compare"),pUe=xt("datajoin"),loe=xt("encode"),gUe=xt("expression"),mUe=xt("facet"),yUe=xt("field"),vUe=xt("key"),bUe=xt("legendentries"),xUe=xt("load"),wUe=xt("mark"),SUe=xt("multiextent"),kUe=xt("multivalues"),CUe=xt("overlap"),_Ue=xt("params"),uoe=xt("prefacet"),EUe=xt("projection"),$Ue=xt("proxy"),AUe=xt("relay"),coe=xt("render"),TUe=xt("scale"),Gd=xt("sieve"),MUe=xt("sortitems"),foe=xt("viewlayout"),FUe=xt("values");let PUe=0;const doe={min:"min",max:"max",count:"sum"};function RUe(e,t){const n=e.type||"linear";Zee(n)||q("Unrecognized scale type: "+te(n)),t.addScale(e.name,{type:n,domain:void 0})}function DUe(e,t){const n=t.getScale(e.name).params;let r;n.domain=hoe(e.domain,e,t),e.range!=null&&(n.range=goe(e,t,n)),e.interpolate!=null&&WUe(e.interpolate,n),e.nice!=null&&(n.nice=VUe(e.nice,t)),e.bins!=null&&(n.bins=UUe(e.bins,t));for(r in e)ce(n,r)||r==="name"||(n[r]=Eo(e[r],t))}function Eo(e,t){return se(e)?e.signal?t.signalRef(e.signal):q("Unsupported object: "+te(e)):e}function N2(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Eo(n,t))}function C_(e){q("Can not find data set: "+te(e))}function hoe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&q("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(G(e)?OUe:e.fields?IUe:NUe)(e,t,n)}function OUe(e,t,n){return e.map(r=>Eo(r,n))}function NUe(e,t,n){const r=n.getData(e.data);return r||C_(e.data),hg(t.type)?r.valuesRef(n,e.field,poe(e.sort,!1)):tte(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function IUe(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=le(s)?{data:r,field:s}:G(s)||s.signal?LUe(s,n):s,o.push(s),o),[]);return(hg(t.type)?zUe:tte(t.type)?jUe:BUe)(e,n,i)}function LUe(e,t){const n="_:vega:_"+PUe++,r=Fs({});if(G(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+te(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Gd({})]),{data:n,field:"data"}}function zUe(e,t,n){const r=poe(e.sort,!0);let i,o;const s=n.map(u=>{const c=t.getData(u.data);return c||C_(u.data),c.countsRef(t,u.field,r)}),a={groupby:z4,pulse:s};r&&(i=r.op||"count",o=r.field?k_(i,r.field):"count",a.ops=[doe[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(soe(a));const l=t.add(Fs({pulse:ye(i)}));return o=t.add(FUe({field:z4,sort:t.sortRef(r),pulse:ye(l)})),ye(o)}function poe(e,t){return e&&(!e.field&&!e.op?se(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?q("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!doe[e.op]&&q("Multiple domain scales can not be sorted using "+e.op)),e}function jUe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||C_(i.data),o.domainRef(t,i.field)});return ye(t.add(kUe({values:r})))}function BUe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||C_(i.data),o.extentRef(t,i.field)});return ye(t.add(SUe({extents:r})))}function UUe(e,t){return e.signal||G(e)?N2(e,t):t.objectProperty(e)}function VUe(e,t){return e.signal?t.signalRef(e.signal):se(e)?{interval:Eo(e.interval),step:Eo(e.step)}:Eo(e)}function WUe(e,t){t.interpolate=Eo(e.type||e),e.gamma!=null&&(t.interpolateGamma=Eo(e.gamma))}function goe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(le(i)){if(r&&ce(r,i))return e=Oe({},e,{range:r[i]}),goe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=hg(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:q("Unrecognized scale range value: "+te(i))}else if(i.scheme){n.scheme=G(i.scheme)?N2(i.scheme,t):Eo(i.scheme,t),i.extent&&(n.schemeExtent=N2(i.extent,t)),i.count&&(n.schemeCount=Eo(i.count,t));return}else if(i.step){n.rangeStep=Eo(i.step,t);return}else{if(hg(e.type)&&!G(i))return hoe(i,e,t);G(i)||q("Unsupported range type: "+te(i))}return i.map(o=>(G(o)?N2:Eo)(o,t))}function HUe(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=B4(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=B4(n[i],i,t));t.addProjection(e.name,r)}function B4(e,t,n){return G(e)?e.map(r=>B4(r,t,n)):se(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:q("Unsupported parameter object: "+te(e)):e}const Ps="top",um="left",cm="right",mc="bottom",moe="center",qUe="vertical",GUe="start",YUe="middle",XUe="end",U4="index",OO="label",KUe="offset",Sg="perc",QUe="perc2",To="value",Uv="guide-label",NO="guide-title",ZUe="group-title",JUe="group-subtitle",gU="symbol",I2="gradient",V4="discrete",W4="size",eVe="shape",tVe="fill",nVe="stroke",rVe="strokeWidth",iVe="strokeDash",oVe="opacity",IO=[W4,eVe,tVe,nVe,rVe,iVe,oVe],Vv={name:1,style:1,interactive:1},Ye={value:0},Mo={value:1},__="group",yoe="rect",LO="rule",sVe="symbol",Yd="text";function M1(e){return e.type=__,e.interactive=e.interactive||!1,e}function $i(e,t){const n=(r,i)=>ts(e[r],ts(t[r],i));return n.isVertical=r=>qUe===ts(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ts(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ts(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ts(e.columns,ts(t.columns,+n.isVertical(!0))),n}function voe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function aVe(e,t,n){const r=t.config.style[n];return r&&r[e]}function E_(e,t,n){return`item.anchor === '${GUe}' ? ${e} : item.anchor === '${XUe}' ? ${t} : ${n}`}const zO=E_(te(um),te(cm),te(moe));function lVe(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},se(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function boe(e,t){return t?e?se(e)?Object.assign({},e,{offset:boe(e.offset,t)}):{value:e,offset:t}:t:e}function Ji(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=lm(e.encode,t,Vv)):e.interactive=!1,e}function uVe(e,t,n,r){const i=$i(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,c,f,d;o?(u=[0,1],c=[0,0],f=s,d=a):(u=[0,0],c=[1,0],f=a,d=s);const h={enter:l={opacity:Ye,x:Ye,y:Ye,width:Dn(f),height:Dn(d)},update:Oe({},l,{opacity:Mo,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Ye}};return rr(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Ji({type:yoe,role:NBe,encode:h},r)}function cVe(e,t,n,r,i){const o=$i(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,f,d,h="";s?(u="y",f="y2",c="x",d="width",h="1-"):(u="x",f="x2",c="y",d="height");const p={opacity:Ye,fill:{scale:t,field:To}};p[u]={signal:h+"datum."+Sg,mult:l},p[c]=Ye,p[f]={signal:h+"datum."+QUe,mult:l},p[d]=Dn(a);const g={enter:p,update:Oe({},p,{opacity:Mo}),exit:{opacity:Ye}};return rr(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Ji({type:yoe,role:DBe,key:To,from:i,encode:g},r)}const fVe=`datum.${Sg}<=0?"${um}":datum.${Sg}>=1?"${cm}":"${moe}"`,dVe=`datum.${Sg}<=0?"${mc}":datum.${Sg}>=1?"${Ps}":"${YUe}"`;function mU(e,t,n,r){const i=$i(e,t),o=i.isVertical(),s=Dn(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,f,d,h="";const p={enter:u={opacity:Ye},update:c={opacity:Mo,text:{field:OO}},exit:{opacity:Ye}};return rr(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:ts(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:dVe},f="y",d="x",h="1-"):(u.align=c.align={signal:fVe},u.baseline={value:"top"},f="x",d="y"),u[f]=c[f]={signal:h+"datum."+Sg,mult:a},u[d]=c[d]=s,s.offset=ts(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+U4}:void 0,Ji({type:Yd,role:eoe,style:Uv,key:To,from:r,encode:p,overlap:l},n)}function hVe(e,t,n,r,i){const o=$i(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${KUe} : datum.${W4}`,h=u?Dn(u):{field:W4},p=`datum.${U4}`,g=`max(1, ${i})`;let y,m,v,b,x;h.mult=.5,y={enter:m={opacity:Ye,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Mo,x:m.x,y:m.y},exit:{opacity:Ye}};let w=null,k=null;e.fill||(w=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),rr(y,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",k),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),IO.forEach($=>{e[$]&&(v[$]=m[$]={scale:e[$],field:To})});const S=Ji({type:sVe,role:IBe,key:To,from:f,clip:u?!0:void 0,encode:y},n.symbols),C=Dn(c);C.offset=o("labelOffset"),y={enter:m={opacity:Ye,x:{signal:d,offset:C},y:h},update:v={opacity:Mo,text:{field:OO},x:m.x,y:m.y},exit:{opacity:Ye}},rr(y,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const _=Ji({type:Yd,role:eoe,style:Uv,key:To,from:f,encode:y},n.labels);return y={enter:{noBound:{value:!u},width:Ye,height:u?Dn(u):Ye,opacity:Ye},exit:{opacity:Ye},update:v={opacity:Mo,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,x={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,x={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:U4}},M1({role:PO,from:r,encode:lm(y,s,Vv),marks:[S,_],name:l,interactive:a,sort:x})}function pVe(e,t){const n=$i(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const jO='item.orient === "left"',BO='item.orient === "right"',$_=`(${jO} || ${BO})`,gVe=`datum.vgrad && ${$_}`,mVe=E_('"top"','"bottom"','"middle"'),yVe=E_('"right"','"left"','"center"'),vVe=`datum.vgrad && ${BO} ? (${yVe}) : (${$_} && !(datum.vgrad && ${jO})) ? "left" : ${zO}`,bVe=`item._anchor || (${$_} ? "middle" : "start")`,xVe=`${gVe} ? (${jO} ? -90 : 90) : 0`,wVe=`${$_} ? (datum.vgrad ? (${BO} ? "bottom" : "top") : ${mVe}) : "top"`;function SVe(e,t,n,r){const i=$i(e,t),o={enter:{opacity:Ye},update:{opacity:Mo,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ye}};return rr(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:bVe},angle:{signal:xVe},align:{signal:vVe},baseline:{signal:wVe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Ji({type:Yd,role:LBe,style:NO,from:r,encode:o},n)}function kVe(e,t){let n;return se(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+yU(e.path)+")":e.sphere&&(n="geoShape("+yU(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function yU(e){return se(e)&&e.signal?e.signal:te(e)}function xoe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===__?PO:t||MO}function CVe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||xoe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function _Ve(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function UO(e,t){const n=YZ(e.type);n||q("Unrecognized transform type: "+te(e.type));const r=S_(n.type.toLowerCase(),null,woe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function woe(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=EVe(s,t,n)}return r}function EVe(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return $Ve(e,t,n);if(i===void 0){e.required&&q("Missing required "+te(t.type)+" parameter: "+te(e.name));return}else{if(r==="param")return AVe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!kn(i)?i.map(o=>vU(e,o,n)):vU(e,i,n)}function vU(e,t,n){const r=e.type;if(kn(t))return xU(r)?q("Expression references can not be signals."):JA(r)?n.fieldRef(t):wU(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||JA(r);return i&&TVe(t)?n.exprRef(t.expr,t.as):i&&MVe(t)?A1(t.field,t.as):xU(r)?_a(t,n):FVe(r)?ye(n.getData(t).values):JA(r)?A1(t):wU(r)?n.compareRef(t):t}}function $Ve(e,t,n){return le(t.from)||q('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function AVe(e,t,n){const r=t[e.name];return e.array?(G(r)||q("Expected an array of sub-parameters. Instead: "+te(r)),r.map(i=>bU(e,i,n))):bU(e,r,n)}function bU(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||q("Unsupported parameter: "+te(t));const o=Oe(woe(i,t,n),i.key);return ye(n.add(_Ue(o)))}const TVe=e=>e&&e.expr,MVe=e=>e&&e.field,FVe=e=>e==="data",xU=e=>e==="expr",JA=e=>e==="field",wU=e=>e==="compare";function PVe(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||q("Only group marks can be faceted."),r.field!=null?s=a=L2(r,n):(e.data?a=ye(n.getData(e.data).aggregate):(o=UO(Oe({type:"aggregate",groupby:ae(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=L2(r,n),s=a=ye(n.add(o))),i=n.keyRef(r.groupby,!0))):s=ye(n.add(Fs(null,[{}]))),s||(s=L2(e,n)),{key:i,pulse:s,parent:a}}function L2(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ye(t.getData(e.data).output)}function xd(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}xd.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=ye(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new xd(e,o,i,r,s)};function Soe(e){return le(e)?e:null}function SU(e,t,n){const r=k_(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function n0(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=tUe(o);let u=Soe(i),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const d=o?{field:z4,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:ye(t.output)};l&&(d.sort=e.sortRef(o)),f=e.add(S_(r,void 0,d)),s&&(t.index[i]=f),c=ye(f),u!=null&&(a[u]=c)}return c}xd.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=Soe(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&SU(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:ye(r.output)},n&&n.field&&SU(e,l,n),a=e.add(soe(l)),s=e.add(Fs({pulse:ye(a)})),s={agg:a,ref:ye(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return ye(this.values)},extentRef(e,t){return n0(e,this,"extent","extent",t,!1)},domainRef(e,t){return n0(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return n0(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return n0(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return n0(e,this,"indata","tupleindex",t,!0,!0)}};function RVe(e,t,n){const r=e.from.facet,i=r.name,o=L2(r,t);let s;r.name||q("Facet must have a name: "+te(r)),r.data||q("Facet must reference a data set: "+te(r)),r.field?s=t.add(uoe({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(mUe({key:t.keyRef(r.groupby),group:ye(t.proxy(n.parent)),pulse:o})):q("Facet must specify groupby or field: "+te(r));const a=t.fork(),l=a.add(Fs()),u=a.add(Gd({pulse:ye(l)}));a.addData(i,new xd(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function DVe(e,t,n){const r=t.add(uoe({pulse:n.pulse})),i=t.fork();i.add(Gd()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function koe(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(JS()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=_a(u,t);l.update=c.$expr,l.params=c.$params}function A_(e,t){const n=xoe(e),r=e.type===__,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===PO||n===FO,a,l,u,c,f,d,h;const p=n===MO||s||i,g=PVe(e.from,r,t);l=t.add(pUe({key:g.key||(e.key?A1(e.key):void 0),pulse:g.pulse,clean:!r}));const y=ye(l);l=u=t.add(Fs({pulse:y})),l=t.add(wUe({markdef:CVe(e),interactive:_Ve(e.interactive,t),clip:kVe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ye(l)}));const m=ye(l);l=c=t.add(loe(ioe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:m}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const S=UO(k,t),C=S.metadata;(C.generates||C.changes)&&q("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=ye(l),t.add(l=S)}),e.sort&&(l=t.add(MUe({sort:t.compareRef(e.sort),pulse:ye(l)})));const v=ye(l);(i||s)&&(s=t.add(foe({layout:t.objectProperty(e.layout),legends:t.legends,mark:m,pulse:v})),d=ye(s));const b=t.add(aoe({mark:m,pulse:d||v}));h=ye(b),r&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||h,y),i?RVe(e,t,g):p?DVe(e,t,g):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(b))),o&&(h=OVe(o,h,t));const x=t.add(coe({pulse:h})),w=t.add(Gd({pulse:ye(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new xd(t,u,x,w)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&q("Marks only support modify triggers."),koe(k,t,f)}))}function OVe(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:kn(o)?n.signalRef(o.signal):o,method:kn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=kn(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return ye(n.add(CUe(s)))}function NVe(e,t){const n=t.config.legend,r=e.encode||{},i=$i(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let c=0,f,d,h;IO.forEach(b=>e[b]?(u[b]=e[b],c=c||e[b]):0),c||q("Missing valid scale for legend.");const p=IVe(e,t.scaleType(c)),g={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},y=ye(t.add(Fs(null,[g]))),m={enter:{x:{value:0},y:{value:0}}},v=ye(t.add(bUe(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===I2?(h=[uVe(e,c,n,r.gradient),mU(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Qf(i.gradientLength())})/100))`)):p===V4?h=[cVe(e,c,n,r.gradient,v),mU(e,n,r.labels,v)]:(f=pVe(e,n),h=[hVe(e,n,r,v,Qf(f.columns))],d.size=jVe(e,t,h[0].marks)),h=[M1({role:OBe,from:y,encode:m,marks:h,layout:f,interactive:a})],g.title&&h.push(SVe(e,n,r.title,y)),A_(M1({role:RBe,from:y,encode:lm(zVe(i,e,n),o,Vv),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function IVe(e,t){let n=e.type||gU;return!e.type&&LVe(e)===1&&(e.fill||e.stroke)&&(n=B6(t)?I2:O3(t)?V4:gU),n!==I2?n:O3(t)?V4:I2}function LVe(e){return IO.reduce((t,n)=>t+(e[n]?1:0),0)}function zVe(e,t,n){const r={enter:{},update:{}};return rr(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function jVe(e,t,n){const r=Qf(kU("size",e,n)),i=Qf(kU("strokeWidth",e,n)),o=Qf(BVe(n[1].encode,t,Uv));return _a(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function kU(e,t,n){return t[e]?`scale("${t[e]}",datum)`:voe(e,n[0].encode)}function BVe(e,t,n){return voe("fontSize",e)||aVe("fontSize",t,n)}const UVe=`item.orient==="${um}"?-90:item.orient==="${cm}"?90:0`;function VVe(e,t){e=le(e)?{text:e}:e;const n=$i(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},c=ye(t.add(Fs(null,[u])));return l.push(qVe(e,n,WVe(e),c)),e.subtitle&&l.push(GVe(e,n,r.subtitle,c)),A_(M1({role:zBe,from:c,encode:HVe(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function WVe(e){const t=e.encode;return t&&t.title||Oe({name:e.name,interactive:e.interactive,style:e.style},t)}function HVe(e,t){const n={enter:{},update:{}};return rr(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:zO},angle:{signal:UVe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),lm(n,t,Vv)}function qVe(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return rr(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ji({type:Yd,role:jBe,style:ZUe,from:r,encode:s},n)}function GVe(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return rr(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ji({type:Yd,role:BBe,style:JUe,from:r,encode:s},n)}function YVe(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(UO(r,t))}),e.on&&e.on.forEach(r=>{koe(r,t,e.name)}),t.addDataPipeline(e.name,XVe(e,t,n))}function XVe(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,c,f;for(e.values?kn(e.values)||O2(e.format)?(r.push(CU(t,e)),r.push(i=Yc())):r.push(i=Yc({$ingest:e.values,$format:e.format})):e.url?O2(e.url)||O2(e.format)?(r.push(CU(t,e)),r.push(i=Yc())):r.push(i=Yc({$request:e.url,$format:e.format})):e.source&&(i=a=ae(e.source).map(d=>ye(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!i&&!f.source&&r.push(i=Yc()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(u=a.length-1,r[0]=AUe({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,Yc())),i||r.push(Yc()),r.push(Gd({})),r}function Yc(e){const t=Fs({},e);return t.metadata={source:!0},t}function CU(e,t){return xUe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Coe=e=>e===mc||e===Ps,T_=(e,t,n)=>kn(e)?JVe(e.signal,t,n):e===um||e===Ps?t:n,On=(e,t,n)=>kn(e)?QVe(e.signal,t,n):Coe(e)?t:n,vs=(e,t,n)=>kn(e)?ZVe(e.signal,t,n):Coe(e)?n:t,_oe=(e,t,n)=>kn(e)?eWe(e.signal,t,n):e===Ps?{value:t}:{value:n},KVe=(e,t,n)=>kn(e)?tWe(e.signal,t,n):e===cm?{value:t}:{value:n},QVe=(e,t,n)=>Eoe(`${e} === '${Ps}' || ${e} === '${mc}'`,t,n),ZVe=(e,t,n)=>Eoe(`${e} !== '${Ps}' && ${e} !== '${mc}'`,t,n),JVe=(e,t,n)=>VO(`${e} === '${um}' || ${e} === '${Ps}'`,t,n),eWe=(e,t,n)=>VO(`${e} === '${Ps}'`,t,n),tWe=(e,t,n)=>VO(`${e} === '${cm}'`,t,n),Eoe=(e,t,n)=>(t=t!=null?Dn(t):t,n=n!=null?Dn(n):n,_U(t)&&_U(n)?(t=t?t.signal||te(t.value):null,n=n?n.signal||te(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Oe({test:e},t)].concat(n||[])),_U=e=>e==null||Object.keys(e).length===1,VO=(e,t,n)=>({signal:`${e} ? (${ip(t)}) : (${ip(n)})`}),nWe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${um}' ? (${ip(r)}) : `:"")+(n!=null?`${e} === '${mc}' ? (${ip(n)}) : `:"")+(i!=null?`${e} === '${cm}' ? (${ip(i)}) : `:"")+(t!=null?`${e} === '${Ps}' ? (${ip(t)}) : `:"")+"(null)"}),ip=e=>kn(e)?e.signal:e==null?null:te(e),rWe=(e,t)=>t===0?0:kn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},xp=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function wh(e,t,n,r){let i;if(t&&ce(t,e))return t[e];if(ce(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[NO][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Uv][i]}return null}function EU(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function iWe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(kn(s)){const f=EU([n.axisX,n.axisY]),d=EU([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of f)a[u]=On(s,wh(u,n.axisX,i,r),wh(u,n.axisY,i,r));l={};for(u of d)l[u]=nWe(s.signal,wh(u,n.axisTop,i,r),wh(u,n.axisBottom,i,r),wh(u,n.axisLeft,i,r),wh(u,n.axisRight,i,r))}else a=s===Ps||s===mc?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?Oe({},i,a,l,o):i}function oWe(e,t,n,r){const i=$i(e,t),o=e.orient;let s,a;const l={enter:s={opacity:Ye},update:a={opacity:Mo},exit:{opacity:Ye}};rr(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=$U(e,0),c=$U(e,1);return s.x=a.x=On(o,u,Ye),s.x2=a.x2=On(o,c),s.y=a.y=vs(o,u,Ye),s.y2=a.y2=vs(o,c),Ji({type:LO,role:ABe,from:r,encode:l},n)}function $U(e,t){return{scale:e.scale,range:t}}function sWe(e,t,n,r,i){const o=$i(e,t),s=e.orient,a=e.gridScale,l=T_(s,1,-1),u=aWe(e.offset,l);let c,f,d;const h={enter:c={opacity:Ye},update:d={opacity:Mo},exit:f={opacity:Ye}};rr(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:To,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},g=On(s,{signal:"height"},{signal:"width"}),y=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},m=a?{scale:a,range:1,mult:l,offset:u}:Oe(g,{mult:l,offset:u});return c.x=d.x=On(s,p,y),c.y=d.y=vs(s,p,y),c.x2=d.x2=vs(s,m),c.y2=d.y2=On(s,m),f.x=On(s,p),f.y=vs(s,p),Ji({type:LO,role:TBe,key:To,from:r,encode:h},n)}function aWe(e,t){if(t!==1)if(!se(e))e=kn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Oe({},e);for(;n.mult!=null;)if(se(n.mult))n=n.mult=Oe({},n.mult);else return n.mult=kn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function lWe(e,t,n,r,i,o){const s=$i(e,t),a=e.orient,l=T_(a,-1,1);let u,c,f;const d={enter:u={opacity:Ye},update:f={opacity:Mo},exit:c={opacity:Ye}};rr(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=Dn(i);h.mult=l;const p={scale:e.scale,field:To,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=u.y=On(a,Ye,p),f.y2=u.y2=On(a,h),c.x=On(a,p),f.x=u.x=vs(a,Ye,p),f.x2=u.x2=vs(a,h),c.y=vs(a,p),Ji({type:LO,role:FBe,key:To,from:r,encode:d},n)}function e5(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function uWe(e,t,n,r,i,o){const s=$i(e,t),a=e.orient,l=e.scale,u=T_(a,-1,1),c=Qf(s("labelFlush")),f=Qf(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let p=c===0||!!c,g;const y=Dn(i);y.mult=u,y.offset=Dn(s("labelPadding")||0),y.offset.mult=u;const m={scale:l,field:To,band:.5,offset:boe(o.offset,s("labelOffset"))},v=On(a,p?e5(l,c,'"left"','"right"','"center"'):{value:"center"},KVe(a,"left","right")),b=On(a,_oe(a,"bottom","top"),p?e5(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=e5(l,c,`-(${f})`,f,0);p=p&&f;const w={opacity:Ye,x:On(a,m,y),y:vs(a,m,y)},k={enter:w,update:g={opacity:Mo,text:{field:OO},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:Ye,x:w.x,y:w.y}};rr(k,{dx:!d&&p?On(a,x):null,dy:!h&&p?vs(a,x):null}),rr(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const S=s("labelBound");let C=s("labelOverlap");return C=C||S?{separation:s("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:l,orient:a,tolerance:S}:null}:void 0,g.align!==v&&(g.align=xp(g.align,v)),g.baseline!==b&&(g.baseline=xp(g.baseline,b)),Ji({type:Yd,role:MBe,style:Uv,key:To,from:r,encode:k,overlap:C},n)}function cWe(e,t,n,r){const i=$i(e,t),o=e.orient,s=T_(o,-1,1);let a,l;const u={enter:a={opacity:Ye,anchor:Dn(i("titleAnchor",null)),align:{signal:zO}},update:l=Oe({},a,{opacity:Mo,text:Dn(e.title)}),exit:{opacity:Ye}},c={signal:`lerp(range("${e.scale}"), ${E_(0,1,.5)})`};return l.x=On(o,c),l.y=vs(o,c),a.angle=On(o,Ye,rWe(s,90)),a.baseline=On(o,_oe(o,mc,Ps),{value:mc}),l.angle=a.angle,l.baseline=a.baseline,rr(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),fWe(i,o,u,n),u.update.align=xp(u.update.align,a.align),u.update.angle=xp(u.update.angle,a.angle),u.update.baseline=xp(u.update.baseline,a.baseline),Ji({type:Yd,role:PBe,style:NO,from:r,encode:u},n)}function fWe(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=xp(Dn(a),n.update[l]),!1):!Ah(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?Dn(s):On(t,Dn(s),Dn(o))}function dWe(e,t){const n=iWe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=$i(e,n),u=lVe(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=ye(t.add(Fs({},[c]))),d=ye(t.add(hUe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(sWe(e,n,r.grid,d,u)),c.ticks&&(p=l("tickSize"),h.push(lWe(e,n,r.ticks,d,p,u))),c.labels&&(p=c.ticks?p:0,h.push(uWe(e,n,r.labels,d,p,u))),c.domain&&h.push(oWe(e,n,r.domain,f)),c.title&&h.push(cWe(e,n,r.title,f)),A_(M1({role:$Be,from:f,encode:lm(hWe(l,e),i,Vv),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function hWe(e,t){const n={enter:{},update:{}};return rr(n,{orient:e("orient"),offset:e("offset")||0,position:ts(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function $oe(e,t,n){const r=ae(e.signals),i=ae(e.scales);return n||r.forEach(o=>ooe(o,t)),ae(e.projections).forEach(o=>HUe(o,t)),i.forEach(o=>RUe(o,t)),ae(e.data).forEach(o=>YVe(o,t)),i.forEach(o=>DUe(o,t)),(n||r).forEach(o=>dUe(o,t)),ae(e.axes).forEach(o=>dWe(o,t)),ae(e.marks).forEach(o=>A_(o,t)),ae(e.legends).forEach(o=>NVe(o,t)),e.title&&VVe(e.title,t),t.parseLambdas(),t}const pWe=e=>lm({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function gWe(e,t){const n=t.config,r=ye(t.root=t.add(JS())),i=mWe(e,n);i.forEach(u=>ooe(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Fs()),s=t.add(loe(ioe(pWe(e.encode),__,FO,e.style,t,{pulse:ye(o)}))),a=t.add(foe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:ye(s)}));t.operators.pop(),t.pushState(ye(s),ye(a),null),$oe(e,t,i),t.operators.push(a);let l=t.add(aoe({mark:r,pulse:ye(a)}));return l=t.add(coe({pulse:ye(l)})),l=t.add(Gd({pulse:ye(l)})),t.addData("root",new xd(t,o,o,l)),t}function r0(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function mWe(e,t){const n=s=>ts(e[s],t[s]),r=[r0("background",n("background")),r0("autosize",CBe(n("autosize"))),r0("padding",EBe(n("padding"))),r0("width",n("width")||0),r0("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return ae(e.signals).forEach(s=>{ce(i,s.name)?s=Oe(i[s.name],s):r.push(s),o[s.name]=s}),ae(t.signals).forEach(s=>{!ce(o,s.name)&&!ce(i,s.name)&&r.push(s)}),r}function Aoe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function AU(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Aoe.prototype=AU.prototype={parse(e){return $oe(e,this)},fork(){return new AU(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof L4?ye(e):e;return this.add($Ue({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(ye(this.add(Gd({pulse:e})))),this._parent.push(t),this._lookup.push(n?ye(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return qe(this._parent)},encode(){return qe(this._encode)},lookup(){return qe(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(le(e))return A1(e,t);e.signal||q("Unsupported field reference: "+te(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=ye(this.add(yUe(i)))}return r},compareRef(e){let t=!1;const n=o=>kn(o)?(t=!0,this.signalRef(o.signal)):nUe(o)?(t=!0,this.exprRef(o.expr)):o,r=ae(e.field).map(n),i=ae(e.order).map(n);return t?ye(this.add(pU({fields:r,orders:i}))):dU(r,i)},keyRef(e,t){let n=!1;const r=o=>kn(o)?(n=!0,ye(i[o.signal])):o,i=this.signals;return e=ae(e).map(r),n?ye(this.add(vUe({fields:e,flat:t}))):ZBe(e,t)},sortRef(e){if(!e)return e;const t=k_(e.op,e.field),n=e.order||JBe;return n.signal?ye(this.add(pU({fields:t,orders:this.signalRef(n.signal)}))):dU(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return ce(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&q("Duplicate signal name: "+te(e));const n=t instanceof L4?t:this.add(JS(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||q("Unrecognized signal name: "+te(e)),this.signals[e]},signalRef(e){return this.signals[e]?ye(this.signals[e]):(ce(this.lambdas,e)||(this.lambdas[e]=this.add(JS(null))),ye(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=_a(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!se(e)?e:this.signalRef(e.signal||WO(e))},exprRef(e,t){const n={expr:_a(e,this)};return t&&(n.expr.$name=t),ye(this.add(gUe(n)))},addBinding(e,t){this.bindings||q("Nested signals do not support binding: "+te(e)),this.bindings.push(Oe({signal:e},t))},addScaleProj(e,t){ce(this.scales,e)&&q("Duplicate scale or projection name: "+te(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,TUe(t))},addProjection(e,t){this.addScaleProj(e,EUe(t))},getScale(e){return this.scales[e]||q("Unrecognized scale name: "+te(e)),this.scales[e]},scaleRef(e){return ye(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ce(this.data,e)&&q("Duplicate data set name: "+te(e)),this.data[e]=t},getData(e){return this.data[e]||q("Undefined data set name: "+te(e)),this.data[e]},addDataPipeline(e,t){return ce(this.data,e)&&q("Duplicate data set name: "+te(e)),this.addData(e,xd.fromEntries(this,t))}};function WO(e){return(G(e)?yWe:vWe)(e)}function yWe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(se(i)?i.signal||WO(i):te(i))}return n+"]"}function vWe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+te(r)+":"+(se(i)?i.signal||WO(i):te(i));return t+"}"}function bWe(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function xWe(e,t,n){return se(e)||q("Input Vega specification must be an object."),t=Kg(bWe(),t,e.config),gWe(e,new Aoe(t,n)).toRuntime()}var wWe="5.30.0";Oe(lg,kMe,GDe,_Oe,c9e,iNe,FIe,cIe,RIe,rLe,hLe,xLe);const SWe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:gn,CanvasHandler:Rv,CanvasRenderer:hS,DATE:wi,DAY:xr,DAYOFYEAR:ka,Dataflow:mp,Debug:yQ,Error:xC,EventStream:MC,Gradient:mte,GroupItem:JC,HOURS:Ki,Handler:dD,HybridHandler:ane,HybridRenderer:q3,Info:mQ,Item:ZC,MILLISECONDS:Cs,MINUTES:Qi,MONTH:Cr,Marks:Zi,MultiPulse:_R,None:gQ,Operator:St,Parameters:TC,Pulse:Zu,QUARTER:xi,RenderType:Du,Renderer:Pv,ResourceLoader:kte,SECONDS:Oo,SVGHandler:Yte,SVGRenderer:vD,SVGStringRenderer:sne,Scenegraph:jte,TIME_UNITS:gR,Transform:V,View:qie,WEEK:wn,Warn:tR,YEAR:er,accessor:Ei,accessorFields:kr,accessorName:nn,array:ae,ascending:kC,bandwidthNRD:TR,bin:QZ,bootstrapCI:ZZ,boundClip:yne,boundContext:Av,boundItem:B3,boundMark:Nte,boundStroke:Vl,changeset:Vd,clampRange:AQ,codegenExpression:bie,compare:sR,constant:Tr,cumulativeLogNormal:OR,cumulativeNormal:PC,cumulativeUniform:zR,dayofyear:iZ,debounce:aR,defaultLocale:xR,definition:YZ,densityLogNormal:DR,densityNormal:MR,densityUniform:LR,domChild:bn,domClear:bo,domCreate:Pu,domFind:fD,dotbin:JZ,error:q,expressionFunction:cn,extend:Oe,extent:Sa,extentIndex:TQ,falsy:ou,fastmap:Zg,field:Ro,flush:MQ,font:i_,fontFamily:Fv,fontSize:Pa,format:g2,formatLocale:Ww,formats:kR,hasOwnProperty:ce,id:uv,identity:Ar,inferType:IZ,inferTypes:LZ,ingest:at,inherits:ne,inrange:Jh,interpolate:U6,interpolateColors:KC,interpolateRange:nte,intersect:hne,intersectBoxLine:ep,intersectPath:K6,intersectPoint:Q6,intersectRule:_te,isArray:G,isBoolean:$c,isDate:Qu,isFunction:Ne,isIterable:FQ,isNumber:Ze,isObject:se,isRegExp:PQ,isString:le,isTuple:$C,key:lR,lerp:RQ,lineHeight:hc,loader:_C,locale:OZ,logger:nR,lruCache:DQ,markup:yD,merge:OQ,mergeConfig:Kg,multiLineOffset:lD,one:Xg,pad:NQ,panLinear:SQ,panLog:kQ,panPow:CQ,panSymlog:_Q,parse:xWe,parseExpression:yO,parseSelector:Rc,path:IC,pathCurves:G6,pathEqual:vne,pathParse:pg,pathRectangle:bte,pathRender:m1,pathSymbols:vte,pathTrail:xte,peek:qe,point:s_,projection:ID,quantileLogNormal:NR,quantileNormal:RC,quantileUniform:jR,quantiles:$R,quantizeInterpolator:rte,quarter:EQ,quartiles:AR,get random(){return No},randomInteger:$4e,randomKDE:PR,randomLCG:E4e,randomLogNormal:tJ,randomMixture:nJ,randomNormal:FR,randomUniform:rJ,read:BZ,regressionConstant:BR,regressionExp:oJ,regressionLinear:UR,regressionLoess:lJ,regressionLog:iJ,regressionPoly:aJ,regressionPow:sJ,regressionQuad:VR,renderModule:a_,repeat:_0,resetDefaultLocale:k3e,resetSVGClipId:Ste,resetSVGDefIds:fDe,responseType:jZ,runtimeContext:Rie,sampleCurve:OC,sampleLogNormal:RR,sampleNormal:FC,sampleUniform:IR,scale:et,sceneEqual:bD,sceneFromJSON:Lte,scenePickVisit:oS,sceneToJSON:Ite,sceneVisit:_s,sceneZOrder:Z6,scheme:V6,serializeXML:nne,setHybridRendererOptions:aDe,setRandom:C4e,span:cv,splitAccessPath:Ta,stringValue:te,textMetrics:Hi,timeBin:wZ,timeFloor:fZ,timeFormatLocale:c1,timeInterval:em,timeOffset:pZ,timeSequence:yZ,timeUnitSpecifier:rZ,timeUnits:mR,toBoolean:uR,toDate:cR,toNumber:wr,toSet:ws,toString:fR,transform:XZ,transforms:lg,truncate:IQ,truthy:Do,tupleid:ve,typeParsers:C3,utcFloor:dZ,utcInterval:tm,utcOffset:gZ,utcSequence:vZ,utcdayofyear:aZ,utcquarter:$Q,utcweek:lZ,version:wWe,visitArray:du,week:oZ,writeConfig:Qg,zero:wu,zoomLinear:rR,zoomLog:iR,zoomPow:Lw,zoomSymlog:oR},Symbol.toStringTag,{value:"Module"}));function kWe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var CWe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},_We={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},EWe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const $We=Array.prototype.slice,Xc=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,$We.call(t,1))},AWe=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var TWe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:AWe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Xc("join",arguments)},indexof:function(){return Xc("indexOf",arguments)},lastindexof:function(){return Xc("lastIndexOf",arguments)},slice:function(){return Xc("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Xc("substring",arguments,String)},split:function(){return Xc("split",arguments,String)},replace:function(){return Xc("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const MWe=["view","item","group","xy","x","y"],H4=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&H4.add(setImmediate);const FWe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:CWe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),H4.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||TWe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>_We[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>EWe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,H4.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function i0(e,t,n,r,i,o){const s=a=>FWe[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,MWe.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var PWe={operator(e,t){const n=t.ast,r=e.functions;return i=>i0(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>i0(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>i0(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return i0(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,c;for(const f in r)c=i0(r[f].ast,i,a,l,void 0,s),s[f]!==c&&(s[f]=c,u=1);return n!=="rule"&&kWe(s,r,o),u}}};const RWe="vega-lite",DWe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',OWe="5.21.0",NWe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],IWe="https://vega.github.io/vega-lite/",LWe="Vega-Lite is a concise high-level language for interactive visualization.",zWe=["vega","chart","visualization"],jWe="build/vega-lite.js",BWe="build/vega-lite.min.js",UWe="build/vega-lite.min.js",VWe="build/src/index",WWe="build/src/index.d.ts",HWe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},qWe=["bin","build","src","vega-lite*","tsconfig.json"],GWe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},YWe={type:"git",url:"https://github.com/vega/vega-lite.git"},XWe="BSD-3-Clause",KWe={url:"https://github.com/vega/vega-lite/issues"},QWe={"@babel/core":"^7.24.9","@babel/preset-env":"^7.25.0","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.6.0",rollup:"^4.19.1","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.3","ts-jest":"^29.2.3","ts-json-schema-generator":"^2.3.0",typescript:"~5.5.4","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.26.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},ZWe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},JWe={vega:"^5.24.0"},eHe={node:">=18"},tHe="yarn@1.22.19",nHe={name:RWe,author:DWe,version:OWe,collaborators:NWe,homepage:IWe,description:LWe,keywords:zWe,main:jWe,unpkg:BWe,jsdelivr:UWe,module:VWe,types:WWe,bin:HWe,files:qWe,scripts:GWe,repository:YWe,license:XWe,bugs:KWe,devDependencies:QWe,dependencies:ZWe,peerDependencies:JWe,engines:eHe,packageManager:tHe};function HO(e){return K(e,"or")}function qO(e){return K(e,"and")}function GO(e){return K(e,"not")}function z2(e,t){if(GO(e))z2(e.not,t);else if(qO(e))for(const n of e.and)z2(n,t);else if(HO(e))for(const n of e.or)z2(n,t);else t(e)}function wp(e,t){return GO(e)?{not:wp(e.not,t)}:qO(e)?{and:e.and.map(n=>wp(n,t))}:HO(e)?{or:e.or.map(n=>wp(n,t))}:t(e)}const Me=structuredClone;function Toe(e){throw new Error(e)}function kg(e,t){const n={};for(const r of t)ce(e,r)&&(n[r]=e[r]);return n}function mi(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>bt(e)).join(",")})`};function Be(e){if(Ze(e))return e;const t=le(e)?e:bt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function q4(e){return e===!1||e===null}function ze(e,t){return e.includes(t)}function Cg(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function YO(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Moe(e,...t){for(const n of t)rHe(e,n??{});return e}function rHe(e,t){for(const n of X(t))Qg(e,n,t[n],!0)}function la(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function iHe(e,t){const n=X(e),r=X(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Foe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function XO(e,t){for(const n of e)if(t.has(n))return!0;return!1}function G4(e){const t=new Set;for(const n of e){const i=Ta(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function KO(e,t){return e===void 0||t===void 0?!0:XO(G4(e),G4(t))}function vt(e){return X(e).length===0}const X=Object.keys,tr=Object.values,yc=Object.entries;function F1(e){return e===!0||e===!1}function Lt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Ty(e,t){return GO(e)?`!(${Ty(e.not,t)})`:qO(e)?`(${e.and.map(n=>Ty(n,t)).join(") && (")})`:HO(e)?`(${e.or.map(n=>Ty(n,t)).join(") || (")})`:t(e)}function ek(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&ek(e[n],t)&&delete e[n],vt(e)}function Wv(e){return e.charAt(0).toUpperCase()+e.substr(1)}function QO(e,t="datum"){const n=Ta(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(te).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function Poe(e,t="datum"){return`${t}[${te(Ta(e).join("."))}]`}function oHe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Lo(e){return`${Ta(e).map(oHe).join("\\.")}`}function wd(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function fm(e){return`${Ta(e).join(".")}`}function _g(e){return e?Ta(e).length:0}function ln(...e){return e.find(t=>t!==void 0)}let Roe=42;function Doe(e){const t=++Roe;return e?String(e)+t:t}function sHe(){Roe=42}function Ooe(e){return Noe(e)?e:`__${e}`}function Noe(e){return e.startsWith("__")}function P1(e){if(e!==void 0)return(e%360+360)%360}function M_(e){return Ze(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const TU=Object.getPrototypeOf(structuredClone({}));function ji(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!ji(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!ji(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==TU.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==TU.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!ji(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function bt(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(s,1),`{${o}}`}(e)}function K(e,t){return se(e)&&ce(e,t)&&e[t]!==void 0}const wl="row",Sl="column",F_="facet",zt="x",Un="y",Rs="x2",Na="y2",Dc="xOffset",dm="yOffset",Ds="radius",Hl="radius2",Bo="theta",ql="theta2",Os="latitude",Ns="longitude",Is="latitude2",zo="longitude2",ki="color",Ia="fill",La="stroke",Ci="shape",Gl="size",Xd="angle",Yl="opacity",Oc="fillOpacity",Nc="strokeOpacity",Ic="strokeWidth",Lc="strokeDash",Hv="text",Eg="order",qv="detail",P_="key",Sd="tooltip",R_="href",D_="url",O_="description",aHe={x:1,y:1,x2:1,y2:1},Ioe={theta:1,theta2:1,radius:1,radius2:1};function Loe(e){return ce(Ioe,e)}const ZO={longitude:1,longitude2:1,latitude:1,latitude2:1};function zoe(e){switch(e){case Os:return"y";case Is:return"y2";case Ns:return"x";case zo:return"x2"}}function joe(e){return ce(ZO,e)}const lHe=X(ZO),JO={...aHe,...Ioe,...ZO,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Sp(e){return e===ki||e===Ia||e===La}const Boe={row:1,column:1,facet:1},$o=X(Boe),e8={...JO,...Boe},uHe=X(e8),{order:jat,detail:Bat,tooltip:Uat,...cHe}=e8,{row:Vat,column:Wat,facet:Hat,...fHe}=cHe;function dHe(e){return ce(fHe,e)}function Uoe(e){return ce(e8,e)}const hHe=[Rs,Na,Is,zo,ql,Hl];function Voe(e){return Kd(e)!==e}function Kd(e){switch(e){case Rs:return zt;case Na:return Un;case Is:return Os;case zo:return Ns;case ql:return Bo;case Hl:return Ds}return e}function vc(e){if(Loe(e))switch(e){case Bo:return"startAngle";case ql:return"endAngle";case Ds:return"outerRadius";case Hl:return"innerRadius"}return e}function za(e){switch(e){case zt:return Rs;case Un:return Na;case Os:return Is;case Ns:return zo;case Bo:return ql;case Ds:return Hl}}function _i(e){switch(e){case zt:case Rs:return"width";case Un:case Na:return"height"}}function Woe(e){switch(e){case zt:return"xOffset";case Un:return"yOffset";case Rs:return"x2Offset";case Na:return"y2Offset";case Bo:return"thetaOffset";case Ds:return"radiusOffset";case ql:return"theta2Offset";case Hl:return"radius2Offset"}}function t8(e){switch(e){case zt:return"xOffset";case Un:return"yOffset"}}function pHe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const gHe=X(JO),{x:qat,y:Gat,x2:Yat,y2:Xat,xOffset:Kat,yOffset:Qat,latitude:Zat,longitude:Jat,latitude2:elt,longitude2:tlt,theta:nlt,theta2:rlt,radius:ilt,radius2:olt,...n8}=JO,mHe=X(n8),r8={x:1,y:1},Xl=X(r8);function un(e){return ce(r8,e)}const i8={theta:1,radius:1},yHe=X(i8);function N_(e){return e==="width"?zt:Un}const Hoe={xOffset:1,yOffset:1};function Gv(e){return ce(Hoe,e)}const{text:slt,tooltip:alt,href:llt,url:ult,description:clt,detail:flt,key:dlt,order:hlt,...qoe}=n8,vHe=X(qoe);function bHe(e){return ce(n8,e)}function xHe(e){switch(e){case ki:case Ia:case La:case Gl:case Ci:case Yl:case Ic:case Lc:return!0;case Oc:case Nc:case Xd:return!1}}const Goe={...r8,...i8,...Hoe,...qoe},o8=X(Goe);function ja(e){return ce(Goe,e)}function wHe(e,t){return kHe(e)[t]}const Yoe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:plt,...SHe}=Yoe;function kHe(e){switch(e){case ki:case Ia:case La:case O_:case qv:case P_:case Sd:case R_:case Eg:case Yl:case Oc:case Nc:case Ic:case F_:case wl:case Sl:return Yoe;case zt:case Un:case Dc:case dm:case Os:case Ns:return SHe;case Rs:case Na:case Is:case zo:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Gl:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Lc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ci:return{point:"always",geoshape:"always"};case Hv:return{text:"always"};case Xd:return{point:"always",square:"always",text:"always"};case D_:return{image:"always"};case Bo:return{text:"always",arc:"always"};case Ds:return{text:"always",arc:"always"};case ql:case Hl:return{arc:"always"}}}function t5(e){switch(e){case zt:case Un:case Bo:case Ds:case Dc:case dm:case Gl:case Xd:case Ic:case Yl:case Oc:case Nc:case Rs:case Na:case ql:case Hl:return;case F_:case wl:case Sl:case Ci:case Lc:case Hv:case Sd:case R_:case D_:case O_:return"discrete";case ki:case Ia:case La:return"flexible";case Os:case Ns:case Is:case zo:case qv:case P_:case Eg:return}}const CHe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},_He={count:1,min:1,max:1};function Nl(e){return K(e,"argmin")}function zc(e){return K(e,"argmax")}function s8(e){return le(e)&&ce(CHe,e)}const EHe=new Set(["count","valid","missing","distinct"]);function I_(e){return le(e)&&EHe.has(e)}function $He(e){return le(e)&&ze(["min","max"],e)}const AHe=new Set(["count","sum","distinct","valid","missing"]),THe=new Set(["mean","average","median","q1","q3","min","max"]);function Xoe(e){return $c(e)&&(e=X_(e,void 0)),"bin"+X(e).map(t=>L_(e[t])?Lt(`_${t}_${yc(e[t])}`):Lt(`_${t}_${e[t]}`)).join("")}function Et(e){return e===!0||Qd(e)&&!e.binned}function Hn(e){return e==="binned"||Qd(e)&&e.binned===!0}function Qd(e){return se(e)}function L_(e){return K(e,"param")}function MU(e){switch(e){case wl:case Sl:case Gl:case ki:case Ia:case La:case Ic:case Yl:case Oc:case Nc:case Ci:return 6;case Lc:return 4;default:return 10}}function Yv(e){return K(e,"expr")}function Gn(e,{level:t}={level:0}){const n=X(e||{}),r={};for(const i of n)r[i]=t===0?Oi(e[i]):Gn(e[i],{level:t-1});return r}function Koe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,y={...g,...a?{fill:a}:{}},m={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=kg(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:y,subtitleMarkConfig:b,nonMarkTitleProperties:m,subtitle:v}}function mu(e){return le(e)||G(e)&&le(e[0])}function me(e){return K(e,"signal")}function Zd(e){return K(e,"step")}function MHe(e){return G(e)?!1:K(e,"fields")&&!K(e,"data")}function FHe(e){return G(e)?!1:K(e,"fields")&&K(e,"data")}function hl(e){return G(e)?!1:K(e,"field")&&K(e,"data")}const PHe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},RHe=X(PHe),DHe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Y4=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Qoe(e){const t=G(e.condition)?e.condition.map(FU):FU(e.condition);return{...Oi(e),condition:t}}function Oi(e){if(Yv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function FU(e){if(Yv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Pt(e){if(Yv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return me(e)?e:e!==void 0?{value:e}:void 0}function OHe(e){return me(e)?e.signal:te(e)}function PU(e){return me(e)?e.signal:te(e.value)}function ps(e){return me(e)?e.signal:e==null?null:te(e)}function NHe(e,t,n){for(const r of n){const i=Ea(r,t.markDef,t.config);i!==void 0&&(e[r]=Pt(i))}return e}function Zoe(e){return[].concat(e.type,e.style??[])}function mt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&K(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Ea(e,t,n,r)}function Ea(e,t,n,{vgChannel:r}={}){const i=X4(e,t,n.style);return ln(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function X4(e,t,n){return Joe(e,Zoe(t),n)}function Joe(e,t,n){t=ae(t);let r;for(const i of t){const o=n[i];K(o,e)&&(r=o[e])}return r}function ese(e,t){return ae(e).reduce((n,r)=>(n.field.push(ie(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function tse(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(ji(i,r))return;n.push(r)}),n}function nse(e,t){return ji(e,t)||!t?e:e?[...ae(e),...ae(t)].join(", "):t}function rse(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((mu(n)||me(n))&&(mu(r)||me(r)))return{explicit:e.explicit,value:nse(n,r)};if(mu(n)||me(n))return{explicit:e.explicit,value:n};if(mu(r)||me(r))return{explicit:e.explicit,value:r};if(!mu(n)&&!me(n)&&!mu(r)&&!me(r))return{explicit:e.explicit,value:tse(n,r)};throw new Error("It should never reach here")}function a8(e){return`Invalid specification ${bt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const IHe='Autosize "fit" only works for single views and layered views.';function RU(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function DU(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function OU(e){return e?`Dropping "fit-${e}" because spec has discrete ${_i(e)}.`:'Dropping "fit" because spec has discrete size.'}function l8(e){return`Unknown field for ${e}. Cannot calculate view size.`}function NU(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function LHe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function zHe(e){return`The "nearest" transform is not supported for ${e} marks.`}function ise(e){return`Selection not supported for ${e} yet.`}function jHe(e){return`Cannot find a selection named "${e}".`}const BHe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",UHe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",VHe="Legend bindings are only supported for selections over an individual field or encoding channel.";function WHe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function HHe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const qHe="The same selection must be used to override scale domains in a layered view.",GHe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function YHe(e){return`Unknown repeated value "${e}".`}function IU(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const XHe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function KHe(e){return`Unrecognized parse "${e}".`}function LU(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const QHe="Attempt to add the same child twice.";function ZHe(e){return`Ignoring an invalid transform: ${bt(e)}.`}const JHe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function zU(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function eqe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${bt(t)} is overridden by a child projection ${bt(n)}.`}const tqe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function nqe(e){return`${e}Offset dropped because ${e} is continuous`}function rqe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${bt(n)}}.`}function ose(e){return`Invalid field type "${e}".`}function iqe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function oqe(e){return`Invalid aggregation operator "${e}".`}function sse(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function sqe(e){return`Position range does not support relative band size for ${e}.`}function K4(e,t){return`Dropping ${bt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const aqe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function z_(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function lqe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function uqe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function cqe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function fqe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function n5(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function dqe(e){return`The ${e} for range marks cannot be an expression`}function hqe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function pqe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function gqe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function mqe(e){return`Cannot use the relative band size with ${e} scale.`}function yqe(e){return`Using unaggregated domain with raw field has no effect (${bt(e)}).`}function vqe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function bqe(e){return`Unaggregated domain is currently unsupported for log scale (${bt(e)}).`}function xqe(e){return`Cannot apply size to non-oriented mark "${e}".`}function wqe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Sqe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function ase(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function lse(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function kqe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${bt(n)} and ${bt(r)}). Using ${bt(n)}.`}function Cqe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${bt(n)} and ${bt(r)}). Using the union of the two domains.`}function _qe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function Eqe(e){return`Dropping sort property ${bt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const jU="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",$qe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Aqe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Tqe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Mqe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Fqe(e){return`Stack is applied to a non-linear scale (${e}).`}function Pqe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function tk(e,t){return`Invalid ${e}: ${bt(t)}.`}function Rqe(e){return`Dropping day from datetime ${bt(e)} as day cannot be combined with other units.`}function Dqe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Oqe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Nqe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function BU(e){return`1D error band does not support ${e}.`}function use(e){return`Channel ${e} is required for "binned" bin.`}function Iqe(e){return`Channel ${e} should not be used with "binned" bin.`}function Lqe(e){return`Domain for ${e} is required for threshold scale.`}const cse=nR(tR);let $g=cse;function zqe(e){return $g=e,$g}function jqe(){return $g=cse,$g}function Z(...e){$g.warn(...e)}function Bqe(...e){$g.debug(...e)}function Jd(e){if(e&&se(e)){for(const t of c8)if(K(e,t))return!0}return!1}const fse=["january","february","march","april","may","june","july","august","september","october","november","december"],Uqe=fse.map(e=>e.substr(0,3)),dse=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Vqe=dse.map(e=>e.substr(0,3));function Wqe(e){if(M_(e)&&(e=+e),Ze(e))return e>4&&Z(tk("quarter",e)),e-1;throw new Error(tk("quarter",e))}function Hqe(e){if(M_(e)&&(e=+e),Ze(e))return e-1;{const t=e.toLowerCase(),n=fse.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Uqe.indexOf(r);if(i!==-1)return i;throw new Error(tk("month",e))}}function qqe(e){if(M_(e)&&(e=+e),Ze(e))return e%7;{const t=e.toLowerCase(),n=dse.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Vqe.indexOf(r);if(i!==-1)return i;throw new Error(tk("day",e))}}function u8(e,t){const n=[];if(t&&e.day!==void 0&&X(e).length>1&&(Z(Rqe(e)),e=Me(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Hqe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Wqe(e.quarter):e.quarter;n.push(Ze(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?qqe(e.day):e.day;n.push(Ze(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function kd(e){const n=u8(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Gqe(e){const n=u8(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Yqe(e){const t=u8(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const hse={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},c8=X(hse);function Xqe(e){return ce(hse,e)}function eh(e){return se(e)?e.binned:pse(e)}function pse(e){return e&&e.startsWith("binned")}function f8(e){return e.startsWith("utc")}function Kqe(e){return e.substring(3)}const Qqe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function j_(e){return c8.filter(t=>mse(e,t))}function gse(e){const t=j_(e);return t[t.length-1]}function mse(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Zqe(e,t,{end:n}={end:!1}){const r=QO(t),i=f8(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of c8)mse(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),Gqe(a)}function yse(e){if(!e)return;const t=j_(e);return`timeUnitSpecifier(${bt(t)}, ${bt(Qqe)})`}function Jqe(e,t,n){if(!e)return;const r=yse(e);return`${n||f8(e)?"utc":"time"}Format(${t}, ${r})`}function In(e){if(!e)return;let t;return le(e)?pse(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:se(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),f8(t.unit)&&(t.utc=!0,t.unit=Kqe(t.unit)),t}function eGe(e){const{utc:t,...n}=In(e);return n.unit?(t?"utc":"")+X(n).map(r=>Lt(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+X(n).map(r=>Lt(`_${r}_${n[r]}`)).join("")}function vse(e,t=n=>n){const n=In(e),r=gse(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=bse(r,n.step),a={...i,[s]:+i[s]+o};return`${t(kd(a))} - ${t(kd(i))}`}}const tGe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function nGe(e){return ce(tGe,e)}function bse(e,t=1){if(nGe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function rGe(e){return K(e,"param")}function d8(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function h8(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function p8(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function g8(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function m8(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function y8(e){if(e!=null&&e.field){if(G(e.range)&&e.range.length===2)return!0;if(me(e.range))return!0}return!1}function v8(e){return!!(e!=null&&e.field)&&(G(e.oneOf)||G(e.in))}function iGe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function xse(e){return v8(e)||d8(e)||y8(e)||h8(e)||g8(e)||p8(e)||m8(e)}function Vs(e,t){return K_(e,{timeUnit:t,wrapTime:!0})}function oGe(e,t){return e.map(n=>Vs(n,t))}function wse(e,t=!0){const{field:n}=e,r=In(e.timeUnit),{unit:i,binned:o}=r||{},s=ie(e,{expr:"datum"}),a=i?`time(${o?s:Zqe(i,n)})`:s;if(d8(e))return`${a}===${Vs(e.equal,i)}`;if(h8(e)){const l=e.lt;return`${a}<${Vs(l,i)}`}else if(g8(e)){const l=e.gt;return`${a}>${Vs(l,i)}`}else if(p8(e)){const l=e.lte;return`${a}<=${Vs(l,i)}`}else if(m8(e)){const l=e.gte;return`${a}>=${Vs(l,i)}`}else{if(v8(e))return`indexof([${oGe(e.oneOf,i).join(",")}], ${a}) !== -1`;if(iGe(e))return B_(a,e.valid);if(y8(e)){const{range:l}=Gn(e),u=me(l)?{signal:`${l.signal}[0]`}:l[0],c=me(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+Vs(u,i)+", "+Vs(c,i)+"])";const f=[];return u!==null&&f.push(`${a} >= ${Vs(u,i)}`),c!==null&&f.push(`${a} <= ${Vs(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${bt(e)}`)}function B_(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function sGe(e){return xse(e)&&e.timeUnit?{...e,timeUnit:In(e.timeUnit)}:e}const Xv={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function aGe(e){return e==="quantitative"||e==="temporal"}function Sse(e){return e==="ordinal"||e==="nominal"}const Cd=Xv.quantitative,b8=Xv.ordinal,Ag=Xv.temporal,x8=Xv.nominal,hm=Xv.geojson;function lGe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Cd:return"quantitative";case"t":case Ag:return"temporal";case"o":case b8:return"ordinal";case"n":case x8:return"nominal";case hm:return"geojson"}}const Yn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Q4={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function uGe(e,t){const n=Q4[e],r=Q4[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const cGe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function UU(e){return cGe[e]}const kse=new Set(["linear","log","pow","sqrt","symlog"]),Cse=new Set([...kse,"time","utc"]);function _se(e){return kse.has(e)}const Ese=new Set(["quantile","quantize","threshold"]),fGe=new Set([...Cse,...Ese,"sequential","identity"]),dGe=new Set(["ordinal","bin-ordinal","point","band"]);function Ln(e){return dGe.has(e)}function Es(e){return fGe.has(e)}function ua(e){return Cse.has(e)}function Tg(e){return Ese.has(e)}const hGe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function pGe(e){return!le(e)&&K(e,"name")}function $se(e){return K(e,"param")}function gGe(e){return K(e,"unionWith")}function mGe(e){return se(e)&&"field"in e}const yGe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:glt,domain:mlt,range:ylt,rangeMax:vlt,rangeMin:blt,scheme:xlt,...vGe}=yGe,bGe=X(vGe);function Z4(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ua(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ua(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ua(e);case"nice":return ua(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Es(e)&&!ze(["log","time","utc","threshold","quantile"],e)}}function Ase(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Sp(e)?void 0:gqe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function xGe(e,t){return ze([b8,x8],t)?e===void 0||Ln(e):t===Ag?ze([Yn.TIME,Yn.UTC,void 0],e):t===Cd?_se(e)||Tg(e)||e===void 0:!0}function wGe(e,t,n=!1){if(!ja(e))return!1;switch(e){case zt:case Un:case Dc:case dm:case Bo:case Ds:return ua(t)||t==="band"?!0:t==="point"?!n:!1;case Gl:case Ic:case Yl:case Oc:case Nc:case Xd:return ua(t)||Tg(t)||ze(["band","point","ordinal"],t);case ki:case Ia:case La:return t!=="band";case Lc:case Ci:return t==="ordinal"||Tg(t)}}function SGe(e){return se(e)&&"value"in e}const ni={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Tse=ni.arc,U_=ni.area,V_=ni.bar,kGe=ni.image,W_=ni.line,H_=ni.point,CGe=ni.rect,nk=ni.rule,Mse=ni.text,w8=ni.tick,_Ge=ni.trail,S8=ni.circle,k8=ni.square,Fse=ni.geoshape;function jc(e){return["line","area","trail"].includes(e)}function R1(e){return["rect","bar","image","arc","tick"].includes(e)}const EGe=new Set(X(ni));function $a(e){return K(e,"type")}const $Ge=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],AGe=["fill","fillOpacity"],TGe=[...$Ge,...AGe],MGe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},VU=X(MGe),r5=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],FGe={area:["line","point"],bar:r5,rect:r5,line:["point"],tick:["bandSize","thickness",...r5]},PGe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},RGe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Pse=X(RGe);function _d(e){return K(e,"band")}const DGe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},OGe=5,C8={binSpacing:0,continuousBandSize:OGe,minBandSize:.25,timeUnitBandPosition:.5},NGe={...C8,binSpacing:1},IGe={...C8,thickness:1};function LGe(e){return $a(e)?e.type:e}function Rse(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function _8({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!Es(r)||i)return"always-valid";const o=Rse(mt("invalid",e,t),{isPath:jc(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function zGe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function Dse({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function Ose({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var c;const s=n==null?void 0:n.get("type"),a=As(t),l=I_(a==null?void 0:a.aggregate),u=_8({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){const f=((c=o.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:B_(ie(a,{expr:"datum"}),!1),...jGe(f,n,r)}}}function jGe(e,t,n){if(SGe(e)){const{value:r}=e;return me(r)?{signal:r.signal}:{value:r}}return Dse({scale:t,scaleName:n,mode:"zeroOrMin"})}function E8(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=Kd(t),l=$8(e),u=Ose({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return u!==void 0?[u,l]:l}function BGe(e){const{datum:t}=e;return Jd(t)?kd(t):`${bt(t)}`}function Zf(e,t,n,r){const i={};if(t&&(i.scale=t),Ba(e)){const{datum:o}=e;Jd(o)?i.signal=kd(o):me(o)?i.signal=o.signal:Yv(o)?i.signal=o.expr:i.value=o}else i.field=ie(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function rk({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!me(s)&&0<s&&s<1?"datum":void 0,l=ie(t,{expr:a,suffix:i}),u=n!==void 0?ie(n,{expr:a}):ie(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;const f=s===0?l:u;c.field=f}else{const f=me(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function UGe({scaleName:e,fieldDef:t}){const n=ie(t,{expr:"datum"}),r=ie(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function $8({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(Pe(t)){const f=s==null?void 0:s.get("type");if(Zr(t)){c??(c=bc({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Et(d)||c&&h&&p===Ag)return a!=null&&a.impute?Zf(t,o,{binSuffix:"mid"},{offset:l}):c&&!Ln(f)?rk({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Zf(t,o,eb(t,e)?{binSuffix:"range"}:{},{offset:l});if(Hn(d)){if(J(n))return rk({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});Z(use(e===zt?Rs:Na))}}return Zf(t,o,Ln(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?c??t.bandPosition??.5:void 0})}else if($s(t)){const f=t.value,d=l?{offset:l}:{};return{...My(e,f),...d}}}return Ne(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function My(e,t){return ze(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:ze(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Pt(t)}function Ed(e){return e&&e!=="number"&&e!=="time"}function Nse(e,t,n){return`${e}(${t}${n?`, ${bt(n)}`:""})`}const VGe=" – ";function A8({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var l,u;if(Ed(n))return gs({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=Ise(e,r,i),a=Mg(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return gs({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return gs({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&J(e)&&e.timeUnit===void 0)return gs({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Pg(e)){const c=HGe({field:s,timeUnit:J(e)?(l=In(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:th(e)&&((u=e.scale)==null?void 0:u.type)===Yn.UTC});return c?{signal:c}:void 0}if(t=J4({type:a,specifiedFormat:t,config:o,normalizeStack:i}),J(e)&&Et(e.bin)){const c=ie(e,{expr:r,binSuffix:"end"});return{signal:Kv(s,c,t,n,o)}}else return t||Mg(e)==="quantitative"?{signal:`${jse(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function Ise(e,t,n){return J(e)?n?`${ie(e,{expr:t,suffix:"end"})}-${ie(e,{expr:t,suffix:"start"})}`:ie(e,{expr:t}):BGe(e)}function gs({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=Ise(e,r,i)),s!=="datum.value"&&J(e)&&Et(e.bin)){const a=ie(e,{expr:r,binSuffix:"end"});return{signal:Kv(s,a,t,n,o)}}return{signal:Nse(n,s,t)}}function Lse(e,t,n,r,i,o){var s;if(!(le(r)&&Ed(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Mg(e)==="quantitative"&&(i.normalizedNumberFormatType&&Fg(e)&&e.stack==="normalize"||i.numberFormatType))){if(Fg(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return J4({type:"quantitative",config:i,normalizeStack:!0});if(Pg(e)){const a=J(e)?(s=In(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:WGe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return J4({type:t,specifiedFormat:n,config:i})}}function zse(e,t,n){var r;if(e&&(me(e)||e==="number"||e==="time"))return e;if(Pg(t)&&n!=="time"&&n!=="utc")return J(t)&&((r=In(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function J4({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(le(t))return t;if(e===Cd)return r?n.normalizedNumberFormat:n.numberFormat}function WGe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:yse(t)}:r?void 0:n.timeFormat)}function jse(e,t){return`format(${e}, "${t||""}")`}function WU(e,t,n,r){return Ed(n)?Nse(n,e,t):jse(e,(le(t)?t:void 0)??r.numberFormat)}function Kv(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return Kv(e,t,i.numberFormat,i.numberFormatType,i);const o=WU(e,n,r,i),s=WU(t,n,r,i);return`${B_(e,!1)} ? "null" : ${o} + "${VGe}" + ${s}`}function HGe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=le(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):Jqe(t,e,o)}const q_="min",qGe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function HU(e){return ce(qGe,e)}function GGe(e){return K(e,"encoding")}function kl(e){return e&&(e.op==="count"||K(e,"field"))}function Bse(e){return e&&G(e)}function Qv(e){return K(e,"row")||K(e,"column")}function T8(e){return K(e,"header")}function G_(e){return K(e,"facet")}function YGe(e){return K(e,"param")}function XGe(e){return!le(e)&&K(e,"repeat")}function qU(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function M8(e){return K(e,"sort")}function bc({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Pe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(J(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Ea("timeUnitBandPosition",n,r);if(Et(o))return .5}}function Use({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var u,c,f;const a=_i(e),l=mt(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(J(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Ea("timeUnitBandSize",r,i)};if(Et(h)&&!Ln(o))return{band:1}}if(R1(r.type))return o?Ln(o)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Vse(e,t,n,r){return Et(e.bin)||e.timeUnit&&Zr(e)&&e.type==="temporal"?bc({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Wse(e){return K(e,"sort")&&!K(e,"field")}function Zv(e){return K(e,"condition")}function Y_(e){const t=e==null?void 0:e.condition;return!!t&&!G(t)&&J(t)}function Jv(e){const t=e==null?void 0:e.condition;return!!t&&!G(t)&&Pe(t)}function KGe(e){const t=e==null?void 0:e.condition;return!!t&&(G(t)||$s(t))}function J(e){return K(e,"field")||(e==null?void 0:e.aggregate)==="count"}function Mg(e){return e==null?void 0:e.type}function Ba(e){return K(e,"datum")}function zu(e){return Zr(e)&&!ok(e)||ik(e)}function GU(e){return Zr(e)&&e.type==="quantitative"&&!e.bin||ik(e)}function ik(e){return Ba(e)&&Ze(e.datum)}function Pe(e){return J(e)||Ba(e)}function Zr(e){return e&&(K(e,"field")||e.aggregate==="count")&&K(e,"type")}function $s(e){return K(e,"value")}function th(e){return K(e,"scale")||K(e,"sort")}function Fg(e){return K(e,"axis")||K(e,"stack")||K(e,"impute")}function Hse(e){return K(e,"legend")}function qse(e){return K(e,"format")||K(e,"formatType")}function QGe(e){return mi(e,["legend","axis","header","scale"])}function ZGe(e){return K(e,"op")}function ie(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(eYe(e))n=Ooe("count");else{let s;if(!t.nofn)if(ZGe(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;Et(a)?(s=Xoe(a),i=(t.binSuffix??"")+(t.suffix??"")):l?zc(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Nl(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!eh(u)&&(s=eGe(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?fm(n):t.expr?Poe(n,t.expr)+o:Lo(n)+o}function ok(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return J(e)&&!!e.bin;case"temporal":return!1}throw new Error(ose(e.type))}function JGe(e){var t;return th(e)&&Tg((t=e.scale)==null?void 0:t.type)}function eYe(e){return e.aggregate==="count"}function tYe(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Et(r))return`${n} (binned)`;if(i&&!eh(i)){const a=(s=In(i))==null?void 0:s.unit;if(a)return`${n} (${j_(a).join("-")})`}else if(o)return zc(o)?`${n} for max ${o.argmax}`:Nl(o)?`${n} for min ${o.argmin}`:`${Wv(o)} of ${n}`;return n}function nYe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(zc(t))return`${i} for argmax(${t.argmax})`;if(Nl(t))return`${i} for argmin(${t.argmin})`;const o=r&&!eh(r)?In(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Et(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const Gse=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return nYe(e);default:return tYe(e,t)}};let Yse=Gse;function Xse(e){Yse=e}function rYe(){Xse(Gse)}function kp(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=F8(e))==null?void 0:a.title;if(!J(e))return i??e.title;const o=e,s=r?P8(o,t):void 0;return n?ln(i,o.title,s):i??o.title??s}function F8(e){if(Fg(e)&&e.axis)return e.axis;if(Hse(e)&&e.legend)return e.legend;if(T8(e)&&e.header)return e.header}function P8(e,t){return Yse(e,t)}function sk(e){if(qse(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=F8(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function iYe(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(M8(e)&&G(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!zc(n)&&!Nl(n))return"quantitative";if(th(e)&&((o=e.scale)!=null&&o.type))switch(Q4[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function As(e){if(J(e))return e;if(Y_(e))return e.condition}function Sn(e){if(Pe(e))return e;if(Jv(e))return e.condition}function Kse(e,t,n,r={}){if(le(e)||Ze(e)||$c(e)){const i=le(e)?"string":Ze(e)?"number":"boolean";return Z(rqe(t,i,e)),{value:e}}return Pe(e)?ak(e,t,n,r):Jv(e)?{...e,condition:ak(e.condition,t,n,r)}:e}function ak(e,t,n,r){if(qse(e)){const{format:i,formatType:o,...s}=e;if(Ed(o)&&!n.customFormatTypes)return Z(zU(t)),ak(s,t,n,r)}else{const i=Fg(e)?"axis":Hse(e)?"legend":T8(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(Ed(s)&&!n.customFormatTypes)return Z(zU(t)),ak({...e,[i]:a},t,n,r)}}return J(e)?R8(e,t,r):oYe(e)}function oYe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Ze(n)?"quantitative":le(n)?"nominal":Jd(n)?"temporal":void 0,{...e,type:t}}function R8(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!s8(r)&&!zc(r)&&!Nl(r)&&(Z(oqe(r)),delete a.aggregate),i&&(a.timeUnit=In(i)),s&&(a.field=`${s}`),Et(o)&&(a.bin=X_(o,t)),Hn(o)&&!un(t)&&Z(Iqe(t)),Zr(a)){const{type:l}=a,u=lGe(l);l!==u&&(a.type=u),l!=="quantitative"&&I_(r)&&(Z(iqe(l,r)),a.type="quantitative")}else if(!Voe(t)){const l=iYe(a,t);a.type=l}if(Zr(a)){const{compatible:l,warning:u}=sYe(a,t)||{};l===!1&&Z(u)}if(M8(a)&&le(a.sort)){const{sort:l}=a;if(HU(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&HU(u))return{...a,sort:{encoding:u,order:"descending"}}}if(T8(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function X_(e,t){return $c(e)?{maxbins:MU(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:MU(t)}:e}const Sh={compatible:!0};function sYe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case wl:case Sl:case F_:return ok(e)?Sh:{compatible:!1,warning:uqe(t)};case zt:case Un:case Dc:case dm:case ki:case Ia:case La:case Hv:case qv:case P_:case Sd:case R_:case D_:case Xd:case Bo:case Ds:case O_:return Sh;case Ns:case zo:case Os:case Is:return n!==Cd?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Sh;case Yl:case Oc:case Nc:case Ic:case Gl:case ql:case Hl:case Rs:case Na:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Sh;case Ci:case Lc:return!ok(e)&&!JGe(e)?{compatible:!1,warning:cqe(t)}:Sh;case Eg:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Sh}}function Pg(e){const{formatType:t}=sk(e);return t==="time"||!t&&aYe(e)}function aYe(e){return e&&(e.type==="temporal"||J(e)&&!!e.timeUnit)}function K_(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=In(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return Yv(e)?a=e.expr:me(e)?a=e.signal:Jd(e)?(s=!0,a=kd(e)):(le(e)||Ze(e))&&s&&(a=`datetime(${bt(e)})`,Xqe(o)&&(Ze(e)&&e<1e4||le(e)&&isNaN(Date.parse(e)))&&(a=kd({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:bt(e)}function Qse(e,t){const{type:n}=e;return t.map(r=>{const i=J(e)&&!eh(e.timeUnit)?e.timeUnit:void 0,o=K_(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function eb(e,t){return Et(e.bin)?ja(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const YU={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function tb(e){return e==null?void 0:e.condition}const Zse=["domain","grid","labels","ticks","title"],lYe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Jse={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},uYe={...Jse,style:1,labelExpr:1,encoding:1};function XU(e){return ce(uYe,e)}const cYe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},eae=X(cYe);function Kl(e){return K(e,"mark")}class Q_{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Kl(t)?LGe(t.mark)===this.name:!1}}function Jf(e,t){const n=e&&e[t];return n?G(n)?Cg(n,r=>!!r.field):J(n)||Y_(n):!1}function tae(e,t){const n=e&&e[t];return n?G(n)?Cg(n,r=>!!r.field):J(n)||Ba(n)||Jv(n):!1}function nae(e,t){if(un(t)){const n=e[t];if((J(n)||Ba(n))&&(Sse(n.type)||J(n)&&n.timeUnit)){const r=t8(t);return tae(e,r)}}return!1}function rae(e){return Cg(uHe,t=>{if(Jf(e,t)){const n=e[t];if(G(n))return Cg(n,r=>!!r.aggregate);{const r=As(n);return r&&!!r.aggregate}}return!1})}function iae(e,t){const n=[],r=[],i=[],o=[],s={};return D8(e,(a,l)=>{if(J(a)){const{field:u,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=F8(a),g=p==null?void 0:p.title;let y=ie(a,{forAs:!0});const m={...g?[]:{title:kp(a,t,{allowDisabling:!0})},...h,field:y};if(c){let v;if(zc(c)?(v="argmax",y=ie({op:"argmax",field:c.argmax},{forAs:!0}),m.field=`${y}.${u}`):Nl(c)?(v="argmin",y=ie({op:"argmin",field:c.argmin},{forAs:!0}),m.field=`${y}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:y};u&&(b.field=u),o.push(b)}}else if(n.push(y),Zr(a)&&Et(f)){if(r.push({bin:f,field:u,as:y}),n.push(ie(a,{binSuffix:"end"})),eb(a,l)&&n.push(ie(a,{binSuffix:"range"})),un(l)){const v={field:`${y}_end`};s[`${l}2`]=v}m.bin="binned",Voe(l)||(m.type=Cd)}else if(d&&!eh(d)){i.push({timeUnit:d,field:u,as:y});const v=Zr(a)&&a.type!==Ag&&"time";v&&(l===Hv||l===Sd?m.formatType=v:bHe(l)?m.legend={formatType:v,...m.legend}:un(l)&&(m.axis={formatType:v,...m.axis}))}s[l]=m}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function fYe(e,t,n){const r=wHe(t,n);if(r){if(r==="binned"){const i=e[t===Rs?zt:Un];return!!(J(i)&&J(e[t])&&Hn(i.bin))}}else return!1;return!0}function dYe(e,t,n,r){const i={};for(const o of X(e))Uoe(o)||Z(lqe(o));for(let o of gHe){if(!e[o])continue;const s=e[o];if(Gv(o)){const a=pHe(o),l=i[a];if(J(l)&&aGe(l.type)&&J(s)&&!l.timeUnit){Z(nqe(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(Z(tqe),o=Bo),!fYe(e,o,t)){Z(z_(o,t));continue}if(o===Gl&&t==="line"){const a=As(e[o]);if(a!=null&&a.aggregate){Z(aqe);continue}}if(o===ki&&(n?"fill"in e:"stroke"in e)){Z(sse("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===qv||o===Eg&&!G(s)&&!$s(s)||o===Sd&&G(s)){if(s){if(o===Eg){const a=e[o];if(Wse(a)){i[o]=a;continue}}i[o]=ae(s).reduce((a,l)=>(J(l)?a.push(R8(l,o)):Z(K4(l,o)),a),[])}}else{if(o===Sd&&s===null)i[o]=null;else if(!J(s)&&!Ba(s)&&!$s(s)&&!Zv(s)&&!me(s)){Z(K4(s,o));continue}i[o]=Kse(s,o,r)}}return i}function Z_(e,t){const n={};for(const r of X(e)){const i=Kse(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function hYe(e){const t=[];for(const n of X(e))if(Jf(e,n)){const r=e[n],i=ae(r);for(const o of i)J(o)?t.push(o):Y_(o)&&t.push(o.condition)}return t}function D8(e,t,n){if(e)for(const r of X(e)){const i=e[r];if(G(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function pYe(e,t,n,r){return e?X(e).reduce((i,o)=>{const s=e[o];return G(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function oae(e,t){return X(t).reduce((n,r)=>{switch(r){case zt:case Un:case R_:case O_:case D_:case Rs:case Na:case Dc:case dm:case Bo:case ql:case Ds:case Hl:case Os:case Ns:case Is:case zo:case Hv:case Ci:case Xd:case Sd:return n;case Eg:if(e==="line"||e==="trail")return n;case qv:case P_:{const i=t[r];if(G(i)||J(i))for(const o of ae(i))o.aggregate||n.push(ie(o,{}));return n}case Gl:if(e==="trail")return n;case ki:case Ia:case La:case Yl:case Oc:case Nc:case Lc:case Ic:{const i=As(t[r]);return i&&!i.aggregate&&n.push(ie(i,{})),n}}},[])}function gYe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(G(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return G(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function eM(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${O8(t)}`:"";return{field:s+t.field,type:t.type,title:me(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=hYe(n).map(QGe);return{tooltip:[...i,...la(o,Be)]}}function O8(e){const{title:t,field:n}=e;return ln(t,n)}function N8(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=O8(n);return sae(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...le(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function sae(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...$a(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...$c(e[t])?{}:e[t]}}]:[]}function aae(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:kx(o,n),continuousAxisChannelDef2:kx(s,n),continuousAxisChannelDefError:kx(a,n),continuousAxisChannelDefError2:kx(l,n),continuousAxis:i}}function kx(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Z(Nqe(n,t)),r}else return e}function lae(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if($a(n)&&n.orient)return n.orient;if(zu(i)){if(zu(o)){const s=J(i)&&i.aggregate,a=J(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Pg(o)&&!Pg(i)?"horizontal":"vertical"}return"horizontal"}else{if(zu(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const lk="boxplot",mYe=["box","median","outliers","rule","ticks"],yYe=new Q_(lk,cae);function uae(e){return Ze(e)?"tukey":e}function cae(e,{config:t}){e={...e,encoding:Z_(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=$a(n)?n:{type:n};i&&Z(ise("boxplot"));const l=a.extent??t.boxplot.extent,u=mt("size",a,t),c=a.invalid,f=uae(l),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:y,groupby:m,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:k}=vYe(e,l,t),S=fm(g.field),{color:C,size:_,...$}=b,A=ih=>N8(a,y,g,ih,t.boxplot),O=A($),M=A(b),P=(se(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",R=A({...$,..._?{size:_}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...C||{value:P}}}}),D=eM([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,b),I={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},N=f==="min-max"?D:eM([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,b),B=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...O({partName:"ticks",mark:I,positionPrefix:"lower_whisker",extraEncoding:N}),...O({partName:"ticks",mark:I,positionPrefix:"upper_whisker",extraEncoding:N})],Y=[...f!=="tukey"?B:[],...M({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:D}),...R({partName:"median",mark:{type:"tick",invalid:c,...se(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:D})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(p),layer:Y};const W=`datum["lower_box_${g.field}"]`,oe=`datum["upper_box_${g.field}"]`,re=`(${oe} - ${W})`,we=`${W} - ${l} * ${re}`,De=`${oe} + ${l} * ${re}`,ut=`datum["${g.field}"]`,$n={joinaggregate:fae(g.field),groupby:m},sr={transform:[{filter:`(${we} <= ${ut}) && (${ut} <= ${De})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${S}`},{op:"max",field:g.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${S}`},...v],groupby:m}],layer:B},{tooltip:ue,...$e}=$,{scale:Ae,axis:Q}=g,mn=O8(g),tt=mi(Q,["title"]),An=sae(a,"outliers",t.boxplot,{transform:[{filter:`(${ut} < ${we}) || (${ut} > ${De})`}],mark:"point",encoding:{[y]:{field:g.field,type:g.type,...mn!==void 0?{title:mn}:{},...Ae!==void 0?{scale:Ae}:{},...vt(tt)?{}:{axis:tt}},...$e,...C?{color:C}:{},...k?{tooltip:k}:{}}})[0];let fn;const oo=[...d,...h,$n];return An?fn={transform:oo,layer:[An,sr]}:(fn=sr,fn.transform.unshift(...oo)),{...s,layer:[fn,{transform:p,layer:Y}]}}function fae(e){const t=fm(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function vYe(e,t,n){const r=lae(e,lk),{continuousAxisChannelDef:i,continuousAxis:o}=aae(e,r,lk),s=i.field,a=fm(s),l=uae(t),u=[...fae(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=gYe(d),{bins:g,timeUnits:y,aggregate:m,groupby:v,encoding:b}=iae(p,n),x=r==="vertical"?"horizontal":"vertical",w=r,k=[...g,...y,{aggregate:[...m,...u],groupby:v},...c];return{bins:g,timeUnits:y,transform:k,groupby:v,aggregate:m,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:h}}const I8="errorbar",bYe=["ticks","rule"],xYe=new Q_(I8,dae);function dae(e,{config:t}){e={...e,encoding:Z_(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=hae(e,I8,t);delete o.size;const c=N8(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function wYe(e,t){const{encoding:n}=e;if(SYe(n))return{orient:lae(e,t),inputType:"raw"};const r=kYe(n),i=CYe(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Pe(a)&&Pe(l))throw new Error(`${t} cannot have both x2 and y2`);if(Pe(a)){if(zu(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Pe(l)){if(zu(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(Pe(l)&&!Pe(a))throw new Error(`${t} cannot have xError2 without xError`);if(Pe(c)&&!Pe(u))throw new Error(`${t} cannot have yError2 without yError`);if(Pe(a)&&Pe(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Pe(a)){if(zu(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Pe(u)){if(zu(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function SYe(e){return(Pe(e.x)||Pe(e.y))&&!Pe(e.x2)&&!Pe(e.y2)&&!Pe(e.xError)&&!Pe(e.xError2)&&!Pe(e.yError)&&!Pe(e.yError2)}function kYe(e){return Pe(e.x2)||Pe(e.y2)}function CYe(e){return Pe(e.xError)||Pe(e.xError2)||Pe(e.yError)||Pe(e.yError2)}function hae(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=$a(r)?r:{type:r};o&&Z(ise(t));const{orient:u,inputType:c}=wYe(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=aae(e,u,t),{errorBarSpecificAggregate:y,postAggregateCalculates:m,tooltipSummary:v,tooltipTitleWithFieldName:b}=_Ye(l,f,d,h,p,c,t,n),{[g]:x,[g==="x"?"x2":"y2"]:w,[g==="x"?"xError":"yError"]:k,[g==="x"?"xError2":"yError2"]:S,...C}=i,{bins:_,timeUnits:$,aggregate:A,groupby:O,encoding:M}=iae(C,n),P=[...A,...y],R=c!=="raw"?[]:O,D=eM(v,f,M,b);return{transform:[...a.transform??[],..._,...$,...P.length===0?[]:[{aggregate:P,groupby:R}],...m],groupby:R,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:M,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:D}}function _Ye(e,t,n,r,i,o,s,a){let l=[],u=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Z(Oqe(h,p,s)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Wv(h)},{fieldPrefix:"upper_",titlePrefix:KU(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:KU(h,p,"-")}],d=!0;else{let g,y,m;p==="ci"?(g="mean",y="ci0",m="ci1"):(g="median",y="q1",m="q3"),l=[{op:y,field:c,as:`lower_${c}`},{op:m,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:kp({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:kp({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:kp({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Z(Dqe(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:wd(wd(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}function KU(e,t,n){return`${Wv(e)} ${n} ${t}`}const L8="errorband",EYe=["band","borders"],$Ye=new Q_(L8,pae);function pae(e,{config:t}){e={...e,encoding:Z_(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=hae(e,L8,t),u=s,c=N8(u,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?Z(BU("interpolate")):u.tension&&Z(BU("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const gae={};function z8(e,t,n){const r=new Q_(e,t);gae[e]={normalizer:r,parts:n}}function AYe(){return X(gae)}z8(lk,cae,mYe);z8(I8,dae,bYe);z8(L8,pae,EYe);const TYe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],mae={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},yae={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},MYe=X(mae),FYe=X(yae),PYe={header:1,headerRow:1,headerColumn:1,headerFacet:1},vae=X(PYe),bae=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],RYe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},DYe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ts="_vgsid_",OYe={point:{on:"click",fields:[Ts],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function j8(e){return e==="legend"||!!(e!=null&&e.legend)}function i5(e){return j8(e)&&se(e)}function B8(e){return!!(e!=null&&e.select)}function xae(e){const t=[];for(const n of e||[]){if(B8(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function NYe(e){return J_(e)||V8(e)||U8(e)}function U8(e){return K(e,"concat")}function J_(e){return K(e,"vconcat")}function V8(e){return K(e,"hconcat")}function wae({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Aa(e){return K(e,"step")}function QU(e){return K(e,"view")||K(e,"width")||K(e,"height")}const ZU=20,IYe={align:1,bounds:1,center:1,columns:1,spacing:1},LYe=X(IYe);function zYe(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(G_(e)&&!Qv(e.facet)||U8(e))&&(i.columns=s),J_(e)&&(i.columns=1);for(const a of LYe)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=Ze(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function tM(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function nM(e,t){const n=uk(e,t);return Aa(n)?n.step:Sae}function uk(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ln(n,{step:e.step})}const Sae=20,jYe={continuousWidth:200,continuousHeight:200,step:Sae},BYe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:jYe,mark:PGe,arc:{},area:{},bar:NGe,circle:{},geoshape:{},image:{},line:{},point:{},rect:C8,rule:{color:"black"},square:{},text:{color:"black"},tick:IGe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:hGe,projection:{},legend:RYe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:OYe,style:{},title:{},facet:{spacing:ZU},concat:{spacing:ZU},normalizedNumberFormat:".0%"},Ya=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],JU={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},eV={blue:Ya[0],orange:Ya[1],red:Ya[2],teal:Ya[3],green:Ya[4],yellow:Ya[5],purple:Ya[6],pink:Ya[7],brown:Ya[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function UYe(e={}){return{signals:[{name:"color",value:se(e)?{...eV,...e}:eV}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function VYe(e){return{signals:[{name:"fontSize",value:se(e)?{...JU,...e}:JU}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function WYe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function kae(e){const t=X(e||{}),n={};for(const r of t){const i=e[r];n[r]=tb(i)?Qoe(i):Oi(i)}return n}function HYe(e){const t=X(e),n={};for(const r of t)n[r]=kae(e[r]);return n}const qYe=[...Pse,...eae,...vae,"background","padding","legend","lineBreak","scale","style","title","view"];function Cae(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=Kg({},Me(BYe),n?WYe(n):{},t?UYe(t):{},r?VYe(r):{},o||{});i&&Qg(s,"selection",i,!0);const a=mi(s,qYe);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Oi(s[l]));for(const l of Pse)s[l]&&(a[l]=Gn(s[l]));for(const l of eae)s[l]&&(a[l]=kae(s[l]));for(const l of vae)s[l]&&(a[l]=Gn(s[l]));if(s.legend&&(a.legend=Gn(s.legend)),s.scale){const{invalid:l,...u}=s.scale,c=Gn(l,{level:1});a.scale={...Gn(u),...X(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=HYe(s.style)),s.title&&(a.title=Gn(s.title)),s.view&&(a.view=Gn(s.view)),a}const GYe=new Set(["view",...EGe]),YYe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],XYe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...FGe};function KYe(e){e=Me(e);for(const t of YYe)delete e[t];if(e.axis)for(const t in e.axis)tb(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of TYe)delete e.legend[t];if(e.mark){for(const t of VU)delete e.mark[t];e.mark.tooltip&&se(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(xae(e.params)),delete e.params);for(const t of GYe){for(const r of VU)delete e[t][r];const n=XYe[t];if(n)for(const r of n)delete e[t][r];ZYe(e,t)}for(const t of AYe())delete e[t];QYe(e);for(const t in e)se(e[t])&&vt(e[t])&&delete e[t];return vt(e)?void 0:e}function QYe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Koe(e.title);vt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),vt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),vt(r)?delete e.title:e.title=r}function ZYe(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};vt(o)||(e.style[n??t]=o),delete e[t]}function eE(e){return K(e,"layer")}function JYe(e){return K(e,"repeat")}function eXe(e){return!G(e.repeat)&&K(e.repeat,"layer")}class W8{map(t,n){return G_(t)?this.mapFacet(t,n):JYe(t)?this.mapRepeat(t,n):V8(t)?this.mapHConcat(t,n):J_(t)?this.mapVConcat(t,n):U8(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(eE(t))return this.mapLayer(t,n);if(Kl(t))return this.mapUnit(t,n);throw new Error(a8(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const tXe={zero:1,center:1,normalize:1};function nXe(e){return ce(tXe,e)}const rXe=new Set([Tse,V_,U_,nk,H_,S8,k8,W_,Mse,w8]),iXe=new Set([V_,U_,Tse]);function kh(e){return J(e)&&Mg(e)==="quantitative"&&!e.bin}function tV(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(J(s)&&J(a))if(kh(s)&&kh(a)){if(s.stack)return t;if(a.stack)return i;const l=J(s)&&!!s.aggregate,u=J(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(kh(s))return t;if(kh(a))return i}else{if(kh(s))return o&&n==="vertical"?void 0:t;if(kh(a))return o&&n==="horizontal"?void 0:i}}function oXe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function _ae(e,t){var g,y;const n=$a(e)?e:{type:e},r=n.type;if(!rXe.has(r))return null;const i=tV(t,"x",n)||tV(t,"theta",n);if(!i)return null;const o=t[i],s=J(o)?ie(o,{}):void 0,a=oXe(i),l=[],u=new Set;if(t[a]){const m=t[a],v=J(m)?ie(m,{}):void 0;v&&v!==s&&(l.push(a),u.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=J(f)?ie(f,{}):void 0;d&&d!==s&&(l.push(c),u.add(d));const h=mHe.reduce((m,v)=>{if(v!=="tooltip"&&Jf(t,v)){const b=t[v];for(const x of ae(b)){const w=As(x);if(w.aggregate)continue;const k=ie(w,{});(!k||!u.has(k))&&m.push({channel:v,fieldDef:w})}}return m},[]);let p;return o.stack!==void 0?$c(o.stack)?p=o.stack?"zero":null:p=o.stack:iXe.has(r)&&(p="zero"),!p||!nXe(p)||rae(t)&&h.length===0?null:((g=o==null?void 0:o.scale)!=null&&g.type&&((y=o==null?void 0:o.scale)==null?void 0:y.type)!==Yn.LINEAR&&o!=null&&o.stack&&Z(Fqe(o.scale.type)),Pe(t[za(i)])?(o.stack!==void 0&&Z(Mqe(i)),null):(J(o)&&o.aggregate&&!AHe.has(o.aggregate)&&Z(Pqe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:jc(r),stackBy:h,offset:p}))}function Eae(e,t,n){const r=Gn(e),i=mt("orient",r,n);if(r.orient=uXe(r.type,t,i),i!==void 0&&i!==r.orient&&Z(pqe(r.orient,i)),r.type==="bar"&&r.orient){const l=mt("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:DGe[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=mt("opacity",r,n),s=mt("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=aXe(r.type,t)),mt("cursor",r,n)===void 0&&(r.cursor=sXe(r,t,n)),r}function sXe(e,t,n){return t.href||e.href||mt("href",e,n)?"pointer":e.cursor}function aXe(e,t){if(ze([H_,w8,S8,k8],e)&&!rae(t))return .7}function lXe(e,t,{graticule:n}){if(n)return!1;const r=Ea("filled",e,t),i=e.type;return ln(r,i!==H_&&i!==W_&&i!==nk)}function uXe(e,t,n){switch(e){case H_:case S8:case k8:case Mse:case CGe:case kGe:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case V_:if(J(r)&&(Hn(r.bin)||J(i)&&i.aggregate&&!r.aggregate))return"vertical";if(J(i)&&(Hn(i.bin)||J(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(J(r)&&r.type===Cd&&!Et(r.bin)||ik(r))&&J(i)&&Hn(i.bin)?"horizontal":"vertical";if(!s)return(J(i)&&i.type===Cd&&!Et(i.bin)||ik(i))&&J(r)&&Hn(r.bin)?"vertical":"horizontal"}case nk:if(o&&!(J(r)&&Hn(r.bin))&&s&&!(J(i)&&Hn(i.bin)))return;case U_:if(s)return J(i)&&Hn(i.bin)?"horizontal":"vertical";if(o)return J(r)&&Hn(r.bin)?"vertical":"horizontal";if(e===nk){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case W_:case w8:{const a=GU(r),l=GU(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=Zr(r)&&r.type===Ag,c=Zr(i)&&i.type===Ag;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function cXe(e){const{point:t,line:n,...r}=e;return X(r).length>1?r:r.type}function fXe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:mi(e[t],["point","line"])});return e}function o5(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?se(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?se(t.point)?t.point:{}:void 0}function nV(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class dXe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Kl(t)){const{mark:r,encoding:i}=t,o=$a(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!o5(o,n[o.type],i);case"area":return!!o5(o,n[o.type],i)||!!nV(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...c}=t,f=Z_(u,i),d=$a(a)?a:{type:a},h=o5(d,i[d.type],f),p=d.type==="area"&&nV(d,i[d.type]),g=[{name:l,...o?{params:o}:{},mark:cXe({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:mi(f,["shape"])}],y=_ae(Eae(d,f,i),f);let m=f;if(y){const{fieldChannel:v,offset:b}=y;m={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return m=mi(m,["y2","x2"]),p&&g.push({...s?{projection:s}:{},mark:{type:"line",...kg(d,["clip","interpolate","tension","tooltip"]),...p},encoding:m}),h&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...kg(d,["clip","tooltip"]),...h},encoding:m}),r({...c,layer:g},{...n,config:fXe(i)})}}function hXe(e,t){return t?Qv(e)?Aae(e,t):$ae(e,t):e}function s5(e,t){return t?Aae(e,t):e}function rM(e,t,n){const r=t[e];if(XGe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Z(YHe(r.repeat));return}return t}function $ae(e,t){if(e=rM("field",e,t),e!==void 0){if(e===null)return null;if(M8(e)&&kl(e.sort)){const n=rM("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function rV(e,t){if(J(e))return $ae(e,t);{const n=rM("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function iV(e,t){if(Pe(e)){const n=rV(e,t);if(n)return n;if(Zv(e))return{condition:e.condition}}else{if(Jv(e)){const n=rV(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function Aae(e,t){const n={};for(const r in e)if(K(e,r)){const i=e[r];if(G(i))n[r]=i.map(o=>iV(o,t)).filter(o=>o);else{const o=iV(i,t);o!==void 0&&(n[r]=o)}}return n}class pXe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Kl(t)){const{encoding:n,mark:r}=t;if(r==="line"||$a(r)&&r.type==="line")for(const i of hHe){const o=Kd(i),s=n[o];if(n[i]&&(J(s)&&!Hn(s.bin)||Ba(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return Z(hqe(!!i.x2,!!i.y2)),r({...t,mark:se(o)?{...o,type:"rule"}:"rule"},n)}}class gXe extends W8{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[yYe,xYe,$Ye,new dXe,new pXe]}map(t,n){if(Kl(t)){const r=Jf(t.encoding,wl),i=Jf(t.encoding,Sl),o=Jf(t.encoding,F_);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=s5(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return eXe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...o,layer:l.map(f=>{const d={...u,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Lt(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!G(r)&&t.columns&&(t=mi(t,["columns"]),Z(IU("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!G(r)&&r.row||[l?l.row:null],f=!G(r)&&r.column||[l?l.column:null],d=G(r)&&r||[l?l.repeat:null];for(const p of d)for(const g of c)for(const y of f){const m={repeat:p,row:g,column:y,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(G(r)?`${Lt(p)}`:(r.row?`row_${Lt(g)}`:"")+(r.column?`column_${Lt(y)}`:"")),b=this.map(i,{...n,repeater:m,repeaterPrefix:v});b.name=v,a.push(mi(b,["data"]))}const h=G(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return Qv(r)&&t.columns&&(t=mi(t,["columns"]),Z(IU("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=sV({parentProjection:s,projection:i}),u=oV({parentEncoding:o,encoding:s5(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:l,projection:u,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:y}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),m=s5(s,n.repeater);return this.mapFacet({...p,...y,facet:g,spec:{...l?{width:l}:{},...c?{height:c}:{},...f?{view:f}:{},...u?{projection:u}:{},mark:a,encoding:m,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&Z(fqe([...r?[wl]:[],...i?[Sl]:[]]));const s={},a={};for(const l of[wl,Sl]){const u=t[l];if(u){const{align:c,center:f,spacing:d,columns:h,...p}=u;s[l]=p;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:l,columns:u,...c}=o;return{facetMapping:hXe(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,l={...i,parentEncoding:oV({parentEncoding:n,encoding:o,layer:!0}),parentProjection:sV({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function oV({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...X(e),...X(t)]);for(const o of i){const s=t[o],a=e[o];if(Pe(s)){const l={...a,...s};r[o]=l}else Jv(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||$s(a)||me(a)||Pe(a)||G(a))&&(r[o]=a)}}else r=t;return!r||vt(r)?void 0:r}function sV(e){const{parentProjection:t,projection:n}=e;return t&&n&&Z(eqe({parentProjection:t,projection:n})),n??t}function H8(e){return K(e,"filter")}function mXe(e){return K(e,"stop")}function Tae(e){return K(e,"lookup")}function yXe(e){return K(e,"data")}function vXe(e){return K(e,"param")}function bXe(e){return K(e,"pivot")}function xXe(e){return K(e,"density")}function wXe(e){return K(e,"quantile")}function SXe(e){return K(e,"regression")}function kXe(e){return K(e,"loess")}function CXe(e){return K(e,"sample")}function _Xe(e){return K(e,"window")}function EXe(e){return K(e,"joinaggregate")}function $Xe(e){return K(e,"flatten")}function AXe(e){return K(e,"calculate")}function Mae(e){return K(e,"bin")}function TXe(e){return K(e,"impute")}function MXe(e){return K(e,"timeUnit")}function FXe(e){return K(e,"aggregate")}function PXe(e){return K(e,"stack")}function RXe(e){return K(e,"fold")}function DXe(e){return K(e,"extent")&&!K(e,"density")&&!K(e,"regression")}function OXe(e){return e.map(t=>H8(t)?{filter:wp(t.filter,sGe)}:t)}class NXe extends W8{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=aV(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=aV(t,n),t.encoding){const r={};for(const[i,o]of yc(t.encoding))r[i]=Fae(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:yc(r).map(([o,s])=>{const{init:a,bind:l,empty:u,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=u!=="none";for(const f of tr(n.selectionPredicates[o]??{}))f.empty=u!=="none";return{name:o,value:a,select:c,bind:l}})}:t}}function aV(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(H8(o))return{filter:iM(o,t)};if(Mae(o)&&Qd(o.bin))return{...o,bin:Pae(o.bin)};if(Tae(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function Fae(e,t){var r,i;const n=Me(e);if(J(n)&&Qd(n.bin)&&(n.bin=Pae(n.bin)),th(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(Zv(n))if(G(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...u}=o;return a?o:{...u,test:iM(o,t)}});else{const{selection:o,param:s,test:a,...l}=Fae(n.condition,t);n.condition=s?n.condition:{...l,test:iM(n.condition,t)}}return n}function Pae(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function iM(e,t){const n=r=>wp(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):wp(e.test||e.filter,r=>r.selection?n(r.selection):r)}class oM extends W8{map(t,n){const r=n.selections??[];if(t.params&&!Kl(t)){const i=[];for(const o of t.params)B8(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(le(a)&&(a===t.name||i.includes(a))||G(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=oM.prototype[e];oM.prototype[e]=function(n,r){return t.call(this,n,IXe(n,r))}}function IXe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Rae(e,t){t===void 0&&(t=Cae(e.config));const n=BXe(e,t),{width:r,height:i}=e,o=UXe(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const LXe=new gXe,zXe=new NXe,jXe=new oM;function BXe(e,t={}){const n={config:t};return jXe.map(LXe.map(zXe.map(e,n),n),n)}function lV(e){return le(e)?{type:e}:e??{}}function UXe(e,t,n){let{width:r,height:i}=t;const o=Kl(e)||eE(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(Z(RU("width")),r=void 0),i=="container"&&(Z(RU("height")),i=void 0));const a={type:"pad",...s,...n?lV(n.autosize):{},...lV(e.autosize)};if(a.type==="fit"&&!o&&(Z(IHe),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Z(DU("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Z(DU("height")),!ji(a,{type:"pad"}))return a}function VXe(e){return["fit","fit-x","fit-y"].includes(e)}function WXe(e){return e?`fit-${N_(e)}`:"fit"}const HXe=["background","padding"];function uV(e,t){const n={};for(const r of HXe)e&&e[r]!==void 0&&(n[r]=Oi(e[r]));return t&&(n.params=e.params),n}class Ql{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Ql(Me(this.explicit),Me(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ln(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of X(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ys(e){return{explicit:!0,value:e}}function Ti(e){return{explicit:!1,value:e}}function Dae(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:tE(t,n,r,i)}}function tE(e,t,n,r){return e.explicit&&t.explicit&&Z(kqe(n,r,e.value,t.value)),e}function xc(e,t,n,r,i=tE){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ji(e.value,t.value)?e:i(e,t,n,r)}class qXe extends Ql{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Rg(e){return K(e,"url")}function D1(e){return K(e,"values")}function Oae(e){return K(e,"name")&&!Rg(e)&&!D1(e)&&!tc(e)}function tc(e){return e&&(Nae(e)||Iae(e)||q8(e))}function Nae(e){return K(e,"sequence")}function Iae(e){return K(e,"sphere")}function q8(e){return K(e,"graticule")}var tn;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(tn||(tn={}));function Lae({invalid:e,isPath:t}){switch(Rse(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function GXe(e){const{marks:t,scales:n}=Lae(e);return t===n?tn.Main:n==="include-invalid-values"?tn.PreFilterInvalid:tn.PostFilterInvalid}function zae(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Lo(i.field),i}function $d(e,t=!0,n=Ar){if(G(e)){const r=e.map(i=>$d(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Jd(e))return n(t?kd(e):Yqe(e));return t?n(bt(e)):e}function YXe(e,t){for(const n of tr(e.component.selection??{})){const r=n.name;let i=`${r}${wc}, ${n.resolve==="global"?"true":`{unit: ${ed(e)}}`}`;for(const o of oE)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+CKe,on:[{events:{signal:n.name+wc},update:`modify(${te(n.name+Ad)}, ${i})`}]})}return G8(t)}function XXe(e,t){if(e.component.selection&&X(e.component.selection).length){const n=te(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Rc("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return G8(t)}function KXe(e,t){let n=!1;for(const r of tr(e.component.selection??{})){const i=r.name,o=te(i+Ad);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${rle}(${o}, ${te(a)}${l}`})}n=!0;for(const a of oE)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),G8(t)}function QXe(e,t){const n=[...t],r=ed(e,{escape:!1});for(const i of tr(e.component.selection??{})){const o={name:i.name+Ad};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Ts}}]),i.init){const a=i.project.items.map(zae);o.values=i.project.hasSelectionId?i.init.map(l=>({unit:r,[Ts]:$d(l,!1)[0]})):i.init.map(l=>({unit:r,fields:a,values:$d(l,!1)}))}n.filter(a=>a.name===i.name+Ad).length||n.push(o)}return n}function jae(e,t){for(const n of tr(e.component.selection??{}))for(const r of oE)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function ZXe(e,t){for(const n of e.children)Ut(n)&&(t=jae(n,t));return t}function JXe(e,t,n,r){const i=lle(e,t.param,t);return{signal:Es(n.get("type"))&&G(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function G8(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class gt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Z(QHe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class yi extends gt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Doe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function a5(e){return e.as!==void 0}function cV(e){return`${e}_end`}class xa extends gt{clone(){return new xa(null,Me(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:l}=o;if(l){let u;if(eh(l)){if(Ut(n)){const{mark:c,markDef:f,config:d}=n,h=bc({fieldDef:o,markDef:f,config:d});(R1(c)||h)&&(u={timeUnit:In(l),field:a})}}else u={as:ie(o,{forAs:!0}),field:a,timeUnit:l};if(Ut(n)){const{mark:c,markDef:f,config:d}=n,h=bc({fieldDef:o,markDef:f,config:d});R1(c)&&un(s)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Be(u)]=u)}return i},{});return vt(r)?null:new xa(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=In(r),s={...i,timeUnit:o};return new xa(t,{[Be(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of yc(this.timeUnits)){const o=a5(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(tr(this.timeUnits).map(t=>a5(t)?t.as:cV(t.field)))}dependentFields(){return new Set(tr(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Be(this.timeUnits)}`}assemble(){const t=[];for(const n of tr(this.timeUnits)){const{rectBandPosition:r}=n,i=In(n.timeUnit);if(a5(n)){const{field:o,as:s}=n,{unit:a,utc:l,...u}=i,c=[s,`${s}_end`];t.push({field:Lo(o),type:"timeunit",...a?{units:j_(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...fV(c,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=Bae({timeUnit:i,field:s}),l=cV(s);t.push({type:"formula",expr:a,as:l}),t.push(...fV([s,l],r,i))}}return t}}const nE="offsetted_rect_start",rE="offsetted_rect_end";function Bae({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=gse(r),{part:s,step:a}=bse(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', datum['${t}'], ${n?-a:a})`}function fV([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:dV([Bae({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${nE}`},{type:"formula",expr:dV([i,o],n+.5),as:`${e}_${rE}`}]}return[]}function dV([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const nb="_tuple_fields";class eKe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const tKe={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new eKe),o={},s={},a=new Set,l=(p,g)=>{const y=g==="visual"?p.channel:p.field;let m=Lt(`${r}_${y}`);for(let v=1;a.has(m);v++)m=Lt(`${r}_${y}_${v}`);return a.add(m),{[g]:m}},u=t.type,c=e.config.selection[u],f=n.value!==void 0?ae(n.value):null;let{fields:d,encodings:h}=se(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(se(p))for(const g of X(p))dHe(g)?(h||(h=[])).push(g):u==="interval"?(Z(GHe),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let y=g.field;if(g.aggregate){Z(LHe(p,g.aggregate));continue}else if(!y){Z(NU(p));continue}if(g.timeUnit&&!eh(g.timeUnit)){y=e.vgField(p);const m={timeUnit:g.timeUnit,as:y,field:g.field};s[Be(m)]=m}if(!o[y]){const m=u==="interval"&&ja(p)&&Es(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:y,channel:p,type:m,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(o[y]=v),i.hasField[y]=o[y],i.hasSelectionId=i.hasSelectionId||y===Ts,joe(p)?(v.geoChannel=p,v.channel=zoe(p),i.hasChannel[v.channel]=o[y]):i.hasChannel[p]=o[y]}}else Z(NU(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===Ts}f&&(t.init=f.map(p=>i.items.map(g=>se(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),vt(s)||(i.timeUnit=new xa(null,s))},signals:(e,t,n)=>{const r=t.name+nb;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(zae)})}},Cl={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ja(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&Z(UHe),!o||!Es(s)){Z(BHe);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||hV(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(rle))i.update=`{${r.map(s=>`${te(Lo(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${te(Lo(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!hV(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function sM(e,t){return`domain(${te(e.scaleName(t))})`}function hV(e){return e.parent&&vm(e.parent)&&!e.parent.parent}const Cp="_brush",Uae="_scale_trigger",o0="geo_interval_init_tick",Vae="_init",nKe="_center",rKe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...se(n.select)?n.select:{}};i.fields=[Ts],i.encodings||(i.encodings=n.value?X(n.value):[Ns,Os]),n.select={type:"interval",...i}}if(t.translate&&!Cl.defined(t)){const i=`!event.item || event.item.mark.name !== ${te(t.name+Cp)}`;for(const o of t.events){if(!o.between){Z(`${o} is not an ordered event stream for interval selections.`);continue}const s=ae((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+wc,o=tr(t.project.hasChannel).filter(a=>a.channel===zt||a.channel===Un),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(iKe(e,t,l,s&&s[l.index])),[])),e.hasProjection){const a=te(e.projectionName()),l=e.projectionName()+nKe,{x:u,y:c}=t.project.hasChannel,f=u&&u.signals.visual,d=c&&c.signals.visual,h=u?s&&s[u.index]:`${l}[0]`,p=c?s&&s[c.index]:`${l}[1]`,g=w=>e.getSizeSignalRef(w).signal,y=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;s&&(n.unshift({name:r+Vae,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(k=>k.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const m=`intersect(${y}, {markname: ${te(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${ed(e)}}`,b=`vlSelectionTuples(${m}, ${v})`,x=o.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...s?[{signal:o0}]:[]],update:b}]})}else{if(!Cl.defined(t)){const u=r+Uae,c=o.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=te(e.scaleName(d)),y=e.getScaleComponent(d).get("type"),m=Es(y)?"+":"";return`(!isArray(${h}) || (${m}invert(${g}, ${p})[0] === ${m}${h}[0] && ${m}invert(${g}, ${p})[1] === ${m}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${ed(e)}, fields: ${r+nb}, values`;return n.concat({name:i,...s?{init:`{${l}: ${$d(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ut(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===o0).length||n.unshift({name:o0,value:null,on:[{events:"timer{1}",update:`${o0} === null ? {} : ${o0}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${te(t.name+Ad)})`;if(Cl.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of X(u))u[y]=[{test:`${l}.length && ${l}[0].unit === ${ed(e)}`,...u[y]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=X(h).reduce((y,m)=>(y[m]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[m]},{value:null}],y),{}),g=d??(t.translate?"move":null);return[{name:`${r+Cp}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:u}},...n,{name:r+Cp,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function iKe(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=te(i?e.scaleName(o):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(o===zt?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,h=Cl.defined(t),p=e.getScaleComponent(o),g=p?p.get("type"):void 0,y=r?{init:$d(r,!0,l)}:{value:[]};return f.push({events:{signal:t.name+Uae},update:Es(g)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...y,on:f},{name:d,...r?{init:$d(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===zt?0:1,h=t.name+Vae,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...p,on:f}]}}const oKe={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+nb,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=tr(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Cp):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${ed(e)}, `;if(t.project.hasSelectionId)u+=`${Ts}: ${s}[${te(Ts)}]`;else{const f=o.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${s}[${te(e.vgField(d.channel,{}))}], ${s}[${te(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${s}[${te(d.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+wc,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function pm({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=Zv(t)&&t.condition;let s=[];o&&(s=ae(o).map(u=>{const c=i(u);if(YGe(u)){const{param:f,empty:d}=u;return{test:ale(e,{param:f,empty:d}),...c}}else return{test:dk(e,u.test),...c}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function Y8(e,t="text"){const n=e.encoding[t];return pm({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>iE(r,e.config),invalidValueRef:void 0})}function iE(e,t,n="datum"){if(e){if($s(e))return Pt(e.value);if(Pe(e)){const{format:r,formatType:i}=sk(e);return A8({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Wae(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(G(s))return{tooltip:pV({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return pm({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const c=iE(u,i,a);if(c)return c;if(u===null)return;let f=mt("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),le(f))return{value:f};if(se(f))return me(f)?f:f.content==="encoding"?pV(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function Hae(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(c,f){const d=Kd(f),h=Zr(c)?c:{...c,type:e[d].type},p=h.title||P8(h,i),g=ae(p).join(", ").replaceAll(/"/g,'\\"');let y;if(un(f)){const m=f==="x"?"x2":"y2",v=As(e[m]);if(Hn(h.bin)&&v){const b=ie(h,{expr:s}),x=ie(v,{expr:s}),{format:w,formatType:k}=sk(h);y=Kv(b,x,w,k,i),o.add(m)}}if((un(f)||f===Bo||f===Ds)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:m,formatType:v}=sk(h);y=A8({fieldOrDatumDef:h,format:m,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}y??(y=iE(h,i,s).signal),a.push({channel:f,key:g,value:y})}D8(e,(c,f)=>{J(c)?l(c,f):Y_(c)&&l(c.condition,f)});const u={};for(const{channel:c,key:f,value:d}of a)!o.has(c)&&!u[f]&&(u[f]=d);return u}function pV(e,t,n,{reactiveGeom:r}={}){const i=Hae(e,t,n,{reactiveGeom:r}),o=yc(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function sKe(e){const{markDef:t,config:n}=e,r=mt("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...aKe(e),...lKe(e)}}function aKe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=mt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:ce(DHe,t)?{}:{ariaRoleDescription:{value:t}}}function lKe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return pm({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>iE(l,e.config),invalidValueRef:void 0});const s=mt("description",n,r);if(s!=null)return{description:Pt(s)};if(r.aria===!1)return{};const a=Hae(t,i,r);if(!vt(a))return{description:{signal:yc(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Kn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=mt(e,r,o,{vgChannel:s,ignoreVgConfig:!Zv(u)})),l!==void 0&&(a=Pt(l)));const c={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=Ose({...c,scaleChannel:e,channelDef:u});return pm({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:f,mainRefFn:h=>$8({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function qae(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??mt("filled",n,i),a=ze(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=mt(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,u=mt(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...l?{fill:Pt(l)}:{},...u?{stroke:Pt(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&Z(sse("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Kn("color",e,{vgChannel:c,defaultValue:s?l:u}),...Kn("fill",e,{defaultValue:r.fill?l:void 0}),...Kn("stroke",e,{defaultValue:r.stroke?u:void 0})}}function uKe(e){const{encoding:t,mark:n}=e,r=t.order;return!jc(n)&&$s(r)?pm({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Pt(i.value),invalidValueRef:void 0}):{}}function Dg({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:$8({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Pt(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Hr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[za(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Dg({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),p=X8({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!l&&un(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:cKe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function cKe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Pe(n)&&i&&t===i.fieldChannel){if(J(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return rk({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return Zf(n,r,{suffix:"end"},{offset:o})}return E8(e)}function X8({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=Kd(n),l=vc(n),u=mt(n,o,s,{vgChannel:l});if(u!==void 0)return My(n,u);switch(t){case"zeroOrMin":return gV({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return gV({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[_i(n)],mult:.5}}}}function gV({mainChannel:e,config:t,...n}){const r=Dse(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const fKe={left:"x",center:"xc",right:"x2"},dKe={top:"y",middle:"yc",bottom:"y2"};function Gae(e,t,n,r="middle"){if(e==="radius"||e==="theta")return vc(e);const i=e==="x"?"align":"baseline",o=mt(i,t,n);let s;return me(o)?(Z(dqe(i)),s=void 0):s=o,e==="x"?fKe[s||(r==="top"?"left":"center")]:dKe[s||r]}function ck(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Yae(e,t,{defaultPos:n,defaultPos2:r}):Hr(e,t,{defaultPos:n})}function Yae(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=za(e),a=_i(e),l=hKe(t,r,s),u=l[a]?Gae(e,i,o):vc(e);return{...Hr(e,t,{defaultPos:n,vgChannel:u}),...l}}function hKe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=Kd(n),u=_i(n),c=vc(n),f=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in o?Dg({channel:n,markDef:o,encoding:r,model:e}):Dg({channel:l,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const y=_i(n),m=e.markDef[y];return m!=null?{[y]:{value:m}}:{[c]:{field:e.getName(n)}}}const g=pKe({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:Cx(n,o)||Cx(n,{[n]:X4(n,o,a.style),[u]:X4(u,o,a.style)})||Cx(n,a[i])||Cx(n,a.mark)||{[c]:X8({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function pKe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Pe(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Zf(t,o,{suffix:"start"},{offset:l}):E8({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function Cx(e,t){const n=_i(e),r=vc(e);if(t[r]!==void 0)return{[r]:My(e,t[r])};if(t[e]!==void 0)return{[r]:My(e,t[e])};if(t[n]){const i=t[n];if(_d(i))Z(sqe(n));else return{[n]:My(e,i)}}}function Il(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=za(t),a=_i(t),l=r[t],u=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??mt("size",i,n,{vgChannel:a}),p=Woe(t),g=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return J(l)&&(Et(l.bin)||Hn(l.bin)||l.timeUnit&&!u)&&!(h&&!_d(h))&&!r[p]&&!Ln(f)?yKe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Pe(l)&&Ln(f)||g)&&!u?mKe(l,t,e):Yae(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function gKe(e,t,n,r,i,o,s){if(_d(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=Ea("minBandSize",{type:s},r);return{signal:c?`max(${ps(c)}, ${u})`:u}}else i.band!==1&&(Z(mqe(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(me(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(Zd(l)&&Ze(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=ln(l,s==="tick"?f:s==="bar"?u:c);if(me(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Ze(d))return{signal:`${1-d} * ${e}`}}return{value:nM(r.view,e)-2}}function mKe(e,t,n){var _,$;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=_i(t),f=za(t),d=Woe(t),h=n.scaleName(d),p=n.getScaleComponent(t8(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let y;(i.size||r.size)&&(g?y=Kn("size",n,{vgChannel:c,defaultRef:Pt(r.size)}):Z(xqe(r.type)));const m=!!y,v=Use({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(_=u||p)==null?void 0:_.get("type"),useVlSizeChannel:g});y=y||{[c]:gKe(c,h||l,p||u,o,v,!!e,r.type)};const b=(($=u||p)==null?void 0:$.get("type"))==="band"&&_d(v)&&!m?"top":"middle",x=Gae(t,r,o,b),w=x==="xc"||x==="yc",{offset:k,offsetType:S}=Dg({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),C=E8({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:k,defaultRef:X8({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:w?S==="encoding"?0:.5:me(v)?{signal:`(1-${v})/2`}:_d(v)?(1-v.band)/2:0});if(c)return{[x]:C,...y};{const A=vc(f),O=y[c],M=k?{...O,offset:k}:O;return{[x]:C,[A]:G(C)?[C[0],{...C[1],offset:M}]:{...C,offset:M}}}}function mV(e,t,n,r,i,o,s){if(Loe(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(me(n)||me(i)||me(r)||o){const u=ps(n),c=ps(i),f=ps(r),d=ps(o),p=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${l})`:l,g=f?`${f} + `:"",y=u?`(${u} ? -1 : 1) * `:"",m=c?`(${c} + ${p})`:p;return{signal:g+y+m}}else return i=i||0,r+(n?-i-l:+i+l)}function yKe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var $;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),f=Use({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),d=($=r.component.axes[n])==null?void 0:$[0],h=(d==null?void 0:d.get("translate"))??.5,p=un(n)?mt("binSpacing",o,i)??0:0,g=za(n),y=vc(n),m=vc(g),v=Ea("minBandSize",o,i),{offset:b}=Dg({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:x}=Dg({channel:g,markDef:o,encoding:s,model:r,bandPosition:0}),w=UGe({fieldDef:e,scaleName:l}),k=mV(n,p,c,h,b,v,w),S=mV(g,p,c,h,x??b,v,w),C=me(f)?{signal:`(1-${f.signal})/2`}:_d(f)?(1-f.band)/2:.5,_=bc({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(Et(e.bin)||e.timeUnit){const A=e.timeUnit&&_!==.5;return{[m]:yV({fieldDef:e,scaleName:l,bandPosition:C,offset:S,useRectOffsetField:A}),[y]:yV({fieldDef:e,scaleName:l,bandPosition:me(C)?{signal:`1-${C.signal}`}:1-C,offset:k,useRectOffsetField:A})}}else if(Hn(e.bin)){const A=Zf(e,l,{},{offset:S});if(J(t))return{[m]:A,[y]:Zf(t,l,{},{offset:k})};if(Qd(e.bin)&&e.bin.step)return{[m]:A,[y]:{signal:`scale("${l}", ${ie(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}Z(use(g))}function yV({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return rk({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:nE,endSuffix:rE}:{}})}const vKe=new Set(["aria","width","height"]);function Uo(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?qae(e):{};return{...bKe(e.markDef,t),...vV("fill",n),...vV("stroke",r),...Kn("opacity",e),...Kn("fillOpacity",e),...Kn("strokeOpacity",e),...Kn("strokeWidth",e),...Kn("strokeDash",e),...uKe(e),...Wae(e),...Y8(e,"href"),...sKe(e)}}function vV(e,t){return t?{[e]:t}:{}}function bKe(e,t){return RHe.reduce((n,r)=>(!vKe.has(r)&&K(e,r)&&t[r]!=="ignore"&&(n[r]=Pt(e[r])),n),{})}function K8(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var u;let s;if(!ja(o)||!(s=e.getScaleType(o)))return;const a=I_(i.aggregate),l=_8({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(zGe(l)){const c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(o=>B_(o,!0)).join(" && ")}}}function bV(e,t){if(t!==void 0)return{[e]:Pt(t)}}const l5="voronoi",Xae={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(l5)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(jc(o))return Z(zHe(o)),n;const s={name:e.getName(l5),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Wae(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const f=u.name??"";f===e.component.mark[0].name?a=c:f.includes(l5)&&(l=!0)}),l||n.splice(a+1,0,s),n}},Kae={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!j8(e.bind),parse:(e,t,n)=>ile(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=Xae.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=Lt(`${r}_${l.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...s?{init:$d(s[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${te(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+wc),s=r+nb,a=i.items.map(u=>Lt(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},fk="_toggle",Qae={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+fk,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+wc,r=t.name+fk;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${ed(e)}}, `)+`${r} ? ${n} : null`}},xKe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=le(t.clear)?Rc(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Kae.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===Lt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+wc);r(i,"null"),Qae.defined(t)&&(i=n.findIndex(o=>o.name===t.name+fk),r(i,"false"))}return n}},Zae={defined:e=>{const t=e.resolve==="global"&&e.bind&&j8(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ts;return t&&!n&&Z(VHe),t&&n},parse:(e,t,n)=>{const r=Me(n);if(r.select=le(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},ile(t,r),se(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ae(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=i5(t.bind)?t.bind.legend:"click",o=le(i)?Rc(i,"view"):ae(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=i5(t.bind)&&t.bind.legend,o=s=>a=>{const l=Me(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${Lt(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+wc),s=r+nb,a=i.items.filter(d=>d.hasLegend).map(d=>Lt(`${r}_${Lt(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(d=>d.name===r+fk),f=i5(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function wKe(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of tr(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&Zae.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const Jae="_translate_anchor",ele="_translate_delta",SKe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Cl.defined(t),o=r+Jae,{x:s,y:a}=t.project.hasChannel;let l=Rc(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+Cp,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?sM(e,zt):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?sM(e,Un):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+ele,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&xV(e,t,s,"width",n),a!==void 0&&xV(e,t,a,"height",n),n}};function xV(e,t,n,r,i){const o=t.name,s=o+Jae,a=o+ele,l=n.channel,u=Cl.defined(t),c=i.find(w=>w.name===n.signals[u?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d&&d.get("type"),p=d&&d.get("reverse"),g=u?l===zt?p?"":"-":p?"-":"":"",y=`${s}.extent_${l}`,m=`${g}${a}.${l} / ${u?`${f}`:`span(${y})`}`,v=!u||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",x=`${v}(${y}, ${m}${b})`;c.on.push({events:{signal:a},update:u?x:`clampRange(${x}, 0, ${f})`})}const tle="_zoom_anchor",nle="_zoom_delta",kKe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Cl.defined(t),o=r+nle,{x:s,y:a}=t.project.hasChannel,l=te(e.scaleName(zt)),u=te(e.scaleName(Un));let c=Rc(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Cp,f))),n.push({name:r+tle,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&wV(e,t,s,"width",n),a!==void 0&&wV(e,t,a,"height",n),n}};function wV(e,t,n,r,i){const o=t.name,s=n.channel,a=Cl.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),d=a?sM(e,s):l.name,h=o+nle,p=`${o}${tle}.${s}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",y=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",m=`${g}(${d}, ${p}, ${h}${y})`;l.on.push({events:{signal:h},update:a?m:`clampRange(${m}, 0, ${u})`})}const Ad="_store",wc="_tuple",CKe="_modify",rle="vlSelectionResolve",oE=[oKe,rKe,tKe,Qae,Kae,Cl,Zae,xKe,SKe,kKe,Xae];function _Ke(e){let t=e.parent;for(;t&&!Gi(t);)t=t.parent;return t}function ed(e,{escape:t}={escape:!0}){let n=t?te(e.name):e.name;const r=_Ke(e);if(r){const{facet:i}=r;for(const o of $o)i[o]&&(n+=` + '__facet_${o}_' + (facet[${te(r.vgField(o))}])`)}return n}function Q8(e){return tr(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function ile(e,t){(le(t.select)||!t.select.on)&&delete e.events,(le(t.select)||!t.select.clear)&&delete e.clear,(le(t.select)||!t.select.toggle)&&delete e.toggle}function aM(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...aM(e.object)),t.push(...aM(e.property))),t)}function ole(e){return e.object.type==="MemberExpression"?ole(e.object):e.object.name==="datum"}function sle(e){const t=yO(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&ole(r)&&n.add(aM(r).slice(1).join("."))}),n}class gm extends gt{clone(){return new gm(null,this.model,Me(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=dk(this.model,this.filter,this),this._dependentFields=sle(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function EKe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const o=Lt(i.name),s=i.select,a=le(s)?s:s.type,l=se(s)?Me(s):{type:a},u=r[a];for(const d in u)d==="fields"||d==="encodings"||(d==="mark"&&(l.mark={...u.mark,...l.mark}),(l[d]===void 0||l[d]===!0)&&(l[d]=Me(u[d]??l[d])));const c=n[o]={...l,name:o,type:a,init:i.value,bind:i.bind,events:le(l.on)?Rc(l.on,"scope"):ae(Me(l.on))},f=Me(i);for(const d of oE)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function ale(e,t,n,r="datum"){const i=le(t)?t:t.param,o=Lt(i),s=te(o+Ad);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${te(a.resolve)})`,c=`${l}${s}, ${r}${u}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function lle(e,t,n){const r=Lt(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&Z(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${te(o)}.`);else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,Z((a.length?"Multiple ":"No ")+`matching ${te(i)} encoding found for selection ${te(n.param)}. Using "field": ${te(o)}.`)):o=a[0].field}return`${s.name}[${te(Lo(o))}]`}function $Ke(e,t){for(const[n,r]of yc(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new yi(new gm(t,e,{param:n}),i,tn.Lookup,e.component.data.outputNodeRefCounts)}}function dk(e,t,n){return Ty(t,r=>le(r)?r:rGe(r)?ale(e,r,n):wse(r))}function AKe(e,t){if(e)return G(e)&&!mu(e)?e.map(n=>P8(n,t)).join(", "):e}function u5(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function q0(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const p=h,g=lYe[p],y=c[p];if(g&&g!==t&&g!=="both")delete c[p];else if(tb(y)){const{condition:m,...v}=y,b=ae(m),x=YU[p];if(x){const{vgProp:w,part:k}=x,S=[...b.map(C=>{const{test:_,...$}=C;return{test:dk(null,_),...$}}),v];u5(c,k,w,S),delete c[p]}else if(x===null){const w={signal:b.map(k=>{const{test:S,...C}=k;return`${dk(null,S)} ? ${PU(C)} : `}).join("")+PU(v)};c[p]=w}}else if(me(y)){const m=YU[p];if(m){const{vgProp:v,part:b}=m;u5(c,b,v,y),delete c[p]}}ze(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},vt(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ln(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&me(c.encode.labels.update.text)&&(p=wd(a,"datum.label",c.encode.labels.update.text.signal)),u5(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of Zse)e.hasAxisPart(p)||delete c.encode[p];vt(c.encode)&&delete c.encode}const h=AKe(l,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ln(u,0)}}}}function ule(e){const{axes:t}=e.component,n=[];for(const r of Xl)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function TKe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>q0(i,"grid",t)),...r.map(i=>q0(i,"grid",t)),...n.map(i=>q0(i,"main",t)),...r.map(i=>q0(i,"main",t))].filter(i=>i)}function SV(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...X(s),...X(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${o}" ? ${ps(s[c])} : ${ps(a[c])}`};return u}return t[i]})])}function MKe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:_se(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=me(n)?"axisOrient":`axis${Wv(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:SV(a,r,e,n),vgAxisConfig:SV(l,r,e,n),axisConfigStyle:FKe([...l,...a],r)}}function FKe(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=ae(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function lM(e,t,n,r={}){var o;const i=Joe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const kV={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??PKe(n,e),gridScale:({model:e,channel:t})=>RKe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||fle(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||cle(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??OKe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??NKe(t.type,n,J(t)&&!!t.timeUnit,J(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??LKe({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:zKe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=dle(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return tse(i?[qU(i)]:[],J(s)?[qU(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>jKe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??BKe(n,t)};function PKe(e,t){return!Ln(e)&&J(t)&&!Et(t==null?void 0:t.bin)&&!Hn(t==null?void 0:t.bin)}function RKe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function DKe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return me(o)?o:P1(o);{const{configValue:s}=lM("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?P1(s):n===zt&&ze([x8,b8],e.type)&&!(J(e)&&e.timeUnit)?270:void 0}}function uM(e){return`(((${e.signal} % 360) + 360) % 360)`}function cle(e,t,n,r){if(e!==void 0)if(n==="x"){if(me(e)){const i=uM(e),o=me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(me(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(me(e)){const i=uM(e),o=me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(me(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function fle(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(me(e)){const s=uM(e),a=me(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(me(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function OKe(e,t){if(t==="x"&&ze(["quantitative","temporal"],e))return!0}function NKe(e,t,n,r){if(n&&!se(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function IKe(e){return e==="x"?"bottom":"left"}function LKe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ln(t)&&t!=="log"){if(J(e)){if(Et(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ze(["month","hours","day","quarter"],(i=In(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function zKe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(J(t)){const{timeUnit:n}=t;if(n){const r=vse(n);if(r)return{signal:r}}}}function dle(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return nse(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function jKe(e,t){const n=e.values;if(G(n))return Qse(t,n);if(me(n))return n}function BKe(e,t){return e==="rect"&&ok(t)?1:0}class Og extends gt{clone(){return new Og(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=sle(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(th(r)&&Bse(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,l=a.map((u,c)=>`${wse({field:o,timeUnit:s,equal:u})} ? ${c} : `).join("")+a.length;t=new Og(t,{calculate:l,as:Ng(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Be(this.transform)}`}}function Ng(e,t,n){return ie(e,{prefix:t,suffix:"sort_index",...n})}function sE(e,t){return ze(["top","bottom"],t)?"column":ze(["left","right"],t)||e==="row"?"row":"column"}function Ig(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ln((t||{})[e],i[e],n.header[e])}function aE(e,t,n,r){const i={};for(const o of e){const s=Ig(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const Z8=["row","column"],J8=["header","footer"];function UKe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=aE(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=sE(t,a),u=P1(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...ple(u,l),...hle(l,u,o),...gle(r,i,t,MYe,mae)}}}function hle(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=fle(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function ple(e,t){const n=cle(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function VKe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of J8)if(n[i])for(const o of n[i]){const s=HKe(e,t,i,n,o);s!=null&&r.push(s)}return r}function WKe(e,t){const{sort:n}=e;return kl(n)?{field:ie(n,{expr:"datum"}),order:n.order??"ascending"}:G(n)?{field:Ng(e,t,{expr:"datum"}),order:"ascending"}:{field:ie(e,{expr:"datum"}),order:n??"ascending"}}function cM(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=aE(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=A8({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=sE(t,a);return{text:{signal:l?wd(wd(l,"datum.label",u),"datum.value",ie(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...ple(o,c),...hle(c,o,s),...gle(n,e,t,FYe,yae)}}function HKe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=aE(["labelOrient"],s.header,a,t);(t==="row"&&!ze(["top","bottom"],f)||t==="column"&&!ze(["left","right"],f))&&(o=cM(s,t,a))}const l=Gi(e)&&!Qv(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:WKe(s,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const qKe={column:{start:0,end:1},row:{start:1,end:0}};function GKe(e,t){return qKe[t][e]}function YKe(e,t){const n={};for(const r of $o){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=aE(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=sE(r,s),l=GKe(o,a);l!==void 0&&(n[a]=l)}}return vt(n)?void 0:n}function gle(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=Ig(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function e9(e){return[..._x(e,"width"),..._x(e,"height"),..._x(e,"childWidth"),..._x(e,"childHeight")]}function _x(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(Ln(s)&&Zd(a)){const l=e.scaleName(n);return Gi(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[CV(l,a)]:[CV(l,a),{name:i,update:mle(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=tM(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function CV(e,t){const n=`${e}_step`;return me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function mle(e,t,n){const r=t.get("type"),i=t.get("padding"),o=ln(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${ps(s)}, ${ps(o)}) * ${e}_step`}function yle(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function vle(e,t){return X(e).reduce((n,r)=>({...n,...pm({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Pt(i.value),invalidValueRef:void 0})}),{})}function ble(e,t){if(Gi(t))return e==="theta"?"independent":"shared";if(vm(t))return"shared";if(a9(t))return un(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function t9(e,t){const n=e.scale[t],r=un(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Z(_qe(t)),"independent"):e[r][t]||"shared"}const XKe={...DYe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},xle=X(XKe);class KKe extends Ql{}const _V={symbols:QKe,gradient:ZKe,labels:JKe,entries:eQe};function QKe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:u}=n,c=s.filled&&u!=="trail";let f={...NHe({},n,TGe),...qae(n,{filled:c})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=d===void 0?wle(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===ki)delete f.fill;else if(K(f.fill,"field"))h?delete f.fill:(f.fill=Pt(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=Pt(g??1));else if(G(f.fill)){const y=fM(a.fill??a.color)??s.fill??(c&&s.color);y&&(f.fill=Pt(y))}}if(f.stroke){if(r==="stroke"||!c&&r===ki)delete f.stroke;else if(K(f.stroke,"field")||p)delete f.stroke;else if(G(f.stroke)){const y=ln(fM(a.stroke||a.color),s.stroke,c?s.color:void 0);y&&(f.stroke={value:y})}}if(r!==Yl){const y=J(t)&&kle(n,i,t);y?f.opacity=[{test:y,...Pt(g??1)},Pt(l.legend.unselectedOpacity)]:g&&(f.opacity=Pt(g))}return f={...f,...e},vt(f)?void 0:f}function ZKe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?wle(s.opacity)||o.opacity:void 0;return u&&(a.opacity=Pt(u)),a={...a,...e},vt(a)?void 0:a}function JKe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=J(t)?kle(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let f;Ed(c)?f=gs({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):u===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=gs({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&J(t)&&t.timeUnit===void 0&&(f=gs({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...l?{opacity:l}:{},...f?{text:f}:{},...e};return vt(d)?void 0:d}function eQe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function wle(e){return Sle(e,(t,n)=>Math.max(t,n.value))}function fM(e){return Sle(e,(t,n)=>ln(t,n.value))}function Sle(e,t){if(KGe(e))return ae(e.condition).reduce(t,e.value);if($s(e))return e.value}function kle(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=te(n.field);return r.map(o=>`(!length(data(${te(Lt(o)+Ad)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const EV={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Lse(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return zse(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??aQe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??lQe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??nQe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>kp(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Sp(n)&&ua(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>tQe(t,e)};function tQe(e,t){const n=e.values;if(G(n))return Qse(t,n);if(me(n))return n}function nQe(e,t,n,r){if(t!=="shape"){const i=fM(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function rQe(e){const{legend:t}=e;return ln(t.type,iQe(e))}function iQe({channel:e,timeUnit:t,scaleType:n}){if(Sp(e)){if(ze(["quarter","month","day"],t))return"symbol";if(ua(n))return"gradient"}return"symbol"}function oQe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??sQe(n,t)}function sQe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function aQe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(ua(i))return n==="horizontal"?r==="top"||r==="bottom"?$V(t,"width",s,o):s:$V(t,"height",l,a)}function $V(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function lQe(e){if(ze(["quantile","threshold","log","symlog"],e))return"greedy"}function Cle(e){const t=Ut(e)?uQe(e):hQe(e);return e.component.legends=t,t}function uQe(e){const{encoding:t}=e,n={};for(const r of[ki,...bae]){const i=Sn(t[r]);!i||!e.getScaleComponent(r)||r===Ci&&J(i)&&i.type===hm||(n[r]=dQe(e,r))}return n}function cQe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function fQe(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function dQe(e,t){var x;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new KKe({},cQe(e,t));wKe(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=Sn(i[t]),f=J(c)?(x=In(c.timeUnit))==null?void 0:x.unit:void 0,d=n.orient||o.legend.orient||"right",h=rQe({legend:n,channel:t,timeUnit:f,scaleType:u}),p=oQe({legend:n,legendType:h,orient:d,legendConfig:s}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:u,orient:d,legendType:h,direction:p};for(const w of xle){if(h==="gradient"&&w.startsWith("symbol")||h==="symbol"&&w.startsWith("gradient"))continue;const k=w in EV?EV[w](g):n[w];if(k!==void 0){const S=fQe(k,w,n,e.fieldDef(t));(S||o.legend[w]===void 0)&&a.set(w,k,S)}}const y=(n==null?void 0:n.encoding)??{},m=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const w of["labels","legend","title","symbols","gradient","entries"]){const k=vle(y[w]??{},e),S=w in _V?_V[w](k,b):k;S!==void 0&&!vt(S)&&(v[w]={...m!=null&&m.length&&J(c)?{name:`${Lt(c.field)}_legend_${w}`}:{},...m!=null&&m.length?{interactive:!!m}:{},update:S})}return vt(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function hQe(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Cle(r);for(const i of X(r.component.legends))n.legend[i]=t9(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=_le(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of X(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function _le(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of xle){const c=xc(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(f,d)=>{switch(u){case"symbolType":return pQe(f,d);case"title":return rse(f,d);case"type":return i=!0,Ti("symbol")}return tE(f,d,u,"legend")});e.setWithExplicit(u,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&ek(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&ek(e.explicit,["encode","gradient"])),e}function pQe(e,t){return t.value==="circle"?t:e}function gQe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Ele(e){const t=e.component.legends,n={};for(const i of X(t)){const o=e.getScaleComponent(i),s=bt(o.get("domains"));if(n[s])for(const a of n[s])_le(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return tr(n).flat().map(i=>mQe(i,e.config)).filter(i=>i!==void 0)}function mQe(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const c of bae)o[c]&&delete u[c]}if(o.title||delete o.title,r!==void 0){let u=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&me(o.encode.labels.update.text)&&(u=wd(r,"datum.label",o.encode.labels.update.text.signal)),gQe(o,"labels","text",{signal:u})}return o}}function yQe(e){return vm(e)||a9(e)?vQe(e):$le(e)}function vQe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),$le(e))}function $le(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=me(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return ze(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const bQe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Ale extends Ql{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Tle(e){e.component.projection=Ut(e)?xQe(e):kQe(e)}function xQe(e){if(e.hasProjection){const t=Gn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?wQe(e):void 0,o=new Ale(e.projectionName(!0),{...Gn(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function wQe(e){const t=[],{encoding:n}=e;for(const r of[[Ns,Os],[zo,Is]])(Sn(n[r[0]])||Sn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ci)&&e.typedFieldDef(Ci).type===hm&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(tn.Main)),t}function SQe(e,t){const n=YO(bQe,i=>!!(!ce(e.explicit,i)&&!ce(t.explicit,i)||ce(e.explicit,i)&&ce(t.explicit,i)&&ji(e.get(i),t.get(i))));if(ji(e.size,t.size)){if(n)return e;if(ji(e.explicit,{}))return t;if(ji(t.explicit,{}))return e}return null}function kQe(e){if(e.children.length===0)return;let t;for(const r of e.children)Tle(r);const n=YO(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=SQe(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Ale(r,t.specifiedProjection,t.size,Me(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function CQe(e,t,n,r){if(eb(t,n)){const i=Ut(e)?e.axis(n)??e.legend(n)??{}:{},o=ie(t,{expr:"datum"}),s=ie(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ie(t,{binSuffix:"range",forAs:!0}),formula:Kv(o,s,i.format,i.formatType,r)}}return{}}function Mle(e,t){return`${Xoe(e)}_${t}`}function _Qe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function n9(e,t,n){const r=X_(n,void 0)??{},i=Mle(r,t);return e.getName(`${i}_bins`)}function EQe(e){return"as"in e}function AV(e,t,n){let r,i;EQe(e)?r=le(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ie(e,{forAs:!0}),ie(e,{binSuffix:"end",forAs:!0})];const o={...X_(t,void 0)},s=Mle(o,e.field),{signal:a,extentSignal:l}=_Qe(n,s);if(L_(o.extent)){const c=o.extent;i=lle(n,c.param,c),delete o.extent}const u={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:u}}class wa extends gt{clone(){return new wa(null,Me(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(Zr(o)&&Et(o.bin)){const{key:a,binComponent:l}=AV(o,o.bin,n);i[a]={...l,...i[a],...CQe(n,o,s,n.config)}}return i},{});return vt(r)?null:new wa(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=AV(n,n.bin,r);return new wa(t,{[i]:o})}merge(t,n){for(const r of X(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=la([...this.bins[r].as,...t.bins[r].as],Be)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(tr(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(tr(this.bins).map(t=>t.field))}hash(){return`Bin ${Be(this.bins)}`}assemble(){return tr(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:Lo(t.field),as:r,signal:t.signal,...L_(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:Lo(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:ie({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function $Qe(e,t,n,r){var o;const i=Ut(r)?r.encoding[za(t)]:void 0;if(Zr(n)&&Ut(r)&&Vse(n,i,r.markDef,r.config)){e.add(ie(n,{})),e.add(ie(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,u=bc({fieldDef:n,markDef:a,config:l});R1(s)&&u!==.5&&un(t)&&(e.add(ie(n,{suffix:nE})),e.add(ie(n,{suffix:rE}))),n.bin&&eb(n,t)&&e.add(ie(n,{binSuffix:"range"}))}else if(joe(t)){const s=zoe(t);e.add(r.getName(s))}else e.add(ie(n));return th(n)&&mGe((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function AQe(e,t){for(const n of X(t)){const r=t[n];for(const i of X(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class bs extends gt{clone(){return new bs(null,new Set(this.dimensions),Me(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:l,field:u}=s;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ie(s,{forAs:!0})]);else{if(Nl(l)||zc(l)){const c=Nl(l)?"argmin":"argmax",f=l[c];i[f]??(i[f]={}),i[f][c]=new Set([ie({op:c,field:f},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([ie(s,{forAs:!0})]);ja(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([ie({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([ie({field:u,aggregate:"max"},{forAs:!0})]))}else $Qe(o,a,s,n)}),o.size+X(i).length===0)?null:new bs(t,o,i)}static makeFromTransform(t,n){var r;const i=new Set,o={};for(const s of n.aggregate){const{op:a,field:l,as:u}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([u||ie(s,{forAs:!0})])):(o[l]??(o[l]={}),(r=o[l])[a]??(r[a]=new Set),o[l][a].add(u||ie(s,{forAs:!0}))))}for(const s of n.groupby??[])i.add(s);return i.size+X(o).length===0?null:new bs(t,i,o)}merge(t){return Foe(this.dimensions,t.dimensions)?(AQe(this.measures,t.measures),!0):(Bqe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...X(this.measures)])}producedFields(){const t=new Set;for(const n of X(this.measures))for(const r of X(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Be({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of X(this.measures))for(const s of X(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:Lo(o));return{type:"aggregate",groupby:[...this.dimensions].map(Lo),ops:t,fields:n,as:r}}}class mm extends gt{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of $o){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:n.getName(`${o}_domain`),fields:[ie(s),...Et(a)?[ie(s,{binSuffix:"end"})]:[]],...kl(l)?{sortField:l}:G(l)?{sortIndexField:Ng(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of $o)this[n]&&(t+=` ${n.charAt(0)}:${Be(this[n])}`);return t}get fields(){var n;const t=[];for(const r of $o)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of $o)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Xl){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(Ln(i)&&Zd(o)){const s=lE(this.childModel,n),a=s9(s);a?t[n]=a:Z(l8(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=q_,field:f}=l;o.push(f),s.push(c),a.push(ie(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const u of Z8){for(const c of J8){const f=(r[u]&&r[u][c])??[];for(const d of f)if(((l=d.axes)==null?void 0:l.length)>0){o[u]=!0;break}}if(o[u]){const c=`length(data("${this.facet.name}"))`,f=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Sl,wl])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function TV(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function TQe(e,t){const n=QO(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=TV(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=TV(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Z(KHe(t)),null}function MQe(e){const t={};return z2(e.filter,n=>{if(xse(n)){let r=null;d8(n)?r=Oi(n.equal):p8(n)?r=Oi(n.lte):h8(n)?r=Oi(n.lt):g8(n)?r=Oi(n.gt):m8(n)?r=Oi(n.gte):y8(n)?r=n.range[0]:v8(n)&&(r=(n.oneOf??n.in)[0]),r&&(Jd(r)?t[n.field]="date":Ze(r)?t[n.field]="number":le(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function FQe(e){const t={};function n(r){Pg(r)?t[r.field]="date":r.type==="quantitative"&&$He(r.aggregate)?t[r.field]="number":_g(r.field)>1?r.field in t||(t[r.field]="flatten"):th(r)&&kl(r.sort)&&_g(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Ut(e)||Gi(e))&&e.forEachFieldDef((r,i)=>{if(Zr(r))n(r);else{const o=Kd(i),s=e.fieldDef(o);n({...r,type:s.type})}}),Ut(e)){const{mark:r,markDef:i,encoding:o}=e;if(jc(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];J(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function PQe(e){const t={};if(Ut(e)&&e.component.selection)for(const n of X(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&_g(i.field)>1&&(t[i.field]="flatten")}return t}class Sr extends gt{clone(){return new Sr(null,Me(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Be(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!tc(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of X(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:Z(LU(a,r[a],l.value)))}for(const a of X(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:Z(LU(a,n[a],l)))}const o=new Ql(n,r);i.copyAll(o);const s={};for(const a of X(o.combine())){const l=o.get(a);l!==null&&(s[a]=l)}return X(s).length===0||i.parseNothing?null:new Sr(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of X(this._parse)){const r=this._parse[n];_g(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(X(this._parse))}dependentFields(){return new Set(X(this._parse))}assembleTransforms(t=!1){return X(this._parse).filter(n=>t?_g(n)>1:!0).map(n=>{const r=TQe(n,this._parse[n]);return r?{type:"formula",expr:r,as:fm(n)}:null}).filter(n=>n!==null)}}class Sc extends gt{clone(){return new Sc(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ts])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ts}}}class rb extends gt{clone(){return new rb(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Be(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class ib extends gt{clone(){return new ib(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Be(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Td extends gt{constructor(t){super(null),t??(t={name:"source"});let n;if(tc(t)||(n=t.format?{...mi(t.format,["parse"])}:{}),D1(t))this._data={values:t.values};else if(Rg(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];ze(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else Iae(t)?this._data={values:[{type:"Sphere"}]}:(Oae(t)||tc(t))&&(this._data={});this._generator=tc(t),t.name&&(this._name=t.name),n&&!vt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var MV=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},RQe=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},G0;function r9(e){return e instanceof Td||e instanceof rb||e instanceof ib}class i9{constructor(){G0.set(this,void 0),MV(this,G0,!1,"f")}setModified(){MV(this,G0,!0,"f")}get modifiedFlag(){return RQe(this,G0,"f")}}G0=new WeakMap;class nh extends i9{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class o9 extends i9{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class DQe extends o9{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of X(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class OQe extends o9{constructor(t){super(),this.requiresSelectionId=t&&Q8(t)}run(t){t instanceof Sc&&(this.requiresSelectionId&&(r9(t.parent)||t.parent instanceof bs||t.parent instanceof Sr)||(this.setModified(),t.remove()))}}class NQe extends i9{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof xa&&(r=t.producedFields(),XO(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class IQe extends o9{constructor(){super()}run(t){t instanceof yi&&!t.isRequired()&&(this.setModified(),t.remove())}}class LQe extends nh{run(t){if(!r9(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Sr)if(t instanceof Sr)this.setModified(),t.merge(n);else{if(KO(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class zQe extends nh{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Sr);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of X(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!vt(i)){this.setModified();const s=new Sr(t,i);for(const a of n){if(a instanceof Sr)for(const l of X(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof Sr&&X(a.parse).length===0&&a.remove()}}}}}class jQe extends nh{run(t){t instanceof yi||t.numChildren()>0||t instanceof mm||t instanceof Td||(this.setModified(),t.remove())}}class BQe extends nh{run(t){const n=t.children.filter(i=>i instanceof xa),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class UQe extends nh{run(t){const n=t.children.filter(i=>i instanceof bs),r={};for(const i of n){const o=Be(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of X(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class VQe extends nh{constructor(t){super(),this.model=t}run(t){const n=!(r9(t)||t instanceof gm||t instanceof Sr||t instanceof Sc),r=[],i=[];for(const o of t.children)o instanceof wa&&(n&&!KO(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof wa?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class WQe extends nh{run(t){const n=[...t.children];if(!Cg(n,s=>s instanceof yi)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof yi){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof yi)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class rh extends gt{clone(){return new rh(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=la(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ie(t)}hash(){return`JoinAggregateTransform ${Be(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class Lg extends gt{clone(){return new Lg(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:s,scales:a}=r;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,f)=>{const d=ja(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,g=_8({scaleChannel:f,markDef:o,config:i,scaleType:h,isCountAggregate:I_(p)});g!=="show"&&g!=="always-valid"&&(u[c.field]=c)}return u},{});return X(l).length?new Lg(t,l):null}dependentFields(){return new Set(X(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Be(this.filter)}`}assemble(){const t=X(this.filter).reduce((n,r)=>{const i=this.filter[r],o=ie(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${dM(o)}))`):i.type==="quantitative"&&n.push(dM(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function dM(e){return`isValid(${e}) && isFinite(+${e})`}function HQe(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ie(r);return i&&t.push(i),t},[])}function qQe(e){return G(e)&&e.every(t=>le(t))&&e.length>1}class _l extends gt{clone(){return new _l(null,Me(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),l.push(ln(f.order,"ascending"));const u={field:a,order:l};let c;return qQe(o)?c=o:le(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new _l(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=r,u=o.map(h=>{const p=i[h];return As(p)}).filter(h=>!!h),c=HQe(n),f=n.encoding.order;let d;if(G(f)||J(f))d=ese(f);else{const h=Wse(f)?f.sort:s==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new _l(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Be(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ie(i,{binSuffix:"mid"})]:[ie(i,{}),ie(i,{binSuffix:"end"})]:[ie(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ie(c,{expr:"datum"}),p=ie(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${dM(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:ie(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:ie(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:u,offset:a}),t}}class ym extends gt{clone(){return new ym(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=la(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ie(t)}hash(){return`WindowTransform ${Be(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>s8(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),l.push(f.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function GQe(e){function t(n){if(!(n instanceof mm)){const r=n.clone();if(r instanceof yi){const i=pM+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof bs||r instanceof _l||r instanceof ym||r instanceof rh)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function hM(e){if(e instanceof mm)if(e.numChildren()===1&&!(e.children[0]instanceof yi)){const t=e.children[0];(t instanceof bs||t instanceof _l||t instanceof ym||t instanceof rh)&&t.addDimensions(e.fields),t.swapWithParent(),hM(e)}else{const t=e.model.component.data.main;Fle(t);const n=GQe(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(hM)}function Fle(e){if(e instanceof yi&&e.type===tn.Main&&e.numChildren()===1){const t=e.children[0];t instanceof mm||(t.swapWithParent(),Fle(e))}}const pM="scale_",Ex=5;function gM(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!gM(t.children))return!1}return!0}function qo(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function FV(e,t,n){let r=e.sources,i=!1;return i=qo(new IQe,r)||i,i=qo(new OQe(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=qo(new jQe,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=qo(new LQe,r)||i,i=qo(new VQe(t),r)||i,i=qo(new NQe,r)||i,i=qo(new zQe,r)||i,i=qo(new UQe,r)||i,i=qo(new BQe,r)||i,i=qo(new DQe,r)||i,i=qo(new WQe,r)||i),e.sources=r,i}function YQe(e,t){gM(e.sources);let n=0,r=0;for(let i=0;i<Ex&&FV(e,t,!0);i++)n++;e.sources.map(hM);for(let i=0;i<Ex&&FV(e,t,!1);i++)r++;gM(e.sources),Math.max(n,r)===Ex&&Z(`Maximum optimization runs(${Ex}) reached.`)}class Mn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Mn(()=>t(n))}}function Ple(e){Ut(e)?XQe(e):KQe(e)}function XQe(e){const t=e.component.scales;for(const n of X(t)){const r=ZQe(e,n);if(t[n].setWithExplicit("domains",r),eZe(e,n),e.component.data.isFaceted){let o=e;for(;!Gi(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)hl(a)&&(a.data=pM+a.data.replace(pM,""))}}}function KQe(e){for(const n of e.children)Ple(n);const t=e.component.scales;for(const n of X(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=xc(r,s.getWithExplicit("domains"),"domains","scale",mM);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&Z(qHe),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function QQe(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=PV(t,n);if(!i){Z(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=PV(t,n);if(i)return"unaggregated"}return e}function ZQe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=QQe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Sn(r.x2)?Sn(r.x)?xc(au(n,i,e,"x"),au(n,i,e,"x2"),"domain","scale",mM):au(n,i,e,"x2"):t==="y"&&Sn(r.y2)?Sn(r.y)?xc(au(n,i,e,"y"),au(n,i,e,"y2"),"domain","scale",mM):au(n,i,e,"y2"):au(n,i,e,t)}function JQe(e,t,n){return e.map(r=>({signal:`{data: ${K_(r,{timeUnit:n,type:t})}}`}))}function c5(e,t,n){var i;const r=(i=In(n))==null?void 0:i.unit;return t==="temporal"||r?JQe(e,t,r):[e]}function au(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,u=Sn(i[r]),{type:c}=u,f=u.timeUnit,d=GXe({invalid:Ea("invalid",o,a),isPath:jc(s)});if(gGe(t)){const g=au(e,void 0,n,r),y=c5(t.unionWith,c,f);return Ys([...y,...g.value])}else{if(me(t))return Ys([t]);if(t&&t!=="unaggregated"&&!$se(t))return Ys(c5(t,c,f))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Ti([[0,1]]);const g=n.requestDataName(d);return Ti([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=ja(r)&&J(u)?tZe(n,r,e):void 0;if(Ba(u)){const g=c5([u.datum],c,f);return Ti(g)}const p=u;if(t==="unaggregated"){const{field:g}=u;return Ti([{data:n.requestDataName(d),field:ie({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:ie({field:g,aggregate:"max"})}])}else if(Et(p.bin)){if(Ln(e))return Ti(e==="bin-ordinal"?[]:[{data:F1(h)?n.requestDataName(d):n.requestDataName(tn.Raw),field:n.vgField(r,eb(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!se(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if(Et(g)){const y=n9(n,p.field,g);return Ti([new Mn(()=>{const m=n.getSignalName(y);return`[${m}.start, ${m}.stop]`})])}else return Ti([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&ze(["time","utc"],e)){const g=i[za(r)];if(Vse(p,g,o,a)){const y=n.requestDataName(d),m=bc({fieldDef:p,fieldDef2:g,markDef:o,config:a}),v=R1(s)&&m!==.5&&un(r);return Ti([{data:y,field:n.vgField(r,v?{suffix:nE}:{})},{data:y,field:n.vgField(r,{suffix:v?rE:"end"})}])}}return Ti(h?[{data:F1(h)?n.requestDataName(d):n.requestDataName(tn.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function f5(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":q_),...r?{field:Lo(r)}:{},...i?{order:i}:{}}}function eZe(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=$se(r)?r:void 0,s=Qd(i)&&L_(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function tZe(e,t,n){if(!Ln(n))return;const r=e.fieldDef(t),i=r.sort;if(Bse(i))return{op:"min",field:Ng(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(kl(i)){const a=o&&!s.has(i.field);return f5(i,a)}else if(GGe(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:f}=u,d=o&&!s.has(f);if(Nl(c)||zc(c))return f5({field:ie(u),order:l},d);if(s8(c)||!c)return f5({op:c,field:f,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(ze(["ascending",void 0],i))return!0}}function PV(e,t){const{aggregate:n,type:r}=e;return n?le(n)&&!THe.has(n)?{valid:!1,reason:vqe(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:bqe(e)}:{valid:!0}:{valid:!1,reason:yqe(e)}}function mM(e,t,n,r){return e.explicit&&t.explicit&&Z(Cqe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function nZe(e){const t=la(e.map(s=>{if(hl(s)){const{sort:a,...l}=s;return l}return s}),Be),n=la(e.map(s=>{if(hl(s)){const a=s.sort;return a!==void 0&&!F1(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Be);if(t.length===0)return;if(t.length===1){const s=e[0];if(hl(s)&&n.length>0){let a=n[0];if(n.length>1){Z(jU);const l=n.filter(u=>se(u)&&"op"in u&&u.op!=="min");n.every(u=>se(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(se(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=la(n.map(s=>F1(s)||!("op"in s)||le(s.op)&&ce(_He,s.op)?s:(Z(Eqe(s)),!0)),Be);let i;r.length===1?i=r[0]:r.length>1&&(Z(jU),i=!0);const o=la(e.map(s=>hl(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function s9(e){if(hl(e)&&le(e.field))return e.field;if(MHe(e)){let t;for(const n of e.fields)if(hl(n)&&le(n.field)){if(!t)t=n.field;else if(t!==n.field)return Z($qe),t}return Z(Aqe),t}else if(FHe(e)){Z(Tqe);const t=e.fields[0];return le(t)?t:void 0}}function lE(e,t){const r=e.component.scales[t].get("domains").map(i=>(hl(i)&&(i.data=e.lookupDataSource(i.data)),i));return nZe(r)}function Rle(e){return vm(e)||a9(e)?e.children.reduce((t,n)=>t.concat(Rle(n)),RV(e)):RV(e)}function RV(e){return X(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:c,...f}=i,d=rZe(i.range,o,n,e),h=lE(e,n),p=a?JXe(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function rZe(e,t,n,r){if(un(n)){if(Zd(e))return{step:{signal:`${t}_step`}}}else if(se(e)&&hl(e))return{...e,data:r.lookupDataSource(e.data)};return e}class Dle extends Ql{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(ze([Yn.LOG,Yn.TIME,Yn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&ze([Yn.LINEAR,Yn.SQRT,Yn.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,s=!1;for(const a of r){if(G(a)){const l=a[0],u=a[a.length-1];if(Ze(l)&&Ze(u))if(l<=0&&u>=0){i=!0;continue}else{o=!0;continue}}s=!0}if(i)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const iZe=["range","scheme"];function oZe(e){const t=e.component.scales;for(const n of o8){const r=t[n];if(!r)continue;const i=sZe(n,e);r.setWithExplicit("range",i)}}function DV(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=_i(t),s=e.getName(o);if(se(r)&&r.binned&&r.step!==void 0)return new Mn(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(Et(r)){const a=n9(e,i,r);return new Mn(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function sZe(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of iZe)if(n[f]!==void 0){const d=Z4(o,f),h=Ase(e,f);if(!d)Z(ase(o,f,e));else if(h)Z(h);else switch(f){case"range":{const p=n.range;if(G(p)){if(un(e))return Ys(p.map(g=>{if(g==="width"||g==="height"){const y=t.getName(g),m=t.getSignalName.bind(t);return Mn.fromName(m,y)}return g}))}else if(se(p))return Ys({data:t.requestDataName(tn.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Ys(p)}case"scheme":return Ys(aZe(n[f]))}}const s=e===zt||e==="xOffset"?"width":"height",a=r[s];if(Aa(a)){if(un(e))if(Ln(o)){const f=Nle(a,t,e);if(f)return Ys({step:f})}else Z(lse(s));else if(Gv(e)){const f=e===Dc?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Ile(a,o);if(p)return Ys(p)}}}const{rangeMin:l,rangeMax:u}=n,c=lZe(e,t);return(l!==void 0||u!==void 0)&&Z4(o,"rangeMin")&&G(c)&&c.length===2?Ys([l??c[0],u??c[1]]):Ti(c)}function aZe(e){return pGe(e)?{scheme:e.name,...mi(e,["name"])}:{scheme:e}}function Ole(e,t,n,{center:r}={}){const i=_i(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===Un&&Es(n)?r?[Mn.fromName(a=>`${s(a)}/2`,o),Mn.fromName(a=>`-${s(a)}/2`,o)]:[Mn.fromName(s,o),0]:r?[Mn.fromName(a=>`-${s(a)}/2`,o),Mn.fromName(a=>`${s(a)}/2`,o)]:[0,Mn.fromName(s,o)]}function lZe(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=Sn(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case zt:case Un:{if(ze(["point","band"],l)){const f=Lle(e,n,r.view);if(Aa(f))return{step:Nle(f,t,e)}}return Ole(e,t,l)}case Dc:case dm:return uZe(e,t,l);case Gl:{const f=dZe(i,r),d=hZe(i,n,t,r);return Tg(l)?fZe(f,d,cZe(l,r,u,e)):[f,d]}case Bo:return[0,Math.PI*2];case Xd:return[0,360];case Ds:return[0,new Mn(()=>{const f=t.getSignalName(Gi(t.parent)?"child_width":"width"),d=t.getSignalName(Gi(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Ic:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Lc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ci:return"symbol";case ki:case Ia:case La:return l==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Yl:case Oc:case Nc:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Nle(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=t8(n),s=r[o];if(wae({step:e,offsetIsDiscrete:Pe(s)&&Sse(s.type)})==="offset"&&tae(r,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${OHe(f)})`}}else return e.step}function Ile(e,t){if(wae({step:e,offsetIsDiscrete:Ln(t)})==="offset")return{step:e.step}}function uZe(e,t,n){const r=e===Dc?"x":"y",i=t.getScaleComponent(r);if(!i)return Ole(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const u=Lle(r,t.size,t.config.view);if(Aa(u)){const c=Ile(u,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{const u=t.encoding[r];if(J(u)&&u.timeUnit){const c=vse(u.timeUnit,p=>`scale('${s}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=bc({fieldDef:u,markDef:a,config:l})-.5,h=d!==0?` + ${d}`:"";if(f){const p=me(f)?`${f.signal}/2`+h:`${f/2+d}`,g=me(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${g} * (${c})`}]}return[0,{signal:c}]}return Toe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function Lle(e,t,n){const r=e===zt?"width":"height",i=t[r];return i||uk(n,r)}function cZe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&G(n)?n.length+1:(Z(Lqe(r)),3)}}function fZe(e,t,n){const r=()=>{const i=ps(t),o=ps(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return me(t)?new Mn(r):{signal:r()}}function dZe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(z_("size",e))}const OV=.95;function hZe(e,t,n,r){const i={x:DV(n,"x"),y:DV(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=NV(t,i,r.view);return Ze(o)?o-1:new Mn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=NV(t,i,r.view);return Ze(o)?Math.pow(OV*o,2):new Mn(()=>`pow(${OV} * ${o.signal}, 2)`)}}throw new Error(z_("size",e))}function NV(e,t,n){const r=Aa(e.width)?e.width.step:nM(n,"width"),i=Aa(e.height)?e.height.step:nM(n,"height");return t.x||t.y?new Mn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function zle(e,t){Ut(e)?pZe(e,t):Ble(e,t)}function pZe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of X(n)){const l=s[a],u=n[a],c=e.getScaleComponent(a),f=Sn(i[a]),d=l[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),y=Z4(h,t),m=Ase(a,t);if(d!==void 0&&(y?m&&Z(m):Z(ase(h,t,a))),y&&m===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Jd(l[t])||b==="temporal"||v?u.set(t,{signal:K_(l[t],{type:b,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=K(IV,t)?IV[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:nae(i,a),hasSecondaryRangeChannel:!!i[za(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const IV={bins:({model:e,fieldOrDatumDef:t})=>J(t)?gZe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>mZe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>yZe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>vZe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>bZe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>xZe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=J(e)?e.sort:void 0;return wZe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>SZe(e,t,n,r,i,o.scale,s)};function jle(e){Ut(e)?oZe(e):Ble(e,"range")}function Ble(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?jle(r):zle(r,t);for(const r of X(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=xc(i,a,t,"scale",Dae((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function gZe(e,t){const n=t.bin;if(Et(n)){const r=n9(e,t.field,n);return new Mn(()=>e.getSignalName(r))}else if(Hn(n)&&Qd(n)&&n.step!==void 0)return{step:n.step}}function mZe(e,t){if(ze([ki,Ia,La],e)&&t!=="nominal")return"hcl"}function yZe(e,t,n,r,i,o){var s;if(!((s=As(o))!=null&&s.bin||G(n)||i!=null||r!=null||ze([Yn.TIME,Yn.UTC],e)))return un(t)?!0:void 0}function vZe(e,t,n,r,i,o){if(un(e)){if(ua(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(J(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Yn.POINT)return n.pointPadding}}function bZe(e,t,n,r,i,o=!1){if(e===void 0){if(un(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=i;return o?c:ln(s,n==="bar"?a:n==="tick"?u:l)}else if(Gv(t)&&r===Yn.BAND)return i.offsetBandPaddingInner}}function xZe(e,t,n,r,i,o=!1){if(e===void 0){if(un(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===Yn.BAND)return ln(s,me(r)?{signal:`${r.signal}/2`}:r/2)}else if(Gv(t)){if(n===Yn.POINT)return .5;if(n===Yn.BAND)return i.offsetBandPaddingOuter}}}function wZe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Es(e)&&t==="descending"?me(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Es(e)&&t==="descending")return!0}function SZe(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&Es(i)){if(G(n)){const l=n[0],u=n[n.length-1];if(Ze(l)&&l<=0&&Ze(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Tg(i))return!0;if(!(J(t)&&t.bin)&&ze([...Xl,...yHe],e)){const{orient:l,type:u}=r;return ze(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:ze(["bar","area"],u)&&!s?!0:o==null?void 0:o.zero}return!1}function kZe(e,t,n,r,i=!1){const o=CZe(t,n,r,i),{type:s}=e;return ja(t)?s!==void 0?wGe(t,s)?J(n)&&!xGe(s,n.type)?(Z(Sqe(s,o)),o):s:(Z(wqe(t,s,o)),o):o:null}function CZe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Sp(e)||t5(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Z(n5(e,"ordinal")),"ordinal";if(un(e)||Gv(e)){if(ze(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in i8)return"band";const o=n[_i(e)];return _d(o)||Fg(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Sp(e)?"time":t5(e)==="discrete"?(Z(n5(e,"temporal")),"ordinal"):J(t)&&t.timeUnit&&In(t.timeUnit).utc?"utc":"time";case"quantitative":return Sp(e)?J(t)&&Et(t.bin)?"bin-ordinal":"linear":t5(e)==="discrete"?(Z(n5(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(ose(t.type))}function _Ze(e,{ignoreRange:t}={}){Ule(e),Ple(e);for(const n of bGe)zle(e,n);t||jle(e)}function Ule(e){Ut(e)?e.component.scales=EZe(e):e.component.scales=AZe(e)}function EZe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of o8){const s=Sn(t[o]);if(s&&n===Fse&&o===Ci&&s.type===hm)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=nae(t,o),u=kZe(a,o,s,r,l);i[o]=new Dle(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const $Ze=Dae((e,t)=>UU(e)-UU(t));function AZe(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){Ule(o);for(const s of X(o.component.scales))if((t=i.scale)[s]??(t[s]=ble(s,e)),i.scale[s]==="shared"){const a=r[s],l=o.component.scales[s].getWithExplicit("type");a?uGe(a.value,l.value)?r[s]=xc(a,l,"type","scale",$Ze):(i.scale[s]="independent",delete r[s]):r[s]=l}}for(const o of X(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new Dle(s,a);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return n}class d5{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ut(e){return(e==null?void 0:e.type)==="unit"}function Gi(e){return(e==null?void 0:e.type)==="facet"}function a9(e){return(e==null?void 0:e.type)==="concat"}function vm(e){return(e==null?void 0:e.type)==="layer"}class l9{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.correctDataNames=l=>{var u,c,f;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(f=(c=l.from)==null?void 0:c.facet)!=null&&f.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=r,this.config=o,this.view=Gn(a),this.name=t.name??i,this.title=mu(t.title)?{text:t.title}:t.title?Gn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new d5,this.projectionNameMap=r?r.projectionNameMap:new d5,this.signalNameMap=r?r.signalNameMap:new d5,this.data=t.data,this.description=t.description,this.transforms=OXe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:zYe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:G_(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Ql,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Me(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){_Ze(this)}parseProjection(){Tle(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Cle(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of X(r)){const s=r[o];s!==void 0&&(i[o]=Pt(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Pt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:vt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=YKe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of $o)t[r].title&&n.push(UKe(this,r));for(const r of Z8)n=n.concat(VKe(this,r));return n}assembleAxes(){return TKe(this.component.axes,this.config)}assembleLegends(){return Ele(this)}assembleProjections(){return yQe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...Koe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return ze(["unit","layer"],this.type)?ze(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),vt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Gi(this.parent)?Rle(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Lt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(tn[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Gi(this.parent)){const n=yle(t),r=N_(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(Ln(o)&&Zd(s)){const a=i.get("name"),l=lE(this,r),u=s9(l);if(u){const c=ie({aggregate:"distinct",field:u},{expr:"datum"});return{signal:mle(a,i,c)}}else return Z(l8(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Uoe(t)&&ja(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(jHe(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Vle extends l9{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ie(r,n)}reduceFieldDef(t,n){return pYe(this.getMapping(),(r,i,o)=>{const s=As(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){D8(this.getMapping(),(r,i)=>{const o=As(r);o&&t(o,i)},n)}}class uE extends gt{clone(){return new uE(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Me(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Be(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class cE extends gt{clone(){return new cE(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Me(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Be(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class fE extends gt{clone(){return new fE(this.parent,Me(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Me(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Be(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class dE extends gt{clone(){return new dE(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Me(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Be(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class _p extends gt{clone(){return new _p(null,Me(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Ns,Os],[zo,Is]]){const o=i.map(s=>{const a=Sn(n.encoding[s]);return J(a)?a.field:Ba(a)?{expr:`${a.datum}`}:$s(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new _p(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Ci)){const i=n.typedFieldDef(Ci);i.type===hm&&(t=new _p(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(le);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Be(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class O1 extends gt{clone(){return new O1(null,this.projection,Me(this.fields),Me(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Ns,Os],[zo,Is]]){const i=r.map(s=>{const a=Sn(n.encoding[s]);return J(a)?a.field:Ba(a)?{expr:`${a.datum}`}:$s(a)?{expr:`${a.value}`}:void 0}),o=r[0]===zo?"2":"";(i[0]||i[1])&&(t=new O1(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(le))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Be(this.fields)} ${Be(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class td extends gt{clone(){return new td(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new td(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(J(i)&&J(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:l,value:u,frame:c,keyvals:f}=s.impute,d=oae(n.mark,r);return new td(t,{impute:s.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Be(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:mXe(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class hE extends gt{clone(){return new hE(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Me(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Be(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class N1 extends gt{clone(){return new N1(null,Me(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(yXe(s)){let l=qle(s.data,o);l||(l=new Td(s.data),o.push(l));const u=n.getName(`lookup_${i}`);a=new yi(l,u,tn.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(vXe(s)){const l=s.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(Lt(l),l)}catch{throw new Error(WHe(l))}if(a=u.materialized,!a)throw new Error(HHe(l))}return new N1(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ae(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Be({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ae(this.transform.as)}:{}};else{let n=this.transform.as;le(n)||(Z(JHe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class pE extends gt{clone(){return new pE(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Me(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Be(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class gE extends gt{clone(){return new gE(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Me(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Be(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class mE extends gt{clone(){return new mE(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=la((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Be(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class yE extends gt{clone(){return new yE(null,Me(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Be(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Wle(e){let t=0;function n(r,i){if(r instanceof Td&&!r.isGenerator&&!Rg(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Sr&&(r.parent instanceof Td&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof mm){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof rb||r instanceof ib||r instanceof Lg||r instanceof gm||r instanceof Og||r instanceof O1||r instanceof bs||r instanceof N1||r instanceof ym||r instanceof rh||r instanceof dE||r instanceof fE||r instanceof uE||r instanceof hE||r instanceof pE||r instanceof gE||r instanceof Sc||r instanceof yE||r instanceof mE||r instanceof cE)&&i.transform.push(r.assemble()),(r instanceof wa||r instanceof xa||r instanceof td||r instanceof _l||r instanceof _p)&&i.transform.push(...r.assemble()),r instanceof yi&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof yi?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof yi&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function TZe(e){const t=[],n=Wle(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function MZe(e,t){const n=[],r=Wle(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function FZe(e){return e==="top"||e==="left"||me(e)?"header":"footer"}function PZe(e){for(const t of $o)RZe(e,t);LV(e,"x"),LV(e,"y")}function RZe(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=Ig("title",null,r,t);let u=kp(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=G(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Ig("labelOrient",a.header,r,t),f=a.header!==null?ln((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=ze(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[Hle(e,t,f)]}}}function Hle(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function LV(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=t9(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=FZe(a.get("orient"));s[l]??(s[l]=[Hle(e,o,!1)]);const u=q0(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function DZe(e){u9(e),hk(e,"width"),hk(e,"height")}function OZe(e){u9(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";hk(e,t),hk(e,n)}function u9(e){for(const t of e.children)t.parseLayoutSize()}function hk(e,t){const n=yle(t),r=N_(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??ble(r,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=xc(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function NZe(e){const{size:t,component:n}=e;for(const r of Xl){const i=_i(r);if(t[i]){const o=t[i];n.layoutSize.set(i,Aa(o)?"step":o,!0)}else{const o=IZe(e,i);n.layoutSize.set(i,o,!1)}}}function IZe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(Ln(o)){const a=uk(r.view,t);return Zd(s)||Aa(a)?"step":a}else return tM(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return tM(r.view,t);{const o=uk(r.view,t);return Aa(o)?o.step:o}}}function yM(e,t,n){return ie(t,{suffix:`by_${ie(e)}`,...n})}class Fy extends Vle{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=p9(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Qv(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=X(t),r={};for(const i of n){if(![wl,Sl].includes(i)){Z(z_(i,"facet"));break}const o=t[i];if(o.field===void 0){Z(K4(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=R8(t,n);return r.header?r.header=Gn(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return K(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=vE(this),this.child.parseData()}parseLayoutSize(){u9(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),PZe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of $o)for(const r of J8){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=Ig("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const l=sE(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Fy))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Fy?{...this.channelHasField("column")?{encode:{update:{columns:{field:ie(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Fy){if(this.child.channelHasField("column")){const i=ie(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Xl){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(Ln(s)&&Zd(a)){const l=lE(this.child,i),u=s9(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):Z(l8(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of $o){const f=this.facet[c];if(f){l.push(ie(f));const{bin:d,sort:h}=f;if(Et(d)&&l.push(ie(f,{binSuffix:"end"})),kl(h)){const{field:p,op:g=q_}=h,y=yM(f,h);r&&i?(o.push(y),s.push("max"),a.push(y)):(o.push(p),s.push(g),a.push(y))}else if(G(h)){const p=Ng(f,c);o.push(p),s.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?kl(r.sort)?[yM(r,r.sort,{expr:"datum"})]:G(r.sort)?[Ng(r,t,{expr:"datum"})]:[ie(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(kl(i)?i.order:!G(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return cM(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of Z8)if(t[o]){const s=Ig("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return cM(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=TZe(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:$o.map(l=>this.facetSortFields(l)).flat(),order:$o.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(XXe(this,[]))}]}getMapping(){return this.facet}}function LZe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(kl(o.sort)){const{field:s,op:a=q_}=o.sort;e=i=new rh(e,{joinaggregate:[{op:a,field:s,as:yM(o,o.sort,{forAs:!0})}],groupby:[ie(o)]})}return i}return null}function qle(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((l||f)&&l!==f)){if(D1(e)&&D1(a)){if(ji(e.values,a.values))return s}else if(Rg(e)&&Rg(a)){if(e.url===a.url)return s}else if(Oae(e)&&e.name===s.dataName)return s}}return null}function zZe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Td({values:[]});return t.push(r),r}const n=qle(e.data,t);if(n)return tc(e.data)||(n.data.format=Moe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Td(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function jZe(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(AXe(i))s=e=new Og(e,i),o="derived";else if(H8(i)){const a=MQe(i);s=e=Sr.makeWithAncestors(e,{},a,n)??e,e=new gm(e,t,i.filter)}else if(Mae(i))s=e=wa.makeFromTransform(e,i,t),o="number";else if(MXe(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Sr(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=xa.makeFromTransform(e,i);else if(FXe(i))s=e=bs.makeFromTransform(e,i),o="number",Q8(t)&&(e=new Sc(e));else if(Tae(i))s=e=N1.make(e,t,i,r++),o="derived";else if(_Xe(i))s=e=new ym(e,i),o="number";else if(EXe(i))s=e=new rh(e,i),o="number";else if(PXe(i))s=e=_l.makeFromTransform(e,i),o="derived";else if(RXe(i))s=e=new dE(e,i),o="derived";else if(DXe(i))s=e=new cE(e,i),o="derived";else if($Xe(i))s=e=new fE(e,i),o="derived";else if(bXe(i))s=e=new mE(e,i),o="derived";else if(CXe(i))e=new yE(e,i);else if(TXe(i))s=e=td.makeFromTransform(e,i),o="derived";else if(xXe(i))s=e=new uE(e,i),o="derived";else if(wXe(i))s=e=new pE(e,i),o="derived";else if(SXe(i))s=e=new gE(e,i),o="derived";else if(kXe(i))s=e=new hE(e,i),o="derived";else{Z(ZHe(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function vE(e){var y;let t=zZe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(tc(i)||Rg(i)||D1(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new qXe;tc(i)?(Nae(i)?t=new ib(t,i.sequence):q8(i)&&(t=new rb(t,i.graticule)),s.parseNothing=!0):((y=i==null?void 0:i.format)==null?void 0:y.parse)===null&&(s.parseNothing=!0),t=Sr.makeExplicit(t,e,s)??t,t=new Sc(t);const a=e.parent&&vm(e.parent);(Ut(e)||Gi(e))&&a&&(t=wa.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=jZe(t,e,s));const l=PQe(e),u=FQe(e);t=Sr.makeWithAncestors(t,{},{...l,...u},s)??t,Ut(e)&&(t=_p.parseAll(t,e),t=O1.parseAll(t,e)),(Ut(e)||Gi(e))&&(a||(t=wa.makeFromEncoding(t,e)??t),t=xa.makeFromEncoding(t,e)??t,t=Og.parseAllForSortIndex(t,e));const c=t=$x(tn.Raw,e,t);if(Ut(e)){const m=bs.makeFromEncoding(t,e);m&&(t=m,Q8(e)&&(t=new Sc(t))),t=td.makeFromEncoding(t,e)??t,t=_l.makeFromEncoding(t,e)??t}let f,d;if(Ut(e)){const{markDef:m,mark:v,config:b}=e,x=mt("invalid",m,b),{marks:w,scales:k}=d=Lae({invalid:x,isPath:jc(v)});w!==k&&k==="include-invalid-values"&&(f=t=$x(tn.PreFilterInvalid,e,t)),w==="exclude-invalid-values"&&(t=Lg.make(t,e,d)??t)}const h=t=$x(tn.Main,e,t);let p;if(Ut(e)&&d){const{marks:m,scales:v}=d;m==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=Lg.make(t,e,d)??t,p=t=$x(tn.PostFilterInvalid,e,t))}Ut(e)&&$Ke(e,h);let g=null;if(Gi(e)){const m=e.getName("facet");t=LZe(t,e.facet)??t,g=new mm(t,e,m,h.getSource()),n[m]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:g,ancestorParse:s,preFilterInvalid:f,postFilterInvalid:p}}function $x(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new yi(n,o,e,i);return r[o]=s,s}class BZe extends l9{constructor(t,n,r,i){var o,s,a,l;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&Z(XHe),this.children=this.getChildren(t).map((u,c)=>p9(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=vE(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of X(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return J_(t)?t.vconcat:V8(t)?t.hconcat:t.concat}parseLayoutSize(){OZe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=e9(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function UZe(e){return e===!1||e===null}const VZe={disable:1,gridScale:1,scale:1,...Jse,labelExpr:1,encode:1},Gle=X(VZe);class c9 extends Ql{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new c9(Me(this.explicit),Me(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!UZe(this.get(t))}hasOrientSignalRef(){return me(this.explicit.orient)}}function WZe(e,t,n){const{encoding:r,config:i}=e,o=Sn(r[t])??Sn(r[za(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(Ed(l))return{text:gs({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(Mg(o)==="quantitative"){if(Fg(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:gs({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:gs({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Mg(o)==="temporal"&&i.timeFormatType&&J(o)&&!o.timeUnit)return{text:gs({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function HZe(e){return Xl.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[ZZe(n,e)]),t),{})}const qZe={bottom:"top",top:"bottom",left:"right",right:"left"};function GZe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of X(i.component.axes))n.axis[o]=t9(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=YZe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of Xl){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!me(a)){if(r[a]>0&&!l){const u=qZe[a];r[a]>r[u]&&s.set("orient",u,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function YZe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=XZe(i,o)}}}else return t.map(n=>n.clone());return e}function XZe(e,t){for(const n of Gle){const r=xc(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return rse(i,o);case"gridScale":return{explicit:i.explicit,value:ln(i.value,o.value)}}return tE(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function KZe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(me(n.labelAngle)?n.labelAngle:P1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===dle(r,i))return!0}return e===n[t]}const QZe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function ZZe(e,t){var m,v;let n=t.axis(e);const r=new c9,i=Sn(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((m=s[e==="x"?"axisX":"axisY"])==null?void 0:m.orient)||((v=s.axis)==null?void 0:v.orient)||IKe(e),l=t.getScaleComponent(e).get("type"),u=MKe(e,l,a,t.config),c=n!==void 0?!n:lM("disable",s.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=DKe(i,n,e,s.style,u),d=zse(n.formatType,i,l),h=Lse(i,i.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const b of Gle){const x=b in kV?kV[b](p):XU(b)?n[b]:void 0,w=x!==void 0,k=KZe(x,b,n,t,e);if(w&&k)r.set(b,x,k);else{const{configValue:S=void 0,configFrom:C=void 0}=XU(b)&&b!=="values"?lM(b,s.style,n.style,u):{},_=S!==void 0;w&&!_?r.set(b,x,k):(C!=="vgAxisConfig"||QZe.has(b)&&_||tb(S)||me(S))&&r.set(b,S,!1)}}const g=n.encoding??{},y=Zse.reduce((b,x)=>{if(!r.hasAxisPart(x))return b;const w=vle(g[x]??{},t),k=x==="labels"?WZe(t,e,w):w;return k!==void 0&&!vt(k)&&(b[x]={update:k}),b},{});return vt(y)||r.set("encode",y,!!n.encoding||n.labelAngle!==void 0),r}function JZe({encoding:e,size:t}){for(const n of Xl){const r=_i(n);Aa(t[r])&&zu(e[n])&&(delete t[r],Z(lse(r)))}return t}const eJe={vgMark:"arc",encodeEntry:e=>({...Uo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Hr("x",e,{defaultPos:"mid"}),...Hr("y",e,{defaultPos:"mid"}),...Il(e,"radius"),...Il(e,"theta")})},tJe={vgMark:"area",encodeEntry:e=>({...Uo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...ck("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...ck("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...K8(e)})},nJe={vgMark:"rect",encodeEntry:e=>({...Uo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Il(e,"x"),...Il(e,"y")})},rJe={vgMark:"shape",encodeEntry:e=>({...Uo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&J(n)&&n.type===hm?{field:ie(n,{expr:"datum"})}:{}}]}},iJe={vgMark:"image",encodeEntry:e=>({...Uo(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Il(e,"x"),...Il(e,"y"),...Y8(e,"url")})},oJe={vgMark:"line",encodeEntry:e=>({...Uo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Hr("x",e,{defaultPos:"mid"}),...Hr("y",e,{defaultPos:"mid"}),...Kn("size",e,{vgChannel:"strokeWidth"}),...K8(e)})},sJe={vgMark:"trail",encodeEntry:e=>({...Uo(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Hr("x",e,{defaultPos:"mid"}),...Hr("y",e,{defaultPos:"mid"}),...Kn("size",e),...K8(e)})};function f9(e,t){const{config:n}=e;return{...Uo(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Hr("x",e,{defaultPos:"mid"}),...Hr("y",e,{defaultPos:"mid"}),...Kn("size",e),...Kn("angle",e),...aJe(e,n,t)}}function aJe(e,t,n){return n?{shape:{value:n}}:Kn("shape",e)}const lJe={vgMark:"symbol",encodeEntry:e=>f9(e)},uJe={vgMark:"symbol",encodeEntry:e=>f9(e,"circle")},cJe={vgMark:"symbol",encodeEntry:e=>f9(e,"square")},fJe={vgMark:"rect",encodeEntry:e=>({...Uo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Il(e,"x"),...Il(e,"y")})},dJe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Uo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ck("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...ck("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Kn("size",e,{vgChannel:"strokeWidth"})}}},hJe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Uo(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Hr("x",e,{defaultPos:"mid"}),...Hr("y",e,{defaultPos:"mid"}),...Y8(e),...Kn("size",e,{vgChannel:"fontSize"}),...Kn("angle",e),...bV("align",pJe(e.markDef,n,t)),...bV("baseline",gJe(e.markDef,n,t)),...Hr("radius",e,{defaultPos:null}),...Hr("theta",e,{defaultPos:null})}}};function pJe(e,t,n){if(mt("align",e,n)===void 0)return"center"}function gJe(e,t,n){if(mt("baseline",e,n)===void 0)return"middle"}const mJe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...Uo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Il(e,i),...Hr(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:Pt(mt("thickness",n,t))}}},Ax={arc:eJe,area:tJe,bar:nJe,circle:uJe,geoshape:rJe,image:iJe,line:oJe,point:lJe,rect:fJe,rule:dJe,square:cJe,text:hJe,tick:mJe,trail:sJe};function yJe(e){if(ze([W_,U_,_Ge],e.mark)){const t=oae(e.mark,e.encoding);if(t.length>0)return vJe(e,t)}else if(e.mark===V_){const t=Y4.some(n=>mt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return bJe(e)}return d9(e)}const zV="faceted_path_";function vJe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:zV+e.requestDataName(tn.Main),data:e.requestDataName(tn.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:d9(e,{fromPrefix:zV})}]}const jV="stack_group_";function bJe(e){var u;const[t]=d9(e,{fromPrefix:jV}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...kg(t.encode.update,["y","yc","y2","height",...Y4]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...mi(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...kg(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...mi(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of Y4){const f=Ea(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=Pt(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ie(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ie(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Ea(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Pt(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(tn.Main),name:jV+e.requestDataName(tn.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function xJe(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!G(s)&&$s(s)&&q4(s.value)||!s&&q4(mt("order",i,o)))){if((G(s)||J(s))&&!n)return ese(s,{expr:"datum"});if(jc(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(J(l))return{field:a}}}}function d9(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=ln(r.clip,wJe(e),SJe(e)),a=Zoe(r),l=i.key,u=xJe(e),c=kJe(e),f=mt("aria",r,o),d=Ax[n].postEncodingTransform?Ax[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Ax[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(tn.Main)},encode:{update:Ax[n].encodeEntry(e)},...d?{transform:d}:{}}]}function wJe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function SJe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function kJe(e){if(!e.component.selection)return null;const t=X(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=X(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Yle extends Vle{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,QU(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=$a(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=lXe(s,o,{graticule:t.data&&q8(t.data)}));const l=this.encoding=dYe(t.encoding||{},a,s.filled,o);this.markDef=Eae(s,l,o),this.size=JZe({encoding:l,size:QU(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=_ae(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>B8(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===Fse,r=t&&lHe.some(i=>Pe(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return o8.reduce((r,i)=>{const o=Sn(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Gn(t);return G(n)&&(i.domain=n.map(Oi)),G(r)&&(i.range=r.map(Oi)),i}initAxes(t){return Xl.reduce((n,r)=>{const i=t[r];if(Pe(i)||r===zt&&Pe(t.x2)||r===Un&&Pe(t.y2)){const o=Pe(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=X(t),r={};for(const i of n){const o=t[i];r[i]=tb(o)?Qoe(o):Oi(o)}return r}initLegends(t){return vHe.reduce((n,r)=>{const i=Sn(t[r]);if(i&&xHe(r)){const o=i.legend;n[r]=o&&Gn(o)}return n},{})}parseData(){this.component.data=vE(this)}parseLayoutSize(){NZe(this)}parseSelections(){this.component.selection=EKe(this,this.selection)}parseMarkGroup(){this.component.mark=yJe(this)}parseAxesAndHeaders(){this.component.axes=HZe(this)}assembleSelectionTopLevelSignals(t){return KXe(this,t)}assembleSignals(){return[...ule(this),...YXe(this,[])]}assembleSelectionData(t){return QXe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return e9(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!vm(this.parent))&&(t=jae(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Jf(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return As(n)}typedFieldDef(t){const n=this.fieldDef(t);return Zr(n)?n:null}}class h9 extends l9{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(eE(a))return new h9(a,this,this.getName(`layer_${l}`),s,o);if(Kl(a))return new Yle(a,this,this.getName(`layer_${l}`),s,o);throw new Error(a8(a))})}parseData(){this.component.data=vE(this);for(const t of this.children)t.parseData()}parseLayoutSize(){DZe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of X(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){GZe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),ule(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),e9(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ae(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return ZXe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Ele(this))}}function p9(e,t,n,r,i){if(G_(e))return new Fy(e,t,n,i);if(eE(e))return new h9(e,t,n,r,i);if(Kl(e))return new Yle(e,t,n,r,i);if(NYe(e))return new BZe(e,t,n,i);throw new Error(a8(e))}function CJe(e,t={}){t.logger&&zqe(t.logger),t.fieldTitle&&Xse(t.fieldTitle);try{const n=Cae(Kg(t.config,e.config)),r=Rae(e,n),i=p9(r,null,"",void 0,n);return i.parse(),YQe(i.component.data,i),{spec:EJe(i,_Je(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&jqe(),t.fieldTitle&&rYe()}}function _Je(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):le(t)&&(t={type:t}),i&&o&&VXe(t.type)){if(i==="step"&&o==="step")Z(OU()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";Z(OU(N_(s)));const a=s==="width"?"height":"width";t.type=WXe(a)}}return{...X(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...uV(n,!1),...uV(e,!0)}}function EJe(e,t,n={},r){const i=e.config?KYe(e.config):void 0,o=[].concat(e.assembleSelectionData([]),MZe(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...xae(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const $Je=nHe.version,AJe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:_g,accessPathWithDatum:QO,compile:CJe,contains:ze,deepEqual:ji,deleteNestedProperty:ek,duplicate:Me,entries:yc,every:YO,fieldIntersection:KO,flatAccessWithDatum:Poe,getFirstDefined:ln,hasIntersection:XO,hasProperty:K,hash:Be,internalField:Ooe,isBoolean:F1,isEmpty:vt,isEqual:iHe,isInternalField:Noe,isNullOrFalse:q4,isNumeric:M_,keys:X,logicalExpr:Ty,mergeDeep:Moe,never:Toe,normalize:Rae,normalizeAngle:P1,omit:mi,pick:kg,prefixGenerator:G4,removePathFromField:fm,replaceAll:wd,replacePathInField:Lo,resetIdCounter:sHe,setEqual:Foe,some:Cg,stringify:bt,titleCase:Wv,unique:la,uniqueId:Doe,vals:tr,varName:Lt,version:$Je},Symbol.toStringTag,{value:"Module"}));function Xle(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var TJe="vega-themes",MJe="2.15.0",FJe="Themes for stylized Vega and Vega-Lite visualizations.",PJe=["vega","vega-lite","themes","style"],RJe="BSD-3-Clause",DJe={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},OJe=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],NJe="build/vega-themes.js",g9="build/vega-themes.module.js",IJe="build/vega-themes.min.js",LJe="build/vega-themes.min.js",zJe="build/vega-themes.module.d.ts",jJe={type:"git",url:"https://github.com/vega/vega-themes.git"},BJe=["src","build"],UJe={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},VJe={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},WJe={vega:"*","vega-lite":"*"},HJe={},qJe={name:TJe,version:MJe,description:FJe,keywords:PJe,license:RJe,author:DJe,contributors:OJe,main:NJe,module:g9,unpkg:IJe,jsdelivr:LJe,types:zJe,repository:jJe,files:BJe,scripts:UJe,devDependencies:VJe,peerDependencies:WJe,dependencies:HJe};const Ch="#fff",BV="#888",GJe={background:"#333",view:{stroke:BV},title:{color:Ch,subtitleColor:Ch},style:{"guide-label":{fill:Ch},"guide-title":{fill:Ch}},axis:{domainColor:Ch,gridColor:BV,tickColor:Ch}},Kc="#4572a7",YJe={background:"#fff",arc:{fill:Kc},area:{fill:Kc},line:{stroke:Kc,strokeWidth:2},path:{stroke:Kc},rect:{fill:Kc},shape:{stroke:Kc},symbol:{fill:Kc,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Qc="#30a2da",h5="#cbcbcb",XJe="#999",KJe="#333",UV="#f0f0f0",VV="#333",QJe={arc:{fill:Qc},area:{fill:Qc},axis:{domainColor:h5,grid:!0,gridColor:h5,gridWidth:1,labelColor:XJe,labelFontSize:10,titleColor:KJe,tickColor:h5,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:UV,group:{fill:UV},legend:{labelColor:VV,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:VV,titleFontSize:14,titlePadding:10},line:{stroke:Qc,strokeWidth:2},path:{stroke:Qc,strokeWidth:.5},rect:{fill:Qc},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Qc},bar:{binSpacing:2,fill:Qc,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Zc="#000",ZJe={group:{fill:"#e5e5e5"},arc:{fill:Zc},area:{fill:Zc},line:{stroke:Zc},path:{stroke:Zc},rect:{fill:Zc},shape:{stroke:Zc},symbol:{fill:Zc,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},JJe=22,eet="normal",WV="Benton Gothic, sans-serif",HV=11.5,tet="normal",Jc="#82c6df",p5="Benton Gothic Bold, sans-serif",qV="normal",GV=13,s0={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},net={background:"#ffffff",title:{anchor:"start",color:"#000000",font:p5,fontSize:JJe,fontWeight:eet},arc:{fill:Jc},area:{fill:Jc},line:{stroke:Jc,strokeWidth:2},path:{stroke:Jc},rect:{fill:Jc},shape:{stroke:Jc},symbol:{fill:Jc,size:30},axis:{labelFont:WV,labelFontSize:HV,labelFontWeight:tet,titleFont:p5,titleFontSize:GV,titleFontWeight:qV},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:WV,labelFontSize:HV,symbolType:"square",titleFont:p5,titleFontSize:GV,titleFontWeight:qV},range:{category:s0["category-6"],diverging:s0["fireandice-6"],heatmap:s0["fire-7"],ordinal:s0["fire-7"],ramp:s0["fire-7"]}},ef="#ab5787",Tx="#979797",ret={background:"#f9f9f9",arc:{fill:ef},area:{fill:ef},line:{stroke:ef},path:{stroke:ef},rect:{fill:ef},shape:{stroke:ef},symbol:{fill:ef,size:30},axis:{domainColor:Tx,domainWidth:.5,gridWidth:.2,labelColor:Tx,tickColor:Tx,tickWidth:.2,titleColor:Tx},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},tf="#3e5c69",iet={background:"#fff",arc:{fill:tf},area:{fill:tf},line:{stroke:tf},path:{stroke:tf},rect:{fill:tf},shape:{stroke:tf},symbol:{fill:tf},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},uo="#1696d2",YV="#000000",oet="#FFFFFF",Mx="Lato",g5="Lato",set="Lato",aet="#DEDDDD",uet=18,a0={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},cet={background:oet,title:{anchor:"start",fontSize:uet,font:Mx},axisX:{domain:!0,domainColor:YV,domainWidth:1,grid:!1,labelFontSize:12,labelFont:g5,labelAngle:0,tickColor:YV,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Mx},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:aet,gridWidth:1,labelFontSize:12,labelFont:g5,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Mx,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:g5,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Mx,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:a0["six-groups-cat-1"],diverging:a0["diverging-colors"],heatmap:a0["diverging-colors"],ordinal:a0["six-groups-seq"],ramp:a0["shades-blue"]},area:{fill:uo},rect:{fill:uo},line:{color:uo,stroke:uo,strokeWidth:5},trail:{color:uo,stroke:uo,strokeWidth:0,size:1},path:{stroke:uo,strokeWidth:.5},point:{filled:!0},text:{font:set,color:uo,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:uo,stroke:null}},arc:{fill:uo},shape:{stroke:uo},symbol:{fill:uo,size:30}},nf="#3366CC",XV="#ccc",Fx="Arial, sans-serif",fet={arc:{fill:nf},area:{fill:nf},path:{stroke:nf},rect:{fill:nf},shape:{stroke:nf},symbol:{stroke:nf},circle:{fill:nf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Fx,fontSize:12},"guide-title":{font:Fx,fontSize:12},"group-title":{font:Fx,fontSize:12}},title:{font:Fx,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:XV,tickColor:XV,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},m9=e=>e*(1/3+1),KV=m9(9),QV=m9(10),ZV=m9(12),l0="Segoe UI",JV="wf_standard-font, helvetica, arial, sans-serif",eW="#252423",u0="#605E5C",tW="transparent",det="#C8C6C4",Yo="#118DFF",het="#12239E",pet="#E66C37",get="#6B007B",met="#E044A7",yet="#744EC2",vet="#D9B300",bet="#D64550",Kle=Yo,Qle="#DEEFFF",nW=[Qle,Kle],xet=[Qle,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Kle],wet={view:{stroke:tW},background:tW,font:l0,header:{titleFont:JV,titleFontSize:ZV,titleColor:eW,labelFont:l0,labelFontSize:QV,labelColor:u0},axis:{ticks:!1,grid:!1,domain:!1,labelColor:u0,labelFontSize:KV,titleFont:JV,titleColor:eW,titleFontSize:ZV,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:det,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Yo},line:{stroke:Yo,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:l0,fontSize:KV,fill:u0},arc:{fill:Yo},area:{fill:Yo,line:!0,opacity:.6},path:{stroke:Yo},rect:{fill:Yo},point:{fill:Yo,filled:!0,size:75},shape:{stroke:Yo},symbol:{fill:Yo,strokeWidth:1.5,size:50},legend:{titleFont:l0,titleFontWeight:"bold",titleColor:u0,labelFont:l0,labelFontSize:QV,labelColor:u0,symbolType:"circle",symbolSize:75},range:{category:[Yo,het,pet,get,met,yet,vet,bet],diverging:nW,heatmap:nW,ordinal:xet}},m5='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',ket='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',y5=400,Px={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Cet=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],_et=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function bE({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=Px.gridBg[e],i=Px.textPrimary[e],o=Px.textSecondary[e],s=n==="dark"?Cet:_et,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:m5,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:ket,labelFontWeight:y5,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Px.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:m5,fill:o,fontWeight:y5},"guide-title":{font:m5,fill:o,fontWeight:y5}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Eet=bE({theme:"white",background:"#ffffff"}),$et=bE({theme:"g10",background:"#f4f4f4"}),Aet=bE({theme:"g90",background:"#262626"}),Tet=bE({theme:"g100",background:"#161616"}),Met=qJe.version,Fet=Object.freeze(Object.defineProperty({__proto__:null,carbong10:$et,carbong100:Tet,carbong90:Aet,carbonwhite:Eet,dark:GJe,excel:YJe,fivethirtyeight:QJe,ggplot2:ZJe,googlecharts:fet,latimes:net,powerbi:wet,quartz:ret,urbaninstitute:cet,version:Met,vox:iet},Symbol.toStringTag,{value:"Module"}));function Pet(e,t,n,r){if(G(e))return`[${e.map(i=>t(le(i)?i:rW(i,n))).join(", ")}]`;if(se(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(se(c)&&(c=rW(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Ret(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function rW(e,t){return JSON.stringify(e,Ret(t))}var Det=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Zle="vg-tooltip-element",Oet={offsetX:10,offsetY:10,id:Zle,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Net,maxDepth:2,formatTooltip:Pet,baseURL:""};function Net(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Iet(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Det.toString().replace(Zle,e)}function Let(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class zet{constructor(t){this.options={...Oet,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Iet(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=Let(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var v5={};function jet(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class Bet{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var Uet=Bet;const Vet=Object.freeze({loose:!0}),Wet=Object.freeze({}),Het=e=>e?typeof e!="object"?Vet:e:Wet;var y9=Het,vM={exports:{}};const qet="2.0.0",Jle=256,Get=Number.MAX_SAFE_INTEGER||9007199254740991,Yet=16,Xet=Jle-6,Ket=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var v9={MAX_LENGTH:Jle,MAX_SAFE_COMPONENT_LENGTH:Yet,MAX_SAFE_BUILD_LENGTH:Xet,MAX_SAFE_INTEGER:Get,RELEASE_TYPES:Ket,SEMVER_SPEC_VERSION:qet,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Qet=typeof process=="object"&&v5&&v5.NODE_DEBUG&&/\bsemver\b/i.test(v5.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var xE=Qet;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=v9,o=xE;t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=g=>{for(const[y,m]of d)g=g.split(`${y}*`).join(`${y}{0,${m}}`).split(`${y}+`).join(`${y}{1,${m}}`);return g},p=(g,y,m)=>{const v=h(y),b=c++;o(g,b,y),u[g]=b,l[b]=y,s[b]=new RegExp(y,m?"g":void 0),a[b]=new RegExp(v,m?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(vM,vM.exports);var b9=vM.exports;const iW=/^[0-9]+$/,eue=(e,t)=>{const n=iW.test(e),r=iW.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Zet=(e,t)=>eue(t,e);var Jet={compareIdentifiers:eue,rcompareIdentifiers:Zet};const Rx=xE,{MAX_LENGTH:oW,MAX_SAFE_INTEGER:Dx}=v9,{safeRe:sW,t:aW}=b9,ett=y9,{compareIdentifiers:_h}=Jet;let ttt=class Ws{constructor(t,n){if(n=ett(n),t instanceof Ws){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>oW)throw new TypeError(`version is longer than ${oW} characters`);Rx("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?sW[aW.LOOSE]:sW[aW.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Dx||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Dx||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Dx||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<Dx)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Rx("SemVer.compare",this.version,this.options,t),!(t instanceof Ws)){if(typeof t=="string"&&t===this.version)return 0;t=new Ws(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ws||(t=new Ws(t,this.options)),_h(this.major,t.major)||_h(this.minor,t.minor)||_h(this.patch,t.patch)}comparePre(t){if(t instanceof Ws||(t=new Ws(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(Rx("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return _h(r,i)}while(++n)}compareBuild(t){t instanceof Ws||(t=new Ws(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(Rx("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return _h(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),_h(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var x9=ttt;const lW=x9,ntt=(e,t,n)=>new lW(e,n).compare(new lW(t,n));var bm=ntt;const rtt=bm,itt=(e,t,n)=>rtt(e,t,n)===0;var ott=itt;const stt=bm,att=(e,t,n)=>stt(e,t,n)!==0;var ltt=att;const utt=bm,ctt=(e,t,n)=>utt(e,t,n)>0;var ftt=ctt;const dtt=bm,htt=(e,t,n)=>dtt(e,t,n)>=0;var ptt=htt;const gtt=bm,mtt=(e,t,n)=>gtt(e,t,n)<0;var ytt=mtt;const vtt=bm,btt=(e,t,n)=>vtt(e,t,n)<=0;var xtt=btt;const wtt=ott,Stt=ltt,ktt=ftt,Ctt=ptt,_tt=ytt,Ett=xtt,$tt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return wtt(e,n,r);case"!=":return Stt(e,n,r);case">":return ktt(e,n,r);case">=":return Ctt(e,n,r);case"<":return _tt(e,n,r);case"<=":return Ett(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Att=$tt,b5,uW;function Ttt(){if(uW)return b5;uW=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}b5=t;const n=y9,{safeRe:r,t:i}=b9,o=Att,s=xE,a=x9,l=tue();return b5}var x5,cW;function tue(){if(cW)return x5;cW=1;class e{constructor(P,R){if(R=r(R),P instanceof e)return P.loose===!!R.loose&&P.includePrerelease===!!R.includePrerelease?P:new e(P.raw,R);if(P instanceof i)return this.raw=P.value,this.set=[[P]],this.format(),this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=P.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(I=>!p(I[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const I of this.set)if(I.length===1&&g(I[0])){this.set=[I];break}}}this.format()}format(){return this.range=this.set.map(P=>P.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(P){const D=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+P,I=n.get(D);if(I)return I;const N=this.options.loose,B=N?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];P=P.replace(B,A(this.options.includePrerelease)),o("hyphen replace",P),P=P.replace(a[l.COMPARATORTRIM],u),o("comparator trim",P),P=P.replace(a[l.TILDETRIM],c),o("tilde trim",P),P=P.replace(a[l.CARETTRIM],f),o("caret trim",P);let Y=P.split(" ").map(we=>m(we,this.options)).join(" ").split(/\s+/).map(we=>$(we,this.options));N&&(Y=Y.filter(we=>(o("loose invalid filter",we,this.options),!!we.match(a[l.COMPARATORLOOSE])))),o("range list",Y);const W=new Map,oe=Y.map(we=>new i(we,this.options));for(const we of oe){if(p(we))return[we];W.set(we.value,we)}W.size>1&&W.has("")&&W.delete("");const re=[...W.values()];return n.set(D,re),re}intersects(P,R){if(!(P instanceof e))throw new TypeError("a Range is required");return this.set.some(D=>y(D,R)&&P.set.some(I=>y(I,R)&&D.every(N=>I.every(B=>N.intersects(B,R)))))}test(P){if(!P)return!1;if(typeof P=="string")try{P=new s(P,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(O(this.set[R],P,this.options))return!0;return!1}}x5=e;const t=Uet,n=new t,r=y9,i=Ttt(),o=xE,s=x9,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:f}=b9,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=v9,p=M=>M.value==="<0.0.0-0",g=M=>M.value==="",y=(M,P)=>{let R=!0;const D=M.slice();let I=D.pop();for(;R&&D.length;)R=D.every(N=>I.intersects(N,P)),I=D.pop();return R},m=(M,P)=>(o("comp",M,P),M=w(M,P),o("caret",M),M=b(M,P),o("tildes",M),M=S(M,P),o("xrange",M),M=_(M,P),o("stars",M),M),v=M=>!M||M.toLowerCase()==="x"||M==="*",b=(M,P)=>M.trim().split(/\s+/).map(R=>x(R,P)).join(" "),x=(M,P)=>{const R=P.loose?a[l.TILDELOOSE]:a[l.TILDE];return M.replace(R,(D,I,N,B,Y)=>{o("tilde",M,D,I,N,B,Y);let W;return v(I)?W="":v(N)?W=`>=${I}.0.0 <${+I+1}.0.0-0`:v(B)?W=`>=${I}.${N}.0 <${I}.${+N+1}.0-0`:Y?(o("replaceTilde pr",Y),W=`>=${I}.${N}.${B}-${Y} <${I}.${+N+1}.0-0`):W=`>=${I}.${N}.${B} <${I}.${+N+1}.0-0`,o("tilde return",W),W})},w=(M,P)=>M.trim().split(/\s+/).map(R=>k(R,P)).join(" "),k=(M,P)=>{o("caret",M,P);const R=P.loose?a[l.CARETLOOSE]:a[l.CARET],D=P.includePrerelease?"-0":"";return M.replace(R,(I,N,B,Y,W)=>{o("caret",M,I,N,B,Y,W);let oe;return v(N)?oe="":v(B)?oe=`>=${N}.0.0${D} <${+N+1}.0.0-0`:v(Y)?N==="0"?oe=`>=${N}.${B}.0${D} <${N}.${+B+1}.0-0`:oe=`>=${N}.${B}.0${D} <${+N+1}.0.0-0`:W?(o("replaceCaret pr",W),N==="0"?B==="0"?oe=`>=${N}.${B}.${Y}-${W} <${N}.${B}.${+Y+1}-0`:oe=`>=${N}.${B}.${Y}-${W} <${N}.${+B+1}.0-0`:oe=`>=${N}.${B}.${Y}-${W} <${+N+1}.0.0-0`):(o("no pr"),N==="0"?B==="0"?oe=`>=${N}.${B}.${Y}${D} <${N}.${B}.${+Y+1}-0`:oe=`>=${N}.${B}.${Y}${D} <${N}.${+B+1}.0-0`:oe=`>=${N}.${B}.${Y} <${+N+1}.0.0-0`),o("caret return",oe),oe})},S=(M,P)=>(o("replaceXRanges",M,P),M.split(/\s+/).map(R=>C(R,P)).join(" ")),C=(M,P)=>{M=M.trim();const R=P.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return M.replace(R,(D,I,N,B,Y,W)=>{o("xRange",M,D,I,N,B,Y,W);const oe=v(N),re=oe||v(B),we=re||v(Y),De=we;return I==="="&&De&&(I=""),W=P.includePrerelease?"-0":"",oe?I===">"||I==="<"?D="<0.0.0-0":D="*":I&&De?(re&&(B=0),Y=0,I===">"?(I=">=",re?(N=+N+1,B=0,Y=0):(B=+B+1,Y=0)):I==="<="&&(I="<",re?N=+N+1:B=+B+1),I==="<"&&(W="-0"),D=`${I+N}.${B}.${Y}${W}`):re?D=`>=${N}.0.0${W} <${+N+1}.0.0-0`:we&&(D=`>=${N}.${B}.0${W} <${N}.${+B+1}.0-0`),o("xRange return",D),D})},_=(M,P)=>(o("replaceStars",M,P),M.trim().replace(a[l.STAR],"")),$=(M,P)=>(o("replaceGTE0",M,P),M.trim().replace(a[P.includePrerelease?l.GTE0PRE:l.GTE0],"")),A=M=>(P,R,D,I,N,B,Y,W,oe,re,we,De)=>(v(D)?R="":v(I)?R=`>=${D}.0.0${M?"-0":""}`:v(N)?R=`>=${D}.${I}.0${M?"-0":""}`:B?R=`>=${R}`:R=`>=${R}${M?"-0":""}`,v(oe)?W="":v(re)?W=`<${+oe+1}.0.0-0`:v(we)?W=`<${oe}.${+re+1}.0-0`:De?W=`<=${oe}.${re}.${we}-${De}`:M?W=`<${oe}.${re}.${+we+1}-0`:W=`<=${W}`,`${R} ${W}`.trim()),O=(M,P,R)=>{for(let D=0;D<M.length;D++)if(!M[D].test(P))return!1;if(P.prerelease.length&&!R.includePrerelease){for(let D=0;D<M.length;D++)if(o(M[D].semver),M[D].semver!==i.ANY&&M[D].semver.prerelease.length>0){const I=M[D].semver;if(I.major===P.major&&I.minor===P.minor&&I.patch===P.patch)return!0}return!1}return!0};return x5}const Mtt=tue(),Ftt=(e,t,n)=>{try{t=new Mtt(t,n)}catch{return!1}return t.test(e)};var Ptt=Ftt,nue=jet(Ptt);function Rtt(e,t,n){const r=e.open(t),i=1e4,o=250,{origin:s}=new URL(t);let a=~~(i/o);function l(c){c.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,s),setTimeout(u,o),a-=1)}setTimeout(u,o)}var Dtt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function rue(e,...t){for(const n of t)Ott(e,n);return e}function Ott(e,t){for(const n of Object.keys(t))Qg(e,n,t[n],!0)}const Qo=SWe;let I1=AJe;const Ox=typeof window<"u"?window:void 0;var JW;I1===void 0&&((JW=Ox==null?void 0:Ox.vl)!=null&&JW.compile)&&(I1=Ox.vl);const Ntt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Itt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Y0={vega:"Vega","vega-lite":"Vega-Lite"},pk={vega:Qo.version,"vega-lite":I1?I1.version:"not available"},Ltt={vega:e=>e,"vega-lite":(e,t)=>I1.compile(e,{config:t}).spec},ztt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,jtt="chart-wrapper";function Btt(e){return typeof e=="function"}function fW(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${Y0[r]} JSON Source`}function Utt(e,t){if(e.$schema){const n=Xle(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Y0[n.library]}, but mode argument sets ${Y0[t]??t}.`);const r=n.library;return nue(pk[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Y0[r]} ${n.version}, but the current version of ${Y0[r]} is v${pk[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function iue(e){return!!(e&&"load"in e)}function dW(e){return iue(e)?e:Qo.loader(e)}function Vtt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return le(t.defaultStyle)&&(t.defaultStyle=!1),t}async function oue(e,t,n={}){let r,i;le(t)?(i=dW(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=Vtt(r),s=o.loader;(!i||s)&&(i=dW(n.loader??s));const a=await hW(o,i),l=await hW(n,i),u={...rue(l,a),config:Kg(l.config??{},a.config??{})};return await Htt(e,r,u,i)}async function hW(e,t){const n=le(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=le(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Wtt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Htt(e,t,n={},r){const i=n.theme?Kg(Fet[n.theme],n.config??{}):n.config,o=$c(n.actions)?n.actions:rue({},Ntt,n.actions??{}),s={...Itt,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??Qo.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const w="vega-embed-style",{root:k,rootContainer:S}=Wtt(c);if(!k.getElementById(w)){const C=document.createElement("style");C.id=w,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Dtt.toString():n.defaultStyle,S.appendChild(C)}}const f=Utt(t,n.mode);let d=Ltt[f](t,i);if(f==="vega-lite"&&d.$schema){const w=Xle(d.$schema);nue(pk.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${pk.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const w=document.createElement("div");w.classList.add(jtt),c.appendChild(w),h=w}const p=n.patch;if(p&&(d=p instanceof Function?p(d):bC(d,p,!0,!1).newDocument),n.formatLocale&&Qo.formatLocale(n.formatLocale),n.timeFormatLocale&&Qo.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const k=n.expressionFunctions[w];"fn"in k?Qo.expressionFunction(w,k.fn,k.visitor):k instanceof Function&&Qo.expressionFunction(w,k)}const{ast:g}=n,y=Qo.parse(d,f==="vega-lite"?{}:i,{ast:g}),m=new(n.viewClass||Qo.View)(y,{loader:r,logLevel:l,renderer:a,...g?{expr:Qo.expressionInterpreter??n.expr??PWe}:{}});if(m.addSignalListener("autosize",(w,k)=>{const{type:S}=k;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:w,tooltip:k}=n,S=w&&!iue(w)?w==null?void 0:w.baseURL:void 0,C=Btt(k)?k:new zet({baseURL:S,...k===!0?{}:k}).call;m.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:w,updateSet:k}=typeof v=="boolean"?{}:v;m.hover(w,k)}n&&(n.width!=null&&m.width(n.width),n.height!=null&&m.height(n.height),n.padding!=null&&m.padding(n.padding)),await m.initialize(h,n.bind).runAsync();let b;if(o!==!1){let w=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=s.CLICK_TO_VIEW_ACTIONS,c.append(S),w=S;const C=document.createElement("summary");C.innerHTML=ztt,S.append(C),b=_=>{S.contains(_.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const k=document.createElement("div");if(w.append(k),k.classList.add("vega-actions"),o===!0||o.export!==!1){for(const S of["svg","png"])if(o===!0||o.export===!0||o.export[S]){const C=s[`${S.toUpperCase()}_ACTION`],_=document.createElement("a"),$=se(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;_.text=C,_.href="#",_.target="_blank",_.download=`${u}.${S}`,_.addEventListener("mousedown",async function(A){A.preventDefault();const O=await m.toImageURL(S,$);this.href=O}),k.append(_)}}if(o===!0||o.source!==!1){const S=document.createElement("a");S.text=s.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){fW(Z$(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),k.append(S)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const S=document.createElement("a");S.text=s.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){fW(Z$(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),k.append(S)}if(o===!0||o.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=s.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(_){Rtt(window,S,{config:i,mode:p?"vega":f,renderer:a,spec:Z$(p?d:t)}),_.preventDefault()}),k.append(C)}}function x(){b&&document.removeEventListener("click",b),m.finalize()}return{view:m,spec:t,vgSpec:d,finalize:x,embedOptions:n}}function sue(e){return`thumbnail@${JSON.stringify(e)}`}async function qtt(e,t){const n=Gtt(e);if(n)return n;const r=await Ytt(e,t);return r&&sessionStorage.setItem(sue(e),r),r}function Gtt(e){return sessionStorage.getItem(sue(e))}async function Ytt(e,t){if(!("mark"in e)||!e||!t)return;const n={disable:!0,title:"",grid:!1,ticks:!1,labels:!1},r={...e,width:100,height:100,config:{...e.config,mark:{strokeWidth:e.mark==="line"?4:0},legend:{disable:!0},axis:{disable:!0},style:{view:{stroke:"transparent"},cell:{stroke:"transparent"}}},data:{values:t},background:"transparent",title:void 0,encoding:Object.fromEntries(Object.entries(e.encoding??{}).map(([o,s])=>[o,{...s,legend:null,axis:n}]))};return(await(await oue(document.createElement("div"),r,{actions:!1}).then(o=>o.view)).toCanvas()).toDataURL()}function Xtt(e){try{return new URL(e),!0}catch{return!1}}function Ktt(e){try{const n=new URL(e).pathname.split("/"),r=n[n.length-1];return decodeURIComponent(r)}catch{throw new Error("Invalid URL")}}const Qtt={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},pW=e=>{let t;const n=new Set,r=(c,f)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(p=>p(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(Qtt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},Ztt=e=>e?pW(e):pW;var aue={exports:{}},lue={},uue={exports:{}},cue={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg=T;function Jtt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ent=typeof Object.is=="function"?Object.is:Jtt,tnt=zg.useState,nnt=zg.useEffect,rnt=zg.useLayoutEffect,int=zg.useDebugValue;function ont(e,t){var n=t(),r=tnt({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return rnt(function(){i.value=n,i.getSnapshot=t,w5(i)&&o({inst:i})},[e,n,t]),nnt(function(){return w5(i)&&o({inst:i}),e(function(){w5(i)&&o({inst:i})})},[e]),int(n),n}function w5(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ent(e,n)}catch{return!0}}function snt(e,t){return t()}var ant=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?snt:ont;cue.useSyncExternalStore=zg.useSyncExternalStore!==void 0?zg.useSyncExternalStore:ant;uue.exports=cue;var lnt=uue.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE=T,unt=lnt;function cnt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fnt=typeof Object.is=="function"?Object.is:cnt,dnt=unt.useSyncExternalStore,hnt=wE.useRef,pnt=wE.useEffect,gnt=wE.useMemo,mnt=wE.useDebugValue;lue.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=hnt(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=gnt(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&s.hasValue){var p=s.value;if(i(p,h))return f=p}return f=h}if(p=f,fnt(c,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(c=h,f=g)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,i]);var a=dnt(e,o[0],o[1]);return pnt(function(){s.hasValue=!0,s.value=a},[a]),mnt(a),a};aue.exports=lue;var ynt=aue.exports;const vnt=zl(ynt),fue={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:bnt}=Bi,{useSyncExternalStoreWithSelector:xnt}=vnt;let gW=!1;const wnt=e=>e;function Snt(e,t=wnt,n){(fue?"production":void 0)!=="production"&&n&&!gW&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),gW=!0);const r=xnt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return bnt(r),r}const mW=e=>{(fue?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Ztt(e):e,n=(r,i)=>Snt(t,r,i);return Object.assign(n,t),n},SE=e=>e?mW(e):mW,j2={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},bM=new Map,Nx=e=>{const t=bM.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},knt=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=bM.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return bM.set(n.name,i),{type:"tracked",store:e,...i}},Cnt=(e,t={})=>(n,r,i)=>{const{enabled:o,anonymousActionType:s,store:a,...l}=t;let u;try{u=(o??(j2?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(j2?"production":void 0)!=="production"&&o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,i);const{connection:c,...f}=knt(a,u,l);let d=!0;i.setState=(g,y,m)=>{const v=n(g,y);if(!d)return v;const b=m===void 0?{type:s||"anonymous"}:typeof m=="string"?{type:m}:m;return a===void 0?(c==null||c.send(b,r()),v):(c==null||c.send({...b,type:`${a}/${b.type}`},{...Nx(l.name),[a]:i.getState()}),v)};const h=(...g)=>{const y=d;d=!1,n(...g),d=y},p=e(i.setState,r,i);if(f.type==="untracked"?c==null||c.init(p):(f.stores[f.store]=i,c==null||c.init(Object.fromEntries(Object.entries(f.stores).map(([g,y])=>[g,g===f.store?p:y.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let g=!1;const y=i.dispatch;i.dispatch=(...m)=>{(j2?"production":void 0)!=="production"&&m[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),y(...m)}}return c.subscribe(g=>{var y;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return S5(g.payload,m=>{if(m.type==="__setState"){if(a===void 0){h(m.state);return}Object.keys(m.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const v=m.state[a];if(v==null)return;JSON.stringify(i.getState())!==JSON.stringify(v)&&h(v);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(m)});case"DISPATCH":switch(g.payload.type){case"RESET":return h(p),a===void 0?c==null?void 0:c.init(i.getState()):c==null?void 0:c.init(Nx(l.name));case"COMMIT":if(a===void 0){c==null||c.init(i.getState());return}return c==null?void 0:c.init(Nx(l.name));case"ROLLBACK":return S5(g.state,m=>{if(a===void 0){h(m),c==null||c.init(i.getState());return}h(m[a]),c==null||c.init(Nx(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return S5(g.state,m=>{if(a===void 0){h(m);return}JSON.stringify(i.getState())!==JSON.stringify(m[a])&&h(m[a])});case"IMPORT_STATE":{const{nextLiftedState:m}=g.payload,v=(y=m.computedStates.slice(-1)[0])==null?void 0:y.state;if(!v)return;h(a===void 0?v:v[a]),c==null||c.send(null,m);return}case"PAUSE_RECORDING":return d=!d}return}}),p},w9=Cnt,S5=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function _nt(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var o;const s=l=>l===null?null:JSON.parse(l,void 0),a=(o=n.getItem(i))!=null?o:null;return a instanceof Promise?a.then(s):s(a)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>n.removeItem(i)}}const L1=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return L1(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return L1(r)(n)}}}},Ent=(e,t)=>(n,r,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:y=>y,version:0,merge:(y,m)=>({...m,...y}),...t},s=!1;const a=new Set,l=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...y)},r,i);const c=L1(o.serialize),f=()=>{const y=o.partialize({...r()});let m;const v=c({state:y,version:o.version}).then(b=>u.setItem(o.name,b)).catch(b=>{m=b});if(m)throw m;return v},d=i.setState;i.setState=(y,m)=>{d(y,m),f()};const h=e((...y)=>{n(...y),f()},r,i);let p;const g=()=>{var y;if(!u)return;s=!1,a.forEach(v=>v(r()));const m=((y=o.onRehydrateStorage)==null?void 0:y.call(o,r()))||void 0;return L1(u.getItem.bind(u))(o.name).then(v=>{if(v)return o.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return o.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var b;return p=o.merge(v,(b=r())!=null?b:h),n(p,!0),f()}).then(()=>{m==null||m(p,void 0),s=!0,l.forEach(v=>v(p))}).catch(v=>{m==null||m(void 0,v)})};return i.persist={setOptions:y=>{o={...o,...y},y.getStorage&&(u=y.getStorage())},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:y=>(a.add(y),()=>{a.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},g(),p||h},$nt=(e,t)=>(n,r,i)=>{let o={storage:_nt(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...t},s=!1;const a=new Set,l=new Set;let u=o.storage;if(!u)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...g)},r,i);const c=()=>{const g=o.partialize({...r()});return u.setItem(o.name,{state:g,version:o.version})},f=i.setState;i.setState=(g,y)=>{f(g,y),c()};const d=e((...g)=>{n(...g),c()},r,i);i.getInitialState=()=>d;let h;const p=()=>{var g,y;if(!u)return;s=!1,a.forEach(v=>{var b;return v((b=r())!=null?b:d)});const m=((y=o.onRehydrateStorage)==null?void 0:y.call(o,(g=r())!=null?g:d))||void 0;return L1(u.getItem.bind(u))(o.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return[!0,o.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[x,w]=v;if(h=o.merge(w,(b=r())!=null?b:d),n(h,!0),x)return c()}).then(()=>{m==null||m(h,void 0),h=r(),s=!0,l.forEach(v=>v(h))}).catch(v=>{m==null||m(void 0,v)})};return i.persist={setOptions:g=>{o={...o,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},o.skipHydration||p(),h||d},Ant=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((j2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Ent(e,t)):$nt(e,t),Tnt=Ant,Mnt={json:S$e,csv:ZP},El=SE(w9(e=>({filename:null,fileBuffer:null,data:void 0,schema:null,loading:!1,loadData:async t=>{e({loading:!0,filename:null,fileBuffer:null,data:void 0,schema:null});const n=t instanceof File?t.name:Ktt(t),r=n.split(".").pop(),o=await(await n3(t)).arrayBuffer(),s=new Uint8Array(o),a=await XP(o,Mnt[r],{worker:!0,fetch:{mode:"no-cors"}});e({filename:n,fileBuffer:s,data:a,schema:a.schema,loading:!1})}}))),xM=SE()(e=>({drawerExpanded:!0,setDrawerExpanded:t=>e({drawerExpanded:t})})),kt={black:"#000000",white:"#FFFFFF","blackAlpha.50":"rgba(0, 0, 0, 0.04)","blackAlpha.100":"rgba(0, 0, 0, 0.06)","blackAlpha.200":"rgba(0, 0, 0, 0.08)","blackAlpha.300":"rgba(0, 0, 0, 0.16)","blackAlpha.400":"rgba(0, 0, 0, 0.24)","blackAlpha.500":"rgba(0, 0, 0, 0.36)","blackAlpha.600":"rgba(0, 0, 0, 0.48)","blackAlpha.700":"rgba(0, 0, 0, 0.64)","blackAlpha.800":"rgba(0, 0, 0, 0.80)","blackAlpha.900":"rgba(0, 0, 0, 0.92)","whiteAlpha.50":"rgba(255, 255, 255, 0.04)","whiteAlpha.100":"rgba(255, 255, 255, 0.06)","whiteAlpha.200":"rgba(255, 255, 255, 0.08)","whiteAlpha.300":"rgba(255, 255, 255, 0.16)","whiteAlpha.400":"rgba(255, 255, 255, 0.24)","whiteAlpha.500":"rgba(255, 255, 255, 0.36)","whiteAlpha.600":"rgba(255, 255, 255, 0.48)","whiteAlpha.700":"rgba(255, 255, 255, 0.64)","whiteAlpha.800":"rgba(255, 255, 255, 0.80)","whiteAlpha.900":"rgba(255, 255, 255, 0.92)","gray.50":"#F7FAFC","gray.100":"#EDF2F7","gray.200":"#E2E8F0","gray.300":"#CBD5E0","gray.400":"#A0AEC0","gray.500":"#718096","gray.600":"#4A5568","gray.700":"#2D3748","gray.800":"#1A202C","gray.900":"#171923","red.50":"#FFF5F5","red.100":"#FED7D7","red.200":"#FEB2B2","red.300":"#FC8181","red.400":"#F56565","red.500":"#E53E3E","red.600":"#C53030","red.700":"#9B2C2C","red.800":"#822727","red.900":"#63171B","orange.50":"#FFFAF0","orange.100":"#FEEBC8","orange.200":"#FBD38D","orange.300":"#F6AD55","orange.400":"#ED8936","orange.500":"#DD6B20","orange.600":"#C05621","orange.700":"#9C4221","orange.800":"#7B341E","orange.900":"#652B19","yellow.50":"#FFFFF0","yellow.100":"#FEFCBF","yellow.200":"#FAF089","yellow.300":"#F6E05E","yellow.400":"#ECC94B","yellow.500":"#D69E2E","yellow.600":"#B7791F","yellow.700":"#975A16","yellow.800":"#744210","yellow.900":"#5F370E","green.50":"#F0FFF4","green.100":"#C6F6D5","green.200":"#9AE6B4","green.300":"#68D391","green.400":"#48BB78","green.500":"#38A169","green.600":"#2F855A","green.700":"#276749","green.800":"#22543D","green.900":"#1C4532","teal.50":"#E6FFFA","teal.100":"#B2F5EA","teal.200":"#81E6D9","teal.300":"#4FD1C5","teal.400":"#38B2AC","teal.500":"#319795","teal.600":"#2C7A7B","teal.700":"#285E61","teal.800":"#234E52","teal.900":"#1D4044","blue.50":"#EBF8FF","blue.100":"#BEE3F8","blue.200":"#90CDF4","blue.300":"#63B3ED","blue.400":"#4299E1","blue.500":"#3182CE","blue.600":"#2B6CB0","blue.700":"#2C5282","blue.800":"#2A4365","blue.900":"#1A365D","cyan.50":"#EDFDFD","cyan.100":"#C4F1F9","cyan.200":"#9DECF9","cyan.300":"#76E4F7","cyan.400":"#0BC5EA","cyan.500":"#00B5D8","cyan.600":"#00A3C4","cyan.700":"#0987A0","cyan.800":"#086F83","cyan.900":"#065666","purple.50":"#FAF5FF","purple.100":"#E9D8FD","purple.200":"#D6BCFA","purple.300":"#B794F4","purple.400":"#9F7AEA","purple.500":"#805AD5","purple.600":"#6B46C1","purple.700":"#553C9A","purple.800":"#44337A","purple.900":"#322659","pink.50":"#FFF5F7","pink.100":"#FED7E2","pink.200":"#FBB6CE","pink.300":"#F687B3","pink.400":"#ED64A6","pink.500":"#D53F8C","pink.600":"#B83280","pink.700":"#97266D","pink.800":"#702459","pink.900":"#521B41"},yW=[{name:"Barley",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/barley.json"},{name:"Cars",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/cars.json"},{name:"Crimea",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/crimea.json"},{name:"Jobs",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/jobs.json"},{name:"Population",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/population.json"},{name:"Movies",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/movies.json"},{name:"Birdstrikes",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/birdstrikes.csv"},{name:"Burtin",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/burtin.json"}],vW=50,Fnt=50,k5=1,mr="orange",ju={50:kt[`${mr}.50`],100:kt[`${mr}.100`],200:kt[`${mr}.200`],300:kt[`${mr}.300`],400:kt[`${mr}.400`],500:kt[`${mr}.500`],600:kt[`${mr}.600`],700:kt[`${mr}.700`],800:kt[`${mr}.800`],900:kt[`${mr}.900`]},bW="table",C5=3;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const due=Symbol("Comlink.proxy"),Pnt=Symbol("Comlink.endpoint"),hue=Symbol("Comlink.releaseProxy"),_5=Symbol("Comlink.finalizer"),B2=Symbol("Comlink.thrown"),pue=e=>typeof e=="object"&&e!==null||typeof e=="function",Rnt={canHandle:e=>pue(e)&&e[due],serialize(e){const{port1:t,port2:n}=new MessageChannel;return mue(e,t),[n,[n]]},deserialize(e){return e.start(),vue(e)}},Dnt={canHandle:e=>pue(e)&&B2 in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},gue=new Map([["proxy",Rnt],["throw",Dnt]]);function Ont(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function mue(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(i){if(!i||!i.data)return;if(!Ont(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:o,type:s,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(wf);let u;try{const c=a.slice(0,-1).reduce((d,h)=>d[h],e),f=a.reduce((d,h)=>d[h],e);switch(s){case"GET":u=f;break;case"SET":c[a.slice(-1)[0]]=wf(i.data.value),u=!0;break;case"APPLY":u=f.apply(c,l);break;case"CONSTRUCT":{const d=new f(...l);u=Bnt(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;mue(e,h),u=jnt(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[B2]:0}}Promise.resolve(u).catch(c=>({value:c,[B2]:0})).then(c=>{const[f,d]=yk(c);t.postMessage(Object.assign(Object.assign({},f),{id:o}),d),s==="RELEASE"&&(t.removeEventListener("message",r),yue(t),_5 in e&&typeof e[_5]=="function"&&e[_5]())}).catch(c=>{const[f,d]=yk({value:new TypeError("Unserializable return value"),[B2]:0});t.postMessage(Object.assign(Object.assign({},f),{id:o}),d)})}),t.start&&t.start()}function Nnt(e){return e.constructor.name==="MessagePort"}function yue(e){Nnt(e)&&e.close()}function vue(e,t){return wM(e,[],t)}function Ix(e){if(e)throw new Error("Proxy has been released and is not useable")}function bue(e){return Th(e,{type:"RELEASE"}).then(()=>{yue(e)})}const gk=new WeakMap,mk="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(gk.get(e)||0)-1;gk.set(e,t),t===0&&bue(e)});function Int(e,t){const n=(gk.get(t)||0)+1;gk.set(t,n),mk&&mk.register(e,t,e)}function Lnt(e){mk&&mk.unregister(e)}function wM(e,t=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(o,s){if(Ix(r),s===hue)return()=>{Lnt(i),bue(e),r=!0};if(s==="then"){if(t.length===0)return{then:()=>i};const a=Th(e,{type:"GET",path:t.map(l=>l.toString())}).then(wf);return a.then.bind(a)}return wM(e,[...t,s])},set(o,s,a){Ix(r);const[l,u]=yk(a);return Th(e,{type:"SET",path:[...t,s].map(c=>c.toString()),value:l},u).then(wf)},apply(o,s,a){Ix(r);const l=t[t.length-1];if(l===Pnt)return Th(e,{type:"ENDPOINT"}).then(wf);if(l==="bind")return wM(e,t.slice(0,-1));const[u,c]=xW(a);return Th(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},c).then(wf)},construct(o,s){Ix(r);const[a,l]=xW(s);return Th(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:a},l).then(wf)}});return Int(i,e),i}function znt(e){return Array.prototype.concat.apply([],e)}function xW(e){const t=e.map(yk);return[t.map(n=>n[0]),znt(t.map(n=>n[1]))]}const xue=new WeakMap;function jnt(e,t){return xue.set(e,t),e}function Bnt(e){return Object.assign(e,{[due]:!0})}function yk(e){for(const[t,n]of gue)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},xue.get(e)||[]]}function wf(e){switch(e.type){case"HANDLER":return gue.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Th(e,t,n){return new Promise(r=>{const i=Unt();e.addEventListener("message",function o(s){!s.data||!s.data.id||s.data.id!==i||(e.removeEventListener("message",o),r(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)})}function Unt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function Vnt(e){return new Worker("/Swipytics/assets/pyodide-worker-BBSifKST.js",{type:"module",name:e==null?void 0:e.name})}let go=null,vr=null;const Wnt=async(e,t)=>{if(!go||!vr)throw new Error("pyodide isn't loaded yet");return await vr.runPython(e,t)},Hnt=async(e,t)=>{if(!go||!vr)throw new Error("pyodide isn't loaded yet");return vr.callPythonFunction(e,t)},qnt=async(e,t)=>{if(!go||!vr)throw new Error("pyodide isn't loaded yet");return vr.writeFile(e,t)},Gnt=async e=>{if(!go||!vr)throw new Error("pyodide isn't loaded yet");return vr.readFile(e)},Ynt=async e=>(go||(go=new Vnt({name:"pyodide-worker"}),vr=vue(go),await vr.initialize(e)),{runPython:Wnt,callPythonFunction:Hnt,writeFile:qnt,readFile:Gnt,terminate:()=>{go==null||go.terminate(),go=null,vr==null||vr[hue](),vr=null},initialize:async t=>{if(!go||!vr)throw new Error("pyodide isn't loaded yet");await vr.initialize(t)}});let Py;async function Xnt(e){const{packages:t}=e||{};return Py===void 0&&(Py=await Knt(t)),Py}const Knt=async e=>(Py=await Ynt(e),Py),ob=async()=>await Xnt({packages:["draco"]});var wue=Symbol.for("immer-nothing"),wW=Symbol.for("immer-draftable"),eo=Symbol.for("immer-state");function us(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var jg=Object.getPrototypeOf;function Bg(e){return!!e&&!!e[eo]}function Md(e){var t;return e?Sue(e)||Array.isArray(e)||!!e[wW]||!!((t=e.constructor)!=null&&t[wW])||CE(e)||_E(e):!1}var Qnt=Object.prototype.constructor.toString();function Sue(e){if(!e||typeof e!="object")return!1;const t=jg(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Qnt}function vk(e,t){kE(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function kE(e){const t=e[eo];return t?t.type_:Array.isArray(e)?1:CE(e)?2:_E(e)?3:0}function SM(e,t){return kE(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kue(e,t,n){const r=kE(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Znt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function CE(e){return e instanceof Map}function _E(e){return e instanceof Set}function hf(e){return e.copy_||e.base_}function kM(e,t){if(CE(e))return new Map(e);if(_E(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Sue(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[eo];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(jg(e),r)}else{const r=jg(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function S9(e,t=!1){return EE(e)||Bg(e)||!Md(e)||(kE(e)>1&&(e.set=e.add=e.clear=e.delete=Jnt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>S9(r,!0))),e}function Jnt(){us(2)}function EE(e){return Object.isFrozen(e)}var ert={};function Fd(e){const t=ert[e];return t||us(0,e),t}var z1;function Cue(){return z1}function trt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function SW(e,t){t&&(Fd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function CM(e){_M(e),e.drafts_.forEach(nrt),e.drafts_=null}function _M(e){e===z1&&(z1=e.parent_)}function kW(e){return z1=trt(z1,e)}function nrt(e){const t=e[eo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function CW(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[eo].modified_&&(CM(t),us(4)),Md(e)&&(e=bk(t,e),t.parent_||xk(t,e)),t.patches_&&Fd("Patches").generateReplacementPatches_(n[eo].base_,e,t.patches_,t.inversePatches_)):e=bk(t,n,[]),CM(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==wue?e:void 0}function bk(e,t,n){if(EE(t))return t;const r=t[eo];if(!r)return vk(t,(i,o)=>_W(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return xk(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),vk(o,(a,l)=>_W(e,r,i,a,l,n,s)),xk(e,i,!1),n&&e.patches_&&Fd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function _W(e,t,n,r,i,o,s){if(Bg(i)){const a=o&&t&&t.type_!==3&&!SM(t.assigned_,r)?o.concat(r):void 0,l=bk(e,i,a);if(kue(n,r,l),Bg(l))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Md(i)&&!EE(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;bk(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&xk(e,i)}}function xk(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&S9(t,n)}function rrt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Cue(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=k9;n&&(i=[r],o=j1);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var k9={get(e,t){if(t===eo)return e;const n=hf(e);if(!SM(n,t))return irt(e,n,t);const r=n[t];return e.finalized_||!Md(r)?r:r===E5(e.base_,t)?($5(e),e.copy_[t]=$M(r,e)):r},has(e,t){return t in hf(e)},ownKeys(e){return Reflect.ownKeys(hf(e))},set(e,t,n){const r=_ue(hf(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=E5(hf(e),t),o=i==null?void 0:i[eo];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Znt(n,i)&&(n!==void 0||SM(e.base_,t)))return!0;$5(e),EM(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return E5(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,$5(e),EM(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=hf(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){us(11)},getPrototypeOf(e){return jg(e.base_)},setPrototypeOf(){us(12)}},j1={};vk(k9,(e,t)=>{j1[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});j1.deleteProperty=function(e,t){return j1.set.call(this,e,t,void 0)};j1.set=function(e,t,n){return k9.set.call(this,e[0],t,n,e[0])};function E5(e,t){const n=e[eo];return(n?hf(n):e)[t]}function irt(e,t,n){var i;const r=_ue(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function _ue(e,t){if(!(t in e))return;let n=jg(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=jg(n)}}function EM(e){e.modified_||(e.modified_=!0,e.parent_&&EM(e.parent_))}function $5(e){e.copy_||(e.copy_=kM(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ort=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(l=o,...u){return s.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&us(6),r!==void 0&&typeof r!="function"&&us(7);let i;if(Md(t)){const o=kW(this),s=$M(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?CM(o):_M(o)}return SW(o,r),CW(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===wue&&(i=void 0),this.autoFreeze_&&S9(i,!0),r){const o=[],s=[];Fd("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else us(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Md(e)||us(8),Bg(e)&&(e=srt(e));const t=kW(this),n=$M(e,void 0);return n[eo].isManual_=!0,_M(t),n}finishDraft(e,t){const n=e&&e[eo];(!n||!n.isManual_)&&us(9);const{scope_:r}=n;return SW(r,t),CW(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Fd("Patches").applyPatches_;return Bg(e)?r(e,t):this.produce(e,i=>r(i,t))}};function $M(e,t){const n=CE(e)?Fd("MapSet").proxyMap_(e,t):_E(e)?Fd("MapSet").proxySet_(e,t):rrt(e,t);return(t?t.scope_:Cue()).drafts_.push(n),n}function srt(e){return Bg(e)||us(10,e),Eue(e)}function Eue(e){if(!Md(e)||EE(e))return e;const t=e[eo];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=kM(e,t.scope_.immer_.useStrictShallowCopy_)}else n=kM(e,!0);return vk(n,(r,i)=>{kue(n,r,Eue(i))}),t&&(t.finalized_=!1),n}var to=new ort,c0=to.produce;to.produceWithPatches.bind(to);to.setAutoFreeze.bind(to);to.setUseStrictShallowCopy.bind(to);to.applyPatches.bind(to);to.createDraft.bind(to);to.finishDraft.bind(to);const xm=SE()(w9(Tnt(e=>({apiKey:"sk-...",setApiKey:t=>e({apiKey:t}),python:"pyodide",setPython:async t=>t==="server"&&!(await fetch("/api")).ok?!1:(e({python:t}),!0)}),{name:"settings-storage"}))),Vt=SE(w9((e,t)=>({filename:"",timestamp:0,charts:[],fields:[],currentChartIndex:-1,increaseCurrentChartIndex:()=>{t().setCurrentChartIndex(t().currentChartIndex+1)},decreaseCurrentChartIndex:()=>{t().setCurrentChartIndex(t().currentChartIndex-1)},setCurrentChartIndex:async n=>{const r=t();n<-1||(n>r.charts.length-k5-1&&await t().appendNextChart(),e({currentChartIndex:n}))},setCurrentChartToLast:()=>{const n=t();t().setCurrentChartIndex(n.charts.length-1)},getChartIndexByKey:n=>t().charts.findIndex(r=>r.key===n),loadingSession:!1,loadSession:async()=>{e({loadingSession:!0,charts:[],filename:"",timestamp:0,currentChartIndex:-1,fields:[]});const n=El.getState().filename,r=El.getState().fileBuffer;if(!(n&&r))throw new Error("No file buffer found");const i=await frt(n,r);e(c0(o=>{o.filename=i.filename,o.timestamp=i.timestamp,o.fields=i.fields,o.charts=i.charts,o.loadingSession=!1}))},appendingChart:!1,appendNextChart:async()=>{e({appendingChart:!0});const n=await drt();e(c0(r=>{r.charts.push(n),r.appendingChart=!1}))},appendChart:async n=>{e({appendingChart:!0}),await grt(n),e(c0(r=>{r.charts.length>k5&&(r.charts=r.charts.slice(0,-k5)),r.charts.push(n),r.appendingChart=!1}))},renewCurrentChart:()=>e(c0(n=>{const r=n.charts[n.currentChartIndex];r.specIndex=(r.specIndex+1)%r.specs.length})),setCurrentChartPreferred:n=>{El.getState().data&&e(c0(i=>{i.charts[i.currentChartIndex].preferred=n}))}})));async function art(e,t){const n=await ob();return await n.writeFile(e,t),await n.callPythonFunction("loadData",{filename:e})}async function lrt(e,t){const n=new Blob([t]),r=new FormData;return r.append("file",n,e),await(await fetch("/api/loadData",{method:"POST",body:r})).json()}async function urt(){return await(await ob()).callPythonFunction("appendNextChart",{})}async function crt(){return await(await fetch("/api/appendNextChart")).json()}const frt=xm.getState().python==="pyodide"?art:lrt,drt=xm.getState().python==="pyodide"?urt:crt;async function hrt(e){return fetch("/api/appendChart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chart:e})})}async function prt(e){await(await ob()).callPythonFunction("callAppendChart",{chart:e})}const grt=xm.getState().python==="pyodide"?prt:hrt;async function mrt(e){try{return await(await fetch("/api/browseCharts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({field_names:e})})).json()}catch(t){return console.error(t),[]}}async function yrt(e){return await(await ob()).callPythonFunction("browseCharts",{field_names:e})}const vrt=xm.getState().python==="pyodide"?yrt:mrt;function brt(){const e=Vt(i=>i.charts),t=e.filter(i=>i.preferred),n=Vt(i=>i.setCurrentChartIndex);return{preferredCharts:t,handleClickBookmark:i=>{const o=e.findIndex(s=>s===i);n(o)}}}var sb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ug=typeof window>"u"||"Deno"in globalThis;function mo(){}function xrt(e,t){return typeof e=="function"?e(t):e}function AM(e){return typeof e=="number"&&e>=0&&e!==1/0}function $ue(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ep(e,t){return typeof e=="function"?e(t):e}function os(e,t){return typeof e=="function"?e(t):e}function EW(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(s){if(r){if(t.queryHash!==C9(s,t.options))return!1}else if(!U1(t.queryKey,s))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||o&&!o(t))}function $W(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(B1(t.options.mutationKey)!==B1(o))return!1}else if(!U1(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function C9(e,t){return((t==null?void 0:t.queryKeyHashFn)||B1)(e)}function B1(e){return JSON.stringify(e,(t,n)=>MM(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function U1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!U1(e[n],t[n])):!1}function Aue(e,t){if(e===t)return e;const n=AW(e)&&AW(t);if(n||MM(e)&&MM(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),s=o.length,a=n?[]:{};let l=0;for(let u=0;u<s;u++){const c=n?u:o[u];(!n&&r.includes(c)||n)&&e[c]===void 0&&t[c]===void 0?(a[c]=void 0,l++):(a[c]=Aue(e[c],t[c]),a[c]===e[c]&&e[c]!==void 0&&l++)}return i===s&&l===i?e:a}return t}function TM(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function AW(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function MM(e){if(!TW(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!TW(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function TW(e){return Object.prototype.toString.call(e)==="[object Object]"}function wrt(e){return new Promise(t=>{setTimeout(t,e)})}function FM(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Aue(e,t):t}function Srt(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function krt(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Tue=Symbol();function Mue(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Tue?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Pf,Su,$p,eH,Crt=(eH=class extends sb{constructor(){super();Fe(this,Pf);Fe(this,Su);Fe(this,$p);pe(this,$p,t=>{if(!Ug&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){j(this,Su)||this.setEventListener(j(this,$p))}onUnsubscribe(){var t;this.hasListeners()||((t=j(this,Su))==null||t.call(this),pe(this,Su,void 0))}setEventListener(t){var n;pe(this,$p,t),(n=j(this,Su))==null||n.call(this),pe(this,Su,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){j(this,Pf)!==t&&(pe(this,Pf,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof j(this,Pf)=="boolean"?j(this,Pf):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Pf=new WeakMap,Su=new WeakMap,$p=new WeakMap,eH),_9=new Crt,Ap,ku,Tp,tH,_rt=(tH=class extends sb{constructor(){super();Fe(this,Ap,!0);Fe(this,ku);Fe(this,Tp);pe(this,Tp,t=>{if(!Ug&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){j(this,ku)||this.setEventListener(j(this,Tp))}onUnsubscribe(){var t;this.hasListeners()||((t=j(this,ku))==null||t.call(this),pe(this,ku,void 0))}setEventListener(t){var n;pe(this,Tp,t),(n=j(this,ku))==null||n.call(this),pe(this,ku,t(this.setOnline.bind(this)))}setOnline(t){j(this,Ap)!==t&&(pe(this,Ap,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return j(this,Ap)}},Ap=new WeakMap,ku=new WeakMap,Tp=new WeakMap,tH),wk=new _rt;function Ert(e){return Math.min(1e3*2**e,3e4)}function Fue(e){return(e??"online")==="online"?wk.isOnline():!0}var Pue=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function A5(e){return e instanceof Pue}function Rue(e){let t=!1,n=0,r=!1,i,o,s;const a=new Promise((m,v)=>{o=m,s=v}),l=m=>{var v;r||(p(new Pue(m)),(v=e.abort)==null||v.call(e))},u=()=>{t=!0},c=()=>{t=!1},f=()=>_9.isFocused()&&(e.networkMode==="always"||wk.isOnline())&&e.canRun(),d=()=>Fue(e.networkMode)&&e.canRun(),h=m=>{var v;r||(r=!0,(v=e.onSuccess)==null||v.call(e,m),i==null||i(),o(m))},p=m=>{var v;r||(r=!0,(v=e.onError)==null||v.call(e,m),i==null||i(),s(m))},g=()=>new Promise(m=>{var v;i=b=>{(r||f())&&m(b)},(v=e.onPause)==null||v.call(e)}).then(()=>{var m;i=void 0,r||(m=e.onContinue)==null||m.call(e)}),y=()=>{if(r)return;let m;const v=n===0?e.initialPromise:void 0;try{m=v??e.fn()}catch(b){m=Promise.reject(b)}Promise.resolve(m).then(h).catch(b=>{var C;if(r)return;const x=e.retry??(Ug?0:3),w=e.retryDelay??Ert,k=typeof w=="function"?w(n,b):w,S=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(t||!S){p(b);return}n++,(C=e.onFail)==null||C.call(e,n,b),wrt(k).then(()=>f()?void 0:g()).then(()=>{t?p(b):y()})})};return{promise:a,cancel:l,continue:()=>(i==null||i(),a),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?y():g().then(y),a)}}function $rt(){let e=[],t=0,n=d=>{d()},r=d=>{d()},i=d=>setTimeout(d,0);const o=d=>{i=d},s=d=>{let h;t++;try{h=d()}finally{t--,t||u()}return h},a=d=>{t?e.push(d):i(()=>{n(d)})},l=d=>(...h)=>{a(()=>{d(...h)})},u=()=>{const d=e;e=[],d.length&&i(()=>{r(()=>{d.forEach(h=>{n(h)})})})};return{batch:s,batchCalls:l,schedule:a,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:o}}var Xn=$rt(),Rf,nH,Due=(nH=class{constructor(){Fe(this,Rf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),AM(this.gcTime)&&pe(this,Rf,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ug?1/0:5*60*1e3))}clearGcTimeout(){j(this,Rf)&&(clearTimeout(j(this,Rf)),pe(this,Rf,void 0))}},Rf=new WeakMap,nH),Mp,Fp,ho,pr,V1,Df,Zo,Xa,rH,Art=(rH=class extends Due{constructor(t){super();Fe(this,Zo);Fe(this,Mp);Fe(this,Fp);Fe(this,ho);Fe(this,pr);Fe(this,V1);Fe(this,Df);pe(this,Df,!1),pe(this,V1,t.defaultOptions),this.setOptions(t.options),this.observers=[],pe(this,ho,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,pe(this,Mp,Trt(this.options)),this.state=t.state??j(this,Mp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=j(this,pr))==null?void 0:t.promise}setOptions(t){this.options={...j(this,V1),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&j(this,ho).remove(this)}setData(t,n){const r=FM(this.state.data,t,this.options);return Ue(this,Zo,Xa).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Ue(this,Zo,Xa).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=j(this,pr))==null?void 0:r.promise;return(i=j(this,pr))==null||i.cancel(t),n?n.then(mo).catch(mo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(j(this,Mp))}isActive(){return this.observers.some(t=>os(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!$ue(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=j(this,pr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=j(this,pr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),j(this,ho).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(j(this,pr)&&(j(this,Df)?j(this,pr).cancel({revert:!0}):j(this,pr).cancelRetry()),this.scheduleGc()),j(this,ho).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ue(this,Zo,Xa).call(this,{type:"invalidate"})}fetch(t,n){var l,u,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(j(this,pr))return j(this,pr).continueRetry(),j(this,pr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(d=>d.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(pe(this,Df,!0),r.signal)})},o=()=>{const f=Mue(this.options,n),d={queryKey:this.queryKey,meta:this.meta};return i(d),pe(this,Df,!1),this.options.persister?this.options.persister(f,d,this):f(d)},s={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(s),(l=this.options.behavior)==null||l.onFetch(s,this),pe(this,Fp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=s.fetchOptions)==null?void 0:u.meta))&&Ue(this,Zo,Xa).call(this,{type:"fetch",meta:(c=s.fetchOptions)==null?void 0:c.meta});const a=f=>{var d,h,p,g;A5(f)&&f.silent||Ue(this,Zo,Xa).call(this,{type:"error",error:f}),A5(f)||((h=(d=j(this,ho).config).onError)==null||h.call(d,f,this),(g=(p=j(this,ho).config).onSettled)==null||g.call(p,this.state.data,f,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return pe(this,pr,Rue({initialPromise:n==null?void 0:n.initialPromise,fn:s.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var d,h,p,g;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(f),(h=(d=j(this,ho).config).onSuccess)==null||h.call(d,f,this),(g=(p=j(this,ho).config).onSettled)==null||g.call(p,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(f,d)=>{Ue(this,Zo,Xa).call(this,{type:"failed",failureCount:f,error:d})},onPause:()=>{Ue(this,Zo,Xa).call(this,{type:"pause"})},onContinue:()=>{Ue(this,Zo,Xa).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0})),j(this,pr).start()}},Mp=new WeakMap,Fp=new WeakMap,ho=new WeakMap,pr=new WeakMap,V1=new WeakMap,Df=new WeakMap,Zo=new WeakSet,Xa=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Oue(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return A5(i)&&i.revert&&j(this,Fp)?{...j(this,Fp),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Xn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),j(this,ho).notify({query:this,type:"updated",action:t})})},rH);function Oue(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fue(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Trt(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Xs,iH,Mrt=(iH=class extends sb{constructor(t={}){super();Fe(this,Xs);this.config=t,pe(this,Xs,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??C9(i,n);let s=this.get(o);return s||(s=new Art({cache:this,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){j(this,Xs).has(t.queryHash)||(j(this,Xs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=j(this,Xs).get(t.queryHash);n&&(t.destroy(),n===t&&j(this,Xs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return j(this,Xs).get(t)}getAll(){return[...j(this,Xs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>EW(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>EW(t,r)):n}notify(t){Xn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Xn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Xs=new WeakMap,iH),Ks,Pr,Of,Qs,lu,oH,Frt=(oH=class extends Due{constructor(t){super();Fe(this,Qs);Fe(this,Ks);Fe(this,Pr);Fe(this,Of);this.mutationId=t.mutationId,pe(this,Pr,t.mutationCache),pe(this,Ks,[]),this.state=t.state||Prt(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){j(this,Ks).includes(t)||(j(this,Ks).push(t),this.clearGcTimeout(),j(this,Pr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){pe(this,Ks,j(this,Ks).filter(n=>n!==t)),this.scheduleGc(),j(this,Pr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){j(this,Ks).length||(this.state.status==="pending"?this.scheduleGc():j(this,Pr).remove(this))}continue(){var t;return((t=j(this,Of))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,s,a,l,u,c,f,d,h,p,g,y,m,v,b,x,w,k,S;pe(this,Of,Rue({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,_)=>{Ue(this,Qs,lu).call(this,{type:"failed",failureCount:C,error:_})},onPause:()=>{Ue(this,Qs,lu).call(this,{type:"pause"})},onContinue:()=>{Ue(this,Qs,lu).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>j(this,Pr).canRun(this)}));const n=this.state.status==="pending",r=!j(this,Of).canStart();try{if(!n){Ue(this,Qs,lu).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(i=j(this,Pr).config).onMutate)==null?void 0:o.call(i,t,this));const _=await((a=(s=this.options).onMutate)==null?void 0:a.call(s,t));_!==this.state.context&&Ue(this,Qs,lu).call(this,{type:"pending",context:_,variables:t,isPaused:r})}const C=await j(this,Of).start();return await((u=(l=j(this,Pr).config).onSuccess)==null?void 0:u.call(l,C,t,this.state.context,this)),await((f=(c=this.options).onSuccess)==null?void 0:f.call(c,C,t,this.state.context)),await((h=(d=j(this,Pr).config).onSettled)==null?void 0:h.call(d,C,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,C,null,t,this.state.context)),Ue(this,Qs,lu).call(this,{type:"success",data:C}),C}catch(C){try{throw await((m=(y=j(this,Pr).config).onError)==null?void 0:m.call(y,C,t,this.state.context,this)),await((b=(v=this.options).onError)==null?void 0:b.call(v,C,t,this.state.context)),await((w=(x=j(this,Pr).config).onSettled)==null?void 0:w.call(x,void 0,C,this.state.variables,this.state.context,this)),await((S=(k=this.options).onSettled)==null?void 0:S.call(k,void 0,C,t,this.state.context)),C}finally{Ue(this,Qs,lu).call(this,{type:"error",error:C})}}finally{j(this,Pr).runNext(this)}}},Ks=new WeakMap,Pr=new WeakMap,Of=new WeakMap,Qs=new WeakSet,lu=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Xn.batch(()=>{j(this,Ks).forEach(r=>{r.onMutationUpdate(t)}),j(this,Pr).notify({mutation:this,type:"updated",action:t})})},oH);function Prt(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mi,W1,sH,Rrt=(sH=class extends sb{constructor(t={}){super();Fe(this,Mi);Fe(this,W1);this.config=t,pe(this,Mi,new Map),pe(this,W1,Date.now())}build(t,n,r){const i=new Frt({mutationCache:this,mutationId:++gb(this,W1)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=Lx(t),r=j(this,Mi).get(n)??[];r.push(t),j(this,Mi).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Lx(t);if(j(this,Mi).has(n)){const i=(r=j(this,Mi).get(n))==null?void 0:r.filter(o=>o!==t);i&&(i.length===0?j(this,Mi).delete(n):j(this,Mi).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=j(this,Mi).get(Lx(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=j(this,Mi).get(Lx(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Xn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...j(this,Mi).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>$W(n,r))}findAll(t={}){return this.getAll().filter(n=>$W(t,n))}notify(t){Xn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Xn.batch(()=>Promise.all(t.map(n=>n.continue().catch(mo))))}},Mi=new WeakMap,W1=new WeakMap,sH);function Lx(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Drt(e){return{onFetch:(t,n)=>{const r=async()=>{var p,g,y,m,v;const i=t.options,o=(y=(g=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:y.direction,s=((m=t.state.data)==null?void 0:m.pages)||[],a=((v=t.state.data)==null?void 0:v.pageParams)||[],l={pages:[],pageParams:[]};let u=!1;const c=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},f=Mue(t.options,t.fetchOptions),d=async(b,x,w)=>{if(u)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const k={queryKey:t.queryKey,pageParam:x,direction:w?"backward":"forward",meta:t.options.meta};c(k);const S=await f(k),{maxPages:C}=t.options,_=w?krt:Srt;return{pages:_(b.pages,S,C),pageParams:_(b.pageParams,x,C)}};let h;if(o&&s.length){const b=o==="backward",x=b?Ort:MW,w={pages:s,pageParams:a},k=x(i,w);h=await d(w,k,b)}else{h=await d(l,a[0]??i.initialPageParam);const b=e??s.length;for(let x=1;x<b;x++){const w=MW(i,h);if(w==null)break;h=await d(h,w)}}return h};t.options.persister?t.fetchFn=()=>{var i,o;return(o=(i=t.options).persister)==null?void 0:o.call(i,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function MW(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Ort(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Kt,Cu,_u,Pp,Rp,Eu,Dp,Op,aH,Nrt=(aH=class{constructor(e={}){Fe(this,Kt);Fe(this,Cu);Fe(this,_u);Fe(this,Pp);Fe(this,Rp);Fe(this,Eu);Fe(this,Dp);Fe(this,Op);pe(this,Kt,e.queryCache||new Mrt),pe(this,Cu,e.mutationCache||new Rrt),pe(this,_u,e.defaultOptions||{}),pe(this,Pp,new Map),pe(this,Rp,new Map),pe(this,Eu,0)}mount(){gb(this,Eu)._++,j(this,Eu)===1&&(pe(this,Dp,_9.subscribe(async e=>{e&&(await this.resumePausedMutations(),j(this,Kt).onFocus())})),pe(this,Op,wk.subscribe(async e=>{e&&(await this.resumePausedMutations(),j(this,Kt).onOnline())})))}unmount(){var e,t;gb(this,Eu)._--,j(this,Eu)===0&&((e=j(this,Dp))==null||e.call(this),pe(this,Dp,void 0),(t=j(this,Op))==null||t.call(this),pe(this,Op,void 0))}isFetching(e){return j(this,Kt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return j(this,Cu).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=j(this,Kt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=j(this,Kt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Ep(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return j(this,Kt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=j(this,Kt).get(r.queryHash),o=i==null?void 0:i.state.data,s=xrt(t,o);if(s!==void 0)return j(this,Kt).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return Xn.batch(()=>j(this,Kt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=j(this,Kt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=j(this,Kt);Xn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=j(this,Kt),r={type:"active",...e};return Xn.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Xn.batch(()=>j(this,Kt).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(mo).catch(mo)}invalidateQueries(e={},t={}){return Xn.batch(()=>{if(j(this,Kt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Xn.batch(()=>j(this,Kt).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(mo)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(mo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=j(this,Kt).build(this,t);return n.isStaleByTime(Ep(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(mo).catch(mo)}fetchInfiniteQuery(e){return e.behavior=Drt(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(mo).catch(mo)}resumePausedMutations(){return wk.isOnline()?j(this,Cu).resumePausedMutations():Promise.resolve()}getQueryCache(){return j(this,Kt)}getMutationCache(){return j(this,Cu)}getDefaultOptions(){return j(this,_u)}setDefaultOptions(e){pe(this,_u,e)}setQueryDefaults(e,t){j(this,Pp).set(B1(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...j(this,Pp).values()];let n={};return t.forEach(r=>{U1(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){j(this,Rp).set(B1(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...j(this,Rp).values()];let n={};return t.forEach(r=>{U1(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...j(this,_u).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=C9(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Tue&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...j(this,_u).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){j(this,Kt).clear(),j(this,Cu).clear()}},Kt=new WeakMap,Cu=new WeakMap,_u=new WeakMap,Pp=new WeakMap,Rp=new WeakMap,Eu=new WeakMap,Dp=new WeakMap,Op=new WeakMap,aH),ii,Ve,H1,Rr,Nf,Np,Zs,q1,Ip,Lp,If,Lf,$u,zp,ft,X0,PM,RM,DM,OM,NM,IM,LM,Nue,lH,Irt=(lH=class extends sb{constructor(t,n){super();Fe(this,ft);Fe(this,ii);Fe(this,Ve);Fe(this,H1);Fe(this,Rr);Fe(this,Nf);Fe(this,Np);Fe(this,Zs);Fe(this,q1);Fe(this,Ip);Fe(this,Lp);Fe(this,If);Fe(this,Lf);Fe(this,$u);Fe(this,zp,new Set);this.options=n,pe(this,ii,t),pe(this,Zs,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(j(this,Ve).addObserver(this),FW(j(this,Ve),this.options)?Ue(this,ft,X0).call(this):this.updateResult(),Ue(this,ft,OM).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return zM(j(this,Ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return zM(j(this,Ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ue(this,ft,NM).call(this),Ue(this,ft,IM).call(this),j(this,Ve).removeObserver(this)}setOptions(t,n){const r=this.options,i=j(this,Ve);if(this.options=j(this,ii).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof os(this.options.enabled,j(this,Ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ue(this,ft,LM).call(this),j(this,Ve).setOptions(this.options),r._defaulted&&!TM(this.options,r)&&j(this,ii).getQueryCache().notify({type:"observerOptionsUpdated",query:j(this,Ve),observer:this});const o=this.hasListeners();o&&PW(j(this,Ve),i,this.options,r)&&Ue(this,ft,X0).call(this),this.updateResult(n),o&&(j(this,Ve)!==i||os(this.options.enabled,j(this,Ve))!==os(r.enabled,j(this,Ve))||Ep(this.options.staleTime,j(this,Ve))!==Ep(r.staleTime,j(this,Ve)))&&Ue(this,ft,PM).call(this);const s=Ue(this,ft,RM).call(this);o&&(j(this,Ve)!==i||os(this.options.enabled,j(this,Ve))!==os(r.enabled,j(this,Ve))||s!==j(this,$u))&&Ue(this,ft,DM).call(this,s)}getOptimisticResult(t){const n=j(this,ii).getQueryCache().build(j(this,ii),t),r=this.createResult(n,t);return zrt(this,r)&&(pe(this,Rr,r),pe(this,Np,this.options),pe(this,Nf,j(this,Ve).state)),r}getCurrentResult(){return j(this,Rr)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){j(this,zp).add(t)}getCurrentQuery(){return j(this,Ve)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=j(this,ii).defaultQueryOptions(t),r=j(this,ii).getQueryCache().build(j(this,ii),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Ue(this,ft,X0).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),j(this,Rr)))}createResult(t,n){var S;const r=j(this,Ve),i=this.options,o=j(this,Rr),s=j(this,Nf),a=j(this,Np),u=t!==r?t.state:j(this,H1),{state:c}=t;let f={...c},d=!1,h;if(n._optimisticResults){const C=this.hasListeners(),_=!C&&FW(t,n),$=C&&PW(t,r,n,i);(_||$)&&(f={...f,...Oue(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=f;if(n.select&&f.data!==void 0)if(o&&f.data===(s==null?void 0:s.data)&&n.select===j(this,q1))h=j(this,Ip);else try{pe(this,q1,n.select),h=n.select(f.data),h=FM(o==null?void 0:o.data,h,n),pe(this,Ip,h),pe(this,Zs,null)}catch(C){pe(this,Zs,C)}else h=f.data;if(n.placeholderData!==void 0&&h===void 0&&y==="pending"){let C;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))C=o.data;else if(C=typeof n.placeholderData=="function"?n.placeholderData((S=j(this,Lp))==null?void 0:S.state.data,j(this,Lp)):n.placeholderData,n.select&&C!==void 0)try{C=n.select(C),pe(this,Zs,null)}catch(_){pe(this,Zs,_)}C!==void 0&&(y="success",h=FM(o==null?void 0:o.data,C,n),d=!0)}j(this,Zs)&&(p=j(this,Zs),h=j(this,Ip),g=Date.now(),y="error");const m=f.fetchStatus==="fetching",v=y==="pending",b=y==="error",x=v&&m,w=h!==void 0;return{status:y,fetchStatus:f.fetchStatus,isPending:v,isSuccess:y==="success",isError:b,isInitialLoading:x,isLoading:x,data:h,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!v,isLoadingError:b&&!w,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:b&&w,isStale:E9(t,n),refetch:this.refetch}}updateResult(t){const n=j(this,Rr),r=this.createResult(j(this,Ve),this.options);if(pe(this,Nf,j(this,Ve).state),pe(this,Np,this.options),j(this,Nf).data!==void 0&&pe(this,Lp,j(this,Ve)),TM(r,n))return;pe(this,Rr,r);const i={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!j(this,zp).size)return!0;const l=new Set(a??j(this,zp));return this.options.throwOnError&&l.add("error"),Object.keys(j(this,Rr)).some(u=>{const c=u;return j(this,Rr)[c]!==n[c]&&l.has(c)})};(t==null?void 0:t.listeners)!==!1&&o()&&(i.listeners=!0),Ue(this,ft,Nue).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ue(this,ft,OM).call(this)}},ii=new WeakMap,Ve=new WeakMap,H1=new WeakMap,Rr=new WeakMap,Nf=new WeakMap,Np=new WeakMap,Zs=new WeakMap,q1=new WeakMap,Ip=new WeakMap,Lp=new WeakMap,If=new WeakMap,Lf=new WeakMap,$u=new WeakMap,zp=new WeakMap,ft=new WeakSet,X0=function(t){Ue(this,ft,LM).call(this);let n=j(this,Ve).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(mo)),n},PM=function(){Ue(this,ft,NM).call(this);const t=Ep(this.options.staleTime,j(this,Ve));if(Ug||j(this,Rr).isStale||!AM(t))return;const r=$ue(j(this,Rr).dataUpdatedAt,t)+1;pe(this,If,setTimeout(()=>{j(this,Rr).isStale||this.updateResult()},r))},RM=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(j(this,Ve)):this.options.refetchInterval)??!1},DM=function(t){Ue(this,ft,IM).call(this),pe(this,$u,t),!(Ug||os(this.options.enabled,j(this,Ve))===!1||!AM(j(this,$u))||j(this,$u)===0)&&pe(this,Lf,setInterval(()=>{(this.options.refetchIntervalInBackground||_9.isFocused())&&Ue(this,ft,X0).call(this)},j(this,$u)))},OM=function(){Ue(this,ft,PM).call(this),Ue(this,ft,DM).call(this,Ue(this,ft,RM).call(this))},NM=function(){j(this,If)&&(clearTimeout(j(this,If)),pe(this,If,void 0))},IM=function(){j(this,Lf)&&(clearInterval(j(this,Lf)),pe(this,Lf,void 0))},LM=function(){const t=j(this,ii).getQueryCache().build(j(this,ii),this.options);if(t===j(this,Ve))return;const n=j(this,Ve);pe(this,Ve,t),pe(this,H1,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Nue=function(t){Xn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(j(this,Rr))}),j(this,ii).getQueryCache().notify({query:j(this,Ve),type:"observerResultsUpdated"})})},lH);function Lrt(e,t){return os(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function FW(e,t){return Lrt(e,t)||e.state.data!==void 0&&zM(e,t,t.refetchOnMount)}function zM(e,t,n){if(os(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&E9(e,t)}return!1}function PW(e,t,n,r){return(e!==t||os(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&E9(e,n)}function E9(e,t){return os(t.enabled,e)!==!1&&e.isStaleByTime(Ep(t.staleTime,e))}function zrt(e,t){return!TM(e.getCurrentResult(),t)}var Iue=T.createContext(void 0),jrt=e=>{const t=T.useContext(Iue);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Brt=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),E.jsx(Iue.Provider,{value:e,children:t})),Lue=T.createContext(!1),Urt=()=>T.useContext(Lue);Lue.Provider;function Vrt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Wrt=T.createContext(Vrt()),Hrt=()=>T.useContext(Wrt);function qrt(e,t){return typeof e=="function"?e(...t):!!e}var Grt=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Yrt=e=>{T.useEffect(()=>{e.clearReset()},[e])},Xrt=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&qrt(n,[e.error,r]),Krt=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Qrt=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Zrt=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Jrt(e,t,n){var u,c,f,d;const r=jrt(),i=Urt(),o=Hrt(),s=r.defaultQueryOptions(e);(c=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||c.call(u,s),s._optimisticResults=i?"isRestoring":"optimistic",Krt(s),Grt(s,o),Yrt(o);const[a]=T.useState(()=>new t(r,s)),l=a.getOptimisticResult(s);if(T.useSyncExternalStore(T.useCallback(h=>{const p=i?()=>{}:a.subscribe(Xn.batchCalls(h));return a.updateResult(),p},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),T.useEffect(()=>{a.setOptions(s,{listeners:!1})},[s,a]),Qrt(s,l))throw Zrt(s,a,o);if(Xrt({result:l,errorResetBoundary:o,throwOnError:s.throwOnError,query:r.getQueryCache().get(s.queryHash)}))throw l.error;return(d=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||d.call(f,s,l),s.notifyOnChangeProps?l:a.trackResult(l)}function zue(e,t){return Jrt(e,Irt)}function eit(){const[e,t]=T.useState([]),[n,r]=T.useState(""),[i,o]=T.useState(0),s=El(m=>m.filename),a=El(m=>m.data);T.useEffect(()=>{o(0)},[n]);const{data:l=[],isLoading:u}=zue({queryKey:["browseCharts",s,...e.sort().join("&")],queryFn:async()=>{if(e.length===0)return[];const m=await vrt(e);return m}}),c=eot(n),f=Vt(m=>m.appendChart),d=Vt(m=>m.setCurrentChartToLast),h=T.useCallback(async m=>{await f(m),d()},[f,d]);T.useEffect(()=>{e.length>=C5&&r("")},[e]);const p=e.length>=C5,g=m=>{t(v=>v.includes(m)?v.filter(b=>b!==m):[...v,m]),r("")};return{browsedCharts:l,inputDisabled:p,loading:u,fieldNameMatches:c,inputValue:n,setInputValue:r,selectedFields:e,handleFieldSelection:g,appendChart:h,suggestionCursorIndex:i,handleKeydown:m=>{["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(m.key)&&m.stopPropagation(),["ArrowDown","ArrowUp"].includes(m.key)?(m.preventDefault(),c.length>0&&o(v=>m.key==="ArrowDown"?Math.min(v+1,c.length-1):Math.max(v-1,0))):m.key==="Enter"&&e.length<=C5&&c.length>i&&g(c[i].item)}}}function tit(e){const{colorMode:t}=Gg(),n=El(u=>u.data),r=e.specs[e.specIndex],i=t==="dark"?"dark":void 0,[o,s]=Eh({base:[300,300],lg:[600,600]})??[300,300],a={...r,width:o,height:s,background:"transparent",data:{name:bW},config:{..."config"in r?r.config:{},axis:{labelFontSize:14,titleFontSize:16,titlePadding:16},autosize:{type:"fit"}}};return{data:{[bW]:n},chartTheme:i,spec:a}}function nit(e,t,{signal:n}={}){let r=null;const i=function(...s){r!==null&&clearTimeout(r),!(n!=null&&n.aborted)&&(r=setTimeout(()=>{e(...s),r=null},t))},o=function(){i.cancel()};return i.cancel=function(){r!==null&&(clearTimeout(r),r=null)},n==null||n.addEventListener("abort",o,{once:!0}),i}function RW(e){if(!e)return 0;const t=window.getComputedStyle(e),n=parseFloat(t.gap);return e.clientWidth+n}function rit(){const e=Vt(s=>s.charts),t=Vt(s=>s.currentChartIndex),n=Vt(s=>s.setCurrentChartIndex),r=Vt(s=>s.increaseCurrentChartIndex),i=Vt(s=>s.decreaseCurrentChartIndex),o=T.useRef(null);return T.useEffect(()=>{const s=o.current;if(!s)return;const a=nit(()=>{const l=s.scrollLeft,u=RW(s),c=Math.round(l/u);n(c-1)},Fnt);return s.addEventListener("scroll",a),()=>s.removeEventListener("scroll",a)},[n]),T.useEffect(()=>{const s=o.current;if(!s)return;const a=RW(s);s.scrollTo({left:(t+1)*a,behavior:"smooth"})},[t]),T.useEffect(()=>{const s=a=>{a.key==="ArrowLeft"&&(a.preventDefault(),i()),a.key==="ArrowRight"&&(a.preventDefault(),r())};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[r,i]),{charts:e,currentChartIndex:t,ref:o}}function iit(){const e=Vt(p=>p.charts),t=Vt(p=>p.fields),n=Vt(p=>p.increaseCurrentChartIndex),r=Vt(p=>p.decreaseCurrentChartIndex),i=Vt(p=>p.renewCurrentChart),o=Vt(p=>p.currentChartIndex),s=o!==-1,a=o!==-1&&e[o].preferred,l=Vt(p=>p.setCurrentChartPreferred),u=i,c=n,f=r,d=()=>{l(!a)};return{sessionInitialized:t.length>0,chartDisplaying:s,currentChartPreferred:a,handleRenewChart:u,handleNextChart:c,handlePrevChart:f,handlePreferChart:d}}function jM(e,t,n){var r,i,o,s,a;t==null&&(t=100);function l(){var c=Date.now()-s;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(a=e.apply(o,i),o=i=null))}var u=function(){o=this,i=arguments,s=Date.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(a=e.apply(o,i),o=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}jM.debounce=jM;var oit=jM;const DW=zl(oit);function T5(e){let{debounce:t,scroll:n,polyfill:r,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1};const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=T.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=T.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),u=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,f=T.useRef(!1);T.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,h,p]=T.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:b,top:x,width:w,height:k,bottom:S,right:C,x:_,y:$}=l.current.element.getBoundingClientRect(),A={left:b,top:x,width:w,height:k,bottom:S,right:C,x:_,y:$};l.current.element instanceof HTMLElement&&i&&(A.height=l.current.element.offsetHeight,A.width=l.current.element.offsetWidth),Object.freeze(A),f.current&&!uit(l.current.lastBounds,A)&&a(l.current.lastBounds=A)};return[v,c?DW(v,c):v,u?DW(v,u):v]},[a,i,u,c]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function y(){l.current.element&&(l.current.resizeObserver=new o(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",p,{capture:!0,passive:!0})))}const m=v=>{!v||v===l.current.element||(g(),l.current.element=v,l.current.scrollContainers=jue(v),y())};return ait(p,!!n),sit(h),T.useEffect(()=>{g(),y()},[n,p,h]),T.useEffect(()=>g,[]),[m,s,d]}function sit(e){T.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function ait(e,t){T.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function jue(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&t.push(e),[...t,...jue(e.parentElement)]}const lit=["x","y","top","bottom","left","right","width","height"],uit=(e,t)=>lit.every(n=>e[n]===t[n]);function cit(){const e=xM(p=>p.drawerExpanded),t=xM(p=>p.setDrawerExpanded),n=KCe(),[r,i]=T5(),[o,s]=T5(),[a,l]=T5(),[u,c]=T.useState(!1),f=T.useMemo(()=>({expanded:{top:`calc(100dvh - ${l.height+s.height+i.height}px)`},collapsed:{top:`calc(100dvh - ${l.height+s.height+16}px)`},loadExpanded:{top:`calc(100dvh - ${l.height+s.height+i.height-200}px)`}}),[l,i,s]);return{animate:u?e?"expanded":"collapsed":"loadExpanded",dragControls:n,handleDragEnd:(p,g)=>{u||c(!0),t(g.offset.y>vW?!1:g.offset.y<-vW?!0:e)},bodyRef:r,handleRef:o,navigatorRef:a,navigatorBounds:l,variants:f}}function Bue(){const e=El(s=>s.loading),t=El(s=>s.loadData),n=Vt(s=>s.loadingSession),r=Vt(s=>s.loadSession),i=xM(s=>s.setDrawerExpanded);return{loading:e||n,initializeSession:async s=>{await t(s),await r(),i(!1)}}}function fit(){const{loading:e,initializeSession:t}=Bue(),[n,r]=T.useState(null);return{loading:e,selectedDemo:n,handleSubmit:()=>{n!=null&&n.href&&t(n.href)},handleDemoSelect:s=>{r(s)}}}function Ll(e){return Array.isArray?Array.isArray(e):Wue(e)==="[object Array]"}const dit=1/0;function hit(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-dit?"-0":t}function pit(e){return e==null?"":hit(e)}function ca(e){return typeof e=="string"}function Uue(e){return typeof e=="number"}function git(e){return e===!0||e===!1||mit(e)&&Wue(e)=="[object Boolean]"}function Vue(e){return typeof e=="object"}function mit(e){return Vue(e)&&e!==null}function Di(e){return e!=null}function M5(e){return!e.trim().length}function Wue(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const yit="Incorrect 'index' type",vit=e=>`Invalid value for key ${e}`,bit=e=>`Pattern length exceeds max of ${e}.`,xit=e=>`Missing ${e} property in key`,wit=e=>`Property 'weight' in key '${e}' must be a positive integer`,OW=Object.prototype.hasOwnProperty;class Sit{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=Hue(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Hue(e){let t=null,n=null,r=null,i=1,o=null;if(ca(e)||Ll(e))r=e,t=NW(e),n=BM(e);else{if(!OW.call(e,"name"))throw new Error(xit("name"));const s=e.name;if(r=s,OW.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(wit(s));t=NW(s),n=BM(s),o=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:o}}function NW(e){return Ll(e)?e:e.split(".")}function BM(e){return Ll(e)?e.join("."):e}function kit(e,t){let n=[],r=!1;const i=(o,s,a)=>{if(Di(o))if(!s[a])n.push(o);else{let l=s[a];const u=o[l];if(!Di(u))return;if(a===s.length-1&&(ca(u)||Uue(u)||git(u)))n.push(pit(u));else if(Ll(u)){r=!0;for(let c=0,f=u.length;c<f;c+=1)i(u[c],s,a+1)}else s.length&&i(u,s,a+1)}};return i(e,ca(t)?t.split("."):t,0),r?n:n[0]}const Cit={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},_it={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Eit={location:0,threshold:.6,distance:100},$it={useExtendedSearch:!1,getFn:kit,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Re={..._it,...Cit,...Eit,...$it};const Ait=/[^ ]+/g;function Tit(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const o=i.match(Ait).length;if(n.has(o))return n.get(o);const s=1/Math.pow(o,.5*e),a=parseFloat(Math.round(s*r)/r);return n.set(o,a),a},clear(){n.clear()}}}class $9{constructor({getFn:t=Re.getFn,fieldNormWeight:n=Re.fieldNormWeight}={}){this.norm=Tit(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ca(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();ca(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Di(t)||M5(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let s=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Di(s)){if(Ll(s)){let a=[];const l=[{nestedArrIndex:-1,value:s}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(Di(c))if(ca(c)&&!M5(c)){let f={v:c,i:u,n:this.norm.get(c)};a.push(f)}else Ll(c)&&c.forEach((f,d)=>{l.push({nestedArrIndex:d,value:f})})}r.$[o]=a}else if(ca(s)&&!M5(s)){let a={v:s,n:this.norm.get(s)};r.$[o]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function que(e,t,{getFn:n=Re.getFn,fieldNormWeight:r=Re.fieldNormWeight}={}){const i=new $9({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(Hue)),i.setSources(t),i.create(),i}function Mit(e,{getFn:t=Re.getFn,fieldNormWeight:n=Re.fieldNormWeight}={}){const{keys:r,records:i}=e,o=new $9({getFn:t,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function zx(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Re.distance,ignoreLocation:o=Re.ignoreLocation}={}){const s=t/e.length;if(o)return s;const a=Math.abs(r-n);return i?s+a/i:a?1:s}function Fit(e=[],t=Re.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=e.length;o<s;o+=1){let a=e[o];a&&r===-1?r=o:!a&&r!==-1&&(i=o-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}const Sf=32;function Pit(e,t,n,{location:r=Re.location,distance:i=Re.distance,threshold:o=Re.threshold,findAllMatches:s=Re.findAllMatches,minMatchCharLength:a=Re.minMatchCharLength,includeMatches:l=Re.includeMatches,ignoreLocation:u=Re.ignoreLocation}={}){if(t.length>Sf)throw new Error(bit(Sf));const c=t.length,f=e.length,d=Math.max(0,Math.min(r,f));let h=o,p=d;const g=a>1||l,y=g?Array(f):[];let m;for(;(m=e.indexOf(t,p))>-1;){let S=zx(t,{currentLocation:m,expectedLocation:d,distance:i,ignoreLocation:u});if(h=Math.min(S,h),p=m+c,g){let C=0;for(;C<c;)y[m+C]=1,C+=1}}p=-1;let v=[],b=1,x=c+f;const w=1<<c-1;for(let S=0;S<c;S+=1){let C=0,_=x;for(;C<_;)zx(t,{errors:S,currentLocation:d+_,expectedLocation:d,distance:i,ignoreLocation:u})<=h?C=_:x=_,_=Math.floor((x-C)/2+C);x=_;let $=Math.max(1,d-_+1),A=s?f:Math.min(d+_,f)+c,O=Array(A+2);O[A+1]=(1<<S)-1;for(let P=A;P>=$;P-=1){let R=P-1,D=n[e.charAt(R)];if(g&&(y[R]=+!!D),O[P]=(O[P+1]<<1|1)&D,S&&(O[P]|=(v[P+1]|v[P])<<1|1|v[P+1]),O[P]&w&&(b=zx(t,{errors:S,currentLocation:R,expectedLocation:d,distance:i,ignoreLocation:u}),b<=h)){if(h=b,p=R,p<=d)break;$=Math.max(1,2*d-p)}}if(zx(t,{errors:S+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>h)break;v=O}const k={isMatch:p>=0,score:Math.max(.001,b)};if(g){const S=Fit(y,a);S.length?l&&(k.indices=S):k.isMatch=!1}return k}function Rit(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class Gue{constructor(t,{location:n=Re.location,threshold:r=Re.threshold,distance:i=Re.distance,includeMatches:o=Re.includeMatches,findAllMatches:s=Re.findAllMatches,minMatchCharLength:a=Re.minMatchCharLength,isCaseSensitive:l=Re.isCaseSensitive,ignoreLocation:u=Re.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(d,h)=>{this.chunks.push({pattern:d,alphabet:Rit(d),startIndex:h})},f=this.pattern.length;if(f>Sf){let d=0;const h=f%Sf,p=f-h;for(;d<p;)c(this.pattern.substr(d,Sf),d),d+=Sf;if(h){const g=f-Sf;c(this.pattern.substr(g),g)}}else c(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,t.length-1]]),p}const{location:i,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],f=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:g,startIndex:y})=>{const{isMatch:m,score:v,indices:b}=Pit(t,p,g,{location:i+y,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});m&&(d=!0),f+=v,m&&b&&(c=[...c,...b])});let h={isMatch:d,score:d?f/this.chunks.length:1};return d&&r&&(h.indices=c),h}}class Bc{constructor(t){this.pattern=t}static isMultiMatch(t){return IW(t,this.multiRegex)}static isSingleMatch(t){return IW(t,this.singleRegex)}search(){}}function IW(e,t){const n=e.match(t);return n?n[1]:null}class Dit extends Bc{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Oit extends Bc{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Nit extends Bc{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Iit extends Bc{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Lit extends Bc{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class zit extends Bc{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Yue extends Bc{constructor(t,{location:n=Re.location,threshold:r=Re.threshold,distance:i=Re.distance,includeMatches:o=Re.includeMatches,findAllMatches:s=Re.findAllMatches,minMatchCharLength:a=Re.minMatchCharLength,isCaseSensitive:l=Re.isCaseSensitive,ignoreLocation:u=Re.ignoreLocation}={}){super(t),this._bitapSearch=new Gue(t,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Xue extends Bc{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],o=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}}const UM=[Dit,Xue,Nit,Iit,zit,Lit,Oit,Yue],LW=UM.length,jit=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Bit="|";function Uit(e,t={}){return e.split(Bit).map(n=>{let r=n.trim().split(jit).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=r.length;o<s;o+=1){const a=r[o];let l=!1,u=-1;for(;!l&&++u<LW;){const c=UM[u];let f=c.isMultiMatch(a);f&&(i.push(new c(f,t)),l=!0)}if(!l)for(u=-1;++u<LW;){const c=UM[u];let f=c.isSingleMatch(a);if(f){i.push(new c(f,t));break}}}return i})}const Vit=new Set([Yue.type,Xue.type]);class Wit{constructor(t,{isCaseSensitive:n=Re.isCaseSensitive,includeMatches:r=Re.includeMatches,minMatchCharLength:i=Re.minMatchCharLength,ignoreLocation:o=Re.ignoreLocation,findAllMatches:s=Re.findAllMatches,location:a=Re.location,threshold:l=Re.threshold,distance:u=Re.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:s,ignoreLocation:o,location:a,threshold:l,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=Uit(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let o=0,s=[],a=0;for(let l=0,u=n.length;l<u;l+=1){const c=n[l];s.length=0,o=0;for(let f=0,d=c.length;f<d;f+=1){const h=c[f],{isMatch:p,indices:g,score:y}=h.search(t);if(p){if(o+=1,a+=y,r){const m=h.constructor.type;Vit.has(m)?s=[...s,...g]:s.push(g)}}else{a=0,o=0,s.length=0;break}}if(o){let f={isMatch:!0,score:a/o};return r&&(f.indices=s),f}}return{isMatch:!1,score:1}}}const VM=[];function Hit(...e){VM.push(...e)}function WM(e,t){for(let n=0,r=VM.length;n<r;n+=1){let i=VM[n];if(i.condition(e,t))return new i(e,t)}return new Gue(e,t)}const Sk={AND:"$and",OR:"$or"},HM={PATH:"$path",PATTERN:"$val"},qM=e=>!!(e[Sk.AND]||e[Sk.OR]),qit=e=>!!e[HM.PATH],Git=e=>!Ll(e)&&Vue(e)&&!qM(e),zW=e=>({[Sk.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Kue(e,t,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const s=qit(i);if(!s&&o.length>1&&!qM(i))return r(zW(i));if(Git(i)){const l=s?i[HM.PATH]:o[0],u=s?i[HM.PATTERN]:i[l];if(!ca(u))throw new Error(vit(l));const c={keyId:BM(l),pattern:u};return n&&(c.searcher=WM(u,t)),c}let a={children:[],operator:o[0]};return o.forEach(l=>{const u=i[l];Ll(u)&&u.forEach(c=>{a.children.push(r(c))})}),a};return qM(e)||(e=zW(e)),r(e)}function Yit(e,{ignoreFieldNorm:t=Re.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:s})=>{const a=i?i.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(t?1:o))}),n.score=r})}function Xit(e,t){const n=e.matches;t.matches=[],Di(n)&&n.forEach(r=>{if(!Di(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let s={indices:i,value:o};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),t.matches.push(s)})}function Kit(e,t){t.score=e.score}function Qit(e,t,{includeMatches:n=Re.includeMatches,includeScore:r=Re.includeScore}={}){const i=[];return n&&i.push(Xit),r&&i.push(Kit),e.map(o=>{const{idx:s}=o,a={item:t[s],refIndex:s};return i.length&&i.forEach(l=>{l(o,a)}),a})}class wm{constructor(t,n={},r){this.options={...Re,...n},this.options.useExtendedSearch,this._keyStore=new Sit(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof $9))throw new Error(yit);this._myIndex=n||que(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Di(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];t(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:a}=this.options;let l=ca(t)?ca(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Yit(l,{ignoreFieldNorm:a}),o&&l.sort(s),Uue(n)&&n>-1&&(l=l.slice(0,n)),Qit(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=WM(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:s,n:a})=>{if(!Di(o))return;const{isMatch:l,score:u,indices:c}=n.searchIn(o);l&&i.push({item:o,idx:s,matches:[{score:u,value:o,norm:a,indices:c}]})}),i}_searchLogical(t){const n=Kue(t,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:f,searcher:d}=a,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:d});return h&&h.length?[{idx:u,item:l,matches:h}]:[]}const c=[];for(let f=0,d=a.children.length;f<d;f+=1){const h=a.children[f],p=r(h,l,u);if(p.length)c.push(...p);else if(a.operator===Sk.AND)return[]}return c},i=this._myIndex.records,o={},s=[];return i.forEach(({$:a,i:l})=>{if(Di(a)){let u=r(n,a,l);u.length&&(o[l]||(o[l]={idx:l,item:a,matches:[]},s.push(o[l])),u.forEach(({matches:c})=>{o[l].matches.push(...c)}))}}),s}_searchObjectList(t){const n=WM(t,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:a})=>{if(!Di(s))return;let l=[];r.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:s[c],searcher:n}))}),l.length&&o.push({idx:a,item:s,matches:l})}),o}_findMatches({key:t,value:n,searcher:r}){if(!Di(n))return[];let i=[];if(Ll(n))n.forEach(({v:o,i:s,n:a})=>{if(!Di(o))return;const{isMatch:l,score:u,indices:c}=r.searchIn(o);l&&i.push({score:u,key:t,value:o,idx:s,norm:a,indices:c})});else{const{v:o,n:s}=n,{isMatch:a,score:l,indices:u}=r.searchIn(o);a&&i.push({score:l,key:t,value:o,norm:s,indices:u})}return i}}wm.version="7.0.0";wm.createIndex=que;wm.parseIndex=Mit;wm.config=Re;wm.parseQuery=Kue;Hit(Wit);const Zit={includeScore:!1,threshold:.3},Jit=e=>new wm(e,Zit);function eot(e){const t=Vt(i=>i.fields),n=T.useMemo(()=>t.map(i=>i.name),[t]);return Jit(n).search(e)}function tot(){var c,f;const{loading:e,initializeSession:t}=Bue(),[n,r]=T.useState(""),i=T.useRef(null),o=d=>{var p,g;const h=((g=d.target.files)==null?void 0:g[((p=d.target.files)==null?void 0:p.length)-1].name)??"";r(h)},s=d=>{r(d.target.value),i.current&&(i.current.value="",i.current.files=null)},a=()=>{i.current&&i.current.click()},l=()=>{var d,h;if((h=(d=i.current)==null?void 0:d.files)!=null&&h.length){const p=i.current.files[0];t(p)}else Xtt(n)&&t(n)},u=!n&&!((f=(c=i.current)==null?void 0:c.files)!=null&&f.length);return{fileInputRef:i,inputDisabled:u,loadingData:e,pathInput:n,handleInputChange:s,handleSubmit:l,handleFileChange:o,handleFileButtonClick:a}}function not(e,t){t.domain&&("nice"in e||"quantiles"in e||"padding"in e,e.domain(t.domain))}function rot(e,t){t.range&&("padding"in e,e.range(t.range))}function iot(e,t){"align"in e&&"align"in t&&typeof t.align<"u"&&e.align(t.align)}function oot(e,t){"base"in e&&"base"in t&&typeof t.base<"u"&&e.base(t.base)}function sot(e,t){"clamp"in e&&"clamp"in t&&typeof t.clamp<"u"&&e.clamp(t.clamp)}function aot(e,t){"constant"in e&&"constant"in t&&typeof t.constant<"u"&&e.constant(t.constant)}function lot(e,t){"exponent"in e&&"exponent"in t&&typeof t.exponent<"u"&&e.exponent(t.exponent)}var jW={lab:Eee,hcl:Aee,"hcl-long":Tee,hsl:Cee,"hsl-long":_ee,cubehelix:Fee,"cubehelix-long":Pee,rgb:tS};function uot(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return jW[e]}var t=e.type,n=e.gamma,r=jW[t];return typeof n>"u"?r:r.gamma(n)}function cot(e,t){if("interpolate"in t&&"interpolate"in e&&typeof t.interpolate<"u"){var n=uot(t.interpolate);e.interpolate(n)}}var fot=new Date(Date.UTC(2020,1,2,3,4,5)),dot="%Y-%m-%d %H:%M";function hot(e){var t=e.tickFormat(1,dot)(fot);return t==="2020-02-02 03:04"}var BW={day:ma,hour:pv,minute:dv,month:og,second:fs,week:zd,year:Ss},UW={day:bl,hour:gv,minute:hv,month:sg,second:fs,week:Bd,year:ks};function pot(e,t){if("nice"in t&&typeof t.nice<"u"&&"nice"in e){var n=t.nice;if(typeof n=="boolean")n&&e.nice();else if(typeof n=="number")e.nice(n);else{var r=e,i=hot(r);if(typeof n=="string")r.nice(i?UW[n]:BW[n]);else{var o=n.interval,s=n.step,a=(i?UW[o]:BW[o]).every(s);a!=null&&r.nice(a)}}}}function got(e,t){"padding"in e&&"padding"in t&&typeof t.padding<"u"&&e.padding(t.padding),"paddingInner"in e&&"paddingInner"in t&&typeof t.paddingInner<"u"&&e.paddingInner(t.paddingInner),"paddingOuter"in e&&"paddingOuter"in t&&typeof t.paddingOuter<"u"&&e.paddingOuter(t.paddingOuter)}function mot(e,t){if(t.reverse){var n=e.range().slice().reverse();"padding"in e,e.range(n)}}function yot(e,t){"round"in t&&typeof t.round<"u"&&(t.round&&"interpolate"in t&&typeof t.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",t):"round"in e?e.round(t.round):"interpolate"in e&&t.round&&e.interpolate(im))}function vot(e,t){"unknown"in e&&"unknown"in t&&typeof t.unknown<"u"&&e.unknown(t.unknown)}function bot(e,t){if("zero"in t&&t.zero===!0){var n=e.domain(),r=n[0],i=n[1],o=i<r,s=o?[i,r]:[r,i],a=s[0],l=s[1],u=[Math.min(0,a),Math.max(0,l)];e.domain(o?u.reverse():u)}}var xot=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],wot={domain:not,nice:pot,zero:bot,interpolate:cot,round:yot,align:iot,base:oot,clamp:sot,constant:aot,exponent:lot,padding:got,range:rot,reverse:mot,unknown:vot};function Sot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Set(t),i=xot.filter(function(o){return r.has(o)});return function(s,a){return typeof a<"u"&&i.forEach(function(l){wot[l](s,a)}),s}}var kot=Sot("domain","range","reverse","clamp","interpolate","nice","round","zero");function Cot(e){return kot($6(),e)}const f0={TOP:12,RIGHT:10,BOTTOM:12,LEFT:10},_ot=6;function Eot({width:e,height:t,r:n}){const r=Vt(p=>p.charts),i=Vt(p=>p.currentChartIndex),{preferredColor:o}=Ua(),s=Us(kt["gray.400"],kt["gray.600"]),a=Math.min(e-f0.LEFT-f0.RIGHT,(_ot+2*n)*r.length),l=t-f0.TOP-f0.BOTTOM,u=e/2,c=l/2+f0.TOP,f=n-Math.floor(r.length/40),d=Cot({domain:[0,r.length-1],range:[u-a/2,u+a/2]});return r.map((p,g)=>({key:`indicator-${p.key}`,cx:d(g),cy:c,r:g===i?2*f:f,fill:p.preferred?o:s,isActive:g===i}))}function Ua(){const e=Eh({base:0,lg:"18px"}),t=Eh({base:window.innerWidth,lg:880}),n=Eh({base:"100vh",lg:"calc(80vh - 18px)"}),r=Eh({base:!0,lg:!1}),i=Us(kt.white,kt["gray.900"]),o=Us(kt.white,kt["gray.900"]),s=Us(kt["gray.200"],kt["gray.700"]),a=Eh({base:320,lg:560}),l=5,u=50,c=Us(kt["gray.100"],kt["gray.800"]),f=Us(ju[600],ju[300]),d=Us(ju[500],ju[400]),h=Us(kt["red.500"],kt["red.200"]),p=Us(kt["orange.50"],kt["orange.800"]),g=Us(kt["orange.100"],kt["orange.700"]);return{accentColor:f,accentHoverColor:d,borderColor:s,preferredColor:h,buttonColor:c,cardPadding:e,cardWidth:t,cardHeight:n,cardColor:o,drawerBgColor:i,tabPanelHeight:a,tabIconSize:l,thumbnailSize:u,mobile:r,scrollbarStyle:{"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:f,borderRadius:"5px"},"&::-webkit-scrollbar-thumb:hover":{background:d}},accentSelected:p,accentSelectedHover:g}}function A9(){const e=xm(r=>r.python),{isLoading:t,data:n}=zue({queryKey:["loadPyodide",e],queryFn:async()=>e==="server"?null:await ob()});return{loadingPyodide:e==="pyodide"&&t,pyodide:n}}function $ot(){const{apiKey:e,setApiKey:t,python:n,setPython:r}=xm(),{loadingPyodide:i}=A9(),{colorMode:o,toggleColorMode:s}=Gg(),a=g_e(),l=p=>{t(p.target.value)},u=()=>{console.log("Downloading logs...")},[c,f]=T.useState("en"),d=async()=>{!await r(n==="pyodide"?"server":"pyodide")&&!a.isActive("server-not-available")&&a({id:"server-not-available",position:"bottom",title:"Server is not available.",description:"Failed to access Python backend. Only local Pyodide is available. Please refer the GitHub README for more information.",status:"error",duration:3e3,isClosable:!0,containerStyle:{margin:10}})};return{python:n,handleServerButtonClick:()=>{d()},apiKey:e,loadingPyodide:i,handleApiKeyChange:l,handleDownloadLogs:u,colorMode:o,toggleColorMode:s,locale:c,setLocale:f}}function Que({chart:e,handleClick:t}){const{drawerBgColor:n,thumbnailSize:r}=Ua(),i=El(a=>a.data),[o,s]=T.useState(e.thumbnail);return T.useEffect(()=>{!o&&i&&(async()=>{const l=await qtt(e.specs[0],i);s(l)})()},[e.specs,i,o]),E.jsxs(yK,{as:Ht,flexDir:"column",children:[E.jsxs(Ht,{p:1,gap:2,borderRadius:"md",onClick:()=>t(e),_hover:{cursor:"pointer",bg:n},children:[!!o&&E.jsx(sK,{src:o,alt:`Chart thumbnail ${e.title}`,w:r,h:r}),E.jsxs(Ht,{flexDir:"column",children:[E.jsx(av,{size:"sm",children:e.fields.map(a=>a.name).join(" & ")}),E.jsx(Mt,{size:"xs",children:"This chart is very good"})]})]}),E.jsx(UP,{my:1})]},`bookmark-${e.key}`)}function Aot({...e}){const{preferredCharts:t,handleClickBookmark:n}=brt();return E.jsx(Nd,{display:"flex",flexDirection:"column",height:"full",...e,children:E.jsx(zP,{m:0,p:0,width:"full",overflowY:"auto",children:t.map(r=>E.jsx(Que,{chart:r,handleClick:n},`bookmark-${r.key}`))})})}function Tot(){const{scrollbarStyle:e,buttonColor:t,borderColor:n,cardColor:r,accentSelected:i,accentSelectedHover:o,accentColor:s}=Ua(),{browsedCharts:a,inputDisabled:l,loading:u,fieldNameMatches:c,selectedFields:f,inputValue:d,setInputValue:h,handleFieldSelection:p,appendChart:g,handleKeydown:y,suggestionCursorIndex:m}=eit();return E.jsxs(Nd,{as:cs,w:"full",alignItems:"center",h:"100%",children:[E.jsxs(Fw,{w:"100%",position:"relative",children:[E.jsxs(xK,{spacing:1,borderRadius:"md",alignItems:"flex-start",w:"100%",flexWrap:"wrap",border:"1px solid",borderColor:n,p:2,children:[f.map(v=>E.jsxs(PK,{borderRadius:"full",colorScheme:mr,children:[E.jsx(RK,{children:v}),E.jsx(OK,{onClick:()=>p(v)})]},v)),E.jsx(Jp,{type:"text",w:"fit-content",h:"fit-content",px:2,minW:48,placeholder:"Input field names to search...",borderColor:"transparent",value:d,onChange:v=>h(v.target.value),disabled:l,_focusVisible:{borderColor:"transparent"},_hover:{borderColor:"transparent"},onKeyDown:y})]}),c.length>0&&E.jsx(cs,{alignItems:"flex-start",borderRadius:6,overflow:"hidden",gap:0,w:"full",borderColor:n,borderWidth:1,position:"absolute",zIndex:1,children:c.map((v,b)=>E.jsx(Fw,{onClick:()=>p(v.item),bgColor:(()=>{const x=f.includes(v.item),w=b===m;return x?w?o:i:w?t:r})(),w:"100%",pl:2,cursor:"pointer",borderTopWidth:1,borderTopColor:n,children:v.item},v.item))})]}),u?E.jsx(dC,{size:"md",my:8,color:s}):E.jsx(zP,{m:0,p:0,width:"full",overflowY:"scroll",sx:e,flex:1,children:a.map(v=>E.jsx(Que,{chart:v,handleClick:()=>{g(v)}},`${v.key}-${v.timestamp}`))})]})}const VW={};function GM(e,t){e===void 0&&(e=VW),t===void 0&&(t=VW);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}function Mot(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Fot(e,t,n){n&&(Mot(n)?n(e.data(t)):e.change(t,Qo.changeset().remove(()=>!0).insert(n)))}function Pot(e,t){Object.keys(t).forEach(n=>{Fot(e,n,t[n])})}function Zue(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Jue=()=>{};function F5(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}var Rot=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const Dot=zl(Rot);function Oot(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Zue([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!Dot(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function WW(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function P5(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function K0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ece extends Bi.PureComponent{constructor(){super(...arguments),K0(this,"containerRef",Bi.createRef()),K0(this,"resultPromise",void 0),K0(this,"handleError",t=>{const{onError:n=Jue}=this.props;n(t,this.containerRef.current),console.warn(t)}),K0(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Zue([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Oot(P5(this.props),P5(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!GM(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&WW(a,o),i&&F5(a,i)),a.run()})}else GM(i,o)||this.modifyView(s=>{o&&WW(s,o),i&&F5(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=P5(this.props);this.resultPromise=oue(this.containerRef.current,a,s).then(l=>{if(l){const{view:u}=l;F5(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Bi.createElement("div",{ref:this.containerRef,className:t,style:n})}}K0(ece,"propTypes",{className:b7.string,onError:b7.func});function YM(){return YM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YM.apply(this,arguments)}function XM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Not={};class tce extends Bi.PureComponent{constructor(){super(...arguments),XM(this,"vegaEmbed",Bi.createRef()),XM(this,"handleNewView",t=>{this.update();const{onNewView:n=Jue}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){GM(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Pot(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Bi.createElement(ece,YM({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}XM(tce,"defaultProps",{data:Not});function KM(){return KM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KM.apply(this,arguments)}function Iot(e){return Bi.createElement(tce,KM({},e,{mode:"vega-lite"}))}function Lot({chart:e,...t}){const{data:n,chartTheme:r,spec:i}=tit(e);return E.jsxs(ld,{maxW:"800px",scrollSnapAlign:"start",...t,children:[E.jsx(av,{children:e.title}),E.jsx(Iot,{spec:i,data:n,theme:r,actions:!1,renderer:"canvas",logLevel:xC}),E.jsx(Ht,{minH:{base:"300px",lg:"0px"}})]})}const zot=T.memo(Lot);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */var jot={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=(e,t)=>{const n=T.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=1.5,className:s="",children:a,...l},u)=>{const c={ref:u,...jot,width:i,height:i,strokeWidth:o,color:r,className:s,...l};return T.createElement("svg",c,(t==null?void 0:t.map(([f,d])=>T.createElement(f,{key:d.id,...d})))??[],...Array.isArray(a)?a:[a])});return n.displayName=`${e}Icon`,n};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Bot=Yt("ArrowDown01Icon",[["path",{d:"M18 9.00005C18 9.00005 13.5811 15 12 15C10.4188 15 6 9 6 9",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Uot=Yt("ArrowLeft01Icon",[["path",{d:"M15 6C15 6 9.00001 10.4189 9 12C8.99999 13.5812 15 18 15 18",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Vot=Yt("ArrowRight01Icon",[["path",{d:"M9.00005 6C9.00005 6 15 10.4189 15 12C15 13.5812 9 18 9 18",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Wot=Yt("Calendar03Icon",[["path",{d:"M18 2V4M6 2V4",stroke:"currentColor",key:"k0"}],["path",{d:"M11.9955 13H12.0045M11.9955 17H12.0045M15.991 13H16M8 13H8.00897M8 17H8.00897",stroke:"currentColor",key:"k1"}],["path",{d:"M3.5 8H20.5",stroke:"currentColor",key:"k2"}],["path",{d:"M2.5 12.2432C2.5 7.88594 2.5 5.70728 3.75212 4.35364C5.00424 3 7.01949 3 11.05 3H12.95C16.9805 3 18.9958 3 20.2479 4.35364C21.5 5.70728 21.5 7.88594 21.5 12.2432V12.7568C21.5 17.1141 21.5 19.2927 20.2479 20.6464C18.9958 22 16.9805 22 12.95 22H11.05C7.01949 22 5.00424 22 3.75212 20.6464C2.5 19.2927 2.5 17.1141 2.5 12.7568V12.2432Z",stroke:"currentColor",key:"k3"}],["path",{d:"M3 8H21",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Hot=Yt("CloudIcon",[["path",{d:"M17.4776 10.0001C17.485 10 17.4925 10 17.5 10C19.9853 10 22 12.0147 22 14.5C22 16.9853 19.9853 19 17.5 19H7C4.23858 19 2 16.7614 2 14C2 11.4003 3.98398 9.26407 6.52042 9.0227M17.4776 10.0001C17.4924 9.83536 17.5 9.66856 17.5 9.5C17.5 6.46243 15.0376 4 12 4C9.12324 4 6.76233 6.20862 6.52042 9.0227M17.4776 10.0001C17.3753 11.1345 16.9286 12.1696 16.2428 13M6.52042 9.0227C6.67826 9.00768 6.83823 9 7 9C8.12582 9 9.16474 9.37209 10.0005 10",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const qot=Yt("Exchange01Icon",[["path",{d:"M16.9767 19.5C19.4017 17.8876 21 15.1305 21 12C21 7.02944 16.9706 3 12 3C11.3126 3 10.6432 3.07706 10 3.22302M16.9767 19.5V16M16.9767 19.5H20.5M7 4.51555C4.58803 6.13007 3 8.87958 3 12C3 16.9706 7.02944 21 12 21C12.6874 21 13.3568 20.9229 14 20.777M7 4.51555V8M7 4.51555H3.5",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Got=Yt("FileAttachmentIcon",[["path",{d:"M4 12.0004L4 14.5446C4 17.7896 4 19.4121 4.88607 20.5111C5.06508 20.7331 5.26731 20.9354 5.48933 21.1144C6.58831 22.0004 8.21082 22.0004 11.4558 22.0004C12.1614 22.0004 12.5141 22.0004 12.8372 21.8864C12.9044 21.8627 12.9702 21.8354 13.0345 21.8047C13.3436 21.6569 13.593 21.4074 14.0919 20.9085L18.8284 16.172C19.4065 15.5939 19.6955 15.3049 19.8478 14.9374C20 14.5698 20 14.1611 20 13.3436V10.0004C20 6.22919 20 4.34358 18.8284 3.172C17.7693 2.11284 16.1265 2.01122 13.0345 2.00146M13 21.5004V21.0004C13 18.172 13 16.7578 13.8787 15.8791C14.7574 15.0004 16.1716 15.0004 19 15.0004H19.5",stroke:"currentColor",key:"k0"}],["path",{d:"M4 8.23028V5.46105C4 3.54929 5.567 1.99951 7.5 1.99951C9.433 1.99951 11 3.54929 11 5.46105V9.26874C11 10.2246 10.2165 10.9995 9.25 10.9995C8.2835 10.9995 7.5 10.2246 7.5 9.26874V5.46105",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Yot=Yt("GithubIcon",[["path",{d:"M10 20.5675C6.57143 21.7248 3.71429 20.5675 2 17",stroke:"currentColor",key:"k0"}],["path",{d:"M10 22V18.7579C10 18.1596 10.1839 17.6396 10.4804 17.1699C10.6838 16.8476 10.5445 16.3904 10.1771 16.2894C7.13394 15.4528 5 14.1077 5 9.64606C5 8.48611 5.38005 7.39556 6.04811 6.4464C6.21437 6.21018 6.29749 6.09208 6.31748 5.9851C6.33746 5.87813 6.30272 5.73852 6.23322 5.45932C5.95038 4.32292 5.96871 3.11619 6.39322 2.02823C6.39322 2.02823 7.27042 1.74242 9.26698 2.98969C9.72282 3.27447 9.95075 3.41686 10.1515 3.44871C10.3522 3.48056 10.6206 3.41384 11.1573 3.28041C11.8913 3.09795 12.6476 3 13.5 3C14.3524 3 15.1087 3.09795 15.8427 3.28041C16.3794 3.41384 16.6478 3.48056 16.8485 3.44871C17.0493 3.41686 17.2772 3.27447 17.733 2.98969C19.7296 1.74242 20.6068 2.02823 20.6068 2.02823C21.0313 3.11619 21.0496 4.32292 20.7668 5.45932C20.6973 5.73852 20.6625 5.87813 20.6825 5.9851C20.7025 6.09207 20.7856 6.21019 20.9519 6.4464C21.6199 7.39556 22 8.48611 22 9.64606C22 14.1077 19.8661 15.4528 16.8229 16.2894C16.4555 16.3904 16.3162 16.8476 16.5196 17.1699C16.8161 17.6396 17 18.1596 17 18.7579V22",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Xot=Yt("GridIcon",[["path",{d:"M7 2V22",stroke:"currentColor",key:"k0"}],["path",{d:"M17 2V22",stroke:"currentColor",key:"k1"}],["path",{d:"M22 7L2 7",stroke:"currentColor",key:"k2"}],["path",{d:"M22 17L2 17",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Kot=Yt("HeartAddIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 17H22M18 13L18 21",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const nce=Yt("HeartCheckIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 18C14 18 15 18 16 20C16 20 19.1765 15 22 14",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Qot=Yt("LabelImportantIcon",[["path",{d:"M13 4H6.23456C3.79424 4 2.57407 4 2.14438 4.76649C2.13129 4.78984 2.11883 4.81353 2.10701 4.83754C1.71893 5.62592 2.41032 6.63129 3.7931 8.64204C4.89612 10.246 5.44763 11.048 5.4611 11.9555C5.46154 11.9852 5.46154 12.0148 5.4611 12.0445C5.44763 12.952 4.89612 13.754 3.7931 15.358C2.41032 17.3687 1.71893 18.3741 2.10701 19.1625C2.11883 19.1865 2.13129 19.2102 2.14438 19.2335C2.57407 20 3.79424 20 6.23456 20H13C14.9628 20 15.9443 20 16.7889 19.5777C17.6334 19.1554 18.2223 18.3703 19.4 16.8C21.1333 14.4889 22 13.3333 22 12C22 10.6667 21.1333 9.51111 19.4 7.2C18.2223 5.62972 17.6334 4.84458 16.7889 4.42229C15.9443 4 14.9628 4 13 4Z",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Zot=Yt("Moon01Icon",[["path",{d:"M21.0985 7.84477C20.458 8.55417 19.5311 9 18.5 9C16.567 9 15 7.433 15 5.5C15 4.46895 15.4458 3.54203 16.1552 2.90149M21.0985 7.84477C21.6774 9.11025 22 10.5174 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C13.4826 2 14.8898 2.32262 16.1552 2.90149M21.0985 7.84477C20.0998 5.66155 18.3384 3.90018 16.1552 2.90149",stroke:"currentColor",key:"k0"}],["path",{d:"M10 8H10.0064",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14H7.00635",stroke:"currentColor",key:"k2"}],["path",{d:"M16 16C16 17.1046 15.1046 18 14 18C12.8954 18 12 17.1046 12 16C12 14.8954 12.8954 14 14 14C15.1046 14 16 14.8954 16 16Z",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Jot=Yt("PresentationBarChart01Icon",[["path",{d:"M12 18V22",stroke:"currentColor",key:"k0"}],["path",{d:"M10 18L5 22",stroke:"currentColor",key:"k1"}],["path",{d:"M14 18L19 22",stroke:"currentColor",key:"k2"}],["path",{d:"M2.5 12C2.5 14.8284 2.5 16.2426 3.37868 17.1213C4.25736 18 5.67157 18 8.5 18H15.5C18.3284 18 19.7426 18 20.6213 17.1213C21.5 16.2426 21.5 14.8284 21.5 12V8C21.5 5.17157 21.5 3.75736 20.6213 2.87868C19.7426 2 18.3284 2 15.5 2H8.5C5.67157 2 4.25736 2 3.37868 2.87868C2.5 3.75736 2.5 5.17157 2.5 8V12Z",stroke:"currentColor",key:"k3"}],["path",{d:"M8 13V10M12 13V7M16 13V11",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const est=Yt("ProfileIcon",[["path",{d:"M2.5 12C2.5 7.52166 2.5 5.28249 3.89124 3.89124C5.28249 2.5 7.52166 2.5 12 2.5C16.4783 2.5 18.7175 2.5 20.1088 3.89124C21.5 5.28249 21.5 7.52166 21.5 12C21.5 16.4783 21.5 18.7175 20.1088 20.1088C18.7175 21.5 16.4783 21.5 12 21.5C7.52166 21.5 5.28249 21.5 3.89124 20.1088C2.5 18.7175 2.5 16.4783 2.5 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 7L17 7",stroke:"currentColor",key:"k1"}],["path",{d:"M7 7L8 7",stroke:"currentColor",key:"k2"}],["path",{d:"M7 12L8 12",stroke:"currentColor",key:"k3"}],["path",{d:"M7 17L8 17",stroke:"currentColor",key:"k4"}],["path",{d:"M11 12L17 12",stroke:"currentColor",key:"k5"}],["path",{d:"M11 17L17 17",stroke:"currentColor",key:"k6"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const tst=Yt("Search01Icon",[["path",{d:"M17.5 17.5L22 22",stroke:"currentColor",key:"k0"}],["path",{d:"M20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C15.9706 20 20 15.9706 20 11Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const nst=Yt("Settings01Icon",[["path",{d:"M21.3175 7.14139L20.8239 6.28479C20.4506 5.63696 20.264 5.31305 19.9464 5.18388C19.6288 5.05472 19.2696 5.15664 18.5513 5.36048L17.3311 5.70418C16.8725 5.80994 16.3913 5.74994 15.9726 5.53479L15.6357 5.34042C15.2766 5.11043 15.0004 4.77133 14.8475 4.37274L14.5136 3.37536C14.294 2.71534 14.1842 2.38533 13.9228 2.19657C13.6615 2.00781 13.3143 2.00781 12.6199 2.00781H11.5051C10.8108 2.00781 10.4636 2.00781 10.2022 2.19657C9.94085 2.38533 9.83106 2.71534 9.61149 3.37536L9.27753 4.37274C9.12465 4.77133 8.84845 5.11043 8.48937 5.34042L8.15249 5.53479C7.73374 5.74994 7.25259 5.80994 6.79398 5.70418L5.57375 5.36048C4.85541 5.15664 4.49625 5.05472 4.17867 5.18388C3.86109 5.31305 3.67445 5.63696 3.30115 6.28479L2.80757 7.14139C2.45766 7.74864 2.2827 8.05227 2.31666 8.37549C2.35061 8.69871 2.58483 8.95918 3.05326 9.48012L4.0843 10.6328C4.3363 10.9518 4.51521 11.5078 4.51521 12.0077C4.51521 12.5078 4.33636 13.0636 4.08433 13.3827L3.05326 14.5354C2.58483 15.0564 2.35062 15.3168 2.31666 15.6401C2.2827 15.9633 2.45766 16.2669 2.80757 16.8741L3.30114 17.7307C3.67443 18.3785 3.86109 18.7025 4.17867 18.8316C4.49625 18.9608 4.85542 18.8589 5.57377 18.655L6.79394 18.3113C7.25263 18.2055 7.73387 18.2656 8.15267 18.4808L8.4895 18.6752C8.84851 18.9052 9.12464 19.2442 9.2775 19.6428L9.61149 20.6403C9.83106 21.3003 9.94085 21.6303 10.2022 21.8191C10.4636 22.0078 10.8108 22.0078 11.5051 22.0078H12.6199C13.3143 22.0078 13.6615 22.0078 13.9228 21.8191C14.1842 21.6303 14.294 21.3003 14.5136 20.6403L14.8476 19.6428C15.0004 19.2442 15.2765 18.9052 15.6356 18.6752L15.9724 18.4808C16.3912 18.2656 16.8724 18.2055 17.3311 18.3113L18.5513 18.655C19.2696 18.8589 19.6288 18.9608 19.9464 18.8316C20.264 18.7025 20.4506 18.3785 20.8239 17.7307L21.3175 16.8741C21.6674 16.2669 21.8423 15.9633 21.8084 15.6401C21.7744 15.3168 21.5402 15.0564 21.0718 14.5354L20.0407 13.3827C19.7887 13.0636 19.6098 12.5078 19.6098 12.0077C19.6098 11.5078 19.7888 10.9518 20.0407 10.6328L21.0718 9.48012C21.5402 8.95918 21.7744 8.69871 21.8084 8.37549C21.8423 8.05227 21.6674 7.74864 21.3175 7.14139Z",stroke:"currentColor",key:"k0"}],["path",{d:"M15.5195 12C15.5195 13.933 13.9525 15.5 12.0195 15.5C10.0865 15.5 8.51953 13.933 8.51953 12C8.51953 10.067 10.0865 8.5 12.0195 8.5C13.9525 8.5 15.5195 10.067 15.5195 12Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const rst=Yt("SmartPhone01Icon",[["path",{d:"M5 9C5 5.70017 5 4.05025 6.02513 3.02513C7.05025 2 8.70017 2 12 2C15.2998 2 16.9497 2 17.9749 3.02513C19 4.05025 19 5.70017 19 9V15C19 18.2998 19 19.9497 17.9749 20.9749C16.9497 22 15.2998 22 12 22C8.70017 22 7.05025 22 6.02513 20.9749C5 19.9497 5 18.2998 5 15V9Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 19H13",stroke:"currentColor",key:"k1"}],["path",{d:"M9 2L9.089 2.53402C9.28188 3.69129 9.37832 4.26993 9.77519 4.62204C10.1892 4.98934 10.7761 5 12 5C13.2239 5 13.8108 4.98934 14.2248 4.62204C14.6217 4.26993 14.7181 3.69129 14.911 2.53402L15 2",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const rce=Yt("StartUp02Icon",[["path",{d:"M7 11.2947C12.284 1.44656 18.8635 1.333 21.4928 2.50724C22.667 5.1365 22.5534 11.716 12.7053 17C12.6031 16.4129 12.0352 14.8749 10.5801 13.4199C9.12512 11.9648 7.58712 11.3969 7 11.2947Z",stroke:"currentColor",key:"k0"}],["path",{d:"M14 16.8C16.0428 17.7334 16.2609 19.4069 16.5439 21C16.5439 21 20.8223 18.0481 18.0856 14",stroke:"currentColor",key:"k1"}],["path",{d:"M7.19998 9.99987C6.26664 7.95709 4.59305 7.73899 3 7.45601C3 7.45601 5.95194 3.17753 10 5.91431",stroke:"currentColor",key:"k2"}],["path",{d:"M6.20866 13.9998C5.57677 14.6317 4.50255 16.4642 5.26082 18.739C7.53564 19.4973 9.36813 18.4231 10 17.7912",stroke:"currentColor",key:"k3"}],["path",{d:"M18.0952 7.753C18.0952 6.7328 17.2682 5.90578 16.248 5.90578C15.2278 5.90578 14.4008 6.7328 14.4008 7.753C14.4008 8.77319 15.2278 9.60022 16.248 9.60022C17.2682 9.60022 18.0952 8.77319 18.0952 7.753Z",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const ist=Yt("Sun03Icon",[["path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M12 2V3.5M12 20.5V22M19.0708 19.0713L18.0101 18.0106M5.98926 5.98926L4.9286 4.9286M22 12H20.5M3.5 12H2M19.0713 4.92871L18.0106 5.98937M5.98975 18.0107L4.92909 19.0714",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const ost=Yt("SwipeLeft02Icon",[["path",{d:"M15 4.50195H21M15 4.50195C15 3.80172 16.9943 2.49348 17.5 2.00195M15 4.50195C15 5.20218 16.9943 6.51042 17.5 7.00195",stroke:"currentColor",key:"k0"}],["path",{d:"M15.3913 21.998C15.3395 20.084 15.4684 19.8535 15.6052 19.4277C15.7419 19.002 16.6982 17.4665 17.0366 16.3695C18.1313 12.8202 17.111 12.0653 15.7507 11.0588C14.2422 9.94257 11.3968 9.37728 9.98573 9.49966V3.7462C9.98573 2.78288 9.20481 2.00195 8.24148 2.00195C7.27816 2.00195 6.49723 2.78288 6.49723 3.7462V9.96607M6.49774 21.9988V20.9854C6.43328 20.041 5.49529 18.9235 4.32672 17.3166C3.12509 15.576 2.86688 14.6973 3.05591 13.8848C3.15329 13.4694 3.40594 12.7832 4.64647 11.6104L6.49723 9.96607M6.49723 14.0323V9.96607",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const sst=Yt("Tag01Icon",[["circle",{cx:"1.5",cy:"1.5",r:"1.5",transform:"matrix(1 0 0 -1 16 8)",stroke:"currentColor",key:"k0"}],["path",{d:"M2.77423 11.1439C1.77108 12.2643 1.7495 13.9546 2.67016 15.1437C4.49711 17.5033 6.49674 19.5029 8.85633 21.3298C10.0454 22.2505 11.7357 22.2289 12.8561 21.2258C15.8979 18.5022 18.6835 15.6559 21.3719 12.5279C21.6377 12.2187 21.8039 11.8397 21.8412 11.4336C22.0062 9.63798 22.3452 4.46467 20.9403 3.05974C19.5353 1.65481 14.362 1.99377 12.5664 2.15876C12.1603 2.19608 11.7813 2.36233 11.472 2.62811C8.34412 5.31646 5.49781 8.10211 2.77423 11.1439Z",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14L10 17",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const ast=Yt("TextFontIcon",[["path",{d:"M14 19L11.1069 10.7479C9.76348 6.91597 9.09177 5 8 5C6.90823 5 6.23652 6.91597 4.89309 10.7479L2 19M4.5 12H11.5",stroke:"currentColor",key:"k0"}],["path",{d:"M21.9692 13.9392V18.4392M21.9692 13.9392C22.0164 13.1161 22.0182 12.4891 21.9194 11.9773C21.6864 10.7709 20.4258 10.0439 19.206 9.89599C18.0385 9.75447 17.1015 10.055 16.1535 11.4363M21.9692 13.9392L19.1256 13.9392C18.6887 13.9392 18.2481 13.9603 17.8272 14.0773C15.2545 14.7925 15.4431 18.4003 18.0233 18.845C18.3099 18.8944 18.6025 18.9156 18.8927 18.9026C19.5703 18.8724 20.1955 18.545 20.7321 18.1301C21.3605 17.644 21.9692 16.9655 21.9692 15.9392V13.9392Z",stroke:"currentColor",key:"k1"}]]);function lst(){return E.jsxs(cs,{w:"full",color:"gray",gap:1,mt:4,p:0,children:[E.jsxs(Ht,{gap:1,children:[E.jsx(Mt,{fontSize:"xs",textAlign:"center",children:"Swipytics @ 2024"}),E.jsx(p2,{href:"https://jiwnchoi.me",isExternal:!0,children:E.jsx(Mt,{fontSize:"xs",textAlign:"center",textDecoration:"underline",children:"Jiwon Choi"})}),E.jsx(Mt,{fontSize:"xs",textAlign:"center",children:"All rights reserved."})]}),E.jsxs(Ht,{gap:4,children:[E.jsx(p2,{href:"https://github.com/jiwnchoi/Swipytics",isExternal:!0,children:E.jsx(ko,{leftIcon:E.jsx(yt,{as:Yot}),size:"xs",variant:"link",color:"gray",children:"Github"})}),E.jsx(p2,{href:"https://idclab.skku.edu",isExternal:!0,children:E.jsxs(ko,{variant:"link",size:"xs",leftIcon:E.jsx(yt,{as:Qot}),color:"gray",children:[E.jsx(Mt,{fontFamily:"Rajdhani",fontWeight:600,fontSize:"sm",children:"IDC"}),E.jsx(Mt,{fontFamily:"Rajdhani",fontWeight:500,fontSize:"sm",children:"Lab"})]})})]})]})}function ust(e){const{mobile:t}=Ua();return E.jsxs(Ht,{justify:t?"start":"center",...e,children:[E.jsxs(ld,{flexDir:"column",minH:"400px",children:[E.jsxs(ld,{gap:2,mb:4,children:[E.jsx(yt,{as:ost,boxSize:16}),E.jsx(av,{fontSize:48,children:"Swipytics"})]}),E.jsx(Mt,{textColor:"gray",textAlign:"center",children:"The Simplest On-the-fly Exploratory Analytics"})]}),E.jsx(lst,{})]})}const cst=T.memo(ust);function fst(e){const{charts:t,ref:n}=rit(),{cardHeight:r,cardColor:i,cardWidth:o}=Ua();return E.jsxs(Ht,{ref:n,scrollSnapType:"x mandatory",overflowX:"auto",style:{WebkitOverflowScrolling:"touch"},sx:{"&::-webkit-scrollbar":{display:"none"}},...e,children:[E.jsx(cst,{flexDir:"column",minW:"full",w:o,maxW:o,minH:r,bgColor:i,borderRadius:"lg",scrollSnapAlign:"center"}),t.map(s=>E.jsx(zot,{minW:o,maxW:o,chart:s,minH:r,bgColor:i,flexDirection:"column",borderRadius:"lg"},s.key))]})}function dst(e){const{sessionInitialized:t,chartDisplaying:n,currentChartPreferred:r,handleNextChart:i,handlePrevChart:o,handleRenewChart:s,handlePreferChart:a}=iit();return E.jsxs(aK,{...e,children:[E.jsx(ko,{py:8,size:"lg",w:"full","aria-label":"Previous chart",onClick:o,isDisabled:!t||!n,variant:"ghost",children:E.jsxs(cs,{spacing:2,children:[E.jsx(yt,{as:Uot,boxSize:6}),E.jsx(Mt,{fontSize:"sm",children:"Prev"})]})}),E.jsx(ko,{py:8,size:"lg",w:"full","aria-label":"Next chart",onClick:i,isDisabled:!t,variant:"ghost",children:E.jsxs(cs,{spacing:2,children:[E.jsx(yt,{as:Vot,boxSize:6}),E.jsx(Mt,{fontSize:"sm",children:"Next"})]})}),E.jsx(ko,{py:8,size:"lg",w:"full","aria-label":"Renew current chart",onClick:s,isDisabled:!t||!n,variant:"ghost",children:E.jsxs(cs,{spacing:2,children:[E.jsx(yt,{as:qot,boxSize:6}),E.jsx(Mt,{fontSize:"sm",children:"Redesign"})]})}),E.jsx(ko,{py:8,size:"lg",w:"full","aria-label":"Bookmark current chart",onClick:a,colorScheme:r?"red":"gray",isDisabled:!t||!n,variant:r?"solid":"ghost",children:E.jsxs(cs,{spacing:2,children:[E.jsx(yt,{as:r?nce:Kot,boxSize:6}),E.jsx(Mt,{fontSize:"sm",children:"Like"})]})})]})}function hst({children:e,controller:t,...n}){const{animate:r,dragControls:i,handleDragEnd:o,bodyRef:s,handleRef:a,navigatorRef:l,navigatorBounds:u,variants:c}=cit(),{drawerBgColor:f,borderColor:d}=Ua();return E.jsxs(fC.div,{dragControls:i,style:{width:"100%",left:0,position:"fixed"},variants:c,initial:r,animate:r,drag:"y",dragListener:!0,dragConstraints:{bottom:0,top:0},dragElastic:0,onDragEnd:o,whileTap:{cursor:"grabbing"},children:[E.jsxs(ld,{h:"fit-content",flexDir:"column",gap:0,border:"1px solid",borderColor:d,borderRadius:"xl",boxShadow:"0px -4px 10px rgba(0, 0, 0, 0.1)",bgColor:f,...n,children:[E.jsx(Ht,{bgColor:"gray",minH:1,mt:2,borderRadius:4,minW:10,ref:a}),E.jsx(Ht,{w:"full",ref:s,p:4,flexDir:"column",children:e}),E.jsx(Ht,{minH:"100dvh"})]}),E.jsx(J1,{children:E.jsx(Ht,{borderX:"1px solid",borderBottom:"1px solid",borderColor:d,onPointerDown:h=>i.start(h),bgColor:f,ref:l,position:"absolute",top:`calc(100dvh - ${u.height}px)`,p:4,pb:8,left:0,zIndex:500,w:"full",children:t})})]})}function pst({children:e,...t}){const{tabPanelHeight:n}=Ua();return E.jsx(Ht,{...t,children:E.jsx(cs,{w:"full",h:n,gap:4,rounded:"lg",p:4,align:"start",minH:"full",children:e})})}function gst({children:e,controller:t,...n}){const{mobile:r}=Ua();return r?E.jsx(hst,{...n,controller:t,children:e}):E.jsxs(pst,{...n,children:[e,E.jsx(jP,{}),t]})}function mst(e){const{loadingPyodide:t}=A9(),{loadingData:n,fileInputRef:r,pathInput:i,inputDisabled:o,handleFileButtonClick:s,handleFileChange:a,handleInputChange:l,handleSubmit:u}=tot();return E.jsxs(Ht,{as:uK,...e,children:[E.jsxs(pK,{children:[E.jsx(Jp,{placeholder:"https://...",onChange:l,value:i,borderRightRadius:0,_focusVisible:{borderColor:mr}}),E.jsxs(IP,{children:[E.jsx(Jp,{type:"file",display:"none",ref:r,onChange:a,accept:".csv,.json"}),E.jsx(Mw,{"aria-label":"Select File",icon:E.jsx(yt,{as:Got}),variant:"link",onClick:s})]})]}),E.jsx(Mw,{borderLeftRadius:0,colorScheme:mr,type:"submit",isLoading:n||t,icon:E.jsx(yt,{as:rce}),"aria-label":"Load Data",isDisabled:o,onClick:u,children:o?"Please Input Data":"Load Data"})]})}const yst=({metadataType:e,...t})=>{switch(e){case"numeric":return E.jsx(yt,{as:Xot,...t});case"categorical":return E.jsx(yt,{as:ast,...t});case"datetime":return E.jsx(yt,{as:Wot,...t});case"name":return E.jsx(yt,{as:sst,...t});default:return null}},d0=fv(".3~s");function Xo({children:e}){return E.jsx(Ht,{flexDir:"column",justify:"center",alignItems:"start",w:"full",h:"full",children:E.jsx(SK,{children:e})})}function vst({metadata:e}){switch(e.type){case"datetime":return E.jsxs(my,{gridTemplateColumns:"1fr 4fr",children:[E.jsx(Xo,{children:"min"}),E.jsx(Mt,{children:e.min}),E.jsx(Xo,{children:"max"}),E.jsx(Mt,{children:e.max})]});case"numeric":return E.jsxs(my,{gridTemplateColumns:"2fr 3fr 2fr 3fr",children:[E.jsx(Xo,{children:"min"}),E.jsx(Mt,{children:d0(e.min)}),E.jsx(Xo,{children:"max"}),E.jsx(Mt,{children:d0(e.max)}),E.jsx(Xo,{children:"mean"}),E.jsx(Mt,{children:d0(e.mean)}),E.jsx(Xo,{children:"median"}),E.jsx(Mt,{children:d0(e.median)}),E.jsx(Xo,{children:"std"}),E.jsx(Mt,{children:d0(e.std)})]});case"categorical":return E.jsxs(my,{gridTemplateColumns:"1fr 4fr",children:[E.jsx(Xo,{children:"top"}),E.jsx(Mt,{children:e.top}),E.jsx(Xo,{children:"freq"}),E.jsx(Mt,{children:e.freq})]});case"name":default:return null}}function bst({field:e}){return E.jsxs(nK,{children:[E.jsx(JX,{borderRadius:"md",children:E.jsxs(Ht,{w:"full",gap:2,align:"center",children:[E.jsx(yst,{metadataType:e.type,boxSize:4}),E.jsx(av,{fontSize:"md",children:e.name}),E.jsx(jP,{}),E.jsx(tK,{})]})}),E.jsxs(iK,{px:2,pb:2,children:[E.jsxs(my,{gridTemplateColumns:"2fr 3fr 2fr 3fr",children:[E.jsx(Xo,{children:"unique"}),E.jsx(Mt,{children:e.metadata.unique}),E.jsx(Xo,{children:"missing"}),E.jsx(Mt,{children:e.metadata.missing})]}),E.jsx(vst,{metadata:e.metadata})]})]})}function xst(e){const t=Vt(n=>n.fields);return E.jsx(Nd,{as:cs,h:"full",...e,children:E.jsx(Ht,{h:"full",w:"full",overflowY:"auto",flexDir:"column",children:E.jsx(oK,{allowMultiple:!0,children:t.map(n=>E.jsx(bst,{field:n},n.name))})})})}function wst(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ice=wst,Sst=typeof Au=="object"&&Au&&Au.Object===Object&&Au,kst=Sst,Cst=kst,_st=typeof self=="object"&&self&&self.Object===Object&&self,Est=Cst||_st||Function("return this")(),oce=Est,$st=oce,Ast=function(){return $st.Date.now()},Tst=Ast,Mst=/\s/;function Fst(e){for(var t=e.length;t--&&Mst.test(e.charAt(t)););return t}var Pst=Fst,Rst=Pst,Dst=/^\s+/;function Ost(e){return e&&e.slice(0,Rst(e)+1).replace(Dst,"")}var Nst=Ost,Ist=oce,Lst=Ist.Symbol,sce=Lst,HW=sce,ace=Object.prototype,zst=ace.hasOwnProperty,jst=ace.toString,h0=HW?HW.toStringTag:void 0;function Bst(e){var t=zst.call(e,h0),n=e[h0];try{e[h0]=void 0;var r=!0}catch{}var i=jst.call(e);return r&&(t?e[h0]=n:delete e[h0]),i}var Ust=Bst,Vst=Object.prototype,Wst=Vst.toString;function Hst(e){return Wst.call(e)}var qst=Hst,qW=sce,Gst=Ust,Yst=qst,Xst="[object Null]",Kst="[object Undefined]",GW=qW?qW.toStringTag:void 0;function Qst(e){return e==null?e===void 0?Kst:Xst:GW&&GW in Object(e)?Gst(e):Yst(e)}var Zst=Qst;function Jst(e){return e!=null&&typeof e=="object"}var eat=Jst,tat=Zst,nat=eat,rat="[object Symbol]";function iat(e){return typeof e=="symbol"||nat(e)&&tat(e)==rat}var oat=iat,sat=Nst,YW=ice,aat=oat,XW=NaN,lat=/^[-+]0x[0-9a-f]+$/i,uat=/^0b[01]+$/i,cat=/^0o[0-7]+$/i,fat=parseInt;function dat(e){if(typeof e=="number")return e;if(aat(e))return XW;if(YW(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=YW(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=sat(e);var n=uat.test(e);return n||cat.test(e)?fat(e.slice(2),n?2:8):lat.test(e)?XW:+e}var hat=dat,pat=ice,R5=Tst,KW=hat,gat="Expected a function",mat=Math.max,yat=Math.min;function vat(e,t,n){var r,i,o,s,a,l,u=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(gat);t=KW(t)||0,pat(n)&&(c=!!n.leading,f="maxWait"in n,o=f?mat(KW(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d);function h(k){var S=r,C=i;return r=i=void 0,u=k,s=e.apply(C,S),s}function p(k){return u=k,a=setTimeout(m,t),c?h(k):s}function g(k){var S=k-l,C=k-u,_=t-S;return f?yat(_,o-C):_}function y(k){var S=k-l,C=k-u;return l===void 0||S>=t||S<0||f&&C>=o}function m(){var k=R5();if(y(k))return v(k);a=setTimeout(m,g(k))}function v(k){return a=void 0,d&&r?h(k):(r=i=void 0,s)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function x(){return a===void 0?s:v(R5())}function w(){var k=R5(),S=y(k);if(r=arguments,i=this,l=k,S){if(a===void 0)return p(l);if(f)return clearTimeout(a),a=setTimeout(m,t),h(l)}return a===void 0&&(a=setTimeout(m,t)),s}return w.cancel=b,w.flush=x,w}var bat=vat;const xat=zl(bat);function kk(){return kk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kk.apply(this,arguments)}var wat=[],QW={width:0,height:0,top:0,left:0};function Sat(e){var t=e===void 0?{}:e,n=t.initialSize,r=n===void 0?QW:n,i=t.debounceTime,o=i===void 0?300:i,s=t.ignoreDimensions,a=s===void 0?wat:s,l=t.enableDebounceLeadingCall,u=l===void 0?!0:l,c=t.resizeObserverPolyfill,f=T.useRef(null),d=T.useRef(0),h=T.useState(kk({},QW,r)),p=h[0],g=h[1],y=T.useMemo(function(){var m=Array.isArray(a)?a:[a];return xat(function(v){g(function(b){var x=Object.keys(b),w=x.filter(function(S){return b[S]!==v[S]}),k=w.every(function(S){return m.includes(S)});return k?b:v})},o,{leading:u})},[o,u,a]);return T.useEffect(function(){var m=c||window.ResizeObserver,v=new m(function(b){b.forEach(function(x){var w,k=(w=x==null?void 0:x.contentRect)!=null?w:{},S=k.left,C=k.top,_=k.width,$=k.height;d.current=window.requestAnimationFrame(function(){y({width:_,height:$,top:C,left:S})})})});return f.current&&v.observe(f.current),function(){window.cancelAnimationFrame(d.current),v.disconnect(),y.cancel()}},[y,c]),kk({parentRef:f,resize:y},p)}function kat({width:e,height:t,r:n}){return Eot({width:e,height:t,r:n}).map(({key:i,cx:o,cy:s,r:a,fill:l})=>E.jsx(fC.circle,{cy:s,initial:{r:0},animate:{cx:o,r:a,fill:l},transition:{type:"spring",stiffness:100,damping:20,fill:{duration:.3}}},i))}function Cat(e){const{parentRef:t,width:n,height:r}=Sat({debounceTime:50});return E.jsx(Ht,{ref:t,position:"absolute",minH:`${12*2+4*2}px`,...e,children:E.jsx("svg",{width:n,height:r,children:E.jsx(kat,{width:n,height:r,r:3})})})}function rf({label:e,children:t,...n}){return E.jsxs(Ht,{w:"full",flexDir:"row",justify:"space-between",alignItems:"center",...n,children:[E.jsx(Mt,{minW:"130px",children:e}),t]})}function _at(){const{handleSubmit:e,loading:t,selectedDemo:n,handleDemoSelect:r}=fit(),{loadingPyodide:i}=A9();return E.jsxs(E.Fragment,{children:[E.jsx(VP,{size:"sm",onChange:o=>r(yW.find(s=>s.name===o.target.value)??null),placeholder:"Select Demo",variant:"outline",colorScheme:mr,icon:E.jsx(yt,{as:Bot}),borderRightRadius:0,children:yW.map(o=>E.jsx("option",{value:o.name,children:o.name},o.name))}),E.jsx(Mw,{borderLeftRadius:0,colorScheme:mr,type:"submit",isLoading:t||i,isDisabled:!n||i,icon:E.jsx(yt,{as:rce}),"aria-label":"Load Data",onClick:e})]})}function Eat(e){const{python:t,handleServerButtonClick:n,apiKey:r,handleApiKeyChange:i,handleDownloadLogs:o,colorMode:s,toggleColorMode:a,locale:l,setLocale:u}=$ot();return E.jsxs(Nd,{as:cs,...e,children:[E.jsx(rf,{label:"Load Data",children:E.jsx(mst,{w:"full"})}),E.jsx(rf,{label:"Load Demo",children:E.jsx(_at,{})}),E.jsx(rf,{label:"OpenAI Key",children:E.jsx(Jp,{w:"full",placeholder:"sk-...",value:r,onChange:i})}),E.jsx(UP,{my:4}),E.jsx(rf,{label:"Locale",children:E.jsxs(VP,{size:"sm",variant:"outline",value:l,onChange:c=>{u(c.target.value)},children:[E.jsx("option",{value:"en",children:"English"}),E.jsx("option",{value:"ko",children:"한국어"})]})}),E.jsx(rf,{label:"Color Mode",children:E.jsx(ko,{leftIcon:E.jsx(yt,{as:s==="light"?ist:Zot}),onClick:a,size:"sm",w:"full",children:s==="light"?"Light":"Dark"})}),E.jsx(rf,{label:"Backend",children:E.jsx(ko,{leftIcon:E.jsx(yt,{as:t==="server"?Hot:rst}),onClick:n,size:"sm",w:"full",children:t[0].toUpperCase()+t.slice(1)})}),E.jsx(rf,{label:"System Logs",children:E.jsxs(Ht,{gap:2,w:"full",children:[E.jsx(ko,{w:"full",onClick:o,children:"Load Latest"}),E.jsx(ko,{w:"full",onClick:o,children:"Download"})]})})]})}function $at({tabs:e,...t}){const{tabIconSize:n,tabPanelHeight:r,scrollbarStyle:i}=Ua(),s=Vt(l=>l.fields).length>0,a=e.findIndex(l=>l.type==="Settings");return E.jsxs($K,{w:"full",defaultIndex:a,isFitted:!0,colorScheme:mr,...t,children:[E.jsx(AK,{children:e.map(l=>E.jsxs(MK,{gap:1,as:ld,flexDir:"column",isDisabled:!s&&!l.displayingBeforeInit,children:[E.jsx(yt,{boxSize:n,as:l.icon}),E.jsx(Mt,{fontSize:12,children:l.type})]},`tab-${l.type}`))}),E.jsx(TK,{mt:4,flex:1,overflow:"auto",h:r,sx:i,children:e.map(l=>E.jsx(Nd,{children:l.panel},`tabpanel-${l.type}`))})]})}function Aat(){const{cardHeight:e,cardColor:t,cardWidth:n,mobile:r}=Ua();return E.jsxs(Ht,{minW:{base:"full",lg:"container.xl"},maxH:e,position:"relative",gap:4,flexDir:{base:"column",lg:"row"},children:[E.jsxs(Ht,{position:"relative",w:n,children:[E.jsx(Cat,{top:r?0:void 0,bottom:r?void 0:0,h:8,w:"full",p:2}),E.jsx(fst,{w:"full",gap:{base:0,lg:4}})]}),E.jsx(gst,{bgColor:t,borderRadius:"lg",w:{base:"full",lg:"sm"},minW:{base:"full",lg:"sm"},controller:E.jsx(dst,{spacing:2,w:"full"}),children:E.jsx($at,{tabs:[{type:"Likes",icon:nce,panel:E.jsx(Aot,{p:0,m:0,gap:2,w:"full"}),displayingBeforeInit:!1},{type:"Browse",icon:tst,panel:E.jsx(Tot,{}),displayingBeforeInit:!1},{type:"Chart",icon:Jot,panel:E.jsx(Nd,{children:"Chart Description and Explanation at Here"}),displayingBeforeInit:!1},{type:"Fields",icon:est,panel:E.jsx(xst,{}),displayingBeforeInit:!1},{type:"Settings",icon:nst,panel:E.jsx(Eat,{align:"start"}),displayingBeforeInit:!0}]})})]})}const Tat=Yxe({initialColorMode:"dark",useSystemColorMode:!0,components:{Button:{defaultProps:{size:"sm"}},Input:{defaultProps:{size:"sm",focusBorderColor:ju[200]},baseStyle:{field:{_focusVisible:{borderColor:ju[200]}}}},Select:{defaultProps:{size:"sm",focusBorderColor:ju[200]}},Tabs:{parts:["tabpanel"],baseStyle:{tabpanel:{p:0}}},Card:{baseStyle:e=>({container:{bg:e.colorMode==="light"?"white":"gray.900"}})}},styles:{global:e=>({body:{height:"100lvh",overflow:"smooth",overscrollBehavior:"none",bg:e.colorMode==="light"?"gray.100":"gray.800"},html:{height:"100lvh",overflow:"smooth",overscrollBehavior:"none",overflowY:"overlay",focusBorderColor:ju[200]}})}});var lce,ZW=ZF;lce=ZW.createRoot,ZW.hydrateRoot;const Mat=new Nrt;lce(document.getElementById("root")).render(E.jsx(T.StrictMode,{children:E.jsx(Brt,{client:Mat,children:E.jsx(y_e,{theme:Tat,children:E.jsx(ld,{flexDir:"column",minH:"100dvh",p:0,m:0,w:"full",children:E.jsx(Aat,{})})})})}))});export default Fat();
