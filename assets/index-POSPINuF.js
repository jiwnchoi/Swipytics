var yhe=Object.defineProperty;var jL=e=>{throw TypeError(e)};var vhe=(e,t,n)=>t in e?yhe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var bhe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ae=(e,t,n)=>vhe(e,typeof t!="symbol"?t+"":t,n),g$=(e,t,n)=>t.has(e)||jL("Cannot "+n);var B=(e,t,n)=>(g$(e,t,"read from private field"),n?n.call(e):t.get(e)),Me=(e,t,n)=>t.has(e)?jL("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),pe=(e,t,n,r)=>(g$(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ue=(e,t,n)=>(g$(e,t,"access private method"),n);var Nb=(e,t,n,r)=>({set _(i){pe(e,t,i,n)},get _(){return B(e,t,r)}});var Bft=bhe((Rdt,cL)=>{function Bq(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Da(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Uq={exports:{}},Qk={},Vq={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv=Symbol.for("react.element"),xhe=Symbol.for("react.portal"),whe=Symbol.for("react.fragment"),She=Symbol.for("react.strict_mode"),khe=Symbol.for("react.profiler"),Che=Symbol.for("react.provider"),Ehe=Symbol.for("react.context"),_he=Symbol.for("react.forward_ref"),$he=Symbol.for("react.suspense"),Ahe=Symbol.for("react.memo"),The=Symbol.for("react.lazy"),BL=Symbol.iterator;function Phe(e){return e===null||typeof e!="object"?null:(e=BL&&e[BL]||e["@@iterator"],typeof e=="function"?e:null)}var Wq={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hq=Object.assign,qq={};function rm(e,t,n){this.props=e,this.context=t,this.refs=qq,this.updater=n||Wq}rm.prototype.isReactComponent={};rm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gq(){}Gq.prototype=rm.prototype;function WF(e,t,n){this.props=e,this.context=t,this.refs=qq,this.updater=n||Wq}var HF=WF.prototype=new Gq;HF.constructor=WF;Hq(HF,rm.prototype);HF.isPureReactComponent=!0;var UL=Array.isArray,Yq=Object.prototype.hasOwnProperty,qF={current:null},Xq={key:!0,ref:!0,__self:!0,__source:!0};function Kq(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)Yq.call(t,r)&&!Xq.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:mv,type:e,key:o,ref:s,props:i,_owner:qF.current}}function Mhe(e,t){return{$$typeof:mv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function GF(e){return typeof e=="object"&&e!==null&&e.$$typeof===mv}function Fhe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var VL=/\/+/g;function m$(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fhe(""+e.key):t.toString(36)}function uw(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case mv:case xhe:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+m$(s,0):r,UL(i)?(n="",e!=null&&(n=e.replace(VL,"$&/")+"/"),uw(i,t,n,"",function(u){return u})):i!=null&&(GF(i)&&(i=Mhe(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(VL,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",UL(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+m$(o,a);s+=uw(o,t,n,l,i)}else if(l=Phe(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+m$(o,a++),s+=uw(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Ib(e,t,n){if(e==null)return e;var r=[],i=0;return uw(e,r,"","",function(o){return t.call(n,o,i++)}),r}function Rhe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ei={current:null},cw={transition:null},Ohe={ReactCurrentDispatcher:ei,ReactCurrentBatchConfig:cw,ReactCurrentOwner:qF};function Qq(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Ib,forEach:function(e,t,n){Ib(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ib(e,function(){t++}),t},toArray:function(e){return Ib(e,function(t){return t})||[]},only:function(e){if(!GF(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=rm;je.Fragment=whe;je.Profiler=khe;je.PureComponent=WF;je.StrictMode=She;je.Suspense=$he;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ohe;je.act=Qq;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Hq({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=qF.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Yq.call(t,l)&&!Xq.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:mv,type:e.type,key:i,ref:o,props:r,_owner:s}};je.createContext=function(e){return e={$$typeof:Ehe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Che,_context:e},e.Consumer=e};je.createElement=Kq;je.createFactory=function(e){var t=Kq.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:_he,render:e}};je.isValidElement=GF;je.lazy=function(e){return{$$typeof:The,_payload:{_status:-1,_result:e},_init:Rhe}};je.memo=function(e,t){return{$$typeof:Ahe,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=cw.transition;cw.transition={};try{e()}finally{cw.transition=t}};je.unstable_act=Qq;je.useCallback=function(e,t){return ei.current.useCallback(e,t)};je.useContext=function(e){return ei.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return ei.current.useDeferredValue(e)};je.useEffect=function(e,t){return ei.current.useEffect(e,t)};je.useId=function(){return ei.current.useId()};je.useImperativeHandle=function(e,t,n){return ei.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return ei.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return ei.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return ei.current.useMemo(e,t)};je.useReducer=function(e,t,n){return ei.current.useReducer(e,t,n)};je.useRef=function(e){return ei.current.useRef(e)};je.useState=function(e){return ei.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return ei.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return ei.current.useTransition()};je.version="18.3.1";Vq.exports=je;var M=Vq.exports;const Vi=Da(M),WL=Bq({__proto__:null,default:Vi},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dhe=M,Nhe=Symbol.for("react.element"),Ihe=Symbol.for("react.fragment"),Lhe=Object.prototype.hasOwnProperty,zhe=Dhe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jhe={key:!0,ref:!0,__self:!0,__source:!0};function Jq(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Lhe.call(t,r)&&!jhe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Nhe,type:e,key:o,ref:s,props:i,_owner:zhe.current}}Qk.Fragment=Ihe;Qk.jsx=Jq;Qk.jsxs=Jq;Uq.exports=Qk;var $=Uq.exports,Bhe=!1;function Uhe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Vhe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Whe=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!Bhe:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Vhe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Uhe(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e}(),fr="-ms-",f2="-moz-",it="-webkit-",Zq="comm",YF="rule",XF="decl",Hhe="@import",eG="@keyframes",qhe="@layer",Ghe=Math.abs,Jk=String.fromCharCode,Yhe=Object.assign;function Xhe(e,t){return qn(e,0)^45?(((t<<2^qn(e,0))<<2^qn(e,1))<<2^qn(e,2))<<2^qn(e,3):0}function tG(e){return e.trim()}function Khe(e,t){return(e=t.exec(e))?e[0]:e}function ot(e,t,n){return e.replace(t,n)}function g5(e,t){return e.indexOf(t)}function qn(e,t){return e.charCodeAt(t)|0}function Zy(e,t,n){return e.slice(t,n)}function ra(e){return e.length}function KF(e){return e.length}function Lb(e,t){return t.push(e),e}function Qhe(e,t){return e.map(t).join("")}var Zk=1,eg=1,nG=0,bi=0,hn=0,im="";function eC(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Zk,column:eg,length:s,return:""}}function jm(e,t){return Yhe(eC("",null,null,"",null,null,0),e,{length:-e.length},t)}function Jhe(){return hn}function Zhe(){return hn=bi>0?qn(im,--bi):0,eg--,hn===10&&(eg=1,Zk--),hn}function Wi(){return hn=bi<nG?qn(im,bi++):0,eg++,hn===10&&(eg=1,Zk++),hn}function ma(){return qn(im,bi)}function fw(){return bi}function yv(e,t){return Zy(im,e,t)}function e1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rG(e){return Zk=eg=1,nG=ra(im=e),bi=0,[]}function iG(e){return im="",e}function dw(e){return tG(yv(bi-1,m5(e===91?e+2:e===40?e+1:e)))}function epe(e){for(;(hn=ma())&&hn<33;)Wi();return e1(e)>2||e1(hn)>3?"":" "}function tpe(e,t){for(;--t&&Wi()&&!(hn<48||hn>102||hn>57&&hn<65||hn>70&&hn<97););return yv(e,fw()+(t<6&&ma()==32&&Wi()==32))}function m5(e){for(;Wi();)switch(hn){case e:return bi;case 34:case 39:e!==34&&e!==39&&m5(hn);break;case 40:e===41&&m5(e);break;case 92:Wi();break}return bi}function npe(e,t){for(;Wi()&&e+hn!==57;)if(e+hn===84&&ma()===47)break;return"/*"+yv(t,bi-1)+"*"+Jk(e===47?e:Wi())}function rpe(e){for(;!e1(ma());)Wi();return yv(e,bi)}function ipe(e){return iG(hw("",null,null,null,[""],e=rG(e),0,[0],e))}function hw(e,t,n,r,i,o,s,a,l){for(var u=0,c=0,f=s,d=0,h=0,p=0,g=1,m=1,y=1,v=0,b="",x=i,w=o,k=r,S=b;m;)switch(p=v,v=Wi()){case 40:if(p!=108&&qn(S,f-1)==58){g5(S+=ot(dw(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:S+=dw(v);break;case 9:case 10:case 13:case 32:S+=epe(p);break;case 92:S+=tpe(fw()-1,7);continue;case 47:switch(ma()){case 42:case 47:Lb(ope(npe(Wi(),fw()),t,n),l);break;default:S+="/"}break;case 123*g:a[u++]=ra(S)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+c:y==-1&&(S=ot(S,/\f/g,"")),h>0&&ra(S)-f&&Lb(h>32?qL(S+";",r,n,f-1):qL(ot(S," ","")+";",r,n,f-2),l);break;case 59:S+=";";default:if(Lb(k=HL(S,t,n,u,c,i,a,b,x=[],w=[],f),o),v===123)if(c===0)hw(S,t,k,k,x,o,f,a,w);else switch(d===99&&qn(S,3)===110?100:d){case 100:case 108:case 109:case 115:hw(e,k,k,r&&Lb(HL(e,k,k,0,0,i,a,b,i,x=[],f),w),i,w,f,a,r?x:w);break;default:hw(S,k,k,k,[""],w,0,a,w)}}u=c=h=0,g=y=1,b=S="",f=s;break;case 58:f=1+ra(S),h=p;default:if(g<1){if(v==123)--g;else if(v==125&&g++==0&&Zhe()==125)continue}switch(S+=Jk(v),v*g){case 38:y=c>0?1:(S+="\f",-1);break;case 44:a[u++]=(ra(S)-1)*y,y=1;break;case 64:ma()===45&&(S+=dw(Wi())),d=ma(),c=f=ra(b=S+=rpe(fw())),v++;break;case 45:p===45&&ra(S)==2&&(g=0)}}return o}function HL(e,t,n,r,i,o,s,a,l,u,c){for(var f=i-1,d=i===0?o:[""],h=KF(d),p=0,g=0,m=0;p<r;++p)for(var y=0,v=Zy(e,f+1,f=Ghe(g=s[p])),b=e;y<h;++y)(b=tG(g>0?d[y]+" "+v:ot(v,/&\f/g,d[y])))&&(l[m++]=b);return eC(e,t,n,i===0?YF:a,l,u,c)}function ope(e,t,n){return eC(e,t,n,Zq,Jk(Jhe()),Zy(e,2,-2),0)}function qL(e,t,n,r){return eC(e,t,n,XF,Zy(e,0,r),Zy(e,r+1,-1),r)}function bp(e,t){for(var n="",r=KF(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function spe(e,t,n,r){switch(e.type){case qhe:if(e.children.length)break;case Hhe:case XF:return e.return=e.return||e.value;case Zq:return"";case eG:return e.return=e.value+"{"+bp(e.children,r)+"}";case YF:e.value=e.props.join(",")}return ra(n=bp(e.children,r))?e.return=e.value+"{"+n+"}":""}function ape(e){var t=KF(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}function lpe(e){return function(t){t.root||(t=t.return)&&e(t)}}var GL=function(t){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var i=t(r);return n.set(r,i),i}};function oG(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var upe=function(t,n,r){for(var i=0,o=0;i=o,o=ma(),i===38&&o===12&&(n[r]=1),!e1(o);)Wi();return yv(t,bi)},cpe=function(t,n){var r=-1,i=44;do switch(e1(i)){case 0:i===38&&ma()===12&&(n[r]=1),t[r]+=upe(bi-1,n,r);break;case 2:t[r]+=dw(i);break;case 4:if(i===44){t[++r]=ma()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=Jk(i)}while(i=Wi());return t},fpe=function(t,n){return iG(cpe(rG(t),n))},YL=new WeakMap,dpe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!YL.get(r))&&!i){YL.set(t,!0);for(var o=[],s=fpe(n,o),a=r.props,l=0,u=0;l<s.length;l++)for(var c=0;c<a.length;c++,u++)t.props[u]=o[l]?s[l].replace(/&\f/g,a[c]):a[c]+" "+s[l]}}},hpe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function sG(e,t){switch(Xhe(e,t)){case 5103:return it+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return it+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return it+e+f2+e+fr+e+e;case 6828:case 4268:return it+e+fr+e+e;case 6165:return it+e+fr+"flex-"+e+e;case 5187:return it+e+ot(e,/(\w+).+(:[^]+)/,it+"box-$1$2"+fr+"flex-$1$2")+e;case 5443:return it+e+fr+"flex-item-"+ot(e,/flex-|-self/,"")+e;case 4675:return it+e+fr+"flex-line-pack"+ot(e,/align-content|flex-|-self/,"")+e;case 5548:return it+e+fr+ot(e,"shrink","negative")+e;case 5292:return it+e+fr+ot(e,"basis","preferred-size")+e;case 6060:return it+"box-"+ot(e,"-grow","")+it+e+fr+ot(e,"grow","positive")+e;case 4554:return it+ot(e,/([^-])(transform)/g,"$1"+it+"$2")+e;case 6187:return ot(ot(ot(e,/(zoom-|grab)/,it+"$1"),/(image-set)/,it+"$1"),e,"")+e;case 5495:case 3959:return ot(e,/(image-set\([^]*)/,it+"$1$`$1");case 4968:return ot(ot(e,/(.+:)(flex-)?(.*)/,it+"box-pack:$3"+fr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+it+e+e;case 4095:case 3583:case 4068:case 2532:return ot(e,/(.+)-inline(.+)/,it+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ra(e)-1-t>6)switch(qn(e,t+1)){case 109:if(qn(e,t+4)!==45)break;case 102:return ot(e,/(.+:)(.+)-([^]+)/,"$1"+it+"$2-$3$1"+f2+(qn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~g5(e,"stretch")?sG(ot(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(qn(e,t+1)!==115)break;case 6444:switch(qn(e,ra(e)-3-(~g5(e,"!important")&&10))){case 107:return ot(e,":",":"+it)+e;case 101:return ot(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+it+(qn(e,14)===45?"inline-":"")+"box$3$1"+it+"$2$3$1"+fr+"$2box$3")+e}break;case 5936:switch(qn(e,t+11)){case 114:return it+e+fr+ot(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return it+e+fr+ot(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return it+e+fr+ot(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return it+e+fr+e+e}return e}var ppe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case XF:t.return=sG(t.value,t.length);break;case eG:return bp([jm(t,{value:ot(t.value,"@","@"+it)})],i);case YF:if(t.length)return Qhe(t.props,function(o){switch(Khe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return bp([jm(t,{props:[ot(o,/:(read-\w+)/,":"+f2+"$1")]})],i);case"::placeholder":return bp([jm(t,{props:[ot(o,/:(plac\w+)/,":"+it+"input-$1")]}),jm(t,{props:[ot(o,/:(plac\w+)/,":"+f2+"$1")]}),jm(t,{props:[ot(o,/:(plac\w+)/,fr+"input-$1")]})],i)}return""})}},gpe=[ppe],mpe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var m=g.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||gpe,o={},s,a=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var m=g.getAttribute("data-emotion").split(" "),y=1;y<m.length;y++)o[m[y]]=!0;a.push(g)});var l,u=[dpe,hpe];{var c,f=[spe,lpe(function(g){c.insert(g)})],d=ape(u.concat(i,f)),h=function(m){return bp(ipe(m),d)};l=function(m,y,v,b){c=v,h(m?m+"{"+y.styles+"}":y.styles),b&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new Whe({key:n,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return p.sheet.hydrate(a),p};function d2(){return d2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d2.apply(null,arguments)}var aG={exports:{}},pt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zn=typeof Symbol=="function"&&Symbol.for,QF=zn?Symbol.for("react.element"):60103,JF=zn?Symbol.for("react.portal"):60106,tC=zn?Symbol.for("react.fragment"):60107,nC=zn?Symbol.for("react.strict_mode"):60108,rC=zn?Symbol.for("react.profiler"):60114,iC=zn?Symbol.for("react.provider"):60109,oC=zn?Symbol.for("react.context"):60110,ZF=zn?Symbol.for("react.async_mode"):60111,sC=zn?Symbol.for("react.concurrent_mode"):60111,aC=zn?Symbol.for("react.forward_ref"):60112,lC=zn?Symbol.for("react.suspense"):60113,ype=zn?Symbol.for("react.suspense_list"):60120,uC=zn?Symbol.for("react.memo"):60115,cC=zn?Symbol.for("react.lazy"):60116,vpe=zn?Symbol.for("react.block"):60121,bpe=zn?Symbol.for("react.fundamental"):60117,xpe=zn?Symbol.for("react.responder"):60118,wpe=zn?Symbol.for("react.scope"):60119;function io(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case QF:switch(e=e.type,e){case ZF:case sC:case tC:case rC:case nC:case lC:return e;default:switch(e=e&&e.$$typeof,e){case oC:case aC:case cC:case uC:case iC:return e;default:return t}}case JF:return t}}}function lG(e){return io(e)===sC}pt.AsyncMode=ZF;pt.ConcurrentMode=sC;pt.ContextConsumer=oC;pt.ContextProvider=iC;pt.Element=QF;pt.ForwardRef=aC;pt.Fragment=tC;pt.Lazy=cC;pt.Memo=uC;pt.Portal=JF;pt.Profiler=rC;pt.StrictMode=nC;pt.Suspense=lC;pt.isAsyncMode=function(e){return lG(e)||io(e)===ZF};pt.isConcurrentMode=lG;pt.isContextConsumer=function(e){return io(e)===oC};pt.isContextProvider=function(e){return io(e)===iC};pt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===QF};pt.isForwardRef=function(e){return io(e)===aC};pt.isFragment=function(e){return io(e)===tC};pt.isLazy=function(e){return io(e)===cC};pt.isMemo=function(e){return io(e)===uC};pt.isPortal=function(e){return io(e)===JF};pt.isProfiler=function(e){return io(e)===rC};pt.isStrictMode=function(e){return io(e)===nC};pt.isSuspense=function(e){return io(e)===lC};pt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===tC||e===sC||e===rC||e===nC||e===lC||e===ype||typeof e=="object"&&e!==null&&(e.$$typeof===cC||e.$$typeof===uC||e.$$typeof===iC||e.$$typeof===oC||e.$$typeof===aC||e.$$typeof===bpe||e.$$typeof===xpe||e.$$typeof===wpe||e.$$typeof===vpe)};pt.typeOf=io;aG.exports=pt;var Spe=aG.exports,uG=Spe,kpe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Cpe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},cG={};cG[uG.ForwardRef]=kpe;cG[uG.Memo]=Cpe;var Epe=!0;function _pe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var fG=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||Epe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},dG=function(t,n,r){fG(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function $pe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Ape={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tpe=!1,Ppe=/[A-Z]|^ms/g,Mpe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,hG=function(t){return t.charCodeAt(1)===45},XL=function(t){return t!=null&&typeof t!="boolean"},y$=oG(function(e){return hG(e)?e:e.replace(Ppe,"-$&").toLowerCase()}),KL=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Mpe,function(r,i,o){return ia={name:i,styles:o,next:ia},i})}return Ape[t]!==1&&!hG(t)&&typeof n=="number"&&n!==0?n+"px":n},Fpe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function t1(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return ia={name:i.name,styles:i.styles,next:ia},i.name;var o=n;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)ia={name:s.name,styles:s.styles,next:ia},s=s.next;var a=o.styles+";";return a}return Rpe(e,t,n)}case"function":{if(e!==void 0){var l=ia,u=n(e);return ia=l,t1(e,t,u)}break}}var c=n;if(t==null)return c;var f=t[c];return f!==void 0?f:c}function Rpe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=t1(e,t,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object"){var a=s;t!=null&&t[a]!==void 0?r+=o+"{"+t[a]+"}":XL(a)&&(r+=y$(o)+":"+KL(o,a)+";")}else{if(o==="NO_COMPONENT_SELECTOR"&&Tpe)throw new Error(Fpe);if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var l=0;l<s.length;l++)XL(s[l])&&(r+=y$(o)+":"+KL(o,s[l])+";");else{var u=t1(e,t,s);switch(o){case"animation":case"animationName":{r+=y$(o)+":"+u+";";break}default:r+=o+"{"+u+"}"}}}}return r}var QL=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ia;function e4(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";ia=void 0;var o=e[0];if(o==null||o.raw===void 0)r=!1,i+=t1(n,t,o);else{var s=o;i+=s[0]}for(var a=1;a<e.length;a++)if(i+=t1(n,t,e[a]),r){var l=o;i+=l[a]}QL.lastIndex=0;for(var u="",c;(c=QL.exec(i))!==null;)u+="-"+c[1];var f=$pe(i)+u;return{name:f,styles:i,next:ia}}var Ope=function(t){return t()},pG=WL.useInsertionEffect?WL.useInsertionEffect:!1,Dpe=pG||Ope,JL=pG||M.useLayoutEffect,gG=M.createContext(typeof HTMLElement<"u"?mpe({key:"css"}):null);gG.Provider;var mG=function(t){return M.forwardRef(function(n,r){var i=M.useContext(gG);return t(n,i,r)})},n1=M.createContext({}),Npe=function(t,n){if(typeof n=="function"){var r=n(t);return r}return d2({},t,n)},Ipe=GL(function(e){return GL(function(t){return Npe(e,t)})}),Lpe=function(t){var n=M.useContext(n1);return t.theme!==n&&(n=Ipe(n)(t.theme)),M.createElement(n1.Provider,{value:n},t.children)},fC=mG(function(e,t){var n=e.styles,r=e4([n],void 0,M.useContext(n1)),i=M.useRef();return JL(function(){var o=t.key+"-global",s=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return t.sheet.tags.length&&(s.before=t.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[t]),JL(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&dG(t,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}t.insert("",r,s,!1)},[t,r.name]),null});function zpe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e4(t)}var jpe=function(){var t=zpe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},yG=String.raw,vG=yG`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Bpe=()=>$.jsx(fC,{styles:vG}),Upe=({scope:e=""})=>$.jsx(fC,{styles:yG`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${vG}
    `});function Vpe(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function jn(e={}){const{name:t,strict:n=!0,hookName:r="useContext",providerName:i="Provider",errorMessage:o,defaultValue:s}=e,a=M.createContext(s);a.displayName=t;function l(){var u;const c=M.useContext(a);if(!c&&n){const f=new Error(o??Vpe(r,i));throw f.name="ContextError",(u=Error.captureStackTrace)==null||u.call(Error,f,l),f}return c}return[a.Provider,l,a]}var[Wpe,Hpe]=jn({strict:!1,name:"PortalManagerContext"});function bG(e){const{children:t,zIndex:n}=e;return $.jsx(Wpe,{value:{zIndex:n},children:t})}bG.displayName="PortalManager";var tg=globalThis!=null&&globalThis.document?M.useLayoutEffect:M.useEffect,xG={exports:{}},oo={},wG={exports:{}},SG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,L){var U=D.length;D.push(L);e:for(;0<U;){var V=U-1>>>1,oe=D[V];if(0<i(oe,L))D[V]=L,D[U]=oe,U=V;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var L=D[0],U=D.pop();if(U!==L){D[0]=U;e:for(var V=0,oe=D.length,Q=oe>>>1;V<Q;){var ye=2*(V+1)-1,Oe=D[ye],ut=ye+1,$n=D[ut];if(0>i(Oe,U))ut<oe&&0>i($n,Oe)?(D[V]=$n,D[ut]=U,V=ut):(D[V]=Oe,D[ye]=U,V=ye);else if(ut<oe&&0>i($n,U))D[V]=$n,D[ut]=U,V=ut;else break e}}return L}function i(D,L){var U=D.sortIndex-L.sortIndex;return U!==0?U:D.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=D)r(u),L.sortIndex=L.expirationTime,t(l,L);else break;L=n(u)}}function x(D){if(g=!1,b(D),!p)if(n(l)!==null)p=!0,P(w);else{var L=n(u);L!==null&&N(x,L.startTime-D)}}function w(D,L){p=!1,g&&(g=!1,y(C),C=-1),h=!0;var U=d;try{for(b(L),f=n(l);f!==null&&(!(f.expirationTime>L)||D&&!T());){var V=f.callback;if(typeof V=="function"){f.callback=null,d=f.priorityLevel;var oe=V(f.expirationTime<=L);L=e.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(l)&&r(l),b(L)}else r(l);f=n(l)}if(f!==null)var Q=!0;else{var ye=n(u);ye!==null&&N(x,ye.startTime-L),Q=!1}return Q}finally{f=null,d=U,h=!1}}var k=!1,S=null,C=-1,E=5,A=-1;function T(){return!(e.unstable_now()-A<E)}function I(){if(S!==null){var D=e.unstable_now();A=D;var L=!0;try{L=S(!0,D)}finally{L?F():(k=!1,S=null)}}else k=!1}var F;if(typeof v=="function")F=function(){v(I)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,_=R.port2;R.port1.onmessage=I,F=function(){_.postMessage(null)}}else F=function(){m(I,0)};function P(D){S=D,k||(k=!0,F())}function N(D,L){C=m(function(){D(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,P(w))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(D){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var U=d;d=L;try{return D()}finally{d=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,L){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=d;d=D;try{return L()}finally{d=U}},e.unstable_scheduleCallback=function(D,L,U){var V=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?V+U:V):U=V,D){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=U+oe,D={id:c++,callback:L,priorityLevel:D,startTime:U,expirationTime:oe,sortIndex:-1},U>V?(D.sortIndex=U,t(u,D),n(l)===null&&D===n(u)&&(g?(y(C),C=-1):g=!0,N(x,U-V))):(D.sortIndex=oe,t(l,D),p||h||(p=!0,P(w))),D},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(D){var L=d;return function(){var U=d;d=L;try{return D.apply(this,arguments)}finally{d=U}}}})(SG);wG.exports=SG;var qpe=wG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gpe=M,Ki=qpe;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kG=new Set,r1={};function Vd(e,t){ng(e,t),ng(e+"Capture",t)}function ng(e,t){for(r1[e]=t,e=0;e<t.length;e++)kG.add(t[e])}var Ol=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y5=Object.prototype.hasOwnProperty,Ype=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZL={},e8={};function Xpe(e){return y5.call(e8,e)?!0:y5.call(ZL,e)?!1:Ype.test(e)?e8[e]=!0:(ZL[e]=!0,!1)}function Kpe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Qpe(e,t,n,r){if(t===null||typeof t>"u"||Kpe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ti(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nr[e]=new ti(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nr[t]=new ti(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nr[e]=new ti(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nr[e]=new ti(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nr[e]=new ti(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nr[e]=new ti(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nr[e]=new ti(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nr[e]=new ti(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nr[e]=new ti(e,5,!1,e.toLowerCase(),null,!1,!1)});var t4=/[\-:]([a-z])/g;function n4(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(t4,n4);nr[t]=new ti(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(t4,n4);nr[t]=new ti(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(t4,n4);nr[t]=new ti(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nr[e]=new ti(e,1,!1,e.toLowerCase(),null,!1,!1)});nr.xlinkHref=new ti("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nr[e]=new ti(e,1,!1,e.toLowerCase(),null,!0,!0)});function r4(e,t,n,r){var i=nr.hasOwnProperty(t)?nr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Qpe(t,n,i,r)&&(n=null),r||i===null?Xpe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ql=Gpe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zb=Symbol.for("react.element"),Wh=Symbol.for("react.portal"),Hh=Symbol.for("react.fragment"),i4=Symbol.for("react.strict_mode"),v5=Symbol.for("react.profiler"),CG=Symbol.for("react.provider"),EG=Symbol.for("react.context"),o4=Symbol.for("react.forward_ref"),b5=Symbol.for("react.suspense"),x5=Symbol.for("react.suspense_list"),s4=Symbol.for("react.memo"),mu=Symbol.for("react.lazy"),_G=Symbol.for("react.offscreen"),t8=Symbol.iterator;function Bm(e){return e===null||typeof e!="object"?null:(e=t8&&e[t8]||e["@@iterator"],typeof e=="function"?e:null)}var Gt=Object.assign,v$;function F0(e){if(v$===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);v$=t&&t[1]||""}return`
`+v$+e}var b$=!1;function x$(e,t){if(!e||b$)return"";b$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{b$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F0(e):""}function Jpe(e){switch(e.tag){case 5:return F0(e.type);case 16:return F0("Lazy");case 13:return F0("Suspense");case 19:return F0("SuspenseList");case 0:case 2:case 15:return e=x$(e.type,!1),e;case 11:return e=x$(e.type.render,!1),e;case 1:return e=x$(e.type,!0),e;default:return""}}function w5(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hh:return"Fragment";case Wh:return"Portal";case v5:return"Profiler";case i4:return"StrictMode";case b5:return"Suspense";case x5:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case EG:return(e.displayName||"Context")+".Consumer";case CG:return(e._context.displayName||"Context")+".Provider";case o4:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case s4:return t=e.displayName||null,t!==null?t:w5(e.type)||"Memo";case mu:t=e._payload,e=e._init;try{return w5(e(t))}catch{}}return null}function Zpe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w5(t);case 8:return t===i4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function uc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $G(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ege(e){var t=$G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jb(e){e._valueTracker||(e._valueTracker=ege(e))}function AG(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$G(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function h2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function S5(e,t){var n=t.checked;return Gt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function n8(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=uc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function TG(e,t){t=t.checked,t!=null&&r4(e,"checked",t,!1)}function k5(e,t){TG(e,t);var n=uc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?C5(e,t.type,n):t.hasOwnProperty("defaultValue")&&C5(e,t.type,uc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function r8(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function C5(e,t,n){(t!=="number"||h2(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var R0=Array.isArray;function xp(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+uc(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function E5(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return Gt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function i8(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(te(92));if(R0(n)){if(1<n.length)throw Error(te(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:uc(n)}}function PG(e,t){var n=uc(t.value),r=uc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function o8(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function MG(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _5(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?MG(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bb,FG=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bb=Bb||document.createElement("div"),Bb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function i1(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tge=["Webkit","ms","Moz","O"];Object.keys(gy).forEach(function(e){tge.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gy[t]=gy[e]})});function RG(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gy.hasOwnProperty(e)&&gy[e]?(""+t).trim():t+"px"}function OG(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=RG(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var nge=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $5(e,t){if(t){if(nge[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function A5(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T5=null;function a4(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var P5=null,wp=null,Sp=null;function s8(e){if(e=xv(e)){if(typeof P5!="function")throw Error(te(280));var t=e.stateNode;t&&(t=mC(t),P5(e.stateNode,e.type,t))}}function DG(e){wp?Sp?Sp.push(e):Sp=[e]:wp=e}function NG(){if(wp){var e=wp,t=Sp;if(Sp=wp=null,s8(e),t)for(e=0;e<t.length;e++)s8(t[e])}}function IG(e,t){return e(t)}function LG(){}var w$=!1;function zG(e,t,n){if(w$)return e(t,n);w$=!0;try{return IG(e,t,n)}finally{w$=!1,(wp!==null||Sp!==null)&&(LG(),NG())}}function o1(e,t){var n=e.stateNode;if(n===null)return null;var r=mC(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var M5=!1;if(Ol)try{var Um={};Object.defineProperty(Um,"passive",{get:function(){M5=!0}}),window.addEventListener("test",Um,Um),window.removeEventListener("test",Um,Um)}catch{M5=!1}function rge(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var my=!1,p2=null,g2=!1,F5=null,ige={onError:function(e){my=!0,p2=e}};function oge(e,t,n,r,i,o,s,a,l){my=!1,p2=null,rge.apply(ige,arguments)}function sge(e,t,n,r,i,o,s,a,l){if(oge.apply(this,arguments),my){if(my){var u=p2;my=!1,p2=null}else throw Error(te(198));g2||(g2=!0,F5=u)}}function Wd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jG(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function a8(e){if(Wd(e)!==e)throw Error(te(188))}function age(e){var t=e.alternate;if(!t){if(t=Wd(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return a8(i),e;if(o===r)return a8(i),t;o=o.sibling}throw Error(te(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function BG(e){return e=age(e),e!==null?UG(e):null}function UG(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=UG(e);if(t!==null)return t;e=e.sibling}return null}var VG=Ki.unstable_scheduleCallback,l8=Ki.unstable_cancelCallback,lge=Ki.unstable_shouldYield,uge=Ki.unstable_requestPaint,rn=Ki.unstable_now,cge=Ki.unstable_getCurrentPriorityLevel,l4=Ki.unstable_ImmediatePriority,WG=Ki.unstable_UserBlockingPriority,m2=Ki.unstable_NormalPriority,fge=Ki.unstable_LowPriority,HG=Ki.unstable_IdlePriority,dC=null,ya=null;function dge(e){if(ya&&typeof ya.onCommitFiberRoot=="function")try{ya.onCommitFiberRoot(dC,e,void 0,(e.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:gge,hge=Math.log,pge=Math.LN2;function gge(e){return e>>>=0,e===0?32:31-(hge(e)/pge|0)|0}var Ub=64,Vb=4194304;function O0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function y2(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=O0(a):(o&=s,o!==0&&(r=O0(o)))}else s=n&~i,s!==0?r=O0(s):o!==0&&(r=O0(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vs(t),i=1<<n,r|=e[n],t&=~i;return r}function mge(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yge(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-vs(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=mge(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function R5(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qG(){var e=Ub;return Ub<<=1,!(Ub&4194240)&&(Ub=64),e}function S$(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vv(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vs(t),e[t]=n}function vge(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vs(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function u4(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vs(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ht=0;function GG(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var YG,c4,XG,KG,QG,O5=!1,Wb=[],Gu=null,Yu=null,Xu=null,s1=new Map,a1=new Map,Eu=[],bge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u8(e,t){switch(e){case"focusin":case"focusout":Gu=null;break;case"dragenter":case"dragleave":Yu=null;break;case"mouseover":case"mouseout":Xu=null;break;case"pointerover":case"pointerout":s1.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":a1.delete(t.pointerId)}}function Vm(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=xv(t),t!==null&&c4(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function xge(e,t,n,r,i){switch(t){case"focusin":return Gu=Vm(Gu,e,t,n,r,i),!0;case"dragenter":return Yu=Vm(Yu,e,t,n,r,i),!0;case"mouseover":return Xu=Vm(Xu,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return s1.set(o,Vm(s1.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,a1.set(o,Vm(a1.get(o)||null,e,t,n,r,i)),!0}return!1}function JG(e){var t=Mf(e.target);if(t!==null){var n=Wd(t);if(n!==null){if(t=n.tag,t===13){if(t=jG(n),t!==null){e.blockedOn=t,QG(e.priority,function(){XG(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function pw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=D5(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);T5=r,n.target.dispatchEvent(r),T5=null}else return t=xv(n),t!==null&&c4(t),e.blockedOn=n,!1;t.shift()}return!0}function c8(e,t,n){pw(e)&&n.delete(t)}function wge(){O5=!1,Gu!==null&&pw(Gu)&&(Gu=null),Yu!==null&&pw(Yu)&&(Yu=null),Xu!==null&&pw(Xu)&&(Xu=null),s1.forEach(c8),a1.forEach(c8)}function Wm(e,t){e.blockedOn===t&&(e.blockedOn=null,O5||(O5=!0,Ki.unstable_scheduleCallback(Ki.unstable_NormalPriority,wge)))}function l1(e){function t(i){return Wm(i,e)}if(0<Wb.length){Wm(Wb[0],e);for(var n=1;n<Wb.length;n++){var r=Wb[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gu!==null&&Wm(Gu,e),Yu!==null&&Wm(Yu,e),Xu!==null&&Wm(Xu,e),s1.forEach(t),a1.forEach(t),n=0;n<Eu.length;n++)r=Eu[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Eu.length&&(n=Eu[0],n.blockedOn===null);)JG(n),n.blockedOn===null&&Eu.shift()}var kp=ql.ReactCurrentBatchConfig,v2=!0;function Sge(e,t,n,r){var i=ht,o=kp.transition;kp.transition=null;try{ht=1,f4(e,t,n,r)}finally{ht=i,kp.transition=o}}function kge(e,t,n,r){var i=ht,o=kp.transition;kp.transition=null;try{ht=4,f4(e,t,n,r)}finally{ht=i,kp.transition=o}}function f4(e,t,n,r){if(v2){var i=D5(e,t,n,r);if(i===null)F$(e,t,r,b2,n),u8(e,r);else if(xge(i,e,t,n,r))r.stopPropagation();else if(u8(e,r),t&4&&-1<bge.indexOf(e)){for(;i!==null;){var o=xv(i);if(o!==null&&YG(o),o=D5(e,t,n,r),o===null&&F$(e,t,r,b2,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else F$(e,t,r,null,n)}}var b2=null;function D5(e,t,n,r){if(b2=null,e=a4(r),e=Mf(e),e!==null)if(t=Wd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=jG(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return b2=e,null}function ZG(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cge()){case l4:return 1;case WG:return 4;case m2:case fge:return 16;case HG:return 536870912;default:return 16}default:return 16}}var Du=null,d4=null,gw=null;function eY(){if(gw)return gw;var e,t=d4,n=t.length,r,i="value"in Du?Du.value:Du.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return gw=i.slice(e,1<r?1-r:void 0)}function mw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hb(){return!0}function f8(){return!1}function so(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Hb:f8,this.isPropagationStopped=f8,this}return Gt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hb)},persist:function(){},isPersistent:Hb}),t}var om={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h4=so(om),bv=Gt({},om,{view:0,detail:0}),Cge=so(bv),k$,C$,Hm,hC=Gt({},bv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p4,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hm&&(Hm&&e.type==="mousemove"?(k$=e.screenX-Hm.screenX,C$=e.screenY-Hm.screenY):C$=k$=0,Hm=e),k$)},movementY:function(e){return"movementY"in e?e.movementY:C$}}),d8=so(hC),Ege=Gt({},hC,{dataTransfer:0}),_ge=so(Ege),$ge=Gt({},bv,{relatedTarget:0}),E$=so($ge),Age=Gt({},om,{animationName:0,elapsedTime:0,pseudoElement:0}),Tge=so(Age),Pge=Gt({},om,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mge=so(Pge),Fge=Gt({},om,{data:0}),h8=so(Fge),Rge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Oge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nge(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dge[e])?!!t[e]:!1}function p4(){return Nge}var Ige=Gt({},bv,{key:function(e){if(e.key){var t=Rge[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Oge[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p4,charCode:function(e){return e.type==="keypress"?mw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lge=so(Ige),zge=Gt({},hC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p8=so(zge),jge=Gt({},bv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p4}),Bge=so(jge),Uge=Gt({},om,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vge=so(Uge),Wge=Gt({},hC,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hge=so(Wge),qge=[9,13,27,32],g4=Ol&&"CompositionEvent"in window,yy=null;Ol&&"documentMode"in document&&(yy=document.documentMode);var Gge=Ol&&"TextEvent"in window&&!yy,tY=Ol&&(!g4||yy&&8<yy&&11>=yy),g8=" ",m8=!1;function nY(e,t){switch(e){case"keyup":return qge.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rY(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qh=!1;function Yge(e,t){switch(e){case"compositionend":return rY(t);case"keypress":return t.which!==32?null:(m8=!0,g8);case"textInput":return e=t.data,e===g8&&m8?null:e;default:return null}}function Xge(e,t){if(qh)return e==="compositionend"||!g4&&nY(e,t)?(e=eY(),gw=d4=Du=null,qh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tY&&t.locale!=="ko"?null:t.data;default:return null}}var Kge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y8(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Kge[e.type]:t==="textarea"}function iY(e,t,n,r){DG(r),t=x2(t,"onChange"),0<t.length&&(n=new h4("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var vy=null,u1=null;function Qge(e){gY(e,0)}function pC(e){var t=Xh(e);if(AG(t))return e}function Jge(e,t){if(e==="change")return t}var oY=!1;if(Ol){var _$;if(Ol){var $$="oninput"in document;if(!$$){var v8=document.createElement("div");v8.setAttribute("oninput","return;"),$$=typeof v8.oninput=="function"}_$=$$}else _$=!1;oY=_$&&(!document.documentMode||9<document.documentMode)}function b8(){vy&&(vy.detachEvent("onpropertychange",sY),u1=vy=null)}function sY(e){if(e.propertyName==="value"&&pC(u1)){var t=[];iY(t,u1,e,a4(e)),zG(Qge,t)}}function Zge(e,t,n){e==="focusin"?(b8(),vy=t,u1=n,vy.attachEvent("onpropertychange",sY)):e==="focusout"&&b8()}function eme(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pC(u1)}function tme(e,t){if(e==="click")return pC(t)}function nme(e,t){if(e==="input"||e==="change")return pC(t)}function rme(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ss=typeof Object.is=="function"?Object.is:rme;function c1(e,t){if(Ss(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!y5.call(t,i)||!Ss(e[i],t[i]))return!1}return!0}function x8(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function w8(e,t){var n=x8(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=x8(n)}}function aY(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aY(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lY(){for(var e=window,t=h2();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=h2(e.document)}return t}function m4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ime(e){var t=lY(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&aY(n.ownerDocument.documentElement,n)){if(r!==null&&m4(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=w8(n,o);var s=w8(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ome=Ol&&"documentMode"in document&&11>=document.documentMode,Gh=null,N5=null,by=null,I5=!1;function S8(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;I5||Gh==null||Gh!==h2(r)||(r=Gh,"selectionStart"in r&&m4(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),by&&c1(by,r)||(by=r,r=x2(N5,"onSelect"),0<r.length&&(t=new h4("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Gh)))}function qb(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yh={animationend:qb("Animation","AnimationEnd"),animationiteration:qb("Animation","AnimationIteration"),animationstart:qb("Animation","AnimationStart"),transitionend:qb("Transition","TransitionEnd")},A$={},uY={};Ol&&(uY=document.createElement("div").style,"AnimationEvent"in window||(delete Yh.animationend.animation,delete Yh.animationiteration.animation,delete Yh.animationstart.animation),"TransitionEvent"in window||delete Yh.transitionend.transition);function gC(e){if(A$[e])return A$[e];if(!Yh[e])return e;var t=Yh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uY)return A$[e]=t[n];return e}var cY=gC("animationend"),fY=gC("animationiteration"),dY=gC("animationstart"),hY=gC("transitionend"),pY=new Map,k8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fc(e,t){pY.set(e,t),Vd(t,[e])}for(var T$=0;T$<k8.length;T$++){var P$=k8[T$],sme=P$.toLowerCase(),ame=P$[0].toUpperCase()+P$.slice(1);Fc(sme,"on"+ame)}Fc(cY,"onAnimationEnd");Fc(fY,"onAnimationIteration");Fc(dY,"onAnimationStart");Fc("dblclick","onDoubleClick");Fc("focusin","onFocus");Fc("focusout","onBlur");Fc(hY,"onTransitionEnd");ng("onMouseEnter",["mouseout","mouseover"]);ng("onMouseLeave",["mouseout","mouseover"]);ng("onPointerEnter",["pointerout","pointerover"]);ng("onPointerLeave",["pointerout","pointerover"]);Vd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var D0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lme=new Set("cancel close invalid load scroll toggle".split(" ").concat(D0));function C8(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,sge(r,t,void 0,e),e.currentTarget=null}function gY(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;C8(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;C8(i,a,u),o=l}}}if(g2)throw e=F5,g2=!1,F5=null,e}function Tt(e,t){var n=t[U5];n===void 0&&(n=t[U5]=new Set);var r=e+"__bubble";n.has(r)||(mY(t,e,2,!1),n.add(r))}function M$(e,t,n){var r=0;t&&(r|=4),mY(n,e,r,t)}var Gb="_reactListening"+Math.random().toString(36).slice(2);function f1(e){if(!e[Gb]){e[Gb]=!0,kG.forEach(function(n){n!=="selectionchange"&&(lme.has(n)||M$(n,!1,e),M$(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gb]||(t[Gb]=!0,M$("selectionchange",!1,t))}}function mY(e,t,n,r){switch(ZG(t)){case 1:var i=Sge;break;case 4:i=kge;break;default:i=f4}n=i.bind(null,t,n,e),i=void 0,!M5||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function F$(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Mf(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}zG(function(){var u=o,c=a4(n),f=[];e:{var d=pY.get(e);if(d!==void 0){var h=h4,p=e;switch(e){case"keypress":if(mw(n)===0)break e;case"keydown":case"keyup":h=Lge;break;case"focusin":p="focus",h=E$;break;case"focusout":p="blur",h=E$;break;case"beforeblur":case"afterblur":h=E$;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=d8;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=_ge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Bge;break;case cY:case fY:case dY:h=Tge;break;case hY:h=Vge;break;case"scroll":h=Cge;break;case"wheel":h=Hge;break;case"copy":case"cut":case"paste":h=Mge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=p8}var g=(t&4)!==0,m=!g&&e==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var v=u,b;v!==null;){b=v;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=o1(v,y),x!=null&&g.push(d1(v,x,b)))),m)break;v=v.return}0<g.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==T5&&(p=n.relatedTarget||n.fromElement)&&(Mf(p)||p[Dl]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Mf(p):null,p!==null&&(m=Wd(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(g=d8,x="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=p8,x="onPointerLeave",y="onPointerEnter",v="pointer"),m=h==null?d:Xh(h),b=p==null?d:Xh(p),d=new g(x,v+"leave",h,n,c),d.target=m,d.relatedTarget=b,x=null,Mf(c)===u&&(g=new g(y,v+"enter",p,n,c),g.target=b,g.relatedTarget=m,x=g),m=x,h&&p)t:{for(g=h,y=p,v=0,b=g;b;b=vh(b))v++;for(b=0,x=y;x;x=vh(x))b++;for(;0<v-b;)g=vh(g),v--;for(;0<b-v;)y=vh(y),b--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=vh(g),y=vh(y)}g=null}else g=null;h!==null&&E8(f,d,h,g,!1),p!==null&&m!==null&&E8(f,m,p,g,!0)}}e:{if(d=u?Xh(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=Jge;else if(y8(d))if(oY)w=nme;else{w=eme;var k=Zge}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=tme);if(w&&(w=w(e,u))){iY(f,w,n,c);break e}k&&k(e,d,u),e==="focusout"&&(k=d._wrapperState)&&k.controlled&&d.type==="number"&&C5(d,"number",d.value)}switch(k=u?Xh(u):window,e){case"focusin":(y8(k)||k.contentEditable==="true")&&(Gh=k,N5=u,by=null);break;case"focusout":by=N5=Gh=null;break;case"mousedown":I5=!0;break;case"contextmenu":case"mouseup":case"dragend":I5=!1,S8(f,n,c);break;case"selectionchange":if(ome)break;case"keydown":case"keyup":S8(f,n,c)}var S;if(g4)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else qh?nY(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(tY&&n.locale!=="ko"&&(qh||C!=="onCompositionStart"?C==="onCompositionEnd"&&qh&&(S=eY()):(Du=c,d4="value"in Du?Du.value:Du.textContent,qh=!0)),k=x2(u,C),0<k.length&&(C=new h8(C,e,null,n,c),f.push({event:C,listeners:k}),S?C.data=S:(S=rY(n),S!==null&&(C.data=S)))),(S=Gge?Yge(e,n):Xge(e,n))&&(u=x2(u,"onBeforeInput"),0<u.length&&(c=new h8("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=S))}gY(f,t)})}function d1(e,t,n){return{instance:e,listener:t,currentTarget:n}}function x2(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=o1(e,n),o!=null&&r.unshift(d1(e,o,i)),o=o1(e,t),o!=null&&r.push(d1(e,o,i))),e=e.return}return r}function vh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function E8(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=o1(n,o),l!=null&&s.unshift(d1(n,l,a))):i||(l=o1(n,o),l!=null&&s.push(d1(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var ume=/\r\n?/g,cme=/\u0000|\uFFFD/g;function _8(e){return(typeof e=="string"?e:""+e).replace(ume,`
`).replace(cme,"")}function Yb(e,t,n){if(t=_8(t),_8(e)!==t&&n)throw Error(te(425))}function w2(){}var L5=null,z5=null;function j5(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var B5=typeof setTimeout=="function"?setTimeout:void 0,fme=typeof clearTimeout=="function"?clearTimeout:void 0,$8=typeof Promise=="function"?Promise:void 0,dme=typeof queueMicrotask=="function"?queueMicrotask:typeof $8<"u"?function(e){return $8.resolve(null).then(e).catch(hme)}:B5;function hme(e){setTimeout(function(){throw e})}function R$(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),l1(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);l1(t)}function Ku(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function A8(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var sm=Math.random().toString(36).slice(2),sa="__reactFiber$"+sm,h1="__reactProps$"+sm,Dl="__reactContainer$"+sm,U5="__reactEvents$"+sm,pme="__reactListeners$"+sm,gme="__reactHandles$"+sm;function Mf(e){var t=e[sa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Dl]||n[sa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=A8(e);e!==null;){if(n=e[sa])return n;e=A8(e)}return t}e=n,n=e.parentNode}return null}function xv(e){return e=e[sa]||e[Dl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function mC(e){return e[h1]||null}var V5=[],Kh=-1;function Rc(e){return{current:e}}function Rt(e){0>Kh||(e.current=V5[Kh],V5[Kh]=null,Kh--)}function Et(e,t){Kh++,V5[Kh]=e.current,e.current=t}var cc={},$r=Rc(cc),hi=Rc(!1),hd=cc;function rg(e,t){var n=e.type.contextTypes;if(!n)return cc;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function pi(e){return e=e.childContextTypes,e!=null}function S2(){Rt(hi),Rt($r)}function T8(e,t,n){if($r.current!==cc)throw Error(te(168));Et($r,t),Et(hi,n)}function yY(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(te(108,Zpe(e)||"Unknown",i));return Gt({},n,r)}function k2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cc,hd=$r.current,Et($r,e),Et(hi,hi.current),!0}function P8(e,t,n){var r=e.stateNode;if(!r)throw Error(te(169));n?(e=yY(e,t,hd),r.__reactInternalMemoizedMergedChildContext=e,Rt(hi),Rt($r),Et($r,e)):Rt(hi),Et(hi,n)}var ol=null,yC=!1,O$=!1;function vY(e){ol===null?ol=[e]:ol.push(e)}function mme(e){yC=!0,vY(e)}function Oc(){if(!O$&&ol!==null){O$=!0;var e=0,t=ht;try{var n=ol;for(ht=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ol=null,yC=!1}catch(i){throw ol!==null&&(ol=ol.slice(e+1)),VG(l4,Oc),i}finally{ht=t,O$=!1}}return null}var Qh=[],Jh=0,C2=null,E2=0,bo=[],xo=0,pd=null,dl=1,hl="";function hf(e,t){Qh[Jh++]=E2,Qh[Jh++]=C2,C2=e,E2=t}function bY(e,t,n){bo[xo++]=dl,bo[xo++]=hl,bo[xo++]=pd,pd=e;var r=dl;e=hl;var i=32-vs(r)-1;r&=~(1<<i),n+=1;var o=32-vs(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,dl=1<<32-vs(t)+i|n<<i|r,hl=o+e}else dl=1<<o|n<<i|r,hl=e}function y4(e){e.return!==null&&(hf(e,1),bY(e,1,0))}function v4(e){for(;e===C2;)C2=Qh[--Jh],Qh[Jh]=null,E2=Qh[--Jh],Qh[Jh]=null;for(;e===pd;)pd=bo[--xo],bo[xo]=null,hl=bo[--xo],bo[xo]=null,dl=bo[--xo],bo[xo]=null}var Hi=null,Li=null,Lt=!1,is=null;function xY(e,t){var n=ko(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function M8(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Hi=e,Li=Ku(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Hi=e,Li=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=pd!==null?{id:dl,overflow:hl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ko(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Hi=e,Li=null,!0):!1;default:return!1}}function W5(e){return(e.mode&1)!==0&&(e.flags&128)===0}function H5(e){if(Lt){var t=Li;if(t){var n=t;if(!M8(e,t)){if(W5(e))throw Error(te(418));t=Ku(n.nextSibling);var r=Hi;t&&M8(e,t)?xY(r,n):(e.flags=e.flags&-4097|2,Lt=!1,Hi=e)}}else{if(W5(e))throw Error(te(418));e.flags=e.flags&-4097|2,Lt=!1,Hi=e}}}function F8(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Hi=e}function Xb(e){if(e!==Hi)return!1;if(!Lt)return F8(e),Lt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!j5(e.type,e.memoizedProps)),t&&(t=Li)){if(W5(e))throw wY(),Error(te(418));for(;t;)xY(e,t),t=Ku(t.nextSibling)}if(F8(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Li=Ku(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Li=null}}else Li=Hi?Ku(e.stateNode.nextSibling):null;return!0}function wY(){for(var e=Li;e;)e=Ku(e.nextSibling)}function ig(){Li=Hi=null,Lt=!1}function b4(e){is===null?is=[e]:is.push(e)}var yme=ql.ReactCurrentBatchConfig;function qm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,e))}return e}function Kb(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function R8(e){var t=e._init;return t(e._payload)}function SY(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=ec(y,v),y.index=0,y.sibling=null,y}function o(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,x){return v===null||v.tag!==6?(v=B$(b,y.mode,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function l(y,v,b,x){var w=b.type;return w===Hh?c(y,v,b.props.children,x,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===mu&&R8(w)===v.type)?(x=i(v,b.props),x.ref=qm(y,v,b),x.return=y,x):(x=kw(b.type,b.key,b.props,null,y.mode,x),x.ref=qm(y,v,b),x.return=y,x)}function u(y,v,b,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=U$(b,y.mode,x),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,x,w){return v===null||v.tag!==7?(v=Yf(b,y.mode,x,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=B$(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zb:return b=kw(v.type,v.key,v.props,null,y.mode,b),b.ref=qm(y,null,v),b.return=y,b;case Wh:return v=U$(v,y.mode,b),v.return=y,v;case mu:var x=v._init;return f(y,x(v._payload),b)}if(R0(v)||Bm(v))return v=Yf(v,y.mode,b,null),v.return=y,v;Kb(y,v)}return null}function d(y,v,b,x){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,v,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zb:return b.key===w?l(y,v,b,x):null;case Wh:return b.key===w?u(y,v,b,x):null;case mu:return w=b._init,d(y,v,w(b._payload),x)}if(R0(b)||Bm(b))return w!==null?null:c(y,v,b,x,null);Kb(y,b)}return null}function h(y,v,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zb:return y=y.get(x.key===null?b:x.key)||null,l(v,y,x,w);case Wh:return y=y.get(x.key===null?b:x.key)||null,u(v,y,x,w);case mu:var k=x._init;return h(y,v,b,k(x._payload),w)}if(R0(x)||Bm(x))return y=y.get(b)||null,c(v,y,x,w,null);Kb(v,x)}return null}function p(y,v,b,x){for(var w=null,k=null,S=v,C=v=0,E=null;S!==null&&C<b.length;C++){S.index>C?(E=S,S=null):E=S.sibling;var A=d(y,S,b[C],x);if(A===null){S===null&&(S=E);break}e&&S&&A.alternate===null&&t(y,S),v=o(A,v,C),k===null?w=A:k.sibling=A,k=A,S=E}if(C===b.length)return n(y,S),Lt&&hf(y,C),w;if(S===null){for(;C<b.length;C++)S=f(y,b[C],x),S!==null&&(v=o(S,v,C),k===null?w=S:k.sibling=S,k=S);return Lt&&hf(y,C),w}for(S=r(y,S);C<b.length;C++)E=h(S,y,C,b[C],x),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?C:E.key),v=o(E,v,C),k===null?w=E:k.sibling=E,k=E);return e&&S.forEach(function(T){return t(y,T)}),Lt&&hf(y,C),w}function g(y,v,b,x){var w=Bm(b);if(typeof w!="function")throw Error(te(150));if(b=w.call(b),b==null)throw Error(te(151));for(var k=w=null,S=v,C=v=0,E=null,A=b.next();S!==null&&!A.done;C++,A=b.next()){S.index>C?(E=S,S=null):E=S.sibling;var T=d(y,S,A.value,x);if(T===null){S===null&&(S=E);break}e&&S&&T.alternate===null&&t(y,S),v=o(T,v,C),k===null?w=T:k.sibling=T,k=T,S=E}if(A.done)return n(y,S),Lt&&hf(y,C),w;if(S===null){for(;!A.done;C++,A=b.next())A=f(y,A.value,x),A!==null&&(v=o(A,v,C),k===null?w=A:k.sibling=A,k=A);return Lt&&hf(y,C),w}for(S=r(y,S);!A.done;C++,A=b.next())A=h(S,y,C,A.value,x),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),v=o(A,v,C),k===null?w=A:k.sibling=A,k=A);return e&&S.forEach(function(I){return t(y,I)}),Lt&&hf(y,C),w}function m(y,v,b,x){if(typeof b=="object"&&b!==null&&b.type===Hh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case zb:e:{for(var w=b.key,k=v;k!==null;){if(k.key===w){if(w=b.type,w===Hh){if(k.tag===7){n(y,k.sibling),v=i(k,b.props.children),v.return=y,y=v;break e}}else if(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===mu&&R8(w)===k.type){n(y,k.sibling),v=i(k,b.props),v.ref=qm(y,k,b),v.return=y,y=v;break e}n(y,k);break}else t(y,k);k=k.sibling}b.type===Hh?(v=Yf(b.props.children,y.mode,x,b.key),v.return=y,y=v):(x=kw(b.type,b.key,b.props,null,y.mode,x),x.ref=qm(y,v,b),x.return=y,y=x)}return s(y);case Wh:e:{for(k=b.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=U$(b,y.mode,x),v.return=y,y=v}return s(y);case mu:return k=b._init,m(y,v,k(b._payload),x)}if(R0(b))return p(y,v,b,x);if(Bm(b))return g(y,v,b,x);Kb(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=B$(b,y.mode,x),v.return=y,y=v),s(y)):n(y,v)}return m}var og=SY(!0),kY=SY(!1),_2=Rc(null),$2=null,Zh=null,x4=null;function w4(){x4=Zh=$2=null}function S4(e){var t=_2.current;Rt(_2),e._currentValue=t}function q5(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cp(e,t){$2=e,x4=Zh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fi=!0),e.firstContext=null)}function Ro(e){var t=e._currentValue;if(x4!==e)if(e={context:e,memoizedValue:t,next:null},Zh===null){if($2===null)throw Error(te(308));Zh=e,$2.dependencies={lanes:0,firstContext:e}}else Zh=Zh.next=e;return t}var Ff=null;function k4(e){Ff===null?Ff=[e]:Ff.push(e)}function CY(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,k4(t)):(n.next=i.next,i.next=n),t.interleaved=n,Nl(e,r)}function Nl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var yu=!1;function C4(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function EY(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qu(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Nl(e,n)}return i=r.interleaved,i===null?(t.next=t,k4(r)):(t.next=i.next,i.next=t),r.interleaved=t,Nl(e,n)}function yw(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,u4(e,n)}}function O8(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function A2(e,t,n,r){var i=e.updateQueue;yu=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=u=l=null,a=o;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Gt({},f,d);break e;case 2:yu=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,s|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);md|=s,e.lanes=s,e.memoizedState=f}}function D8(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(te(191,i));i.call(r)}}}var wv={},va=Rc(wv),p1=Rc(wv),g1=Rc(wv);function Rf(e){if(e===wv)throw Error(te(174));return e}function E4(e,t){switch(Et(g1,t),Et(p1,e),Et(va,wv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_5(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_5(t,e)}Rt(va),Et(va,t)}function sg(){Rt(va),Rt(p1),Rt(g1)}function _Y(e){Rf(g1.current);var t=Rf(va.current),n=_5(t,e.type);t!==n&&(Et(p1,e),Et(va,n))}function _4(e){p1.current===e&&(Rt(va),Rt(p1))}var Ut=Rc(0);function T2(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var D$=[];function $4(){for(var e=0;e<D$.length;e++)D$[e]._workInProgressVersionPrimary=null;D$.length=0}var vw=ql.ReactCurrentDispatcher,N$=ql.ReactCurrentBatchConfig,gd=0,qt=null,yn=null,Tn=null,P2=!1,xy=!1,m1=0,vme=0;function ar(){throw Error(te(321))}function A4(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ss(e[n],t[n]))return!1;return!0}function T4(e,t,n,r,i,o){if(gd=o,qt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vw.current=e===null||e.memoizedState===null?Sme:kme,e=n(r,i),xy){o=0;do{if(xy=!1,m1=0,25<=o)throw Error(te(301));o+=1,Tn=yn=null,t.updateQueue=null,vw.current=Cme,e=n(r,i)}while(xy)}if(vw.current=M2,t=yn!==null&&yn.next!==null,gd=0,Tn=yn=qt=null,P2=!1,t)throw Error(te(300));return e}function P4(){var e=m1!==0;return m1=0,e}function Xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?qt.memoizedState=Tn=e:Tn=Tn.next=e,Tn}function Oo(){if(yn===null){var e=qt.alternate;e=e!==null?e.memoizedState:null}else e=yn.next;var t=Tn===null?qt.memoizedState:Tn.next;if(t!==null)Tn=t,yn=e;else{if(e===null)throw Error(te(310));yn=e,e={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},Tn===null?qt.memoizedState=Tn=e:Tn=Tn.next=e}return Tn}function y1(e,t){return typeof t=="function"?t(e):t}function I$(e){var t=Oo(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=yn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((gd&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,qt.lanes|=c,md|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,Ss(r,t.memoizedState)||(fi=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,qt.lanes|=o,md|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function L$(e){var t=Oo(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Ss(o,t.memoizedState)||(fi=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function $Y(){}function AY(e,t){var n=qt,r=Oo(),i=t(),o=!Ss(r.memoizedState,i);if(o&&(r.memoizedState=i,fi=!0),r=r.queue,M4(MY.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Tn!==null&&Tn.memoizedState.tag&1){if(n.flags|=2048,v1(9,PY.bind(null,n,r,i,t),void 0,null),Nn===null)throw Error(te(349));gd&30||TY(n,t,i)}return i}function TY(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qt.updateQueue,t===null?(t={lastEffect:null,stores:null},qt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function PY(e,t,n,r){t.value=n,t.getSnapshot=r,FY(t)&&RY(e)}function MY(e,t,n){return n(function(){FY(t)&&RY(e)})}function FY(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ss(e,n)}catch{return!0}}function RY(e){var t=Nl(e,1);t!==null&&bs(t,e,1,-1)}function N8(e){var t=Xs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y1,lastRenderedState:e},t.queue=e,e=e.dispatch=wme.bind(null,qt,e),[t.memoizedState,e]}function v1(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=qt.updateQueue,t===null?(t={lastEffect:null,stores:null},qt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function OY(){return Oo().memoizedState}function bw(e,t,n,r){var i=Xs();qt.flags|=e,i.memoizedState=v1(1|t,n,void 0,r===void 0?null:r)}function vC(e,t,n,r){var i=Oo();r=r===void 0?null:r;var o=void 0;if(yn!==null){var s=yn.memoizedState;if(o=s.destroy,r!==null&&A4(r,s.deps)){i.memoizedState=v1(t,n,o,r);return}}qt.flags|=e,i.memoizedState=v1(1|t,n,o,r)}function I8(e,t){return bw(8390656,8,e,t)}function M4(e,t){return vC(2048,8,e,t)}function DY(e,t){return vC(4,2,e,t)}function NY(e,t){return vC(4,4,e,t)}function IY(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function LY(e,t,n){return n=n!=null?n.concat([e]):null,vC(4,4,IY.bind(null,t,e),n)}function F4(){}function zY(e,t){var n=Oo();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&A4(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jY(e,t){var n=Oo();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&A4(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function BY(e,t,n){return gd&21?(Ss(n,t)||(n=qG(),qt.lanes|=n,md|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fi=!0),e.memoizedState=n)}function bme(e,t){var n=ht;ht=n!==0&&4>n?n:4,e(!0);var r=N$.transition;N$.transition={};try{e(!1),t()}finally{ht=n,N$.transition=r}}function UY(){return Oo().memoizedState}function xme(e,t,n){var r=Zu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},VY(e))WY(t,n);else if(n=CY(e,t,n,r),n!==null){var i=Gr();bs(n,e,r,i),HY(n,t,r)}}function wme(e,t,n){var r=Zu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(VY(e))WY(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Ss(a,s)){var l=t.interleaved;l===null?(i.next=i,k4(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=CY(e,t,i,r),n!==null&&(i=Gr(),bs(n,e,r,i),HY(n,t,r))}}function VY(e){var t=e.alternate;return e===qt||t!==null&&t===qt}function WY(e,t){xy=P2=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function HY(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,u4(e,n)}}var M2={readContext:Ro,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},Sme={readContext:Ro,useCallback:function(e,t){return Xs().memoizedState=[e,t===void 0?null:t],e},useContext:Ro,useEffect:I8,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bw(4194308,4,IY.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bw(4194308,4,e,t)},useInsertionEffect:function(e,t){return bw(4,2,e,t)},useMemo:function(e,t){var n=Xs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xme.bind(null,qt,e),[r.memoizedState,e]},useRef:function(e){var t=Xs();return e={current:e},t.memoizedState=e},useState:N8,useDebugValue:F4,useDeferredValue:function(e){return Xs().memoizedState=e},useTransition:function(){var e=N8(!1),t=e[0];return e=bme.bind(null,e[1]),Xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=qt,i=Xs();if(Lt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),Nn===null)throw Error(te(349));gd&30||TY(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,I8(MY.bind(null,r,o,e),[e]),r.flags|=2048,v1(9,PY.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Xs(),t=Nn.identifierPrefix;if(Lt){var n=hl,r=dl;n=(r&~(1<<32-vs(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=m1++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=vme++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kme={readContext:Ro,useCallback:zY,useContext:Ro,useEffect:M4,useImperativeHandle:LY,useInsertionEffect:DY,useLayoutEffect:NY,useMemo:jY,useReducer:I$,useRef:OY,useState:function(){return I$(y1)},useDebugValue:F4,useDeferredValue:function(e){var t=Oo();return BY(t,yn.memoizedState,e)},useTransition:function(){var e=I$(y1)[0],t=Oo().memoizedState;return[e,t]},useMutableSource:$Y,useSyncExternalStore:AY,useId:UY,unstable_isNewReconciler:!1},Cme={readContext:Ro,useCallback:zY,useContext:Ro,useEffect:M4,useImperativeHandle:LY,useInsertionEffect:DY,useLayoutEffect:NY,useMemo:jY,useReducer:L$,useRef:OY,useState:function(){return L$(y1)},useDebugValue:F4,useDeferredValue:function(e){var t=Oo();return yn===null?t.memoizedState=e:BY(t,yn.memoizedState,e)},useTransition:function(){var e=L$(y1)[0],t=Oo().memoizedState;return[e,t]},useMutableSource:$Y,useSyncExternalStore:AY,useId:UY,unstable_isNewReconciler:!1};function Jo(e,t){if(e&&e.defaultProps){t=Gt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function G5(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Gt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bC={isMounted:function(e){return(e=e._reactInternals)?Wd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gr(),i=Zu(e),o=wl(r,i);o.payload=t,n!=null&&(o.callback=n),t=Qu(e,o,i),t!==null&&(bs(t,e,i,r),yw(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gr(),i=Zu(e),o=wl(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Qu(e,o,i),t!==null&&(bs(t,e,i,r),yw(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gr(),r=Zu(e),i=wl(n,r);i.tag=2,t!=null&&(i.callback=t),t=Qu(e,i,r),t!==null&&(bs(t,e,r,n),yw(t,e,r))}};function L8(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!c1(n,r)||!c1(i,o):!0}function qY(e,t,n){var r=!1,i=cc,o=t.contextType;return typeof o=="object"&&o!==null?o=Ro(o):(i=pi(t)?hd:$r.current,r=t.contextTypes,o=(r=r!=null)?rg(e,i):cc),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bC,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function z8(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bC.enqueueReplaceState(t,t.state,null)}function Y5(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},C4(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Ro(o):(o=pi(t)?hd:$r.current,i.context=rg(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(G5(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&bC.enqueueReplaceState(i,i.state,null),A2(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ag(e,t){try{var n="",r=t;do n+=Jpe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function z$(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function X5(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Eme=typeof WeakMap=="function"?WeakMap:Map;function GY(e,t,n){n=wl(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){R2||(R2=!0,o3=r),X5(e,t)},n}function YY(e,t,n){n=wl(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){X5(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){X5(e,t),typeof r!="function"&&(Ju===null?Ju=new Set([this]):Ju.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function j8(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Eme;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=zme.bind(null,e,t,n),t.then(e,e))}function B8(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function U8(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wl(-1,1),t.tag=2,Qu(n,t,1))),n.lanes|=1),e)}var _me=ql.ReactCurrentOwner,fi=!1;function Ir(e,t,n,r){t.child=e===null?kY(t,null,n,r):og(t,e.child,n,r)}function V8(e,t,n,r,i){n=n.render;var o=t.ref;return Cp(t,i),r=T4(e,t,n,r,o,i),n=P4(),e!==null&&!fi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Il(e,t,i)):(Lt&&n&&y4(t),t.flags|=1,Ir(e,t,r,i),t.child)}function W8(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!j4(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,XY(e,t,o,r,i)):(e=kw(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:c1,n(s,r)&&e.ref===t.ref)return Il(e,t,i)}return t.flags|=1,e=ec(o,r),e.ref=t.ref,e.return=t,t.child=e}function XY(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(c1(o,r)&&e.ref===t.ref)if(fi=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(fi=!0);else return t.lanes=e.lanes,Il(e,t,i)}return K5(e,t,n,r,i)}function KY(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(tp,Fi),Fi|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Et(tp,Fi),Fi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Et(tp,Fi),Fi|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Et(tp,Fi),Fi|=r;return Ir(e,t,i,n),t.child}function QY(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function K5(e,t,n,r,i){var o=pi(n)?hd:$r.current;return o=rg(t,o),Cp(t,i),n=T4(e,t,n,r,o,i),r=P4(),e!==null&&!fi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Il(e,t,i)):(Lt&&r&&y4(t),t.flags|=1,Ir(e,t,n,i),t.child)}function H8(e,t,n,r,i){if(pi(n)){var o=!0;k2(t)}else o=!1;if(Cp(t,i),t.stateNode===null)xw(e,t),qY(t,n,r),Y5(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ro(u):(u=pi(n)?hd:$r.current,u=rg(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&z8(t,s,r,u),yu=!1;var d=t.memoizedState;s.state=d,A2(t,r,s,i),l=t.memoizedState,a!==r||d!==l||hi.current||yu?(typeof c=="function"&&(G5(t,n,c,r),l=t.memoizedState),(a=yu||L8(t,n,a,r,d,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,EY(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Jo(t.type,a),s.props=u,f=t.pendingProps,d=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ro(l):(l=pi(n)?hd:$r.current,l=rg(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||d!==l)&&z8(t,s,r,l),yu=!1,d=t.memoizedState,s.state=d,A2(t,r,s,i);var p=t.memoizedState;a!==f||d!==p||hi.current||yu?(typeof h=="function"&&(G5(t,n,h,r),p=t.memoizedState),(u=yu||L8(t,n,u,r,d,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Q5(e,t,n,r,o,i)}function Q5(e,t,n,r,i,o){QY(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&P8(t,n,!1),Il(e,t,o);r=t.stateNode,_me.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=og(t,e.child,null,o),t.child=og(t,null,a,o)):Ir(e,t,a,o),t.memoizedState=r.state,i&&P8(t,n,!0),t.child}function JY(e){var t=e.stateNode;t.pendingContext?T8(e,t.pendingContext,t.pendingContext!==t.context):t.context&&T8(e,t.context,!1),E4(e,t.containerInfo)}function q8(e,t,n,r,i){return ig(),b4(i),t.flags|=256,Ir(e,t,n,r),t.child}var J5={dehydrated:null,treeContext:null,retryLane:0};function Z5(e){return{baseLanes:e,cachePool:null,transitions:null}}function ZY(e,t,n){var r=t.pendingProps,i=Ut.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Et(Ut,i&1),e===null)return H5(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=SC(s,r,0,null),e=Yf(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Z5(n),t.memoizedState=J5,e):R4(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $me(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ec(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ec(a,o):(o=Yf(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?Z5(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=J5,r}return o=e.child,e=o.sibling,r=ec(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function R4(e,t){return t=SC({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qb(e,t,n,r){return r!==null&&b4(r),og(t,e.child,null,n),e=R4(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $me(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=z$(Error(te(422))),Qb(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=SC({mode:"visible",children:r.children},i,0,null),o=Yf(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&og(t,e.child,null,s),t.child.memoizedState=Z5(s),t.memoizedState=J5,o);if(!(t.mode&1))return Qb(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(te(419)),r=z$(o,r,void 0),Qb(e,t,s,r)}if(a=(s&e.childLanes)!==0,fi||a){if(r=Nn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Nl(e,i),bs(r,e,i,-1))}return z4(),r=z$(Error(te(421))),Qb(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=jme.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Li=Ku(i.nextSibling),Hi=t,Lt=!0,is=null,e!==null&&(bo[xo++]=dl,bo[xo++]=hl,bo[xo++]=pd,dl=e.id,hl=e.overflow,pd=t),t=R4(t,r.children),t.flags|=4096,t)}function G8(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),q5(e.return,t,n)}function j$(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function eX(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ir(e,t,r.children,n),r=Ut.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&G8(e,n,t);else if(e.tag===19)G8(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Et(Ut,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&T2(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),j$(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&T2(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}j$(t,!0,n,null,o);break;case"together":j$(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xw(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Il(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),md|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=ec(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ec(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ame(e,t,n){switch(t.tag){case 3:JY(t),ig();break;case 5:_Y(t);break;case 1:pi(t.type)&&k2(t);break;case 4:E4(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Et(_2,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Et(Ut,Ut.current&1),t.flags|=128,null):n&t.child.childLanes?ZY(e,t,n):(Et(Ut,Ut.current&1),e=Il(e,t,n),e!==null?e.sibling:null);Et(Ut,Ut.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return eX(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et(Ut,Ut.current),r)break;return null;case 22:case 23:return t.lanes=0,KY(e,t,n)}return Il(e,t,n)}var tX,e3,nX,rX;tX=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};e3=function(){};nX=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Rf(va.current);var o=null;switch(n){case"input":i=S5(e,i),r=S5(e,r),o=[];break;case"select":i=Gt({},i,{value:void 0}),r=Gt({},r,{value:void 0}),o=[];break;case"textarea":i=E5(e,i),r=E5(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=w2)}$5(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(r1.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(r1.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Tt("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};rX=function(e,t,n,r){n!==r&&(t.flags|=4)};function Gm(e,t){if(!Lt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Tme(e,t,n){var r=t.pendingProps;switch(v4(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(t),null;case 1:return pi(t.type)&&S2(),lr(t),null;case 3:return r=t.stateNode,sg(),Rt(hi),Rt($r),$4(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Xb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,is!==null&&(l3(is),is=null))),e3(e,t),lr(t),null;case 5:_4(t);var i=Rf(g1.current);if(n=t.type,e!==null&&t.stateNode!=null)nX(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(te(166));return lr(t),null}if(e=Rf(va.current),Xb(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[sa]=t,r[h1]=o,e=(t.mode&1)!==0,n){case"dialog":Tt("cancel",r),Tt("close",r);break;case"iframe":case"object":case"embed":Tt("load",r);break;case"video":case"audio":for(i=0;i<D0.length;i++)Tt(D0[i],r);break;case"source":Tt("error",r);break;case"img":case"image":case"link":Tt("error",r),Tt("load",r);break;case"details":Tt("toggle",r);break;case"input":n8(r,o),Tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Tt("invalid",r);break;case"textarea":i8(r,o),Tt("invalid",r)}$5(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Yb(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Yb(r.textContent,a,e),i=["children",""+a]):r1.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Tt("scroll",r)}switch(n){case"input":jb(r),r8(r,o,!0);break;case"textarea":jb(r),o8(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=w2)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=MG(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[sa]=t,e[h1]=r,tX(e,t,!1,!1),t.stateNode=e;e:{switch(s=A5(n,r),n){case"dialog":Tt("cancel",e),Tt("close",e),i=r;break;case"iframe":case"object":case"embed":Tt("load",e),i=r;break;case"video":case"audio":for(i=0;i<D0.length;i++)Tt(D0[i],e);i=r;break;case"source":Tt("error",e),i=r;break;case"img":case"image":case"link":Tt("error",e),Tt("load",e),i=r;break;case"details":Tt("toggle",e),i=r;break;case"input":n8(e,r),i=S5(e,r),Tt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Gt({},r,{value:void 0}),Tt("invalid",e);break;case"textarea":i8(e,r),i=E5(e,r),Tt("invalid",e);break;default:i=r}$5(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?OG(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&FG(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&i1(e,l):typeof l=="number"&&i1(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(r1.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Tt("scroll",e):l!=null&&r4(e,o,l,s))}switch(n){case"input":jb(e),r8(e,r,!1);break;case"textarea":jb(e),o8(e);break;case"option":r.value!=null&&e.setAttribute("value",""+uc(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?xp(e,!!r.multiple,o,!1):r.defaultValue!=null&&xp(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=w2)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lr(t),null;case 6:if(e&&t.stateNode!=null)rX(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(te(166));if(n=Rf(g1.current),Rf(va.current),Xb(t)){if(r=t.stateNode,n=t.memoizedProps,r[sa]=t,(o=r.nodeValue!==n)&&(e=Hi,e!==null))switch(e.tag){case 3:Yb(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Yb(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sa]=t,t.stateNode=r}return lr(t),null;case 13:if(Rt(Ut),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Lt&&Li!==null&&t.mode&1&&!(t.flags&128))wY(),ig(),t.flags|=98560,o=!1;else if(o=Xb(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(te(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(te(317));o[sa]=t}else ig(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lr(t),o=!1}else is!==null&&(l3(is),is=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ut.current&1?xn===0&&(xn=3):z4())),t.updateQueue!==null&&(t.flags|=4),lr(t),null);case 4:return sg(),e3(e,t),e===null&&f1(t.stateNode.containerInfo),lr(t),null;case 10:return S4(t.type._context),lr(t),null;case 17:return pi(t.type)&&S2(),lr(t),null;case 19:if(Rt(Ut),o=t.memoizedState,o===null)return lr(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Gm(o,!1);else{if(xn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=T2(e),s!==null){for(t.flags|=128,Gm(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Et(Ut,Ut.current&1|2),t.child}e=e.sibling}o.tail!==null&&rn()>lg&&(t.flags|=128,r=!0,Gm(o,!1),t.lanes=4194304)}else{if(!r)if(e=T2(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Gm(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Lt)return lr(t),null}else 2*rn()-o.renderingStartTime>lg&&n!==1073741824&&(t.flags|=128,r=!0,Gm(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=rn(),t.sibling=null,n=Ut.current,Et(Ut,r?n&1|2:n&1),t):(lr(t),null);case 22:case 23:return L4(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Fi&1073741824&&(lr(t),t.subtreeFlags&6&&(t.flags|=8192)):lr(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function Pme(e,t){switch(v4(t),t.tag){case 1:return pi(t.type)&&S2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sg(),Rt(hi),Rt($r),$4(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _4(t),null;case 13:if(Rt(Ut),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));ig()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(Ut),null;case 4:return sg(),null;case 10:return S4(t.type._context),null;case 22:case 23:return L4(),null;case 24:return null;default:return null}}var Jb=!1,br=!1,Mme=typeof WeakSet=="function"?WeakSet:Set,de=null;function ep(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Jt(e,t,r)}else n.current=null}function t3(e,t,n){try{n()}catch(r){Jt(e,t,r)}}var Y8=!1;function Fme(e,t){if(L5=v2,e=lY(),m4(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++u===i&&(a=s),d===o&&++c===r&&(l=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(z5={focusedElem:e,selectionRange:n},v2=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Jo(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(x){Jt(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return p=Y8,Y8=!1,p}function wy(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&t3(t,n,o)}i=i.next}while(i!==r)}}function xC(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function n3(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function iX(e){var t=e.alternate;t!==null&&(e.alternate=null,iX(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sa],delete t[h1],delete t[U5],delete t[pme],delete t[gme])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oX(e){return e.tag===5||e.tag===3||e.tag===4}function X8(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oX(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function r3(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=w2));else if(r!==4&&(e=e.child,e!==null))for(r3(e,t,n),e=e.sibling;e!==null;)r3(e,t,n),e=e.sibling}function i3(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(i3(e,t,n),e=e.sibling;e!==null;)i3(e,t,n),e=e.sibling}var Wn=null,ts=!1;function ou(e,t,n){for(n=n.child;n!==null;)sX(e,t,n),n=n.sibling}function sX(e,t,n){if(ya&&typeof ya.onCommitFiberUnmount=="function")try{ya.onCommitFiberUnmount(dC,n)}catch{}switch(n.tag){case 5:br||ep(n,t);case 6:var r=Wn,i=ts;Wn=null,ou(e,t,n),Wn=r,ts=i,Wn!==null&&(ts?(e=Wn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Wn.removeChild(n.stateNode));break;case 18:Wn!==null&&(ts?(e=Wn,n=n.stateNode,e.nodeType===8?R$(e.parentNode,n):e.nodeType===1&&R$(e,n),l1(e)):R$(Wn,n.stateNode));break;case 4:r=Wn,i=ts,Wn=n.stateNode.containerInfo,ts=!0,ou(e,t,n),Wn=r,ts=i;break;case 0:case 11:case 14:case 15:if(!br&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&t3(n,t,s),i=i.next}while(i!==r)}ou(e,t,n);break;case 1:if(!br&&(ep(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Jt(n,t,a)}ou(e,t,n);break;case 21:ou(e,t,n);break;case 22:n.mode&1?(br=(r=br)||n.memoizedState!==null,ou(e,t,n),br=r):ou(e,t,n);break;default:ou(e,t,n)}}function K8(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Mme),t.forEach(function(r){var i=Bme.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qo(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Wn=a.stateNode,ts=!1;break e;case 3:Wn=a.stateNode.containerInfo,ts=!0;break e;case 4:Wn=a.stateNode.containerInfo,ts=!0;break e}a=a.return}if(Wn===null)throw Error(te(160));sX(o,s,i),Wn=null,ts=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Jt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aX(t,e),t=t.sibling}function aX(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qo(t,e),Us(e),r&4){try{wy(3,e,e.return),xC(3,e)}catch(g){Jt(e,e.return,g)}try{wy(5,e,e.return)}catch(g){Jt(e,e.return,g)}}break;case 1:qo(t,e),Us(e),r&512&&n!==null&&ep(n,n.return);break;case 5:if(qo(t,e),Us(e),r&512&&n!==null&&ep(n,n.return),e.flags&32){var i=e.stateNode;try{i1(i,"")}catch(g){Jt(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&TG(i,o),A5(a,s);var u=A5(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?OG(i,f):c==="dangerouslySetInnerHTML"?FG(i,f):c==="children"?i1(i,f):r4(i,c,f,u)}switch(a){case"input":k5(i,o);break;case"textarea":PG(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?xp(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?xp(i,!!o.multiple,o.defaultValue,!0):xp(i,!!o.multiple,o.multiple?[]:"",!1))}i[h1]=o}catch(g){Jt(e,e.return,g)}}break;case 6:if(qo(t,e),Us(e),r&4){if(e.stateNode===null)throw Error(te(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Jt(e,e.return,g)}}break;case 3:if(qo(t,e),Us(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{l1(t.containerInfo)}catch(g){Jt(e,e.return,g)}break;case 4:qo(t,e),Us(e);break;case 13:qo(t,e),Us(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(N4=rn())),r&4&&K8(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(br=(u=br)||c,qo(t,e),br=u):qo(t,e),Us(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(de=e,c=e.child;c!==null;){for(f=de=c;de!==null;){switch(d=de,h=d.child,d.tag){case 0:case 11:case 14:case 15:wy(4,d,d.return);break;case 1:ep(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Jt(r,n,g)}}break;case 5:ep(d,d.return);break;case 22:if(d.memoizedState!==null){J8(f);continue}}h!==null?(h.return=d,de=h):J8(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=RG("display",s))}catch(g){Jt(e,e.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Jt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qo(t,e),Us(e),r&4&&K8(e);break;case 21:break;default:qo(t,e),Us(e)}}function Us(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(oX(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(i1(i,""),r.flags&=-33);var o=X8(e);i3(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=X8(e);r3(e,a,s);break;default:throw Error(te(161))}}catch(l){Jt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rme(e,t,n){de=e,lX(e)}function lX(e,t,n){for(var r=(e.mode&1)!==0;de!==null;){var i=de,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Jb;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||br;a=Jb;var u=br;if(Jb=s,(br=l)&&!u)for(de=i;de!==null;)s=de,l=s.child,s.tag===22&&s.memoizedState!==null?Z8(i):l!==null?(l.return=s,de=l):Z8(i);for(;o!==null;)de=o,lX(o),o=o.sibling;de=i,Jb=a,br=u}Q8(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,de=o):Q8(e)}}function Q8(e){for(;de!==null;){var t=de;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:br||xC(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!br)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Jo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&D8(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}D8(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&l1(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}br||t.flags&512&&n3(t)}catch(d){Jt(t,t.return,d)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function J8(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function Z8(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xC(4,t)}catch(l){Jt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Jt(t,i,l)}}var o=t.return;try{n3(t)}catch(l){Jt(t,o,l)}break;case 5:var s=t.return;try{n3(t)}catch(l){Jt(t,s,l)}}}catch(l){Jt(t,t.return,l)}if(t===e){de=null;break}var a=t.sibling;if(a!==null){a.return=t.return,de=a;break}de=t.return}}var Ome=Math.ceil,F2=ql.ReactCurrentDispatcher,O4=ql.ReactCurrentOwner,Po=ql.ReactCurrentBatchConfig,Ke=0,Nn=null,pn=null,Zn=0,Fi=0,tp=Rc(0),xn=0,b1=null,md=0,wC=0,D4=0,Sy=null,ai=null,N4=0,lg=1/0,nl=null,R2=!1,o3=null,Ju=null,Zb=!1,Nu=null,O2=0,ky=0,s3=null,ww=-1,Sw=0;function Gr(){return Ke&6?rn():ww!==-1?ww:ww=rn()}function Zu(e){return e.mode&1?Ke&2&&Zn!==0?Zn&-Zn:yme.transition!==null?(Sw===0&&(Sw=qG()),Sw):(e=ht,e!==0||(e=window.event,e=e===void 0?16:ZG(e.type)),e):1}function bs(e,t,n,r){if(50<ky)throw ky=0,s3=null,Error(te(185));vv(e,n,r),(!(Ke&2)||e!==Nn)&&(e===Nn&&(!(Ke&2)&&(wC|=n),xn===4&&_u(e,Zn)),gi(e,r),n===1&&Ke===0&&!(t.mode&1)&&(lg=rn()+500,yC&&Oc()))}function gi(e,t){var n=e.callbackNode;yge(e,t);var r=y2(e,e===Nn?Zn:0);if(r===0)n!==null&&l8(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&l8(n),t===1)e.tag===0?mme(e9.bind(null,e)):vY(e9.bind(null,e)),dme(function(){!(Ke&6)&&Oc()}),n=null;else{switch(GG(r)){case 1:n=l4;break;case 4:n=WG;break;case 16:n=m2;break;case 536870912:n=HG;break;default:n=m2}n=mX(n,uX.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uX(e,t){if(ww=-1,Sw=0,Ke&6)throw Error(te(327));var n=e.callbackNode;if(Ep()&&e.callbackNode!==n)return null;var r=y2(e,e===Nn?Zn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=D2(e,r);else{t=r;var i=Ke;Ke|=2;var o=fX();(Nn!==e||Zn!==t)&&(nl=null,lg=rn()+500,Gf(e,t));do try{Ime();break}catch(a){cX(e,a)}while(!0);w4(),F2.current=o,Ke=i,pn!==null?t=0:(Nn=null,Zn=0,t=xn)}if(t!==0){if(t===2&&(i=R5(e),i!==0&&(r=i,t=a3(e,i))),t===1)throw n=b1,Gf(e,0),_u(e,r),gi(e,rn()),n;if(t===6)_u(e,r);else{if(i=e.current.alternate,!(r&30)&&!Dme(i)&&(t=D2(e,r),t===2&&(o=R5(e),o!==0&&(r=o,t=a3(e,o))),t===1))throw n=b1,Gf(e,0),_u(e,r),gi(e,rn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(te(345));case 2:pf(e,ai,nl);break;case 3:if(_u(e,r),(r&130023424)===r&&(t=N4+500-rn(),10<t)){if(y2(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Gr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=B5(pf.bind(null,e,ai,nl),t);break}pf(e,ai,nl);break;case 4:if(_u(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-vs(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=rn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ome(r/1960))-r,10<r){e.timeoutHandle=B5(pf.bind(null,e,ai,nl),r);break}pf(e,ai,nl);break;case 5:pf(e,ai,nl);break;default:throw Error(te(329))}}}return gi(e,rn()),e.callbackNode===n?uX.bind(null,e):null}function a3(e,t){var n=Sy;return e.current.memoizedState.isDehydrated&&(Gf(e,t).flags|=256),e=D2(e,t),e!==2&&(t=ai,ai=n,t!==null&&l3(t)),e}function l3(e){ai===null?ai=e:ai.push.apply(ai,e)}function Dme(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ss(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _u(e,t){for(t&=~D4,t&=~wC,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vs(t),r=1<<n;e[n]=-1,t&=~r}}function e9(e){if(Ke&6)throw Error(te(327));Ep();var t=y2(e,0);if(!(t&1))return gi(e,rn()),null;var n=D2(e,t);if(e.tag!==0&&n===2){var r=R5(e);r!==0&&(t=r,n=a3(e,r))}if(n===1)throw n=b1,Gf(e,0),_u(e,t),gi(e,rn()),n;if(n===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pf(e,ai,nl),gi(e,rn()),null}function I4(e,t){var n=Ke;Ke|=1;try{return e(t)}finally{Ke=n,Ke===0&&(lg=rn()+500,yC&&Oc())}}function yd(e){Nu!==null&&Nu.tag===0&&!(Ke&6)&&Ep();var t=Ke;Ke|=1;var n=Po.transition,r=ht;try{if(Po.transition=null,ht=1,e)return e()}finally{ht=r,Po.transition=n,Ke=t,!(Ke&6)&&Oc()}}function L4(){Fi=tp.current,Rt(tp)}function Gf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,fme(n)),pn!==null)for(n=pn.return;n!==null;){var r=n;switch(v4(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&S2();break;case 3:sg(),Rt(hi),Rt($r),$4();break;case 5:_4(r);break;case 4:sg();break;case 13:Rt(Ut);break;case 19:Rt(Ut);break;case 10:S4(r.type._context);break;case 22:case 23:L4()}n=n.return}if(Nn=e,pn=e=ec(e.current,null),Zn=Fi=t,xn=0,b1=null,D4=wC=md=0,ai=Sy=null,Ff!==null){for(t=0;t<Ff.length;t++)if(n=Ff[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Ff=null}return e}function cX(e,t){do{var n=pn;try{if(w4(),vw.current=M2,P2){for(var r=qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}P2=!1}if(gd=0,Tn=yn=qt=null,xy=!1,m1=0,O4.current=null,n===null||n.return===null){xn=1,b1=t,pn=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=Zn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=B8(s);if(h!==null){h.flags&=-257,U8(h,s,a,o,t),h.mode&1&&j8(o,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}else{if(!(t&1)){j8(o,u,t),z4();break e}l=Error(te(426))}}else if(Lt&&a.mode&1){var m=B8(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),U8(m,s,a,o,t),b4(ag(l,a));break e}}o=l=ag(l,a),xn!==4&&(xn=2),Sy===null?Sy=[o]:Sy.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=GY(o,l,t);O8(o,y);break e;case 1:a=l;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ju===null||!Ju.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=YY(o,a,t);O8(o,x);break e}}o=o.return}while(o!==null)}hX(n)}catch(w){t=w,pn===n&&n!==null&&(pn=n=n.return);continue}break}while(!0)}function fX(){var e=F2.current;return F2.current=M2,e===null?M2:e}function z4(){(xn===0||xn===3||xn===2)&&(xn=4),Nn===null||!(md&268435455)&&!(wC&268435455)||_u(Nn,Zn)}function D2(e,t){var n=Ke;Ke|=2;var r=fX();(Nn!==e||Zn!==t)&&(nl=null,Gf(e,t));do try{Nme();break}catch(i){cX(e,i)}while(!0);if(w4(),Ke=n,F2.current=r,pn!==null)throw Error(te(261));return Nn=null,Zn=0,xn}function Nme(){for(;pn!==null;)dX(pn)}function Ime(){for(;pn!==null&&!lge();)dX(pn)}function dX(e){var t=gX(e.alternate,e,Fi);e.memoizedProps=e.pendingProps,t===null?hX(e):pn=t,O4.current=null}function hX(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Pme(n,t),n!==null){n.flags&=32767,pn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xn=6,pn=null;return}}else if(n=Tme(n,t,Fi),n!==null){pn=n;return}if(t=t.sibling,t!==null){pn=t;return}pn=t=e}while(t!==null);xn===0&&(xn=5)}function pf(e,t,n){var r=ht,i=Po.transition;try{Po.transition=null,ht=1,Lme(e,t,n,r)}finally{Po.transition=i,ht=r}return null}function Lme(e,t,n,r){do Ep();while(Nu!==null);if(Ke&6)throw Error(te(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(vge(e,o),e===Nn&&(pn=Nn=null,Zn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zb||(Zb=!0,mX(m2,function(){return Ep(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Po.transition,Po.transition=null;var s=ht;ht=1;var a=Ke;Ke|=4,O4.current=null,Fme(e,n),aX(n,e),ime(z5),v2=!!L5,z5=L5=null,e.current=n,Rme(n),uge(),Ke=a,ht=s,Po.transition=o}else e.current=n;if(Zb&&(Zb=!1,Nu=e,O2=i),o=e.pendingLanes,o===0&&(Ju=null),dge(n.stateNode),gi(e,rn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(R2)throw R2=!1,e=o3,o3=null,e;return O2&1&&e.tag!==0&&Ep(),o=e.pendingLanes,o&1?e===s3?ky++:(ky=0,s3=e):ky=0,Oc(),null}function Ep(){if(Nu!==null){var e=GG(O2),t=Po.transition,n=ht;try{if(Po.transition=null,ht=16>e?16:e,Nu===null)var r=!1;else{if(e=Nu,Nu=null,O2=0,Ke&6)throw Error(te(331));var i=Ke;for(Ke|=4,de=e.current;de!==null;){var o=de,s=o.child;if(de.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(de=u;de!==null;){var c=de;switch(c.tag){case 0:case 11:case 15:wy(8,c,o)}var f=c.child;if(f!==null)f.return=c,de=f;else for(;de!==null;){c=de;var d=c.sibling,h=c.return;if(iX(c),c===u){de=null;break}if(d!==null){d.return=h,de=d;break}de=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}de=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,de=s;else e:for(;de!==null;){if(o=de,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wy(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,de=y;break e}de=o.return}}var v=e.current;for(de=v;de!==null;){s=de;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,de=b;else e:for(s=v;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xC(9,a)}}catch(w){Jt(a,a.return,w)}if(a===s){de=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,de=x;break e}de=a.return}}if(Ke=i,Oc(),ya&&typeof ya.onPostCommitFiberRoot=="function")try{ya.onPostCommitFiberRoot(dC,e)}catch{}r=!0}return r}finally{ht=n,Po.transition=t}}return!1}function t9(e,t,n){t=ag(n,t),t=GY(e,t,1),e=Qu(e,t,1),t=Gr(),e!==null&&(vv(e,1,t),gi(e,t))}function Jt(e,t,n){if(e.tag===3)t9(e,e,n);else for(;t!==null;){if(t.tag===3){t9(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ju===null||!Ju.has(r))){e=ag(n,e),e=YY(t,e,1),t=Qu(t,e,1),e=Gr(),t!==null&&(vv(t,1,e),gi(t,e));break}}t=t.return}}function zme(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Gr(),e.pingedLanes|=e.suspendedLanes&n,Nn===e&&(Zn&n)===n&&(xn===4||xn===3&&(Zn&130023424)===Zn&&500>rn()-N4?Gf(e,0):D4|=n),gi(e,t)}function pX(e,t){t===0&&(e.mode&1?(t=Vb,Vb<<=1,!(Vb&130023424)&&(Vb=4194304)):t=1);var n=Gr();e=Nl(e,t),e!==null&&(vv(e,t,n),gi(e,n))}function jme(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pX(e,n)}function Bme(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(t),pX(e,n)}var gX;gX=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||hi.current)fi=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return fi=!1,Ame(e,t,n);fi=!!(e.flags&131072)}else fi=!1,Lt&&t.flags&1048576&&bY(t,E2,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xw(e,t),e=t.pendingProps;var i=rg(t,$r.current);Cp(t,n),i=T4(null,t,r,e,i,n);var o=P4();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pi(r)?(o=!0,k2(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,C4(t),i.updater=bC,t.stateNode=i,i._reactInternals=t,Y5(t,r,e,n),t=Q5(null,t,r,!0,o,n)):(t.tag=0,Lt&&o&&y4(t),Ir(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xw(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Vme(r),e=Jo(r,e),i){case 0:t=K5(null,t,r,e,n);break e;case 1:t=H8(null,t,r,e,n);break e;case 11:t=V8(null,t,r,e,n);break e;case 14:t=W8(null,t,r,Jo(r.type,e),n);break e}throw Error(te(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jo(r,i),K5(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jo(r,i),H8(e,t,r,i,n);case 3:e:{if(JY(t),e===null)throw Error(te(387));r=t.pendingProps,o=t.memoizedState,i=o.element,EY(e,t),A2(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=ag(Error(te(423)),t),t=q8(e,t,r,n,i);break e}else if(r!==i){i=ag(Error(te(424)),t),t=q8(e,t,r,n,i);break e}else for(Li=Ku(t.stateNode.containerInfo.firstChild),Hi=t,Lt=!0,is=null,n=kY(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ig(),r===i){t=Il(e,t,n);break e}Ir(e,t,r,n)}t=t.child}return t;case 5:return _Y(t),e===null&&H5(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,j5(r,i)?s=null:o!==null&&j5(r,o)&&(t.flags|=32),QY(e,t),Ir(e,t,s,n),t.child;case 6:return e===null&&H5(t),null;case 13:return ZY(e,t,n);case 4:return E4(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=og(t,null,r,n):Ir(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jo(r,i),V8(e,t,r,i,n);case 7:return Ir(e,t,t.pendingProps,n),t.child;case 8:return Ir(e,t,t.pendingProps.children,n),t.child;case 12:return Ir(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Et(_2,r._currentValue),r._currentValue=s,o!==null)if(Ss(o.value,s)){if(o.children===i.children&&!hi.current){t=Il(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=wl(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),q5(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(te(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),q5(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ir(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Cp(t,n),i=Ro(i),r=r(i),t.flags|=1,Ir(e,t,r,n),t.child;case 14:return r=t.type,i=Jo(r,t.pendingProps),i=Jo(r.type,i),W8(e,t,r,i,n);case 15:return XY(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jo(r,i),xw(e,t),t.tag=1,pi(r)?(e=!0,k2(t)):e=!1,Cp(t,n),qY(t,r,i),Y5(t,r,i,n),Q5(null,t,r,!0,e,n);case 19:return eX(e,t,n);case 22:return KY(e,t,n)}throw Error(te(156,t.tag))};function mX(e,t){return VG(e,t)}function Ume(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ko(e,t,n,r){return new Ume(e,t,n,r)}function j4(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vme(e){if(typeof e=="function")return j4(e)?1:0;if(e!=null){if(e=e.$$typeof,e===o4)return 11;if(e===s4)return 14}return 2}function ec(e,t){var n=e.alternate;return n===null?(n=ko(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kw(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")j4(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Hh:return Yf(n.children,i,o,t);case i4:s=8,i|=8;break;case v5:return e=ko(12,n,t,i|2),e.elementType=v5,e.lanes=o,e;case b5:return e=ko(13,n,t,i),e.elementType=b5,e.lanes=o,e;case x5:return e=ko(19,n,t,i),e.elementType=x5,e.lanes=o,e;case _G:return SC(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case CG:s=10;break e;case EG:s=9;break e;case o4:s=11;break e;case s4:s=14;break e;case mu:s=16,r=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=ko(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Yf(e,t,n,r){return e=ko(7,e,r,t),e.lanes=n,e}function SC(e,t,n,r){return e=ko(22,e,r,t),e.elementType=_G,e.lanes=n,e.stateNode={isHidden:!1},e}function B$(e,t,n){return e=ko(6,e,null,t),e.lanes=n,e}function U$(e,t,n){return t=ko(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wme(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=S$(0),this.expirationTimes=S$(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=S$(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function B4(e,t,n,r,i,o,s,a,l){return e=new Wme(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ko(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},C4(o),e}function Hme(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wh,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function yX(e){if(!e)return cc;e=e._reactInternals;e:{if(Wd(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var n=e.type;if(pi(n))return yY(e,n,t)}return t}function vX(e,t,n,r,i,o,s,a,l){return e=B4(n,r,!0,e,i,o,s,a,l),e.context=yX(null),n=e.current,r=Gr(),i=Zu(n),o=wl(r,i),o.callback=t??null,Qu(n,o,i),e.current.lanes=i,vv(e,i,r),gi(e,r),e}function kC(e,t,n,r){var i=t.current,o=Gr(),s=Zu(i);return n=yX(n),t.context===null?t.context=n:t.pendingContext=n,t=wl(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Qu(i,t,s),e!==null&&(bs(e,i,s,o),yw(e,i,s)),s}function N2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function n9(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function U4(e,t){n9(e,t),(e=e.alternate)&&n9(e,t)}function qme(){return null}var bX=typeof reportError=="function"?reportError:function(e){console.error(e)};function V4(e){this._internalRoot=e}CC.prototype.render=V4.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));kC(e,t,null,null)};CC.prototype.unmount=V4.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yd(function(){kC(null,e,null,null)}),t[Dl]=null}};function CC(e){this._internalRoot=e}CC.prototype.unstable_scheduleHydration=function(e){if(e){var t=KG();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Eu.length&&t!==0&&t<Eu[n].priority;n++);Eu.splice(n,0,e),n===0&&JG(e)}};function W4(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function EC(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function r9(){}function Gme(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=N2(s);o.call(u)}}var s=vX(t,r,e,0,null,!1,!1,"",r9);return e._reactRootContainer=s,e[Dl]=s.current,f1(e.nodeType===8?e.parentNode:e),yd(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=N2(l);a.call(u)}}var l=B4(e,0,!1,null,null,!1,!1,"",r9);return e._reactRootContainer=l,e[Dl]=l.current,f1(e.nodeType===8?e.parentNode:e),yd(function(){kC(t,l,n,r)}),l}function _C(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=N2(s);a.call(l)}}kC(t,s,e,i)}else s=Gme(n,t,e,i,r);return N2(s)}YG=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=O0(t.pendingLanes);n!==0&&(u4(t,n|1),gi(t,rn()),!(Ke&6)&&(lg=rn()+500,Oc()))}break;case 13:yd(function(){var r=Nl(e,1);if(r!==null){var i=Gr();bs(r,e,1,i)}}),U4(e,1)}};c4=function(e){if(e.tag===13){var t=Nl(e,134217728);if(t!==null){var n=Gr();bs(t,e,134217728,n)}U4(e,134217728)}};XG=function(e){if(e.tag===13){var t=Zu(e),n=Nl(e,t);if(n!==null){var r=Gr();bs(n,e,t,r)}U4(e,t)}};KG=function(){return ht};QG=function(e,t){var n=ht;try{return ht=e,t()}finally{ht=n}};P5=function(e,t,n){switch(t){case"input":if(k5(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=mC(r);if(!i)throw Error(te(90));AG(r),k5(r,i)}}}break;case"textarea":PG(e,n);break;case"select":t=n.value,t!=null&&xp(e,!!n.multiple,t,!1)}};IG=I4;LG=yd;var Yme={usingClientEntryPoint:!1,Events:[xv,Xh,mC,DG,NG,I4]},Ym={findFiberByHostInstance:Mf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xme={bundleType:Ym.bundleType,version:Ym.version,rendererPackageName:Ym.rendererPackageName,rendererConfig:Ym.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ql.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=BG(e),e===null?null:e.stateNode},findFiberByHostInstance:Ym.findFiberByHostInstance||qme,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ex=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ex.isDisabled&&ex.supportsFiber)try{dC=ex.inject(Xme),ya=ex}catch{}}oo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yme;oo.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!W4(t))throw Error(te(200));return Hme(e,t,null,n)};oo.createRoot=function(e,t){if(!W4(e))throw Error(te(299));var n=!1,r="",i=bX;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=B4(e,1,!1,null,null,n,!1,r,i),e[Dl]=t.current,f1(e.nodeType===8?e.parentNode:e),new V4(t)};oo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=BG(t),e=e===null?null:e.stateNode,e};oo.flushSync=function(e){return yd(e)};oo.hydrate=function(e,t,n){if(!EC(t))throw Error(te(200));return _C(null,e,t,!0,n)};oo.hydrateRoot=function(e,t,n){if(!W4(e))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=bX;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=vX(t,null,e,1,n??null,i,!1,o,s),e[Dl]=t.current,f1(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new CC(t)};oo.render=function(e,t,n){if(!EC(t))throw Error(te(200));return _C(null,e,t,!1,n)};oo.unmountComponentAtNode=function(e){if(!EC(e))throw Error(te(40));return e._reactRootContainer?(yd(function(){_C(null,null,e,!1,function(){e._reactRootContainer=null,e[Dl]=null})}),!0):!1};oo.unstable_batchedUpdates=I4;oo.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!EC(n))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return _C(e,t,n,!1,r)};oo.version="18.3.1-next-f1338f8080-20240426";function xX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xX)}catch(e){console.error(e)}}xX(),xG.exports=oo;var H4=xG.exports,[wX,Kme]=jn({strict:!1,name:"PortalContext"}),q4="chakra-portal",Qme=".chakra-portal",Jme=e=>$.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),Zme=e=>{const{appendToParentPortal:t,children:n}=e,[r,i]=M.useState(null),o=M.useRef(null),[,s]=M.useState({});M.useEffect(()=>s({}),[]);const a=Kme(),l=Hpe();tg(()=>{if(!r)return;const c=r.ownerDocument,f=t?a??c.body:c.body;if(!f)return;o.current=c.createElement("div"),o.current.className=q4,f.appendChild(o.current),s({});const d=o.current;return()=>{f.contains(d)&&f.removeChild(d)}},[r]);const u=l!=null&&l.zIndex?$.jsx(Jme,{zIndex:l==null?void 0:l.zIndex,children:n}):n;return o.current?H4.createPortal($.jsx(wX,{value:o.current,children:u}),o.current):$.jsx("span",{ref:c=>{c&&i(c)}})},e0e=e=>{const{children:t,containerRef:n,appendToParentPortal:r}=e,i=n.current,o=i??(typeof window<"u"?document.body:void 0),s=M.useMemo(()=>{const l=i==null?void 0:i.ownerDocument.createElement("div");return l&&(l.className=q4),l},[i]),[,a]=M.useState({});return tg(()=>a({}),[]),tg(()=>{if(!(!s||!o))return o.appendChild(s),()=>{o.removeChild(s)}},[s,o]),o&&s?H4.createPortal($.jsx(wX,{value:r?s:null,children:t}),s):null};function Sv(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...r}=t;return n?$.jsx(e0e,{containerRef:n,...r}):$.jsx(Zme,{...r})}Sv.className=q4;Sv.selector=Qme;Sv.displayName="Portal";function G4(){const e=M.useContext(n1);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var Y4=M.createContext({});Y4.displayName="ColorModeContext";function am(){const e=M.useContext(Y4);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function qs(e,t){const{colorMode:n}=am();return n==="dark"?t:e}var tx={light:"chakra-ui-light",dark:"chakra-ui-dark"};function t0e(e={}){const{preventTransition:t=!0}=e,n={setDataset:r=>{const i=t?n.preventTransition():void 0;document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,i==null||i()},setClassName(r){document.body.classList.add(r?tx.dark:tx.light),document.body.classList.remove(r?tx.light:tx.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(r){var i;return((i=n.query().matches)!=null?i:r==="dark")?"dark":"light"},addListener(r){const i=n.query(),o=s=>{r(s.matches?"dark":"light")};return typeof i.addListener=="function"?i.addListener(o):i.addEventListener("change",o),()=>{typeof i.removeListener=="function"?i.removeListener(o):i.removeEventListener("change",o)}},preventTransition(){const r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(r)})})}}};return n}var n0e="chakra-ui-color-mode";function r0e(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let n;try{n=localStorage.getItem(e)||t}catch{}return n||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var i0e=r0e(n0e),i9=()=>{};function o9(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function SX(e){const{value:t,children:n,options:{useSystemColorMode:r,initialColorMode:i,disableTransitionOnChange:o}={},colorModeManager:s=i0e}=e,a=i==="dark"?"dark":"light",[l,u]=M.useState(()=>o9(s,a)),[c,f]=M.useState(()=>o9(s)),{getSystemTheme:d,setClassName:h,setDataset:p,addListener:g}=M.useMemo(()=>t0e({preventTransition:o}),[o]),m=i==="system"&&!l?c:l,y=M.useCallback(x=>{const w=x==="system"?d():x;u(w),h(w==="dark"),p(w),s.set(w)},[s,d,h,p]);tg(()=>{i==="system"&&f(d())},[]),M.useEffect(()=>{const x=s.get();if(x){y(x);return}if(i==="system"){y("system");return}y(a)},[s,a,i,y]);const v=M.useCallback(()=>{y(m==="dark"?"light":"dark")},[m,y]);M.useEffect(()=>{if(r)return g(y)},[r,g,y]);const b=M.useMemo(()=>({colorMode:t??m,toggleColorMode:t?i9:v,setColorMode:t?i9:y,forced:t!==void 0}),[m,v,y,t]);return $.jsx(Y4.Provider,{value:b,children:n})}SX.displayName="ColorModeProvider";function kX(){const e=am(),t=G4();return{...e,theme:t}}var Xe=(...e)=>e.filter(Boolean).join(" ");function o0e(){return!1}function mi(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}var kv=e=>{const{condition:t,message:n}=e;t&&o0e()&&console.warn(n)};function fa(e,...t){return s0e(e)?e(...t):e}var s0e=e=>typeof e=="function",mo=e=>e?"":void 0,V$=e=>e?!0:void 0;function tc(...e){return function(n){e.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}var I2={exports:{}};I2.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",m="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",x="[object RegExp]",w="[object Set]",k="[object String]",S="[object Undefined]",C="[object WeakMap]",E="[object ArrayBuffer]",A="[object DataView]",T="[object Float32Array]",I="[object Float64Array]",F="[object Int8Array]",R="[object Int16Array]",_="[object Int32Array]",P="[object Uint8Array]",N="[object Uint8ClampedArray]",D="[object Uint16Array]",L="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,V=/^\[object .+?Constructor\]$/,oe=/^(?:0|[1-9]\d*)$/,Q={};Q[T]=Q[I]=Q[F]=Q[R]=Q[_]=Q[P]=Q[N]=Q[D]=Q[L]=!0,Q[a]=Q[l]=Q[E]=Q[c]=Q[A]=Q[f]=Q[d]=Q[h]=Q[g]=Q[m]=Q[v]=Q[x]=Q[w]=Q[k]=Q[C]=!1;var ye=typeof Ii=="object"&&Ii&&Ii.Object===Object&&Ii,Oe=typeof self=="object"&&self&&self.Object===Object&&self,ut=ye||Oe||Function("return this")(),$n=t&&!t.nodeType&&t,sr=$n&&!0&&e&&!e.nodeType&&e,ce=sr&&sr.exports===$n,$e=ce&&ye.process,Ae=function(){try{var O=sr&&sr.require&&sr.require("util").types;return O||$e&&$e.binding&&$e.binding("util")}catch{}}(),J=Ae&&Ae.isTypedArray;function mn(O,j,W){switch(W.length){case 0:return O.call(j);case 1:return O.call(j,W[0]);case 2:return O.call(j,W[0],W[1]);case 3:return O.call(j,W[0],W[1],W[2])}return O.apply(j,W)}function tt(O,j){for(var W=-1,he=Array(O);++W<O;)he[W]=j(W);return he}function An(O){return function(j){return O(j)}}function fn(O,j){return O==null?void 0:O[j]}function ao(O,j){return function(W){return O(j(W))}}var gh=Array.prototype,cde=Function.prototype,Ab=Object.prototype,i$=ut["__core-js_shared__"],Tb=cde.toString,iu=Ab.hasOwnProperty,SL=function(){var O=/[^.]+$/.exec(i$&&i$.keys&&i$.keys.IE_PROTO||"");return O?"Symbol(src)_1."+O:""}(),kL=Ab.toString,fde=Tb.call(Object),dde=RegExp("^"+Tb.call(iu).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pb=ce?ut.Buffer:void 0,CL=ut.Symbol,EL=ut.Uint8Array;Pb&&Pb.allocUnsafe;var _L=ao(Object.getPrototypeOf,Object),$L=Object.create,hde=Ab.propertyIsEnumerable,pde=gh.splice,Qc=CL?CL.toStringTag:void 0,Mb=function(){try{var O=a$(Object,"defineProperty");return O({},"",{}),O}catch{}}(),gde=Pb?Pb.isBuffer:void 0,AL=Math.max,mde=Date.now,TL=a$(ut,"Map"),Im=a$(Object,"create"),yde=function(){function O(){}return function(j){if(!Zc(j))return{};if($L)return $L(j);O.prototype=j;var W=new O;return O.prototype=void 0,W}}();function Jc(O){var j=-1,W=O==null?0:O.length;for(this.clear();++j<W;){var he=O[j];this.set(he[0],he[1])}}function vde(){this.__data__=Im?Im(null):{},this.size=0}function bde(O){var j=this.has(O)&&delete this.__data__[O];return this.size-=j?1:0,j}function xde(O){var j=this.__data__;if(Im){var W=j[O];return W===r?void 0:W}return iu.call(j,O)?j[O]:void 0}function wde(O){var j=this.__data__;return Im?j[O]!==void 0:iu.call(j,O)}function Sde(O,j){var W=this.__data__;return this.size+=this.has(O)?0:1,W[O]=Im&&j===void 0?r:j,this}Jc.prototype.clear=vde,Jc.prototype.delete=bde,Jc.prototype.get=xde,Jc.prototype.has=wde,Jc.prototype.set=Sde;function Xa(O){var j=-1,W=O==null?0:O.length;for(this.clear();++j<W;){var he=O[j];this.set(he[0],he[1])}}function kde(){this.__data__=[],this.size=0}function Cde(O){var j=this.__data__,W=Fb(j,O);if(W<0)return!1;var he=j.length-1;return W==he?j.pop():pde.call(j,W,1),--this.size,!0}function Ede(O){var j=this.__data__,W=Fb(j,O);return W<0?void 0:j[W][1]}function _de(O){return Fb(this.__data__,O)>-1}function $de(O,j){var W=this.__data__,he=Fb(W,O);return he<0?(++this.size,W.push([O,j])):W[he][1]=j,this}Xa.prototype.clear=kde,Xa.prototype.delete=Cde,Xa.prototype.get=Ede,Xa.prototype.has=_de,Xa.prototype.set=$de;function mh(O){var j=-1,W=O==null?0:O.length;for(this.clear();++j<W;){var he=O[j];this.set(he[0],he[1])}}function Ade(){this.size=0,this.__data__={hash:new Jc,map:new(TL||Xa),string:new Jc}}function Tde(O){var j=Ob(this,O).delete(O);return this.size-=j?1:0,j}function Pde(O){return Ob(this,O).get(O)}function Mde(O){return Ob(this,O).has(O)}function Fde(O,j){var W=Ob(this,O),he=W.size;return W.set(O,j),this.size+=W.size==he?0:1,this}mh.prototype.clear=Ade,mh.prototype.delete=Tde,mh.prototype.get=Pde,mh.prototype.has=Mde,mh.prototype.set=Fde;function yh(O){var j=this.__data__=new Xa(O);this.size=j.size}function Rde(){this.__data__=new Xa,this.size=0}function Ode(O){var j=this.__data__,W=j.delete(O);return this.size=j.size,W}function Dde(O){return this.__data__.get(O)}function Nde(O){return this.__data__.has(O)}function Ide(O,j){var W=this.__data__;if(W instanceof Xa){var he=W.__data__;if(!TL||he.length<n-1)return he.push([O,j]),this.size=++W.size,this;W=this.__data__=new mh(he)}return W.set(O,j),this.size=W.size,this}yh.prototype.clear=Rde,yh.prototype.delete=Ode,yh.prototype.get=Dde,yh.prototype.has=Nde,yh.prototype.set=Ide;function Lde(O,j){var W=c$(O),he=!W&&u$(O),Ge=!W&&!he&&OL(O),wt=!W&&!he&&!Ge&&NL(O),Ot=W||he||Ge||wt,nt=Ot?tt(O.length,String):[],Dt=nt.length;for(var Ho in O)Ot&&(Ho=="length"||Ge&&(Ho=="offset"||Ho=="parent")||wt&&(Ho=="buffer"||Ho=="byteLength"||Ho=="byteOffset")||FL(Ho,Dt))||nt.push(Ho);return nt}function o$(O,j,W){(W!==void 0&&!Db(O[j],W)||W===void 0&&!(j in O))&&s$(O,j,W)}function zde(O,j,W){var he=O[j];(!(iu.call(O,j)&&Db(he,W))||W===void 0&&!(j in O))&&s$(O,j,W)}function Fb(O,j){for(var W=O.length;W--;)if(Db(O[W][0],j))return W;return-1}function s$(O,j,W){j=="__proto__"&&Mb?Mb(O,j,{configurable:!0,enumerable:!0,value:W,writable:!0}):O[j]=W}var jde=Zde();function Rb(O){return O==null?O===void 0?S:y:Qc&&Qc in Object(O)?ehe(O):she(O)}function PL(O){return Lm(O)&&Rb(O)==a}function Bde(O){if(!Zc(O)||ihe(O))return!1;var j=d$(O)?dde:V;return j.test(che(O))}function Ude(O){return Lm(O)&&DL(O.length)&&!!Q[Rb(O)]}function Vde(O){if(!Zc(O))return ohe(O);var j=RL(O),W=[];for(var he in O)he=="constructor"&&(j||!iu.call(O,he))||W.push(he);return W}function ML(O,j,W,he,Ge){O!==j&&jde(j,function(wt,Ot){if(Ge||(Ge=new yh),Zc(wt))Wde(O,j,Ot,W,ML,he,Ge);else{var nt=he?he(l$(O,Ot),wt,Ot+"",O,j,Ge):void 0;nt===void 0&&(nt=wt),o$(O,Ot,nt)}},IL)}function Wde(O,j,W,he,Ge,wt,Ot){var nt=l$(O,W),Dt=l$(j,W),Ho=Ot.get(Dt);if(Ho){o$(O,W,Ho);return}var Ti=wt?wt(nt,Dt,W+"",O,j,Ot):void 0,zm=Ti===void 0;if(zm){var h$=c$(Dt),p$=!h$&&OL(Dt),zL=!h$&&!p$&&NL(Dt);Ti=Dt,h$||p$||zL?c$(nt)?Ti=nt:fhe(nt)?Ti=Kde(nt):p$?(zm=!1,Ti=Gde(Dt)):zL?(zm=!1,Ti=Xde(Dt)):Ti=[]:dhe(Dt)||u$(Dt)?(Ti=nt,u$(nt)?Ti=hhe(nt):(!Zc(nt)||d$(nt))&&(Ti=the(Dt))):zm=!1}zm&&(Ot.set(Dt,Ti),Ge(Ti,Dt,he,wt,Ot),Ot.delete(Dt)),o$(O,W,Ti)}function Hde(O,j){return lhe(ahe(O,j,LL),O+"")}var qde=Mb?function(O,j){return Mb(O,"toString",{configurable:!0,enumerable:!1,value:ghe(j),writable:!0})}:LL;function Gde(O,j){return O.slice()}function Yde(O){var j=new O.constructor(O.byteLength);return new EL(j).set(new EL(O)),j}function Xde(O,j){var W=Yde(O.buffer);return new O.constructor(W,O.byteOffset,O.length)}function Kde(O,j){var W=-1,he=O.length;for(j||(j=Array(he));++W<he;)j[W]=O[W];return j}function Qde(O,j,W,he){var Ge=!W;W||(W={});for(var wt=-1,Ot=j.length;++wt<Ot;){var nt=j[wt],Dt=void 0;Dt===void 0&&(Dt=O[nt]),Ge?s$(W,nt,Dt):zde(W,nt,Dt)}return W}function Jde(O){return Hde(function(j,W){var he=-1,Ge=W.length,wt=Ge>1?W[Ge-1]:void 0,Ot=Ge>2?W[2]:void 0;for(wt=O.length>3&&typeof wt=="function"?(Ge--,wt):void 0,Ot&&nhe(W[0],W[1],Ot)&&(wt=Ge<3?void 0:wt,Ge=1),j=Object(j);++he<Ge;){var nt=W[he];nt&&O(j,nt,he,wt)}return j})}function Zde(O){return function(j,W,he){for(var Ge=-1,wt=Object(j),Ot=he(j),nt=Ot.length;nt--;){var Dt=Ot[++Ge];if(W(wt[Dt],Dt,wt)===!1)break}return j}}function Ob(O,j){var W=O.__data__;return rhe(j)?W[typeof j=="string"?"string":"hash"]:W.map}function a$(O,j){var W=fn(O,j);return Bde(W)?W:void 0}function ehe(O){var j=iu.call(O,Qc),W=O[Qc];try{O[Qc]=void 0;var he=!0}catch{}var Ge=kL.call(O);return he&&(j?O[Qc]=W:delete O[Qc]),Ge}function the(O){return typeof O.constructor=="function"&&!RL(O)?yde(_L(O)):{}}function FL(O,j){var W=typeof O;return j=j??s,!!j&&(W=="number"||W!="symbol"&&oe.test(O))&&O>-1&&O%1==0&&O<j}function nhe(O,j,W){if(!Zc(W))return!1;var he=typeof j;return(he=="number"?f$(W)&&FL(j,W.length):he=="string"&&j in W)?Db(W[j],O):!1}function rhe(O){var j=typeof O;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?O!=="__proto__":O===null}function ihe(O){return!!SL&&SL in O}function RL(O){var j=O&&O.constructor,W=typeof j=="function"&&j.prototype||Ab;return O===W}function ohe(O){var j=[];if(O!=null)for(var W in Object(O))j.push(W);return j}function she(O){return kL.call(O)}function ahe(O,j,W){return j=AL(j===void 0?O.length-1:j,0),function(){for(var he=arguments,Ge=-1,wt=AL(he.length-j,0),Ot=Array(wt);++Ge<wt;)Ot[Ge]=he[j+Ge];Ge=-1;for(var nt=Array(j+1);++Ge<j;)nt[Ge]=he[Ge];return nt[j]=W(Ot),mn(O,this,nt)}}function l$(O,j){if(!(j==="constructor"&&typeof O[j]=="function")&&j!="__proto__")return O[j]}var lhe=uhe(qde);function uhe(O){var j=0,W=0;return function(){var he=mde(),Ge=o-(he-W);if(W=he,Ge>0){if(++j>=i)return arguments[0]}else j=0;return O.apply(void 0,arguments)}}function che(O){if(O!=null){try{return Tb.call(O)}catch{}try{return O+""}catch{}}return""}function Db(O,j){return O===j||O!==O&&j!==j}var u$=PL(function(){return arguments}())?PL:function(O){return Lm(O)&&iu.call(O,"callee")&&!hde.call(O,"callee")},c$=Array.isArray;function f$(O){return O!=null&&DL(O.length)&&!d$(O)}function fhe(O){return Lm(O)&&f$(O)}var OL=gde||mhe;function d$(O){if(!Zc(O))return!1;var j=Rb(O);return j==h||j==p||j==u||j==b}function DL(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=s}function Zc(O){var j=typeof O;return O!=null&&(j=="object"||j=="function")}function Lm(O){return O!=null&&typeof O=="object"}function dhe(O){if(!Lm(O)||Rb(O)!=v)return!1;var j=_L(O);if(j===null)return!0;var W=iu.call(j,"constructor")&&j.constructor;return typeof W=="function"&&W instanceof W&&Tb.call(W)==fde}var NL=J?An(J):Ude;function hhe(O){return Qde(O,IL(O))}function IL(O){return f$(O)?Lde(O):Vde(O)}var phe=Jde(function(O,j,W,he){ML(O,j,W,he)});function ghe(O){return function(){return O}}function LL(O){return O}function mhe(){return!1}e.exports=phe})(I2,I2.exports);var a0e=I2.exports;const Co=Da(a0e);var l0e=e=>/!(important)?$/.test(e),s9=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,u0e=(e,t)=>n=>{const r=String(t),i=l0e(r),o=s9(r),s=e?`${e}.${o}`:o;let a=mi(n.__cssMap)&&s in n.__cssMap?n.__cssMap[s].varRef:t;return a=s9(a),i?`${a} !important`:a};function X4(e){const{scale:t,transform:n,compose:r}=e;return(o,s)=>{var a;const l=u0e(t,o)(s);let u=(a=n==null?void 0:n(l,s))!=null?a:l;return r&&(u=r(u,s)),u}}var nx=(...e)=>t=>e.reduce((n,r)=>r(n),t);function lo(e,t){return n=>{const r={property:n,scale:e};return r.transform=X4({scale:e,transform:t}),r}}var c0e=({rtl:e,ltr:t})=>n=>n.direction==="rtl"?e:t;function f0e(e){const{property:t,scale:n,transform:r}=e;return{scale:n,property:c0e(t),transform:n?X4({scale:n,compose:r}):r}}var CX=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function d0e(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...CX].join(" ")}function h0e(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...CX].join(" ")}var p0e={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},g0e={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function m0e(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var y0e={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},u3={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},v0e=new Set(Object.values(u3)),c3=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),b0e=e=>e.trim();function x0e(e,t){if(e==null||c3.has(e))return e;if(!(f3(e)||c3.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),o=i==null?void 0:i[1],s=i==null?void 0:i[2];if(!o||!s)return e;const a=o.includes("-gradient")?o:`${o}-gradient`,[l,...u]=s.split(",").map(b0e).filter(Boolean);if((u==null?void 0:u.length)===0)return e;const c=l in u3?u3[l]:l;u.unshift(c);const f=u.map(d=>{if(v0e.has(d))return d;const h=d.indexOf(" "),[p,g]=h!==-1?[d.substr(0,h),d.substr(h+1)]:[d],m=f3(g)?g:g&&g.split(" "),y=`colors.${p}`,v=y in t.__cssMap?t.__cssMap[y].varRef:p;return m?[v,...Array.isArray(m)?m:[m]].join(" "):v});return`${a}(${f.join(", ")})`}var f3=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),w0e=(e,t)=>x0e(e,t??{});function S0e(e){return/^var\(--.+\)$/.test(e)}var k0e=e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}},Vs=e=>t=>`${e}(${t})`,We={filter(e){return e!=="auto"?e:p0e},backdropFilter(e){return e!=="auto"?e:g0e},ring(e){return m0e(We.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?d0e():e==="auto-gpu"?h0e():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=k0e(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const n={left:"right",right:"left"};return t.direction==="rtl"?n[e]:e},degree(e){if(S0e(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:w0e,blur:Vs("blur"),opacity:Vs("opacity"),brightness:Vs("brightness"),contrast:Vs("contrast"),dropShadow:Vs("drop-shadow"),grayscale:Vs("grayscale"),hueRotate:e=>Vs("hue-rotate")(We.degree(e)),invert:Vs("invert"),saturate:Vs("saturate"),sepia:Vs("sepia"),bgImage(e){return e==null||f3(e)||c3.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:r}=(t=y0e[e])!=null?t:{},i={flexDirection:e};return n&&(i[n]=1),r&&(i[r]=1),i}},z={borderWidths:lo("borderWidths"),borderStyles:lo("borderStyles"),colors:lo("colors"),borders:lo("borders"),gradients:lo("gradients",We.gradient),radii:lo("radii",We.px),space:lo("space",nx(We.vh,We.px)),spaceT:lo("space",nx(We.vh,We.px)),degreeT(e){return{property:e,transform:We.degree}},prop(e,t,n){return{property:e,scale:t,...t&&{transform:X4({scale:t,transform:n})}}},propT(e,t){return{property:e,transform:t}},sizes:lo("sizes",nx(We.vh,We.px)),sizesT:lo("sizes",nx(We.vh,We.fraction)),shadows:lo("shadows"),logical:f0e,blur:lo("blur",We.blur)},Cw={background:z.colors("background"),backgroundColor:z.colors("backgroundColor"),backgroundImage:z.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:We.bgClip},bgSize:z.prop("backgroundSize"),bgPosition:z.prop("backgroundPosition"),bg:z.colors("background"),bgColor:z.colors("backgroundColor"),bgPos:z.prop("backgroundPosition"),bgRepeat:z.prop("backgroundRepeat"),bgAttachment:z.prop("backgroundAttachment"),bgGradient:z.gradients("backgroundImage"),bgClip:{transform:We.bgClip}};Object.assign(Cw,{bgImage:Cw.backgroundImage,bgImg:Cw.backgroundImage});var rt={border:z.borders("border"),borderWidth:z.borderWidths("borderWidth"),borderStyle:z.borderStyles("borderStyle"),borderColor:z.colors("borderColor"),borderRadius:z.radii("borderRadius"),borderTop:z.borders("borderTop"),borderBlockStart:z.borders("borderBlockStart"),borderTopLeftRadius:z.radii("borderTopLeftRadius"),borderStartStartRadius:z.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:z.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:z.radii("borderTopRightRadius"),borderStartEndRadius:z.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:z.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:z.borders("borderRight"),borderInlineEnd:z.borders("borderInlineEnd"),borderBottom:z.borders("borderBottom"),borderBlockEnd:z.borders("borderBlockEnd"),borderBottomLeftRadius:z.radii("borderBottomLeftRadius"),borderBottomRightRadius:z.radii("borderBottomRightRadius"),borderLeft:z.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:z.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:z.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:z.borders(["borderLeft","borderRight"]),borderInline:z.borders("borderInline"),borderY:z.borders(["borderTop","borderBottom"]),borderBlock:z.borders("borderBlock"),borderTopWidth:z.borderWidths("borderTopWidth"),borderBlockStartWidth:z.borderWidths("borderBlockStartWidth"),borderTopColor:z.colors("borderTopColor"),borderBlockStartColor:z.colors("borderBlockStartColor"),borderTopStyle:z.borderStyles("borderTopStyle"),borderBlockStartStyle:z.borderStyles("borderBlockStartStyle"),borderBottomWidth:z.borderWidths("borderBottomWidth"),borderBlockEndWidth:z.borderWidths("borderBlockEndWidth"),borderBottomColor:z.colors("borderBottomColor"),borderBlockEndColor:z.colors("borderBlockEndColor"),borderBottomStyle:z.borderStyles("borderBottomStyle"),borderBlockEndStyle:z.borderStyles("borderBlockEndStyle"),borderLeftWidth:z.borderWidths("borderLeftWidth"),borderInlineStartWidth:z.borderWidths("borderInlineStartWidth"),borderLeftColor:z.colors("borderLeftColor"),borderInlineStartColor:z.colors("borderInlineStartColor"),borderLeftStyle:z.borderStyles("borderLeftStyle"),borderInlineStartStyle:z.borderStyles("borderInlineStartStyle"),borderRightWidth:z.borderWidths("borderRightWidth"),borderInlineEndWidth:z.borderWidths("borderInlineEndWidth"),borderRightColor:z.colors("borderRightColor"),borderInlineEndColor:z.colors("borderInlineEndColor"),borderRightStyle:z.borderStyles("borderRightStyle"),borderInlineEndStyle:z.borderStyles("borderInlineEndStyle"),borderTopRadius:z.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:z.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:z.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:z.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(rt,{rounded:rt.borderRadius,roundedTop:rt.borderTopRadius,roundedTopLeft:rt.borderTopLeftRadius,roundedTopRight:rt.borderTopRightRadius,roundedTopStart:rt.borderStartStartRadius,roundedTopEnd:rt.borderStartEndRadius,roundedBottom:rt.borderBottomRadius,roundedBottomLeft:rt.borderBottomLeftRadius,roundedBottomRight:rt.borderBottomRightRadius,roundedBottomStart:rt.borderEndStartRadius,roundedBottomEnd:rt.borderEndEndRadius,roundedLeft:rt.borderLeftRadius,roundedRight:rt.borderRightRadius,roundedStart:rt.borderInlineStartRadius,roundedEnd:rt.borderInlineEndRadius,borderStart:rt.borderInlineStart,borderEnd:rt.borderInlineEnd,borderTopStartRadius:rt.borderStartStartRadius,borderTopEndRadius:rt.borderStartEndRadius,borderBottomStartRadius:rt.borderEndStartRadius,borderBottomEndRadius:rt.borderEndEndRadius,borderStartRadius:rt.borderInlineStartRadius,borderEndRadius:rt.borderInlineEndRadius,borderStartWidth:rt.borderInlineStartWidth,borderEndWidth:rt.borderInlineEndWidth,borderStartColor:rt.borderInlineStartColor,borderEndColor:rt.borderInlineEndColor,borderStartStyle:rt.borderInlineStartStyle,borderEndStyle:rt.borderInlineEndStyle});var C0e={color:z.colors("color"),textColor:z.colors("color"),fill:z.colors("fill"),stroke:z.colors("stroke")},d3={boxShadow:z.shadows("boxShadow"),mixBlendMode:!0,blendMode:z.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:z.prop("backgroundBlendMode"),opacity:!0};Object.assign(d3,{shadow:d3.boxShadow});var E0e={filter:{transform:We.filter},blur:z.blur("--chakra-blur"),brightness:z.propT("--chakra-brightness",We.brightness),contrast:z.propT("--chakra-contrast",We.contrast),hueRotate:z.propT("--chakra-hue-rotate",We.hueRotate),invert:z.propT("--chakra-invert",We.invert),saturate:z.propT("--chakra-saturate",We.saturate),dropShadow:z.propT("--chakra-drop-shadow",We.dropShadow),backdropFilter:{transform:We.backdropFilter},backdropBlur:z.blur("--chakra-backdrop-blur"),backdropBrightness:z.propT("--chakra-backdrop-brightness",We.brightness),backdropContrast:z.propT("--chakra-backdrop-contrast",We.contrast),backdropHueRotate:z.propT("--chakra-backdrop-hue-rotate",We.hueRotate),backdropInvert:z.propT("--chakra-backdrop-invert",We.invert),backdropSaturate:z.propT("--chakra-backdrop-saturate",We.saturate)},L2={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:We.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:z.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:z.space("gap"),rowGap:z.space("rowGap"),columnGap:z.space("columnGap")};Object.assign(L2,{flexDir:L2.flexDirection});var EX={gridGap:z.space("gridGap"),gridColumnGap:z.space("gridColumnGap"),gridRowGap:z.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},_0e={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:We.outline},outlineOffset:!0,outlineColor:z.colors("outlineColor")},ho={width:z.sizesT("width"),inlineSize:z.sizesT("inlineSize"),height:z.sizes("height"),blockSize:z.sizes("blockSize"),boxSize:z.sizes(["width","height"]),minWidth:z.sizes("minWidth"),minInlineSize:z.sizes("minInlineSize"),minHeight:z.sizes("minHeight"),minBlockSize:z.sizes("minBlockSize"),maxWidth:z.sizes("maxWidth"),maxInlineSize:z.sizes("maxInlineSize"),maxHeight:z.sizes("maxHeight"),maxBlockSize:z.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (min-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r.minW)!=null?i:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,r,i;return{[`@media screen and (max-width: ${(i=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r._minW)!=null?i:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:z.propT("float",We.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(ho,{w:ho.width,h:ho.height,minW:ho.minWidth,maxW:ho.maxWidth,minH:ho.minHeight,maxH:ho.maxHeight,overscroll:ho.overscrollBehavior,overscrollX:ho.overscrollBehaviorX,overscrollY:ho.overscrollBehaviorY});var $0e={listStyleType:!0,listStylePosition:!0,listStylePos:z.prop("listStylePosition"),listStyleImage:!0,listStyleImg:z.prop("listStyleImage")};function A0e(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var T0e=e=>{const t=new WeakMap;return(r,i,o,s)=>{if(typeof r>"u")return e(r,i,o);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,o,s);return a.set(i,l),l}},P0e=T0e(A0e),M0e={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},F0e={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},W$=(e,t,n)=>{const r={},i=P0e(e,t,{});for(const o in i)o in n&&n[o]!=null||(r[o]=i[o]);return r},R0e={srOnly:{transform(e){return e===!0?M0e:e==="focusable"?F0e:{}}},layerStyle:{processResult:!0,transform:(e,t,n)=>W$(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>W$(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>W$(t,e,n)}},Cy={position:!0,pos:z.prop("position"),zIndex:z.prop("zIndex","zIndices"),inset:z.spaceT("inset"),insetX:z.spaceT(["left","right"]),insetInline:z.spaceT("insetInline"),insetY:z.spaceT(["top","bottom"]),insetBlock:z.spaceT("insetBlock"),top:z.spaceT("top"),insetBlockStart:z.spaceT("insetBlockStart"),bottom:z.spaceT("bottom"),insetBlockEnd:z.spaceT("insetBlockEnd"),left:z.spaceT("left"),insetInlineStart:z.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:z.spaceT("right"),insetInlineEnd:z.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(Cy,{insetStart:Cy.insetInlineStart,insetEnd:Cy.insetInlineEnd});var O0e={ring:{transform:We.ring},ringColor:z.colors("--chakra-ring-color"),ringOffset:z.prop("--chakra-ring-offset-width"),ringOffsetColor:z.colors("--chakra-ring-offset-color"),ringInset:z.prop("--chakra-ring-inset")},Pt={margin:z.spaceT("margin"),marginTop:z.spaceT("marginTop"),marginBlockStart:z.spaceT("marginBlockStart"),marginRight:z.spaceT("marginRight"),marginInlineEnd:z.spaceT("marginInlineEnd"),marginBottom:z.spaceT("marginBottom"),marginBlockEnd:z.spaceT("marginBlockEnd"),marginLeft:z.spaceT("marginLeft"),marginInlineStart:z.spaceT("marginInlineStart"),marginX:z.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:z.spaceT("marginInline"),marginY:z.spaceT(["marginTop","marginBottom"]),marginBlock:z.spaceT("marginBlock"),padding:z.space("padding"),paddingTop:z.space("paddingTop"),paddingBlockStart:z.space("paddingBlockStart"),paddingRight:z.space("paddingRight"),paddingBottom:z.space("paddingBottom"),paddingBlockEnd:z.space("paddingBlockEnd"),paddingLeft:z.space("paddingLeft"),paddingInlineStart:z.space("paddingInlineStart"),paddingInlineEnd:z.space("paddingInlineEnd"),paddingX:z.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:z.space("paddingInline"),paddingY:z.space(["paddingTop","paddingBottom"]),paddingBlock:z.space("paddingBlock")};Object.assign(Pt,{m:Pt.margin,mt:Pt.marginTop,mr:Pt.marginRight,me:Pt.marginInlineEnd,marginEnd:Pt.marginInlineEnd,mb:Pt.marginBottom,ml:Pt.marginLeft,ms:Pt.marginInlineStart,marginStart:Pt.marginInlineStart,mx:Pt.marginX,my:Pt.marginY,p:Pt.padding,pt:Pt.paddingTop,py:Pt.paddingY,px:Pt.paddingX,pb:Pt.paddingBottom,pl:Pt.paddingLeft,ps:Pt.paddingInlineStart,paddingStart:Pt.paddingInlineStart,pr:Pt.paddingRight,pe:Pt.paddingInlineEnd,paddingEnd:Pt.paddingInlineEnd});var D0e={textDecorationColor:z.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:z.shadows("textShadow")},N0e={clipPath:!0,transform:z.propT("transform",We.transform),transformOrigin:!0,translateX:z.spaceT("--chakra-translate-x"),translateY:z.spaceT("--chakra-translate-y"),skewX:z.degreeT("--chakra-skew-x"),skewY:z.degreeT("--chakra-skew-y"),scaleX:z.prop("--chakra-scale-x"),scaleY:z.prop("--chakra-scale-y"),scale:z.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:z.degreeT("--chakra-rotate")},I0e={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:z.prop("transitionDuration","transition.duration"),transitionProperty:z.prop("transitionProperty","transition.property"),transitionTimingFunction:z.prop("transitionTimingFunction","transition.easing")},L0e={fontFamily:z.prop("fontFamily","fonts"),fontSize:z.prop("fontSize","fontSizes",We.px),fontWeight:z.prop("fontWeight","fontWeights"),lineHeight:z.prop("lineHeight","lineHeights"),letterSpacing:z.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},z0e={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:z.spaceT("scrollMargin"),scrollMarginTop:z.spaceT("scrollMarginTop"),scrollMarginBottom:z.spaceT("scrollMarginBottom"),scrollMarginLeft:z.spaceT("scrollMarginLeft"),scrollMarginRight:z.spaceT("scrollMarginRight"),scrollMarginX:z.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:z.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:z.spaceT("scrollPadding"),scrollPaddingTop:z.spaceT("scrollPaddingTop"),scrollPaddingBottom:z.spaceT("scrollPaddingBottom"),scrollPaddingLeft:z.spaceT("scrollPaddingLeft"),scrollPaddingRight:z.spaceT("scrollPaddingRight"),scrollPaddingX:z.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:z.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function _X(e){return mi(e)&&e.reference?e.reference:String(e)}var $C=(e,...t)=>t.map(_X).join(` ${e} `).replace(/calc/g,""),a9=(...e)=>`calc(${$C("+",...e)})`,l9=(...e)=>`calc(${$C("-",...e)})`,h3=(...e)=>`calc(${$C("*",...e)})`,u9=(...e)=>`calc(${$C("/",...e)})`,c9=e=>{const t=_X(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:h3(t,-1)},Sf=Object.assign(e=>({add:(...t)=>Sf(a9(e,...t)),subtract:(...t)=>Sf(l9(e,...t)),multiply:(...t)=>Sf(h3(e,...t)),divide:(...t)=>Sf(u9(e,...t)),negate:()=>Sf(c9(e)),toString:()=>e.toString()}),{add:a9,subtract:l9,multiply:h3,divide:u9,negate:c9});function j0e(e,t="-"){return e.replace(/\s+/g,t)}function B0e(e){const t=j0e(e.toString());return V0e(U0e(t))}function U0e(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function V0e(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function W0e(e,t=""){return[t,e].filter(Boolean).join("-")}function H0e(e,t){return`var(${e}${t?`, ${t}`:""})`}function q0e(e,t=""){return B0e(`--${W0e(e,t)}`)}function Ee(e,t,n){const r=q0e(e,n);return{variable:r,reference:H0e(r,t)}}function G0e(e,t){const n={};for(const r of t){if(Array.isArray(r)){const[i,o]=r;n[i]=Ee(`${e}-${i}`,o);continue}n[r]=Ee(`${e}-${r}`)}return n}function Y0e(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function X0e(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}function p3(e){if(e==null)return e;const{unitless:t}=X0e(e);return t||typeof e=="number"?`${e}px`:e}var $X=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,K4=e=>Object.fromEntries(Object.entries(e).sort($X));function f9(e){const t=K4(e);return Object.assign(Object.values(t),t)}function K0e(e){const t=Object.keys(K4(e));return new Set(t)}function d9(e){var t;if(!e)return e;e=(t=p3(e))!=null?t:e;const n=-.02;return typeof e=="number"?`${e+n}`:e.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function N0(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${p3(e)})`),t&&n.push("and",`(max-width: ${p3(t)})`),n.join(" ")}function Q0e(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const n=f9(e),r=Object.entries(e).sort($X).map(([s,a],l,u)=>{var c;let[,f]=(c=u[l+1])!=null?c:[];return f=parseFloat(f)>0?d9(f):void 0,{_minW:d9(a),breakpoint:s,minW:a,maxW:f,maxWQuery:N0(null,f),minWQuery:N0(a),minMaxQuery:N0(a,f)}}),i=K0e(e),o=Array.from(i.values());return{keys:i,normalized:n,isResponsive(s){const a=Object.keys(s);return a.length>0&&a.every(l=>i.has(l))},asObject:K4(e),asArray:f9(e),details:r,get(s){return r.find(a=>a.breakpoint===s)},media:[null,...n.map(s=>N0(s)).slice(1)],toArrayValue(s){if(!mi(s))throw new Error("toArrayValue: value must be an object");const a=o.map(l=>{var u;return(u=s[l])!=null?u:null});for(;Y0e(a)===null;)a.pop();return a},toObjectValue(s){if(!Array.isArray(s))throw new Error("toObjectValue: value must be an array");return s.reduce((a,l,u)=>{const c=o[u];return c!=null&&l!=null&&(a[c]=l),a},{})}}}var Vn={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},su=e=>AX(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Ka=e=>AX(t=>e(t,"~ &"),"[data-peer]",".peer"),AX=(e,...t)=>t.map(e).join(", "),AC={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:su(Vn.hover),_peerHover:Ka(Vn.hover),_groupFocus:su(Vn.focus),_peerFocus:Ka(Vn.focus),_groupFocusVisible:su(Vn.focusVisible),_peerFocusVisible:Ka(Vn.focusVisible),_groupActive:su(Vn.active),_peerActive:Ka(Vn.active),_groupDisabled:su(Vn.disabled),_peerDisabled:Ka(Vn.disabled),_groupInvalid:su(Vn.invalid),_peerInvalid:Ka(Vn.invalid),_groupChecked:su(Vn.checked),_peerChecked:Ka(Vn.checked),_groupFocusWithin:su(Vn.focusWithin),_peerFocusWithin:Ka(Vn.focusWithin),_peerPlaceholderShown:Ka(Vn.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},TX=Object.keys(AC);function h9(e,t){return Ee(String(e).replace(/\./g,"-"),void 0,t)}function J0e(e,t){let n={};const r={};for(const[i,o]of Object.entries(e)){const{isSemantic:s,value:a}=o,{variable:l,reference:u}=h9(i,t==null?void 0:t.cssVarPrefix);if(!s){if(i.startsWith("space")){const d=i.split("."),[h,...p]=d,g=`${h}.-${p.join(".")}`,m=Sf.negate(a),y=Sf.negate(u);r[g]={value:m,var:l,varRef:y}}n[l]=a,r[i]={value:a,var:l,varRef:u};continue}const c=d=>{const p=[String(i).split(".")[0],d].join(".");if(!e[p])return d;const{reference:m}=h9(p,t==null?void 0:t.cssVarPrefix);return m},f=mi(a)?a:{default:a};n=Co(n,Object.entries(f).reduce((d,[h,p])=>{var g,m;if(!p)return d;const y=c(`${p}`);if(h==="default")return d[l]=y,d;const v=(m=(g=AC)==null?void 0:g[h])!=null?m:h;return d[v]={[l]:y},d},{})),r[i]={value:u,var:l,varRef:u}}return{cssVars:n,cssMap:r}}function Z0e(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}function eye(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function tye(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function p9(e,t,n={}){const{stop:r,getKey:i}=n;function o(s,a=[]){var l;if(tye(s)||Array.isArray(s)){const u={};for(const[c,f]of Object.entries(s)){const d=(l=i==null?void 0:i(c))!=null?l:c,h=[...a,d];if(r!=null&&r(s,h))return t(s,a);u[d]=o(f,h)}return u}return t(s,a)}return o(e)}var nye=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function rye(e){return eye(e,nye)}function iye(e){return e.semanticTokens}function oye(e){const{__cssMap:t,__cssVars:n,__breakpoints:r,...i}=e;return i}var sye=e=>TX.includes(e)||e==="default";function aye({tokens:e,semanticTokens:t}){const n={};return p9(e,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!1,value:r})}),p9(t,(r,i)=>{r!=null&&(n[i.join(".")]={isSemantic:!0,value:r})},{stop:r=>Object.keys(r).every(sye)}),n}function lye(e){var t;const n=oye(e),r=rye(n),i=iye(n),o=aye({tokens:r,semanticTokens:i}),s=(t=n.config)==null?void 0:t.cssVarPrefix,{cssMap:a,cssVars:l}=J0e(o,{cssVarPrefix:s});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...l},__cssMap:a,__breakpoints:Q0e(n.breakpoints)}),n}var Q4=Co({},Cw,rt,C0e,L2,ho,E0e,O0e,_0e,EX,R0e,Cy,d3,Pt,z0e,L0e,D0e,N0e,$0e,I0e),uye=Object.assign({},Pt,ho,L2,EX,Cy),cye=Object.keys(uye),fye=[...Object.keys(Q4),...TX],dye={...Q4,...AC},hye=e=>e in dye,pye=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:r,media:i}=t.__breakpoints,o={};for(const s in e){let a=fa(e[s],t);if(a==null)continue;if(a=mi(a)&&n(a)?r(a):a,!Array.isArray(a)){o[s]=a;continue}const l=a.slice(0,i.length).length;for(let u=0;u<l;u+=1){const c=i==null?void 0:i[u];if(!c){o[s]=a[u];continue}o[c]=o[c]||{},a[u]!=null&&(o[c][s]=a[u])}}return o};function gye(e){const t=[];let n="",r=!1;for(let i=0;i<e.length;i++){const o=e[i];o==="("?(r=!0,n+=o):o===")"?(r=!1,n+=o):o===","&&!r?(t.push(n),n=""):n+=o}return n=n.trim(),n&&t.push(n),t}function mye(e){return/^var\(--.+\)$/.test(e)}var yye=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!mye(t),vye=(e,t)=>{var n,r;if(t==null)return t;const i=l=>{var u,c;return(c=(u=e.__cssMap)==null?void 0:u[l])==null?void 0:c.varRef},o=l=>{var u;return(u=i(l))!=null?u:l},[s,a]=gye(t);return t=(r=(n=i(s))!=null?n:o(a))!=null?r:o(t),t};function bye(e){const{configs:t={},pseudos:n={},theme:r}=e,i=(o,s=!1)=>{var a,l,u;const c=fa(o,r),f=pye(c)(r);let d={};for(let h in f){const p=f[h];let g=fa(p,r);h in n&&(h=n[h]),yye(h,g)&&(g=vye(r,g));let m=t[h];if(m===!0&&(m={property:h}),mi(g)){d[h]=(a=d[h])!=null?a:{},d[h]=Co({},d[h],i(g,!0));continue}let y=(u=(l=m==null?void 0:m.transform)==null?void 0:l.call(m,g,r,c))!=null?u:g;y=m!=null&&m.processResult?i(y,!0):y;const v=fa(m==null?void 0:m.property,r);if(!s&&(m!=null&&m.static)){const b=fa(m.static,r);d=Co({},d,b)}if(v&&Array.isArray(v)){for(const b of v)d[b]=y;continue}if(v){v==="&"&&mi(y)?d=Co({},d,y):d[v]=y;continue}if(mi(y)){d=Co({},d,y);continue}d[h]=y}return d};return i}var PX=e=>t=>bye({theme:t,pseudos:AC,configs:Q4})(e);function At(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function xye(e,t){if(Array.isArray(e))return e;if(mi(e))return t(e);if(e!=null)return[e]}function wye(e,t){for(let n=t+1;n<e.length;n++)if(e[n]!=null)return n;return-1}function Sye(e){const t=e.__breakpoints;return function(r,i,o,s){var a,l;if(!t)return;const u={},c=xye(o,t.toArrayValue);if(!c)return u;const f=c.length,d=f===1,h=!!r.parts;for(let p=0;p<f;p++){const g=t.details[p],m=t.details[wye(c,p)],y=N0(g.minW,m==null?void 0:m._minW),v=fa((a=r[i])==null?void 0:a[c[p]],s);if(v){if(h){(l=r.parts)==null||l.forEach(b=>{Co(u,{[b]:d?v[b]:{[y]:v[b]}})});continue}if(!h){d?Co(u,v):u[y]=v;continue}u[y]=v}}return u}}function kye(e){return t=>{var n;const{variant:r,size:i,theme:o}=t,s=Sye(o);return Co({},fa((n=e.baseStyle)!=null?n:{},t),s(e,"sizes",i,t),s(e,"variants",r,t))}}function ir(e){return Z0e(e,["styleConfig","size","variant","colorScheme"])}var Cye=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function Eye(e){return mi(e)?Cye.every(t=>Object.prototype.hasOwnProperty.call(e,t)):!1}var _ye={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},$ye={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},Aye={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},Tye={property:_ye,easing:$ye,duration:Aye},Pye=Tye,Mye={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},Fye=Mye,Rye={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},Oye=Rye,Dye={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},Nye=Dye,Iye={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},Lye=Iye,zye={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},jye=zye,Bye={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},Uye=Bye,Vye={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},Wye=Vye,Hye={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},MX=Hye,FX={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},qye={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},Gye={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},Yye={...FX,...qye,container:Gye},RX=Yye,Xye={breakpoints:Nye,zIndices:Fye,radii:jye,blur:Wye,colors:Lye,...MX,sizes:RX,shadows:Uye,space:FX,borders:Oye,transition:Pye},{defineMultiStyleConfig:Kye,definePartsStyle:I0}=At(["stepper","step","title","description","indicator","separator","icon","number"]),ll=Ee("stepper-indicator-size"),np=Ee("stepper-icon-size"),rp=Ee("stepper-title-font-size"),L0=Ee("stepper-description-font-size"),Xm=Ee("stepper-accent-color"),Qye=I0(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[Xm.variable]:`colors.${e}.500`,_dark:{[Xm.variable]:`colors.${e}.200`}},title:{fontSize:rp.reference,fontWeight:"medium"},description:{fontSize:L0.reference,color:"chakra-subtle-text"},number:{fontSize:rp.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:np.reference,height:np.reference},indicator:{flexShrink:0,borderRadius:"full",width:ll.reference,height:ll.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:Xm.reference},"&[data-status=complete]":{bg:Xm.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:Xm.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${ll.reference} - 8px)`,top:`calc(${ll.reference} + 4px)`,insetStart:`calc(${ll.reference} / 2 - 1px)`}}})),Jye=Kye({baseStyle:Qye,sizes:{xs:I0({stepper:{[ll.variable]:"sizes.4",[np.variable]:"sizes.3",[rp.variable]:"fontSizes.xs",[L0.variable]:"fontSizes.xs"}}),sm:I0({stepper:{[ll.variable]:"sizes.6",[np.variable]:"sizes.4",[rp.variable]:"fontSizes.sm",[L0.variable]:"fontSizes.xs"}}),md:I0({stepper:{[ll.variable]:"sizes.8",[np.variable]:"sizes.5",[rp.variable]:"fontSizes.md",[L0.variable]:"fontSizes.sm"}}),lg:I0({stepper:{[ll.variable]:"sizes.10",[np.variable]:"sizes.6",[rp.variable]:"fontSizes.lg",[L0.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function lt(e,t={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...c){r();for(const f of c)t[f]=l(f);return lt(e,t)}function o(...c){for(const f of c)f in t||(t[f]=l(f));return lt(e,t)}function s(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.selector]))}function a(){return Object.fromEntries(Object.entries(t).map(([f,d])=>[f,d.className]))}function l(c){const h=`chakra-${(["container","root"].includes(c??"")?[e]:[e,c]).filter(Boolean).join("__")}`;return{className:h,selector:`.${h}`,toString:()=>c}}return{parts:i,toPart:l,extend:o,selectors:s,classnames:a,get keys(){return Object.keys(t)},__type:{}}}var Zye=lt("accordion").parts("root","container","button","panel").extend("icon"),e1e=lt("alert").parts("title","description","container").extend("icon","spinner"),t1e=lt("avatar").parts("label","badge","container").extend("excessLabel","group"),n1e=lt("breadcrumb").parts("link","item","container").extend("separator");lt("button").parts();var r1e=lt("checkbox").parts("control","icon","container").extend("label");lt("progress").parts("track","filledTrack").extend("label");var i1e=lt("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),o1e=lt("editable").parts("preview","input","textarea"),s1e=lt("form").parts("container","requiredIndicator","helperText"),a1e=lt("formError").parts("text","icon"),l1e=lt("input").parts("addon","field","element","group"),u1e=lt("list").parts("container","item","icon"),c1e=lt("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),f1e=lt("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),d1e=lt("numberinput").parts("root","field","stepperGroup","stepper");lt("pininput").parts("field");var h1e=lt("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),p1e=lt("progress").parts("label","filledTrack","track"),g1e=lt("radio").parts("container","control","label"),m1e=lt("select").parts("field","icon"),y1e=lt("slider").parts("container","track","thumb","filledTrack","mark"),v1e=lt("stat").parts("container","label","helpText","number","icon"),b1e=lt("switch").parts("container","track","thumb","label"),x1e=lt("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),w1e=lt("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),S1e=lt("tag").parts("container","label","closeButton"),k1e=lt("card").parts("container","header","body","footer");lt("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function Of(e,t,n){return Math.min(Math.max(e,n),t)}class C1e extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var z0=C1e;function J4(e){if(typeof e!="string")throw new z0(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=F1e.test(e)?$1e(e):e;const n=A1e.exec(t);if(n){const s=Array.from(n).slice(1);return[...s.slice(0,3).map(a=>parseInt(x1(a,2),16)),parseInt(x1(s[3]||"f",2),16)/255]}const r=T1e.exec(t);if(r){const s=Array.from(r).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,16)),parseInt(s[3]||"ff",16)/255]}const i=P1e.exec(t);if(i){const s=Array.from(i).slice(1);return[...s.slice(0,3).map(a=>parseInt(a,10)),parseFloat(s[3]||"1")]}const o=M1e.exec(t);if(o){const[s,a,l,u]=Array.from(o).slice(1).map(parseFloat);if(Of(0,100,a)!==a)throw new z0(e);if(Of(0,100,l)!==l)throw new z0(e);return[...R1e(s,a,l),Number.isNaN(u)?1:u]}throw new z0(e)}function E1e(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const g9=e=>parseInt(e.replace(/_/g,""),36),_1e="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=g9(t.substring(0,3)),r=g9(t.substring(3)).toString(16);let i="";for(let o=0;o<6-r.length;o++)i+="0";return e[n]=`${i}${r}`,e},{});function $1e(e){const t=e.toLowerCase().trim(),n=_1e[E1e(t)];if(!n)throw new z0(e);return`#${n}`}const x1=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),A1e=new RegExp(`^#${x1("([a-f0-9])",3)}([a-f0-9])?$`,"i"),T1e=new RegExp(`^#${x1("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),P1e=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${x1(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),M1e=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,F1e=/^[a-z]+$/i,m9=e=>Math.round(e*255),R1e=(e,t,n)=>{let r=n/100;if(t===0)return[r,r,r].map(m9);const i=(e%360+360)%360/60,o=(1-Math.abs(2*r-1))*(t/100),s=o*(1-Math.abs(i%2-1));let a=0,l=0,u=0;i>=0&&i<1?(a=o,l=s):i>=1&&i<2?(a=s,l=o):i>=2&&i<3?(l=o,u=s):i>=3&&i<4?(l=s,u=o):i>=4&&i<5?(a=s,u=o):i>=5&&i<6&&(a=o,u=s);const c=r-o/2,f=a+c,d=l+c,h=u+c;return[f,d,h].map(m9)};function O1e(e,t,n,r){return`rgba(${Of(0,255,e).toFixed()}, ${Of(0,255,t).toFixed()}, ${Of(0,255,n).toFixed()}, ${parseFloat(Of(0,1,r).toFixed(3))})`}function D1e(e,t){const[n,r,i,o]=J4(e);return O1e(n,r,i,o-t)}function N1e(e){const[t,n,r,i]=J4(e);let o=s=>{const a=Of(0,255,s).toString(16);return a.length===1?`0${a}`:a};return`#${o(t)}${o(n)}${o(r)}${i<1?o(Math.round(i*255)):""}`}function I1e(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var L1e=e=>Object.keys(e).length===0,Wr=(e,t,n)=>{const r=I1e(e,`colors.${t}`,t);try{return N1e(r),r}catch{return n??"#000000"}},z1e=e=>{const[t,n,r]=J4(e);return(t*299+n*587+r*114)/1e3},j1e=e=>t=>{const n=Wr(t,e);return z1e(n)<128?"dark":"light"},B1e=e=>t=>j1e(e)(t)==="dark",ug=(e,t)=>n=>{const r=Wr(n,e);return D1e(r,1-t)};function y9(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var U1e=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function V1e(e){const t=U1e();return!e||L1e(e)?t:e.string&&e.colors?H1e(e.string,e.colors):e.string&&!e.colors?W1e(e.string):e.colors&&!e.string?q1e(e.colors):t}function W1e(e){let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t=t&t;let n="#";for(let r=0;r<3;r+=1){const i=t>>r*8&255;n+=`00${i.toString(16)}`.substr(-2)}return n}function H1e(e,t){let n=0;if(e.length===0)return t[0];for(let r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%t.length+t.length)%t.length,t[n]}function q1e(e){return e[Math.floor(Math.random()*e.length)]}function Ce(e,t){return n=>n.colorMode==="dark"?t:e}function Z4(e){const{orientation:t,vertical:n,horizontal:r}=e;return t?t==="vertical"?n:r:{}}function OX(e){return mi(e)&&e.reference?e.reference:String(e)}var TC=(e,...t)=>t.map(OX).join(` ${e} `).replace(/calc/g,""),v9=(...e)=>`calc(${TC("+",...e)})`,b9=(...e)=>`calc(${TC("-",...e)})`,g3=(...e)=>`calc(${TC("*",...e)})`,x9=(...e)=>`calc(${TC("/",...e)})`,w9=e=>{const t=OX(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:g3(t,-1)},ul=Object.assign(e=>({add:(...t)=>ul(v9(e,...t)),subtract:(...t)=>ul(b9(e,...t)),multiply:(...t)=>ul(g3(e,...t)),divide:(...t)=>ul(x9(e,...t)),negate:()=>ul(w9(e)),toString:()=>e.toString()}),{add:v9,subtract:b9,multiply:g3,divide:x9,negate:w9});function G1e(e){return!Number.isInteger(parseFloat(e.toString()))}function Y1e(e,t="-"){return e.replace(/\s+/g,t)}function DX(e){const t=Y1e(e.toString());return t.includes("\\.")?e:G1e(e)?t.replace(".","\\."):e}function X1e(e,t=""){return[t,DX(e)].filter(Boolean).join("-")}function K1e(e,t){return`var(${DX(e)}${t?`, ${t}`:""})`}function Q1e(e,t=""){return`--${X1e(e,t)}`}function Cn(e,t){const n=Q1e(e,void 0);return{variable:n,reference:K1e(n,J1e(void 0))}}function J1e(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:Z1e,definePartsStyle:Ew}=At(b1e.keys),Ey=Cn("switch-track-width"),Xf=Cn("switch-track-height"),H$=Cn("switch-track-diff"),eve=ul.subtract(Ey,Xf),m3=Cn("switch-thumb-x"),Km=Cn("switch-bg"),tve=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[Ey.reference],height:[Xf.reference],transitionProperty:"common",transitionDuration:"fast",[Km.variable]:"colors.gray.300",_dark:{[Km.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[Km.variable]:`colors.${t}.500`,_dark:{[Km.variable]:`colors.${t}.200`}},bg:Km.reference}},nve={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Xf.reference],height:[Xf.reference],_checked:{transform:`translateX(${m3.reference})`}},rve=Ew(e=>({container:{[H$.variable]:eve,[m3.variable]:H$.reference,_rtl:{[m3.variable]:ul(H$).negate().toString()}},track:tve(e),thumb:nve})),ive={sm:Ew({container:{[Ey.variable]:"1.375rem",[Xf.variable]:"sizes.3"}}),md:Ew({container:{[Ey.variable]:"1.875rem",[Xf.variable]:"sizes.4"}}),lg:Ew({container:{[Ey.variable]:"2.875rem",[Xf.variable]:"sizes.6"}})},ove=Z1e({baseStyle:rve,sizes:ive,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:sve,definePartsStyle:_p}=At(x1e.keys),ave=_p({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),z2={"&[data-is-numeric=true]":{textAlign:"end"}},lve=_p(e=>{const{colorScheme:t}=e;return{th:{color:Ce("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Ce(`${t}.100`,`${t}.700`)(e),...z2},td:{borderBottom:"1px",borderColor:Ce(`${t}.100`,`${t}.700`)(e),...z2},caption:{color:Ce("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),uve=_p(e=>{const{colorScheme:t}=e;return{th:{color:Ce("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Ce(`${t}.100`,`${t}.700`)(e),...z2},td:{borderBottom:"1px",borderColor:Ce(`${t}.100`,`${t}.700`)(e),...z2},caption:{color:Ce("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Ce(`${t}.100`,`${t}.700`)(e)},td:{background:Ce(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),cve={simple:lve,striped:uve,unstyled:{}},fve={sm:_p({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:_p({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:_p({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},dve=sve({baseStyle:ave,variants:cve,sizes:fve,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),ui=Ee("tabs-color"),ls=Ee("tabs-bg"),rx=Ee("tabs-border-color"),{defineMultiStyleConfig:hve,definePartsStyle:ba}=At(w1e.keys),pve=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},gve=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},mve=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:n==="vertical"?"column":"row"}},yve={p:4},vve=ba(e=>({root:pve(e),tab:gve(e),tablist:mve(e),tabpanel:yve})),bve={sm:ba({tab:{py:1,px:4,fontSize:"sm"}}),md:ba({tab:{fontSize:"md",py:2,px:4}}),lg:ba({tab:{fontSize:"lg",py:3,px:4}})},xve=ba(e=>{const{colorScheme:t,orientation:n}=e,r=n==="vertical",i=r?"borderStart":"borderBottom",o=r?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[o]:"-2px",_selected:{[ui.variable]:`colors.${t}.600`,_dark:{[ui.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[ls.variable]:"colors.gray.200",_dark:{[ls.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:ui.reference,bg:ls.reference}}}),wve=ba(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[rx.variable]:"transparent",_selected:{[ui.variable]:`colors.${t}.600`,[rx.variable]:"colors.white",_dark:{[ui.variable]:`colors.${t}.300`,[rx.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:rx.reference},color:ui.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Sve=ba(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[ls.variable]:"colors.gray.50",_dark:{[ls.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[ls.variable]:"colors.white",[ui.variable]:`colors.${t}.600`,_dark:{[ls.variable]:"colors.gray.800",[ui.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:ui.reference,bg:ls.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),kve=ba(e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Wr(n,`${t}.700`),bg:Wr(n,`${t}.100`)}}}}),Cve=ba(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[ui.variable]:"colors.gray.600",_dark:{[ui.variable]:"inherit"},_selected:{[ui.variable]:"colors.white",[ls.variable]:`colors.${t}.600`,_dark:{[ui.variable]:"colors.gray.800",[ls.variable]:`colors.${t}.300`}},color:ui.reference,bg:ls.reference}}}),Eve=ba({}),_ve={line:xve,enclosed:wve,"enclosed-colored":Sve,"soft-rounded":kve,"solid-rounded":Cve,unstyled:Eve},$ve=hve({baseStyle:vve,sizes:bve,variants:_ve,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),sn=G0e("badge",["bg","color","shadow"]),Ave={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:sn.bg.reference,color:sn.color.reference,boxShadow:sn.shadow.reference},Tve=e=>{const{colorScheme:t,theme:n}=e,r=ug(`${t}.500`,.6)(n);return{[sn.bg.variable]:`colors.${t}.500`,[sn.color.variable]:"colors.white",_dark:{[sn.bg.variable]:r,[sn.color.variable]:"colors.whiteAlpha.800"}}},Pve=e=>{const{colorScheme:t,theme:n}=e,r=ug(`${t}.200`,.16)(n);return{[sn.bg.variable]:`colors.${t}.100`,[sn.color.variable]:`colors.${t}.800`,_dark:{[sn.bg.variable]:r,[sn.color.variable]:`colors.${t}.200`}}},Mve=e=>{const{colorScheme:t,theme:n}=e,r=ug(`${t}.200`,.8)(n);return{[sn.color.variable]:`colors.${t}.500`,_dark:{[sn.color.variable]:r},[sn.shadow.variable]:`inset 0 0 0px 1px ${sn.color.reference}`}},Fve={solid:Tve,subtle:Pve,outline:Mve},_y={baseStyle:Ave,variants:Fve,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:Rve,definePartsStyle:Kf}=At(S1e.keys),S9=Ee("tag-bg"),k9=Ee("tag-color"),q$=Ee("tag-shadow"),_w=Ee("tag-min-height"),$w=Ee("tag-min-width"),Aw=Ee("tag-font-size"),Tw=Ee("tag-padding-inline"),Ove={fontWeight:"medium",lineHeight:1.2,outline:0,[k9.variable]:sn.color.reference,[S9.variable]:sn.bg.reference,[q$.variable]:sn.shadow.reference,color:k9.reference,bg:S9.reference,boxShadow:q$.reference,borderRadius:"md",minH:_w.reference,minW:$w.reference,fontSize:Aw.reference,px:Tw.reference,_focusVisible:{[q$.variable]:"shadows.outline"}},Dve={lineHeight:1.2,overflow:"visible"},Nve={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},Ive=Kf({container:Ove,label:Dve,closeButton:Nve}),Lve={sm:Kf({container:{[_w.variable]:"sizes.5",[$w.variable]:"sizes.5",[Aw.variable]:"fontSizes.xs",[Tw.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:Kf({container:{[_w.variable]:"sizes.6",[$w.variable]:"sizes.6",[Aw.variable]:"fontSizes.sm",[Tw.variable]:"space.2"}}),lg:Kf({container:{[_w.variable]:"sizes.8",[$w.variable]:"sizes.8",[Aw.variable]:"fontSizes.md",[Tw.variable]:"space.3"}})},zve={subtle:Kf(e=>{var t;return{container:(t=_y.variants)==null?void 0:t.subtle(e)}}),solid:Kf(e=>{var t;return{container:(t=_y.variants)==null?void 0:t.solid(e)}}),outline:Kf(e=>{var t;return{container:(t=_y.variants)==null?void 0:t.outline(e)}})},jve=Rve({variants:zve,baseStyle:Ive,sizes:Lve,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:pl,defineMultiStyleConfig:Bve}=At(l1e.keys),ip=Ee("input-height"),op=Ee("input-font-size"),sp=Ee("input-padding"),ap=Ee("input-border-radius"),Uve=pl({addon:{height:ip.reference,fontSize:op.reference,px:sp.reference,borderRadius:ap.reference},field:{width:"100%",height:ip.reference,fontSize:op.reference,px:sp.reference,borderRadius:ap.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),au={lg:{[op.variable]:"fontSizes.lg",[sp.variable]:"space.4",[ap.variable]:"radii.md",[ip.variable]:"sizes.12"},md:{[op.variable]:"fontSizes.md",[sp.variable]:"space.4",[ap.variable]:"radii.md",[ip.variable]:"sizes.10"},sm:{[op.variable]:"fontSizes.sm",[sp.variable]:"space.3",[ap.variable]:"radii.sm",[ip.variable]:"sizes.8"},xs:{[op.variable]:"fontSizes.xs",[sp.variable]:"space.2",[ap.variable]:"radii.sm",[ip.variable]:"sizes.6"}},Vve={lg:pl({field:au.lg,group:au.lg}),md:pl({field:au.md,group:au.md}),sm:pl({field:au.sm,group:au.sm}),xs:pl({field:au.xs,group:au.xs})};function eR(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||Ce("blue.500","blue.300")(e),errorBorderColor:n||Ce("red.500","red.300")(e)}}var Wve=pl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=eR(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Ce("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Wr(t,r),boxShadow:`0 0 0 1px ${Wr(t,r)}`},_focusVisible:{zIndex:1,borderColor:Wr(t,n),boxShadow:`0 0 0 1px ${Wr(t,n)}`}},addon:{border:"1px solid",borderColor:Ce("inherit","whiteAlpha.50")(e),bg:Ce("gray.100","whiteAlpha.300")(e)}}}),Hve=pl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=eR(e);return{field:{border:"2px solid",borderColor:"transparent",bg:Ce("gray.100","whiteAlpha.50")(e),_hover:{bg:Ce("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Wr(t,r)},_focusVisible:{bg:"transparent",borderColor:Wr(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Ce("gray.100","whiteAlpha.50")(e)}}}),qve=pl(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=eR(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Wr(t,r),boxShadow:`0px 1px 0px 0px ${Wr(t,r)}`},_focusVisible:{borderColor:Wr(t,n),boxShadow:`0px 1px 0px 0px ${Wr(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),Gve=pl({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),Yve={outline:Wve,filled:Hve,flushed:qve,unstyled:Gve},st=Bve({baseStyle:Uve,sizes:Vve,variants:Yve,defaultProps:{size:"md",variant:"outline"}}),C9,Xve={...(C9=st.baseStyle)==null?void 0:C9.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},E9,_9,Kve={outline:e=>{var t,n;return(n=(t=st.variants)==null?void 0:t.outline(e).field)!=null?n:{}},flushed:e=>{var t,n;return(n=(t=st.variants)==null?void 0:t.flushed(e).field)!=null?n:{}},filled:e=>{var t,n;return(n=(t=st.variants)==null?void 0:t.filled(e).field)!=null?n:{}},unstyled:(_9=(E9=st.variants)==null?void 0:E9.unstyled.field)!=null?_9:{}},$9,A9,T9,P9,M9,F9,R9,O9,Qve={xs:(A9=($9=st.sizes)==null?void 0:$9.xs.field)!=null?A9:{},sm:(P9=(T9=st.sizes)==null?void 0:T9.sm.field)!=null?P9:{},md:(F9=(M9=st.sizes)==null?void 0:M9.md.field)!=null?F9:{},lg:(O9=(R9=st.sizes)==null?void 0:R9.lg.field)!=null?O9:{}},Jve={baseStyle:Xve,sizes:Qve,variants:Kve,defaultProps:{size:"md",variant:"outline"}},ix=Cn("tooltip-bg"),G$=Cn("tooltip-fg"),Zve=Cn("popper-arrow-bg"),ebe={bg:ix.reference,color:G$.reference,[ix.variable]:"colors.gray.700",[G$.variable]:"colors.whiteAlpha.900",_dark:{[ix.variable]:"colors.gray.300",[G$.variable]:"colors.gray.900"},[Zve.variable]:ix.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},tbe={baseStyle:ebe},{defineMultiStyleConfig:nbe,definePartsStyle:j0}=At(p1e.keys),rbe=e=>{const{colorScheme:t,theme:n,isIndeterminate:r,hasStripe:i}=e,o=Ce(y9(),y9("1rem","rgba(0,0,0,0.1)"))(e),s=Ce(`${t}.500`,`${t}.200`)(e),a=`linear-gradient(
    to right,
    transparent 0%,
    ${Wr(n,s)} 50%,
    transparent 100%
  )`;return{...!r&&i&&o,...r?{bgImage:a}:{bgColor:s}}},ibe={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},obe=e=>({bg:Ce("gray.100","whiteAlpha.300")(e)}),sbe=e=>({transitionProperty:"common",transitionDuration:"slow",...rbe(e)}),abe=j0(e=>({label:ibe,filledTrack:sbe(e),track:obe(e)})),lbe={xs:j0({track:{h:"1"}}),sm:j0({track:{h:"2"}}),md:j0({track:{h:"3"}}),lg:j0({track:{h:"4"}})},ube=nbe({sizes:lbe,baseStyle:abe,defaultProps:{size:"md",colorScheme:"blue"}}),cbe=e=>typeof e=="function";function Yr(e,...t){return cbe(e)?e(...t):e}var{definePartsStyle:Pw,defineMultiStyleConfig:fbe}=At(r1e.keys),$y=Ee("checkbox-size"),dbe=e=>{const{colorScheme:t}=e;return{w:$y.reference,h:$y.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Ce(`${t}.500`,`${t}.200`)(e),borderColor:Ce(`${t}.500`,`${t}.200`)(e),color:Ce("white","gray.900")(e),_hover:{bg:Ce(`${t}.600`,`${t}.300`)(e),borderColor:Ce(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:Ce("gray.200","transparent")(e),bg:Ce("gray.200","whiteAlpha.300")(e),color:Ce("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:Ce(`${t}.500`,`${t}.200`)(e),borderColor:Ce(`${t}.500`,`${t}.200`)(e),color:Ce("white","gray.900")(e)},_disabled:{bg:Ce("gray.100","whiteAlpha.100")(e),borderColor:Ce("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Ce("red.500","red.300")(e)}}},hbe={_disabled:{cursor:"not-allowed"}},pbe={userSelect:"none",_disabled:{opacity:.4}},gbe={transitionProperty:"transform",transitionDuration:"normal"},mbe=Pw(e=>({icon:gbe,container:hbe,control:Yr(dbe,e),label:pbe})),ybe={sm:Pw({control:{[$y.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:Pw({control:{[$y.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:Pw({control:{[$y.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},j2=fbe({baseStyle:mbe,sizes:ybe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:vbe,definePartsStyle:Mw}=At(g1e.keys),bbe=e=>{var t;const n=(t=Yr(j2.baseStyle,e))==null?void 0:t.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},xbe=Mw(e=>{var t,n,r,i;return{label:(n=(t=j2).baseStyle)==null?void 0:n.call(t,e).label,container:(i=(r=j2).baseStyle)==null?void 0:i.call(r,e).container,control:bbe(e)}}),wbe={md:Mw({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:Mw({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:Mw({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},Sbe=vbe({baseStyle:xbe,sizes:wbe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:kbe,definePartsStyle:Cbe}=At(m1e.keys),ox=Ee("select-bg"),D9,Ebe={...(D9=st.baseStyle)==null?void 0:D9.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:ox.reference,[ox.variable]:"colors.white",_dark:{[ox.variable]:"colors.gray.700"},"> option, > optgroup":{bg:ox.reference}},_be={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},$be=Cbe({field:Ebe,icon:_be}),sx={paddingInlineEnd:"8"},N9,I9,L9,z9,j9,B9,U9,V9,Abe={lg:{...(N9=st.sizes)==null?void 0:N9.lg,field:{...(I9=st.sizes)==null?void 0:I9.lg.field,...sx}},md:{...(L9=st.sizes)==null?void 0:L9.md,field:{...(z9=st.sizes)==null?void 0:z9.md.field,...sx}},sm:{...(j9=st.sizes)==null?void 0:j9.sm,field:{...(B9=st.sizes)==null?void 0:B9.sm.field,...sx}},xs:{...(U9=st.sizes)==null?void 0:U9.xs,field:{...(V9=st.sizes)==null?void 0:V9.xs.field,...sx},icon:{insetEnd:"1"}}},Tbe=kbe({baseStyle:$be,sizes:Abe,variants:st.variants,defaultProps:st.defaultProps}),Y$=Ee("skeleton-start-color"),X$=Ee("skeleton-end-color"),Pbe={[Y$.variable]:"colors.gray.100",[X$.variable]:"colors.gray.400",_dark:{[Y$.variable]:"colors.gray.800",[X$.variable]:"colors.gray.600"},background:Y$.reference,borderColor:X$.reference,opacity:.7,borderRadius:"sm"},Mbe={baseStyle:Pbe},K$=Ee("skip-link-bg"),Fbe={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[K$.variable]:"colors.white",_dark:{[K$.variable]:"colors.gray.700"},bg:K$.reference}},Rbe={baseStyle:Fbe},{defineMultiStyleConfig:Obe,definePartsStyle:PC}=At(y1e.keys),w1=Ee("slider-thumb-size"),S1=Ee("slider-track-size"),$u=Ee("slider-bg"),Dbe=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...Z4({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},Nbe=e=>({...Z4({orientation:e.orientation,horizontal:{h:S1.reference},vertical:{w:S1.reference}}),overflow:"hidden",borderRadius:"sm",[$u.variable]:"colors.gray.200",_dark:{[$u.variable]:"colors.whiteAlpha.200"},_disabled:{[$u.variable]:"colors.gray.300",_dark:{[$u.variable]:"colors.whiteAlpha.300"}},bg:$u.reference}),Ibe=e=>{const{orientation:t}=e;return{...Z4({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:w1.reference,h:w1.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},Lbe=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[$u.variable]:`colors.${t}.500`,_dark:{[$u.variable]:`colors.${t}.200`},bg:$u.reference}},zbe=PC(e=>({container:Dbe(e),track:Nbe(e),thumb:Ibe(e),filledTrack:Lbe(e)})),jbe=PC({container:{[w1.variable]:"sizes.4",[S1.variable]:"sizes.1"}}),Bbe=PC({container:{[w1.variable]:"sizes.3.5",[S1.variable]:"sizes.1"}}),Ube=PC({container:{[w1.variable]:"sizes.2.5",[S1.variable]:"sizes.0.5"}}),Vbe={lg:jbe,md:Bbe,sm:Ube},Wbe=Obe({baseStyle:zbe,sizes:Vbe,defaultProps:{size:"md",colorScheme:"blue"}}),kf=Cn("spinner-size"),Hbe={width:[kf.reference],height:[kf.reference]},qbe={xs:{[kf.variable]:"sizes.3"},sm:{[kf.variable]:"sizes.4"},md:{[kf.variable]:"sizes.6"},lg:{[kf.variable]:"sizes.8"},xl:{[kf.variable]:"sizes.12"}},Gbe={baseStyle:Hbe,sizes:qbe,defaultProps:{size:"md"}},{defineMultiStyleConfig:Ybe,definePartsStyle:NX}=At(v1e.keys),Xbe={fontWeight:"medium"},Kbe={opacity:.8,marginBottom:"2"},Qbe={verticalAlign:"baseline",fontWeight:"semibold"},Jbe={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},Zbe=NX({container:{},label:Xbe,helpText:Kbe,number:Qbe,icon:Jbe}),exe={md:NX({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},txe=Ybe({baseStyle:Zbe,sizes:exe,defaultProps:{size:"md"}}),Q$=Ee("kbd-bg"),nxe={[Q$.variable]:"colors.gray.100",_dark:{[Q$.variable]:"colors.whiteAlpha.100"},bg:Q$.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},rxe={baseStyle:nxe},ixe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},oxe={baseStyle:ixe},{defineMultiStyleConfig:sxe,definePartsStyle:axe}=At(u1e.keys),lxe={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},uxe=axe({icon:lxe}),cxe=sxe({baseStyle:uxe}),{defineMultiStyleConfig:fxe,definePartsStyle:dxe}=At(c1e.keys),Ks=Ee("menu-bg"),J$=Ee("menu-shadow"),hxe={[Ks.variable]:"#fff",[J$.variable]:"shadows.sm",_dark:{[Ks.variable]:"colors.gray.700",[J$.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:Ks.reference,boxShadow:J$.reference},pxe={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Ks.variable]:"colors.gray.100",_dark:{[Ks.variable]:"colors.whiteAlpha.100"}},_active:{[Ks.variable]:"colors.gray.200",_dark:{[Ks.variable]:"colors.whiteAlpha.200"}},_expanded:{[Ks.variable]:"colors.gray.100",_dark:{[Ks.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Ks.reference},gxe={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},mxe={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},yxe={opacity:.6},vxe={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},bxe={transitionProperty:"common",transitionDuration:"normal"},xxe=dxe({button:bxe,list:hxe,item:pxe,groupTitle:gxe,icon:mxe,command:yxe,divider:vxe}),wxe=fxe({baseStyle:xxe}),{defineMultiStyleConfig:Sxe,definePartsStyle:y3}=At(f1e.keys),Z$=Ee("modal-bg"),eA=Ee("modal-shadow"),kxe={bg:"blackAlpha.600",zIndex:"modal"},Cxe=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},Exe=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[Z$.variable]:"colors.white",[eA.variable]:"shadows.lg",_dark:{[Z$.variable]:"colors.gray.700",[eA.variable]:"shadows.dark-lg"},bg:Z$.reference,boxShadow:eA.reference}},_xe={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},$xe={position:"absolute",top:"2",insetEnd:"3"},Axe=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},Txe={px:"6",py:"4"},Pxe=y3(e=>({overlay:kxe,dialogContainer:Yr(Cxe,e),dialog:Yr(Exe,e),header:_xe,closeButton:$xe,body:Yr(Axe,e),footer:Txe}));function Go(e){return y3(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var Mxe={xs:Go("xs"),sm:Go("sm"),md:Go("md"),lg:Go("lg"),xl:Go("xl"),"2xl":Go("2xl"),"3xl":Go("3xl"),"4xl":Go("4xl"),"5xl":Go("5xl"),"6xl":Go("6xl"),full:Go("full")},Fxe=Sxe({baseStyle:Pxe,sizes:Mxe,defaultProps:{size:"md"}}),{defineMultiStyleConfig:Rxe,definePartsStyle:IX}=At(d1e.keys),tR=Cn("number-input-stepper-width"),LX=Cn("number-input-input-padding"),Oxe=ul(tR).add("0.5rem").toString(),tA=Cn("number-input-bg"),nA=Cn("number-input-color"),rA=Cn("number-input-border-color"),Dxe={[tR.variable]:"sizes.6",[LX.variable]:Oxe},Nxe=e=>{var t,n;return(n=(t=Yr(st.baseStyle,e))==null?void 0:t.field)!=null?n:{}},Ixe={width:tR.reference},Lxe={borderStart:"1px solid",borderStartColor:rA.reference,color:nA.reference,bg:tA.reference,[nA.variable]:"colors.chakra-body-text",[rA.variable]:"colors.chakra-border-color",_dark:{[nA.variable]:"colors.whiteAlpha.800",[rA.variable]:"colors.whiteAlpha.300"},_active:{[tA.variable]:"colors.gray.200",_dark:{[tA.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},zxe=IX(e=>{var t;return{root:Dxe,field:(t=Yr(Nxe,e))!=null?t:{},stepperGroup:Ixe,stepper:Lxe}});function ax(e){var t,n,r;const i=(t=st.sizes)==null?void 0:t[e],o={lg:"md",md:"md",sm:"sm",xs:"sm"},s=(r=(n=i.field)==null?void 0:n.fontSize)!=null?r:"md",a=MX.fontSizes[s];return IX({field:{...i.field,paddingInlineEnd:LX.reference,verticalAlign:"top"},stepper:{fontSize:ul(a).multiply(.75).toString(),_first:{borderTopEndRadius:o[e]},_last:{borderBottomEndRadius:o[e],mt:"-1px",borderTopWidth:1}}})}var jxe={xs:ax("xs"),sm:ax("sm"),md:ax("md"),lg:ax("lg")},Bxe=Rxe({baseStyle:zxe,sizes:jxe,variants:st.variants,defaultProps:st.defaultProps}),W9,Uxe={...(W9=st.baseStyle)==null?void 0:W9.field,textAlign:"center"},Vxe={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},H9,q9,Wxe={outline:e=>{var t,n,r;return(r=(n=Yr((t=st.variants)==null?void 0:t.outline,e))==null?void 0:n.field)!=null?r:{}},flushed:e=>{var t,n,r;return(r=(n=Yr((t=st.variants)==null?void 0:t.flushed,e))==null?void 0:n.field)!=null?r:{}},filled:e=>{var t,n,r;return(r=(n=Yr((t=st.variants)==null?void 0:t.filled,e))==null?void 0:n.field)!=null?r:{}},unstyled:(q9=(H9=st.variants)==null?void 0:H9.unstyled.field)!=null?q9:{}},Hxe={baseStyle:Uxe,sizes:Vxe,variants:Wxe,defaultProps:st.defaultProps},{defineMultiStyleConfig:qxe,definePartsStyle:Gxe}=At(h1e.keys),lx=Cn("popper-bg"),Yxe=Cn("popper-arrow-bg"),G9=Cn("popper-arrow-shadow-color"),Xxe={zIndex:10},Kxe={[lx.variable]:"colors.white",bg:lx.reference,[Yxe.variable]:lx.reference,[G9.variable]:"colors.gray.200",_dark:{[lx.variable]:"colors.gray.700",[G9.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},Qxe={px:3,py:2,borderBottomWidth:"1px"},Jxe={px:3,py:2},Zxe={px:3,py:2,borderTopWidth:"1px"},ewe={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},twe=Gxe({popper:Xxe,content:Kxe,header:Qxe,body:Jxe,footer:Zxe,closeButton:ewe}),nwe=qxe({baseStyle:twe}),{definePartsStyle:v3,defineMultiStyleConfig:rwe}=At(i1e.keys),iA=Ee("drawer-bg"),oA=Ee("drawer-box-shadow");function bh(e){return v3(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var iwe={bg:"blackAlpha.600",zIndex:"modal"},owe={display:"flex",zIndex:"modal",justifyContent:"center"},swe=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[iA.variable]:"colors.white",[oA.variable]:"shadows.lg",_dark:{[iA.variable]:"colors.gray.700",[oA.variable]:"shadows.dark-lg"},bg:iA.reference,boxShadow:oA.reference}},awe={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},lwe={position:"absolute",top:"2",insetEnd:"3"},uwe={px:"6",py:"2",flex:"1",overflow:"auto"},cwe={px:"6",py:"4"},fwe=v3(e=>({overlay:iwe,dialogContainer:owe,dialog:Yr(swe,e),header:awe,closeButton:lwe,body:uwe,footer:cwe})),dwe={xs:bh("xs"),sm:bh("md"),md:bh("lg"),lg:bh("2xl"),xl:bh("4xl"),full:bh("full")},hwe=rwe({baseStyle:fwe,sizes:dwe,defaultProps:{size:"xs"}}),{definePartsStyle:pwe,defineMultiStyleConfig:gwe}=At(o1e.keys),mwe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},ywe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},vwe={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},bwe=pwe({preview:mwe,input:ywe,textarea:vwe}),xwe=gwe({baseStyle:bwe}),{definePartsStyle:wwe,defineMultiStyleConfig:Swe}=At(s1e.keys),$p=Ee("form-control-color"),kwe={marginStart:"1",[$p.variable]:"colors.red.500",_dark:{[$p.variable]:"colors.red.300"},color:$p.reference},Cwe={mt:"2",[$p.variable]:"colors.gray.600",_dark:{[$p.variable]:"colors.whiteAlpha.600"},color:$p.reference,lineHeight:"normal",fontSize:"sm"},Ewe=wwe({container:{width:"100%",position:"relative"},requiredIndicator:kwe,helperText:Cwe}),_we=Swe({baseStyle:Ewe}),{definePartsStyle:$we,defineMultiStyleConfig:Awe}=At(a1e.keys),Ap=Ee("form-error-color"),Twe={[Ap.variable]:"colors.red.500",_dark:{[Ap.variable]:"colors.red.300"},color:Ap.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},Pwe={marginEnd:"0.5em",[Ap.variable]:"colors.red.500",_dark:{[Ap.variable]:"colors.red.300"},color:Ap.reference},Mwe=$we({text:Twe,icon:Pwe}),Fwe=Awe({baseStyle:Mwe}),Rwe={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},Owe={baseStyle:Rwe},Dwe={fontFamily:"heading",fontWeight:"bold"},Nwe={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},Iwe={baseStyle:Dwe,sizes:Nwe,defaultProps:{size:"xl"}},{defineMultiStyleConfig:Lwe,definePartsStyle:zwe}=At(n1e.keys),sA=Ee("breadcrumb-link-decor"),jwe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:sA.reference,[sA.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[sA.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Bwe=zwe({link:jwe}),Uwe=Lwe({baseStyle:Bwe}),Vwe={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},zX=e=>{const{colorScheme:t,theme:n}=e;if(t==="gray")return{color:Ce("gray.800","whiteAlpha.900")(e),_hover:{bg:Ce("gray.100","whiteAlpha.200")(e)},_active:{bg:Ce("gray.200","whiteAlpha.300")(e)}};const r=ug(`${t}.200`,.12)(n),i=ug(`${t}.200`,.24)(n);return{color:Ce(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:Ce(`${t}.50`,r)(e)},_active:{bg:Ce(`${t}.100`,i)(e)}}},Wwe=e=>{const{colorScheme:t}=e,n=Ce("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Yr(zX,e)}},Hwe={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},qwe=e=>{var t;const{colorScheme:n}=e;if(n==="gray"){const l=Ce("gray.100","whiteAlpha.200")(e);return{bg:l,color:Ce("gray.800","whiteAlpha.900")(e),_hover:{bg:Ce("gray.200","whiteAlpha.300")(e),_disabled:{bg:l}},_active:{bg:Ce("gray.300","whiteAlpha.400")(e)}}}const{bg:r=`${n}.500`,color:i="white",hoverBg:o=`${n}.600`,activeBg:s=`${n}.700`}=(t=Hwe[n])!=null?t:{},a=Ce(r,`${n}.200`)(e);return{bg:a,color:Ce(i,"gray.800")(e),_hover:{bg:Ce(o,`${n}.300`)(e),_disabled:{bg:a}},_active:{bg:Ce(s,`${n}.400`)(e)}}},Gwe=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Ce(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Ce(`${t}.700`,`${t}.500`)(e)}}},Ywe={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},Xwe={ghost:zX,outline:Wwe,solid:qwe,link:Gwe,unstyled:Ywe},Kwe={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},Qwe={baseStyle:Vwe,variants:Xwe,sizes:Kwe,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Qf,defineMultiStyleConfig:Jwe}=At(k1e.keys),B2=Ee("card-bg"),Sl=Ee("card-padding"),jX=Ee("card-shadow"),Fw=Ee("card-radius"),BX=Ee("card-border-width","0"),UX=Ee("card-border-color"),Zwe=Qf({container:{[B2.variable]:"colors.chakra-body-bg",backgroundColor:B2.reference,boxShadow:jX.reference,borderRadius:Fw.reference,color:"chakra-body-text",borderWidth:BX.reference,borderColor:UX.reference},body:{padding:Sl.reference,flex:"1 1 0%"},header:{padding:Sl.reference},footer:{padding:Sl.reference}}),e2e={sm:Qf({container:{[Fw.variable]:"radii.base",[Sl.variable]:"space.3"}}),md:Qf({container:{[Fw.variable]:"radii.md",[Sl.variable]:"space.5"}}),lg:Qf({container:{[Fw.variable]:"radii.xl",[Sl.variable]:"space.7"}})},t2e={elevated:Qf({container:{[jX.variable]:"shadows.base",_dark:{[B2.variable]:"colors.gray.700"}}}),outline:Qf({container:{[BX.variable]:"1px",[UX.variable]:"colors.chakra-border-color"}}),filled:Qf({container:{[B2.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[Sl.variable]:0},header:{[Sl.variable]:0},footer:{[Sl.variable]:0}}},n2e=Jwe({baseStyle:Zwe,variants:t2e,sizes:e2e,defaultProps:{variant:"elevated",size:"md"}}),Ay=Cn("close-button-size"),Qm=Cn("close-button-bg"),r2e={w:[Ay.reference],h:[Ay.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[Qm.variable]:"colors.blackAlpha.100",_dark:{[Qm.variable]:"colors.whiteAlpha.100"}},_active:{[Qm.variable]:"colors.blackAlpha.200",_dark:{[Qm.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:Qm.reference},i2e={lg:{[Ay.variable]:"sizes.10",fontSize:"md"},md:{[Ay.variable]:"sizes.8",fontSize:"xs"},sm:{[Ay.variable]:"sizes.6",fontSize:"2xs"}},o2e={baseStyle:r2e,sizes:i2e,defaultProps:{size:"md"}},{variants:s2e,defaultProps:a2e}=_y,l2e={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:sn.bg.reference,color:sn.color.reference,boxShadow:sn.shadow.reference},u2e={baseStyle:l2e,variants:s2e,defaultProps:a2e},c2e={w:"100%",mx:"auto",maxW:"prose",px:"4"},f2e={baseStyle:c2e},d2e={opacity:.6,borderColor:"inherit"},h2e={borderStyle:"solid"},p2e={borderStyle:"dashed"},g2e={solid:h2e,dashed:p2e},m2e={baseStyle:d2e,variants:g2e,defaultProps:{variant:"solid"}},{definePartsStyle:y2e,defineMultiStyleConfig:v2e}=At(Zye.keys),b2e={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},x2e={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},w2e={pt:"2",px:"4",pb:"5"},S2e={fontSize:"1.25em"},k2e=y2e({container:b2e,button:x2e,panel:w2e,icon:S2e}),C2e=v2e({baseStyle:k2e}),{definePartsStyle:Cv,defineMultiStyleConfig:E2e}=At(e1e.keys),qi=Ee("alert-fg"),Ll=Ee("alert-bg"),_2e=Cv({container:{bg:Ll.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:qi.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:qi.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function nR(e){const{theme:t,colorScheme:n}=e,r=ug(`${n}.200`,.16)(t);return{light:`colors.${n}.100`,dark:r}}var $2e=Cv(e=>{const{colorScheme:t}=e,n=nR(e);return{container:{[qi.variable]:`colors.${t}.600`,[Ll.variable]:n.light,_dark:{[qi.variable]:`colors.${t}.200`,[Ll.variable]:n.dark}}}}),A2e=Cv(e=>{const{colorScheme:t}=e,n=nR(e);return{container:{[qi.variable]:`colors.${t}.600`,[Ll.variable]:n.light,_dark:{[qi.variable]:`colors.${t}.200`,[Ll.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:qi.reference}}}),T2e=Cv(e=>{const{colorScheme:t}=e,n=nR(e);return{container:{[qi.variable]:`colors.${t}.600`,[Ll.variable]:n.light,_dark:{[qi.variable]:`colors.${t}.200`,[Ll.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:qi.reference}}}),P2e=Cv(e=>{const{colorScheme:t}=e;return{container:{[qi.variable]:"colors.white",[Ll.variable]:`colors.${t}.600`,_dark:{[qi.variable]:"colors.gray.900",[Ll.variable]:`colors.${t}.200`},color:qi.reference}}}),M2e={subtle:$2e,"left-accent":A2e,"top-accent":T2e,solid:P2e},F2e=E2e({baseStyle:_2e,variants:M2e,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:VX,defineMultiStyleConfig:R2e}=At(t1e.keys),Tp=Ee("avatar-border-color"),Ty=Ee("avatar-bg"),k1=Ee("avatar-font-size"),cg=Ee("avatar-size"),O2e={borderRadius:"full",border:"0.2em solid",borderColor:Tp.reference,[Tp.variable]:"white",_dark:{[Tp.variable]:"colors.gray.800"}},D2e={bg:Ty.reference,fontSize:k1.reference,width:cg.reference,height:cg.reference,lineHeight:"1",[Ty.variable]:"colors.gray.200",_dark:{[Ty.variable]:"colors.whiteAlpha.400"}},N2e=e=>{const{name:t,theme:n}=e,r=t?V1e({string:t}):"colors.gray.400",i=B1e(r)(n);let o="white";return i||(o="gray.800"),{bg:Ty.reference,fontSize:k1.reference,color:o,borderColor:Tp.reference,verticalAlign:"top",width:cg.reference,height:cg.reference,"&:not([data-loaded])":{[Ty.variable]:r},[Tp.variable]:"colors.white",_dark:{[Tp.variable]:"colors.gray.800"}}},I2e={fontSize:k1.reference,lineHeight:"1"},L2e=VX(e=>({badge:Yr(O2e,e),excessLabel:Yr(D2e,e),container:Yr(N2e,e),label:I2e}));function lu(e){const t=e!=="100%"?RX[e]:void 0;return VX({container:{[cg.variable]:t??e,[k1.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[cg.variable]:t??e,[k1.variable]:`calc(${t??e} / 2.5)`}})}var z2e={"2xs":lu(4),xs:lu(6),sm:lu(8),md:lu(12),lg:lu(16),xl:lu(24),"2xl":lu(32),full:lu("100%")},j2e=R2e({baseStyle:L2e,sizes:z2e,defaultProps:{size:"md"}}),B2e={Accordion:C2e,Alert:F2e,Avatar:j2e,Badge:_y,Breadcrumb:Uwe,Button:Qwe,Checkbox:j2,CloseButton:o2e,Code:u2e,Container:f2e,Divider:m2e,Drawer:hwe,Editable:xwe,Form:_we,FormError:Fwe,FormLabel:Owe,Heading:Iwe,Input:st,Kbd:rxe,Link:oxe,List:cxe,Menu:wxe,Modal:Fxe,NumberInput:Bxe,PinInput:Hxe,Popover:nwe,Progress:ube,Radio:Sbe,Select:Tbe,Skeleton:Mbe,SkipLink:Rbe,Slider:Wbe,Spinner:Gbe,Stat:txe,Switch:ove,Table:dve,Tabs:$ve,Tag:jve,Textarea:Jve,Tooltip:tbe,Card:n2e,Stepper:Jye},U2e={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},V2e={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},W2e="ltr",H2e={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},WX={semanticTokens:U2e,direction:W2e,...Xye,components:B2e,styles:V2e,config:H2e};function B0(e){return typeof e=="function"}function q2e(...e){return t=>e.reduce((n,r)=>r(n),t)}var G2e=e=>function(...n){let r=[...n],i=n[n.length-1];return Eye(i)&&r.length>1?r=r.slice(0,r.length-1):i=e,q2e(...r.map(o=>s=>B0(o)?o(s):X2e(s,o)))(i)},Y2e=G2e(WX);function X2e(...e){return Co({},...e,HX)}function HX(e,t,n,r){if((B0(e)||B0(t))&&Object.prototype.hasOwnProperty.call(r,n))return(...i)=>{const o=B0(e)?e(...i):e,s=B0(t)?t(...i):t;return Co({},o,s,HX)}}function K2e(e,t){const n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}function Q2e(e,t,n,r){const i=typeof t=="string"?t.split("."):[t];for(r=0;r<i.length&&e;r+=1)e=e[i[r]];return e===void 0?n:e}var J2e=e=>{const t=new WeakMap;return(r,i,o,s)=>{if(typeof r>"u")return e(r,i,o);t.has(r)||t.set(r,new Map);const a=t.get(r);if(a.has(i))return a.get(i);const l=e(r,i,o,s);return a.set(i,l),l}},qX=J2e(Q2e);function GX(e,t){const n={};return Object.keys(e).forEach(r=>{const i=e[r];t(i,r,e)&&(n[r]=i)}),n}var YX=e=>GX(e,t=>t!=null);function Z2e(e){return typeof e=="function"}function XX(e,...t){return Z2e(e)?e(...t):e}var eSe=typeof Element<"u",tSe=typeof Map=="function",nSe=typeof Set=="function",rSe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Rw(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Rw(e[r],t[r]))return!1;return!0}var o;if(tSe&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;for(o=e.entries();!(r=o.next()).done;)if(!Rw(r.value[1],t.get(r.value[0])))return!1;return!0}if(nSe&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(r=o.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(rSe&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(eSe&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&e.$$typeof)&&!Rw(e[i[r]],t[i[r]]))return!1;return!0}return e!==e&&t!==t}var iSe=function(t,n){try{return Rw(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const oSe=Da(iSe);function KX(e,t={}){var n;const{styleConfig:r,...i}=t,{theme:o,colorMode:s}=kX(),a=e?qX(o,`components.${e}`):void 0,l=r||a,u=Co({theme:o,colorMode:s},(n=l==null?void 0:l.defaultProps)!=null?n:{},YX(K2e(i,["children"]))),c=M.useRef({});if(l){const d=kye(l)(u);oSe(c.current,d)||(c.current=d)}return c.current}function Gl(e,t={}){return KX(e,t)}function Yl(e,t={}){return KX(e,t)}var sSe=new Set([...fye,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),aSe=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function lSe(e){return aSe.has(e)||!sSe.has(e)}function uSe(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const n={...e};for(const r of t)if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(i in n&&delete n[i],n[i]=r[i]);return n}function QX(e){const t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}var cSe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,fSe=oG(function(e){return cSe.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),dSe=fSe,hSe=function(t){return t!=="theme"},Y9=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?dSe:hSe},X9=function(t,n,r){var i;if(n){var o=n.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(s){return t.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},pSe=!1,gSe=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return fG(n,r,i),Dpe(function(){return dG(n,r,i)}),null},mSe=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,o,s;n!==void 0&&(o=n.label,s=n.target);var a=X9(t,n,r),l=a||Y9(i),u=!l("as");return function(){var c=arguments,f=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&f.push("label:"+o+";"),c[0]==null||c[0].raw===void 0)f.push.apply(f,c);else{f.push(c[0][0]);for(var d=c.length,h=1;h<d;h++)f.push(c[h],c[0][h])}var p=mG(function(g,m,y){var v=u&&g.as||i,b="",x=[],w=g;if(g.theme==null){w={};for(var k in g)w[k]=g[k];w.theme=M.useContext(n1)}typeof g.className=="string"?b=_pe(m.registered,x,g.className):g.className!=null&&(b=g.className+" ");var S=e4(f.concat(x),m.registered,w);b+=m.key+"-"+S.name,s!==void 0&&(b+=" "+s);var C=u&&a===void 0?Y9(v):l,E={};for(var A in g)u&&A==="as"||C(A)&&(E[A]=g[A]);return E.className=b,y&&(E.ref=y),M.createElement(M.Fragment,null,M.createElement(gSe,{cache:m,serialized:S,isStringTag:typeof v=="string"}),M.createElement(v,E))});return p.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=f,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return s===void 0&&pSe?"NO_COMPONENT_SELECTOR":"."+s}}),p.withComponent=function(g,m){return e(g,d2({},n,m,{shouldForwardProp:X9(p,m,!0)})).apply(void 0,f)},p}},ySe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],U2=mSe.bind();ySe.forEach(function(e){U2[e]=U2(e)});var K9,vSe=(K9=U2.default)!=null?K9:U2,bSe=({baseStyle:e})=>t=>{const{theme:n,css:r,__css:i,sx:o,...s}=t,a=GX(s,(f,d)=>hye(d)),l=XX(e,t),u=uSe({},i,l,YX(a),o),c=PX(u)(t.theme);return r?[c,r]:c};function aA(e,t){const{baseStyle:n,...r}=t??{};r.shouldForwardProp||(r.shouldForwardProp=lSe);const i=bSe({baseStyle:n}),o=vSe(e,r)(i);return Vi.forwardRef(function(l,u){const{colorMode:c,forced:f}=am();return Vi.createElement(o,{ref:u,"data-theme":f?c:void 0,...l})})}function xSe(){const e=new Map;return new Proxy(aA,{apply(t,n,r){return aA(...r)},get(t,n){return e.has(n)||e.set(n,aA(n)),e.get(n)}})}var ke=xSe();function _e(e){return M.forwardRef(e)}function wSe(e={}){const{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=e,i=M.createContext(void 0);i.displayName=r;function o(){var s;const a=M.useContext(i);if(!a&&t){const l=new Error(n);throw l.name="ContextError",(s=Error.captureStackTrace)==null||s.call(Error,l,o),l}return a}return[i.Provider,o,i]}function SSe(e){const{cssVarsRoot:t,theme:n,children:r}=e,i=M.useMemo(()=>lye(n),[n]);return $.jsxs(Lpe,{theme:i,children:[$.jsx(kSe,{root:t}),r]})}function kSe({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return $.jsx(fC,{styles:n=>({[t]:n.__cssVars})})}wSe({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function CSe(){const{colorMode:e}=am();return $.jsx(fC,{styles:t=>{const n=qX(t,"styles.global"),r=XX(n,{theme:t,colorMode:e});return r?PX(r)(t):void 0}})}var rR=M.createContext({getDocument(){return document},getWindow(){return window}});rR.displayName="EnvironmentContext";function ESe({defer:e}={}){const[,t]=M.useReducer(n=>n+1,0);return tg(()=>{e&&t()},[e]),M.useContext(rR)}function JX(e){const{children:t,environment:n,disabled:r}=e,i=M.useRef(null),o=M.useMemo(()=>n||{getDocument:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument)!=null?l:document},getWindow:()=>{var a,l;return(l=(a=i.current)==null?void 0:a.ownerDocument.defaultView)!=null?l:window}},[n]),s=!r||!n;return $.jsxs(rR.Provider,{value:o,children:[t,s&&$.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}JX.displayName="EnvironmentProvider";var _Se=e=>{const{children:t,colorModeManager:n,portalZIndex:r,resetScope:i,resetCSS:o=!0,theme:s={},environment:a,cssVarsRoot:l,disableEnvironment:u,disableGlobalStyle:c}=e,f=$.jsx(JX,{environment:a,disabled:u,children:t});return $.jsx(SSe,{theme:s,cssVarsRoot:l,children:$.jsxs(SX,{colorModeManager:n,options:s.config,children:[o?$.jsx(Upe,{scope:i}):$.jsx(Bpe,{}),!c&&$.jsx(CSe,{}),r?$.jsx(bG,{zIndex:r,children:f}):f]})})},$Se=(e,t)=>e.find(n=>n.id===t);function Q9(e,t){const n=ZX(e,t),r=n?e[n].findIndex(i=>i.id===t):-1;return{position:n,index:r}}function ZX(e,t){for(const[n,r]of Object.entries(e))if($Se(r,t))return n}function ASe(e){const t=e.includes("right"),n=e.includes("left");let r="center";return t&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function TSe(e){const n=e==="top"||e==="bottom"?"0 auto":void 0,r=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,o=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",s=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:i,right:o,left:s}}function Ow(e,t=[]){const n=M.useRef(e);return M.useEffect(()=>{n.current=e}),M.useCallback((...r)=>{var i;return(i=n.current)==null?void 0:i.call(n,...r)},t)}function PSe(e,t){const n=Ow(e);M.useEffect(()=>{if(t==null)return;let r=null;return r=window.setTimeout(()=>{n()},t),()=>{r&&window.clearTimeout(r)}},[t,n])}function J9(e,t){const n=M.useRef(!1),r=M.useRef(!1);M.useEffect(()=>{if(n.current&&r.current)return e();r.current=!0},t),M.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const eK=M.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),MC=M.createContext({}),Ev=M.createContext(null),FC=typeof document<"u",iR=FC?M.useLayoutEffect:M.useEffect,tK=M.createContext({strict:!1}),oR=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),MSe="framerAppearId",nK="data-"+oR(MSe);function FSe(e,t,n,r){const{visualElement:i}=M.useContext(MC),o=M.useContext(tK),s=M.useContext(Ev),a=M.useContext(eK).reducedMotion,l=M.useRef();r=r||o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:i,props:n,presenceContext:s,blockInitialAnimation:s?s.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;M.useInsertionEffect(()=>{u&&u.update(n,s)});const c=M.useRef(!!(n[nK]&&!window.HandoffComplete));return iR(()=>{u&&(u.render(),c.current&&u.animationState&&u.animationState.animateChanges())}),M.useEffect(()=>{u&&(u.updateFeatures(),!c.current&&u.animationState&&u.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),u}function lp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function RSe(e,t,n){return M.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):lp(n)&&(n.current=r))},[t])}function C1(e){return typeof e=="string"||Array.isArray(e)}function RC(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const sR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],aR=["initial",...sR];function OC(e){return RC(e.animate)||aR.some(t=>C1(e[t]))}function rK(e){return!!(OC(e)||e.variants)}function OSe(e,t){if(OC(e)){const{initial:n,animate:r}=e;return{initial:n===!1||C1(n)?n:void 0,animate:C1(r)?r:void 0}}return e.inherit!==!1?t:{}}function DSe(e){const{initial:t,animate:n}=OSe(e,M.useContext(MC));return M.useMemo(()=>({initial:t,animate:n}),[Z9(t),Z9(n)])}function Z9(e){return Array.isArray(e)?e.join(" "):e}const ez={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},E1={};for(const e in ez)E1[e]={isEnabled:t=>ez[e].some(n=>!!t[n])};function NSe(e){for(const t in e)E1[t]={...E1[t],...e[t]}}const lR=M.createContext({}),iK=M.createContext({}),ISe=Symbol.for("motionComponentSymbol");function LSe({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&NSe(e);function o(a,l){let u;const c={...M.useContext(eK),...a,layoutId:zSe(a)},{isStatic:f}=c,d=DSe(a),h=r(a,f);if(!f&&FC){d.visualElement=FSe(i,h,c,t);const p=M.useContext(iK),g=M.useContext(tK).strict;d.visualElement&&(u=d.visualElement.loadFeatures(c,g,e,p))}return M.createElement(MC.Provider,{value:d},u&&d.visualElement?M.createElement(u,{visualElement:d.visualElement,...c}):null,n(i,a,RSe(h,d.visualElement,l),h,f,d.visualElement))}const s=M.forwardRef(o);return s[ISe]=i,s}function zSe({layoutId:e}){const t=M.useContext(lR).id;return t&&e!==void 0?t+"-"+e:e}function jSe(e){function t(r,i={}){return LSe(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const BSe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function uR(e){return typeof e!="string"||e.includes("-")?!1:!!(BSe.indexOf(e)>-1||/[A-Z]/.test(e))}const V2={};function USe(e){Object.assign(V2,e)}const _v=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hd=new Set(_v);function oK(e,{layout:t,layoutId:n}){return Hd.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!V2[e]||e==="opacity")}const xi=e=>!!(e&&e.getVelocity),VSe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WSe=_v.length;function HSe(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let o="";for(let s=0;s<WSe;s++){const a=_v[s];if(e[a]!==void 0){const l=VSe[a]||a;o+=`${l}(${e[a]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(e,r?"":o):n&&r&&(o="none"),o}const sK=e=>t=>typeof t=="string"&&t.startsWith(e),aK=sK("--"),b3=sK("var(--"),qSe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,GSe=(e,t)=>t&&typeof e=="number"?t.transform(e):e,fc=(e,t,n)=>Math.min(Math.max(n,e),t),qd={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Py={...qd,transform:e=>fc(0,1,e)},ux={...qd,default:1},My=e=>Math.round(e*1e5)/1e5,DC=/(-)?([\d]*\.?[\d])+/g,lK=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,YSe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function $v(e){return typeof e=="string"}const Av=e=>({test:t=>$v(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),fu=Av("deg"),xa=Av("%"),Te=Av("px"),XSe=Av("vh"),KSe=Av("vw"),tz={...xa,parse:e=>xa.parse(e)/100,transform:e=>xa.transform(e*100)},nz={...qd,transform:Math.round},uK={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,size:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,rotate:fu,rotateX:fu,rotateY:fu,rotateZ:fu,scale:ux,scaleX:ux,scaleY:ux,scaleZ:ux,skew:fu,skewX:fu,skewY:fu,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:Py,originX:tz,originY:tz,originZ:Te,zIndex:nz,fillOpacity:Py,strokeOpacity:Py,numOctaves:nz};function cR(e,t,n,r){const{style:i,vars:o,transform:s,transformOrigin:a}=e;let l=!1,u=!1,c=!0;for(const f in t){const d=t[f];if(aK(f)){o[f]=d;continue}const h=uK[f],p=GSe(d,h);if(Hd.has(f)){if(l=!0,s[f]=p,!c)continue;d!==(h.default||0)&&(c=!1)}else f.startsWith("origin")?(u=!0,a[f]=p):i[f]=p}if(t.transform||(l||r?i.transform=HSe(e.transform,n,c,r):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:d="50%",originZ:h=0}=a;i.transformOrigin=`${f} ${d} ${h}`}}const fR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cK(e,t,n){for(const r in t)!xi(t[r])&&!oK(r,n)&&(e[r]=t[r])}function QSe({transformTemplate:e},t,n){return M.useMemo(()=>{const r=fR();return cR(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function JSe(e,t,n){const r=e.style||{},i={};return cK(i,r,e),Object.assign(i,QSe(e,t,n)),e.transformValues?e.transformValues(i):i}function ZSe(e,t,n){const r={},i=JSe(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const eke=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function W2(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||eke.has(e)}let fK=e=>!W2(e);function tke(e){e&&(fK=t=>t.startsWith("on")?!W2(t):e(t))}try{tke(require("@emotion/is-prop-valid").default)}catch{}function nke(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(fK(i)||n===!0&&W2(i)||!t&&!W2(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function rz(e,t,n){return typeof e=="string"?e:Te.transform(t+n*e)}function rke(e,t,n){const r=rz(t,e.x,e.width),i=rz(n,e.y,e.height);return`${r} ${i}`}const ike={offset:"stroke-dashoffset",array:"stroke-dasharray"},oke={offset:"strokeDashoffset",array:"strokeDasharray"};function ske(e,t,n=1,r=0,i=!0){e.pathLength=1;const o=i?ike:oke;e[o.offset]=Te.transform(-r);const s=Te.transform(t),a=Te.transform(n);e[o.array]=`${s} ${a}`}function dR(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:o,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},c,f,d){if(cR(e,u,c,d),f){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:g}=e;h.transform&&(g&&(p.transform=h.transform),delete h.transform),g&&(i!==void 0||o!==void 0||p.transform)&&(p.transformOrigin=rke(g,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&ske(h,s,a,l,!1)}const dK=()=>({...fR(),attrs:{}}),hR=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ake(e,t,n,r){const i=M.useMemo(()=>{const o=dK();return dR(o,t,{enableHardwareAcceleration:!1},hR(r),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};cK(o,e.style,e),i.style={...o,...i.style}}return i}function lke(e=!1){return(n,r,i,{latestValues:o},s)=>{const l=(uR(n)?ake:ZSe)(r,o,s,n),c={...nke(r,typeof n=="string",e),...l,ref:i},{children:f}=r,d=M.useMemo(()=>xi(f)?f.get():f,[f]);return M.createElement(n,{...c,children:d})}}function hK(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const o in n)e.style.setProperty(o,n[o])}const pK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gK(e,t,n,r){hK(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(pK.has(i)?i:oR(i),t.attrs[i])}function pR(e,t){const{style:n}=e,r={};for(const i in n)(xi(n[i])||t.style&&xi(t.style[i])||oK(i,e))&&(r[i]=n[i]);return r}function mK(e,t){const n=pR(e,t);for(const r in e)if(xi(e[r])||xi(t[r])){const i=_v.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function gR(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function mR(e){const t=M.useRef(null);return t.current===null&&(t.current=e()),t.current}const H2=e=>Array.isArray(e),uke=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),cke=e=>H2(e)?e[e.length-1]||0:e;function Dw(e){const t=xi(e)?e.get():e;return uke(t)?t.toValue():t}function fke({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,o){const s={latestValues:dke(r,i,o,e),renderState:t()};return n&&(s.mount=a=>n(r,a,s)),s}const yK=e=>(t,n)=>{const r=M.useContext(MC),i=M.useContext(Ev),o=()=>fke(e,t,r,i);return n?o():mR(o)};function dke(e,t,n,r){const i={},o=r(e,{});for(const d in o)i[d]=Dw(o[d]);let{initial:s,animate:a}=e;const l=OC(e),u=rK(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),a===void 0&&(a=t.animate));let c=n?n.initial===!1:!1;c=c||s===!1;const f=c?a:s;return f&&typeof f!="boolean"&&!RC(f)&&(Array.isArray(f)?f:[f]).forEach(h=>{const p=gR(e,h);if(!p)return;const{transitionEnd:g,transition:m,...y}=p;for(const v in y){let b=y[v];if(Array.isArray(b)){const x=c?b.length-1:0;b=b[x]}b!==null&&(i[v]=b)}for(const v in g)i[v]=g[v]}),i}const on=e=>e;class iz{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function hke(e){let t=new iz,n=new iz,r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:(l,u=!1,c=!1)=>{const f=c&&i,d=f?t:n;return u&&s.add(l),d.add(l)&&f&&i&&(r=t.order.length),l},cancel:l=>{n.remove(l),s.delete(l)},process:l=>{if(i){o=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const c=t.order[u];c(l),s.has(c)&&(a.schedule(c),e())}i=!1,o&&(o=!1,a.process(l))}};return a}const cx=["prepare","read","update","preRender","render","postRender"],pke=40;function gke(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=cx.reduce((f,d)=>(f[d]=hke(()=>n=!0),f),{}),s=f=>o[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,pke),1),i.timestamp=f,i.isProcessing=!0,cx.forEach(s),i.isProcessing=!1,n&&t&&(r=!1,e(a))},l=()=>{n=!0,r=!0,i.isProcessing||e(a)};return{schedule:cx.reduce((f,d)=>{const h=o[d];return f[d]=(p,g=!1,m=!1)=>(n||l(),h.schedule(p,g,m)),f},{}),cancel:f=>cx.forEach(d=>o[d].cancel(f)),state:i,steps:o}}const{schedule:_t,cancel:zl,state:gr,steps:lA}=gke(typeof requestAnimationFrame<"u"?requestAnimationFrame:on,!0),mke={useVisualState:yK({scrapeMotionValuesFromProps:mK,createRenderState:dK,onMount:(e,t,{renderState:n,latestValues:r})=>{_t.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),_t.render(()=>{dR(n,r,{enableHardwareAcceleration:!1},hR(t.tagName),e.transformTemplate),gK(t,n)})}})},yke={useVisualState:yK({scrapeMotionValuesFromProps:pR,createRenderState:fR})};function vke(e,{forwardMotionProps:t=!1},n,r){return{...uR(e)?mke:yke,preloadedFeatures:n,useRender:lke(t),createVisualElement:r,Component:e}}function gl(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const vK=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function NC(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const bke=e=>t=>vK(t)&&e(t,NC(t));function kl(e,t,n,r){return gl(e,t,bke(n),r)}const xke=(e,t)=>n=>t(e(n)),nc=(...e)=>e.reduce(xke);function bK(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const oz=bK("dragHorizontal"),sz=bK("dragVertical");function xK(e){let t=!1;if(e==="y")t=sz();else if(e==="x")t=oz();else{const n=oz(),r=sz();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function wK(){const e=xK(!0);return e?(e(),!1):!0}let Dc=class{constructor(t){this.isMounted=!1,this.node=t}update(){}};function az(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(o,s)=>{if(o.pointerType==="touch"||wK())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&_t.update(()=>a[r](o,s))};return kl(e.current,n,i,{passive:!e.getProps()[r]})}class wke extends Dc{mount(){this.unmount=nc(az(this.node,!0),az(this.node,!1))}unmount(){}}class Ske extends Dc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nc(gl(this.node.current,"focus",()=>this.onFocus()),gl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const SK=(e,t)=>t?e===t?!0:SK(e,t.parentElement):!1;function uA(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,NC(n))}class kke extends Dc{constructor(){super(...arguments),this.removeStartListeners=on,this.removeEndListeners=on,this.removeAccessibleListeners=on,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=kl(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:f}=this.node.getProps();_t.update(()=>{!f&&!SK(this.node.current,a.target)?c&&c(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),s=kl(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=nc(o,s),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const s=a=>{a.key!=="Enter"||!this.checkPressEnd()||uA("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&_t.update(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=gl(this.node.current,"keyup",s),uA("down",(a,l)=>{this.startPress(a,l)})},n=gl(this.node.current,"keydown",t),r=()=>{this.isPressing&&uA("cancel",(o,s)=>this.cancelPress(o,s))},i=gl(this.node.current,"blur",r);this.removeAccessibleListeners=nc(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&_t.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!wK()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&_t.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=kl(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=gl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=nc(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const x3=new WeakMap,cA=new WeakMap,Cke=e=>{const t=x3.get(e.target);t&&t(e)},Eke=e=>{e.forEach(Cke)};function _ke({root:e,...t}){const n=e||document;cA.has(n)||cA.set(n,{});const r=cA.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(Eke,{root:e,...t})),r[i]}function $ke(e,t,n){const r=_ke(t);return x3.set(e,n),r.observe(e),()=>{x3.delete(e),r.unobserve(e)}}const Ake={some:0,all:1};class Tke extends Dc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Ake[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),d=u?c:f;d&&d(l)};return $ke(this.node.current,s,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Pke(t,n))&&this.startObserver()}unmount(){}}function Pke({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Mke={inView:{Feature:Tke},tap:{Feature:kke},focus:{Feature:Ske},hover:{Feature:wke}};function kK(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Fke(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function Rke(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function IC(e,t,n){const r=e.getProps();return gR(r,t,n!==void 0?n:r.custom,Fke(e),Rke(e))}let q2=on;const Jf=e=>e*1e3,Cl=e=>e/1e3,Oke={current:!1},CK=e=>Array.isArray(e)&&typeof e[0]=="number";function EK(e){return!!(!e||typeof e=="string"&&_K[e]||CK(e)||Array.isArray(e)&&e.every(EK))}const U0=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,_K={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:U0([0,.65,.55,1]),circOut:U0([.55,0,1,.45]),backIn:U0([.31,.01,.66,-.59]),backOut:U0([.33,1.53,.69,.99])};function $K(e){if(e)return CK(e)?U0(e):Array.isArray(e)?e.map($K):_K[e]}function Dke(e,t,n,{delay:r=0,duration:i,repeat:o=0,repeatType:s="loop",ease:a,times:l}={}){const u={[t]:n};l&&(u.offset=l);const c=$K(a);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:o+1,direction:s==="reverse"?"alternate":"normal"})}function Nke(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const AK=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Ike=1e-7,Lke=12;function zke(e,t,n,r,i){let o,s,a=0;do s=t+(n-t)/2,o=AK(s,r,i)-e,o>0?n=s:t=s;while(Math.abs(o)>Ike&&++a<Lke);return s}function Tv(e,t,n,r){if(e===t&&n===r)return on;const i=o=>zke(o,0,1,e,n);return o=>o===0||o===1?o:AK(i(o),t,r)}const jke=Tv(.42,0,1,1),Bke=Tv(0,0,.58,1),TK=Tv(.42,0,.58,1),Uke=e=>Array.isArray(e)&&typeof e[0]!="number",PK=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,MK=e=>t=>1-e(1-t),yR=e=>1-Math.sin(Math.acos(e)),FK=MK(yR),Vke=PK(yR),RK=Tv(.33,1.53,.69,.99),vR=MK(RK),Wke=PK(vR),Hke=e=>(e*=2)<1?.5*vR(e):.5*(2-Math.pow(2,-10*(e-1))),lz={linear:on,easeIn:jke,easeInOut:TK,easeOut:Bke,circIn:yR,circInOut:Vke,circOut:FK,backIn:vR,backInOut:Wke,backOut:RK,anticipate:Hke},uz=e=>{if(Array.isArray(e)){q2(e.length===4);const[t,n,r,i]=e;return Tv(t,n,r,i)}else if(typeof e=="string")return q2(lz[e]!==void 0),lz[e];return e},bR=(e,t)=>n=>!!($v(n)&&YSe.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),OK=(e,t,n)=>r=>{if(!$v(r))return r;const[i,o,s,a]=r.match(DC);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(s),alpha:a!==void 0?parseFloat(a):1}},qke=e=>fc(0,255,e),fA={...qd,transform:e=>Math.round(qke(e))},Df={test:bR("rgb","red"),parse:OK("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+fA.transform(e)+", "+fA.transform(t)+", "+fA.transform(n)+", "+My(Py.transform(r))+")"};function Gke(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const w3={test:bR("#"),parse:Gke,transform:Df.transform},up={test:bR("hsl","hue"),parse:OK("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+xa.transform(My(t))+", "+xa.transform(My(n))+", "+My(Py.transform(r))+")"},Dr={test:e=>Df.test(e)||w3.test(e)||up.test(e),parse:e=>Df.test(e)?Df.parse(e):up.test(e)?up.parse(e):w3.parse(e),transform:e=>$v(e)?e:e.hasOwnProperty("red")?Df.transform(e):up.transform(e)},Wt=(e,t,n)=>-n*e+n*t+e;function dA(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Yke({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,o=0,s=0;if(!t)i=o=s=n;else{const a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;i=dA(l,a,e+1/3),o=dA(l,a,e),s=dA(l,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(s*255),alpha:r}}const hA=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Xke=[w3,Df,up],Kke=e=>Xke.find(t=>t.test(e));function cz(e){const t=Kke(e);let n=t.parse(e);return t===up&&(n=Yke(n)),n}const DK=(e,t)=>{const n=cz(e),r=cz(t),i={...n};return o=>(i.red=hA(n.red,r.red,o),i.green=hA(n.green,r.green,o),i.blue=hA(n.blue,r.blue,o),i.alpha=Wt(n.alpha,r.alpha,o),Df.transform(i))};function Qke(e){var t,n;return isNaN(e)&&$v(e)&&(((t=e.match(DC))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(lK))===null||n===void 0?void 0:n.length)||0)>0}const NK={regex:qSe,countKey:"Vars",token:"${v}",parse:on},IK={regex:lK,countKey:"Colors",token:"${c}",parse:Dr.parse},LK={regex:DC,countKey:"Numbers",token:"${n}",parse:qd.parse};function pA(e,{regex:t,countKey:n,token:r,parse:i}){const o=e.tokenised.match(t);o&&(e["num"+n]=o.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...o.map(i)))}function G2(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&pA(n,NK),pA(n,IK),pA(n,LK),n}function zK(e){return G2(e).values}function jK(e){const{values:t,numColors:n,numVars:r,tokenised:i}=G2(e),o=t.length;return s=>{let a=i;for(let l=0;l<o;l++)l<r?a=a.replace(NK.token,s[l]):l<r+n?a=a.replace(IK.token,Dr.transform(s[l])):a=a.replace(LK.token,My(s[l]));return a}}const Jke=e=>typeof e=="number"?0:e;function Zke(e){const t=zK(e);return jK(e)(t.map(Jke))}const dc={test:Qke,parse:zK,createTransformer:jK,getAnimatableNone:Zke},BK=(e,t)=>n=>`${n>0?t:e}`;function UK(e,t){return typeof e=="number"?n=>Wt(e,t,n):Dr.test(e)?DK(e,t):e.startsWith("var(")?BK(e,t):WK(e,t)}const VK=(e,t)=>{const n=[...e],r=n.length,i=e.map((o,s)=>UK(o,t[s]));return o=>{for(let s=0;s<r;s++)n[s]=i[s](o);return n}},eCe=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=UK(e[i],t[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},WK=(e,t)=>{const n=dc.createTransformer(t),r=G2(e),i=G2(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?nc(VK(r.values,i.values),n):BK(e,t)},_1=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},fz=(e,t)=>n=>Wt(e,t,n);function tCe(e){return typeof e=="number"?fz:typeof e=="string"?Dr.test(e)?DK:WK:Array.isArray(e)?VK:typeof e=="object"?eCe:fz}function nCe(e,t,n){const r=[],i=n||tCe(e[0]),o=e.length-1;for(let s=0;s<o;s++){let a=i(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||on:t;a=nc(l,a)}r.push(a)}return r}function HK(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const o=e.length;if(q2(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=nCe(t,r,i),a=s.length,l=u=>{let c=0;if(a>1)for(;c<e.length-2&&!(u<e[c+1]);c++);const f=_1(e[c],e[c+1],u);return s[c](f)};return n?u=>l(fc(e[0],e[o-1],u)):l}function rCe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=_1(0,t,r);e.push(Wt(n,1,i))}}function iCe(e){const t=[0];return rCe(t,e.length-1),t}function oCe(e,t){return e.map(n=>n*t)}function sCe(e,t){return e.map(()=>t||TK).splice(0,e.length-1)}function Y2({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=Uke(r)?r.map(uz):uz(r),o={done:!1,value:t[0]},s=oCe(n&&n.length===t.length?n:iCe(t),e),a=HK(s,t,{ease:Array.isArray(i)?i:sCe(t,i)});return{calculatedDuration:e,next:l=>(o.value=a(l),o.done=l>=e,o)}}function qK(e,t){return t?e*(1e3/t):0}const aCe=5;function GK(e,t,n){const r=Math.max(t-aCe,0);return qK(n-e(r),t-r)}const gA=.001,lCe=.01,uCe=10,cCe=.05,fCe=1;function dCe({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,o,s=1-t;s=fc(cCe,fCe,s),e=fc(lCe,uCe,Cl(e)),s<1?(i=u=>{const c=u*s,f=c*e,d=c-n,h=S3(u,s),p=Math.exp(-f);return gA-d/h*p},o=u=>{const f=u*s*e,d=f*n+n,h=Math.pow(s,2)*Math.pow(u,2)*e,p=Math.exp(-f),g=S3(Math.pow(u,2),s);return(-i(u)+gA>0?-1:1)*((d-h)*p)/g}):(i=u=>{const c=Math.exp(-u*e),f=(u-n)*e+1;return-gA+c*f},o=u=>{const c=Math.exp(-u*e),f=(n-u)*(e*e);return c*f});const a=5/e,l=pCe(i,o,a);if(e=Jf(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const hCe=12;function pCe(e,t,n){let r=n;for(let i=1;i<hCe;i++)r=r-e(r)/t(r);return r}function S3(e,t){return e*Math.sqrt(1-t*t)}const gCe=["duration","bounce"],mCe=["stiffness","damping","mass"];function dz(e,t){return t.some(n=>e[n]!==void 0)}function yCe(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!dz(e,mCe)&&dz(e,gCe)){const n=dCe(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function YK({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],o=e[e.length-1],s={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:f,isResolvedFromDuration:d}=yCe({...r,velocity:-Cl(r.velocity||0)}),h=f||0,p=l/(2*Math.sqrt(a*u)),g=o-i,m=Cl(Math.sqrt(a/u)),y=Math.abs(g)<5;n||(n=y?.01:2),t||(t=y?.005:.5);let v;if(p<1){const b=S3(m,p);v=x=>{const w=Math.exp(-p*m*x);return o-w*((h+p*m*g)/b*Math.sin(b*x)+g*Math.cos(b*x))}}else if(p===1)v=b=>o-Math.exp(-m*b)*(g+(h+m*g)*b);else{const b=m*Math.sqrt(p*p-1);v=x=>{const w=Math.exp(-p*m*x),k=Math.min(b*x,300);return o-w*((h+p*m*g)*Math.sinh(k)+b*g*Math.cosh(k))/b}}return{calculatedDuration:d&&c||null,next:b=>{const x=v(b);if(d)s.done=b>=c;else{let w=h;b!==0&&(p<1?w=GK(v,b,x):w=0);const k=Math.abs(w)<=n,S=Math.abs(o-x)<=t;s.done=k&&S}return s.value=s.done?o:x,s}}}function hz({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:s,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=e[0],d={done:!1,value:f},h=C=>a!==void 0&&C<a||l!==void 0&&C>l,p=C=>a===void 0?l:l===void 0||Math.abs(a-C)<Math.abs(l-C)?a:l;let g=n*t;const m=f+g,y=s===void 0?m:s(m);y!==m&&(g=y-f);const v=C=>-g*Math.exp(-C/r),b=C=>y+v(C),x=C=>{const E=v(C),A=b(C);d.done=Math.abs(E)<=u,d.value=d.done?y:A};let w,k;const S=C=>{h(d.value)&&(w=C,k=YK({keyframes:[d.value,p(d.value)],velocity:GK(b,C,d.value),damping:i,stiffness:o,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:C=>{let E=!1;return!k&&w===void 0&&(E=!0,x(C),S(C)),w!==void 0&&C>w?k.next(C-w):(!E&&x(C),d)}}}const vCe=e=>{const t=({timestamp:n})=>e(n);return{start:()=>_t.update(t,!0),stop:()=>zl(t),now:()=>gr.isProcessing?gr.timestamp:performance.now()}},pz=2e4;function gz(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<pz;)t+=n,r=e.next(t);return t>=pz?1/0:t}const bCe={decay:hz,inertia:hz,tween:Y2,keyframes:Y2,spring:YK};function X2({autoplay:e=!0,delay:t=0,driver:n=vCe,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:s=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:c,onUpdate:f,...d}){let h=1,p=!1,g,m;const y=()=>{m=new Promise(V=>{g=V})};y();let v;const b=bCe[i]||Y2;let x;b!==Y2&&typeof r[0]!="number"&&(x=HK([0,100],r,{clamp:!1}),r=[0,100]);const w=b({...d,keyframes:r});let k;a==="mirror"&&(k=b({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let S="idle",C=null,E=null,A=null;w.calculatedDuration===null&&o&&(w.calculatedDuration=gz(w));const{calculatedDuration:T}=w;let I=1/0,F=1/0;T!==null&&(I=T+s,F=I*(o+1)-s);let R=0;const _=V=>{if(E===null)return;h>0&&(E=Math.min(E,V)),h<0&&(E=Math.min(V-F/h,E)),C!==null?R=C:R=Math.round(V-E)*h;const oe=R-t*(h>=0?1:-1),Q=h>=0?oe<0:oe>F;R=Math.max(oe,0),S==="finished"&&C===null&&(R=F);let ye=R,Oe=w;if(o){const ce=Math.min(R,F)/I;let $e=Math.floor(ce),Ae=ce%1;!Ae&&ce>=1&&(Ae=1),Ae===1&&$e--,$e=Math.min($e,o+1),!!($e%2)&&(a==="reverse"?(Ae=1-Ae,s&&(Ae-=s/I)):a==="mirror"&&(Oe=k)),ye=fc(0,1,Ae)*I}const ut=Q?{done:!1,value:r[0]}:Oe.next(ye);x&&(ut.value=x(ut.value));let{done:$n}=ut;!Q&&T!==null&&($n=h>=0?R>=F:R<=0);const sr=C===null&&(S==="finished"||S==="running"&&$n);return f&&f(ut.value),sr&&D(),ut},P=()=>{v&&v.stop(),v=void 0},N=()=>{S="idle",P(),g(),y(),E=A=null},D=()=>{S="finished",c&&c(),P(),g()},L=()=>{if(p)return;v||(v=n(_));const V=v.now();l&&l(),C!==null?E=V-C:(!E||S==="finished")&&(E=V),S==="finished"&&y(),A=E,C=null,S="running",v.start()};e&&L();const U={then(V,oe){return m.then(V,oe)},get time(){return Cl(R)},set time(V){V=Jf(V),R=V,C!==null||!v||h===0?C=V:E=v.now()-V/h},get duration(){const V=w.calculatedDuration===null?gz(w):w.calculatedDuration;return Cl(V)},get speed(){return h},set speed(V){V===h||!v||(h=V,U.time=Cl(R))},get state(){return S},play:L,pause:()=>{S="paused",C=R},stop:()=>{p=!0,S!=="idle"&&(S="idle",u&&u(),N())},cancel:()=>{A!==null&&_(A),N()},complete:()=>{S="finished"},sample:V=>(E=0,_(V))};return U}function xCe(e){let t;return()=>(t===void 0&&(t=e()),t)}const wCe=xCe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),SCe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),fx=10,kCe=2e4,CCe=(e,t)=>t.type==="spring"||e==="backgroundColor"||!EK(t.ease);function ECe(e,t,{onUpdate:n,onComplete:r,...i}){if(!(wCe()&&SCe.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let s=!1,a,l,u=!1;const c=()=>{l=new Promise(b=>{a=b})};c();let{keyframes:f,duration:d=300,ease:h,times:p}=i;if(CCe(t,i)){const b=X2({...i,repeat:0,delay:0});let x={done:!1,value:f[0]};const w=[];let k=0;for(;!x.done&&k<kCe;)x=b.sample(k),w.push(x.value),k+=fx;p=void 0,f=w,d=k-fx,h="linear"}const g=Dke(e.owner.current,t,f,{...i,duration:d,ease:h,times:p}),m=()=>{u=!1,g.cancel()},y=()=>{u=!0,_t.update(m),a(),c()};return g.onfinish=()=>{u||(e.set(Nke(f,i)),r&&r(),y())},{then(b,x){return l.then(b,x)},attachTimeline(b){return g.timeline=b,g.onfinish=null,on},get time(){return Cl(g.currentTime||0)},set time(b){g.currentTime=Jf(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return Cl(d)},play:()=>{s||(g.play(),zl(m))},pause:()=>g.pause(),stop:()=>{if(s=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const x=X2({...i,autoplay:!1});e.setWithVelocity(x.sample(b-fx).value,x.sample(b).value,fx)}y()},complete:()=>{u||g.finish()},cancel:y}}function _Ce({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:on,pause:on,stop:on,then:o=>(o(),Promise.resolve()),cancel:on,complete:on});return t?X2({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const $Ce={type:"spring",stiffness:500,damping:25,restSpeed:10},ACe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),TCe={type:"keyframes",duration:.8},PCe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},MCe=(e,{keyframes:t})=>t.length>2?TCe:Hd.has(e)?e.startsWith("scale")?ACe(t[1]):$Ce:PCe,k3=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(dc.test(t)||t==="0")&&!t.startsWith("url(")),FCe=new Set(["brightness","contrast","saturate","opacity"]);function RCe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(DC)||[];if(!r)return e;const i=n.replace(r,"");let o=FCe.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const OCe=/([a-z-]*)\(.*?\)/g,C3={...dc,getAnimatableNone:e=>{const t=e.match(OCe);return t?t.map(RCe).join(" "):e}},DCe={...uK,color:Dr,backgroundColor:Dr,outlineColor:Dr,fill:Dr,stroke:Dr,borderColor:Dr,borderTopColor:Dr,borderRightColor:Dr,borderBottomColor:Dr,borderLeftColor:Dr,filter:C3,WebkitFilter:C3},xR=e=>DCe[e];function XK(e,t){let n=xR(e);return n!==C3&&(n=dc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const KK=e=>/^0[^.\s]+$/.test(e);function NCe(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||KK(e)}function ICe(e,t,n,r){const i=k3(t,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const s=r.from!==void 0?r.from:e.get();let a;const l=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?s:o[u-1]),NCe(o[u])&&l.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(a=o[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const c=l[u];o[c]=XK(t,a)}return o}function LCe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:s,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}function wR(e,t){return e[t]||e.default||e}const zCe={skipAnimations:!1},SR=(e,t,n,r={})=>i=>{const o=wR(r,e)||{},s=o.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Jf(s);const l=ICe(t,e,n,o),u=l[0],c=l[l.length-1],f=k3(e,u),d=k3(e,c);let h={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:p=>{t.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(LCe(o)||(h={...h,...MCe(e,h)}),h.duration&&(h.duration=Jf(h.duration)),h.repeatDelay&&(h.repeatDelay=Jf(h.repeatDelay)),!f||!d||Oke.current||o.type===!1||zCe.skipAnimations)return _Ce(h);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=ECe(t,e,h);if(p)return p}return X2(h)};function K2(e){return!!(xi(e)&&e.add)}const QK=e=>/^\-?\d*\.?\d+$/.test(e);function kR(e,t){e.indexOf(t)===-1&&e.push(t)}function CR(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ER{constructor(){this.subscriptions=[]}add(t){return kR(this.subscriptions,t),()=>CR(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let o=0;o<i;o++){const s=this.subscriptions[o];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const jCe=e=>!isNaN(parseFloat(e));class BCe{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:s}=gr;this.lastUpdated!==s&&(this.timeDelta=o,this.lastUpdated=s,_t.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>_t.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=jCe(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ER);const r=this.events[t].add(n);return t==="change"?()=>{r(),_t.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?qK(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fg(e,t){return new BCe(e,t)}const JK=e=>t=>t.test(e),UCe={test:e=>e==="auto",parse:e=>e},ZK=[qd,Te,xa,fu,KSe,XSe,UCe],Jm=e=>ZK.find(JK(e)),VCe=[...ZK,Dr,dc],WCe=e=>VCe.find(JK(e));function HCe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,fg(n))}function qCe(e,t){const n=IC(e,t);let{transitionEnd:r={},transition:i={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const s in o){const a=cke(o[s]);HCe(e,s,a)}}function GCe(e,t,n){var r,i;const o=Object.keys(t).filter(a=>!e.hasValue(a)),s=o.length;if(s)for(let a=0;a<s;a++){const l=o[a],u=t[l];let c=null;Array.isArray(u)&&(c=u[0]),c===null&&(c=(i=(r=n[l])!==null&&r!==void 0?r:e.readValue(l))!==null&&i!==void 0?i:t[l]),c!=null&&(typeof c=="string"&&(QK(c)||KK(c))?c=parseFloat(c):!WCe(c)&&dc.test(u)&&(c=XK(l,u)),e.addValue(l,fg(c,{owner:e})),n[l]===void 0&&(n[l]=c),c!==null&&e.setBaseTarget(l,c))}}function YCe(e,t){return t?(t[e]||t.default||t).from:void 0}function XCe(e,t,n){const r={};for(const i in e){const o=YCe(i,t);if(o!==void 0)r[i]=o;else{const s=n.getValue(i);s&&(r[i]=s.get())}}return r}function KCe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function QCe(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function eQ(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:s,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(o=r);const u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const f in a){const d=e.getValue(f),h=a[f];if(!d||h===void 0||c&&KCe(c,f))continue;const p={delay:n,elapsed:0,...wR(o||{},f)};if(window.HandoffAppearAnimations){const y=e.getProps()[nK];if(y){const v=window.HandoffAppearAnimations(y,f,d,_t);v!==null&&(p.elapsed=v,p.isHandoff=!0)}}let g=!p.isHandoff&&!QCe(d,h);if(p.type==="spring"&&(d.getVelocity()||p.velocity)&&(g=!1),d.animation&&(g=!1),g)continue;d.start(SR(f,d,h,e.shouldReduceMotion&&Hd.has(f)?{type:!1}:p));const m=d.animation;K2(l)&&(l.add(f),m.then(()=>l.remove(f))),u.push(m)}return s&&Promise.all(u).then(()=>{s&&qCe(e,s)}),u}function E3(e,t,n={}){const r=IC(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(eQ(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:f}=i;return JCe(e,t,u+l,c,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[o,s]:[s,o];return l().then(()=>u())}else return Promise.all([o(),s(n.delay)])}function JCe(e,t,n=0,r=0,i=1,o){const s=[],a=(e.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(ZCe).forEach((u,c)=>{u.notify("AnimationStart",t),s.push(E3(u,t,{...o,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function ZCe(e,t){return e.sortNodePosition(t)}function eEe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(o=>E3(e,o,n));r=Promise.all(i)}else if(typeof t=="string")r=E3(e,t,n);else{const i=typeof t=="function"?IC(e,t,n.custom):t;r=Promise.all(eQ(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const tEe=[...sR].reverse(),nEe=sR.length;function rEe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>eEe(e,n,r)))}function iEe(e){let t=rEe(e);const n=sEe();let r=!0;const i=(l,u)=>{const c=IC(e,u);if(c){const{transition:f,transitionEnd:d,...h}=c;l={...l,...h,...d}}return l};function o(l){t=l(e)}function s(l,u){const c=e.getProps(),f=e.getVariantContext(!0)||{},d=[],h=new Set;let p={},g=1/0;for(let y=0;y<nEe;y++){const v=tEe[y],b=n[v],x=c[v]!==void 0?c[v]:f[v],w=C1(x),k=v===u?b.isActive:null;k===!1&&(g=y);let S=x===f[v]&&x!==c[v]&&w;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...p},!b.isActive&&k===null||!x&&!b.prevProp||RC(x)||typeof x=="boolean")continue;let E=oEe(b.prevProp,x)||v===u&&b.isActive&&!S&&w||y>g&&w,A=!1;const T=Array.isArray(x)?x:[x];let I=T.reduce(i,{});k===!1&&(I={});const{prevResolvedValues:F={}}=b,R={...F,...I},_=P=>{E=!0,h.has(P)&&(A=!0,h.delete(P)),b.needsAnimating[P]=!0};for(const P in R){const N=I[P],D=F[P];if(p.hasOwnProperty(P))continue;let L=!1;H2(N)&&H2(D)?L=!kK(N,D):L=N!==D,L?N!==void 0?_(P):h.add(P):N!==void 0&&h.has(P)?_(P):b.protectedKeys[P]=!0}b.prevProp=x,b.prevResolvedValues=I,b.isActive&&(p={...p,...I}),r&&e.blockInitialAnimation&&(E=!1),E&&(!S||A)&&d.push(...T.map(P=>({animation:P,options:{type:v,...l}})))}if(h.size){const y={};h.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(y[v]=b)}),d.push({animation:y})}let m=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(d):Promise.resolve()}function a(l,u,c){var f;if(n[l].isActive===u)return Promise.resolve();(f=e.variantChildren)===null||f===void 0||f.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const d=s(c,l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:s,setActive:a,setAnimateFunction:o,getState:()=>n}}function oEe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!kK(t,e):!1}function ef(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sEe(){return{animate:ef(!0),whileInView:ef(),whileHover:ef(),whileTap:ef(),whileDrag:ef(),whileFocus:ef(),exit:ef()}}class aEe extends Dc{constructor(t){super(t),t.animationState||(t.animationState=iEe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),RC(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let lEe=0;class uEe extends Dc{constructor(){super(...arguments),this.id=lEe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const cEe={animation:{Feature:aEe},exit:{Feature:uEe}},mz=(e,t)=>Math.abs(e-t);function fEe(e,t){const n=mz(e.x,t.x),r=mz(e.y,t.y);return Math.sqrt(n**2+r**2)}class tQ{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=yA(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=fEe(f.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:p}=f,{timestamp:g}=gr;this.history.push({...p,timestamp:g});const{onStart:m,onMove:y}=this.handlers;d||(m&&m(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=mA(d,this.transformPagePoint),_t.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=yA(f.type==="pointercancel"?this.lastMoveEventInfo:mA(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,m),p&&p(f,m)},!vK(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=NC(t),a=mA(s,this.transformPagePoint),{point:l}=a,{timestamp:u}=gr;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(t,yA(a,this.history)),this.removeListeners=nc(kl(this.contextWindow,"pointermove",this.handlePointerMove),kl(this.contextWindow,"pointerup",this.handlePointerUp),kl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zl(this.updatePoint)}}function mA(e,t){return t?{point:t(e.point)}:e}function yz(e,t){return{x:e.x-t.x,y:e.y-t.y}}function yA({point:e},t){return{point:e,delta:yz(e,nQ(t)),offset:yz(e,dEe(t)),velocity:hEe(t,.1)}}function dEe(e){return e[0]}function nQ(e){return e[e.length-1]}function hEe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=nQ(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Jf(t)));)n--;if(!r)return{x:0,y:0};const o=Cl(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Qi(e){return e.max-e.min}function _3(e,t=0,n=.01){return Math.abs(e-t)<=n}function vz(e,t,n,r=.5){e.origin=r,e.originPoint=Wt(t.min,t.max,e.origin),e.scale=Qi(n)/Qi(t),(_3(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Wt(n.min,n.max,e.origin)-e.originPoint,(_3(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Fy(e,t,n,r){vz(e.x,t.x,n.x,r?r.originX:void 0),vz(e.y,t.y,n.y,r?r.originY:void 0)}function bz(e,t,n){e.min=n.min+t.min,e.max=e.min+Qi(t)}function pEe(e,t,n){bz(e.x,t.x,n.x),bz(e.y,t.y,n.y)}function xz(e,t,n){e.min=t.min-n.min,e.max=e.min+Qi(t)}function Ry(e,t,n){xz(e.x,t.x,n.x),xz(e.y,t.y,n.y)}function gEe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Wt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Wt(n,e,r.max):Math.min(e,n)),e}function wz(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function mEe(e,{top:t,left:n,bottom:r,right:i}){return{x:wz(e.x,n,i),y:wz(e.y,t,r)}}function Sz(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function yEe(e,t){return{x:Sz(e.x,t.x),y:Sz(e.y,t.y)}}function vEe(e,t){let n=.5;const r=Qi(e),i=Qi(t);return i>r?n=_1(t.min,t.max-r,e.min):r>i&&(n=_1(e.min,e.max-i,t.min)),fc(0,1,n)}function bEe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const $3=.35;function xEe(e=$3){return e===!1?e=0:e===!0&&(e=$3),{x:kz(e,"left","right"),y:kz(e,"top","bottom")}}function kz(e,t,n){return{min:Cz(e,t),max:Cz(e,n)}}function Cz(e,t){return typeof e=="number"?e:e[t]||0}const Ez=()=>({translate:0,scale:1,origin:0,originPoint:0}),cp=()=>({x:Ez(),y:Ez()}),_z=()=>({min:0,max:0}),dn=()=>({x:_z(),y:_z()});function po(e){return[e("x"),e("y")]}function rQ({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function wEe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function SEe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vA(e){return e===void 0||e===1}function A3({scale:e,scaleX:t,scaleY:n}){return!vA(e)||!vA(t)||!vA(n)}function gf(e){return A3(e)||iQ(e)||e.z||e.rotate||e.rotateX||e.rotateY}function iQ(e){return $z(e.x)||$z(e.y)}function $z(e){return e&&e!=="0%"}function Q2(e,t,n){const r=e-n,i=t*r;return n+i}function Az(e,t,n,r,i){return i!==void 0&&(e=Q2(e,i,r)),Q2(e,n,r)+t}function T3(e,t=0,n=1,r,i){e.min=Az(e.min,t,n,r,i),e.max=Az(e.max,t,n,r,i)}function oQ(e,{x:t,y:n}){T3(e.x,t.translate,t.scale,t.originPoint),T3(e.y,n.translate,n.scale,n.originPoint)}function kEe(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let o,s;for(let a=0;a<i;a++){o=n[a],s=o.projectionDelta;const l=o.instance;l&&l.style&&l.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&fp(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,oQ(e,s)),r&&gf(o.latestValues)&&fp(e,o.latestValues))}t.x=Tz(t.x),t.y=Tz(t.y)}function Tz(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function vu(e,t){e.min=e.min+t,e.max=e.max+t}function Pz(e,t,[n,r,i]){const o=t[i]!==void 0?t[i]:.5,s=Wt(e.min,e.max,o);T3(e,t[n],t[r],s,t.scale)}const CEe=["x","scaleX","originX"],EEe=["y","scaleY","originY"];function fp(e,t){Pz(e.x,t,CEe),Pz(e.y,t,EEe)}function sQ(e,t){return rQ(SEe(e.getBoundingClientRect(),t))}function _Ee(e,t,n){const r=sQ(e,n),{scroll:i}=t;return i&&(vu(r.x,i.offset.x),vu(r.y,i.offset.y)),r}const aQ=({current:e})=>e?e.ownerDocument.defaultView:null,$Ee=new WeakMap;class AEe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dn(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(NC(c,"page").point)},o=(c,f)=>{const{drag:d,dragPropagation:h,onDragStart:p}=this.getProps();if(d&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=xK(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),po(m=>{let y=this.getAxisMotionValue(m).get()||0;if(xa.test(y)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[m];b&&(y=Qi(b)*(parseFloat(y)/100))}}this.originPoint[m]=y}),p&&_t.update(()=>p(c,f),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},s=(c,f)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:p,onDrag:g}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:m}=f;if(h&&this.currentDirection===null){this.currentDirection=TEe(m),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,m),this.updateAxis("y",f.point,m),this.visualElement.render(),g&&g(c,f)},a=(c,f)=>this.stop(c,f),l=()=>po(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new tQ(t,{onSessionStart:i,onStart:o,onMove:s,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:aQ(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&_t.update(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!dx(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=gEe(s,this.constraints[t],this.elastic[t])),o.set(s)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;n&&lp(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=mEe(i.layoutBox,n):this.constraints=!1,this.elastic=xEe(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&po(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=bEe(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!lp(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=_Ee(r,i.root,this.visualElement.getTransformPagePoint());let s=yEe(i.layout.layoutBox,o);if(n){const a=n(wEe(s));this.hasMutatedConstraints=!!a,a&&(s=rQ(a))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=po(c=>{if(!dx(c,n,this.currentDirection))return;let f=l&&l[c]||{};s&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(SR(t,r,0,n))}stopAnimation(){po(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){po(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){po(n=>{const{drag:r}=this.getProps();if(!dx(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:a}=i.layout.layoutBox[n];o.set(t[n]-Wt(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lp(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};po(s=>{const a=this.getAxisMotionValue(s);if(a){const l=a.get();i[s]=vEe({min:l,max:l},this.constraints[s])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),po(s=>{if(!dx(s,t,null))return;const a=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];a.set(Wt(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;$Ee.set(this.visualElement,this);const t=this.visualElement.current,n=kl(t,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();lp(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const s=gl(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(po(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{s(),n(),o(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:s=$3,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:s,dragMomentum:a}}}function dx(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function TEe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class PEe extends Dc{constructor(t){super(t),this.removeGroupControls=on,this.removeListeners=on,this.controls=new AEe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||on}unmount(){this.removeGroupControls(),this.removeListeners()}}const Mz=e=>(t,n)=>{e&&_t.update(()=>e(t,n))};class MEe extends Dc{constructor(){super(...arguments),this.removePointerDownListener=on}onPointerDown(t){this.session=new tQ(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aQ(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Mz(t),onStart:Mz(n),onMove:r,onEnd:(o,s)=>{delete this.session,i&&_t.update(()=>i(o,s))}}}mount(){this.removePointerDownListener=kl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function FEe(){const e=M.useContext(Ev);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=M.useId();return M.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}function REe(){return OEe(M.useContext(Ev))}function OEe(e){return e===null?!0:e.isPresent}const Nw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Fz(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Zm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Te.test(e))e=parseFloat(e);else return e;const n=Fz(e,t.target.x),r=Fz(e,t.target.y);return`${n}% ${r}%`}},DEe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=dc.parse(e);if(i.length>5)return r;const o=dc.createTransformer(e),s=typeof i[0]!="number"?1:0,a=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=a,i[1+s]/=l;const u=Wt(a,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),o(i)}};class NEe extends Vi.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=t;USe(IEe),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Nw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,s=r.projection;return s&&(s.isPresent=o,i||t.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?s.promote():s.relegate()||_t.postRender(()=>{const a=s.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function lQ(e){const[t,n]=FEe(),r=M.useContext(lR);return Vi.createElement(NEe,{...e,layoutGroup:r,switchLayoutGroup:M.useContext(iK),isPresent:t,safeToRemove:n})}const IEe={borderRadius:{...Zm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zm,borderTopRightRadius:Zm,borderBottomLeftRadius:Zm,borderBottomRightRadius:Zm,boxShadow:DEe},uQ=["TopLeft","TopRight","BottomLeft","BottomRight"],LEe=uQ.length,Rz=e=>typeof e=="string"?parseFloat(e):e,Oz=e=>typeof e=="number"||Te.test(e);function zEe(e,t,n,r,i,o){i?(e.opacity=Wt(0,n.opacity!==void 0?n.opacity:1,jEe(r)),e.opacityExit=Wt(t.opacity!==void 0?t.opacity:1,0,BEe(r))):o&&(e.opacity=Wt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<LEe;s++){const a=`border${uQ[s]}Radius`;let l=Dz(t,a),u=Dz(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Oz(l)===Oz(u)?(e[a]=Math.max(Wt(Rz(l),Rz(u),r),0),(xa.test(u)||xa.test(l))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=Wt(t.rotate||0,n.rotate||0,r))}function Dz(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const jEe=cQ(0,.5,FK),BEe=cQ(.5,.95,on);function cQ(e,t,n){return r=>r<e?0:r>t?1:n(_1(e,t,r))}function Nz(e,t){e.min=t.min,e.max=t.max}function uo(e,t){Nz(e.x,t.x),Nz(e.y,t.y)}function Iz(e,t,n,r,i){return e-=t,e=Q2(e,1/n,r),i!==void 0&&(e=Q2(e,1/i,r)),e}function UEe(e,t=0,n=1,r=.5,i,o=e,s=e){if(xa.test(t)&&(t=parseFloat(t),t=Wt(s.min,s.max,t/100)-s.min),typeof t!="number")return;let a=Wt(o.min,o.max,r);e===o&&(a-=t),e.min=Iz(e.min,t,n,a,i),e.max=Iz(e.max,t,n,a,i)}function Lz(e,t,[n,r,i],o,s){UEe(e,t[n],t[r],t[i],t.scale,o,s)}const VEe=["x","scaleX","originX"],WEe=["y","scaleY","originY"];function zz(e,t,n,r){Lz(e.x,t,VEe,n?n.x:void 0,r?r.x:void 0),Lz(e.y,t,WEe,n?n.y:void 0,r?r.y:void 0)}function jz(e){return e.translate===0&&e.scale===1}function fQ(e){return jz(e.x)&&jz(e.y)}function HEe(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function dQ(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Bz(e){return Qi(e.x)/Qi(e.y)}class qEe{constructor(){this.members=[]}add(t){kR(this.members,t),t.scheduleRender()}remove(t){if(CR(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Uz(e,t,n){let r="";const i=e.x.translate/t.x,o=e.y.translate/t.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:l,rotateX:u,rotateY:c}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),c&&(r+=`rotateY(${c}deg) `)}const s=e.x.scale*t.x,a=e.y.scale*t.y;return(s!==1||a!==1)&&(r+=`scale(${s}, ${a})`),r||"none"}const GEe=(e,t)=>e.depth-t.depth;class YEe{constructor(){this.children=[],this.isDirty=!1}add(t){kR(this.children,t),this.isDirty=!0}remove(t){CR(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(GEe),this.isDirty=!1,this.children.forEach(t)}}function XEe(e,t){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=t&&(zl(r),e(o-t))};return _t.read(r,!0),()=>zl(r)}function KEe(e){window.MotionDebug&&window.MotionDebug.record(e)}function QEe(e){return e instanceof SVGElement&&e.tagName!=="svg"}function JEe(e,t,n){const r=xi(e)?e:fg(e);return r.start(SR("",r,t,n)),r.animation}const Vz=["","X","Y","Z"],ZEe={visibility:"hidden"},Wz=1e3;let e_e=0;const mf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function hQ({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},a=t==null?void 0:t()){this.id=e_e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,mf.totalNodes=mf.resolvedTargetDeltas=mf.recalculatedProjection=0,this.nodes.forEach(r_e),this.nodes.forEach(l_e),this.nodes.forEach(u_e),this.nodes.forEach(i_e),KEe(mf)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new YEe)}addEventListener(s,a){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new ER),this.eventHandlers.get(s).add(a)}notifyListeners(s,...a){const l=this.eventHandlers.get(s);l&&l.notify(...a)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=QEe(s),this.instance=s;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),e){let f;const d=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=XEe(d,250),Nw.hasAnimatedSinceResize&&(Nw.hasAnimatedSinceResize=!1,this.nodes.forEach(qz))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||p_e,{onLayoutAnimationStart:m,onLayoutAnimationComplete:y}=c.getProps(),v=!this.targetLayout||!dQ(this.targetLayout,p)||h,b=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const x={...wR(g,"layout"),onPlay:m,onComplete:y};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||qz(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(c_e),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Hz);return}this.isUpdating||this.nodes.forEach(s_e),this.isUpdating=!1,this.nodes.forEach(a_e),this.nodes.forEach(t_e),this.nodes.forEach(n_e),this.clearAllSnapshots();const a=performance.now();gr.delta=fc(0,1e3/60,a-gr.timestamp),gr.timestamp=a,gr.isProcessing=!0,lA.update.process(gr),lA.preRender.process(gr),lA.render.process(gr),gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(o_e),this.sharedNodes.forEach(f_e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!fQ(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&(a||gf(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return s&&(l=this.removeTransform(l)),g_e(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return dn();const a=s.measureViewportBox(),{scroll:l}=this.root;return l&&(vu(a.x,l.offset.x),vu(a.y,l.offset.y)),a}removeElementScroll(s){const a=dn();uo(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:c,options:f}=u;if(u!==this.root&&c&&f.layoutScroll){if(c.isRoot){uo(a,s);const{scroll:d}=this.root;d&&(vu(a.x,-d.offset.x),vu(a.y,-d.offset.y))}vu(a.x,c.offset.x),vu(a.y,c.offset.y)}}return a}applyTransform(s,a=!1){const l=dn();uo(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&fp(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),gf(c.latestValues)&&fp(l,c.latestValues)}return gf(this.latestValues)&&fp(l,this.latestValues),l}removeTransform(s){const a=dn();uo(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!gf(u.latestValues))continue;A3(u.latestValues)&&u.updateSnapshot();const c=dn(),f=u.measurePageBox();uo(c,f),zz(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return gf(this.latestValues)&&zz(a,this.latestValues),a}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=gr.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dn(),this.relativeTargetOrigin=dn(),Ry(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),uo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=dn(),this.targetWithTransforms=dn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pEe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):uo(this.target,this.layout.layoutBox),oQ(this.target,this.targetDelta)):uo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dn(),this.relativeTargetOrigin=dn(),Ry(this.relativeTargetOrigin,this.target,h.target),uo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}mf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||A3(this.parent.latestValues)||iQ(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===gr.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;uo(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;kEe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=cp(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=cp(),this.projectionDeltaWithTransform=cp());const g=this.projectionTransform;Fy(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Uz(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==d||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),mf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=cp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=dn(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=h!==p,m=this.getStack(),y=!m||m.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(h_e));this.animationProgress=0;let b;this.mixTargetDelta=x=>{const w=x/1e3;Gz(f.x,s.x,w),Gz(f.y,s.y,w),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ry(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),d_e(this.relativeTarget,this.relativeTargetOrigin,d,w),b&&HEe(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=dn()),uo(b,this.relativeTarget)),g&&(this.animationValues=c,zEe(c,u,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_t.update(()=>{Nw.hasAnimatedSinceResize=!0,this.currentAnimation=JEe(0,Wz,{...s,onUpdate:a=>{this.mixTargetDelta(a),s.onUpdate&&s.onUpdate(a)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Wz),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=s;if(!(!a||!l||!u)){if(this!==s&&this.layout&&u&&pQ(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||dn();const f=Qi(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+f;const d=Qi(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+d}uo(a,l),fp(a,c),Fy(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(s,a){this.sharedNodes.has(s)||this.sharedNodes.set(s,new qEe),this.sharedNodes.get(s).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let a=!1;const{latestValues:l}=s;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let c=0;c<Vz.length;c++){const f="rotate"+Vz[c];l[f]&&(u[f]=l[f],s.setStaticValue(f,0))}s.render();for(const c in u)s.setStaticValue(c,u[c]);s.scheduleRender()}getProjectionStyles(s){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ZEe;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Dw(s==null?void 0:s.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Dw(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!gf(this.latestValues)&&(g.transform=c?c({},""):"none",this.hasProjected=!1),g}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Uz(this.projectionDeltaWithTransform,this.treeScale,d),c&&(u.transform=c(d,u.transform));const{x:h,y:p}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in V2){if(d[g]===void 0)continue;const{correct:m,applyTo:y}=V2[g],v=u.transform==="none"?d[g]:m(d[g],f);if(y){const b=y.length;for(let x=0;x<b;x++)u[y[x]]=v}else u[g]=v}return this.options.layoutId&&(u.pointerEvents=f===this?Dw(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var a;return(a=s.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Hz),this.root.sharedNodes.clear()}}}function t_e(e){e.updateLayout()}function n_e(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:o}=e.options,s=n.source!==e.layout.source;o==="size"?po(f=>{const d=s?n.measuredBox[f]:n.layoutBox[f],h=Qi(d);d.min=r[f].min,d.max=d.min+h}):pQ(o,n.layoutBox,r)&&po(f=>{const d=s?n.measuredBox[f]:n.layoutBox[f],h=Qi(r[f]);d.max=d.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+h)});const a=cp();Fy(a,r,n.layoutBox);const l=cp();s?Fy(l,e.applyTransform(i,!0),n.measuredBox):Fy(l,r,n.layoutBox);const u=!fQ(a);let c=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=dn();Ry(p,n.layoutBox,d.layoutBox);const g=dn();Ry(g,r,h.layoutBox),dQ(p,g)||(c=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function r_e(e){mf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function i_e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function o_e(e){e.clearSnapshot()}function Hz(e){e.clearMeasurements()}function s_e(e){e.isLayoutDirty=!1}function a_e(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function qz(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function l_e(e){e.resolveTargetDelta()}function u_e(e){e.calcProjection()}function c_e(e){e.resetRotation()}function f_e(e){e.removeLeadSnapshot()}function Gz(e,t,n){e.translate=Wt(t.translate,0,n),e.scale=Wt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Yz(e,t,n,r){e.min=Wt(t.min,n.min,r),e.max=Wt(t.max,n.max,r)}function d_e(e,t,n,r){Yz(e.x,t.x,n.x,r),Yz(e.y,t.y,n.y,r)}function h_e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const p_e={duration:.45,ease:[.4,0,.1,1]},Xz=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Kz=Xz("applewebkit/")&&!Xz("chrome/")?Math.round:on;function Qz(e){e.min=Kz(e.min),e.max=Kz(e.max)}function g_e(e){Qz(e.x),Qz(e.y)}function pQ(e,t,n){return e==="position"||e==="preserve-aspect"&&!_3(Bz(t),Bz(n),.2)}const m_e=hQ({attachResizeListener:(e,t)=>gl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bA={current:void 0},gQ=hQ({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!bA.current){const e=new m_e({});e.mount(window),e.setOptions({layoutScroll:!0}),bA.current=e}return bA.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),y_e={pan:{Feature:MEe},drag:{Feature:PEe,ProjectionNode:gQ,MeasureLayout:lQ}},v_e=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function b_e(e){const t=v_e.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function P3(e,t,n=1){const[r,i]=b_e(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const s=o.trim();return QK(s)?parseFloat(s):s}else return b3(i)?P3(i,t,n+1):i}function x_e(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const o=i.get();if(!b3(o))return;const s=P3(o,r);s&&i.set(s)});for(const i in t){const o=t[i];if(!b3(o))continue;const s=P3(o,r);s&&(t[i]=s,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:t,transitionEnd:n}}const w_e=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),mQ=e=>w_e.has(e),S_e=e=>Object.keys(e).some(mQ),Jz=e=>e===qd||e===Te,Zz=(e,t)=>parseFloat(e.split(", ")[t]),e7=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Zz(i[1],t);{const o=r.match(/^matrix\((.+)\)$/);return o?Zz(o[1],e):0}},k_e=new Set(["x","y","z"]),C_e=_v.filter(e=>!k_e.has(e));function E_e(e){const t=[];return C_e.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const dg={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:e7(4,13),y:e7(5,14)};dg.translateX=dg.x;dg.translateY=dg.y;const __e=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:s}=o,a={};s==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=dg[u](r,o)}),t.render();const l=t.measureViewportBox();return n.forEach(u=>{const c=t.getValue(u);c&&c.jump(a[u]),e[u]=dg[u](l,o)}),e},$_e=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(mQ);let o=[],s=!1;const a=[];if(i.forEach(l=>{const u=e.getValue(l);if(!e.hasValue(l))return;let c=n[l],f=Jm(c);const d=t[l];let h;if(H2(d)){const p=d.length,g=d[0]===null?1:0;c=d[g],f=Jm(c);for(let m=g;m<p&&d[m]!==null;m++)h?q2(Jm(d[m])===h):h=Jm(d[m])}else h=Jm(d);if(f!==h)if(Jz(f)&&Jz(h)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof d=="string"?t[l]=parseFloat(d):Array.isArray(d)&&h===Te&&(t[l]=d.map(parseFloat))}else f!=null&&f.transform&&(h!=null&&h.transform)&&(c===0||d===0)?c===0?u.set(h.transform(c)):t[l]=f.transform(d):(s||(o=E_e(e),s=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:t[l],u.jump(d))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=__e(t,e,a);return o.length&&o.forEach(([c,f])=>{e.getValue(c).set(f)}),e.render(),FC&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function A_e(e,t,n,r){return S_e(t)?$_e(e,t,n,r):{target:t,transitionEnd:r}}const T_e=(e,t,n,r)=>{const i=x_e(e,t,r);return t=i.target,r=i.transitionEnd,A_e(e,t,n,r)},M3={current:null},yQ={current:!1};function P_e(){if(yQ.current=!0,!!FC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>M3.current=e.matches;e.addListener(t),t()}else M3.current=!1}function M_e(e,t,n){const{willChange:r}=t;for(const i in t){const o=t[i],s=n[i];if(xi(o))e.addValue(i,o),K2(r)&&r.add(i);else if(xi(s))e.addValue(i,fg(o,{owner:e})),K2(r)&&r.remove(i);else if(s!==o)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(o)}else{const a=e.getStaticValue(i);e.addValue(i,fg(a!==void 0?a:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const t7=new WeakMap,vQ=Object.keys(E1),F_e=vQ.length,n7=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],R_e=aR.length;class O_e{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>_t.render(this.render,!1,!0);const{latestValues:a,renderState:l}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.isControllingVariants=OC(n),this.isVariantNode=rK(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(n,{});for(const f in c){const d=c[f];a[f]!==void 0&&xi(d)&&(d.set(a[f],!1),K2(u)&&u.add(f))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,t7.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),yQ.current||P_e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:M3.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){t7.delete(this.current),this.projection&&this.projection.unmount(),zl(this.notifyUpdate),zl(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Hd.has(t),i=n.on("change",s=>{this.latestValues[t]=s,this.props.onUpdate&&_t.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,o){let s,a;for(let l=0;l<F_e;l++){const u=vQ[l],{isEnabled:c,Feature:f,ProjectionNode:d,MeasureLayout:h}=E1[u];d&&(s=d),c(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:h}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!c||f&&lp(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:d,layoutRoot:h})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<n7.length;r++){const i=n7[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=t["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=M_e(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<R_e;r++){const i=aR[r],o=this.props[i];(C1(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=fg(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=gR(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!xi(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ER),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class bQ extends O_e{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},o){let s=XCe(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),s&&(s=i(s))),o){GCe(this,r,s);const a=T_e(this,r,s,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function D_e(e){return window.getComputedStyle(e)}class N_e extends bQ{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Hd.has(n)){const r=xR(n);return r&&r.default||0}else{const r=D_e(t),i=(aK(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return sQ(t,n)}build(t,n,r,i){cR(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return pR(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;xi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){hK(t,n,r,i)}}class I_e extends bQ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Hd.has(n)){const r=xR(n);return r&&r.default||0}return n=pK.has(n)?n:oR(n),t.getAttribute(n)}measureInstanceViewportBox(){return dn()}scrapeMotionValuesFromProps(t,n){return mK(t,n)}build(t,n,r,i){dR(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){gK(t,n,r,i)}mount(t){this.isSVGTag=hR(t.tagName),super.mount(t)}}const L_e=(e,t)=>uR(e)?new I_e(t,{enableHardwareAcceleration:!1}):new N_e(t,{enableHardwareAcceleration:!0}),z_e={layout:{ProjectionNode:gQ,MeasureLayout:lQ}},j_e={...cEe,...Mke,...y_e,...z_e},LC=jSe((e,t)=>vke(e,t,j_e,L_e));function xQ(){const e=M.useRef(!1);return iR(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function B_e(){const e=xQ(),[t,n]=M.useState(0),r=M.useCallback(()=>{e.current&&n(t+1)},[t]);return[M.useCallback(()=>_t.postRender(r),[r]),t]}class U_e extends M.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function V_e({children:e,isPresent:t}){const n=M.useId(),r=M.useRef(null),i=M.useRef({width:0,height:0,top:0,left:0});return M.useInsertionEffect(()=>{const{width:o,height:s,top:a,left:l}=i.current;if(t||!r.current||!o||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),M.createElement(U_e,{isPresent:t,childRef:r,sizeRef:i},M.cloneElement(e,{ref:r}))}const xA=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:s})=>{const a=mR(W_e),l=M.useId(),u=M.useMemo(()=>({id:l,initial:t,isPresent:n,custom:i,onExitComplete:c=>{a.set(c,!0);for(const f of a.values())if(!f)return;r&&r()},register:c=>(a.set(c,!1),()=>a.delete(c))}),o?void 0:[n]);return M.useMemo(()=>{a.forEach((c,f)=>a.set(f,!1))},[n]),M.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),s==="popLayout"&&(e=M.createElement(V_e,{isPresent:n},e)),M.createElement(Ev.Provider,{value:u},e)};function W_e(){return new Map}function H_e(e){return M.useEffect(()=>()=>e(),[])}const yf=e=>e.key||"";function q_e(e,t){e.forEach(n=>{const r=yf(n);t.set(r,n)})}function G_e(e){const t=[];return M.Children.forEach(e,n=>{M.isValidElement(n)&&t.push(n)}),t}const wQ=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:s="sync"})=>{const a=M.useContext(lR).forceRender||B_e()[0],l=xQ(),u=G_e(e);let c=u;const f=M.useRef(new Map).current,d=M.useRef(c),h=M.useRef(new Map).current,p=M.useRef(!0);if(iR(()=>{p.current=!1,q_e(u,h),d.current=c}),H_e(()=>{p.current=!0,h.clear(),f.clear()}),p.current)return M.createElement(M.Fragment,null,c.map(v=>M.createElement(xA,{key:yf(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:s},v)));c=[...c];const g=d.current.map(yf),m=u.map(yf),y=g.length;for(let v=0;v<y;v++){const b=g[v];m.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return s==="wait"&&f.size&&(c=[]),f.forEach((v,b)=>{if(m.indexOf(b)!==-1)return;const x=h.get(b);if(!x)return;const w=g.indexOf(b);let k=v;if(!k){const S=()=>{f.delete(b);const C=Array.from(h.keys()).filter(E=>!m.includes(E));if(C.forEach(E=>h.delete(E)),d.current=u.filter(E=>{const A=yf(E);return A===b||C.includes(A)}),!f.size){if(l.current===!1)return;a(),r&&r()}};k=M.createElement(xA,{key:yf(x),isPresent:!1,onExitComplete:S,custom:t,presenceAffectsLayout:o,mode:s},x),f.set(b,k)}c.splice(w,0,k)}),c=c.map(v=>{const b=v.key;return f.has(b)?v:M.createElement(xA,{key:yf(v),isPresent:!0,presenceAffectsLayout:o,mode:s},v)}),M.createElement(M.Fragment,null,f.size?c:c.map(v=>M.cloneElement(v)))};class Y_e{constructor(){this.componentControls=new Set}subscribe(t){return this.componentControls.add(t),()=>this.componentControls.delete(t)}start(t,n){this.componentControls.forEach(r=>{r.start(t.nativeEvent||t,n)})}}const X_e=()=>new Y_e;function K_e(){return mR(X_e)}var Q_e={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let r=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},SQ=M.memo(e=>{const{id:t,message:n,onCloseComplete:r,onRequestRemove:i,requestClose:o=!1,position:s="bottom",duration:a=5e3,containerStyle:l,motionVariants:u=Q_e,toastSpacing:c="0.5rem"}=e,[f,d]=M.useState(a),h=REe();J9(()=>{h||r==null||r()},[h]),J9(()=>{d(a)},[a]);const p=()=>d(null),g=()=>d(a),m=()=>{h&&i()};M.useEffect(()=>{h&&o&&i()},[h,o,i]),PSe(m,f);const y=M.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:c,...l}),[l,c]),v=M.useMemo(()=>ASe(s),[s]);return $.jsx(LC.div,{layout:!0,className:"chakra-toast",variants:u,initial:"initial",animate:"animate",exit:"exit",onHoverStart:p,onHoverEnd:g,custom:{position:s},style:v,children:$.jsx(ke.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:y,children:fa(n,{id:t,onClose:m})})})});SQ.displayName="ToastComponent";function J_e(e,t){var n;const r=e??"bottom",o={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(n=o==null?void 0:o[t])!=null?n:r}var r7={path:$.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[$.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),$.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),$.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},yt=_e((e,t)=>{const{as:n,viewBox:r,color:i="currentColor",focusable:o=!1,children:s,className:a,__css:l,...u}=e,c=Xe("chakra-icon",a),f=Gl("Icon",e),d={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...l,...f},h={ref:t,focusable:o,className:c,__css:d},p=r??r7.viewBox;if(n&&typeof n!="string")return $.jsx(ke.svg,{as:n,...h,...u});const g=s??r7.path;return $.jsx(ke.svg,{verticalAlign:"middle",viewBox:p,...h,...u,children:g})});yt.displayName="Icon";function Z_e(e){return $.jsx(yt,{viewBox:"0 0 24 24",...e,children:$.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function e$e(e){return $.jsx(yt,{viewBox:"0 0 24 24",...e,children:$.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function i7(e){return $.jsx(yt,{viewBox:"0 0 24 24",...e,children:$.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var t$e=jpe({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),zC=_e((e,t)=>{const n=Gl("Spinner",e),{label:r="Loading...",thickness:i="2px",speed:o="0.45s",emptyColor:s="transparent",className:a,...l}=ir(e),u=Xe("chakra-spinner",a),c={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:s,borderLeftColor:s,animation:`${t$e} ${o} linear infinite`,...n};return $.jsx(ke.div,{ref:t,__css:c,className:u,...l,children:r&&$.jsx(ke.span,{srOnly:!0,children:r})})});zC.displayName="Spinner";var[n$e,_R]=jn({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[r$e,$R]=jn({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),kQ={info:{icon:e$e,colorScheme:"blue"},warning:{icon:i7,colorScheme:"orange"},success:{icon:Z_e,colorScheme:"green"},error:{icon:i7,colorScheme:"red"},loading:{icon:zC,colorScheme:"blue"}};function i$e(e){return kQ[e].colorScheme}function o$e(e){return kQ[e].icon}var CQ=_e(function(t,n){const r=$R(),{status:i}=_R(),o={display:"inline",...r.description};return $.jsx(ke.div,{ref:n,"data-status":i,...t,className:Xe("chakra-alert__desc",t.className),__css:o})});CQ.displayName="AlertDescription";function EQ(e){const{status:t}=_R(),n=o$e(t),r=$R(),i=t==="loading"?r.spinner:r.icon;return $.jsx(ke.span,{display:"inherit","data-status":t,...e,className:Xe("chakra-alert__icon",e.className),__css:i,children:e.children||$.jsx(n,{h:"100%",w:"100%"})})}EQ.displayName="AlertIcon";var _Q=_e(function(t,n){const r=$R(),{status:i}=_R();return $.jsx(ke.div,{ref:n,"data-status":i,...t,className:Xe("chakra-alert__title",t.className),__css:r.title})});_Q.displayName="AlertTitle";var $Q=_e(function(t,n){var r;const{status:i="info",addRole:o=!0,...s}=ir(t),a=(r=t.colorScheme)!=null?r:i$e(i),l=Yl("Alert",{...t,colorScheme:a}),u={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...l.container};return $.jsx(n$e,{value:{status:i},children:$.jsx(r$e,{value:l,children:$.jsx(ke.div,{"data-status":i,role:o?"alert":void 0,ref:n,...s,className:Xe("chakra-alert",t.className),__css:u})})})});$Q.displayName="Alert";function s$e(e){return $.jsx(yt,{focusable:"false","aria-hidden":!0,...e,children:$.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var AQ=_e(function(t,n){const r=Gl("CloseButton",t),{children:i,isDisabled:o,__css:s,...a}=ir(t),l={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return $.jsx(ke.button,{type:"button","aria-label":"Close",ref:n,disabled:o,__css:{...l,...r,...s},...a,children:i||$.jsx(s$e,{width:"1em",height:"1em"})})});AQ.displayName="CloseButton";var a$e={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},aa=l$e(a$e);function l$e(e){let t=e;const n=new Set,r=i=>{t=i(t),n.forEach(o=>o())};return{getState:()=>t,subscribe:i=>(n.add(i),()=>{r(()=>e),n.delete(i)}),removeToast:(i,o)=>{r(s=>({...s,[o]:s[o].filter(a=>a.id!=i)}))},notify:(i,o)=>{const s=u$e(i,o),{position:a,id:l}=s;return r(u=>{var c,f;const h=a.includes("top")?[s,...(c=u[a])!=null?c:[]]:[...(f=u[a])!=null?f:[],s];return{...u,[a]:h}}),l},update:(i,o)=>{i&&r(s=>{const a={...s},{position:l,index:u}=Q9(a,i);return l&&u!==-1&&(a[l][u]={...a[l][u],...o,message:TQ(o)}),a})},closeAll:({positions:i}={})=>{r(o=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((l,u)=>(l[u]=o[u].map(c=>({...c,requestClose:!0})),l),{...o}))},close:i=>{r(o=>{const s=ZX(o,i);return s?{...o,[s]:o[s].map(a=>a.id==i?{...a,requestClose:!0}:a)}:o})},isActive:i=>!!Q9(aa.getState(),i).position}}var o7=0;function u$e(e,t={}){var n,r;o7+=1;const i=(n=t.id)!=null?n:o7,o=(r=t.position)!=null?r:"bottom";return{id:i,message:e,position:o,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>aa.removeToast(String(i),o),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var c$e=e=>{const{status:t,variant:n="solid",id:r,title:i,isClosable:o,onClose:s,description:a,colorScheme:l,icon:u}=e,c=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return $.jsxs($Q,{addRole:!1,status:t,variant:n,id:c==null?void 0:c.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:l,children:[$.jsx(EQ,{children:u}),$.jsxs(ke.div,{flex:"1",maxWidth:"100%",children:[i&&$.jsx(_Q,{id:c==null?void 0:c.title,children:i}),a&&$.jsx(CQ,{id:c==null?void 0:c.description,display:"block",children:a})]}),o&&$.jsx(AQ,{size:"sm",onClick:s,position:"absolute",insetEnd:1,top:1})]})};function TQ(e={}){const{render:t,toastComponent:n=c$e}=e;return i=>typeof t=="function"?t({...i,...e}):$.jsx(n,{...i,...e})}function f$e(e,t){const n=i=>{var o;return{...t,...i,position:J_e((o=i==null?void 0:i.position)!=null?o:t==null?void 0:t.position,e)}},r=i=>{const o=n(i),s=TQ(o);return aa.notify(s,o)};return r.update=(i,o)=>{aa.update(i,n(o))},r.promise=(i,o)=>{const s=r({...o.loading,status:"loading",duration:null});i.then(a=>r.update(s,{status:"success",duration:5e3,...fa(o.success,a)})).catch(a=>r.update(s,{status:"error",duration:5e3,...fa(o.error,a)}))},r.closeAll=aa.closeAll,r.close=aa.close,r.isActive=aa.isActive,r}var[d$e,h$e]=jn({name:"ToastOptionsContext",strict:!1}),p$e=e=>{const t=M.useSyncExternalStore(aa.subscribe,aa.getState,aa.getState),{motionVariants:n,component:r=SQ,portalProps:i}=e,s=Object.keys(t).map(a=>{const l=t[a];return $.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${a}`,id:`chakra-toast-manager-${a}`,style:TSe(a),children:$.jsx(wQ,{initial:!1,children:l.map(u=>$.jsx(r,{motionVariants:n,...u},u.id))})},a)});return $.jsx(Sv,{...i,children:s})};function g$e(e){const{theme:t}=kX(),n=h$e();return M.useMemo(()=>f$e(t.direction,{...n,...e}),[e,t.direction,n])}var m$e=e=>function({children:n,theme:r=e,toastOptions:i,...o}){return $.jsxs(_Se,{theme:r,...o,children:[$.jsx(d$e,{value:i==null?void 0:i.defaultOptions,children:n}),$.jsx(p$e,{...i})]})},y$e=m$e(WX),v$e=Object.defineProperty,b$e=(e,t,n)=>t in e?v$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yt=(e,t,n)=>(b$e(e,typeof t!="symbol"?t+"":t,n),n);function s7(e){return e.sort((t,n)=>{const r=t.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var x$e=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function a7(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function l7(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var F3=typeof window<"u"?M.useLayoutEffect:M.useEffect,J2=e=>e,w$e=class{constructor(){Yt(this,"descendants",new Map),Yt(this,"register",e=>{if(e!=null)return x$e(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),Yt(this,"unregister",e=>{this.descendants.delete(e);const t=s7(Array.from(this.descendants.keys()));this.assignIndex(t)}),Yt(this,"destroy",()=>{this.descendants.clear()}),Yt(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})}),Yt(this,"count",()=>this.descendants.size),Yt(this,"enabledCount",()=>this.enabledValues().length),Yt(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index)),Yt(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),Yt(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),Yt(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),Yt(this,"first",()=>this.item(0)),Yt(this,"firstEnabled",()=>this.enabledItem(0)),Yt(this,"last",()=>this.item(this.descendants.size-1)),Yt(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),Yt(this,"indexOf",e=>{var t,n;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1}),Yt(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),Yt(this,"next",(e,t=!0)=>{const n=a7(e,this.count(),t);return this.item(n)}),Yt(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=a7(r,this.enabledCount(),t);return this.enabledItem(i)}),Yt(this,"prev",(e,t=!0)=>{const n=l7(e,this.count()-1,t);return this.item(n)}),Yt(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),i=l7(r,this.enabledCount()-1,t);return this.enabledItem(i)}),Yt(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),r=s7(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(r)})}};function S$e(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function vd(...e){return t=>{e.forEach(n=>{S$e(n,t)})}}function k$e(...e){return M.useMemo(()=>vd(...e),e)}function C$e(){const e=M.useRef(new w$e);return F3(()=>()=>e.current.destroy()),e.current}var[E$e,PQ]=jn({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function _$e(e){const t=PQ(),[n,r]=M.useState(-1),i=M.useRef(null);F3(()=>()=>{i.current&&t.unregister(i.current)},[]),F3(()=>{if(!i.current)return;const s=Number(i.current.dataset.index);n!=s&&!Number.isNaN(s)&&r(s)});const o=J2(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(i.current),register:vd(o,i)}}function MQ(){return[J2(E$e),()=>J2(PQ()),()=>C$e(),i=>_$e(i)]}var[$$e,jC]=jn({name:"AccordionStylesContext",hookName:"useAccordionStyles",providerName:"<Accordion />"}),[A$e,AR]=jn({name:"AccordionItemContext",hookName:"useAccordionItemContext",providerName:"<AccordionItem />"}),[T$e,Hft,P$e,M$e]=MQ(),FQ=_e(function(t,n){const{getButtonProps:r}=AR(),i=r(t,n),s={display:"flex",alignItems:"center",width:"100%",outline:0,...jC().button};return $.jsx(ke.button,{...i,className:Xe("chakra-accordion__button",t.className),__css:s})});FQ.displayName="AccordionButton";function RQ(e){const{value:t,defaultValue:n,onChange:r,shouldUpdate:i=(d,h)=>d!==h}=e,o=Ow(r),s=Ow(i),[a,l]=M.useState(n),u=t!==void 0,c=u?t:a,f=Ow(d=>{const p=typeof d=="function"?d(c):d;s(c,p)&&(u||l(p),o(p))},[u,o,c,s]);return[c,f]}function F$e(e){const{onChange:t,defaultIndex:n,index:r,allowMultiple:i,allowToggle:o,...s}=e;D$e(e),N$e(e);const a=P$e(),[l,u]=M.useState(-1);M.useEffect(()=>()=>{u(-1)},[]);const[c,f]=RQ({value:r,defaultValue(){return i?n??[]:n??-1},onChange:t});return{index:c,setIndex:f,htmlProps:s,getAccordionItemProps:h=>{let p=!1;return h!==null&&(p=Array.isArray(c)?c.includes(h):c===h),{isOpen:p,onChange:m=>{if(h!==null)if(i&&Array.isArray(c)){const y=m?c.concat(h):c.filter(v=>v!==h);f(y)}else m?f(h):o&&f(-1)}}},focusedIndex:l,setFocusedIndex:u,descendants:a}}var[R$e,TR]=jn({name:"AccordionContext",hookName:"useAccordionContext",providerName:"Accordion"});function O$e(e){const{isDisabled:t,isFocusable:n,id:r,...i}=e,{getAccordionItemProps:o,setFocusedIndex:s}=TR(),a=M.useRef(null),l=M.useId(),u=r??l,c=`accordion-button-${u}`,f=`accordion-panel-${u}`;I$e(e);const{register:d,index:h,descendants:p}=M$e({disabled:t&&!n}),{isOpen:g,onChange:m}=o(h===-1?null:h);L$e({isOpen:g,isDisabled:t});const y=()=>{m==null||m(!0)},v=()=>{m==null||m(!1)},b=M.useCallback(()=>{m==null||m(!g),s(h)},[h,s,g,m]),x=M.useCallback(C=>{const A={ArrowDown:()=>{const T=p.nextEnabled(h);T==null||T.node.focus()},ArrowUp:()=>{const T=p.prevEnabled(h);T==null||T.node.focus()},Home:()=>{const T=p.firstEnabled();T==null||T.node.focus()},End:()=>{const T=p.lastEnabled();T==null||T.node.focus()}}[C.key];A&&(C.preventDefault(),A(C))},[p,h]),w=M.useCallback(()=>{s(h)},[s,h]),k=M.useCallback(function(E={},A=null){return{...E,type:"button",ref:vd(d,a,A),id:c,disabled:!!t,"aria-expanded":!!g,"aria-controls":f,onClick:tc(E.onClick,b),onFocus:tc(E.onFocus,w),onKeyDown:tc(E.onKeyDown,x)}},[c,t,g,b,w,x,f,d]),S=M.useCallback(function(E={},A=null){return{...E,ref:A,role:"region",id:f,"aria-labelledby":c,hidden:!g}},[c,g,f]);return{isOpen:g,isDisabled:t,isFocusable:n,onOpen:y,onClose:v,getButtonProps:k,getPanelProps:S,htmlProps:i}}function D$e(e){const t=e.index||e.defaultIndex,n=t!=null&&!Array.isArray(t)&&e.allowMultiple;kv({condition:!!n,message:`If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: ${typeof t},`})}function N$e(e){kv({condition:!!(e.allowMultiple&&e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}function I$e(e){kv({condition:!!(e.isFocusable&&!e.isDisabled),message:`Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.
    `})}function L$e(e){kv({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}function OQ(e){const{isOpen:t,isDisabled:n}=AR(),{reduceMotion:r}=TR(),i=Xe("chakra-accordion__icon",e.className),o=jC(),s={opacity:n?.4:1,transform:t?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center",...o.icon};return $.jsx(yt,{viewBox:"0 0 24 24","aria-hidden":!0,className:i,__css:s,...e,children:$.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}OQ.displayName="AccordionIcon";var DQ=_e(function(t,n){const{children:r,className:i}=t,{htmlProps:o,...s}=O$e(t),l={...jC().container,overflowAnchor:"none"},u=M.useMemo(()=>s,[s]);return $.jsx(A$e,{value:u,children:$.jsx(ke.div,{ref:n,...o,className:Xe("chakra-accordion__item",i),__css:l,children:typeof r=="function"?r({isExpanded:!!s.isOpen,isDisabled:!!s.isDisabled}):r})})});DQ.displayName="AccordionItem";var hx={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},u7={enter:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.enter}),exit:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.exit})},z$e=e=>e!=null&&parseInt(e.toString(),10)>0,c7={exit:{height:{duration:.2,ease:hx.ease},opacity:{duration:.3,ease:hx.ease}},enter:{height:{duration:.3,ease:hx.ease},opacity:{duration:.4,ease:hx.ease}}},j$e={exit:({animateOpacity:e,startingHeight:t,transition:n,transitionEnd:r,delay:i})=>{var o;return{...e&&{opacity:z$e(t)?1:0},height:t,transitionEnd:r==null?void 0:r.exit,transition:(o=n==null?void 0:n.exit)!=null?o:u7.exit(c7.exit,i)}},enter:({animateOpacity:e,endingHeight:t,transition:n,transitionEnd:r,delay:i})=>{var o;return{...e&&{opacity:1},height:t,transitionEnd:r==null?void 0:r.enter,transition:(o=n==null?void 0:n.enter)!=null?o:u7.enter(c7.enter,i)}}},NQ=M.forwardRef((e,t)=>{const{in:n,unmountOnExit:r,animateOpacity:i=!0,startingHeight:o=0,endingHeight:s="auto",style:a,className:l,transition:u,transitionEnd:c,...f}=e,[d,h]=M.useState(!1);M.useEffect(()=>{const v=setTimeout(()=>{h(!0)});return()=>clearTimeout(v)},[]),kv({condition:Number(o)>0&&!!r,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const p=parseFloat(o.toString())>0,g={startingHeight:o,endingHeight:s,animateOpacity:i,transition:d?u:{enter:{duration:0}},transitionEnd:{enter:c==null?void 0:c.enter,exit:r?c==null?void 0:c.exit:{...c==null?void 0:c.exit,display:p?"block":"none"}}},m=r?n:!0,y=n||r?"enter":"exit";return $.jsx(wQ,{initial:!1,custom:g,children:m&&$.jsx(LC.div,{ref:t,...f,className:Xe("chakra-collapse",l),style:{overflow:"hidden",display:"block",...a},custom:g,variants:j$e,initial:r?"exit":!1,animate:y,exit:"exit"})})});NQ.displayName="Collapse";var IQ=_e(function(t,n){const{className:r,motionProps:i,...o}=t,{reduceMotion:s}=TR(),{getPanelProps:a,isOpen:l}=AR(),u=a(o,n),c=Xe("chakra-accordion__panel",r),f=jC();s||delete u.hidden;const d=$.jsx(ke.div,{...u,__css:f.panel,className:c});return s?d:$.jsx(NQ,{in:l,...i,children:d})});IQ.displayName="AccordionPanel";var LQ=_e(function({children:t,reduceMotion:n,...r},i){const o=Yl("Accordion",r),s=ir(r),{htmlProps:a,descendants:l,...u}=F$e(s),c=M.useMemo(()=>({...u,reduceMotion:!!n}),[u,n]);return $.jsx(T$e,{value:l,children:$.jsx(R$e,{value:c,children:$.jsx($$e,{value:o,children:$.jsx(ke.div,{ref:i,...a,className:Xe("chakra-accordion",r.className),__css:o.root,children:t})})})})});LQ.displayName="Accordion";var R3=_e(function(t,n){const{htmlWidth:r,htmlHeight:i,alt:o,...s}=t;return $.jsx("img",{width:r,height:i,ref:n,alt:o,...s})});R3.displayName="NativeImage";function B$e(e){const{loading:t,src:n,srcSet:r,onLoad:i,onError:o,crossOrigin:s,sizes:a,ignoreFallback:l}=e,[u,c]=M.useState("pending");M.useEffect(()=>{c(n?"loading":"pending")},[n]);const f=M.useRef(),d=M.useCallback(()=>{if(!n)return;h();const p=new Image;p.src=n,s&&(p.crossOrigin=s),r&&(p.srcset=r),a&&(p.sizes=a),t&&(p.loading=t),p.onload=g=>{h(),c("loaded"),i==null||i(g)},p.onerror=g=>{h(),c("failed"),o==null||o(g)},f.current=p},[n,s,r,a,i,o,t]),h=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return tg(()=>{if(!l)return u==="loading"&&d(),()=>{h()}},[u,d,l]),l?"loaded":u}var U$e=(e,t)=>e!=="loaded"&&t==="beforeLoadOrError"||e==="failed"&&t==="onError";function V$e(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}var zQ=_e(function(t,n){const{fallbackSrc:r,fallback:i,src:o,srcSet:s,align:a,fit:l,loading:u,ignoreFallback:c,crossOrigin:f,fallbackStrategy:d="beforeLoadOrError",referrerPolicy:h,...p}=t,g=r!==void 0||i!==void 0,m=u!=null||c||!g,y=B$e({...t,crossOrigin:f,ignoreFallback:m}),v=U$e(y,d),b={ref:n,objectFit:l,objectPosition:a,...m?p:V$e(p,["onError","onLoad"])};return v?i||$.jsx(ke.img,{as:R3,className:"chakra-image__placeholder",src:r,...b}):$.jsx(ke.img,{as:R3,src:o,srcSet:s,crossOrigin:f,loading:u,referrerPolicy:h,className:"chakra-image",...b})});zQ.displayName="Image";function BC(e){return M.Children.toArray(e).filter(t=>M.isValidElement(t))}var[W$e,H$e]=jn({strict:!1,name:"ButtonGroupContext"}),q$e={horizontal:{"> *:first-of-type:not(:last-of-type)":{borderEndRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderStartRadius:0}},vertical:{"> *:first-of-type:not(:last-of-type)":{borderBottomRadius:0},"> *:not(:first-of-type):not(:last-of-type)":{borderRadius:0},"> *:not(:first-of-type):last-of-type":{borderTopRadius:0}}},G$e={horizontal:e=>({"& > *:not(style) ~ *:not(style)":{marginStart:e}}),vertical:e=>({"& > *:not(style) ~ *:not(style)":{marginTop:e}})},jQ=_e(function(t,n){const{size:r,colorScheme:i,variant:o,className:s,spacing:a="0.5rem",isAttached:l,isDisabled:u,orientation:c="horizontal",...f}=t,d=Xe("chakra-button__group",s),h=M.useMemo(()=>({size:r,colorScheme:i,variant:o,isDisabled:u}),[r,i,o,u]);let p={display:"inline-flex",...l?q$e[c]:G$e[c](a)};const g=c==="vertical";return $.jsx(W$e,{value:h,children:$.jsx(ke.div,{ref:n,role:"group",__css:p,className:d,"data-attached":l?"":void 0,"data-orientation":c,flexDir:g?"column":void 0,...f})})});jQ.displayName="ButtonGroup";function Y$e(e){const[t,n]=M.useState(!e);return{ref:M.useCallback(o=>{o&&n(o.tagName==="BUTTON")},[]),type:t?"button":void 0}}function O3(e){const{children:t,className:n,...r}=e,i=M.isValidElement(t)?M.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,o=Xe("chakra-button__icon",n);return $.jsx(ke.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:o,children:i})}O3.displayName="ButtonIcon";function D3(e){const{label:t,placement:n,spacing:r="0.5rem",children:i=$.jsx(zC,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:s,...a}=e,l=Xe("chakra-button__spinner",o),u=n==="start"?"marginEnd":"marginStart",c=M.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[u]:t?r:0,fontSize:"1em",lineHeight:"normal",...s}),[s,t,u,r]);return $.jsx(ke.div,{className:l,...a,__css:c,children:i})}D3.displayName="ButtonSpinner";var ds=_e((e,t)=>{const n=H$e(),r=Gl("Button",{...n,...e}),{isDisabled:i=n==null?void 0:n.isDisabled,isLoading:o,isActive:s,children:a,leftIcon:l,rightIcon:u,loadingText:c,iconSpacing:f="0.5rem",type:d,spinner:h,spinnerPlacement:p="start",className:g,as:m,...y}=ir(e),v=M.useMemo(()=>{const k={...r==null?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:k}}},[r,n]),{ref:b,type:x}=Y$e(m),w={rightIcon:u,leftIcon:l,iconSpacing:f,children:a};return $.jsxs(ke.button,{ref:k$e(t,b),as:m,type:d??x,"data-active":mo(s),"data-loading":mo(o),__css:v,className:Xe("chakra-button",g),...y,disabled:i||o,children:[o&&p==="start"&&$.jsx(D3,{className:"chakra-button__spinner--start",label:c,placement:"start",spacing:f,children:h}),o?c||$.jsx(ke.span,{opacity:0,children:$.jsx(f7,{...w})}):$.jsx(f7,{...w}),o&&p==="end"&&$.jsx(D3,{className:"chakra-button__spinner--end",label:c,placement:"end",spacing:f,children:h})]})});ds.displayName="Button";function f7(e){const{leftIcon:t,rightIcon:n,children:r,iconSpacing:i}=e;return $.jsxs($.Fragment,{children:[t&&$.jsx(O3,{marginEnd:i,children:t}),r,n&&$.jsx(O3,{marginStart:i,children:n})]})}var $1=_e((e,t)=>{const{icon:n,children:r,isRound:i,"aria-label":o,...s}=e,a=n||r,l=M.isValidElement(a)?M.cloneElement(a,{"aria-hidden":!0,focusable:!1}):null;return $.jsx(ds,{padding:"0",borderRadius:i?"full":void 0,ref:t,"aria-label":o,...s,children:l})});$1.displayName="IconButton";var[X$e,K$e]=jn({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Q$e,BQ]=jn({strict:!1,name:"FormControlContext"});function J$e(e){const{id:t,isRequired:n,isInvalid:r,isDisabled:i,isReadOnly:o,...s}=e,a=M.useId(),l=t||`field-${a}`,u=`${l}-label`,c=`${l}-feedback`,f=`${l}-helptext`,[d,h]=M.useState(!1),[p,g]=M.useState(!1),[m,y]=M.useState(!1),v=M.useCallback((S={},C=null)=>({id:f,...S,ref:vd(C,E=>{E&&g(!0)})}),[f]),b=M.useCallback((S={},C=null)=>({...S,ref:C,"data-focus":mo(m),"data-disabled":mo(i),"data-invalid":mo(r),"data-readonly":mo(o),id:S.id!==void 0?S.id:u,htmlFor:S.htmlFor!==void 0?S.htmlFor:l}),[l,i,m,r,o,u]),x=M.useCallback((S={},C=null)=>({id:c,...S,ref:vd(C,E=>{E&&h(!0)}),"aria-live":"polite"}),[c]),w=M.useCallback((S={},C=null)=>({...S,...s,ref:C,role:"group","data-focus":mo(m),"data-disabled":mo(i),"data-invalid":mo(r),"data-readonly":mo(o)}),[s,i,m,r,o]),k=M.useCallback((S={},C=null)=>({...S,ref:C,role:"presentation","aria-hidden":!0,children:S.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!o,isDisabled:!!i,isFocused:!!m,onFocus:()=>y(!0),onBlur:()=>y(!1),hasFeedbackText:d,setHasFeedbackText:h,hasHelpText:p,setHasHelpText:g,id:l,labelId:u,feedbackId:c,helpTextId:f,htmlProps:s,getHelpTextProps:v,getErrorMessageProps:x,getRootProps:w,getLabelProps:b,getRequiredIndicatorProps:k}}var UQ=_e(function(t,n){const r=Yl("Form",t),i=ir(t),{getRootProps:o,htmlProps:s,...a}=J$e(i),l=Xe("chakra-form-control",t.className);return $.jsx(Q$e,{value:a,children:$.jsx(X$e,{value:r,children:$.jsx(ke.div,{...o({},n),className:l,__css:r.container})})})});UQ.displayName="FormControl";var Z$e=_e(function(t,n){const r=BQ(),i=K$e(),o=Xe("chakra-form__helper-text",t.className);return $.jsx(ke.div,{...r==null?void 0:r.getHelpTextProps(t,n),__css:i.helperText,className:o})});Z$e.displayName="FormHelperText";function VQ(e){const{isDisabled:t,isInvalid:n,isReadOnly:r,isRequired:i,...o}=eAe(e);return{...o,disabled:t,readOnly:r,required:i,"aria-invalid":V$(n),"aria-required":V$(i),"aria-readonly":V$(r)}}function eAe(e){var t,n,r;const i=BQ(),{id:o,disabled:s,readOnly:a,required:l,isRequired:u,isInvalid:c,isReadOnly:f,isDisabled:d,onFocus:h,onBlur:p,...g}=e,m=e["aria-describedby"]?[e["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&m.push(i.feedbackId),i!=null&&i.hasHelpText&&m.push(i.helpTextId),{...g,"aria-describedby":m.join(" ")||void 0,id:o??(i==null?void 0:i.id),isDisabled:(t=s??d)!=null?t:i==null?void 0:i.isDisabled,isReadOnly:(n=a??f)!=null?n:i==null?void 0:i.isReadOnly,isRequired:(r=l??u)!=null?r:i==null?void 0:i.isRequired,isInvalid:c??(i==null?void 0:i.isInvalid),onFocus:tc(i==null?void 0:i.onFocus,h),onBlur:tc(i==null?void 0:i.onBlur,p)}}var WQ={exports:{}},tAe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nAe=tAe,rAe=nAe;function HQ(){}function qQ(){}qQ.resetWarningCache=HQ;var iAe=function(){function e(r,i,o,s,a,l){if(l!==rAe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:qQ,resetWarningCache:HQ};return n.PropTypes=n,n};WQ.exports=iAe();var oAe=WQ.exports;const d7=Da(oAe);var[sAe,aAe]=jn({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),GQ=_e(function(t,n){const r=Yl("Input",t),{children:i,className:o,...s}=ir(t),a=Xe("chakra-input__group",o),l={},u=BC(i),c=r.field;u.forEach(d=>{var h,p;r&&(c&&d.type.id==="InputLeftElement"&&(l.paddingStart=(h=c.height)!=null?h:c.h),c&&d.type.id==="InputRightElement"&&(l.paddingEnd=(p=c.height)!=null?p:c.h),d.type.id==="InputRightAddon"&&(l.borderEndRadius=0),d.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const f=u.map(d=>{var h,p;const g=QX({size:((h=d.props)==null?void 0:h.size)||t.size,variant:((p=d.props)==null?void 0:p.variant)||t.variant});return d.type.id!=="Input"?M.cloneElement(d,g):M.cloneElement(d,Object.assign(g,l,d.props))});return $.jsx(ke.div,{className:a,ref:n,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...s,children:$.jsx(sAe,{value:r,children:f})})});GQ.displayName="InputGroup";var lAe=ke("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),UC=_e(function(t,n){var r,i;const{placement:o="left",...s}=t,a=aAe(),l=a.field,c={[o==="left"?"insetStart":"insetEnd"]:"0",width:(r=l==null?void 0:l.height)!=null?r:l==null?void 0:l.h,height:(i=l==null?void 0:l.height)!=null?i:l==null?void 0:l.h,fontSize:l==null?void 0:l.fontSize,...a.element};return $.jsx(lAe,{ref:n,__css:c,...s})});UC.id="InputElement";UC.displayName="InputElement";var YQ=_e(function(t,n){const{className:r,...i}=t,o=Xe("chakra-input__left-element",r);return $.jsx(UC,{ref:n,placement:"left",className:o,...i})});YQ.id="InputLeftElement";YQ.displayName="InputLeftElement";var PR=_e(function(t,n){const{className:r,...i}=t,o=Xe("chakra-input__right-element",r);return $.jsx(UC,{ref:n,placement:"right",className:o,...i})});PR.id="InputRightElement";PR.displayName="InputRightElement";var A1=_e(function(t,n){const{htmlSize:r,...i}=t,o=Yl("Input",i),s=ir(i),a=VQ(s),l=Xe("chakra-input",t.className);return $.jsx(ke.input,{size:r,...a,__css:o.field,ref:n,className:l})});A1.displayName="Input";A1.id="Input";var Iw=_e(function(t,n){const r=Gl("Link",t),{className:i,isExternal:o,...s}=ir(t);return $.jsx(ke.a,{target:o?"_blank":void 0,rel:o?"noopener":void 0,ref:n,className:Xe("chakra-link",i),...s,__css:r})});Iw.displayName="Link";var[uAe,XQ]=jn({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),MR=_e(function(t,n){const r=Yl("List",t),{children:i,styleType:o="none",stylePosition:s,spacing:a,...l}=ir(t),u=BC(i),f=a?{["& > *:not(style) ~ *:not(style)"]:{mt:a}}:{};return $.jsx(uAe,{value:r,children:$.jsx(ke.ul,{ref:n,listStyleType:o,listStylePosition:s,role:"list",__css:{...r.container,...f},...l,children:u})})});MR.displayName="List";var FR=_e((e,t)=>{const{as:n,...r}=e;return $.jsx(MR,{ref:t,as:"ol",styleType:"decimal",marginStart:"1em",...r})});FR.displayName="OrderedList";var cAe=_e(function(t,n){const{as:r,...i}=t;return $.jsx(MR,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...i})});cAe.displayName="UnorderedList";var RR=_e(function(t,n){const r=XQ();return $.jsx(ke.li,{ref:n,...t,__css:r.item})});RR.displayName="ListItem";var fAe=_e(function(t,n){const r=XQ();return $.jsx(yt,{ref:n,role:"presentation",...t,__css:r.icon})});fAe.displayName="ListIcon";var Oy=_e(function(t,n){const{templateAreas:r,gap:i,rowGap:o,columnGap:s,column:a,row:l,autoFlow:u,autoRows:c,templateRows:f,autoColumns:d,templateColumns:h,...p}=t,g={display:"grid",gridTemplateAreas:r,gridGap:i,gridRowGap:o,gridColumnGap:s,gridAutoColumns:d,gridColumn:a,gridRow:l,gridAutoFlow:u,gridAutoRows:c,gridTemplateRows:f,gridTemplateColumns:h};return $.jsx(ke.div,{ref:n,__css:g,...p})});Oy.displayName="Grid";var KQ=Object.freeze(["base","sm","md","lg","xl","2xl"]);function dAe(e,t){return Array.isArray(e)?e.map(n=>n===null?null:t(n)):mi(e)?Object.keys(e).reduce((n,r)=>(n[r]=t(e[r]),n),{}):e!=null?t(e):null}function hAe(e,t=KQ){const n={};return e.forEach((r,i)=>{const o=t[i];r!=null&&(n[o]=r)}),n}var OR=ke("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});OR.displayName="Spacer";var It=_e(function(t,n){const r=Gl("Text",t),{className:i,align:o,decoration:s,casing:a,...l}=ir(t),u=QX({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return $.jsx(ke.p,{ref:n,className:Xe("chakra-text",t.className),...u,...l,__css:r})});It.displayName="Text";var QQ=e=>$.jsx(ke.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});QQ.displayName="StackItem";function pAe(e){const{spacing:t,direction:n}=e,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":dAe(n,i=>r[i])}}var DR=_e((e,t)=>{const{isInline:n,direction:r,align:i,justify:o,spacing:s="0.5rem",wrap:a,children:l,divider:u,className:c,shouldWrapChildren:f,...d}=e,h=n?"row":r??"column",p=M.useMemo(()=>pAe({spacing:s,direction:h}),[s,h]),g=!!u,m=!f&&!g,y=M.useMemo(()=>{const b=BC(l);return m?b:b.map((x,w)=>{const k=typeof x.key<"u"?x.key:w,S=w+1===b.length,E=f?$.jsx(QQ,{children:x},k):x;if(!g)return E;const A=M.cloneElement(u,{__css:p}),T=S?null:A;return $.jsxs(M.Fragment,{children:[E,T]},k)})},[u,p,g,m,f,l]),v=Xe("chakra-stack",c);return $.jsx(ke.div,{ref:t,display:"flex",alignItems:i,justifyContent:o,flexDirection:h,flexWrap:a,gap:g?void 0:s,className:v,...d,children:y})});DR.displayName="Stack";var wa=_e((e,t)=>$.jsx(DR,{align:"center",...e,direction:"column",ref:t}));wa.displayName="VStack";var JQ=_e((e,t)=>$.jsx(DR,{align:"center",...e,direction:"row",ref:t}));JQ.displayName="HStack";var NR=_e(function(t,n){const r=Gl("Heading",t),{className:i,...o}=ir(t);return $.jsx(ke.h2,{ref:n,className:Xe("chakra-heading",t.className),...o,__css:r})});NR.displayName="Heading";var Z2=ke("div");Z2.displayName="Box";var ZQ=_e(function(t,n){const{size:r,centerContent:i=!0,...o}=t,s=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return $.jsx(Z2,{ref:n,boxSize:r,__css:{...s,flexShrink:0,flexGrow:0},...o})});ZQ.displayName="Square";var gAe=_e(function(t,n){const{size:r,...i}=t;return $.jsx(ZQ,{size:r,ref:n,borderRadius:"9999px",...i})});gAe.displayName="Circle";var eJ=_e(function(t,n){const r=Gl("Badge",t),{className:i,...o}=ir(t);return $.jsx(ke.span,{ref:n,className:Xe("chakra-badge",t.className),...o,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...r}})});eJ.displayName="Badge";var hc=ke("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});hc.displayName="Center";var mAe={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};_e(function(t,n){const{axis:r="both",...i}=t;return $.jsx(ke.div,{ref:n,__css:mAe[r],...i,position:"absolute"})});var IR=_e(function(t,n){const{borderLeftWidth:r,borderBottomWidth:i,borderTopWidth:o,borderRightWidth:s,borderWidth:a,borderStyle:l,borderColor:u,...c}=Gl("Divider",t),{className:f,orientation:d="horizontal",__css:h,...p}=ir(t),g={vertical:{borderLeftWidth:r||s||a||"1px",height:"100%"},horizontal:{borderBottomWidth:i||o||a||"1px",width:"100%"}};return $.jsx(ke.hr,{ref:n,"aria-orientation":d,...p,__css:{...c,border:"0",borderColor:u,borderStyle:l,...g[d],...h},className:Xe("chakra-divider",f)})});IR.displayName="Divider";var Ht=_e(function(t,n){const{direction:r,align:i,justify:o,wrap:s,basis:a,grow:l,shrink:u,...c}=t,f={display:"flex",flexDirection:r,alignItems:i,justifyContent:o,flexWrap:s,flexBasis:a,flexGrow:l,flexShrink:u};return $.jsx(ke.div,{ref:n,__css:f,...c})});Ht.displayName="Flex";function yAe(e,t={}){const{ssr:n=!0,fallback:r}=t,{getWindow:i}=ESe(),o=Array.isArray(e)?e:[e];let s=Array.isArray(r)?r:[r];s=s.filter(u=>u!=null);const[a,l]=M.useState(()=>o.map((u,c)=>({media:u,matches:n?!!s[c]:i().matchMedia(u).matches})));return M.useEffect(()=>{const u=i();l(o.map(d=>({media:d,matches:u.matchMedia(d).matches})));const c=o.map(d=>u.matchMedia(d)),f=d=>{l(h=>h.slice().map(p=>p.media===d.media?{...p,matches:d.matches}:p))};return c.forEach(d=>{typeof d.addListener=="function"?d.addListener(f):d.addEventListener("change",f)}),()=>{c.forEach(d=>{typeof d.removeListener=="function"?d.removeListener(f):d.removeEventListener("change",f)})}},[i]),a.map(u=>u.matches)}function vAe(e,t,n=KQ){let r=Object.keys(e).indexOf(t);if(r!==-1)return e[t];let i=n.indexOf(t);for(;i>=0;){const o=n[i];if(e.hasOwnProperty(o)){r=i;break}i-=1}if(r!==-1){const o=n[r];return e[o]}}function bAe(e){var t,n;const r=mi(e)?e:{fallback:e??"base"},o=G4().__breakpoints.details.map(({minMaxQuery:u,breakpoint:c})=>({breakpoint:c,query:u.replace("@media screen and ","")})),s=o.map(u=>u.breakpoint===r.fallback),l=yAe(o.map(u=>u.query),{fallback:s,ssr:r.ssr}).findIndex(u=>u==!0);return(n=(t=o[l])==null?void 0:t.breakpoint)!=null?n:r.fallback}function jh(e,t){var n;const r=mi(t)?t:{fallback:"base"},i=bAe(r),o=G4();if(!i)return;const s=Array.from(((n=o.__breakpoints)==null?void 0:n.keys)||[]),a=Array.isArray(e)?Object.fromEntries(Object.entries(hAe(e,s)).map(([l,u])=>[l,u])):e;return vAe(a,i,s)}function xAe(){const e=M.useRef(new Map),t=e.current,n=M.useCallback((i,o,s,a)=>{e.current.set(s,{type:o,el:i,options:a}),i.addEventListener(o,s,a)},[]),r=M.useCallback((i,o,s,a)=>{i.removeEventListener(o,s,a),e.current.delete(s)},[]);return M.useEffect(()=>()=>{t.forEach((i,o)=>{r(i.el,i.type,o,i.options)})},[r,t]),{add:n,remove:r}}function wA(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function wAe(e={}){const{ref:t,isDisabled:n,isFocusable:r,clickOnEnter:i=!0,clickOnSpace:o=!0,onMouseDown:s,onMouseUp:a,onClick:l,onKeyDown:u,onKeyUp:c,tabIndex:f,onMouseOver:d,onMouseLeave:h,...p}=e,[g,m]=M.useState(!0),[y,v]=M.useState(!1),b=xAe(),x=N=>{N&&N.tagName!=="BUTTON"&&m(!1)},w=g?f:f||0,k=n&&!r,S=M.useCallback(N=>{if(n){N.stopPropagation(),N.preventDefault();return}N.currentTarget.focus(),l==null||l(N)},[n,l]),C=M.useCallback(N=>{y&&wA(N)&&(N.preventDefault(),N.stopPropagation(),v(!1),b.remove(document,"keyup",C,!1))},[y,b]),E=M.useCallback(N=>{if(u==null||u(N),n||N.defaultPrevented||N.metaKey||!wA(N.nativeEvent)||g)return;const D=i&&N.key==="Enter";o&&N.key===" "&&(N.preventDefault(),v(!0)),D&&(N.preventDefault(),N.currentTarget.click()),b.add(document,"keyup",C,!1)},[n,g,u,i,o,b,C]),A=M.useCallback(N=>{if(c==null||c(N),n||N.defaultPrevented||N.metaKey||!wA(N.nativeEvent)||g)return;o&&N.key===" "&&(N.preventDefault(),v(!1),N.currentTarget.click())},[o,g,n,c]),T=M.useCallback(N=>{N.button===0&&(v(!1),b.remove(document,"mouseup",T,!1))},[b]),I=M.useCallback(N=>{if(N.button!==0)return;if(n){N.stopPropagation(),N.preventDefault();return}g||v(!0),N.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",T,!1),s==null||s(N)},[n,g,s,b,T]),F=M.useCallback(N=>{N.button===0&&(g||v(!1),a==null||a(N))},[a,g]),R=M.useCallback(N=>{if(n){N.preventDefault();return}d==null||d(N)},[n,d]),_=M.useCallback(N=>{y&&(N.preventDefault(),v(!1)),h==null||h(N)},[y,h]),P=vd(t,x);return g?{...p,ref:P,type:"button","aria-disabled":k?void 0:n,disabled:k,onClick:S,onMouseDown:s,onMouseUp:a,onKeyUp:c,onKeyDown:u,onMouseOver:d,onMouseLeave:h}:{...p,ref:P,role:"button","data-active":mo(y),"aria-disabled":n?"true":void 0,tabIndex:k?void 0:w,onClick:S,onMouseDown:I,onMouseUp:F,onKeyUp:A,onKeyDown:E,onMouseOver:R,onMouseLeave:_}}function SAe(e){const{wasSelected:t,enabled:n,isSelected:r,mode:i="unmount"}=e;return!!(!n||r||i==="keepMounted"&&t)}var tJ=_e(function(t,n){const{children:r,placeholder:i,className:o,...s}=t;return $.jsxs(ke.select,{...s,ref:n,className:Xe("chakra-select",o),children:[i&&$.jsx("option",{value:"",children:i}),r]})});tJ.displayName="SelectField";function kAe(e,t){const n={},r={};for(const[i,o]of Object.entries(e))t.includes(i)?n[i]=o:r[i]=o;return[n,r]}var LR=_e((e,t)=>{var n;const r=Yl("Select",e),{rootProps:i,placeholder:o,icon:s,color:a,height:l,h:u,minH:c,minHeight:f,iconColor:d,iconSize:h,...p}=ir(e),[g,m]=kAe(p,cye),y=VQ(m),v={width:"100%",height:"fit-content",position:"relative",color:a},b={paddingEnd:"2rem",...r.field,_focus:{zIndex:"unset",...(n=r.field)==null?void 0:n._focus}};return $.jsxs(ke.div,{className:"chakra-select__wrapper",__css:v,...g,...i,children:[$.jsx(tJ,{ref:t,height:u??l,minH:c??f,placeholder:o,...y,__css:b,children:e.children}),$.jsx(nJ,{"data-disabled":mo(y.disabled),...(d||a)&&{color:d||a},__css:r.icon,...h&&{fontSize:h},children:s})]})});LR.displayName="Select";var CAe=e=>$.jsx("svg",{viewBox:"0 0 24 24",...e,children:$.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),EAe=ke("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),nJ=e=>{const{children:t=$.jsx(CAe,{}),...n}=e,r=M.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return $.jsx(EAe,{...n,className:"chakra-select__icon-wrapper",children:M.isValidElement(t)?r:null})};nJ.displayName="SelectIcon";var[_Ae,$Ae,AAe,TAe]=MQ();function PAe(e){var t;const{defaultIndex:n,onChange:r,index:i,isManual:o,isLazy:s,lazyBehavior:a="unmount",orientation:l="horizontal",direction:u="ltr",...c}=e,[f,d]=M.useState(n??0),[h,p]=RQ({defaultValue:n??0,value:i,onChange:r});M.useEffect(()=>{i!=null&&d(i)},[i]);const g=AAe(),m=M.useId();return{id:`tabs-${(t=e.id)!=null?t:m}`,selectedIndex:h,focusedIndex:f,setSelectedIndex:p,setFocusedIndex:d,isManual:o,isLazy:s,lazyBehavior:a,orientation:l,descendants:g,direction:u,htmlProps:c}}var[MAe,VC]=jn({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function FAe(e){const{focusedIndex:t,orientation:n,direction:r}=VC(),i=$Ae(),o=M.useCallback(s=>{const a=()=>{var v;const b=i.nextEnabled(t);b&&((v=b.node)==null||v.focus())},l=()=>{var v;const b=i.prevEnabled(t);b&&((v=b.node)==null||v.focus())},u=()=>{var v;const b=i.firstEnabled();b&&((v=b.node)==null||v.focus())},c=()=>{var v;const b=i.lastEnabled();b&&((v=b.node)==null||v.focus())},f=n==="horizontal",d=n==="vertical",h=s.key,p=r==="ltr"?"ArrowLeft":"ArrowRight",g=r==="ltr"?"ArrowRight":"ArrowLeft",y={[p]:()=>f&&l(),[g]:()=>f&&a(),ArrowDown:()=>d&&a(),ArrowUp:()=>d&&l(),Home:u,End:c}[h];y&&(s.preventDefault(),y(s))},[i,t,n,r]);return{...e,role:"tablist","aria-orientation":n,onKeyDown:tc(e.onKeyDown,o)}}function RAe(e){const{isDisabled:t=!1,isFocusable:n=!1,...r}=e,{setSelectedIndex:i,isManual:o,id:s,setFocusedIndex:a,selectedIndex:l}=VC(),{index:u,register:c}=TAe({disabled:t&&!n}),f=u===l,d=()=>{i(u)},h=()=>{a(u),!o&&!(t&&n)&&i(u)};return{...wAe({...r,ref:vd(c,e.ref),isDisabled:t,isFocusable:n,onClick:tc(e.onClick,d)}),id:rJ(s,u),role:"tab",tabIndex:f?0:-1,type:"button","aria-selected":f,"aria-controls":iJ(s,u),onFocus:t?void 0:tc(e.onFocus,h)}}var[OAe,DAe]=jn({});function NAe(e){const t=VC(),{id:n,selectedIndex:r}=t,o=BC(e.children).map((s,a)=>M.createElement(OAe,{key:a,value:{isSelected:a===r,id:iJ(n,a),tabId:rJ(n,a),selectedIndex:r}},s));return{...e,children:o}}function IAe(e){const{children:t,...n}=e,{isLazy:r,lazyBehavior:i}=VC(),{isSelected:o,id:s,tabId:a}=DAe(),l=M.useRef(!1);o&&(l.current=!0);const u=SAe({wasSelected:l.current,isSelected:o,enabled:r,mode:i});return{tabIndex:0,...n,children:u?t:null,role:"tabpanel","aria-labelledby":a,hidden:!o,id:s}}function rJ(e,t){return`${e}--tab-${t}`}function iJ(e,t){return`${e}--tabpanel-${t}`}var[LAe,WC]=jn({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),oJ=_e(function(t,n){const r=Yl("Tabs",t),{children:i,className:o,...s}=ir(t),{htmlProps:a,descendants:l,...u}=PAe(s),c=M.useMemo(()=>u,[u]),{isFitted:f,...d}=a,h={position:"relative",...r.root};return $.jsx(_Ae,{value:l,children:$.jsx(MAe,{value:c,children:$.jsx(LAe,{value:r,children:$.jsx(ke.div,{className:Xe("chakra-tabs",o),ref:n,...d,__css:h,children:i})})})})});oJ.displayName="Tabs";var sJ=_e(function(t,n){const r=FAe({...t,ref:n}),o={display:"flex",...WC().tablist};return $.jsx(ke.div,{...r,className:Xe("chakra-tabs__tablist",t.className),__css:o})});sJ.displayName="TabList";var lm=_e(function(t,n){const r=IAe({...t,ref:n}),i=WC();return $.jsx(ke.div,{outline:"0",...r,className:Xe("chakra-tabs__tab-panel",t.className),__css:i.tabpanel})});lm.displayName="TabPanel";var aJ=_e(function(t,n){const r=NAe(t),i=WC();return $.jsx(ke.div,{...r,width:"100%",ref:n,className:Xe("chakra-tabs__tab-panels",t.className),__css:i.tabpanels})});aJ.displayName="TabPanels";var lJ=_e(function(t,n){const r=WC(),i=RAe({...t,ref:n}),o={outline:"0",display:"flex",alignItems:"center",justifyContent:"center",...r.tab};return $.jsx(ke.button,{...i,className:Xe("chakra-tabs__tab",t.className),__css:o})});lJ.displayName="Tab";var[zAe,uJ]=jn({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),cJ=_e((e,t)=>{const n=Yl("Tag",e),r=ir(e),i={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...n.container};return $.jsx(zAe,{value:n,children:$.jsx(ke.span,{ref:t,...r,__css:i})})});cJ.displayName="Tag";var fJ=_e((e,t)=>{const n=uJ();return $.jsx(ke.span,{ref:t,noOfLines:1,...e,__css:n.label})});fJ.displayName="TagLabel";var jAe=_e((e,t)=>$.jsx(yt,{ref:t,verticalAlign:"top",marginEnd:"0.5rem",...e}));jAe.displayName="TagLeftIcon";var BAe=_e((e,t)=>$.jsx(yt,{ref:t,verticalAlign:"top",marginStart:"0.5rem",...e}));BAe.displayName="TagRightIcon";var dJ=e=>$.jsx(yt,{verticalAlign:"inherit",viewBox:"0 0 512 512",...e,children:$.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});dJ.displayName="TagCloseIcon";var hJ=_e((e,t)=>{const{isDisabled:n,children:r,...i}=e,s={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...uJ().closeButton};return $.jsx(ke.button,{ref:t,"aria-label":"close",...i,type:"button",disabled:n,__css:s,children:r||$.jsx(dJ,{})})});hJ.displayName="TagCloseButton";function UAe(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pJ=Symbol("Comlink.proxy"),VAe=Symbol("Comlink.endpoint"),gJ=Symbol("Comlink.releaseProxy"),SA=Symbol("Comlink.finalizer"),Lw=Symbol("Comlink.thrown"),mJ=e=>typeof e=="object"&&e!==null||typeof e=="function",WAe={canHandle:e=>mJ(e)&&e[pJ],serialize(e){const{port1:t,port2:n}=new MessageChannel;return vJ(e,t),[n,[n]]},deserialize(e){return e.start(),xJ(e)}},HAe={canHandle:e=>mJ(e)&&Lw in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},yJ=new Map([["proxy",WAe],["throw",HAe]]);function qAe(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function vJ(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(i){if(!i||!i.data)return;if(!qAe(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:o,type:s,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(Cf);let u;try{const c=a.slice(0,-1).reduce((d,h)=>d[h],e),f=a.reduce((d,h)=>d[h],e);switch(s){case"GET":u=f;break;case"SET":c[a.slice(-1)[0]]=Cf(i.data.value),u=!0;break;case"APPLY":u=f.apply(c,l);break;case"CONSTRUCT":{const d=new f(...l);u=JAe(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;vJ(e,h),u=QAe(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[Lw]:0}}Promise.resolve(u).catch(c=>({value:c,[Lw]:0})).then(c=>{const[f,d]=nS(c);t.postMessage(Object.assign(Object.assign({},f),{id:o}),d),s==="RELEASE"&&(t.removeEventListener("message",r),bJ(t),SA in e&&typeof e[SA]=="function"&&e[SA]())}).catch(c=>{const[f,d]=nS({value:new TypeError("Unserializable return value"),[Lw]:0});t.postMessage(Object.assign(Object.assign({},f),{id:o}),d)})}),t.start&&t.start()}function GAe(e){return e.constructor.name==="MessagePort"}function bJ(e){GAe(e)&&e.close()}function xJ(e,t){return N3(e,[],t)}function px(e){if(e)throw new Error("Proxy has been released and is not useable")}function wJ(e){return Bh(e,{type:"RELEASE"}).then(()=>{bJ(e)})}const eS=new WeakMap,tS="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(eS.get(e)||0)-1;eS.set(e,t),t===0&&wJ(e)});function YAe(e,t){const n=(eS.get(t)||0)+1;eS.set(t,n),tS&&tS.register(e,t,e)}function XAe(e){tS&&tS.unregister(e)}function N3(e,t=[],n=function(){}){let r=!1;const i=new Proxy(n,{get(o,s){if(px(r),s===gJ)return()=>{XAe(i),wJ(e),r=!0};if(s==="then"){if(t.length===0)return{then:()=>i};const a=Bh(e,{type:"GET",path:t.map(l=>l.toString())}).then(Cf);return a.then.bind(a)}return N3(e,[...t,s])},set(o,s,a){px(r);const[l,u]=nS(a);return Bh(e,{type:"SET",path:[...t,s].map(c=>c.toString()),value:l},u).then(Cf)},apply(o,s,a){px(r);const l=t[t.length-1];if(l===VAe)return Bh(e,{type:"ENDPOINT"}).then(Cf);if(l==="bind")return N3(e,t.slice(0,-1));const[u,c]=h7(a);return Bh(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},c).then(Cf)},construct(o,s){px(r);const[a,l]=h7(s);return Bh(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:a},l).then(Cf)}});return YAe(i,e),i}function KAe(e){return Array.prototype.concat.apply([],e)}function h7(e){const t=e.map(nS);return[t.map(n=>n[0]),KAe(t.map(n=>n[1]))]}const SJ=new WeakMap;function QAe(e,t){return SJ.set(e,t),e}function JAe(e){return Object.assign(e,{[pJ]:!0})}function nS(e){for(const[t,n]of yJ)if(n.canHandle(e)){const[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},SJ.get(e)||[]]}function Cf(e){switch(e.type){case"HANDLER":return yJ.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Bh(e,t,n){return new Promise(r=>{const i=ZAe();e.addEventListener("message",function o(s){!s.data||!s.data.id||s.data.id!==i||(e.removeEventListener("message",o),r(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)})}function ZAe(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function eTe(e){return new Worker("/Swipytics/assets/pyodide-worker-sTp3IzDK.js",{type:"module",name:e==null?void 0:e.name})}let yo=null,vr=null;const tTe=async(e,t)=>{if(!yo||!vr)throw new Error("pyodide isn't loaded yet");return await vr.runPython(e,t)},nTe=async(e,t)=>{if(!yo||!vr)throw new Error("pyodide isn't loaded yet");return vr.callPythonFunction(e,t)},rTe=async(e,t)=>{if(!yo||!vr)throw new Error("pyodide isn't loaded yet");return vr.writeFile(e,t)},iTe=async e=>{if(!yo||!vr)throw new Error("pyodide isn't loaded yet");return vr.readFile(e)},oTe=async e=>(yo||(yo=new eTe({name:"pyodide-worker"}),vr=xJ(yo),await vr.initialize(e)),{runPython:tTe,callPythonFunction:nTe,writeFile:rTe,readFile:iTe,terminate:()=>{yo==null||yo.terminate(),yo=null,vr==null||vr[gJ](),vr=null},initialize:async t=>{if(!yo||!vr)throw new Error("pyodide isn't loaded yet");await vr.initialize(t)}});let Dy;async function sTe(e){const{packages:t}=e||{};return Dy===void 0&&(Dy=await aTe(t)),Dy}const aTe=async e=>(Dy=await oTe(e),Dy),Gd=async()=>await sTe({packages:["draco"]});async function lTe({chart:e}){return await(await Gd()).callPythonFunction("appendChart",[e])}async function uTe({chart:e}){return await(await fetch("/api/appendChart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chart:e})})).json()}const cTe={pyodide:lTe,server:uTe};async function fTe(){return await(await Gd()).callPythonFunction("appendNextChart",[])}async function dTe(){return await(await fetch("/api/appendNextChart")).json()}const hTe={server:dTe,pyodide:fTe};async function pTe({fieldNames:e}){return await(await Gd()).callPythonFunction("browseCharts",[e])}async function gTe({fieldNames:e}){return await(await fetch("/api/browseCharts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({field_names:e})})).json()}const mTe={pyodide:pTe,server:gTe};async function yTe({session:e}){return await(await Gd()).callPythonFunction("loadSession",[e])}async function vTe({session:e}){return await(await fetch("/api/loadSession",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}const bTe={pyodide:yTe,server:vTe};async function xTe({key:e,preferred:t}){await(await Gd()).callPythonFunction("setPreferred",[e,t])}async function wTe({key:e,preferred:t}){await fetch("/api/setPreferred",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:e,preferred:t})})}const STe={pyodide:xTe,server:wTe};async function kTe({filename:e,fileBuffer:t}){await(await Gd()).writeFile(e,t)}async function CTe({filename:e,fileBuffer:t}){const n=new Blob([t]),r=new FormData;r.append("file",n,e),await fetch("/api/writeFile",{method:"POST",body:r})}const ETe={pyodide:kTe,server:CTe},_Te={appendChart:cTe,appendNextChart:hTe,browseCharts:mTe,loadSession:bTe,writeFile:ETe,setPreferred:STe};async function $Te(e,t,n){return await _Te[t][e](n)}class ATe{constructor(){ae(this,"python","pyodide");ae(this,"serverConnectable",!1);ae(this,"pyodideLoaded",!1);ae(this,"emitter",UAe());this.initializeRouter()}async initializeRouter(){await Promise.all([this.loadPyodide(),this.checkServerConnection()])}async loadPyodide(){if(!this.pyodideLoaded)try{await Gd(),this.pyodideLoaded=!0,this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}catch(t){console.error("error while connecting pyodide:",t),this.pyodideLoaded=!1,this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}}async checkServerConnection(){try{const t=await fetch("/api");this.serverConnectable=t.ok,this.serverConnectable&&(this.python="server"),this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}catch(t){this.serverConnectable=!1,console.error("error while connecting server:",t),this.emitter.emit("loadingStatusChange",this.getLoadingStatus())}}getPythonType(){return this.python}setPython(t){return t==="server"&&!this.serverConnectable?!1:(this.python=t,this.emitter.emit("loadingStatusChange",this.getLoadingStatus()),!0)}getLoadingStatus(){return{loadingPyodide:this.python==="pyodide"&&!this.pyodideLoaded,loadingServer:this.python==="server"&&!this.serverConnectable,loading:this.python==="pyodide"&&!this.pyodideLoaded||this.python==="server"&&!this.serverConnectable}}on(t,n){this.emitter.on(t,n)}off(t,n){this.emitter.off(t,n)}async call(t,n){if(this.getLoadingStatus().loading)return console.error("Router is not loaded yet"),null;try{return await $Te(this.getPythonType(),t,n)}catch(r){return console.error("error while calling endpoint:",r),null}}async lazyCall(t,n){return new Promise(r=>{const i=()=>{this.getLoadingStatus().loading||(this.off("loadingStatusChange",i),r(this.call(t,n)))};this.on("loadingStatusChange",i),i()})}}const Eo=new ATe;function p7(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const kJ=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),g7=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);g7&&parseFloat(g7[1]);const gx=globalThis,xh=globalThis.process||{};function TTe(e){var r,i;if(typeof window<"u"&&((r=window.process)==null?void 0:r.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const n=typeof navigator<"u"&&navigator.userAgent;return!!(n&&n.indexOf("Electron")>=0)}function zR(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||TTe()}const CJ="4.0.7";function PTe(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch{return null}}class MTe{constructor(t,n,r="sessionStorage"){this.storage=PTe(r),this.id=t,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let t={};if(this.storage){const n=this.storage.getItem(this.id);t=n?JSON.parse(n):{}}return Object.assign(this.config,t),this}}function FTe(e){let t;return e<10?t=`${e.toFixed(2)}ms`:e<100?t=`${e.toFixed(1)}ms`:e<1e3?t=`${e.toFixed(0)}ms`:t=`${(e/1e3).toFixed(2)}s`,t}function RTe(e,t=8){const n=Math.max(t-e.length,0);return`${" ".repeat(n)}${e}`}var rS;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(rS||(rS={}));const OTe=10;function m7(e){return typeof e!="string"?e:(e=e.toUpperCase(),rS[e]||rS.WHITE)}function DTe(e,t,n){return!zR&&typeof e=="string"&&(t&&(e=`\x1B[${m7(t)}m${e}\x1B[39m`),n&&(e=`\x1B[${m7(n)+OTe}m${e}\x1B[49m`)),e}function NTe(e,t=["constructor"]){const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=e;for(const o of r){const s=i[o];typeof s=="function"&&(t.find(a=>o===a)||(i[o]=s.bind(e)))}}function jR(e,t){if(!e)throw new Error("Assertion failed")}function wh(){var t,n,r;let e;if(zR()&&gx.performance)e=(n=(t=gx==null?void 0:gx.performance)==null?void 0:t.now)==null?void 0:n.call(t);else if("hrtime"in xh){const i=(r=xh==null?void 0:xh.hrtime)==null?void 0:r.call(xh);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const Sh={debug:zR()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},ITe={enabled:!0,level:0};function kh(){}const y7={},v7={once:!0};let BR=class{constructor({id:t}={id:""}){this.VERSION=CJ,this._startTs=wh(),this._deltaTs=wh(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new MTe(`__probe-${this.id}__`,ITe),this.timeStamp(`${this.id} started`),NTe(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((wh()-this._startTs).toPrecision(10))}getDelta(){return Number((wh()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,n){this._storage.setConfiguration({[t]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,n){if(!t)throw new Error(n||"Assertion failed")}warn(t){return this._getLogFunction(0,t,Sh.warn,arguments,v7)}error(t){return this._getLogFunction(0,t,Sh.error,arguments)}deprecated(t,n){return this.warn(`\`${t}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(t,n){return this.error(`\`${t}\` has been removed. Use \`${n}\` instead`)}probe(t,n){return this._getLogFunction(t,n,Sh.log,arguments,{time:!0,once:!0})}log(t,n){return this._getLogFunction(t,n,Sh.debug,arguments)}info(t,n){return this._getLogFunction(t,n,console.info,arguments)}once(t,n){return this._getLogFunction(t,n,Sh.debug||Sh.info,arguments,v7)}table(t,n,r){return n?this._getLogFunction(t,n,console.table||kh,r&&[r],{tag:zTe(n)}):kh}time(t,n){return this._getLogFunction(t,n,console.time?console.time:console.info)}timeEnd(t,n){return this._getLogFunction(t,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,n){return this._getLogFunction(t,n,console.timeStamp||kh)}group(t,n,r={collapsed:!1}){const i=b7({logLevel:t,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,n,r={}){return this.group(t,n,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||kh)}withGroup(t,n,r){this.group(t,n)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=EJ(t)}_getLogFunction(t,n,r,i,o){if(this._shouldLog(t)){o=b7({logLevel:t,message:n,args:i,opts:o}),r=r||o.method,jR(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=wh();const s=o.tag||o.message;if(o.once&&s)if(!y7[s])y7[s]=wh();else return kh;return n=LTe(this.id,o.message,o),r.bind(console,n,...o.args)}return kh}};BR.VERSION=CJ;function EJ(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return jR(Number.isFinite(t)&&t>=0),t}function b7(e){const{logLevel:t,message:n}=e;e.logLevel=EJ(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":n!==void 0&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return jR(i==="string"||i==="object"),Object.assign(e,{args:r},e.opts)}function LTe(e,t,n){if(typeof t=="string"){const r=n.time?RTe(FTe(n.total)):"";t=n.time?`${e}: ${r}  ${t}`:`${e}: ${t}`,t=DTe(t,n.color,n.background)}return t}function zTe(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}function jTe(e,t){return _J(e||{},t)}function _J(e,t,n=0){if(n>3)return t;const r={...e};for(const[i,o]of Object.entries(t))o&&typeof o=="object"&&!Array.isArray(o)?r[i]=_J(r[i]||{},t[i],n+1):r[i]=t[i];return r}const BTe="latest";function UTe(){var e;return(e=globalThis._loadersgl_)!=null&&e.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version}const VTe=UTe();function pc(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const Zf=typeof process!="object"||String(process)!=="[object process]"||process.browser,WTe=typeof window<"u"&&typeof window.orientation<"u",x7=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);x7&&parseFloat(x7[1]);class HTe{constructor(t,n){ae(this,"name");ae(this,"workerThread");ae(this,"isRunning",!0);ae(this,"result");ae(this,"_resolve",()=>{});ae(this,"_reject",()=>{});this.name=t,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(t,n){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:n})}done(t){pc(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){pc(this.isRunning),this.isRunning=!1,this._reject(t)}}class kA{terminate(){}}const CA=new Map;function qTe(e){pc(e.source&&!e.url||!e.source&&e.url);let t=CA.get(e.source||e.url);return t||(e.url&&(t=GTe(e.url),CA.set(e.url,t)),e.source&&(t=$J(e.source),CA.set(e.source,t))),pc(t),t}function GTe(e){if(!e.startsWith("http"))return e;const t=YTe(e);return $J(t)}function $J(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function YTe(e){return`try {
  importScripts('${e}');
} catch (error) {
  console.error(error);
  throw error;
}`}function AJ(e,t=!0,n){const r=n||new Set;if(e){if(w7(e))r.add(e);else if(w7(e.buffer))r.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)AJ(e[i],t,r)}}return n===void 0?Array.from(r):[]}function w7(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const EA=()=>{};class I3{constructor(t){ae(this,"name");ae(this,"source");ae(this,"url");ae(this,"terminated",!1);ae(this,"worker");ae(this,"onMessage");ae(this,"onError");ae(this,"_loadableURL","");const{name:n,source:r,url:i}=t;pc(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=EA,this.onError=o=>console.log(o),this.worker=Zf?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&Zf||typeof kA<"u"&&!Zf}destroy(){this.onMessage=EA,this.onError=EA,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,n){n=n||AJ(t),this.worker.postMessage(t,n)}_getErrorFromErrorEvent(t){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,t.message&&(n+=`${t.message} in `),t.lineno&&(n+=`:${t.lineno}:${t.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=qTe({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},t.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},t.onmessageerror=n=>console.error(n),t}_createNodeWorker(){let t;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new kA(r,{eval:!1})}else if(this.source)t=new kA(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",n=>{this.onMessage(n)}),t.on("error",n=>{this.onError(n)}),t.on("exit",n=>{}),t}}class XTe{constructor(t){ae(this,"name","unnamed");ae(this,"source");ae(this,"url");ae(this,"maxConcurrency",1);ae(this,"maxMobileConcurrency",1);ae(this,"onDebug",()=>{});ae(this,"reuseWorkers",!0);ae(this,"props",{});ae(this,"jobQueue",[]);ae(this,"idleQueue",[]);ae(this,"count",0);ae(this,"isDestroyed",!1);this.source=t.source,this.url=t.url,this.setProps(t)}static isSupported(){return I3.isSupported()}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,n=(i,o,s)=>i.done(s),r=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:n,onError:r,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:t,backlog:this.jobQueue.length});const r=new HTe(n.name,t);t.onMessage=i=>n.onMessage(r,i.type,i.payload),t.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!Zf||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new I3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return WTe?this.maxMobileConcurrency:this.maxConcurrency}}const KTe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},Cu=class Cu{constructor(t){ae(this,"props");ae(this,"workerPools",new Map);this.props={...KTe},this.setProps(t),this.workerPools=new Map}static isSupported(){return I3.isSupported()}static getWorkerFarm(t={}){return Cu._workerFarm=Cu._workerFarm||new Cu({}),Cu._workerFarm.setProps(t),Cu._workerFarm}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:n,source:r,url:i}=t;let o=this.workerPools.get(n);return o||(o=new XTe({name:n,source:r,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};ae(Cu,"_workerFarm");let iS=Cu;function QTe(e,t={}){const n=t[e.id]||{},r=Zf?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let i=n.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(Zf?i=`modules/${e.module}/dist/${r}`:i=`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!i){let o=e.version;o==="latest"&&(o=BTe);const s=o?`@${o}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${s}/dist/${r}`}return pc(i),i}function JTe(e,t=VTe){pc(e,"no worker provided");const n=e.version;return!(!t||!n)}function ZTe(e,t){return!iS.isSupported()||!Zf&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function e5e(e,t,n,r,i){const o=e.id,s=QTe(e,n),l=iS.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const u=await l.startJob("process-on-worker",t5e.bind(null,i));return u.postMessage("process",{input:t,options:n,context:r}),await(await u.result).result}async function t5e(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(new Error(r.error));break;case"process":const{id:i,input:o,options:s}=r;try{const a=await e(o,s);t.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function n5e(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function r5e(...e){return i5e(e)}function i5e(e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),n=t.reduce((o,s)=>o+s.byteLength,0),r=new Uint8Array(n);let i=0;for(const o of t)r.set(o,i),i+=o.byteLength;return r.buffer}async function o5e(e){const t=[];for await(const n of e)t.push(n);return r5e(...t)}let s5e="";const S7={};function a5e(e){for(const t in S7)if(e.startsWith(t)){const n=S7[t];e=e.replace(t,n)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e=`${s5e}${e}`),e}const l5e="4.2.1",u5e={dataType:null,batchType:null,name:"JSON",id:"json",module:"json",version:l5e,extensions:["json","geojson"],mimeTypes:["application/json"],category:"json",text:!0,parseTextSync:k7,parse:async e=>k7(new TextDecoder().decode(e)),options:{}};function k7(e){return JSON.parse(e)}function c5e(e){return e&&typeof e=="object"&&e.isBuffer}function TJ(e){if(c5e(e))return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function PJ(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function f5e(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}const d5e=e=>typeof e=="boolean",Ny=e=>typeof e=="function",Pv=e=>e!==null&&typeof e=="object",C7=e=>Pv(e)&&e.constructor==={}.constructor,h5e=e=>!!e&&typeof e[Symbol.iterator]=="function",p5e=e=>e&&typeof e[Symbol.asyncIterator]=="function",Yd=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,um=e=>typeof Blob<"u"&&e instanceof Blob,g5e=e=>e&&typeof e=="object"&&e.isBuffer,m5e=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||Pv(e)&&Ny(e.tee)&&Ny(e.cancel)&&Ny(e.getReader),y5e=e=>Pv(e)&&Ny(e.read)&&Ny(e.pipe)&&d5e(e.readable),MJ=e=>m5e(e)||y5e(e);class v5e extends Error{constructor(n,r){super(n);ae(this,"reason");ae(this,"url");ae(this,"response");this.reason=r.reason,this.url=r.url,this.response=r.response}}const b5e=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,x5e=/^([-\w.]+\/[-\w.+]+)/;function E7(e,t){return e.toLowerCase()===t.toLowerCase()}function w5e(e){const t=x5e.exec(e);return t?t[1]:e}function _7(e){const t=b5e.exec(e);return t?t[1]:""}const FJ=/\?.*/;function S5e(e){const t=e.match(FJ);return t&&t[0]}function UR(e){return e.replace(FJ,"")}function k5e(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}function HC(e){return Yd(e)?e.url:um(e)?e.name||"":typeof e=="string"?e:""}function VR(e){if(Yd(e)){const t=e,n=t.headers.get("content-type")||"",r=UR(t.url);return w5e(n)||_7(r)}return um(e)?e.type||"":typeof e=="string"?_7(e):""}function C5e(e){return Yd(e)?e.headers["content-length"]||-1:um(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}async function RJ(e){if(Yd(e))return e;const t={},n=C5e(e);n>=0&&(t["content-length"]=String(n));const r=HC(e),i=VR(e);i&&(t["content-type"]=i);const o=await $5e(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const s=new Response(e,{headers:t});return Object.defineProperty(s,"url",{value:r}),s}async function E5e(e){if(!e.ok)throw await _5e(e)}async function _5e(e){const t=k5e(e.url);let n=`Failed to fetch resource (${e.status}) ${e.statusText}: ${t}`;n=n.length>100?`${n.slice(0,100)}...`:n;const r={reason:e.statusText,url:e.url,response:e};try{const i=e.headers.get("Content-Type");r.reason=i!=null&&i.includes("application/json")?await e.json():e.text()}catch{}return new v5e(n,r)}async function $5e(e){if(typeof e=="string")return`data:,${e.slice(0,5)}`;if(e instanceof Blob){const n=e.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=o=>{var s;return r((s=o==null?void 0:o.target)==null?void 0:s.result)},i.readAsDataURL(n)})}if(e instanceof ArrayBuffer){const n=e.slice(0,5);return`data:base64,${A5e(n)}`}return null}function A5e(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}function T5e(e){return!P5e(e)&&!M5e(e)}function P5e(e){return e.startsWith("http:")||e.startsWith("https:")}function M5e(e){return e.startsWith("data:")}async function L3(e,t){var n,r;if(typeof e=="string"){const i=a5e(e);return T5e(i)&&(n=globalThis.loaders)!=null&&n.fetchNode?(r=globalThis.loaders)==null?void 0:r.fetchNode(i,t):await fetch(i,t)}return await RJ(e)}const $7=new BR({id:"loaders.gl"});class F5e{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class R5e{constructor(){ae(this,"console");this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const OJ={fetch:null,mimeType:void 0,nothrow:!1,log:new R5e,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:kJ,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},O5e={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function DJ(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function NJ(){const e=DJ();return e.globalOptions=e.globalOptions||{...OJ},e.globalOptions}function D5e(e,t,n,r){return n=n||[],n=Array.isArray(n)?n:[n],N5e(e,n),L5e(t,e,r)}function N5e(e,t){A7(e,null,OJ,O5e,t);for(const n of t){const r=e&&e[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};A7(r,n.id,i,o,t)}}function A7(e,t,n,r,i){const o=t||"Top level",s=t?`${t}.`:"";for(const a in e){const l=!t&&Pv(e[a]),u=a==="baseUri"&&!t,c=a==="workerUrl"&&t;if(!(a in n)&&!u&&!c){if(a in r)$7.warn(`${o} loader option '${s}${a}' no longer supported, use '${r[a]}'`)();else if(!l){const f=I5e(a,i);$7.warn(`${o} loader option '${s}${a}' not recognized. ${f}`)()}}}}function I5e(e,t){const n=e.toLowerCase();let r="";for(const i of t)for(const o in i.options){if(e===o)return`Did you mean '${i.id}.${o}'?`;const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||`Did you mean '${i.id}.${o}'?`)}return r}function L5e(e,t,n){const i={...e.options||{}};return z5e(i,n),i.log===null&&(i.log=new F5e),T7(i,NJ()),T7(i,t),i}function T7(e,t){for(const n in t)if(n in t){const r=t[n];C7(r)&&C7(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}function z5e(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function IJ(e){return e?(Array.isArray(e)&&(e=e[0]),Array.isArray(e==null?void 0:e.extensions)):!1}function LJ(e){p7(e,"null loader"),p7(IJ(e),"invalid loader");let t;return Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e!=null&&e.parseTextSync||e!=null&&e.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const j5e=()=>{const e=DJ();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function B5e(){return j5e()}const U5e=new BR({id:"loaders.gl"}),V5e=/\.([^.]+)$/;async function W5e(e,t=[],n,r){if(!zJ(e))return null;let i=P7(e,t,{...n,nothrow:!0},r);if(i)return i;if(um(e)&&(e=await e.slice(0,10).arrayBuffer(),i=P7(e,t,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(jJ(e));return i}function P7(e,t=[],n,r){if(!zJ(e))return null;if(t&&!Array.isArray(t))return LJ(t);let i=[];t&&(i=i.concat(t)),n!=null&&n.ignoreRegisteredLoaders||i.push(...B5e()),q5e(i);const o=H5e(e,i,n,r);if(!o&&!(n!=null&&n.nothrow))throw new Error(jJ(e));return o}function H5e(e,t,n,r){const i=HC(e),o=VR(e),s=UR(i)||(r==null?void 0:r.url);let a=null,l="";return n!=null&&n.mimeType&&(a=_A(t,n==null?void 0:n.mimeType),l=`match forced by supplied MIME type ${n==null?void 0:n.mimeType}`),a=a||G5e(t,s),l=l||(a?`matched url ${s}`:""),a=a||_A(t,o),l=l||(a?`matched MIME type ${o}`:""),a=a||X5e(t,e),l=l||(a?`matched initial data ${BJ(e)}`:""),n!=null&&n.fallbackMimeType&&(a=a||_A(t,n==null?void 0:n.fallbackMimeType),l=l||(a?`matched fallback MIME type ${o}`:"")),l&&U5e.log(1,`selectLoader selected ${a==null?void 0:a.name}: ${l}.`),a}function zJ(e){return!(e instanceof Response&&e.status===204)}function jJ(e){const t=HC(e),n=VR(e);let r="No valid loader found (";r+=t?`${PJ(t)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const i=e?BJ(e):"";return r+=i?` first bytes: "${i}"`:"first bytes: not available",r+=")",r}function q5e(e){for(const t of e)LJ(t)}function G5e(e,t){const n=t&&V5e.exec(t),r=n&&n[1];return r?Y5e(e,r):null}function Y5e(e,t){t=t.toLowerCase();for(const n of e)for(const r of n.extensions)if(r.toLowerCase()===t)return n;return null}function _A(e,t){var n;for(const r of e)if((n=r.mimeTypes)!=null&&n.some(i=>E7(t,i))||E7(t,`application/x.${r.id}`))return r;return null}function X5e(e,t){if(!t)return null;for(const n of e)if(typeof t=="string"){if(K5e(t,n))return n}else if(ArrayBuffer.isView(t)){if(M7(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer&&M7(t,0,n))return n;return null}function K5e(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>e.startsWith(r))}function M7(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>Q5e(e,t,n,i))}function Q5e(e,t,n,r){if(r instanceof ArrayBuffer)return n5e(r,e,r.byteLength);switch(typeof r){case"function":return r(e);case"string":const i=z3(e,t,r.length);return r===i;default:return!1}}function BJ(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?z3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?z3(e,0,t):""}function z3(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(t+o));return i}const J5e=256*1024;function*Z5e(e,t){const n=(t==null?void 0:t.chunkSize)||J5e;let r=0;const i=new TextEncoder;for(;r<e.length;){const o=Math.min(e.length-r,n),s=e.slice(r,r+o);r+=o,yield i.encode(s)}}const e3e=256*1024;function*t3e(e,t={}){const{chunkSize:n=e3e}=t;let r=0;for(;r<e.byteLength;){const i=Math.min(e.byteLength-r,n),o=new ArrayBuffer(i),s=new Uint8Array(e,r,i);new Uint8Array(o).set(s),r+=i,yield o}}const n3e=1024*1024;async function*r3e(e,t){const n=(t==null?void 0:t.chunkSize)||n3e;let r=0;for(;r<e.size;){const i=r+n,o=await e.slice(r,i).arrayBuffer();r=i,yield o}}function F7(e,t){return kJ?i3e(e,t):o3e(e)}async function*i3e(e,t){const n=e.getReader();let r;try{for(;;){const i=r||n.read();t!=null&&t._streamReadAhead&&(r=n.read());const{done:o,value:s}=await i;if(o)return;yield TJ(s)}}catch{n.releaseLock()}}async function*o3e(e,t){for await(const n of e)yield TJ(n)}function s3e(e,t){if(typeof e=="string")return Z5e(e,t);if(e instanceof ArrayBuffer)return t3e(e,t);if(um(e))return r3e(e,t);if(MJ(e))return F7(e,t);if(Yd(e))return F7(e.body,t);throw new Error("makeIterator")}const UJ="Cannot convert supplied data type";function a3e(e,t,n){if(t.text&&typeof e=="string")return e;if(g5e(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let r=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(e.byteOffset,e.byteOffset+i)),r}throw new Error(UJ)}async function l3e(e,t,n){const r=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||r)return a3e(e,t);if(um(e)&&(e=await RJ(e)),Yd(e)){const i=e;return await E5e(i),t.binary?await i.arrayBuffer():await i.text()}if(MJ(e)&&(e=s3e(e,n)),h5e(e)||p5e(e))return o5e(e);throw new Error(UJ)}function u3e(e,t){const n=NJ(),r=e||n;return typeof r.fetch=="function"?r.fetch:Pv(r.fetch)?i=>L3(i,r.fetch):t!=null&&t.fetch?t==null?void 0:t.fetch:L3}function c3e(e,t,n){if(n)return n;const r={fetch:u3e(t,e),...e};if(r.url){const i=UR(r.url);r.baseUrl=i,r.queryString=S5e(r.url),r.filename=PJ(i),r.baseUrl=f5e(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function f3e(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const r=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function WR(e,t,n,r){t&&!Array.isArray(t)&&!IJ(t)&&(r=void 0,n=t,t=void 0),e=await e,n=n||{};const i=HC(e),s=f3e(t,r),a=await W5e(e,s,n);return a?(n=D5e(n,a,s,i),r=c3e({url:i,_parse:WR,loaders:s},n,r||null),await d3e(a,e,n,r)):null}async function d3e(e,t,n,r){if(JTe(e),n=jTe(e.options,n),Yd(t)){const o=t,{ok:s,redirected:a,status:l,statusText:u,type:c,url:f}=o,d=Object.fromEntries(o.headers.entries());r.response={headers:d,ok:s,redirected:a,status:l,statusText:u,type:c,url:f}}t=await l3e(t,e,n);const i=e;if(i.parseTextSync&&typeof t=="string")return i.parseTextSync(t,n,r);if(ZTe(e,n))return await e5e(e,t,n,r,WR);if(i.parseText&&typeof t=="string")return await i.parseText(t,n,r);if(i.parse)return await i.parse(t,n,r);throw pc(!i.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}const R7=100;class h3e{constructor(t,n){ae(this,"schema");ae(this,"options");ae(this,"shape");ae(this,"length",0);ae(this,"rows",null);ae(this,"cursor",0);ae(this,"_headers",[]);if(this.options=n,this.schema=t,!Array.isArray(t)){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="array-row-table",this.rows=this.rows||new Array(R7),this.rows[this.length]=t,this.length++}addObjectRow(t,n){Number.isFinite(n)&&(this.cursor=n),this.shape="object-row-table",this.rows=this.rows||new Array(R7),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;return t?(t=t.slice(0,this.length),this.rows=null,{shape:this.shape||"array-row-table",batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}function VJ(e,t){if(!e)throw new Error("null row");const n={};if(t)for(let r=0;r<t.length;r++)n[t[r]]=e[r];else for(let r=0;r<e.length;r++){const i=`column-${r}`;n[i]=e[r]}return n}function WJ(e,t){if(!e)throw new Error("null row");if(t){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=e[t[r]];return n}return Object.values(e)}function p3e(e){const t=[];for(let n=0;n<e.length;n++){const r=`column-${n}`;t.push(r)}return t}function g3e(e){return Object.keys(e)}const O7=100;class m3e{constructor(t,n){ae(this,"schema");ae(this,"options");ae(this,"length",0);ae(this,"objectRows",null);ae(this,"arrayRows",null);ae(this,"cursor",0);ae(this,"_headers",null);if(this.options=n,this.schema=t,t){this._headers=[];for(const r in t)this._headers[t[r].index]=t[r].name}}rowCount(){return this.length}addArrayRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=p3e(t)),this.options.shape){case"object-row-table":const r=VJ(t,this._headers);this.addObjectRow(r,n);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(O7),this.arrayRows[this.length]=t,this.length++;break}}addObjectRow(t,n){switch(Number.isFinite(n)&&(this.cursor=n),this._headers||(this._headers=g3e(t)),this.options.shape){case"array-row-table":const r=WJ(t,this._headers);this.addArrayRow(r,n);break;case"object-row-table":this.objectRows=this.objectRows||new Array(O7),this.objectRows[this.length]=t,this.length++;break}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}const y3e=100;class v3e{constructor(t,n){ae(this,"schema");ae(this,"length",0);ae(this,"allocated",0);ae(this,"columns",{});this.schema=t,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let n=0;for(const r in this.columns)this.columns[r][this.length]=t[n++];this.length++}addObjectRow(t){this._reallocateColumns();for(const n in t)this.columns[n][this.length]=t[n];this.length++}getBatch(){this._pruneColumns();const t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const r in this.schema){const i=this.schema[r];t[i.name]=this.columns[i.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:y3e,this.columns={};for(const t in this.schema){const n=this.schema[t],r=n.type||Float32Array,i=this.columns[n.index];if(i&&ArrayBuffer.isView(i)){const o=new r(this.allocated);o.set(i),this.columns[n.index]=o}else i?(i.length=this.allocated,this.columns[n.index]=i):this.columns[n.index]=new r(this.allocated)}}}_pruneColumns(){for(const[t,n]of Object.entries(this.columns))this.columns[t]=n.slice(0,this.length)}}const b3e={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},x3e="TableBatchBuilder",Jy=class Jy{constructor(t,n){ae(this,"schema");ae(this,"options");ae(this,"aggregator",null);ae(this,"batchCount",0);ae(this,"bytesUsed",0);ae(this,"isChunkComplete",!1);ae(this,"lastBatchEmittedMs",Date.now());ae(this,"totalLength",0);ae(this,"totalBytes",0);ae(this,"rowBytes",0);this.schema=t,this.options={...b3e,...n}}limitReached(){var t,n;return!!((t=this.options)!=null&&t.limit&&this.totalLength>=this.options.limit||(n=this.options)!=null&&n._limitMB&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){const n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),typeof t=="string"&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?t.length*8:Object.keys(t).length*8}_isFull(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;t!=null&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);const n=this.aggregator.getBatch();return n.count=this.batchCount,n.bytesUsed=this.bytesUsed,Object.assign(n,t),this.batchCount++,this.aggregator=null,n}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return m3e;case"columnar-table":return v3e;case"arrow-table":if(!Jy.ArrowBatch)throw new Error(x3e);return Jy.ArrowBatch;default:return h3e}}};ae(Jy,"ArrowBatch");let j3=Jy;class D7 extends Array{enqueue(t){return this.push(t)}dequeue(){return this.shift()}}class w3e{constructor(){ae(this,"_values");ae(this,"_settlers");ae(this,"_closed");this._values=new D7,this._settlers=new D7,this._closed=!1}close(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}[Symbol.asyncIterator](){return this}enqueue(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");const n=this._settlers.dequeue();t instanceof Error?n.reject(t):n.resolve({value:t})}else this._values.enqueue(t)}next(){if(this._values.length>0){const t=this._values.dequeue();return t instanceof Error?Promise.reject(t):Promise.resolve({value:t})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise((t,n)=>{this._settlers.enqueue({resolve:t,reject:n})})}}/* @license
Papa Parse
v5.0.0-beta.0
https://github.com/mholt/PapaParse
License: MIT
*/const N7="\uFEFF",zi={parse:S3e,unparse:k3e,RECORD_SEP:"",UNIT_SEP:"",BYTE_ORDER_MARK:N7,BAD_DELIMITERS:["\r",`
`,'"',N7],WORKERS_SUPPORTED:!1,NODE_STREAM_INPUT:1,LocalChunkSize:1024*1024*10,RemoteChunkSize:1024*1024*5,DefaultDelimiter:",",Parser:B3,ParserHandle:qJ,ChunkStreamer:HJ,StringStreamer:hg};function S3e(e,t,n){t=t||{};var r=t.dynamicTyping||!1;if(zr(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=zr(t.transform)?t.transform:!1,t.worker&&zi.WORKERS_SUPPORTED){var i=newWorker();i.userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=zr(t.step),t.chunk=zr(t.chunk),t.complete=zr(t.complete),t.error=zr(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id});return}var o=null;return typeof e=="string"&&(o=new hg(t)),o||(o=new n(t)),o.stream(e)}function k3e(e,t){var n=!1,r=!0,i=",",o=`\r
`,s='"',a=s+s,l=!1,u=null;f();var c=new RegExp(T1(s),"g");if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,l);if(typeof e[0]=="object")return h(u||d(e[0]),e,l)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:d(e.data[0])),!Array.isArray(e.data[0])&&typeof e.data[0]!="object"&&(e.data=[e.data])),h(e.fields||[],e.data||[],l);throw new Error("Unable to serialize unrecognized input");function f(){if(typeof t=="object"){if(typeof t.delimiter=="string"&&!zi.BAD_DELIMITERS.filter(function(m){return t.delimiter.indexOf(m)!==-1}).length&&(i=t.delimiter),(typeof t.quotes=="boolean"||Array.isArray(t.quotes))&&(n=t.quotes),(typeof t.skipEmptyLines=="boolean"||typeof t.skipEmptyLines=="string")&&(l=t.skipEmptyLines),typeof t.newline=="string"&&(o=t.newline),typeof t.quoteChar=="string"&&(s=t.quoteChar),typeof t.header=="boolean"&&(r=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");u=t.columns}t.escapeChar!==void 0&&(a=t.escapeChar+s)}}function d(m){if(typeof m!="object")return[];var y=[];for(var v in m)y.push(v);return y}function h(m,y,v){var b="";typeof m=="string"&&(m=JSON.parse(m)),typeof y=="string"&&(y=JSON.parse(y));var x=Array.isArray(m)&&m.length>0,w=!Array.isArray(y[0]);if(x&&r){for(var k=0;k<m.length;k++)k>0&&(b+=i),b+=p(m[k],k);y.length>0&&(b+=o)}for(var S=0;S<y.length;S++){var C=x?m.length:y[S].length,E=!1,A=x?Object.keys(y[S]).length===0:y[S].length===0;if(v&&!x&&(E=v==="greedy"?y[S].join("").trim()==="":y[S].length===1&&y[S][0].length===0),v==="greedy"&&x){for(var T=[],I=0;I<C;I++){var F=w?m[I]:I;T.push(y[S][F])}E=T.join("").trim()===""}if(!E){for(var R=0;R<C;R++){R>0&&!A&&(b+=i);var _=x&&w?m[R]:R;b+=p(y[S][_],R)}S<y.length-1&&(!v||C>0&&!A)&&(b+=o)}}return b}function p(m,y){if(typeof m>"u"||m===null)return"";if(m.constructor===Date)return JSON.stringify(m).slice(1,25);m=m.toString().replace(c,a);var v=typeof n=="boolean"&&n||Array.isArray(n)&&n[y]||g(m,zi.BAD_DELIMITERS)||m.indexOf(i)>-1||m.charAt(0)===" "||m.charAt(m.length-1)===" ";return v?s+m+s:m}function g(m,y){for(var v=0;v<y.length;v++)if(m.indexOf(y[v])>-1)return!0;return!1}}function HJ(e){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},t.call(this,e),this.parseChunk=function(n,r){if(this.isFirstChunk&&zr(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(n);i!==void 0&&(n=i)}this.isFirstChunk=!1;var o=this._partialLine+n;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!(this._handle.paused()||this._handle.aborted())){var a=s.meta.cursor;this._finished||(this._partialLine=o.substring(a-this._baseIndex),this._baseIndex=a),s&&s.data&&(this._rowCount+=s.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(zr(this._config.chunk)&&!r){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return;s=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),!this._completed&&l&&zr(this._config.complete)&&(!s||!s.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!l&&(!s||!s.meta.paused)&&this._nextChunk(),s}},this._sendError=function(n){zr(this._config.error)&&this._config.error(n)};function t(n){var r=HR(n);r.chunkSize=parseInt(r.chunkSize),!n.step&&!n.chunk&&(r.chunkSize=null),this._handle=new qJ(r),this._handle.streamer=this,this._config=r}}function hg(e){e=e||{},HJ.call(this,e);var t;this.stream=function(n){return t=n,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var n=this._config.chunkSize,r=n?t.substr(0,n):t;return t=n?t.substr(n):"",this._finished=!t,this.parseChunk(r)}}}hg.prototype=Object.create(hg.prototype);hg.prototype.constructor=hg;function qJ(e){var t=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,r=this,i=0,o=0,s,a,l=!1,u=!1,c,f=[],d={data:[],errors:[],meta:{}};if(zr(e.step)){var h=e.step;e.step=function(C){if(d=C,m())g();else{if(g(),!d.data||d.data.length===0)return;i+=C.data.length,e.preview&&i>e.preview?a.abort():h(d,r)}}}this.parse=function(C,E,A){var T=e.quoteChar||'"';if(e.newline||(e.newline=k(C,T)),c=!1,e.delimiter)zr(e.delimiter)&&(e.delimiter=e.delimiter(C),d.meta.delimiter=e.delimiter);else{var I=w(C,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);I.successful?e.delimiter=I.bestDelimiter:(c=!0,e.delimiter=zi.DefaultDelimiter),d.meta.delimiter=e.delimiter}var F=HR(e);return e.preview&&e.header&&F.preview++,s=C,a=new B3(F),d=a.parse(s,E,A),g(),l?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,a.abort(),s=s.substr(a.getCharIndex())},this.resume=function(){l=!1,r.streamer.parseChunk(s,!0)},this.aborted=function(){return u},this.abort=function(){u=!0,a.abort(),d.meta.aborted=!0,zr(e.complete)&&e.complete(d),s=""};function p(C){return e.skipEmptyLines==="greedy"?C.join("").trim()==="":C.length===1&&C[0].length===0}function g(){if(d&&c&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+zi.DefaultDelimiter+"'"),c=!1),e.skipEmptyLines)for(var C=0;C<d.data.length;C++)p(d.data[C])&&d.data.splice(C--,1);return m()&&y(),x()}function m(){return e.header&&f.length===0}function y(){if(!d)return;function C(A){zr(e.transformHeader)&&(A=e.transformHeader(A)),f.push(A)}if(Array.isArray(d.data[0])){for(var E=0;m()&&E<d.data.length;E++)d.data[E].forEach(C);d.data.splice(0,1)}else d.data.forEach(C)}function v(C){return e.dynamicTypingFunction&&e.dynamicTyping[C]===void 0&&(e.dynamicTyping[C]=e.dynamicTypingFunction(C)),(e.dynamicTyping[C]||e.dynamicTyping)===!0}function b(C,E){return v(C)?E==="true"||E==="TRUE"?!0:E==="false"||E==="FALSE"?!1:t.test(E)?parseFloat(E):n.test(E)?new Date(E):E===""?null:E:E}function x(){if(!d||!d.data||!e.header&&!e.dynamicTyping&&!e.transform)return d;function C(A,T){var I=e.header?{}:[],F;for(F=0;F<A.length;F++){var R=F,_=A[F];e.header&&(R=F>=f.length?"__parsed_extra":f[F]),e.transform&&(_=e.transform(_,R)),_=b(R,_),R==="__parsed_extra"?(I[R]=I[R]||[],I[R].push(_)):I[R]=_}return e.header&&(F>f.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+F,o+T):F<f.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+F,o+T)),I}var E=1;return!d.data[0]||Array.isArray(d.data[0])?(d.data=d.data.map(C),E=d.data.length):d.data=C(d.data,0),e.header&&d.meta&&(d.meta.fields=f),o+=E,d}function w(C,E,A,T,I){var F,R,_;I=I||[",","	","|",";",zi.RECORD_SEP,zi.UNIT_SEP];for(var P=0;P<I.length;P++){var N=I[P],D=0,L=0,U=0;_=void 0;for(var V=new B3({comments:T,delimiter:N,newline:E,preview:10}).parse(C),oe=0;oe<V.data.length;oe++){if(A&&p(V.data[oe])){U++;continue}var Q=V.data[oe].length;if(L+=Q,typeof _>"u"){_=0;continue}else Q>1&&(D+=Math.abs(Q-_),_=Q)}V.data.length>0&&(L/=V.data.length-U),(typeof R>"u"||D>R)&&L>1.99&&(R=D,F=N)}return e.delimiter=F,{successful:!!F,bestDelimiter:F}}function k(C,E){C=C.substr(0,1024*1024);var A=new RegExp(T1(E)+"([^]*?)"+T1(E),"gm");C=C.replace(A,"");var T=C.split("\r"),I=C.split(`
`),F=I.length>1&&I[0].length<T[0].length;if(T.length===1||F)return`
`;for(var R=0,_=0;_<T.length;_++)T[_][0]===`
`&&R++;return R>=T.length/2?`\r
`:"\r"}function S(C,E,A,T){d.errors.push({type:C,code:E,message:A,row:T})}}function T1(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function B3(e){e=e||{};var t=e.delimiter,n=e.newline,r=e.comments,i=e.step,o=e.preview,s=e.fastMode,a;e.quoteChar===void 0?a='"':a=e.quoteChar;var l=a;if(e.escapeChar!==void 0&&(l=e.escapeChar),(typeof t!="string"||zi.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),r===t)throw new Error("Comment character same as delimiter");r===!0?r="#":(typeof r!="string"||zi.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),n!==`
`&&n!=="\r"&&n!==`\r
`&&(n=`
`);var u=0,c=!1;this.parse=function(f,d,h){if(typeof f!="string")throw new Error("Input must be a string");var p=f.length,g=t.length,m=n.length,y=r.length,v=zr(i);u=0;var b=[],x=[],w=[],k=0;if(!f)return V();if(s||s!==!1&&f.indexOf(a)===-1){for(var S=f.split(n),C=0;C<S.length;C++){if(w=S[C],u+=w.length,C!==S.length-1)u+=n.length;else if(h)return V();if(!(r&&w.substr(0,y)===r)){if(v){if(b=[],N(w.split(t)),oe(),c)return V()}else N(w.split(t));if(o&&C>=o)return b=b.slice(0,o),V(!0)}}return V()}for(var E=f.indexOf(t,u),A=f.indexOf(n,u),T=new RegExp(T1(l)+T1(a),"g"),I;;){if(f[u]===a){for(I=u,u++;;){if(I=f.indexOf(a,I+1),I===-1)return h||x.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:u}),L();if(I===p-1){var F=f.substring(u,I).replace(T,a);return L(F)}if(a===l&&f[I+1]===l){I++;continue}if(!(a!==l&&I!==0&&f[I-1]===l)){var R=A===-1?E:Math.min(E,A),_=D(R);if(f[I+1+_]===t){if(w.push(f.substring(u,I).replace(T,a)),u=I+1+_+g,E=f.indexOf(t,u),A=f.indexOf(n,u),v&&(oe(),c))return V();if(o&&b.length>=o)return V(!0);break}var P=D(A);if(f.substr(I+1+P,m)===n){if(w.push(f.substring(u,I).replace(T,a)),U(I+1+P+m),E=f.indexOf(t,u),v&&(oe(),c))return V();if(o&&b.length>=o)return V(!0);break}x.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:u}),I++}}if(v&&(oe(),c))return V();if(o&&b.length>=o)return V(!0);continue}if(r&&w.length===0&&f.substr(u,y)===r){if(A===-1)return V();u=A+m,A=f.indexOf(n,u),E=f.indexOf(t,u);continue}if(E!==-1&&(E<A||A===-1)){w.push(f.substring(u,E)),u=E+g,E=f.indexOf(t,u);continue}if(A!==-1){if(w.push(f.substring(u,A)),U(A+m),v&&(oe(),c))return V();if(o&&b.length>=o)return V(!0);continue}break}return L();function N(Q){b.push(Q),k=u}function D(Q){var ye=0;if(Q!==-1){var Oe=f.substring(I+1,Q);Oe&&Oe.trim()===""&&(ye=Oe.length)}return ye}function L(Q){return h||(typeof Q>"u"&&(Q=f.substr(u)),w.push(Q),u=p,N(w),v&&oe()),V()}function U(Q){u=Q,N(w),w=[],A=f.indexOf(n,u)}function V(Q,ye){var Oe=ye||!1;return{data:Oe?b[0]:b,errors:x,meta:{delimiter:t,linebreak:n,aborted:c,truncated:!!Q,cursor:k+(d||0)}}}function oe(){i(V(void 0,!0)),b=[],x=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return u}}function HR(e){if(typeof e!="object"||e===null)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=HR(e[n]);return t}function zr(e){return typeof e=="function"}const{ChunkStreamer:GJ}=zi;function oS(e){e=e||{},GJ.call(this,e),this.textDecoder=new TextDecoder(this._config.encoding),this.stream=async function(t){this._input=t;try{for await(const n of t)this.parseChunk(this.getStringChunk(n));this._finished=!0,this.parseChunk("")}catch(n){this._sendError(n)}},this._nextChunk=function(){},this.getStringChunk=function(t){return typeof t=="string"?t:this.textDecoder.decode(t,{stream:!0})}}oS.prototype=Object.create(GJ.prototype);oS.prototype.constructor=oS;const C3e="4.2.1",qR="object-row-table",GR={dataType:null,batchType:null,id:"csv",module:"csv",name:"CSV",version:C3e,extensions:["csv","tsv","dsv"],mimeTypes:["text/csv","text/tab-separated-values","text/dsv"],category:"table",parse:async(e,t)=>I7(new TextDecoder().decode(e),t),parseText:(e,t)=>I7(e,t),parseInBatches:E3e,options:{csv:{shape:qR,optimizeMemoryUsage:!1,header:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!0,delimitersToGuess:[",","	","|",";"]}}};async function I7(e,t){const n={...GR.options.csv,...t==null?void 0:t.csv},r=_3e(e),o=n.header==="auto"?YJ(r):!!n.header,s={...n,header:o,download:!1,transformHeader:o?XJ():void 0,error:f=>{throw new Error(f)}},a=zi.parse(e,s),l=a.data,u=a.meta.fields||KJ(n.columnPrefix,r.length),c=n.shape||qR;switch(c){case"object-row-table":return{shape:"object-row-table",data:l.map(f=>Array.isArray(f)?VJ(f,u):f)};case"array-row-table":return{shape:"array-row-table",data:l.map(f=>Array.isArray(f)?f:WJ(f,u))};default:throw new Error(c)}}function E3e(e,t){t={...t},t.batchSize==="auto"&&(t.batchSize=4e3);const n={...GR.options.csv,...t==null?void 0:t.csv},r=new w3e;let i=!0,o=null,s=null,a=null;const l={...n,header:!1,download:!1,chunkSize:1024*1024*5,skipEmptyLines:!1,step(u){let c=u.data;if(n.skipEmptyLines&&c.flat().join("").trim()==="")return;const f=u.meta.cursor;if(i&&!o&&(n.header==="auto"?YJ(c):!!n.header)){o=c.map(XJ());return}i&&(i=!1,o||(o=KJ(n.columnPrefix,c.length)),a=$3e(c,o)),n.optimizeMemoryUsage&&(c=JSON.parse(JSON.stringify(c)));const d=n.shape||qR;s=s||new j3(a,{shape:d,...t});try{s.addRow(c);const h=s&&s.getFullBatch({bytesUsed:f});h&&r.enqueue(h)}catch(h){r.enqueue(h)}},complete(u){try{const c=u.meta.cursor,f=s&&s.getFinalBatch({bytesUsed:c});f&&r.enqueue(f)}catch(c){r.enqueue(c)}r.close()}};return zi.parse(e,l,oS),r}function YJ(e){return e&&e.every(t=>typeof t=="string")}function _3e(e){return zi.parse(e,{download:!1,dynamicTyping:!0,preview:1}).data[0]}function XJ(){const e=new Set;return t=>{let n=t,r=1;for(;e.has(n);)n=`${t}.${r}`,r++;return e.add(n),n}}function KJ(e,t=0){const n=[];for(let r=0;r<t;r++)n.push(`${e}${r+1}`);return n}function $3e(e,t){const n=t?{}:[];for(let r=0;r<e.length;r++){const i=t&&t[r]||r;switch(typeof e[r]){case"number":case"boolean":n[i]={name:String(i),index:r,type:Float32Array};break;case"string":default:n[i]={name:String(i),index:r,type:Array}}}return n}var L7={},$A={},AA=34,e0=10,TA=13;function QJ(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function A3e(e,t){var n=QJ(e);return function(r,i){return t(n(r),i,e)}}function z7(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ii(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function T3e(e){return e<0?"-"+ii(-e,6):e>9999?"+"+ii(e,6):ii(e,4)}function P3e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":T3e(e.getUTCFullYear())+"-"+ii(e.getUTCMonth()+1,2)+"-"+ii(e.getUTCDate(),2)+(i?"T"+ii(t,2)+":"+ii(n,2)+":"+ii(r,2)+"."+ii(i,3)+"Z":r?"T"+ii(t,2)+":"+ii(n,2)+":"+ii(r,2)+"Z":n||t?"T"+ii(t,2)+":"+ii(n,2)+"Z":"")}function M3e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(m,y){if(h)return h(m,y-1);p=m,h=d?A3e(m,d):QJ(m)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,m=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===e0&&--p,f.charCodeAt(p-1)===TA&&--p;function x(){if(v)return $A;if(b)return b=!1,L7;var k,S=g,C;if(f.charCodeAt(S)===AA){for(;g++<p&&f.charCodeAt(g)!==AA||f.charCodeAt(++g)===AA;);return(k=g)>=p?v=!0:(C=f.charCodeAt(g++))===e0?b=!0:C===TA&&(b=!0,f.charCodeAt(g)===e0&&++g),f.slice(S+1,k-1).replace(/""/g,'"')}for(;g<p;){if((C=f.charCodeAt(k=g++))===e0)b=!0;else if(C===TA)b=!0,f.charCodeAt(g)===e0&&++g;else if(C!==n)continue;return f.slice(S,k)}return v=!0,f.slice(S,p)}for(;(y=x())!==$A;){for(var w=[];y!==L7&&y!==$A;)w.push(y),y=x();d&&(w=d(w,m++))==null||h.push(w)}return h}function o(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function s(f,d){return d==null&&(d=z7(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=z7(f)),o(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?P3e(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}const U3=(e,t)=>t.some(n=>e instanceof n);let j7,B7;function F3e(){return j7||(j7=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R3e(){return B7||(B7=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const V3=new WeakMap,PA=new WeakMap,qC=new WeakMap;function O3e(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(ed(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return qC.set(t,e),t}function D3e(e){if(V3.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});V3.set(e,t)}let W3={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return V3.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ed(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function JJ(e){W3=e(W3)}function N3e(e){return R3e().includes(e)?function(...t){return e.apply(H3(this),t),ed(this.request)}:function(...t){return ed(e.apply(H3(this),t))}}function I3e(e){return typeof e=="function"?N3e(e):(e instanceof IDBTransaction&&D3e(e),U3(e,F3e())?new Proxy(e,W3):e)}function ed(e){if(e instanceof IDBRequest)return O3e(e);if(PA.has(e))return PA.get(e);const t=I3e(e);return t!==e&&(PA.set(e,t),qC.set(t,e)),t}const H3=e=>qC.get(e);function ZJ(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=ed(s);return r&&s.addEventListener("upgradeneeded",l=>{r(ed(s.result),l.oldVersion,l.newVersion,ed(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const L3e=["get","getKey","getAll","getAllKeys","count"],z3e=["put","add","delete","clear"],MA=new Map;function U7(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(MA.get(t))return MA.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=z3e.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||L3e.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return MA.set(t,o),o}JJ(e=>({...e,get:(t,n,r)=>U7(t,n)||e.get(t,n,r),has:(t,n)=>!!U7(t,n)||e.has(t,n)}));const j3e=["continue","continuePrimaryKey","advance"],V7={},q3=new WeakMap,eZ=new WeakMap,B3e={get(e,t){if(!j3e.includes(t))return e[t];let n=V7[t];return n||(n=V7[t]=function(...r){q3.set(this,eZ.get(this)[t](...r))}),n}};async function*U3e(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,B3e);for(eZ.set(n,t),qC.set(n,H3(t));t;)yield n,t=await(q3.get(n)||t.continue()),q3.delete(n)}function W7(e,t){return t===Symbol.asyncIterator&&U3(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&U3(e,[IDBIndex,IDBObjectStore])}JJ(e=>({...e,get(t,n,r){return W7(t,n)?U3e:e.get(t,n,r)},has(t,n){return W7(t,n)||e.has(t,n)}}));const G3="logs",rc="logs",tZ=1,V3e="log",W3e="json",nZ=()=>new Map,rZ=()=>{const e=localStorage.getItem(G3)??"[]";try{const t=JSON.parse(e);return new Map(t)}catch(t){return console.error("Failed to parse existing logs:",t),localStorage.removeItem(G3),nZ()}},H7=(e,t)=>{const n=rZ();n.set(e,{...t,timestamp:e,version:tZ}),localStorage.setItem(G3,JSON.stringify(Array.from(n.entries())))},H3e=()=>ZJ(rc,1,{upgrade(e){e.objectStoreNames.contains(rc)||e.createObjectStore(rc,{keyPath:"timestamp"})}}),q3e=async e=>{if(e)try{const t=e.transaction(rc,"readonly"),n=t.objectStore(rc),r=nZ(),i=await n.getAll();return await t.done,i.forEach(o=>{o.timestamp!==void 0&&r.set(o.timestamp,o)}),r}catch(t){return console.error("IndexedDB read error:",t),[]}return[]},q7=(e,t,n)=>{if(e)try{e.transaction(rc,"readwrite").objectStore(rc).add({timestamp:t,...n,version:tZ})}catch(r){console.error("IndexedDB error:",r),H7(t,n)}else H7(t,n)},G3e=async()=>{const e=await ZJ(rc,1),t=await q3e(e),n=rZ(),r=new Map([...t,...n]),i=Array.from(r.entries()).sort((l,u)=>l[0]-u[0]),o=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),s=URL.createObjectURL(o),a=document.createElement("a");a.href=s,a.download=`${V3e}.${W3e}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)};let Y3e=class{constructor(){ae(this,"indexedDB",null);ae(this,"onEvent",t=>n=>{if(n.type!==t)return;const o=n.target.closest(`[data-log-${t}]`);if(!o)return;const s=o.getAttribute(`data-log-${t}`);typeof s=="string"&&q7(this.indexedDB,Date.now(),{key:s,event:t})});ae(this,"onClickListener",this.onEvent("click"));ae(this,"onScrollListener",this.onEvent("scroll"));ae(this,"attachEventListener",()=>{window.addEventListener("click",this.onClickListener),window.addEventListener("scroll",this.onScrollListener)});ae(this,"detachEventListener",()=>{window.removeEventListener("click",this.onClickListener),window.removeEventListener("scroll",this.onScrollListener)})}async initializeDB(){try{this.indexedDB=await H3e()}catch(t){console.error("Failed to connect to IndexedDB:",t)}}log(t,n,r){q7(this.indexedDB,Date.now(),{key:t,event:n,data:r})}};const td=new Y3e;/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var X3e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),K3e=Object.prototype.hasOwnProperty;function Y3(e,t){return K3e.call(e,t)}function X3(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Y3(e,i)&&r.push(i);return r}function ji(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function K3(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function vf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function iZ(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Q3(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Q3(e[t]))return!0}else if(typeof e=="object"){for(var r=X3(e),i=r.length,o=0;o<i;o++)if(Q3(e[r[o]]))return!0}}return!1}function G7(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var oZ=function(e){X3e(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,G7(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=G7(n,{name:r,index:i,operation:o,tree:s}),l}return t}(Error),Qt=oZ,Q3e=ji,dp={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=sS(n,this.path);r&&(r=ji(r));var i=nd(n,{op:"remove",path:this.from}).removed;return nd(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=sS(n,this.from);return nd(n,{op:"add",path:this.path,value:ji(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:P1(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},J3e={add:function(e,t,n){return K3(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:dp.move,copy:dp.copy,test:dp.test,_get:dp._get};function sS(e,t){if(t=="")return e;var n={op:"_get",path:t};return nd(e,n),n.value}function nd(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):aS(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=sS(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=P1(e,t.value),s.test===!1)throw new Qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Qt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=ji(e));var a=t.path||"",l=a.split("/"),u=e,c=1,f=l.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=aS;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=iZ(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(u[h]===void 0?d=l.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!K3(h))throw new Qt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);K3(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>u.length)throw new Qt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=J3e[t.op].call(t,u,h,e);if(s.test===!1)throw new Qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=dp[t.op].call(t,u,h,e);if(s.test===!1)throw new Qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(u=u[h],n&&c<f&&(!u||typeof u!="object"))throw new Qt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function GC(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Qt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=ji(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=nd(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function Z3e(e,t,n){var r=nd(e,t);if(r.test===!1)throw new Qt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function aS(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Qt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(dp[e.op]){if(typeof e.path!="string")throw new Qt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Qt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Qt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Qt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Q3(e.value))throw new Qt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Qt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Qt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=sZ([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Qt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Qt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function sZ(e,t,n){try{if(!Array.isArray(e))throw new Qt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)GC(ji(t),ji(e),n||!0);else{n=n||aS;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Qt)return i;throw i}}function P1(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!P1(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!P1(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const ePe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Qt,_areEquals:P1,applyOperation:nd,applyPatch:GC,applyReducer:Z3e,deepClone:Q3e,getValueByPointer:sS,validate:sZ,validator:aS},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var YR=new WeakMap,tPe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),nPe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function rPe(e){return YR.get(e)}function iPe(e,t){return e.observers.get(t)}function oPe(e,t){e.observers.delete(t.callback)}function sPe(e,t){t.unobserve()}function aPe(e,t){var n=[],r,i=rPe(e);if(!i)i=new tPe(e),YR.set(e,i);else{var o=iPe(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=ji(e),t){r.callback=t,r.next=null;var s=function(){J3(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){J3(r),clearTimeout(r.next),oPe(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new nPe(t,r)),r}function J3(e,t){t===void 0&&(t=!1);var n=YR.get(e.object);XR(n.value,e.object,e.patches,"",t),e.patches.length&&GC(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function XR(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=X3(t),s=X3(e),a=!1,l=s.length-1;l>=0;l--){var u=s[l],c=e[u];if(Y3(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[u];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?XR(c,f,n,r+"/"+vf(u),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+vf(u),value:ji(c)}),n.push({op:"replace",path:r+"/"+vf(u),value:ji(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+vf(u),value:ji(c)}),n.push({op:"remove",path:r+"/"+vf(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var u=o[l];!Y3(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+vf(u),value:ji(t[u])})}}}function lPe(e,t,n){n===void 0&&(n=!1);var r=[];return XR(e,t,r,"",n),r}const uPe=Object.freeze(Object.defineProperty({__proto__:null,compare:lPe,generate:J3,observe:aPe,unobserve:sPe},Symbol.toStringTag,{value:"Module"}));Object.assign({},ePe,uPe,{JsonPatchError:oZ,deepClone:ji,escapePathComponent:vf,unescapePathComponent:iZ});var cPe=/("(?:[^\\"]|\\.)*")|[:,]/g,fPe=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function s(a,l,u){var c,f,d,h,p,g,m,y,v,b,x,w;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),x=JSON.stringify(a,o),x===void 0)return x;if(m=i-l.length-u,x.length<=m&&(v=x.replace(cPe,function(k,S){return S||k+" "}),v.length<=m))return v;if(o!=null&&(a=JSON.parse(x),o=void 0),typeof a=="object"&&a!==null){if(y=l+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",m=a.length;f<m;f++)d.push(s(a[f],y,f===m-1?0:1)||"null");else for(b="{",c="}",g=Object.keys(a),m=g.length;f<m;f++)h=g[f],p=JSON.stringify(h)+": ",w=s(a[h],y,p.length+(f===m-1?0:1)),w!==void 0&&d.push(p+w);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+l)}return x}(t,"",0)};const FA=Da(fPe);function $i(e,t,n){return e.fields=t||[],e.fname=n,e}function tn(e){return e==null?null:e.fname}function kr(e){return e==null?null:e.fields}function aZ(e){return e.length===1?dPe(e[0]):hPe(e)}const dPe=e=>function(t){return t[e]},hPe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function G(e){throw Error(e)}function Na(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function u(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?u():s=a+1:l==="["?(a>s&&u(),i=s=a+1):l==="]"&&(i||G("Access path missing open bracket: "+e),i>0&&u(),i=0,s=a+1)}return i&&G("Access path missing closing bracket: "+e),r&&G("Access path missing closing quote: "+e),a>s&&(a++,u()),t}function Do(e,t,n){const r=Na(e);return e=r.length===1?r[0]:e,$i((n&&n.get||aZ)(r),[e],t||e)}const Mv=Do("id"),Ar=$i(e=>e,[],"identity"),Au=$i(()=>0,[],"zero"),cm=$i(()=>1,[],"one"),No=$i(()=>!0,[],"true"),du=$i(()=>!1,[],"false");function pPe(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const lZ=0,YC=1,KR=2,uZ=3,cZ=4;function QR(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pPe,r=e||lZ;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=YC&&n(t||"error","ERROR",arguments),this},warn(){return r>=KR&&n(t||"warn","WARN",arguments),this},info(){return r>=uZ&&n(t||"log","INFO",arguments),this},debug(){return r>=cZ&&n(t||"log","DEBUG",arguments),this}}}var Y=Array.isArray;function se(e){return e===Object(e)}const Y7=e=>e!=="__proto__";function fm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=gPe(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;dm(r,o,i[o],s)}return r},{})}function dm(e,t,n,r){if(!Y7(t))return;let i,o;if(se(n)&&!Y(n)){o=se(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?dm(o,i,n[i]):Y7(i)&&(o[i]=n[i])}else e[t]=n}function gPe(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function qe(e){return e[e.length-1]}function wr(e){return e==null||e===""?null:+e}const fZ=e=>t=>e*Math.exp(t),dZ=e=>t=>Math.log(e*t),hZ=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),pZ=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,lS=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function XC(e,t,n,r){const i=n(e[0]),o=n(qe(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function gZ(e,t){return XC(e,t,wr,Ar)}function mZ(e,t){var n=Math.sign(e[0]);return XC(e,t,dZ(n),fZ(n))}function yZ(e,t,n){return XC(e,t,lS(n),lS(1/n))}function vZ(e,t,n){return XC(e,t,hZ(n),pZ(n))}function KC(e,t,n,r,i){const o=r(e[0]),s=r(qe(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function JR(e,t,n){return KC(e,t,n,wr,Ar)}function ZR(e,t,n){const r=Math.sign(e[0]);return KC(e,t,n,dZ(r),fZ(r))}function uS(e,t,n,r){return KC(e,t,n,lS(r),lS(1/r))}function eO(e,t,n,r){return KC(e,t,n,hZ(r),pZ(r))}function bZ(e){return 1+~~(new Date(e).getMonth()/3)}function xZ(e){return 1+~~(new Date(e).getUTCMonth()/3)}function le(e){return e!=null?Y(e)?e:[e]:[]}function wZ(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ne(e){return typeof e=="function"}const mPe="descending";function tO(e,t,n){n=n||{},t=le(t)||[];const r=[],i=[],o={},s=n.comparator||yPe;return le(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===mPe?-1:1),i.push(a=Ne(a)?a:Do(a,null,n)),(kr(a)||[]).forEach(u=>o[u]=1))}),i.length===0?null:$i(s(i,r),Object.keys(o))}const QC=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),yPe=(e,t)=>e.length===1?vPe(e[0],t[0]):bPe(e,t,e.length),vPe=(e,t)=>function(n,r){return QC(e(n),e(r))*t},bPe=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=QC(o(r),o(i));return s*t[a]});function Tr(e){return Ne(e)?e:()=>e}function nO(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function De(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Aa(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function SZ(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}const xPe=Object.prototype.hasOwnProperty;function fe(e,t){return xPe.call(e,t)}const mx={};function hm(e){let t={},n;function r(o){return fe(t,o)&&t[o]!==mx}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===mx&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=mx),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==mx&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function kZ(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=qe(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=s?r:c<=s?i:o}function re(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),De(r,n)}function hp(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function Nc(e){return typeof e=="boolean"}function ic(e){return Object.prototype.toString.call(e)==="[object Date]"}function CZ(e){return e&&Ne(e[Symbol.iterator])}function Je(e){return typeof e=="number"}function EZ(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ue(e){return typeof e=="string"}function rO(e,t,n){e&&(e=t?le(e).map(a=>a.replace(/\\(.)/g,"$1")):le(e));const r=e&&e.length,i=n&&n.get||aZ,o=a=>i(t?[a]:Na(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return $i(s,e,"key")}function _Z(e,t){const n=e[0],r=qe(e),i=+t;return i?i===1?r:n+i*(r-n):n}const wPe=1e4;function $Z(e){e=+e||wPe;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>fe(t,s)||fe(n,s),get:s=>fe(t,s)?t[s]:fe(n,s)?o(s,n[s]):void 0,set:(s,a)=>fe(t,s)?t[s]=a:o(s,a)}}function AZ(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,u=0;for(;a<i&&l<o;++u)s[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)s[u]=t[a];for(;l<o;++l,++u)s[u]=n[l];return s}function V0(e,t){let n="";for(;--t>=0;)n+=e;return n}function TZ(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?V0(i,s)+o:r==="center"?V0(i,~~(s/2))+o+V0(i,Math.ceil(s/2)):o+V0(i,s)}function Fv(e){return e&&qe(e)-e[0]||0}function ne(e){return Y(e)?"["+e.map(ne)+"]":se(e)||ue(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function iO(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const SPe=e=>Je(e)||ic(e)?e:Date.parse(e);function oO(e,t){return t=t||SPe,e==null||e===""?null:t(e)}function sO(e){return e==null||e===""?null:e+""}function ks(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function PZ(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function bu(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function kPe(e){return e}function CPe(e){if(e==null)return kPe;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;u<c;)f[u]=a[u],++u;return f}}function EPe(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function _Pe(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return X7(e,n)})}:X7(e,t)}function X7(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=MZ(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function MZ(e,t){var n=CPe(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&EPe(f,p)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(a)}function u(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=l(c.arcs);break;case"MultiPolygon":d=c.arcs.map(l);break;default:return null}return{type:f,coordinates:d}}return u(t)}function $Pe(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(u,c){var f=e.arcs[u<0?~u:u],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=u,t[c]=d)}),t.forEach(function(u){var c=a(u),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(u),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(u),h.start=f,p=i[f]){delete i[p.end];var m=p===h?h:p.concat(h);r[m.start=p.start]=i[m.end=h.end]=m}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=f]=i[h.end=d]=h});function a(u){var c=e.arcs[u<0?~u:u],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],u<0?[d,f]:[f,d]}function l(u,c){for(var f in u){var d=u[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function APe(e){return MZ(e,TPe.apply(this,arguments))}function TPe(e,t,n){var r,i,o;if(arguments.length>1)r=PPe(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:$Pe(e,r)}}function PPe(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function l(f){f.forEach(a)}function u(f){f.forEach(l)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function El(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function MPe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pm(e){let t,n,r;e.length!==2?(t=El,n=(a,l)=>El(e(a),l),r=(a,l)=>e(a)-l):(t=e===El||e===MPe?e:FPe,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(a[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function s(a,l,u=0,c=a.length){const f=i(a,l,u,c-1);return f>u&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function FPe(){return 0}function FZ(e){return e===null?NaN:+e}function*RPe(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const RZ=pm(El),gc=RZ.right,OPe=RZ.left;pm(FZ).center;function DPe(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function NPe(e,t){const n=DPe(e,t);return n&&Math.sqrt(n)}class Xr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class K7 extends Map{constructor(t,n=NZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Z3(this,t))}has(t){return super.has(Z3(this,t))}set(t,n){return super.set(OZ(this,t),n)}delete(t){return super.delete(DZ(this,t))}}class cS extends Set{constructor(t,n=NZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Z3(this,t))}add(t){return super.add(OZ(this,t))}delete(t){return super.delete(DZ(this,t))}}function Z3({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function OZ({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function DZ({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function NZ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function IPe(e,t){return Array.from(t,n=>e[n])}function LPe(e=El){if(e===El)return IZ;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function IZ(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const zPe=Math.sqrt(50),jPe=Math.sqrt(10),BPe=Math.sqrt(2);function fS(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=zPe?10:o>=jPe?5:o>=BPe?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/s,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*s,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?fS(e,t,n*2):[a,l,u]}function eP(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?fS(t,e,n):fS(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let u=0;u<a;++u)l[u]=(o-u)/-s;else for(let u=0;u<a;++u)l[u]=(o-u)*s;else if(s<0)for(let u=0;u<a;++u)l[u]=(i+u)/-s;else for(let u=0;u<a;++u)l[u]=(i+u)*s;return l}function tP(e,t,n){return t=+t,e=+e,n=+n,fS(e,t,n)[2]}function mc(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?tP(t,e,n):tP(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function rd(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function nP(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function LZ(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?IZ:LPe(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*f/l+d)),p=Math.min(r,Math.floor(t+(l-u)*f/l+d));LZ(e,t,h,p,i)}const o=e[t];let s=n,a=r;for(t0(e,n,t),i(e[r],o)>0&&t0(e,n,r);s<a;){for(t0(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?t0(e,n,a):(++a,t0(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function t0(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function rP(e,t,n){if(e=Float64Array.from(RPe(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return nP(e);if(t>=1)return rd(e);var r,i=(r-1)*t,o=Math.floor(i),s=rd(LZ(e,o).subarray(0,o+1)),a=nP(e.subarray(o+1));return s+(a-s)*(i-o)}}function zZ(e,t,n=FZ){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function UPe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function jZ(e,t){return rP(e,.5,t)}function*VPe(e){for(const t of e)yield*t}function BZ(e){return Array.from(VPe(e))}function Bi(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function UZ(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function WPe(e,...t){e=new cS(e),t=t.map(HPe);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function HPe(e){return e instanceof cS?e:new cS(e)}function qPe(...e){const t=new cS;for(const n of e)for(const r of n)t.add(r);return t}function GPe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function dS(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function pg(e){return e=dS(Math.abs(e)),e?e[1]:NaN}function YPe(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function XPe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var KPe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bd(e){if(!(t=KPe.exec(e)))throw new Error("invalid format: "+e);var t;return new aO({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}bd.prototype=aO.prototype;function aO(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}aO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function QPe(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var VZ;function JPe(e,t){var n=dS(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(VZ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+dS(e,Math.max(0,t+o-1))[0]}function Q7(e,t){var n=dS(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const J7={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:GPe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Q7(e*100,t),r:Q7,s:JPe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Z7(e){return e}var ej=Array.prototype.map,tj=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function WZ(e){var t=e.grouping===void 0||e.thousands===void 0?Z7:YPe(ej.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Z7:XPe(ej.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=bd(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,v=f.comma,b=f.precision,x=f.trim,w=f.type;w==="n"?(v=!0,w="g"):J7[w]||(b===void 0&&(b=12),x=!0,w="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var k=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=g==="$"?r:/[%p]/.test(w)?s:"",C=J7[w],E=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(T){var I=k,F=S,R,_,P;if(w==="c")F=C(T)+F,T="";else{T=+T;var N=T<0||1/T<0;if(T=isNaN(T)?l:C(Math.abs(T),b),x&&(T=QPe(T)),N&&+T==0&&p!=="+"&&(N=!1),I=(N?p==="("?p:a:p==="-"||p==="("?"":p)+I,F=(w==="s"?tj[8+VZ/3]:"")+F+(N&&p==="("?")":""),E){for(R=-1,_=T.length;++R<_;)if(P=T.charCodeAt(R),48>P||P>57){F=(P===46?i+T.slice(R+1):T.slice(R))+F,T=T.slice(0,R);break}}}v&&!m&&(T=t(T,1/0));var D=I.length+T.length+F.length,L=D<y?new Array(y-D+1).join(d):"";switch(v&&m&&(T=t(L+T,L.length?y-F.length:1/0),L=""),h){case"<":T=I+T+F+L;break;case"=":T=I+L+T+F;break;case"^":T=L.slice(0,D=L.length>>1)+I+T+F+L.slice(D);break;default:T=L+I+T+F;break}return o(T)}return A.toString=function(){return f+""},A}function c(f,d){var h=u((f=bd(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(pg(d)/3)))*3,g=Math.pow(10,-p),m=tj[8+p/3];return function(y){return h(g*y)+m}}return{format:u,formatPrefix:c}}var yx,Rv,lO;ZPe({thousands:",",grouping:[3],currency:["$",""]});function ZPe(e){return yx=WZ(e),Rv=yx.format,lO=yx.formatPrefix,yx}function HZ(e){return Math.max(0,-pg(Math.abs(e)))}function qZ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pg(t)/3)))*3-pg(Math.abs(e)))}function GZ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pg(t)-pg(e))+1}const RA=new Date,OA=new Date;function En(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let u;do l.push(u=new Date(+o)),t(o,a),e(o);while(u<o&&o<s);return l},i.filter=o=>En(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(RA.setTime(+o),OA.setTime(+s),e(RA),e(OA),Math.floor(n(RA,OA))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const gg=En(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?En(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gg);gg.range;const ml=1e3,_o=ml*60,yl=_o*60,jl=yl*24,uO=jl*7,nj=jl*30,DA=jl*365,hs=En(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ml)},(e,t)=>(t-e)/ml,e=>e.getUTCSeconds());hs.range;const Ov=En(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ml)},(e,t)=>{e.setTime(+e+t*_o)},(e,t)=>(t-e)/_o,e=>e.getMinutes());Ov.range;const Dv=En(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_o)},(e,t)=>(t-e)/_o,e=>e.getUTCMinutes());Dv.range;const Nv=En(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ml-e.getMinutes()*_o)},(e,t)=>{e.setTime(+e+t*yl)},(e,t)=>(t-e)/yl,e=>e.getHours());Nv.range;const Iv=En(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yl)},(e,t)=>(t-e)/yl,e=>e.getUTCHours());Iv.range;const Sa=En(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_o)/jl,e=>e.getDate()-1);Sa.range;const _l=En(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jl,e=>e.getUTCDate()-1);_l.range;const YZ=En(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/jl,e=>Math.floor(e/jl));YZ.range;function Xd(e){return En(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*_o)/uO)}const Kd=Xd(0),hS=Xd(1),eMe=Xd(2),tMe=Xd(3),mg=Xd(4),nMe=Xd(5),rMe=Xd(6);Kd.range;hS.range;eMe.range;tMe.range;mg.range;nMe.range;rMe.range;function Qd(e){return En(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/uO)}const Jd=Qd(0),pS=Qd(1),iMe=Qd(2),oMe=Qd(3),yg=Qd(4),sMe=Qd(5),aMe=Qd(6);Jd.range;pS.range;iMe.range;oMe.range;yg.range;sMe.range;aMe.range;const vg=En(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());vg.range;const bg=En(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());bg.range;const Cs=En(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Cs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:En(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Cs.range;const Es=En(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Es.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:En(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Es.range;function XZ(e,t,n,r,i,o){const s=[[hs,1,ml],[hs,5,5*ml],[hs,15,15*ml],[hs,30,30*ml],[o,1,_o],[o,5,5*_o],[o,15,15*_o],[o,30,30*_o],[i,1,yl],[i,3,3*yl],[i,6,6*yl],[i,12,12*yl],[r,1,jl],[r,2,2*jl],[n,1,uO],[t,1,nj],[t,3,3*nj],[e,1,DA]];function a(u,c,f){const d=c<u;d&&([u,c]=[c,u]);const h=f&&typeof f.range=="function"?f:l(u,c,f),p=h?h.range(u,+c+1):[];return d?p.reverse():p}function l(u,c,f){const d=Math.abs(c-u)/f,h=pm(([,,m])=>m).right(s,d);if(h===s.length)return e.every(mc(u/DA,c/DA,f));if(h===0)return gg.every(Math.max(mc(u,c,f),1));const[p,g]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return p.every(g)}return[a,l]}const[lMe,uMe]=XZ(Es,bg,Jd,YZ,Iv,Dv),[cMe,fMe]=XZ(Cs,vg,Kd,Sa,Nv,Ov),er="year",wi="quarter",Cr="month",wn="week",Si="date",xr="day",Ta="dayofyear",Ji="hours",Zi="minutes",Io="seconds",_s="milliseconds",cO=[er,wi,Cr,wn,Si,xr,Ta,Ji,Zi,Io,_s],NA=cO.reduce((e,t,n)=>(e[t]=1+n,e),{});function fO(e){const t=le(e).slice(),n={};return t.length||G("Missing time unit."),t.forEach(i=>{fe(NA,i)?n[i]=1:G(`Invalid time unit: ${i}.`)}),(n[wn]||n[xr]?1:0)+(n[wi]||n[Cr]||n[Si]?1:0)+(n[Ta]?1:0)>1&&G(`Incompatible time units: ${e}`),t.sort((i,o)=>NA[i]-NA[o]),t}const dMe={[er]:"%Y ",[wi]:"Q%q ",[Cr]:"%b ",[Si]:"%d ",[wn]:"W%U ",[xr]:"%a ",[Ta]:"%j ",[Ji]:"%H:00",[Zi]:"00:%M",[Io]:":%S",[_s]:".%L",[`${er}-${Cr}`]:"%Y-%m ",[`${er}-${Cr}-${Si}`]:"%Y-%m-%d ",[`${Ji}-${Zi}`]:"%H:%M"};function KZ(e,t){const n=De({},dMe,t),r=fO(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const Ef=new Date;function dO(e){return Ef.setFullYear(e),Ef.setMonth(0),Ef.setDate(1),Ef.setHours(0,0,0,0),Ef}function QZ(e){return ZZ(new Date(e))}function JZ(e){return iP(new Date(e))}function ZZ(e){return Sa.count(dO(e.getFullYear())-1,e)}function iP(e){return Kd.count(dO(e.getFullYear())-1,e)}function oP(e){return dO(e).getDay()}function hMe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function eee(e){return nee(new Date(e))}function tee(e){return sP(new Date(e))}function nee(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return _l.count(t-1,e)}function sP(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Jd.count(t-1,e)}function aP(e){return Ef.setTime(Date.UTC(e,0,1)),Ef.getUTCDay()}function pMe(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function ree(e,t,n,r,i){const o=t||1,s=qe(e),a=(y,v,b)=>(b=b||y,gMe(n[b],r[b],y===s&&o,v)),l=new Date,u=ks(e),c=u[er]?a(er):Tr(2012),f=u[Cr]?a(Cr):u[wi]?a(wi):Au,d=u[wn]&&u[xr]?a(xr,1,wn+xr):u[wn]?a(wn,1):u[xr]?a(xr,1):u[Si]?a(Si,1):u[Ta]?a(Ta,1):cm,h=u[Ji]?a(Ji):Au,p=u[Zi]?a(Zi):Au,g=u[Io]?a(Io):Au,m=u[_s]?a(_s):Au;return function(y){l.setTime(+y);const v=c(l);return i(v,f(l),d(l,v),h(l),p(l),g(l),m(l))}}function gMe(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function xg(e,t,n){return t+e*7-(n+6)%7}const mMe={[er]:e=>e.getFullYear(),[wi]:e=>Math.floor(e.getMonth()/3),[Cr]:e=>e.getMonth(),[Si]:e=>e.getDate(),[Ji]:e=>e.getHours(),[Zi]:e=>e.getMinutes(),[Io]:e=>e.getSeconds(),[_s]:e=>e.getMilliseconds(),[Ta]:e=>ZZ(e),[wn]:e=>iP(e),[wn+xr]:(e,t)=>xg(iP(e),e.getDay(),oP(t)),[xr]:(e,t)=>xg(1,e.getDay(),oP(t))},yMe={[wi]:e=>3*e,[wn]:(e,t)=>xg(e,0,oP(t))};function iee(e,t){return ree(e,t||1,mMe,yMe,hMe)}const vMe={[er]:e=>e.getUTCFullYear(),[wi]:e=>Math.floor(e.getUTCMonth()/3),[Cr]:e=>e.getUTCMonth(),[Si]:e=>e.getUTCDate(),[Ji]:e=>e.getUTCHours(),[Zi]:e=>e.getUTCMinutes(),[Io]:e=>e.getUTCSeconds(),[_s]:e=>e.getUTCMilliseconds(),[Ta]:e=>nee(e),[wn]:e=>sP(e),[xr]:(e,t)=>xg(1,e.getUTCDay(),aP(t)),[wn+xr]:(e,t)=>xg(sP(e),e.getUTCDay(),aP(t))},bMe={[wi]:e=>3*e,[wn]:(e,t)=>xg(e,0,aP(t))};function oee(e,t){return ree(e,t||1,vMe,bMe,pMe)}const xMe={[er]:Cs,[wi]:vg.every(3),[Cr]:vg,[wn]:Kd,[Si]:Sa,[xr]:Sa,[Ta]:Sa,[Ji]:Nv,[Zi]:Ov,[Io]:hs,[_s]:gg},wMe={[er]:Es,[wi]:bg.every(3),[Cr]:bg,[wn]:Jd,[Si]:_l,[xr]:_l,[Ta]:_l,[Ji]:Iv,[Zi]:Dv,[Io]:hs,[_s]:gg};function gm(e){return xMe[e]}function mm(e){return wMe[e]}function see(e,t,n){return e?e.offset(t,n):void 0}function aee(e,t,n){return see(gm(e),t,n)}function lee(e,t,n){return see(mm(e),t,n)}function uee(e,t,n,r){return e?e.range(t,n,r):void 0}function cee(e,t,n,r){return uee(gm(e),t,n,r)}function fee(e,t,n,r){return uee(mm(e),t,n,r)}const W0=1e3,H0=W0*60,q0=H0*60,JC=q0*24,SMe=JC*7,rj=JC*30,lP=JC*365,dee=[er,Cr,Si,Ji,Zi,Io,_s],G0=dee.slice(0,-1),Y0=G0.slice(0,-1),X0=Y0.slice(0,-1),kMe=X0.slice(0,-1),CMe=[er,wn],ij=[er,Cr],hee=[er],n0=[[G0,1,W0],[G0,5,5*W0],[G0,15,15*W0],[G0,30,30*W0],[Y0,1,H0],[Y0,5,5*H0],[Y0,15,15*H0],[Y0,30,30*H0],[X0,1,q0],[X0,3,3*q0],[X0,6,6*q0],[X0,12,12*q0],[kMe,1,JC],[CMe,1,SMe],[ij,1,rj],[ij,3,3*rj],[hee,1,lP]];function pee(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Fv(t))/n;let i=pm(a=>a[2]).right(n0,r),o,s;return i===n0.length?(o=hee,s=mc(t[0]/lP,t[1]/lP,n)):i?(i=n0[r/n0[i-1][2]<n0[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=dee,s=Math.max(mc(t[0],t[1],n),1)),{units:o,step:s}}function IA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function LA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function r0(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function gee(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,u=i0(i),c=o0(i),f=i0(o),d=o0(o),h=i0(s),p=o0(s),g=i0(a),m=o0(a),y=i0(l),v=o0(l),b={a:N,A:D,b:L,B:U,c:null,d:cj,e:cj,f:GMe,g:rFe,G:oFe,H:WMe,I:HMe,j:qMe,L:mee,m:YMe,M:XMe,p:V,q:oe,Q:hj,s:pj,S:KMe,u:QMe,U:JMe,V:ZMe,w:eFe,W:tFe,x:null,X:null,y:nFe,Y:iFe,Z:sFe,"%":dj},x={a:Q,A:ye,b:Oe,B:ut,c:null,d:fj,e:fj,f:cFe,g:xFe,G:SFe,H:aFe,I:lFe,j:uFe,L:vee,m:fFe,M:dFe,p:$n,q:sr,Q:hj,s:pj,S:hFe,u:pFe,U:gFe,V:mFe,w:yFe,W:vFe,x:null,X:null,y:bFe,Y:wFe,Z:kFe,"%":dj},w={a:A,A:T,b:I,B:F,c:R,d:lj,e:lj,f:jMe,g:aj,G:sj,H:uj,I:uj,j:NMe,L:zMe,m:DMe,M:IMe,p:E,q:OMe,Q:UMe,s:VMe,S:LMe,u:TMe,U:PMe,V:MMe,w:AMe,W:FMe,x:_,X:P,y:aj,Y:sj,Z:RMe,"%":BMe};b.x=k(n,b),b.X=k(r,b),b.c=k(t,b),x.x=k(n,x),x.X=k(r,x),x.c=k(t,x);function k(ce,$e){return function(Ae){var J=[],mn=-1,tt=0,An=ce.length,fn,ao,gh;for(Ae instanceof Date||(Ae=new Date(+Ae));++mn<An;)ce.charCodeAt(mn)===37&&(J.push(ce.slice(tt,mn)),(ao=oj[fn=ce.charAt(++mn)])!=null?fn=ce.charAt(++mn):ao=fn==="e"?" ":"0",(gh=$e[fn])&&(fn=gh(Ae,ao)),J.push(fn),tt=mn+1);return J.push(ce.slice(tt,mn)),J.join("")}}function S(ce,$e){return function(Ae){var J=r0(1900,void 0,1),mn=C(J,ce,Ae+="",0),tt,An;if(mn!=Ae.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if($e&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(tt=LA(r0(J.y,0,1)),An=tt.getUTCDay(),tt=An>4||An===0?pS.ceil(tt):pS(tt),tt=_l.offset(tt,(J.V-1)*7),J.y=tt.getUTCFullYear(),J.m=tt.getUTCMonth(),J.d=tt.getUTCDate()+(J.w+6)%7):(tt=IA(r0(J.y,0,1)),An=tt.getDay(),tt=An>4||An===0?hS.ceil(tt):hS(tt),tt=Sa.offset(tt,(J.V-1)*7),J.y=tt.getFullYear(),J.m=tt.getMonth(),J.d=tt.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),An="Z"in J?LA(r0(J.y,0,1)).getUTCDay():IA(r0(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(An+5)%7:J.w+J.U*7-(An+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,LA(J)):IA(J)}}function C(ce,$e,Ae,J){for(var mn=0,tt=$e.length,An=Ae.length,fn,ao;mn<tt;){if(J>=An)return-1;if(fn=$e.charCodeAt(mn++),fn===37){if(fn=$e.charAt(mn++),ao=w[fn in oj?$e.charAt(mn++):fn],!ao||(J=ao(ce,Ae,J))<0)return-1}else if(fn!=Ae.charCodeAt(J++))return-1}return J}function E(ce,$e,Ae){var J=u.exec($e.slice(Ae));return J?(ce.p=c.get(J[0].toLowerCase()),Ae+J[0].length):-1}function A(ce,$e,Ae){var J=h.exec($e.slice(Ae));return J?(ce.w=p.get(J[0].toLowerCase()),Ae+J[0].length):-1}function T(ce,$e,Ae){var J=f.exec($e.slice(Ae));return J?(ce.w=d.get(J[0].toLowerCase()),Ae+J[0].length):-1}function I(ce,$e,Ae){var J=y.exec($e.slice(Ae));return J?(ce.m=v.get(J[0].toLowerCase()),Ae+J[0].length):-1}function F(ce,$e,Ae){var J=g.exec($e.slice(Ae));return J?(ce.m=m.get(J[0].toLowerCase()),Ae+J[0].length):-1}function R(ce,$e,Ae){return C(ce,t,$e,Ae)}function _(ce,$e,Ae){return C(ce,n,$e,Ae)}function P(ce,$e,Ae){return C(ce,r,$e,Ae)}function N(ce){return s[ce.getDay()]}function D(ce){return o[ce.getDay()]}function L(ce){return l[ce.getMonth()]}function U(ce){return a[ce.getMonth()]}function V(ce){return i[+(ce.getHours()>=12)]}function oe(ce){return 1+~~(ce.getMonth()/3)}function Q(ce){return s[ce.getUTCDay()]}function ye(ce){return o[ce.getUTCDay()]}function Oe(ce){return l[ce.getUTCMonth()]}function ut(ce){return a[ce.getUTCMonth()]}function $n(ce){return i[+(ce.getUTCHours()>=12)]}function sr(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var $e=k(ce+="",b);return $e.toString=function(){return ce},$e},parse:function(ce){var $e=S(ce+="",!1);return $e.toString=function(){return ce},$e},utcFormat:function(ce){var $e=k(ce+="",x);return $e.toString=function(){return ce},$e},utcParse:function(ce){var $e=S(ce+="",!0);return $e.toString=function(){return ce},$e}}}var oj={"-":"",_:" ",0:"0"},Bn=/^\s*\d+/,EMe=/^%/,_Me=/[\\^$*+?|[\]().{}]/g;function Ze(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function $Me(e){return e.replace(_Me,"\\$&")}function i0(e){return new RegExp("^(?:"+e.map($Me).join("|")+")","i")}function o0(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function AMe(e,t,n){var r=Bn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function TMe(e,t,n){var r=Bn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function PMe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function MMe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function FMe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function sj(e,t,n){var r=Bn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function aj(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function RMe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function OMe(e,t,n){var r=Bn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function DMe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function lj(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function NMe(e,t,n){var r=Bn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function uj(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function IMe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function LMe(e,t,n){var r=Bn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function zMe(e,t,n){var r=Bn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function jMe(e,t,n){var r=Bn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function BMe(e,t,n){var r=EMe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function UMe(e,t,n){var r=Bn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function VMe(e,t,n){var r=Bn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function cj(e,t){return Ze(e.getDate(),t,2)}function WMe(e,t){return Ze(e.getHours(),t,2)}function HMe(e,t){return Ze(e.getHours()%12||12,t,2)}function qMe(e,t){return Ze(1+Sa.count(Cs(e),e),t,3)}function mee(e,t){return Ze(e.getMilliseconds(),t,3)}function GMe(e,t){return mee(e,t)+"000"}function YMe(e,t){return Ze(e.getMonth()+1,t,2)}function XMe(e,t){return Ze(e.getMinutes(),t,2)}function KMe(e,t){return Ze(e.getSeconds(),t,2)}function QMe(e){var t=e.getDay();return t===0?7:t}function JMe(e,t){return Ze(Kd.count(Cs(e)-1,e),t,2)}function yee(e){var t=e.getDay();return t>=4||t===0?mg(e):mg.ceil(e)}function ZMe(e,t){return e=yee(e),Ze(mg.count(Cs(e),e)+(Cs(e).getDay()===4),t,2)}function eFe(e){return e.getDay()}function tFe(e,t){return Ze(hS.count(Cs(e)-1,e),t,2)}function nFe(e,t){return Ze(e.getFullYear()%100,t,2)}function rFe(e,t){return e=yee(e),Ze(e.getFullYear()%100,t,2)}function iFe(e,t){return Ze(e.getFullYear()%1e4,t,4)}function oFe(e,t){var n=e.getDay();return e=n>=4||n===0?mg(e):mg.ceil(e),Ze(e.getFullYear()%1e4,t,4)}function sFe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ze(t/60|0,"0",2)+Ze(t%60,"0",2)}function fj(e,t){return Ze(e.getUTCDate(),t,2)}function aFe(e,t){return Ze(e.getUTCHours(),t,2)}function lFe(e,t){return Ze(e.getUTCHours()%12||12,t,2)}function uFe(e,t){return Ze(1+_l.count(Es(e),e),t,3)}function vee(e,t){return Ze(e.getUTCMilliseconds(),t,3)}function cFe(e,t){return vee(e,t)+"000"}function fFe(e,t){return Ze(e.getUTCMonth()+1,t,2)}function dFe(e,t){return Ze(e.getUTCMinutes(),t,2)}function hFe(e,t){return Ze(e.getUTCSeconds(),t,2)}function pFe(e){var t=e.getUTCDay();return t===0?7:t}function gFe(e,t){return Ze(Jd.count(Es(e)-1,e),t,2)}function bee(e){var t=e.getUTCDay();return t>=4||t===0?yg(e):yg.ceil(e)}function mFe(e,t){return e=bee(e),Ze(yg.count(Es(e),e)+(Es(e).getUTCDay()===4),t,2)}function yFe(e){return e.getUTCDay()}function vFe(e,t){return Ze(pS.count(Es(e)-1,e),t,2)}function bFe(e,t){return Ze(e.getUTCFullYear()%100,t,2)}function xFe(e,t){return e=bee(e),Ze(e.getUTCFullYear()%100,t,2)}function wFe(e,t){return Ze(e.getUTCFullYear()%1e4,t,4)}function SFe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?yg(e):yg.ceil(e),Ze(e.getUTCFullYear()%1e4,t,4)}function kFe(){return"+0000"}function dj(){return"%"}function hj(e){return+e}function pj(e){return Math.floor(+e/1e3)}var Ch,hO,xee,pO,wee;CFe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function CFe(e){return Ch=gee(e),hO=Ch.format,xee=Ch.parse,pO=Ch.utcFormat,wee=Ch.utcParse,Ch}function K0(e){const t={};return n=>t[n]||(t[n]=e(n))}function EFe(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=_Fe(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function _Fe(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function See(e){const t=K0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=bd(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return EFe(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=bd(s??",f");const a=mc(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(s.precision==null)switch(s.type){case"s":return isNaN(u=qZ(a,l))||(s.precision=u),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=GZ(a,l))||(s.precision=u-(s.type==="e"));break}case"f":case"%":{isNaN(u=HZ(a))||(s.precision=u-(s.type==="%")*2);break}}return t(s)}}}let uP;kee();function kee(){return uP=See({format:Rv,formatPrefix:lO})}function Cee(e){return See(WZ(e))}function gS(e){return arguments.length?uP=Cee(e):uP}function gj(e,t,n){n=n||{},se(n)||G(`Invalid time multi-format specifier: ${n}`);const r=t(Io),i=t(Zi),o=t(Ji),s=t(Si),a=t(wn),l=t(Cr),u=t(wi),c=t(er),f=e(n[_s]||".%L"),d=e(n[Io]||":%S"),h=e(n[Zi]||"%I:%M"),p=e(n[Ji]||"%I %p"),g=e(n[Si]||n[xr]||"%a %d"),m=e(n[wn]||"%b %d"),y=e(n[Cr]||"%B"),v=e(n[wi]||"%B"),b=e(n[er]||"%Y");return x=>(r(x)<x?f:i(x)<x?d:o(x)<x?h:s(x)<x?p:l(x)<x?a(x)<x?g:m:c(x)<x?u(x)<x?y:v:b)(x)}function Eee(e){const t=K0(e.format),n=K0(e.utcFormat);return{timeFormat:r=>ue(r)?t(r):gj(t,gm,r),utcFormat:r=>ue(r)?n(r):gj(n,mm,r),timeParse:K0(e.parse),utcParse:K0(e.utcParse)}}let cP;_ee();function _ee(){return cP=Eee({format:hO,parse:xee,utcFormat:pO,utcParse:wee})}function $ee(e){return Eee(gee(e))}function M1(e){return arguments.length?cP=$ee(e):cP}const fP=(e,t)=>De({},e,t);function Aee(e,t){const n=e?Cee(e):gS(),r=t?$ee(t):M1();return fP(n,r)}function gO(e,t){const n=arguments.length;return n&&n!==2&&G("defaultLocale expects either zero or two arguments."),n?fP(gS(e),M1(t)):fP(gS(),M1())}function $Fe(){return kee(),_ee(),gO()}const AFe=/^(data:|([A-Za-z]+:)?\/\/)/,TFe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,PFe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,mj="file://";function MFe(e,t){return n=>({options:n||{},sanitize:RFe,load:FFe,fileAccess:!!t,file:OFe(t),http:NFe(e)})}async function FFe(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function RFe(e,t){t=De({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=TFe.test(e.replace(PFe,""));(e==null||typeof e!="string"||!a)&&G("Sanitize failure, invalid URI: "+ne(e));const l=AFe.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(mj))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(mj.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function OFe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):DFe}async function DFe(){G("No file system access.")}function NFe(e){return e?async function(t,n){const r=De({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Ne(o[i])?o[i]():o.text():G(o.status+""+o.statusText)}:IFe}async function IFe(){G("No HTTP fetch method available.")}const LFe=e=>e!=null&&e===e,zFe=e=>e==="true"||e==="false"||e===!0||e===!1,jFe=e=>!Number.isNaN(Date.parse(e)),Tee=e=>!Number.isNaN(+e)&&!(e instanceof Date),BFe=e=>Tee(e)&&Number.isInteger(+e),dP={boolean:iO,integer:wr,number:wr,date:oO,string:sO,unknown:Ar},vx=[zFe,BFe,Tee,jFe],UFe=["boolean","integer","number","date"];function Pee(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=vx.length,i=vx.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&LFe(l)&&!vx[a](l)&&(i[a]=0,++s,s===vx.length))return"string";return UFe[i.reduce((o,s)=>o===0?s:o,0)-1]}function Mee(e,t){return t.reduce((n,r)=>(n[r]=Pee(e,r),n),{})}function yj(e){const t=function(n,r){const i={delimiter:e};return mO(n,r?De(r,i):i)};return t.responseType="text",t}function mO(e,t){return t.header&&(e=t.header.map(ne).join(t.delimiter)+`
`+e),M3e(t.delimiter).parse(e+"")}mO.responseType="text";function VFe(e){return typeof Buffer=="function"&&Ne(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function yO(e,t){const n=t&&t.property?Do(t.property):Ar;return se(e)&&!VFe(e)?WFe(n(e),t):n(JSON.parse(e))}yO.responseType="json";function WFe(e,t){return!Y(e)&&CZ(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const HFe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Fee(e,t){let n,r,i,o;return e=yO(e,t),t&&t.feature?(n=_Pe,i=t.feature):t&&t.mesh?(n=APe,i=t.mesh,o=HFe[t.filter]):G("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):G("Invalid TopoJSON object: "+i),r&&r.features||[r]}Fee.responseType="json";const zw={dsv:mO,csv:yj(","),tsv:yj("	"),json:yO,topojson:Fee};function vO(e,t){return arguments.length>1?(zw[e]=t,this):fe(zw,e)?zw[e]:null}function Ree(e){const t=vO(e);return t&&t.responseType||"text"}function Oee(e,t,n,r){t=t||{};const i=vO(t.type||"json");return i||G("Unknown data format type: "+t.type),e=i(e,t),t.parse&&qFe(e,t.parse,n,r),fe(e,"columns")&&delete e.columns,e}function qFe(e,t,n,r){if(!e.length)return;const i=M1();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,u,c,f;t==="auto"&&(t=Mee(e,o)),o=Object.keys(t);const d=o.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?r:n)(m);if(!dP[p])throw Error("Illegal format pattern: "+h+":"+p);return dP[p]});for(l=0,c=e.length,f=o.length;l<c;++l)for(s=e[l],u=0;u<f;++u)a=o[u],s[a]=d[u](s[a])}const ZC=MFe(typeof fetch<"u"&&fetch,null);function eE(e){const t=e||Ar,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function jw(e,t){try{await t(e)}catch(n){e.error(n)}}const Dee=Symbol("vega_id");let GFe=1;function tE(e){return!!(e&&be(e))}function be(e){return e[Dee]}function Nee(e,t){return e[Dee]=t,e}function at(e){const t=e===Object(e)?e:{data:e};return be(t)?t:Nee(t,GFe++)}function bO(e){return nE(e,at({}))}function nE(e,t){for(const n in e)t[n]=e[n];return t}function Iee(e,t){return Nee(t,be(e))}function Zd(e,t){return e?t?(n,r)=>e(n,r)||be(t(n))-be(t(r)):(n,r)=>e(n,r)||be(n)-be(r):null}function Lee(e){return e&&e.constructor===eh}function eh(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:eh,insert(a){const l=le(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=Ne(a)?r:t,u=le(a),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(a,l,u){const c={field:l,value:Tr(u)};return Ne(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return Ne(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const u={},c={};let f,d,h,p,g,m;for(f=0,d=l.length;f<d;++f)u[be(l[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],u[be(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],l.forEach(v=>{p(v)&&(u[be(v)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],m=be(g),u[m]?u[m]=1:a.add.push(at(e[f]));for(f=0,d=l.length;f<d;++f)g=l[f],u[be(g)]<0&&a.rem.push(g);function y(v,b,x){x?v[b]=x(v):a.encode=b,s||(c[be(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=u[be(g)],m>0&&(y(g,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,l.forEach(v=>{p(v)&&u[be(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?l.filter(v=>u[be(v)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const Bw="_:mod:_";function rE(){Object.defineProperty(this,Bw,{writable:!0,value:{}})}rE.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[Bw];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=Y(n)?1+n.length:-1),i},modified(e,t){const n=this[Bw];if(arguments.length){if(Y(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Bw]={},this}};let YFe=0;const XFe="pulse",KFe=new rE,QFe=1,JFe=2;function kt(e,t,n,r){this.id=++YFe,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function vj(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}kt.prototype={targets(){return this._targets||(this._targets=eE(Mv))},set(e){return this.value!==e?(this.value=e,1):0},skip:vj(QFe),modified:vj(JFe),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new rE,i=this._argops=this._argops||[],o=[];let s,a,l,u;const c=(f,d,h)=>{h instanceof kt?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===XFe)le(a).forEach(f=>{f instanceof kt?f!==this&&(f.targets().add(this),o.push(f)):G("Pulse parameters must be operator instances.")}),this.source=a;else if(Y(a))for(r.set(s,-1,Array(l=a.length)),u=0;u<l;++u)c(s,u,a[u]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||KFe,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function ZFe(e,t,n,r){let i=1,o;return e instanceof kt?o=e:e&&e.prototype instanceof kt?o=new e:Ne(e)?o=new kt(null,e):(i=0,o=new kt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function e4e(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let t4e=0;function iE(e,t,n){this.id=++t4e,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function hu(e,t,n){return new iE(e,t,n)}iE.prototype={_filter:No,_apply:Ar,targets(){return this._targets||(this._targets=eE(Mv))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=hu(e);return this.targets().add(t),t},apply(e){const t=hu(null,e);return this.targets().add(t),t},merge(){const e=hu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=hu();return this.targets().add(hu(null,null,nO(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(hu(null,null,()=>n=!0)),t.targets().add(hu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=No,this._targets=null}};function n4e(e,t,n,r){const i=this,o=hu(n,r),s=function(u){u.dataflow=i;try{o.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=le(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,s);return o}function r4e(e,t){const n=this.locale();return Oee(e,t,n.timeParse,n.utcParse)}function i4e(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function o4e(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:Ree(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function s4e(e,t,n){const r=this,i=r._pending||a4e(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(No).insert(o.data||[])),i.done(),o}function a4e(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const l4e={skip:!0};function u4e(e,t,n,r,i){return(e instanceof kt?f4e:c4e)(this,e,t,n,r,i),this}function c4e(e,t,n,r,i,o){const s=De({},o,l4e);let a,l;Ne(n)||(n=Tr(n)),r===void 0?a=u=>e.touch(n(u)):Ne(r)?(l=new kt(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),f=l.value;Lee(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=u=>e.update(n(u),r,s),t.apply(a)}function f4e(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new kt(null,d4e(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function d4e(e,t){return t=Ne(t)?t:Tr(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function h4e(e){e.rank=++this._rank}function p4e(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&G("Cycle detected in dataflow graph.")}const mS={},Qs=1,xu=2,rl=4,g4e=Qs|xu,bj=Qs|rl,Eh=Qs|xu|rl,xj=8,s0=16,wj=32,Sj=64;function oc(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function zA(e,t){const n=[];return bu(e,t,r=>n.push(r)),n}function kj(e,t){const n={};return e.visit(t,r=>{n[be(r)]=1}),r=>n[be(r)]?null:r}function bx(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}oc.prototype={StopPropagation:mS,ADD:Qs,REM:xu,MOD:rl,ADD_REM:g4e,ADD_MOD:bj,ALL:Eh,REFLOW:xj,SOURCE:s0,NO_SOURCE:wj,NO_FIELDS:Sj,fork(e){return new oc(this.dataflow).init(this,e)},clone(){const e=this.fork(Eh);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Eh|s0)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new oc(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Sj)&&(n.fields=e.fields),t&Qs?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&xu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&rl?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&wj?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Eh;return t&Qs&&this.add.length||t&xu&&this.rem.length||t&rl&&this.mod.length},reflow(e){if(e)return this.fork(Eh).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(rl,kj(this,Qs))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Y(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Y(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Qs&&(n.addF=bx(n.addF,t)),e&xu&&(n.remF=bx(n.remF,t)),e&rl&&(n.modF=bx(n.modF,t)),e&s0&&(n.srcF=bx(n.srcF,t)),n},materialize(e){e=e||Eh;const t=this;return e&Qs&&t.addF&&(t.add=zA(t.add,t.addF),t.addF=null),e&xu&&t.remF&&(t.rem=zA(t.rem,t.remF),t.remF=null),e&rl&&t.modF&&(t.mod=zA(t.mod,t.modF),t.modF=null),e&s0&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&s0)return bu(n.source,n.srcF,r),n;e&Qs&&bu(n.add,n.addF,r),e&xu&&bu(n.rem,n.remF,r),e&rl&&bu(n.mod,n.modF,r);const i=n.source;if(e&xj&&i){const o=n.add.length+n.mod.length;o===i.length||(o?bu(i,kj(n,bj),r):bu(i,n.srcF,r))}return n}};function xO(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}re(xO,oc,{fork(e){const t=new oc(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Y(e)?e.some(r=>n[r]):n[e]:0},filter(){G("MultiPulse does not support filtering.")},materialize(){G("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function m4e(e,t,n){const r=this,i=[];if(r._pulse)return zee(r);if(r._pending&&await r._pending,t&&await jw(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new oc(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=eE(Mv);let s=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=mS),l!==mS&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await jw(r,c[f].callback)}return n&&await jw(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function y4e(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function v4e(e,t,n){return this._pulse?zee(this):(this.evaluate(e,t,n),this)}function b4e(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function zee(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function x4e(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function w4e(e,t){const n=e.source,r=this._clock;return n&&Y(n)?new xO(this,r,n.map(i=>i.pulse),t):this._input[e.id]||S4e(this._pulse,n&&n.pulse)}function S4e(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==mS&&(e.source=t.source),e)}const wO={skip:!1,force:!1};function k4e(e,t){const n=t||wO;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function C4e(e,t,n){const r=n||wO;return(e.set(t)||r.force)&&this.touch(e,r),this}function E4e(e,t,n){this.touch(e,n||wO);const r=new oc(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function _4e(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),jee(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,$4e(t,0,e)):r=n,r}}}function jee(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function $4e(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,jee(e,r,t,n)}function Pp(){this.logger(QR()),this.logLevel(YC),this._clock=0,this._rank=0,this._locale=gO();try{this._loader=ZC()}catch{}this._touched=eE(Mv),this._input={},this._pulse=null,this._heap=_4e((e,t)=>e.qrank-t.qrank),this._postrun=[]}function a0(e){return function(){return this._log[e].apply(this,arguments)}}Pp.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:a0("error"),warn:a0("warn"),info:a0("info"),debug:a0("debug"),logLevel:a0("level"),cleanThreshold:1e4,add:ZFe,connect:e4e,rank:h4e,rerank:p4e,pulse:E4e,touch:k4e,update:C4e,changeset:eh,ingest:i4e,parse:r4e,preload:s4e,request:o4e,events:n4e,on:u4e,evaluate:m4e,run:v4e,runAsync:y4e,runAfter:b4e,_enqueue:x4e,_getPulse:w4e};function H(e,t){kt.call(this,e,null,t)}re(H,kt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const wg={};function Bee(e){const t=Uee(e);return t&&t.Definition||null}function Uee(e){return e=e&&e.toLowerCase(),fe(wg,e)?wg[e]:null}function*Vee(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function SO(e,t,n){const r=Float64Array.from(Vee(e,n));return r.sort(El),t.map(i=>zZ(r,i))}function kO(e,t){return SO(e,[.25,.5,.75],t)}function CO(e,t){const n=e.length,r=NPe(e,t),i=kO(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Wee(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,u,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+g)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var Lo=Math.random;function A4e(e){Lo=e}function Hee(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(Vee(e,r)),o=i.length,s=t;let a,l,u,c;for(u=0,c=Array(s);u<s;++u){for(a=0,l=0;l<o;++l)a+=i[~~(Lo()*o)];c[u]=a/o}return c.sort(El),[rP(c,n/2),rP(c,1-n/2)]}function qee(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),u=l,c=l+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(u=(l+u)/2;s<a;++s)o[s]=u;c=f+t,l=f}u=f}for(u=(l+u)/2;s<a;++s)o[s]=u;return n?T4e(o,t+t/4):o}function T4e(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function P4e(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function M4e(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*Lo())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const Gee=Math.sqrt(2*Math.PI),F4e=Math.SQRT2;let l0=NaN;function oE(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(l0===l0)n=l0,l0=NaN;else{do n=Lo()*2-1,r=Lo()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,l0=r*o}return e+n*t}function EO(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*Gee)}function sE(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function aE(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*F4e*R4e(2*e-1)}function R4e(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function _O(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>oE(n,r),pdf:o=>EO(o,n,r),cdf:o=>sE(o,n,r),icdf:o=>aE(o,n,r)};return i.mean(e).stdev(t)}function $O(e,t){const n=_O();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=CO(e)),i):t},sample(){return e[~~(Lo()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function AO(e,t){return e=e||0,t=t??1,Math.exp(e+oE()*t)}function TO(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Gee*e)}function PO(e,t,n){return sE(Math.log(e),t,n)}function MO(e,t,n){return Math.exp(aE(e,t,n))}function Yee(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>AO(n,r),pdf:o=>TO(o,n,r),cdf:o=>PO(o,n,r),icdf:o=>MO(o,n,r)};return i.mean(e).stdev(t)}function Xee(e,t){let n=0,r;function i(s){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=s[u]==null?1:+s[u];for(u=0;u<n;++u)a[u]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=Lo();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(s<l){a=e[u];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function FO(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Lo()}function RO(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function OO(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function DO(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function Kee(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>FO(n,r),pdf:o=>RO(o,n,r),cdf:o=>OO(o,n,r),icdf:o=>DO(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function NO(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Lv(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function lE(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,u=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,l+=(c-l)/a,u+=(f-u)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=u;return[o,s,l,u]}function zv(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function ym(e,t,n,r,i){let o=0,s=0;return zv(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;o+=u*u,s+=c*c}),1-o/s}function IO(e,t,n){let r=0,i=0,o=0,s=0,a=0;zv(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=Lv(r,i,o,s),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:ym(e,t,n,i,u)}}function Qee(e,t,n){let r=0,i=0,o=0,s=0,a=0;zv(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const l=Lv(r,i,o,s),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:ym(e,t,n,i,u)}}function Jee(e,t,n){const[r,i,o,s]=lE(e,t,n);let a=0,l=0,u=0,c=0,f=0,d,h,p;zv(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,l+=(p-l)/f,u+=(p*h-u)/f,c+=(d*p-c)/f});const[g,m]=Lv(l/s,a/s,u/s,c/s),y=v=>Math.exp(g+m*(v-o));return{coef:[Math.exp(g-m*o),m],predict:y,rSquared:ym(e,t,n,s,y)}}function Zee(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;zv(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++l,r+=(h-r)/l,i+=(p-i)/l,o+=(h*p-o)/l,s+=(h*h-s)/l,a+=(d-a)/l});const u=Lv(r,i,o,s),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:ym(e,t,n,a,c)}}function LO(e,t,n){const[r,i,o,s]=lE(e,t,n),a=r.length;let l=0,u=0,c=0,f=0,d=0,h,p,g,m;for(h=0;h<a;)p=r[h],g=i[h++],m=p*p,l+=(m-l)/h,u+=(m*p-u)/h,c+=(m*m-c)/h,f+=(p*g-f)/h,d+=(m*g-d)/h;const y=c-l*l,v=l*y-u*u,b=(d*l-f*u)/v,x=(f*y-d*u)/v,w=-b*l,k=S=>(S=S-o,b*S*S+x*S+w+s);return{coef:[w-x*o+b*o*o+s,x-2*b*o,b],predict:k,rSquared:ym(e,t,n,s,k)}}function ete(e,t,n,r){if(r===0)return NO(e,t,n);if(r===1)return IO(e,t,n);if(r===2)return LO(e,t,n);const[i,o,s,a]=lE(e,t,n),l=i.length,u=[],c=[],f=r+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d)*o[p];for(u.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(i[p],d+h);m[h]=g}c.push(m)}c.push(u);const y=D4e(c),v=b=>{b-=s;let x=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)x+=y[d]*Math.pow(b,d);return x};return{coef:O4e(f,y,-s,a),predict:v,rSquared:ym(e,t,n,a,v)}}function O4e(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function D4e(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const Cj=2,Ej=1e-12;function tte(e,t,n,r){const[i,o,s,a]=lE(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),f=new Float64Array(l),d=new Float64Array(l).fill(1);for(let h=-1;++h<=Cj;){const p=[0,u-1];for(let m=0;m<l;++m){const y=i[m],v=p[0],b=p[1],x=y-i[v]>i[b]-y?v:b;let w=0,k=0,S=0,C=0,E=0;const A=1/Math.abs(i[x]-y||1);for(let F=v;F<=b;++F){const R=i[F],_=o[F],P=N4e(Math.abs(y-R)*A)*d[F],N=R*P;w+=P,k+=N,S+=_*P,C+=_*N,E+=R*N}const[T,I]=Lv(k/w,S/w,C/w,E/w);c[m]=T+I*y,f[m]=Math.abs(o[m]-c[m]),I4e(i,m+1,p)}if(h===Cj)break;const g=jZ(f);if(Math.abs(g)<Ej)break;for(let m=0,y,v;m<l;++m)y=f[m]/(6*g),d[m]=y>=1?Ej:(v=1-y*y)*v}return L4e(i,c,s,a)}function N4e(e){return(e=1-e*e*e)*e*e}function I4e(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function L4e(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],u;for(;s<i;++s)u=e[s]+n,l[0]===u?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[s]],o.push(l));return l[1]+=r,o}const z4e=.5*Math.PI/180;function uE(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],o=t[0],s=t[1],a=s-o,l=a/r,u=[i(o)],c=[];if(n===r){for(let g=1;g<r;++g)u.push(i(o+g/n*a));return u.push(i(s)),u}else{c.push(i(s));for(let g=n;--g>0;)c.push(i(o+g/n*a))}let f=u[0],d=c[c.length-1];const h=1/a,p=j4e(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=l&&B4e(f,g,d,h,p)>z4e?c.push(g):(f=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function j4e(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function B4e(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function U4e(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function hP(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:U4e(e)}function nte(e,t,n){return n||e+(t?"_"+t:"")}const jA=()=>{},V4e={init:jA,add:jA,rem:jA,idx:0},F1={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},jv=Object.keys(F1).filter(e=>e!=="__count__");function W4e(e,t){return(n,r)=>De({name:e,aggregate_param:r,out:n||e},V4e,t)}[...jv,"__count__"].forEach(e=>{F1[e]=W4e(e,F1[e])});function rte(e,t,n){return F1[e](n,t)}function ite(e,t){return e.idx-t.idx}function H4e(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=F1[i]())})};return e.forEach(n),Object.values(t).sort(ite)}function q4e(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function G4e(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Y4e(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function X4e(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function ote(e,t){const n=t||Ar,r=H4e(e),i=e.slice().sort(ite);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=q4e,o.prototype.add=G4e,o.prototype.rem=Y4e,o.prototype.set=X4e,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function zO(e){this._key=e?Do(e):be,this.reset()}const or=zO.prototype;or.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};or.add=function(e){this._add.push(e)};or.rem=function(e){this._rem.push(e)};or.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,u;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(u=e[a])]?s[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};or.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",fe(n,o)||(n[o]=1,++i);return i};or.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=SZ(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};or.argmin=function(e){return this.extent(e)[0]||{}};or.argmax=function(e){return this.extent(e)[1]||{}};or.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};or.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};or.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=kO(this.values(),e),this._get=e),this._q};or.q1=function(e){return this.quartile(e)[0]};or.q2=function(e){return this.quartile(e)[1]};or.q3=function(e){return this.quartile(e)[2]};or.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Hee(this.values(),1e3,.05,e),this._get=e),this._ci};or.ci0=function(e){return this.ci(e)[0]};or.ci1=function(e){return this.ci(e)[1]};function yc(e){H.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}yc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:jv},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};re(yc,H,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,u,c,f;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][f=c[n[u]]]=f}o(e._prev),o(t);function s(a,l,u){const c=n[u],f=r[u++];for(const d in f){const h=a?a+"|"+d:d;l[c]=f[d],u<i?s(h,l,u):t[h]||e.cell(h,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=le(kr(v)),x=b.length;let w=0,k;for(;w<x;++w)r[k=b[w]]||(r[k]=1,t.push(k))}this._dims=le(e.groupby),this._dnames=this._dims.map(v=>{const b=tn(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:hP(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let f,d,h,p,g,m,y;for(u!==s.length&&G("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(f=o[y],d=s[y],h=a[y]||null,f==null&&d!=="count"&&G("Null aggregate field specified."),g=tn(f),m=nte(d,g,l[y]),n.push(m),d==="count"){this._counts.push(m);continue}p=c[g],p||(i(f),p=c[g]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(rte(d,h,m))}return this._measures=this._measures.map(v=>ote(v,v.field)),Object.create(null)},cellkey:hP(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new zO),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?Iee(t.tuple,o):at(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,u,c,f;if(r)for(u in r)l=r[u],(!i||l.num)&&s.push(l.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&i?s:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const K4e=1e-14;function jO(e){H.call(this,null,e)}jO.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};re(jO,H,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(kr(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const f=r(c);c[a]=f,c[l]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Wee(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(u){let c=wr(t(u));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(K4e+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=$i(l,kr(t),e.name||"bin_"+tn(t))}});function ste(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),u&&l&&i.sort(l),o.length&&(i=l?AZ(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function BO(e){H.call(this,[],e)}BO.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};re(BO,H,{transform(e,t){const n=t.fork(t.ALL),r=ste(be,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Zd(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function ate(e){kt.call(this,null,Q4e,e)}re(ate,kt);function Q4e(e){return this.value&&!e.modified()?this.value:tO(e.fields,e.orders)}function UO(e){H.call(this,null,e)}UO.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function J4e(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}re(UO,H,{transform(e,t){const n=f=>d=>{for(var h=J4e(a(d),e.case,o)||[],p,g=0,m=h.length;g<m;++g)s.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],u=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=at({}),l[i]=a,l[o]=u,s.add.push(l)):u===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==u&&(l[o]=u,s.mod.push(l));return s.modifies(t)}});function VO(e){H.call(this,null,e)}VO.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};re(VO,H,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=Z4e(a,i,o,e.filter||No)):n.mod=a,n.source=this.value,n.modifies(r)}});function Z4e(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,u;a<s;++a)for(o[t]=u=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(at(o)),o={},o[t]=u);return i}const _j={kde:$O,mixture:Xee,normal:_O,lognormal:Yee,uniform:Kee},eRe="distributions",$j="function",tRe="field";function lte(e,t){const n=e[$j];fe(_j,n)||G("Unknown distribution function: "+n);const r=_j[n]();for(const i in e)i===tRe?r.data((e.from||t()).map(e[i])):i===eRe?r[i](e[i].map(o=>lte(o,t))):typeof r[i]===$j&&r[i](e[i]);return r}function WO(e){H.call(this,null,e)}const ute=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],nRe={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:ute},{name:"weights",type:"number",array:!0}]};WO.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:ute.concat(nRe)},{name:"as",type:"string",array:!0,default:["value","density"]}]};re(WO,H,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=lte(e.distribution,rRe(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&G("Invalid density method: "+s),!e.extent&&!r.data&&G("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||Aa(r.data()),u=uE(s,l,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],at(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function rRe(e){return()=>e.materialize(e.SOURCE).source}function cte(e,t){return e?e.map((n,r)=>t[r]||tn(n)):null}function HO(e,t,n){const r=[],i=f=>f(l);let o,s,a,l,u,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],u=t.map(i),c=o[u],c||(o[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const fte="bin";function qO(e){H.call(this,null,e)}qO.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:fte}]};const iRe=(e,t)=>Fv(Aa(e,t))/30;re(qO,H,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=HO(t.source,e.groupby,Ar),i=e.smooth||!1,o=e.field,s=e.step||iRe(n,o),a=Zd((p,g)=>o(p)-o(g)),l=e.as||fte,u=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<u;++d){const p=r[d].sort(a);h=-1;for(const g of qee(p,s,i,o))g<c&&(c=g),g>f&&(f=g),p[++h][l]=g}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(l)}});function dte(e){kt.call(this,null,oRe,e),this.modified(!0)}re(dte,kt);function oRe(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:$i(n=>t(n,e),kr(t),tn(t))}function GO(e){H.call(this,[void 0,void 0],e)}GO.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};re(GO,H,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=wr(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=tn(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function YO(e,t){kt.call(this,e),this.parent=t,this.count=0}re(YO,kt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function cE(e){H.call(this,{},e),this._keys=hm();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}re(cE,H,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=fe(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new YO(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=be(l),c=o.get(u);c!==void 0&&(o.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(be(l),u),a(u).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=be(l),c=o.get(u),f=r(l);c===f?a(f).mod(l):(o.set(u,f),a(c).rem(l),a(f).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(be(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const u=be(l),c=o.get(u),f=r(l);c!==f&&(o.set(u,f),a(c).rem(l),a(f).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function hte(e){kt.call(this,null,sRe,e)}re(hte,kt);function sRe(e){return this.value&&!e.modified()?this.value:Y(e.name)?le(e.name).map(t=>Do(t)):Do(e.name,e.as)}function XO(e){H.call(this,hm(),e)}XO.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};re(XO,H,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,f=>{const d=be(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{l(f,e)?o.push(f):r.set(be(f),1)});function c(f){const d=be(f),h=l(f,e),p=r.get(d);h&&p?(r.delete(d),o.push(f)):!h&&!p?(r.set(d,1),s.push(f)):u&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function KO(e){H.call(this,[],e)}KO.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};re(KO,H,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=cte(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<u;++c){for(d=bO(a),f=0;f<s;++f)d[i[f]]=(h=l[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function QO(e){H.call(this,[],e)}QO.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};re(QO,H,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(tn),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,f;c<l;++c)f=bO(u),f[s]=i[c],f[a]=r[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function JO(e){H.call(this,null,e)}JO.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};re(JO,H,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function pte(e){H.call(this,[],e)}re(pte,H,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=at(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const xx={value:"value",median:jZ,mean:UPe,min:nP,max:rd},aRe=[];function ZO(e){H.call(this,[],e)}ZO.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function lRe(e){var t=e.method||xx.value,n;if(xx[t]==null)G("Unrecognized imputation method: "+t);else return t===xx.value?(n=e.value!==void 0?e.value:0,()=>n):xx[t]}function uRe(e){const t=e.field;return n=>n?t(n):NaN}re(ZO,H,{transform(e,t){var n=t.fork(t.ALL),r=lRe(e),i=uRe(e),o=tn(e.field),s=tn(e.key),a=(e.groupby||[]).map(tn),l=cRe(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,f=l.domain.length,d,h,p,g,m,y,v,b,x,w;for(m=0,b=l.length;m<b;++m)for(d=l[m],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(g=l.domain[v],w={_impute:!0},y=0,x=p.length;y<x;++y)w[a[y]]=p[y];w[s]=g,w[o]=Number.isNaN(h)?h=r(d,i):h,u.push(at(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function cRe(e,t,n,r){var i=y=>y(m),o=[],s=r?r.slice():[],a={},l={},u,c,f,d,h,p,g,m;for(s.forEach((y,v)=>a[y]=v+1),d=0,g=e.length;d<g;++d)m=e[d],p=n(m),h=a[p]||(a[p]=s.push(p)),c=(u=t?t.map(i):aRe)+"",(f=l[c])||(f=l[c]=[],o.push(f),f.values=u),f[h-1]=m;return o.domain=s,o}function eD(e){yc.call(this,e)}eD.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:jv},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};re(eD,yc,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{De(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function tD(e){H.call(this,null,e)}tD.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};re(tD,H,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=HO(r,e.groupby,e.field),o=(e.groupby||[]).map(tn),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&G("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Aa(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=$O(h,s)[a],g=e.counts?h.length:1,m=c||Aa(h);uE(p,m,f,d).forEach(y=>{const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[l[0]]=y[0],v[l[1]]=y[1]*g,u.push(at(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function gte(e){kt.call(this,null,fRe,e)}re(gte,kt);function fRe(e){return this.value&&!e.modified()?this.value:rO(e.fields,e.flat)}function mte(e){H.call(this,[],e),this._pending=null}re(mte,H,{transform(e,t){const n=t.dataflow;return this._pending?BA(this,t,this._pending):dRe(e)?t.StopPropagation:e.values?BA(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=le(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>BA(this,t,le(r.data)))}});function dRe(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function BA(e,t,n){n.forEach(at);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function nD(e){H.call(this,{},e)}nD.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};re(nD,H,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,u=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&G('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&G('The "as" parameter has too few output field names.'),c=c||i.map(tn),f=function(p){for(var g=0,m=0,y,v;g<a;++g)if(v=r.get(n[g](p)),v==null)for(y=0;y<d;++y,++m)p[c[m]]=o;else for(y=0;y<d;++y,++m)p[c[m]]=i[y](v)}):(c||G("Missing output field names."),f=function(p){for(var g=0,m;g<a;++g)m=r.get(n[g](p)),p[c[g]]=m??o}),s?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,f),u.modifies(c)}});function yte(e){kt.call(this,null,hRe,e)}re(yte,kt);function hRe(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function vte(e){kt.call(this,null,pRe,e)}re(vte,kt);function pRe(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function bte(e){H.call(this,null,e)}re(bte,H,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function rD(e){yc.call(this,e)}rD.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:jv,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};re(rD,yc,{_transform:yc.prototype.transform,transform(e,t){return this._transform(gRe(e,t),t)}});function gRe(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=kr(n).concat(kr(r)),s=yRe(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>mRe(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function mRe(e,t,n,r){return $i(i=>t(i)===e?n(i):NaN,r,e+"")}function yRe(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(QC),t?i.slice(0,t):i}function xte(e){cE.call(this,e)}re(xte,cE,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(be(o),n,t,o);return(e.modified("field")||r&&t.modified(kr(r)))&&G("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(at(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function iD(e){H.call(this,null,e)}iD.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};re(iD,H,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=cte(e.fields,e.as||[]),o=r?(a,l)=>vRe(a,l,r,i):nE;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=be(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,at({}));s[be(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[be(a)]))}),n}});function vRe(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function wte(e){H.call(this,null,e)}re(wte,H,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function oD(e){H.call(this,null,e)}oD.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const bRe=1e-14;re(oD,H,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=HO(i,e.groupby,e.field),s=(e.groupby||[]).map(tn),a=[],l=e.step||.01,u=e.probs||Bi(l/2,1-bRe,l),c=u.length;return o.forEach(f=>{const d=SO(f,u);for(let h=0;h<c;++h){const p={};for(let g=0;g<s.length;++g)p[s[g]]=f.dims[g];p[r[0]]=u[h],p[r[1]]=d[h],a.push(at(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function Ste(e){H.call(this,null,e)}re(Ste,H,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=be(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=bO(i);r[be(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[be(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function sD(e){H.call(this,[],e),this.count=0}sD.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};re(sD,H,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[be(f)]=1,c),{});let s=this.value,a=this.count,l=0;function u(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*Lo()),d<s.length&&d>=l&&(f=s[d],o[be(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=be(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[be(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,c=>{o[be(c)]||u(c)}),l=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[be(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[be(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=s.filter(c=>!o[be(c)])),this.count=a,this.value=n.source=s,n}});function aD(e){H.call(this,null,e)}aD.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};re(aD,H,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Bi(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,at(o)}),n.add=t.add.concat(this.value),n}});function kte(e){H.call(this,null,e),this.modified(!0)}re(kte,H,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function lD(e){H.call(this,null,e)}const Cte=["unit0","unit1"];lD.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:cO,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Cte}]};re(lD,H,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?mm:gm)(o.unit).offset,a=e.as||Cte,l=a[0],u=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(kr(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let m,y;g==null?(p[l]=null,r&&(p[u]=null)):(p[l]=m=y=o(g),r&&(p[u]=y=s(m,c)),m<f&&(f=m),y>d&&(d=y))}),o.start=f,o.stop=d,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:pee({extent:e.extent||Aa(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=fO(r),s=this.value||{},a=(n?oee:iee)(o,i);return a.unit=qe(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function Ete(e){H.call(this,hm(),e)}re(Ete,H,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function _te(e){H.call(this,null,e)}re(_te,H,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Zd(e.sort)):t.source).map(e.field))}});function xRe(e,t,n,r){const i=R1[e](t,n);return{init:i.init||Au,update:function(o,s){s[r]=i.next(o)}}}const R1={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=R1.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||G("ntile num must be greater than zero.");const n=R1.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||G("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=wRe(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function wRe(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const SRe=Object.keys(R1);function $te(e){const t=le(e.ops),n=le(e.fields),r=le(e.params),i=le(e.aggregate_params),o=le(e.as),s=this.outputs=[],a=this.windows=[],l={},u={},c=[],f=[];let d=!0;function h(p){le(kr(p)).forEach(g=>l[g]=1)}h(e.sort),t.forEach((p,g)=>{const m=n[g],y=r[g],v=i[g]||null,b=tn(m),x=nte(p,b,o[g]);if(h(m),s.push(x),fe(R1,p))a.push(xRe(p,m,y,x));else{if(m==null&&p!=="count"&&G("Null aggregate field specified."),p==="count"){c.push(x);return}d=!1;let w=u[b];w||(w=u[b]=[],w.field=m,f.push(w)),w.push(rte(p,v,x))}}),(c.length||f.length)&&(this.cell=kRe(f,c,d)),this.inputs=Object.keys(l)}const Ate=$te.prototype;Ate.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};Ate.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function kRe(e,t,n){e=e.map(l=>ote(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new zO;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function uD(e){H.call(this,{},e),this._mlen=0,this._mods=[]}uD.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:SRe.concat(jv)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};re(uD,H,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Zd(e.sort),i=hP(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new $te(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)CRe(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=ste(be),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function CRe(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,u=o?pm(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Tr(-1)};t.init();for(let f=0;f<l;++f)ERe(c,s,f,l),o&&_Re(c,u),t.update(c,a[f])}function ERe(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function _Re(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const $Re=Object.freeze(Object.defineProperty({__proto__:null,aggregate:yc,bin:jO,collect:BO,compare:ate,countpattern:UO,cross:VO,density:WO,dotbin:qO,expression:dte,extent:GO,facet:cE,field:hte,filter:XO,flatten:KO,fold:QO,formula:JO,generate:pte,impute:ZO,joinaggregate:eD,kde:tD,key:gte,load:mte,lookup:nD,multiextent:yte,multivalues:vte,params:bte,pivot:rD,prefacet:xte,project:iD,proxy:wte,quantile:oD,relay:Ste,sample:sD,sequence:aD,sieve:kte,subflow:YO,timeunit:lD,tupleindex:Ete,values:_te,window:uD},Symbol.toStringTag,{value:"Module"}));function ct(e){return function(){return e}}const Aj=Math.abs,ur=Math.atan2,tf=Math.cos,ARe=Math.max,UA=Math.min,Ws=Math.sin,Nf=Math.sqrt,dr=1e-12,Sg=Math.PI,yS=Sg/2,Tte=2*Sg;function TRe(e){return e>1?0:e<-1?Sg:Math.acos(e)}function Tj(e){return e>=1?yS:e<=-1?-yS:Math.asin(e)}const pP=Math.PI,gP=2*pP,bf=1e-6,PRe=gP-bf;function Pte(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function MRe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Pte;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let cD=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Pte:MRe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,u=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>bf)if(!(Math.abs(f*l-u*c)>bf)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,p=i-a,g=l*l+u*u,m=h*h+p*p,y=Math.sqrt(g),v=Math.sqrt(d),b=o*Math.tan((pP-Math.acos((g+d-m)/(2*y*v)))/2),x=b/v,w=b/y;Math.abs(x-1)>bf&&this._append`L${t+x*c},${n+x*f}`,this._append`A${o},${o},0,0,${+(f*h>c*p)},${this._x1=t+w*l},${this._y1=n+w*u}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>bf||Math.abs(this._y1-c)>bf)&&this._append`L${u},${c}`,r&&(d<0&&(d=d%gP+gP),d>PRe?this._append`A${r},${r},0,1,${f},${t-a},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:d>bf&&this._append`A${r},${r},0,${+(d>=pP)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function fE(){return new cD}fE.prototype=cD.prototype;function dE(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new cD(t)}function FRe(e){return e.innerRadius}function RRe(e){return e.outerRadius}function ORe(e){return e.startAngle}function DRe(e){return e.endAngle}function NRe(e){return e&&e.padAngle}function IRe(e,t,n,r,i,o,s,a){var l=n-e,u=r-t,c=s-i,f=a-o,d=f*l-c*u;if(!(d*d<dr))return d=(c*(t-o)-f*(e-i))/d,[e+d*l,t+d*u]}function wx(e,t,n,r,i,o,s){var a=e-n,l=t-r,u=(s?o:-o)/Nf(a*a+l*l),c=u*l,f=-u*a,d=e+c,h=t+f,p=n+c,g=r+f,m=(d+p)/2,y=(h+g)/2,v=p-d,b=g-h,x=v*v+b*b,w=i-o,k=d*g-p*h,S=(b<0?-1:1)*Nf(ARe(0,w*w*x-k*k)),C=(k*b-v*S)/x,E=(-k*v-b*S)/x,A=(k*b+v*S)/x,T=(-k*v+b*S)/x,I=C-m,F=E-y,R=A-m,_=T-y;return I*I+F*F>R*R+_*_&&(C=A,E=T),{cx:C,cy:E,x01:-c,y01:-f,x11:C*(i/w-1),y11:E*(i/w-1)}}function LRe(){var e=FRe,t=RRe,n=ct(0),r=null,i=ORe,o=DRe,s=NRe,a=null,l=dE(u);function u(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-yS,g=o.apply(this,arguments)-yS,m=Aj(g-p),y=g>p;if(a||(a=c=l()),h<d&&(f=h,h=d,d=f),!(h>dr))a.moveTo(0,0);else if(m>Tte-dr)a.moveTo(h*tf(p),h*Ws(p)),a.arc(0,0,h,p,g,!y),d>dr&&(a.moveTo(d*tf(g),d*Ws(g)),a.arc(0,0,d,g,p,y));else{var v=p,b=g,x=p,w=g,k=m,S=m,C=s.apply(this,arguments)/2,E=C>dr&&(r?+r.apply(this,arguments):Nf(d*d+h*h)),A=UA(Aj(h-d)/2,+n.apply(this,arguments)),T=A,I=A,F,R;if(E>dr){var _=Tj(E/d*Ws(C)),P=Tj(E/h*Ws(C));(k-=_*2)>dr?(_*=y?1:-1,x+=_,w-=_):(k=0,x=w=(p+g)/2),(S-=P*2)>dr?(P*=y?1:-1,v+=P,b-=P):(S=0,v=b=(p+g)/2)}var N=h*tf(v),D=h*Ws(v),L=d*tf(w),U=d*Ws(w);if(A>dr){var V=h*tf(b),oe=h*Ws(b),Q=d*tf(x),ye=d*Ws(x),Oe;if(m<Sg)if(Oe=IRe(N,D,Q,ye,V,oe,L,U)){var ut=N-Oe[0],$n=D-Oe[1],sr=V-Oe[0],ce=oe-Oe[1],$e=1/Ws(TRe((ut*sr+$n*ce)/(Nf(ut*ut+$n*$n)*Nf(sr*sr+ce*ce)))/2),Ae=Nf(Oe[0]*Oe[0]+Oe[1]*Oe[1]);T=UA(A,(d-Ae)/($e-1)),I=UA(A,(h-Ae)/($e+1))}else T=I=0}S>dr?I>dr?(F=wx(Q,ye,N,D,h,I,y),R=wx(V,oe,L,U,h,I,y),a.moveTo(F.cx+F.x01,F.cy+F.y01),I<A?a.arc(F.cx,F.cy,I,ur(F.y01,F.x01),ur(R.y01,R.x01),!y):(a.arc(F.cx,F.cy,I,ur(F.y01,F.x01),ur(F.y11,F.x11),!y),a.arc(0,0,h,ur(F.cy+F.y11,F.cx+F.x11),ur(R.cy+R.y11,R.cx+R.x11),!y),a.arc(R.cx,R.cy,I,ur(R.y11,R.x11),ur(R.y01,R.x01),!y))):(a.moveTo(N,D),a.arc(0,0,h,v,b,!y)):a.moveTo(N,D),!(d>dr)||!(k>dr)?a.lineTo(L,U):T>dr?(F=wx(L,U,V,oe,d,-T,y),R=wx(N,D,Q,ye,d,-T,y),a.lineTo(F.cx+F.x01,F.cy+F.y01),T<A?a.arc(F.cx,F.cy,T,ur(F.y01,F.x01),ur(R.y01,R.x01),!y):(a.arc(F.cx,F.cy,T,ur(F.y01,F.x01),ur(F.y11,F.x11),!y),a.arc(0,0,d,ur(F.cy+F.y11,F.cx+F.x11),ur(R.cy+R.y11,R.cx+R.x11),y),a.arc(R.cx,R.cy,T,ur(R.y11,R.x11),ur(R.y01,R.x01),!y))):a.arc(0,0,d,w,x,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Sg/2;return[tf(f)*c,Ws(f)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:ct(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:ct(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:ct(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:ct(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:ct(+c),u):i},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:ct(+c),u):o},u.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:ct(+c),u):s},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function Mte(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fte(e){this._context=e}Fte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fD(e){return new Fte(e)}function Rte(e){return e[0]}function Ote(e){return e[1]}function Dte(e,t){var n=ct(!0),r=null,i=fD,o=null,s=dE(a);e=typeof e=="function"?e:e===void 0?Rte:ct(e),t=typeof t=="function"?t:t===void 0?Ote:ct(t);function a(l){var u,c=(l=Mte(l)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,u,l),+t(f,u,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ct(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ct(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ct(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function Nte(e,t,n){var r=null,i=ct(!0),o=null,s=fD,a=null,l=dE(u);e=typeof e=="function"?e:e===void 0?Rte:ct(+e),t=typeof t=="function"?t:ct(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Ote:ct(+n);function u(f){var d,h,p,g=(f=Mte(f)).length,m,y=!1,v,b=new Array(g),x=new Array(g);for(o==null&&(a=s(v=l())),d=0;d<=g;++d){if(!(d<g&&i(m=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(m,d,f),x[d]=+t(m,d,f),a.point(r?+r(m,d,f):b[d],n?+n(m,d,f):x[d]))}if(v)return a=null,v+""||null}function c(){return Dte().defined(i).curve(s).context(o)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ct(+f),r=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ct(+f),u):e},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ct(+f),u):r},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:ct(+f),n=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ct(+f),u):t},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ct(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ct(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),u):s},u.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),u):o},u}const zRe={draw(e,t){const n=Nf(t/Sg);e.moveTo(n,0),e.arc(0,0,n,0,Tte)}};function jRe(e,t){let n=null,r=dE(i);e=typeof e=="function"?e:ct(e||zRe),t=typeof t=="function"?t:ct(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:ct(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:ct(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function vc(){}function vS(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function hE(e){this._context=e}hE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BRe(e){return new hE(e)}function Ite(e){this._context=e}Ite.prototype={areaStart:vc,areaEnd:vc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:vS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function URe(e){return new Ite(e)}function Lte(e){this._context=e}Lte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:vS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function VRe(e){return new Lte(e)}function zte(e,t){this._basis=new hE(e),this._beta=t}zte.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const WRe=function e(t){function n(r){return t===1?new hE(r):new zte(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function bS(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function dD(e,t){this._context=e,this._k=(1-t)/6}dD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:bS(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:bS(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const HRe=function e(t){function n(r){return new dD(r,t)}return n.tension=function(r){return e(+r)},n}(0);function hD(e,t){this._context=e,this._k=(1-t)/6}hD.prototype={areaStart:vc,areaEnd:vc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:bS(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qRe=function e(t){function n(r){return new hD(r,t)}return n.tension=function(r){return e(+r)},n}(0);function pD(e,t){this._context=e,this._k=(1-t)/6}pD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bS(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const GRe=function e(t){function n(r){return new pD(r,t)}return n.tension=function(r){return e(+r)},n}(0);function gD(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>dr){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>dr){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function jte(e,t){this._context=e,this._alpha=t}jte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:gD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const YRe=function e(t){function n(r){return t?new jte(r,t):new dD(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Bte(e,t){this._context=e,this._alpha=t}Bte.prototype={areaStart:vc,areaEnd:vc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:gD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const XRe=function e(t){function n(r){return t?new Bte(r,t):new hD(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Ute(e,t){this._context=e,this._alpha=t}Ute.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const KRe=function e(t){function n(r){return t?new Ute(r,t):new pD(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Vte(e){this._context=e}Vte.prototype={areaStart:vc,areaEnd:vc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function QRe(e){return new Vte(e)}function Pj(e){return e<0?-1:1}function Mj(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(Pj(o)+Pj(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function Fj(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function VA(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function xS(e){this._context=e}xS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:VA(this,this._t0,Fj(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,VA(this,Fj(this,n=Mj(this,e,t)),n);break;default:VA(this,this._t0,n=Mj(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Wte(e){this._context=new Hte(e)}(Wte.prototype=Object.create(xS.prototype)).point=function(e,t){xS.prototype.point.call(this,t,e)};function Hte(e){this._context=e}Hte.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function JRe(e){return new xS(e)}function ZRe(e){return new Wte(e)}function qte(e){this._context=e}qte.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Rj(e),i=Rj(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Rj(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function eOe(e){return new qte(e)}function pE(e,t){this._context=e,this._t=t}pE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function tOe(e){return new pE(e,.5)}function nOe(e){return new pE(e,0)}function rOe(e){return new pE(e,1)}function sc(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const iOe=()=>typeof Image<"u"?Image:null;function Ia(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ic(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mP=Symbol("implicit");function mD(){var e=new K7,t=[],n=[],r=mP;function i(o){let s=e.get(o);if(s===void 0){if(r!==mP)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new K7;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return mD(t,n).unknown(r)},Ia.apply(i,arguments),i}function vm(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Bv(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Lc(){}var xd=.7,kg=1/xd,Mp="\\s*([+-]?\\d+)\\s*",O1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oOe=/^#([0-9a-f]{3,8})$/,sOe=new RegExp(`^rgb\\(${Mp},${Mp},${Mp}\\)$`),aOe=new RegExp(`^rgb\\(${ka},${ka},${ka}\\)$`),lOe=new RegExp(`^rgba\\(${Mp},${Mp},${Mp},${O1}\\)$`),uOe=new RegExp(`^rgba\\(${ka},${ka},${ka},${O1}\\)$`),cOe=new RegExp(`^hsl\\(${O1},${ka},${ka}\\)$`),fOe=new RegExp(`^hsla\\(${O1},${ka},${ka},${O1}\\)$`),Oj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vm(Lc,D1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Dj,formatHex:Dj,formatHex8:dOe,formatHsl:hOe,formatRgb:Nj,toString:Nj});function Dj(){return this.rgb().formatHex()}function dOe(){return this.rgb().formatHex8()}function hOe(){return Gte(this).formatHsl()}function Nj(){return this.rgb().formatRgb()}function D1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=oOe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ij(t):n===3?new Mn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Sx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Sx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sOe.exec(e))?new Mn(t[1],t[2],t[3],1):(t=aOe.exec(e))?new Mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lOe.exec(e))?Sx(t[1],t[2],t[3],t[4]):(t=uOe.exec(e))?Sx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cOe.exec(e))?jj(t[1],t[2]/100,t[3]/100,1):(t=fOe.exec(e))?jj(t[1],t[2]/100,t[3]/100,t[4]):Oj.hasOwnProperty(e)?Ij(Oj[e]):e==="transparent"?new Mn(NaN,NaN,NaN,0):null}function Ij(e){return new Mn(e>>16&255,e>>8&255,e&255,1)}function Sx(e,t,n,r){return r<=0&&(e=t=n=NaN),new Mn(e,t,n,r)}function yD(e){return e instanceof Lc||(e=D1(e)),e?(e=e.rgb(),new Mn(e.r,e.g,e.b,e.opacity)):new Mn}function bc(e,t,n,r){return arguments.length===1?yD(e):new Mn(e,t,n,r??1)}function Mn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}vm(Mn,bc,Bv(Lc,{brighter(e){return e=e==null?kg:Math.pow(kg,e),new Mn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xd:Math.pow(xd,e),new Mn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mn(id(this.r),id(this.g),id(this.b),wS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lj,formatHex:Lj,formatHex8:pOe,formatRgb:zj,toString:zj}));function Lj(){return`#${If(this.r)}${If(this.g)}${If(this.b)}`}function pOe(){return`#${If(this.r)}${If(this.g)}${If(this.b)}${If((isNaN(this.opacity)?1:this.opacity)*255)}`}function zj(){const e=wS(this.opacity);return`${e===1?"rgb(":"rgba("}${id(this.r)}, ${id(this.g)}, ${id(this.b)}${e===1?")":`, ${e})`}`}function wS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function id(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function If(e){return e=id(e),(e<16?"0":"")+e.toString(16)}function jj(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new us(e,t,n,r)}function Gte(e){if(e instanceof us)return new us(e.h,e.s,e.l,e.opacity);if(e instanceof Lc||(e=D1(e)),!e)return new us;if(e instanceof us)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new us(s,a,l,e.opacity)}function SS(e,t,n,r){return arguments.length===1?Gte(e):new us(e,t,n,r??1)}function us(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}vm(us,SS,Bv(Lc,{brighter(e){return e=e==null?kg:Math.pow(kg,e),new us(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xd:Math.pow(xd,e),new us(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Mn(WA(e>=240?e-240:e+120,i,r),WA(e,i,r),WA(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new us(Bj(this.h),kx(this.s),kx(this.l),wS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wS(this.opacity);return`${e===1?"hsl(":"hsla("}${Bj(this.h)}, ${kx(this.s)*100}%, ${kx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Bj(e){return e=(e||0)%360,e<0?e+360:e}function kx(e){return Math.max(0,Math.min(1,e||0))}function WA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Yte=Math.PI/180,Xte=180/Math.PI,kS=18,Kte=.96422,Qte=1,Jte=.82521,Zte=4/29,Fp=6/29,ene=3*Fp*Fp,gOe=Fp*Fp*Fp;function tne(e){if(e instanceof Ca)return new Ca(e.l,e.a,e.b,e.opacity);if(e instanceof vl)return nne(e);e instanceof Mn||(e=yD(e));var t=YA(e.r),n=YA(e.g),r=YA(e.b),i=HA((.2225045*t+.7168786*n+.0606169*r)/Qte),o,s;return t===n&&n===r?o=s=i:(o=HA((.4360747*t+.3850649*n+.1430804*r)/Kte),s=HA((.0139322*t+.0971045*n+.7141733*r)/Jte)),new Ca(116*i-16,500*(o-i),200*(i-s),e.opacity)}function CS(e,t,n,r){return arguments.length===1?tne(e):new Ca(e,t,n,r??1)}function Ca(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}vm(Ca,CS,Bv(Lc,{brighter(e){return new Ca(this.l+kS*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ca(this.l-kS*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Kte*qA(t),e=Qte*qA(e),n=Jte*qA(n),new Mn(GA(3.1338561*t-1.6168667*e-.4906146*n),GA(-.9787684*t+1.9161415*e+.033454*n),GA(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function HA(e){return e>gOe?Math.pow(e,1/3):e/ene+Zte}function qA(e){return e>Fp?e*e*e:ene*(e-Zte)}function GA(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function YA(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function mOe(e){if(e instanceof vl)return new vl(e.h,e.c,e.l,e.opacity);if(e instanceof Ca||(e=tne(e)),e.a===0&&e.b===0)return new vl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Xte;return new vl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ES(e,t,n,r){return arguments.length===1?mOe(e):new vl(e,t,n,r??1)}function vl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function nne(e){if(isNaN(e.h))return new Ca(e.l,0,0,e.opacity);var t=e.h*Yte;return new Ca(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}vm(vl,ES,Bv(Lc,{brighter(e){return new vl(this.h,this.c,this.l+kS*(e??1),this.opacity)},darker(e){return new vl(this.h,this.c,this.l-kS*(e??1),this.opacity)},rgb(){return nne(this).rgb()}}));var rne=-.14861,vD=1.78277,bD=-.29227,gE=-.90649,N1=1.97294,Uj=N1*gE,Vj=N1*vD,Wj=vD*bD-gE*rne;function yOe(e){if(e instanceof od)return new od(e.h,e.s,e.l,e.opacity);e instanceof Mn||(e=yD(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Wj*r+Uj*t-Vj*n)/(Wj+Uj-Vj),o=r-i,s=(N1*(n-i)-bD*o)/gE,a=Math.sqrt(s*s+o*o)/(N1*i*(1-i)),l=a?Math.atan2(s,o)*Xte-120:NaN;return new od(l<0?l+360:l,a,i,e.opacity)}function yP(e,t,n,r){return arguments.length===1?yOe(e):new od(e,t,n,r??1)}function od(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}vm(od,yP,Bv(Lc,{brighter(e){return e=e==null?kg:Math.pow(kg,e),new od(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xd:Math.pow(xd,e),new od(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Yte,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Mn(255*(t+n*(rne*r+vD*i)),255*(t+n*(bD*r+gE*i)),255*(t+n*(N1*r)),this.opacity)}}));function ine(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function one(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return ine((n-r/t)*t,s,i,o,a)}}function sne(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return ine((n-r/t)*t,i,o,s,a)}}const mE=e=>()=>e;function ane(e,t){return function(n){return e+n*t}}function vOe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yE(e,t){var n=t-e;return n?ane(e,n>180||n<-180?n-360*Math.round(n/360):n):mE(isNaN(e)?t:e)}function bOe(e){return(e=+e)==1?Fn:function(t,n){return n-t?vOe(t,n,e):mE(isNaN(t)?n:t)}}function Fn(e,t){var n=t-e;return n?ane(e,n):mE(isNaN(e)?t:e)}const _S=function e(t){var n=bOe(t);function r(i,o){var s=n((i=bc(i)).r,(o=bc(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=Fn(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function lne(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=bc(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var xOe=lne(one),wOe=lne(sne);function xD(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function une(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function SOe(e,t){return(une(t)?xD:cne)(e,t)}function cne(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=zc(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function fne(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function os(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function dne(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=zc(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var vP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,XA=new RegExp(vP.source,"g");function kOe(e){return function(){return e}}function COe(e){return function(t){return e(t)+""}}function hne(e,t){var n=vP.lastIndex=XA.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=vP.exec(e))&&(i=XA.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:os(r,i)})),n=XA.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?COe(l[0].x):kOe(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function zc(e,t){var n=typeof t,r;return t==null||n==="boolean"?mE(t):(n==="number"?os:n==="string"?(r=D1(t))?(t=r,_S):hne:t instanceof D1?_S:t instanceof Date?fne:une(t)?xD:Array.isArray(t)?cne:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dne:os)(e,t)}function EOe(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function _Oe(e,t){var n=yE(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function bm(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Hj=180/Math.PI,bP={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pne(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Hj,skewX:Math.atan(l)*Hj,scaleX:s,scaleY:a}}var Cx;function $Oe(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bP:pne(t.a,t.b,t.c,t.d,t.e,t.f)}function AOe(e){return e==null||(Cx||(Cx=document.createElementNS("http://www.w3.org/2000/svg","g")),Cx.setAttribute("transform",e),!(e=Cx.transform.baseVal.consolidate()))?bP:(e=e.matrix,pne(e.a,e.b,e.c,e.d,e.e,e.f))}function gne(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:os(u,f)},{i:g-2,x:os(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:os(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:os(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,h,p){if(u!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:os(u,f)},{i:g-2,x:os(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),s(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)f[(m=d[p]).i]=m.x(h);return f.join("")}}}var TOe=gne($Oe,"px, ","px)","deg)"),POe=gne(AOe,", ",")",")"),MOe=1e-12;function qj(e){return((e=Math.exp(e))+1/e)/2}function FOe(e){return((e=Math.exp(e))-1/e)/2}function ROe(e){return((e=Math.exp(2*e))-1)/(e+1)}const OOe=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],d=s[2],h=c-a,p=f-l,g=h*h+p*p,m,y;if(g<MOe)y=Math.log(d/u)/t,m=function(S){return[a+S*h,l+S*p,u*Math.exp(t*S*y)]};else{var v=Math.sqrt(g),b=(d*d-u*u+r*g)/(2*u*n*v),x=(d*d-u*u-r*g)/(2*d*n*v),w=Math.log(Math.sqrt(b*b+1)-b),k=Math.log(Math.sqrt(x*x+1)-x);y=(k-w)/t,m=function(S){var C=S*y,E=qj(w),A=u/(n*v)*(E*ROe(t*C+w)-FOe(w));return[a+A*h,l+A*p,u*E/qj(t*C+w)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);function mne(e){return function(t,n){var r=e((t=SS(t)).h,(n=SS(n)).h),i=Fn(t.s,n.s),o=Fn(t.l,n.l),s=Fn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const yne=mne(yE);var vne=mne(Fn);function bne(e,t){var n=Fn((e=CS(e)).l,(t=CS(t)).l),r=Fn(e.a,t.a),i=Fn(e.b,t.b),o=Fn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function xne(e){return function(t,n){var r=e((t=ES(t)).h,(n=ES(n)).h),i=Fn(t.c,n.c),o=Fn(t.l,n.l),s=Fn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const wne=xne(yE);var Sne=xne(Fn);function kne(e){return function t(n){n=+n;function r(i,o){var s=e((i=yP(i)).h,(o=yP(o)).h),a=Fn(i.s,o.s),l=Fn(i.l,o.l),u=Fn(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const Cne=kne(yE);var Ene=kne(Fn);function wD(e,t){t===void 0&&(t=e,e=zc);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function DOe(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const NOe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:zc,interpolateArray:SOe,interpolateBasis:one,interpolateBasisClosed:sne,interpolateCubehelix:Cne,interpolateCubehelixLong:Ene,interpolateDate:fne,interpolateDiscrete:EOe,interpolateHcl:wne,interpolateHclLong:Sne,interpolateHsl:yne,interpolateHslLong:vne,interpolateHue:_Oe,interpolateLab:bne,interpolateNumber:os,interpolateNumberArray:xD,interpolateObject:dne,interpolateRgb:_S,interpolateRgbBasis:xOe,interpolateRgbBasisClosed:wOe,interpolateRound:bm,interpolateString:hne,interpolateTransformCss:TOe,interpolateTransformSvg:POe,interpolateZoom:OOe,piecewise:wD,quantize:DOe},Symbol.toStringTag,{value:"Module"}));function IOe(e){return function(){return e}}function xP(e){return+e}var Gj=[0,1];function di(e){return e}function wP(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:IOe(isNaN(t)?NaN:.5)}function LOe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function zOe(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=wP(i,r),o=n(s,o)):(r=wP(r,i),o=n(o,s)),function(a){return o(r(a))}}function jOe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=wP(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=gc(e,a,1,r)-1;return o[l](i[l](a))}}function Uv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function vE(){var e=Gj,t=Gj,n=zc,r,i,o,s=di,a,l,u;function c(){var d=Math.min(e.length,t.length);return s!==di&&(s=LOe(e[0],e[d-1])),a=d>2?jOe:zOe,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((u||(u=a(t,e.map(r),os)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,xP),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=bm,c()},f.clamp=function(d){return arguments.length?(s=d?!0:di,c()):s!==di},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function _ne(){return vE()(di,di)}function $ne(e,t,n,r){var i=mc(e,t,n),o;switch(r=bd(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=qZ(i,s))&&(r.precision=o),lO(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=GZ(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=HZ(i))&&(r.precision=o-(r.type==="%")*2);break}}return Rv(r)}function th(e){var t=e.domain;return e.ticks=function(n){var r=t();return eP(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return $ne(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,u,c=10;for(a<s&&(u=s,s=a,a=u,u=i,i=o,o=u);c-- >0;){if(u=tP(s,a,n),u===l)return r[i]=s,r[o]=a,t(r);if(u>0)s=Math.floor(s/u)*u,a=Math.ceil(a/u)*u;else if(u<0)s=Math.ceil(s*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function SD(){var e=_ne();return e.copy=function(){return Uv(e,SD())},Ia.apply(e,arguments),th(e)}function Ane(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,xP),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Ane(e).unknown(t)},e=arguments.length?Array.from(e,xP):[0,1],th(n)}function Tne(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Yj(e){return Math.log(e)}function Xj(e){return Math.exp(e)}function BOe(e){return-Math.log(-e)}function UOe(e){return-Math.exp(-e)}function VOe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function WOe(e){return e===10?VOe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function HOe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Kj(e){return(t,n)=>-e(-t,n)}function kD(e){const t=e(Yj,Xj),n=t.domain;let r=10,i,o;function s(){return i=HOe(r),o=WOe(r),n()[0]<0?(i=Kj(i),o=Kj(o),e(BOe,UOe)):e(Yj,Xj),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let d=i(u),h=i(c),p,g;const m=a==null?10:+a;let y=[];if(!(r%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),u>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/o(-d):p*o(d),!(g<u)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/o(-d):p*o(d),!(g<u)){if(g>c)break;y.push(g)}y.length*2<m&&(y=eP(u,c,m))}else y=eP(d,h,Math.min(h-d,m)).map(o);return f?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=bd(l)).precision==null&&(l.trim=!0),l=Rv(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=()=>n(Tne(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function Pne(){const e=kD(vE()).domain([1,10]);return e.copy=()=>Uv(e,Pne()).base(e.base()),Ia.apply(e,arguments),e}function Qj(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Jj(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function CD(e){var t=1,n=e(Qj(t),Jj(t));return n.constant=function(r){return arguments.length?e(Qj(t=+r),Jj(t)):t},th(n)}function Mne(){var e=CD(vE());return e.copy=function(){return Uv(e,Mne()).constant(e.constant())},Ia.apply(e,arguments)}function Zj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qOe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function GOe(e){return e<0?-e*e:e*e}function ED(e){var t=e(di,di),n=1;function r(){return n===1?e(di,di):n===.5?e(qOe,GOe):e(Zj(n),Zj(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},th(t)}function _D(){var e=ED(vE());return e.copy=function(){return Uv(e,_D()).exponent(e.exponent())},Ia.apply(e,arguments),e}function YOe(){return _D.apply(null,arguments).exponent(.5)}function Fne(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=zZ(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[gc(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(El),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Fne().domain(e).range(t).unknown(r)},Ia.apply(o,arguments)}function Rne(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[gc(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return Rne().domain([e,t]).range(i).unknown(o)},Ia.apply(th(s),arguments)}function One(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[gc(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return One().domain(e).range(t).unknown(n)},Ia.apply(i,arguments)}function XOe(e){return new Date(e)}function KOe(e){return e instanceof Date?+e:+new Date(+e)}function $D(e,t,n,r,i,o,s,a,l,u){var c=_ne(),f=c.invert,d=c.domain,h=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),x=u("%Y");function w(k){return(l(k)<k?h:a(k)<k?p:s(k)<k?g:o(k)<k?m:r(k)<k?i(k)<k?y:v:n(k)<k?b:x)(k)}return c.invert=function(k){return new Date(f(k))},c.domain=function(k){return arguments.length?d(Array.from(k,KOe)):d().map(XOe)},c.ticks=function(k){var S=d();return e(S[0],S[S.length-1],k??10)},c.tickFormat=function(k,S){return S==null?w:u(S)},c.nice=function(k){var S=d();return(!k||typeof k.range!="function")&&(k=t(S[0],S[S.length-1],k??10)),k?d(Tne(S,k)):c},c.copy=function(){return Uv(c,$D(e,t,n,r,i,o,s,a,l,u))},c}function QOe(){return Ia.apply($D(cMe,fMe,Cs,vg,Kd,Sa,Nv,Ov,hs,hO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function JOe(){return Ia.apply($D(lMe,uMe,Es,bg,Jd,_l,Iv,Dv,hs,pO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bE(){var e=0,t=1,n,r,i,o,s=di,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(s=f,u):s};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,s=f(h,p),u):[s(0),s(1)]}}return u.range=c(zc),u.rangeRound=c(bm),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),u}}function jc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function AD(){var e=th(bE()(di));return e.copy=function(){return jc(e,AD())},Ic.apply(e,arguments)}function Dne(){var e=kD(bE()).domain([1,10]);return e.copy=function(){return jc(e,Dne()).base(e.base())},Ic.apply(e,arguments)}function Nne(){var e=CD(bE());return e.copy=function(){return jc(e,Nne()).constant(e.constant())},Ic.apply(e,arguments)}function TD(){var e=ED(bE());return e.copy=function(){return jc(e,TD()).exponent(e.exponent())},Ic.apply(e,arguments)}function ZOe(){return TD.apply(null,arguments).exponent(.5)}function xE(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,u=di,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-o)*(r*g<r*o?a:l),u(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(u=g,h):u};function p(g){return function(m){var y,v,b;return arguments.length?([y,v,b]=m,u=wD(g,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(zc),h.rangeRound=p(bm),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),o=g(t),s=g(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function Ine(){var e=th(xE()(di));return e.copy=function(){return jc(e,Ine())},Ic.apply(e,arguments)}function Lne(){var e=kD(xE()).domain([.1,1,10]);return e.copy=function(){return jc(e,Lne()).base(e.base())},Ic.apply(e,arguments)}function zne(){var e=CD(xE());return e.copy=function(){return jc(e,zne()).constant(e.constant())},Ic.apply(e,arguments)}function PD(){var e=ED(xE());return e.copy=function(){return jc(e,PD()).exponent(e.exponent())},Ic.apply(e,arguments)}function eDe(){return PD.apply(null,arguments).exponent(.5)}function La(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const tDe=La("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),nDe=La("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),rDe=La("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),iDe=La("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),oDe=La("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),sDe=La("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),aDe=La("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),lDe=La("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),uDe=La("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),cDe=La("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function MD(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const fDe="identity",Cg="linear",Bl="log",Vv="pow",Wv="sqrt",wE="symlog",wd="time",Sd="utc",Ea="sequential",xm="diverging",Eg="quantile",SE="quantize",kE="threshold",FD="ordinal",SP="point",jne="band",RD="bin-ordinal",_n="continuous",Hv="discrete",qv="discretizing",Uo="interpolating",OD="temporal";function dDe(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function hDe(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function DD(){const e=mD().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=MD(f,a,l);let g=r[d-0];i=(h-g)/(p||1),s&&(i=Math.floor(i)),g+=(h-g-i*(f-a))*u,o=i*(1-a),s&&(g=Math.round(g),o=Math.round(o));const m=Bi(f).map(y=>g+i*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],m=+f[1],y,v,b;if(!(g!==g||m!==m)&&(m<g&&(b=g,g=m,m=b),!(m<h[0]||g>r[1-d])))return y=Math.max(0,gc(h,g)-1),v=g===m?y:gc(h,m)-1,g-h[y]>o+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return DD().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(u)},c()}function Bne(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Bne(t())},e}function pDe(){return Bne(DD().paddingInner(1))}var gDe=Array.prototype.map;function mDe(e){return gDe.call(e,wr)}const yDe=Array.prototype.slice;function Une(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(gc(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=mDe(r),n):e.slice()},n.range=function(r){return arguments.length?(t=yDe.call(r),n):t.slice()},n.tickFormat=function(r,i){return $ne(e[0],qe(e),r??10,i)},n.copy=function(){return Une().domain(n.domain()).range(n.range())},n}const $S=new Map,Vne=Symbol("vega_scale");function Wne(e){return e[Vne]=!0,e}function vDe(e){return e&&e[Vne]===!0}function bDe(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?dDe(o):o.invertExtent?hDe(o):void 0),o.type=e,Wne(o)};return r.metadata=ks(le(n)),r}function et(e,t,n){return arguments.length>1?($S.set(e,bDe(e,t,n)),this):Hne(e)?$S.get(e):void 0}et(fDe,Ane);et(Cg,SD,_n);et(Bl,Pne,[_n,Bl]);et(Vv,_D,_n);et(Wv,YOe,_n);et(wE,Mne,_n);et(wd,QOe,[_n,OD]);et(Sd,JOe,[_n,OD]);et(Ea,AD,[_n,Uo]);et(`${Ea}-${Cg}`,AD,[_n,Uo]);et(`${Ea}-${Bl}`,Dne,[_n,Uo,Bl]);et(`${Ea}-${Vv}`,TD,[_n,Uo]);et(`${Ea}-${Wv}`,ZOe,[_n,Uo]);et(`${Ea}-${wE}`,Nne,[_n,Uo]);et(`${xm}-${Cg}`,Ine,[_n,Uo]);et(`${xm}-${Bl}`,Lne,[_n,Uo,Bl]);et(`${xm}-${Vv}`,PD,[_n,Uo]);et(`${xm}-${Wv}`,eDe,[_n,Uo]);et(`${xm}-${wE}`,zne,[_n,Uo]);et(Eg,Fne,[qv,Eg]);et(SE,Rne,qv);et(kE,One,qv);et(RD,Une,[Hv,qv]);et(FD,mD,Hv);et(jne,DD,Hv);et(SP,pDe,Hv);function Hne(e){return $S.has(e)}function nh(e,t){const n=$S.get(e);return n&&n.metadata[t]}function ND(e){return nh(e,_n)}function _g(e){return nh(e,Hv)}function kP(e){return nh(e,qv)}function qne(e){return nh(e,Bl)}function xDe(e){return nh(e,OD)}function Gne(e){return nh(e,Uo)}function Yne(e){return nh(e,Eg)}const wDe=["clamp","base","constant","exponent"];function Xne(e,t){const n=t[0],r=qe(t)-n;return function(i){return e(n+i*r)}}function CE(e,t,n){return wD(ID(t||"rgb",n),e)}function Kne(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function Qne(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?Tr(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=et(o)().domain([t,n]).range([0,1]),wDe.forEach(a=>e[a]?s[a](e[a]()):0),s)}function ID(e,t){const n=NOe[SDe(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function SDe(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const kDe={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},CDe={accent:nDe,category10:tDe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:rDe,observable10:iDe,paired:oDe,pastel1:sDe,pastel2:aDe,set1:lDe,set2:uDe,set3:cDe,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function Jne(e){if(Y(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function Zne(e,t){for(const n in e)LD(n,t(e[n]))}const eB={};Zne(CDe,Jne);Zne(kDe,e=>CE(Jne(e)));function LD(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(eB[e]=t,this):eB[e]}const Uw="symbol",EDe="discrete",_De="gradient",$De=e=>Y(e)?e.map(t=>String(t)):String(e),ADe=(e,t)=>e[1]-t[1],TDe=(e,t)=>t[1]-e[1];function zD(e,t,n){let r;return Je(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Fv(e.domain())/n||1)+1))),se(t)&&(r=t.step,t=t.interval),ue(t)&&(t=e.type===wd?gm(t):e.type==Sd?mm(t):G("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function ere(e,t,n){let r=e.range(),i=r[0],o=qe(r),s=ADe;if(i>o&&(r=o,o=i,i=r,s=TDe),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],qe(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function jD(e,t){return e.bins?ere(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function tre(e,t,n,r,i,o){const s=t.type;let a=$De;if(s===wd||i===wd)a=e.timeFormat(r);else if(s===Sd||i===Sd)a=e.utcFormat(r);else if(qne(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const u=nre(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function nre(e,t,n){const r=jD(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=s};return n?r.filter(a):a}const CP={[Eg]:"quantiles",[SE]:"thresholds",[kE]:"domain"},rre={[Eg]:"quantiles",[SE]:"domain"};function ire(e,t){return e.bins?FDe(e.bins):e.type===Bl?nre(e,t,!0):CP[e.type]?MDe(e[CP[e.type]]()):jD(e,t)}function PDe(e,t,n){const r=t[rre[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function MDe(e){const t=[-1/0].concat(e);return t.max=1/0,t}function FDe(e){const t=e.slice(0,-1);return t.max=qe(e),t}const RDe=e=>CP[e.type]||e.bins;function ore(e,t,n,r,i,o,s){const a=rre[t.type]&&o!==wd&&o!==Sd?PDe(e,t,i):tre(e,t,n,i,o,s);return r===Uw&&RDe(t)?ODe(a):r===EDe?DDe(a):NDe(a)}const ODe=e=>(t,n,r)=>{const i=tB(r[n+1],tB(r.max,1/0)),o=nB(t,e),s=nB(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},tB=(e,t)=>e??t,DDe=e=>(t,n)=>n?e(t):null,NDe=e=>t=>e(t),nB=(e,t)=>Number.isFinite(e)?t(e):null;function IDe(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+qe(t),o=i-r;if(e.type===kE){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function LDe(e,t,n,r){const i=r||t.type;return ue(n)&&xDe(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===wd?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Sd?e.utcFormat("%A, %d %B %Y, %X UTC"):ore(e,t,5,null,n,r,!0)}function sre(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=LDe(e,t,n.format,n.formatType);if(kP(t.type)){const o=ire(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(_g(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(qe(o))}`}}let are=0;function zDe(){are=0}const AS="p_";function BD(e){return e&&e.gradient}function lre(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?AS:"";return i||(i=e.id="gradient_"+are++,r==="radial"?(e.x1=Hs(e.x1,.5),e.y1=Hs(e.y1,.5),e.r1=Hs(e.r1,0),e.x2=Hs(e.x2,.5),e.y2=Hs(e.y2,.5),e.r2=Hs(e.r2,.5),o=AS):(e.x1=Hs(e.x1,0),e.y1=Hs(e.y1,0),e.x2=Hs(e.x2,1),e.y2=Hs(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function Hs(e,t){return e??t}function ure(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const rB={basis:{curve:BRe},"basis-closed":{curve:URe},"basis-open":{curve:VRe},bundle:{curve:WRe,tension:"beta",value:.85},cardinal:{curve:HRe,tension:"tension",value:0},"cardinal-open":{curve:GRe,tension:"tension",value:0},"cardinal-closed":{curve:qRe,tension:"tension",value:0},"catmull-rom":{curve:YRe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:XRe,tension:"alpha",value:.5},"catmull-rom-open":{curve:KRe,tension:"alpha",value:.5},linear:{curve:fD},"linear-closed":{curve:QRe},monotone:{horizontal:ZRe,vertical:JRe},natural:{curve:eOe},step:{curve:tOe},"step-after":{curve:rOe},"step-before":{curve:nOe}};function UD(e,t,n){var r=fe(rB,e)&&rB[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const jDe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},BDe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,UDe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,VDe=/^((\s+,?\s*)|(,\s*))/,WDe=/^[01]/;function $g(e){const t=[];return(e.match(BDe)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=jDe[o],a=HDe(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let u=s;u<l;u+=s)t.push([i,...a.slice(u,u+s)])}}),t}function HDe(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?WDe:UDe,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(VDe);l!==null&&(i+=l[0].length)}return r}const xc=Math.PI/180,qDe=1e-14,_f=Math.PI/2,la=Math.PI*2,_h=Math.sqrt(3)/2;var KA={},QA={},cre=[].join;function GDe(e,t,n,r,i,o,s,a,l){const u=cre.call(arguments);if(KA[u])return KA[u];const c=s*xc,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(l-t)*.5,p=d*(l-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,y=f/n,v=-f/r,b=d/r,x=m*a+y*l,w=v*a+b*l,k=m*e+y*t,S=v*e+b*t;let E=1/((k-x)*(k-x)+(S-w)*(S-w))-.25;E<0&&(E=0);let A=Math.sqrt(E);o==i&&(A=-A);const T=.5*(x+k)-A*(S-w),I=.5*(w+S)+A*(k-x),F=Math.atan2(w-I,x-T);let _=Math.atan2(S-I,k-T)-F;_<0&&o===1?_+=la:_>0&&o===0&&(_-=la);const P=Math.ceil(Math.abs(_/(_f+.001))),N=[];for(let D=0;D<P;++D){const L=F+D*_/P,U=F+(D+1)*_/P;N[D]=[T,I,L,U,n,r,f,d]}return KA[u]=N}function YDe(e){const t=cre.call(e);if(QA[t])return QA[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7];const c=u*s,f=-l*a,d=l*s,h=u*a,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(v*.5),x=8/3*b*b/Math.sin(v),w=n+p-x*g,k=r+g+x*p,S=n+m,C=r+y,E=S+x*y,A=C-x*m;return QA[t]=[c*w+f*k,d*w+h*k,c*E+f*A,d*E+h*A,c*S+f*C,d*S+h*C]}const co=["l",0,0,0,0,0,0,0];function XDe(e,t,n){const r=co[0]=e[0];if(r==="a"||r==="A")co[1]=t*e[1],co[2]=n*e[2],co[3]=e[3],co[4]=e[4],co[5]=e[5],co[6]=t*e[6],co[7]=n*e[7];else if(r==="h"||r==="H")co[1]=t*e[1];else if(r==="v"||r==="V")co[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)co[i]=(i%2==1?t:n)*e[i];return co}function I1(e,t,n,r,i,o){var s,a=null,l=0,u=0,c=0,f=0,d,h,p,g,m=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(s=t[v],(i!==1||o!==1)&&(s=XDe(s,i,o)),s[0]){case"l":l+=s[1],u+=s[2],e.lineTo(l+n,u+r);break;case"L":l=s[1],u=s[2],e.lineTo(l+n,u+r);break;case"h":l+=s[1],e.lineTo(l+n,u+r);break;case"H":l=s[1],e.lineTo(l+n,u+r);break;case"v":u+=s[1],e.lineTo(l+n,u+r);break;case"V":u=s[1],e.lineTo(l+n,u+r);break;case"m":l+=s[1],u+=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=s[1],u=s[2],m=l,y=u,e.moveTo(l+n,u+r);break;case"c":d=l+s[5],h=u+s[6],c=l+s[3],f=u+s[4],e.bezierCurveTo(l+s[1]+n,u+s[2]+r,c+n,f+r,d+n,h+r),l=d,u=h;break;case"C":l=s[5],u=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,l+n,u+r);break;case"s":d=l+s[3],h=u+s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,l+s[1]+n,u+s[2]+r,d+n,h+r),c=l+s[1],f=u+s[2],l=d,u=h;break;case"S":d=s[3],h=s[4],c=2*l-c,f=2*u-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"q":d=l+s[3],h=u+s[4],c=l+s[1],f=u+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),l=d,u=h,c=s[1],f=s[2];break;case"t":d=l+s[1],h=u+s[2],a[0].match(/[QqTt]/)===null?(c=l,f=u):a[0]==="t"?(c=2*l-p,f=2*u-g):a[0]==="q"&&(c=2*l-c,f=2*u-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h,c=l+s[1],f=u+s[2];break;case"T":d=s[1],h=s[2],c=2*l-c,f=2*u-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),l=d,u=h;break;case"a":iB(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+u+r]),l+=s[6],u+=s[7];break;case"A":iB(e,l+n,u+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],u=s[7];break;case"z":case"Z":l=m,u=y,e.closePath();break}a=s}}function iB(e,t,n,r){const i=GDe(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=YDe(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const oB=.5773502691896257,sB={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,la)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=_h*n,i=r-n*oB,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=_h*n,i=r-n*oB;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=_h*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=_h*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=_h*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=_h*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function fre(e){return fe(sB,e)?sB[e]:KDe(e)}var JA={};function KDe(e){if(!fe(JA,e)){const t=$g(e);JA[e]={draw:function(n,r){I1(n,t,0,0,Math.sqrt(r)/2)}}}return JA[e]}const uu=.448084975506;function QDe(e){return e.x}function JDe(e){return e.y}function ZDe(e){return e.width}function e6e(e){return e.height}function Qa(e){return typeof e=="function"?e:()=>+e}function Ex(e,t,n){return Math.max(t,Math.min(e,n))}function dre(){var e=QDe,t=JDe,n=ZDe,r=e6e,i=Qa(0),o=i,s=i,a=i,l=null;function u(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),m=+n.call(this,c),y=+r.call(this,c),v=Math.min(m,y)/2,b=Ex(+i.call(this,c),0,v),x=Ex(+o.call(this,c),0,v),w=Ex(+s.call(this,c),0,v),k=Ex(+a.call(this,c),0,v);if(l||(l=h=fE()),b<=0&&x<=0&&w<=0&&k<=0)l.rect(p,g,m,y);else{var S=p+m,C=g+y;l.moveTo(p+b,g),l.lineTo(S-x,g),l.bezierCurveTo(S-uu*x,g,S,g+uu*x,S,g+x),l.lineTo(S,C-k),l.bezierCurveTo(S,C-uu*k,S-uu*k,C,S-k,C),l.lineTo(p+w,C),l.bezierCurveTo(p+uu*w,C,p,C-uu*w,p,C-w),l.lineTo(p,g+b),l.bezierCurveTo(p,g+uu*b,p+uu*b,g,p+b,g),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=Qa(c),u):e},u.y=function(c){return arguments.length?(t=Qa(c),u):t},u.width=function(c){return arguments.length?(n=Qa(c),u):n},u.height=function(c){return arguments.length?(r=Qa(c),u):r},u.cornerRadius=function(c,f,d,h){return arguments.length?(i=Qa(c),o=f!=null?Qa(f):i,a=d!=null?Qa(d):i,s=h!=null?Qa(h):o,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function hre(){var e,t,n,r,i=null,o,s,a,l;function u(f,d,h){const p=h/2;if(o){var g=a-d,m=f-s;if(g||m){var y=Math.hypot(g,m),v=(g/=y)*l,b=(m/=y)*l,x=Math.atan2(m,g);i.moveTo(s-v,a-b),i.lineTo(f-g*p,d-m*p),i.arc(f,d,p,x-Math.PI,x),i.lineTo(s+v,a+b),i.arc(s,a,l,x,x+Math.PI)}else i.arc(f,d,p,0,la);i.closePath()}else o=1;s=f,a=d,l=p}function c(f){var d,h=f.length,p,g=!1,m;for(i==null&&(i=m=fE()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(o=0),g&&u(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(m)return i=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Gv(e,t){return e??t}const Yv=e=>e.x||0,Xv=e=>e.y||0,t6e=e=>e.width||0,n6e=e=>e.height||0,r6e=e=>(e.x||0)+(e.width||0),i6e=e=>(e.y||0)+(e.height||0),o6e=e=>e.startAngle||0,s6e=e=>e.endAngle||0,a6e=e=>e.padAngle||0,l6e=e=>e.innerRadius||0,u6e=e=>e.outerRadius||0,c6e=e=>e.cornerRadius||0,f6e=e=>Gv(e.cornerRadiusTopLeft,e.cornerRadius)||0,d6e=e=>Gv(e.cornerRadiusTopRight,e.cornerRadius)||0,h6e=e=>Gv(e.cornerRadiusBottomRight,e.cornerRadius)||0,p6e=e=>Gv(e.cornerRadiusBottomLeft,e.cornerRadius)||0,g6e=e=>Gv(e.size,64),m6e=e=>e.size||1,EE=e=>e.defined!==!1,y6e=e=>fre(e.shape||"circle"),v6e=LRe().startAngle(o6e).endAngle(s6e).padAngle(a6e).innerRadius(l6e).outerRadius(u6e).cornerRadius(c6e),b6e=Nte().x(Yv).y1(Xv).y0(i6e).defined(EE),x6e=Nte().y(Xv).x1(Yv).x0(r6e).defined(EE),w6e=Dte().x(Yv).y(Xv).defined(EE),S6e=dre().x(Yv).y(Xv).width(t6e).height(n6e).cornerRadius(f6e,d6e,h6e,p6e),k6e=jRe().type(y6e).size(g6e),C6e=hre().x(Yv).y(Xv).defined(EE).size(m6e);function VD(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function E6e(e,t){return v6e.context(e)(t)}function _6e(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?x6e:b6e).curve(UD(r,n.orient,n.tension)).context(e)(t)}function $6e(e,t){const n=t[0],r=n.interpolate||"linear";return w6e.curve(UD(r,n.orient,n.tension)).context(e)(t)}function wm(e,t,n,r){return S6e.context(e)(t,n,r)}function A6e(e,t){return(t.mark.shape||t.shape).context(e)(t)}function T6e(e,t){return k6e.context(e)(t)}function P6e(e,t){return C6e.context(e)(t)}var pre=1;function gre(){pre=1}function WD(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+pre++),s=i.clipping[o]||(i.clipping[o]={id:o});return Ne(r)?s.path=r(null):VD(n)?s.path=wm(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function gn(e){this.clear(),e&&this.union(e)}gn.prototype={clone(){return new gn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*s+u,l*r+a*s+c,a*o-l*i+u,l*o+a*i+c,a*o-l*s+u,l*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function _E(e){this.mark=e,this.bounds=this.bounds||new gn}function $E(e){_E.call(this,e),this.items=this.items||[]}re($E,_E);class mre{constructor(t){this._pending=0,this._loader=t||ZC()}pending(){return this._pending}sanitizeURL(t){const n=this;return aB(n),n._loader.sanitize(t,{context:"href"}).then(r=>(u0(n),r)).catch(()=>(u0(n),null))}loadImage(t){const n=this,r=iOe();return aB(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=fe(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>u0(n),s.onerror=()=>u0(n),s.src=o,s}).catch(i=>(u0(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function aB(e){e._pending+=1}function u0(e){e._pending-=1}function Xl(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?M6e(t,r):0))}return e}function M6e(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const F6e=la-1e-8;let AE,Vw,Ww,Lf,EP,Hw,_P,$P;const Iu=(e,t)=>AE.add(e,t),qw=(e,t)=>Iu(Vw=e,Ww=t),lB=e=>Iu(e,AE.y1),uB=e=>Iu(AE.x1,e),$f=(e,t)=>EP*e+_P*t,Af=(e,t)=>Hw*e+$P*t,ZA=(e,t)=>Iu($f(e,t),Af(e,t)),eT=(e,t)=>qw($f(e,t),Af(e,t));function Kv(e,t){return AE=e,t?(Lf=t*xc,EP=$P=Math.cos(Lf),Hw=Math.sin(Lf),_P=-Hw):(EP=$P=1,Lf=Hw=_P=0),R6e}const R6e={beginPath(){},closePath(){},moveTo:eT,lineTo:eT,rect(e,t,n,r){Lf?(ZA(e+n,t),ZA(e+n,t+r),ZA(e,t+r),eT(e,t)):(Iu(e+n,t+r),qw(e,t))},quadraticCurveTo(e,t,n,r){const i=$f(e,t),o=Af(e,t),s=$f(n,r),a=Af(n,r);cB(Vw,i,s,lB),cB(Ww,o,a,uB),qw(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=$f(e,t),a=Af(e,t),l=$f(n,r),u=Af(n,r),c=$f(i,o),f=Af(i,o);fB(Vw,s,l,c,lB),fB(Ww,a,u,f,uB),qw(c,f)},arc(e,t,n,r,i,o){if(r+=Lf,i+=Lf,Vw=n*Math.cos(i)+e,Ww=n*Math.sin(i)+t,Math.abs(i-r)>F6e)Iu(e-n,t-n),Iu(e+n,t+n);else{const s=u=>Iu(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%la,r<0&&(r+=la),i=i%la,i<0&&(i+=la),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=la,a=r-r%_f,l=0;l<4&&a>i;++l,a-=_f)s(a);else for(a=r-r%_f+_f,l=0;l<4&&a<i;++l,a=a+_f)s(a)}}};function cB(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function fB(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(o)>qDe?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&i(dB(l,e,t,n,r)),0<u&&u<1&&i(dB(u,e,t,n,r))}function dB(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var ac=(ac=sc(1,1))?ac.getContext("2d"):null;const AP=new gn;function HD(e){return function(t,n){if(!ac)return!0;e(ac,t),AP.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=AP;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(ac.isPointInPath(l,a))return!0;return!1}}function qD(e,t){return t.contains(e.x||0,e.y||0)}function yre(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(AP.set(n,r,n+i,r+o))}function vre(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return pp(t,n,r,i,o)}function pp(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,u=r-t,c=i-n;let f=0,d=1,h,p,g,m;for(m=0;m<4;++m){if(m===0&&(h=-u,p=-(o-t)),m===1&&(h=u,p=a-t),m===2&&(h=-c,p=-(s-n)),m===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function Ag(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Xo(e,t){return e??t}function hB(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function O6e(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Xo(t.x1,.5)*r,n.y1+Xo(t.y1,.5)*i,Math.max(r,i)*Xo(t.r1,0),n.x1+Xo(t.x2,.5)*r,n.y1+Xo(t.y2,.5)*i,Math.max(r,i)*Xo(t.r2,.5));else{const s=Xo(t.x1,0),a=Xo(t.y1,0),l=Xo(t.x2,1),u=Xo(t.y2,0);if(s===l||a===u||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=sc(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=hB(f.createLinearGradient(s,a,l,u),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return hB(o,t.stops)}function bre(e,t,n){return BD(n)?O6e(e,n,t.bounds):n}function TS(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=bre(e,t,t.fill),!0):!1}var D6e=[];function Tg(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=bre(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||D6e),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function N6e(e,t){return e.zindex-t.zindex||e.index-t.index}function GD(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(N6e)}function $s(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=GD(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function PS(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=GD(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function YD(e){return function(t,n,r){$s(n,i=>{(!r||r.intersects(i.bounds))&&xre(e,t,i,i)})}}function I6e(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&xre(e,t,n.items[0],n.items)}}function xre(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Ag(t,n),n.fill&&TS(t,n,i)&&t.fill(),n.stroke&&Tg(t,n,i)&&t.stroke()))}function TE(e){return e=e||No,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,PS(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function Qv(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,u,c;return l&&(u=s.strokeWidth,c=s.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function XD(e){return TE(Qv(e))}function sd(e,t){return"translate("+e+","+t+")"}function KD(e){return"rotate("+e+")"}function L6e(e,t){return"scale("+e+","+t+")"}function wre(e){return sd(e.x||0,e.y||0)}function z6e(e){return sd(e.x||0,e.y||0)+(e.angle?" "+KD(e.angle):"")}function j6e(e){return sd(e.x||0,e.y||0)+(e.angle?" "+KD(e.angle):"")+(e.scaleX||e.scaleY?" "+L6e(e.scaleX||1,e.scaleY||1):"")}function QD(e,t,n){function r(s,a){s("transform",z6e(a)),s("d",t(null,a))}function i(s,a){return t(Kv(s,a.angle),a),Xl(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,u=a.y||0,c=a.angle||0;s.translate(l,u),c&&s.rotate(c*=xc),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:YD(o),pick:XD(o),isect:n||HD(o)}}var B6e=QD("arc",E6e);function U6e(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function V6e(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function W6e(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function JD(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(Kv(l),c),Xl(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const s=Qv(o);function a(l,u,c,f,d,h){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=l.pixelRatio,f*=l.pixelRatio,s(l,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:I6e(o),pick:a,isect:qD,tip:n}}var H6e=JD("area",_6e,U6e);function q6e(e,t){var n=t.clip;e.save(),Ne(n)?(e.beginPath(),n(e),e.clip()):Sre(e,t.group)}function Sre(e,t){e.beginPath(),VD(t)?wm(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function kre(e){const t=Xo(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function G6e(e,t){e("transform",wre(t))}function Cre(e,t){const n=kre(t);e("d",wm(null,t,n,n))}function Y6e(e,t){e("class","background"),e("aria-hidden",!0),Cre(e,t)}function X6e(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Cre(e,t):e("d","")}function K6e(e,t,n){const r=t.clip?WD(n,t,t):null;e("clip-path",r)}function Q6e(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Xl(e,t),e.translate(t.x||0,t.y||0)}function L1(e,t,n,r){const i=kre(t);e.beginPath(),wm(e,t,(n||0)+i,(r||0)+i)}const J6e=Qv(L1),Z6e=Qv(L1,!1),eNe=Qv(L1,!0);function tNe(e,t,n,r){$s(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(L1(e,i,o,s),Ag(e,i),i.fill&&TS(e,i,l)&&e.fill(),i.stroke&&!a&&Tg(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&Sre(e,i),n&&n.translate(-o,-s),$s(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(L1(e,i,o,s),Ag(e,i),Tg(e,i,l)&&e.stroke())})}function nNe(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return PS(t,l=>{let u,c,f;const d=l.bounds;if(d&&!d.contains(i,o))return;c=l.x||0,f=l.y||0;const h=c+(l.width||0),p=f+(l.height||0),g=l.clip;if(g&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,g&&VD(l)&&!eNe(e,l,s,a))return e.restore(),null;const m=l.strokeForeground,y=t.interactive!==!1;return y&&m&&l.stroke&&Z6e(e,l,s,a)?(e.restore(),l):(u=PS(l,v=>rNe(v,c,f)?this.pick(v,n,r,c,f):null),!u&&y&&(l.fill||!m&&l.stroke)&&J6e(e,l,s,a)&&(u=l),e.restore(),u||null)})}function rNe(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var iNe={type:"group",tag:"g",nested:!1,attr:G6e,bound:Q6e,draw:tNe,pick:nNe,isect:yre,content:K6e,background:Y6e,foreground:X6e},z1={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function ZD(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function e6(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function t6(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function PE(e,t){return e==="center"?t/2:e==="right"?t:0}function ME(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function oNe(e,t,n){const r=ZD(t,n),i=e6(t,r),o=t6(t,r),s=(t.x||0)-PE(t.align,i),a=(t.y||0)-ME(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,z1["xmlns:xlink"],"xlink:href"),e("transform",sd(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function sNe(e,t){const n=t.image,r=e6(t,n),i=t6(t,n),o=(t.x||0)-PE(t.align,r),s=(t.y||0)-ME(t.baseline,i);return e.set(o,s,o+r,s+i)}function aNe(e,t,n){$s(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=ZD(r,this);let o=e6(r,i),s=t6(r,i);if(o===0||s===0)return;let a=(r.x||0)-PE(r.align,o),l=(r.y||0)-ME(r.baseline,s),u,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,l+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(Ag(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var lNe={type:"image",tag:"image",nested:!1,attr:oNe,bound:sNe,draw:aNe,pick:TE(),isect:No,get:ZD,xOffset:PE,yOffset:ME},uNe=JD("line",$6e,V6e);function cNe(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",j6e(t)),e("d",t.path)}function Gw(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*xc,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=$g(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),I1(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):I1(e,l,r,i,o,s)}function fNe(e,t){return Gw(Kv(e,t.angle),t)?e.set(0,0,0,0):Xl(e,t,!0)}var dNe={type:"path",tag:"path",nested:!1,attr:cNe,bound:fNe,draw:YD(Gw),pick:XD(Gw),isect:HD(Gw)};function hNe(e,t){e("d",wm(null,t))}function pNe(e,t){var n,r;return Xl(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function pB(e,t){e.beginPath(),wm(e,t)}var gNe={type:"rect",tag:"path",nested:!1,attr:hNe,bound:pNe,draw:YD(pB),pick:XD(pB),isect:yre};function mNe(e,t){e("transform",wre(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function yNe(e,t){var n,r;return Xl(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function Ere(e,t,n){var r,i,o,s;return t.stroke&&Tg(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function vNe(e,t,n){$s(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&Ere(e,r,i)&&(Ag(e,r),e.stroke())}})}function bNe(e,t,n,r){return e.isPointInStroke?Ere(e,t,1)&&e.isPointInStroke(n,r):!1}var xNe={type:"rule",tag:"line",nested:!1,attr:mNe,bound:yNe,draw:vNe,pick:TE(bNe),isect:vre},wNe=QD("shape",A6e),SNe=QD("symbol",T6e,qD);const gB=$Z();var Gi={height:za,measureWidth:n6,estimateWidth:MS,width:MS,canvas:_re};_re(!0);function _re(e){Gi.width=e&&ac?n6:MS}function MS(e,t){return $re(Sc(e,t),za(e))}function $re(e,t){return~~(.8*e.length*t)}function n6(e,t){return za(e)<=0||!(t=Sc(e,t))?0:Are(t,FE(e))}function Are(e,t){const n=`(${t}) ${e}`;let r=gB.get(n);return r===void 0&&(ac.font=t,r=ac.measureText(e).width,gB.set(n,r)),r}function za(e){return e.fontSize!=null?+e.fontSize||0:11}function wc(e){return e.lineHeight!=null?e.lineHeight:za(e)+2}function kNe(e){return Y(e)?e.length>1?e:e[0]:e}function Jv(e){return kNe(e.lineBreak&&e.text&&!Y(e.text)?e.text.split(e.lineBreak):e.text)}function r6(e){const t=Jv(e);return(Y(t)?t.length-1:0)*wc(e)}function Sc(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?ENe(e,n):n}function CNe(e){if(Gi.width===n6){const t=FE(e);return n=>Are(n,t)}else if(Gi.width===MS){const t=za(e);return n=>$re(n,t)}else return t=>Gi.width(e,t)}function ENe(e,t){var n=+e.limit,r=CNe(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function Zv(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function FE(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+za(e)+"px "+Zv(e,t)}function i6(e){var t=e.baseline,n=za(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*wc(e):t==="line-bottom"?.29*n-.5*wc(e):0)}const _Ne={left:"start",center:"middle",right:"end"},Iy=new gn;function RE(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-_f,t+=r*Math.cos(i),n+=r*Math.sin(i)),Iy.x1=t,Iy.y1=n,Iy}function $Ne(e,t){var n=t.dx||0,r=(t.dy||0)+i6(t),i=RE(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",_Ne[t.align]||"start"),a?(l=sd(o,s)+" "+KD(a),(n||r)&&(l+=" "+sd(n,r))):l=sd(o+n,s+r),e("transform",l)}function o6(e,t,n){var r=Gi.height(t),i=t.align,o=RE(t),s=o.x1,a=o.y1,l=t.dx||0,u=(t.dy||0)+i6(t)-Math.round(.8*r),c=Jv(t),f;if(Y(c)?(r+=wc(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Gi.width(t,h)),0)):f=Gi.width(t,c),i==="center"?l-=f/2:i==="right"&&(l-=f),e.set(l+=s,u+=a,l+f,u+r),t.angle&&!n)e.rotate(t.angle*xc,s,a);else if(n===2)return e.rotatedPoints(t.angle*xc,s,a);return e}function ANe(e,t,n){$s(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,u,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=FE(r),e.textAlign=r.align||"left",o=RE(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*xc),s=a=0),s+=r.dx||0,a+=(r.dy||0)+i6(r),c=Jv(r),Ag(e,r),Y(c))for(u=wc(r),l=0;l<c.length;++l)f=Sc(r,c[l]),r.fill&&TS(e,r,i)&&e.fillText(f,s,a),r.stroke&&Tg(e,r,i)&&e.strokeText(f,s,a),a+=u;else f=Sc(r,c),r.fill&&TS(e,r,i)&&e.fillText(f,s,a),r.stroke&&Tg(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function TNe(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=RE(t),a=s.x1,l=s.y1,u=o6(Iy,t,1),c=-t.angle*xc,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*l),p=d*i+f*o+(l-d*a-f*l);return u.contains(h,p)}function PNe(e,t){const n=o6(Iy,e,2);return pp(t,n[0],n[1],n[2],n[3])||pp(t,n[0],n[1],n[4],n[5])||pp(t,n[4],n[5],n[6],n[7])||pp(t,n[2],n[3],n[6],n[7])}var MNe={type:"text",tag:"text",nested:!1,attr:$Ne,bound:o6,draw:ANe,pick:TE(TNe),isect:PNe},FNe=JD("trail",P6e,W6e),eo={arc:B6e,area:H6e,group:iNe,image:lNe,line:uNe,path:dNe,rect:gNe,rule:xNe,shape:wNe,symbol:SNe,text:MNe,trail:FNe};function TP(e,t,n){var r=eo[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new gn),e,n)}var mB={mark:null};function Tre(e,t,n){var r=eo[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,u,c;if(r.nested)return s?u=o[0]:(mB.mark=e,u=mB),c=TP(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new gn,s)for(a=0,l=o.length;a<l;++a)t.union(TP(o[a],i,n));return e.bounds=t}const RNe=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function Pre(e,t){return JSON.stringify(e,RNe,t)}function Mre(e){const t=typeof e=="string"?JSON.parse(e):e;return Fre(t)}function Fre(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&Fre(n[i]);return t&&Tre(e),e}class Rre{constructor(t){arguments.length?this.root=Mre(t):(this.root=yB({marktype:"group",name:"root",role:"frame"}),this.root.items=[new $E(this.root)])}toJSON(t){return Pre(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=yB(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function yB(e,t){const n={bounds:new gn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Lu(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function s6(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function bn(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Lu(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function wo(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Ore(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function OE(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function ONe(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=eo[i.marktype]).tip){for(s=OE(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let a6=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||ZC(),this._tooltip=n||DNe}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=Lu(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=ONe(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:s,height:a,left:l,top:u,right:l+s,bottom:u+a}}};function DNe(e,t,n,r){e.element().setAttribute("title",r||"")}class eb{constructor(t){this._el=null,this._bgcolor=null,this._loader=new mre(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const NNe="keydown",INe="keypress",LNe="keyup",Dre="dragenter",Yw="dragleave",Nre="dragover",PP="pointerdown",zNe="pointerup",FS="pointermove",Xw="pointerout",Ire="pointerover",MP="mousedown",jNe="mouseup",Lre="mousemove",RS="mouseout",zre="mouseover",OS="click",BNe="dblclick",UNe="wheel",jre="mousewheel",DS="touchstart",NS="touchmove",IS="touchend",VNe=[NNe,INe,LNe,Dre,Yw,Nre,PP,zNe,FS,Xw,Ire,MP,jNe,Lre,RS,zre,OS,BNe,UNe,jre,DS,NS,IS],FP=FS,Ly=RS,RP=OS;class tb extends a6{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=VNe,this.pointermove=bB([FS,Lre],[Ire,zre],[Xw,RS]),this.dragover=bB([Nre],[Dre],[Yw]),this.pointerout=xB([Xw,RS]),this.dragleave=xB([Yw])}initialize(t,n,r){return this._canvas=t&&s6(t,"canvas"),[OS,MP,PP,FS,Xw,Yw].forEach(i=>vB(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(jre,t)}pointerdown(t){this._down=this._active,this.fire(PP,t)}mousedown(t){this._down=this._active,this.fire(MP,t)}click(t){this._down===this._active&&(this.fire(OS,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(DS,t,!0)}touchmove(t){this.fire(NS,t,!0)}touchend(t){this.fire(IS,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===RP&&i&&i.href?this.handleHref(n,i,i.href):(t===FP||t===Ly)&&this.handleTooltip(n,i,t!==Ly),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(vB(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=OE(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return eo[t.marktype].pick.call(this,s,t,n,r,i,o)}}const WNe=e=>e===DS||e===NS||e===IS?[DS,NS,IS]:[e];function vB(e,t){WNe(t).forEach(n=>HNe(e,n))}function HNe(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function Q0(e,t,n){t.forEach(r=>e.fire(r,n))}function bB(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?Q0(this,e,r):((!i||!i.exit)&&Q0(this,n,r),this._active=o,Q0(this,t,r),Q0(this,e,r))}}function xB(e){return function(t){Q0(this,e,t),this._active=null}}function qNe(){return typeof window<"u"&&window.devicePixelRatio||1}function GNe(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?qNe():i;e.width=t*l,e.height=n*l;for(const u in o)a[u]=o[u];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class LS extends eb{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new gn,this._tempb=new gn}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:sc(1,1,this._options.type),t&&this._canvas&&(wo(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)GNe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||G("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=YNe(i,o,s);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):XNe(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=eo[n.marktype];n.clip&&q6e(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const YNe=(e,t,n)=>new gn().set(0,0,t,n).translate(-e[0],-e[1]);function XNe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class Bre extends a6{constructor(t,n){super(t,n);const r=this;r._hrefHandler=tT(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=tT(r,(i,o)=>{r.handleTooltip(i,o,i.type!==Ly)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(RP,this._hrefHandler),i.removeEventListener(FP,this._tooltipHandler),i.removeEventListener(Ly,this._tooltipHandler)),this._svg=i=t&&s6(t,"svg"),i&&(i.addEventListener(RP,this._hrefHandler),i.addEventListener(FP,this._tooltipHandler),i.addEventListener(Ly,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:tT(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const tT=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},Ure="aria-hidden",l6="aria-label",u6="role",c6="aria-roledescription",Vre="graphics-object",f6="graphics-symbol",Wre=(e,t,n)=>({[u6]:e,[c6]:t,[l6]:n||void 0}),KNe=ks(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),wB={axis:{desc:"axis",caption:ZNe},legend:{desc:"legend",caption:eIe},"title-text":{desc:"title",caption:e=>`Title text '${kB(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${kB(e)}'`}},SB={ariaRole:u6,ariaRoleDescription:c6,description:l6};function Hre(e,t){const n=t.aria===!1;if(e(Ure,n||void 0),n||t.description==null)for(const r in SB)e(SB[r],void 0);else{const r=t.mark.marktype;e(l6,t.description),e(u6,t.ariaRole||(r==="group"?Vre:f6)),e(c6,t.ariaRoleDescription||`${r} mark`)}}function qre(e){return e.aria===!1?{[Ure]:!0}:KNe[e.role]?null:wB[e.role]?JNe(e,wB[e.role]):QNe(e)}function QNe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return Wre(n?Vre:f6,`${t} mark container`,e.description)}function JNe(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return Wre(t.role||f6,t.desc,n.description||r(n))}catch{return null}}function kB(e){return le(e.text).join(" ")}function ZNe(e){const t=e.datum,n=e.orient,r=t.title?Gre(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${_g(a)?"discrete":a} scale with ${sre(s,o,e)}`}function eIe(e){const t=e.datum,n=t.title?Gre(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return nIe(r)+(n?` titled '${n}'`:"")+` for ${tIe(o)} with ${sre(l,a,e)}`}function Gre(e){try{return le(qe(e.items).items[0].text).join(" ")}catch{return null}}function tIe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+qe(e)}function nIe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const Yre=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),rIe=e=>Yre(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function d6(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,u)=>(u!=null&&(t+=` ${l}="${rIe(u)}"`),a),a={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),f=1;f<u;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=Yre(l),a),toString:()=>e};return a}const Xre=e=>Kre(d6(),e)+"";function Kre(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):Kre(e,r)}return e.close()}const zS={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},jS={blend:"mix-blend-mode"},Qre={fill:"none","stroke-miterlimit":10},c0=0,CB="http://www.w3.org/2000/xmlns/",vn=z1.xmlns;class h6 extends eb{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=bn(t,0,"svg",vn),this._svg.setAttributeNS(CB,"xmlns",vn),this._svg.setAttributeNS(CB,"xmlns:xlink",z1["xmlns:xlink"]),this._svg.setAttribute("version",z1.version),this._svg.setAttribute("class","marks"),wo(t,1),this._root=bn(this._svg,c0,"g",vn),zu(this._root,Qre),wo(this._svg,c0+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(zu(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=bn(t,c0,"rect",vn),zu(r,{width:this._width,height:this._height,fill:n}));const i=Xre(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),wo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=eo[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,EB(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(s,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,EB(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=eo[s],l=n.interactive===!1?"none":null,u=a.tag==="g",c=_B(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return wo(c,0),n._svg;c.setAttribute("class",Ore(n));const f=qre(n);for(const g in f)Nr(c,g,f[g]);u||Nr(c,"pointer-events",l),Nr(c,"clip-path",n.clip?WD(this,n,n.group):null);let d=null,h=0;const p=g=>{const m=this.isDirty(g),y=_B(g,c,d,a.tag,o);m&&(this._update(a,y,g),u&&sIe(this,y,g,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):$s(n,p),wo(c,h),c}_update(t,n,r){bl=n,yr=n.__values__,Hre(zy,r),t.attr(zy,r,this);const i=lIe[t.type];i&&i.call(this,t,n,r),bl&&this.style(bl,r)}style(t,n){if(n!=null){for(const r in zS){let i=r==="font"?Zv(n):n[r];if(i===yr[r])continue;const o=zS[r];i==null?t.removeAttribute(o):(BD(i)&&(i=lre(i,this._defs.gradient,Jre())),t.setAttribute(o,i+"")),yr[r]=i}for(const r in jS)Kw(t,jS[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=bn(t,c0+1,"defs",vn)),i=iIe(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=bn(t,c0+1,"defs",vn)),i=oIe(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):wo(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function EB(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function iIe(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=bn(e,n++,"pattern",vn);zu(s,{id:AS+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=bn(s,0,"rect",vn),zu(s,{width:1,height:1,fill:`url(${Jre()}#${t.id})`}),e=bn(e,n++,"radialGradient",vn),zu(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=bn(e,n++,"linearGradient",vn),zu(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=bn(e,r,"stop",vn),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return wo(e,r),n}function oIe(e,t,n){let r;return e=bn(e,n,"clipPath",vn),e.setAttribute("id",t.id),t.path?(r=bn(e,0,"path",vn),r.setAttribute("d",t.path)):(r=bn(e,0,"rect",vn),zu(r,{x:0,y:0,width:t.width,height:t.height})),wo(e,1),n+1}function sIe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;$s(n,s=>{i=e.mark(t,s,i,r),++o}),wo(t,1+o)}function _B(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=Lu(s,r,vn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=Lu(s,"path",vn);o.appendChild(a),a.__data__=e;const l=Lu(s,"g",vn);o.appendChild(l),l.__data__=e;const u=Lu(s,"path",vn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||aIe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function aIe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let bl=null,yr=null;const lIe={group(e,t,n){const r=bl=t.childNodes[2];yr=r.__values__,e.foreground(zy,n,this),yr=t.__values__,bl=t.childNodes[1],e.content(zy,n,this);const i=bl=t.childNodes[0];e.background(zy,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==yr.events&&(Nr(r,"pointer-events",o),Nr(i,"pointer-events",o),yr.events=o),n.strokeForeground&&n.stroke){const s=n.fill;Nr(r,"display",null),this.style(i,n),Nr(i,"stroke",null),s&&(n.fill=null),yr=r.__values__,this.style(r,n),s&&(n.fill=s),bl=null}else Nr(r,"display","none")},image(e,t,n){n.smooth===!1?(Kw(t,"image-rendering","optimizeSpeed"),Kw(t,"image-rendering","pixelated")):Kw(t,"image-rendering",null)},text(e,t,n){const r=Jv(n);let i,o,s,a;Y(r)?(o=r.map(l=>Sc(n,l)),i=o.join(`
`),i!==yr.text&&(wo(t,0),s=t.ownerDocument,a=wc(n),o.forEach((l,u)=>{const c=Lu(s,"tspan",vn);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),yr.text=i)):(o=Sc(n,r),o!==yr.text&&(t.textContent=o,yr.text=o)),Nr(t,"font-family",Zv(n)),Nr(t,"font-size",za(n)+"px"),Nr(t,"font-style",n.fontStyle),Nr(t,"font-variant",n.fontVariant),Nr(t,"font-weight",n.fontWeight)}};function zy(e,t,n){t!==yr[e]&&(n?uIe(bl,e,t,n):Nr(bl,e,t),yr[e]=t)}function Kw(e,t,n){n!==yr[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),yr[t]=n)}function zu(e,t){for(const n in t)Nr(e,n,t[n])}function Nr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function uIe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Jre(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class Zre extends eb{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=d6();n.open("svg",De({},z1,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",Qre,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=eo[n.marktype],i=r.tag,o=[Hre,r.attr];t.open("g",{class:Ore(n),"clip-path":n.clip?WD(this,n,n.group):null},qre(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const u=Jv(a);if(Y(u)){const c={x:0,dy:wc(a)};for(let f=0;f<u.length;++f)t.open("tspan",f?c:null).text(Sc(a,u[f])).close()}else t.text(Sc(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,f=a.stroke;u&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),$s(a,d=>this.mark(t,d)),t.close(),u&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):$s(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,u,c)=>{o[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&cIe(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:AS+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function cIe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Zv(t),e["font-size"]=za(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in zS){let a=t[s];const l=zS[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(BD(a)&&(a=lre(a,i.gradient,"")),e[l]=a)}for(const s in jS){const a=t[s];a!=null&&(o=o||[],o.push(`${jS[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const ns={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function fIe(e){ns.svgMarkTypes=e.svgMarkTypes??["text"],ns.svgOnTop=e.svgOnTop??!0,ns.debug=e.debug??!1}class OP extends eb{constructor(t){super(t),this._svgRenderer=new h6(t),this._canvasRenderer=new LS(t)}initialize(t,n,r,i,o){this._root_el=bn(t,0,"div");const s=bn(this._root_el,0,"div"),a=bn(this._root_el,1,"div");return this._root_el.style.position="relative",ns.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=ns.svgOnTop?a:s,this._canvasEl=ns.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return ns.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!ns.svgMarkTypes.includes(o));this._svgRenderer.render(t,ns.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return ns.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class eie extends tb{constructor(t,n){super(t,n)}initialize(t,n,r){const i=bn(bn(t,0,"div"),ns.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const tie="canvas",nie="hybrid",rie="png",iie="svg",oie="none",ju={Canvas:tie,PNG:rie,SVG:iie,Hybrid:nie,None:oie},kd={};kd[tie]=kd[rie]={renderer:LS,headless:LS,handler:tb};kd[iie]={renderer:h6,headless:Zre,handler:Bre};kd[nie]={renderer:OP,headless:OP,handler:eie};kd[oie]={};function DE(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(kd[e]=t,this):kd[e]}function sie(e,t,n){const r=[],i=new gn().union(t),o=e.marktype;return o?aie(e,i,n,r):o==="group"?lie(e,i,n,r):G("Intersect scene must be mark node or group item.")}function aie(e,t,n,r){if(dIe(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)lie(i[a],t,n,r);else for(const l=eo[o].isect;a<s;++a){const u=i[a];uie(u,t,l)&&r.push(u)}}return r}function dIe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function lie(e,t,n,r){n&&n(e.mark)&&uie(e,t,eo.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)aie(i[l],t,n,r);t.translate(s,a)}return r}function uie(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const nT=new gn;function cie(e){const t=e.clip;if(Ne(t))t(Kv(nT.clear()));else if(t)nT.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(nT)}const hIe=1e-9;function p6(e,t,n){return e===t?!0:n==="path"?fie(e,t):e instanceof Date&&t instanceof Date?+e==+t:Je(e)&&Je(t)?Math.abs(e-t)<=hIe:!e||!t||!se(e)&&!se(t)?e==t:pIe(e,t)}function fie(e,t){return p6($g(e),$g(t))}function pIe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!p6(e[i],t[i],i))return!1;return typeof e==typeof t}function gIe(){gre(),zDe()}const Pg="top",cs="left",ps="right",kc="bottom",mIe="top-left",yIe="top-right",vIe="bottom-left",bIe="bottom-right",g6="start",DP="middle",Lr="end",xIe="x",wIe="y",NE="group",m6="axis",y6="title",SIe="frame",kIe="scope",v6="legend",die="row-header",hie="row-footer",pie="row-title",gie="column-header",mie="column-footer",yie="column-title",CIe="padding",EIe="symbol",vie="fit",bie="fit-x",xie="fit-y",_Ie="pad",b6="none",_x="all",NP="each",x6="flush",Bu="column",Uu="row";function wie(e){H.call(this,null,e)}re(wie,H,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=eo[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=$x(r,s),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===NE||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union($x(u,s))),r.role){case m6:case v6:case y6:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union($x(u,s))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union($x(u,s))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return cie(r),t.modifies("bounds")}});function $x(e,t,n){return t(e.bounds.clear(),e,n)}const $B=":vega_identifier:";function w6(e){H.call(this,0,e)}w6.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};re(w6,H,{transform(e,t){const n=$Ie(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function $Ie(e){return e._signals[$B]||(e._signals[$B]=e.add(0))}function Sie(e){H.call(this,null,e)}re(Sie,H,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,AIe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===NE?$E:_E;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function AIe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function kie(e){H.call(this,null,e)}const AB={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Cie(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Cie=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),TB=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(Cie(i,o=e[n].bounds,t))return!0},TIe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},PIe=(e,t,n)=>{var r=e.range(),i=new gn;return t===Pg||t===kc?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},PB=e=>(e.forEach(t=>t.opacity=1),e),MB=(e,t)=>e.reflow(t.modified()).modifies("opacity");re(kie,H,{transform(e,t){const n=AB[e.method]||AB.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(PB(i),t=MB(t,e)),t;if(i=i.filter(TIe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=PB(i),t=MB(t,e),o.length>=3&&TB(o,r)){do o=n(o,r);while(o.length>=3&&TB(o,r));o.length<3&&!qe(i).opacity&&(o.length>1&&(qe(o).opacity=0),qe(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=PIe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function Eie(e){H.call(this,null,e)}re(Eie,H,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const hr=new gn;function gp(e,t,n){return e[t]===n?0:(e[t]=n,1)}function MIe(e){var t=e.items[0].orient;return t===cs||t===ps}function FIe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function RIe(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=FIe(o),u=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=o.title&&i.items[l[2]].items[0],g=i.titlePadding,m=i.bounds,y=p&&r6(p),v=0,b=0,x,w;switch(hr.clear().union(m),m.clear(),(x=l[0])>-1&&m.union(i.items[x].bounds),(x=l[1])>-1&&m.union(i.items[x].bounds),a){case Pg:v=f||0,b=-c,w=Math.max(d,Math.min(h,-m.y1)),m.add(0,-w).add(u,0),p&&Ax(e,p,w,g,y,0,-1,m);break;case cs:v=-c,b=f||0,w=Math.max(d,Math.min(h,-m.x1)),m.add(-w,0).add(0,u),p&&Ax(e,p,w,g,y,1,-1,m);break;case ps:v=n+c,b=f||0,w=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(w,u),p&&Ax(e,p,w,g,y,1,1,m);break;case kc:v=f||0,b=r+c,w=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(u,w),p&&Ax(e,p,w,g,0,0,1,m);break;default:v=i.x,b=i.y}return Xl(m.translate(v,b),i),gp(i,"x",v+s)|gp(i,"y",b+s)&&(i.bounds=hr,e.dirty(i),i.bounds=m,e.dirty(i)),i.mark.bounds.clear().union(m)}function Ax(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const u=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):f=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-f)),e.dirty(t)}a.union(l)}const FB=(e,t)=>Math.floor(Math.min(e,t)),RB=(e,t)=>Math.ceil(Math.max(e,t));function OIe(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===NE)switch(i.role){case m6:case v6:case y6:break;case die:s.rowheaders.push(...o);break;case hie:s.rowfooters.push(...o);break;case gie:s.colheaders.push(...o);break;case mie:s.colfooters.push(...o);break;case pie:s.rowtitle=o[0];break;case yie:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function DIe(e){return new gn().set(0,0,e.width||0,e.height||0)}function NIe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Nt(e,t,n){const r=se(e)?e[t]:e;return r??(n!==void 0?n:0)}function OB(e){return e<0?Math.ceil(-e):0}function _ie(e,t,n){var r=!n.nodirty,i=n.bounds===x6?DIe:NIe,o=hr.set(0,0,0,0),s=Nt(n.align,Bu),a=Nt(n.align,Uu),l=Nt(n.padding,Bu),u=Nt(n.padding,Uu),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,m=Array(d),y=Array(f),v=0,b=Array(d),x=Array(d),w=Array(d),k,S,C,E,A,T,I,F,R,_,P;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)T=t[S],A=w[S]=i(T),T.x=T.x||0,b[S]=0,T.y=T.y||0,x[S]=0,C=S%c,E=~~(S/c),g=Math.max(g,I=Math.ceil(A.x2)),v=Math.max(v,F=Math.ceil(A.y2)),p[C]=Math.max(p[C],I),y[E]=Math.max(y[E],F),h[S]=l+OB(A.x1),m[S]=u+OB(A.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(m[S]=0);if(s===NP)for(C=1;C<c;++C){for(P=0,S=C;S<d;S+=c)P<h[S]&&(P=h[S]);for(S=C;S<d;S+=c)h[S]=P+p[C-1]}else if(s===_x){for(P=0,S=0;S<d;++S)S%c&&P<h[S]&&(P=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=P+g)}else for(s=!1,C=1;C<c;++C)for(S=C;S<d;S+=c)h[S]+=p[C-1];if(a===NP)for(E=1;E<f;++E){for(P=0,S=E*c,k=S+c;S<k;++S)P<m[S]&&(P=m[S]);for(S=E*c;S<k;++S)m[S]=P+y[E-1]}else if(a===_x){for(P=0,S=c;S<d;++S)P<m[S]&&(P=m[S]);for(S=c;S<d;++S)m[S]=P+v}else for(a=!1,E=1;E<f;++E)for(S=E*c,k=S+c;S<k;++S)m[S]+=y[E-1];for(R=0,S=0;S<d;++S)R=h[S]+(S%c?R:0),b[S]+=R-t[S].x;for(C=0;C<c;++C)for(_=0,S=C;S<d;S+=c)_+=m[S],x[S]+=_-t[S].y;if(s&&Nt(n.center,Bu)&&f>1)for(S=0;S<d;++S)A=s===_x?g:p[S%c],R=A-w[S].x2-t[S].x-b[S],R>0&&(b[S]+=R/2);if(a&&Nt(n.center,Uu)&&c!==1)for(S=0;S<d;++S)A=a===_x?v:y[~~(S/c)],_=A-w[S].y2-t[S].y-x[S],_>0&&(x[S]+=_/2);for(S=0;S<d;++S)o.union(w[S].translate(b[S],x[S]));switch(R=Nt(n.anchor,xIe),_=Nt(n.anchor,wIe),Nt(n.anchor,Bu)){case Lr:R-=o.width();break;case DP:R-=o.width()/2}switch(Nt(n.anchor,Uu)){case Lr:_-=o.height();break;case DP:_-=o.height()/2}for(R=Math.round(R),_=Math.round(_),o.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)T=t[S],T.x+=b[S]+=R,T.y+=x[S]+=_,o.union(T.mark.bounds.union(T.bounds.translate(b[S],x[S]))),r&&e.dirty(T);return o}function IIe(e,t,n){var r=OIe(t),i=r.marks,o=n.bounds===x6?LIe:zIe,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,f,d,h,p,g,m;const y=_ie(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=Nt(n.headerBand,Uu,null),c=Tx(e,r.rowheaders,i,a,l,-Nt(s,"rowHeader"),FB,0,o,"x1",0,a,1,g)),r.colheaders&&(g=Nt(n.headerBand,Bu,null),f=Tx(e,r.colheaders,i,a,a,-Nt(s,"columnHeader"),FB,1,o,"y1",0,1,a,g)),r.rowfooters&&(g=Nt(n.footerBand,Uu,null),d=Tx(e,r.rowfooters,i,a,l,Nt(s,"rowFooter"),RB,0,o,"x2",a-1,a,1,g)),r.colfooters&&(g=Nt(n.footerBand,Bu,null),h=Tx(e,r.colfooters,i,a,a,Nt(s,"columnFooter"),RB,1,o,"y2",u-a,1,a,g)),r.rowtitle&&(p=Nt(n.titleAnchor,Uu),m=Nt(s,"rowTitle"),m=p===Lr?d+m:c-m,g=Nt(n.titleBand,Uu,.5),DB(e,r.rowtitle,m,0,y,g)),r.coltitle&&(p=Nt(n.titleAnchor,Bu),m=Nt(s,"columnTitle"),m=p===Lr?h+m:f-m,g=Nt(n.titleBand,Bu,.5),DB(e,r.coltitle,m,1,y,g))}function LIe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function zIe(e,t){return e.bounds[t]}function Tx(e,t,n,r,i,o,s,a,l,u,c,f,d,h){var p=n.length,g=0,m=0,y,v,b,x,w,k,S,C,E;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=s(g,l(n[y],u)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=o,v=0,x=t.length;v<x;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,x=t.length;v<x;++v,y+=f){for(k=t[v],w=k.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),E=g):(C=g,E=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),w.union(k.bounds.translate(C-(k.x||0),E-(k.y||0))),k.x=C,k.y=E,e.dirty(k),m=s(m,w[u])}return m}function DB(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function jIe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function BIe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function UIe(e,t,n,r,i,o,s){const a=jIe(n,t),l=BIe(e,a("offset",0)),u=a("anchor",g6),c=u===Lr?1:u===DP?.5:0,f={align:NP,bounds:a("bounds",x6),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case cs:f.anchor={x:Math.floor(r.x1)-l,column:Lr,y:c*(s||r.height()+2*r.y1),row:u};break;case ps:f.anchor={x:Math.ceil(r.x2)+l,y:c*(s||r.height()+2*r.y1),row:u};break;case Pg:f.anchor={y:Math.floor(i.y1)-l,row:Lr,x:c*(o||i.width()+2*i.x1),column:u};break;case kc:f.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case mIe:f.anchor={x:l,y:l};break;case yIe:f.anchor={x:o-l,y:l,column:Lr};break;case vIe:f.anchor={x:l,y:s-l,row:Lr};break;case bIe:f.anchor={x:o-l,y:s-l,column:Lr,row:Lr};break}return f}function VIe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),HIe(e,n,n.items[0].items[0]),o=WIe(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===EIe&&qIe(n.items[0].items[0].items[0].items),i!==b6&&(n.x=s=0,n.y=a=0),n.width=l,n.height=u,Xl(o.set(s,a,s+l,a+u),n),n.mark.bounds.clear().union(o),n}function WIe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function HIe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&f0(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,u=r-s.x,c=r-s.y;switch(s.orient){case cs:i+=Math.ceil(s.bounds.width())+l;break;case ps:case kc:break;default:o+=s.bounds.height()+l}switch((i||o)&&f0(e,n,i,o),s.orient){case cs:c+=$h(t,n,s,a,1,1);break;case ps:u+=$h(t,n,s,Lr,0,0)+l,c+=$h(t,n,s,a,1,1);break;case kc:u+=$h(t,n,s,a,0,0),c+=$h(t,n,s,Lr,-1,0,1)+l;break;default:u+=$h(t,n,s,a,0,0)}(u||c)&&f0(e,s,u,c),(u=Math.round(s.bounds.x1-r))<0&&(f0(e,n,-u,0),f0(e,s,-u,0))}}function $h(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(o||!l)&&!s?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,f=l&&o?c:0,d=l&&o?0:c,h=i<=0?0:r6(n);return Math.round(r===g6?f:r===Lr?d-h:.5*(c-h))}function f0(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function qIe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function GIe(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,u=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===cs||a===ps?r:n,p=0,g=0,m=0,y=0,v=0,b;if(s!==NE?a===cs?(p=i.y2,h=i.y1):a===ps?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===cs&&(p=r,h=0),b=l===g6?p:l===Lr?h:(p+h)/2,d&&d.text){switch(a){case Pg:case kc:v=f.bounds.height()+c;break;case cs:y=f.bounds.width()+c;break;case ps:y=-f.bounds.width()-c;break}hr.clear().union(d.bounds),hr.translate(y-(d.x||0),v-(d.y||0)),gp(d,"x",y)|gp(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(hr),d.mark.bounds.clear().union(hr),e.dirty(d)),hr.clear().union(d.bounds)}else hr.clear();switch(hr.union(f.bounds),a){case Pg:g=b,m=i.y1-hr.height()-u;break;case cs:g=i.x1-hr.width()-u,m=b;break;case ps:g=i.x2+hr.width()+u,m=b;break;case kc:g=b,m=i.y2+u;break;default:g=o.x,m=o.y}return gp(o,"x",g)|gp(o,"y",m)&&(hr.translate(g,m),e.dirty(o),o.bounds.clear().union(hr),t.bounds.clear().union(hr),e.dirty(o)),o.bounds}function $ie(e){H.call(this,null,e)}re($ie,H,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&IIe(n,r,e.layout),XIe(n,r,e)}),YIe(e.mark.group)?t.reflow():t}});function YIe(e){return e&&e.mark.role!=="legend-entry"}function XIe(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new gn().set(0,0,i,o),a=s.clone(),l=s.clone(),u=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case m6:h=MIe(f)?a:l,h.union(RIe(e,f,i,o));break;case y6:c=f;break;case v6:u.push(VIe(e,f));break;case SIe:case kIe:case die:case hie:case pie:case gie:case mie:case yie:a.union(f.bounds),l.union(f.bounds);break;default:s.union(f.bounds)}if(u.length){const m={};u.forEach(y=>{d=y.orient||ps,d!==b6&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const v=m[y];_ie(e,v,UIe(v,y,n.legends,a,l,i,o))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===vie||n.autosize.type===bie||n.autosize.type===xie))switch(y.orient){case cs:case ps:s.add(v.x1,0).add(v.x2,0);break;case Pg:case kc:s.add(0,v.y1).add(0,v.y2)}else s.union(v)})}s.union(a).union(l),c&&s.union(GIe(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),KIe(e,t,s,n)}function KIe(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===CIe){const p=e.padding();s-=p.left+p.right,a-=p.top+p.bottom}o===b6?(u=0,f=0,l=s,c=a):o===vie?(l=Math.max(0,s-u-d),c=Math.max(0,a-f-h)):o===bie?(l=Math.max(0,s-u-d),a=c+f+h):o===xie?(s=l+u+d,c=Math.max(0,a-f-h)):o===_Ie&&(s=l+u+d,a=c+f+h),e._resizeView(s,a,l,c,[u,f],i.resize)}const QIe=Object.freeze(Object.defineProperty({__proto__:null,bound:wie,identifier:w6,mark:Sie,overlap:kie,render:Eie,viewlayout:$ie},Symbol.toStringTag,{value:"Module"}));function Aie(e){H.call(this,null,e)}re(Aie,H,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=zD(o,s,e.minstep),l=e.format||tre(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?ere(o,e.values,a):jD(o,a);return i&&(r.rem=i),i=u.map((c,f)=>at({index:f/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(at({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Tie(e){H.call(this,null,e)}function JIe(){return at({})}function ZIe(e){const t=hm().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}re(Tie,H,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||JIe,o=e.key||be,s=this.value;return Y(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&G("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=ZIe(o)),t.visit(t.ADD,a=>{const l=o(a);let u=s.get(l);u?u.exit?(s.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),s.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),u=s.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=o(a),u=s.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function Pie(e){H.call(this,null,e)}re(Pie,H,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(Y(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||du,l=i.enter||du,u=i.exit||du,c=(o&&!s?i[o]:a)||du;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{l(f,e),a(f,e)}),n.modifies(l.output),n.modifies(a.output),c!==du&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==du&&(t.visit(t.REM,f=>{u(f,e)}),n.modifies(u.output)),s||c!==du){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=l(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(l.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function Mie(e){H.call(this,[],e)}re(Mie,H,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||Uw,s=e.scale,a=+e.limit,l=zD(s,e.count==null?5:e.count,e.minstep),u=!!e.values||o===Uw,c=e.format||ore(n,s,l,o,e.formatSpecifier,e.formatType,u),f=e.values||ire(s,l),d,h,p,g,m;return i&&(r.rem=i),o===Uw?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),m=!0):i=f,Ne(p=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),g=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Tr(g=p||8),i=i.map((y,v)=>at({index:v,label:c(y,v,i),value:y,offset:g,size:p(y,e)})),m&&(m=f[i.length],i.push(at({index:i.length,label:`${f.length-i.length} entries`,value:m,offset:g,size:p(m,e)})))):o===_De?(d=s.domain(),h=Qne(s,d[0],qe(d)),f.length<3&&!e.values&&d[0]!==qe(d)&&(f=[d[0],qe(d)]),i=f.map((y,v)=>at({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=IDe(s),i=f.map((y,v)=>at({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const eLe=e=>e.source.x,tLe=e=>e.source.y,nLe=e=>e.target.x,rLe=e=>e.target.y;function S6(e){H.call(this,{},e)}S6.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};re(S6,H,{transform(e,t){var n=e.sourceX||eLe,r=e.sourceY||tLe,i=e.targetX||nLe,o=e.targetY||rLe,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=NB.get(l+"-"+a)||NB.get(l);return u||G("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=u(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const Fie=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,iLe=(e,t,n,r)=>Fie(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Rie=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},oLe=(e,t,n,r)=>Rie(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Oie=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},sLe=(e,t,n,r)=>Oie(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),aLe=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,lLe=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,uLe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},cLe=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},fLe=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},dLe=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},NB=hm({line:Fie,"line-radial":iLe,arc:Rie,"arc-radial":oLe,curve:Oie,"curve-radial":sLe,"orthogonal-horizontal":aLe,"orthogonal-vertical":lLe,"orthogonal-radial":uLe,"diagonal-horizontal":cLe,"diagonal-vertical":fLe,"diagonal-radial":dLe});function k6(e){H.call(this,null,e)}k6.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};re(k6,H,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||cm,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,f=s,d=(a-s)/UZ(u),h=Bi(c),p,g,m;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),p=0;p<c;++p)m=u[h[p]],g=l[h[p]],g[r]=f,g[i]=f+=m*d;return this.value=u,t.reflow(e.modified()).modifies(n)}});const hLe=5;function pLe(e){const t=e.type;return!e.bins&&(t===Cg||t===Vv||t===Wv)}function Die(e){return ND(e)&&e!==Ea}const gLe=ks(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Nie(e){H.call(this,null,e),this.modified(!0)}re(Nie,H,{transform(e,t){var n=t.dataflow,r=this.value,i=mLe(e);(!r||i!==r.type)&&(this.value=r=et(i)());for(i in e)if(!gLe[i]){if(i==="padding"&&Die(r.type))continue;Ne(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return SLe(r,e,wLe(r,e,vLe(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function mLe(e){var t=e.type,n="",r;return t===Ea?Ea+"-"+Cg:(yLe(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Ea+"-":r===3?xm+"-":""),(n+t||Cg).toLowerCase())}function yLe(e){const t=e.type;return ND(t)&&t!==wd&&t!==Sd&&(e.scheme||e.range&&e.range.length&&e.range.every(ue))}function vLe(e,t,n){const r=bLe(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&pLe(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return Die(o)&&t.padding&&i[0]!==qe(i)&&(i=xLe(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Iie(o,i,n)),o===FD&&e.unknown(t.domainImplicit?mP:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&zD(e,t.nice)||null),i.length}function bLe(e,t,n){return t?(e.domain(Iie(e.type,t,n)),t.length):-1}function xLe(e,t,n,r,i,o){var s=Math.abs(qe(n)-n[0]),a=s/(s-2*r),l=e===Bl?ZR(t,null,a):e===Wv?uS(t,null,a,.5):e===Vv?uS(t,null,a,i||1):e===wE?eO(t,null,a,o||1):JR(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function Iie(e,t,n){if(qne(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ne(t))}return t}function wLe(e,t,n){let r=t.bins;if(r&&!Y(r)){const i=e.domain(),o=i[0],s=qe(i),a=r.step;let l=r.start==null?o:r.start,u=r.stop==null?s:r.stop;a||G("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),u>s&&(u=a*Math.floor(s/a)),r=Bi(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===RD&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function SLe(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=kLe(r,t,n);else if(t.scheme&&(o=CLe(r,t,n),Ne(o))){if(e.interpolator)return e.interpolator(o);G(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&Gne(r))return e.interpolator(CE(IP(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(ID(t.interpolate,t.interpolateGamma)):Ne(e.round)?e.round(i):Ne(e.rangeRound)&&e.interpolate(i?bm:zc),o&&e.range(IP(o,t.reverse))}function kLe(e,t,n){e!==jne&&e!==SP&&G("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===SP?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*MD(n,i,r)]}function CLe(e,t,n){var r=t.schemeExtent,i,o;return Y(t.scheme)?o=CE(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=LD(i),o||G(`Unrecognized scheme name: ${t.scheme}`)),n=e===kE?n+1:e===RD?n-1:e===Eg||e===SE?+t.schemeCount||hLe:n,Gne(e)?IB(o,r,t.reverse):Ne(o)?Kne(IB(o,r),n):e===FD?o:o.slice(0,n)}function IB(e,t,n){return Ne(e)&&(t||n)?Xne(e,IP(t||[0,1],n)):e}function IP(e,t){return t?e.slice().reverse():e}function Lie(e){H.call(this,null,e)}re(Lie,H,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Zd(e.sort)),this.modified(n),t}});const LB="zero",zie="center",jie="normalize",Bie=["y0","y1"];function C6(e){H.call(this,null,e)}C6.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:LB,values:[LB,zie,jie]},{name:"as",type:"string",array:!0,length:2,default:Bie}]};re(C6,H,{transform(e,t){var n=e.as||Bie,r=n[0],i=n[1],o=Zd(e.sort),s=e.field||cm,a=e.offset===zie?ELe:e.offset===jie?_Le:$Le,l,u,c,f;for(l=ALe(t.source,e.groupby,o,s),u=0,c=l.length,f=l.max;u<c;++u)a(l[u],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function ELe(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function _Le(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=s,c[i]=s=o*(u+=Math.abs(n(c)))}function $Le(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=s,c[i]=s+=u):(c[r]=o,c[i]=o+=u)}function ALe(e,t,n,r){var i=[],o=g=>g(c),s,a,l,u,c,f,d,h,p;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,u=i.length;f<u;++f){for(d=i[f],a=0,h=0,l=d.length;a<l;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const TLe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Aie,datajoin:Tie,encode:Pie,legendentries:Mie,linkpath:S6,pie:k6,scale:Nie,sortitems:Lie,stack:C6},Symbol.toStringTag,{value:"Module"}));var we=1e-6,BS=1e-12,Le=Math.PI,Zt=Le/2,US=Le/4,Qr=Le*2,nn=180/Le,Ie=Le/180,He=Math.abs,Sm=Math.atan,zo=Math.atan2,Se=Math.cos,Px=Math.ceil,Uie=Math.exp,LP=Math.hypot,VS=Math.log,rT=Math.pow,xe=Math.sin,$o=Math.sign||function(e){return e>0?1:e<0?-1:0},Jr=Math.sqrt,E6=Math.tan;function Vie(e){return e>1?0:e<-1?Le:Math.acos(e)}function ki(e){return e>1?Zt:e<-1?-Zt:Math.asin(e)}function Qn(){}function WS(e,t){e&&jB.hasOwnProperty(e.type)&&jB[e.type](e,t)}var zB={Feature:function(e,t){WS(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)WS(n[r].geometry,t)}},jB={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){zP(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)zP(n[r],t,0)},Polygon:function(e,t){BB(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)BB(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)WS(n[r],t)}};function zP(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function BB(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)zP(e[n],t,1);t.polygonEnd()}function cl(e,t){e&&zB.hasOwnProperty(e.type)?zB[e.type](e,t):WS(e,t)}var HS=new Xr,qS=new Xr,Wie,Hie,jP,BP,UP,Pa={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){HS=new Xr,Pa.lineStart=PLe,Pa.lineEnd=MLe},polygonEnd:function(){var e=+HS;qS.add(e<0?Qr+e:e),this.lineStart=this.lineEnd=this.point=Qn},sphere:function(){qS.add(Qr)}};function PLe(){Pa.point=FLe}function MLe(){qie(Wie,Hie)}function FLe(e,t){Pa.point=qie,Wie=e,Hie=t,e*=Ie,t*=Ie,jP=e,BP=Se(t=t/2+US),UP=xe(t)}function qie(e,t){e*=Ie,t*=Ie,t=t/2+US;var n=e-jP,r=n>=0?1:-1,i=r*n,o=Se(t),s=xe(t),a=UP*s,l=BP*o+a*Se(i),u=a*r*xe(i);HS.add(zo(u,l)),jP=e,BP=o,UP=s}function RLe(e){return qS=new Xr,cl(e,Pa),qS*2}function GS(e){return[zo(e[1],e[0]),ki(e[2])]}function Cd(e){var t=e[0],n=e[1],r=Se(n);return[r*Se(t),r*xe(t),xe(n)]}function Mx(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Mg(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function iT(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Fx(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function YS(e){var t=Jr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Bt,li,Kt,Oi,xf,Gie,Yie,Rp,jy,wu,Ul,sl={point:VP,lineStart:UB,lineEnd:VB,polygonStart:function(){sl.point=Kie,sl.lineStart=OLe,sl.lineEnd=DLe,jy=new Xr,Pa.polygonStart()},polygonEnd:function(){Pa.polygonEnd(),sl.point=VP,sl.lineStart=UB,sl.lineEnd=VB,HS<0?(Bt=-(Kt=180),li=-(Oi=90)):jy>we?Oi=90:jy<-we&&(li=-90),Ul[0]=Bt,Ul[1]=Kt},sphere:function(){Bt=-(Kt=180),li=-(Oi=90)}};function VP(e,t){wu.push(Ul=[Bt=e,Kt=e]),t<li&&(li=t),t>Oi&&(Oi=t)}function Xie(e,t){var n=Cd([e*Ie,t*Ie]);if(Rp){var r=Mg(Rp,n),i=[r[1],-r[0],0],o=Mg(i,r);YS(o),o=GS(o);var s=e-xf,a=s>0?1:-1,l=o[0]*nn*a,u,c=He(s)>180;c^(a*xf<l&&l<a*e)?(u=o[1]*nn,u>Oi&&(Oi=u)):(l=(l+360)%360-180,c^(a*xf<l&&l<a*e)?(u=-o[1]*nn,u<li&&(li=u)):(t<li&&(li=t),t>Oi&&(Oi=t))),c?e<xf?Ri(Bt,e)>Ri(Bt,Kt)&&(Kt=e):Ri(e,Kt)>Ri(Bt,Kt)&&(Bt=e):Kt>=Bt?(e<Bt&&(Bt=e),e>Kt&&(Kt=e)):e>xf?Ri(Bt,e)>Ri(Bt,Kt)&&(Kt=e):Ri(e,Kt)>Ri(Bt,Kt)&&(Bt=e)}else wu.push(Ul=[Bt=e,Kt=e]);t<li&&(li=t),t>Oi&&(Oi=t),Rp=n,xf=e}function UB(){sl.point=Xie}function VB(){Ul[0]=Bt,Ul[1]=Kt,sl.point=VP,Rp=null}function Kie(e,t){if(Rp){var n=e-xf;jy.add(He(n)>180?n+(n>0?360:-360):n)}else Gie=e,Yie=t;Pa.point(e,t),Xie(e,t)}function OLe(){Pa.lineStart()}function DLe(){Kie(Gie,Yie),Pa.lineEnd(),He(jy)>we&&(Bt=-(Kt=180)),Ul[0]=Bt,Ul[1]=Kt,Rp=null}function Ri(e,t){return(t-=e)<0?t+360:t}function NLe(e,t){return e[0]-t[0]}function WB(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ILe(e){var t,n,r,i,o,s,a;if(Oi=Kt=-(Bt=li=1/0),wu=[],cl(e,sl),n=wu.length){for(wu.sort(NLe),t=1,r=wu[0],o=[r];t<n;++t)i=wu[t],WB(r,i[0])||WB(r,i[1])?(Ri(r[0],i[1])>Ri(r[0],r[1])&&(r[1]=i[1]),Ri(i[0],r[1])>Ri(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Ri(r[1],i[0]))>s&&(s=a,Bt=i[0],Kt=r[1])}return wu=Ul=null,Bt===1/0||li===1/0?[[NaN,NaN],[NaN,NaN]]:[[Bt,li],[Kt,Oi]]}var J0,XS,KS,QS,JS,ZS,ek,tk,WP,HP,qP,Qie,Jie,jr,Br,Ur,gs={sphere:Qn,point:_6,lineStart:HB,lineEnd:qB,polygonStart:function(){gs.lineStart=jLe,gs.lineEnd=BLe},polygonEnd:function(){gs.lineStart=HB,gs.lineEnd=qB}};function _6(e,t){e*=Ie,t*=Ie;var n=Se(t);nb(n*Se(e),n*xe(e),xe(t))}function nb(e,t,n){++J0,KS+=(e-KS)/J0,QS+=(t-QS)/J0,JS+=(n-JS)/J0}function HB(){gs.point=LLe}function LLe(e,t){e*=Ie,t*=Ie;var n=Se(t);jr=n*Se(e),Br=n*xe(e),Ur=xe(t),gs.point=zLe,nb(jr,Br,Ur)}function zLe(e,t){e*=Ie,t*=Ie;var n=Se(t),r=n*Se(e),i=n*xe(e),o=xe(t),s=zo(Jr((s=Br*o-Ur*i)*s+(s=Ur*r-jr*o)*s+(s=jr*i-Br*r)*s),jr*r+Br*i+Ur*o);XS+=s,ZS+=s*(jr+(jr=r)),ek+=s*(Br+(Br=i)),tk+=s*(Ur+(Ur=o)),nb(jr,Br,Ur)}function qB(){gs.point=_6}function jLe(){gs.point=ULe}function BLe(){Zie(Qie,Jie),gs.point=_6}function ULe(e,t){Qie=e,Jie=t,e*=Ie,t*=Ie,gs.point=Zie;var n=Se(t);jr=n*Se(e),Br=n*xe(e),Ur=xe(t),nb(jr,Br,Ur)}function Zie(e,t){e*=Ie,t*=Ie;var n=Se(t),r=n*Se(e),i=n*xe(e),o=xe(t),s=Br*o-Ur*i,a=Ur*r-jr*o,l=jr*i-Br*r,u=LP(s,a,l),c=ki(u),f=u&&-c/u;WP.add(f*s),HP.add(f*a),qP.add(f*l),XS+=c,ZS+=c*(jr+(jr=r)),ek+=c*(Br+(Br=i)),tk+=c*(Ur+(Ur=o)),nb(jr,Br,Ur)}function VLe(e){J0=XS=KS=QS=JS=ZS=ek=tk=0,WP=new Xr,HP=new Xr,qP=new Xr,cl(e,gs);var t=+WP,n=+HP,r=+qP,i=LP(t,n,r);return i<BS&&(t=ZS,n=ek,r=tk,XS<we&&(t=KS,n=QS,r=JS),i=LP(t,n,r),i<BS)?[NaN,NaN]:[zo(n,t)*nn,ki(r/i)*nn]}function GP(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function YP(e,t){return He(e)>Le&&(e-=Math.round(e/Qr)*Qr),[e,t]}YP.invert=YP;function eoe(e,t,n){return(e%=Qr)?t||n?GP(YB(e),XB(t,n)):YB(e):t||n?XB(t,n):YP}function GB(e){return function(t,n){return t+=e,He(t)>Le&&(t-=Math.round(t/Qr)*Qr),[t,n]}}function YB(e){var t=GB(e);return t.invert=GB(-e),t}function XB(e,t){var n=Se(e),r=xe(e),i=Se(t),o=xe(t);function s(a,l){var u=Se(l),c=Se(a)*u,f=xe(a)*u,d=xe(l),h=d*n+c*r;return[zo(f*i-h*o,c*n-d*r),ki(h*i+f*o)]}return s.invert=function(a,l){var u=Se(l),c=Se(a)*u,f=xe(a)*u,d=xe(l),h=d*i-f*o;return[zo(f*i+d*o,c*n+h*r),ki(h*n-c*r)]},s}function WLe(e){e=eoe(e[0]*Ie,e[1]*Ie,e.length>2?e[2]*Ie:0);function t(n){return n=e(n[0]*Ie,n[1]*Ie),n[0]*=nn,n[1]*=nn,n}return t.invert=function(n){return n=e.invert(n[0]*Ie,n[1]*Ie),n[0]*=nn,n[1]*=nn,n},t}function HLe(e,t,n,r,i,o){if(n){var s=Se(t),a=xe(t),l=r*n;i==null?(i=t+r*Qr,o=t-l/2):(i=KB(s,i),o=KB(s,o),(r>0?i<o:i>o)&&(i+=r*Qr));for(var u,c=i;r>0?c>o:c<o;c-=l)u=GS([s,-a*Se(c),-a*xe(c)]),e.point(u[0],u[1])}}function KB(e,t){t=Cd(t),t[0]-=e,YS(t);var n=Vie(-t[1]);return((-t[2]<0?-n:n)+Qr-we)%Qr}function toe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Qn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Qw(e,t){return He(e[0]-t[0])<we&&He(e[1]-t[1])<we}function Rx(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function noe(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],v;if(Qw(m,y)){if(!m[2]&&!y[2]){for(i.lineStart(),a=0;a<g;++a)i.point((m=p[a])[0],m[1]);i.lineEnd();return}y[0]+=2*we}o.push(v=new Rx(m,p,null,!0)),s.push(v.o=new Rx(m,null,v,!1)),o.push(v=new Rx(y,p,null,!1)),s.push(v.o=new Rx(y,null,v,!0))}}),!!o.length){for(s.sort(t),QB(o),QB(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],c,f;;){for(var d=u,h=!0;d.v;)if((d=d.n)===u)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function QB(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function oT(e){return He(e[0])<=Le?e[0]:$o(e[0])*((He(e[0])+Le)%Qr-Le)}function qLe(e,t){var n=oT(t),r=t[1],i=xe(r),o=[xe(n),-Se(n),0],s=0,a=0,l=new Xr;i===1?r=Zt+we:i===-1&&(r=-Zt-we);for(var u=0,c=e.length;u<c;++u)if(d=(f=e[u]).length)for(var f,d,h=f[d-1],p=oT(h),g=h[1]/2+US,m=xe(g),y=Se(g),v=0;v<d;++v,p=x,m=k,y=S,h=b){var b=f[v],x=oT(b),w=b[1]/2+US,k=xe(w),S=Se(w),C=x-p,E=C>=0?1:-1,A=E*C,T=A>Le,I=m*k;if(l.add(zo(I*E*xe(A),y*S+I*Se(A))),s+=T?C+E*Qr:C,T^p>=n^x>=n){var F=Mg(Cd(h),Cd(b));YS(F);var R=Mg(o,F);YS(R);var _=(T^C>=0?-1:1)*ki(R[2]);(r>_||r===_&&(F[0]||F[1]))&&(a+=T^C>=0?1:-1)}}return(s<-we||s<we&&l<-BS)^a&1}function roe(e,t,n,r){return function(i){var o=t(i),s=toe(),a=t(s),l=!1,u,c,f,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],u=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=BZ(c);var x=qLe(u,r);c.length?(l||(i.polygonStart(),l=!0),noe(c,YLe,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(x,w){e(x,w)&&i.point(x,w)}function p(x,w){o.point(x,w)}function g(){d.point=p,o.lineStart()}function m(){d.point=h,o.lineEnd()}function y(x,w){f.push([x,w]),a.point(x,w)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),w=s.result(),k,S=w.length,C,E,A;if(f.pop(),u.push(f),f=null,!!S){if(x&1){if(E=w[0],(C=E.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),k=0;k<C;++k)i.point((A=E[k])[0],A[1]);i.lineEnd()}return}S>1&&x&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(GLe))}}return d}}function GLe(e){return e.length>1}function YLe(e,t){return((e=e.x)[0]<0?e[1]-Zt-we:Zt-e[1])-((t=t.x)[0]<0?t[1]-Zt-we:Zt-t[1])}const JB=roe(function(){return!0},XLe,QLe,[-Le,-Zt]);function XLe(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Le:-Le,l=He(o-t);He(l-Le)<we?(e.point(t,n=(n+s)/2>0?Zt:-Zt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=Le&&(He(t-r)<we&&(t-=r*we),He(o-a)<we&&(o-=a*we),n=KLe(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function KLe(e,t,n,r){var i,o,s=xe(e-n);return He(s)>we?Sm((xe(t)*(o=Se(r))*xe(n)-xe(r)*(i=Se(t))*xe(e))/(i*o*s)):(t+r)/2}function QLe(e,t,n,r){var i;if(e==null)i=n*Zt,r.point(-Le,i),r.point(0,i),r.point(Le,i),r.point(Le,0),r.point(Le,-i),r.point(0,-i),r.point(-Le,-i),r.point(-Le,0),r.point(-Le,i);else if(He(e[0]-t[0])>we){var o=e[0]<t[0]?Le:-Le;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function JLe(e){var t=Se(e),n=2*Ie,r=t>0,i=He(t)>we;function o(c,f,d,h){HLe(h,e,n,d,c,f)}function s(c,f){return Se(c)*Se(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var v=[m,y],b,x=s(m,y),w=r?x?0:u(m,y):x?u(m+(m<0?Le:-Le),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(b=l(f,v),(!b||Qw(f,b)||Qw(v,b))&&(v[2]=1)),x!==h)g=0,x?(c.lineStart(),b=l(v,f),c.point(b[0],b[1])):(b=l(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^x){var k;!(w&d)&&(k=l(v,f,!0))&&(g=0,r?(c.lineStart(),c.point(k[0][0],k[0][1]),c.point(k[1][0],k[1][1]),c.lineEnd()):(c.point(k[1][0],k[1][1]),c.lineEnd(),c.lineStart(),c.point(k[0][0],k[0][1],3)))}x&&(!f||!Qw(f,v))&&c.point(v[0],v[1]),f=v,h=x,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function l(c,f,d){var h=Cd(c),p=Cd(f),g=[1,0,0],m=Mg(h,p),y=Mx(m,m),v=m[0],b=y-v*v;if(!b)return!d&&c;var x=t*y/b,w=-t*v/b,k=Mg(g,m),S=Fx(g,x),C=Fx(m,w);iT(S,C);var E=k,A=Mx(S,E),T=Mx(E,E),I=A*A-T*(Mx(S,S)-1);if(!(I<0)){var F=Jr(I),R=Fx(E,(-A-F)/T);if(iT(R,S),R=GS(R),!d)return R;var _=c[0],P=f[0],N=c[1],D=f[1],L;P<_&&(L=_,_=P,P=L);var U=P-_,V=He(U-Le)<we,oe=V||U<we;if(!V&&D<N&&(L=N,N=D,D=L),oe?V?N+D>0^R[1]<(He(R[0]-_)<we?N:D):N<=R[1]&&R[1]<=D:U>Le^(_<=R[0]&&R[0]<=P)){var Q=Fx(E,(-A+F)/T);return iT(Q,S),[R,GS(Q)]}}}function u(c,f){var d=r?e:Le-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return roe(s,a,o,r?[0,-e]:[-Le,e-Le])}function ZLe(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],c=0,f=1,d=l-s,h=u-a,p;if(p=n-s,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=o-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var Z0=1e9,Ox=-Z0;function ioe(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function o(u,c,f,d){var h=0,p=0;if(u==null||(h=s(u,f))!==(p=s(c,f))||l(u,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function s(u,c){return He(u[0]-e)<we?c>0?0:3:He(u[0]-n)<we?c>0?2:1:He(u[1]-t)<we?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=s(u,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=toe(),d,h,p,g,m,y,v,b,x,w,k,S={point:C,lineStart:I,lineEnd:F,polygonStart:A,polygonEnd:T};function C(_,P){i(_,P)&&c.point(_,P)}function E(){for(var _=0,P=0,N=h.length;P<N;++P)for(var D=h[P],L=1,U=D.length,V=D[0],oe,Q,ye=V[0],Oe=V[1];L<U;++L)oe=ye,Q=Oe,V=D[L],ye=V[0],Oe=V[1],Q<=r?Oe>r&&(ye-oe)*(r-Q)>(Oe-Q)*(e-oe)&&++_:Oe<=r&&(ye-oe)*(r-Q)<(Oe-Q)*(e-oe)&&--_;return _}function A(){c=f,d=[],h=[],k=!0}function T(){var _=E(),P=k&&_,N=(d=BZ(d)).length;(P||N)&&(u.polygonStart(),P&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),N&&noe(d,a,_,o,u),u.polygonEnd()),c=u,d=h=p=null}function I(){S.point=R,h&&h.push(p=[]),w=!0,x=!1,v=b=NaN}function F(){d&&(R(g,m),y&&x&&f.rejoin(),d.push(f.result())),S.point=C,x&&c.lineEnd()}function R(_,P){var N=i(_,P);if(h&&p.push([_,P]),w)g=_,m=P,y=N,w=!1,N&&(c.lineStart(),c.point(_,P));else if(N&&x)c.point(_,P);else{var D=[v=Math.max(Ox,Math.min(Z0,v)),b=Math.max(Ox,Math.min(Z0,b))],L=[_=Math.max(Ox,Math.min(Z0,_)),P=Math.max(Ox,Math.min(Z0,P))];ZLe(D,L,e,t,n,r)?(x||(c.lineStart(),c.point(D[0],D[1])),c.point(L[0],L[1]),N||c.lineEnd(),k=!1):N&&(c.lineStart(),c.point(_,P),k=!1)}v=_,b=P,x=N}return S}}function ZB(e,t,n){var r=Bi(e,t-we,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function eU(e,t,n){var r=Bi(e,t-we,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function e8e(){var e,t,n,r,i,o,s,a,l=10,u=l,c=90,f=360,d,h,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Bi(Px(r/c)*c,n,c).map(p).concat(Bi(Px(a/f)*f,s,f).map(g)).concat(Bi(Px(t/l)*l,e,l).filter(function(b){return He(b%c)>we}).map(d)).concat(Bi(Px(o/u)*u,i,u).filter(function(b){return He(b%f)>we}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(s).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],s=+b[1][1],r>n&&(b=r,r=n,n=b),a>s&&(b=a,a=s,s=b),y.precision(m)):[[r,a],[n,s]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],o=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),o>i&&(b=o,o=i,i=b),y.precision(m)):[[t,o],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(l=+b[0],u=+b[1],y):[l,u]},y.precision=function(b){return arguments.length?(m=+b,d=ZB(o,i,90),h=eU(t,e,m),p=ZB(a,s,90),g=eU(r,n,m),y):m},y.extentMajor([[-180,-90+we],[180,90-we]]).extentMinor([[-180,-80-we],[180,80+we]])}const j1=e=>e;var sT=new Xr,XP=new Xr,ooe,soe,KP,QP,fl={point:Qn,lineStart:Qn,lineEnd:Qn,polygonStart:function(){fl.lineStart=t8e,fl.lineEnd=r8e},polygonEnd:function(){fl.lineStart=fl.lineEnd=fl.point=Qn,sT.add(He(XP)),XP=new Xr},result:function(){var e=sT/2;return sT=new Xr,e}};function t8e(){fl.point=n8e}function n8e(e,t){fl.point=aoe,ooe=KP=e,soe=QP=t}function aoe(e,t){XP.add(QP*e-KP*t),KP=e,QP=t}function r8e(){aoe(ooe,soe)}var Fg=1/0,nk=Fg,B1=-Fg,rk=B1,ik={point:i8e,lineStart:Qn,lineEnd:Qn,polygonStart:Qn,polygonEnd:Qn,result:function(){var e=[[Fg,nk],[B1,rk]];return B1=rk=-(nk=Fg=1/0),e}};function i8e(e,t){e<Fg&&(Fg=e),e>B1&&(B1=e),t<nk&&(nk=t),t>rk&&(rk=t)}var JP=0,ZP=0,ey=0,ok=0,sk=0,mp=0,eM=0,tM=0,ty=0,loe,uoe,ua,ca,So={point:Ed,lineStart:tU,lineEnd:nU,polygonStart:function(){So.lineStart=a8e,So.lineEnd=l8e},polygonEnd:function(){So.point=Ed,So.lineStart=tU,So.lineEnd=nU},result:function(){var e=ty?[eM/ty,tM/ty]:mp?[ok/mp,sk/mp]:ey?[JP/ey,ZP/ey]:[NaN,NaN];return JP=ZP=ey=ok=sk=mp=eM=tM=ty=0,e}};function Ed(e,t){JP+=e,ZP+=t,++ey}function tU(){So.point=o8e}function o8e(e,t){So.point=s8e,Ed(ua=e,ca=t)}function s8e(e,t){var n=e-ua,r=t-ca,i=Jr(n*n+r*r);ok+=i*(ua+e)/2,sk+=i*(ca+t)/2,mp+=i,Ed(ua=e,ca=t)}function nU(){So.point=Ed}function a8e(){So.point=u8e}function l8e(){coe(loe,uoe)}function u8e(e,t){So.point=coe,Ed(loe=ua=e,uoe=ca=t)}function coe(e,t){var n=e-ua,r=t-ca,i=Jr(n*n+r*r);ok+=i*(ua+e)/2,sk+=i*(ca+t)/2,mp+=i,i=ca*e-ua*t,eM+=i*(ua+e),tM+=i*(ca+t),ty+=i*3,Ed(ua=e,ca=t)}function foe(e){this._context=e}foe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Qr);break}}},result:Qn};var nM=new Xr,aT,doe,hoe,ny,ry,U1={point:Qn,lineStart:function(){U1.point=c8e},lineEnd:function(){aT&&poe(doe,hoe),U1.point=Qn},polygonStart:function(){aT=!0},polygonEnd:function(){aT=null},result:function(){var e=+nM;return nM=new Xr,e}};function c8e(e,t){U1.point=poe,doe=ny=e,hoe=ry=t}function poe(e,t){ny-=e,ry-=t,nM.add(Jr(ny*ny+ry*ry)),ny=e,ry=t}let rU,ak,iU,oU;class sU{constructor(t){this._append=t==null?goe:f8e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==iU||this._append!==ak){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,iU=r,ak=this._append,oU=this._,this._=i}this._+=oU;break}}}result(){const t=this._;return this._="",t.length?t:null}}function goe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function f8e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return goe;if(t!==rU){const n=10**t;rU=t,ak=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return ak}function moe(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),cl(a,i(o))),o.result()}return s.area=function(a){return cl(a,i(fl)),fl.result()},s.measure=function(a){return cl(a,i(U1)),U1.result()},s.bounds=function(a){return cl(a,i(ik)),ik.result()},s.centroid=function(a){return cl(a,i(So)),So.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,j1):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new sU(n)):new foe(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new sU(n)),s},s.projection(e).digits(n).context(t)}function IE(e){return function(t){var n=new rM;for(var r in e)n[r]=e[r];return n.stream=t,n}}function rM(){}rM.prototype={constructor:rM,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function $6(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),cl(n,e.stream(ik)),t(ik.result()),r!=null&&e.clipExtent(r),e}function LE(e,t,n){return $6(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function A6(e,t,n){return LE(e,[[0,0],t],n)}function T6(e,t,n){return $6(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function P6(e,t,n){return $6(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var aU=16,d8e=Se(30*Ie);function lU(e,t){return+t?p8e(e,t):h8e(e)}function h8e(e){return IE({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function p8e(e,t){function n(r,i,o,s,a,l,u,c,f,d,h,p,g,m){var y=u-r,v=c-i,b=y*y+v*v;if(b>4*t&&g--){var x=s+d,w=a+h,k=l+p,S=Jr(x*x+w*w+k*k),C=ki(k/=S),E=He(He(k)-1)<we||He(o-f)<we?(o+f)/2:zo(w,x),A=e(E,C),T=A[0],I=A[1],F=T-r,R=I-i,_=v*F-y*R;(_*_/b>t||He((y*F+v*R)/b-.5)>.3||s*d+a*h+l*p<d8e)&&(n(r,i,o,s,a,l,T,I,E,x/=S,w/=S,k,g,m),m.point(T,I),n(T,I,E,x,w,k,u,c,f,d,h,p,g,m))}}return function(r){var i,o,s,a,l,u,c,f,d,h,p,g,m={point:y,lineStart:v,lineEnd:x,polygonStart:function(){r.polygonStart(),m.lineStart=w},polygonEnd:function(){r.polygonEnd(),m.lineStart=v}};function y(C,E){C=e(C,E),r.point(C[0],C[1])}function v(){f=NaN,m.point=b,r.lineStart()}function b(C,E){var A=Cd([C,E]),T=e(C,E);n(f,d,c,h,p,g,f=T[0],d=T[1],c=C,h=A[0],p=A[1],g=A[2],aU,r),r.point(f,d)}function x(){m.point=y,r.lineEnd()}function w(){v(),m.point=k,m.lineEnd=S}function k(C,E){b(i=C,E),o=f,s=d,a=h,l=p,u=g,m.point=b}function S(){n(f,d,c,h,p,g,o,s,i,a,l,u,aU,r),m.lineEnd=x,x()}return m}}var g8e=IE({point:function(e,t){this.stream.point(e*Ie,t*Ie)}});function m8e(e){return IE({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function y8e(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function uU(e,t,n,r,i,o){if(!o)return y8e(e,t,n,r,i);var s=Se(o),a=xe(o),l=s*e,u=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function p(g,m){return g*=r,m*=i,[l*g-u*m+t,n-u*g-l*m]}return p.invert=function(g,m){return[r*(c*g-f*m+d),i*(h-f*g-c*m)]},p}function ja(e){return yoe(function(){return e})()}function yoe(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,c,f=0,d=1,h=1,p=null,g=JB,m=null,y,v,b,x=j1,w=.5,k,S,C,E,A;function T(_){return C(_[0]*Ie,_[1]*Ie)}function I(_){return _=C.invert(_[0],_[1]),_&&[_[0]*nn,_[1]*nn]}T.stream=function(_){return E&&A===_?E:E=g8e(m8e(c)(g(k(x(A=_)))))},T.preclip=function(_){return arguments.length?(g=_,p=void 0,R()):g},T.postclip=function(_){return arguments.length?(x=_,m=y=v=b=null,R()):x},T.clipAngle=function(_){return arguments.length?(g=+_?JLe(p=_*Ie):(p=null,JB),R()):p*nn},T.clipExtent=function(_){return arguments.length?(x=_==null?(m=y=v=b=null,j1):ioe(m=+_[0][0],y=+_[0][1],v=+_[1][0],b=+_[1][1]),R()):m==null?null:[[m,y],[v,b]]},T.scale=function(_){return arguments.length?(n=+_,F()):n},T.translate=function(_){return arguments.length?(r=+_[0],i=+_[1],F()):[r,i]},T.center=function(_){return arguments.length?(o=_[0]%360*Ie,s=_[1]%360*Ie,F()):[o*nn,s*nn]},T.rotate=function(_){return arguments.length?(a=_[0]%360*Ie,l=_[1]%360*Ie,u=_.length>2?_[2]%360*Ie:0,F()):[a*nn,l*nn,u*nn]},T.angle=function(_){return arguments.length?(f=_%360*Ie,F()):f*nn},T.reflectX=function(_){return arguments.length?(d=_?-1:1,F()):d<0},T.reflectY=function(_){return arguments.length?(h=_?-1:1,F()):h<0},T.precision=function(_){return arguments.length?(k=lU(S,w=_*_),R()):Jr(w)},T.fitExtent=function(_,P){return LE(T,_,P)},T.fitSize=function(_,P){return A6(T,_,P)},T.fitWidth=function(_,P){return T6(T,_,P)},T.fitHeight=function(_,P){return P6(T,_,P)};function F(){var _=uU(n,0,0,d,h,f).apply(null,t(o,s)),P=uU(n,r-_[0],i-_[1],d,h,f);return c=eoe(a,l,u),S=GP(t,P),C=GP(c,S),k=lU(S,w),R()}function R(){return E=A=null,T}return function(){return t=e.apply(this,arguments),T.invert=t.invert&&I,F()}}function M6(e){var t=0,n=Le/3,r=yoe(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ie,n=o[1]*Ie):[t*nn,n*nn]},i}function v8e(e){var t=Se(e);function n(r,i){return[r*t,xe(i)/t]}return n.invert=function(r,i){return[r/t,ki(i*t)]},n}function b8e(e,t){var n=xe(e),r=(n+xe(t))/2;if(He(r)<we)return v8e(e);var i=1+n*(2*r-n),o=Jr(i)/r;function s(a,l){var u=Jr(i-2*r*xe(l))/r;return[u*xe(a*=r),o-u*Se(a)]}return s.invert=function(a,l){var u=o-l,c=zo(a,He(u))*$o(u);return u*r<0&&(c-=Le*$o(a)*$o(u)),[c/r,ki((i-(a*a+u*u)*r*r)/(2*r))]},s}function lk(){return M6(b8e).scale(155.424).center([0,33.6442])}function voe(){return lk().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function x8e(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function w8e(){var e,t,n=voe(),r,i=lk().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=lk().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(d,h){l=[d,h]}};function c(d){var h=d[0],p=d[1];return l=null,r.point(h,p),l||(o.point(h,p),l)||(a.point(h,p),l)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=x8e([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(u),o=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+we,g+.12*h+we],[p-.214*h-we,g+.234*h-we]]).stream(u),a=s.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+we,g+.166*h+we],[p-.115*h-we,g+.234*h-we]]).stream(u),f()},c.fitExtent=function(d,h){return LE(c,d,h)},c.fitSize=function(d,h){return A6(c,d,h)},c.fitWidth=function(d,h){return T6(c,d,h)},c.fitHeight=function(d,h){return P6(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function boe(e){return function(t,n){var r=Se(t),i=Se(n),o=e(r*i);return o===1/0?[2,0]:[o*i*xe(t),o*xe(n)]}}function rb(e){return function(t,n){var r=Jr(t*t+n*n),i=e(r),o=xe(i),s=Se(i);return[zo(t*o,r*s),ki(r&&n*o/r)]}}var xoe=boe(function(e){return Jr(2/(1+e))});xoe.invert=rb(function(e){return 2*ki(e/2)});function S8e(){return ja(xoe).scale(124.75).clipAngle(180-.001)}var woe=boe(function(e){return(e=Vie(e))&&e/xe(e)});woe.invert=rb(function(e){return e});function k8e(){return ja(woe).scale(79.4188).clipAngle(180-.001)}function zE(e,t){return[e,VS(E6((Zt+t)/2))]}zE.invert=function(e,t){return[e,2*Sm(Uie(t))-Zt]};function C8e(){return Soe(zE).scale(961/Qr)}function Soe(e){var t=ja(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=l=u=null:(s=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):s==null?null:[[s,a],[l,u]]};function c(){var f=Le*r(),d=t(WLe(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===zE?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,l),u]]:[[s,Math.max(d[1]-f,a)],[l,Math.min(d[1]+f,u)]])}return c()}function Dx(e){return E6((Zt+e)/2)}function E8e(e,t){var n=Se(e),r=e===t?xe(e):VS(n/Se(t))/VS(Dx(t)/Dx(e)),i=n*rT(Dx(e),r)/r;if(!r)return zE;function o(s,a){i>0?a<-Zt+we&&(a=-Zt+we):a>Zt-we&&(a=Zt-we);var l=i/rT(Dx(a),r);return[l*xe(r*s),i-l*Se(r*s)]}return o.invert=function(s,a){var l=i-a,u=$o(r)*Jr(s*s+l*l),c=zo(s,He(l))*$o(l);return l*r<0&&(c-=Le*$o(s)*$o(l)),[c/r,2*Sm(rT(i/u,1/r))-Zt]},o}function _8e(){return M6(E8e).scale(109.5).parallels([30,30])}function uk(e,t){return[e,t]}uk.invert=uk;function $8e(){return ja(uk).scale(152.63)}function A8e(e,t){var n=Se(e),r=e===t?xe(e):(n-Se(t))/(t-e),i=n/r+e;if(He(r)<we)return uk;function o(s,a){var l=i-a,u=r*s;return[l*xe(u),i-l*Se(u)]}return o.invert=function(s,a){var l=i-a,u=zo(s,He(l))*$o(l);return l*r<0&&(u-=Le*$o(s)*$o(l)),[u/r,i-$o(r)*Jr(s*s+l*l)]},o}function T8e(){return M6(A8e).scale(131.154).center([0,13.9389])}var By=1.340264,Uy=-.081106,Vy=893e-6,Wy=.003796,ck=Jr(3)/2,P8e=12;function koe(e,t){var n=ki(ck*xe(t)),r=n*n,i=r*r*r;return[e*Se(n)/(ck*(By+3*Uy*r+i*(7*Vy+9*Wy*r))),n*(By+Uy*r+i*(Vy+Wy*r))]}koe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<P8e&&(a=n*(By+Uy*r+i*(Vy+Wy*r))-t,l=By+3*Uy*r+i*(7*Vy+9*Wy*r),n-=s=a/l,r=n*n,i=r*r*r,!(He(s)<BS));++o);return[ck*e*(By+3*Uy*r+i*(7*Vy+9*Wy*r))/Se(n),ki(xe(n)/ck)]};function M8e(){return ja(koe).scale(177.158)}function Coe(e,t){var n=Se(t),r=Se(e)*n;return[n*xe(e)/r,xe(t)/r]}Coe.invert=rb(Sm);function F8e(){return ja(Coe).scale(144.049).clipAngle(60)}function R8e(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,u,c,f,d=1,h=1,p=IE({point:function(x,w){var k=b([x,w]);this.stream.point(k[0],k[1])}}),g=j1,m,y;function v(){return d=e*r,h=e*i,m=y=null,b}function b(x){var w=x[0]*d,k=x[1]*h;if(o){var S=k*s-w*a;w=w*s+k*a,k=S}return[w+t,k+n]}return b.invert=function(x){var w=x[0]-t,k=x[1]-n;if(o){var S=k*s+w*a;w=w*s-k*a,k=S}return[w/d,k/h]},b.stream=function(x){return m&&y===x?m:m=p(g(y=x))},b.postclip=function(x){return arguments.length?(g=x,l=u=c=f=null,v()):g},b.clipExtent=function(x){return arguments.length?(g=x==null?(l=u=c=f=null,j1):ioe(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),v()):l==null?null:[[l,u],[c,f]]},b.scale=function(x){return arguments.length?(e=+x,v()):e},b.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],v()):[t,n]},b.angle=function(x){return arguments.length?(o=x%360*Ie,a=xe(o),s=Se(o),v()):o*nn},b.reflectX=function(x){return arguments.length?(r=x?-1:1,v()):r<0},b.reflectY=function(x){return arguments.length?(i=x?-1:1,v()):i<0},b.fitExtent=function(x,w){return LE(b,x,w)},b.fitSize=function(x,w){return A6(b,x,w)},b.fitWidth=function(x,w){return T6(b,x,w)},b.fitHeight=function(x,w){return P6(b,x,w)},b}function Eoe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Eoe.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(He(i)>we&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function O8e(){return ja(Eoe).scale(175.295)}function _oe(e,t){return[Se(t)*xe(e),xe(t)]}_oe.invert=rb(ki);function D8e(){return ja(_oe).scale(249.5).clipAngle(90+we)}function $oe(e,t){var n=Se(t),r=1+Se(e)*n;return[n*xe(e)/r,xe(t)/r]}$oe.invert=rb(function(e){return 2*Sm(e)});function N8e(){return ja($oe).scale(250).clipAngle(142)}function Aoe(e,t){return[VS(E6((Zt+t)/2)),-e]}Aoe.invert=function(e,t){return[-t,2*Sm(Uie(e))-Zt]};function I8e(){var e=Soe(Aoe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var L8e=Math.abs,iM=Math.cos,fk=Math.sin,z8e=1e-6,Toe=Math.PI,oM=Toe/2,cU=j8e(2);function fU(e){return e>1?oM:e<-1?-oM:Math.asin(e)}function j8e(e){return e>0?Math.sqrt(e):0}function B8e(e,t){var n=e*fk(t),r=30,i;do t-=i=(t+fk(t)-n)/(1+iM(t));while(L8e(i)>z8e&&--r>0);return t/2}function U8e(e,t,n){function r(i,o){return[e*i*iM(o=B8e(n,o)),t*fk(o)]}return r.invert=function(i,o){return o=fU(o/t),[i/(e*iM(o)),fU((2*o+fk(2*o))/n)]},r}var V8e=U8e(cU/oM,cU,Toe);function W8e(){return ja(V8e).scale(169.529)}const H8e=moe(),sM=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function q8e(e,t){return function n(){const r=t();return r.type=e,r.path=moe().projection(r),r.copy=r.copy||function(){const i=n();return sM.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},Wne(r)}}function F6(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(dk[e]=q8e(e,t),this):dk[e]||null}function Poe(e){return e&&e.path||H8e}const dk={albers:voe,albersusa:w8e,azimuthalequalarea:S8e,azimuthalequidistant:k8e,conicconformal:_8e,conicequalarea:lk,conicequidistant:T8e,equalEarth:M8e,equirectangular:$8e,gnomonic:F8e,identity:R8e,mercator:C8e,mollweide:W8e,naturalEarth1:O8e,orthographic:D8e,stereographic:N8e,transversemercator:I8e};for(const e in dk)F6(e,dk[e]);function G8e(){}const Ja=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Moe(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],f=[];return o(l,u,d=>{n(d,l,u),Y8e(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(X8e((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var f=[],d=[],h,p,g,m,y,v;for(h=p=-1,m=l[0]>=u,Ja[m<<1].forEach(b);++h<e-1;)g=m,m=l[h+1]>=u,Ja[g|m<<1].forEach(b);for(Ja[m<<0].forEach(b);++p<t-1;){for(h=-1,m=l[p*e+e]>=u,y=l[p*e]>=u,Ja[m<<1|y<<2].forEach(b);++h<e-1;)g=m,m=l[p*e+e+h+1]>=u,v=y,y=l[p*e+h+1]>=u,Ja[g|m<<1|y<<2|v<<3].forEach(b);Ja[m|y<<3].forEach(b)}for(h=-1,y=l[p*e]>=u,Ja[y<<2].forEach(b);++h<e-1;)v=y,y=l[p*e+h+1]>=u,Ja[y<<2|v<<3].forEach(b);Ja[y<<3].forEach(b);function b(x){var w=[x[0][0]+h,x[0][1]+p],k=[x[1][0]+h,x[1][1]+p],S=s(w),C=s(k),E,A;(E=d[S])?(A=f[C])?(delete d[E.end],delete f[A.start],E===A?(E.ring.push(k),c(E.ring)):f[E.start]=d[A.end]={start:E.start,end:A.end,ring:E.ring.concat(A.ring)}):(delete d[E.end],E.ring.push(k),d[E.end=C]=E):(E=f[C])?(A=d[S])?(delete f[E.start],delete d[A.end],E===A?(E.ring.push(k),c(E.ring)):f[A.start]=d[E.end]={start:A.start,end:E.end,ring:A.ring.concat(E.ring)}):(delete f[E.start],E.ring.unshift(w),f[E.start=S]=E):f[S]=d[C]={start:S,end:C,ring:[w,k]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,m,y=u[g*e+p];d>0&&d<e&&p===d&&(m=u[g*e+p-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&g===h&&(m=u[(g-1)*e+p],f[1]=h+(c-m)/(y-m)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||G("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:G8e,r):n===a},r}function Y8e(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function X8e(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=K8e(e,t[n]))return i;return 0}function K8e(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],u=l[0],c=l[1],f=e[a],d=f[0],h=f[1];if(Q8e(l,f,t))return 0;c>r!=h>r&&n<(d-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function Q8e(e,t,n){var r;return J8e(e,t,n)&&Z8e(e[r=+(e[0]===t[0])],n[r],t[r])}function J8e(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Z8e(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Foe(e,t,n){return function(r){var i=Aa(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?mc(o,s,e):a/(e+1);return Bi(o+l,s,l)}}function R6(e){H.call(this,null,e)}R6.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};re(R6,H,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ar,o=Moe().smooth(e.smooth!==!1),s=e.thresholds||e9e(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),f=o.size([c.width,c.height])(c.values,Y(s)?s:s(c.values));t9e(f,c,u,e),f.forEach(d=>{l.push(nE(u,at(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function e9e(e,t,n){const r=Foe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>rd(t(i).values)))}function t9e(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ne(i)&&(i=i(n,r)),Ne(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(Je(i)?i:i[0])||1,a=(Je(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(Roe(t,s,a,l,u))}function Roe(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(f){f.forEach(u)}function u(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(l),f}}function dU(e,t,n){const r=e>=0?e:CO(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function lT(e){return Ne(e)?e:Tr(+e)}function Ooe(){var e=l=>l[0],t=l=>l[1],n=cm,r=[-1,-1],i=960,o=500,s=2;function a(l,u){const c=dU(r[0],l,e)>>s,f=dU(r[1],l,t)>>s,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>s),g=2*h+(o>>s),m=new Float32Array(p*g),y=new Float32Array(p*g);let v=m;l.forEach(x=>{const w=d+(+e(x)>>s),k=h+(+t(x)>>s);w>=0&&w<p&&k>=0&&k<g&&(m[w+k*p]+=+n(x))}),c>0&&f>0?(Ah(p,g,m,y,c),Th(p,g,y,m,f),Ah(p,g,m,y,c),Th(p,g,y,m,f),Ah(p,g,m,y,c),Th(p,g,y,m,f)):c>0?(Ah(p,g,m,y,c),Ah(p,g,y,m,c),Ah(p,g,m,y,c),v=y):f>0&&(Th(p,g,m,y,f),Th(p,g,y,m,f),Th(p,g,m,y,f),v=y);const b=u?Math.pow(2,-2*s):1/UZ(v);for(let x=0,w=p*g;x<w;++x)v[x]*=b;return{values:v,scale:1<<s,width:p,height:g,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(l){return arguments.length?(e=lT(l),a):e},a.y=function(l){return arguments.length?(t=lT(l),a):t},a.weight=function(l){return arguments.length?(n=lT(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||G("invalid size"),i=u,o=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||G("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=le(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&G("invalid bandwidth"),r=l,a):r},a}function Ah(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function Th(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function O6(e){H.call(this,null,e)}O6.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const n9e=["x","y","weight","size","cellSize","bandwidth"];function Doe(e,t){return n9e.forEach(n=>t[n]!=null?e[n](t[n]):0),e}re(O6,H,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=r9e(r,e.groupby),o=(e.groupby||[]).map(tn),s=Doe(Ooe(),e),a=e.as||"grid",l=[];function u(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return l=i.map(c=>at(u({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function r9e(e,t){var n=[],r=c=>c(a),i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function D6(e){H.call(this,null,e)}D6.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};re(D6,H,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=Moe().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||Foe(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=Doe(Ooe(),e)(i,!0),l=Roe(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=Y(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(at),n}});const aM="Feature",N6="FeatureCollection",i9e="MultiPoint";function I6(e){H.call(this,null,e)}I6.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};re(I6,H,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&Ar,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(kr(a))||o&&t.modified(kr(o))||s&&t.modified(kr(s)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),o&&s&&(t.visit(l,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:aM,geometry:{type:i9e,coordinates:r}})),this.value={type:N6,features:n}}});function L6(e){H.call(this,null,e)}L6.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};re(L6,H,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ar,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=Poe(e.projection),n.materialize().reflow()):s=i===Ar||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=o9e(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function o9e(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function z6(e){H.call(this,null,e)}z6.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};re(z6,H,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function u(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function j6(e){H.call(this,null,e)}j6.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};re(j6,H,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=s9e(Poe(e.projection),e.field||Do("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function s9e(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function B6(e){H.call(this,[],e),this.generator=e8e()}B6.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};re(B6,H,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Ne(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(Iee(n[0],i)):t.add.push(at(i)),n[0]=i,t}});function U6(e){H.call(this,null,e)}U6.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};re(U6,H,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ar,o=l9e(e.opacity,e),s=a9e(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?rd(n.map(u=>rd(i(u).values))):0};return n.forEach(u=>{const c=i(u),f=De({},u,l);r||(f.$max=rd(c.values||[])),u[a]=u9e(c,f,s.dep?s:Tr(s(f)),o.dep?o:Tr(o(f)))}),t.reflow(!0).modifies(a)}});function a9e(e,t){let n;return Ne(e)?(n=r=>bc(e(r,t)),n.dep=Noe(e)):n=Tr(bc(e||"#888")),n}function l9e(e,t){let n;return Ne(e)?(n=r=>e(r,t),n.dep=Noe(e)):e?n=Tr(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function Noe(e){if(!Ne(e))return!1;const t=ks(kr(e));return t.$x||t.$y||t.$value||t.$max}function u9e(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||o,c=e.values,f=c?m=>c[m]:Au,d=sc(l-s,u-a),h=d.getContext("2d"),p=h.getImageData(0,0,l-s,u-a),g=p.data;for(let m=a,y=0;m<u;++m){t.$y=m-a;for(let v=s,b=m*i;v<l;++v,y+=4){t.$x=v-s,t.$value=f(v+b);const x=n(t);g[y+0]=x.r,g[y+1]=x.g,g[y+2]=x.b,g[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function Ioe(e){H.call(this,null,e),this.modified(!0)}re(Ioe,H,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=f9e(e.type),sM.forEach(r=>{e[r]!=null&&hU(n,r,e[r])})):sM.forEach(r=>{e.modified(r)&&hU(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&c9e(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function c9e(e,t){const n=d9e(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function f9e(e){const t=F6((e||"mercator").toLowerCase());return t||G("Unrecognized projection type: "+e),t()}function hU(e,t,n){Ne(e[t])&&e[t](n)}function d9e(e){return e=le(e),e.length===1?e[0]:{type:N6,features:e.reduce((t,n)=>t.concat(h9e(n)),[])}}function h9e(e){return e.type===N6?e.features:le(e).filter(t=>t!=null).map(t=>t.type===aM?t:{type:aM,geometry:t})}const p9e=Object.freeze(Object.defineProperty({__proto__:null,contour:D6,geojson:I6,geopath:L6,geopoint:z6,geoshape:j6,graticule:B6,heatmap:U6,isocontour:R6,kde2d:O6,projection:Ioe},Symbol.toStringTag,{value:"Module"}));function g9e(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-e)*r,u=(u/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function m9e(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Loe(this.cover(t,n),t,n,e)}function Loe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,f,d,h,p,g,m,y,v;if(!o)return e._root=s,e;for(;o.length;)if((g=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d,i=o,!(o=o[y=m<<1|g]))return i[y]=s,e;if(h=+e._x.call(null,o.data),p=+e._y.call(null,o.data),t===h&&n===p)return s.next=o,i?i[y]=s:e._root=s,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+u)/2))?a=f:u=f,(m=n>=(d=(l+c)/2))?l=d:c=d;while((y=m<<1|g)===(v=(p>=d)<<1|h>=f));return i[v]=o,i[y]=s,e}function y9e(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>f&&(f=o));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<r;++n)Loe(this,s[n],a[n],e[n]);return this}function v9e(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function b9e(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function x9e(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Vr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function w9e(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,u,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Vr(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(s=p.x0)>c||(a=p.y0)>f||(l=p.x1)<i||(u=p.y1)<o))if(h.length){var m=(s+l)/2,y=(a+u)/2;d.push(new Vr(h[3],m,y,l,u),new Vr(h[2],s,y,m,u),new Vr(h[1],m,a,l,y),new Vr(h[0],s,a,m,y)),(g=(t>=y)<<1|e>=m)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);i=e-w,o=t-w,c=e+w,f=t+w,r=h.data}}return r}function S9e(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,d,h,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(s+l)/2))?s=d:l=d,(g=f>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(r=t,y=m)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[m]=o:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function k9e(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function C9e(){return this._root}function E9e(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function _9e(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new Vr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(o+a)/2,c=(s+l)/2;(i=r[3])&&t.push(new Vr(i,u,c,a,l)),(i=r[2])&&t.push(new Vr(i,o,c,u,l)),(i=r[1])&&t.push(new Vr(i,u,s,a,c)),(i=r[0])&&t.push(new Vr(i,o,s,u,c))}return this}function $9e(e){var t=[],n=[],r;for(this._root&&t.push(new Vr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(s+l)/2,f=(a+u)/2;(o=i[0])&&t.push(new Vr(o,s,a,c,f)),(o=i[1])&&t.push(new Vr(o,c,a,l,f)),(o=i[2])&&t.push(new Vr(o,s,f,c,u)),(o=i[3])&&t.push(new Vr(o,c,f,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function A9e(e){return e[0]}function T9e(e){return arguments.length?(this._x=e,this):this._x}function P9e(e){return e[1]}function M9e(e){return arguments.length?(this._y=e,this):this._y}function V6(e,t,n){var r=new W6(t??A9e,n??P9e,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function W6(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function pU(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ni=V6.prototype=W6.prototype;ni.copy=function(){var e=new W6(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=pU(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=pU(r));return e};ni.add=m9e;ni.addAll=y9e;ni.cover=v9e;ni.data=b9e;ni.extent=x9e;ni.find=w9e;ni.remove=S9e;ni.removeAll=k9e;ni.root=C9e;ni.size=E9e;ni.visit=_9e;ni.visitAfter=$9e;ni.x=T9e;ni.y=M9e;function Hr(e){return function(){return e}}function Vu(e){return(e()-.5)*1e-6}function F9e(e){return e.x+e.vx}function R9e(e){return e.y+e.vy}function O9e(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=Hr(e==null?1:+e));function s(){for(var u,c=t.length,f,d,h,p,g,m,y=0;y<o;++y)for(f=V6(t,F9e,R9e).visitAfter(a),u=0;u<c;++u)d=t[u],g=n[d.index],m=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,x,w,k,S){var C=b.data,E=b.r,A=g+E;if(C){if(C.index>d.index){var T=h-C.x-C.vx,I=p-C.y-C.vy,F=T*T+I*I;F<A*A&&(T===0&&(T=Vu(r),F+=T*T),I===0&&(I=Vu(r),F+=I*I),F=(A-(F=Math.sqrt(F)))/F*i,d.vx+=(T*=F)*(A=(E*=E)/(m+E)),d.vy+=(I*=F)*A,C.vx-=T*(A=1-A),C.vy-=I*A)}return}return x>h+A||k<h-A||w>p+A||S<p-A}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,f;for(n=new Array(c),u=0;u<c;++u)f=t[u],n[f.index]=+e(f,u,t)}}return s.initialize=function(u,c){t=u,r=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(i=+u,s):i},s.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Hr(+u),l(),s):e},s}function D9e(e){return e.index}function gU(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function N9e(e){var t=D9e,n=f,r,i=Hr(30),o,s,a,l,u,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,v=e.length;y<c;++y)for(var b=0,x,w,k,S,C,E,A;b<v;++b)x=e[b],w=x.source,k=x.target,S=k.x+k.vx-w.x-w.vx||Vu(u),C=k.y+k.vy-w.y-w.vy||Vu(u),E=Math.sqrt(S*S+C*C),E=(E-o[b])/E*m*r[b],S*=E,C*=E,k.vx-=S*(A=l[b]),k.vy-=C*A,w.vx+=S*(A=1-A),w.vy+=C*A}function h(){if(s){var m,y=s.length,v=e.length,b=new Map(s.map((w,k)=>[t(w,k,s),w])),x;for(m=0,a=new Array(y);m<v;++m)x=e[m],x.index=m,typeof x.source!="object"&&(x.source=gU(b,x.source)),typeof x.target!="object"&&(x.target=gU(b,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(m=0,l=new Array(v);m<v;++m)x=e[m],l[m]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);r=new Array(v),p(),o=new Array(v),g()}}function p(){if(s)for(var m=0,y=e.length;m<y;++m)r[m]=+n(e[m],m,e)}function g(){if(s)for(var m=0,y=e.length;m<y;++m)o[m]=+i(e[m],m,e)}return d.initialize=function(m,y){s=m,u=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Hr(+m),p(),d):n},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Hr(+m),g(),d):i},d}var I9e={value:()=>{}};function zoe(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Jw(n)}function Jw(e){this._=e}function L9e(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Jw.prototype=zoe.prototype={constructor:Jw,on:function(e,t){var n=this._,r=L9e(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=z9e(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=mU(n[i],e.name,t);else if(t==null)for(i in n)n[i]=mU(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Jw(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function z9e(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function mU(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=I9e,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Rg=0,iy=0,d0=0,joe=1e3,hk,oy,pk=0,_d=0,jE=0,V1=typeof performance=="object"&&performance.now?performance:Date,Boe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function H6(){return _d||(Boe(j9e),_d=V1.now()+jE)}function j9e(){_d=0}function gk(){this._call=this._time=this._next=null}gk.prototype=Uoe.prototype={constructor:gk,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?H6():+n)+(t==null?0:+t),!this._next&&oy!==this&&(oy?oy._next=this:hk=this,oy=this),this._call=e,this._time=n,lM()},stop:function(){this._call&&(this._call=null,this._time=1/0,lM())}};function Uoe(e,t,n){var r=new gk;return r.restart(e,t,n),r}function B9e(){H6(),++Rg;for(var e=hk,t;e;)(t=_d-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Rg}function yU(){_d=(pk=V1.now())+jE,Rg=iy=0;try{B9e()}finally{Rg=0,V9e(),_d=0}}function U9e(){var e=V1.now(),t=e-pk;t>joe&&(jE-=t,pk=e)}function V9e(){for(var e,t=hk,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:hk=n);oy=e,lM(r)}function lM(e){if(!Rg){iy&&(iy=clearTimeout(iy));var t=e-_d;t>24?(e<1/0&&(iy=setTimeout(yU,e-V1.now()-jE)),d0&&(d0=clearInterval(d0))):(d0||(pk=V1.now(),d0=setInterval(U9e,joe)),Rg=1,Boe(yU))}}function W9e(e,t,n){var r=new gk,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?H6():+a,r._restart(function l(u){u+=i,r._restart(l,i+=s,a),o(u)},s,a)},r.restart(e,t,n),r)}const H9e=1664525,q9e=1013904223,vU=4294967296;function G9e(){let e=1;return()=>(e=(H9e*e+q9e)%vU)/vU}function Y9e(e){return e.x}function X9e(e){return e.y}var K9e=10,Q9e=Math.PI*(3-Math.sqrt(5));function J9e(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=Uoe(f),u=zoe("tick","end"),c=G9e();e==null&&(e=[]);function f(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(g){var m,y=e.length,v;g===void 0&&(g=1);for(var b=0;b<g;++b)for(n+=(o-n)*i,a.forEach(function(x){x(n)}),m=0;m<y;++m)v=e[m],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return t}function h(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=K9e*Math.sqrt(.5+g),b=g*Q9e;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return l.restart(f),t},stop:function(){return l.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(o=+g,t):o},velocityDecay:function(g){return arguments.length?(s=1-g,t):1-s},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,p(m)),t):a.get(g)},find:function(g,m,y){var v=0,b=e.length,x,w,k,S,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],x=g-S.x,w=m-S.y,k=x*x+w*w,k<y&&(C=S,y=k);return C},on:function(g,m){return arguments.length>1?(u.on(g,m),t):u.on(g)}}}function Z9e(){var e,t,n,r,i=Hr(-30),o,s=1,a=1/0,l=.81;function u(h){var p,g=e.length,m=V6(e,Y9e,X9e).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],m.visit(d)}function c(){if(e){var h,p=e.length,g;for(o=new Array(p),h=0;h<p;++h)g=e[h],o[g.index]=+i(g,h,e)}}function f(h){var p=0,g,m,y=0,v,b,x;if(h.length){for(v=b=x=0;x<4;++x)(g=h[x])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,v+=m*g.x,b+=m*g.y);h.x=v/y,h.y=b/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=o[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,m){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=m-p,x=y*y+v*v;if(b*b/l<x)return x<a&&(y===0&&(y=Vu(n),x+=y*y),v===0&&(v=Vu(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)),t.vx+=y*h.value*r/x,t.vy+=v*h.value*r/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Vu(n),x+=y*y),v===0&&(v=Vu(n),x+=v*v),x<s&&(x=Math.sqrt(s*x)));do h.data!==t&&(b=o[h.data.index]*r/x,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Hr(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(s=h*h,u):Math.sqrt(s)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function eze(e){var t=Hr(.1),n,r,i;typeof e!="function"&&(e=Hr(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Hr(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Hr(+a),s(),o):e},o}function tze(e){var t=Hr(.1),n,r,i;typeof e!="function"&&(e=Hr(e==null?0:+e));function o(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Hr(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Hr(+a),s(),o):e},o}const bU={center:g9e,collide:O9e,nbody:Z9e,link:N9e,x:eze,y:tze},sy="forces",uM=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],nze=["static","iterations"],Voe=["x","y","vx","vy"];function q6(e){H.call(this,null,e)}q6.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Voe}]};re(q6,H,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(uM),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Woe(n,e,0,t)):(this.value=n=ize(t.source,e),n.on("tick",rze(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(nze)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==sy||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Voe)}});function rze(e,t){return()=>e.touch(t).run()}function ize(e,t){const n=J9e(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),Woe(n,t,!0).on("end",()=>o=!0)}function Woe(e,t,n,r){var i=le(t.forces),o,s,a,l;for(o=0,s=uM.length;o<s;++o)a=uM[o],a!==sy&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=sy+o,a=n||t.modified(sy,o)?sze(i[o]):r&&oze(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(sy+o,null);return e.numForces=i.length,e}function oze(e,t){var n,r;for(n in e)if(Ne(r=e[n])&&t.modified(kr(r)))return 1;return 0}function sze(e){var t,n;fe(bU,e.force)||G("Unrecognized force: "+e.force),t=bU[e.force]();for(n in e)Ne(t[n])&&aze(t[n],e[n],e);return t}function aze(e,t,n){e(Ne(t)?r=>t(r,n):t)}const lze=Object.freeze(Object.defineProperty({__proto__:null,force:q6},Symbol.toStringTag,{value:"Module"}));function uze(e,t){return e.parent===t.parent?1:2}function cze(e){return e.reduce(fze,0)/e.length}function fze(e,t){return e+t.x}function dze(e){return 1+e.reduce(hze,0)}function hze(e,t){return Math.max(e,t.y)}function pze(e){for(var t;t=e.children;)e=t[0];return e}function gze(e){for(var t;t=e.children;)e=t[t.length-1];return e}function mze(){var e=uze,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=cze(h),d.y=dze(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var l=pze(o),u=gze(o),c=l.x-e(l,u)/2,f=u.x+e(u,l)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function yze(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function vze(){return this.eachAfter(yze)}function bze(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function xze(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function wze(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Sze(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function kze(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Cze(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Eze(e){for(var t=this,n=_ze(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function _ze(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function $ze(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Aze(){return Array.from(this)}function Tze(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Pze(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Mze(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function G6(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Oze)):t===void 0&&(t=Rze);for(var n=new Og(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new Og(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Hoe)}function Fze(){return G6(this).eachBefore(Dze)}function Rze(e){return e.children}function Oze(e){return Array.isArray(e)?e[1]:null}function Dze(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Hoe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Og(e){this.data=e,this.depth=this.height=0,this.parent=null}Og.prototype=G6.prototype={constructor:Og,count:vze,each:bze,eachAfter:wze,eachBefore:xze,find:Sze,sum:kze,sort:Cze,path:Eze,ancestors:$ze,descendants:Aze,leaves:Tze,links:Pze,copy:Fze,[Symbol.iterator]:Mze};function Zw(e){return e==null?null:qoe(e)}function qoe(e){if(typeof e!="function")throw new Error;return e}function Tf(){return 0}function Uh(e){return function(){return e}}const Nze=1664525,Ize=1013904223,xU=4294967296;function Lze(){let e=1;return()=>(e=(Nze*e+Ize)%xU)/xU}function zze(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jze(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Bze(e,t){for(var n=0,r=(e=jze(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&Goe(s,o)?++n:(s=Vze(i=Uze(i,o)),n=0);return s}function Uze(e,t){var n,r;if(uT(t,e))return[t];for(n=0;n<e.length;++n)if(Nx(t,e[n])&&uT(ay(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Nx(ay(e[n],e[r]),t)&&Nx(ay(e[n],t),e[r])&&Nx(ay(e[r],t),e[n])&&uT(Yoe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Nx(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Goe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function uT(e,t){for(var n=0;n<t.length;++n)if(!Goe(e,t[n]))return!1;return!0}function Vze(e){switch(e.length){case 1:return Wze(e[0]);case 2:return ay(e[0],e[1]);case 3:return Yoe(e[0],e[1],e[2])}}function Wze(e){return{x:e.x,y:e.y,r:e.r}}function ay(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,u=s-r,c=a-i,f=Math.sqrt(l*l+u*u);return{x:(n+o+l/f*c)/2,y:(r+s+u/f*c)/2,r:(f+i+a)/2}}function Yoe(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-s,h=r-u,p=i-a,g=i-c,m=l-o,y=f-o,v=r*r+i*i-o*o,b=v-s*s-a*a+l*l,x=v-u*u-c*c+f*f,w=h*p-d*g,k=(p*x-g*b)/(w*2)-r,S=(g*m-p*y)/w,C=(h*b-d*x)/(w*2)-i,E=(d*y-h*m)/w,A=S*S+E*E-1,T=2*(o+k*S+C*E),I=k*k+C*C-o*o,F=-(Math.abs(A)>1e-6?(T+Math.sqrt(T*T-4*A*I))/(2*A):I/T);return{x:r+k+S*F,y:i+C+E*F,r:F}}function wU(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,u=r*r+s*s;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(u+o-l)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function SU(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function kU(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function Ix(e){this._=e,this.next=null,this.previous=null}function Hze(e,t){if(!(o=(e=zze(e)).length))return 0;var n,r,i,o,s,a,l,u,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;wU(r,n,i=e[2]),n=new Ix(n),r=new Ix(r),i=new Ix(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){wU(n._,r._,i=e[l]),i=new Ix(i),u=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(SU(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}f+=u._.r,u=u.next}else{if(SU(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}d+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=kU(n);(i=i.next)!==r;)(a=kU(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Bze(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function qze(e){return Math.sqrt(e.value)}function Gze(){var e=null,t=1,n=1,r=Tf;function i(o){const s=Lze();return o.x=t/2,o.y=n/2,e?o.eachBefore(CU(e)).eachAfter(cT(r,.5,s)).eachBefore(EU(1)):o.eachBefore(CU(qze)).eachAfter(cT(Tf,1,s)).eachAfter(cT(r,o.r/Math.min(t,n),s)).eachBefore(EU(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=Zw(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Uh(+o),i):r},i}function CU(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function cT(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=Hze(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function EU(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Xoe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function ib(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*u}function Yze(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(Xoe),s}function o(s,a){return function(l){l.children&&ib(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var u=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<u&&(u=f=(u+f)/2),d<c&&(c=d=(c+d)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var Xze={depth:-1},_U={},fT={};function Kze(e){return e.id}function Qze(e){return e.parentId}function $U(){var e=Kze,t=Qze,n;function r(i){var o=Array.from(i),s=e,a=t,l,u,c,f,d,h,p,g,m=new Map;if(n!=null){const y=o.map((x,w)=>Jze(n(x,w,i))),v=y.map(AU),b=new Set(y).add("");for(const x of v)b.has(x)||(b.add(x),y.push(x),v.push(AU(x)),o.push(fT));s=(x,w)=>y[w],a=(x,w)=>v[w]}for(c=0,l=o.length;c<l;++c)u=o[c],h=o[c]=new Og(u),(p=s(u,c,i))!=null&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?_U:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=o[c],p=h.parent){if(d=m.get(p),!d)throw new Error("missing: "+p);if(d===_U)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===fT&&f.children.length===1;)f=f.children[0],--l;for(let y=o.length-1;y>=0&&(h=o[y],h.data===fT);--y)h.data=null}if(f.parent=Xze,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(Hoe),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=Zw(i),r):e},r.parentId=function(i){return arguments.length?(t=Zw(i),r):t},r.path=function(i){return arguments.length?(n=Zw(i),r):n},r}function Jze(e){e=`${e}`;let t=e.length;return cM(e,t-1)&&!cM(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function AU(e){let t=e.length;if(t<2)return"";for(;--t>1&&!cM(e,t););return e.slice(0,t)}function cM(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Zze(e,t){return e.parent===t.parent?1:2}function dT(e){var t=e.children;return t?t[0]:e.t}function hT(e){var t=e.children;return t?t[t.length-1]:e.t}function e7e(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function t7e(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function n7e(e,t,n){return e.a.parent===t.parent?e.a:n}function e2(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}e2.prototype=Object.create(Og.prototype);function r7e(e){for(var t=new e2(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new e2(o[s],s)),i.parent=n;return(t.parent=new e2(null,0)).children=[t],t}function i7e(){var e=Zze,t=1,n=1,r=null;function i(u){var c=r7e(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)u.eachBefore(l);else{var f=u,d=u,h=u;u.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,g=p-f.x,m=t/(d.x+p+g),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+g)*m,v.y=v.depth*y})}return u}function o(u){var c=u.children,f=u.parent.children,d=u.i?f[u.i-1]:null;if(c){t7e(u);var h=(c[0].z+c[c.length-1].z)/2;d?(u.z=d.z+e(u._,d._),u.m=u.z-h):u.z=h}else d&&(u.z=d.z+e(u._,d._));u.parent.A=a(u,d,u.parent.A||f[0])}function s(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var d=u,h=u,p=c,g=d.parent.children[0],m=d.m,y=h.m,v=p.m,b=g.m,x;p=hT(p),d=dT(d),p&&d;)g=dT(g),h=hT(h),h.a=u,x=p.z+v-d.z-m+e(p._,d._),x>0&&(e7e(n7e(p,u,f),u,x),m+=x,y+=x),v+=p.m,m+=d.m,b+=g.m,y+=h.m;p&&!hT(h)&&(h.t=p,h.m+=v-y),d&&!dT(g)&&(g.t=d,g.m+=m-b,f=u)}return f}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function BE(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,u=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*u}var Koe=(1+Math.sqrt(5))/2;function Qoe(e,t,n,r,i,o){for(var s=[],a=t.children,l,u,c=0,f=0,d=a.length,h,p,g=t.value,m,y,v,b,x,w,k;c<d;){h=i-n,p=o-r;do m=a[f++].value;while(!m&&f<d);for(y=v=m,w=Math.max(p/h,h/p)/(g*e),k=m*m*w,x=Math.max(v/k,k/y);f<d;++f){if(m+=u=a[f].value,u<y&&(y=u),u>v&&(v=u),k=m*m*w,b=Math.max(v/k,k/y),b>x){m-=u;break}x=b}s.push(l={value:m,dice:h<p,children:a.slice(c,f)}),l.dice?ib(l,n,r,i,g?r+=p*m/g:o):BE(l,n,r,g?n+=h*m/g:i,o),g-=m,c=f}return s}const Joe=function e(t){function n(r,i,o,s,a){Qoe(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Koe);function o7e(){var e=Joe,t=!1,n=1,r=1,i=[0],o=Tf,s=Tf,a=Tf,l=Tf,u=Tf;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(Xoe),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,m=d.x1-h,y=d.y1-h;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(h=i[d.depth+1]=o(d)/2,p+=u(d)-h,g+=s(d)-h,m-=a(d)-h,y-=l(d)-h,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=qoe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:Uh(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:Uh(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Uh(+d),c):a},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:Uh(+d),c):l},c.paddingLeft=function(d){return arguments.length?(u=typeof d=="function"?d:Uh(+d),c):u},c}function s7e(e,t,n,r,i){var o=e.children,s,a=o.length,l,u=new Array(a+1);for(u[0]=l=s=0;s<a;++s)u[s+1]=l+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,g,m,y){if(f>=d-1){var v=o[f];v.x0=p,v.y0=g,v.x1=m,v.y1=y;return}for(var b=u[f],x=h/2+b,w=f+1,k=d-1;w<k;){var S=w+k>>>1;u[S]<x?w=S+1:k=S}x-u[w-1]<u[w]-x&&f+1<w&&--w;var C=u[w]-b,E=h-C;if(m-p>y-g){var A=h?(p*E+m*C)/h:m;c(f,w,C,p,g,A,y),c(w,d,E,A,g,m,y)}else{var T=h?(g*E+y*C)/h:y;c(f,w,C,p,g,m,T),c(w,d,E,p,T,m,y)}}}function a7e(e,t,n,r,i){(e.depth&1?BE:ib)(e,t,n,r,i)}const l7e=function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,f,d=-1,h,p=l.length,g=r.value;++d<p;){for(u=l[d],c=u.children,f=u.value=0,h=c.length;f<h;++f)u.value+=c[f].value;u.dice?ib(u,i,o,s,g?o+=(a-o)*u.value/g:a):BE(u,i,o,g?i+=(s-i)*u.value/g:s,a),g-=u.value}else r._squarify=l=Qoe(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Koe);function fM(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function Y6(e){H.call(this,null,e)}Y6.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const u7e=e=>e.values;re(Y6,H,{transform(e,t){t.source||G("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&tE(s.data)&&i.rem.push(s.data)}),this.value=o=G6({values:le(e.keys).reduce((s,a)=>(s.key(a),s),c7e()).entries(i.source)},u7e),n&&o.each(s=>{s.children&&(s=at(s.data),i.add.push(s),i.source.push(s))}),fM(o,be,be)),i.source.root=o,i}});function c7e(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},u={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=l[f])?h.push(d):l[f]=[d];for(f in l)u[f]=n(l[f],o);return u}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function Kl(e){H.call(this,null,e)}const f7e=(e,t)=>e.parent===t.parent?1:2;re(Kl,H,{transform(e,t){(!t.source||!t.source.root)&&G(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Zd(e.sort,s=>s.data)),d7e(n,this.params,e),n.separation&&n.separation(e.separation!==!1?f7e:cm);try{this.value=n(i)}catch(s){G(s)}return i.each(s=>h7e(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function d7e(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function h7e(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const dM=["x","y","r","depth","children"];function X6(e){Kl.call(this,e)}X6.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:dM.length,default:dM}]};re(X6,Kl,{layout:Gze,params:["radius","size","padding"],fields:dM});const hM=["x0","y0","x1","y1","depth","children"];function K6(e){Kl.call(this,e)}K6.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:hM.length,default:hM}]};re(K6,Kl,{layout:Yze,params:["size","round","padding"],fields:hM});function Q6(e){H.call(this,null,e)}Q6.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};re(Q6,H,{transform(e,t){t.source||G("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?fM($U().id(e.key).parentId(e.parentKey)(i.source),e.key,No):fM($U()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const TU={tidy:i7e,cluster:mze},pM=["x","y","depth","children"];function J6(e){Kl.call(this,e)}J6.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:pM.length,default:pM}]};re(J6,Kl,{layout(e){const t=e||"tidy";if(fe(TU,t))return TU[t]();G("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:pM});function Z6(e){H.call(this,[],e)}Z6.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};re(Z6,H,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||G("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[be(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[be(a)]&&o[be(l)]&&i.add.push(at({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[be(s)]=1),n.forEach(s=>{(o[be(s.source)]||o[be(s.target)])&&i.mod.push(s)})),i}});const PU={binary:s7e,dice:ib,slice:BE,slicedice:a7e,squarify:Joe,resquarify:l7e},gM=["x0","y0","x1","y1","depth","children"];function eN(e){Kl.call(this,e)}eN.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:gM.length,default:gM}]};re(eN,Kl,{layout(){const e=o7e();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{fe(PU,t)?e.tile(PU[t]):G("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:gM});const p7e=Object.freeze(Object.defineProperty({__proto__:null,nest:Y6,pack:X6,partition:K6,stratify:Q6,tree:J6,treelinks:Z6,treemap:eN},Symbol.toStringTag,{value:"Module"})),pT=4278190080;function g7e(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function m7e(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=sc(o,s).getContext("2d"),u=sc(o,s).getContext("2d"),c=a&&sc(o,s).getContext("2d");n.forEach(C=>t2(l,C,!1)),t2(u,t,!1),a&&t2(c,t,!0);const f=gT(l,o,s),d=gT(u,o,s),h=a&&gT(c,o,s),p=e.bitmap(),g=a&&e.bitmap();let m,y,v,b,x,w,k,S;for(y=0;y<s;++y)for(m=0;m<o;++m)x=y*o+m,w=f[x]&pT,S=d[x]&pT,k=a&&h[x]&pT,(w||k||S)&&(v=e(m),b=e(y),!i&&(w||S)&&p.set(v,b),a&&(w||k)&&g.set(v,b));return[p,g]}function gT(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function t2(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>t2(e,o.items,n))}):eo[r].draw(e,{items:n?t.map(y7e):t})}function y7e(e){const t=nE(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Za=5,Mr=31,W1=32,Su=new Uint32Array(W1+1),ss=new Uint32Array(W1+1);ss[0]=0;Su[0]=~ss[0];for(let e=1;e<=W1;++e)ss[e]=ss[e-1]<<1|1,Su[e]=~ss[e];function v7e(e,t){const n=new Uint32Array(~~((e*t+W1)/W1));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>Za]&1<<(a&Mr)},set:(o,s)=>{const a=s*e+o;r(a>>>Za,1<<(a&Mr))},clear:(o,s)=>{const a=s*e+o;i(a>>>Za,~(1<<(a&Mr)))},getRange:(o,s,a,l)=>{let u=l,c,f,d,h;for(;u>=s;--u)if(c=u*e+o,f=u*e+a,d=c>>>Za,h=f>>>Za,d===h){if(n[d]&Su[c&Mr]&ss[(f&Mr)+1])return!0}else{if(n[d]&Su[c&Mr]||n[h]&ss[(f&Mr)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Za,d=c>>>Za,f===d)r(f,Su[u&Mr]&ss[(c&Mr)+1]);else for(r(f,Su[u&Mr]),r(d,ss[(c&Mr)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,l)=>{let u,c,f,d,h;for(;s<=l;++s)if(u=s*e+o,c=s*e+a,f=u>>>Za,d=c>>>Za,f===d)i(f,ss[u&Mr]|Su[(c&Mr)+1]);else for(i(f,ss[u&Mr]),i(d,Su[(c&Mr)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function b7e(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>v7e(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function x7e(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,u=s.datum.fontSize,c=Gi.width(s.datum,s.datum.text);let f=0,d,h,p,g,m,y,v;for(let b=0;b<l;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,g=a[b].y2===void 0?p:a[b].y2,m=(d+h)/2,y=(p+g)/2,v=Math.abs(h-d+g-p),v>=f&&(f=v,s.x=m,s.y=y);return m=c/2,y=u/2,d=s.x-m,h=s.x+m,p=s.y-y,g=s.y+y,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",p<0&&g<=o?s.baseline="top":0<=p&&o<g&&(s.baseline="bottom"),!0}}function mk(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Wu(e,t,n,r,i,o,s,a){const l=i*o/(r*2),u=e(t-l),c=e(t+l),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(u,f,c,d)||s.getRange(u,f,c,d)||a&&a.getRange(u,f,c,d)}function w7e(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(u,c,f,d,h){const p=e.invert(u),g=e.invert(c);let m=f,y=o,v;if(!mk(p,g,d,h,i,o)&&!Wu(e,p,g,h,d,m,s,a)&&!Wu(e,p,g,h,d,h,s,null)){for(;y-m>=1;)v=(m+y)/2,Wu(e,p,g,h,d,v,s,a)?y=v:m=v;if(m>f)return[p,g,m,!0]}}return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Gi.width(u.datum,u.datum.text);let p=n?d:0,g=!1,m=!1,y=0,v,b,x,w,k,S,C,E,A,T,I,F,R,_,P,N,D;for(let L=0;L<f;++L){for(v=c[L].x,x=c[L].y,b=c[L].x2===void 0?v:c[L].x2,w=c[L].y2===void 0?x:c[L].y2,v>b&&(D=v,v=b,b=D),x>w&&(D=x,x=w,w=D),A=e(v),I=e(b),T=~~((A+I)/2),F=e(x),_=e(w),R=~~((F+_)/2),C=T;C>=A;--C)for(E=R;E>=F;--E)N=l(C,E,p,h,d),N&&([u.x,u.y,p,g]=N);for(C=T;C<=I;++C)for(E=R;E<=_;++E)N=l(C,E,p,h,d),N&&([u.x,u.y,p,g]=N);!g&&!n&&(P=Math.abs(b-v+w-x),k=(v+b)/2,S=(x+w)/2,P>=y&&!mk(k,S,h,d,i,o)&&!Wu(e,k,S,d,h,d,s,null)&&(y=P,u.x=k,u.y=S,m=!0))}return g||m?(k=h/2,S=d/2,s.setRange(e(u.x-k),e(u.y-S),e(u.x+k),e(u.y+S)),u.align="center",u.baseline="middle",!0):!1}}const S7e=[-1,-1,1,1],k7e=[-1,1,-1,1];function C7e(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,f=c.length,d=u.datum.fontSize,h=Gi.width(u.datum,u.datum.text),p=[];let g=n?d:0,m=!1,y=!1,v=0,b,x,w,k,S,C,E,A,T,I,F,R;for(let _=0;_<f;++_){for(b=c[_].x,w=c[_].y,x=c[_].x2===void 0?b:c[_].x2,k=c[_].y2===void 0?w:c[_].y2,p.push([e((b+x)/2),e((w+k)/2)]);p.length;)if([E,A]=p.pop(),!(s.get(E,A)||a.get(E,A)||l.get(E,A))){l.set(E,A);for(let P=0;P<4;++P)S=E+S7e[P],C=A+k7e[P],l.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(E),C=e.invert(A),T=g,I=o,!mk(S,C,h,d,i,o)&&!Wu(e,S,C,d,h,T,s,a)&&!Wu(e,S,C,d,h,d,s,null)){for(;I-T>=1;)F=(T+I)/2,Wu(e,S,C,d,h,F,s,a)?I=F:T=F;T>g&&(u.x=S,u.y=C,g=T,m=!0)}}!m&&!n&&(R=Math.abs(x-b+k-w),S=(b+x)/2,C=(w+k)/2,R>=v&&!mk(S,C,h,d,i,o)&&!Wu(e,S,C,d,h,d,s,null)&&(v=R,u.x=S,u.y=C,y=!0))}return m||y?(S=h/2,C=d/2,s.setRange(e(u.x-S),e(u.y-C),e(u.x+S),e(u.y+C)),u.align="center",u.baseline="middle",!0):!1}}const E7e=["right","center","left"],_7e=["bottom","middle","top"];function $7e(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,f=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=u.textWidth??0,h,p,g,m,y,v,b,x,w,k,S,C,E,A,T;for(let I=0;I<l;++I){if(h=(n[I]&3)-1,p=(n[I]>>>2&3)-1,g=h===0&&p===0||r[I]<0,m=h&&p?Math.SQRT1_2:1,y=r[I]<0?-1:1,v=c[1+h]+r[I]*h*m,S=c[4+p]+y*f*p/2+r[I]*p*m,x=S-f/2,w=S+f/2,C=e(v),A=e(x),T=e(w),!d)if(MU(C,C,A,T,s,a,v,v,x,w,c,g))d=Gi.width(u.datum,u.datum.text);else continue;if(k=v+y*d*h/2,v=k-d/2,b=k+d/2,C=e(v),E=e(b),MU(C,E,A,T,s,a,v,b,x,w,c,g))return u.x=h?h*y<0?b:v:k,u.y=p?p*y<0?w:x:S,u.align=E7e[h*y+1],u.baseline=_7e[p*y+1],s.setRange(C,A,E,T),!0}return!1}}function MU(e,t,n,r,i,o,s,a,l,u,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const mT=0,yT=4,vT=8,bT=0,xT=1,wT=2,A7e={"top-left":mT+bT,top:mT+xT,"top-right":mT+wT,left:yT+bT,middle:yT+xT,right:yT+wT,"bottom-left":vT+bT,bottom:vT+xT,"bottom-right":vT+wT},T7e={naive:x7e,"reduced-search":w7e,floodfill:C7e};function P7e(e,t,n,r,i,o,s,a,l,u,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=M7e(r,f),h=F7e(i,f),p=R7e(e[0].datum),g=p==="group"&&e[0].datum.items[l].marktype,m=g==="area",y=O7e(p,g,a,l),v=u===null||u===1/0,b=m&&c==="naive";let x=-1,w=-1;const k=e.map(A=>{const T=v?Gi.width(A,A.text):void 0;return x=Math.max(x,T),w=Math.max(w,A.fontSize),{datum:A,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(A),textWidth:T}});u=u===null||u===1/0?Math.max(x,w)+Math.max(...r):u;const S=b7e(t[0],t[1],u);let C;if(!b){n&&k.sort((I,F)=>n(I.datum,F.datum));let A=!1;for(let I=0;I<h.length&&!A;++I)A=h[I]===5||d[I]<0;const T=(p&&s||m)&&e.map(I=>I.datum);C=o.length||T?m7e(S,T||[],o,A,m):g7e(S,s&&k)}const E=m?T7e[c](S,C,s,l):$7e(S,C,h,d);return k.forEach(A=>A.opacity=+E(A)),k}function M7e(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function F7e(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=A7e[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function R7e(e){return e&&e.mark&&e.mark.marktype}function O7e(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const mM=["x","y","opacity","align","baseline"],Zoe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function tN(e){H.call(this,null,e)}tN.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Zoe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:mM.length,default:mM}]};re(tN,H,{transform(e,t){function n(o){const s=e[o];return Ne(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&G("Size parameter should be specified as a [width, height] array.");const i=e.as||mM;return P7e(t.materialize(t.SOURCE).source||[],e.size,e.sort,le(e.offset==null?1:e.offset),le(e.anchor||Zoe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const D7e=Object.freeze(Object.defineProperty({__proto__:null,label:tN},Symbol.toStringTag,{value:"Module"}));function ese(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,l,u;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function nN(e){H.call(this,null,e)}nN.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};re(nN,H,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=ese(r,e.groupby),o=(e.groupby||[]).map(tn),s=o.length,a=e.as||[tn(e.x),tn(e.y)],l=[];i.forEach(u=>{tte(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=u.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],l.push(at(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const yM={constant:NO,linear:IO,log:Qee,exp:Jee,pow:Zee,quad:LO,poly:ete},N7e=(e,t)=>e==="poly"?t:e==="quad"?2:1;function rN(e){H.call(this,null,e)}rN.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(yM)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};re(rN,H,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=ese(r,e.groupby),o=(e.groupby||[]).map(tn),s=e.method||"linear",a=e.order==null?3:e.order,l=N7e(s,a),u=e.as||[tn(e.x),tn(e.y)],c=yM[s],f=[];let d=e.extent;fe(yM,s)||G("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(at({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||Aa(h,e.x),y=v=>{const b={};for(let x=0;x<o.length;++x)b[o[x]]=h.dims[x];b[u[0]]=v[0],b[u[1]]=v[1],f.push(at(b))};s==="linear"||s==="constant"?m.forEach(v=>y([v,g.predict(v)])):uE(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const I7e=Object.freeze(Object.defineProperty({__proto__:null,loess:nN,regression:rN},Symbol.toStringTag,{value:"Module"})),$l=11102230246251565e-32,cr=134217729,L7e=(3+8*$l)*$l;function ST(e,t,n,r,i){let o,s,a,l,u=t[0],c=r[0],f=0,d=0;c>u==c>-u?(o=u,u=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>u==c>-u?(s=u+o,a=o-(s-u),u=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>u==c>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f]):(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function z7e(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function ob(e){return new Float64Array(e)}const j7e=(3+16*$l)*$l,B7e=(2+12*$l)*$l,U7e=(9+64*$l)*$l*$l,Ph=ob(4),FU=ob(8),RU=ob(12),OU=ob(16),Fr=ob(4);function V7e(e,t,n,r,i,o,s){let a,l,u,c,f,d,h,p,g,m,y,v,b,x,w,k,S,C;const E=e-i,A=n-i,T=t-o,I=r-o;x=E*I,d=cr*E,h=d-(d-E),p=E-h,d=cr*I,g=d-(d-I),m=I-g,w=p*m-(x-h*g-p*g-h*m),k=T*A,d=cr*T,h=d-(d-T),p=T-h,d=cr*A,g=d-(d-A),m=A-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,Ph[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,Ph[1]=b-(y+f)+(f-k),C=v+y,f=C-v,Ph[2]=v-(C-f)+(y-f),Ph[3]=C;let F=z7e(4,Ph),R=B7e*s;if(F>=R||-F>=R||(f=e-E,a=e-(E+f)+(f-i),f=n-A,u=n-(A+f)+(f-i),f=t-T,l=t-(T+f)+(f-o),f=r-I,c=r-(I+f)+(f-o),a===0&&l===0&&u===0&&c===0)||(R=U7e*s+L7e*Math.abs(F),F+=E*c+I*a-(T*u+A*l),F>=R||-F>=R))return F;x=a*I,d=cr*a,h=d-(d-a),p=a-h,d=cr*I,g=d-(d-I),m=I-g,w=p*m-(x-h*g-p*g-h*m),k=l*A,d=cr*l,h=d-(d-l),p=l-h,d=cr*A,g=d-(d-A),m=A-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,Fr[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,Fr[1]=b-(y+f)+(f-k),C=v+y,f=C-v,Fr[2]=v-(C-f)+(y-f),Fr[3]=C;const _=ST(4,Ph,4,Fr,FU);x=E*c,d=cr*E,h=d-(d-E),p=E-h,d=cr*c,g=d-(d-c),m=c-g,w=p*m-(x-h*g-p*g-h*m),k=T*u,d=cr*T,h=d-(d-T),p=T-h,d=cr*u,g=d-(d-u),m=u-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,Fr[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,Fr[1]=b-(y+f)+(f-k),C=v+y,f=C-v,Fr[2]=v-(C-f)+(y-f),Fr[3]=C;const P=ST(_,FU,4,Fr,RU);x=a*c,d=cr*a,h=d-(d-a),p=a-h,d=cr*c,g=d-(d-c),m=c-g,w=p*m-(x-h*g-p*g-h*m),k=l*u,d=cr*l,h=d-(d-l),p=l-h,d=cr*u,g=d-(d-u),m=u-g,S=p*m-(k-h*g-p*g-h*m),y=w-S,f=w-y,Fr[0]=w-(y+f)+(f-S),v=x+y,f=v-x,b=x-(v-f)+(y-f),y=b-k,f=b-y,Fr[1]=b-(y+f)+(f-k),C=v+y,f=C-v,Fr[2]=v-(C-f)+(y-f),Fr[3]=C;const N=ST(P,RU,4,Fr,OU);return OU[N-1]}function Lx(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,u=Math.abs(s+a);return Math.abs(l)>=j7e*u?l:-V7e(e,t,n,r,i,o,u)}const DU=Math.pow(2,-52),zx=new Uint32Array(512);class yk{static from(t,n=Y7e,r=X7e){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new yk(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let E=0;E<s;E++){const A=t[2*E],T=t[2*E+1];A<a&&(a=A),T<l&&(l=T),A>u&&(u=A),T>c&&(c=T),this._ids[E]=E}const f=(a+u)/2,d=(l+c)/2;let h,p,g;for(let E=0,A=1/0;E<s;E++){const T=kT(f,d,t[2*E],t[2*E+1]);T<A&&(h=E,A=T)}const m=t[2*h],y=t[2*h+1];for(let E=0,A=1/0;E<s;E++){if(E===h)continue;const T=kT(m,y,t[2*E],t[2*E+1]);T<A&&T>0&&(p=E,A=T)}let v=t[2*p],b=t[2*p+1],x=1/0;for(let E=0;E<s;E++){if(E===h||E===p)continue;const A=q7e(m,y,v,b,t[2*E],t[2*E+1]);A<x&&(g=E,x=A)}let w=t[2*g],k=t[2*g+1];if(x===1/0){for(let T=0;T<s;T++)this._dists[T]=t[2*T]-t[0]||t[2*T+1]-t[1];yp(this._ids,this._dists,0,s-1);const E=new Uint32Array(s);let A=0;for(let T=0,I=-1/0;T<s;T++){const F=this._ids[T],R=this._dists[F];R>I&&(E[A++]=F,I=R)}this.hull=E.subarray(0,A),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Lx(m,y,v,b,w,k)<0){const E=p,A=v,T=b;p=g,v=w,b=k,g=E,w=A,k=T}const S=G7e(m,y,v,b,w,k);this._cx=S.x,this._cy=S.y;for(let E=0;E<s;E++)this._dists[E]=kT(t[2*E],t[2*E+1],S.x,S.y);yp(this._ids,this._dists,0,s-1),this._hullStart=h;let C=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,o.fill(-1),o[this._hashKey(m,y)]=h,o[this._hashKey(v,b)]=p,o[this._hashKey(w,k)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let E=0,A,T;E<this._ids.length;E++){const I=this._ids[E],F=t[2*I],R=t[2*I+1];if(E>0&&Math.abs(F-A)<=DU&&Math.abs(R-T)<=DU||(A=F,T=R,I===h||I===p||I===g))continue;let _=0;for(let U=0,V=this._hashKey(F,R);U<this._hashSize&&(_=o[(V+U)%this._hashSize],!(_!==-1&&_!==r[_]));U++);_=n[_];let P=_,N;for(;N=r[P],Lx(F,R,t[2*P],t[2*P+1],t[2*N],t[2*N+1])>=0;)if(P=N,P===_){P=-1;break}if(P===-1)continue;let D=this._addTriangle(P,I,r[P],-1,-1,i[P]);i[I]=this._legalize(D+2),i[P]=D,C++;let L=r[P];for(;N=r[L],Lx(F,R,t[2*L],t[2*L+1],t[2*N],t[2*N+1])<0;)D=this._addTriangle(L,I,N,i[I],-1,i[L]),i[I]=this._legalize(D+2),r[L]=L,C--,L=N;if(P===_)for(;N=n[P],Lx(F,R,t[2*N],t[2*N+1],t[2*P],t[2*P+1])<0;)D=this._addTriangle(N,I,P,-1,i[P],i[N]),this._legalize(D+2),i[N]=D,r[P]=P,C--,P=N;this._hullStart=n[I]=P,r[P]=n[L]=I,r[I]=L,o[this._hashKey(F,R)]=I,o[this._hashKey(t[2*P],t[2*P+1])]=P}this.hull=new Uint32Array(C);for(let E=0,A=this._hullStart;E<C;E++)this.hull[E]=A,A=r[A];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(W7e(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=zx[--o];continue}const u=a-a%3,c=l+(t+1)%3,f=u+(a+2)%3,d=n[s],h=n[t],p=n[c],g=n[f];if(H7e(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[s]),this._link(s,f);const v=u+(a+1)%3;o<zx.length&&(zx[o++]=v)}else{if(o===0)break;t=zx[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function W7e(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function kT(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function H7e(e,t,n,r,i,o,s,a){const l=e-s,u=t-a,c=n-s,f=r-a,d=i-s,h=o-a,p=l*l+u*u,g=c*c+f*f,m=d*d+h*h;return l*(f*m-g*h)-u*(c*m-g*d)+p*(c*h-f*d)<0}function q7e(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=(u*c-a*f)*d,p=(s*f-l*c)*d;return h*h+p*p}function G7e(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,u=o-t,c=s*s+a*a,f=l*l+u*u,d=.5/(s*u-a*l),h=e+(u*c-a*f)*d,p=t+(s*f-l*c)*d;return{x:h,y:p}}function yp(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;h0(e,i,o),t[e[n]]>t[e[r]]&&h0(e,n,r),t[e[o]]>t[e[r]]&&h0(e,o,r),t[e[n]]>t[e[o]]&&h0(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;h0(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(yp(e,t,o,r),yp(e,t,n,s-1)):(yp(e,t,n,s-1),yp(e,t,o,r))}}function h0(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Y7e(e){return e[0]}function X7e(e){return e[1]}const NU=1e-6;class zf{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>NU||Math.abs(this._y1-o)>NU)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class vM{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let K7e=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,m=0,y=r.length,v,b;g<y;g+=3,m+=2){const x=r[g]*2,w=r[g+1]*2,k=r[g+2]*2,S=t[x],C=t[x+1],E=t[w],A=t[w+1],T=t[k],I=t[k+1],F=E-S,R=A-C,_=T-S,P=I-C,N=(F*P-R*_)*2;if(Math.abs(N)<1e-9){if(o===void 0){o=s=0;for(const L of n)o+=t[L*2],s+=t[L*2+1];o/=n.length,s/=n.length}const D=1e9*Math.sign((o-S)*P-(s-C)*_);v=(S+T)/2-D*P,b=(C+I)/2+D*_}else{const D=1/N,L=F*F+R*R,U=_*_+P*P;v=S+(P*L-R*U)*D,b=C+(F*U-_*L)*D}a[m]=v,a[m+1]=b}let l=n[n.length-1],u,c=l*4,f,d=t[2*l],h,p=t[2*l+1];i.fill(0);for(let g=0;g<n.length;++g)l=n[g],u=c,f=d,h=p,c=l*4,d=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=d-f}render(t){const n=t==null?t=new zf:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=s[h],m=s[h+1],y=s[p],v=s[p+1];this._renderSegment(g,m,y,v,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const f=Math.floor(i[u]/3)*2,d=s[f],h=s[f+1],p=l*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new zf:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new zf:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new vM;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=d,d=0,i?i.push(a,l):i=[a,l];else{let p,g,m,y,v;if(u===0){if((p=this._clipSegment(o,s,a,l,u,c))===null)continue;[g,m,y,v]=p}else{if((p=this._clipSegment(a,l,o,s,c,u))===null)continue;[y,v,g,m]=p,f=d,d=this._edgecode(g,m),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,m):i=[g,m]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,u,c=o||s;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=d,d=this._edgecode(a[u],a[u+1]),f&&d&&(u=this._edge(t,f,d,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Q7e=2*Math.PI,Mh=Math.pow;function J7e(e){return e[0]}function Z7e(e){return e[1]}function eje(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function tje(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class iN{static from(t,n=J7e,r=Z7e,i){return new iN("length"in t?nje(t,n,r,i):Float64Array.from(rje(t,n,r,i)))}constructor(t){this._delaunator=new yk(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&eje(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=tje(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new yk(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(r[l]===-1||s[c]===-1)&&(s[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new K7e(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=s[u],u=u%3===2?u-2:u+1,s[u]!==t)return;if(u=o[u],u===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,f=Mh(n-u[t*2],2)+Mh(r-u[t*2+1],2);const d=i[t];let h=d;do{let p=l[h];const g=Mh(n-u[p*2],2)+Mh(r-u[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==p&&Mh(n-u[h*2],2)+Mh(r-u[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new zf:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const u=o[s]*2,c=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new zf:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,Q7e)}return r&&r.value()}renderHull(t){const n=t==null?t=new zf:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new vM;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new zf:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new vM;return this.renderTriangle(t,n),n.value()}}function nje(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*rje(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function oN(e){H.call(this,null,e)}oN.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const ije=[-1e5,-1e5,1e5,1e5];re(oN,H,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:ije;const o=this.value=iN.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!sje(l)?oje(l):null}return t.reflow(e.modified()).modifies(n)}});function oje(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function sje(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const aje=Object.freeze(Object.defineProperty({__proto__:null,voronoi:oN},Symbol.toStringTag,{value:"Module"}));var CT=Math.PI/180,ly=64,n2=2048;function lje(){var e=[256,256],t,n,r,i,o,s,a,l=tse,u=[],c=Math.random,f={};f.layout=function(){for(var p=d(sc()),g=pje((e[0]>>5)*e[1]),m=null,y=u.length,v=-1,b=[],x=u.map(k=>({text:t(k),font:n(k),style:i(k),weight:o(k),rotate:s(k),size:~~(r(k)+1e-14),padding:a(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,S)=>S.size-k.size);++v<y;){var w=x[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,uje(p,w,x,v),w.hasText&&h(g,w,m)&&(b.push(w),m?fje(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(ly<<5)/g,p.height=n2/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function h(p,g,m){for(var y=g.x,v=g.y,b=Math.hypot(e[0],e[1]),x=l(e),w=c()<.5?1:-1,k=-w,S,C,E;(S=x(k+=w))&&(C=~~S[0],E=~~S[1],!(Math.min(Math.abs(C),Math.abs(E))>=b));)if(g.x=y+C,g.y=v+E,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!cje(g,p,e[0]))&&(!m||dje(g,m))){for(var A=g.sprite,T=g.width>>5,I=e[0]>>5,F=g.x-(T<<4),R=F&127,_=32-R,P=g.y1-g.y0,N=(g.y+g.y0)*I+(F>>5),D,L=0;L<P;L++){D=0;for(var U=0;U<=T;U++)p[N+U]|=D<<_|(U<T?(D=A[L*T+U])>>>R:0);N+=I}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(u=p,f):u},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=nf(p),f):n},f.fontStyle=function(p){return arguments.length?(i=nf(p),f):i},f.fontWeight=function(p){return arguments.length?(o=nf(p),f):o},f.rotate=function(p){return arguments.length?(s=nf(p),f):s},f.text=function(p){return arguments.length?(t=nf(p),f):t},f.spiral=function(p){return arguments.length?(l=gje[p]||p,f):l},f.fontSize=function(p){return arguments.length?(r=nf(p),f):r},f.padding=function(p){return arguments.length?(a=nf(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function uje(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(ly<<5)/o,n2/o);var s=0,a=0,l=0,u=n.length,c,f,d,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*CT),m=Math.cos(t.rotate*CT),y=c*m,v=c*g,b=d*m,x=d*g;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>l&&(l=d),s+c>=ly<<5&&(s=0,a+=l,l=0),a+d>=n2)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*CT),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var w=i.getImageData(0,0,(ly<<5)/o,n2/o).data,k=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)k[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var E=f*p+(h>>5),A=w[(a+p)*(ly<<5)+(s+h)<<2]?1<<31-h%32:0;k[E]|=A,S|=A}S?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=k.slice(0,(t.y1-t.y0)*f)}}}function cje(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[u+d])return!0;u+=n}return!1}function fje(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function dje(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function tse(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function hje(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function pje(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function nf(e){return typeof e=="function"?e:function(){return e}}var gje={archimedean:tse,rectangular:hje};const nse=["x","y","font","fontSize","fontStyle","fontWeight","angle"],mje=["text","font","rotate","fontSize","fontStyle","fontWeight"];function sN(e){H.call(this,lje(),e)}sN.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:nse}]};re(sN,H,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&G("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return Ne(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||mje.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||nse;let a=e.fontSize||14,l;if(Ne(a)?l=e.fontSizeRange:a=Tr(a),l){const p=a,g=et("sqrt")().domain(Aa(i,p)).range(l);a=m=>g(p(m))}i.forEach(p=>{p[s[0]]=NaN,p[s[1]]=NaN,p[s[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Lo).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=u.length;for(let p=0,g,m;p<h;++p)g=u[p],m=g.datum,m[s[0]]=g.x+f,m[s[1]]=g.y+d,m[s[2]]=g.font,m[s[3]]=g.size,m[s[4]]=g.style,m[s[5]]=g.weight,m[s[6]]=g.rotate;return t.reflow(r).modifies(s)}});const yje=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:sN},Symbol.toStringTag,{value:"Module"})),vje=e=>new Uint8Array(e),bje=e=>new Uint16Array(e),Hy=e=>new Uint32Array(e);function xje(){let e=8,t=[],n=Hy(0),r=jx(0,e),i=jx(0,e);return{data:()=>t,seen:()=>n=wje(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,u;s<l;++s)u=o[s],u._index=a++,t.push(u)},remove(o,s){const a=t.length,l=Array(a-o),u=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)l[f]=t[f],u[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?u[f]=-1:(u[f]=d,r[d]=r[f],i[d]=i[f],l[d]=c,c._index=d++),r[f]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=jx(o,e,r),i=jx(o,e))}}}function wje(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function jx(e,t,n){const r=(t<257?vje:t<65537?bje:Hy)(e);return n&&r.set(n),r}function IU(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,u=a[0],c=a[1],f=l.length;let d;for(d=0;d<u;++d)o[l[d]]|=r;for(d=c;d<f;++d)o[l[d]]|=r;return s}}}function LU(){let e=Hy(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,f=l.length,d=Hy(f);let h=Array(f),p,g,m;for(m=0;m<f;++m)h[m]=a(l[m]),d[m]=m;if(h=Sje(h,d),c)p=t,g=e,t=Array(c+f),e=Hy(c+f),kje(u,p,g,c,h,d,f,t,e);else{if(u>0)for(m=0;m<f;++m)d[m]+=u;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,l){const u=n;let c,f,d;for(f=0;!l[e[f]]&&f<u;++f);for(d=f;f<u;++f)l[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=u-a}function o(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function s(a,l){let u;return l?u=l.length:(l=t,u=n),[OPe(l,a[0],0,u),gc(l,a[1],0,u)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function Sje(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),IPe(e,t)}function kje(e,t,n,r,i,o,s,a,l){let u=0,c=0,f;for(f=0;u<r&&c<s;++f)t[u]<i[c]?(a[f]=t[u],l[f]=n[u++]):(a[f]=i[c],l[f]=o[c++]+e);for(;u<r;++u,++f)a[f]=t[u],l[f]=n[u];for(;c<s;++c,++f)a[f]=i[c],l[f]=o[c]+e}function aN(e){H.call(this,xje(),e),this._indices=null,this._dims=null}aN.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};re(aN,H,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,u;for(;a<s;++a)l=n[a].fname,u=i[l]||(i[l]=LU()),o.push(IU(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,m,y,v,b,x,w,k,S;if(u.set(l),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,k=v.length;w<k;++w)x[v[w]._index]=1;for(w=0;w<h;++w)S=r[w],(!s[w]||e.modified("fields",w)||t.modified(S.fields))&&(y=S.fname,(g=p[y])||(o[y]=m=LU(),p[y]=g=m.insert(S,t.source,0)),s[w]=IU(m,w,i[w]).onAdd(g,l));for(w=0,k=a.data().length;w<k;++w)b[w]||(u[w]!==l[w]?f.push(w):x[w]&&l[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const m=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,g=l[p]||(l[p]=s[p].insert(a[h],r,d)),o[h].onAdd(g,m);for(;d<c;++d)y[d]=v,m[d]!==v&&u.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,u;for(a=0,l=s.length;a<l;++a)u=s[a]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,l[h]=1,s[h]=p=o[h],o[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(d,l);return this.reindex(t,d,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,u;for(n.filters=0,u=0;u<s;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<s;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=u[0],p=u[1],g=e.one;let m,y,v;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(f>h)for(m=h,y=Math.min(f,p);m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;if(d>p)for(m=Math.max(f,p),y=d;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;else if(d<p)for(m=Math.max(h,d),y=p;m<y;++m)v=l[m],o[v]!==n&&(a[v]=s[v],o[v]=n,r.push(v)),s[v]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],f=a[0],d=a[1],h=e.one;let p,g,m;if(u<f)for(p=u,g=Math.min(f,c);p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(u>f)for(p=f,g=Math.min(u,d);p<g;++p)m=s[p],o[m]^=h,r.push(m);if(c>d)for(p=Math.max(u,d),g=c;p<g;++p)m=s[p],o[m]^=h,n.push(m);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)m=s[p],o[m]^=h,r.push(m);e.range=t.slice()}});function lN(e){H.call(this,null,e)}lN.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};re(lN,H,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:s[c];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^l[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^l[c]&n))?s[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const Cje=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:aN,resolvefilter:lN},Symbol.toStringTag,{value:"Module"})),Eje="RawCode",$d="Literal",_je="Property",$je="Identifier",Aje="ArrayExpression",Tje="BinaryExpression",rse="CallExpression",Pje="ConditionalExpression",Mje="LogicalExpression",Fje="MemberExpression",Rje="ObjectExpression",Oje="UnaryExpression";function Os(e){this.type=e}Os.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Dje(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Dje(e){switch(e.type){case Aje:return e.elements;case Tje:case Mje:return[e.left,e.right];case rse:return[e.callee].concat(e.arguments);case Pje:return[e.test,e.consequent,e.alternate];case Fje:return[e.object,e.property];case Rje:return e.properties;case _je:return[e.key,e.value];case Oje:return[e.argument];case $je:case $d:case Eje:default:return[]}}var Ba,ge,q,Er,dt,UE=1,sb=2,Ad=3,Bc=4,VE=5,rh=6,si=7,ab=8,Nje=9;Ba={};Ba[UE]="Boolean";Ba[sb]="<end>";Ba[Ad]="Identifier";Ba[Bc]="Keyword";Ba[VE]="Null";Ba[rh]="Numeric";Ba[si]="Punctuator";Ba[ab]="String";Ba[Nje]="RegularExpression";var Ije="ArrayExpression",Lje="BinaryExpression",zje="CallExpression",jje="ConditionalExpression",ise="Identifier",Bje="Literal",Uje="LogicalExpression",Vje="MemberExpression",Wje="ObjectExpression",Hje="Property",qje="UnaryExpression",Rn="Unexpected token %0",Gje="Unexpected number",Yje="Unexpected string",Xje="Unexpected identifier",Kje="Unexpected reserved word",Qje="Unexpected end of input",bM="Invalid regular expression",ET="Invalid regular expression: missing /",ose="Octal literals are not allowed in strict mode.",Jje="Duplicate data property in object literal not allowed in strict mode",Jn="ILLEGAL",H1="Disabled.",Zje=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),eBe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function WE(e,t){if(!e)throw new Error("ASSERT: "+t)}function al(e){return e>=48&&e<=57}function uN(e){return"0123456789abcdefABCDEF".includes(e)}function qy(e){return"01234567".includes(e)}function tBe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function q1(e){return e===10||e===13||e===8232||e===8233}function lb(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Zje.test(String.fromCharCode(e))}function vk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&eBe.test(String.fromCharCode(e))}const nBe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function sse(){for(;q<Er;){const e=ge.charCodeAt(q);if(tBe(e)||q1(e))++q;else break}}function xM(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)q<Er&&uN(ge[q])?(r=ge[q++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Qe({},Rn,Jn);return String.fromCharCode(i)}function rBe(){var e,t,n,r;for(e=ge[q],t=0,e==="}"&&Qe({},Rn,Jn);q<Er&&(e=ge[q++],!!uN(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Qe({},Rn,Jn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function ase(){var e,t;for(e=ge.charCodeAt(q++),t=String.fromCharCode(e),e===92&&(ge.charCodeAt(q)!==117&&Qe({},Rn,Jn),++q,e=xM("u"),(!e||e==="\\"||!lb(e.charCodeAt(0)))&&Qe({},Rn,Jn),t=e);q<Er&&(e=ge.charCodeAt(q),!!vk(e));)++q,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ge.charCodeAt(q)!==117&&Qe({},Rn,Jn),++q,e=xM("u"),(!e||e==="\\"||!vk(e.charCodeAt(0)))&&Qe({},Rn,Jn),t+=e);return t}function iBe(){var e,t;for(e=q++;q<Er;){if(t=ge.charCodeAt(q),t===92)return q=e,ase();if(vk(t))++q;else break}return ge.slice(e,q)}function oBe(){var e,t,n;return e=q,t=ge.charCodeAt(q)===92?ase():iBe(),t.length===1?n=Ad:nBe.hasOwnProperty(t)?n=Bc:t==="null"?n=VE:t==="true"||t==="false"?n=UE:n=Ad,{type:n,value:t,start:e,end:q}}function _T(){var e=q,t=ge.charCodeAt(q),n,r=ge[q],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++q,{type:si,value:String.fromCharCode(t),start:e,end:q};default:if(n=ge.charCodeAt(q+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return q+=2,{type:si,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:q};case 33:case 61:return q+=2,ge.charCodeAt(q)===61&&++q,{type:si,value:ge.slice(e,q),start:e,end:q}}}if(s=ge.substr(q,4),s===">>>=")return q+=4,{type:si,value:s,start:e,end:q};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return q+=3,{type:si,value:o,start:e,end:q};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return q+=2,{type:si,value:i,start:e,end:q};if(i==="//"&&Qe({},Rn,Jn),"<>=!+-*%&|^/".includes(r))return++q,{type:si,value:r,start:e,end:q};Qe({},Rn,Jn)}function sBe(e){let t="";for(;q<Er&&uN(ge[q]);)t+=ge[q++];return t.length===0&&Qe({},Rn,Jn),lb(ge.charCodeAt(q))&&Qe({},Rn,Jn),{type:rh,value:parseInt("0x"+t,16),start:e,end:q}}function aBe(e){let t="0"+ge[q++];for(;q<Er&&qy(ge[q]);)t+=ge[q++];return(lb(ge.charCodeAt(q))||al(ge.charCodeAt(q)))&&Qe({},Rn,Jn),{type:rh,value:parseInt(t,8),octal:!0,start:e,end:q}}function zU(){var e,t,n;if(n=ge[q],WE(al(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=q,e="",n!=="."){if(e=ge[q++],n=ge[q],e==="0"){if(n==="x"||n==="X")return++q,sBe(t);if(qy(n))return aBe(t);n&&al(n.charCodeAt(0))&&Qe({},Rn,Jn)}for(;al(ge.charCodeAt(q));)e+=ge[q++];n=ge[q]}if(n==="."){for(e+=ge[q++];al(ge.charCodeAt(q));)e+=ge[q++];n=ge[q]}if(n==="e"||n==="E")if(e+=ge[q++],n=ge[q],(n==="+"||n==="-")&&(e+=ge[q++]),al(ge.charCodeAt(q)))for(;al(ge.charCodeAt(q));)e+=ge[q++];else Qe({},Rn,Jn);return lb(ge.charCodeAt(q))&&Qe({},Rn,Jn),{type:rh,value:parseFloat(e),start:t,end:q}}function lBe(){var e="",t,n,r,i,o=!1;for(t=ge[q],WE(t==="'"||t==='"',"String literal must starts with a quote"),n=q,++q;q<Er;)if(r=ge[q++],r===t){t="";break}else if(r==="\\")if(r=ge[q++],!r||!q1(r.charCodeAt(0)))switch(r){case"u":case"x":ge[q]==="{"?(++q,e+=rBe()):e+=xM(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:qy(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),q<Er&&qy(ge[q])&&(o=!0,i=i*8+"01234567".indexOf(ge[q++]),"0123".includes(r)&&q<Er&&qy(ge[q])&&(i=i*8+"01234567".indexOf(ge[q++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&ge[q]===`
`&&++q;else{if(q1(r.charCodeAt(0)))break;e+=r}return t!==""&&Qe({},Rn,Jn),{type:ab,value:e,octal:o,start:n,end:q}}function uBe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Qe({},bM)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Qe({},bM)}try{return new RegExp(e,t)}catch{return null}}function cBe(){var e,t,n,r,i;for(e=ge[q],WE(e==="/","Regular expression literal must start with a slash"),t=ge[q++],n=!1,r=!1;q<Er;)if(e=ge[q++],t+=e,e==="\\")e=ge[q++],q1(e.charCodeAt(0))&&Qe({},ET),t+=e;else if(q1(e.charCodeAt(0)))Qe({},ET);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Qe({},ET),i=t.substr(1,t.length-2),{value:i,literal:t}}function fBe(){var e,t,n;for(t="",n="";q<Er&&(e=ge[q],!!vk(e.charCodeAt(0)));)++q,e==="\\"&&q<Er?Qe({},Rn,Jn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Qe({},bM,n),{value:n,literal:t}}function dBe(){var e,t,n,r;return dt=null,sse(),e=q,t=cBe(),n=fBe(),r=uBe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:q}}function hBe(e){return e.type===Ad||e.type===Bc||e.type===UE||e.type===VE}function lse(){if(sse(),q>=Er)return{type:sb,start:q,end:q};const e=ge.charCodeAt(q);return lb(e)?oBe():e===40||e===41||e===59?_T():e===39||e===34?lBe():e===46?al(ge.charCodeAt(q+1))?zU():_T():al(e)?zU():_T()}function ci(){const e=dt;return q=e.end,dt=lse(),q=e.end,e}function use(){const e=q;dt=lse(),q=e}function pBe(e){const t=new Os(Ije);return t.elements=e,t}function jU(e,t,n){const r=new Os(e==="||"||e==="&&"?Uje:Lje);return r.operator=e,r.left=t,r.right=n,r}function gBe(e,t){const n=new Os(zje);return n.callee=e,n.arguments=t,n}function mBe(e,t,n){const r=new Os(jje);return r.test=e,r.consequent=t,r.alternate=n,r}function cN(e){const t=new Os(ise);return t.name=e,t}function uy(e){const t=new Os(Bje);return t.value=e.value,t.raw=ge.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function BU(e,t,n){const r=new Os(Vje);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function yBe(e){const t=new Os(Wje);return t.properties=e,t}function UU(e,t,n){const r=new Os(Hje);return r.key=t,r.value=n,r.kind=e,r}function vBe(e,t){const n=new Os(qje);return n.operator=e,n.argument=t,n.prefix=!0,n}function Qe(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(WE(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=q,n.description=i,n}function HE(e){e.type===sb&&Qe(e,Qje),e.type===rh&&Qe(e,Gje),e.type===ab&&Qe(e,Yje),e.type===Ad&&Qe(e,Xje),e.type===Bc&&Qe(e,Kje),Qe(e,Rn,e.value)}function _r(e){const t=ci();(t.type!==si||t.value!==e)&&HE(t)}function Mt(e){return dt.type===si&&dt.value===e}function $T(e){return dt.type===Bc&&dt.value===e}function bBe(){const e=[];for(q=dt.start,_r("[");!Mt("]");)Mt(",")?(ci(),e.push(null)):(e.push(Td()),Mt("]")||_r(","));return ci(),pBe(e)}function VU(){q=dt.start;const e=ci();return e.type===ab||e.type===rh?(e.octal&&Qe(e,ose),uy(e)):cN(e.value)}function xBe(){var e,t,n,r;if(q=dt.start,e=dt,e.type===Ad)return n=VU(),_r(":"),r=Td(),UU("init",n,r);if(e.type===sb||e.type===si)HE(e);else return t=VU(),_r(":"),r=Td(),UU("init",t,r)}function wBe(){var e=[],t,n,r,i={},o=String;for(q=dt.start,_r("{");!Mt("}");)t=xBe(),t.key.type===ise?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Qe({},Jje):i[r]=!0,e.push(t),Mt("}")||_r(",");return _r("}"),yBe(e)}function SBe(){_r("(");const e=fN();return _r(")"),e}const kBe={if:1};function CBe(){var e,t,n;if(Mt("("))return SBe();if(Mt("["))return bBe();if(Mt("{"))return wBe();if(e=dt.type,q=dt.start,e===Ad||kBe[dt.value])n=cN(ci().value);else if(e===ab||e===rh)dt.octal&&Qe(dt,ose),n=uy(ci());else{if(e===Bc)throw new Error(H1);e===UE?(t=ci(),t.value=t.value==="true",n=uy(t)):e===VE?(t=ci(),t.value=null,n=uy(t)):Mt("/")||Mt("/=")?(n=uy(dBe()),use()):HE(ci())}return n}function EBe(){const e=[];if(_r("("),!Mt(")"))for(;q<Er&&(e.push(Td()),!Mt(")"));)_r(",");return _r(")"),e}function _Be(){q=dt.start;const e=ci();return hBe(e)||HE(e),cN(e.value)}function $Be(){return _r("."),_Be()}function ABe(){_r("[");const e=fN();return _r("]"),e}function TBe(){var e,t,n;for(e=CBe();;)if(Mt("."))n=$Be(),e=BU(".",e,n);else if(Mt("("))t=EBe(),e=gBe(e,t);else if(Mt("["))n=ABe(),e=BU("[",e,n);else break;return e}function WU(){const e=TBe();if(dt.type===si&&(Mt("++")||Mt("--")))throw new Error(H1);return e}function r2(){var e,t;if(dt.type!==si&&dt.type!==Bc)t=WU();else{if(Mt("++")||Mt("--"))throw new Error(H1);if(Mt("+")||Mt("-")||Mt("~")||Mt("!"))e=ci(),t=r2(),t=vBe(e.value,t);else{if($T("delete")||$T("void")||$T("typeof"))throw new Error(H1);t=WU()}}return t}function HU(e){let t=0;if(e.type!==si&&e.type!==Bc)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function PBe(){var e,t,n,r,i,o,s,a,l,u;if(e=dt,l=r2(),r=dt,i=HU(r),i===0)return l;for(r.prec=i,ci(),t=[e,dt],s=r2(),o=[l,r,s];(i=HU(dt))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=jU(a,l,s),o.push(n);r=ci(),r.prec=i,o.push(r),t.push(dt),n=r2(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=jU(o[u-1].value,o[u-2],n),u-=2;return n}function Td(){var e,t,n;return e=PBe(),Mt("?")&&(ci(),t=Td(),_r(":"),n=Td(),e=mBe(e,t,n)),e}function fN(){const e=Td();if(Mt(","))throw new Error(H1);return e}function dN(e){ge=e,q=0,Er=ge.length,dt=null,use();const t=fN();if(dt.type!==sb)throw new Error("Unexpect token after expression.");return t}var cse={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function fse(e){function t(s,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return u=>t(s,u,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&G("Missing arguments to clamp function."),s.length>3&&G("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&G("Missing arguments to if function."),s.length>3&&G("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function MBe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function dse(e){e=e||{};const t=e.allowed?ks(e.allowed):{},n=e.forbidden?ks(e.forbidden):{},r=e.constants||cse,i=(e.functions||fse)(f),o=e.globalvar,s=e.fieldvar,a=Ne(o)?o:p=>`${o}["${p}"]`;let l={},u={},c=0;function f(p){if(ue(p))return p;const g=d[p.type];return g==null&&G("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:fe(n,g)?G("Illegal identifier: "+g):fe(r,g)?r[g]:fe(t,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===s&&(u[MBe(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&G("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=fe(i,g)&&i[g];return y||G("Unrecognized function: "+g),Ne(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return h.functions=i,h.constants=r,h}const qU=Symbol("vega_selection_getter");function hse(e){return(!e.getter||!e.getter[qU])&&(e.getter=Do(e.field),e.getter[qU]=!0),e.getter}const hN="intersect",GU="union",FBe="vlMulti",RBe="vlPoint",YU="or",OBe="and",oa="_vgsid_",G1=Do(oa),DBe="E",NBe="R",IBe="R-E",LBe="R-LE",zBe="R-RE",bk="index:unit";function XU(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=hse(a)(e),ic(s)&&(s=wr(s)),ic(r[o])&&(r[o]=wr(r[o])),Y(r[o])&&ic(r[o][0])&&(r[o]=r[o].map(wr)),a.type===DBe){if(Y(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===NBe){if(!hp(s,r[o]))return!1}else if(a.type===zBe){if(!hp(s,r[o],!0,!1))return!1}else if(a.type===IBe){if(!hp(s,r[o],!1,!1))return!1}else if(a.type===LBe&&!hp(s,r[o],!1,!0))return!1;return!0}function jBe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[bk]&&r[bk].value:void 0,s=n===hN,a=i.length,l=0,u,c,f,d,h;l<a;++l)if(u=i[l],o&&s){if(c=c||{},f=c[d=u.unit]||0,f===-1)continue;if(h=XU(t,u),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=XU(t,u),s^h)return h;return a&&s}const pse=pm(G1),BBe=pse.left,UBe=pse.right;function VBe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[bk]&&r[bk].value:void 0,s=n===hN,a=G1(t),l=BBe(i,a);if(l===i.length||G1(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(UBe(i,a)-l<o.size)return!1}return!0}function WBe(e,t){return e.map(n=>De(t.fields?{values:t.fields.map(r=>hse(r)(n.datum))}:{[oa]:G1(n.datum)},t))}function HBe(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},u,c,f,d,h,p,g,m,y,v,b=o.length,x=0,w,k;x<b;++x)if(u=o[x],d=u.unit,c=u.fields,f=u.values,c&&f){for(w=0,k=c.length;w<k;++w)h=c[w],g=s[h.field]||(s[h.field]={}),m=g[d]||(g[d]=[]),l[h.field]=y=h.type.charAt(0),v=AT[`${y}_union`],g[d]=v(m,le(f[w]));n&&(m=a[d]||(a[d]=[]),m.push(le(f).reduce((S,C,E)=>(S[c[E].field]=C,S),{})))}else h=oa,p=G1(u),g=s[h]||(s[h]={}),m=g[d]||(g[d]=[]),m.push(p),n&&(m=a[d]||(a[d]=[]),m.push({[oa]:p}));if(t=t||GU,s[oa]?s[oa]=AT[`${oa}_${t}`](...Object.values(s[oa])):Object.keys(s).forEach(S=>{s[S]=Object.keys(s[S]).map(C=>s[S][C]).reduce((C,E)=>C===void 0?E:AT[`${l[S]}_${t}`](C,E))}),o=Object.keys(a),n&&o.length){const S=r?RBe:FBe;s[S]=t===GU?{[YU]:o.reduce((C,E)=>(C.push(...a[E]),C),[])}:{[OBe]:o.map(C=>({[YU]:a[C]}))}}return s}var AT={[`${oa}_union`]:qPe,[`${oa}_intersect`]:WPe,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=wr(t[0]),r=wr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=wr(t[0]),r=wr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const qBe=":",GBe="@";function pN(e,t,n,r){t[0].type!==$d&&G("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&qe(t).value,s="unit",a=GBe+s,l=qBe+i;o===hN&&!fe(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),fe(r,l)||(r[l]=n.getData(i).tuplesRef())}function gse(e){const t=this.context.data[e];return t?t.values.value:[]}function YBe(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function XBe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(No).insert(t)),1}function KBe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const ub=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},QBe=ub("format"),mse=ub("timeFormat"),JBe=ub("utcFormat"),ZBe=ub("timeParse"),eUe=ub("utcParse"),Bx=new Date(2e3,0,1);function qE(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Bx.setYear(2e3),Bx.setMonth(e),Bx.setDate(t),mse.call(this,Bx,n))}function tUe(e){return qE.call(this,e,1,"%B")}function nUe(e){return qE.call(this,e,1,"%b")}function rUe(e){return qE.call(this,0,2+e,"%A")}function iUe(e){return qE.call(this,0,2+e,"%a")}const oUe=":",sUe="@",wM="%",yse="$";function gN(e,t,n,r){t[0].type!==$d&&G("First argument to data functions must be a string literal.");const i=t[0].value,o=oUe+i;if(!fe(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function aUe(e,t,n,r){t[0].type!==$d&&G("First argument to indata must be a string literal."),t[1].type!==$d&&G("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=sUe+o;fe(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function Kr(e,t,n,r){if(t[0].type===$d)KU(n,r,t[0].value);else for(e in n.scales)KU(n,r,e)}function KU(e,t,n){const r=wM+n;if(!fe(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Ua(e,t){if(Ne(e))return e;if(ue(e)){const n=t.scales[e];return n&&vDe(n.value)?n.value:void 0}}function lUe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Kr,n._range=Kr,n._scale=Kr;const r=i=>"_["+(i.type===$d?ne(wM+i.value):ne(wM)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function mN(e,t){return function(n,r,i){if(n){const o=Ua(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const uUe=mN("area",RLe),cUe=mN("bounds",ILe),fUe=mN("centroid",VLe);function dUe(e,t){const n=Ua(e,(t||this).context);return n&&n.scale()}function hUe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function yN(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function pUe(){return yN(this.context.dataflow,"warn",arguments)}function gUe(){return yN(this.context.dataflow,"info",arguments)}function mUe(){return yN(this.context.dataflow,"debug",arguments)}function TT(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function SM(e){const t=bc(e),n=TT(t.r),r=TT(t.g),i=TT(t.b);return .2126*n+.7152*r+.0722*i}function yUe(e,t){const n=SM(e),r=SM(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function vUe(){const e=[].slice.call(arguments);return e.unshift({}),De(...e)}function vse(e,t){return e===t||e!==e&&t!==t?!0:Y(e)?Y(t)&&e.length===t.length?bUe(e,t):!1:se(e)&&se(t)?bse(e,t):!1}function bUe(e,t){for(let n=0,r=e.length;n<r;++n)if(!vse(e[n],t[n]))return!1;return!0}function bse(e,t){for(const n in e)if(!vse(e[n],t[n]))return!1;return!0}function QU(e){return t=>bse(e,t)}function xUe(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,u=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=s.changeset(),c.stamp=u,s.runAfter(()=>{a.modified=!0,s.pulse(l,c).run()},!0,1)),n&&(f=n===!0?No:Y(n)||tE(n)?n:QU(n),c.remove(f)),t&&c.insert(t),r&&(f=QU(r),l.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function wUe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function SUe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const JU={};function kUe(e,t){const n=JU[t]||(JU[t]=Do(t));return Y(e)?e.map(n):n(e)}function vN(e){return Y(e)||ArrayBuffer.isView(e)?e:null}function bN(e){return vN(e)||(ue(e)?e:null)}function CUe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vN(e).join(...n)}function EUe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bN(e).indexOf(...n)}function _Ue(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bN(e).lastIndexOf(...n)}function $Ue(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bN(e).slice(...n)}function AUe(e,t,n){return Ne(n)&&G("Function argument passed to replace."),String(e).replace(t,n)}function TUe(e){return vN(e).slice().reverse()}function PUe(e,t,n){return MD(e||0,t||0,n||0)}function MUe(e,t){const n=Ua(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function FUe(e,t){const n=Ua(e,(t||this).context);return n?n.copy():void 0}function RUe(e,t){const n=Ua(e,(t||this).context);return n?n.domain():[]}function OUe(e,t,n){const r=Ua(e,(n||this).context);return r?Y(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function DUe(e,t){const n=Ua(e,(t||this).context);return n&&n.range?n.range():[]}function NUe(e,t,n){const r=Ua(e,(n||this).context);return r?r(t):void 0}function IUe(e,t,n,r,i){e=Ua(e,(i||this).context);const o=ure(t,n);let s=e.domain(),a=s[0],l=qe(s),u=Ar;return l-a?u=Qne(e,a,l):e=(e.interpolator?et("sequential")().interpolator(e.interpolator()):et("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==qe(s)&&s.push(l)),s.forEach(c=>o.stop(u(c),e(c))),o}function LUe(e,t,n){const r=Ua(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function zUe(e){let t=null;return function(n){return n?I1(n,t=t||$g(e)):e}}const xse=e=>e.data;function wse(e,t){const n=gse.call(t,e);return n.root&&n.root.lookup||{}}function jUe(e,t,n){const r=wse(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(xse):void 0}function BUe(e,t){const n=wse(e,this)[t];return n?n.ancestors().map(xse):void 0}const Sse=()=>typeof window<"u"&&window||null;function UUe(){const e=Sse();return e?e.screen:{}}function VUe(){const e=Sse();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function WUe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function kse(e,t,n){if(!e)return[];const[r,i]=e,o=new gn().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return sie(s,o,HUe(t))}function HUe(e){let t=null;if(e){const n=le(e.marktype),r=le(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function qUe(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=le(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function GUe(e){return le(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function YUe(e,t,n){const{x:r,y:i,mark:o}=n,s=new gn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),u<s.y1&&(s.y1=u),u>s.y2&&(s.y2=u);return s.translate(r,i),kse([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>XUe(l.x,l.y,t))}function XUe(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,u]=n[i];u>t!=a>t&&e<(s-l)*(t-u)/(a-u)+l&&r++}return r&1}const Y1={random(){return Lo()},cumulativeNormal:sE,cumulativeLogNormal:PO,cumulativeUniform:OO,densityNormal:EO,densityLogNormal:TO,densityUniform:RO,quantileNormal:aE,quantileLogNormal:MO,quantileUniform:DO,sampleNormal:oE,sampleLogNormal:AO,sampleUniform:FO,isArray:Y,isBoolean:Nc,isDate:ic,isDefined(e){return e!==void 0},isNumber:Je,isObject:se,isRegExp:EZ,isString:ue,isTuple:tE,isValid(e){return e!=null&&e===e},toBoolean:iO,toDate(e){return oO(e)},toNumber:wr,toString:sO,indexof:EUe,join:CUe,lastindexof:_Ue,replace:AUe,reverse:TUe,slice:$Ue,flush:kZ,lerp:_Z,merge:vUe,pad:TZ,peek:qe,pluck:kUe,span:Fv,inrange:hp,truncate:PZ,rgb:bc,lab:CS,hcl:ES,hsl:SS,luminance:SM,contrast:yUe,sequence:Bi,format:QBe,utcFormat:JBe,utcParse:eUe,utcOffset:lee,utcSequence:fee,timeFormat:mse,timeParse:ZBe,timeOffset:aee,timeSequence:cee,timeUnitSpecifier:KZ,monthFormat:tUe,monthAbbrevFormat:nUe,dayFormat:rUe,dayAbbrevFormat:iUe,quarter:bZ,utcquarter:xZ,week:JZ,utcweek:tee,dayofyear:QZ,utcdayofyear:eee,warn:pUe,info:gUe,debug:mUe,extent(e){return Aa(e)},inScope:hUe,intersect:kse,clampRange:wZ,pinchDistance:wUe,pinchAngle:SUe,screen:UUe,containerSize:WUe,windowSize:VUe,bandspace:PUe,setdata:XBe,pathShape:zUe,panLinear:gZ,panLog:mZ,panPow:yZ,panSymlog:vZ,zoomLinear:JR,zoomLog:ZR,zoomPow:uS,zoomSymlog:eO,encode:KBe,modify:xUe,lassoAppend:qUe,lassoPath:GUe,intersectLasso:YUe},KUe=["view","item","group","xy","x","y"],QUe="event.vega.",Cse="this.",xN={},Ese={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ne(yse+e)}]`,functions:JUe,constants:cse,visitors:xN},kM=dse(Ese);function JUe(e){const t=fse(e);KUe.forEach(n=>t[n]=QUe+n);for(const n in Y1)t[n]=Cse+n;return De(t,lUe(e,Y1,xN)),t}function un(e,t,n){return arguments.length===1?Y1[e]:(Y1[e]=t,n&&(xN[e]=n),kM&&(kM.functions[e]=Cse+e),this)}un("bandwidth",MUe,Kr);un("copy",FUe,Kr);un("domain",RUe,Kr);un("range",DUe,Kr);un("invert",OUe,Kr);un("scale",NUe,Kr);un("gradient",IUe,Kr);un("geoArea",uUe,Kr);un("geoBounds",cUe,Kr);un("geoCentroid",fUe,Kr);un("geoShape",LUe,Kr);un("geoScale",dUe,Kr);un("indata",YBe,aUe);un("data",gse,gN);un("treePath",jUe,gN);un("treeAncestors",BUe,gN);un("vlSelectionTest",jBe,pN);un("vlSelectionIdTest",VBe,pN);un("vlSelectionResolve",HBe,pN);un("vlSelectionTuples",WBe);function Ma(e,t){const n={};let r;try{e=ue(e)?e:ne(e)+"",r=dN(e)}catch{G("Expression parse error: "+e)}r.visit(o=>{if(o.type!==rse)return;const s=o.callee.name,a=Ese.visitors[s];a&&a(s,o.arguments,t,n)});const i=kM(r);return i.globals.forEach(o=>{const s=yse+o;!fe(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:De({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function ZUe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const eVe=ks(["rule"]),ZU=ks(["group","image","rect"]);function tVe(e,t){let n="";return eVe[t]||(e.x2&&(e.x?(ZU[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(ZU[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function wN(e){return(e+"").toLowerCase()}function nVe(e){return wN(e)==="operator"}function rVe(e){return wN(e)==="collect"}function p0(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function iVe(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var oVe={operator:(e,t)=>p0(e,["_"],t.code),parameter:(e,t)=>p0(e,["datum","_"],t.code),event:(e,t)=>p0(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return p0(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+ne(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=tVe(r,n),i+="return m;",p0(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(ne).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,u=`this.f${s}(b)`),iVe(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function sVe(e){const t=this;nVe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function aVe(e){const t=this;if(e.params){const n=t.get(e.id);n||G("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function lVe(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Y(i)?i.map(o=>eV(o,n,t)):eV(i,n,t)}return t}function eV(e,t,n){if(!e||!se(e))return e;for(let r=0,i=tV.length,o;r<i;++r)if(o=tV[r],fe(e,o.key))return o.parse(e,t,n);return e}var tV=[{key:"$ref",parse:uVe},{key:"$key",parse:fVe},{key:"$expr",parse:cVe},{key:"$field",parse:dVe},{key:"$encode",parse:pVe},{key:"$compare",parse:hVe},{key:"$context",parse:gVe},{key:"$subflow",parse:mVe},{key:"$tupleid",parse:yVe}];function uVe(e,t){return t.get(e.$ref)||G("Operator not defined: "+e.$ref)}function cVe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=$i(t.parameterExpression(e.$expr),e.$fields))}function fVe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=rO(e.$key,e.$flat,t.expr.codegen))}function dVe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Do(e.$field,e.$name,t.expr.codegen))}function hVe(e,t){const n="c:"+e.$compare+"_"+e.$order,r=le(e.$compare).map(i=>i&&i.$tupleid?be:i);return t.fn[n]||(t.fn[n]=tO(r,e.$order,t.expr.codegen))}function pVe(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=$i(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function gVe(e,t){return t}function mVe(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function yVe(){return be}function vVe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&G("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function bVe(e){var t=this,n=se(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||G("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const xVe={skip:!0};function wVe(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function SVe(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],xVe)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(No).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function _se(e,t,n,r){return new $se(e,t,n,r)}function $se(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||oVe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function nV(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}$se.prototype=nV.prototype={fork(){const e=new nV(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),rVe(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[wN(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:ZUe,parseOperator:sVe,parseOperatorParameters:aVe,parseParameters:lVe,parseStream:vVe,parseUpdate:bVe,getState:wVe,setState:SVe};function kVe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Ase(t,e.description()))}function Ase(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function CVe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const PT="default";function EVe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:PT,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?ue(i)?i:i.user:PT,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return ue(r)||(i=r.item,r=r.user),CM(e,r&&r!==PT?r:i||r),i},{cursor:t})}function CM(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function xk(e,t){var n=e._runtime.data;return fe(n,t)||G("Unrecognized data set: "+t),n[t]}function _Ve(e,t){return arguments.length<2?xk(this,e).values.value:GE.call(this,e,eh().remove(No).insert(t))}function GE(e,t){Lee(t)||G("Second argument to changes must be a changeset.");const n=xk(this,e);return n.modified=!0,this.pulse(n.input,t)}function $Ve(e,t){return GE.call(this,e,eh().insert(t))}function AVe(e,t){return GE.call(this,e,eh().remove(t))}function Tse(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function Pse(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function YE(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function TVe(e){var t=YE(e),n=Tse(e),r=Pse(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function PVe(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=YE(e),s=t.changedTouches?t.changedTouches[0]:t,o=OE(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=MVe(e,n,o),t}function MVe(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;ue(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:Tr(e),item:Tr(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const rV="view",FVe="timer",RVe="window",OVe={trap:!1};function DVe(e){const t=De({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{Y(r[o])&&(r[o]=ks(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Mse(e,t,n,r){e._eventListeners.push({type:n,sources:le(t),handler:r})}function NVe(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function Ux(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||se(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function IVe(e,t,n){var r=this,i=new iE(n),o=function(u,c){r.runAsync(null,()=>{e===rV&&NVe(r,t)&&u.preventDefault(),i.receive(PVe(r,u,c))})},s;if(e===FVe)Ux(r,"timer",t)&&r.timer(o,t);else if(e===rV)Ux(r,"view",t)&&r.addEventListener(t,o,OVe);else if(e===RVe?Ux(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&Ux(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);Mse(r,s,t,o)}return i}function iV(e){return e.item}function oV(e){return e.item.mark.source}function sV(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function LVe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",iV),oV,sV(e)),this.on(this.events("view","pointerout",iV),oV,sV(t)),this}function zVe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Yi(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const jVe="vega-bind",BVe="vega-bind-name",UVe="vega-bind-radio";function VVe(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=nO(r.debounce,i.update))),(r.input==null&&r.element?WVe:qVe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function WVe(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),Mse(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(HVe(i))}}function HVe(e){return typeof Event<"u"?new Event(e):{type:e}}function qVe(e,t,n,r){const i=r.signal(n.signal),o=Yi("div",{class:jVe}),s=n.input==="radio"?o:o.appendChild(Yi("label"));s.appendChild(Yi("span",{class:BVe},n.name||n.signal)),t.appendChild(o);let a=GVe;switch(n.input){case"checkbox":a=YVe;break;case"select":a=XVe;break;case"radio":a=KVe;break;case"range":a=QVe;break}a(e,s,n,i)}function GVe(e,t,n,r){const i=Yi("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function YVe(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=Yi("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function XVe(e,t,n,r){const i=Yi("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};wk(s,r)&&(l.selected=!0),i.appendChild(Yi("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(wk(n.options[a],s)){i.selectedIndex=a;return}}}function KVe(e,t,n,r){const i=Yi("span",{class:UVe}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};wk(s,r)&&(l.checked=!0);const u=Yi("input",l);u.addEventListener("change",()=>e.update(s));const c=Yi("label",{},(o[a]||s)+"");return c.prepend(u),i.appendChild(c),u}),e.set=s=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)wk(a[u].value,s)&&(a[u].checked=!0)}}function QVe(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||mc(o,i,100),a=Yi("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=Yi("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function wk(e,t){return e===t||e+""==t+""}function Fse(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,Tse(e),Pse(e),YE(e),i,o).background(e.background())}function SN(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function JVe(e,t,n,r){const i=new r(e.loader(),SN(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,YE(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function ZVe(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=DE(r);e=n._el=e?MT(n,e,!0):null,kVe(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||tb,a=e?o.renderer:o.headless;return n._renderer=a?Fse(n,n._renderer,e,a):null,n._handler=JVe(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=MT(n,t,!0):e.appendChild(Yi("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=MT(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{VVe(n,l.element||t,l)})),n}function MT(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const g0=e=>+e||0,eWe=e=>({top:e,bottom:e,left:e,right:e});function aV(e){return se(e)?{top:g0(e.top),bottom:g0(e.bottom),left:g0(e.left),right:g0(e.right)}:eWe(g0(e))}async function kN(e,t,n,r){const i=DE(t),o=i&&i.headless;return o||G("Unrecognized renderer type: "+t),await e.runAsync(),Fse(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function tWe(e,t){e!==ju.Canvas&&e!==ju.SVG&&e!==ju.PNG&&G("Unrecognized image type: "+e);const n=await kN(this,e,t);return e===ju.SVG?nWe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function nWe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function rWe(e,t){return(await kN(this,ju.Canvas,e,t)).canvas()}async function iWe(e){return(await kN(this,ju.SVG,e)).svg()}function oWe(e,t,n){return _se(e,wg,Y1,n).parse(t)}function sWe(e){var t=this._runtime.scales;return fe(t,e)||G("Unrecognized scale or projection: "+e),t[e].value}var Rse="width",Ose="height",CN="padding",lV={skip:!0};function Dse(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===CN?r.left+r.right:0)}function Nse(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===CN?r.top+r.bottom:0)}function aWe(e){var t=e._signals,n=t[Rse],r=t[Ose],i=t[CN];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=Dse(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Nse(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function lWe(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(Rse,n,lV),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(Ose,r,lV),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function uWe(e){return this._runtime.getState(e||{data:cWe,signals:fWe,recurse:!0})}function cWe(e,t){return t.modified&&Y(t.input.value)&&!e.startsWith("_:vega:_")}function fWe(e,t){return!(e==="parent"||t instanceof wg.proxy)}function dWe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function hWe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(W9e(n,t))}function pWe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",gWe(r))}function gWe(e){return e==null?"":Y(e)?Ise(e):se(e)&&!ic(e)?mWe(e):e+""}function mWe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Y(n)?Ise(n):Lse(n))}).join(`
`)}function Ise(e){return"["+e.map(Lse).join(", ")+"]"}function Lse(e){return Y(e)?"[]":se(e)&&!ic(e)?"{}":e}function yWe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function zse(e,t){const n=this;if(t=t||{},Pp.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=De({},e.locale,t.locale);n.locale(Aee(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||ju.Canvas,n._scenegraph=new Rre;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||pWe,n._redraw=!0,n._handler=new tb().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=DVe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=oWe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:De({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=Dse(n,n._width),n._viewHeight=Nse(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,aWe(n),CVe(n),EVe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Vx(e,t){return fe(e._signals,t)?e._signals[t]:G("Unrecognized signal name: "+ne(t))}function jse(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function uV(e,t,n,r){let i=jse(n,r);return i||(i=SN(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function cV(e,t,n){const r=jse(t,n);return r&&t._targets.remove(r),e}re(zse,Pp,{async evaluate(e,t,n){if(await Pp.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,TVe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&jw(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Ase(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Vx(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",aV(e)):aV(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(DE(e)||G("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Pp.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Vx(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:lWe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=SN(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return uV(this,e,Vx(this,e),t)},removeSignalListener(e,t){return cV(this,Vx(this,e),t)},addDataListener(e,t){return uV(this,e,xk(this,e).values,t)},removeDataListener(e,t){return cV(this,xk(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=CM(this,null);this._globalCursor=!!e,t&&CM(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:hWe,events:IVe,finalize:zVe,hover:LVe,data:_Ve,change:GE,insert:$Ve,remove:AVe,scale:sWe,initialize:ZVe,toImageURL:tWe,toCanvas:rWe,toSVG:iWe,getState:uWe,setState:dWe,_watchPixelRatio:yWe});const vWe="view",Sk="[",kk="]",Bse="{",Use="}",bWe=":",Vse=",",xWe="@",wWe=">",SWe=/[[\]{}]/,kWe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Wse,Hse;function Uc(e,t,n){return Wse=t||vWe,Hse=n||kWe,qse(e.trim()).map(EM)}function CWe(e){return Hse[e]}function Gy(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function qse(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Gy(e,i,Vse,Sk+Bse,kk+Use),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function EM(e){return e[0]==="["?EWe(e):_We(e)}function EWe(e){const t=e.length;let n=1,r;if(n=Gy(e,n,kk,Sk,kk),n===t)throw"Empty between selector: "+e;if(r=qse(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==wWe)throw"Expected '>' after between selector: "+e;r=r.map(EM);const i=EM(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function _We(e){const t={source:Wse},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,u;if(e[s-1]===Use){if(a=e.lastIndexOf(Bse),a>=0){try{r=$We(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===xWe&&(i=++a),l=Gy(e,a,bWe),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=Gy(e,a,Sk),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),u=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=Gy(e,a,kk),a===s)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==Sk)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||SWe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):CWe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function $We(e){const t=e.split(Vse);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function AWe(e){return se(e)?e:{type:e||"pad"}}const m0=e=>+e||0,TWe=e=>({top:e,bottom:e,left:e,right:e});function PWe(e){return se(e)?e.signal?e:{top:m0(e.top),bottom:m0(e.bottom),left:m0(e.left),right:m0(e.right)}:TWe(m0(e))}const On=e=>se(e)&&!Y(e)?De({},e):{value:e};function fV(e,t,n,r){return n!=null?(se(n)&&!Y(n)||Y(n)&&n.length&&se(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function rr(e,t,n){for(const r in t)fV(e,r,t[r]);for(const r in n)fV(e,r,n[r],"update")}function km(e,t,n){for(const r in t)n&&fe(n,r)||(e[r]=De(e[r]||{},t[r]));return e}function Vh(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const EN="mark",_N="frame",$N="scope",MWe="axis",FWe="axis-domain",RWe="axis-grid",OWe="axis-label",DWe="axis-tick",NWe="axis-title",IWe="legend",LWe="legend-band",zWe="legend-entry",jWe="legend-gradient",Gse="legend-label",BWe="legend-symbol",UWe="legend-title",VWe="title",WWe="title-text",HWe="title-subtitle";function qWe(e,t,n,r,i){const o={},s={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!Vh(l,e)&&FT(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===_N?i.group:n===EN?De({},i.mark,i[t]):null;for(l in c)u=Vh(l,e)||(l==="fill"||l==="stroke")&&(Vh("fill",e)||Vh("stroke",e)),u||FT(o,l,c[l]);le(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Vh(h,e)||FT(o,h,d[h])}),e=De({},e);for(l in o)c=o[l],c.signal?(a=a||{})[l]=c:s[l]=c;return e.enter=De(s,e.enter),a&&(e.update=De(a,e.update)),e}function FT(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Yse=e=>ue(e)?ne(e):e.signal?`(${e.signal})`:Xse(e);function XE(e){if(e.gradient!=null)return YWe(e);let t=e.signal?`(${e.signal})`:e.color?GWe(e.color):e.field!=null?Xse(e.field):e.value!==void 0?ne(e.value):void 0;return e.scale!=null&&(t=XWe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${i2(e.exponent)})`),e.mult!=null&&(t+=`*${i2(e.mult)}`),e.offset!=null&&(t+=`+${i2(e.offset)}`),e.round&&(t=`round(${t})`),t}const Wx=(e,t,n,r)=>`(${e}(${[t,n,r].map(XE).join(",")})+'')`;function GWe(e){return e.c?Wx("hcl",e.h,e.c,e.l):e.h||e.s?Wx("hsl",e.h,e.s,e.l):e.l||e.a?Wx("lab",e.l,e.a,e.b):e.r||e.g||e.b?Wx("rgb",e.r,e.g,e.b):null}function YWe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ne(n));for(;t.length&&qe(t)==null;)t.pop();return t.unshift(Yse(e.gradient)),`gradient(${t.join(",")})`}function i2(e){return se(e)?"("+XE(e)+")":e}function Xse(e){return Kse(se(e)?e:{datum:e})}function Kse(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):G("Invalid field reference: "+ne(e));return e.signal||(r=ue(r)?Na(r).map(ne).join("]["):Kse(r)),t+"["+r+"]"}function XWe(e,t){const n=Yse(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+i2(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function KWe(e){let t="";return e.forEach(n=>{const r=XE(n);t+=n.test?`(${n.test})?${r}:`:r}),qe(t)===":"&&(t+="null"),t}function Qse(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=qWe(e,t,n,r,i.config);for(const a in e)s[a]=QWe(e[a],t,o,i);return o}function QWe(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=ZWe(JWe(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function JWe(e){return Y(e)?KWe(e):XE(e)}function ZWe(e,t,n,r){const i=Ma(e,t);return i.$fields.forEach(o=>r[o]=1),De(n,i.$params),i.$expr}const eHe="outer",tHe=["value","update","init","react","bind"];function dV(e,t){G(e+' for "outer" push: '+ne(t))}function Jse(e,t){const n=e.name;if(e.push===eHe)t.signals[n]||dV("No prior signal definition",n),tHe.forEach(r=>{e[r]!==void 0&&dV("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function _M(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function KE(e,t,n,r){return new _M(e,t,n,r)}function Ck(e,t){return KE("operator",e,t)}function ve(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function X1(e,t){return t?{$field:e,$name:t}:{$field:e}}const $M=X1("key");function hV(e,t){return{$compare:e,$order:t}}function nHe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const rHe="ascending",iHe="descending";function oHe(e){return se(e)?(e.order===iHe?"-":"+")+QE(e.op,e.field):""}function QE(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const AN="scope",AM="view";function kn(e){return e&&e.signal}function sHe(e){return e&&e.expr}function o2(e){if(kn(e))return!0;if(se(e)){for(const t in e)if(o2(e[t]))return!0}return!1}function rs(e,t){return e??t}function ad(e){return e&&e.signal||e}const pV="timer";function K1(e,t){return(e.merge?lHe:e.stream?uHe:e.type?cHe:G("Invalid stream specification: "+ne(e)))(e,t)}function aHe(e){return e===AN?AM:e||AM}function lHe(e,t){const n=e.merge.map(i=>K1(i,t)),r=TN({merge:n},e,t);return t.addStream(r).id}function uHe(e,t){const n=K1(e.stream,t),r=TN({stream:n},e,t);return t.addStream(r).id}function cHe(e,t){let n;e.type===pV?(n=t.event(pV,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(aHe(e.source),e.type);const r=TN({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function TN(e,t,n){let r=t.between;return r&&(r.length!==2&&G('Stream "between" parameter must have 2 entries: '+ne(t)),e.between=[K1(r[0],n),K1(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(fHe(t.marktype,t.markname,t.markrole)),t.source===AN&&r.push("inScope(event.item)"),r.length&&(e.filter=Ma("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function fHe(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const dHe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function hHe(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||G("Signal update missing events specification."),ue(o)&&(o=Uc(o,t.isSubscope()?AN:AM)),o=le(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[gHe(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&G("Signal encode and update are mutually exclusive."),s="encode(item(),"+ne(r)+")"),i.update=ue(s)?Ma(s,t):s.expr!=null?Ma(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:dHe,$params:{$value:t.signalRef(s.signal)}}:G("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(De(pHe(l,t),i)))}function pHe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):K1(e,t)}}function gHe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function mHe(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?G("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Ma(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>hHe(i,t,n.id))}const xt=e=>(t,n,r)=>KE(e,n,t||void 0,r),Zse=xt("aggregate"),yHe=xt("axisticks"),eae=xt("bound"),Ds=xt("collect"),gV=xt("compare"),vHe=xt("datajoin"),tae=xt("encode"),bHe=xt("expression"),xHe=xt("facet"),wHe=xt("field"),SHe=xt("key"),kHe=xt("legendentries"),CHe=xt("load"),EHe=xt("mark"),_He=xt("multiextent"),$He=xt("multivalues"),AHe=xt("overlap"),THe=xt("params"),nae=xt("prefacet"),PHe=xt("projection"),MHe=xt("proxy"),FHe=xt("relay"),rae=xt("render"),RHe=xt("scale"),ih=xt("sieve"),OHe=xt("sortitems"),iae=xt("viewlayout"),DHe=xt("values");let NHe=0;const oae={min:"min",max:"max",count:"sum"};function IHe(e,t){const n=e.type||"linear";Hne(n)||G("Unrecognized scale type: "+ne(n)),t.addScale(e.name,{type:n,domain:void 0})}function LHe(e,t){const n=t.getScale(e.name).params;let r;n.domain=sae(e.domain,e,t),e.range!=null&&(n.range=lae(e,t,n)),e.interpolate!=null&&YHe(e.interpolate,n),e.nice!=null&&(n.nice=GHe(e.nice,t)),e.bins!=null&&(n.bins=qHe(e.bins,t));for(r in e)fe(n,r)||r==="name"||(n[r]=Ao(e[r],t))}function Ao(e,t){return se(e)?e.signal?t.signalRef(e.signal):G("Unsupported object: "+ne(e)):e}function s2(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Ao(n,t))}function JE(e){G("Can not find data set: "+ne(e))}function sae(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&G("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Y(e)?zHe:e.fields?BHe:jHe)(e,t,n)}function zHe(e,t,n){return e.map(r=>Ao(r,n))}function jHe(e,t,n){const r=n.getData(e.data);return r||JE(e.data),_g(t.type)?r.valuesRef(n,e.field,aae(e.sort,!1)):Yne(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function BHe(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=ue(s)?{data:r,field:s}:Y(s)||s.signal?UHe(s,n):s,o.push(s),o),[]);return(_g(t.type)?VHe:Yne(t.type)?WHe:HHe)(e,n,i)}function UHe(e,t){const n="_:vega:_"+NHe++,r=Ds({});if(Y(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ne(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,ih({})]),{data:n,field:"data"}}function VHe(e,t,n){const r=aae(e.sort,!0);let i,o;const s=n.map(u=>{const c=t.getData(u.data);return c||JE(u.data),c.countsRef(t,u.field,r)}),a={groupby:$M,pulse:s};r&&(i=r.op||"count",o=r.field?QE(i,r.field):"count",a.ops=[oae[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(Zse(a));const l=t.add(Ds({pulse:ve(i)}));return o=t.add(DHe({field:$M,sort:t.sortRef(r),pulse:ve(l)})),ve(o)}function aae(e,t){return e&&(!e.field&&!e.op?se(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?G("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!oae[e.op]&&G("Multiple domain scales can not be sorted using "+e.op)),e}function WHe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||JE(i.data),o.domainRef(t,i.field)});return ve(t.add($He({values:r})))}function HHe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||JE(i.data),o.extentRef(t,i.field)});return ve(t.add(_He({extents:r})))}function qHe(e,t){return e.signal||Y(e)?s2(e,t):t.objectProperty(e)}function GHe(e,t){return e.signal?t.signalRef(e.signal):se(e)?{interval:Ao(e.interval),step:Ao(e.step)}:Ao(e)}function YHe(e,t){t.interpolate=Ao(e.type||e),e.gamma!=null&&(t.interpolateGamma=Ao(e.gamma))}function lae(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(ue(i)){if(r&&fe(r,i))return e=De({},e,{range:r[i]}),lae(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=_g(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:G("Unrecognized scale range value: "+ne(i))}else if(i.scheme){n.scheme=Y(i.scheme)?s2(i.scheme,t):Ao(i.scheme,t),i.extent&&(n.schemeExtent=s2(i.extent,t)),i.count&&(n.schemeCount=Ao(i.count,t));return}else if(i.step){n.rangeStep=Ao(i.step,t);return}else{if(_g(e.type)&&!Y(i))return sae(i,e,t);Y(i)||G("Unsupported range type: "+ne(i))}return i.map(o=>(Y(o)?s2:Ao)(o,t))}function XHe(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=TM(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=TM(n[i],i,t));t.addProjection(e.name,r)}function TM(e,t,n){return Y(e)?e.map(r=>TM(r,t,n)):se(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:G("Unsupported parameter object: "+ne(e)):e}const Ns="top",Cm="left",Em="right",Cc="bottom",uae="center",KHe="vertical",QHe="start",JHe="middle",ZHe="end",PM="index",PN="label",eqe="offset",Dg="perc",tqe="perc2",Mo="value",cb="guide-label",MN="guide-title",nqe="group-title",rqe="group-subtitle",mV="symbol",a2="gradient",MM="discrete",FM="size",iqe="shape",oqe="fill",sqe="stroke",aqe="strokeWidth",lqe="strokeDash",uqe="opacity",FN=[FM,iqe,oqe,sqe,aqe,lqe,uqe],fb={name:1,style:1,interactive:1},Ye={value:0},Fo={value:1},ZE="group",cae="rect",RN="rule",cqe="symbol",oh="text";function Q1(e){return e.type=ZE,e.interactive=e.interactive||!1,e}function Ai(e,t){const n=(r,i)=>rs(e[r],rs(t[r],i));return n.isVertical=r=>KHe===rs(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>rs(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>rs(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>rs(e.columns,rs(t.columns,+n.isVertical(!0))),n}function fae(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function fqe(e,t,n){const r=t.config.style[n];return r&&r[e]}function e_(e,t,n){return`item.anchor === '${QHe}' ? ${e} : item.anchor === '${ZHe}' ? ${t} : ${n}`}const ON=e_(ne(Cm),ne(Em),ne(uae));function dqe(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},se(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function dae(e,t){return t?e?se(e)?Object.assign({},e,{offset:dae(e.offset,t)}):{value:e,offset:t}:t:e}function to(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=km(e.encode,t,fb)):e.interactive=!1,e}function hqe(e,t,n,r){const i=Ai(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,u,c,f,d;o?(u=[0,1],c=[0,0],f=s,d=a):(u=[0,0],c=[1,0],f=a,d=s);const h={enter:l={opacity:Ye,x:Ye,y:Ye,width:On(f),height:On(d)},update:De({},l,{opacity:Fo,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Ye}};return rr(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),to({type:cae,role:jWe,encode:h},r)}function pqe(e,t,n,r,i){const o=Ai(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let u,c,f,d,h="";s?(u="y",f="y2",c="x",d="width",h="1-"):(u="x",f="x2",c="y",d="height");const p={opacity:Ye,fill:{scale:t,field:Mo}};p[u]={signal:h+"datum."+Dg,mult:l},p[c]=Ye,p[f]={signal:h+"datum."+tqe,mult:l},p[d]=On(a);const g={enter:p,update:De({},p,{opacity:Fo}),exit:{opacity:Ye}};return rr(g,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),to({type:cae,role:LWe,key:Mo,from:i,encode:g},r)}const gqe=`datum.${Dg}<=0?"${Cm}":datum.${Dg}>=1?"${Em}":"${uae}"`,mqe=`datum.${Dg}<=0?"${Cc}":datum.${Dg}>=1?"${Ns}":"${JHe}"`;function yV(e,t,n,r){const i=Ai(e,t),o=i.isVertical(),s=On(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,f,d,h="";const p={enter:u={opacity:Ye},update:c={opacity:Fo,text:{field:PN}},exit:{opacity:Ye}};return rr(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:rs(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:mqe},f="y",d="x",h="1-"):(u.align=c.align={signal:gqe},u.baseline={value:"top"},f="x",d="y"),u[f]=c[f]={signal:h+"datum."+Dg,mult:a},u[d]=c[d]=s,s.offset=rs(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+PM}:void 0,to({type:oh,role:Gse,style:cb,key:Mo,from:r,encode:p,overlap:l},n)}function yqe(e,t,n,r,i){const o=Ai(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${eqe} : datum.${FM}`,h=u?On(u):{field:FM},p=`datum.${PM}`,g=`max(1, ${i})`;let m,y,v,b,x;h.mult=.5,m={enter:y={opacity:Ye,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Fo,x:y.x,y:y.y},exit:{opacity:Ye}};let w=null,k=null;e.fill||(w=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),rr(m,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",k),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),FN.forEach(A=>{e[A]&&(v[A]=y[A]={scale:e[A],field:Mo})});const S=to({type:cqe,role:BWe,key:Mo,from:f,clip:u?!0:void 0,encode:m},n.symbols),C=On(c);C.offset=o("labelOffset"),m={enter:y={opacity:Ye,x:{signal:d,offset:C},y:h},update:v={opacity:Fo,text:{field:PN},x:y.x,y:y.y},exit:{opacity:Ye}},rr(m,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const E=to({type:oh,role:Gse,style:cb,key:Mo,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:Ye,height:u?On(u):Ye,opacity:Ye},exit:{opacity:Ye},update:v={opacity:Fo,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b=`ceil(item.mark.items.length / ${g})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,x={field:["row",p]}):(v.row.signal=`floor(${p} / ${g})`,v.column.signal=`${p} % ${g}`,x={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:PM}},Q1({role:$N,from:r,encode:km(m,s,fb),marks:[S,E],name:l,interactive:a,sort:x})}function vqe(e,t){const n=Ai(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const DN='item.orient === "left"',NN='item.orient === "right"',t_=`(${DN} || ${NN})`,bqe=`datum.vgrad && ${t_}`,xqe=e_('"top"','"bottom"','"middle"'),wqe=e_('"right"','"left"','"center"'),Sqe=`datum.vgrad && ${NN} ? (${wqe}) : (${t_} && !(datum.vgrad && ${DN})) ? "left" : ${ON}`,kqe=`item._anchor || (${t_} ? "middle" : "start")`,Cqe=`${bqe} ? (${DN} ? -90 : 90) : 0`,Eqe=`${t_} ? (datum.vgrad ? (${NN} ? "bottom" : "top") : ${xqe}) : "top"`;function _qe(e,t,n,r){const i=Ai(e,t),o={enter:{opacity:Ye},update:{opacity:Fo,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ye}};return rr(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:kqe},angle:{signal:Cqe},align:{signal:Sqe},baseline:{signal:Eqe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),to({type:oh,role:UWe,style:MN,from:r,encode:o},n)}function $qe(e,t){let n;return se(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+vV(e.path)+")":e.sphere&&(n="geoShape("+vV(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function vV(e){return se(e)&&e.signal?e.signal:ne(e)}function hae(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===ZE?$N:t||EN}function Aqe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||hae(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Tqe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function IN(e,t){const n=Bee(e.type);n||G("Unrecognized transform type: "+ne(e.type));const r=KE(n.type.toLowerCase(),null,pae(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function pae(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=Pqe(s,t,n)}return r}function Pqe(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return Mqe(e,t,n);if(i===void 0){e.required&&G("Missing required "+ne(t.type)+" parameter: "+ne(e.name));return}else{if(r==="param")return Fqe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!kn(i)?i.map(o=>bV(e,o,n)):bV(e,i,n)}function bV(e,t,n){const r=e.type;if(kn(t))return wV(r)?G("Expression references can not be signals."):RT(r)?n.fieldRef(t):SV(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||RT(r);return i&&Rqe(t)?n.exprRef(t.expr,t.as):i&&Oqe(t)?X1(t.field,t.as):wV(r)?Ma(t,n):Dqe(r)?ve(n.getData(t).values):RT(r)?X1(t):SV(r)?n.compareRef(t):t}}function Mqe(e,t,n){return ue(t.from)||G('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Fqe(e,t,n){const r=t[e.name];return e.array?(Y(r)||G("Expected an array of sub-parameters. Instead: "+ne(r)),r.map(i=>xV(e,i,n))):xV(e,r,n)}function xV(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||G("Unsupported parameter: "+ne(t));const o=De(pae(i,t,n),i.key);return ve(n.add(THe(o)))}const Rqe=e=>e&&e.expr,Oqe=e=>e&&e.field,Dqe=e=>e==="data",wV=e=>e==="expr",RT=e=>e==="field",SV=e=>e==="compare";function Nqe(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||G("Only group marks can be faceted."),r.field!=null?s=a=l2(r,n):(e.data?a=ve(n.getData(e.data).aggregate):(o=IN(De({type:"aggregate",groupby:le(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=l2(r,n),s=a=ve(n.add(o))),i=n.keyRef(r.groupby,!0))):s=ve(n.add(Ds(null,[{}]))),s||(s=l2(e,n)),{key:i,pulse:s,parent:a}}function l2(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ve(t.getData(e.data).output)}function Pd(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Pd.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=ve(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new Pd(e,o,i,r,s)};function gae(e){return ue(e)?e:null}function kV(e,t,n){const r=QE(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function y0(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=oHe(o);let u=gae(i),c,f;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const d=o?{field:$M,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:ve(t.output)};l&&(d.sort=e.sortRef(o)),f=e.add(KE(r,void 0,d)),s&&(t.index[i]=f),c=ve(f),u!=null&&(a[u]=c)}return c}Pd.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=gae(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&kV(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:ve(r.output)},n&&n.field&&kV(e,l,n),a=e.add(Zse(l)),s=e.add(Ds({pulse:ve(a)})),s={agg:a,ref:ve(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return ve(this.values)},extentRef(e,t){return y0(e,this,"extent","extent",t,!1)},domainRef(e,t){return y0(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return y0(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return y0(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return y0(e,this,"indata","tupleindex",t,!0,!0)}};function Iqe(e,t,n){const r=e.from.facet,i=r.name,o=l2(r,t);let s;r.name||G("Facet must have a name: "+ne(r)),r.data||G("Facet must reference a data set: "+ne(r)),r.field?s=t.add(nae({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(xHe({key:t.keyRef(r.groupby),group:ve(t.proxy(n.parent)),pulse:o})):G("Facet must specify groupby or field: "+ne(r));const a=t.fork(),l=a.add(Ds()),u=a.add(ih({pulse:ve(l)}));a.addData(i,new Pd(a,l,l,u)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function Lqe(e,t,n){const r=t.add(nae({pulse:n.pulse})),i=t.fork();i.add(ih()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function mae(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(Ck()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=Ma(u,t);l.update=c.$expr,l.params=c.$params}function n_(e,t){const n=hae(e),r=e.type===ZE,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===$N||n===_N,a,l,u,c,f,d,h;const p=n===EN||s||i,g=Nqe(e.from,r,t);l=t.add(vHe({key:g.key||(e.key?X1(e.key):void 0),pulse:g.pulse,clean:!r}));const m=ve(l);l=u=t.add(Ds({pulse:m})),l=t.add(EHe({markdef:Aqe(e),interactive:Tqe(e.interactive,t),clip:$qe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:ve(l)}));const y=ve(l);l=c=t.add(tae(Qse(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const S=IN(k,t),C=S.metadata;(C.generates||C.changes)&&G("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=ve(l),t.add(l=S)}),e.sort&&(l=t.add(OHe({sort:t.compareRef(e.sort),pulse:ve(l)})));const v=ve(l);(i||s)&&(s=t.add(iae({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=ve(s));const b=t.add(eae({mark:y,pulse:d||v}));h=ve(b),r&&(p&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(v,d||h,m),i?Iqe(e,t,g):p?Lqe(e,t,g):t.parse(e),t.popState(),p&&(s&&a.push(s),a.push(b))),o&&(h=zqe(o,h,t));const x=t.add(rae({pulse:h})),w=t.add(ih({pulse:ve(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Pd(t,u,x,w)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&G("Marks only support modify triggers."),mae(k,t,f)}))}function zqe(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:kn(o)?n.signalRef(o.signal):o,method:kn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=kn(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return ve(n.add(AHe(s)))}function jqe(e,t){const n=t.config.legend,r=e.encode||{},i=Ai(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,u={};let c=0,f,d,h;FN.forEach(b=>e[b]?(u[b]=e[b],c=c||e[b]):0),c||G("Missing valid scale for legend.");const p=Bqe(e,t.scaleType(c)),g={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},m=ve(t.add(Ds(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},v=ve(t.add(kHe(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===a2?(h=[hqe(e,c,n,r.gradient),yV(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${ad(i.gradientLength())})/100))`)):p===MM?h=[pqe(e,c,n,r.gradient,v),yV(e,n,r.labels,v)]:(f=vqe(e,n),h=[yqe(e,n,r,v,ad(f.columns))],d.size=Wqe(e,t,h[0].marks)),h=[Q1({role:zWe,from:m,encode:y,marks:h,layout:f,interactive:a})],g.title&&h.push(_qe(e,n,r.title,m)),n_(Q1({role:IWe,from:m,encode:km(Vqe(i,e,n),o,fb),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function Bqe(e,t){let n=e.type||mV;return!e.type&&Uqe(e)===1&&(e.fill||e.stroke)&&(n=ND(t)?a2:kP(t)?MM:mV),n!==a2?n:kP(t)?MM:a2}function Uqe(e){return FN.reduce((t,n)=>t+(e[n]?1:0),0)}function Vqe(e,t,n){const r={enter:{},update:{}};return rr(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Wqe(e,t,n){const r=ad(CV("size",e,n)),i=ad(CV("strokeWidth",e,n)),o=ad(Hqe(n[1].encode,t,cb));return Ma(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function CV(e,t,n){return t[e]?`scale("${t[e]}",datum)`:fae(e,n[0].encode)}function Hqe(e,t,n){return fae("fontSize",e)||fqe("fontSize",t,n)}const qqe=`item.orient==="${Cm}"?-90:item.orient==="${Em}"?90:0`;function Gqe(e,t){e=ue(e)?{text:e}:e;const n=Ai(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],u={},c=ve(t.add(Ds(null,[u])));return l.push(Kqe(e,n,Yqe(e),c)),e.subtitle&&l.push(Qqe(e,n,r.subtitle,c)),n_(Q1({role:VWe,from:c,encode:Xqe(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function Yqe(e){const t=e.encode;return t&&t.title||De({name:e.name,interactive:e.interactive,style:e.style},t)}function Xqe(e,t){const n={enter:{},update:{}};return rr(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:ON},angle:{signal:qqe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),km(n,t,fb)}function Kqe(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return rr(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),to({type:oh,role:WWe,style:nqe,from:r,encode:s},n)}function Qqe(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return rr(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),to({type:oh,role:HWe,style:rqe,from:r,encode:s},n)}function Jqe(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(IN(r,t))}),e.on&&e.on.forEach(r=>{mae(r,t,e.name)}),t.addDataPipeline(e.name,Zqe(e,t,n))}function Zqe(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,u,c,f;for(e.values?kn(e.values)||o2(e.format)?(r.push(EV(t,e)),r.push(i=rf())):r.push(i=rf({$ingest:e.values,$format:e.format})):e.url?o2(e.url)||o2(e.format)?(r.push(EV(t,e)),r.push(i=rf())):r.push(i=rf({$request:e.url,$format:e.format})):e.source&&(i=a=le(e.source).map(d=>ve(t.getData(d).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!i&&!f.source&&r.push(i=rf()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(u=a.length-1,r[0]=FHe({derive:o,pulse:u?a:a[0]}),(o||u)&&r.splice(1,0,rf())),i||r.push(rf()),r.push(ih({})),r}function rf(e){const t=Ds({},e);return t.metadata={source:!0},t}function EV(e,t){return CHe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const yae=e=>e===Cc||e===Ns,r_=(e,t,n)=>kn(e)?rGe(e.signal,t,n):e===Cm||e===Ns?t:n,Dn=(e,t,n)=>kn(e)?tGe(e.signal,t,n):yae(e)?t:n,xs=(e,t,n)=>kn(e)?nGe(e.signal,t,n):yae(e)?n:t,vae=(e,t,n)=>kn(e)?iGe(e.signal,t,n):e===Ns?{value:t}:{value:n},eGe=(e,t,n)=>kn(e)?oGe(e.signal,t,n):e===Em?{value:t}:{value:n},tGe=(e,t,n)=>bae(`${e} === '${Ns}' || ${e} === '${Cc}'`,t,n),nGe=(e,t,n)=>bae(`${e} !== '${Ns}' && ${e} !== '${Cc}'`,t,n),rGe=(e,t,n)=>LN(`${e} === '${Cm}' || ${e} === '${Ns}'`,t,n),iGe=(e,t,n)=>LN(`${e} === '${Ns}'`,t,n),oGe=(e,t,n)=>LN(`${e} === '${Em}'`,t,n),bae=(e,t,n)=>(t=t!=null?On(t):t,n=n!=null?On(n):n,_V(t)&&_V(n)?(t=t?t.signal||ne(t.value):null,n=n?n.signal||ne(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[De({test:e},t)].concat(n||[])),_V=e=>e==null||Object.keys(e).length===1,LN=(e,t,n)=>({signal:`${e} ? (${vp(t)}) : (${vp(n)})`}),sGe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Cm}' ? (${vp(r)}) : `:"")+(n!=null?`${e} === '${Cc}' ? (${vp(n)}) : `:"")+(i!=null?`${e} === '${Em}' ? (${vp(i)}) : `:"")+(t!=null?`${e} === '${Ns}' ? (${vp(t)}) : `:"")+"(null)"}),vp=e=>kn(e)?e.signal:e==null?null:ne(e),aGe=(e,t)=>t===0?0:kn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Op=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Fh(e,t,n,r){let i;if(t&&fe(t,e))return t[e];if(fe(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[MN][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[cb][i]}return null}function $V(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function lGe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,u;if(kn(s)){const f=$V([n.axisX,n.axisY]),d=$V([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of f)a[u]=Dn(s,Fh(u,n.axisX,i,r),Fh(u,n.axisY,i,r));l={};for(u of d)l[u]=sGe(s.signal,Fh(u,n.axisTop,i,r),Fh(u,n.axisBottom,i,r),Fh(u,n.axisLeft,i,r),Fh(u,n.axisRight,i,r))}else a=s===Ns||s===Cc?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?De({},i,a,l,o):i}function uGe(e,t,n,r){const i=Ai(e,t),o=e.orient;let s,a;const l={enter:s={opacity:Ye},update:a={opacity:Fo},exit:{opacity:Ye}};rr(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=AV(e,0),c=AV(e,1);return s.x=a.x=Dn(o,u,Ye),s.x2=a.x2=Dn(o,c),s.y=a.y=xs(o,u,Ye),s.y2=a.y2=xs(o,c),to({type:RN,role:FWe,from:r,encode:l},n)}function AV(e,t){return{scale:e.scale,range:t}}function cGe(e,t,n,r,i){const o=Ai(e,t),s=e.orient,a=e.gridScale,l=r_(s,1,-1),u=fGe(e.offset,l);let c,f,d;const h={enter:c={opacity:Ye},update:d={opacity:Fo},exit:f={opacity:Ye}};rr(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:Mo,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},g=Dn(s,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:De(g,{mult:l,offset:u});return c.x=d.x=Dn(s,p,m),c.y=d.y=xs(s,p,m),c.x2=d.x2=xs(s,y),c.y2=d.y2=Dn(s,y),f.x=Dn(s,p),f.y=xs(s,p),to({type:RN,role:RWe,key:Mo,from:r,encode:h},n)}function fGe(e,t){if(t!==1)if(!se(e))e=kn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=De({},e);for(;n.mult!=null;)if(se(n.mult))n=n.mult=De({},n.mult);else return n.mult=kn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function dGe(e,t,n,r,i,o){const s=Ai(e,t),a=e.orient,l=r_(a,-1,1);let u,c,f;const d={enter:u={opacity:Ye},update:f={opacity:Fo},exit:c={opacity:Ye}};rr(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=On(i);h.mult=l;const p={scale:e.scale,field:Mo,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=u.y=Dn(a,Ye,p),f.y2=u.y2=Dn(a,h),c.x=Dn(a,p),f.x=u.x=xs(a,Ye,p),f.x2=u.x2=xs(a,h),c.y=xs(a,p),to({type:RN,role:DWe,key:Mo,from:r,encode:d},n)}function OT(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function hGe(e,t,n,r,i,o){const s=Ai(e,t),a=e.orient,l=e.scale,u=r_(a,-1,1),c=ad(s("labelFlush")),f=ad(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let p=c===0||!!c,g;const m=On(i);m.mult=u,m.offset=On(s("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:Mo,band:.5,offset:dae(o.offset,s("labelOffset"))},v=Dn(a,p?OT(l,c,'"left"','"right"','"center"'):{value:"center"},eGe(a,"left","right")),b=Dn(a,vae(a,"bottom","top"),p?OT(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=OT(l,c,`-(${f})`,f,0);p=p&&f;const w={opacity:Ye,x:Dn(a,y,m),y:xs(a,y,m)},k={enter:w,update:g={opacity:Fo,text:{field:PN},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:Ye,x:w.x,y:w.y}};rr(k,{dx:!d&&p?Dn(a,x):null,dy:!h&&p?xs(a,x):null}),rr(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const S=s("labelBound");let C=s("labelOverlap");return C=C||S?{separation:s("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:l,orient:a,tolerance:S}:null}:void 0,g.align!==v&&(g.align=Op(g.align,v)),g.baseline!==b&&(g.baseline=Op(g.baseline,b)),to({type:oh,role:OWe,style:cb,key:Mo,from:r,encode:k,overlap:C},n)}function pGe(e,t,n,r){const i=Ai(e,t),o=e.orient,s=r_(o,-1,1);let a,l;const u={enter:a={opacity:Ye,anchor:On(i("titleAnchor",null)),align:{signal:ON}},update:l=De({},a,{opacity:Fo,text:On(e.title)}),exit:{opacity:Ye}},c={signal:`lerp(range("${e.scale}"), ${e_(0,1,.5)})`};return l.x=Dn(o,c),l.y=xs(o,c),a.angle=Dn(o,Ye,aGe(s,90)),a.baseline=Dn(o,vae(o,Cc,Ns),{value:Cc}),l.angle=a.angle,l.baseline=a.baseline,rr(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),gGe(i,o,u,n),u.update.align=Op(u.update.align,a.align),u.update.angle=Op(u.update.angle,a.angle),u.update.baseline=Op(u.update.baseline,a.baseline),to({type:oh,role:NWe,style:MN,from:r,encode:u},n)}function gGe(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=Op(On(a),n.update[l]),!1):!Vh(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?On(s):Dn(t,On(s),On(o))}function mGe(e,t){const n=lGe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=Ai(e,n),u=dqe(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},f=ve(t.add(Ds({},[c]))),d=ve(t.add(yHe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(cGe(e,n,r.grid,d,u)),c.ticks&&(p=l("tickSize"),h.push(dGe(e,n,r.ticks,d,p,u))),c.labels&&(p=c.ticks?p:0,h.push(hGe(e,n,r.labels,d,p,u))),c.domain&&h.push(uGe(e,n,r.domain,f)),c.title&&h.push(pGe(e,n,r.title,f)),n_(Q1({role:MWe,from:f,encode:km(yGe(l,e),i,fb),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function yGe(e,t){const n={enter:{},update:{}};return rr(n,{orient:e("orient"),offset:e("offset")||0,position:rs(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function xae(e,t,n){const r=le(e.signals),i=le(e.scales);return n||r.forEach(o=>Jse(o,t)),le(e.projections).forEach(o=>XHe(o,t)),i.forEach(o=>IHe(o,t)),le(e.data).forEach(o=>Jqe(o,t)),i.forEach(o=>LHe(o,t)),(n||r).forEach(o=>mHe(o,t)),le(e.axes).forEach(o=>mGe(o,t)),le(e.marks).forEach(o=>n_(o,t)),le(e.legends).forEach(o=>jqe(o,t)),e.title&&Gqe(e.title,t),t.parseLambdas(),t}const vGe=e=>km({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function bGe(e,t){const n=t.config,r=ve(t.root=t.add(Ck())),i=xGe(e,n);i.forEach(u=>Jse(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Ds()),s=t.add(tae(Qse(vGe(e.encode),ZE,_N,e.style,t,{pulse:ve(o)}))),a=t.add(iae({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:ve(s)}));t.operators.pop(),t.pushState(ve(s),ve(a),null),xae(e,t,i),t.operators.push(a);let l=t.add(eae({mark:r,pulse:ve(a)}));return l=t.add(rae({pulse:ve(l)})),l=t.add(ih({pulse:ve(l)})),t.addData("root",new Pd(t,o,o,l)),t}function v0(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function xGe(e,t){const n=s=>rs(e[s],t[s]),r=[v0("background",n("background")),v0("autosize",AWe(n("autosize"))),v0("padding",PWe(n("padding"))),v0("width",n("width")||0),v0("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return le(e.signals).forEach(s=>{fe(i,s.name)?s=De(i[s.name],s):r.push(s),o[s.name]=s}),le(t.signals).forEach(s=>{!fe(o,s.name)&&!fe(i,s.name)&&r.push(s)}),r}function wae(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function TV(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}wae.prototype=TV.prototype={parse(e){return xae(e,this)},fork(){return new TV(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof _M?ve(e):e;return this.add(MHe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(ve(this.add(ih({pulse:e})))),this._parent.push(t),this._lookup.push(n?ve(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return qe(this._parent)},encode(){return qe(this._encode)},lookup(){return qe(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ue(e))return X1(e,t);e.signal||G("Unsupported field reference: "+ne(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=ve(this.add(wHe(i)))}return r},compareRef(e){let t=!1;const n=o=>kn(o)?(t=!0,this.signalRef(o.signal)):sHe(o)?(t=!0,this.exprRef(o.expr)):o,r=le(e.field).map(n),i=le(e.order).map(n);return t?ve(this.add(gV({fields:r,orders:i}))):hV(r,i)},keyRef(e,t){let n=!1;const r=o=>kn(o)?(n=!0,ve(i[o.signal])):o,i=this.signals;return e=le(e).map(r),n?ve(this.add(SHe({fields:e,flat:t}))):nHe(e,t)},sortRef(e){if(!e)return e;const t=QE(e.op,e.field),n=e.order||rHe;return n.signal?ve(this.add(gV({fields:t,orders:this.signalRef(n.signal)}))):hV(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return fe(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&G("Duplicate signal name: "+ne(e));const n=t instanceof _M?t:this.add(Ck(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||G("Unrecognized signal name: "+ne(e)),this.signals[e]},signalRef(e){return this.signals[e]?ve(this.signals[e]):(fe(this.lambdas,e)||(this.lambdas[e]=this.add(Ck(null))),ve(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Ma(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!se(e)?e:this.signalRef(e.signal||zN(e))},exprRef(e,t){const n={expr:Ma(e,this)};return t&&(n.expr.$name=t),ve(this.add(bHe(n)))},addBinding(e,t){this.bindings||G("Nested signals do not support binding: "+ne(e)),this.bindings.push(De({signal:e},t))},addScaleProj(e,t){fe(this.scales,e)&&G("Duplicate scale or projection name: "+ne(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,RHe(t))},addProjection(e,t){this.addScaleProj(e,PHe(t))},getScale(e){return this.scales[e]||G("Unrecognized scale name: "+ne(e)),this.scales[e]},scaleRef(e){return ve(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return fe(this.data,e)&&G("Duplicate data set name: "+ne(e)),this.data[e]=t},getData(e){return this.data[e]||G("Undefined data set name: "+ne(e)),this.data[e]},addDataPipeline(e,t){return fe(this.data,e)&&G("Duplicate data set name: "+ne(e)),this.addData(e,Pd.fromEntries(this,t))}};function zN(e){return(Y(e)?wGe:SGe)(e)}function wGe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(se(i)?i.signal||zN(i):ne(i))}return n+"]"}function SGe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ne(r)+":"+(se(i)?i.signal||zN(i):ne(i));return t+"}"}function kGe(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function CGe(e,t,n){return se(e)||G("Input Vega specification must be an object."),t=fm(kGe(),t,e.config),bGe(e,new wae(t,n)).toRuntime()}var EGe="5.30.0";De(wg,$Re,QIe,TLe,p9e,lze,D7e,p7e,I7e,aje,yje,Cje);const _Ge=Object.freeze(Object.defineProperty({__proto__:null,Bounds:gn,CanvasHandler:tb,CanvasRenderer:LS,DATE:Si,DAY:xr,DAYOFYEAR:Ta,Dataflow:Pp,Debug:cZ,Error:YC,EventStream:iE,Gradient:ure,GroupItem:$E,HOURS:Ji,Handler:a6,HybridHandler:eie,HybridRenderer:OP,Info:uZ,Item:_E,MILLISECONDS:_s,MINUTES:Zi,MONTH:Cr,Marks:eo,MultiPulse:xO,None:lZ,Operator:kt,Parameters:rE,Pulse:oc,QUARTER:wi,RenderType:ju,Renderer:eb,ResourceLoader:mre,SECONDS:Io,SVGHandler:Bre,SVGRenderer:h6,SVGStringRenderer:Zre,Scenegraph:Rre,TIME_UNITS:cO,Transform:H,View:zse,WEEK:wn,Warn:KR,YEAR:er,accessor:$i,accessorFields:kr,accessorName:tn,array:le,ascending:QC,bandwidthNRD:CO,bin:Wee,bootstrapCI:Hee,boundClip:cie,boundContext:Kv,boundItem:TP,boundMark:Tre,boundStroke:Xl,changeset:eh,clampRange:wZ,codegenExpression:dse,compare:tO,constant:Tr,cumulativeLogNormal:PO,cumulativeNormal:sE,cumulativeUniform:OO,dayofyear:QZ,debounce:nO,defaultLocale:gO,definition:Bee,densityLogNormal:TO,densityNormal:EO,densityUniform:RO,domChild:bn,domClear:wo,domCreate:Lu,domFind:s6,dotbin:qee,error:G,expressionFunction:un,extend:De,extent:Aa,extentIndex:SZ,falsy:du,fastmap:hm,field:Do,flush:kZ,font:FE,fontFamily:Zv,fontSize:za,format:zw,formatLocale:gS,formats:vO,hasOwnProperty:fe,id:Mv,identity:Ar,inferType:Pee,inferTypes:Mee,ingest:at,inherits:re,inrange:hp,interpolate:ID,interpolateColors:CE,interpolateRange:Xne,intersect:sie,intersectBoxLine:pp,intersectPath:HD,intersectPoint:qD,intersectRule:vre,isArray:Y,isBoolean:Nc,isDate:ic,isFunction:Ne,isIterable:CZ,isNumber:Je,isObject:se,isRegExp:EZ,isString:ue,isTuple:tE,key:rO,lerp:_Z,lineHeight:wc,loader:ZC,locale:Aee,logger:QR,lruCache:$Z,markup:d6,merge:AZ,mergeConfig:fm,multiLineOffset:r6,one:cm,pad:TZ,panLinear:gZ,panLog:mZ,panPow:yZ,panSymlog:vZ,parse:CGe,parseExpression:dN,parseSelector:Uc,path:fE,pathCurves:UD,pathEqual:fie,pathParse:$g,pathRectangle:dre,pathRender:I1,pathSymbols:fre,pathTrail:hre,peek:qe,point:OE,projection:F6,quantileLogNormal:MO,quantileNormal:aE,quantileUniform:DO,quantiles:SO,quantizeInterpolator:Kne,quarter:bZ,quartiles:kO,get random(){return Lo},randomInteger:M4e,randomKDE:$O,randomLCG:P4e,randomLogNormal:Yee,randomMixture:Xee,randomNormal:_O,randomUniform:Kee,read:Oee,regressionConstant:NO,regressionExp:Jee,regressionLinear:IO,regressionLoess:tte,regressionLog:Qee,regressionPoly:ete,regressionPow:Zee,regressionQuad:LO,renderModule:DE,repeat:V0,resetDefaultLocale:$Fe,resetSVGClipId:gre,resetSVGDefIds:gIe,responseType:Ree,runtimeContext:_se,sampleCurve:uE,sampleLogNormal:AO,sampleNormal:oE,sampleUniform:FO,scale:et,sceneEqual:p6,sceneFromJSON:Mre,scenePickVisit:PS,sceneToJSON:Pre,sceneVisit:$s,sceneZOrder:GD,scheme:LD,serializeXML:Xre,setHybridRendererOptions:fIe,setRandom:A4e,span:Fv,splitAccessPath:Na,stringValue:ne,textMetrics:Gi,timeBin:pee,timeFloor:iee,timeFormatLocale:M1,timeInterval:gm,timeOffset:aee,timeSequence:cee,timeUnitSpecifier:KZ,timeUnits:fO,toBoolean:iO,toDate:oO,toNumber:wr,toSet:ks,toString:sO,transform:Uee,transforms:wg,truncate:PZ,truthy:No,tupleid:be,typeParsers:dP,utcFloor:oee,utcInterval:mm,utcOffset:lee,utcSequence:fee,utcdayofyear:eee,utcquarter:xZ,utcweek:tee,version:EGe,visitArray:bu,week:JZ,writeConfig:dm,zero:Au,zoomLinear:JR,zoomLog:ZR,zoomPow:uS,zoomSymlog:eO},Symbol.toStringTag,{value:"Module"}));function $Ge(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var AGe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},TGe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},PGe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const MGe=Array.prototype.slice,of=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,MGe.call(t,1))},FGe=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var RGe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:FGe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return of("join",arguments)},indexof:function(){return of("indexOf",arguments)},lastindexof:function(){return of("lastIndexOf",arguments)},slice:function(){return of("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return of("substring",arguments,String)},split:function(){return of("split",arguments,String)},replace:function(){return of("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const OGe=["view","item","group","xy","x","y"],RM=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&RM.add(setImmediate);const DGe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:AGe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),RM.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||RGe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>TGe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>PGe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,RM.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function b0(e,t,n,r,i,o){const s=a=>DGe[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,OGe.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var NGe={operator(e,t){const n=t.ast,r=e.functions;return i=>b0(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>b0(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>b0(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return b0(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let u=0,c;for(const f in r)c=b0(r[f].ast,i,a,l,void 0,s),s[f]!==c&&(s[f]=c,u=1);return n!=="rule"&&$Ge(s,r,o),u}}};const IGe="vega-lite",LGe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',zGe="5.21.0",jGe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],BGe="https://vega.github.io/vega-lite/",UGe="Vega-Lite is a concise high-level language for interactive visualization.",VGe=["vega","chart","visualization"],WGe="build/vega-lite.js",HGe="build/vega-lite.min.js",qGe="build/vega-lite.min.js",GGe="build/src/index",YGe="build/src/index.d.ts",XGe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},KGe=["bin","build","src","vega-lite*","tsconfig.json"],QGe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},JGe={type:"git",url:"https://github.com/vega/vega-lite.git"},ZGe="BSD-3-Clause",eYe={url:"https://github.com/vega/vega-lite/issues"},tYe={"@babel/core":"^7.24.9","@babel/preset-env":"^7.25.0","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.6.0",rollup:"^4.19.1","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.3","ts-jest":"^29.2.3","ts-json-schema-generator":"^2.3.0",typescript:"~5.5.4","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.26.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},nYe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},rYe={vega:"^5.24.0"},iYe={node:">=18"},oYe="yarn@1.22.19",sYe={name:IGe,author:LGe,version:zGe,collaborators:jGe,homepage:BGe,description:UGe,keywords:VGe,main:WGe,unpkg:HGe,jsdelivr:qGe,module:GGe,types:YGe,bin:XGe,files:KGe,scripts:QGe,repository:JGe,license:ZGe,bugs:eYe,devDependencies:tYe,dependencies:nYe,peerDependencies:rYe,engines:iYe,packageManager:oYe};function jN(e){return K(e,"or")}function BN(e){return K(e,"and")}function UN(e){return K(e,"not")}function u2(e,t){if(UN(e))u2(e.not,t);else if(BN(e))for(const n of e.and)u2(n,t);else if(jN(e))for(const n of e.or)u2(n,t);else t(e)}function Dp(e,t){return UN(e)?{not:Dp(e.not,t)}:BN(e)?{and:e.and.map(n=>Dp(n,t))}:jN(e)?{or:e.or.map(n=>Dp(n,t))}:t(e)}const Pe=structuredClone;function Sae(e){throw new Error(e)}function Ng(e,t){const n={};for(const r of t)fe(e,r)&&(n[r]=e[r]);return n}function yi(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>bt(e)).join(",")})`};function Be(e){if(Je(e))return e;const t=ue(e)?e:bt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function OM(e){return e===!1||e===null}function ze(e,t){return e.includes(t)}function Ig(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function VN(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function kae(e,...t){for(const n of t)aYe(e,n??{});return e}function aYe(e,t){for(const n of X(t))dm(e,n,t[n],!0)}function da(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function lYe(e,t){const n=X(e),r=X(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Cae(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function WN(e,t){for(const n of e)if(t.has(n))return!0;return!1}function DM(e){const t=new Set;for(const n of e){const i=Na(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function HN(e,t){return e===void 0||t===void 0?!0:WN(DM(e),DM(t))}function vt(e){return X(e).length===0}const X=Object.keys,tr=Object.values,Ec=Object.entries;function J1(e){return e===!0||e===!1}function zt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Yy(e,t){return UN(e)?`!(${Yy(e.not,t)})`:BN(e)?`(${e.and.map(n=>Yy(n,t)).join(") && (")})`:jN(e)?`(${e.or.map(n=>Yy(n,t)).join(") || (")})`:t(e)}function Ek(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Ek(e[n],t)&&delete e[n],vt(e)}function db(e){return e.charAt(0).toUpperCase()+e.substr(1)}function qN(e,t="datum"){const n=Na(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(ne).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function Eae(e,t="datum"){return`${t}[${ne(Na(e).join("."))}]`}function uYe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function jo(e){return`${Na(e).map(uYe).join("\\.")}`}function Md(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function _m(e){return`${Na(e).join(".")}`}function Lg(e){return e?Na(e).length:0}function an(...e){return e.find(t=>t!==void 0)}let _ae=42;function $ae(e){const t=++_ae;return e?String(e)+t:t}function cYe(){_ae=42}function Aae(e){return Tae(e)?e:`__${e}`}function Tae(e){return e.startsWith("__")}function Z1(e){if(e!==void 0)return(e%360+360)%360}function i_(e){return Je(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const PV=Object.getPrototypeOf(structuredClone({}));function Ui(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Ui(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!Ui(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==PV.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==PV.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!Ui(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function bt(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(s,1),`{${o}}`}(e)}function K(e,t){return se(e)&&fe(e,t)&&e[t]!==void 0}const Al="row",Tl="column",o_="facet",jt="x",Un="y",Is="x2",Va="y2",Vc="xOffset",$m="yOffset",Ls="radius",Ql="radius2",Vo="theta",Jl="theta2",zs="latitude",js="longitude",Bs="latitude2",Bo="longitude2",Ci="color",Wa="fill",Ha="stroke",Ei="shape",Zl="size",sh="angle",eu="opacity",Wc="fillOpacity",Hc="strokeOpacity",qc="strokeWidth",Gc="strokeDash",hb="text",zg="order",pb="detail",s_="key",Fd="tooltip",a_="href",l_="url",u_="description",fYe={x:1,y:1,x2:1,y2:1},Pae={theta:1,theta2:1,radius:1,radius2:1};function Mae(e){return fe(Pae,e)}const GN={longitude:1,longitude2:1,latitude:1,latitude2:1};function Fae(e){switch(e){case zs:return"y";case Bs:return"y2";case js:return"x";case Bo:return"x2"}}function Rae(e){return fe(GN,e)}const dYe=X(GN),YN={...fYe,...Pae,...GN,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Np(e){return e===Ci||e===Wa||e===Ha}const Oae={row:1,column:1,facet:1},To=X(Oae),XN={...YN,...Oae},hYe=X(XN),{order:Qft,detail:Jft,tooltip:Zft,...pYe}=XN,{row:edt,column:tdt,facet:ndt,...gYe}=pYe;function mYe(e){return fe(gYe,e)}function Dae(e){return fe(XN,e)}const yYe=[Is,Va,Bs,Bo,Jl,Ql];function Nae(e){return ah(e)!==e}function ah(e){switch(e){case Is:return jt;case Va:return Un;case Bs:return zs;case Bo:return js;case Jl:return Vo;case Ql:return Ls}return e}function _c(e){if(Mae(e))switch(e){case Vo:return"startAngle";case Jl:return"endAngle";case Ls:return"outerRadius";case Ql:return"innerRadius"}return e}function qa(e){switch(e){case jt:return Is;case Un:return Va;case zs:return Bs;case js:return Bo;case Vo:return Jl;case Ls:return Ql}}function _i(e){switch(e){case jt:case Is:return"width";case Un:case Va:return"height"}}function Iae(e){switch(e){case jt:return"xOffset";case Un:return"yOffset";case Is:return"x2Offset";case Va:return"y2Offset";case Vo:return"thetaOffset";case Ls:return"radiusOffset";case Jl:return"theta2Offset";case Ql:return"radius2Offset"}}function KN(e){switch(e){case jt:return"xOffset";case Un:return"yOffset"}}function vYe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const bYe=X(YN),{x:rdt,y:idt,x2:odt,y2:sdt,xOffset:adt,yOffset:ldt,latitude:udt,longitude:cdt,latitude2:fdt,longitude2:ddt,theta:hdt,theta2:pdt,radius:gdt,radius2:mdt,...QN}=YN,xYe=X(QN),JN={x:1,y:1},tu=X(JN);function ln(e){return fe(JN,e)}const ZN={theta:1,radius:1},wYe=X(ZN);function c_(e){return e==="width"?jt:Un}const Lae={xOffset:1,yOffset:1};function gb(e){return fe(Lae,e)}const{text:ydt,tooltip:vdt,href:bdt,url:xdt,description:wdt,detail:Sdt,key:kdt,order:Cdt,...zae}=QN,SYe=X(zae);function kYe(e){return fe(QN,e)}function CYe(e){switch(e){case Ci:case Wa:case Ha:case Zl:case Ei:case eu:case qc:case Gc:return!0;case Wc:case Hc:case sh:return!1}}const jae={...JN,...ZN,...Lae,...zae},eI=X(jae);function Ga(e){return fe(jae,e)}function EYe(e,t){return $Ye(e)[t]}const Bae={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Edt,..._Ye}=Bae;function $Ye(e){switch(e){case Ci:case Wa:case Ha:case u_:case pb:case s_:case Fd:case a_:case zg:case eu:case Wc:case Hc:case qc:case o_:case Al:case Tl:return Bae;case jt:case Un:case Vc:case $m:case zs:case js:return _Ye;case Is:case Va:case Bs:case Bo:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Zl:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Gc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ei:return{point:"always",geoshape:"always"};case hb:return{text:"always"};case sh:return{point:"always",square:"always",text:"always"};case l_:return{image:"always"};case Vo:return{text:"always",arc:"always"};case Ls:return{text:"always",arc:"always"};case Jl:case Ql:return{arc:"always"}}}function DT(e){switch(e){case jt:case Un:case Vo:case Ls:case Vc:case $m:case Zl:case sh:case qc:case eu:case Wc:case Hc:case Is:case Va:case Jl:case Ql:return;case o_:case Al:case Tl:case Ei:case Gc:case hb:case Fd:case a_:case l_:case u_:return"discrete";case Ci:case Wa:case Ha:return"flexible";case zs:case js:case Bs:case Bo:case pb:case s_:case zg:return}}const AYe={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},TYe={count:1,min:1,max:1};function Vl(e){return K(e,"argmin")}function Yc(e){return K(e,"argmax")}function tI(e){return ue(e)&&fe(AYe,e)}const PYe=new Set(["count","valid","missing","distinct"]);function f_(e){return ue(e)&&PYe.has(e)}function MYe(e){return ue(e)&&ze(["min","max"],e)}const FYe=new Set(["count","sum","distinct","valid","missing"]),RYe=new Set(["mean","average","median","q1","q3","min","max"]);function Uae(e){return Nc(e)&&(e=k_(e,void 0)),"bin"+X(e).map(t=>d_(e[t])?zt(`_${t}_${Ec(e[t])}`):zt(`_${t}_${e[t]}`)).join("")}function $t(e){return e===!0||lh(e)&&!e.binned}function Hn(e){return e==="binned"||lh(e)&&e.binned===!0}function lh(e){return se(e)}function d_(e){return K(e,"param")}function MV(e){switch(e){case Al:case Tl:case Zl:case Ci:case Wa:case Ha:case qc:case eu:case Wc:case Hc:case Ei:return 6;case Gc:return 4;default:return 10}}function mb(e){return K(e,"expr")}function Gn(e,{level:t}={level:0}){const n=X(e||{}),r={};for(const i of n)r[i]=t===0?Ni(e[i]):Gn(e[i],{level:t-1});return r}function Vae(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,m={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=Ng(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function ku(e){return ue(e)||Y(e)&&ue(e[0])}function me(e){return K(e,"signal")}function uh(e){return K(e,"step")}function OYe(e){return Y(e)?!1:K(e,"fields")&&!K(e,"data")}function DYe(e){return Y(e)?!1:K(e,"fields")&&K(e,"data")}function xl(e){return Y(e)?!1:K(e,"field")&&K(e,"data")}const NYe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},IYe=X(NYe),LYe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},NM=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Wae(e){const t=Y(e.condition)?e.condition.map(FV):FV(e.condition);return{...Ni(e),condition:t}}function Ni(e){if(mb(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function FV(e){if(mb(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Ft(e){if(mb(e)){const{expr:t,...n}=e;return{signal:t,...n}}return me(e)?e:e!==void 0?{value:e}:void 0}function zYe(e){return me(e)?e.signal:ne(e)}function RV(e){return me(e)?e.signal:ne(e.value)}function ms(e){return me(e)?e.signal:e==null?null:ne(e)}function jYe(e,t,n){for(const r of n){const i=Fa(r,t.markDef,t.config);i!==void 0&&(e[r]=Ft(i))}return e}function Hae(e){return[].concat(e.type,e.style??[])}function mt(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&K(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Fa(e,t,n,r)}function Fa(e,t,n,{vgChannel:r}={}){const i=IM(e,t,n.style);return an(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function IM(e,t,n){return qae(e,Hae(t),n)}function qae(e,t,n){t=le(t);let r;for(const i of t){const o=n[i];K(o,e)&&(r=o[e])}return r}function Gae(e,t){return le(e).reduce((n,r)=>(n.field.push(ie(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function Yae(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Ui(i,r))return;n.push(r)}),n}function Xae(e,t){return Ui(e,t)||!t?e:e?[...le(e),...le(t)].join(", "):t}function Kae(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((ku(n)||me(n))&&(ku(r)||me(r)))return{explicit:e.explicit,value:Xae(n,r)};if(ku(n)||me(n))return{explicit:e.explicit,value:n};if(ku(r)||me(r))return{explicit:e.explicit,value:r};if(!ku(n)&&!me(n)&&!ku(r)&&!me(r))return{explicit:e.explicit,value:Yae(n,r)};throw new Error("It should never reach here")}function nI(e){return`Invalid specification ${bt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const BYe='Autosize "fit" only works for single views and layered views.';function OV(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function DV(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function NV(e){return e?`Dropping "fit-${e}" because spec has discrete ${_i(e)}.`:'Dropping "fit" because spec has discrete size.'}function rI(e){return`Unknown field for ${e}. Cannot calculate view size.`}function IV(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function UYe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function VYe(e){return`The "nearest" transform is not supported for ${e} marks.`}function Qae(e){return`Selection not supported for ${e} yet.`}function WYe(e){return`Cannot find a selection named "${e}".`}const HYe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",qYe="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",GYe="Legend bindings are only supported for selections over an individual field or encoding channel.";function YYe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function XYe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const KYe="The same selection must be used to override scale domains in a layered view.",QYe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function JYe(e){return`Unknown repeated value "${e}".`}function LV(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const ZYe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function eXe(e){return`Unrecognized parse "${e}".`}function zV(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const tXe="Attempt to add the same child twice.";function nXe(e){return`Ignoring an invalid transform: ${bt(e)}.`}const rXe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function jV(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function iXe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${bt(t)} is overridden by a child projection ${bt(n)}.`}const oXe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function sXe(e){return`${e}Offset dropped because ${e} is continuous`}function aXe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${bt(n)}}.`}function Jae(e){return`Invalid field type "${e}".`}function lXe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function uXe(e){return`Invalid aggregation operator "${e}".`}function Zae(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function cXe(e){return`Position range does not support relative band size for ${e}.`}function LM(e,t){return`Dropping ${bt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const fXe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function h_(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function dXe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function hXe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function pXe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function gXe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function NT(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function mXe(e){return`The ${e} for range marks cannot be an expression`}function yXe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function vXe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function bXe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function xXe(e){return`Cannot use the relative band size with ${e} scale.`}function wXe(e){return`Using unaggregated domain with raw field has no effect (${bt(e)}).`}function SXe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function kXe(e){return`Unaggregated domain is currently unsupported for log scale (${bt(e)}).`}function CXe(e){return`Cannot apply size to non-oriented mark "${e}".`}function EXe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function _Xe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function ele(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function tle(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function $Xe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${bt(n)} and ${bt(r)}). Using ${bt(n)}.`}function AXe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${bt(n)} and ${bt(r)}). Using the union of the two domains.`}function TXe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function PXe(e){return`Dropping sort property ${bt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const BV="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",MXe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",FXe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",RXe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function OXe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function DXe(e){return`Stack is applied to a non-linear scale (${e}).`}function NXe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function _k(e,t){return`Invalid ${e}: ${bt(t)}.`}function IXe(e){return`Dropping day from datetime ${bt(e)} as day cannot be combined with other units.`}function LXe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function zXe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function jXe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function UV(e){return`1D error band does not support ${e}.`}function nle(e){return`Channel ${e} is required for "binned" bin.`}function BXe(e){return`Channel ${e} should not be used with "binned" bin.`}function UXe(e){return`Domain for ${e} is required for threshold scale.`}const rle=QR(KR);let jg=rle;function VXe(e){return jg=e,jg}function WXe(){return jg=rle,jg}function Z(...e){jg.warn(...e)}function HXe(...e){jg.debug(...e)}function ch(e){if(e&&se(e)){for(const t of oI)if(K(e,t))return!0}return!1}const ile=["january","february","march","april","may","june","july","august","september","october","november","december"],qXe=ile.map(e=>e.substr(0,3)),ole=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],GXe=ole.map(e=>e.substr(0,3));function YXe(e){if(i_(e)&&(e=+e),Je(e))return e>4&&Z(_k("quarter",e)),e-1;throw new Error(_k("quarter",e))}function XXe(e){if(i_(e)&&(e=+e),Je(e))return e-1;{const t=e.toLowerCase(),n=ile.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=qXe.indexOf(r);if(i!==-1)return i;throw new Error(_k("month",e))}}function KXe(e){if(i_(e)&&(e=+e),Je(e))return e%7;{const t=e.toLowerCase(),n=ole.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=GXe.indexOf(r);if(i!==-1)return i;throw new Error(_k("day",e))}}function iI(e,t){const n=[];if(t&&e.day!==void 0&&X(e).length>1&&(Z(IXe(e)),e=Pe(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?XXe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?YXe(e.quarter):e.quarter;n.push(Je(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?KXe(e.day):e.day;n.push(Je(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Rd(e){const n=iI(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function QXe(e){const n=iI(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function JXe(e){const t=iI(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const sle={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},oI=X(sle);function ZXe(e){return fe(sle,e)}function fh(e){return se(e)?e.binned:ale(e)}function ale(e){return e&&e.startsWith("binned")}function sI(e){return e.startsWith("utc")}function eKe(e){return e.substring(3)}const tKe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function p_(e){return oI.filter(t=>ule(e,t))}function lle(e){const t=p_(e);return t[t.length-1]}function ule(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function nKe(e,t,{end:n}={end:!1}){const r=qN(t),i=sI(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of oI)ule(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),QXe(a)}function cle(e){if(!e)return;const t=p_(e);return`timeUnitSpecifier(${bt(t)}, ${bt(tKe)})`}function rKe(e,t,n){if(!e)return;const r=cle(e);return`${n||sI(e)?"utc":"time"}Format(${t}, ${r})`}function In(e){if(!e)return;let t;return ue(e)?ale(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:se(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),sI(t.unit)&&(t.utc=!0,t.unit=eKe(t.unit)),t}function iKe(e){const{utc:t,...n}=In(e);return n.unit?(t?"utc":"")+X(n).map(r=>zt(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+X(n).map(r=>zt(`_${r}_${n[r]}`)).join("")}function fle(e,t=n=>n){const n=In(e),r=lle(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=dle(r,n.step),a={...i,[s]:+i[s]+o};return`${t(Rd(a))} - ${t(Rd(i))}`}}const oKe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function sKe(e){return fe(oKe,e)}function dle(e,t=1){if(sKe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function aKe(e){return K(e,"param")}function aI(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function lI(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function uI(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function cI(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function fI(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function dI(e){if(e!=null&&e.field){if(Y(e.range)&&e.range.length===2)return!0;if(me(e.range))return!0}return!1}function hI(e){return!!(e!=null&&e.field)&&(Y(e.oneOf)||Y(e.in))}function lKe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function hle(e){return hI(e)||aI(e)||dI(e)||lI(e)||cI(e)||uI(e)||fI(e)}function Gs(e,t){return C_(e,{timeUnit:t,wrapTime:!0})}function uKe(e,t){return e.map(n=>Gs(n,t))}function ple(e,t=!0){const{field:n}=e,r=In(e.timeUnit),{unit:i,binned:o}=r||{},s=ie(e,{expr:"datum"}),a=i?`time(${o?s:nKe(i,n)})`:s;if(aI(e))return`${a}===${Gs(e.equal,i)}`;if(lI(e)){const l=e.lt;return`${a}<${Gs(l,i)}`}else if(cI(e)){const l=e.gt;return`${a}>${Gs(l,i)}`}else if(uI(e)){const l=e.lte;return`${a}<=${Gs(l,i)}`}else if(fI(e)){const l=e.gte;return`${a}>=${Gs(l,i)}`}else{if(hI(e))return`indexof([${uKe(e.oneOf,i).join(",")}], ${a}) !== -1`;if(lKe(e))return g_(a,e.valid);if(dI(e)){const{range:l}=Gn(e),u=me(l)?{signal:`${l.signal}[0]`}:l[0],c=me(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+Gs(u,i)+", "+Gs(c,i)+"])";const f=[];return u!==null&&f.push(`${a} >= ${Gs(u,i)}`),c!==null&&f.push(`${a} <= ${Gs(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${bt(e)}`)}function g_(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function cKe(e){return hle(e)&&e.timeUnit?{...e,timeUnit:In(e.timeUnit)}:e}const yb={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function fKe(e){return e==="quantitative"||e==="temporal"}function gle(e){return e==="ordinal"||e==="nominal"}const Od=yb.quantitative,pI=yb.ordinal,Bg=yb.temporal,gI=yb.nominal,Am=yb.geojson;function dKe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Od:return"quantitative";case"t":case Bg:return"temporal";case"o":case pI:return"ordinal";case"n":case gI:return"nominal";case Am:return"geojson"}}const Yn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},zM={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function hKe(e,t){const n=zM[e],r=zM[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const pKe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function VV(e){return pKe[e]}const mle=new Set(["linear","log","pow","sqrt","symlog"]),yle=new Set([...mle,"time","utc"]);function vle(e){return mle.has(e)}const ble=new Set(["quantile","quantize","threshold"]),gKe=new Set([...yle,...ble,"sequential","identity"]),mKe=new Set(["ordinal","bin-ordinal","point","band"]);function Ln(e){return mKe.has(e)}function As(e){return gKe.has(e)}function ha(e){return yle.has(e)}function Ug(e){return ble.has(e)}const yKe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function vKe(e){return!ue(e)&&K(e,"name")}function xle(e){return K(e,"param")}function bKe(e){return K(e,"unionWith")}function xKe(e){return se(e)&&"field"in e}const wKe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:_dt,domain:$dt,range:Adt,rangeMax:Tdt,rangeMin:Pdt,scheme:Mdt,...SKe}=wKe,kKe=X(SKe);function jM(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ha(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ha(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return ha(e);case"nice":return ha(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return As(e)&&!ze(["log","time","utc","threshold","quantile"],e)}}function wle(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Np(e)?void 0:bXe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function CKe(e,t){return ze([pI,gI],t)?e===void 0||Ln(e):t===Bg?ze([Yn.TIME,Yn.UTC,void 0],e):t===Od?vle(e)||Ug(e)||e===void 0:!0}function EKe(e,t,n=!1){if(!Ga(e))return!1;switch(e){case jt:case Un:case Vc:case $m:case Vo:case Ls:return ha(t)||t==="band"?!0:t==="point"?!n:!1;case Zl:case qc:case eu:case Wc:case Hc:case sh:return ha(t)||Ug(t)||ze(["band","point","ordinal"],t);case Ci:case Wa:case Ha:return t!=="band";case Gc:case Ei:return t==="ordinal"||Ug(t)}}function _Ke(e){return se(e)&&"value"in e}const ri={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Sle=ri.arc,m_=ri.area,y_=ri.bar,$Ke=ri.image,v_=ri.line,b_=ri.point,AKe=ri.rect,$k=ri.rule,kle=ri.text,mI=ri.tick,TKe=ri.trail,yI=ri.circle,vI=ri.square,Cle=ri.geoshape;function Xc(e){return["line","area","trail"].includes(e)}function ev(e){return["rect","bar","image","arc","tick"].includes(e)}const PKe=new Set(X(ri));function Ra(e){return K(e,"type")}const MKe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],FKe=["fill","fillOpacity"],RKe=[...MKe,...FKe],OKe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},WV=X(OKe),IT=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],DKe={area:["line","point"],bar:IT,rect:IT,line:["point"],tick:["bandSize","thickness",...IT]},NKe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},IKe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Ele=X(IKe);function Dd(e){return K(e,"band")}const LKe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},zKe=5,bI={binSpacing:0,continuousBandSize:zKe,minBandSize:.25,timeUnitBandPosition:.5},jKe={...bI,binSpacing:1},BKe={...bI,thickness:1};function UKe(e){return Ra(e)?e.type:e}function _le(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function xI({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!As(r)||i)return"always-valid";const o=_le(mt("invalid",e,t),{isPath:Xc(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function VKe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function $le({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function Ale({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var c;const s=n==null?void 0:n.get("type"),a=Ps(t),l=f_(a==null?void 0:a.aggregate),u=xI({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&u==="show"){const f=((c=o.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:g_(ie(a,{expr:"datum"}),!1),...WKe(f,n,r)}}}function WKe(e,t,n){if(_Ke(e)){const{value:r}=e;return me(r)?{signal:r.signal}:{value:r}}return $le({scale:t,scaleName:n,mode:"zeroOrMin"})}function wI(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=ah(t),l=SI(e),u=Ale({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return u!==void 0?[u,l]:l}function HKe(e){const{datum:t}=e;return ch(t)?Rd(t):`${bt(t)}`}function ld(e,t,n,r){const i={};if(t&&(i.scale=t),Ya(e)){const{datum:o}=e;ch(o)?i.signal=Rd(o):me(o)?i.signal=o.signal:mb(o)?i.signal=o.expr:i.value=o}else i.field=ie(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function Ak({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!me(s)&&0<s&&s<1?"datum":void 0,l=ie(t,{expr:a,suffix:i}),u=n!==void 0?ie(n,{expr:a}):ie(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;const f=s===0?l:u;c.field=f}else{const f=me(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${u}`:`${1-s} * ${l} + ${s} * ${u}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function qKe({scaleName:e,fieldDef:t}){const n=ie(t,{expr:"datum"}),r=ie(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function SI({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(Fe(t)){const f=s==null?void 0:s.get("type");if(Zr(t)){c??(c=$c({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if($t(d)||c&&h&&p===Bg)return a!=null&&a.impute?ld(t,o,{binSuffix:"mid"},{offset:l}):c&&!Ln(f)?Ak({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):ld(t,o,Sb(t,e)?{binSuffix:"range"}:{},{offset:l});if(Hn(d)){if(ee(n))return Ak({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});Z(nle(e===jt?Is:Va))}}return ld(t,o,Ln(f)?{binSuffix:"range"}:{},{offset:l,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Ts(t)){const f=t.value,d=l?{offset:l}:{};return{...Xy(e,f),...d}}}return Ne(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function Xy(e,t){return ze(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:ze(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Ft(t)}function Nd(e){return e&&e!=="number"&&e!=="time"}function Tle(e,t,n){return`${e}(${t}${n?`, ${bt(n)}`:""})`}const GKe="  ";function kI({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var l,u;if(Nd(n))return ys({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=Ple(e,r,i),a=Vg(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return ys({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return ys({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&ee(e)&&e.timeUnit===void 0)return ys({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Hg(e)){const c=XKe({field:s,timeUnit:ee(e)?(l=In(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:dh(e)&&((u=e.scale)==null?void 0:u.type)===Yn.UTC});return c?{signal:c}:void 0}if(t=BM({type:a,specifiedFormat:t,config:o,normalizeStack:i}),ee(e)&&$t(e.bin)){const c=ie(e,{expr:r,binSuffix:"end"});return{signal:vb(s,c,t,n,o)}}else return t||Vg(e)==="quantitative"?{signal:`${Rle(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function Ple(e,t,n){return ee(e)?n?`${ie(e,{expr:t,suffix:"end"})}-${ie(e,{expr:t,suffix:"start"})}`:ie(e,{expr:t}):HKe(e)}function ys({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=Ple(e,r,i)),s!=="datum.value"&&ee(e)&&$t(e.bin)){const a=ie(e,{expr:r,binSuffix:"end"});return{signal:vb(s,a,t,n,o)}}return{signal:Tle(n,s,t)}}function Mle(e,t,n,r,i,o){var s;if(!(ue(r)&&Nd(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Vg(e)==="quantitative"&&(i.normalizedNumberFormatType&&Wg(e)&&e.stack==="normalize"||i.numberFormatType))){if(Wg(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return BM({type:"quantitative",config:i,normalizeStack:!0});if(Hg(e)){const a=ee(e)?(s=In(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:YKe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return BM({type:t,specifiedFormat:n,config:i})}}function Fle(e,t,n){var r;if(e&&(me(e)||e==="number"||e==="time"))return e;if(Hg(t)&&n!=="time"&&n!=="utc")return ee(t)&&((r=In(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function BM({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(ue(t))return t;if(e===Od)return r?n.normalizedNumberFormat:n.numberFormat}function YKe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:cle(t)}:r?void 0:n.timeFormat)}function Rle(e,t){return`format(${e}, "${t||""}")`}function HV(e,t,n,r){return Nd(n)?Tle(n,e,t):Rle(e,(ue(t)?t:void 0)??r.numberFormat)}function vb(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return vb(e,t,i.numberFormat,i.numberFormatType,i);const o=HV(e,n,r,i),s=HV(t,n,r,i);return`${g_(e,!1)} ? "null" : ${o} + "${GKe}" + ${s}`}function XKe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=ue(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):rKe(t,e,o)}const x_="min",KKe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function qV(e){return fe(KKe,e)}function QKe(e){return K(e,"encoding")}function Pl(e){return e&&(e.op==="count"||K(e,"field"))}function Ole(e){return e&&Y(e)}function bb(e){return K(e,"row")||K(e,"column")}function CI(e){return K(e,"header")}function w_(e){return K(e,"facet")}function JKe(e){return K(e,"param")}function ZKe(e){return!ue(e)&&K(e,"repeat")}function GV(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function EI(e){return K(e,"sort")}function $c({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Fe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ee(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Fa("timeUnitBandPosition",n,r);if($t(o))return .5}}function Dle({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var u,c,f;const a=_i(e),l=mt(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(ee(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Fa("timeUnitBandSize",r,i)};if($t(h)&&!Ln(o))return{band:1}}if(ev(r.type))return o?Ln(o)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Nle(e,t,n,r){return $t(e.bin)||e.timeUnit&&Zr(e)&&e.type==="temporal"?$c({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Ile(e){return K(e,"sort")&&!K(e,"field")}function xb(e){return K(e,"condition")}function S_(e){const t=e==null?void 0:e.condition;return!!t&&!Y(t)&&ee(t)}function wb(e){const t=e==null?void 0:e.condition;return!!t&&!Y(t)&&Fe(t)}function eQe(e){const t=e==null?void 0:e.condition;return!!t&&(Y(t)||Ts(t))}function ee(e){return K(e,"field")||(e==null?void 0:e.aggregate)==="count"}function Vg(e){return e==null?void 0:e.type}function Ya(e){return K(e,"datum")}function Hu(e){return Zr(e)&&!Pk(e)||Tk(e)}function YV(e){return Zr(e)&&e.type==="quantitative"&&!e.bin||Tk(e)}function Tk(e){return Ya(e)&&Je(e.datum)}function Fe(e){return ee(e)||Ya(e)}function Zr(e){return e&&(K(e,"field")||e.aggregate==="count")&&K(e,"type")}function Ts(e){return K(e,"value")}function dh(e){return K(e,"scale")||K(e,"sort")}function Wg(e){return K(e,"axis")||K(e,"stack")||K(e,"impute")}function Lle(e){return K(e,"legend")}function zle(e){return K(e,"format")||K(e,"formatType")}function tQe(e){return yi(e,["legend","axis","header","scale"])}function nQe(e){return K(e,"op")}function ie(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(iQe(e))n=Aae("count");else{let s;if(!t.nofn)if(nQe(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;$t(a)?(s=Uae(a),i=(t.binSuffix??"")+(t.suffix??"")):l?Yc(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Vl(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):u&&!fh(u)&&(s=iKe(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?_m(n):t.expr?Eae(n,t.expr)+o:jo(n)+o}function Pk(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ee(e)&&!!e.bin;case"temporal":return!1}throw new Error(Jae(e.type))}function rQe(e){var t;return dh(e)&&Ug((t=e.scale)==null?void 0:t.type)}function iQe(e){return e.aggregate==="count"}function oQe(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if($t(r))return`${n} (binned)`;if(i&&!fh(i)){const a=(s=In(i))==null?void 0:s.unit;if(a)return`${n} (${p_(a).join("-")})`}else if(o)return Yc(o)?`${n} for max ${o.argmax}`:Vl(o)?`${n} for min ${o.argmin}`:`${db(o)} of ${n}`;return n}function sQe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Yc(t))return`${i} for argmax(${t.argmax})`;if(Vl(t))return`${i} for argmin(${t.argmin})`;const o=r&&!fh(r)?In(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||$t(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const jle=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return sQe(e);default:return oQe(e,t)}};let Ble=jle;function Ule(e){Ble=e}function aQe(){Ule(jle)}function Ip(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=_I(e))==null?void 0:a.title;if(!ee(e))return i??e.title;const o=e,s=r?$I(o,t):void 0;return n?an(i,o.title,s):i??o.title??s}function _I(e){if(Wg(e)&&e.axis)return e.axis;if(Lle(e)&&e.legend)return e.legend;if(CI(e)&&e.header)return e.header}function $I(e,t){return Ble(e,t)}function Mk(e){if(zle(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=_I(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function lQe(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(EI(e)&&Y(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Yc(n)&&!Vl(n))return"quantitative";if(dh(e)&&((o=e.scale)!=null&&o.type))switch(zM[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Ps(e){if(ee(e))return e;if(S_(e))return e.condition}function Sn(e){if(Fe(e))return e;if(wb(e))return e.condition}function Vle(e,t,n,r={}){if(ue(e)||Je(e)||Nc(e)){const i=ue(e)?"string":Je(e)?"number":"boolean";return Z(aXe(t,i,e)),{value:e}}return Fe(e)?Fk(e,t,n,r):wb(e)?{...e,condition:Fk(e.condition,t,n,r)}:e}function Fk(e,t,n,r){if(zle(e)){const{format:i,formatType:o,...s}=e;if(Nd(o)&&!n.customFormatTypes)return Z(jV(t)),Fk(s,t,n,r)}else{const i=Wg(e)?"axis":Lle(e)?"legend":CI(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(Nd(s)&&!n.customFormatTypes)return Z(jV(t)),Fk({...e,[i]:a},t,n,r)}}return ee(e)?AI(e,t,r):uQe(e)}function uQe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Je(n)?"quantitative":ue(n)?"nominal":ch(n)?"temporal":void 0,{...e,type:t}}function AI(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!tI(r)&&!Yc(r)&&!Vl(r)&&(Z(uXe(r)),delete a.aggregate),i&&(a.timeUnit=In(i)),s&&(a.field=`${s}`),$t(o)&&(a.bin=k_(o,t)),Hn(o)&&!ln(t)&&Z(BXe(t)),Zr(a)){const{type:l}=a,u=dKe(l);l!==u&&(a.type=u),l!=="quantitative"&&f_(r)&&(Z(lXe(l,r)),a.type="quantitative")}else if(!Nae(t)){const l=lQe(a,t);a.type=l}if(Zr(a)){const{compatible:l,warning:u}=cQe(a,t)||{};l===!1&&Z(u)}if(EI(a)&&ue(a.sort)){const{sort:l}=a;if(qV(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&qV(u))return{...a,sort:{encoding:u,order:"descending"}}}if(CI(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function k_(e,t){return Nc(e)?{maxbins:MV(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:MV(t)}:e}const Rh={compatible:!0};function cQe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Al:case Tl:case o_:return Pk(e)?Rh:{compatible:!1,warning:hXe(t)};case jt:case Un:case Vc:case $m:case Ci:case Wa:case Ha:case hb:case pb:case s_:case Fd:case a_:case l_:case sh:case Vo:case Ls:case u_:return Rh;case js:case Bo:case zs:case Bs:return n!==Od?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Rh;case eu:case Wc:case Hc:case qc:case Zl:case Jl:case Ql:case Is:case Va:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Rh;case Ei:case Gc:return!Pk(e)&&!rQe(e)?{compatible:!1,warning:pXe(t)}:Rh;case zg:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Rh}}function Hg(e){const{formatType:t}=Mk(e);return t==="time"||!t&&fQe(e)}function fQe(e){return e&&(e.type==="temporal"||ee(e)&&!!e.timeUnit)}function C_(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=In(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return mb(e)?a=e.expr:me(e)?a=e.signal:ch(e)?(s=!0,a=Rd(e)):(ue(e)||Je(e))&&s&&(a=`datetime(${bt(e)})`,ZXe(o)&&(Je(e)&&e<1e4||ue(e)&&isNaN(Date.parse(e)))&&(a=Rd({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:bt(e)}function Wle(e,t){const{type:n}=e;return t.map(r=>{const i=ee(e)&&!fh(e.timeUnit)?e.timeUnit:void 0,o=C_(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function Sb(e,t){return $t(e.bin)?Ga(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const XV={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function kb(e){return e==null?void 0:e.condition}const Hle=["domain","grid","labels","ticks","title"],dQe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},qle={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},hQe={...qle,style:1,labelExpr:1,encoding:1};function KV(e){return fe(hQe,e)}const pQe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Gle=X(pQe);function nu(e){return K(e,"mark")}class E_{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return nu(t)?UKe(t.mark)===this.name:!1}}function ud(e,t){const n=e&&e[t];return n?Y(n)?Ig(n,r=>!!r.field):ee(n)||S_(n):!1}function Yle(e,t){const n=e&&e[t];return n?Y(n)?Ig(n,r=>!!r.field):ee(n)||Ya(n)||wb(n):!1}function Xle(e,t){if(ln(t)){const n=e[t];if((ee(n)||Ya(n))&&(gle(n.type)||ee(n)&&n.timeUnit)){const r=KN(t);return Yle(e,r)}}return!1}function Kle(e){return Ig(hYe,t=>{if(ud(e,t)){const n=e[t];if(Y(n))return Ig(n,r=>!!r.aggregate);{const r=Ps(n);return r&&!!r.aggregate}}return!1})}function Qle(e,t){const n=[],r=[],i=[],o=[],s={};return TI(e,(a,l)=>{if(ee(a)){const{field:u,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=_I(a),g=p==null?void 0:p.title;let m=ie(a,{forAs:!0});const y={...g?[]:{title:Ip(a,t,{allowDisabling:!0})},...h,field:m};if(c){let v;if(Yc(c)?(v="argmax",m=ie({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${u}`):Vl(c)?(v="argmin",m=ie({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:m};u&&(b.field=u),o.push(b)}}else if(n.push(m),Zr(a)&&$t(f)){if(r.push({bin:f,field:u,as:m}),n.push(ie(a,{binSuffix:"end"})),Sb(a,l)&&n.push(ie(a,{binSuffix:"range"})),ln(l)){const v={field:`${m}_end`};s[`${l}2`]=v}y.bin="binned",Nae(l)||(y.type=Od)}else if(d&&!fh(d)){i.push({timeUnit:d,field:u,as:m});const v=Zr(a)&&a.type!==Bg&&"time";v&&(l===hb||l===Fd?y.formatType=v:kYe(l)?y.legend={formatType:v,...y.legend}:ln(l)&&(y.axis={formatType:v,...y.axis}))}s[l]=y}else n.push(u),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function gQe(e,t,n){const r=EYe(t,n);if(r){if(r==="binned"){const i=e[t===Is?jt:Un];return!!(ee(i)&&ee(e[t])&&Hn(i.bin))}}else return!1;return!0}function mQe(e,t,n,r){const i={};for(const o of X(e))Dae(o)||Z(dXe(o));for(let o of bYe){if(!e[o])continue;const s=e[o];if(gb(o)){const a=vYe(o),l=i[a];if(ee(l)&&fKe(l.type)&&ee(s)&&!l.timeUnit){Z(sXe(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(Z(oXe),o=Vo),!gQe(e,o,t)){Z(h_(o,t));continue}if(o===Zl&&t==="line"){const a=Ps(e[o]);if(a!=null&&a.aggregate){Z(fXe);continue}}if(o===Ci&&(n?"fill"in e:"stroke"in e)){Z(Zae("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===pb||o===zg&&!Y(s)&&!Ts(s)||o===Fd&&Y(s)){if(s){if(o===zg){const a=e[o];if(Ile(a)){i[o]=a;continue}}i[o]=le(s).reduce((a,l)=>(ee(l)?a.push(AI(l,o)):Z(LM(l,o)),a),[])}}else{if(o===Fd&&s===null)i[o]=null;else if(!ee(s)&&!Ya(s)&&!Ts(s)&&!xb(s)&&!me(s)){Z(LM(s,o));continue}i[o]=Vle(s,o,r)}}return i}function __(e,t){const n={};for(const r of X(e)){const i=Vle(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function yQe(e){const t=[];for(const n of X(e))if(ud(e,n)){const r=e[n],i=le(r);for(const o of i)ee(o)?t.push(o):S_(o)&&t.push(o.condition)}return t}function TI(e,t,n){if(e)for(const r of X(e)){const i=e[r];if(Y(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function vQe(e,t,n,r){return e?X(e).reduce((i,o)=>{const s=e[o];return Y(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function Jle(e,t){return X(t).reduce((n,r)=>{switch(r){case jt:case Un:case a_:case u_:case l_:case Is:case Va:case Vc:case $m:case Vo:case Jl:case Ls:case Ql:case zs:case js:case Bs:case Bo:case hb:case Ei:case sh:case Fd:return n;case zg:if(e==="line"||e==="trail")return n;case pb:case s_:{const i=t[r];if(Y(i)||ee(i))for(const o of le(i))o.aggregate||n.push(ie(o,{}));return n}case Zl:if(e==="trail")return n;case Ci:case Wa:case Ha:case eu:case Wc:case Hc:case Gc:case qc:{const i=Ps(t[r]);return i&&!i.aggregate&&n.push(ie(i,{})),n}}},[])}function bQe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Y(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Y(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function UM(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${PI(t)}`:"";return{field:s+t.field,type:t.type,title:me(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=yQe(n).map(tQe);return{tooltip:[...i,...da(o,Be)]}}function PI(e){const{title:t,field:n}=e;return an(t,n)}function MI(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=PI(n);return Zle(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...ue(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function Zle(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...Ra(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Nc(e[t])?{}:e[t]}}]:[]}function eue(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:Hx(o,n),continuousAxisChannelDef2:Hx(s,n),continuousAxisChannelDefError:Hx(a,n),continuousAxisChannelDefError2:Hx(l,n),continuousAxis:i}}function Hx(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Z(jXe(n,t)),r}else return e}function tue(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(Ra(n)&&n.orient)return n.orient;if(Hu(i)){if(Hu(o)){const s=ee(i)&&i.aggregate,a=ee(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Hg(o)&&!Hg(i)?"horizontal":"vertical"}return"horizontal"}else{if(Hu(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Rk="boxplot",xQe=["box","median","outliers","rule","ticks"],wQe=new E_(Rk,rue);function nue(e){return Je(e)?"tukey":e}function rue(e,{config:t}){e={...e,encoding:__(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=Ra(n)?n:{type:n};i&&Z(Qae("boxplot"));const l=a.extent??t.boxplot.extent,u=mt("size",a,t),c=a.invalid,f=nue(l),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:k}=SQe(e,l,t),S=_m(g.field),{color:C,size:E,...A}=b,T=gh=>MI(a,m,g,gh,t.boxplot),I=T(A),F=T(b),R=(se(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",_=T({...A,...E?{size:E}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...C||{value:R}}}}),P=UM([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,b),N={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},D=f==="min-max"?P:UM([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,b),L=[...I({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:D}),...I({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:D}),...I({partName:"ticks",mark:N,positionPrefix:"lower_whisker",extraEncoding:D}),...I({partName:"ticks",mark:N,positionPrefix:"upper_whisker",extraEncoding:D})],U=[...f!=="tukey"?L:[],...F({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:P}),..._({partName:"median",mark:{type:"tick",invalid:c,...se(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:P})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(p),layer:U};const V=`datum["lower_box_${g.field}"]`,oe=`datum["upper_box_${g.field}"]`,Q=`(${oe} - ${V})`,ye=`${V} - ${l} * ${Q}`,Oe=`${oe} + ${l} * ${Q}`,ut=`datum["${g.field}"]`,$n={joinaggregate:iue(g.field),groupby:y},sr={transform:[{filter:`(${ye} <= ${ut}) && (${ut} <= ${Oe})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${S}`},{op:"max",field:g.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:L},{tooltip:ce,...$e}=A,{scale:Ae,axis:J}=g,mn=PI(g),tt=yi(J,["title"]),An=Zle(a,"outliers",t.boxplot,{transform:[{filter:`(${ut} < ${ye}) || (${ut} > ${Oe})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...mn!==void 0?{title:mn}:{},...Ae!==void 0?{scale:Ae}:{},...vt(tt)?{}:{axis:tt}},...$e,...C?{color:C}:{},...k?{tooltip:k}:{}}})[0];let fn;const ao=[...d,...h,$n];return An?fn={transform:ao,layer:[An,sr]}:(fn=sr,fn.transform.unshift(...ao)),{...s,layer:[fn,{transform:p,layer:U}]}}function iue(e){const t=_m(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function SQe(e,t,n){const r=tue(e,Rk),{continuousAxisChannelDef:i,continuousAxis:o}=eue(e,r,Rk),s=i.field,a=_m(s),l=nue(t),u=[...iue(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=bQe(d),{bins:g,timeUnits:m,aggregate:y,groupby:v,encoding:b}=Qle(p,n),x=r==="vertical"?"horizontal":"vertical",w=r,k=[...g,...m,{aggregate:[...y,...u],groupby:v},...c];return{bins:g,timeUnits:m,transform:k,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:x,boxOrient:w,customTooltipWithoutAggregatedField:h}}const FI="errorbar",kQe=["ticks","rule"],CQe=new E_(FI,oue);function oue(e,{config:t}){e={...e,encoding:__(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:u}=sue(e,FI,t);delete o.size;const c=MI(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function EQe(e,t){const{encoding:n}=e;if(_Qe(n))return{orient:tue(e,t),inputType:"raw"};const r=$Qe(n),i=AQe(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(Fe(a)&&Fe(l))throw new Error(`${t} cannot have both x2 and y2`);if(Fe(a)){if(Hu(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Fe(l)){if(Hu(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(Fe(l)&&!Fe(a))throw new Error(`${t} cannot have xError2 without xError`);if(Fe(c)&&!Fe(u))throw new Error(`${t} cannot have yError2 without yError`);if(Fe(a)&&Fe(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Fe(a)){if(Hu(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Fe(u)){if(Hu(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function _Qe(e){return(Fe(e.x)||Fe(e.y))&&!Fe(e.x2)&&!Fe(e.y2)&&!Fe(e.xError)&&!Fe(e.xError2)&&!Fe(e.yError)&&!Fe(e.yError2)}function $Qe(e){return Fe(e.x2)||Fe(e.y2)}function AQe(e){return Fe(e.xError)||Fe(e.xError2)||Fe(e.yError)||Fe(e.yError2)}function sue(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=Ra(r)?r:{type:r};o&&Z(Qae(t));const{orient:u,inputType:c}=EQe(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=eue(e,u,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=TQe(l,f,d,h,p,c,t,n),{[g]:x,[g==="x"?"x2":"y2"]:w,[g==="x"?"xError":"yError"]:k,[g==="x"?"xError2":"yError2"]:S,...C}=i,{bins:E,timeUnits:A,aggregate:T,groupby:I,encoding:F}=Qle(C,n),R=[...T,...m],_=c!=="raw"?[]:I,P=UM(v,f,F,b);return{transform:[...a.transform??[],...E,...A,...R.length===0?[]:[{aggregate:R,groupby:_}],...y],groupby:_,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:F,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:P}}function TQe(e,t,n,r,i,o,s,a){let l=[],u=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Z(zXe(h,p,s)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:db(h)},{fieldPrefix:"upper_",titlePrefix:QV(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:QV(h,p,"-")}],d=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),l=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Ip({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Ip({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Ip({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Z(LXe(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Md(Md(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:f,tooltipTitleWithFieldName:d}}function QV(e,t,n){return`${db(e)} ${n} ${t}`}const RI="errorband",PQe=["band","borders"],MQe=new E_(RI,aue);function aue(e,{config:t}){e={...e,encoding:__(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=sue(e,RI,t),u=s,c=MI(u,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?Z(UV("interpolate")):u.tension&&Z(UV("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const lue={};function OI(e,t,n){const r=new E_(e,t);lue[e]={normalizer:r,parts:n}}function FQe(){return X(lue)}OI(Rk,rue,xQe);OI(FI,oue,kQe);OI(RI,aue,PQe);const RQe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],uue={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},cue={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},OQe=X(uue),DQe=X(cue),NQe={header:1,headerRow:1,headerColumn:1,headerFacet:1},fue=X(NQe),due=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],IQe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},LQe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ms="_vgsid_",zQe={point:{on:"click",fields:[Ms],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function DI(e){return e==="legend"||!!(e!=null&&e.legend)}function LT(e){return DI(e)&&se(e)}function NI(e){return!!(e!=null&&e.select)}function hue(e){const t=[];for(const n of e||[]){if(NI(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function jQe(e){return $_(e)||LI(e)||II(e)}function II(e){return K(e,"concat")}function $_(e){return K(e,"vconcat")}function LI(e){return K(e,"hconcat")}function pue({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Oa(e){return K(e,"step")}function JV(e){return K(e,"view")||K(e,"width")||K(e,"height")}const ZV=20,BQe={align:1,bounds:1,center:1,columns:1,spacing:1},UQe=X(BQe);function VQe(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(w_(e)&&!bb(e.facet)||II(e))&&(i.columns=s),$_(e)&&(i.columns=1);for(const a of UQe)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=Je(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function VM(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function WM(e,t){const n=Ok(e,t);return Oa(n)?n.step:gue}function Ok(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return an(n,{step:e.step})}const gue=20,WQe={continuousWidth:200,continuousHeight:200,step:gue},HQe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:WQe,mark:NKe,arc:{},area:{},bar:jKe,circle:{},geoshape:{},image:{},line:{},point:{},rect:bI,rule:{color:"black"},square:{},text:{color:"black"},tick:BKe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:yKe,projection:{},legend:IQe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:zQe,style:{},title:{},facet:{spacing:ZV},concat:{spacing:ZV},normalizedNumberFormat:".0%"},el=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],eW={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},tW={blue:el[0],orange:el[1],red:el[2],teal:el[3],green:el[4],yellow:el[5],purple:el[6],pink:el[7],brown:el[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function qQe(e={}){return{signals:[{name:"color",value:se(e)?{...tW,...e}:tW}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function GQe(e){return{signals:[{name:"fontSize",value:se(e)?{...eW,...e}:eW}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function YQe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function mue(e){const t=X(e||{}),n={};for(const r of t){const i=e[r];n[r]=kb(i)?Wae(i):Ni(i)}return n}function XQe(e){const t=X(e),n={};for(const r of t)n[r]=mue(e[r]);return n}const KQe=[...Ele,...Gle,...fue,"background","padding","legend","lineBreak","scale","style","title","view"];function yue(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=fm({},Pe(HQe),n?YQe(n):{},t?qQe(t):{},r?GQe(r):{},o||{});i&&dm(s,"selection",i,!0);const a=yi(s,KQe);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Ni(s[l]));for(const l of Ele)s[l]&&(a[l]=Gn(s[l]));for(const l of Gle)s[l]&&(a[l]=mue(s[l]));for(const l of fue)s[l]&&(a[l]=Gn(s[l]));if(s.legend&&(a.legend=Gn(s.legend)),s.scale){const{invalid:l,...u}=s.scale,c=Gn(l,{level:1});a.scale={...Gn(u),...X(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=XQe(s.style)),s.title&&(a.title=Gn(s.title)),s.view&&(a.view=Gn(s.view)),a}const QQe=new Set(["view",...PKe]),JQe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],ZQe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...DKe};function eJe(e){e=Pe(e);for(const t of JQe)delete e[t];if(e.axis)for(const t in e.axis)kb(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of RQe)delete e.legend[t];if(e.mark){for(const t of WV)delete e.mark[t];e.mark.tooltip&&se(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(hue(e.params)),delete e.params);for(const t of QQe){for(const r of WV)delete e[t][r];const n=ZQe[t];if(n)for(const r of n)delete e[t][r];nJe(e,t)}for(const t of FQe())delete e[t];tJe(e);for(const t in e)se(e[t])&&vt(e[t])&&delete e[t];return vt(e)?void 0:e}function tJe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Vae(e.title);vt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),vt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),vt(r)?delete e.title:e.title=r}function nJe(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};vt(o)||(e.style[n??t]=o),delete e[t]}function A_(e){return K(e,"layer")}function rJe(e){return K(e,"repeat")}function iJe(e){return!Y(e.repeat)&&K(e.repeat,"layer")}class zI{map(t,n){return w_(t)?this.mapFacet(t,n):rJe(t)?this.mapRepeat(t,n):LI(t)?this.mapHConcat(t,n):$_(t)?this.mapVConcat(t,n):II(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(A_(t))return this.mapLayer(t,n);if(nu(t))return this.mapUnit(t,n);throw new Error(nI(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const oJe={zero:1,center:1,normalize:1};function sJe(e){return fe(oJe,e)}const aJe=new Set([Sle,y_,m_,$k,b_,yI,vI,v_,kle,mI]),lJe=new Set([y_,m_,Sle]);function Oh(e){return ee(e)&&Vg(e)==="quantitative"&&!e.bin}function nW(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(ee(s)&&ee(a))if(Oh(s)&&Oh(a)){if(s.stack)return t;if(a.stack)return i;const l=ee(s)&&!!s.aggregate,u=ee(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Oh(s))return t;if(Oh(a))return i}else{if(Oh(s))return o&&n==="vertical"?void 0:t;if(Oh(a))return o&&n==="horizontal"?void 0:i}}function uJe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function vue(e,t){var g,m;const n=Ra(e)?e:{type:e},r=n.type;if(!aJe.has(r))return null;const i=nW(t,"x",n)||nW(t,"theta",n);if(!i)return null;const o=t[i],s=ee(o)?ie(o,{}):void 0,a=uJe(i),l=[],u=new Set;if(t[a]){const y=t[a],v=ee(y)?ie(y,{}):void 0;v&&v!==s&&(l.push(a),u.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=ee(f)?ie(f,{}):void 0;d&&d!==s&&(l.push(c),u.add(d));const h=xYe.reduce((y,v)=>{if(v!=="tooltip"&&ud(t,v)){const b=t[v];for(const x of le(b)){const w=Ps(x);if(w.aggregate)continue;const k=ie(w,{});(!k||!u.has(k))&&y.push({channel:v,fieldDef:w})}}return y},[]);let p;return o.stack!==void 0?Nc(o.stack)?p=o.stack?"zero":null:p=o.stack:lJe.has(r)&&(p="zero"),!p||!sJe(p)||Kle(t)&&h.length===0?null:((g=o==null?void 0:o.scale)!=null&&g.type&&((m=o==null?void 0:o.scale)==null?void 0:m.type)!==Yn.LINEAR&&o!=null&&o.stack&&Z(DXe(o.scale.type)),Fe(t[qa(i)])?(o.stack!==void 0&&Z(OXe(i)),null):(ee(o)&&o.aggregate&&!FYe.has(o.aggregate)&&Z(NXe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:Xc(r),stackBy:h,offset:p}))}function bue(e,t,n){const r=Gn(e),i=mt("orient",r,n);if(r.orient=hJe(r.type,t,i),i!==void 0&&i!==r.orient&&Z(vXe(r.orient,i)),r.type==="bar"&&r.orient){const l=mt("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:LKe[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=mt("opacity",r,n),s=mt("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=fJe(r.type,t)),mt("cursor",r,n)===void 0&&(r.cursor=cJe(r,t,n)),r}function cJe(e,t,n){return t.href||e.href||mt("href",e,n)?"pointer":e.cursor}function fJe(e,t){if(ze([b_,mI,yI,vI],e)&&!Kle(t))return .7}function dJe(e,t,{graticule:n}){if(n)return!1;const r=Fa("filled",e,t),i=e.type;return an(r,i!==b_&&i!==v_&&i!==$k)}function hJe(e,t,n){switch(e){case b_:case yI:case vI:case kle:case AKe:case $Ke:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case y_:if(ee(r)&&(Hn(r.bin)||ee(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ee(i)&&(Hn(i.bin)||ee(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(ee(r)&&r.type===Od&&!$t(r.bin)||Tk(r))&&ee(i)&&Hn(i.bin)?"horizontal":"vertical";if(!s)return(ee(i)&&i.type===Od&&!$t(i.bin)||Tk(i))&&ee(r)&&Hn(r.bin)?"vertical":"horizontal"}case $k:if(o&&!(ee(r)&&Hn(r.bin))&&s&&!(ee(i)&&Hn(i.bin)))return;case m_:if(s)return ee(i)&&Hn(i.bin)?"horizontal":"vertical";if(o)return ee(r)&&Hn(r.bin)?"vertical":"horizontal";if(e===$k){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case v_:case mI:{const a=YV(r),l=YV(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=Zr(r)&&r.type===Bg,c=Zr(i)&&i.type===Bg;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function pJe(e){const{point:t,line:n,...r}=e;return X(r).length>1?r:r.type}function gJe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:yi(e[t],["point","line"])});return e}function zT(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?se(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?se(t.point)?t.point:{}:void 0}function rW(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class mJe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(nu(t)){const{mark:r,encoding:i}=t,o=Ra(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!zT(o,n[o.type],i);case"area":return!!zT(o,n[o.type],i)||!!rW(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:u,...c}=t,f=__(u,i),d=Ra(a)?a:{type:a},h=zT(d,i[d.type],f),p=d.type==="area"&&rW(d,i[d.type]),g=[{name:l,...o?{params:o}:{},mark:pJe({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:yi(f,["shape"])}],m=vue(bue(d,f,i),f);let y=f;if(m){const{fieldChannel:v,offset:b}=m;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=yi(y,["y2","x2"]),p&&g.push({...s?{projection:s}:{},mark:{type:"line",...Ng(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&g.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Ng(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:g},{...n,config:gJe(i)})}}function yJe(e,t){return t?bb(e)?wue(e,t):xue(e,t):e}function jT(e,t){return t?wue(e,t):e}function HM(e,t,n){const r=t[e];if(ZKe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Z(JYe(r.repeat));return}return t}function xue(e,t){if(e=HM("field",e,t),e!==void 0){if(e===null)return null;if(EI(e)&&Pl(e.sort)){const n=HM("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function iW(e,t){if(ee(e))return xue(e,t);{const n=HM("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function oW(e,t){if(Fe(e)){const n=iW(e,t);if(n)return n;if(xb(e))return{condition:e.condition}}else{if(wb(e)){const n=iW(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function wue(e,t){const n={};for(const r in e)if(K(e,r)){const i=e[r];if(Y(i))n[r]=i.map(o=>oW(o,t)).filter(o=>o);else{const o=oW(i,t);o!==void 0&&(n[r]=o)}}return n}class vJe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(nu(t)){const{encoding:n,mark:r}=t;if(r==="line"||Ra(r)&&r.type==="line")for(const i of yYe){const o=ah(i),s=n[o];if(n[i]&&(ee(s)&&!Hn(s.bin)||Ya(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return Z(yXe(!!i.x2,!!i.y2)),r({...t,mark:se(o)?{...o,type:"rule"}:"rule"},n)}}class bJe extends zI{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[wQe,CQe,MQe,new mJe,new vJe]}map(t,n){if(nu(t)){const r=ud(t.encoding,Al),i=ud(t.encoding,Tl),o=ud(t.encoding,o_);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=jT(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,a);return s}mapRepeat(t,n){return iJe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...o,layer:l.map(f=>{const d={...u,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${zt(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!Y(r)&&t.columns&&(t=yi(t,["columns"]),Z(LV("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!Y(r)&&r.row||[l?l.row:null],f=!Y(r)&&r.column||[l?l.column:null],d=Y(r)&&r||[l?l.repeat:null];for(const p of d)for(const g of c)for(const m of f){const y={repeat:p,row:g,column:m,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(Y(r)?`${zt(p)}`:(r.row?`row_${zt(g)}`:"")+(r.column?`column_${zt(m)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(yi(b,["data"]))}const h=Y(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return bb(r)&&t.columns&&(t=yi(t,["columns"]),Z(LV("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,l=aW({parentProjection:s,projection:i}),u=sW({parentEncoding:o,encoding:jT(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:l,projection:u,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),y=jT(s,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...l?{width:l}:{},...c?{height:c}:{},...f?{view:f}:{},...u?{projection:u}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&Z(gXe([...r?[Al]:[],...i?[Tl]:[]]));const s={},a={};for(const l of[Al,Tl]){const u=t[l];if(u){const{align:c,center:f,spacing:d,columns:h,...p}=u;s[l]=p;for(const g of["align","center","spacing"])u[g]!==void 0&&(a[g]??(a[g]={}),a[g][l]=u[g])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:l,columns:u,...c}=o;return{facetMapping:yJe(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,l={...i,parentEncoding:sW({parentEncoding:n,encoding:o,layer:!0}),parentProjection:aW({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function sW({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...X(e),...X(t)]);for(const o of i){const s=t[o],a=e[o];if(Fe(s)){const l={...a,...s};r[o]=l}else wb(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||Ts(a)||me(a)||Fe(a)||Y(a))&&(r[o]=a)}}else r=t;return!r||vt(r)?void 0:r}function aW(e){const{parentProjection:t,projection:n}=e;return t&&n&&Z(iXe({parentProjection:t,projection:n})),n??t}function jI(e){return K(e,"filter")}function xJe(e){return K(e,"stop")}function Sue(e){return K(e,"lookup")}function wJe(e){return K(e,"data")}function SJe(e){return K(e,"param")}function kJe(e){return K(e,"pivot")}function CJe(e){return K(e,"density")}function EJe(e){return K(e,"quantile")}function _Je(e){return K(e,"regression")}function $Je(e){return K(e,"loess")}function AJe(e){return K(e,"sample")}function TJe(e){return K(e,"window")}function PJe(e){return K(e,"joinaggregate")}function MJe(e){return K(e,"flatten")}function FJe(e){return K(e,"calculate")}function kue(e){return K(e,"bin")}function RJe(e){return K(e,"impute")}function OJe(e){return K(e,"timeUnit")}function DJe(e){return K(e,"aggregate")}function NJe(e){return K(e,"stack")}function IJe(e){return K(e,"fold")}function LJe(e){return K(e,"extent")&&!K(e,"density")&&!K(e,"regression")}function zJe(e){return e.map(t=>jI(t)?{filter:Dp(t.filter,cKe)}:t)}class jJe extends zI{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=lW(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=lW(t,n),t.encoding){const r={};for(const[i,o]of Ec(t.encoding))r[i]=Cue(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Ec(r).map(([o,s])=>{const{init:a,bind:l,empty:u,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=u!=="none";for(const f of tr(n.selectionPredicates[o]??{}))f.empty=u!=="none";return{name:o,value:a,select:c,bind:l}})}:t}}function lW(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(jI(o))return{filter:qM(o,t)};if(kue(o)&&lh(o.bin))return{...o,bin:Eue(o.bin)};if(Sue(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function Cue(e,t){var r,i;const n=Pe(e);if(ee(n)&&lh(n.bin)&&(n.bin=Eue(n.bin)),dh(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(xb(n))if(Y(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...u}=o;return a?o:{...u,test:qM(o,t)}});else{const{selection:o,param:s,test:a,...l}=Cue(n.condition,t);n.condition=s?n.condition:{...l,test:qM(n.condition,t)}}return n}function Eue(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function qM(e,t){const n=r=>Dp(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Dp(e.test||e.filter,r=>r.selection?n(r.selection):r)}class GM extends zI{map(t,n){const r=n.selections??[];if(t.params&&!nu(t)){const i=[];for(const o of t.params)NI(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(ue(a)&&(a===t.name||i.includes(a))||Y(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=GM.prototype[e];GM.prototype[e]=function(n,r){return t.call(this,n,BJe(n,r))}}function BJe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function _ue(e,t){t===void 0&&(t=yue(e.config));const n=HJe(e,t),{width:r,height:i}=e,o=qJe(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const UJe=new bJe,VJe=new jJe,WJe=new GM;function HJe(e,t={}){const n={config:t};return WJe.map(UJe.map(VJe.map(e,n),n),n)}function uW(e){return ue(e)?{type:e}:e??{}}function qJe(e,t,n){let{width:r,height:i}=t;const o=nu(e)||A_(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(Z(OV("width")),r=void 0),i=="container"&&(Z(OV("height")),i=void 0));const a={type:"pad",...s,...n?uW(n.autosize):{},...uW(e.autosize)};if(a.type==="fit"&&!o&&(Z(BYe),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Z(DV("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Z(DV("height")),!Ui(a,{type:"pad"}))return a}function GJe(e){return["fit","fit-x","fit-y"].includes(e)}function YJe(e){return e?`fit-${c_(e)}`:"fit"}const XJe=["background","padding"];function cW(e,t){const n={};for(const r of XJe)e&&e[r]!==void 0&&(n[r]=Ni(e[r]));return t&&(n.params=e.params),n}class ru{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ru(Pe(this.explicit),Pe(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return an(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of X(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Js(e){return{explicit:!0,value:e}}function Pi(e){return{explicit:!1,value:e}}function $ue(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:T_(t,n,r,i)}}function T_(e,t,n,r){return e.explicit&&t.explicit&&Z($Xe(n,r,e.value,t.value)),e}function Ac(e,t,n,r,i=T_){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Ui(e.value,t.value)?e:i(e,t,n,r)}class KJe extends ru{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function qg(e){return K(e,"url")}function tv(e){return K(e,"values")}function Aue(e){return K(e,"name")&&!qg(e)&&!tv(e)&&!lc(e)}function lc(e){return e&&(Tue(e)||Pue(e)||BI(e))}function Tue(e){return K(e,"sequence")}function Pue(e){return K(e,"sphere")}function BI(e){return K(e,"graticule")}var en;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(en||(en={}));function Mue({invalid:e,isPath:t}){switch(_le(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function QJe(e){const{marks:t,scales:n}=Mue(e);return t===n?en.Main:n==="include-invalid-values"?en.PreFilterInvalid:en.PostFilterInvalid}function Fue(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=jo(i.field),i}function Id(e,t=!0,n=Ar){if(Y(e)){const r=e.map(i=>Id(i,t,n));return t?`[${r.join(", ")}]`:r}else if(ch(e))return n(t?Rd(e):JXe(e));return t?n(bt(e)):e}function JJe(e,t){for(const n of tr(e.component.selection??{})){const r=n.name;let i=`${r}${Tc}, ${n.resolve==="global"?"true":`{unit: ${cd(e)}}`}`;for(const o of R_)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+AZe,on:[{events:{signal:n.name+Tc},update:`modify(${ne(n.name+Ld)}, ${i})`}]})}return UI(t)}function ZJe(e,t){if(e.component.selection&&X(e.component.selection).length){const n=ne(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Uc("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return UI(t)}function eZe(e,t){let n=!1;for(const r of tr(e.component.selection??{})){const i=r.name,o=ne(i+Ld);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Kue}(${o}, ${ne(a)}${l}`})}n=!0;for(const a of R_)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),UI(t)}function tZe(e,t){const n=[...t],r=cd(e,{escape:!1});for(const i of tr(e.component.selection??{})){const o={name:i.name+Ld};if(i.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Ms}}]),i.init){const a=i.project.items.map(Fue);o.values=i.project.hasSelectionId?i.init.map(l=>({unit:r,[Ms]:Id(l,!1)[0]})):i.init.map(l=>({unit:r,fields:a,values:Id(l,!1)}))}n.filter(a=>a.name===i.name+Ld).length||n.push(o)}return n}function Rue(e,t){for(const n of tr(e.component.selection??{}))for(const r of R_)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function nZe(e,t){for(const n of e.children)Vt(n)&&(t=Rue(n,t));return t}function rZe(e,t,n,r){const i=tce(e,t.param,t);return{signal:As(n.get("type"))&&Y(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function UI(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class gt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Z(tXe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class vi extends gt{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${$ae()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function BT(e){return e.as!==void 0}function fW(e){return`${e}_end`}class _a extends gt{clone(){return new _a(null,Pe(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:l}=o;if(l){let u;if(fh(l)){if(Vt(n)){const{mark:c,markDef:f,config:d}=n,h=$c({fieldDef:o,markDef:f,config:d});(ev(c)||h)&&(u={timeUnit:In(l),field:a})}}else u={as:ie(o,{forAs:!0}),field:a,timeUnit:l};if(Vt(n)){const{mark:c,markDef:f,config:d}=n,h=$c({fieldDef:o,markDef:f,config:d});ev(c)&&ln(s)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Be(u)]=u)}return i},{});return vt(r)?null:new _a(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=In(r),s={...i,timeUnit:o};return new _a(t,{[Be(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Ec(this.timeUnits)){const o=BT(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(tr(this.timeUnits).map(t=>BT(t)?t.as:fW(t.field)))}dependentFields(){return new Set(tr(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Be(this.timeUnits)}`}assemble(){const t=[];for(const n of tr(this.timeUnits)){const{rectBandPosition:r}=n,i=In(n.timeUnit);if(BT(n)){const{field:o,as:s}=n,{unit:a,utc:l,...u}=i,c=[s,`${s}_end`];t.push({field:jo(o),type:"timeunit",...a?{units:p_(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...dW(c,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=Oue({timeUnit:i,field:s}),l=fW(s);t.push({type:"formula",expr:a,as:l}),t.push(...dW([s,l],r,i))}}return t}}const P_="offsetted_rect_start",M_="offsetted_rect_end";function Oue({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=lle(r),{part:s,step:a}=dle(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', datum['${t}'], ${n?-a:a})`}function dW([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:hW([Oue({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${P_}`},{type:"formula",expr:hW([i,o],n+.5),as:`${e}_${M_}`}]}return[]}function hW([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Cb="_tuple_fields";class iZe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const oZe={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new iZe),o={},s={},a=new Set,l=(p,g)=>{const m=g==="visual"?p.channel:p.field;let y=zt(`${r}_${m}`);for(let v=1;a.has(y);v++)y=zt(`${r}_${m}_${v}`);return a.add(y),{[g]:y}},u=t.type,c=e.config.selection[u],f=n.value!==void 0?le(n.value):null;let{fields:d,encodings:h}=se(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(se(p))for(const g of X(p))mYe(g)?(h||(h=[])).push(g):u==="interval"?(Z(QYe),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){Z(UYe(p,g.aggregate));continue}else if(!m){Z(IV(p));continue}if(g.timeUnit&&!fh(g.timeUnit)){m=e.vgField(p);const y={timeUnit:g.timeUnit,as:m,field:g.field};s[Be(y)]=y}if(!o[m]){const y=u==="interval"&&Ga(p)&&As(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",v={field:m,channel:p,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(o[m]=v),i.hasField[m]=o[m],i.hasSelectionId=i.hasSelectionId||m===Ms,Rae(p)?(v.geoChannel=p,v.channel=Fae(p),i.hasChannel[v.channel]=o[m]):i.hasChannel[p]=o[m]}}else Z(IV(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...l(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===Ms}f&&(t.init=f.map(p=>i.items.map(g=>se(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),vt(s)||(i.timeUnit=new _a(null,s))},signals:(e,t,n)=>{const r=t.name+Cb;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(Fue)})}},Ml={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Ga(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&Z(qYe),!o||!As(s)){Z(HYe);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||pW(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(Kue))i.update=`{${r.map(s=>`${ne(jo(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${ne(jo(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!pW(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function YM(e,t){return`domain(${ne(e.scaleName(t))})`}function pW(e){return e.parent&&Rm(e.parent)&&!e.parent.parent}const Lp="_brush",Due="_scale_trigger",x0="geo_interval_init_tick",Nue="_init",sZe="_center",aZe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...se(n.select)?n.select:{}};i.fields=[Ms],i.encodings||(i.encodings=n.value?X(n.value):[js,zs]),n.select={type:"interval",...i}}if(t.translate&&!Ml.defined(t)){const i=`!event.item || event.item.mark.name !== ${ne(t.name+Lp)}`;for(const o of t.events){if(!o.between){Z(`${o} is not an ordered event stream for interval selections.`);continue}const s=le((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Tc,o=tr(t.project.hasChannel).filter(a=>a.channel===jt||a.channel===Un),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(lZe(e,t,l,s&&s[l.index])),[])),e.hasProjection){const a=ne(e.projectionName()),l=e.projectionName()+sZe,{x:u,y:c}=t.project.hasChannel,f=u&&u.signals.visual,d=c&&c.signals.visual,h=u?s&&s[u.index]:`${l}[0]`,p=c?s&&s[c.index]:`${l}[1]`,g=w=>e.getSizeSignalRef(w).signal,m=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;s&&(n.unshift({name:r+Nue,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(k=>k.name===l)||n.unshift({name:l,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${m}, {markname: ${ne(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${cd(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,x=o.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...s?[{signal:x0}]:[]],update:b}]})}else{if(!Ml.defined(t)){const u=r+Due,c=o.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=ne(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=As(m)?"+":"";return`(!isArray(${h}) || (${y}invert(${g}, ${p})[0] === ${y}${h}[0] && ${y}invert(${g}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=o.map(u=>u.signals.data),l=`unit: ${cd(e)}, fields: ${r+Cb}, values`;return n.concat({name:i,...s?{init:`{${l}: ${Id(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Vt(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===x0).length||n.unshift({name:x0,value:null,on:[{events:"timer{1}",update:`${x0} === null ? {} : ${x0}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${ne(t.name+Ld)})`;if(Ml.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of X(u))u[m]=[{test:`${l}.length && ${l}[0].unit === ${cd(e)}`,...u[m]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=X(h).reduce((m,y)=>(m[y]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],m),{}),g=d??(t.translate?"move":null);return[{name:`${r+Lp}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:u}},...n,{name:r+Lp,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function lZe(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=ne(i?e.scaleName(o):e.projectionName()),l=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(o===jt?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const d=n.signals.data,h=Ml.defined(t),p=e.getScaleComponent(o),g=p?p.get("type"):void 0,m=r?{init:Id(r,!0,l)}:{value:[]};return f.push({events:{signal:t.name+Due},update:As(g)?`[${l(`${d}[0]`)}, ${l(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...m,on:f},{name:d,...r?{init:Id(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===jt?0:1,h=t.name+Nue,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...p,on:f}]}}const uZe={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+Cb,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=tr(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Lp):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${cd(e)}, `;if(t.project.hasSelectionId)u+=`${Ms}: ${s}[${ne(Ms)}]`;else{const f=o.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${s}[${ne(e.vgField(d.channel,{}))}], ${s}[${ne(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${s}[${ne(d.field)}]`}).join(", ");u+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Tc,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function Tm({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=xb(t)&&t.condition;let s=[];o&&(s=le(o).map(u=>{const c=i(u);if(JKe(u)){const{param:f,empty:d}=u;return{test:ece(e,{param:f,empty:d}),...c}}else return{test:Ik(e,u.test),...c}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function VI(e,t="text"){const n=e.encoding[t];return Tm({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>F_(r,e.config),invalidValueRef:void 0})}function F_(e,t,n="datum"){if(e){if(Ts(e))return Ft(e.value);if(Fe(e)){const{format:r,formatType:i}=Mk(e);return kI({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Iue(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(Y(s))return{tooltip:gW({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return Tm({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:u=>{const c=F_(u,i,a);if(c)return c;if(u===null)return;let f=mt("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),ue(f))return{value:f};if(se(f))return me(f)?f:f.content==="encoding"?gW(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function Lue(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(c,f){const d=ah(f),h=Zr(c)?c:{...c,type:e[d].type},p=h.title||$I(h,i),g=le(p).join(", ").replaceAll(/"/g,'\\"');let m;if(ln(f)){const y=f==="x"?"x2":"y2",v=Ps(e[y]);if(Hn(h.bin)&&v){const b=ie(h,{expr:s}),x=ie(v,{expr:s}),{format:w,formatType:k}=Mk(h);m=vb(b,x,w,k,i),o.add(y)}}if((ln(f)||f===Vo||f===Ls)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=Mk(h);m=kI({fieldOrDatumDef:h,format:y,formatType:v,expr:s,config:i,normalizeStack:!0}).signal}m??(m=F_(h,i,s).signal),a.push({channel:f,key:g,value:m})}TI(e,(c,f)=>{ee(c)?l(c,f):S_(c)&&l(c.condition,f)});const u={};for(const{channel:c,key:f,value:d}of a)!o.has(c)&&!u[f]&&(u[f]=d);return u}function gW(e,t,n,{reactiveGeom:r}={}){const i=Lue(e,t,n,{reactiveGeom:r}),o=Ec(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function cZe(e){const{markDef:t,config:n}=e,r=mt("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...fZe(e),...dZe(e)}}function fZe(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=mt("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:fe(LYe,t)?{}:{ariaRoleDescription:{value:t}}}function dZe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Tm({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>F_(l,e.config),invalidValueRef:void 0});const s=mt("description",n,r);if(s!=null)return{description:Ft(s)};if(r.aria===!1)return{};const a=Lue(t,i,r);if(!vt(a))return{description:{signal:Ec(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Kn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=mt(e,r,o,{vgChannel:s,ignoreVgConfig:!xb(u)})),l!==void 0&&(a=Ft(l)));const c={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=Ale({...c,scaleChannel:e,channelDef:u});return Tm({model:t,channelDef:u,vgChannel:s??e,invalidValueRef:f,mainRefFn:h=>SI({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function zue(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??mt("filled",n,i),a=ze(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=mt(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,u=mt(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...l?{fill:Ft(l)}:{},...u?{stroke:Ft(u)}:{}};return n.color&&(s?n.fill:n.stroke)&&Z(Zae("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Kn("color",e,{vgChannel:c,defaultValue:s?l:u}),...Kn("fill",e,{defaultValue:r.fill?l:void 0}),...Kn("stroke",e,{defaultValue:r.stroke?u:void 0})}}function hZe(e){const{encoding:t,mark:n}=e,r=t.order;return!Xc(n)&&Ts(r)?Tm({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Ft(i.value),invalidValueRef:void 0}):{}}function Gg({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:SI({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Ft(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function qr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],u=i[qa(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Gg({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),p=WI({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!l&&ln(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:pZe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function pZe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Fe(n)&&i&&t===i.fieldChannel){if(ee(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return Ak({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return ld(n,r,{suffix:"end"},{offset:o})}return wI(e)}function WI({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=ah(n),l=_c(n),u=mt(n,o,s,{vgChannel:l});if(u!==void 0)return Xy(n,u);switch(t){case"zeroOrMin":return mW({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return mW({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[_i(n)],mult:.5}}}}function mW({mainChannel:e,config:t,...n}){const r=$le(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const gZe={left:"x",center:"xc",right:"x2"},mZe={top:"y",middle:"yc",bottom:"y2"};function jue(e,t,n,r="middle"){if(e==="radius"||e==="theta")return _c(e);const i=e==="x"?"align":"baseline",o=mt(i,t,n);let s;return me(o)?(Z(mXe(i)),s=void 0):s=o,e==="x"?gZe[s||(r==="top"?"left":"center")]:mZe[s||r]}function Dk(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Bue(e,t,{defaultPos:n,defaultPos2:r}):qr(e,t,{defaultPos:n})}function Bue(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=qa(e),a=_i(e),l=yZe(t,r,s),u=l[a]?jue(e,i,o):_c(e);return{...qr(e,t,{defaultPos:n,vgChannel:u}),...l}}function yZe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=ah(n),u=_i(n),c=_c(n),f=r[l],d=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in o?Gg({channel:n,markDef:o,encoding:r,model:e}):Gg({channel:l,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const m=_i(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const g=vZe({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:qx(n,o)||qx(n,{[n]:IM(n,o,a.style),[u]:IM(u,o,a.style)})||qx(n,a[i])||qx(n,a.mark)||{[c]:WI({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function vZe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:u}){return Fe(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?ld(t,o,{suffix:"start"},{offset:l}):wI({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function qx(e,t){const n=_i(e),r=_c(e);if(t[r]!==void 0)return{[r]:Xy(e,t[r])};if(t[e]!==void 0)return{[r]:Xy(e,t[e])};if(t[n]){const i=t[n];if(Dd(i))Z(cXe(n));else return{[n]:Xy(e,i)}}}function Wl(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=qa(t),a=_i(t),l=r[t],u=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??mt("size",i,n,{vgChannel:a}),p=Iae(t),g=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return ee(l)&&($t(l.bin)||Hn(l.bin)||l.timeUnit&&!u)&&!(h&&!Dd(h))&&!r[p]&&!Ln(f)?wZe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Fe(l)&&Ln(f)||g)&&!u?xZe(l,t,e):Bue(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function bZe(e,t,n,r,i,o,s){if(Dd(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=Fa("minBandSize",{type:s},r);return{signal:c?`max(${ms(c)}, ${u})`:u}}else i.band!==1&&(Z(xXe(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(me(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(uh(l)&&Je(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=an(l,s==="tick"?f:s==="bar"?u:c);if(me(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Je(d))return{signal:`${1-d} * ${e}`}}return{value:WM(r.view,e)-2}}function xZe(e,t,n){var E,A;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=_i(t),f=qa(t),d=Iae(t),h=n.scaleName(d),p=n.getScaleComponent(KN(t)),g=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(i.size||r.size)&&(g?m=Kn("size",n,{vgChannel:c,defaultRef:Ft(r.size)}):Z(CXe(r.type)));const y=!!m,v=Dle({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(E=u||p)==null?void 0:E.get("type"),useVlSizeChannel:g});m=m||{[c]:bZe(c,h||l,p||u,o,v,!!e,r.type)};const b=((A=u||p)==null?void 0:A.get("type"))==="band"&&Dd(v)&&!y?"top":"middle",x=jue(t,r,o,b),w=x==="xc"||x==="yc",{offset:k,offsetType:S}=Gg({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),C=wI({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:s,offset:k,defaultRef:WI({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:w?S==="encoding"?0:.5:me(v)?{signal:`(1-${v})/2`}:Dd(v)?(1-v.band)/2:0});if(c)return{[x]:C,...m};{const T=_c(f),I=m[c],F=k?{...I,offset:k}:I;return{[x]:C,[T]:Y(C)?[C[0],{...C[1],offset:F}]:{...C,offset:F}}}}function yW(e,t,n,r,i,o,s){if(Mae(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(me(n)||me(i)||me(r)||o){const u=ms(n),c=ms(i),f=ms(r),d=ms(o),p=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${l})`:l,g=f?`${f} + `:"",m=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:g+m+y}}else return i=i||0,r+(n?-i-l:+i+l)}function wZe({fieldDef:e,fieldDef2:t,channel:n,model:r}){var A;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),f=Dle({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),d=(A=r.component.axes[n])==null?void 0:A[0],h=(d==null?void 0:d.get("translate"))??.5,p=ln(n)?mt("binSpacing",o,i)??0:0,g=qa(n),m=_c(n),y=_c(g),v=Fa("minBandSize",o,i),{offset:b}=Gg({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:x}=Gg({channel:g,markDef:o,encoding:s,model:r,bandPosition:0}),w=qKe({fieldDef:e,scaleName:l}),k=yW(n,p,c,h,b,v,w),S=yW(g,p,c,h,x??b,v,w),C=me(f)?{signal:`(1-${f.signal})/2`}:Dd(f)?(1-f.band)/2:.5,E=$c({fieldDef:e,fieldDef2:t,markDef:o,config:i});if($t(e.bin)||e.timeUnit){const T=e.timeUnit&&E!==.5;return{[y]:vW({fieldDef:e,scaleName:l,bandPosition:C,offset:S,useRectOffsetField:T}),[m]:vW({fieldDef:e,scaleName:l,bandPosition:me(C)?{signal:`1-${C.signal}`}:1-C,offset:k,useRectOffsetField:T})}}else if(Hn(e.bin)){const T=ld(e,l,{},{offset:S});if(ee(t))return{[y]:T,[m]:ld(t,l,{},{offset:k})};if(lh(e.bin)&&e.bin.step)return{[y]:T,[m]:{signal:`scale("${l}", ${ie(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}Z(nle(g))}function vW({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return Ak({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:P_,endSuffix:M_}:{}})}const SZe=new Set(["aria","width","height"]);function Wo(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?zue(e):{};return{...kZe(e.markDef,t),...bW("fill",n),...bW("stroke",r),...Kn("opacity",e),...Kn("fillOpacity",e),...Kn("strokeOpacity",e),...Kn("strokeWidth",e),...Kn("strokeDash",e),...hZe(e),...Iue(e),...VI(e,"href"),...cZe(e)}}function bW(e,t){return t?{[e]:t}:{}}function kZe(e,t){return IYe.reduce((n,r)=>(!SZe.has(r)&&K(e,r)&&t[r]!=="ignore"&&(n[r]=Ft(e[r])),n),{})}function HI(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var u;let s;if(!Ga(o)||!(s=e.getScaleType(o)))return;const a=f_(i.aggregate),l=xI({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(VKe(l)){const c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(o=>g_(o,!0)).join(" && ")}}}function xW(e,t){if(t!==void 0)return{[e]:Ft(t)}}const UT="voronoi",Uue={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(UT)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Xc(o))return Z(VYe(o)),n;const s={name:e.getName(UT),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Iue(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const f=u.name??"";f===e.component.mark[0].name?a=c:f.includes(UT)&&(l=!0)}),l||n.splice(a+1,0,s),n}},Vue={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!DI(e.bind),parse:(e,t,n)=>Que(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=Uue.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=zt(`${r}_${l.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...s?{init:Id(s[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ne(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+Tc),s=r+Cb,a=i.items.map(u=>zt(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},Nk="_toggle",Wue={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Nk,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Tc,r=t.name+Nk;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${cd(e)}}, `)+`${r} ? ${n} : null`}},CZe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=ue(t.clear)?Uc(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Vue.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===zt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+Tc);r(i,"null"),Wue.defined(t)&&(i=n.findIndex(o=>o.name===t.name+Nk),r(i,"false"))}return n}},Hue={defined:e=>{const t=e.resolve==="global"&&e.bind&&DI(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ms;return t&&!n&&Z(GYe),t&&n},parse:(e,t,n)=>{const r=Pe(n);if(r.select=ue(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Que(t,r),se(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=le(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=LT(t.bind)?t.bind.legend:"click",o=ue(i)?Uc(i,"view"):le(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=LT(t.bind)&&t.bind.legend,o=s=>a=>{const l=Pe(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${zt(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+Tc),s=r+Cb,a=i.items.filter(d=>d.hasLegend).map(d=>zt(`${r}_${zt(d.field)}_legend`)),u=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(d=>d.name===r+Nk),f=LT(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function EZe(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of tr(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&Hue.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const que="_translate_anchor",Gue="_translate_delta",_Ze={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Ml.defined(t),o=r+que,{x:s,y:a}=t.project.hasChannel;let l=Uc(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+Lp,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?YM(e,jt):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?YM(e,Un):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+Gue,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&wW(e,t,s,"width",n),a!==void 0&&wW(e,t,a,"height",n),n}};function wW(e,t,n,r,i){const o=t.name,s=o+que,a=o+Gue,l=n.channel,u=Ml.defined(t),c=i.find(w=>w.name===n.signals[u?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(l),h=d&&d.get("type"),p=d&&d.get("reverse"),g=u?l===jt?p?"":"-":p?"-":"":"",m=`${s}.extent_${l}`,y=`${g}${a}.${l} / ${u?`${f}`:`span(${m})`}`,v=!u||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",x=`${v}(${m}, ${y}${b})`;c.on.push({events:{signal:a},update:u?x:`clampRange(${x}, 0, ${f})`})}const Yue="_zoom_anchor",Xue="_zoom_delta",$Ze={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Ml.defined(t),o=r+Xue,{x:s,y:a}=t.project.hasChannel,l=ne(e.scaleName(jt)),u=ne(e.scaleName(Un));let c=Uc(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Lp,f))),n.push({name:r+Yue,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&SW(e,t,s,"width",n),a!==void 0&&SW(e,t,a,"height",n),n}};function SW(e,t,n,r,i){const o=t.name,s=n.channel,a=Ml.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),d=a?YM(e,s):l.name,h=o+Xue,p=`${o}${Yue}.${s}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${g}(${d}, ${p}, ${h}${m})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const Ld="_store",Tc="_tuple",AZe="_modify",Kue="vlSelectionResolve",R_=[uZe,aZe,oZe,Wue,Vue,Ml,Hue,CZe,_Ze,$Ze,Uue];function TZe(e){let t=e.parent;for(;t&&!Xi(t);)t=t.parent;return t}function cd(e,{escape:t}={escape:!0}){let n=t?ne(e.name):e.name;const r=TZe(e);if(r){const{facet:i}=r;for(const o of To)i[o]&&(n+=` + '__facet_${o}_' + (facet[${ne(r.vgField(o))}])`)}return n}function qI(e){return tr(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Que(e,t){(ue(t.select)||!t.select.on)&&delete e.events,(ue(t.select)||!t.select.clear)&&delete e.clear,(ue(t.select)||!t.select.toggle)&&delete e.toggle}function XM(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...XM(e.object)),t.push(...XM(e.property))),t)}function Jue(e){return e.object.type==="MemberExpression"?Jue(e.object):e.object.name==="datum"}function Zue(e){const t=dN(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Jue(r)&&n.add(XM(r).slice(1).join("."))}),n}class Pm extends gt{clone(){return new Pm(null,this.model,Pe(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=Ik(this.model,this.filter,this),this._dependentFields=Zue(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function PZe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const o=zt(i.name),s=i.select,a=ue(s)?s:s.type,l=se(s)?Pe(s):{type:a},u=r[a];for(const d in u)d==="fields"||d==="encodings"||(d==="mark"&&(l.mark={...u.mark,...l.mark}),(l[d]===void 0||l[d]===!0)&&(l[d]=Pe(u[d]??l[d])));const c=n[o]={...l,name:o,type:a,init:i.value,bind:i.bind,events:ue(l.on)?Uc(l.on,"scope"):le(Pe(l.on))},f=Pe(i);for(const d of R_)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function ece(e,t,n,r="datum"){const i=ue(t)?t:t.param,o=zt(i),s=ne(o+Ld);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${ne(a.resolve)})`,c=`${l}${s}, ${r}${u}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function tce(e,t,n){const r=zt(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&Z(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ne(o)}.`);else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,Z((a.length?"Multiple ":"No ")+`matching ${ne(i)} encoding found for selection ${ne(n.param)}. Using "field": ${ne(o)}.`)):o=a[0].field}return`${s.name}[${ne(jo(o))}]`}function MZe(e,t){for(const[n,r]of Ec(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new vi(new Pm(t,e,{param:n}),i,en.Lookup,e.component.data.outputNodeRefCounts)}}function Ik(e,t,n){return Yy(t,r=>ue(r)?r:aKe(r)?ece(e,r,n):ple(r))}function FZe(e,t){if(e)return Y(e)&&!ku(e)?e.map(n=>$I(n,t)).join(", "):e}function VT(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function cy(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const p=h,g=dQe[p],m=c[p];if(g&&g!==t&&g!=="both")delete c[p];else if(kb(m)){const{condition:y,...v}=m,b=le(y),x=XV[p];if(x){const{vgProp:w,part:k}=x,S=[...b.map(C=>{const{test:E,...A}=C;return{test:Ik(null,E),...A}}),v];VT(c,k,w,S),delete c[p]}else if(x===null){const w={signal:b.map(k=>{const{test:S,...C}=k;return`${Ik(null,S)} ? ${RV(C)} : `}).join("")+RV(v)};c[p]=w}}else if(me(m)){const y=XV[p];if(y){const{vgProp:v,part:b}=y;VT(c,b,v,m),delete c[p]}}ze(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},vt(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:an(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&me(c.encode.labels.update.text)&&(p=Md(a,"datum.label",c.encode.labels.update.text.signal)),VT(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of Hle)e.hasAxisPart(p)||delete c.encode[p];vt(c.encode)&&delete c.encode}const h=FZe(l,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:an(u,0)}}}}function nce(e){const{axes:t}=e.component,n=[];for(const r of tu)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function RZe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>cy(i,"grid",t)),...r.map(i=>cy(i,"grid",t)),...n.map(i=>cy(i,"main",t)),...r.map(i=>cy(i,"main",t))].filter(i=>i)}function kW(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...X(s),...X(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${o}" ? ${ms(s[c])} : ${ms(a[c])}`};return u}return t[i]})])}function OZe(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:vle(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=me(n)?"axisOrient":`axis${db(n)}`,a=[...i,...i.map(u=>o+u.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:kW(a,r,e,n),vgAxisConfig:kW(l,r,e,n),axisConfigStyle:DZe([...l,...a],r)}}function DZe(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=le(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function KM(e,t,n,r={}){var o;const i=qae(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const CW={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??NZe(n,e),gridScale:({model:e,channel:t})=>IZe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||ice(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||rce(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??zZe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??jZe(t.type,n,ee(t)&&!!t.timeUnit,ee(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??UZe({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:VZe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=oce(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return Yae(i?[GV(i)]:[],ee(s)?[GV(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>WZe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??HZe(n,t)};function NZe(e,t){return!Ln(e)&&ee(t)&&!$t(t==null?void 0:t.bin)&&!Hn(t==null?void 0:t.bin)}function IZe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function LZe(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return me(o)?o:Z1(o);{const{configValue:s}=KM("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?Z1(s):n===jt&&ze([gI,pI],e.type)&&!(ee(e)&&e.timeUnit)?270:void 0}}function QM(e){return`(((${e.signal} % 360) + 360) % 360)`}function rce(e,t,n,r){if(e!==void 0)if(n==="x"){if(me(e)){const i=QM(e),o=me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(me(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(me(e)){const i=QM(e),o=me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(me(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function ice(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(me(e)){const s=QM(e),a=me(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(me(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function zZe(e,t){if(t==="x"&&ze(["quantitative","temporal"],e))return!0}function jZe(e,t,n,r){if(n&&!se(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function BZe(e){return e==="x"?"bottom":"left"}function UZe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Ln(t)&&t!=="log"){if(ee(e)){if($t(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ze(["month","hours","day","quarter"],(i=In(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function VZe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ee(t)){const{timeUnit:n}=t;if(n){const r=fle(n);if(r)return{signal:r}}}}function oce(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return Xae(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function WZe(e,t){const n=e.values;if(Y(n))return Wle(t,n);if(me(n))return n}function HZe(e,t){return e==="rect"&&Pk(t)?1:0}class Yg extends gt{clone(){return new Yg(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Zue(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(dh(r)&&Ole(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,l=a.map((u,c)=>`${ple({field:o,timeUnit:s,equal:u})} ? ${c} : `).join("")+a.length;t=new Yg(t,{calculate:l,as:Xg(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Be(this.transform)}`}}function Xg(e,t,n){return ie(e,{prefix:t,suffix:"sort_index",...n})}function O_(e,t){return ze(["top","bottom"],t)?"column":ze(["left","right"],t)||e==="row"?"row":"column"}function Kg(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return an((t||{})[e],i[e],n.header[e])}function D_(e,t,n,r){const i={};for(const o of e){const s=Kg(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const GI=["row","column"],YI=["header","footer"];function qZe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=D_(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=O_(t,a),u=Z1(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...ace(u,l),...sce(l,u,o),...lce(r,i,t,OQe,uue)}}}function sce(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=ice(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function ace(e,t){const n=rce(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function GZe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of YI)if(n[i])for(const o of n[i]){const s=XZe(e,t,i,n,o);s!=null&&r.push(s)}return r}function YZe(e,t){const{sort:n}=e;return Pl(n)?{field:ie(n,{expr:"datum"}),order:n.order??"ascending"}:Y(n)?{field:Xg(e,t,{expr:"datum"}),order:"ascending"}:{field:ie(e,{expr:"datum"}),order:n??"ascending"}}function JM(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=D_(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=kI({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=O_(t,a);return{text:{signal:l?Md(Md(l,"datum.label",u),"datum.value",ie(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...ace(o,c),...sce(c,o,s),...lce(n,e,t,DQe,cue)}}function XZe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=D_(["labelOrient"],s.header,a,t);(t==="row"&&!ze(["top","bottom"],f)||t==="column"&&!ze(["left","right"],f))&&(o=JM(s,t,a))}const l=Xi(e)&&!bb(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:YZe(s,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const KZe={column:{start:0,end:1},row:{start:1,end:0}};function QZe(e,t){return KZe[t][e]}function JZe(e,t){const n={};for(const r of To){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=D_(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=O_(r,s),l=QZe(o,a);l!==void 0&&(n[a]=l)}}return vt(n)?void 0:n}function lce(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=Kg(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function XI(e){return[...Gx(e,"width"),...Gx(e,"height"),...Gx(e,"childWidth"),...Gx(e,"childHeight")]}function Gx(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(Ln(s)&&uh(a)){const l=e.scaleName(n);return Xi(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[EW(l,a)]:[EW(l,a),{name:i,update:uce(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=VM(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function EW(e,t){const n=`${e}_step`;return me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function uce(e,t,n){const r=t.get("type"),i=t.get("padding"),o=an(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${ms(s)}, ${ms(o)}) * ${e}_step`}function cce(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function fce(e,t){return X(e).reduce((n,r)=>({...n,...Tm({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Ft(i.value),invalidValueRef:void 0})}),{})}function dce(e,t){if(Xi(t))return e==="theta"?"independent":"shared";if(Rm(t))return"shared";if(nL(t))return ln(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function KI(e,t){const n=e.scale[t],r=ln(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Z(TXe(t)),"independent"):e[r][t]||"shared"}const ZZe={...LQe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},hce=X(ZZe);class eet extends ru{}const _W={symbols:tet,gradient:net,labels:ret,entries:iet};function tet(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:u}=n,c=s.filled&&u!=="trail";let f={...jYe({},n,RKe),...zue(n,{filled:c})};const d=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,g=d===void 0?pce(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Ci)delete f.fill;else if(K(f.fill,"field"))h?delete f.fill:(f.fill=Ft(l.legend.symbolBaseFillColor??"black"),f.fillOpacity=Ft(g??1));else if(Y(f.fill)){const m=ZM(a.fill??a.color)??s.fill??(c&&s.color);m&&(f.fill=Ft(m))}}if(f.stroke){if(r==="stroke"||!c&&r===Ci)delete f.stroke;else if(K(f.stroke,"field")||p)delete f.stroke;else if(Y(f.stroke)){const m=an(ZM(a.stroke||a.color),s.stroke,c?s.color:void 0);m&&(f.stroke={value:m})}}if(r!==eu){const m=ee(t)&&mce(n,i,t);m?f.opacity=[{test:m,...Ft(g??1)},Ft(l.legend.unselectedOpacity)]:g&&(f.opacity=Ft(g))}return f={...f,...e},vt(f)?void 0:f}function net(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?pce(s.opacity)||o.opacity:void 0;return u&&(a.opacity=Ft(u)),a={...a,...e},vt(a)?void 0:a}function ret(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=ee(t)?mce(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let f;Nd(c)?f=ys({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:s}):u===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=ys({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&ee(t)&&t.timeUnit===void 0&&(f=ys({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...l?{opacity:l}:{},...f?{text:f}:{},...e};return vt(d)?void 0:d}function iet(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function pce(e){return gce(e,(t,n)=>Math.max(t,n.value))}function ZM(e){return gce(e,(t,n)=>an(t,n.value))}function gce(e,t){if(eQe(e))return le(e.condition).reduce(t,e.value);if(Ts(e))return e.value}function mce(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=ne(n.field);return r.map(o=>`(!length(data(${ne(zt(o)+Ld)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const $W={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Mle(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Fle(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??det(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??het(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??set(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Ip(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Np(n)&&ha(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>oet(t,e)};function oet(e,t){const n=e.values;if(Y(n))return Wle(t,n);if(me(n))return n}function set(e,t,n,r){if(t!=="shape"){const i=ZM(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function aet(e){const{legend:t}=e;return an(t.type,uet(e))}function uet({channel:e,timeUnit:t,scaleType:n}){if(Np(e)){if(ze(["quarter","month","day"],t))return"symbol";if(ha(n))return"gradient"}return"symbol"}function cet({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??fet(n,t)}function fet(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function det({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(ha(i))return n==="horizontal"?r==="top"||r==="bottom"?AW(t,"width",s,o):s:AW(t,"height",l,a)}function AW(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function het(e){if(ze(["quantile","threshold","log","symlog"],e))return"greedy"}function yce(e){const t=Vt(e)?pet(e):vet(e);return e.component.legends=t,t}function pet(e){const{encoding:t}=e,n={};for(const r of[Ci,...due]){const i=Sn(t[r]);!i||!e.getScaleComponent(r)||r===Ei&&ee(i)&&i.type===Am||(n[r]=yet(e,r))}return n}function get(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function met(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function yet(e,t){var x;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new eet({},get(e,t));EZe(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=Sn(i[t]),f=ee(c)?(x=In(c.timeUnit))==null?void 0:x.unit:void 0,d=n.orient||o.legend.orient||"right",h=aet({legend:n,channel:t,timeUnit:f,scaleType:u}),p=cet({legend:n,legendType:h,orient:d,legendConfig:s}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:u,orient:d,legendType:h,direction:p};for(const w of hce){if(h==="gradient"&&w.startsWith("symbol")||h==="symbol"&&w.startsWith("gradient"))continue;const k=w in $W?$W[w](g):n[w];if(k!==void 0){const S=met(k,w,n,e.fieldDef(t));(S||o.legend[w]===void 0)&&a.set(w,k,S)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const w of["labels","legend","title","symbols","gradient","entries"]){const k=fce(m[w]??{},e),S=w in _W?_W[w](k,b):k;S!==void 0&&!vt(S)&&(v[w]={...y!=null&&y.length&&ee(c)?{name:`${zt(c.field)}_legend_${w}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return vt(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function vet(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){yce(r);for(const i of X(r.component.legends))n.legend[i]=KI(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=vce(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of X(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function vce(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of hce){const c=Ac(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(f,d)=>{switch(u){case"symbolType":return bet(f,d);case"title":return Kae(f,d);case"type":return i=!0,Pi("symbol")}return T_(f,d,u,"legend")});e.setWithExplicit(u,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&Ek(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&Ek(e.explicit,["encode","gradient"])),e}function bet(e,t){return t.value==="circle"?t:e}function xet(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function bce(e){const t=e.component.legends,n={};for(const i of X(t)){const o=e.getScaleComponent(i),s=bt(o.get("domains"));if(n[s])for(const a of n[s])vce(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return tr(n).flat().map(i=>wet(i,e.config)).filter(i=>i!==void 0)}function wet(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const c of due)o[c]&&delete u[c]}if(o.title||delete o.title,r!==void 0){let u=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&me(o.encode.labels.update.text)&&(u=Md(r,"datum.label",o.encode.labels.update.text.signal)),xet(o,"labels","text",{signal:u})}return o}}function ket(e){return Rm(e)||nL(e)?Cet(e):xce(e)}function Cet(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),xce(e))}function xce(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=me(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return ze(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Eet=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class wce extends ru{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Sce(e){e.component.projection=Vt(e)?_et(e):Tet(e)}function _et(e){if(e.hasProjection){const t=Gn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?$et(e):void 0,o=new wce(e.projectionName(!0),{...Gn(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function $et(e){const t=[],{encoding:n}=e;for(const r of[[js,zs],[Bo,Bs]])(Sn(n[r[0]])||Sn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ei)&&e.typedFieldDef(Ei).type===Am&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(en.Main)),t}function Aet(e,t){const n=VN(Eet,i=>!!(!fe(e.explicit,i)&&!fe(t.explicit,i)||fe(e.explicit,i)&&fe(t.explicit,i)&&Ui(e.get(i),t.get(i))));if(Ui(e.size,t.size)){if(n)return e;if(Ui(e.explicit,{}))return t;if(Ui(t.explicit,{}))return e}return null}function Tet(e){if(e.children.length===0)return;let t;for(const r of e.children)Sce(r);const n=VN(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=Aet(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new wce(r,t.specifiedProjection,t.size,Pe(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function Pet(e,t,n,r){if(Sb(t,n)){const i=Vt(e)?e.axis(n)??e.legend(n)??{}:{},o=ie(t,{expr:"datum"}),s=ie(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ie(t,{binSuffix:"range",forAs:!0}),formula:vb(o,s,i.format,i.formatType,r)}}return{}}function kce(e,t){return`${Uae(e)}_${t}`}function Met(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function QI(e,t,n){const r=k_(n,void 0)??{},i=kce(r,t);return e.getName(`${i}_bins`)}function Fet(e){return"as"in e}function TW(e,t,n){let r,i;Fet(e)?r=ue(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ie(e,{forAs:!0}),ie(e,{binSuffix:"end",forAs:!0})];const o={...k_(t,void 0)},s=kce(o,e.field),{signal:a,extentSignal:l}=Met(n,s);if(d_(o.extent)){const c=o.extent;i=tce(n,c.param,c),delete o.extent}const u={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:u}}class $a extends gt{clone(){return new $a(null,Pe(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(Zr(o)&&$t(o.bin)){const{key:a,binComponent:l}=TW(o,o.bin,n);i[a]={...l,...i[a],...Pet(n,o,s,n.config)}}return i},{});return vt(r)?null:new $a(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=TW(n,n.bin,r);return new $a(t,{[i]:o})}merge(t,n){for(const r of X(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=da([...this.bins[r].as,...t.bins[r].as],Be)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(tr(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(tr(this.bins).map(t=>t.field))}hash(){return`Bin ${Be(this.bins)}`}assemble(){return tr(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:jo(t.field),as:r,signal:t.signal,...d_(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:jo(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:ie({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Ret(e,t,n,r){var o;const i=Vt(r)?r.encoding[qa(t)]:void 0;if(Zr(n)&&Vt(r)&&Nle(n,i,r.markDef,r.config)){e.add(ie(n,{})),e.add(ie(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,u=$c({fieldDef:n,markDef:a,config:l});ev(s)&&u!==.5&&ln(t)&&(e.add(ie(n,{suffix:P_})),e.add(ie(n,{suffix:M_}))),n.bin&&Sb(n,t)&&e.add(ie(n,{binSuffix:"range"}))}else if(Rae(t)){const s=Fae(t);e.add(r.getName(s))}else e.add(ie(n));return dh(n)&&xKe((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function Oet(e,t){for(const n of X(t)){const r=t[n];for(const i of X(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class ws extends gt{clone(){return new ws(null,new Set(this.dimensions),Pe(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:l,field:u}=s;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ie(s,{forAs:!0})]);else{if(Vl(l)||Yc(l)){const c=Vl(l)?"argmin":"argmax",f=l[c];i[f]??(i[f]={}),i[f][c]=new Set([ie({op:c,field:f},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([ie(s,{forAs:!0})]);Ga(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([ie({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([ie({field:u,aggregate:"max"},{forAs:!0})]))}else Ret(o,a,s,n)}),o.size+X(i).length===0)?null:new ws(t,o,i)}static makeFromTransform(t,n){var r;const i=new Set,o={};for(const s of n.aggregate){const{op:a,field:l,as:u}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([u||ie(s,{forAs:!0})])):(o[l]??(o[l]={}),(r=o[l])[a]??(r[a]=new Set),o[l][a].add(u||ie(s,{forAs:!0}))))}for(const s of n.groupby??[])i.add(s);return i.size+X(o).length===0?null:new ws(t,i,o)}merge(t){return Cae(this.dimensions,t.dimensions)?(Oet(this.measures,t.measures),!0):(HXe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...X(this.measures)])}producedFields(){const t=new Set;for(const n of X(this.measures))for(const r of X(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Be({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of X(this.measures))for(const s of X(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:jo(o));return{type:"aggregate",groupby:[...this.dimensions].map(jo),ops:t,fields:n,as:r}}}class Mm extends gt{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of To){const s=n.facet[o];if(s){const{bin:a,sort:l}=s;this[o]={name:n.getName(`${o}_domain`),fields:[ie(s),...$t(a)?[ie(s,{binSuffix:"end"})]:[]],...Pl(l)?{sortField:l}:Y(l)?{sortIndexField:Xg(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of To)this[n]&&(t+=` ${n.charAt(0)}:${Be(this[n])}`);return t}get fields(){var n;const t=[];for(const r of To)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of To)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of tu){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(Ln(i)&&uh(o)){const s=N_(this.childModel,n),a=tL(s);a?t[n]=a:Z(rI(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=x_,field:f}=l;o.push(f),s.push(c),a.push(ie(l,{forAs:!0}))}else u&&(o.push(u),s.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const u of GI){for(const c of YI){const f=(r[u]&&r[u][c])??[];for(const d of f)if(((l=d.axes)==null?void 0:l.length)>0){o[u]=!0;break}}if(o[u]){const c=`length(data("${this.facet.name}"))`,f=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Tl,Al])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function PW(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Det(e,t){const n=qN(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=PW(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=PW(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Z(eXe(t)),null}function Net(e){const t={};return u2(e.filter,n=>{if(hle(n)){let r=null;aI(n)?r=Ni(n.equal):uI(n)?r=Ni(n.lte):lI(n)?r=Ni(n.lt):cI(n)?r=Ni(n.gt):fI(n)?r=Ni(n.gte):dI(n)?r=n.range[0]:hI(n)&&(r=(n.oneOf??n.in)[0]),r&&(ch(r)?t[n.field]="date":Je(r)?t[n.field]="number":ue(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Iet(e){const t={};function n(r){Hg(r)?t[r.field]="date":r.type==="quantitative"&&MYe(r.aggregate)?t[r.field]="number":Lg(r.field)>1?r.field in t||(t[r.field]="flatten"):dh(r)&&Pl(r.sort)&&Lg(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Vt(e)||Xi(e))&&e.forEachFieldDef((r,i)=>{if(Zr(r))n(r);else{const o=ah(i),s=e.fieldDef(o);n({...r,type:s.type})}}),Vt(e)){const{mark:r,markDef:i,encoding:o}=e;if(Xc(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];ee(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Let(e){const t={};if(Vt(e)&&e.component.selection)for(const n of X(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Lg(i.field)>1&&(t[i.field]="flatten")}return t}class Sr extends gt{clone(){return new Sr(null,Pe(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Be(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!lc(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of X(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:Z(zV(a,r[a],l.value)))}for(const a of X(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:Z(zV(a,n[a],l)))}const o=new ru(n,r);i.copyAll(o);const s={};for(const a of X(o.combine())){const l=o.get(a);l!==null&&(s[a]=l)}return X(s).length===0||i.parseNothing?null:new Sr(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of X(this._parse)){const r=this._parse[n];Lg(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(X(this._parse))}dependentFields(){return new Set(X(this._parse))}assembleTransforms(t=!1){return X(this._parse).filter(n=>t?Lg(n)>1:!0).map(n=>{const r=Det(n,this._parse[n]);return r?{type:"formula",expr:r,as:_m(n)}:null}).filter(n=>n!==null)}}class Pc extends gt{clone(){return new Pc(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ms])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ms}}}class Eb extends gt{clone(){return new Eb(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Be(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class _b extends gt{clone(){return new _b(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Be(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class zd extends gt{constructor(t){super(null),t??(t={name:"source"});let n;if(lc(t)||(n=t.format?{...yi(t.format,["parse"])}:{}),tv(t))this._data={values:t.values};else if(qg(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];ze(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else Pue(t)?this._data={values:[{type:"Sphere"}]}:(Aue(t)||lc(t))&&(this._data={});this._generator=lc(t),t.name&&(this._name=t.name),n&&!vt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var MW=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},zet=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},fy;function JI(e){return e instanceof zd||e instanceof Eb||e instanceof _b}class ZI{constructor(){fy.set(this,void 0),MW(this,fy,!1,"f")}setModified(){MW(this,fy,!0,"f")}get modifiedFlag(){return zet(this,fy,"f")}}fy=new WeakMap;class hh extends ZI{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class eL extends ZI{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class jet extends eL{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of X(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Bet extends eL{constructor(t){super(),this.requiresSelectionId=t&&qI(t)}run(t){t instanceof Pc&&(this.requiresSelectionId&&(JI(t.parent)||t.parent instanceof ws||t.parent instanceof Sr)||(this.setModified(),t.remove()))}}class Uet extends ZI{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof _a&&(r=t.producedFields(),WN(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Vet extends eL{constructor(){super()}run(t){t instanceof vi&&!t.isRequired()&&(this.setModified(),t.remove())}}class Wet extends hh{run(t){if(!JI(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Sr)if(t instanceof Sr)this.setModified(),t.merge(n);else{if(HN(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Het extends hh{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Sr);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of X(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!vt(i)){this.setModified();const s=new Sr(t,i);for(const a of n){if(a instanceof Sr)for(const l of X(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof Sr&&X(a.parse).length===0&&a.remove()}}}}}class qet extends hh{run(t){t instanceof vi||t.numChildren()>0||t instanceof Mm||t instanceof zd||(this.setModified(),t.remove())}}class Get extends hh{run(t){const n=t.children.filter(i=>i instanceof _a),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Yet extends hh{run(t){const n=t.children.filter(i=>i instanceof ws),r={};for(const i of n){const o=Be(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of X(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class Xet extends hh{constructor(t){super(),this.model=t}run(t){const n=!(JI(t)||t instanceof Pm||t instanceof Sr||t instanceof Pc),r=[],i=[];for(const o of t.children)o instanceof $a&&(n&&!HN(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof $a?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class Ket extends hh{run(t){const n=[...t.children];if(!Ig(n,s=>s instanceof vi)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof vi){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof vi)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class ph extends gt{clone(){return new ph(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=da(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ie(t)}hash(){return`JoinAggregateTransform ${Be(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class Qg extends gt{clone(){return new Qg(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:s,scales:a}=r;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,f)=>{const d=Ga(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,g=xI({scaleChannel:f,markDef:o,config:i,scaleType:h,isCountAggregate:f_(p)});g!=="show"&&g!=="always-valid"&&(u[c.field]=c)}return u},{});return X(l).length?new Qg(t,l):null}dependentFields(){return new Set(X(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Be(this.filter)}`}assemble(){const t=X(this.filter).reduce((n,r)=>{const i=this.filter[r],o=ie(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${eF(o)}))`):i.type==="quantitative"&&n.push(eF(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function eF(e){return`isValid(${e}) && isFinite(+${e})`}function Qet(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ie(r);return i&&t.push(i),t},[])}function Jet(e){return Y(e)&&e.every(t=>ue(t))&&e.length>1}class Fl extends gt{clone(){return new Fl(null,Pe(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),l.push(an(f.order,"ascending"));const u={field:a,order:l};let c;return Jet(o)?c=o:ue(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Fl(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:l}=r,u=o.map(h=>{const p=i[h];return Ps(p)}).filter(h=>!!h),c=Qet(n),f=n.encoding.order;let d;if(Y(f)||ee(f))d=Gae(f);else{const h=Ile(f)?f.sort:s==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new Fl(t,{dimensionFieldDefs:u,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Be(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ie(i,{binSuffix:"mid"})]:[ie(i,{}),ie(i,{binSuffix:"end"})]:[ie(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ie(c,{expr:"datum"}),p=ie(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${eF(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:ie(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:ie(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:u,offset:a}),t}}class Fm extends gt{clone(){return new Fm(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=da(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ie(t)}hash(){return`WindowTransform ${Be(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>tI(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),l.push(f.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function Zet(e){function t(n){if(!(n instanceof Mm)){const r=n.clone();if(r instanceof vi){const i=nF+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof ws||r instanceof Fl||r instanceof Fm||r instanceof ph)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function tF(e){if(e instanceof Mm)if(e.numChildren()===1&&!(e.children[0]instanceof vi)){const t=e.children[0];(t instanceof ws||t instanceof Fl||t instanceof Fm||t instanceof ph)&&t.addDimensions(e.fields),t.swapWithParent(),tF(e)}else{const t=e.model.component.data.main;Cce(t);const n=Zet(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(tF)}function Cce(e){if(e instanceof vi&&e.type===en.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Mm||(t.swapWithParent(),Cce(e))}}const nF="scale_",Yx=5;function rF(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!rF(t.children))return!1}return!0}function Yo(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function FW(e,t,n){let r=e.sources,i=!1;return i=Yo(new Vet,r)||i,i=Yo(new Bet(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Yo(new qet,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Yo(new Wet,r)||i,i=Yo(new Xet(t),r)||i,i=Yo(new Uet,r)||i,i=Yo(new Het,r)||i,i=Yo(new Yet,r)||i,i=Yo(new Get,r)||i,i=Yo(new jet,r)||i,i=Yo(new Ket,r)||i),e.sources=r,i}function ett(e,t){rF(e.sources);let n=0,r=0;for(let i=0;i<Yx&&FW(e,t,!0);i++)n++;e.sources.map(tF);for(let i=0;i<Yx&&FW(e,t,!1);i++)r++;rF(e.sources),Math.max(n,r)===Yx&&Z(`Maximum optimization runs(${Yx}) reached.`)}class Pn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Pn(()=>t(n))}}function Ece(e){Vt(e)?ttt(e):ntt(e)}function ttt(e){const t=e.component.scales;for(const n of X(t)){const r=itt(e,n);if(t[n].setWithExplicit("domains",r),stt(e,n),e.component.data.isFaceted){let o=e;for(;!Xi(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)xl(a)&&(a.data=nF+a.data.replace(nF,""))}}}function ntt(e){for(const n of e.children)Ece(n);const t=e.component.scales;for(const n of X(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=Ac(r,s.getWithExplicit("domains"),"domains","scale",iF);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&Z(KYe),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function rtt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=RW(t,n);if(!i){Z(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=RW(t,n);if(i)return"unaggregated"}return e}function itt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=rtt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Sn(r.x2)?Sn(r.x)?Ac(pu(n,i,e,"x"),pu(n,i,e,"x2"),"domain","scale",iF):pu(n,i,e,"x2"):t==="y"&&Sn(r.y2)?Sn(r.y)?Ac(pu(n,i,e,"y"),pu(n,i,e,"y2"),"domain","scale",iF):pu(n,i,e,"y2"):pu(n,i,e,t)}function ott(e,t,n){return e.map(r=>({signal:`{data: ${C_(r,{timeUnit:n,type:t})}}`}))}function WT(e,t,n){var i;const r=(i=In(n))==null?void 0:i.unit;return t==="temporal"||r?ott(e,t,r):[e]}function pu(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,u=Sn(i[r]),{type:c}=u,f=u.timeUnit,d=QJe({invalid:Fa("invalid",o,a),isPath:Xc(s)});if(bKe(t)){const g=pu(e,void 0,n,r),m=WT(t.unionWith,c,f);return Js([...m,...g.value])}else{if(me(t))return Js([t]);if(t&&t!=="unaggregated"&&!xle(t))return Js(WT(t,c,f))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Pi([[0,1]]);const g=n.requestDataName(d);return Pi([{data:g,field:n.vgField(r,{suffix:"start"})},{data:g,field:n.vgField(r,{suffix:"end"})}])}const h=Ga(r)&&ee(u)?att(n,r,e):void 0;if(Ya(u)){const g=WT([u.datum],c,f);return Pi(g)}const p=u;if(t==="unaggregated"){const{field:g}=u;return Pi([{data:n.requestDataName(d),field:ie({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:ie({field:g,aggregate:"max"})}])}else if($t(p.bin)){if(Ln(e))return Pi(e==="bin-ordinal"?[]:[{data:J1(h)?n.requestDataName(d):n.requestDataName(en.Raw),field:n.vgField(r,Sb(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!se(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:g}=p;if($t(g)){const m=QI(n,p.field,g);return Pi([new Pn(()=>{const y=n.getSignalName(m);return`[${y}.start, ${y}.stop]`})])}else return Pi([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&ze(["time","utc"],e)){const g=i[qa(r)];if(Nle(p,g,o,a)){const m=n.requestDataName(d),y=$c({fieldDef:p,fieldDef2:g,markDef:o,config:a}),v=ev(s)&&y!==.5&&ln(r);return Pi([{data:m,field:n.vgField(r,v?{suffix:P_}:{})},{data:m,field:n.vgField(r,{suffix:v?M_:"end"})}])}}return Pi(h?[{data:J1(h)?n.requestDataName(d):n.requestDataName(en.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function HT(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":x_),...r?{field:jo(r)}:{},...i?{order:i}:{}}}function stt(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=xle(r)?r:void 0,s=lh(i)&&d_(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function att(e,t,n){if(!Ln(n))return;const r=e.fieldDef(t),i=r.sort;if(Ole(i))return{op:"min",field:Xg(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Pl(i)){const a=o&&!s.has(i.field);return HT(i,a)}else if(QKe(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:f}=u,d=o&&!s.has(f);if(Vl(c)||Yc(c))return HT({field:ie(u),order:l},d);if(tI(c)||!c)return HT({op:c,field:f,order:l},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(ze(["ascending",void 0],i))return!0}}function RW(e,t){const{aggregate:n,type:r}=e;return n?ue(n)&&!RYe.has(n)?{valid:!1,reason:SXe(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:kXe(e)}:{valid:!0}:{valid:!1,reason:wXe(e)}}function iF(e,t,n,r){return e.explicit&&t.explicit&&Z(AXe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function ltt(e){const t=da(e.map(s=>{if(xl(s)){const{sort:a,...l}=s;return l}return s}),Be),n=da(e.map(s=>{if(xl(s)){const a=s.sort;return a!==void 0&&!J1(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Be);if(t.length===0)return;if(t.length===1){const s=e[0];if(xl(s)&&n.length>0){let a=n[0];if(n.length>1){Z(BV);const l=n.filter(u=>se(u)&&"op"in u&&u.op!=="min");n.every(u=>se(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(se(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=da(n.map(s=>J1(s)||!("op"in s)||ue(s.op)&&fe(TYe,s.op)?s:(Z(PXe(s)),!0)),Be);let i;r.length===1?i=r[0]:r.length>1&&(Z(BV),i=!0);const o=da(e.map(s=>xl(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function tL(e){if(xl(e)&&ue(e.field))return e.field;if(OYe(e)){let t;for(const n of e.fields)if(xl(n)&&ue(n.field)){if(!t)t=n.field;else if(t!==n.field)return Z(MXe),t}return Z(FXe),t}else if(DYe(e)){Z(RXe);const t=e.fields[0];return ue(t)?t:void 0}}function N_(e,t){const r=e.component.scales[t].get("domains").map(i=>(xl(i)&&(i.data=e.lookupDataSource(i.data)),i));return ltt(r)}function _ce(e){return Rm(e)||nL(e)?e.children.reduce((t,n)=>t.concat(_ce(n)),OW(e)):OW(e)}function OW(e){return X(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:u,reverse:c,...f}=i,d=utt(i.range,o,n,e),h=N_(e,n),p=a?rZe(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function utt(e,t,n,r){if(ln(n)){if(uh(e))return{step:{signal:`${t}_step`}}}else if(se(e)&&xl(e))return{...e,data:r.lookupDataSource(e.data)};return e}class $ce extends ru{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(ze([Yn.LOG,Yn.TIME,Yn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&ze([Yn.LINEAR,Yn.SQRT,Yn.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,s=!1;for(const a of r){if(Y(a)){const l=a[0],u=a[a.length-1];if(Je(l)&&Je(u))if(l<=0&&u>=0){i=!0;continue}else{o=!0;continue}}s=!0}if(i)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const ctt=["range","scheme"];function ftt(e){const t=e.component.scales;for(const n of eI){const r=t[n];if(!r)continue;const i=dtt(n,e);r.setWithExplicit("range",i)}}function DW(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=_i(t),s=e.getName(o);if(se(r)&&r.binned&&r.step!==void 0)return new Pn(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if($t(r)){const a=QI(e,i,r);return new Pn(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${u})`})}}}function dtt(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of ctt)if(n[f]!==void 0){const d=jM(o,f),h=wle(e,f);if(!d)Z(ele(o,f,e));else if(h)Z(h);else switch(f){case"range":{const p=n.range;if(Y(p)){if(ln(e))return Js(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return Pn.fromName(y,m)}return g}))}else if(se(p))return Js({data:t.requestDataName(en.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Js(p)}case"scheme":return Js(htt(n[f]))}}const s=e===jt||e==="xOffset"?"width":"height",a=r[s];if(Oa(a)){if(ln(e))if(Ln(o)){const f=Tce(a,t,e);if(f)return Js({step:f})}else Z(tle(s));else if(gb(e)){const f=e===Vc?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=Pce(a,o);if(p)return Js(p)}}}const{rangeMin:l,rangeMax:u}=n,c=ptt(e,t);return(l!==void 0||u!==void 0)&&jM(o,"rangeMin")&&Y(c)&&c.length===2?Js([l??c[0],u??c[1]]):Pi(c)}function htt(e){return vKe(e)?{scheme:e.name,...yi(e,["name"])}:{scheme:e}}function Ace(e,t,n,{center:r}={}){const i=_i(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===Un&&As(n)?r?[Pn.fromName(a=>`${s(a)}/2`,o),Pn.fromName(a=>`-${s(a)}/2`,o)]:[Pn.fromName(s,o),0]:r?[Pn.fromName(a=>`-${s(a)}/2`,o),Pn.fromName(a=>`${s(a)}/2`,o)]:[0,Pn.fromName(s,o)]}function ptt(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=Sn(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case jt:case Un:{if(ze(["point","band"],l)){const f=Mce(e,n,r.view);if(Oa(f))return{step:Tce(f,t,e)}}return Ace(e,t,l)}case Vc:case $m:return gtt(e,t,l);case Zl:{const f=vtt(i,r),d=btt(i,n,t,r);return Ug(l)?ytt(f,d,mtt(l,r,u,e)):[f,d]}case Vo:return[0,Math.PI*2];case sh:return[0,360];case Ls:return[0,new Pn(()=>{const f=t.getSignalName(Xi(t.parent)?"child_width":"width"),d=t.getSignalName(Xi(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case qc:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Gc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ei:return"symbol";case Ci:case Wa:case Ha:return l==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case eu:case Wc:case Hc:return[r.scale.minOpacity,r.scale.maxOpacity]}}function Tce(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=KN(n),s=r[o];if(pue({step:e,offsetIsDiscrete:Fe(s)&&gle(s.type)})==="offset"&&Yle(r,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const d=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${zYe(f)})`}}else return e.step}function Pce(e,t){if(pue({step:e,offsetIsDiscrete:Ln(t)})==="offset")return{step:e.step}}function gtt(e,t,n){const r=e===Vc?"x":"y",i=t.getScaleComponent(r);if(!i)return Ace(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const u=Mce(r,t.size,t.config.view);if(Oa(u)){const c=Pce(u,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{const u=t.encoding[r];if(ee(u)&&u.timeUnit){const c=fle(u.timeUnit,p=>`scale('${s}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=$c({fieldDef:u,markDef:a,config:l})-.5,h=d!==0?` + ${d}`:"";if(f){const p=me(f)?`${f.signal}/2`+h:`${f/2+d}`,g=me(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${g} * (${c})`}]}return[0,{signal:c}]}return Sae(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function Mce(e,t,n){const r=e===jt?"width":"height",i=t[r];return i||Ok(n,r)}function mtt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Y(n)?n.length+1:(Z(UXe(r)),3)}}function ytt(e,t,n){const r=()=>{const i=ms(t),o=ms(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return me(t)?new Pn(r):{signal:r()}}function vtt(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(h_("size",e))}const NW=.95;function btt(e,t,n,r){const i={x:DW(n,"x"),y:DW(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=IW(t,i,r.view);return Je(o)?o-1:new Pn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=IW(t,i,r.view);return Je(o)?Math.pow(NW*o,2):new Pn(()=>`pow(${NW} * ${o.signal}, 2)`)}}throw new Error(h_("size",e))}function IW(e,t,n){const r=Oa(e.width)?e.width.step:WM(n,"width"),i=Oa(e.height)?e.height.step:WM(n,"height");return t.x||t.y?new Pn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function Fce(e,t){Vt(e)?xtt(e,t):Oce(e,t)}function xtt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of X(n)){const l=s[a],u=n[a],c=e.getScaleComponent(a),f=Sn(i[a]),d=l[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=jM(h,t),y=wle(a,t);if(d!==void 0&&(m?y&&Z(y):Z(ele(h,t,a))),m&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":ch(l[t])||b==="temporal"||v?u.set(t,{signal:C_(l[t],{type:b,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=K(LW,t)?LW[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:Xle(i,a),hasSecondaryRangeChannel:!!i[qa(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const LW={bins:({model:e,fieldOrDatumDef:t})=>ee(t)?wtt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Stt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>ktt(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Ctt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>Ett(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>_tt(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=ee(e)?e.sort:void 0;return $tt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>Att(e,t,n,r,i,o.scale,s)};function Rce(e){Vt(e)?ftt(e):Oce(e,"range")}function Oce(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?Rce(r):Fce(r,t);for(const r of X(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=Ac(i,a,t,"scale",$ue((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function wtt(e,t){const n=t.bin;if($t(n)){const r=QI(e,t.field,n);return new Pn(()=>e.getSignalName(r))}else if(Hn(n)&&lh(n)&&n.step!==void 0)return{step:n.step}}function Stt(e,t){if(ze([Ci,Wa,Ha],e)&&t!=="nominal")return"hcl"}function ktt(e,t,n,r,i,o){var s;if(!((s=Ps(o))!=null&&s.bin||Y(n)||i!=null||r!=null||ze([Yn.TIME,Yn.UTC],e)))return ln(t)?!0:void 0}function Ctt(e,t,n,r,i,o){if(ln(e)){if(ha(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(ee(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Yn.POINT)return n.pointPadding}}function Ett(e,t,n,r,i,o=!1){if(e===void 0){if(ln(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=i;return o?c:an(s,n==="bar"?a:n==="tick"?u:l)}else if(gb(t)&&r===Yn.BAND)return i.offsetBandPaddingInner}}function _tt(e,t,n,r,i,o=!1){if(e===void 0){if(ln(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===Yn.BAND)return an(s,me(r)?{signal:`${r.signal}/2`}:r/2)}else if(gb(t)){if(n===Yn.POINT)return .5;if(n===Yn.BAND)return i.offsetBandPaddingOuter}}}function $tt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return As(e)&&t==="descending"?me(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(As(e)&&t==="descending")return!0}function Att(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&As(i)){if(Y(n)){const l=n[0],u=n[n.length-1];if(Je(l)&&l<=0&&Je(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Ug(i))return!0;if(!(ee(t)&&t.bin)&&ze([...tu,...wYe],e)){const{orient:l,type:u}=r;return ze(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:ze(["bar","area"],u)&&!s?!0:o==null?void 0:o.zero}return!1}function Ttt(e,t,n,r,i=!1){const o=Ptt(t,n,r,i),{type:s}=e;return Ga(t)?s!==void 0?EKe(t,s)?ee(n)&&!CKe(s,n.type)?(Z(_Xe(s,o)),o):s:(Z(EXe(t,s,o)),o):o:null}function Ptt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Np(e)||DT(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Z(NT(e,"ordinal")),"ordinal";if(ln(e)||gb(e)){if(ze(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in ZN)return"band";const o=n[_i(e)];return Dd(o)||Wg(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Np(e)?"time":DT(e)==="discrete"?(Z(NT(e,"temporal")),"ordinal"):ee(t)&&t.timeUnit&&In(t.timeUnit).utc?"utc":"time";case"quantitative":return Np(e)?ee(t)&&$t(t.bin)?"bin-ordinal":"linear":DT(e)==="discrete"?(Z(NT(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(Jae(t.type))}function Mtt(e,{ignoreRange:t}={}){Dce(e),Ece(e);for(const n of kKe)Fce(e,n);t||Rce(e)}function Dce(e){Vt(e)?e.component.scales=Ftt(e):e.component.scales=Ott(e)}function Ftt(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of eI){const s=Sn(t[o]);if(s&&n===Cle&&o===Ei&&s.type===Am)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=Xle(t,o),u=Ttt(a,o,s,r,l);i[o]=new $ce(e.scaleName(`${o}`,!0),{value:u,explicit:a.type===u})}}return i}const Rtt=$ue((e,t)=>VV(e)-VV(t));function Ott(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){Dce(o);for(const s of X(o.component.scales))if((t=i.scale)[s]??(t[s]=dce(s,e)),i.scale[s]==="shared"){const a=r[s],l=o.component.scales[s].getWithExplicit("type");a?hKe(a.value,l.value)?r[s]=Ac(a,l,"type","scale",Rtt):(i.scale[s]="independent",delete r[s]):r[s]=l}}for(const o of X(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new $ce(s,a);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),s),u.merged=!0)}}return n}class qT{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Vt(e){return(e==null?void 0:e.type)==="unit"}function Xi(e){return(e==null?void 0:e.type)==="facet"}function nL(e){return(e==null?void 0:e.type)==="concat"}function Rm(e){return(e==null?void 0:e.type)==="layer"}class rL{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.correctDataNames=l=>{var u,c,f;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(f=(c=l.from)==null?void 0:c.facet)!=null&&f.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=r,this.config=o,this.view=Gn(a),this.name=t.name??i,this.title=ku(t.title)?{text:t.title}:t.title?Gn(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new qT,this.projectionNameMap=r?r.projectionNameMap:new qT,this.signalNameMap=r?r.signalNameMap:new qT,this.data=t.data,this.description=t.description,this.transforms=zJe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:VQe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:w_(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ru,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Pe(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Mtt(this)}parseProjection(){Sce(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){yce(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of X(r)){const s=r[o];s!==void 0&&(i[o]=Ft(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Ft(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:vt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=JZe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of To)t[r].title&&n.push(qZe(this,r));for(const r of GI)n=n.concat(GZe(this,r));return n}assembleAxes(){return RZe(this.component.axes,this.config)}assembleLegends(){return bce(this)}assembleProjections(){return ket(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...Vae(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return ze(["unit","layer"],this.type)?ze(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),vt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Xi(this.parent)?_ce(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return zt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(en[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Xi(this.parent)){const n=cce(t),r=c_(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(Ln(o)&&uh(s)){const a=i.get("name"),l=N_(this,r),u=tL(l);if(u){const c=ie({aggregate:"distinct",field:u},{expr:"datum"});return{signal:uce(a,i,c)}}else return Z(rI(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Dae(t)&&Ga(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(WYe(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Nce extends rL{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ie(r,n)}reduceFieldDef(t,n){return vQe(this.getMapping(),(r,i,o)=>{const s=Ps(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){TI(this.getMapping(),(r,i)=>{const o=Ps(r);o&&t(o,i)},n)}}class I_ extends gt{clone(){return new I_(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Be(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class L_ extends gt{clone(){return new L_(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Be(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class z_ extends gt{clone(){return new z_(this.parent,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Be(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class j_ extends gt{clone(){return new j_(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Be(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class zp extends gt{clone(){return new zp(null,Pe(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[js,zs],[Bo,Bs]]){const o=i.map(s=>{const a=Sn(n.encoding[s]);return ee(a)?a.field:Ya(a)?{expr:`${a.datum}`}:Ts(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new zp(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Ei)){const i=n.typedFieldDef(Ei);i.type===Am&&(t=new zp(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(ue);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Be(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class nv extends gt{clone(){return new nv(null,this.projection,Pe(this.fields),Pe(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[js,zs],[Bo,Bs]]){const i=r.map(s=>{const a=Sn(n.encoding[s]);return ee(a)?a.field:Ya(a)?{expr:`${a.datum}`}:Ts(a)?{expr:`${a.value}`}:void 0}),o=r[0]===Bo?"2":"";(i[0]||i[1])&&(t=new nv(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(ue))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Be(this.fields)} ${Be(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class fd extends gt{clone(){return new fd(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new fd(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(ee(i)&&ee(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:l,value:u,frame:c,keyvals:f}=s.impute,d=Jle(n.mark,r);return new fd(t,{impute:s.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Be(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:xJe(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class B_ extends gt{clone(){return new B_(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Be(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class rv extends gt{clone(){return new rv(null,Pe(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(wJe(s)){let l=zce(s.data,o);l||(l=new zd(s.data),o.push(l));const u=n.getName(`lookup_${i}`);a=new vi(l,u,en.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(SJe(s)){const l=s.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(zt(l),l)}catch{throw new Error(YYe(l))}if(a=u.materialized,!a)throw new Error(XYe(l))}return new rv(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?le(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Be({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:le(this.transform.as)}:{}};else{let n=this.transform.as;ue(n)||(Z(rXe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class U_ extends gt{clone(){return new U_(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Be(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class V_ extends gt{clone(){return new V_(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Pe(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Be(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class W_ extends gt{clone(){return new W_(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=da((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Be(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class H_ extends gt{clone(){return new H_(null,Pe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Be(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Ice(e){let t=0;function n(r,i){if(r instanceof zd&&!r.isGenerator&&!qg(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Sr&&(r.parent instanceof zd&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof Mm){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof Eb||r instanceof _b||r instanceof Qg||r instanceof Pm||r instanceof Yg||r instanceof nv||r instanceof ws||r instanceof rv||r instanceof Fm||r instanceof ph||r instanceof j_||r instanceof z_||r instanceof I_||r instanceof B_||r instanceof U_||r instanceof V_||r instanceof Pc||r instanceof H_||r instanceof W_||r instanceof L_)&&i.transform.push(r.assemble()),(r instanceof $a||r instanceof _a||r instanceof fd||r instanceof Fl||r instanceof zp)&&i.transform.push(...r.assemble()),r instanceof vi&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof vi?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof vi&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function Dtt(e){const t=[],n=Ice(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Ntt(e,t){const n=[],r=Ice(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function Itt(e){return e==="top"||e==="left"||me(e)?"header":"footer"}function Ltt(e){for(const t of To)ztt(e,t);zW(e,"x"),zW(e,"y")}function ztt(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=Kg("title",null,r,t);let u=Ip(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=Y(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Kg("labelOrient",a.header,r,t),f=a.header!==null?an((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=ze(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[d]:t==="facet"?[]:[Lce(e,t,f)]}}}function Lce(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function zW(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=KI(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=Itt(a.get("orient"));s[l]??(s[l]=[Lce(e,o,!1)]);const u=cy(a,"main",e.config,{header:!0});u&&s[l][0].axes.push(u),a.mainExtracted=!0}}}}function jtt(e){iL(e),Lk(e,"width"),Lk(e,"height")}function Btt(e){iL(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Lk(e,t),Lk(e,n)}function iL(e){for(const t of e.children)t.parseLayoutSize()}function Lk(e,t){const n=cce(t),r=c_(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??dce(r,e);if(u==="independent"&&l.value==="step"){s=void 0;break}if(s){if(u==="independent"&&s.value!==l.value){s=void 0;break}s=Ac(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Utt(e){const{size:t,component:n}=e;for(const r of tu){const i=_i(r);if(t[i]){const o=t[i];n.layoutSize.set(i,Oa(o)?"step":o,!0)}else{const o=Vtt(e,i);n.layoutSize.set(i,o,!1)}}}function Vtt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(Ln(o)){const a=Ok(r.view,t);return uh(s)||Oa(a)?"step":a}else return VM(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return VM(r.view,t);{const o=Ok(r.view,t);return Oa(o)?o.step:o}}}function oF(e,t,n){return ie(t,{suffix:`by_${ie(e)}`,...n})}class Ky extends Nce{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=uL(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!bb(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=X(t),r={};for(const i of n){if(![Al,Tl].includes(i)){Z(h_(i,"facet"));break}const o=t[i];if(o.field===void 0){Z(LM(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=AI(t,n);return r.header?r.header=Gn(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return K(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=q_(this),this.child.parseData()}parseLayoutSize(){iL(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Ltt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of To)for(const r of YI){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=Kg("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const l=O_(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Ky))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Ky?{...this.channelHasField("column")?{encode:{update:{columns:{field:ie(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Ky){if(this.child.channelHasField("column")){const i=ie(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of tu){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(Ln(s)&&uh(a)){const l=N_(this.child,i),u=tL(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):Z(rI(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of To){const f=this.facet[c];if(f){l.push(ie(f));const{bin:d,sort:h}=f;if($t(d)&&l.push(ie(f,{binSuffix:"end"})),Pl(h)){const{field:p,op:g=x_}=h,m=oF(f,h);r&&i?(o.push(m),s.push("max"),a.push(m)):(o.push(p),s.push(g),a.push(m))}else if(Y(h)){const p=Xg(f,c);o.push(p),s.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Pl(r.sort)?[oF(r,r.sort,{expr:"datum"})]:Y(r.sort)?[Xg(r,t,{expr:"datum"})]:[ie(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Pl(i)?i.order:!Y(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return JM(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of GI)if(t[o]){const s=Kg("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return JM(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Dtt(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:To.map(l=>this.facetSortFields(l)).flat(),order:To.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(ZJe(this,[]))}]}getMapping(){return this.facet}}function Wtt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(Pl(o.sort)){const{field:s,op:a=x_}=o.sort;e=i=new ph(e,{joinaggregate:[{op:a,field:s,as:oF(o,o.sort,{forAs:!0})}],groupby:[ie(o)]})}return i}return null}function zce(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((l||f)&&l!==f)){if(tv(e)&&tv(a)){if(Ui(e.values,a.values))return s}else if(qg(e)&&qg(a)){if(e.url===a.url)return s}else if(Aue(e)&&e.name===s.dataName)return s}}return null}function Htt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new zd({values:[]});return t.push(r),r}const n=zce(e.data,t);if(n)return lc(e.data)||(n.data.format=kae({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new zd(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function qtt(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(FJe(i))s=e=new Yg(e,i),o="derived";else if(jI(i)){const a=Net(i);s=e=Sr.makeWithAncestors(e,{},a,n)??e,e=new Pm(e,t,i.filter)}else if(kue(i))s=e=$a.makeFromTransform(e,i,t),o="number";else if(OJe(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Sr(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=_a.makeFromTransform(e,i);else if(DJe(i))s=e=ws.makeFromTransform(e,i),o="number",qI(t)&&(e=new Pc(e));else if(Sue(i))s=e=rv.make(e,t,i,r++),o="derived";else if(TJe(i))s=e=new Fm(e,i),o="number";else if(PJe(i))s=e=new ph(e,i),o="number";else if(NJe(i))s=e=Fl.makeFromTransform(e,i),o="derived";else if(IJe(i))s=e=new j_(e,i),o="derived";else if(LJe(i))s=e=new L_(e,i),o="derived";else if(MJe(i))s=e=new z_(e,i),o="derived";else if(kJe(i))s=e=new W_(e,i),o="derived";else if(AJe(i))e=new H_(e,i);else if(RJe(i))s=e=fd.makeFromTransform(e,i),o="derived";else if(CJe(i))s=e=new I_(e,i),o="derived";else if(EJe(i))s=e=new U_(e,i),o="derived";else if(_Je(i))s=e=new V_(e,i),o="derived";else if($Je(i))s=e=new B_(e,i),o="derived";else{Z(nXe(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function q_(e){var m;let t=Htt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(lc(i)||qg(i)||tv(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new KJe;lc(i)?(Tue(i)?t=new _b(t,i.sequence):BI(i)&&(t=new Eb(t,i.graticule)),s.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(s.parseNothing=!0),t=Sr.makeExplicit(t,e,s)??t,t=new Pc(t);const a=e.parent&&Rm(e.parent);(Vt(e)||Xi(e))&&a&&(t=$a.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=qtt(t,e,s));const l=Let(e),u=Iet(e);t=Sr.makeWithAncestors(t,{},{...l,...u},s)??t,Vt(e)&&(t=zp.parseAll(t,e),t=nv.parseAll(t,e)),(Vt(e)||Xi(e))&&(a||(t=$a.makeFromEncoding(t,e)??t),t=_a.makeFromEncoding(t,e)??t,t=Yg.parseAllForSortIndex(t,e));const c=t=Xx(en.Raw,e,t);if(Vt(e)){const y=ws.makeFromEncoding(t,e);y&&(t=y,qI(e)&&(t=new Pc(t))),t=fd.makeFromEncoding(t,e)??t,t=Fl.makeFromEncoding(t,e)??t}let f,d;if(Vt(e)){const{markDef:y,mark:v,config:b}=e,x=mt("invalid",y,b),{marks:w,scales:k}=d=Mue({invalid:x,isPath:Xc(v)});w!==k&&k==="include-invalid-values"&&(f=t=Xx(en.PreFilterInvalid,e,t)),w==="exclude-invalid-values"&&(t=Qg.make(t,e,d)??t)}const h=t=Xx(en.Main,e,t);let p;if(Vt(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=Qg.make(t,e,d)??t,p=t=Xx(en.PostFilterInvalid,e,t))}Vt(e)&&MZe(e,h);let g=null;if(Xi(e)){const y=e.getName("facet");t=Wtt(t,e.facet)??t,g=new Mm(t,e,y,h.getSource()),n[y]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:g,ancestorParse:s,preFilterInvalid:f,postFilterInvalid:p}}function Xx(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new vi(n,o,e,i);return r[o]=s,s}class Gtt extends rL{constructor(t,n,r,i){var o,s,a,l;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&Z(ZYe),this.children=this.getChildren(t).map((u,c)=>uL(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=q_(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of X(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return $_(t)?t.vconcat:LI(t)?t.hconcat:t.concat}parseLayoutSize(){Btt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=XI(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Ytt(e){return e===!1||e===null}const Xtt={disable:1,gridScale:1,scale:1,...qle,labelExpr:1,encode:1},jce=X(Xtt);class oL extends ru{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new oL(Pe(this.explicit),Pe(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Ytt(this.get(t))}hasOrientSignalRef(){return me(this.explicit.orient)}}function Ktt(e,t,n){const{encoding:r,config:i}=e,o=Sn(r[t])??Sn(r[qa(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(Nd(l))return{text:ys({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(Vg(o)==="quantitative"){if(Wg(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:ys({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:ys({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Vg(o)==="temporal"&&i.timeFormatType&&ee(o)&&!o.timeUnit)return{text:ys({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Qtt(e){return tu.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[int(n,e)]),t),{})}const Jtt={bottom:"top",top:"bottom",left:"right",right:"left"};function Ztt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of X(i.component.axes))n.axis[o]=KI(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=ent(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of tu){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!me(a)){if(r[a]>0&&!l){const u=Jtt[a];r[a]>r[u]&&s.set("orient",u,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function ent(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=tnt(i,o)}}}else return t.map(n=>n.clone());return e}function tnt(e,t){for(const n of jce){const r=Ac(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return Kae(i,o);case"gridScale":return{explicit:i.explicit,value:an(i.value,o.value)}}return T_(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function nnt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(me(n.labelAngle)?n.labelAngle:Z1(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===oce(r,i))return!0}return e===n[t]}const rnt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function int(e,t){var y,v;let n=t.axis(e);const r=new oL,i=Sn(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((y=s[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=s.axis)==null?void 0:v.orient)||BZe(e),l=t.getScaleComponent(e).get("type"),u=OZe(e,l,a,t.config),c=n!==void 0?!n:KM("disable",s.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=LZe(i,n,e,s.style,u),d=Fle(n.formatType,i,l),h=Mle(i,i.type,n.format,n.formatType,s,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const b of jce){const x=b in CW?CW[b](p):KV(b)?n[b]:void 0,w=x!==void 0,k=nnt(x,b,n,t,e);if(w&&k)r.set(b,x,k);else{const{configValue:S=void 0,configFrom:C=void 0}=KV(b)&&b!=="values"?KM(b,s.style,n.style,u):{},E=S!==void 0;w&&!E?r.set(b,x,k):(C!=="vgAxisConfig"||rnt.has(b)&&E||kb(S)||me(S))&&r.set(b,S,!1)}}const g=n.encoding??{},m=Hle.reduce((b,x)=>{if(!r.hasAxisPart(x))return b;const w=fce(g[x]??{},t),k=x==="labels"?Ktt(t,e,w):w;return k!==void 0&&!vt(k)&&(b[x]={update:k}),b},{});return vt(m)||r.set("encode",m,!!n.encoding||n.labelAngle!==void 0),r}function ont({encoding:e,size:t}){for(const n of tu){const r=_i(n);Oa(t[r])&&Hu(e[n])&&(delete t[r],Z(tle(r)))}return t}const snt={vgMark:"arc",encodeEntry:e=>({...Wo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...qr("x",e,{defaultPos:"mid"}),...qr("y",e,{defaultPos:"mid"}),...Wl(e,"radius"),...Wl(e,"theta")})},ant={vgMark:"area",encodeEntry:e=>({...Wo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Dk("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Dk("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...HI(e)})},lnt={vgMark:"rect",encodeEntry:e=>({...Wo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wl(e,"x"),...Wl(e,"y")})},unt={vgMark:"shape",encodeEntry:e=>({...Wo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ee(n)&&n.type===Am?{field:ie(n,{expr:"datum"})}:{}}]}},cnt={vgMark:"image",encodeEntry:e=>({...Wo(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Wl(e,"x"),...Wl(e,"y"),...VI(e,"url")})},fnt={vgMark:"line",encodeEntry:e=>({...Wo(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...qr("x",e,{defaultPos:"mid"}),...qr("y",e,{defaultPos:"mid"}),...Kn("size",e,{vgChannel:"strokeWidth"}),...HI(e)})},dnt={vgMark:"trail",encodeEntry:e=>({...Wo(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...qr("x",e,{defaultPos:"mid"}),...qr("y",e,{defaultPos:"mid"}),...Kn("size",e),...HI(e)})};function sL(e,t){const{config:n}=e;return{...Wo(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...qr("x",e,{defaultPos:"mid"}),...qr("y",e,{defaultPos:"mid"}),...Kn("size",e),...Kn("angle",e),...hnt(e,n,t)}}function hnt(e,t,n){return n?{shape:{value:n}}:Kn("shape",e)}const pnt={vgMark:"symbol",encodeEntry:e=>sL(e)},gnt={vgMark:"symbol",encodeEntry:e=>sL(e,"circle")},mnt={vgMark:"symbol",encodeEntry:e=>sL(e,"square")},ynt={vgMark:"rect",encodeEntry:e=>({...Wo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wl(e,"x"),...Wl(e,"y")})},vnt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Wo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Dk("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Dk("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Kn("size",e,{vgChannel:"strokeWidth"})}}},bnt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Wo(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...qr("x",e,{defaultPos:"mid"}),...qr("y",e,{defaultPos:"mid"}),...VI(e),...Kn("size",e,{vgChannel:"fontSize"}),...Kn("angle",e),...xW("align",xnt(e.markDef,n,t)),...xW("baseline",wnt(e.markDef,n,t)),...qr("radius",e,{defaultPos:null}),...qr("theta",e,{defaultPos:null})}}};function xnt(e,t,n){if(mt("align",e,n)===void 0)return"center"}function wnt(e,t,n){if(mt("baseline",e,n)===void 0)return"middle"}const Snt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...Wo(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Wl(e,i),...qr(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:Ft(mt("thickness",n,t))}}},Kx={arc:snt,area:ant,bar:lnt,circle:gnt,geoshape:unt,image:cnt,line:fnt,point:pnt,rect:ynt,rule:vnt,square:mnt,text:bnt,tick:Snt,trail:dnt};function knt(e){if(ze([v_,m_,TKe],e.mark)){const t=Jle(e.mark,e.encoding);if(t.length>0)return Cnt(e,t)}else if(e.mark===y_){const t=NM.some(n=>mt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Ent(e)}return aL(e)}const jW="faceted_path_";function Cnt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:jW+e.requestDataName(en.Main),data:e.requestDataName(en.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:aL(e,{fromPrefix:jW})}]}const BW="stack_group_";function Ent(e){var u;const[t]=aL(e,{fromPrefix:BW}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...Ng(t.encode.update,["y","yc","y2","height",...NM]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...yi(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...Ng(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...yi(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of NM){const f=Fa(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=Ft(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ie(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ie(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Fa(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Ft(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(en.Main),name:BW+e.requestDataName(en.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function _nt(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!Y(s)&&Ts(s)&&OM(s.value)||!s&&OM(mt("order",i,o)))){if((Y(s)||ee(s))&&!n)return Gae(s,{expr:"datum"});if(Xc(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(ee(l))return{field:a}}}}function aL(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=an(r.clip,$nt(e),Ant(e)),a=Hae(r),l=i.key,u=_nt(e),c=Tnt(e),f=mt("aria",r,o),d=Kx[n].postEncodingTransform?Kx[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Kx[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(en.Main)},encode:{update:Kx[n].encodeEntry(e)},...d?{transform:d}:{}}]}function $nt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Ant(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Tnt(e){if(!e.component.selection)return null;const t=X(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=X(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Bce extends Nce{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,JV(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const s=Ra(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=dJe(s,o,{graticule:t.data&&BI(t.data)}));const l=this.encoding=mQe(t.encoding||{},a,s.filled,o);this.markDef=bue(s,l,o),this.size=ont({encoding:l,size:JV(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=vue(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>NI(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===Cle,r=t&&dYe.some(i=>Fe(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return eI.reduce((r,i)=>{const o=Sn(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Gn(t);return Y(n)&&(i.domain=n.map(Ni)),Y(r)&&(i.range=r.map(Ni)),i}initAxes(t){return tu.reduce((n,r)=>{const i=t[r];if(Fe(i)||r===jt&&Fe(t.x2)||r===Un&&Fe(t.y2)){const o=Fe(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=X(t),r={};for(const i of n){const o=t[i];r[i]=kb(o)?Wae(o):Ni(o)}return r}initLegends(t){return SYe.reduce((n,r)=>{const i=Sn(t[r]);if(i&&CYe(r)){const o=i.legend;n[r]=o&&Gn(o)}return n},{})}parseData(){this.component.data=q_(this)}parseLayoutSize(){Utt(this)}parseSelections(){this.component.selection=PZe(this,this.selection)}parseMarkGroup(){this.component.mark=knt(this)}parseAxesAndHeaders(){this.component.axes=Qtt(this)}assembleSelectionTopLevelSignals(t){return eZe(this,t)}assembleSignals(){return[...nce(this),...JJe(this,[])]}assembleSelectionData(t){return tZe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return XI(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Rm(this.parent))&&(t=Rue(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return ud(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Ps(n)}typedFieldDef(t){const n=this.fieldDef(t);return Zr(n)?n:null}}class lL extends rL{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(A_(a))return new lL(a,this,this.getName(`layer_${l}`),s,o);if(nu(a))return new Bce(a,this,this.getName(`layer_${l}`),s,o);throw new Error(nI(a))})}parseData(){this.component.data=q_(this);for(const t of this.children)t.parseData()}parseLayoutSize(){jtt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of X(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Ztt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),nce(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),XI(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of le(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return nZe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),bce(this))}}function uL(e,t,n,r,i){if(w_(e))return new Ky(e,t,n,i);if(A_(e))return new lL(e,t,n,r,i);if(nu(e))return new Bce(e,t,n,r,i);if(jQe(e))return new Gtt(e,t,n,i);throw new Error(nI(e))}function Pnt(e,t={}){t.logger&&VXe(t.logger),t.fieldTitle&&Ule(t.fieldTitle);try{const n=yue(fm(t.config,e.config)),r=_ue(e,n),i=uL(r,null,"",void 0,n);return i.parse(),ett(i.component.data,i),{spec:Fnt(i,Mnt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&WXe(),t.fieldTitle&&aQe()}}function Mnt(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):ue(t)&&(t={type:t}),i&&o&&GJe(t.type)){if(i==="step"&&o==="step")Z(NV()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";Z(NV(c_(s)));const a=s==="width"?"height":"width";t.type=YJe(a)}}return{...X(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...cW(n,!1),...cW(e,!0)}}function Fnt(e,t,n={},r){const i=e.config?eJe(e.config):void 0,o=[].concat(e.assembleSelectionData([]),Ntt(e.component.data,n)),s=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:o,...s.length>0?{projections:s}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...hue(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Rnt=sYe.version,Ont=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Lg,accessPathWithDatum:qN,compile:Pnt,contains:ze,deepEqual:Ui,deleteNestedProperty:Ek,duplicate:Pe,entries:Ec,every:VN,fieldIntersection:HN,flatAccessWithDatum:Eae,getFirstDefined:an,hasIntersection:WN,hasProperty:K,hash:Be,internalField:Aae,isBoolean:J1,isEmpty:vt,isEqual:lYe,isInternalField:Tae,isNullOrFalse:OM,isNumeric:i_,keys:X,logicalExpr:Yy,mergeDeep:kae,never:Sae,normalize:_ue,normalizeAngle:Z1,omit:yi,pick:Ng,prefixGenerator:DM,removePathFromField:_m,replaceAll:Md,replacePathInField:jo,resetIdCounter:cYe,setEqual:Cae,some:Ig,stringify:bt,titleCase:db,unique:da,uniqueId:$ae,vals:tr,varName:zt,version:Rnt},Symbol.toStringTag,{value:"Module"}));function Uce(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Dnt="vega-themes",Nnt="2.15.0",Int="Themes for stylized Vega and Vega-Lite visualizations.",Lnt=["vega","vega-lite","themes","style"],znt="BSD-3-Clause",jnt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Bnt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Unt="build/vega-themes.js",cL="build/vega-themes.module.js",Vnt="build/vega-themes.min.js",Wnt="build/vega-themes.min.js",Hnt="build/vega-themes.module.d.ts",qnt={type:"git",url:"https://github.com/vega/vega-themes.git"},Gnt=["src","build"],Ynt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Xnt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Knt={vega:"*","vega-lite":"*"},Qnt={},Jnt={name:Dnt,version:Nnt,description:Int,keywords:Lnt,license:znt,author:jnt,contributors:Bnt,main:Unt,module:cL,unpkg:Vnt,jsdelivr:Wnt,types:Hnt,repository:qnt,files:Gnt,scripts:Ynt,devDependencies:Xnt,peerDependencies:Knt,dependencies:Qnt};const Dh="#fff",UW="#888",Znt={background:"#333",view:{stroke:UW},title:{color:Dh,subtitleColor:Dh},style:{"guide-label":{fill:Dh},"guide-title":{fill:Dh}},axis:{domainColor:Dh,gridColor:UW,tickColor:Dh}},sf="#4572a7",ert={background:"#fff",arc:{fill:sf},area:{fill:sf},line:{stroke:sf,strokeWidth:2},path:{stroke:sf},rect:{fill:sf},shape:{stroke:sf},symbol:{fill:sf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},af="#30a2da",GT="#cbcbcb",trt="#999",nrt="#333",VW="#f0f0f0",WW="#333",rrt={arc:{fill:af},area:{fill:af},axis:{domainColor:GT,grid:!0,gridColor:GT,gridWidth:1,labelColor:trt,labelFontSize:10,titleColor:nrt,tickColor:GT,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:VW,group:{fill:VW},legend:{labelColor:WW,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:WW,titleFontSize:14,titlePadding:10},line:{stroke:af,strokeWidth:2},path:{stroke:af,strokeWidth:.5},rect:{fill:af},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:af},bar:{binSpacing:2,fill:af,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},lf="#000",irt={group:{fill:"#e5e5e5"},arc:{fill:lf},area:{fill:lf},line:{stroke:lf},path:{stroke:lf},rect:{fill:lf},shape:{stroke:lf},symbol:{fill:lf,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},ort=22,srt="normal",HW="Benton Gothic, sans-serif",qW=11.5,art="normal",uf="#82c6df",YT="Benton Gothic Bold, sans-serif",GW="normal",YW=13,w0={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},lrt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:YT,fontSize:ort,fontWeight:srt},arc:{fill:uf},area:{fill:uf},line:{stroke:uf,strokeWidth:2},path:{stroke:uf},rect:{fill:uf},shape:{stroke:uf},symbol:{fill:uf,size:30},axis:{labelFont:HW,labelFontSize:qW,labelFontWeight:art,titleFont:YT,titleFontSize:YW,titleFontWeight:GW},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:HW,labelFontSize:qW,symbolType:"square",titleFont:YT,titleFontSize:YW,titleFontWeight:GW},range:{category:w0["category-6"],diverging:w0["fireandice-6"],heatmap:w0["fire-7"],ordinal:w0["fire-7"],ramp:w0["fire-7"]}},cf="#ab5787",Qx="#979797",urt={background:"#f9f9f9",arc:{fill:cf},area:{fill:cf},line:{stroke:cf},path:{stroke:cf},rect:{fill:cf},shape:{stroke:cf},symbol:{fill:cf,size:30},axis:{domainColor:Qx,domainWidth:.5,gridWidth:.2,labelColor:Qx,tickColor:Qx,tickWidth:.2,titleColor:Qx},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},ff="#3e5c69",crt={background:"#fff",arc:{fill:ff},area:{fill:ff},line:{stroke:ff},path:{stroke:ff},rect:{fill:ff},shape:{stroke:ff},symbol:{fill:ff},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},fo="#1696d2",XW="#000000",frt="#FFFFFF",Jx="Lato",XT="Lato",drt="Lato",hrt="#DEDDDD",prt=18,S0={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},grt={background:frt,title:{anchor:"start",fontSize:prt,font:Jx},axisX:{domain:!0,domainColor:XW,domainWidth:1,grid:!1,labelFontSize:12,labelFont:XT,labelAngle:0,tickColor:XW,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Jx},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:hrt,gridWidth:1,labelFontSize:12,labelFont:XT,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Jx,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:XT,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Jx,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:S0["six-groups-cat-1"],diverging:S0["diverging-colors"],heatmap:S0["diverging-colors"],ordinal:S0["six-groups-seq"],ramp:S0["shades-blue"]},area:{fill:fo},rect:{fill:fo},line:{color:fo,stroke:fo,strokeWidth:5},trail:{color:fo,stroke:fo,strokeWidth:0,size:1},path:{stroke:fo,strokeWidth:.5},point:{filled:!0},text:{font:drt,color:fo,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:fo,stroke:null}},arc:{fill:fo},shape:{stroke:fo},symbol:{fill:fo,size:30}},df="#3366CC",KW="#ccc",Zx="Arial, sans-serif",mrt={arc:{fill:df},area:{fill:df},path:{stroke:df},rect:{fill:df},shape:{stroke:df},symbol:{stroke:df},circle:{fill:df},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Zx,fontSize:12},"guide-title":{font:Zx,fontSize:12},"group-title":{font:Zx,fontSize:12}},title:{font:Zx,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:KW,tickColor:KW,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},fL=e=>e*(1/3+1),QW=fL(9),JW=fL(10),ZW=fL(12),k0="Segoe UI",eH="wf_standard-font, helvetica, arial, sans-serif",tH="#252423",C0="#605E5C",nH="transparent",yrt="#C8C6C4",Ko="#118DFF",vrt="#12239E",brt="#E66C37",xrt="#6B007B",wrt="#E044A7",Srt="#744EC2",krt="#D9B300",Crt="#D64550",Vce=Ko,Wce="#DEEFFF",rH=[Wce,Vce],Ert=[Wce,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Vce],_rt={view:{stroke:nH},background:nH,font:k0,header:{titleFont:eH,titleFontSize:ZW,titleColor:tH,labelFont:k0,labelFontSize:JW,labelColor:C0},axis:{ticks:!1,grid:!1,domain:!1,labelColor:C0,labelFontSize:QW,titleFont:eH,titleColor:tH,titleFontSize:ZW,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:yrt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ko},line:{stroke:Ko,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:k0,fontSize:QW,fill:C0},arc:{fill:Ko},area:{fill:Ko,line:!0,opacity:.6},path:{stroke:Ko},rect:{fill:Ko},point:{fill:Ko,filled:!0,size:75},shape:{stroke:Ko},symbol:{fill:Ko,strokeWidth:1.5,size:50},legend:{titleFont:k0,titleFontWeight:"bold",titleColor:C0,labelFont:k0,labelFontSize:JW,labelColor:C0,symbolType:"circle",symbolSize:75},range:{category:[Ko,vrt,brt,xrt,wrt,Srt,krt,Crt],diverging:rH,heatmap:rH,ordinal:Ert}},KT='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',$rt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',QT=400,ew={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Art=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Trt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function G_({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=ew.gridBg[e],i=ew.textPrimary[e],o=ew.textSecondary[e],s=n==="dark"?Art:Trt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:KT,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:$rt,labelFontWeight:QT,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:ew.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:KT,fill:o,fontWeight:QT},"guide-title":{font:KT,fill:o,fontWeight:QT}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Prt=G_({theme:"white",background:"#ffffff"}),Mrt=G_({theme:"g10",background:"#f4f4f4"}),Frt=G_({theme:"g90",background:"#262626"}),Rrt=G_({theme:"g100",background:"#161616"}),Ort=Jnt.version,Drt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Mrt,carbong100:Rrt,carbong90:Frt,carbonwhite:Prt,dark:Znt,excel:ert,fivethirtyeight:rrt,ggplot2:irt,googlecharts:mrt,latimes:lrt,powerbi:_rt,quartz:urt,urbaninstitute:grt,version:Ort,vox:crt},Symbol.toStringTag,{value:"Module"}));function Nrt(e,t,n,r){if(Y(e))return`[${e.map(i=>t(ue(i)?i:iH(i,n))).join(", ")}]`;if(se(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(se(c)&&(c=iH(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Irt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function iH(e,t){return JSON.stringify(e,Irt(t))}var Lrt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Hce="vg-tooltip-element",zrt={offsetX:10,offsetY:10,id:Hce,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:jrt,maxDepth:2,formatTooltip:Nrt,baseURL:""};function jrt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Brt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Lrt.toString().replace(Hce,e)}function Urt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class qce{constructor(t){this.options={...zrt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Brt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=Urt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var JT={};function Vrt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class Wrt{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var Hrt=Wrt;const qrt=Object.freeze({loose:!0}),Grt=Object.freeze({}),Yrt=e=>e?typeof e!="object"?qrt:e:Grt;var dL=Yrt,sF={exports:{}};const Xrt="2.0.0",Gce=256,Krt=Number.MAX_SAFE_INTEGER||9007199254740991,Qrt=16,Jrt=Gce-6,Zrt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var hL={MAX_LENGTH:Gce,MAX_SAFE_COMPONENT_LENGTH:Qrt,MAX_SAFE_BUILD_LENGTH:Jrt,MAX_SAFE_INTEGER:Krt,RELEASE_TYPES:Zrt,SEMVER_SPEC_VERSION:Xrt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const eit=typeof process=="object"&&JT&&JT.NODE_DEBUG&&/\bsemver\b/i.test(JT.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var Y_=eit;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=hL,o=Y_;t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=g=>{for(const[m,y]of d)g=g.split(`${m}*`).join(`${m}{0,${y}}`).split(`${m}+`).join(`${m}{1,${y}}`);return g},p=(g,m,y)=>{const v=h(m),b=c++;o(g,b,m),u[g]=b,l[b]=m,s[b]=new RegExp(m,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(sF,sF.exports);var pL=sF.exports;const oH=/^[0-9]+$/,Yce=(e,t)=>{const n=oH.test(e),r=oH.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},tit=(e,t)=>Yce(t,e);var nit={compareIdentifiers:Yce,rcompareIdentifiers:tit};const tw=Y_,{MAX_LENGTH:sH,MAX_SAFE_INTEGER:nw}=hL,{safeRe:aH,t:lH}=pL,rit=dL,{compareIdentifiers:Nh}=nit;let iit=class Ys{constructor(t,n){if(n=rit(n),t instanceof Ys){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>sH)throw new TypeError(`version is longer than ${sH} characters`);tw("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?aH[lH.LOOSE]:aH[lH.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>nw||this.major<0)throw new TypeError("Invalid major version");if(this.minor>nw||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>nw||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<nw)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(tw("SemVer.compare",this.version,this.options,t),!(t instanceof Ys)){if(typeof t=="string"&&t===this.version)return 0;t=new Ys(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Ys||(t=new Ys(t,this.options)),Nh(this.major,t.major)||Nh(this.minor,t.minor)||Nh(this.patch,t.patch)}comparePre(t){if(t instanceof Ys||(t=new Ys(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(tw("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Nh(r,i)}while(++n)}compareBuild(t){t instanceof Ys||(t=new Ys(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(tw("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Nh(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),Nh(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var gL=iit;const uH=gL,oit=(e,t,n)=>new uH(e,n).compare(new uH(t,n));var Om=oit;const sit=Om,ait=(e,t,n)=>sit(e,t,n)===0;var lit=ait;const uit=Om,cit=(e,t,n)=>uit(e,t,n)!==0;var fit=cit;const dit=Om,hit=(e,t,n)=>dit(e,t,n)>0;var pit=hit;const git=Om,mit=(e,t,n)=>git(e,t,n)>=0;var yit=mit;const vit=Om,bit=(e,t,n)=>vit(e,t,n)<0;var xit=bit;const wit=Om,Sit=(e,t,n)=>wit(e,t,n)<=0;var kit=Sit;const Cit=lit,Eit=fit,_it=pit,$it=yit,Ait=xit,Tit=kit,Pit=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Cit(e,n,r);case"!=":return Eit(e,n,r);case">":return _it(e,n,r);case">=":return $it(e,n,r);case"<":return Ait(e,n,r);case"<=":return Tit(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Mit=Pit,ZT,cH;function Fit(){if(cH)return ZT;cH=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}ZT=t;const n=dL,{safeRe:r,t:i}=pL,o=Mit,s=Y_,a=gL,l=Xce();return ZT}var e5,fH;function Xce(){if(fH)return e5;fH=1;class e{constructor(R,_){if(_=r(_),R instanceof e)return R.loose===!!_.loose&&R.includePrerelease===!!_.includePrerelease?R:new e(R.raw,_);if(R instanceof i)return this.raw=R.value,this.set=[[R]],this.format(),this;if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=R.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(N=>!p(N[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const N of this.set)if(N.length===1&&g(N[0])){this.set=[N];break}}}this.format()}format(){return this.range=this.set.map(R=>R.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(R){const P=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+R,N=n.get(P);if(N)return N;const D=this.options.loose,L=D?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];R=R.replace(L,T(this.options.includePrerelease)),o("hyphen replace",R),R=R.replace(a[l.COMPARATORTRIM],u),o("comparator trim",R),R=R.replace(a[l.TILDETRIM],c),o("tilde trim",R),R=R.replace(a[l.CARETTRIM],f),o("caret trim",R);let U=R.split(" ").map(ye=>y(ye,this.options)).join(" ").split(/\s+/).map(ye=>A(ye,this.options));D&&(U=U.filter(ye=>(o("loose invalid filter",ye,this.options),!!ye.match(a[l.COMPARATORLOOSE])))),o("range list",U);const V=new Map,oe=U.map(ye=>new i(ye,this.options));for(const ye of oe){if(p(ye))return[ye];V.set(ye.value,ye)}V.size>1&&V.has("")&&V.delete("");const Q=[...V.values()];return n.set(P,Q),Q}intersects(R,_){if(!(R instanceof e))throw new TypeError("a Range is required");return this.set.some(P=>m(P,_)&&R.set.some(N=>m(N,_)&&P.every(D=>N.every(L=>D.intersects(L,_)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new s(R,this.options)}catch{return!1}for(let _=0;_<this.set.length;_++)if(I(this.set[_],R,this.options))return!0;return!1}}e5=e;const t=Hrt,n=new t,r=dL,i=Fit(),o=Y_,s=gL,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:f}=pL,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=hL,p=F=>F.value==="<0.0.0-0",g=F=>F.value==="",m=(F,R)=>{let _=!0;const P=F.slice();let N=P.pop();for(;_&&P.length;)_=P.every(D=>N.intersects(D,R)),N=P.pop();return _},y=(F,R)=>(o("comp",F,R),F=w(F,R),o("caret",F),F=b(F,R),o("tildes",F),F=S(F,R),o("xrange",F),F=E(F,R),o("stars",F),F),v=F=>!F||F.toLowerCase()==="x"||F==="*",b=(F,R)=>F.trim().split(/\s+/).map(_=>x(_,R)).join(" "),x=(F,R)=>{const _=R.loose?a[l.TILDELOOSE]:a[l.TILDE];return F.replace(_,(P,N,D,L,U)=>{o("tilde",F,P,N,D,L,U);let V;return v(N)?V="":v(D)?V=`>=${N}.0.0 <${+N+1}.0.0-0`:v(L)?V=`>=${N}.${D}.0 <${N}.${+D+1}.0-0`:U?(o("replaceTilde pr",U),V=`>=${N}.${D}.${L}-${U} <${N}.${+D+1}.0-0`):V=`>=${N}.${D}.${L} <${N}.${+D+1}.0-0`,o("tilde return",V),V})},w=(F,R)=>F.trim().split(/\s+/).map(_=>k(_,R)).join(" "),k=(F,R)=>{o("caret",F,R);const _=R.loose?a[l.CARETLOOSE]:a[l.CARET],P=R.includePrerelease?"-0":"";return F.replace(_,(N,D,L,U,V)=>{o("caret",F,N,D,L,U,V);let oe;return v(D)?oe="":v(L)?oe=`>=${D}.0.0${P} <${+D+1}.0.0-0`:v(U)?D==="0"?oe=`>=${D}.${L}.0${P} <${D}.${+L+1}.0-0`:oe=`>=${D}.${L}.0${P} <${+D+1}.0.0-0`:V?(o("replaceCaret pr",V),D==="0"?L==="0"?oe=`>=${D}.${L}.${U}-${V} <${D}.${L}.${+U+1}-0`:oe=`>=${D}.${L}.${U}-${V} <${D}.${+L+1}.0-0`:oe=`>=${D}.${L}.${U}-${V} <${+D+1}.0.0-0`):(o("no pr"),D==="0"?L==="0"?oe=`>=${D}.${L}.${U}${P} <${D}.${L}.${+U+1}-0`:oe=`>=${D}.${L}.${U}${P} <${D}.${+L+1}.0-0`:oe=`>=${D}.${L}.${U} <${+D+1}.0.0-0`),o("caret return",oe),oe})},S=(F,R)=>(o("replaceXRanges",F,R),F.split(/\s+/).map(_=>C(_,R)).join(" ")),C=(F,R)=>{F=F.trim();const _=R.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return F.replace(_,(P,N,D,L,U,V)=>{o("xRange",F,P,N,D,L,U,V);const oe=v(D),Q=oe||v(L),ye=Q||v(U),Oe=ye;return N==="="&&Oe&&(N=""),V=R.includePrerelease?"-0":"",oe?N===">"||N==="<"?P="<0.0.0-0":P="*":N&&Oe?(Q&&(L=0),U=0,N===">"?(N=">=",Q?(D=+D+1,L=0,U=0):(L=+L+1,U=0)):N==="<="&&(N="<",Q?D=+D+1:L=+L+1),N==="<"&&(V="-0"),P=`${N+D}.${L}.${U}${V}`):Q?P=`>=${D}.0.0${V} <${+D+1}.0.0-0`:ye&&(P=`>=${D}.${L}.0${V} <${D}.${+L+1}.0-0`),o("xRange return",P),P})},E=(F,R)=>(o("replaceStars",F,R),F.trim().replace(a[l.STAR],"")),A=(F,R)=>(o("replaceGTE0",F,R),F.trim().replace(a[R.includePrerelease?l.GTE0PRE:l.GTE0],"")),T=F=>(R,_,P,N,D,L,U,V,oe,Q,ye,Oe)=>(v(P)?_="":v(N)?_=`>=${P}.0.0${F?"-0":""}`:v(D)?_=`>=${P}.${N}.0${F?"-0":""}`:L?_=`>=${_}`:_=`>=${_}${F?"-0":""}`,v(oe)?V="":v(Q)?V=`<${+oe+1}.0.0-0`:v(ye)?V=`<${oe}.${+Q+1}.0-0`:Oe?V=`<=${oe}.${Q}.${ye}-${Oe}`:F?V=`<${oe}.${Q}.${+ye+1}-0`:V=`<=${V}`,`${_} ${V}`.trim()),I=(F,R,_)=>{for(let P=0;P<F.length;P++)if(!F[P].test(R))return!1;if(R.prerelease.length&&!_.includePrerelease){for(let P=0;P<F.length;P++)if(o(F[P].semver),F[P].semver!==i.ANY&&F[P].semver.prerelease.length>0){const N=F[P].semver;if(N.major===R.major&&N.minor===R.minor&&N.patch===R.patch)return!0}return!1}return!0};return e5}const Rit=Xce(),Oit=(e,t,n)=>{try{t=new Rit(t,n)}catch{return!1}return t.test(e)};var Dit=Oit,Kce=Vrt(Dit);function Nit(e,t,n){const r=e.open(t),i=1e4,o=250,{origin:s}=new URL(t);let a=~~(i/o);function l(c){c.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,s),setTimeout(u,o),a-=1)}setTimeout(u,o)}var Iit=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Qce(e,...t){for(const n of t)Lit(e,n);return e}function Lit(e,t){for(const n of Object.keys(t))dm(e,n,t[n],!0)}const Zo=_Ge;let iv=Ont;const rw=typeof window<"u"?window:void 0;var Mq;iv===void 0&&((Mq=rw==null?void 0:rw.vl)!=null&&Mq.compile)&&(iv=rw.vl);const zit={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},jit={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},dy={vega:"Vega","vega-lite":"Vega-Lite"},zk={vega:Zo.version,"vega-lite":iv?iv.version:"not available"},Bit={vega:e=>e,"vega-lite":(e,t)=>iv.compile(e,{config:t}).spec},Uit=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Vit="chart-wrapper";function Wit(e){return typeof e=="function"}function dH(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${dy[r]} JSON Source`}function Hit(e,t){if(e.$schema){const n=Uce(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${dy[n.library]}, but mode argument sets ${dy[t]??t}.`);const r=n.library;return Kce(zk[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${dy[r]} ${n.version}, but the current version of ${dy[r]} is v${zk[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function Jce(e){return!!(e&&"load"in e)}function hH(e){return Jce(e)?e:Zo.loader(e)}function qit(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return ue(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Zce(e,t,n={}){let r,i;ue(t)?(i=hH(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=qit(r),s=o.loader;(!i||s)&&(i=hH(n.loader??s));const a=await pH(o,i),l=await pH(n,i),u={...Qce(l,a),config:fm(l.config??{},a.config??{})};return await Yit(e,r,u,i)}async function pH(e,t){const n=ue(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=ue(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Git(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Yit(e,t,n={},r){const i=n.theme?fm(Drt[n.theme],n.config??{}):n.config,o=Nc(n.actions)?n.actions:Qce({},zit,n.actions??{}),s={...jit,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??Zo.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const w="vega-embed-style",{root:k,rootContainer:S}=Git(c);if(!k.getElementById(w)){const C=document.createElement("style");C.id=w,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Iit.toString():n.defaultStyle,S.appendChild(C)}}const f=Hit(t,n.mode);let d=Bit[f](t,i);if(f==="vega-lite"&&d.$schema){const w=Uce(d.$schema);Kce(zk.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${zk.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const w=document.createElement("div");w.classList.add(Vit),c.appendChild(w),h=w}const p=n.patch;if(p&&(d=p instanceof Function?p(d):GC(d,p,!0,!1).newDocument),n.formatLocale&&Zo.formatLocale(n.formatLocale),n.timeFormatLocale&&Zo.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const k=n.expressionFunctions[w];"fn"in k?Zo.expressionFunction(w,k.fn,k.visitor):k instanceof Function&&Zo.expressionFunction(w,k)}const{ast:g}=n,m=Zo.parse(d,f==="vega-lite"?{}:i,{ast:g}),y=new(n.viewClass||Zo.View)(m,{loader:r,logLevel:l,renderer:a,...g?{expr:Zo.expressionInterpreter??n.expr??NGe}:{}});if(y.addSignalListener("autosize",(w,k)=>{const{type:S}=k;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:w,tooltip:k}=n,S=w&&!Jce(w)?w==null?void 0:w.baseURL:void 0,C=Wit(k)?k:new qce({baseURL:S,...k===!0?{}:k}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:w,updateSet:k}=typeof v=="boolean"?{}:v;y.hover(w,k)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(o!==!1){let w=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=s.CLICK_TO_VIEW_ACTIONS,c.append(S),w=S;const C=document.createElement("summary");C.innerHTML=Uit,S.append(C),b=E=>{S.contains(E.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const k=document.createElement("div");if(w.append(k),k.classList.add("vega-actions"),o===!0||o.export!==!1){for(const S of["svg","png"])if(o===!0||o.export===!0||o.export[S]){const C=s[`${S.toUpperCase()}_ACTION`],E=document.createElement("a"),A=se(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;E.text=C,E.href="#",E.target="_blank",E.download=`${u}.${S}`,E.addEventListener("mousedown",async function(T){T.preventDefault();const I=await y.toImageURL(S,A);this.href=I}),k.append(E)}}if(o===!0||o.source!==!1){const S=document.createElement("a");S.text=s.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){dH(FA(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),k.append(S)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const S=document.createElement("a");S.text=s.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){dH(FA(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),k.append(S)}if(o===!0||o.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=s.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(E){Nit(window,S,{config:i,mode:p?"vega":f,renderer:a,spec:FA(p?d:t)}),E.preventDefault()}),k.append(C)}}function x(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:x,embedOptions:n}}function efe(e){return`thumbnail@${JSON.stringify(e)}`}async function Xit(e,t){const n=Kit(e);if(n)return n;const r=await Qit(e,t);return r&&sessionStorage.setItem(efe(e),r),r}function Kit(e){return sessionStorage.getItem(efe(e))}async function Qit(e,t){if(!("mark"in e)||!e||!t)return;const n={disable:!0,title:"",grid:!1,ticks:!1,labels:!1},r={...e,width:100,height:100,config:{...e.config,mark:{strokeWidth:e.mark==="line"?4:0},legend:{disable:!0},axis:{disable:!0},style:{view:{stroke:"transparent"},cell:{stroke:"transparent"}}},data:{values:t},background:"transparent",title:void 0,encoding:Object.fromEntries(Object.entries(e.encoding??{}).map(([o,s])=>[o,{...s,legend:null,axis:n}]))};return(await(await Zce(document.createElement("div"),r,{actions:!1}).then(o=>o.view)).toCanvas()).toDataURL()}function Jit(e){try{return new URL(e),!0}catch{return!1}}function tfe(e){try{const n=new URL(e).pathname.split("/"),r=n[n.length-1];return decodeURIComponent(r)}catch{throw new Error("Invalid URL")}}function Zit(e,t,{signal:n}={}){let r=null;const i=function(...s){r!==null&&clearTimeout(r),!(n!=null&&n.aborted)&&(r=setTimeout(()=>{e(...s),r=null},t))},o=function(){i.cancel()};return i.cancel=function(){r!==null&&(clearTimeout(r),r=null)},n==null||n.addEventListener("abort",o,{once:!0}),i}function aF(e,t){const n={};for(const r of t)n[r]=e[r];return n}function nfe(e,t){const n={};for(const[r,i]of Object.entries(e))t(i,r)&&(n[r]=i);return n}function gH(e){if(typeof e!="object"||e==null)return!1;if(Object.getPrototypeOf(e)===null)return!0;if(e.toString()!=="[object Object]")return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const eot="[object RegExp]",tot="[object String]",not="[object Number]",rot="[object Boolean]",mH="[object Arguments]",iot="[object Symbol]",oot="[object Date]",sot="[object Map]",aot="[object Set]",lot="[object Array]",uot="[object Function]",cot="[object ArrayBuffer]",t5="[object Object]",fot="[object Error]",dot="[object DataView]",hot="[object Uint8Array]",pot="[object Uint8ClampedArray]",got="[object Uint16Array]",mot="[object Uint32Array]",yot="[object BigUint64Array]",vot="[object Int8Array]",bot="[object Int16Array]",xot="[object Int32Array]",wot="[object BigInt64Array]",Sot="[object Float32Array]",kot="[object Float64Array]";function yH(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function vH(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function X_(e,t){if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return e===t;case"number":return e===t||Object.is(e,t);case"function":return e===t;case"object":return il(e,t)}return il(e,t)}function il(e,t,n){if(Object.is(e,t))return!0;let r=vH(e),i=vH(t);if(r===mH&&(r=t5),i===mH&&(i=t5),r!==i)return!1;switch(r){case tot:return e.toString()===t.toString();case not:{const a=e.valueOf(),l=t.valueOf();return a===l||Number.isNaN(a)&&Number.isNaN(l)}case rot:case oot:case iot:return Object.is(e.valueOf(),t.valueOf());case eot:return e.source===t.source&&e.flags===t.flags;case uot:return e===t}n=n??new Map;const o=n.get(e),s=n.get(t);if(o!=null&&s!=null)return o===t;n.set(e,t),n.set(t,e);try{switch(r){case sot:{if(e.size!==t.size)return!1;for(const[a,l]of e.entries())if(!t.has(a)||!il(l,t.get(a),n))return!1;return!0}case aot:{if(e.size!==t.size)return!1;const a=Array.from(e.values()),l=Array.from(t.values());for(let u=0;u<a.length;u++){const c=a[u],f=l.findIndex(d=>il(c,d,n));if(f===-1)return!1;l.splice(f,1)}return!0}case lot:case hot:case pot:case got:case mot:case yot:case vot:case bot:case xot:case wot:case Sot:case kot:{if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(!il(e[a],t[a],n))return!1;return!0}case cot:return e.byteLength!==t.byteLength?!1:il(new Uint8Array(e),new Uint8Array(t),n);case dot:return e.byteLength!==t.byteLength||e.byteOffset!==t.byteOffset?!1:il(e.buffer,t.buffer,n);case fot:return e.name===t.name&&e.message===t.message;case t5:{if(!(il(e.constructor,t.constructor,n)||gH(e)&&gH(t)))return!1;const l=[...Object.keys(e),...yH(e)],u=[...Object.keys(t),...yH(t)];if(l.length!==u.length)return!1;for(let c=0;c<l.length;c++){const f=l[c],d=e[f];if(!Object.prototype.hasOwnProperty.call(t,f))return!1;const h=t[f];if(!il(d,h,n))return!1}return!0}default:return!1}}finally{n.delete(e),n.delete(t)}}const Cot={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},bH=e=>{let t;const n=new Set,r=(c,f)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(p=>p(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(Cot?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},Eot=e=>e?bH(e):bH;var rfe={exports:{}},ife={},ofe={exports:{}},sfe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg=M;function _ot(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $ot=typeof Object.is=="function"?Object.is:_ot,Aot=Jg.useState,Tot=Jg.useEffect,Pot=Jg.useLayoutEffect,Mot=Jg.useDebugValue;function Fot(e,t){var n=t(),r=Aot({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Pot(function(){i.value=n,i.getSnapshot=t,n5(i)&&o({inst:i})},[e,n,t]),Tot(function(){return n5(i)&&o({inst:i}),e(function(){n5(i)&&o({inst:i})})},[e]),Mot(n),n}function n5(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$ot(e,n)}catch{return!0}}function Rot(e,t){return t()}var Oot=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rot:Fot;sfe.useSyncExternalStore=Jg.useSyncExternalStore!==void 0?Jg.useSyncExternalStore:Oot;ofe.exports=sfe;var Dot=ofe.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_=M,Not=Dot;function Iot(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lot=typeof Object.is=="function"?Object.is:Iot,zot=Not.useSyncExternalStore,jot=K_.useRef,Bot=K_.useEffect,Uot=K_.useMemo,Vot=K_.useDebugValue;ife.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=jot(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=Uot(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&s.hasValue){var p=s.value;if(i(p,h))return f=p}return f=h}if(p=f,Lot(c,h))return p;var g=r(h);return i!==void 0&&i(p,g)?p:(c=h,f=g)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,i]);var a=zot(e,o[0],o[1]);return Bot(function(){s.hasValue=!0,s.value=a},[a]),Vot(a),a};rfe.exports=ife;var Wot=rfe.exports;const Hot=Da(Wot),afe={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:qot}=Vi,{useSyncExternalStoreWithSelector:Got}=Hot;let xH=!1;const Yot=e=>e;function Xot(e,t=Yot,n){(afe?"production":void 0)!=="production"&&n&&!xH&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),xH=!0);const r=Got(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return qot(r),r}const wH=e=>{(afe?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Eot(e):e,n=(r,i)=>Xot(t,r,i);return Object.assign(n,t),n},Q_=e=>e?wH(e):wH,c2={BASE_URL:"/Swipytics",DEV:!1,MODE:"production",PROD:!0,SSR:!1},lF=new Map,iw=e=>{const t=lF.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},Kot=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=lF.get(n.name);if(r)return{type:"tracked",store:e,...r};const i={connection:t.connect(n),stores:{}};return lF.set(n.name,i),{type:"tracked",store:e,...i}},Qot=(e,t={})=>(n,r,i)=>{const{enabled:o,anonymousActionType:s,store:a,...l}=t;let u;try{u=(o??(c2?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(c2?"production":void 0)!=="production"&&o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,i);const{connection:c,...f}=Kot(a,u,l);let d=!0;i.setState=(g,m,y)=>{const v=n(g,m);if(!d)return v;const b=y===void 0?{type:s||"anonymous"}:typeof y=="string"?{type:y}:y;return a===void 0?(c==null||c.send(b,r()),v):(c==null||c.send({...b,type:`${a}/${b.type}`},{...iw(l.name),[a]:i.getState()}),v)};const h=(...g)=>{const m=d;d=!1,n(...g),d=m},p=e(i.setState,r,i);if(f.type==="untracked"?c==null||c.init(p):(f.stores[f.store]=i,c==null||c.init(Object.fromEntries(Object.entries(f.stores).map(([g,m])=>[g,g===f.store?p:m.getState()])))),i.dispatchFromDevtools&&typeof i.dispatch=="function"){let g=!1;const m=i.dispatch;i.dispatch=(...y)=>{(c2?"production":void 0)!=="production"&&y[0].type==="__setState"&&!g&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),g=!0),m(...y)}}return c.subscribe(g=>{var m;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return r5(g.payload,y=>{if(y.type==="__setState"){if(a===void 0){h(y.state);return}Object.keys(y.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const v=y.state[a];if(v==null)return;JSON.stringify(i.getState())!==JSON.stringify(v)&&h(v);return}i.dispatchFromDevtools&&typeof i.dispatch=="function"&&i.dispatch(y)});case"DISPATCH":switch(g.payload.type){case"RESET":return h(p),a===void 0?c==null?void 0:c.init(i.getState()):c==null?void 0:c.init(iw(l.name));case"COMMIT":if(a===void 0){c==null||c.init(i.getState());return}return c==null?void 0:c.init(iw(l.name));case"ROLLBACK":return r5(g.state,y=>{if(a===void 0){h(y),c==null||c.init(i.getState());return}h(y[a]),c==null||c.init(iw(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return r5(g.state,y=>{if(a===void 0){h(y);return}JSON.stringify(i.getState())!==JSON.stringify(y[a])&&h(y[a])});case"IMPORT_STATE":{const{nextLiftedState:y}=g.payload,v=(m=y.computedStates.slice(-1)[0])==null?void 0:m.state;if(!v)return;h(a===void 0?v:v[a]),c==null||c.send(null,y);return}case"PAUSE_RECORDING":return d=!d}return}}),p},J_=Qot,r5=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function Jot(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var o;const s=l=>l===null?null:JSON.parse(l,void 0),a=(o=n.getItem(i))!=null?o:null;return a instanceof Promise?a.then(s):s(a)},setItem:(i,o)=>n.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>n.removeItem(i)}}const ov=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return ov(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ov(r)(n)}}}},Zot=(e,t)=>(n,r,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,y)=>({...y,...m}),...t},s=!1;const a=new Set,l=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...m)},r,i);const c=ov(o.serialize),f=()=>{const m=o.partialize({...r()});let y;const v=c({state:m,version:o.version}).then(b=>u.setItem(o.name,b)).catch(b=>{y=b});if(y)throw y;return v},d=i.setState;i.setState=(m,y)=>{d(m,y),f()};const h=e((...m)=>{n(...m),f()},r,i);let p;const g=()=>{var m;if(!u)return;s=!1,a.forEach(v=>v(r()));const y=((m=o.onRehydrateStorage)==null?void 0:m.call(o,r()))||void 0;return ov(u.getItem.bind(u))(o.name).then(v=>{if(v)return o.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return o.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var b;return p=o.merge(v,(b=r())!=null?b:h),n(p,!0),f()}).then(()=>{y==null||y(p,void 0),s=!0,l.forEach(v=>v(p))}).catch(v=>{y==null||y(void 0,v)})};return i.persist={setOptions:m=>{o={...o,...m},m.getStorage&&(u=m.getStorage())},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},g(),p||h},est=(e,t)=>(n,r,i)=>{let o={storage:Jot(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...t},s=!1;const a=new Set,l=new Set;let u=o.storage;if(!u)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...g)},r,i);const c=()=>{const g=o.partialize({...r()});return u.setItem(o.name,{state:g,version:o.version})},f=i.setState;i.setState=(g,m)=>{f(g,m),c()};const d=e((...g)=>{n(...g),c()},r,i);i.getInitialState=()=>d;let h;const p=()=>{var g,m;if(!u)return;s=!1,a.forEach(v=>{var b;return v((b=r())!=null?b:d)});const y=((m=o.onRehydrateStorage)==null?void 0:m.call(o,(g=r())!=null?g:d))||void 0;return ov(u.getItem.bind(u))(o.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return[!0,o.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var b;const[x,w]=v;if(h=o.merge(w,(b=r())!=null?b:d),n(h,!0),x)return c()}).then(()=>{y==null||y(h,void 0),h=r(),s=!0,l.forEach(v=>v(h))}).catch(v=>{y==null||y(void 0,v)})};return i.persist={setOptions:g=>{o={...o,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>s,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},o.skipHydration||p(),h||d},tst=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((c2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Zot(e,t)):est(e,t),nst=tst,rst={json:u5e,csv:GR},Mc=Q_(J_(e=>({filename:null,fileCache:null,data:void 0,writingFile:!1,writeFile:async t=>{e({writingFile:!0,filename:null,fileCache:null,data:void 0});try{const n=t instanceof File?t.name:tfe(t),r=n.split(".").pop(),o=await(await L3(t)).arrayBuffer(),s=new Uint8Array(o),a=await WR(o,rst[r],{worker:!0,fetch:{mode:"no-cors"}});await Eo.lazyCall("writeFile",{filename:n,fileBuffer:s}),e({filename:n,fileCache:t,data:a,writingFile:!1})}catch(n){console.error(n)}finally{e({writingFile:!1})}}}),{name:"DataStore",anonymousActionType:"DataStore Action",enabled:!1}));function ist(e){return aF(e,["filename"])}Mc.subscribe((e,t)=>{!X_(e,t)&&e.writingFile||td.log("Data Store","state",ist(e))});const SH={likes:0,search:1,fields:2,settings:3},Fs=Q_(J_(e=>({drawerExpanded:!0,setDrawerExpanded:t=>e({drawerExpanded:t}),tabIndex:SH.settings,setTabByIndex:t=>e({tabIndex:t}),setTabByName:t=>e({tabIndex:SH[t]}),searchTargetFieldNames:[],setSearchTargetFieldNames:t=>e(n=>({searchTargetFieldNames:typeof t=="function"?t(n.searchTargetFieldNames):t})),appendSearchTarget:t=>e(n=>({searchTargetFieldNames:[...n.searchTargetFieldNames,t]}))}),{name:"InteractionStore",anonymousActionType:"InteractionStore Action",enabled:!1}));Fs.subscribe((e,t)=>{X_(e,t)&&td.log("Interaction Store","state",nfe(e,n=>typeof n!="function"))});const Ct={black:"#000000",white:"#FFFFFF","blackAlpha.50":"rgba(0, 0, 0, 0.04)","blackAlpha.100":"rgba(0, 0, 0, 0.06)","blackAlpha.200":"rgba(0, 0, 0, 0.08)","blackAlpha.300":"rgba(0, 0, 0, 0.16)","blackAlpha.400":"rgba(0, 0, 0, 0.24)","blackAlpha.500":"rgba(0, 0, 0, 0.36)","blackAlpha.600":"rgba(0, 0, 0, 0.48)","blackAlpha.700":"rgba(0, 0, 0, 0.64)","blackAlpha.800":"rgba(0, 0, 0, 0.80)","blackAlpha.900":"rgba(0, 0, 0, 0.92)","whiteAlpha.50":"rgba(255, 255, 255, 0.04)","whiteAlpha.100":"rgba(255, 255, 255, 0.06)","whiteAlpha.200":"rgba(255, 255, 255, 0.08)","whiteAlpha.300":"rgba(255, 255, 255, 0.16)","whiteAlpha.400":"rgba(255, 255, 255, 0.24)","whiteAlpha.500":"rgba(255, 255, 255, 0.36)","whiteAlpha.600":"rgba(255, 255, 255, 0.48)","whiteAlpha.700":"rgba(255, 255, 255, 0.64)","whiteAlpha.800":"rgba(255, 255, 255, 0.80)","whiteAlpha.900":"rgba(255, 255, 255, 0.92)","gray.50":"#F7FAFC","gray.100":"#EDF2F7","gray.200":"#E2E8F0","gray.300":"#CBD5E0","gray.400":"#A0AEC0","gray.500":"#718096","gray.600":"#4A5568","gray.700":"#2D3748","gray.800":"#1A202C","gray.900":"#171923","red.50":"#FFF5F5","red.100":"#FED7D7","red.200":"#FEB2B2","red.300":"#FC8181","red.400":"#F56565","red.500":"#E53E3E","red.600":"#C53030","red.700":"#9B2C2C","red.800":"#822727","red.900":"#63171B","orange.50":"#FFFAF0","orange.100":"#FEEBC8","orange.200":"#FBD38D","orange.300":"#F6AD55","orange.400":"#ED8936","orange.500":"#DD6B20","orange.600":"#C05621","orange.700":"#9C4221","orange.800":"#7B341E","orange.900":"#652B19","yellow.50":"#FFFFF0","yellow.100":"#FEFCBF","yellow.200":"#FAF089","yellow.300":"#F6E05E","yellow.400":"#ECC94B","yellow.500":"#D69E2E","yellow.600":"#B7791F","yellow.700":"#975A16","yellow.800":"#744210","yellow.900":"#5F370E","green.50":"#F0FFF4","green.100":"#C6F6D5","green.200":"#9AE6B4","green.300":"#68D391","green.400":"#48BB78","green.500":"#38A169","green.600":"#2F855A","green.700":"#276749","green.800":"#22543D","green.900":"#1C4532","teal.50":"#E6FFFA","teal.100":"#B2F5EA","teal.200":"#81E6D9","teal.300":"#4FD1C5","teal.400":"#38B2AC","teal.500":"#319795","teal.600":"#2C7A7B","teal.700":"#285E61","teal.800":"#234E52","teal.900":"#1D4044","blue.50":"#EBF8FF","blue.100":"#BEE3F8","blue.200":"#90CDF4","blue.300":"#63B3ED","blue.400":"#4299E1","blue.500":"#3182CE","blue.600":"#2B6CB0","blue.700":"#2C5282","blue.800":"#2A4365","blue.900":"#1A365D","cyan.50":"#EDFDFD","cyan.100":"#C4F1F9","cyan.200":"#9DECF9","cyan.300":"#76E4F7","cyan.400":"#0BC5EA","cyan.500":"#00B5D8","cyan.600":"#00A3C4","cyan.700":"#0987A0","cyan.800":"#086F83","cyan.900":"#065666","purple.50":"#FAF5FF","purple.100":"#E9D8FD","purple.200":"#D6BCFA","purple.300":"#B794F4","purple.400":"#9F7AEA","purple.500":"#805AD5","purple.600":"#6B46C1","purple.700":"#553C9A","purple.800":"#44337A","purple.900":"#322659","pink.50":"#FFF5F7","pink.100":"#FED7E2","pink.200":"#FBB6CE","pink.300":"#F687B3","pink.400":"#ED64A6","pink.500":"#D53F8C","pink.600":"#B83280","pink.700":"#97266D","pink.800":"#702459","pink.900":"#521B41"},kH=[{name:"Barley",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/barley.json"},{name:"Cars",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/cars.json"},{name:"Crimea",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/crimea.json"},{name:"Jobs",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/jobs.json"},{name:"Population",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/population.json"},{name:"Movies",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/movies.json"},{name:"Birdstrikes",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/birdstrikes.csv"},{name:"Burtin",href:"https://cdn.jsdelivr.net/npm/vega-datasets@2/data/burtin.json"}],CH=50,ost=50,EH=1,mr="orange",qu={50:Ct[`${mr}.50`],100:Ct[`${mr}.100`],200:Ct[`${mr}.200`],300:Ct[`${mr}.300`],400:Ct[`${mr}.400`],500:Ct[`${mr}.500`],600:Ct[`${mr}.600`],700:Ct[`${mr}.700`],800:Ct[`${mr}.800`],900:Ct[`${mr}.900`]},_H="table",$H=3;var lfe=Symbol.for("immer-nothing"),AH=Symbol.for("immer-draftable"),no=Symbol.for("immer-state");function fs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zg=Object.getPrototypeOf;function em(e){return!!e&&!!e[no]}function jd(e){var t;return e?ufe(e)||Array.isArray(e)||!!e[AH]||!!((t=e.constructor)!=null&&t[AH])||e$(e)||t$(e):!1}var sst=Object.prototype.constructor.toString();function ufe(e){if(!e||typeof e!="object")return!1;const t=Zg(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===sst}function jk(e,t){Z_(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Z_(e){const t=e[no];return t?t.type_:Array.isArray(e)?1:e$(e)?2:t$(e)?3:0}function uF(e,t){return Z_(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cfe(e,t,n){const r=Z_(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function ast(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function e$(e){return e instanceof Map}function t$(e){return e instanceof Set}function wf(e){return e.copy_||e.base_}function cF(e,t){if(e$(e))return new Map(e);if(t$(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ufe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[no];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(Zg(e),r)}else{const r=Zg(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function mL(e,t=!1){return n$(e)||em(e)||!jd(e)||(Z_(e)>1&&(e.set=e.add=e.clear=e.delete=lst),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>mL(r,!0))),e}function lst(){fs(2)}function n$(e){return Object.isFrozen(e)}var ust={};function Bd(e){const t=ust[e];return t||fs(0,e),t}var sv;function ffe(){return sv}function cst(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TH(e,t){t&&(Bd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fF(e){dF(e),e.drafts_.forEach(fst),e.drafts_=null}function dF(e){e===sv&&(sv=e.parent_)}function PH(e){return sv=cst(sv,e)}function fst(e){const t=e[no];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function MH(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[no].modified_&&(fF(t),fs(4)),jd(e)&&(e=Bk(t,e),t.parent_||Uk(t,e)),t.patches_&&Bd("Patches").generateReplacementPatches_(n[no].base_,e,t.patches_,t.inversePatches_)):e=Bk(t,n,[]),fF(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==lfe?e:void 0}function Bk(e,t,n){if(n$(t))return t;const r=t[no];if(!r)return jk(t,(i,o)=>FH(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Uk(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),jk(o,(a,l)=>FH(e,r,i,a,l,n,s)),Uk(e,i,!1),n&&e.patches_&&Bd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function FH(e,t,n,r,i,o,s){if(em(i)){const a=o&&t&&t.type_!==3&&!uF(t.assigned_,r)?o.concat(r):void 0,l=Bk(e,i,a);if(cfe(n,r,l),em(l))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(jd(i)&&!n$(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Bk(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Uk(e,i)}}function Uk(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mL(t,n)}function dst(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ffe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=yL;n&&(i=[r],o=av);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var yL={get(e,t){if(t===no)return e;const n=wf(e);if(!uF(n,t))return hst(e,n,t);const r=n[t];return e.finalized_||!jd(r)?r:r===i5(e.base_,t)?(o5(e),e.copy_[t]=pF(r,e)):r},has(e,t){return t in wf(e)},ownKeys(e){return Reflect.ownKeys(wf(e))},set(e,t,n){const r=dfe(wf(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=i5(wf(e),t),o=i==null?void 0:i[no];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(ast(n,i)&&(n!==void 0||uF(e.base_,t)))return!0;o5(e),hF(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return i5(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,o5(e),hF(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=wf(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){fs(11)},getPrototypeOf(e){return Zg(e.base_)},setPrototypeOf(){fs(12)}},av={};jk(yL,(e,t)=>{av[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});av.deleteProperty=function(e,t){return av.set.call(this,e,t,void 0)};av.set=function(e,t,n){return yL.set.call(this,e[0],t,n,e[0])};function i5(e,t){const n=e[no];return(n?wf(n):e)[t]}function hst(e,t,n){var i;const r=dfe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function dfe(e,t){if(!(t in e))return;let n=Zg(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Zg(n)}}function hF(e){e.modified_||(e.modified_=!0,e.parent_&&hF(e.parent_))}function o5(e){e.copy_||(e.copy_=cF(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var pst=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(l=o,...u){return s.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&fs(6),r!==void 0&&typeof r!="function"&&fs(7);let i;if(jd(t)){const o=PH(this),s=pF(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?fF(o):dF(o)}return TH(o,r),MH(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===lfe&&(i=void 0),this.autoFreeze_&&mL(i,!0),r){const o=[],s=[];Bd("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else fs(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,l=>t(l,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){jd(e)||fs(8),em(e)&&(e=gst(e));const t=PH(this),n=pF(e,void 0);return n[no].isManual_=!0,dF(t),n}finishDraft(e,t){const n=e&&e[no];(!n||!n.isManual_)&&fs(9);const{scope_:r}=n;return TH(r,t),MH(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Bd("Patches").applyPatches_;return em(e)?r(e,t):this.produce(e,i=>r(i,t))}};function pF(e,t){const n=e$(e)?Bd("MapSet").proxyMap_(e,t):t$(e)?Bd("MapSet").proxySet_(e,t):dst(e,t);return(t?t.scope_:ffe()).drafts_.push(n),n}function gst(e){return em(e)||fs(10,e),hfe(e)}function hfe(e){if(!jd(e)||n$(e))return e;const t=e[no];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=cF(e,t.scope_.immer_.useStrictShallowCopy_)}else n=cF(e,!0);return jk(n,(r,i)=>{cfe(n,r,hfe(i))}),t&&(t.finalized_=!1),n}var ro=new pst,E0=ro.produce;ro.produceWithPatches.bind(ro);ro.setAutoFreeze.bind(ro);ro.setUseStrictShallowCopy.bind(ro);ro.applyPatches.bind(ro);ro.createDraft.bind(ro);ro.finishDraft.bind(ro);const St=Q_(J_((e,t)=>({filename:"",timestamp:0,charts:[],fields:[],currentChartIndex:-1,loadingSession:!1,appendingChart:!1,resetSession:()=>e({filename:"",timestamp:0,charts:[],fields:[],currentChartIndex:-1}),setCurrentChartIndex:n=>{const{appendingChart:r,charts:i}=t();r||n<-1||n>i.length-1||e({currentChartIndex:n})},setCurrentChartToLast:()=>{const{charts:n,setCurrentChartIndex:r}=t();r(n.length-1)},loadSession:async n=>{e({loadingSession:!0,filename:n});const{timestamp:r,charts:i,fields:o,currentChartIndex:s}=t(),a=await Eo.call("loadSession",{session:{filename:n,timestamp:r,charts:i,fields:o}});e(a?E0(l=>{Object.assign(l,a),l.currentChartIndex=s===-1?0:s,l.loadingSession=!1}):{loadingSession:!1})},appendNextChart:async()=>{e({appendingChart:!0});const n=await Eo.call("appendNextChart");e(n?E0(r=>{r.charts.push(n),r.appendingChart=!1}):{appendingChart:!1})},appendChart:async n=>{e({appendingChart:!0}),await Eo.call("appendChart",{chart:n}),e(E0(r=>{r.charts.length>EH&&(r.charts=r.charts.slice(0,-EH)),r.charts.push(n),r.appendingChart=!1}))},renewCurrentChart:()=>e(E0(n=>{const r=n.charts[n.currentChartIndex];r.specIndex=(r.specIndex+1)%r.specs.length})),setCurrentChartPreferred:n=>{const{charts:r,currentChartIndex:i}=t(),o=r[i];Eo.call("setPreferred",{key:o.key,preferred:n}),e(E0(s=>{s.charts[s.currentChartIndex].preferred=n}))}}),{name:"SessionStore",anonymousActionType:"SessionStore Action",enabled:!1})),mst=e=>aF({...e,charts:e.charts.map(t=>aF(t,["key","title","preferred","timestamp","specs"]))},["charts","filename","timestamp","currentChartIndex"]);St.subscribe((e,t)=>{!X_(e,t)&&e.loadingSession&&e.appendingChart||td.log("Session Store","state",mst(e))});const pfe=Q_(J_(nst(e=>({apiKey:"sk-...",setApiKey:t=>e({apiKey:t}),locale:"en",setLocale:t=>e({locale:t})}),{name:"settings-storage"}),{name:"SettingStore",anonymousActionType:"SettingStore Action",enabled:!1}));pfe.subscribe((e,t)=>{X_(e,t)&&td.log("Setting Store","state",nfe(e,n=>typeof n!="function"))});function yst(){const e=St(i=>i.charts),t=e.filter(i=>i.preferred),n=St(i=>i.setCurrentChartIndex);return{preferredCharts:t,handleClickBookmark:i=>{const o=e.findIndex(s=>s===i);n(o)}}}var $b=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tm=typeof window>"u"||"Deno"in globalThis;function vo(){}function vst(e,t){return typeof e=="function"?e(t):e}function gF(e){return typeof e=="number"&&e>=0&&e!==1/0}function gfe(e,t){return Math.max(e+(t||0)-Date.now(),0)}function jp(e,t){return typeof e=="function"?e(t):e}function as(e,t){return typeof e=="function"?e(t):e}function RH(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(s){if(r){if(t.queryHash!==vL(s,t.options))return!1}else if(!uv(t.queryKey,s))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||i&&i!==t.state.fetchStatus||o&&!o(t))}function OH(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(lv(t.options.mutationKey)!==lv(o))return!1}else if(!uv(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function vL(e,t){return((t==null?void 0:t.queryKeyHashFn)||lv)(e)}function lv(e){return JSON.stringify(e,(t,n)=>yF(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function uv(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!uv(e[n],t[n])):!1}function mfe(e,t){if(e===t)return e;const n=DH(e)&&DH(t);if(n||yF(e)&&yF(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),s=o.length,a=n?[]:{};let l=0;for(let u=0;u<s;u++){const c=n?u:o[u];(!n&&r.includes(c)||n)&&e[c]===void 0&&t[c]===void 0?(a[c]=void 0,l++):(a[c]=mfe(e[c],t[c]),a[c]===e[c]&&e[c]!==void 0&&l++)}return i===s&&l===i?e:a}return t}function mF(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function DH(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function yF(e){if(!NH(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!NH(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function NH(e){return Object.prototype.toString.call(e)==="[object Object]"}function bst(e){return new Promise(t=>{setTimeout(t,e)})}function vF(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?mfe(e,t):t}function xst(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function wst(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var yfe=Symbol();function vfe(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===yfe?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var jf,Tu,Bp,Fq,Sst=(Fq=class extends $b{constructor(){super();Me(this,jf);Me(this,Tu);Me(this,Bp);pe(this,Bp,t=>{if(!tm&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,Tu)||this.setEventListener(B(this,Bp))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,Tu))==null||t.call(this),pe(this,Tu,void 0))}setEventListener(t){var n;pe(this,Bp,t),(n=B(this,Tu))==null||n.call(this),pe(this,Tu,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){B(this,jf)!==t&&(pe(this,jf,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof B(this,jf)=="boolean"?B(this,jf):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},jf=new WeakMap,Tu=new WeakMap,Bp=new WeakMap,Fq),bL=new Sst,Up,Pu,Vp,Rq,kst=(Rq=class extends $b{constructor(){super();Me(this,Up,!0);Me(this,Pu);Me(this,Vp);pe(this,Vp,t=>{if(!tm&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){B(this,Pu)||this.setEventListener(B(this,Vp))}onUnsubscribe(){var t;this.hasListeners()||((t=B(this,Pu))==null||t.call(this),pe(this,Pu,void 0))}setEventListener(t){var n;pe(this,Vp,t),(n=B(this,Pu))==null||n.call(this),pe(this,Pu,t(this.setOnline.bind(this)))}setOnline(t){B(this,Up)!==t&&(pe(this,Up,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return B(this,Up)}},Up=new WeakMap,Pu=new WeakMap,Vp=new WeakMap,Rq),Vk=new kst;function Cst(e){return Math.min(1e3*2**e,3e4)}function bfe(e){return(e??"online")==="online"?Vk.isOnline():!0}var xfe=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function s5(e){return e instanceof xfe}function wfe(e){let t=!1,n=0,r=!1,i,o,s;const a=new Promise((y,v)=>{o=y,s=v}),l=y=>{var v;r||(p(new xfe(y)),(v=e.abort)==null||v.call(e))},u=()=>{t=!0},c=()=>{t=!1},f=()=>bL.isFocused()&&(e.networkMode==="always"||Vk.isOnline())&&e.canRun(),d=()=>bfe(e.networkMode)&&e.canRun(),h=y=>{var v;r||(r=!0,(v=e.onSuccess)==null||v.call(e,y),i==null||i(),o(y))},p=y=>{var v;r||(r=!0,(v=e.onError)==null||v.call(e,y),i==null||i(),s(y))},g=()=>new Promise(y=>{var v;i=b=>{(r||f())&&y(b)},(v=e.onPause)==null||v.call(e)}).then(()=>{var y;i=void 0,r||(y=e.onContinue)==null||y.call(e)}),m=()=>{if(r)return;let y;const v=n===0?e.initialPromise:void 0;try{y=v??e.fn()}catch(b){y=Promise.reject(b)}Promise.resolve(y).then(h).catch(b=>{var C;if(r)return;const x=e.retry??(tm?0:3),w=e.retryDelay??Cst,k=typeof w=="function"?w(n,b):w,S=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(t||!S){p(b);return}n++,(C=e.onFail)==null||C.call(e,n,b),bst(k).then(()=>f()?void 0:g()).then(()=>{t?p(b):m()})})};return{promise:a,cancel:l,continue:()=>(i==null||i(),a),cancelRetry:u,continueRetry:c,canStart:d,start:()=>(d()?m():g().then(m),a)}}function Est(){let e=[],t=0,n=d=>{d()},r=d=>{d()},i=d=>setTimeout(d,0);const o=d=>{i=d},s=d=>{let h;t++;try{h=d()}finally{t--,t||u()}return h},a=d=>{t?e.push(d):i(()=>{n(d)})},l=d=>(...h)=>{a(()=>{d(...h)})},u=()=>{const d=e;e=[],d.length&&i(()=>{r(()=>{d.forEach(h=>{n(h)})})})};return{batch:s,batchCalls:l,schedule:a,setNotifyFunction:d=>{n=d},setBatchNotifyFunction:d=>{r=d},setScheduler:o}}var Xn=Est(),Bf,Oq,Sfe=(Oq=class{constructor(){Me(this,Bf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gF(this.gcTime)&&pe(this,Bf,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(tm?1/0:5*60*1e3))}clearGcTimeout(){B(this,Bf)&&(clearTimeout(B(this,Bf)),pe(this,Bf,void 0))}},Bf=new WeakMap,Oq),Wp,Hp,go,pr,dv,Uf,es,tl,Dq,_st=(Dq=class extends Sfe{constructor(t){super();Me(this,es);Me(this,Wp);Me(this,Hp);Me(this,go);Me(this,pr);Me(this,dv);Me(this,Uf);pe(this,Uf,!1),pe(this,dv,t.defaultOptions),this.setOptions(t.options),this.observers=[],pe(this,go,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,pe(this,Wp,$st(this.options)),this.state=t.state??B(this,Wp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=B(this,pr))==null?void 0:t.promise}setOptions(t){this.options={...B(this,dv),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,go).remove(this)}setData(t,n){const r=vF(this.state.data,t,this.options);return Ue(this,es,tl).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Ue(this,es,tl).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=B(this,pr))==null?void 0:r.promise;return(i=B(this,pr))==null||i.cancel(t),n?n.then(vo).catch(vo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,Wp))}isActive(){return this.observers.some(t=>as(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!gfe(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,pr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=B(this,pr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),B(this,go).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(B(this,pr)&&(B(this,Uf)?B(this,pr).cancel({revert:!0}):B(this,pr).cancelRetry()),this.scheduleGc()),B(this,go).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ue(this,es,tl).call(this,{type:"invalidate"})}fetch(t,n){var l,u,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(B(this,pr))return B(this,pr).continueRetry(),B(this,pr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(d=>d.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(pe(this,Uf,!0),r.signal)})},o=()=>{const f=vfe(this.options,n),d={queryKey:this.queryKey,meta:this.meta};return i(d),pe(this,Uf,!1),this.options.persister?this.options.persister(f,d,this):f(d)},s={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(s),(l=this.options.behavior)==null||l.onFetch(s,this),pe(this,Hp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=s.fetchOptions)==null?void 0:u.meta))&&Ue(this,es,tl).call(this,{type:"fetch",meta:(c=s.fetchOptions)==null?void 0:c.meta});const a=f=>{var d,h,p,g;s5(f)&&f.silent||Ue(this,es,tl).call(this,{type:"error",error:f}),s5(f)||((h=(d=B(this,go).config).onError)==null||h.call(d,f,this),(g=(p=B(this,go).config).onSettled)==null||g.call(p,this.state.data,f,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return pe(this,pr,wfe({initialPromise:n==null?void 0:n.initialPromise,fn:s.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var d,h,p,g;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}this.setData(f),(h=(d=B(this,go).config).onSuccess)==null||h.call(d,f,this),(g=(p=B(this,go).config).onSettled)==null||g.call(p,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:a,onFail:(f,d)=>{Ue(this,es,tl).call(this,{type:"failed",failureCount:f,error:d})},onPause:()=>{Ue(this,es,tl).call(this,{type:"pause"})},onContinue:()=>{Ue(this,es,tl).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0})),B(this,pr).start()}},Wp=new WeakMap,Hp=new WeakMap,go=new WeakMap,pr=new WeakMap,dv=new WeakMap,Uf=new WeakMap,es=new WeakSet,tl=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...kfe(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return s5(i)&&i.revert&&B(this,Hp)?{...B(this,Hp),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Xn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),B(this,go).notify({query:this,type:"updated",action:t})})},Dq);function kfe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bfe(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function $st(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zs,Nq,Ast=(Nq=class extends $b{constructor(t={}){super();Me(this,Zs);this.config=t,pe(this,Zs,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??vL(i,n);let s=this.get(o);return s||(s=new _st({cache:this,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){B(this,Zs).has(t.queryHash)||(B(this,Zs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=B(this,Zs).get(t.queryHash);n&&(t.destroy(),n===t&&B(this,Zs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return B(this,Zs).get(t)}getAll(){return[...B(this,Zs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>RH(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>RH(t,r)):n}notify(t){Xn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Xn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Zs=new WeakMap,Nq),ea,Rr,Vf,ta,gu,Iq,Tst=(Iq=class extends Sfe{constructor(t){super();Me(this,ta);Me(this,ea);Me(this,Rr);Me(this,Vf);this.mutationId=t.mutationId,pe(this,Rr,t.mutationCache),pe(this,ea,[]),this.state=t.state||Pst(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){B(this,ea).includes(t)||(B(this,ea).push(t),this.clearGcTimeout(),B(this,Rr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){pe(this,ea,B(this,ea).filter(n=>n!==t)),this.scheduleGc(),B(this,Rr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){B(this,ea).length||(this.state.status==="pending"?this.scheduleGc():B(this,Rr).remove(this))}continue(){var t;return((t=B(this,Vf))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,s,a,l,u,c,f,d,h,p,g,m,y,v,b,x,w,k,S;pe(this,Vf,wfe({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,E)=>{Ue(this,ta,gu).call(this,{type:"failed",failureCount:C,error:E})},onPause:()=>{Ue(this,ta,gu).call(this,{type:"pause"})},onContinue:()=>{Ue(this,ta,gu).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,Rr).canRun(this)}));const n=this.state.status==="pending",r=!B(this,Vf).canStart();try{if(!n){Ue(this,ta,gu).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(i=B(this,Rr).config).onMutate)==null?void 0:o.call(i,t,this));const E=await((a=(s=this.options).onMutate)==null?void 0:a.call(s,t));E!==this.state.context&&Ue(this,ta,gu).call(this,{type:"pending",context:E,variables:t,isPaused:r})}const C=await B(this,Vf).start();return await((u=(l=B(this,Rr).config).onSuccess)==null?void 0:u.call(l,C,t,this.state.context,this)),await((f=(c=this.options).onSuccess)==null?void 0:f.call(c,C,t,this.state.context)),await((h=(d=B(this,Rr).config).onSettled)==null?void 0:h.call(d,C,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,C,null,t,this.state.context)),Ue(this,ta,gu).call(this,{type:"success",data:C}),C}catch(C){try{throw await((y=(m=B(this,Rr).config).onError)==null?void 0:y.call(m,C,t,this.state.context,this)),await((b=(v=this.options).onError)==null?void 0:b.call(v,C,t,this.state.context)),await((w=(x=B(this,Rr).config).onSettled)==null?void 0:w.call(x,void 0,C,this.state.variables,this.state.context,this)),await((S=(k=this.options).onSettled)==null?void 0:S.call(k,void 0,C,t,this.state.context)),C}finally{Ue(this,ta,gu).call(this,{type:"error",error:C})}}finally{B(this,Rr).runNext(this)}}},ea=new WeakMap,Rr=new WeakMap,Vf=new WeakMap,ta=new WeakSet,gu=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Xn.batch(()=>{B(this,ea).forEach(r=>{r.onMutationUpdate(t)}),B(this,Rr).notify({mutation:this,type:"updated",action:t})})},Iq);function Pst(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mi,hv,Lq,Mst=(Lq=class extends $b{constructor(t={}){super();Me(this,Mi);Me(this,hv);this.config=t,pe(this,Mi,new Map),pe(this,hv,Date.now())}build(t,n,r){const i=new Tst({mutationCache:this,mutationId:++Nb(this,hv)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=ow(t),r=B(this,Mi).get(n)??[];r.push(t),B(this,Mi).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=ow(t);if(B(this,Mi).has(n)){const i=(r=B(this,Mi).get(n))==null?void 0:r.filter(o=>o!==t);i&&(i.length===0?B(this,Mi).delete(n):B(this,Mi).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=B(this,Mi).get(ow(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=B(this,Mi).get(ow(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Xn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...B(this,Mi).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>OH(n,r))}findAll(t={}){return this.getAll().filter(n=>OH(t,n))}notify(t){Xn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Xn.batch(()=>Promise.all(t.map(n=>n.continue().catch(vo))))}},Mi=new WeakMap,hv=new WeakMap,Lq);function ow(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Fst(e){return{onFetch:(t,n)=>{const r=async()=>{var p,g,m,y,v;const i=t.options,o=(m=(g=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:g.fetchMore)==null?void 0:m.direction,s=((y=t.state.data)==null?void 0:y.pages)||[],a=((v=t.state.data)==null?void 0:v.pageParams)||[],l={pages:[],pageParams:[]};let u=!1;const c=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},f=vfe(t.options,t.fetchOptions),d=async(b,x,w)=>{if(u)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const k={queryKey:t.queryKey,pageParam:x,direction:w?"backward":"forward",meta:t.options.meta};c(k);const S=await f(k),{maxPages:C}=t.options,E=w?wst:xst;return{pages:E(b.pages,S,C),pageParams:E(b.pageParams,x,C)}};let h;if(o&&s.length){const b=o==="backward",x=b?Rst:IH,w={pages:s,pageParams:a},k=x(i,w);h=await d(w,k,b)}else{h=await d(l,a[0]??i.initialPageParam);const b=e??s.length;for(let x=1;x<b;x++){const w=IH(i,h);if(w==null)break;h=await d(h,w)}}return h};t.options.persister?t.fetchFn=()=>{var i,o;return(o=(i=t.options).persister)==null?void 0:o.call(i,r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=r}}}function IH(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Rst(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Xt,Mu,Fu,qp,Gp,Ru,Yp,Xp,zq,Ost=(zq=class{constructor(e={}){Me(this,Xt);Me(this,Mu);Me(this,Fu);Me(this,qp);Me(this,Gp);Me(this,Ru);Me(this,Yp);Me(this,Xp);pe(this,Xt,e.queryCache||new Ast),pe(this,Mu,e.mutationCache||new Mst),pe(this,Fu,e.defaultOptions||{}),pe(this,qp,new Map),pe(this,Gp,new Map),pe(this,Ru,0)}mount(){Nb(this,Ru)._++,B(this,Ru)===1&&(pe(this,Yp,bL.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Xt).onFocus())})),pe(this,Xp,Vk.subscribe(async e=>{e&&(await this.resumePausedMutations(),B(this,Xt).onOnline())})))}unmount(){var e,t;Nb(this,Ru)._--,B(this,Ru)===0&&((e=B(this,Yp))==null||e.call(this),pe(this,Yp,void 0),(t=B(this,Xp))==null||t.call(this),pe(this,Xp,void 0))}isFetching(e){return B(this,Xt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return B(this,Mu).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,Xt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=B(this,Xt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(jp(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return B(this,Xt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=B(this,Xt).get(r.queryHash),o=i==null?void 0:i.state.data,s=vst(t,o);if(s!==void 0)return B(this,Xt).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return Xn.batch(()=>B(this,Xt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=B(this,Xt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=B(this,Xt);Xn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=B(this,Xt),r={type:"active",...e};return Xn.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Xn.batch(()=>B(this,Xt).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(vo).catch(vo)}invalidateQueries(e={},t={}){return Xn.batch(()=>{if(B(this,Xt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Xn.batch(()=>B(this,Xt).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(vo)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(vo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=B(this,Xt).build(this,t);return n.isStaleByTime(jp(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(vo).catch(vo)}fetchInfiniteQuery(e){return e.behavior=Fst(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(vo).catch(vo)}resumePausedMutations(){return Vk.isOnline()?B(this,Mu).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,Xt)}getMutationCache(){return B(this,Mu)}getDefaultOptions(){return B(this,Fu)}setDefaultOptions(e){pe(this,Fu,e)}setQueryDefaults(e,t){B(this,qp).set(lv(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...B(this,qp).values()];let n={};return t.forEach(r=>{uv(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){B(this,Gp).set(lv(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...B(this,Gp).values()];let n={};return t.forEach(r=>{uv(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...B(this,Fu).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=vL(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===yfe&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...B(this,Fu).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){B(this,Xt).clear(),B(this,Mu).clear()}},Xt=new WeakMap,Mu=new WeakMap,Fu=new WeakMap,qp=new WeakMap,Gp=new WeakMap,Ru=new WeakMap,Yp=new WeakMap,Xp=new WeakMap,zq),oi,Ve,pv,Or,Wf,Kp,na,gv,Qp,Jp,Hf,qf,Ou,Zp,ft,hy,bF,xF,wF,SF,kF,CF,EF,Cfe,jq,Dst=(jq=class extends $b{constructor(t,n){super();Me(this,ft);Me(this,oi);Me(this,Ve);Me(this,pv);Me(this,Or);Me(this,Wf);Me(this,Kp);Me(this,na);Me(this,gv);Me(this,Qp);Me(this,Jp);Me(this,Hf);Me(this,qf);Me(this,Ou);Me(this,Zp,new Set);this.options=n,pe(this,oi,t),pe(this,na,null),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(B(this,Ve).addObserver(this),LH(B(this,Ve),this.options)?Ue(this,ft,hy).call(this):this.updateResult(),Ue(this,ft,SF).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return _F(B(this,Ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _F(B(this,Ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ue(this,ft,kF).call(this),Ue(this,ft,CF).call(this),B(this,Ve).removeObserver(this)}setOptions(t,n){const r=this.options,i=B(this,Ve);if(this.options=B(this,oi).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof as(this.options.enabled,B(this,Ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ue(this,ft,EF).call(this),B(this,Ve).setOptions(this.options),r._defaulted&&!mF(this.options,r)&&B(this,oi).getQueryCache().notify({type:"observerOptionsUpdated",query:B(this,Ve),observer:this});const o=this.hasListeners();o&&zH(B(this,Ve),i,this.options,r)&&Ue(this,ft,hy).call(this),this.updateResult(n),o&&(B(this,Ve)!==i||as(this.options.enabled,B(this,Ve))!==as(r.enabled,B(this,Ve))||jp(this.options.staleTime,B(this,Ve))!==jp(r.staleTime,B(this,Ve)))&&Ue(this,ft,bF).call(this);const s=Ue(this,ft,xF).call(this);o&&(B(this,Ve)!==i||as(this.options.enabled,B(this,Ve))!==as(r.enabled,B(this,Ve))||s!==B(this,Ou))&&Ue(this,ft,wF).call(this,s)}getOptimisticResult(t){const n=B(this,oi).getQueryCache().build(B(this,oi),t),r=this.createResult(n,t);return Ist(this,r)&&(pe(this,Or,r),pe(this,Kp,this.options),pe(this,Wf,B(this,Ve).state)),r}getCurrentResult(){return B(this,Or)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){B(this,Zp).add(t)}getCurrentQuery(){return B(this,Ve)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=B(this,oi).defaultQueryOptions(t),r=B(this,oi).getQueryCache().build(B(this,oi),n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Ue(this,ft,hy).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),B(this,Or)))}createResult(t,n){var S;const r=B(this,Ve),i=this.options,o=B(this,Or),s=B(this,Wf),a=B(this,Kp),u=t!==r?t.state:B(this,pv),{state:c}=t;let f={...c},d=!1,h;if(n._optimisticResults){const C=this.hasListeners(),E=!C&&LH(t,n),A=C&&zH(t,r,n,i);(E||A)&&(f={...f,...kfe(c.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:m}=f;if(n.select&&f.data!==void 0)if(o&&f.data===(s==null?void 0:s.data)&&n.select===B(this,gv))h=B(this,Qp);else try{pe(this,gv,n.select),h=n.select(f.data),h=vF(o==null?void 0:o.data,h,n),pe(this,Qp,h),pe(this,na,null)}catch(C){pe(this,na,C)}else h=f.data;if(n.placeholderData!==void 0&&h===void 0&&m==="pending"){let C;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))C=o.data;else if(C=typeof n.placeholderData=="function"?n.placeholderData((S=B(this,Jp))==null?void 0:S.state.data,B(this,Jp)):n.placeholderData,n.select&&C!==void 0)try{C=n.select(C),pe(this,na,null)}catch(E){pe(this,na,E)}C!==void 0&&(m="success",h=vF(o==null?void 0:o.data,C,n),d=!0)}B(this,na)&&(p=B(this,na),h=B(this,Qp),g=Date.now(),m="error");const y=f.fetchStatus==="fetching",v=m==="pending",b=m==="error",x=v&&y,w=h!==void 0;return{status:m,fetchStatus:f.fetchStatus,isPending:v,isSuccess:m==="success",isError:b,isInitialLoading:x,isLoading:x,data:h,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:b&&!w,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:b&&w,isStale:xL(t,n),refetch:this.refetch}}updateResult(t){const n=B(this,Or),r=this.createResult(B(this,Ve),this.options);if(pe(this,Wf,B(this,Ve).state),pe(this,Kp,this.options),B(this,Wf).data!==void 0&&pe(this,Jp,B(this,Ve)),mF(r,n))return;pe(this,Or,r);const i={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!B(this,Zp).size)return!0;const l=new Set(a??B(this,Zp));return this.options.throwOnError&&l.add("error"),Object.keys(B(this,Or)).some(u=>{const c=u;return B(this,Or)[c]!==n[c]&&l.has(c)})};(t==null?void 0:t.listeners)!==!1&&o()&&(i.listeners=!0),Ue(this,ft,Cfe).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ue(this,ft,SF).call(this)}},oi=new WeakMap,Ve=new WeakMap,pv=new WeakMap,Or=new WeakMap,Wf=new WeakMap,Kp=new WeakMap,na=new WeakMap,gv=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,Hf=new WeakMap,qf=new WeakMap,Ou=new WeakMap,Zp=new WeakMap,ft=new WeakSet,hy=function(t){Ue(this,ft,EF).call(this);let n=B(this,Ve).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(vo)),n},bF=function(){Ue(this,ft,kF).call(this);const t=jp(this.options.staleTime,B(this,Ve));if(tm||B(this,Or).isStale||!gF(t))return;const r=gfe(B(this,Or).dataUpdatedAt,t)+1;pe(this,Hf,setTimeout(()=>{B(this,Or).isStale||this.updateResult()},r))},xF=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(B(this,Ve)):this.options.refetchInterval)??!1},wF=function(t){Ue(this,ft,CF).call(this),pe(this,Ou,t),!(tm||as(this.options.enabled,B(this,Ve))===!1||!gF(B(this,Ou))||B(this,Ou)===0)&&pe(this,qf,setInterval(()=>{(this.options.refetchIntervalInBackground||bL.isFocused())&&Ue(this,ft,hy).call(this)},B(this,Ou)))},SF=function(){Ue(this,ft,bF).call(this),Ue(this,ft,wF).call(this,Ue(this,ft,xF).call(this))},kF=function(){B(this,Hf)&&(clearTimeout(B(this,Hf)),pe(this,Hf,void 0))},CF=function(){B(this,qf)&&(clearInterval(B(this,qf)),pe(this,qf,void 0))},EF=function(){const t=B(this,oi).getQueryCache().build(B(this,oi),this.options);if(t===B(this,Ve))return;const n=B(this,Ve);pe(this,Ve,t),pe(this,pv,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},Cfe=function(t){Xn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(B(this,Or))}),B(this,oi).getQueryCache().notify({query:B(this,Ve),type:"observerResultsUpdated"})})},jq);function Nst(e,t){return as(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function LH(e,t){return Nst(e,t)||e.state.data!==void 0&&_F(e,t,t.refetchOnMount)}function _F(e,t,n){if(as(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&xL(e,t)}return!1}function zH(e,t,n,r){return(e!==t||as(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&xL(e,n)}function xL(e,t){return as(t.enabled,e)!==!1&&e.isStaleByTime(jp(t.staleTime,e))}function Ist(e,t){return!mF(e.getCurrentResult(),t)}var Efe=M.createContext(void 0),Lst=e=>{const t=M.useContext(Efe);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},zst=({client:e,children:t})=>(M.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),$.jsx(Efe.Provider,{value:e,children:t})),_fe=M.createContext(!1),jst=()=>M.useContext(_fe);_fe.Provider;function Bst(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ust=M.createContext(Bst()),Vst=()=>M.useContext(Ust);function Wst(e,t){return typeof e=="function"?e(...t):!!e}var Hst=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},qst=e=>{M.useEffect(()=>{e.clearReset()},[e])},Gst=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Wst(n,[e.error,r]),Yst=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Xst=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Kst=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Qst(e,t,n){var u,c,f,d;const r=Lst(),i=jst(),o=Vst(),s=r.defaultQueryOptions(e);(c=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||c.call(u,s),s._optimisticResults=i?"isRestoring":"optimistic",Yst(s),Hst(s,o),qst(o);const[a]=M.useState(()=>new t(r,s)),l=a.getOptimisticResult(s);if(M.useSyncExternalStore(M.useCallback(h=>{const p=i?()=>{}:a.subscribe(Xn.batchCalls(h));return a.updateResult(),p},[a,i]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),M.useEffect(()=>{a.setOptions(s,{listeners:!1})},[s,a]),Xst(s,l))throw Kst(s,a,o);if(Gst({result:l,errorResetBoundary:o,throwOnError:s.throwOnError,query:r.getQueryCache().get(s.queryHash)}))throw l.error;return(d=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||d.call(f,s,l),s.notifyOnChangeProps?l:a.trackResult(l)}function Jst(e,t){return Qst(e,Dst)}function Zst(){const e=Fs(v=>v.searchTargetFieldNames),t=Fs(v=>v.setSearchTargetFieldNames),[n,r]=M.useState(""),[i,o]=M.useState(0),s=Mc(v=>v.data),a=Mc(v=>v.filename),l=St(v=>v.charts),u=St(v=>v.setCurrentChartIndex),c=St(v=>v.appendChart),{data:f=[],isLoading:d}=Jst({queryKey:["browseCharts",a,...e.sort()],queryFn:async()=>e.length===0||!s?[]:await Eo.call("browseCharts",{fieldNames:e})??[]}),h=Jat(n),p=e.length>=$H,g=M.useCallback(async v=>{await c(v),u(l.length-1)},[c,l.length,u]);M.useEffect(()=>o(0),[n]),M.useEffect(()=>{e.length>=$H||r("")},[e]);const m=v=>{t(b=>b.includes(v)?b.filter(x=>x!==v):[...b,v]),r("")};return{browsedCharts:f,inputDisabled:p,loading:d,fieldNameMatches:h,inputValue:n,setInputValue:r,selectedFields:e,appendBrowseField:m,appendBrowsedChart:g,suggestionCursorIndex:i,handleKeydown:v=>{["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(v.key)&&v.stopPropagation(),["ArrowDown","ArrowUp"].includes(v.key)&&h.length>0&&(v.preventDefault(),o(b=>v.key==="ArrowDown"?Math.min(b+1,h.length-1):Math.max(b-1,0))),v.key==="Enter"&&h.length>i&&m(h[i].item),v.key==="Backspace"&&n===""&&t(b=>b.slice(0,-1))}}}function eat(e){const{colorMode:t}=am(),n=Mc(u=>u.data),r=e.specs[e.specIndex],i=t==="dark"?"dark":void 0,[o,s]=jh({base:[300,300],lg:[600,600]})??[300,300],a={...r,title:e.title,width:o,mark:{..."mark"in r?r.mark:{},tooltip:{content:"data"}},height:s,background:"transparent",data:{name:_H},config:{..."config"in r?r.config:{},title:{fontSize:18,offset:16},axis:{labelFontSize:14,titleFontSize:16,titlePadding:16},autosize:{type:"fit"},legend:{direction:"horizontal",titleLimit:o,gradientLength:o,orient:"bottom",labelFontSize:14,titleFontSize:16},numberFormat:".3~s"}};return{data:{[_H]:n},chartTheme:i,spec:a}}function jH(e){if(!e)return 0;const t=window.getComputedStyle(e),n=parseFloat(t.gap);return e.clientWidth+n}function tat(){const e=St(s=>s.charts),t=St(s=>s.currentChartIndex),n=St(s=>s.appendNextChart),r=St(s=>s.setCurrentChartIndex),i=St(s=>s.setCurrentChartPreferred),o=M.useRef(null);return M.useEffect(()=>{const s=o.current;if(!s)return;const a=Zit(()=>{const l=s.scrollLeft,u=jH(s),c=Math.round(l/u)-1;r(c),c===e.length-1&&n()},ost);return s.addEventListener("scroll",a),()=>s.removeEventListener("scroll",a)},[n,e.length,r]),M.useEffect(()=>{const s=o.current;if(!s)return;const a=jH(s);s.scrollTo({left:(t+1)*a,behavior:"smooth"})},[t]),M.useEffect(()=>{const s=a=>{if(a.key==="ArrowLeft"&&(a.preventDefault(),r(t-1)),a.key==="ArrowRight"&&(a.preventDefault(),r(t+1)),["ArrowUp","ArrowDown"].includes(a.key)){a.preventDefault();const l=e[t].preferred;i(!l),l||r(t+1)}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[t,r,e,i]),{charts:e,currentChartIndex:t,ref:o}}function nat(){const e=St(h=>h.charts),t=St(h=>h.fields),n=St(h=>h.setCurrentChartIndex),r=St(h=>h.setCurrentChartPreferred),i=St(h=>h.renewCurrentChart),o=St(h=>h.currentChartIndex),s=o!==-1&&e[o].preferred,a=o!==-1;return{sessionInitialized:t.length>0,chartDisplaying:a,currentChartPreferred:s,handleRenewChart:i,handleNextChart:()=>n(o+1),handlePrevChart:()=>n(o-1),handlePreferChart:()=>{r(!s),s||n(o+1)}}}function $F(e,t,n){var r,i,o,s,a;t==null&&(t=100);function l(){var c=Date.now()-s;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(a=e.apply(o,i),o=i=null))}var u=function(){o=this,i=arguments,s=Date.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(a=e.apply(o,i),o=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}$F.debounce=$F;var rat=$F;const BH=Da(rat);function a5(e){let{debounce:t,scroll:n,polyfill:r,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1};const o=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=M.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=M.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),u=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,f=M.useRef(!1);M.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,h,p]=M.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:b,top:x,width:w,height:k,bottom:S,right:C,x:E,y:A}=l.current.element.getBoundingClientRect(),T={left:b,top:x,width:w,height:k,bottom:S,right:C,x:E,y:A};l.current.element instanceof HTMLElement&&i&&(T.height=l.current.element.offsetHeight,T.width=l.current.element.offsetWidth),Object.freeze(T),f.current&&!aat(l.current.lastBounds,T)&&a(l.current.lastBounds=T)};return[v,c?BH(v,c):v,u?BH(v,u):v]},[a,i,u,c]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function m(){l.current.element&&(l.current.resizeObserver=new o(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",p,{capture:!0,passive:!0})))}const y=v=>{!v||v===l.current.element||(g(),l.current.element=v,l.current.scrollContainers=$fe(v),m())};return oat(p,!!n),iat(h),M.useEffect(()=>{g(),m()},[n,p,h]),M.useEffect(()=>g,[]),[y,s,d]}function iat(e){M.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function oat(e,t){M.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function $fe(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&t.push(e),[...t,...$fe(e.parentElement)]}const sat=["x","y","top","bottom","left","right","width","height"],aat=(e,t)=>sat.every(n=>e[n]===t[n]);function lat(){const e=Fs(p=>p.drawerExpanded),t=Fs(p=>p.setDrawerExpanded),n=K_e(),[r,i]=a5(),[o,s]=a5(),[a,l]=a5(),[u,c]=M.useState(!1),f=M.useMemo(()=>({expanded:{top:`calc(100dvh - ${l.height+s.height+i.height}px)`},collapsed:{top:`calc(100dvh - ${l.height+s.height+16}px)`},loadExpanded:{top:`calc(100dvh - ${l.height+s.height+i.height-200}px)`}}),[l,i,s]);return{animate:u?e?"expanded":"collapsed":"loadExpanded",dragControls:n,handleDragEnd:(p,g)=>{u||c(!0),t(g.offset.y>CH?!1:g.offset.y<-CH?!0:e)},bodyRef:r,handleRef:o,navigatorRef:a,navigatorBounds:l,variants:f}}function Afe(){const e=Mc(u=>u.writingFile),t=Mc(u=>u.writeFile),n=St(u=>u.loadingSession),r=St(u=>u.loadSession),i=Fs(u=>u.setDrawerExpanded),o=St(u=>u.resetSession),s=St(u=>u.filename),a=Fs(u=>u.setTabByName);return{loading:e||n,initializeSession:async u=>{const c=u instanceof File?u.name:tfe(u);c&&(c!==s&&o(),await t(u),await r(c),i(!1),a("fields"))}}}function uat(){const{loading:e,initializeSession:t}=Afe(),[n,r]=M.useState(null);return{loading:e,selectedDemo:n,handleSubmit:()=>{n!=null&&n.href&&t(n.href)},handleDemoSelect:s=>{r(s)}}}function Hl(e){return Array.isArray?Array.isArray(e):Mfe(e)==="[object Array]"}const cat=1/0;function fat(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-cat?"-0":t}function dat(e){return e==null?"":fat(e)}function pa(e){return typeof e=="string"}function Tfe(e){return typeof e=="number"}function hat(e){return e===!0||e===!1||pat(e)&&Mfe(e)=="[object Boolean]"}function Pfe(e){return typeof e=="object"}function pat(e){return Pfe(e)&&e!==null}function Di(e){return e!=null}function l5(e){return!e.trim().length}function Mfe(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const gat="Incorrect 'index' type",mat=e=>`Invalid value for key ${e}`,yat=e=>`Pattern length exceeds max of ${e}.`,vat=e=>`Missing ${e} property in key`,bat=e=>`Property 'weight' in key '${e}' must be a positive integer`,UH=Object.prototype.hasOwnProperty;class xat{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=Ffe(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ffe(e){let t=null,n=null,r=null,i=1,o=null;if(pa(e)||Hl(e))r=e,t=VH(e),n=AF(e);else{if(!UH.call(e,"name"))throw new Error(vat("name"));const s=e.name;if(r=s,UH.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(bat(s));t=VH(s),n=AF(s),o=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:o}}function VH(e){return Hl(e)?e:e.split(".")}function AF(e){return Hl(e)?e.join("."):e}function wat(e,t){let n=[],r=!1;const i=(o,s,a)=>{if(Di(o))if(!s[a])n.push(o);else{let l=s[a];const u=o[l];if(!Di(u))return;if(a===s.length-1&&(pa(u)||Tfe(u)||hat(u)))n.push(dat(u));else if(Hl(u)){r=!0;for(let c=0,f=u.length;c<f;c+=1)i(u[c],s,a+1)}else s.length&&i(u,s,a+1)}};return i(e,pa(t)?t.split("."):t,0),r?n:n[0]}const Sat={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},kat={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Cat={location:0,threshold:.6,distance:100},Eat={useExtendedSearch:!1,getFn:wat,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Re={...kat,...Sat,...Cat,...Eat};const _at=/[^ ]+/g;function $at(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const o=i.match(_at).length;if(n.has(o))return n.get(o);const s=1/Math.pow(o,.5*e),a=parseFloat(Math.round(s*r)/r);return n.set(o,a),a},clear(){n.clear()}}}class wL{constructor({getFn:t=Re.getFn,fieldNormWeight:n=Re.fieldNormWeight}={}){this.norm=$at(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,pa(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();pa(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Di(t)||l5(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let s=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Di(s)){if(Hl(s)){let a=[];const l=[{nestedArrIndex:-1,value:s}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(Di(c))if(pa(c)&&!l5(c)){let f={v:c,i:u,n:this.norm.get(c)};a.push(f)}else Hl(c)&&c.forEach((f,d)=>{l.push({nestedArrIndex:d,value:f})})}r.$[o]=a}else if(pa(s)&&!l5(s)){let a={v:s,n:this.norm.get(s)};r.$[o]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Rfe(e,t,{getFn:n=Re.getFn,fieldNormWeight:r=Re.fieldNormWeight}={}){const i=new wL({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(Ffe)),i.setSources(t),i.create(),i}function Aat(e,{getFn:t=Re.getFn,fieldNormWeight:n=Re.fieldNormWeight}={}){const{keys:r,records:i}=e,o=new wL({getFn:t,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function sw(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Re.distance,ignoreLocation:o=Re.ignoreLocation}={}){const s=t/e.length;if(o)return s;const a=Math.abs(r-n);return i?s+a/i:a?1:s}function Tat(e=[],t=Re.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=e.length;o<s;o+=1){let a=e[o];a&&r===-1?r=o:!a&&r!==-1&&(i=o-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}const Pf=32;function Pat(e,t,n,{location:r=Re.location,distance:i=Re.distance,threshold:o=Re.threshold,findAllMatches:s=Re.findAllMatches,minMatchCharLength:a=Re.minMatchCharLength,includeMatches:l=Re.includeMatches,ignoreLocation:u=Re.ignoreLocation}={}){if(t.length>Pf)throw new Error(yat(Pf));const c=t.length,f=e.length,d=Math.max(0,Math.min(r,f));let h=o,p=d;const g=a>1||l,m=g?Array(f):[];let y;for(;(y=e.indexOf(t,p))>-1;){let S=sw(t,{currentLocation:y,expectedLocation:d,distance:i,ignoreLocation:u});if(h=Math.min(S,h),p=y+c,g){let C=0;for(;C<c;)m[y+C]=1,C+=1}}p=-1;let v=[],b=1,x=c+f;const w=1<<c-1;for(let S=0;S<c;S+=1){let C=0,E=x;for(;C<E;)sw(t,{errors:S,currentLocation:d+E,expectedLocation:d,distance:i,ignoreLocation:u})<=h?C=E:x=E,E=Math.floor((x-C)/2+C);x=E;let A=Math.max(1,d-E+1),T=s?f:Math.min(d+E,f)+c,I=Array(T+2);I[T+1]=(1<<S)-1;for(let R=T;R>=A;R-=1){let _=R-1,P=n[e.charAt(_)];if(g&&(m[_]=+!!P),I[R]=(I[R+1]<<1|1)&P,S&&(I[R]|=(v[R+1]|v[R])<<1|1|v[R+1]),I[R]&w&&(b=sw(t,{errors:S,currentLocation:_,expectedLocation:d,distance:i,ignoreLocation:u}),b<=h)){if(h=b,p=_,p<=d)break;A=Math.max(1,2*d-p)}}if(sw(t,{errors:S+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:u})>h)break;v=I}const k={isMatch:p>=0,score:Math.max(.001,b)};if(g){const S=Tat(m,a);S.length?l&&(k.indices=S):k.isMatch=!1}return k}function Mat(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class Ofe{constructor(t,{location:n=Re.location,threshold:r=Re.threshold,distance:i=Re.distance,includeMatches:o=Re.includeMatches,findAllMatches:s=Re.findAllMatches,minMatchCharLength:a=Re.minMatchCharLength,isCaseSensitive:l=Re.isCaseSensitive,ignoreLocation:u=Re.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(d,h)=>{this.chunks.push({pattern:d,alphabet:Mat(d),startIndex:h})},f=this.pattern.length;if(f>Pf){let d=0;const h=f%Pf,p=f-h;for(;d<p;)c(this.pattern.substr(d,Pf),d),d+=Pf;if(h){const g=f-Pf;c(this.pattern.substr(g),g)}}else c(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,t.length-1]]),p}const{location:i,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],f=0,d=!1;this.chunks.forEach(({pattern:p,alphabet:g,startIndex:m})=>{const{isMatch:y,score:v,indices:b}=Pat(t,p,g,{location:i+m,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});y&&(d=!0),f+=v,y&&b&&(c=[...c,...b])});let h={isMatch:d,score:d?f/this.chunks.length:1};return d&&r&&(h.indices=c),h}}class Kc{constructor(t){this.pattern=t}static isMultiMatch(t){return WH(t,this.multiRegex)}static isSingleMatch(t){return WH(t,this.singleRegex)}search(){}}function WH(e,t){const n=e.match(t);return n?n[1]:null}class Fat extends Kc{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Rat extends Kc{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Oat extends Kc{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Dat extends Kc{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Nat extends Kc{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Iat extends Kc{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Dfe extends Kc{constructor(t,{location:n=Re.location,threshold:r=Re.threshold,distance:i=Re.distance,includeMatches:o=Re.includeMatches,findAllMatches:s=Re.findAllMatches,minMatchCharLength:a=Re.minMatchCharLength,isCaseSensitive:l=Re.isCaseSensitive,ignoreLocation:u=Re.ignoreLocation}={}){super(t),this._bitapSearch=new Ofe(t,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Nfe extends Kc{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],o=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}}const TF=[Fat,Nfe,Oat,Dat,Iat,Nat,Rat,Dfe],HH=TF.length,Lat=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,zat="|";function jat(e,t={}){return e.split(zat).map(n=>{let r=n.trim().split(Lat).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=r.length;o<s;o+=1){const a=r[o];let l=!1,u=-1;for(;!l&&++u<HH;){const c=TF[u];let f=c.isMultiMatch(a);f&&(i.push(new c(f,t)),l=!0)}if(!l)for(u=-1;++u<HH;){const c=TF[u];let f=c.isSingleMatch(a);if(f){i.push(new c(f,t));break}}}return i})}const Bat=new Set([Dfe.type,Nfe.type]);class Uat{constructor(t,{isCaseSensitive:n=Re.isCaseSensitive,includeMatches:r=Re.includeMatches,minMatchCharLength:i=Re.minMatchCharLength,ignoreLocation:o=Re.ignoreLocation,findAllMatches:s=Re.findAllMatches,location:a=Re.location,threshold:l=Re.threshold,distance:u=Re.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:s,ignoreLocation:o,location:a,threshold:l,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=jat(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;t=i?t:t.toLowerCase();let o=0,s=[],a=0;for(let l=0,u=n.length;l<u;l+=1){const c=n[l];s.length=0,o=0;for(let f=0,d=c.length;f<d;f+=1){const h=c[f],{isMatch:p,indices:g,score:m}=h.search(t);if(p){if(o+=1,a+=m,r){const y=h.constructor.type;Bat.has(y)?s=[...s,...g]:s.push(g)}}else{a=0,o=0,s.length=0;break}}if(o){let f={isMatch:!0,score:a/o};return r&&(f.indices=s),f}}return{isMatch:!1,score:1}}}const PF=[];function Vat(...e){PF.push(...e)}function MF(e,t){for(let n=0,r=PF.length;n<r;n+=1){let i=PF[n];if(i.condition(e,t))return new i(e,t)}return new Ofe(e,t)}const Wk={AND:"$and",OR:"$or"},FF={PATH:"$path",PATTERN:"$val"},RF=e=>!!(e[Wk.AND]||e[Wk.OR]),Wat=e=>!!e[FF.PATH],Hat=e=>!Hl(e)&&Pfe(e)&&!RF(e),qH=e=>({[Wk.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Ife(e,t,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const s=Wat(i);if(!s&&o.length>1&&!RF(i))return r(qH(i));if(Hat(i)){const l=s?i[FF.PATH]:o[0],u=s?i[FF.PATTERN]:i[l];if(!pa(u))throw new Error(mat(l));const c={keyId:AF(l),pattern:u};return n&&(c.searcher=MF(u,t)),c}let a={children:[],operator:o[0]};return o.forEach(l=>{const u=i[l];Hl(u)&&u.forEach(c=>{a.children.push(r(c))})}),a};return RF(e)||(e=qH(e)),r(e)}function qat(e,{ignoreFieldNorm:t=Re.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:s})=>{const a=i?i.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(t?1:o))}),n.score=r})}function Gat(e,t){const n=e.matches;t.matches=[],Di(n)&&n.forEach(r=>{if(!Di(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let s={indices:i,value:o};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),t.matches.push(s)})}function Yat(e,t){t.score=e.score}function Xat(e,t,{includeMatches:n=Re.includeMatches,includeScore:r=Re.includeScore}={}){const i=[];return n&&i.push(Gat),r&&i.push(Yat),e.map(o=>{const{idx:s}=o,a={item:t[s],refIndex:s};return i.length&&i.forEach(l=>{l(o,a)}),a})}class Dm{constructor(t,n={},r){this.options={...Re,...n},this.options.useExtendedSearch,this._keyStore=new xat(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof wL))throw new Error(gat);this._myIndex=n||Rfe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Di(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];t(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:a}=this.options;let l=pa(t)?pa(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return qat(l,{ignoreFieldNorm:a}),o&&l.sort(s),Tfe(n)&&n>-1&&(l=l.slice(0,n)),Xat(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=MF(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:s,n:a})=>{if(!Di(o))return;const{isMatch:l,score:u,indices:c}=n.searchIn(o);l&&i.push({item:o,idx:s,matches:[{score:u,value:o,norm:a,indices:c}]})}),i}_searchLogical(t){const n=Ife(t,this.options),r=(a,l,u)=>{if(!a.children){const{keyId:f,searcher:d}=a,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:d});return h&&h.length?[{idx:u,item:l,matches:h}]:[]}const c=[];for(let f=0,d=a.children.length;f<d;f+=1){const h=a.children[f],p=r(h,l,u);if(p.length)c.push(...p);else if(a.operator===Wk.AND)return[]}return c},i=this._myIndex.records,o={},s=[];return i.forEach(({$:a,i:l})=>{if(Di(a)){let u=r(n,a,l);u.length&&(o[l]||(o[l]={idx:l,item:a,matches:[]},s.push(o[l])),u.forEach(({matches:c})=>{o[l].matches.push(...c)}))}}),s}_searchObjectList(t){const n=MF(t,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:a})=>{if(!Di(s))return;let l=[];r.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:s[c],searcher:n}))}),l.length&&o.push({idx:a,item:s,matches:l})}),o}_findMatches({key:t,value:n,searcher:r}){if(!Di(n))return[];let i=[];if(Hl(n))n.forEach(({v:o,i:s,n:a})=>{if(!Di(o))return;const{isMatch:l,score:u,indices:c}=r.searchIn(o);l&&i.push({score:u,key:t,value:o,idx:s,norm:a,indices:c})});else{const{v:o,n:s}=n,{isMatch:a,score:l,indices:u}=r.searchIn(o);a&&i.push({score:l,key:t,value:o,norm:s,indices:u})}return i}}Dm.version="7.0.0";Dm.createIndex=Rfe;Dm.parseIndex=Aat;Dm.config=Re;Dm.parseQuery=Ife;Vat(Uat);const Kat={includeScore:!1,threshold:.3},Qat=e=>new Dm(e,Kat);function Jat(e){const t=St(i=>i.fields),n=M.useMemo(()=>t.map(i=>i.name),[t]);return Qat(n).search(e)}function Zat(){var c,f;const{loading:e,initializeSession:t}=Afe(),[n,r]=M.useState(""),i=M.useRef(null),o=d=>{var p,g;const h=((g=d.target.files)==null?void 0:g[((p=d.target.files)==null?void 0:p.length)-1].name)??"";r(h)},s=d=>{r(d.target.value),i.current&&(i.current.value="",i.current.files=null)},a=()=>{i.current&&i.current.click()},l=()=>{var d,h;if((h=(d=i.current)==null?void 0:d.files)!=null&&h.length){const p=i.current.files[0];t(p)}else Jit(n)&&t(n)},u=!n&&!((f=(c=i.current)==null?void 0:c.files)!=null&&f.length);return{fileInputRef:i,inputDisabled:u,loadingData:e,pathInput:n,handleInputChange:s,handleSubmit:l,handleFileChange:o,handleFileButtonClick:a}}function elt(e,t){t.domain&&("nice"in e||"quantiles"in e||"padding"in e,e.domain(t.domain))}function tlt(e,t){t.range&&("padding"in e,e.range(t.range))}function nlt(e,t){"align"in e&&"align"in t&&typeof t.align<"u"&&e.align(t.align)}function rlt(e,t){"base"in e&&"base"in t&&typeof t.base<"u"&&e.base(t.base)}function ilt(e,t){"clamp"in e&&"clamp"in t&&typeof t.clamp<"u"&&e.clamp(t.clamp)}function olt(e,t){"constant"in e&&"constant"in t&&typeof t.constant<"u"&&e.constant(t.constant)}function slt(e,t){"exponent"in e&&"exponent"in t&&typeof t.exponent<"u"&&e.exponent(t.exponent)}var GH={lab:bne,hcl:wne,"hcl-long":Sne,hsl:yne,"hsl-long":vne,cubehelix:Cne,"cubehelix-long":Ene,rgb:_S};function alt(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return GH[e]}var t=e.type,n=e.gamma,r=GH[t];return typeof n>"u"?r:r.gamma(n)}function llt(e,t){if("interpolate"in t&&"interpolate"in e&&typeof t.interpolate<"u"){var n=alt(t.interpolate);e.interpolate(n)}}var ult=new Date(Date.UTC(2020,1,2,3,4,5)),clt="%Y-%m-%d %H:%M";function flt(e){var t=e.tickFormat(1,clt)(ult);return t==="2020-02-02 03:04"}var YH={day:Sa,hour:Nv,minute:Ov,month:vg,second:hs,week:Kd,year:Cs},XH={day:_l,hour:Iv,minute:Dv,month:bg,second:hs,week:Jd,year:Es};function dlt(e,t){if("nice"in t&&typeof t.nice<"u"&&"nice"in e){var n=t.nice;if(typeof n=="boolean")n&&e.nice();else if(typeof n=="number")e.nice(n);else{var r=e,i=flt(r);if(typeof n=="string")r.nice(i?XH[n]:YH[n]);else{var o=n.interval,s=n.step,a=(i?XH[o]:YH[o]).every(s);a!=null&&r.nice(a)}}}}function hlt(e,t){"padding"in e&&"padding"in t&&typeof t.padding<"u"&&e.padding(t.padding),"paddingInner"in e&&"paddingInner"in t&&typeof t.paddingInner<"u"&&e.paddingInner(t.paddingInner),"paddingOuter"in e&&"paddingOuter"in t&&typeof t.paddingOuter<"u"&&e.paddingOuter(t.paddingOuter)}function plt(e,t){if(t.reverse){var n=e.range().slice().reverse();"padding"in e,e.range(n)}}function glt(e,t){"round"in t&&typeof t.round<"u"&&(t.round&&"interpolate"in t&&typeof t.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",t):"round"in e?e.round(t.round):"interpolate"in e&&t.round&&e.interpolate(bm))}function mlt(e,t){"unknown"in e&&"unknown"in t&&typeof t.unknown<"u"&&e.unknown(t.unknown)}function ylt(e,t){if("zero"in t&&t.zero===!0){var n=e.domain(),r=n[0],i=n[1],o=i<r,s=o?[i,r]:[r,i],a=s[0],l=s[1],u=[Math.min(0,a),Math.max(0,l)];e.domain(o?u.reverse():u)}}var vlt=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],blt={domain:elt,nice:dlt,zero:ylt,interpolate:llt,round:glt,align:nlt,base:rlt,clamp:ilt,constant:olt,exponent:slt,padding:hlt,range:tlt,reverse:plt,unknown:mlt};function xlt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Set(t),i=vlt.filter(function(o){return r.has(o)});return function(s,a){return typeof a<"u"&&i.forEach(function(l){blt[l](s,a)}),s}}var wlt=xlt("domain","range","reverse","clamp","interpolate","nice","round","zero");function Slt(e){return wlt(SD(),e)}const _0={TOP:12,RIGHT:10,BOTTOM:12,LEFT:10},klt=6;function Clt({width:e,height:t,r:n}){const r=St(p=>p.charts),i=St(p=>p.currentChartIndex),{preferredColor:o}=Rs(),s=qs(Ct["gray.400"],Ct["gray.600"]),a=Math.min(e-_0.LEFT-_0.RIGHT,(klt+2*n)*r.length),l=t-_0.TOP-_0.BOTTOM,u=e/2,c=l/2+_0.TOP,f=n-Math.floor(r.length/40),d=Slt({domain:[0,r.length-1],range:[u-a/2,u+a/2]});return r.map((p,g)=>({key:`indicator-${p.key}`,cx:d(g),cy:c,r:g===i?2*f:f,fill:p.preferred?o:s,isActive:g===i}))}function Rs(){const e=jh({base:0,lg:"18px"}),t=jh({base:window.innerWidth,lg:880}),n=jh({base:"100dvh",lg:"calc(80dvh - 18px)"}),r=jh({base:!0,lg:!1}),i=qs(Ct.white,Ct["gray.900"]),o=qs(Ct.white,Ct["gray.900"]),s=qs(Ct["gray.200"],Ct["gray.700"]),a=jh({base:320,lg:560}),l=5,u="70px",c=qs(Ct["gray.100"],Ct["gray.800"]),f=qs(qu[600],qu[300]),d=qs(qu[500],qu[400]),h=qs(Ct["red.500"],Ct["red.200"]),p=qs(Ct["orange.50"],Ct["orange.800"]),g=qs(Ct["orange.100"],Ct["orange.700"]);return{accentColor:f,accentHoverColor:d,borderColor:s,preferredColor:h,buttonColor:c,cardPadding:e,cardWidth:t,cardHeight:n,cardColor:o,drawerBgColor:i,tabPanelHeight:a,tabIconSize:l,thumbnailSize:u,mobile:r,scrollbarStyle:{"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:f,borderRadius:"5px"},"&::-webkit-scrollbar-thumb:hover":{background:d}},accentSelected:p,accentSelectedHover:g}}function Lfe(){const[e,t]=M.useState(()=>Eo.getLoadingStatus()??{loading:!0,loadingPyodide:!0,loadingServer:!0});return M.useEffect(()=>{const n=r=>{t(r)};return Eo.on("loadingStatusChange",n),()=>{Eo.off("loadingStatusChange",n)}},[]),e}const Elt=(...e)=>{console!=null&&console.warn&&(dd(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},KH={},OF=(...e)=>{dd(e[0])&&KH[e[0]]||(dd(e[0])&&(KH[e[0]]=new Date),Elt(...e))},zfe=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},QH=(e,t,n)=>{e.loadNamespaces(t,zfe(e,n))},JH=(e,t,n,r)=>{dd(n)&&(n=[n]),n.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,zfe(e,r))},_lt=(e,t,n={})=>!t.languages||!t.languages.length?(OF("i18n.languages were undefined or empty",t.languages),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,i)=>{var o;if(((o=n.bindI18n)==null?void 0:o.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,e))return!1}}),dd=e=>typeof e=="string",$lt=e=>typeof e=="object"&&e!==null,Alt=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Tlt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Plt=e=>Tlt[e],Mlt=e=>e.replace(Alt,Plt);let DF={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Mlt};const Flt=(e={})=>{DF={...DF,...e}},Rlt=()=>DF;let jfe;const Olt=e=>{jfe=e},Dlt=()=>jfe,Nlt={type:"3rdParty",init(e){Flt(e.options.react),Olt(e)}},Ilt=M.createContext();class Llt{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{var r;(r=this.usedNamespaces)[n]??(r[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const zlt=(e,t)=>{const n=M.useRef();return M.useEffect(()=>{n.current=e},[e,t]),n.current},Bfe=(e,t,n,r)=>e.getFixedT(t,n,r),jlt=(e,t,n,r)=>M.useCallback(Bfe(e,t,n,r),[e,t,n,r]),Nm=(e,t={})=>{var x,w,k,S;const{i18n:n}=t,{i18n:r,defaultNS:i}=M.useContext(Ilt)||{},o=n||r||Dlt();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Llt),!o){OF("You will need to pass in an i18next instance by using initReactI18next");const C=(A,T)=>dd(T)?T:$lt(T)&&dd(T.defaultValue)?T.defaultValue:Array.isArray(A)?A[A.length-1]:A,E=[C,{},!1];return E.t=C,E.i18n={},E.ready=!1,E}(x=o.options.react)!=null&&x.wait&&OF("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...Rlt(),...o.options.react,...t},{useSuspense:a,keyPrefix:l}=s;let u=i||((w=o.options)==null?void 0:w.defaultNS);u=dd(u)?[u]:u||["translation"],(S=(k=o.reportNamespaces).addUsedNamespaces)==null||S.call(k,u);const c=(o.isInitialized||o.initializedStoreOnce)&&u.every(C=>_lt(C,o,s)),f=jlt(o,t.lng||null,s.nsMode==="fallback"?u:u[0],l),d=()=>f,h=()=>Bfe(o,t.lng||null,s.nsMode==="fallback"?u:u[0],l),[p,g]=M.useState(d);let m=u.join();t.lng&&(m=`${t.lng}${m}`);const y=zlt(m),v=M.useRef(!0);M.useEffect(()=>{const{bindI18n:C,bindI18nStore:E}=s;v.current=!0,!c&&!a&&(t.lng?JH(o,t.lng,u,()=>{v.current&&g(h)}):QH(o,u,()=>{v.current&&g(h)})),c&&y&&y!==m&&v.current&&g(h);const A=()=>{v.current&&g(h)};return C&&(o==null||o.on(C,A)),E&&(o==null||o.store.on(E,A)),()=>{v.current=!1,o&&(C==null||C.split(" ").forEach(T=>o.off(T,A))),E&&o&&E.split(" ").forEach(T=>o.store.off(T,A))}},[o,m]),M.useEffect(()=>{v.current&&c&&g(d)},[o,l,c]);const b=[p,o,c];if(b.t=p,b.i18n=o,b.ready=c,c||!c&&!a)return b;throw new Promise(C=>{t.lng?JH(o,t.lng,u,()=>C()):QH(o,u,()=>C())})};function Blt(){const{fileCache:e,writeFile:t}=Mc(),{loadSession:n,filename:r}=St(),{apiKey:i,setApiKey:o}=pfe(),{colorMode:s,toggleColorMode:a}=am(),[l,u]=M.useState(()=>Eo.getPythonType()),{t:c,i18n:f}=Nm(),d=g$e();return{python:l,handleServerButtonClick:async()=>{if(!Eo)return;const m=l==="pyodide"?"server":"pyodide";if(!Eo.setPython(m)){d({id:"server-not-available",title:c("toast.server_not_available_title"),description:c("toast.server_not_available_description"),status:"error",duration:3e3,isClosable:!0,position:"bottom",containerStyle:{margin:10}});return}u(m),e&&(await t(e),await n(r))},apiKey:i,handleApiKeyChange:m=>{o(m.target.value)},handleDownloadLogs:()=>{try{G3e()}catch(m){d({title:"Oh no!",description:JSON.stringify(m),status:"error",duration:3e3,isClosable:!0,position:"bottom",containerStyle:{margin:10}})}},colorMode:s,toggleColorMode:a,locale:f.language,setLocale:m=>f.changeLanguage(m)}}function Ufe({chart:e,onClick:t}){const{buttonColor:n,thumbnailSize:r}=Rs(),i=Mc(a=>a.data),[o,s]=M.useState(e.thumbnail);return M.useEffect(()=>{!o&&i&&(async()=>{const l=await Xit(e.specs[0],i);s(l)})()},[e.specs,i,o]),$.jsxs(RR,{as:Ht,flexDir:"column",children:[$.jsxs(Ht,{p:1,gap:4,borderRadius:"md",alignItems:"center",onClick:()=>t(e),transition:"background-color 0.2s",_hover:{cursor:"pointer",bg:n},children:[!!o&&$.jsx(zQ,{src:o,alt:`Chart thumbnail ${e.title}`,w:r,h:r}),$.jsx(Ht,{flexDir:"column",children:e.fields.map((a,l)=>$.jsx(It,{fontSize:l!==2?"md":"sm",fontWeight:l!==2?800:500,children:a.name},`${e.key}-field-name-${a.name}`))})]}),$.jsx(IR,{my:1})]},`bookmark-${e.key}`)}function Ult({...e}){const{preferredCharts:t,handleClickBookmark:n}=yst(),{t:r}=Nm();return $.jsx(lm,{display:"flex",flexDirection:"column",height:"full",...e,children:$.jsx(FR,{m:0,p:0,width:"full",overflowY:"auto",children:t.length?t.map(i=>$.jsx(Ufe,{chart:i,onClick:n},`bookmark-${i.key}`)):$.jsx(RR,{children:$.jsx(hc,{minH:400,children:r("bookmarks.empty")})})})})}function Vlt(){const{scrollbarStyle:e,buttonColor:t,borderColor:n,cardColor:r,accentSelected:i,accentSelectedHover:o,accentColor:s}=Rs(),{browsedCharts:a,inputDisabled:l,loading:u,fieldNameMatches:c,selectedFields:f,inputValue:d,setInputValue:h,appendBrowseField:p,appendBrowsedChart:g,handleKeydown:m,suggestionCursorIndex:y}=Zst(),{tabPanelHeight:v}=Rs();return $.jsxs(lm,{as:wa,w:"full",alignItems:"center",h:v,children:[$.jsxs(Z2,{w:"100%",position:"relative",children:[$.jsxs(JQ,{spacing:1,borderRadius:"md",alignItems:"flex-start",w:"100%",flexWrap:"wrap",border:"1px solid",borderBottomRadius:c.length>0?0:"md",borderColor:n,p:2,children:[f.map(b=>$.jsxs(cJ,{borderRadius:"full",colorScheme:mr,children:[$.jsx(fJ,{children:b}),$.jsx(hJ,{onClick:()=>p(b)})]},b)),$.jsx(A1,{type:"text",w:"fit-content",h:"fit-content",px:2,minW:f.length>0?0:60,placeholder:f.length>0?"":"Input field names to search...",borderColor:"transparent",value:d,onChange:b=>h(b.target.value),disabled:l,_focusVisible:{borderColor:"transparent"},_hover:{borderColor:"transparent"},onKeyDown:m})]}),c.length>0&&$.jsx(wa,{alignItems:"flex-start",borderRadius:6,overflow:"hidden",gap:0,w:"full",borderTopRadius:0,borderColor:n,borderWidth:1,position:"absolute",zIndex:1,children:c.map((b,x)=>$.jsx(Z2,{onClick:()=>p(b.item),bgColor:(()=>{const w=f.includes(b.item),k=x===y;return w?k?o:i:k?t:r})(),w:"100%",pl:2,cursor:"pointer",borderTopWidth:1,borderTopColor:n,children:b.item},b.item))})]}),u?$.jsx(zC,{size:"md",my:8,color:s}):$.jsx(FR,{m:0,p:0,width:"full",overflowY:"scroll",sx:e,flex:1,children:a.map(b=>$.jsx(Ufe,{chart:b,onClick:()=>{g(b)}},`${b.key}-${b.timestamp}`))})]})}const ZH={};function NF(e,t){e===void 0&&(e=ZH),t===void 0&&(t=ZH);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}function Wlt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Hlt(e,t,n){n&&(Wlt(n)?n(e.data(t)):e.change(t,Zo.changeset().remove(()=>!0).insert(n)))}function qlt(e,t){Object.keys(t).forEach(n=>{Hlt(e,n,t[n])})}function Vfe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Wfe=()=>{};function u5(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}var Glt=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const Ylt=Da(Glt);function Xlt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Vfe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!Ylt(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function eq(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function c5(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function py(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Hfe extends Vi.PureComponent{constructor(){super(...arguments),py(this,"containerRef",Vi.createRef()),py(this,"resultPromise",void 0),py(this,"handleError",t=>{const{onError:n=Wfe}=this.props;n(t,this.containerRef.current),console.warn(t)}),py(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Vfe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Xlt(c5(this.props),c5(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!NF(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&eq(a,o),i&&u5(a,i)),a.run()})}else NF(i,o)||this.modifyView(s=>{o&&eq(s,o),i&&u5(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=c5(this.props);this.resultPromise=Zce(this.containerRef.current,a,s).then(l=>{if(l){const{view:u}=l;u5(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Vi.createElement("div",{ref:this.containerRef,className:t,style:n})}}py(Hfe,"propTypes",{className:d7.string,onError:d7.func});function IF(){return IF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IF.apply(this,arguments)}function LF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Klt={};class qfe extends Vi.PureComponent{constructor(){super(...arguments),LF(this,"vegaEmbed",Vi.createRef()),LF(this,"handleNewView",t=>{this.update();const{onNewView:n=Wfe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){NF(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{qlt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Vi.createElement(Hfe,IF({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}LF(qfe,"defaultProps",{data:Klt});function zF(){return zF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zF.apply(this,arguments)}function Qlt(e){return Vi.createElement(qfe,zF({},e,{mode:"vega-lite"}))}function Jlt({chart:e,...t}){const{data:n,chartTheme:r,spec:i}=eat(e);return $.jsxs(hc,{maxW:"800px",scrollSnapAlign:"start",...t,children:[$.jsx(Qlt,{spec:i,data:n,theme:r,actions:!0,logLevel:YC,tooltip:new qce().call}),$.jsx(Ht,{minH:{base:"300px",lg:"0px"}})]})}const Zlt=M.memo(Jlt);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */var eut={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const cn=(e,t)=>{const n=M.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=1.5,className:s="",children:a,...l},u)=>{const c={ref:u,...eut,width:i,height:i,strokeWidth:o,color:r,className:s,...l};return M.createElement("svg",c,(t==null?void 0:t.map(([f,d])=>M.createElement(f,{key:d.id,...d})))??[],...Array.isArray(a)?a:[a])});return n.displayName=`${e}Icon`,n};/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const tut=cn("ArrowDown01Icon",[["path",{d:"M18 9.00005C18 9.00005 13.5811 15 12 15C10.4188 15 6 9 6 9",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const nut=cn("ArrowLeft01Icon",[["path",{d:"M15 6C15 6 9.00001 10.4189 9 12C8.99999 13.5812 15 18 15 18",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const rut=cn("ArrowRight01Icon",[["path",{d:"M9.00005 6C9.00005 6 15 10.4189 15 12C15 13.5812 9 18 9 18",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const iut=cn("Calendar03Icon",[["path",{d:"M18 2V4M6 2V4",stroke:"currentColor",key:"k0"}],["path",{d:"M11.9955 13H12.0045M11.9955 17H12.0045M15.991 13H16M8 13H8.00897M8 17H8.00897",stroke:"currentColor",key:"k1"}],["path",{d:"M3.5 8H20.5",stroke:"currentColor",key:"k2"}],["path",{d:"M2.5 12.2432C2.5 7.88594 2.5 5.70728 3.75212 4.35364C5.00424 3 7.01949 3 11.05 3H12.95C16.9805 3 18.9958 3 20.2479 4.35364C21.5 5.70728 21.5 7.88594 21.5 12.2432V12.7568C21.5 17.1141 21.5 19.2927 20.2479 20.6464C18.9958 22 16.9805 22 12.95 22H11.05C7.01949 22 5.00424 22 3.75212 20.6464C2.5 19.2927 2.5 17.1141 2.5 12.7568V12.2432Z",stroke:"currentColor",key:"k3"}],["path",{d:"M3 8H21",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const out=cn("CloudIcon",[["path",{d:"M17.4776 10.0001C17.485 10 17.4925 10 17.5 10C19.9853 10 22 12.0147 22 14.5C22 16.9853 19.9853 19 17.5 19H7C4.23858 19 2 16.7614 2 14C2 11.4003 3.98398 9.26407 6.52042 9.0227M17.4776 10.0001C17.4924 9.83536 17.5 9.66856 17.5 9.5C17.5 6.46243 15.0376 4 12 4C9.12324 4 6.76233 6.20862 6.52042 9.0227M17.4776 10.0001C17.3753 11.1345 16.9286 12.1696 16.2428 13M6.52042 9.0227C6.67826 9.00768 6.83823 9 7 9C8.12582 9 9.16474 9.37209 10.0005 10",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const sut=cn("FileAttachmentIcon",[["path",{d:"M4 12.0004L4 14.5446C4 17.7896 4 19.4121 4.88607 20.5111C5.06508 20.7331 5.26731 20.9354 5.48933 21.1144C6.58831 22.0004 8.21082 22.0004 11.4558 22.0004C12.1614 22.0004 12.5141 22.0004 12.8372 21.8864C12.9044 21.8627 12.9702 21.8354 13.0345 21.8047C13.3436 21.6569 13.593 21.4074 14.0919 20.9085L18.8284 16.172C19.4065 15.5939 19.6955 15.3049 19.8478 14.9374C20 14.5698 20 14.1611 20 13.3436V10.0004C20 6.22919 20 4.34358 18.8284 3.172C17.7693 2.11284 16.1265 2.01122 13.0345 2.00146M13 21.5004V21.0004C13 18.172 13 16.7578 13.8787 15.8791C14.7574 15.0004 16.1716 15.0004 19 15.0004H19.5",stroke:"currentColor",key:"k0"}],["path",{d:"M4 8.23028V5.46105C4 3.54929 5.567 1.99951 7.5 1.99951C9.433 1.99951 11 3.54929 11 5.46105V9.26874C11 10.2246 10.2165 10.9995 9.25 10.9995C8.2835 10.9995 7.5 10.2246 7.5 9.26874V5.46105",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const aut=cn("GithubIcon",[["path",{d:"M10 20.5675C6.57143 21.7248 3.71429 20.5675 2 17",stroke:"currentColor",key:"k0"}],["path",{d:"M10 22V18.7579C10 18.1596 10.1839 17.6396 10.4804 17.1699C10.6838 16.8476 10.5445 16.3904 10.1771 16.2894C7.13394 15.4528 5 14.1077 5 9.64606C5 8.48611 5.38005 7.39556 6.04811 6.4464C6.21437 6.21018 6.29749 6.09208 6.31748 5.9851C6.33746 5.87813 6.30272 5.73852 6.23322 5.45932C5.95038 4.32292 5.96871 3.11619 6.39322 2.02823C6.39322 2.02823 7.27042 1.74242 9.26698 2.98969C9.72282 3.27447 9.95075 3.41686 10.1515 3.44871C10.3522 3.48056 10.6206 3.41384 11.1573 3.28041C11.8913 3.09795 12.6476 3 13.5 3C14.3524 3 15.1087 3.09795 15.8427 3.28041C16.3794 3.41384 16.6478 3.48056 16.8485 3.44871C17.0493 3.41686 17.2772 3.27447 17.733 2.98969C19.7296 1.74242 20.6068 2.02823 20.6068 2.02823C21.0313 3.11619 21.0496 4.32292 20.7668 5.45932C20.6973 5.73852 20.6625 5.87813 20.6825 5.9851C20.7025 6.09207 20.7856 6.21019 20.9519 6.4464C21.6199 7.39556 22 8.48611 22 9.64606C22 14.1077 19.8661 15.4528 16.8229 16.2894C16.4555 16.3904 16.3162 16.8476 16.5196 17.1699C16.8161 17.6396 17 18.1596 17 18.7579V22",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const lut=cn("GridIcon",[["path",{d:"M7 2V22",stroke:"currentColor",key:"k0"}],["path",{d:"M17 2V22",stroke:"currentColor",key:"k1"}],["path",{d:"M22 7L2 7",stroke:"currentColor",key:"k2"}],["path",{d:"M22 17L2 17",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const uut=cn("HeartAddIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 17H22M18 13L18 21",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Gfe=cn("HeartCheckIcon",[["path",{d:"M12 21C10.6588 21 9.88572 20.4278 8.33953 19.2834C0.221721 13.2749 1.01807 6.15294 4.53744 3.99415C7.21909 2.34923 9.55962 3.01211 10.9656 4.06801C11.5422 4.50096 11.8304 4.71743 12 4.71743C12.1696 4.71743 12.4578 4.50096 13.0344 4.06801C14.4404 3.01211 16.7809 2.34923 19.4626 3.99415C21.1812 5.04838 22.2505 7.28623 21.9494 10",stroke:"currentColor",key:"k0"}],["path",{d:"M14 18C14 18 15 18 16 20C16 20 19.1765 15 22 14",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const cut=cn("LabelImportantIcon",[["path",{d:"M13 4H6.23456C3.79424 4 2.57407 4 2.14438 4.76649C2.13129 4.78984 2.11883 4.81353 2.10701 4.83754C1.71893 5.62592 2.41032 6.63129 3.7931 8.64204C4.89612 10.246 5.44763 11.048 5.4611 11.9555C5.46154 11.9852 5.46154 12.0148 5.4611 12.0445C5.44763 12.952 4.89612 13.754 3.7931 15.358C2.41032 17.3687 1.71893 18.3741 2.10701 19.1625C2.11883 19.1865 2.13129 19.2102 2.14438 19.2335C2.57407 20 3.79424 20 6.23456 20H13C14.9628 20 15.9443 20 16.7889 19.5777C17.6334 19.1554 18.2223 18.3703 19.4 16.8C21.1333 14.4889 22 13.3333 22 12C22 10.6667 21.1333 9.51111 19.4 7.2C18.2223 5.62972 17.6334 4.84458 16.7889 4.42229C15.9443 4 14.9628 4 13 4Z",stroke:"currentColor",key:"k0"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const fut=cn("Moon01Icon",[["path",{d:"M21.0985 7.84477C20.458 8.55417 19.5311 9 18.5 9C16.567 9 15 7.433 15 5.5C15 4.46895 15.4458 3.54203 16.1552 2.90149M21.0985 7.84477C21.6774 9.11025 22 10.5174 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C13.4826 2 14.8898 2.32262 16.1552 2.90149M21.0985 7.84477C20.0998 5.66155 18.3384 3.90018 16.1552 2.90149",stroke:"currentColor",key:"k0"}],["path",{d:"M10 8H10.0064",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14H7.00635",stroke:"currentColor",key:"k2"}],["path",{d:"M16 16C16 17.1046 15.1046 18 14 18C12.8954 18 12 17.1046 12 16C12 14.8954 12.8954 14 14 14C15.1046 14 16 14.8954 16 16Z",stroke:"currentColor",key:"k3"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const dut=cn("ProfileIcon",[["path",{d:"M2.5 12C2.5 7.52166 2.5 5.28249 3.89124 3.89124C5.28249 2.5 7.52166 2.5 12 2.5C16.4783 2.5 18.7175 2.5 20.1088 3.89124C21.5 5.28249 21.5 7.52166 21.5 12C21.5 16.4783 21.5 18.7175 20.1088 20.1088C18.7175 21.5 16.4783 21.5 12 21.5C7.52166 21.5 5.28249 21.5 3.89124 20.1088C2.5 18.7175 2.5 16.4783 2.5 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 7L17 7",stroke:"currentColor",key:"k1"}],["path",{d:"M7 7L8 7",stroke:"currentColor",key:"k2"}],["path",{d:"M7 12L8 12",stroke:"currentColor",key:"k3"}],["path",{d:"M7 17L8 17",stroke:"currentColor",key:"k4"}],["path",{d:"M11 12L17 12",stroke:"currentColor",key:"k5"}],["path",{d:"M11 17L17 17",stroke:"currentColor",key:"k6"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Yfe=cn("Search01Icon",[["path",{d:"M17.5 17.5L22 22",stroke:"currentColor",key:"k0"}],["path",{d:"M20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C15.9706 20 20 15.9706 20 11Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const hut=cn("Settings01Icon",[["path",{d:"M21.3175 7.14139L20.8239 6.28479C20.4506 5.63696 20.264 5.31305 19.9464 5.18388C19.6288 5.05472 19.2696 5.15664 18.5513 5.36048L17.3311 5.70418C16.8725 5.80994 16.3913 5.74994 15.9726 5.53479L15.6357 5.34042C15.2766 5.11043 15.0004 4.77133 14.8475 4.37274L14.5136 3.37536C14.294 2.71534 14.1842 2.38533 13.9228 2.19657C13.6615 2.00781 13.3143 2.00781 12.6199 2.00781H11.5051C10.8108 2.00781 10.4636 2.00781 10.2022 2.19657C9.94085 2.38533 9.83106 2.71534 9.61149 3.37536L9.27753 4.37274C9.12465 4.77133 8.84845 5.11043 8.48937 5.34042L8.15249 5.53479C7.73374 5.74994 7.25259 5.80994 6.79398 5.70418L5.57375 5.36048C4.85541 5.15664 4.49625 5.05472 4.17867 5.18388C3.86109 5.31305 3.67445 5.63696 3.30115 6.28479L2.80757 7.14139C2.45766 7.74864 2.2827 8.05227 2.31666 8.37549C2.35061 8.69871 2.58483 8.95918 3.05326 9.48012L4.0843 10.6328C4.3363 10.9518 4.51521 11.5078 4.51521 12.0077C4.51521 12.5078 4.33636 13.0636 4.08433 13.3827L3.05326 14.5354C2.58483 15.0564 2.35062 15.3168 2.31666 15.6401C2.2827 15.9633 2.45766 16.2669 2.80757 16.8741L3.30114 17.7307C3.67443 18.3785 3.86109 18.7025 4.17867 18.8316C4.49625 18.9608 4.85542 18.8589 5.57377 18.655L6.79394 18.3113C7.25263 18.2055 7.73387 18.2656 8.15267 18.4808L8.4895 18.6752C8.84851 18.9052 9.12464 19.2442 9.2775 19.6428L9.61149 20.6403C9.83106 21.3003 9.94085 21.6303 10.2022 21.8191C10.4636 22.0078 10.8108 22.0078 11.5051 22.0078H12.6199C13.3143 22.0078 13.6615 22.0078 13.9228 21.8191C14.1842 21.6303 14.294 21.3003 14.5136 20.6403L14.8476 19.6428C15.0004 19.2442 15.2765 18.9052 15.6356 18.6752L15.9724 18.4808C16.3912 18.2656 16.8724 18.2055 17.3311 18.3113L18.5513 18.655C19.2696 18.8589 19.6288 18.9608 19.9464 18.8316C20.264 18.7025 20.4506 18.3785 20.8239 17.7307L21.3175 16.8741C21.6674 16.2669 21.8423 15.9633 21.8084 15.6401C21.7744 15.3168 21.5402 15.0564 21.0718 14.5354L20.0407 13.3827C19.7887 13.0636 19.6098 12.5078 19.6098 12.0077C19.6098 11.5078 19.7888 10.9518 20.0407 10.6328L21.0718 9.48012C21.5402 8.95918 21.7744 8.69871 21.8084 8.37549C21.8423 8.05227 21.6674 7.74864 21.3175 7.14139Z",stroke:"currentColor",key:"k0"}],["path",{d:"M15.5195 12C15.5195 13.933 13.9525 15.5 12.0195 15.5C10.0865 15.5 8.51953 13.933 8.51953 12C8.51953 10.067 10.0865 8.5 12.0195 8.5C13.9525 8.5 15.5195 10.067 15.5195 12Z",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const put=cn("SmartPhone01Icon",[["path",{d:"M5 9C5 5.70017 5 4.05025 6.02513 3.02513C7.05025 2 8.70017 2 12 2C15.2998 2 16.9497 2 17.9749 3.02513C19 4.05025 19 5.70017 19 9V15C19 18.2998 19 19.9497 17.9749 20.9749C16.9497 22 15.2998 22 12 22C8.70017 22 7.05025 22 6.02513 20.9749C5 19.9497 5 18.2998 5 15V9Z",stroke:"currentColor",key:"k0"}],["path",{d:"M11 19H13",stroke:"currentColor",key:"k1"}],["path",{d:"M9 2L9.089 2.53402C9.28188 3.69129 9.37832 4.26993 9.77519 4.62204C10.1892 4.98934 10.7761 5 12 5C13.2239 5 13.8108 4.98934 14.2248 4.62204C14.6217 4.26993 14.7181 3.69129 14.911 2.53402L15 2",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const Xfe=cn("StartUp02Icon",[["path",{d:"M7 11.2947C12.284 1.44656 18.8635 1.333 21.4928 2.50724C22.667 5.1365 22.5534 11.716 12.7053 17C12.6031 16.4129 12.0352 14.8749 10.5801 13.4199C9.12512 11.9648 7.58712 11.3969 7 11.2947Z",stroke:"currentColor",key:"k0"}],["path",{d:"M14 16.8C16.0428 17.7334 16.2609 19.4069 16.5439 21C16.5439 21 20.8223 18.0481 18.0856 14",stroke:"currentColor",key:"k1"}],["path",{d:"M7.19998 9.99987C6.26664 7.95709 4.59305 7.73899 3 7.45601C3 7.45601 5.95194 3.17753 10 5.91431",stroke:"currentColor",key:"k2"}],["path",{d:"M6.20866 13.9998C5.57677 14.6317 4.50255 16.4642 5.26082 18.739C7.53564 19.4973 9.36813 18.4231 10 17.7912",stroke:"currentColor",key:"k3"}],["path",{d:"M18.0952 7.753C18.0952 6.7328 17.2682 5.90578 16.248 5.90578C15.2278 5.90578 14.4008 6.7328 14.4008 7.753C14.4008 8.77319 15.2278 9.60022 16.248 9.60022C17.2682 9.60022 18.0952 8.77319 18.0952 7.753Z",stroke:"currentColor",key:"k4"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const gut=cn("Sun03Icon",[["path",{d:"M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z",stroke:"currentColor",key:"k0"}],["path",{d:"M12 2V3.5M12 20.5V22M19.0708 19.0713L18.0101 18.0106M5.98926 5.98926L4.9286 4.9286M22 12H20.5M3.5 12H2M19.0713 4.92871L18.0106 5.98937M5.98975 18.0107L4.92909 19.0714",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const mut=cn("SwipeLeft02Icon",[["path",{d:"M15 4.50195H21M15 4.50195C15 3.80172 16.9943 2.49348 17.5 2.00195M15 4.50195C15 5.20218 16.9943 6.51042 17.5 7.00195",stroke:"currentColor",key:"k0"}],["path",{d:"M15.3913 21.998C15.3395 20.084 15.4684 19.8535 15.6052 19.4277C15.7419 19.002 16.6982 17.4665 17.0366 16.3695C18.1313 12.8202 17.111 12.0653 15.7507 11.0588C14.2422 9.94257 11.3968 9.37728 9.98573 9.49966V3.7462C9.98573 2.78288 9.20481 2.00195 8.24148 2.00195C7.27816 2.00195 6.49723 2.78288 6.49723 3.7462V9.96607M6.49774 21.9988V20.9854C6.43328 20.041 5.49529 18.9235 4.32672 17.3166C3.12509 15.576 2.86688 14.6973 3.05591 13.8848C3.15329 13.4694 3.40594 12.7832 4.64647 11.6104L6.49723 9.96607M6.49723 14.0323V9.96607",stroke:"currentColor",key:"k1"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const yut=cn("Tag01Icon",[["circle",{cx:"1.5",cy:"1.5",r:"1.5",transform:"matrix(1 0 0 -1 16 8)",stroke:"currentColor",key:"k0"}],["path",{d:"M2.77423 11.1439C1.77108 12.2643 1.7495 13.9546 2.67016 15.1437C4.49711 17.5033 6.49674 19.5029 8.85633 21.3298C10.0454 22.2505 11.7357 22.2289 12.8561 21.2258C15.8979 18.5022 18.6835 15.6559 21.3719 12.5279C21.6377 12.2187 21.8039 11.8397 21.8412 11.4336C22.0062 9.63798 22.3452 4.46467 20.9403 3.05974C19.5353 1.65481 14.362 1.99377 12.5664 2.15876C12.1603 2.19608 11.7813 2.36233 11.472 2.62811C8.34412 5.31646 5.49781 8.10211 2.77423 11.1439Z",stroke:"currentColor",key:"k1"}],["path",{d:"M7 14L10 17",stroke:"currentColor",key:"k2"}]]);/**
 * @license hugeicons-react v0.2.0
 *
 * See the LICENSE file in the root directory of this source tree.
 */const vut=cn("TextFontIcon",[["path",{d:"M14 19L11.1069 10.7479C9.76348 6.91597 9.09177 5 8 5C6.90823 5 6.23652 6.91597 4.89309 10.7479L2 19M4.5 12H11.5",stroke:"currentColor",key:"k0"}],["path",{d:"M21.9692 13.9392V18.4392M21.9692 13.9392C22.0164 13.1161 22.0182 12.4891 21.9194 11.9773C21.6864 10.7709 20.4258 10.0439 19.206 9.89599C18.0385 9.75447 17.1015 10.055 16.1535 11.4363M21.9692 13.9392L19.1256 13.9392C18.6887 13.9392 18.2481 13.9603 17.8272 14.0773C15.2545 14.7925 15.4431 18.4003 18.0233 18.845C18.3099 18.8944 18.6025 18.9156 18.8927 18.9026C19.5703 18.8724 20.1955 18.545 20.7321 18.1301C21.3605 17.644 21.9692 16.9655 21.9692 15.9392V13.9392Z",stroke:"currentColor",key:"k1"}]]);function but(){return $.jsxs(wa,{w:"full",color:"gray",gap:1,mt:4,p:0,children:[$.jsxs(Ht,{gap:1,children:[$.jsx(It,{fontSize:"xs",textAlign:"center",children:"Swipytics @ 2024"}),$.jsx(Iw,{href:"https://jiwnchoi.me",isExternal:!0,children:$.jsx(It,{fontSize:"xs",textAlign:"center",textDecoration:"underline",children:"Jiwon Choi"})}),$.jsx(It,{fontSize:"xs",textAlign:"center",children:"All rights reserved."})]}),$.jsxs(Ht,{gap:4,children:[$.jsx(Iw,{href:"https://github.com/jiwnchoi/Swipytics",isExternal:!0,children:$.jsx(ds,{leftIcon:$.jsx(yt,{as:aut}),size:"xs",variant:"link",color:"gray",children:"Github"})}),$.jsx(Iw,{href:"https://idclab.skku.edu",isExternal:!0,children:$.jsxs(ds,{variant:"link",size:"xs",leftIcon:$.jsx(yt,{as:cut}),color:"gray",children:[$.jsx(It,{fontFamily:"Rajdhani",fontWeight:600,fontSize:"sm",children:"IDC"}),$.jsx(It,{fontFamily:"Rajdhani",fontWeight:500,fontSize:"sm",children:"Lab"})]})})]})]})}function xut(e){const{mobile:t}=Rs(),{t:n}=Nm();return $.jsxs(Ht,{justify:t?"start":"center",...e,children:[$.jsxs(hc,{flexDir:"column",minH:"400px",children:[$.jsxs(hc,{gap:2,mb:4,children:[$.jsx(yt,{as:mut,boxSize:16}),$.jsx(NR,{fontSize:48,children:"Swipytics"})]}),$.jsx(It,{textColor:"gray",textAlign:"center",children:n("home.description")})]}),$.jsx(but,{})]})}const wut=M.memo(xut);function Sut(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Kfe=Sut,kut=typeof Ii=="object"&&Ii&&Ii.Object===Object&&Ii,Cut=kut,Eut=Cut,_ut=typeof self=="object"&&self&&self.Object===Object&&self,$ut=Eut||_ut||Function("return this")(),Qfe=$ut,Aut=Qfe,Tut=function(){return Aut.Date.now()},Put=Tut,Mut=/\s/;function Fut(e){for(var t=e.length;t--&&Mut.test(e.charAt(t)););return t}var Rut=Fut,Out=Rut,Dut=/^\s+/;function Nut(e){return e&&e.slice(0,Out(e)+1).replace(Dut,"")}var Iut=Nut,Lut=Qfe,zut=Lut.Symbol,Jfe=zut,tq=Jfe,Zfe=Object.prototype,jut=Zfe.hasOwnProperty,But=Zfe.toString,$0=tq?tq.toStringTag:void 0;function Uut(e){var t=jut.call(e,$0),n=e[$0];try{e[$0]=void 0;var r=!0}catch{}var i=But.call(e);return r&&(t?e[$0]=n:delete e[$0]),i}var Vut=Uut,Wut=Object.prototype,Hut=Wut.toString;function qut(e){return Hut.call(e)}var Gut=qut,nq=Jfe,Yut=Vut,Xut=Gut,Kut="[object Null]",Qut="[object Undefined]",rq=nq?nq.toStringTag:void 0;function Jut(e){return e==null?e===void 0?Qut:Kut:rq&&rq in Object(e)?Yut(e):Xut(e)}var Zut=Jut;function ect(e){return e!=null&&typeof e=="object"}var tct=ect,nct=Zut,rct=tct,ict="[object Symbol]";function oct(e){return typeof e=="symbol"||rct(e)&&nct(e)==ict}var sct=oct,act=Iut,iq=Kfe,lct=sct,oq=NaN,uct=/^[-+]0x[0-9a-f]+$/i,cct=/^0b[01]+$/i,fct=/^0o[0-7]+$/i,dct=parseInt;function hct(e){if(typeof e=="number")return e;if(lct(e))return oq;if(iq(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=iq(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=act(e);var n=cct.test(e);return n||fct.test(e)?dct(e.slice(2),n?2:8):uct.test(e)?oq:+e}var pct=hct,gct=Kfe,f5=Put,sq=pct,mct="Expected a function",yct=Math.max,vct=Math.min;function bct(e,t,n){var r,i,o,s,a,l,u=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(mct);t=sq(t)||0,gct(n)&&(c=!!n.leading,f="maxWait"in n,o=f?yct(sq(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d);function h(k){var S=r,C=i;return r=i=void 0,u=k,s=e.apply(C,S),s}function p(k){return u=k,a=setTimeout(y,t),c?h(k):s}function g(k){var S=k-l,C=k-u,E=t-S;return f?vct(E,o-C):E}function m(k){var S=k-l,C=k-u;return l===void 0||S>=t||S<0||f&&C>=o}function y(){var k=f5();if(m(k))return v(k);a=setTimeout(y,g(k))}function v(k){return a=void 0,d&&r?h(k):(r=i=void 0,s)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function x(){return a===void 0?s:v(f5())}function w(){var k=f5(),S=m(k);if(r=arguments,i=this,l=k,S){if(a===void 0)return p(l);if(f)return clearTimeout(a),a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),s}return w.cancel=b,w.flush=x,w}var xct=bct;const wct=Da(xct);function Hk(){return Hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hk.apply(this,arguments)}var Sct=[],aq={width:0,height:0,top:0,left:0};function kct(e){var t=e===void 0?{}:e,n=t.initialSize,r=n===void 0?aq:n,i=t.debounceTime,o=i===void 0?300:i,s=t.ignoreDimensions,a=s===void 0?Sct:s,l=t.enableDebounceLeadingCall,u=l===void 0?!0:l,c=t.resizeObserverPolyfill,f=M.useRef(null),d=M.useRef(0),h=M.useState(Hk({},aq,r)),p=h[0],g=h[1],m=M.useMemo(function(){var y=Array.isArray(a)?a:[a];return wct(function(v){g(function(b){var x=Object.keys(b),w=x.filter(function(S){return b[S]!==v[S]}),k=w.every(function(S){return y.includes(S)});return k?b:v})},o,{leading:u})},[o,u,a]);return M.useEffect(function(){var y=c||window.ResizeObserver,v=new y(function(b){b.forEach(function(x){var w,k=(w=x==null?void 0:x.contentRect)!=null?w:{},S=k.left,C=k.top,E=k.width,A=k.height;d.current=window.requestAnimationFrame(function(){m({width:E,height:A,top:C,left:S})})})});return f.current&&v.observe(f.current),function(){window.cancelAnimationFrame(d.current),v.disconnect(),m.cancel()}},[m,c]),Hk({parentRef:f,resize:m},p)}function Cct({width:e,height:t,r:n}){return Clt({width:e,height:t,r:n}).map(({key:i,cx:o,cy:s,r:a,fill:l})=>$.jsx(LC.circle,{cy:s,initial:{r:0},animate:{cx:o,r:a,fill:l},transition:{type:"spring",stiffness:100,damping:20,fill:{duration:.3}}},i))}function Ect(e){const{parentRef:t,width:n,height:r}=kct({debounceTime:50});return $.jsx(Ht,{ref:t,position:"absolute",minH:`${12*2+4*2}px`,...e,children:$.jsx("svg",{width:n,height:r,children:$.jsx(Cct,{width:n,height:r,r:3})})})}function _ct(e){const{charts:t,ref:n}=tat(),{mobile:r,cardHeight:i,cardColor:o,cardWidth:s}=Rs();return $.jsxs(Ht,{ref:n,scrollSnapType:"x mandatory",overflowX:"auto",style:{WebkitOverflowScrolling:"touch"},sx:{"&::-webkit-scrollbar":{display:"none"}},...e,children:[$.jsx(Ect,{top:r?0:void 0,bottom:r?void 0:0,h:8,p:2,w:"full"}),$.jsx(wut,{flexDir:"column",minW:"full",w:s,maxW:s,minH:i,bgColor:o,borderRadius:"lg",scrollSnapAlign:"center"}),t.map(a=>$.jsx(Zlt,{minW:s,maxW:s,chart:a,minH:i,bgColor:o,flexDirection:"column",borderRadius:"lg"},a.key))]})}function $ct(e){const{sessionInitialized:t,chartDisplaying:n,currentChartPreferred:r,handleNextChart:i,handlePrevChart:o,handlePreferChart:s}=nat(),{t:a}=Nm();return $.jsxs(jQ,{...e,children:[$.jsx(ds,{py:8,size:"lg",w:"full","aria-label":"Previous chart",onClick:o,isDisabled:!t||!n,variant:"ghost",children:$.jsxs(wa,{spacing:2,children:[$.jsx(yt,{as:nut,boxSize:6}),$.jsx(It,{fontSize:"sm",children:a("navigator.prev")})]})}),$.jsx(ds,{py:8,size:"lg",w:"full","aria-label":"Next chart",onClick:i,isDisabled:!t,variant:"ghost",children:$.jsxs(wa,{spacing:2,children:[$.jsx(yt,{as:rut,boxSize:6}),$.jsx(It,{fontSize:"sm",children:a("navigator.next")})]})}),$.jsx(ds,{py:8,size:"lg",w:"full","aria-label":"Bookmark current chart",onClick:s,colorScheme:r?"red":"gray",isDisabled:!t||!n,variant:r?"solid":"ghost",children:$.jsxs(wa,{spacing:2,children:[$.jsx(yt,{as:r?Gfe:uut,boxSize:6}),$.jsx(It,{fontSize:"sm",children:a("bookmarks.action")})]})})]})}function Act({children:e,controller:t,...n}){const{animate:r,dragControls:i,handleDragEnd:o,bodyRef:s,handleRef:a,navigatorRef:l,navigatorBounds:u,variants:c}=lat(),{drawerBgColor:f,borderColor:d}=Rs();return $.jsxs(LC.div,{dragControls:i,style:{width:"100%",left:0,position:"fixed"},variants:c,initial:r,animate:r,drag:"y",dragListener:!0,dragConstraints:{bottom:0,top:0},dragElastic:0,onDragEnd:o,whileTap:{cursor:"grabbing"},children:[$.jsxs(hc,{h:"fit-content",flexDir:"column",gap:0,border:"1px solid",borderColor:d,borderRadius:"xl",boxShadow:"0px -4px 10px rgba(0, 0, 0, 0.1)",bgColor:f,...n,children:[$.jsx(Ht,{bgColor:"gray",minH:1,mt:2,borderRadius:4,minW:10,ref:a}),$.jsx(Ht,{w:"full",ref:s,p:4,flexDir:"column",children:e}),$.jsx(Ht,{minH:"100dvh"})]}),$.jsx(Sv,{children:$.jsx(Ht,{borderX:"1px solid",borderBottom:"1px solid",borderColor:d,onPointerDown:h=>i.start(h),bgColor:f,ref:l,position:"absolute",top:`calc(100dvh - ${u.height}px)`,p:4,pb:8,left:0,zIndex:500,w:"full",children:t})})]})}function Tct({children:e,...t}){const{tabPanelHeight:n}=Rs();return $.jsx(Ht,{...t,children:$.jsx(wa,{w:"full",h:n,gap:4,rounded:"lg",p:4,align:"start",minH:"full",children:e})})}function Pct({children:e,controller:t,...n}){const{mobile:r}=Rs();return r?$.jsx(Act,{...n,controller:t,children:e}):$.jsxs(Tct,{...n,children:[e,$.jsx(OR,{}),t]})}const Mct=({metadataType:e,...t})=>{switch(e){case"numeric":return $.jsx(yt,{as:lut,...t});case"categorical":return $.jsx(yt,{as:vut,...t});case"datetime":return $.jsx(yt,{as:iut,...t});case"name":return $.jsx(yt,{as:yut,...t});default:return null}},A0=Rv(".3~s");function Qo({children:e}){return $.jsx(Ht,{flexDir:"column",justify:"center",alignItems:"start",w:"full",h:"full",children:$.jsx(eJ,{children:e})})}function Fct({metadata:e}){switch(e.type){case"datetime":return $.jsxs(Oy,{gridTemplateColumns:"1fr 4fr",children:[$.jsx(Qo,{children:"min"}),$.jsx(It,{children:e.min}),$.jsx(Qo,{children:"max"}),$.jsx(It,{children:e.max})]});case"numeric":return $.jsxs(Oy,{gridTemplateColumns:"2fr 3fr 2fr 3fr",children:[$.jsx(Qo,{children:"min"}),$.jsx(It,{children:A0(e.min)}),$.jsx(Qo,{children:"max"}),$.jsx(It,{children:A0(e.max)}),$.jsx(Qo,{children:"mean"}),$.jsx(It,{children:A0(e.mean)}),$.jsx(Qo,{children:"median"}),$.jsx(It,{children:A0(e.median)}),$.jsx(Qo,{children:"std"}),$.jsx(It,{children:A0(e.std)})]});case"categorical":return $.jsxs(Oy,{gridTemplateColumns:"1fr 4fr",children:[$.jsx(Qo,{children:"top"}),$.jsx(It,{children:e.top}),$.jsx(Qo,{children:"freq"}),$.jsx(It,{children:e.freq})]});case"name":default:return null}}function Rct({field:e}){const t=Fs(r=>r.setTabByName),n=Fs(r=>r.appendSearchTarget);return $.jsxs(DQ,{children:[$.jsx(FQ,{borderRadius:"md",children:$.jsxs(Ht,{w:"full",gap:2,align:"center",children:[$.jsx(Mct,{metadataType:e.type,boxSize:4}),$.jsx(NR,{fontSize:"md",children:e.name}),$.jsx(OR,{}),e.type!=="name"&&$.jsx($1,{variant:"ghost",p:0,m:0,size:"xs",icon:$.jsx(yt,{as:Yfe}),"aria-label":`Search ${e.name}`,onClick:r=>{t("search"),n(e.name),r.stopPropagation()}}),$.jsx(OQ,{})]})}),$.jsxs(IQ,{px:2,pb:2,children:[$.jsxs(Oy,{gridTemplateColumns:"2fr 3fr 2fr 3fr",children:[$.jsx(Qo,{children:"unique"}),$.jsx(It,{children:e.metadata.unique}),$.jsx(Qo,{children:"missing"}),$.jsx(It,{children:e.metadata.missing})]}),$.jsx(Fct,{metadata:e.metadata})]})]})}function Oct(e,t){const n={numeric:0,categorical:1,datetime:2,name:3};return n[e.type]-n[t.type]}function Dct(e){const t=St(r=>r.fields),n=M.useMemo(()=>Array.from(t).sort(Oct),[t]);return $.jsx(lm,{as:wa,h:"full",...e,children:$.jsx(Ht,{h:"full",w:"full",overflowY:"auto",flexDir:"column",children:$.jsx(LQ,{allowMultiple:!0,children:n.map(r=>$.jsx(Rct,{field:r},r.name))})})})}function Nct(e){const{loading:t}=Lfe(),{loadingData:n,fileInputRef:r,pathInput:i,inputDisabled:o,handleFileButtonClick:s,handleFileChange:a,handleInputChange:l,handleSubmit:u}=Zat();return $.jsxs(Ht,{as:UQ,...e,children:[$.jsxs(GQ,{children:[$.jsx(A1,{placeholder:"https://...",onChange:l,value:i,borderRightRadius:0,_focusVisible:{borderColor:mr}}),$.jsxs(PR,{children:[$.jsx(A1,{type:"file",display:"none",ref:r,onChange:a,accept:".csv,.json"}),$.jsx($1,{"aria-label":"Select File",icon:$.jsx(yt,{as:sut}),variant:"link",onClick:s})]})]}),$.jsx($1,{borderLeftRadius:0,colorScheme:mr,type:"submit",isLoading:n||t,icon:$.jsx(yt,{as:Xfe}),"aria-label":"Load Data",isDisabled:o,onClick:u,children:o?"Please Input Data":"Load Data"})]})}const Ict={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class qk{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||Ict,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,i){return i&&!this.debug?null:(typeof t[0]=="string"&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new qk(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new qk(this.logger,t)}}var ga=new qk;class r${constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(s=>{let[a,l]=s;for(let u=0;u<l;u++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(s=>{let[a,l]=s;for(let u=0;u<l;u++)a.apply(a,[t,...r])})}}const T0=()=>{let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},lq=e=>e==null?"":""+e,Lct=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},zct=/###/g,uq=e=>e&&e.indexOf("###")>-1?e.replace(zct,"."):e,cq=e=>!e||typeof e=="string",Qy=(e,t,n)=>{const r=typeof t!="string"?t:t.split(".");let i=0;for(;i<r.length-1;){if(cq(e))return{};const o=uq(r[i]);!e[o]&&n&&(e[o]=new n),Object.prototype.hasOwnProperty.call(e,o)?e=e[o]:e={},++i}return cq(e)?{}:{obj:e,k:uq(r[i])}},fq=(e,t,n)=>{const{obj:r,k:i}=Qy(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let o=t[t.length-1],s=t.slice(0,t.length-1),a=Qy(e,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=Qy(e,s,Object),a&&a.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=n},jct=(e,t,n,r)=>{const{obj:i,k:o}=Qy(e,t,Object);i[o]=i[o]||[],i[o].push(n)},Gk=(e,t)=>{const{obj:n,k:r}=Qy(e,t);if(n)return n[r]},Bct=(e,t,n)=>{const r=Gk(e,n);return r!==void 0?r:Gk(t,n)},ede=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?typeof e[r]=="string"||e[r]instanceof String||typeof t[r]=="string"||t[r]instanceof String?n&&(e[r]=t[r]):ede(e[r],t[r],n):e[r]=t[r]);return e},Ih=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Uct={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Vct=e=>typeof e=="string"?e.replace(/[&<>"'\/]/g,t=>Uct[t]):e;class Wct{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const Hct=[" ",",","?","!",";"],qct=new Wct(20),Gct=(e,t,n)=>{t=t||"",n=n||"";const r=Hct.filter(s=>t.indexOf(s)<0&&n.indexOf(s)<0);if(r.length===0)return!0;const i=qct.getRegExp(`(${r.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!i.test(e);if(!o){const s=e.indexOf(n);s>0&&!i.test(e.substring(0,s))&&(o=!0)}return o},jF=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let s,a="";for(let l=o;l<r.length;++l)if(l!==o&&(a+=n),a+=r[l],s=i[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&l<r.length-1)continue;o+=l-o+1;break}i=s}return i},Yk=e=>e&&e.indexOf("_")>0?e.replace("_","-"):e;class dq extends r${constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,s=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],r&&(Array.isArray(r)?a.push(...r):typeof r=="string"&&o?a.push(...r.split(o)):a.push(r)));const l=Gk(this.data,a);return!l&&!n&&!r&&t.indexOf(".")>-1&&(t=a[0],n=a[1],r=a.slice(2).join(".")),l||!s||typeof r!="string"?l:jF(this.data&&this.data[t]&&this.data[t][n],r,o)}addResource(t,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[t,n];r&&(a=a.concat(s?r.split(s):r)),t.indexOf(".")>-1&&(a=t.split("."),i=n,n=a[1]),this.addNamespaces(n),fq(this.data,a,i),o.silent||this.emit("added",t,n,r,i)}addResources(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in r)(typeof r[o]=="string"||Array.isArray(r[o]))&&this.addResource(t,n,o,r[o],{silent:!0});i.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,i,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=Gk(this.data,a)||{};s.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?ede(l,r,o):l={...l,...r},fq(this.data,a,l),s.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var tde={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(o=>{this.processors[o]&&(t=this.processors[o].process(t,n,r,i))}),t}};const hq={};class Xk extends r${constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Lct(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ga.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const r=this.resolve(t,n);return r&&r.res!==void 0}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const s=r&&t.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Gct(t,r,i);if(s&&!a){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:o};const u=t.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),t=u.join(i)}return typeof o=="string"&&(o=[o]),{key:t,namespaces:o}}translate(t,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:s,namespaces:a}=this.extractFromKey(t[t.length-1],n),l=a[a.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const x=n.nsSeparator||this.options.nsSeparator;return i?{res:`${l}${x}${s}`,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${x}${s}`}return i?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:s}const f=this.resolve(t,n);let d=f&&f.res;const h=f&&f.usedKey||s,p=f&&f.exactUsedKey||s,g=Object.prototype.toString.apply(d),m=["[object Number]","[object Function]","[object RegExp]"],y=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject;if(v&&d&&(typeof d!="string"&&typeof d!="boolean"&&typeof d!="number")&&m.indexOf(g)<0&&!(typeof y=="string"&&Array.isArray(d))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const x=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...n,ns:a}):`key '${s} (${this.language})' returned an object instead of string.`;return i?(f.res=x,f.usedParams=this.getUsedParamsDetails(n),f):x}if(o){const x=Array.isArray(d),w=x?[]:{},k=x?p:h;for(const S in d)if(Object.prototype.hasOwnProperty.call(d,S)){const C=`${k}${o}${S}`;w[S]=this.translate(C,{...n,joinArrays:!1,ns:a}),w[S]===C&&(w[S]=d[S])}d=w}}else if(v&&typeof y=="string"&&Array.isArray(d))d=d.join(y),d&&(d=this.extendTranslation(d,t,n,r));else{let x=!1,w=!1;const k=n.count!==void 0&&typeof n.count!="string",S=Xk.hasDefaultValue(n),C=k?this.pluralResolver.getSuffix(u,n.count,n):"",E=n.ordinal&&k?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",A=k&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),T=A&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${C}`]||n[`defaultValue${E}`]||n.defaultValue;!this.isValidLookup(d)&&S&&(x=!0,d=T),this.isValidLookup(d)||(w=!0,d=s);const F=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&w?void 0:d,R=S&&T!==d&&this.options.updateMissing;if(w||x||R){if(this.logger.log(R?"updateKey":"missingKey",u,l,s,R?T:d),o){const D=this.resolve(s,{...n,keySeparator:!1});D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let _=[];const P=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&P&&P[0])for(let D=0;D<P.length;D++)_.push(P[D]);else this.options.saveMissingTo==="all"?_=this.languageUtils.toResolveHierarchy(n.lng||this.language):_.push(n.lng||this.language);const N=(D,L,U)=>{const V=S&&U!==d?U:F;this.options.missingKeyHandler?this.options.missingKeyHandler(D,l,L,V,R,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(D,l,L,V,R,n),this.emit("missingKey",D,l,L,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?_.forEach(D=>{const L=this.pluralResolver.getSuffixes(D,n);A&&n[`defaultValue${this.options.pluralSeparator}zero`]&&L.indexOf(`${this.options.pluralSeparator}zero`)<0&&L.push(`${this.options.pluralSeparator}zero`),L.forEach(U=>{N([D],s+U,n[`defaultValue${U}`]||T)})}):N(_,s,T))}d=this.extendTranslation(d,t,n,f,r),w&&d===s&&this.options.appendNamespaceToMissingKey&&(d=`${l}:${s}`),(w||x)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${s}`:s,x?d:void 0):d=this.options.parseMissingKeyHandler(d))}return i?(f.res=d,f.usedParams=this.getUsedParamsDetails(n),f):d}extendTranslation(t,n,r,i,o){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=typeof t=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const d=t.match(this.interpolator.nestingRegexp);c=d&&d.length}let f=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),t=this.interpolator.interpolate(t,f,r.lng||this.language||i.usedLng,r),u){const d=t.match(this.interpolator.nestingRegexp),h=d&&d.length;c<h&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];return o&&o[0]===h[0]&&!r.context?(s.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${n[0]}`),null):s.translate(...h,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,l=typeof a=="string"?[a]:a;return t!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(t=tde.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,o,s,a;return typeof t=="string"&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;i=c;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const d=n.count!==void 0&&typeof n.count!="string",h=d&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),p=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",g=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(m=>{this.isValidLookup(r)||(a=m,!hq[`${g[0]}-${m}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(hq[`${g[0]}-${m}`]=!0,this.logger.warn(`key "${i}" for languages "${g.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(y=>{if(this.isValidLookup(r))return;s=y;const v=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(v,c,y,m,n);else{let x;d&&(x=this.pluralResolver.getSuffix(y,n.count,n));const w=`${this.options.pluralSeparator}zero`,k=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(v.push(c+x),n.ordinal&&x.indexOf(k)===0&&v.push(c+x.replace(k,this.options.pluralSeparator)),h&&v.push(c+w)),p){const S=`${c}${this.options.contextSeparator}${n.context}`;v.push(S),d&&(v.push(S+x),n.ordinal&&x.indexOf(k)===0&&v.push(S+x.replace(k,this.options.pluralSeparator)),h&&v.push(S+w))}}let b;for(;b=v.pop();)this.isValidLookup(r)||(o=b,r=this.getResource(y,m,b,n))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,r,i):this.resourceStore.getResource(t,n,r,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&typeof t.replace!="string";let i=r?t.replace:t;if(r&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of n)delete i[o]}return i}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}const d5=e=>e.charAt(0).toUpperCase()+e.slice(1);class pq{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ga.create("languageUtils")}getScriptPartFromCode(t){if(t=Yk(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=Yk(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=t.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=d5(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=d5(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=d5(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],t),i=[],o=s=>{s&&(this.isSupportedCode(s)?i.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):typeof t=="string"&&o(this.formatLanguageCode(t)),r.forEach(s=>{i.indexOf(s)<0&&o(this.formatLanguageCode(s))}),i}}let Yct=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Xct={1:e=>+(e>1),2:e=>+(e!=1),3:e=>0,4:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,5:e=>e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5,6:e=>e==1?0:e>=2&&e<=4?1:2,7:e=>e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2,8:e=>e==1?0:e==2?1:e!=8&&e!=11?2:3,9:e=>+(e>=2),10:e=>e==1?0:e==2?1:e<7?2:e<11?3:4,11:e=>e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3,12:e=>+(e%10!=1||e%100==11),13:e=>+(e!==0),14:e=>e==1?0:e==2?1:e==3?2:3,15:e=>e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2,16:e=>e%10==1&&e%100!=11?0:e!==0?1:2,17:e=>e==1||e%10==1&&e%100!=11?0:1,18:e=>e==0?0:e==1?1:2,19:e=>e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3,20:e=>e==1?0:e==0||e%100>0&&e%100<20?1:2,21:e=>e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0,22:e=>e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3};const Kct=["v1","v2","v3"],Qct=["v4"],gq={zero:0,one:1,two:2,few:3,many:4,other:5},Jct=()=>{const e={};return Yct.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:Xct[t.fc]}})}),e};class Zct{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=ga.create("pluralResolver"),(!this.options.compatibilityJSON||Qct.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Jct(),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const r=Yk(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];const s=new Intl.PluralRules(r,{type:i});return this.pluralRulesCache[o]=s,s}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(i=>`${n}${i}`)}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(t,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,o)=>gq[i]-gq[o]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(t,i,n)):[]}getSuffix(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,n){const r=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let i=t.numbers[r];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const o=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Kct.includes(this.options.compatibilityJSON)}}const mq=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=Bct(e,t,n);return!o&&i&&typeof n=="string"&&(o=jF(e,n,r),o===void 0&&(o=jF(t,n,r))),o},h5=e=>e.replace(/\$/g,"$$$$");class eft{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ga.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:f,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:y,alwaysFormat:v}=t.interpolation;this.escape=n!==void 0?n:Vct,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Ih(o):s||"{{",this.suffix=a?Ih(a):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?Ih(d):h||Ih("$t("),this.nestingSuffix=p?Ih(p):g||Ih(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=y||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,n,r,i){let o,s,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=h=>{if(h.indexOf(this.formatSeparator)<0){const y=mq(n,l,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...i,...n,interpolationkey:h}):y}const p=h.split(this.formatSeparator),g=p.shift().trim(),m=p.join(this.formatSeparator).trim();return this.format(mq(n,l,g,this.options.keySeparator,this.options.ignoreJSONStructure),m,r,{...i,...n,interpolationkey:g})};this.resetRegExp();const c=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>h5(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?h5(this.escape(h)):h5(h)}].forEach(h=>{for(a=0;o=h.regex.exec(t);){const p=o[1].trim();if(s=u(p),s===void 0)if(typeof c=="function"){const m=c(t,o,i);s=typeof m=="string"?m:""}else if(i&&Object.prototype.hasOwnProperty.call(i,p))s="";else if(f){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${t}`),s="";else typeof s!="string"&&!this.useRawValueToEscape&&(s=lq(s));const g=h.safeValue(s);if(t=t.replace(o[0],g),f?(h.regex.lastIndex+=s.length,h.regex.lastIndex-=o[0].length):h.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,o,s;const a=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const f=l.split(new RegExp(`${c}[ ]*{`));let d=`{${f[1]}`;l=f[0],d=this.interpolate(d,s);const h=d.match(/'/g),p=d.match(/"/g);(h&&h.length%2===0&&!p||p.length%2!==0)&&(d=d.replace(/'/g,'"'));try{s=JSON.parse(d),u&&(s={...u,...s})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${c}${d}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,l};for(;i=this.nestingRegexp.exec(t);){let l=[];s={...r},s=s.replace&&typeof s.replace!="string"?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const c=i[1].split(this.formatSeparator).map(f=>f.trim());i[1]=c.shift(),l=c,u=!0}if(o=n(a.call(this,i[1].trim(),s),s),o&&i[0]===t&&typeof o!="string")return o;typeof o!="string"&&(o=lq(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),o=""),u&&(o=l.reduce((c,f)=>this.format(c,f,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),t=t.replace(i[0],o),this.regexp.lastIndex=0}return t}}const tft=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(s=>{if(s){const[a,...l]=s.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=a.trim();n[c]||(n[c]=u),u==="false"&&(n[c]=!1),u==="true"&&(n[c]=!0),isNaN(u)||(n[c]=parseInt(u,10))}})}return{formatName:t,formatOptions:n}},Lh=e=>{const t={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const s=r+JSON.stringify(o);let a=t[s];return a||(a=e(Yk(r),i),t[s]=a),a(n)}};class nft{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ga.create("formatter"),this.options=t,this.formats={number:Lh((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return o=>i.format(o)}),currency:Lh((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return o=>i.format(o)}),datetime:Lh((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return o=>i.format(o)}),relativetime:Lh((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return o=>i.format(o,r.range||"day")}),list:Lh((n,r)=>{const i=new Intl.ListFormat(n,{...r});return o=>i.format(o)})},this.init(t)}init(t){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=Lh(n)}format(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(l=>l.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,l)=>{const{formatName:u,formatOptions:c}=tft(l);if(this.formats[u]){let f=a;try{const d=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},h=d.locale||d.lng||i.locale||i.lng||r;f=this.formats[u](a,h,{...c,...i,...d})}catch(d){this.logger.warn(d)}return f}else this.logger.warn(`there was no format function for ${u}`);return a},t)}}const rft=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class ift extends r${constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ga.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(t,n,r,i){const o={},s={},a={},l={};return t.forEach(u=>{let c=!0;n.forEach(f=>{const d=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?s[d]===void 0&&(s[d]=!0):(this.state[d]=1,c=!1,s[d]===void 0&&(s[d]=!0),o[d]===void 0&&(o[d]=!0),l[f]===void 0&&(l[f]=!0)))}),c||(a[u]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,n,r){const i=t.split("|"),o=i[0],s=i[1];n&&this.emit("failedLoading",o,s,n),!n&&r&&this.store.addResourceBundle(o,s,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const a={};this.queue.forEach(l=>{jct(l.loaded,[o],s),rft(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{a[u]||(a[u]={});const c=l.loaded[u];c.length&&c.forEach(f=>{a[u][f]===void 0&&(a[u][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:i,wait:o,callback:s});return}this.readingCalls++;const a=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&c&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,i+1,o*2,s)},o);return}s(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(t,n);u&&typeof u.then=="function"?u.then(c=>a(null,c)).catch(a):a(null,u)}catch(u){a(u)}return}return l(t,n,a)}prepareLoading(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof n=="string"&&(n=[n]);const o=this.queueLoad(t,n,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=t.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${n}loading namespace ${o} for language ${i} failed`,s),!s&&a&&this.logger.log(`${n}loaded namespace ${o} for language ${i}`,a),this.loaded(t,s,a)})}saveMissing(t,n,r,i,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...s,isUpdate:o},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(t,n,r,i,l):c=u(t,n,r,i),c&&typeof c.then=="function"?c.then(f=>a(null,f)).catch(a):a(null,c)}catch(c){a(c)}else u(t,n,r,i,a,l)}!t||!t[0]||this.store.addResource(t[0],n,r,i)}}}const yq=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),vq=e=>(typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),aw=()=>{},oft=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class cv extends r${constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=vq(t),this.services={},this.logger=ga,this.modules={external:[]},oft(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=yq();this.options={...i,...this.options,...vq(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const o=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?ga.init(o(this.modules.logger),this.options):ga.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=nft);const f=new pq(this.options);this.store=new dq(this.options.resources,this.options);const d=this.services;d.logger=ga,d.resourceStore=this.store,d.languageUtils=f,d.pluralResolver=new Zct(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(d.formatter=o(c),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new eft(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new ift(o(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(h){for(var p=arguments.length,g=new Array(p>1?p-1:0),m=1;m<p;m++)g[m-1]=arguments[m];t.emit(h,...g)}),this.modules.languageDetector&&(d.languageDetector=o(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=o(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Xk(this.services,this.options),this.translator.on("*",function(h){for(var p=arguments.length,g=new Array(p>1?p-1:0),m=1;m<p;m++)g[m-1]=arguments[m];t.emit(h,...g)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,r||(r=aw),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return t.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return t.store[c](...arguments),t}});const l=T0(),u=()=>{const c=(f,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),r(f,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aw;const i=typeof t=="string"?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(u=>{u!=="cimode"&&o.indexOf(u)<0&&o.push(u)})};i?s(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>s(l)),this.options.preload&&this.options.preload.forEach(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(t,n,r){const i=T0();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=aw),this.services.backendConnector.reload(t,n,o=>{i.resolve(),r(o)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&tde.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(t,n){var r=this;this.isLanguageChangingTo=t;const i=T0();this.emit("languageChanging",t);const o=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},s=(l,u)=>{u?(o(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},a=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||o(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{s(c,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),i}getFixedT(t,n,r){var i=this;const o=function(s,a){let l;if(typeof a!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),f=2;f<u;f++)c[f-2]=arguments[f];l=i.options.overloadTranslationOptionHandler([s,a].concat(c))}else l={...a};l.lng=l.lng||o.lng,l.lngs=l.lngs||o.lngs,l.ns=l.ns||o.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||o.keyPrefix);const d=i.options.keySeparator||".";let h;return l.keyPrefix&&Array.isArray(s)?h=s.map(p=>`${l.keyPrefix}${d}${p}`):h=l.keyPrefix?`${l.keyPrefix}${d}${s}`:s,i.t(h,l)};return typeof t=="string"?o.lng=t:o.lngs=t,o.ns=n,o.keyPrefix=r,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(a,l)=>{const u=this.services.backendConnector.state[`${a}|${l}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(r,t)&&(!i||s(o,t)))}loadNamespaces(t,n){const r=T0();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=T0();typeof t=="string"&&(t=[t]);const i=this.options.preload||[],o=t.filter(s=>i.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=i.concat(o),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new pq(yq());return n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new cv(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aw;const r=t.forkResourceStore;r&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},o=new cv(i);return(t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r&&(o.store=new dq(this.store.data,i),o.services.resourceStore=o.store),o.translator=new Xk(o.services,i),o.translator.on("*",function(a){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];o.emit(a,...u)}),o.init(i,n),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Pr=cv.createInstance();Pr.createInstance=cv.createInstance;Pr.createInstance;Pr.dir;Pr.init;Pr.loadResources;Pr.reloadResources;Pr.use;Pr.changeLanguage;Pr.getFixedT;const cu=Pr.t;Pr.exists;Pr.setDefaultNamespace;Pr.hasLoadedNamespace;Pr.loadNamespaces;Pr.loadLanguages;function zh({label:e,children:t,...n}){return $.jsxs(Ht,{w:"full",flexDir:"row",justify:"space-between",alignItems:"center",...n,children:[$.jsx(It,{minW:"130px",children:e}),t]})}function sft(){const{handleSubmit:e,loading:t,selectedDemo:n,handleDemoSelect:r}=uat(),{loading:i}=Lfe(),{t:o}=Nm();return $.jsxs($.Fragment,{children:[$.jsx(LR,{size:"sm",onChange:s=>r(kH.find(a=>a.name===s.target.value)??null),placeholder:o("settings.select_demo"),variant:"outline",colorScheme:mr,icon:$.jsx(yt,{as:tut}),borderRightRadius:0,children:kH.map(s=>$.jsx("option",{value:s.name,children:s.name},s.name))}),$.jsx($1,{borderLeftRadius:0,colorScheme:mr,type:"submit",isLoading:t||i,isDisabled:!n||i,icon:$.jsx(yt,{as:Xfe}),"aria-label":o("settings.load_data"),onClick:e,"data-log-click":"load-demo"})]})}function aft(e){const{python:t,handleServerButtonClick:n,handleDownloadLogs:r,colorMode:i,toggleColorMode:o,locale:s,setLocale:a}=Blt();return $.jsxs(lm,{as:wa,...e,children:[$.jsx(zh,{label:cu("settings.load_data"),children:$.jsx(Nct,{w:"full"})}),$.jsx(zh,{label:cu("settings.load_demo"),children:$.jsx(sft,{})}),$.jsx(IR,{my:4}),$.jsx(zh,{label:cu("settings.set_locale"),children:$.jsxs(LR,{size:"sm",variant:"outline",value:s,onChange:l=>{a(l.target.value)},children:[$.jsx("option",{value:"en",children:"English"}),$.jsx("option",{value:"ko",children:""})]})}),$.jsx(zh,{label:cu("settings.set_color"),children:$.jsx(ds,{leftIcon:$.jsx(yt,{as:i==="light"?gut:fut}),onClick:o,size:"sm",w:"full",children:i==="light"?"Light":"Dark"})}),$.jsx(zh,{label:cu("settings.set_backend"),children:$.jsx(ds,{leftIcon:$.jsx(yt,{as:t==="server"?out:put}),onClick:()=>{n()},size:"sm",w:"full",children:t&&t[0].toUpperCase()+(t==null?void 0:t.slice(1))})}),$.jsx(zh,{label:cu("settings.monitor_logs"),children:$.jsxs(Ht,{gap:2,w:"full",children:[$.jsx(ds,{w:"full",onClick:r,children:cu("settings.load_latest_logs")}),$.jsx(ds,{w:"full",onClick:r,children:cu("settings.download_logs")})]})})]})}function lft({tabs:e,...t}){const{tabIconSize:n,tabPanelHeight:r,scrollbarStyle:i}=Rs(),s=St(u=>u.fields).length>0,a=Fs(u=>u.tabIndex),l=Fs(u=>u.setTabByIndex);return $.jsxs(oJ,{w:"full",defaultIndex:a,index:a,onChange:l,isFitted:!0,colorScheme:mr,...t,children:[$.jsx(sJ,{children:e.map(u=>$.jsxs(lJ,{gap:1,as:hc,flexDir:"column",isDisabled:!s&&!u.displayingBeforeInit,"data-log-click":`tab-${u.name}`,children:[$.jsx(yt,{boxSize:n,as:u.icon}),$.jsx(It,{fontSize:"sm",children:u.displayName})]},`tab-${u.name}`))}),$.jsx(aJ,{mt:4,flex:1,overflow:"auto",h:r,sx:i,children:e.map(u=>$.jsx(lm,{children:u.panel},`tabpanel-${u.name}`))})]})}function uft(){M.useEffect(()=>(td.initializeDB().then(()=>{td.attachEventListener()}),()=>{td.detachEventListener()}),[])}function cft(){const{cardHeight:e,cardColor:t,cardWidth:n}=Rs(),{t:r}=Nm();return uft(),$.jsxs(Ht,{minW:{base:"full",lg:"container.xl"},maxH:e,gap:4,flexDir:{base:"column",lg:"row"},children:[$.jsx(Ht,{position:"relative",w:n,children:$.jsx(_ct,{w:"full",gap:{base:0,lg:4}})}),$.jsx(Pct,{bgColor:t,borderRadius:"lg",w:{base:"full",lg:"sm"},minW:{base:"full",lg:"sm"},controller:$.jsx($ct,{spacing:2,w:"full"}),children:$.jsx(lft,{tabs:[{name:"likes",displayName:r("bookmarks.title"),icon:Gfe,panel:$.jsx(Ult,{p:0,m:0,gap:2,w:"full"}),displayingBeforeInit:!1},{name:"search",displayName:r("search.title"),icon:Yfe,panel:$.jsx(Vlt,{}),displayingBeforeInit:!1},{name:"fields",displayName:r("fields.title"),icon:dut,panel:$.jsx(Dct,{}),displayingBeforeInit:!1},{name:"settings",displayName:r("settings.title"),icon:hut,panel:$.jsx(aft,{align:"start"}),displayingBeforeInit:!0}]})})]})}const fft=Y2e({initialColorMode:"dark",useSystemColorMode:!0,components:{Button:{defaultProps:{size:"sm"}},Input:{defaultProps:{size:"sm",focusBorderColor:qu[200]},baseStyle:{field:{_focusVisible:{borderColor:qu[200]}}}},Select:{defaultProps:{size:"sm",focusBorderColor:qu[200]}},Tabs:{parts:["tabpanel"],baseStyle:{tabpanel:{p:0}}},Card:{baseStyle:e=>({container:{bg:e.colorMode==="light"?"white":"gray.900"}})}},styles:{global:e=>({body:{height:"100dvh",overflow:"smooth",overscrollBehavior:"none",bg:e.colorMode==="light"?"gray.100":"gray.800"},html:{height:"100dvh",overflow:"smooth",overscrollBehavior:"none",overflowY:"overlay",focusBorderColor:qu[200]}})}});var nde,bq=H4;nde=bq.createRoot,bq.hydrateRoot;const{slice:dft,forEach:hft}=[];function pft(e){return hft.call(dft.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}const xq=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,gft=(e,t,n)=>{const r=n||{};r.path=r.path||"/";const i=encodeURIComponent(t);let o=`${e}=${i}`;if(r.maxAge>0){const s=r.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(r.domain){if(!xq.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!xq.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o},wq={create(e,t,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=gft(e,encodeURIComponent(t),i)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove(e){this.create(e,"",-1)}};var mft={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return wq.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=t;n&&typeof document<"u"&&wq.create(n,e,r,i,o)}},yft={name:"querystring",lookup(e){var r;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const s=i.substring(1).split("&");for(let a=0;a<s.length;a++){const l=s[a].indexOf("=");l>0&&s[a].substring(0,l)===t&&(n=s[a].substring(l+1))}}return n}};let P0=null;const Sq=()=>{if(P0!==null)return P0;try{P0=window!=="undefined"&&window.localStorage!==null;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{P0=!1}return P0};var vft={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Sq())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&Sq()&&window.localStorage.setItem(n,e)}};let M0=null;const kq=()=>{if(M0!==null)return M0;try{M0=window!=="undefined"&&window.sessionStorage!==null;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{M0=!1}return M0};var bft={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&kq())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&kq()&&window.sessionStorage.setItem(n,e)}},xft={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let o=0;o<n.length;o++)t.push(n[o]);r&&t.push(r),i&&t.push(i)}return t.length>0?t:void 0}},wft={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const r=t||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Sft={name:"path",lookup(e){var i;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof t=="number"?t:0])==null?void 0:i.replace("/",""):void 0}},kft={name:"subdomain",lookup(e){var i,o;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,r=typeof window<"u"&&((o=(i=window.location)==null?void 0:i.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};function Cft(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}}class rde{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=pft(n,this.options||{},Cft()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(mft),this.addDetector(yft),this.addDetector(vft),this.addDetector(bft),this.addDetector(xft),this.addDetector(wft),this.addDetector(Sft),this.addDetector(kft)}addDetector(t){return this.detectors[t.name]=t,this}detect(t){t||(t=this.options.order);let n=[];return t.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(t,this.options)}))}}rde.type="languageDetector";function BF(e){"@babel/helpers - typeof";return BF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BF(e)}function ide(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":BF(XMLHttpRequest))==="object"}function Eft(e){return!!e&&typeof e.then=="function"}function _ft(e){return Eft(e)?e:Promise.resolve(e)}function $ft(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var UF={exports:{}},lw={exports:{}},Cq;function Aft(){return Cq||(Cq=1,function(e,t){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ii<"u"&&Ii,r=function(){function o(){this.fetch=!1,this.DOMException=n.DOMException}return o.prototype=n,new o}();(function(o){(function(s){var a=typeof o<"u"&&o||typeof self<"u"&&self||typeof a<"u"&&a,l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(_){return _&&DataView.prototype.isPrototypeOf(_)}if(l.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(_){return _&&c.indexOf(Object.prototype.toString.call(_))>-1};function d(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(_)||_==="")throw new TypeError('Invalid character in header field name: "'+_+'"');return _.toLowerCase()}function h(_){return typeof _!="string"&&(_=String(_)),_}function p(_){var P={next:function(){var N=_.shift();return{done:N===void 0,value:N}}};return l.iterable&&(P[Symbol.iterator]=function(){return P}),P}function g(_){this.map={},_ instanceof g?_.forEach(function(P,N){this.append(N,P)},this):Array.isArray(_)?_.forEach(function(P){this.append(P[0],P[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(P){this.append(P,_[P])},this)}g.prototype.append=function(_,P){_=d(_),P=h(P);var N=this.map[_];this.map[_]=N?N+", "+P:P},g.prototype.delete=function(_){delete this.map[d(_)]},g.prototype.get=function(_){return _=d(_),this.has(_)?this.map[_]:null},g.prototype.has=function(_){return this.map.hasOwnProperty(d(_))},g.prototype.set=function(_,P){this.map[d(_)]=h(P)},g.prototype.forEach=function(_,P){for(var N in this.map)this.map.hasOwnProperty(N)&&_.call(P,this.map[N],N,this)},g.prototype.keys=function(){var _=[];return this.forEach(function(P,N){_.push(N)}),p(_)},g.prototype.values=function(){var _=[];return this.forEach(function(P){_.push(P)}),p(_)},g.prototype.entries=function(){var _=[];return this.forEach(function(P,N){_.push([N,P])}),p(_)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function y(_){return new Promise(function(P,N){_.onload=function(){P(_.result)},_.onerror=function(){N(_.error)}})}function v(_){var P=new FileReader,N=y(P);return P.readAsArrayBuffer(_),N}function b(_){var P=new FileReader,N=y(P);return P.readAsText(_),N}function x(_){for(var P=new Uint8Array(_),N=new Array(P.length),D=0;D<P.length;D++)N[D]=String.fromCharCode(P[D]);return N.join("")}function w(_){if(_.slice)return _.slice(0);var P=new Uint8Array(_.byteLength);return P.set(new Uint8Array(_)),P.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(_){this.bodyUsed=this.bodyUsed,this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:l.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:l.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():l.arrayBuffer&&l.blob&&u(_)?(this._bodyArrayBuffer=w(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||f(_))?this._bodyArrayBuffer=w(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var _=m(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var _=m(this);return _||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(v)}),this.text=function(){var _=m(this);if(_)return _;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function C(_){var P=_.toUpperCase();return S.indexOf(P)>-1?P:_}function E(_,P){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P=P||{};var N=P.body;if(_ instanceof E){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,P.headers||(this.headers=new g(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!N&&_._bodyInit!=null&&(N=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new g(P.headers)),this.method=C(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&N)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(N),(this.method==="GET"||this.method==="HEAD")&&(P.cache==="no-store"||P.cache==="no-cache")){var D=/([?&])_=[^&]*/;if(D.test(this.url))this.url=this.url.replace(D,"$1_="+new Date().getTime());else{var L=/\?/;this.url+=(L.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function A(_){var P=new FormData;return _.trim().split("&").forEach(function(N){if(N){var D=N.split("="),L=D.shift().replace(/\+/g," "),U=D.join("=").replace(/\+/g," ");P.append(decodeURIComponent(L),decodeURIComponent(U))}}),P}function T(_){var P=new g,N=_.replace(/\r?\n[\t ]+/g," ");return N.split("\r").map(function(D){return D.indexOf(`
`)===0?D.substr(1,D.length):D}).forEach(function(D){var L=D.split(":"),U=L.shift().trim();if(U){var V=L.join(":").trim();P.append(U,V)}}),P}k.call(E.prototype);function I(_,P){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.ok=this.status>=200&&this.status<300,this.statusText=P.statusText===void 0?"":""+P.statusText,this.headers=new g(P.headers),this.url=P.url||"",this._initBody(_)}k.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},I.error=function(){var _=new I(null,{status:0,statusText:""});return _.type="error",_};var F=[301,302,303,307,308];I.redirect=function(_,P){if(F.indexOf(P)===-1)throw new RangeError("Invalid status code");return new I(null,{status:P,headers:{location:_}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(P,N){this.message=P,this.name=N;var D=Error(P);this.stack=D.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function R(_,P){return new Promise(function(N,D){var L=new E(_,P);if(L.signal&&L.signal.aborted)return D(new s.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function V(){U.abort()}U.onload=function(){var Q={status:U.status,statusText:U.statusText,headers:T(U.getAllResponseHeaders()||"")};Q.url="responseURL"in U?U.responseURL:Q.headers.get("X-Request-URL");var ye="response"in U?U.response:U.responseText;setTimeout(function(){N(new I(ye,Q))},0)},U.onerror=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},U.onabort=function(){setTimeout(function(){D(new s.DOMException("Aborted","AbortError"))},0)};function oe(Q){try{return Q===""&&a.location.href?a.location.href:Q}catch{return Q}}U.open(L.method,oe(L.url),!0),L.credentials==="include"?U.withCredentials=!0:L.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(l.blob?U.responseType="blob":l.arrayBuffer&&L.headers.get("Content-Type")&&L.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(U.responseType="arraybuffer")),P&&typeof P.headers=="object"&&!(P.headers instanceof g)?Object.getOwnPropertyNames(P.headers).forEach(function(Q){U.setRequestHeader(Q,h(P.headers[Q]))}):L.headers.forEach(function(Q,ye){U.setRequestHeader(ye,Q)}),L.signal&&(L.signal.addEventListener("abort",V),U.onreadystatechange=function(){U.readyState===4&&L.signal.removeEventListener("abort",V)}),U.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return R.polyfill=!0,a.fetch||(a.fetch=R,a.Headers=g,a.Request=E,a.Response=I),s.Headers=g,s.Request=E,s.Response=I,s.fetch=R,s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(lw,lw.exports)),lw.exports}(function(e,t){var n;if(typeof fetch=="function"&&(typeof Ii<"u"&&Ii.fetch?n=Ii.fetch:typeof window<"u"&&window.fetch?n=window.fetch:n=fetch),typeof $ft<"u"&&typeof window>"u"){var r=n||Aft();r.default&&(r=r.default),t.default=r,e.exports=t.default}})(UF,UF.exports);var ode=UF.exports;const sde=Da(ode),Eq=Bq({__proto__:null,default:sde},[ode]);function _q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_q(Object(n),!0).forEach(function(r){Tft(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_q(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tft(e,t,n){return(t=Pft(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pft(e){var t=Mft(e,"string");return Ud(t)=="symbol"?t:t+""}function Mft(e,t){if(Ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}var Rl;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?Rl=global.fetch:typeof window<"u"&&window.fetch?Rl=window.fetch:Rl=fetch);var fv;ide()&&(typeof global<"u"&&global.XMLHttpRequest?fv=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(fv=window.XMLHttpRequest));var Kk;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Kk=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Kk=window.ActiveXObject));!Rl&&Eq&&!fv&&!Kk&&(Rl=sde||Eq);typeof Rl!="function"&&(Rl=void 0);var VF=function(t,n){if(n&&Ud(n)==="object"){var r="";for(var i in n)r+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);if(!r)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+r.slice(1)}return t},Aq=function(t,n,r,i){var o=function(l){if(!l.ok)return r(l.statusText||"Error",{status:l.status});l.text().then(function(u){r(null,{status:l.status,data:u})}).catch(r)};if(i){var s=i(t,n);if(s instanceof Promise){s.then(o).catch(r);return}}typeof fetch=="function"?fetch(t,n).then(o).catch(r):Rl(t,n).then(o).catch(r)},Tq=!1,Fft=function(t,n,r,i){t.queryStringParams&&(n=VF(n,t.queryStringParams));var o=$q({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(o["Content-Type"]="application/json");var s=typeof t.requestOptions=="function"?t.requestOptions(r):t.requestOptions,a=$q({method:r?"POST":"GET",body:r?t.stringify(r):void 0,headers:o},Tq?{}:s),l=typeof t.alternateFetch=="function"&&t.alternateFetch.length>=1?t.alternateFetch:void 0;try{Aq(n,a,i,l)}catch(u){if(!s||Object.keys(s).length===0||!u.message||u.message.indexOf("not implemented")<0)return i(u);try{Object.keys(s).forEach(function(c){delete a[c]}),Aq(n,a,i,l),Tq=!0}catch(c){i(c)}}},Rft=function(t,n,r,i){r&&Ud(r)==="object"&&(r=VF("",r).slice(1)),t.queryStringParams&&(n=VF(n,t.queryStringParams));try{var o;fv?o=new fv:o=new Kk("MSXML2.XMLHTTP.3.0"),o.open(r?"POST":"GET",n,1),t.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!t.withCredentials,r&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var s=t.customHeaders;if(s=typeof s=="function"?s():s,s)for(var a in s)o.setRequestHeader(a,s[a]);o.onreadystatechange=function(){o.readyState>3&&i(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(r)}catch(l){console&&console.log(l)}},Oft=function(t,n,r,i){if(typeof r=="function"&&(i=r,r=void 0),i=i||function(){},Rl&&n.indexOf("file:")!==0)return Fft(t,n,r,i);if(ide()||typeof ActiveXObject=="function")return Rft(t,n,r,i);i(new Error("No fetch and no xhr implementation found!"))};function nm(e){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nm(e)}function Pq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function p5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pq(Object(n),!0).forEach(function(r){ade(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pq(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lde(r.key),r)}}function Ift(e,t,n){return t&&Nft(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ade(e,t,n){return(t=lde(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lde(e){var t=Lft(e,"string");return nm(t)=="symbol"?t:t+""}function Lft(e,t){if(nm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zft=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,i){return ade({},r,i||"")},parseLoadPayload:function(n,r){},request:Oft,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},ude=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Dft(this,e),this.services=t,this.options=n,this.allOptions=r,this.type="backend",this.init(t,n,r)}return Ift(e,[{key:"init",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=p5(p5(p5({},zft()),this.options||{}),i),this.allOptions=o,this.services&&this.options.reloadInterval){var s=setInterval(function(){return r.reload()},this.options.reloadInterval);nm(s)==="object"&&typeof s.unref=="function"&&s.unref()}}},{key:"readMulti",value:function(n,r,i){this._readAny(n,n,r,r,i)}},{key:"read",value:function(n,r,i){this._readAny([n],n,[r],r,i)}},{key:"_readAny",value:function(n,r,i,o,s){var a=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(n,i)),l=_ft(l),l.then(function(u){if(!u)return s(null,{});var c=a.services.interpolator.interpolate(u,{lng:n.join("+"),ns:i.join("+")});a.loadUrl(c,s,r,o)})}},{key:"loadUrl",value:function(n,r,i,o){var s=this,a=typeof i=="string"?[i]:i,l=typeof o=="string"?[o]:o,u=this.options.parseLoadPayload(a,l);this.options.request(this.options,n,u,function(c,f){if(f&&(f.status>=500&&f.status<600||!f.status))return r("failed loading "+n+"; status code: "+f.status,!0);if(f&&f.status>=400&&f.status<500)return r("failed loading "+n+"; status code: "+f.status,!1);if(!f&&c&&c.message&&c.message.toLowerCase().indexOf("failed")>-1&&(c.message.indexOf("fetch")>-1||c.message.toLowerCase().indexOf("network")>-1))return r("failed loading "+n+": "+c.message,!0);if(c)return r(c,!1);var d,h;try{typeof f.data=="string"?d=s.options.parse(f.data,i,o):d=f.data}catch{h="failed parsing "+n+" to json"}if(h)return r(h,!1);r(null,d)})}},{key:"create",value:function(n,r,i,o,s){var a=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var l=this.options.parsePayload(r,i,o),u=0,c=[],f=[];n.forEach(function(d){var h=a.options.addPath;typeof a.options.addPath=="function"&&(h=a.options.addPath(d,r));var p=a.services.interpolator.interpolate(h,{lng:d,ns:r});a.options.request(a.options,p,l,function(g,m){u+=1,c.push(g),f.push(m),u===n.length&&typeof s=="function"&&s(c,f)})})}}},{key:"reload",value:function(){var n=this,r=this.services,i=r.backendConnector,o=r.languageUtils,s=r.logger,a=i.language;if(!(a&&a.toLowerCase()==="cimode")){var l=[],u=function(f){var d=o.toResolveHierarchy(f);d.forEach(function(h){l.indexOf(h)<0&&l.push(h)})};u(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(c){return u(c)}),l.forEach(function(c){n.allOptions.ns.forEach(function(f){i.read(c,f,"read",null,null,function(d,h){d&&s.warn("loading namespace ".concat(f," for language ").concat(c," failed"),d),!d&&h&&s.log("loaded namespace ".concat(f," for language ").concat(c),h),i.loaded("".concat(c,"|").concat(f),d,h)})})})}}}])}();ude.type="backend";Pr.use(ude).use(rde).use(Nlt).init({supportedLngs:["en","ko"],fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"/Swipytics/locales/{{lng}}/translation.json"},react:{useSuspense:!1}});const jft=new Ost;nde(document.getElementById("root")).render($.jsx(M.StrictMode,{children:$.jsx(zst,{client:jft,children:$.jsx(y$e,{theme:fft,children:$.jsx(hc,{flexDir:"column",minH:"100dvh",p:0,m:0,w:"full",children:$.jsx(cft,{})})})})}))});export default Bft();
