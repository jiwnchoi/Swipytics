var xe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var at=xe((ct,M)=>{/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B=Symbol("Comlink.proxy"),_e=Symbol("Comlink.endpoint"),Le=Symbol("Comlink.releaseProxy"),$=Symbol("Comlink.finalizer"),O=Symbol("Comlink.thrown"),G=e=>typeof e=="object"&&e!==null||typeof e=="function",Re={canHandle:e=>G(e)&&e[B],serialize(e){const{port1:t,port2:n}=new MessageChannel;return C(e,t),[n,[n]]},deserialize(e){return e.start(),De(e)}},Ne={canHandle:e=>G(e)&&O in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},J=new Map([["proxy",Re],["throw",Ne]]);function $e(e,t){for(const n of e)if(t===n||n==="*"||n instanceof RegExp&&n.test(t))return!0;return!1}function C(e,t=globalThis,n=["*"]){t.addEventListener("message",function o(a){if(!a||!a.data)return;if(!$e(n,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}const{id:i,type:r,path:c}=Object.assign({path:[]},a.data),s=(a.data.argumentList||[]).map(b);let u;try{const l=c.slice(0,-1).reduce((d,y)=>d[y],e),f=c.reduce((d,y)=>d[y],e);switch(r){case"GET":u=f;break;case"SET":l[c.slice(-1)[0]]=b(a.data.value),u=!0;break;case"APPLY":u=f.apply(l,s);break;case"CONSTRUCT":{const d=new f(...s);u=ze(d)}break;case"ENDPOINT":{const{port1:d,port2:y}=new MessageChannel;C(e,y),u=Ce(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(l){u={value:l,[O]:0}}Promise.resolve(u).catch(l=>({value:l,[O]:0})).then(l=>{const[f,d]=_(l);t.postMessage(Object.assign(Object.assign({},f),{id:i}),d),r==="RELEASE"&&(t.removeEventListener("message",o),Y(t),$ in e&&typeof e[$]=="function"&&e[$]())}).catch(l=>{const[f,d]=_({value:new TypeError("Unserializable return value"),[O]:0});t.postMessage(Object.assign(Object.assign({},f),{id:i}),d)})}),t.start&&t.start()}function Te(e){return e.constructor.name==="MessagePort"}function Y(e){Te(e)&&e.close()}function De(e,t){return D(e,[],t)}function S(e){if(e)throw new Error("Proxy has been released and is not useable")}function K(e){return E(e,{type:"RELEASE"}).then(()=>{Y(e)})}const P=new WeakMap,x="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(P.get(e)||0)-1;P.set(e,t),t===0&&K(e)});function je(e,t){const n=(P.get(t)||0)+1;P.set(t,n),x&&x.register(e,t,e)}function Ae(e){x&&x.unregister(e)}function D(e,t=[],n=function(){}){let o=!1;const a=new Proxy(n,{get(i,r){if(S(o),r===Le)return()=>{Ae(a),K(e),o=!0};if(r==="then"){if(t.length===0)return{then:()=>a};const c=E(e,{type:"GET",path:t.map(s=>s.toString())}).then(b);return c.then.bind(c)}return D(e,[...t,r])},set(i,r,c){S(o);const[s,u]=_(c);return E(e,{type:"SET",path:[...t,r].map(l=>l.toString()),value:s},u).then(b)},apply(i,r,c){S(o);const s=t[t.length-1];if(s===_e)return E(e,{type:"ENDPOINT"}).then(b);if(s==="bind")return D(e,t.slice(0,-1));const[u,l]=q(c);return E(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:u},l).then(b)},construct(i,r){S(o);const[c,s]=q(r);return E(e,{type:"CONSTRUCT",path:t.map(u=>u.toString()),argumentList:c},s).then(b)}});return je(a,e),a}function Me(e){return Array.prototype.concat.apply([],e)}function q(e){const t=e.map(_);return[t.map(n=>n[0]),Me(t.map(n=>n[1]))]}const X=new WeakMap;function Ce(e,t){return X.set(e,t),e}function ze(e){return Object.assign(e,{[B]:!0})}function _(e){for(const[t,n]of J)if(n.canHandle(e)){const[o,a]=n.serialize(e);return[{type:"HANDLER",name:t,value:o},a]}return[{type:"RAW",value:e},X.get(e)||[]]}function b(e){switch(e.type){case"HANDLER":return J.get(e.name).deserialize(e.value);case"RAW":return e.value}}function E(e,t,n){return new Promise(o=>{const a=Ue();e.addEventListener("message",function i(r){!r.data||!r.data.id||r.data.id!==a||(e.removeEventListener("message",i),o(r.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)})}function Ue(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var Ie=Object.create,z=Object.defineProperty,He=Object.getOwnPropertyDescriptor,We=Object.getOwnPropertyNames,qe=Object.getPrototypeOf,Ve=Object.prototype.hasOwnProperty,m=(e,t)=>z(e,"name",{value:t,configurable:!0}),Q=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),Z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Be=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of We(t))!Ve.call(e,a)&&a!==n&&z(e,a,{get:()=>t[a],enumerable:!(o=He(t,a))||o.enumerable});return e},Ge=(e,t,n)=>(n=e!=null?Ie(qe(e)):{},Be(!e||!e.__esModule?z(n,"default",{value:e,enumerable:!0}):n,e)),Je=Z((e,t)=>{(function(n,o){typeof define=="function"&&define.amd?define("stackframe",[],o):typeof e=="object"?t.exports=o():n.StackFrame=o()})(e,function(){function n(p){return!isNaN(parseFloat(p))&&isFinite(p)}m(n,"_isNumber");function o(p){return p.charAt(0).toUpperCase()+p.substring(1)}m(o,"_capitalize");function a(p){return function(){return this[p]}}m(a,"_getter");var i=["isConstructor","isEval","isNative","isToplevel"],r=["columnNumber","lineNumber"],c=["fileName","functionName","source"],s=["args"],u=["evalOrigin"],l=i.concat(r,c,s,u);function f(p){if(p)for(var h=0;h<l.length;h++)p[l[h]]!==void 0&&this["set"+o(l[h])](p[l[h]])}m(f,"StackFrame"),f.prototype={getArgs:function(){return this.args},setArgs:function(p){if(Object.prototype.toString.call(p)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=p},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(p){if(p instanceof f)this.evalOrigin=p;else if(p instanceof Object)this.evalOrigin=new f(p);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var p=this.getFileName()||"",h=this.getLineNumber()||"",v=this.getColumnNumber()||"",k=this.getFunctionName()||"";return this.getIsEval()?p?"[eval] ("+p+":"+h+":"+v+")":"[eval]:"+h+":"+v:k?k+" ("+p+":"+h+":"+v+")":p+":"+h+":"+v}},f.fromString=m(function(p){var h=p.indexOf("("),v=p.lastIndexOf(")"),k=p.substring(0,h),Se=p.substring(h+1,v).split(","),W=p.substring(v+1);if(W.indexOf("@")===0)var N=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(W,""),Oe=N[1],Fe=N[2],Pe=N[3];return new f({functionName:k,args:Se||void 0,fileName:Oe,lineNumber:Fe||void 0,columnNumber:Pe||void 0})},"StackFrame$$fromString");for(var d=0;d<i.length;d++)f.prototype["get"+o(i[d])]=a(i[d]),f.prototype["set"+o(i[d])]=function(p){return function(h){this[p]=!!h}}(i[d]);for(var y=0;y<r.length;y++)f.prototype["get"+o(r[y])]=a(r[y]),f.prototype["set"+o(r[y])]=function(p){return function(h){if(!n(h))throw new TypeError(p+" must be a Number");this[p]=Number(h)}}(r[y]);for(var g=0;g<c.length;g++)f.prototype["get"+o(c[g])]=a(c[g]),f.prototype["set"+o(c[g])]=function(p){return function(h){this[p]=String(h)}}(c[g]);return f})}),Ye=Z((e,t)=>{(function(n,o){typeof define=="function"&&define.amd?define("error-stack-parser",["stackframe"],o):typeof e=="object"?t.exports=o(Je()):n.ErrorStackParser=o(n.StackFrame)})(e,m(function(n){var o=/(^|@)\S+:\d+/,a=/^\s*at .*(\S+:\d+|\(native\))/m,i=/^(eval@)?(\[native code])?$/;return{parse:m(function(r){if(typeof r.stacktrace<"u"||typeof r["opera#sourceloc"]<"u")return this.parseOpera(r);if(r.stack&&r.stack.match(a))return this.parseV8OrIE(r);if(r.stack)return this.parseFFOrSafari(r);throw new Error("Cannot parse given Error object")},"ErrorStackParser$$parse"),extractLocation:m(function(r){if(r.indexOf(":")===-1)return[r];var c=/(.+?)(?::(\d+))?(?::(\d+))?$/,s=c.exec(r.replace(/[()]/g,""));return[s[1],s[2]||void 0,s[3]||void 0]},"ErrorStackParser$$extractLocation"),parseV8OrIE:m(function(r){var c=r.stack.split(`
`).filter(function(s){return!!s.match(a)},this);return c.map(function(s){s.indexOf("(eval ")>-1&&(s=s.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var u=s.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),l=u.match(/ (\(.+\)$)/);u=l?u.replace(l[0],""):u;var f=this.extractLocation(l?l[1]:u),d=l&&u||void 0,y=["eval","<anonymous>"].indexOf(f[0])>-1?void 0:f[0];return new n({functionName:d,fileName:y,lineNumber:f[1],columnNumber:f[2],source:s})},this)},"ErrorStackParser$$parseV8OrIE"),parseFFOrSafari:m(function(r){var c=r.stack.split(`
`).filter(function(s){return!s.match(i)},this);return c.map(function(s){if(s.indexOf(" > eval")>-1&&(s=s.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),s.indexOf("@")===-1&&s.indexOf(":")===-1)return new n({functionName:s});var u=/((.*".+"[^@]*)?[^@]*)(?:@)/,l=s.match(u),f=l&&l[1]?l[1]:void 0,d=this.extractLocation(s.replace(u,""));return new n({functionName:f,fileName:d[0],lineNumber:d[1],columnNumber:d[2],source:s})},this)},"ErrorStackParser$$parseFFOrSafari"),parseOpera:m(function(r){return!r.stacktrace||r.message.indexOf(`
`)>-1&&r.message.split(`
`).length>r.stacktrace.split(`
`).length?this.parseOpera9(r):r.stack?this.parseOpera11(r):this.parseOpera10(r)},"ErrorStackParser$$parseOpera"),parseOpera9:m(function(r){for(var c=/Line (\d+).*script (?:in )?(\S+)/i,s=r.message.split(`
`),u=[],l=2,f=s.length;l<f;l+=2){var d=c.exec(s[l]);d&&u.push(new n({fileName:d[2],lineNumber:d[1],source:s[l]}))}return u},"ErrorStackParser$$parseOpera9"),parseOpera10:m(function(r){for(var c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,s=r.stacktrace.split(`
`),u=[],l=0,f=s.length;l<f;l+=2){var d=c.exec(s[l]);d&&u.push(new n({functionName:d[3]||void 0,fileName:d[2],lineNumber:d[1],source:s[l]}))}return u},"ErrorStackParser$$parseOpera10"),parseOpera11:m(function(r){var c=r.stack.split(`
`).filter(function(s){return!!s.match(o)&&!s.match(/^Error created at/)},this);return c.map(function(s){var u=s.split("@"),l=this.extractLocation(u.pop()),f=u.shift()||"",d=f.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,y;f.match(/\(([^)]*)\)/)&&(y=f.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var g=y===void 0||y==="[arguments not available]"?void 0:y.split(",");return new n({functionName:d,args:g,fileName:l[0],lineNumber:l[1],columnNumber:l[2],source:s})},this)},"ErrorStackParser$$parseOpera11")}},"ErrorStackParser"))}),Ke=Ge(Ye()),w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&typeof process.browser>"u",ee=w&&typeof M<"u"&&typeof M.exports<"u"&&typeof Q<"u"&&typeof __dirname<"u",Xe=w&&!ee,Qe=typeof Deno<"u",te=!w&&!Qe,Ze=te&&typeof window<"u"&&typeof document<"u"&&typeof document.createElement<"u"&&typeof sessionStorage<"u",et=te&&typeof importScripts<"u"&&typeof self<"u",re,L,j,ne,U,tt=`"fetch" is not defined, maybe you're using node < 18? From Pyodide >= 0.25.0, node >= 18 is required. Older versions of Node.js may work, but it is not guaranteed or supported. Falling back to "node-fetch".`;async function I(){if(!w||(re=(await import("./__vite-browser-external-CIEyP2s7.js")).default,U=await import("./__vite-browser-external-CIEyP2s7.js"),globalThis.fetch?L=fetch:(console.warn(tt),L=(await import("./index-B489Fav_.js")).default),ne=(await import("./__vite-browser-external-CIEyP2s7.js")).default,j=await import("./__vite-browser-external-CIEyP2s7.js"),H=j.sep,typeof Q<"u"))return;let e=await import("./__vite-browser-external-CIEyP2s7.js"),t=await import("./__vite-browser-external-CIEyP2s7.js"),n=await import("./__vite-browser-external-CIEyP2s7.js"),o=await import("./__vite-browser-external-CIEyP2s7.js"),a={fs:e,crypto:t,ws:n,child_process:o};globalThis.require=function(i){return a[i]}}m(I,"initNodeModules");function ie(e,t){return j.resolve(t||".",e)}m(ie,"node_resolvePath");function oe(e,t){return t===void 0&&(t=location),new URL(e,t).toString()}m(oe,"browser_resolvePath");var A;w?A=ie:A=oe;var H;w||(H="/");function ae(e,t){return e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?{response:L(e)}:{binary:U.readFile(e).then(n=>new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}}m(ae,"node_getBinaryResponse");function se(e,t){let n=new URL(e,location);return{response:fetch(n,t?{integrity:t}:{})}}m(se,"browser_getBinaryResponse");var R;w?R=ae:R=se;async function ce(e,t){let{response:n,binary:o}=R(e,t);if(o)return o;let a=await n;if(!a.ok)throw new Error(`Failed to load '${e}': request failed.`);return new Uint8Array(await a.arrayBuffer())}m(ce,"loadBinaryFile");var F;if(Ze)F=m(async e=>await import(e),"loadScript");else if(et)F=m(async e=>{try{globalThis.importScripts(e)}catch(t){if(t instanceof TypeError)await import(e);else throw t}},"loadScript");else if(w)F=le;else throw new Error("Cannot determine runtime environment");async function le(e){e.startsWith("file://")&&(e=e.slice(7)),e.includes("://")?ne.runInThisContext(await(await L(e)).text()):await import(re.pathToFileURL(e).href)}m(le,"nodeLoadScript");async function ue(e){if(w){await I();let t=await U.readFile(e);return JSON.parse(t)}else return await(await fetch(e)).json()}m(ue,"loadLockFile");async function fe(){if(ee)return __dirname;let e;try{throw new Error}catch(o){e=o}let t=Ke.default.parse(e)[0].fileName;if(Xe){let o=await import("./__vite-browser-external-CIEyP2s7.js");return(await import("./__vite-browser-external-CIEyP2s7.js")).fileURLToPath(o.dirname(t))}let n=t.lastIndexOf(H);if(n===-1)throw new Error("Could not extract indexURL path from pyodide module location");return t.slice(0,n)}m(fe,"calculateDirname");function de(e){let t=e.FS,n=e.FS.filesystems.MEMFS,o=e.PATH,a={DIR_MODE:16895,FILE_MODE:33279,mount:function(i){if(!i.opts.fileSystemHandle)throw new Error("opts.fileSystemHandle is required");return n.mount.apply(null,arguments)},syncfs:async(i,r,c)=>{try{let s=a.getLocalSet(i),u=await a.getRemoteSet(i),l=r?u:s,f=r?s:u;await a.reconcile(i,l,f),c(null)}catch(s){c(s)}},getLocalSet:i=>{let r=Object.create(null);function c(l){return l!=="."&&l!==".."}m(c,"isRealDir");function s(l){return f=>o.join2(l,f)}m(s,"toAbsolute");let u=t.readdir(i.mountpoint).filter(c).map(s(i.mountpoint));for(;u.length;){let l=u.pop(),f=t.stat(l);t.isDir(f.mode)&&u.push.apply(u,t.readdir(l).filter(c).map(s(l))),r[l]={timestamp:f.mtime,mode:f.mode}}return{type:"local",entries:r}},getRemoteSet:async i=>{let r=Object.create(null),c=await rt(i.opts.fileSystemHandle);for(let[s,u]of c)s!=="."&&(r[o.join2(i.mountpoint,s)]={timestamp:u.kind==="file"?(await u.getFile()).lastModifiedDate:new Date,mode:u.kind==="file"?a.FILE_MODE:a.DIR_MODE});return{type:"remote",entries:r,handles:c}},loadLocalEntry:i=>{let r=t.lookupPath(i).node,c=t.stat(i);if(t.isDir(c.mode))return{timestamp:c.mtime,mode:c.mode};if(t.isFile(c.mode))return r.contents=n.getFileDataAsTypedArray(r),{timestamp:c.mtime,mode:c.mode,contents:r.contents};throw new Error("node type not supported")},storeLocalEntry:(i,r)=>{if(t.isDir(r.mode))t.mkdirTree(i,r.mode);else if(t.isFile(r.mode))t.writeFile(i,r.contents,{canOwn:!0});else throw new Error("node type not supported");t.chmod(i,r.mode),t.utime(i,r.timestamp,r.timestamp)},removeLocalEntry:i=>{var r=t.stat(i);t.isDir(r.mode)?t.rmdir(i):t.isFile(r.mode)&&t.unlink(i)},loadRemoteEntry:async i=>{if(i.kind==="file"){let r=await i.getFile();return{contents:new Uint8Array(await r.arrayBuffer()),mode:a.FILE_MODE,timestamp:r.lastModifiedDate}}else{if(i.kind==="directory")return{mode:a.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+i.kind)}},storeRemoteEntry:async(i,r,c)=>{let s=i.get(o.dirname(r)),u=t.isFile(c.mode)?await s.getFileHandle(o.basename(r),{create:!0}):await s.getDirectoryHandle(o.basename(r),{create:!0});if(u.kind==="file"){let l=await u.createWritable();await l.write(c.contents),await l.close()}i.set(r,u)},removeRemoteEntry:async(i,r)=>{await i.get(o.dirname(r)).removeEntry(o.basename(r)),i.delete(r)},reconcile:async(i,r,c)=>{let s=0,u=[];Object.keys(r.entries).forEach(function(d){let y=r.entries[d],g=c.entries[d];(!g||t.isFile(y.mode)&&y.timestamp.getTime()>g.timestamp.getTime())&&(u.push(d),s++)}),u.sort();let l=[];if(Object.keys(c.entries).forEach(function(d){r.entries[d]||(l.push(d),s++)}),l.sort().reverse(),!s)return;let f=r.type==="remote"?r.handles:c.handles;for(let d of u){let y=o.normalize(d.replace(i.mountpoint,"/")).substring(1);if(c.type==="local"){let g=f.get(y),p=await a.loadRemoteEntry(g);a.storeLocalEntry(d,p)}else{let g=a.loadLocalEntry(d);await a.storeRemoteEntry(f,y,g)}}for(let d of l)if(c.type==="local")a.removeLocalEntry(d);else{let y=o.normalize(d.replace(i.mountpoint,"/")).substring(1);await a.removeRemoteEntry(f,y)}}};e.FS.filesystems.NATIVEFS_ASYNC=a}m(de,"initializeNativeFS");var rt=m(async e=>{let t=[];async function n(a){for await(let i of a.values())t.push(i),i.kind==="directory"&&await n(i)}m(n,"collect"),await n(e);let o=new Map;o.set(".",e);for(let a of t){let i=(await e.resolve(a)).join("/");o.set(i,a)}return o},"getFsHandles");function pe(){let e={};return e.noImageDecoding=!0,e.noAudioDecoding=!0,e.noWasmDecoding=!1,e.preRun=[],e.quit=(t,n)=>{throw e.exited={status:t,toThrow:n},n},e}m(pe,"createModule");function me(e,t){e.preRun.push(function(){let n="/";try{e.FS.mkdirTree(t)}catch(o){console.error(`Error occurred while making a home directory '${t}':`),console.error(o),console.error(`Using '${n}' for a home directory instead`),t=n}e.FS.chdir(t)})}m(me,"createHomeDirectory");function ye(e,t){e.preRun.push(function(){Object.assign(e.ENV,t)})}m(ye,"setEnvironment");function he(e,t){e.preRun.push(()=>{for(let n of t)e.FS.mkdirTree(n),e.FS.mount(e.FS.filesystems.NODEFS,{root:n},n)})}m(he,"mountLocalDirectories");function ge(e,t){let n=ce(t);e.preRun.push(()=>{let o=e._py_version_major(),a=e._py_version_minor();e.FS.mkdirTree("/lib"),e.FS.mkdirTree(`/lib/python${o}.${a}/site-packages`),e.addRunDependency("install-stdlib"),n.then(i=>{e.FS.writeFile(`/lib/python${o}${a}.zip`,i)}).catch(i=>{console.error("Error occurred while installing the standard library:"),console.error(i)}).finally(()=>{e.removeRunDependency("install-stdlib")})})}m(ge,"installStdlib");function we(e,t){let n;t.stdLibURL!=null?n=t.stdLibURL:n=t.indexURL+"python_stdlib.zip",ge(e,n),me(e,t.env.HOME),ye(e,t.env),he(e,t._node_mounts),e.preRun.push(()=>de(e))}m(we,"initializeFileSystem");function ve(e,t){let{binary:n,response:o}=R(t+"pyodide.asm.wasm");e.instantiateWasm=function(a,i){return async function(){try{let r;o?r=await WebAssembly.instantiateStreaming(o,a):r=await WebAssembly.instantiate(await n,a);let{instance:c,module:s}=r;typeof WasmOffsetConverter<"u"&&(wasmOffsetConverter=new WasmOffsetConverter(wasmBinary,s)),i(c,s)}catch(r){console.warn("wasm instantiation failed!"),console.warn(r)}}(),{}}}m(ve,"preloadWasm");var T="0.25.0";async function be(e={}){await I();let t=e.indexURL||await fe();t=A(t),t.endsWith("/")||(t+="/"),e.indexURL=t;let n={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt?globalThis.prompt:void 0,lockFileURL:t+"pyodide-lock.json",args:[],_node_mounts:[],env:{},packageCacheDir:t,packages:[]},o=Object.assign(n,e);o.env.HOME||(o.env.HOME="/home/pyodide");let a=pe();a.print=o.stdout,a.printErr=o.stderr,a.arguments=o.args;let i={config:o};a.API=i,i.lockFilePromise=ue(o.lockFileURL),ve(a,t),we(a,o);let r=new Promise(s=>a.postRun=s);if(a.locateFile=s=>o.indexURL+s,typeof _createPyodideModule!="function"){let s=`${o.indexURL}pyodide.asm.js`;await F(s)}if(await _createPyodideModule(a),await r,a.exited)throw a.exited.toThrow;if(e.pyproxyToStringRepr&&i.setPyProxyToStringMethod(!0),i.version!==T)throw new Error(`Pyodide version does not match: '${T}' <==> '${i.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);a.locateFile=s=>{throw new Error("Didn't expect to load any more file_packager files!")};let c=i.finalizeBootstrap();if(c.version.includes("dev")||i.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${c.version}/full/`),await i.packageIndexReady,i._pyodide._importhook.register_module_not_found_hook(i._import_name_to_package_name,i.lockfile_unvendored_stdlibs_and_test),i.lockfile_info.version!==T)throw new Error("Lock file version doesn't match Pyodide version");return i.package_loader.init_loaded_packages(),o.fullStdLib&&await c.loadPackage(i.lockfile_unvendored_stdlibs),i.initializeStreams(o.stdin,o.stdout,o.stderr),c}m(be,"loadPyodide");const Ee={},ke="api",V="app.py";async function nt(e){try{for(const[t,n]of Object.entries(Ee)){const o=`${ke}/${t}`,a=o.split("/");let i="";for(const r of a.slice(0,-1))i+=(i?"/":"")+r,e.FS.analyzePath(i).exists||e.FS.mkdir(i);e.FS.writeFile(o,n)}}catch(t){throw console.error("Failed to setup Pyodide files:",t),t}}async function it(e){const t=`${ke}/${V}`,n=Ee[V];if(!n)throw new Error(`Entry point ${t} not found`);return await e.runPythonAsync(n)}const ot={pyodide:null,async writeFile(e,t){if(!this.pyodide)throw new Error("Pyodide is not initialized");console.log(`[worker] writeFile ${e}`),this.pyodide.FS.writeFile(`${e}`,t,{encoding:"binary"})},async readFile(e){if(!this.pyodide)throw new Error("Pyodide is not initialized");return this.pyodide.FS.readFile(`${e}`)},async initialize(e=[]){console.log(`[worker] initialize pyodide, packages: ${e}`),this.pyodide=await be({indexURL:"/Swipytics/artifacts"});for(const t of e)console.log(`[worker] load package ${t}`),await this.pyodide.loadPackage(t);await nt(this.pyodide),await it(this.pyodide)},async runPython(e,t={}){if(!this.pyodide)throw new Error("Pyodide is not initialized");const n=this.pyodide.globals.get("dict")();for(const o in t)n.set(o,t[o]);return this.pyodide.runPython(e,{globals:n})},async callPythonFunction(e,t,n){if(!this.pyodide)throw new Error("Pyodide is not initialized");const o=this.pyodide.globals.get(e);if(!o)throw new Error(`Function ${e} is not defined in globals`);let a;if(t===void 0&&n===void 0)a=o.call();else if(n&&t===void 0)a=o.callKwargs(n);else{const i=this.pyodide.toPy(t);n===void 0?a=a=o(...i):a=o.callKwargs(i,n)}return a&&typeof a.toJs=="function"?a.toJs():a}};C(ot)});export default at();
